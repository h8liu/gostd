<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7371472">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7371527">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7371581">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7371632">package</span>&nbsp;<span class="ident" id="7371640">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7371645">import</span>&nbsp;<span class="op" id="7371652">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371655">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371664">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371671">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371677">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371690">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371696">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371707">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371718">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371729">&#34;testing/iotest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7371747">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7371754">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7371757">type</span>&nbsp;<span class="ident" id="7371762">writerTestEntry</span>&nbsp;<span class="keyword" id="7371778">struct</span>&nbsp;<span class="op" id="7371785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7371788">header</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7371797">*</span><span class="ident" id="7371798"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7371806">contents</span>&nbsp;<span class="builtintype" id="7371815">string</span><br>
<span class="lineno"></span><span class="op" id="7371822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7371825">type</span>&nbsp;<span class="ident" id="7371830">writerTest</span>&nbsp;<span class="keyword" id="7371841">struct</span>&nbsp;<span class="op" id="7371848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7371851">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7371859">string</span>&nbsp;<span class="comment" id="7371866">//&nbsp;filename&nbsp;of&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7371898">entries</span>&nbsp;<span class="op" id="7371906">[</span><span class="op" id="7371907">]</span><span class="op" id="7371908">*</span><span class="ident" id="7371909"><a href="/gostd/archive/tar/writer_test.go.html#7371762">writerTestEntry</a></span><br>
<span class="lineno"></span><span class="op" id="7371925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7371928">var</span>&nbsp;<span class="ident" id="7371932">writerTests</span>&nbsp;<span class="op" id="7371944">=</span>&nbsp;<span class="op" id="7371946">[</span><span class="op" id="7371947">]</span><span class="op" id="7371948">*</span><span class="ident" id="7371949"><a href="/gostd/archive/tar/writer_test.go.html#7371830">writerTest</a></span><span class="op" id="7371959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7371962">//&nbsp;The&nbsp;writer&nbsp;test&nbsp;file&nbsp;was&nbsp;produced&nbsp;with&nbsp;this&nbsp;command:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7372019">//&nbsp;tar&nbsp;(GNU&nbsp;tar)&nbsp;1.26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7372042">//&nbsp;&nbsp;&nbsp;ln&nbsp;-s&nbsp;small.txt&nbsp;link.txt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7372073">//&nbsp;&nbsp;&nbsp;tar&nbsp;-b&nbsp;1&nbsp;--format=ustar&nbsp;-c&nbsp;-f&nbsp;writer.tar&nbsp;small.txt&nbsp;small2.txt&nbsp;link.txt</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372154"><a href="/gostd/archive/tar/writer_test.go.html#7371851">file</a></span><span class="op" id="7372158">:</span>&nbsp;<span class="string" id="7372160">&#34;testdata/writer.tar&#34;</span><span class="op" id="7372181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372185"><a href="/gostd/archive/tar/writer_test.go.html#7371898">entries</a></span><span class="op" id="7372192">:</span>&nbsp;<span class="op" id="7372194">[</span><span class="op" id="7372195">]</span><span class="op" id="7372196">*</span><span class="ident" id="7372197"><a href="/gostd/archive/tar/writer_test.go.html#7371762">writerTestEntry</a></span><span class="op" id="7372212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372223"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7372229">:</span>&nbsp;<span class="op" id="7372231">&amp;</span><span class="ident" id="7372232"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7372238">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372245"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7372249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372255">&#34;small.txt&#34;</span><span class="op" id="7372266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372273"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7372277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372283">0640</span><span class="op" id="7372287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372294"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7372297">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372304">73025</span><span class="op" id="7372309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372316"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7372319">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372326">5000</span><span class="op" id="7372330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372337"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7372341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372347">5</span><span class="op" id="7372348">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372355"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7372362">:</span>&nbsp;&nbsp;<span class="ident" id="7372365"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7372369">.</span><span class="ident" id="7372370"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7372374">(</span><span class="num" id="7372375">1246508266</span><span class="op" id="7372385">,</span>&nbsp;<span class="num" id="7372387">0</span><span class="op" id="7372388">)</span><span class="op" id="7372389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372396"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7372404">:</span>&nbsp;<span class="string" id="7372406">&#39;0&#39;</span><span class="op" id="7372409">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372416"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7372421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372426">&#34;dsymonds&#34;</span><span class="op" id="7372436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372443"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7372448">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372453">&#34;eng&#34;</span><span class="op" id="7372458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372464">}</span><span class="op" id="7372465">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372471"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7372479">:</span>&nbsp;<span class="string" id="7372481">&#34;Kilts&#34;</span><span class="op" id="7372488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372493">}</span><span class="op" id="7372494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372505"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7372511">:</span>&nbsp;<span class="op" id="7372513">&amp;</span><span class="ident" id="7372514"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7372520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372527"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7372531">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372537">&#34;small2.txt&#34;</span><span class="op" id="7372549">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372556"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7372560">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372566">0640</span><span class="op" id="7372570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372577"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7372580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372587">73025</span><span class="op" id="7372592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372599"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7372602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372609">5000</span><span class="op" id="7372613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372620"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7372624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372630">11</span><span class="op" id="7372632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372639"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7372646">:</span>&nbsp;&nbsp;<span class="ident" id="7372649"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7372653">.</span><span class="ident" id="7372654"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7372658">(</span><span class="num" id="7372659">1245217492</span><span class="op" id="7372669">,</span>&nbsp;<span class="num" id="7372671">0</span><span class="op" id="7372672">)</span><span class="op" id="7372673">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372680"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7372688">:</span>&nbsp;<span class="string" id="7372690">&#39;0&#39;</span><span class="op" id="7372693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372700"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7372705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372710">&#34;dsymonds&#34;</span><span class="op" id="7372720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372727"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7372732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372737">&#34;eng&#34;</span><span class="op" id="7372742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372748">}</span><span class="op" id="7372749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372755"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7372763">:</span>&nbsp;<span class="string" id="7372765">&#34;Google.com\n&#34;</span><span class="op" id="7372779">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372784">}</span><span class="op" id="7372785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7372790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372796"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7372802">:</span>&nbsp;<span class="op" id="7372804">&amp;</span><span class="ident" id="7372805"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7372811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372818"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7372822">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7372828">&#34;link.txt&#34;</span><span class="op" id="7372838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372845"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7372849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372855">0777</span><span class="op" id="7372859">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372866"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7372869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372876">1000</span><span class="op" id="7372880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372887"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7372890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372897">1000</span><span class="op" id="7372901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372908"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7372912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7372918">0</span><span class="op" id="7372919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372926"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7372933">:</span>&nbsp;&nbsp;<span class="ident" id="7372936"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7372940">.</span><span class="ident" id="7372941"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7372945">(</span><span class="num" id="7372946">1314603082</span><span class="op" id="7372956">,</span>&nbsp;<span class="num" id="7372958">0</span><span class="op" id="7372959">)</span><span class="op" id="7372960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372967"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7372975">:</span>&nbsp;<span class="string" id="7372977">&#39;2&#39;</span><span class="op" id="7372980">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7372987"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span><span class="op" id="7372995">:</span>&nbsp;<span class="string" id="7372997">&#34;small.txt&#34;</span><span class="op" id="7373008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373015"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7373020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7373025">&#34;strings&#34;</span><span class="op" id="7373034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373041"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7373046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7373051">&#34;strings&#34;</span><span class="op" id="7373060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373066">}</span><span class="op" id="7373067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373073">//&nbsp;no&nbsp;contents</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373091">}</span><span class="op" id="7373092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373096">}</span><span class="op" id="7373097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373100">}</span><span class="op" id="7373101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373104">//&nbsp;The&nbsp;truncated&nbsp;test&nbsp;file&nbsp;was&nbsp;produced&nbsp;using&nbsp;these&nbsp;commands:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373167">//&nbsp;&nbsp;&nbsp;dd&nbsp;if=/dev/zero&nbsp;bs=1048576&nbsp;count=16384&nbsp;&gt;&nbsp;/tmp/16gig.txt</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373229">//&nbsp;&nbsp;&nbsp;tar&nbsp;-b&nbsp;1&nbsp;-c&nbsp;-f-&nbsp;/tmp/16gig.txt&nbsp;|&nbsp;dd&nbsp;bs=512&nbsp;count=8&nbsp;&gt;&nbsp;writer-big.tar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373307"><a href="/gostd/archive/tar/writer_test.go.html#7371851">file</a></span><span class="op" id="7373311">:</span>&nbsp;<span class="string" id="7373313">&#34;testdata/writer-big.tar&#34;</span><span class="op" id="7373338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373342"><a href="/gostd/archive/tar/writer_test.go.html#7371898">entries</a></span><span class="op" id="7373349">:</span>&nbsp;<span class="op" id="7373351">[</span><span class="op" id="7373352">]</span><span class="op" id="7373353">*</span><span class="ident" id="7373354"><a href="/gostd/archive/tar/writer_test.go.html#7371762">writerTestEntry</a></span><span class="op" id="7373369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373374">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373380"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7373386">:</span>&nbsp;<span class="op" id="7373388">&amp;</span><span class="ident" id="7373389"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7373395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373402"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7373406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7373412">&#34;tmp/16gig.txt&#34;</span><span class="op" id="7373427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373434"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7373438">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7373444">0640</span><span class="op" id="7373448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373455"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7373458">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7373465">73025</span><span class="op" id="7373470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373477"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7373480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7373487">5000</span><span class="op" id="7373491">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373498"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7373502">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7373508">16</span>&nbsp;<span class="op" id="7373511">&lt;&lt;</span>&nbsp;<span class="num" id="7373514">30</span><span class="op" id="7373516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373523"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7373530">:</span>&nbsp;&nbsp;<span class="ident" id="7373533"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7373537">.</span><span class="ident" id="7373538"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7373542">(</span><span class="num" id="7373543">1254699560</span><span class="op" id="7373553">,</span>&nbsp;<span class="num" id="7373555">0</span><span class="op" id="7373556">)</span><span class="op" id="7373557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373564"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7373572">:</span>&nbsp;<span class="string" id="7373574">&#39;0&#39;</span><span class="op" id="7373577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373584"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7373589">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7373594">&#34;dsymonds&#34;</span><span class="op" id="7373604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373611"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7373616">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7373621">&#34;eng&#34;</span><span class="op" id="7373626">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373632">}</span><span class="op" id="7373633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373639">//&nbsp;fake&nbsp;contents</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373660"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7373668">:</span>&nbsp;<span class="ident" id="7373670"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7373677">.</span><span class="ident" id="7373678"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7373684">(</span><span class="string" id="7373685">&#34;\x00&#34;</span><span class="op" id="7373691">,</span>&nbsp;<span class="num" id="7373693">4</span><span class="op" id="7373694">&lt;&lt;</span><span class="num" id="7373696">10</span><span class="op" id="7373698">)</span><span class="op" id="7373699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373704">}</span><span class="op" id="7373705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373709">}</span><span class="op" id="7373710">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373713">}</span><span class="op" id="7373714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373717">//&nbsp;The&nbsp;truncated&nbsp;test&nbsp;file&nbsp;was&nbsp;produced&nbsp;using&nbsp;these&nbsp;commands:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373780">//&nbsp;&nbsp;&nbsp;dd&nbsp;if=/dev/zero&nbsp;bs=1048576&nbsp;count=16384&nbsp;&gt;&nbsp;(longname/)*15&nbsp;/16gig.txt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7373853">//&nbsp;&nbsp;&nbsp;tar&nbsp;-b&nbsp;1&nbsp;-c&nbsp;-f-&nbsp;(longname/)*15&nbsp;/16gig.txt&nbsp;|&nbsp;dd&nbsp;bs=512&nbsp;count=8&nbsp;&gt;&nbsp;writer-big-long.tar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7373943">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373947"><a href="/gostd/archive/tar/writer_test.go.html#7371851">file</a></span><span class="op" id="7373951">:</span>&nbsp;<span class="string" id="7373953">&#34;testdata/writer-big-long.tar&#34;</span><span class="op" id="7373983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7373987"><a href="/gostd/archive/tar/writer_test.go.html#7371898">entries</a></span><span class="op" id="7373994">:</span>&nbsp;<span class="op" id="7373996">[</span><span class="op" id="7373997">]</span><span class="op" id="7373998">*</span><span class="ident" id="7373999"><a href="/gostd/archive/tar/writer_test.go.html#7371762">writerTestEntry</a></span><span class="op" id="7374014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374025"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7374031">:</span>&nbsp;<span class="op" id="7374033">&amp;</span><span class="ident" id="7374034"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7374040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374047"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7374051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374057"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7374064">.</span><span class="ident" id="7374065"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7374071">(</span><span class="string" id="7374072">&#34;longname/&#34;</span><span class="op" id="7374083">,</span>&nbsp;<span class="num" id="7374085">15</span><span class="op" id="7374087">)</span>&nbsp;<span class="op" id="7374089">+</span>&nbsp;<span class="string" id="7374091">&#34;16gig.txt&#34;</span><span class="op" id="7374102">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374109"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7374113">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374119">0644</span><span class="op" id="7374123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374130"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7374133">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374140">1000</span><span class="op" id="7374144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374151"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7374154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374161">1000</span><span class="op" id="7374165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374172"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7374176">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374182">16</span>&nbsp;<span class="op" id="7374185">&lt;&lt;</span>&nbsp;<span class="num" id="7374188">30</span><span class="op" id="7374190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374197"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7374204">:</span>&nbsp;&nbsp;<span class="ident" id="7374207"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7374211">.</span><span class="ident" id="7374212"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7374216">(</span><span class="num" id="7374217">1399583047</span><span class="op" id="7374227">,</span>&nbsp;<span class="num" id="7374229">0</span><span class="op" id="7374230">)</span><span class="op" id="7374231">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374238"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7374246">:</span>&nbsp;<span class="string" id="7374248">&#39;0&#39;</span><span class="op" id="7374251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374258"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7374263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7374268">&#34;guillaume&#34;</span><span class="op" id="7374279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374286"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7374291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7374296">&#34;guillaume&#34;</span><span class="op" id="7374307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374313">}</span><span class="op" id="7374314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7374320">//&nbsp;fake&nbsp;contents</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374341"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7374349">:</span>&nbsp;<span class="ident" id="7374351"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7374358">.</span><span class="ident" id="7374359"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7374365">(</span><span class="string" id="7374366">&#34;\x00&#34;</span><span class="op" id="7374372">,</span>&nbsp;<span class="num" id="7374374">4</span><span class="op" id="7374375">&lt;&lt;</span><span class="num" id="7374377">10</span><span class="op" id="7374379">)</span><span class="op" id="7374380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374385">}</span><span class="op" id="7374386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374390">}</span><span class="op" id="7374391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374394">}</span><span class="op" id="7374395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7374398">//&nbsp;This&nbsp;file&nbsp;was&nbsp;produced&nbsp;using&nbsp;gnu&nbsp;tar&nbsp;1.17</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7374444">//&nbsp;gnutar&nbsp;&nbsp;-b&nbsp;4&nbsp;--format=ustar&nbsp;(longname/)*15&nbsp;+&nbsp;file.txt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374506"><a href="/gostd/archive/tar/writer_test.go.html#7371851">file</a></span><span class="op" id="7374510">:</span>&nbsp;<span class="string" id="7374512">&#34;testdata/ustar.tar&#34;</span><span class="op" id="7374532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374536"><a href="/gostd/archive/tar/writer_test.go.html#7371898">entries</a></span><span class="op" id="7374543">:</span>&nbsp;<span class="op" id="7374545">[</span><span class="op" id="7374546">]</span><span class="op" id="7374547">*</span><span class="ident" id="7374548"><a href="/gostd/archive/tar/writer_test.go.html#7371762">writerTestEntry</a></span><span class="op" id="7374563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374568">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374574"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7374580">:</span>&nbsp;<span class="op" id="7374582">&amp;</span><span class="ident" id="7374583"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7374589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374596"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7374600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374606"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7374613">.</span><span class="ident" id="7374614"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7374620">(</span><span class="string" id="7374621">&#34;longname/&#34;</span><span class="op" id="7374632">,</span>&nbsp;<span class="num" id="7374634">15</span><span class="op" id="7374636">)</span>&nbsp;<span class="op" id="7374638">+</span>&nbsp;<span class="string" id="7374640">&#34;file.txt&#34;</span><span class="op" id="7374650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374657"><a href="/gostd/archive/tar/common.go.html#5611381">Mode</a></span><span class="op" id="7374661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374667">0644</span><span class="op" id="7374671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374678"><a href="/gostd/archive/tar/common.go.html#5611431">Uid</a></span><span class="op" id="7374681">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374688">0765</span><span class="op" id="7374692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374699"><a href="/gostd/archive/tar/common.go.html#5611473">Gid</a></span><span class="op" id="7374702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374709">024</span><span class="op" id="7374712">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374719"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7374723">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7374729">06</span><span class="op" id="7374731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374738"><a href="/gostd/archive/tar/common.go.html#5611557">ModTime</a></span><span class="op" id="7374745">:</span>&nbsp;&nbsp;<span class="ident" id="7374748"><a href="/gostd/archive/tar/writer_test.go.html#7371747">time</a></span><span class="op" id="7374752">.</span><span class="ident" id="7374753"><a href="/gostd/time/time.go.html#2748704">Unix</a></span><span class="op" id="7374757">(</span><span class="num" id="7374758">1360135598</span><span class="op" id="7374768">,</span>&nbsp;<span class="num" id="7374770">0</span><span class="op" id="7374771">)</span><span class="op" id="7374772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374779"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7374787">:</span>&nbsp;<span class="string" id="7374789">&#39;0&#39;</span><span class="op" id="7374792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374799"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span><span class="op" id="7374804">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7374809">&#34;shane&#34;</span><span class="op" id="7374816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374823"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span><span class="op" id="7374828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7374833">&#34;staff&#34;</span><span class="op" id="7374840">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374846">}</span><span class="op" id="7374847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7374853"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7374861">:</span>&nbsp;<span class="string" id="7374863">&#34;hello\n&#34;</span><span class="op" id="7374872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374877">}</span><span class="op" id="7374878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374882">}</span><span class="op" id="7374883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7374886">}</span><span class="op" id="7374887">,</span><br>
<span class="lineno">150</span><span class="op" id="7374889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7374892">//&nbsp;Render&nbsp;byte&nbsp;array&nbsp;in&nbsp;a&nbsp;two-character&nbsp;hexadecimal&nbsp;string,&nbsp;spaced&nbsp;for&nbsp;easy&nbsp;visual&nbsp;inspection.</span><br>
<span class="lineno"></span><span class="keyword" id="7374987">func</span>&nbsp;<span class="ident" id="7374992">bytestr</span><span class="op" id="7374999">(</span><span class="ident" id="7375000">offset</span>&nbsp;<span class="builtintype" id="7375007">int</span><span class="op" id="7375010">,</span>&nbsp;<span class="ident" id="7375012">b</span>&nbsp;<span class="op" id="7375014">[</span><span class="op" id="7375015">]</span><span class="builtintype" id="7375016">byte</span><span class="op" id="7375020">)</span>&nbsp;<span class="builtintype" id="7375022">string</span>&nbsp;<span class="op" id="7375029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375032">const</span>&nbsp;<span class="ident" id="7375038">rowLen</span>&nbsp;<span class="op" id="7375045">=</span>&nbsp;<span class="num" id="7375047">32</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375051">s</span>&nbsp;<span class="op" id="7375053">:=</span>&nbsp;<span class="ident" id="7375056"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7375059">.</span><span class="ident" id="7375060"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7375067">(</span><span class="string" id="7375068">&#34;%04x&nbsp;&#34;</span><span class="op" id="7375075">,</span>&nbsp;<span class="ident" id="7375077"><a href="/gostd/archive/tar/writer_test.go.html#7375000">offset</a></span><span class="op" id="7375083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375086">for</span>&nbsp;<span class="ident" id="7375090">_</span><span class="op" id="7375091">,</span>&nbsp;<span class="ident" id="7375093">ch</span>&nbsp;<span class="op" id="7375096">:=</span>&nbsp;<span class="keyword" id="7375099">range</span>&nbsp;<span class="ident" id="7375105"><a href="/gostd/archive/tar/writer_test.go.html#7375012">b</a></span>&nbsp;<span class="op" id="7375107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375111">switch</span>&nbsp;<span class="op" id="7375118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375122">case</span>&nbsp;<span class="string" id="7375127">&#39;0&#39;</span>&nbsp;<span class="op" id="7375131">&lt;=</span>&nbsp;<span class="ident" id="7375134"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375137">&amp;&amp;</span>&nbsp;<span class="ident" id="7375140"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375143">&lt;=</span>&nbsp;<span class="string" id="7375146">&#39;9&#39;</span><span class="op" id="7375149">,</span>&nbsp;<span class="string" id="7375151">&#39;A&#39;</span>&nbsp;<span class="op" id="7375155">&lt;=</span>&nbsp;<span class="ident" id="7375158"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375161">&amp;&amp;</span>&nbsp;<span class="ident" id="7375164"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375167">&lt;=</span>&nbsp;<span class="string" id="7375170">&#39;Z&#39;</span><span class="op" id="7375173">,</span>&nbsp;<span class="string" id="7375175">&#39;a&#39;</span>&nbsp;<span class="op" id="7375179">&lt;=</span>&nbsp;<span class="ident" id="7375182"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375185">&amp;&amp;</span>&nbsp;<span class="ident" id="7375188"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span>&nbsp;<span class="op" id="7375191">&lt;=</span>&nbsp;<span class="string" id="7375194">&#39;z&#39;</span><span class="op" id="7375197">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375202"><a href="/gostd/archive/tar/writer_test.go.html#7375051">s</a></span>&nbsp;<span class="op" id="7375204">+=</span>&nbsp;<span class="ident" id="7375207"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7375210">.</span><span class="ident" id="7375211"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7375218">(</span><span class="string" id="7375219">&#34;&nbsp;&nbsp;%c&#34;</span><span class="op" id="7375225">,</span>&nbsp;<span class="ident" id="7375227"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span><span class="op" id="7375229">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375233">default</span><span class="op" id="7375240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375245"><a href="/gostd/archive/tar/writer_test.go.html#7375051">s</a></span>&nbsp;<span class="op" id="7375247">+=</span>&nbsp;<span class="ident" id="7375250"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7375253">.</span><span class="ident" id="7375254"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7375261">(</span><span class="string" id="7375262">&#34;&nbsp;%02x&#34;</span><span class="op" id="7375269">,</span>&nbsp;<span class="ident" id="7375271"><a href="/gostd/archive/tar/writer_test.go.html#7375093">ch</a></span><span class="op" id="7375273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375283">return</span>&nbsp;<span class="ident" id="7375290"><a href="/gostd/archive/tar/writer_test.go.html#7375051">s</a></span><br>
<span class="lineno">165</span><span class="op" id="7375292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7375295">//&nbsp;Render&nbsp;a&nbsp;pseudo-diff&nbsp;between&nbsp;two&nbsp;blocks&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="7375348">func</span>&nbsp;<span class="ident" id="7375353">bytediff</span><span class="op" id="7375361">(</span><span class="ident" id="7375362">a</span>&nbsp;<span class="op" id="7375364">[</span><span class="op" id="7375365">]</span><span class="builtintype" id="7375366">byte</span><span class="op" id="7375370">,</span>&nbsp;<span class="ident" id="7375372">b</span>&nbsp;<span class="op" id="7375374">[</span><span class="op" id="7375375">]</span><span class="builtintype" id="7375376">byte</span><span class="op" id="7375380">)</span>&nbsp;<span class="builtintype" id="7375382">string</span>&nbsp;<span class="op" id="7375389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375392">const</span>&nbsp;<span class="ident" id="7375398">rowLen</span>&nbsp;<span class="op" id="7375405">=</span>&nbsp;<span class="num" id="7375407">32</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375411">s</span>&nbsp;<span class="op" id="7375413">:=</span>&nbsp;<span class="ident" id="7375416"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7375419">.</span><span class="ident" id="7375420"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7375427">(</span><span class="string" id="7375428">&#34;(%d&nbsp;bytes&nbsp;vs.&nbsp;%d&nbsp;bytes)\n&#34;</span><span class="op" id="7375455">,</span>&nbsp;<span class="builtinfunc" id="7375457">len</span><span class="op" id="7375460">(</span><span class="ident" id="7375461"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375462">)</span><span class="op" id="7375463">,</span>&nbsp;<span class="builtinfunc" id="7375465">len</span><span class="op" id="7375468">(</span><span class="ident" id="7375469"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375470">)</span><span class="op" id="7375471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375474">for</span>&nbsp;<span class="ident" id="7375478">offset</span>&nbsp;<span class="op" id="7375485">:=</span>&nbsp;<span class="num" id="7375488">0</span><span class="op" id="7375489">;</span>&nbsp;<span class="builtinfunc" id="7375491">len</span><span class="op" id="7375494">(</span><span class="ident" id="7375495"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375496">)</span><span class="op" id="7375497">+</span><span class="builtinfunc" id="7375498">len</span><span class="op" id="7375501">(</span><span class="ident" id="7375502"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375503">)</span>&nbsp;<span class="op" id="7375505">&gt;</span>&nbsp;<span class="num" id="7375507">0</span><span class="op" id="7375508">;</span>&nbsp;<span class="ident" id="7375510"><a href="/gostd/archive/tar/writer_test.go.html#7375478">offset</a></span>&nbsp;<span class="op" id="7375517">+=</span>&nbsp;<span class="ident" id="7375520"><a href="/gostd/archive/tar/writer_test.go.html#7375398">rowLen</a></span>&nbsp;<span class="op" id="7375527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375531">na</span><span class="op" id="7375533">,</span>&nbsp;<span class="ident" id="7375535">nb</span>&nbsp;<span class="op" id="7375538">:=</span>&nbsp;<span class="ident" id="7375541"><a href="/gostd/archive/tar/writer_test.go.html#7375398">rowLen</a></span><span class="op" id="7375547">,</span>&nbsp;<span class="ident" id="7375549"><a href="/gostd/archive/tar/writer_test.go.html#7375398">rowLen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375558">if</span>&nbsp;<span class="ident" id="7375561"><a href="/gostd/archive/tar/writer_test.go.html#7375531">na</a></span>&nbsp;<span class="op" id="7375564">&gt;</span>&nbsp;<span class="builtinfunc" id="7375566">len</span><span class="op" id="7375569">(</span><span class="ident" id="7375570"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375571">)</span>&nbsp;<span class="op" id="7375573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375578"><a href="/gostd/archive/tar/writer_test.go.html#7375531">na</a></span>&nbsp;<span class="op" id="7375581">=</span>&nbsp;<span class="builtinfunc" id="7375583">len</span><span class="op" id="7375586">(</span><span class="ident" id="7375587"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375588">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375596">if</span>&nbsp;<span class="ident" id="7375599"><a href="/gostd/archive/tar/writer_test.go.html#7375535">nb</a></span>&nbsp;<span class="op" id="7375602">&gt;</span>&nbsp;<span class="builtinfunc" id="7375604">len</span><span class="op" id="7375607">(</span><span class="ident" id="7375608"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375609">)</span>&nbsp;<span class="op" id="7375611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375616"><a href="/gostd/archive/tar/writer_test.go.html#7375535">nb</a></span>&nbsp;<span class="op" id="7375619">=</span>&nbsp;<span class="builtinfunc" id="7375621">len</span><span class="op" id="7375624">(</span><span class="ident" id="7375625"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375634">sa</span>&nbsp;<span class="op" id="7375637">:=</span>&nbsp;<span class="ident" id="7375640"><a href="/gostd/archive/tar/writer_test.go.html#7374992">bytestr</a></span><span class="op" id="7375647">(</span><span class="ident" id="7375648"><a href="/gostd/archive/tar/writer_test.go.html#7375478">offset</a></span><span class="op" id="7375654">,</span>&nbsp;<span class="ident" id="7375656"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375657">[</span><span class="num" id="7375658">0</span><span class="op" id="7375659">:</span><span class="ident" id="7375660"><a href="/gostd/archive/tar/writer_test.go.html#7375531">na</a></span><span class="op" id="7375662">]</span><span class="op" id="7375663">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375667">sb</span>&nbsp;<span class="op" id="7375670">:=</span>&nbsp;<span class="ident" id="7375673"><a href="/gostd/archive/tar/writer_test.go.html#7374992">bytestr</a></span><span class="op" id="7375680">(</span><span class="ident" id="7375681"><a href="/gostd/archive/tar/writer_test.go.html#7375478">offset</a></span><span class="op" id="7375687">,</span>&nbsp;<span class="ident" id="7375689"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375690">[</span><span class="num" id="7375691">0</span><span class="op" id="7375692">:</span><span class="ident" id="7375693"><a href="/gostd/archive/tar/writer_test.go.html#7375535">nb</a></span><span class="op" id="7375695">]</span><span class="op" id="7375696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375700">if</span>&nbsp;<span class="ident" id="7375703"><a href="/gostd/archive/tar/writer_test.go.html#7375634">sa</a></span>&nbsp;<span class="op" id="7375706">!=</span>&nbsp;<span class="ident" id="7375709"><a href="/gostd/archive/tar/writer_test.go.html#7375667">sb</a></span>&nbsp;<span class="op" id="7375712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375717"><a href="/gostd/archive/tar/writer_test.go.html#7375411">s</a></span>&nbsp;<span class="op" id="7375719">+=</span>&nbsp;<span class="ident" id="7375722"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7375725">.</span><span class="ident" id="7375726"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7375733">(</span><span class="string" id="7375734">&#34;-%v\n+%v\n&#34;</span><span class="op" id="7375746">,</span>&nbsp;<span class="ident" id="7375748"><a href="/gostd/archive/tar/writer_test.go.html#7375634">sa</a></span><span class="op" id="7375750">,</span>&nbsp;<span class="ident" id="7375752"><a href="/gostd/archive/tar/writer_test.go.html#7375667">sb</a></span><span class="op" id="7375754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375762"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span>&nbsp;<span class="op" id="7375764">=</span>&nbsp;<span class="ident" id="7375766"><a href="/gostd/archive/tar/writer_test.go.html#7375362">a</a></span><span class="op" id="7375767">[</span><span class="ident" id="7375768"><a href="/gostd/archive/tar/writer_test.go.html#7375531">na</a></span><span class="op" id="7375770">:</span><span class="op" id="7375771">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375775"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span>&nbsp;<span class="op" id="7375777">=</span>&nbsp;<span class="ident" id="7375779"><a href="/gostd/archive/tar/writer_test.go.html#7375372">b</a></span><span class="op" id="7375780">[</span><span class="ident" id="7375781"><a href="/gostd/archive/tar/writer_test.go.html#7375535">nb</a></span><span class="op" id="7375783">:</span><span class="op" id="7375784">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7375787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375790">return</span>&nbsp;<span class="ident" id="7375797"><a href="/gostd/archive/tar/writer_test.go.html#7375411">s</a></span><br>
<span class="lineno"></span><span class="op" id="7375799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7375802">func</span>&nbsp;<span class="ident" id="7375807">TestWriter</span><span class="op" id="7375817">(</span><span class="ident" id="7375818">t</span>&nbsp;<span class="op" id="7375820">*</span><span class="ident" id="7375821"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7375828">.</span><span class="ident" id="7375829"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7375830">)</span>&nbsp;<span class="op" id="7375832">{</span><br>
<span class="lineno"></span><span class="ident" id="7375834">testLoop</span><span class="op" id="7375842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375845">for</span>&nbsp;<span class="ident" id="7375849">i</span><span class="op" id="7375850">,</span>&nbsp;<span class="ident" id="7375852">test</span>&nbsp;<span class="op" id="7375857">:=</span>&nbsp;<span class="keyword" id="7375860">range</span>&nbsp;<span class="ident" id="7375866"><a href="/gostd/archive/tar/writer_test.go.html#7371932">writerTests</a></span>&nbsp;<span class="op" id="7375878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375882">expected</span><span class="op" id="7375890">,</span>&nbsp;<span class="ident" id="7375892">err</span>&nbsp;<span class="op" id="7375896">:=</span>&nbsp;<span class="ident" id="7375899"><a href="/gostd/archive/tar/writer_test.go.html#7371677">ioutil</a></span><span class="op" id="7375905">.</span><span class="ident" id="7375906"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="7375914">(</span><span class="ident" id="7375915"><a href="/gostd/archive/tar/writer_test.go.html#7375852">test</a></span><span class="op" id="7375919">.</span><span class="ident" id="7375920"><a href="/gostd/archive/tar/writer_test.go.html#7371851">file</a></span><span class="op" id="7375924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7375928">if</span>&nbsp;<span class="ident" id="7375931"><a href="/gostd/archive/tar/writer_test.go.html#7375892">err</a></span>&nbsp;<span class="op" id="7375935">!=</span>&nbsp;<span class="builtintype" id="7375938">nil</span>&nbsp;<span class="op" id="7375942">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7375947"><a href="/gostd/archive/tar/writer_test.go.html#7375818">t</a></span><span class="op" id="7375948">.</span><span class="ident" id="7375949"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7375955">(</span><span class="string" id="7375956">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7375987">,</span>&nbsp;<span class="ident" id="7375989"><a href="/gostd/archive/tar/writer_test.go.html#7375849">i</a></span><span class="op" id="7375990">,</span>&nbsp;<span class="ident" id="7375992"><a href="/gostd/archive/tar/writer_test.go.html#7375892">err</a></span><span class="op" id="7375995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376000">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376016">buf</span>&nbsp;<span class="op" id="7376020">:=</span>&nbsp;<span class="builtinfunc" id="7376023">new</span><span class="op" id="7376026">(</span><span class="ident" id="7376027"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7376032">.</span><span class="ident" id="7376033"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="7376039">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376043">tw</span>&nbsp;<span class="op" id="7376046">:=</span>&nbsp;<span class="ident" id="7376049"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7376058">(</span><span class="ident" id="7376059"><a href="/gostd/archive/tar/writer_test.go.html#7371729">iotest</a></span><span class="op" id="7376065">.</span><span class="ident" id="7376066"><a href="/gostd/testing/iotest/writer.go.html#6068175">TruncateWriter</a></span><span class="op" id="7376080">(</span><span class="ident" id="7376081"><a href="/gostd/archive/tar/writer_test.go.html#7376016">buf</a></span><span class="op" id="7376084">,</span>&nbsp;<span class="num" id="7376086">4</span><span class="op" id="7376087">&lt;&lt;</span><span class="num" id="7376089">10</span><span class="op" id="7376091">)</span><span class="op" id="7376092">)</span>&nbsp;<span class="comment" id="7376094">//&nbsp;only&nbsp;catch&nbsp;the&nbsp;first&nbsp;4&nbsp;KB</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376125">big</span>&nbsp;<span class="op" id="7376129">:=</span>&nbsp;<span class="builtintype" id="7376132">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376140">for</span>&nbsp;<span class="ident" id="7376144">j</span><span class="op" id="7376145">,</span>&nbsp;<span class="ident" id="7376147">entry</span>&nbsp;<span class="op" id="7376153">:=</span>&nbsp;<span class="keyword" id="7376156">range</span>&nbsp;<span class="ident" id="7376162"><a href="/gostd/archive/tar/writer_test.go.html#7375852">test</a></span><span class="op" id="7376166">.</span><span class="ident" id="7376167"><a href="/gostd/archive/tar/writer_test.go.html#7371898">entries</a></span>&nbsp;<span class="op" id="7376175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376180"><a href="/gostd/archive/tar/writer_test.go.html#7376125">big</a></span>&nbsp;<span class="op" id="7376184">=</span>&nbsp;<span class="ident" id="7376186"><a href="/gostd/archive/tar/writer_test.go.html#7376125">big</a></span>&nbsp;<span class="op" id="7376190">||</span>&nbsp;<span class="ident" id="7376193"><a href="/gostd/archive/tar/writer_test.go.html#7376147">entry</a></span><span class="op" id="7376198">.</span><span class="ident" id="7376199"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7376205">.</span><span class="ident" id="7376206"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="7376211">&gt;</span>&nbsp;<span class="num" id="7376213">1</span><span class="op" id="7376214">&lt;&lt;</span><span class="num" id="7376216">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376222">if</span>&nbsp;<span class="ident" id="7376225">err</span>&nbsp;<span class="op" id="7376229">:=</span>&nbsp;<span class="ident" id="7376232"><a href="/gostd/archive/tar/writer_test.go.html#7376043">tw</a></span><span class="op" id="7376234">.</span><span class="ident" id="7376235"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7376246">(</span><span class="ident" id="7376247"><a href="/gostd/archive/tar/writer_test.go.html#7376147">entry</a></span><span class="op" id="7376252">.</span><span class="ident" id="7376253"><a href="/gostd/archive/tar/writer_test.go.html#7371788">header</a></span><span class="op" id="7376259">)</span><span class="op" id="7376260">;</span>&nbsp;<span class="ident" id="7376262"><a href="/gostd/archive/tar/writer_test.go.html#7376225">err</a></span>&nbsp;<span class="op" id="7376266">!=</span>&nbsp;<span class="builtintype" id="7376269">nil</span>&nbsp;<span class="op" id="7376273">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376279"><a href="/gostd/archive/tar/writer_test.go.html#7375818">t</a></span><span class="op" id="7376280">.</span><span class="ident" id="7376281"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7376287">(</span><span class="string" id="7376288">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Failed&nbsp;writing&nbsp;header:&nbsp;%v&#34;</span><span class="op" id="7376334">,</span>&nbsp;<span class="ident" id="7376336"><a href="/gostd/archive/tar/writer_test.go.html#7375849">i</a></span><span class="op" id="7376337">,</span>&nbsp;<span class="ident" id="7376339"><a href="/gostd/archive/tar/writer_test.go.html#7376144">j</a></span><span class="op" id="7376340">,</span>&nbsp;<span class="ident" id="7376342"><a href="/gostd/archive/tar/writer_test.go.html#7376225">err</a></span><span class="op" id="7376345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376351">continue</span>&nbsp;<span class="ident" id="7376360"><a href="/gostd/archive/tar/writer_test.go.html#7375834">testLoop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376377">if</span>&nbsp;<span class="ident" id="7376380">_</span><span class="op" id="7376381">,</span>&nbsp;<span class="ident" id="7376383">err</span>&nbsp;<span class="op" id="7376387">:=</span>&nbsp;<span class="ident" id="7376390"><a href="/gostd/archive/tar/writer_test.go.html#7371671">io</a></span><span class="op" id="7376392">.</span><span class="ident" id="7376393"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="7376404">(</span><span class="ident" id="7376405"><a href="/gostd/archive/tar/writer_test.go.html#7376043">tw</a></span><span class="op" id="7376407">,</span>&nbsp;<span class="ident" id="7376409"><a href="/gostd/archive/tar/writer_test.go.html#7376147">entry</a></span><span class="op" id="7376414">.</span><span class="ident" id="7376415"><a href="/gostd/archive/tar/writer_test.go.html#7371806">contents</a></span><span class="op" id="7376423">)</span><span class="op" id="7376424">;</span>&nbsp;<span class="ident" id="7376426"><a href="/gostd/archive/tar/writer_test.go.html#7376383">err</a></span>&nbsp;<span class="op" id="7376430">!=</span>&nbsp;<span class="builtintype" id="7376433">nil</span>&nbsp;<span class="op" id="7376437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376443"><a href="/gostd/archive/tar/writer_test.go.html#7375818">t</a></span><span class="op" id="7376444">.</span><span class="ident" id="7376445"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7376451">(</span><span class="string" id="7376452">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Failed&nbsp;writing&nbsp;contents:&nbsp;%v&#34;</span><span class="op" id="7376500">,</span>&nbsp;<span class="ident" id="7376502"><a href="/gostd/archive/tar/writer_test.go.html#7375849">i</a></span><span class="op" id="7376503">,</span>&nbsp;<span class="ident" id="7376505"><a href="/gostd/archive/tar/writer_test.go.html#7376144">j</a></span><span class="op" id="7376506">,</span>&nbsp;<span class="ident" id="7376508"><a href="/gostd/archive/tar/writer_test.go.html#7376383">err</a></span><span class="op" id="7376511">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376517">continue</span>&nbsp;<span class="ident" id="7376526"><a href="/gostd/archive/tar/writer_test.go.html#7375834">testLoop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7376546">//&nbsp;Only&nbsp;interested&nbsp;in&nbsp;Close&nbsp;failures&nbsp;for&nbsp;the&nbsp;small&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376606">if</span>&nbsp;<span class="ident" id="7376609">err</span>&nbsp;<span class="op" id="7376613">:=</span>&nbsp;<span class="ident" id="7376616"><a href="/gostd/archive/tar/writer_test.go.html#7376043">tw</a></span><span class="op" id="7376618">.</span><span class="ident" id="7376619"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7376624">(</span><span class="op" id="7376625">)</span><span class="op" id="7376626">;</span>&nbsp;<span class="ident" id="7376628"><a href="/gostd/archive/tar/writer_test.go.html#7376609">err</a></span>&nbsp;<span class="op" id="7376632">!=</span>&nbsp;<span class="builtintype" id="7376635">nil</span>&nbsp;<span class="op" id="7376639">&amp;&amp;</span>&nbsp;<span class="op" id="7376642">!</span><span class="ident" id="7376643"><a href="/gostd/archive/tar/writer_test.go.html#7376125">big</a></span>&nbsp;<span class="op" id="7376647">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376652"><a href="/gostd/archive/tar/writer_test.go.html#7375818">t</a></span><span class="op" id="7376653">.</span><span class="ident" id="7376654"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7376660">(</span><span class="string" id="7376661">&#34;test&nbsp;%d:&nbsp;Failed&nbsp;closing&nbsp;archive:&nbsp;%v&#34;</span><span class="op" id="7376698">,</span>&nbsp;<span class="ident" id="7376700"><a href="/gostd/archive/tar/writer_test.go.html#7375849">i</a></span><span class="op" id="7376701">,</span>&nbsp;<span class="ident" id="7376703"><a href="/gostd/archive/tar/writer_test.go.html#7376609">err</a></span><span class="op" id="7376706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376711">continue</span>&nbsp;<span class="ident" id="7376720"><a href="/gostd/archive/tar/writer_test.go.html#7375834">testLoop</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376736">actual</span>&nbsp;<span class="op" id="7376743">:=</span>&nbsp;<span class="ident" id="7376746"><a href="/gostd/archive/tar/writer_test.go.html#7376016">buf</a></span><span class="op" id="7376749">.</span><span class="ident" id="7376750"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7376755">(</span><span class="op" id="7376756">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376760">if</span>&nbsp;<span class="op" id="7376763">!</span><span class="ident" id="7376764"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7376769">.</span><span class="ident" id="7376770"><a href="/gostd/bytes/bytes_decl.go.html#1414806">Equal</a></span><span class="op" id="7376775">(</span><span class="ident" id="7376776"><a href="/gostd/archive/tar/writer_test.go.html#7375882">expected</a></span><span class="op" id="7376784">,</span>&nbsp;<span class="ident" id="7376786"><a href="/gostd/archive/tar/writer_test.go.html#7376736">actual</a></span><span class="op" id="7376792">)</span>&nbsp;<span class="op" id="7376794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376799"><a href="/gostd/archive/tar/writer_test.go.html#7375818">t</a></span><span class="op" id="7376800">.</span><span class="ident" id="7376801"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7376807">(</span><span class="string" id="7376808">&#34;test&nbsp;%d:&nbsp;Incorrect&nbsp;result:&nbsp;(-=expected,&nbsp;+=actual)\n%v&#34;</span><span class="op" id="7376863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7376869"><a href="/gostd/archive/tar/writer_test.go.html#7375849">i</a></span><span class="op" id="7376870">,</span>&nbsp;<span class="ident" id="7376872"><a href="/gostd/archive/tar/writer_test.go.html#7375353">bytediff</a></span><span class="op" id="7376880">(</span><span class="ident" id="7376881"><a href="/gostd/archive/tar/writer_test.go.html#7375882">expected</a></span><span class="op" id="7376889">,</span>&nbsp;<span class="ident" id="7376891"><a href="/gostd/archive/tar/writer_test.go.html#7376736">actual</a></span><span class="op" id="7376897">)</span><span class="op" id="7376898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376906">if</span>&nbsp;<span class="ident" id="7376909"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7376916">.</span><span class="ident" id="7376917"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7376922">(</span><span class="op" id="7376923">)</span>&nbsp;<span class="op" id="7376925">{</span>&nbsp;<span class="comment" id="7376927">//&nbsp;The&nbsp;second&nbsp;test&nbsp;is&nbsp;expensive.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7376963">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7376974">}</span><br>
<span class="lineno"></span><span class="op" id="7376976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7376979">func</span>&nbsp;<span class="ident" id="7376984">TestPax</span><span class="op" id="7376991">(</span><span class="ident" id="7376992">t</span>&nbsp;<span class="op" id="7376994">*</span><span class="ident" id="7376995"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7377002">.</span><span class="ident" id="7377003"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7377004">)</span>&nbsp;<span class="op" id="7377006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7377009">//&nbsp;Create&nbsp;an&nbsp;archive&nbsp;with&nbsp;a&nbsp;large&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377049">fileinfo</span><span class="op" id="7377057">,</span>&nbsp;<span class="ident" id="7377059">err</span>&nbsp;<span class="op" id="7377063">:=</span>&nbsp;<span class="ident" id="7377066"><a href="/gostd/archive/tar/writer_test.go.html#7371690">os</a></span><span class="op" id="7377068">.</span><span class="ident" id="7377069"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="7377073">(</span><span class="string" id="7377074">&#34;testdata/small.txt&#34;</span><span class="op" id="7377094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377097">if</span>&nbsp;<span class="ident" id="7377100"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377104">!=</span>&nbsp;<span class="builtintype" id="7377107">nil</span>&nbsp;<span class="op" id="7377111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377115"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377116">.</span><span class="ident" id="7377117"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377122">(</span><span class="ident" id="7377123"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span><span class="op" id="7377126">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377132">hdr</span><span class="op" id="7377135">,</span>&nbsp;<span class="ident" id="7377137"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377141">:=</span>&nbsp;<span class="ident" id="7377144"><a href="/gostd/archive/tar/common.go.html#5615634">FileInfoHeader</a></span><span class="op" id="7377158">(</span><span class="ident" id="7377159"><a href="/gostd/archive/tar/writer_test.go.html#7377049">fileinfo</a></span><span class="op" id="7377167">,</span>&nbsp;<span class="string" id="7377169">&#34;&#34;</span><span class="op" id="7377171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377174">if</span>&nbsp;<span class="ident" id="7377177"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377181">!=</span>&nbsp;<span class="builtintype" id="7377184">nil</span>&nbsp;<span class="op" id="7377188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377192"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377193">.</span><span class="ident" id="7377194"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7377200">(</span><span class="string" id="7377201">&#34;os.Stat:&nbsp;%v&#34;</span><span class="op" id="7377214">,</span>&nbsp;<span class="ident" id="7377216"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span><span class="op" id="7377219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377222">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7377225">//&nbsp;Force&nbsp;a&nbsp;PAX&nbsp;long&nbsp;name&nbsp;to&nbsp;be&nbsp;written</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377265">longName</span>&nbsp;<span class="op" id="7377274">:=</span>&nbsp;<span class="ident" id="7377277"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7377284">.</span><span class="ident" id="7377285"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7377291">(</span><span class="string" id="7377292">&#34;ab&#34;</span><span class="op" id="7377296">,</span>&nbsp;<span class="num" id="7377298">100</span><span class="op" id="7377301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377304">contents</span>&nbsp;<span class="op" id="7377313">:=</span>&nbsp;<span class="ident" id="7377316"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7377323">.</span><span class="ident" id="7377324"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7377330">(</span><span class="string" id="7377331">&#34;&nbsp;&#34;</span><span class="op" id="7377334">,</span>&nbsp;<span class="builtintype" id="7377336">int</span><span class="op" id="7377339">(</span><span class="ident" id="7377340"><a href="/gostd/archive/tar/writer_test.go.html#7377132">hdr</a></span><span class="op" id="7377343">.</span><span class="ident" id="7377344"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7377348">)</span><span class="op" id="7377349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377352"><a href="/gostd/archive/tar/writer_test.go.html#7377132">hdr</a></span><span class="op" id="7377355">.</span><span class="ident" id="7377356"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7377361">=</span>&nbsp;<span class="ident" id="7377363"><a href="/gostd/archive/tar/writer_test.go.html#7377265">longName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377373">var</span>&nbsp;<span class="ident" id="7377377">buf</span>&nbsp;<span class="ident" id="7377381"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7377386">.</span><span class="ident" id="7377387"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377395">writer</span>&nbsp;<span class="op" id="7377402">:=</span>&nbsp;<span class="ident" id="7377405"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7377414">(</span><span class="op" id="7377415">&amp;</span><span class="ident" id="7377416"><a href="/gostd/archive/tar/writer_test.go.html#7377377">buf</a></span><span class="op" id="7377419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377422">if</span>&nbsp;<span class="ident" id="7377425">err</span>&nbsp;<span class="op" id="7377429">:=</span>&nbsp;<span class="ident" id="7377432"><a href="/gostd/archive/tar/writer_test.go.html#7377395">writer</a></span><span class="op" id="7377438">.</span><span class="ident" id="7377439"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7377450">(</span><span class="ident" id="7377451"><a href="/gostd/archive/tar/writer_test.go.html#7377132">hdr</a></span><span class="op" id="7377454">)</span><span class="op" id="7377455">;</span>&nbsp;<span class="ident" id="7377457"><a href="/gostd/archive/tar/writer_test.go.html#7377425">err</a></span>&nbsp;<span class="op" id="7377461">!=</span>&nbsp;<span class="builtintype" id="7377464">nil</span>&nbsp;<span class="op" id="7377468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377472"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377473">.</span><span class="ident" id="7377474"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377479">(</span><span class="ident" id="7377480"><a href="/gostd/archive/tar/writer_test.go.html#7377425">err</a></span><span class="op" id="7377483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377489">if</span>&nbsp;<span class="ident" id="7377492">_</span><span class="op" id="7377493">,</span>&nbsp;<span class="ident" id="7377495"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377499">=</span>&nbsp;<span class="ident" id="7377501"><a href="/gostd/archive/tar/writer_test.go.html#7377395">writer</a></span><span class="op" id="7377507">.</span><span class="ident" id="7377508"><a href="/gostd/archive/tar/writer.go.html#5652342">Write</a></span><span class="op" id="7377513">(</span><span class="op" id="7377514">[</span><span class="op" id="7377515">]</span><span class="builtintype" id="7377516">byte</span><span class="op" id="7377520">(</span><span class="ident" id="7377521"><a href="/gostd/archive/tar/writer_test.go.html#7377304">contents</a></span><span class="op" id="7377529">)</span><span class="op" id="7377530">)</span><span class="op" id="7377531">;</span>&nbsp;<span class="ident" id="7377533"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377537">!=</span>&nbsp;<span class="builtintype" id="7377540">nil</span>&nbsp;<span class="op" id="7377544">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377548"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377549">.</span><span class="ident" id="7377550"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377555">(</span><span class="ident" id="7377556"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span><span class="op" id="7377559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377565">if</span>&nbsp;<span class="ident" id="7377568">err</span>&nbsp;<span class="op" id="7377572">:=</span>&nbsp;<span class="ident" id="7377575"><a href="/gostd/archive/tar/writer_test.go.html#7377395">writer</a></span><span class="op" id="7377581">.</span><span class="ident" id="7377582"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7377587">(</span><span class="op" id="7377588">)</span><span class="op" id="7377589">;</span>&nbsp;<span class="ident" id="7377591"><a href="/gostd/archive/tar/writer_test.go.html#7377568">err</a></span>&nbsp;<span class="op" id="7377595">!=</span>&nbsp;<span class="builtintype" id="7377598">nil</span>&nbsp;<span class="op" id="7377602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377606"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377607">.</span><span class="ident" id="7377608"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377613">(</span><span class="ident" id="7377614"><a href="/gostd/archive/tar/writer_test.go.html#7377568">err</a></span><span class="op" id="7377617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377620">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7377623">//&nbsp;Simple&nbsp;test&nbsp;to&nbsp;make&nbsp;sure&nbsp;PAX&nbsp;extensions&nbsp;are&nbsp;in&nbsp;effect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377681">if</span>&nbsp;<span class="op" id="7377684">!</span><span class="ident" id="7377685"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7377690">.</span><span class="ident" id="7377691"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="7377699">(</span><span class="ident" id="7377700"><a href="/gostd/archive/tar/writer_test.go.html#7377377">buf</a></span><span class="op" id="7377703">.</span><span class="ident" id="7377704"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7377709">(</span><span class="op" id="7377710">)</span><span class="op" id="7377711">,</span>&nbsp;<span class="op" id="7377713">[</span><span class="op" id="7377714">]</span><span class="builtintype" id="7377715">byte</span><span class="op" id="7377719">(</span><span class="string" id="7377720">&#34;PaxHeaders.&#34;</span><span class="op" id="7377733">)</span><span class="op" id="7377734">)</span>&nbsp;<span class="op" id="7377736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377740"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377741">.</span><span class="ident" id="7377742"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377747">(</span><span class="string" id="7377748">&#34;Expected&nbsp;at&nbsp;least&nbsp;one&nbsp;PAX&nbsp;header&nbsp;to&nbsp;be&nbsp;written.&#34;</span><span class="op" id="7377797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7377803">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;long&nbsp;name&nbsp;back&nbsp;out&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377865">reader</span>&nbsp;<span class="op" id="7377872">:=</span>&nbsp;<span class="ident" id="7377875"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7377884">(</span><span class="op" id="7377885">&amp;</span><span class="ident" id="7377886"><a href="/gostd/archive/tar/writer_test.go.html#7377377">buf</a></span><span class="op" id="7377889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377892"><a href="/gostd/archive/tar/writer_test.go.html#7377132">hdr</a></span><span class="op" id="7377895">,</span>&nbsp;<span class="ident" id="7377897"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377901">=</span>&nbsp;<span class="ident" id="7377903"><a href="/gostd/archive/tar/writer_test.go.html#7377865">reader</a></span><span class="op" id="7377909">.</span><span class="ident" id="7377910"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7377914">(</span><span class="op" id="7377915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377918">if</span>&nbsp;<span class="ident" id="7377921"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span>&nbsp;<span class="op" id="7377925">!=</span>&nbsp;<span class="builtintype" id="7377928">nil</span>&nbsp;<span class="op" id="7377932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377936"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377937">.</span><span class="ident" id="7377938"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377943">(</span><span class="ident" id="7377944"><a href="/gostd/archive/tar/writer_test.go.html#7377059">err</a></span><span class="op" id="7377947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7377950">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7377953">if</span>&nbsp;<span class="ident" id="7377956"><a href="/gostd/archive/tar/writer_test.go.html#7377132">hdr</a></span><span class="op" id="7377959">.</span><span class="ident" id="7377960"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7377965">!=</span>&nbsp;<span class="ident" id="7377968"><a href="/gostd/archive/tar/writer_test.go.html#7377265">longName</a></span>&nbsp;<span class="op" id="7377977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7377981"><a href="/gostd/archive/tar/writer_test.go.html#7376992">t</a></span><span class="op" id="7377982">.</span><span class="ident" id="7377983"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7377988">(</span><span class="string" id="7377989">&#34;Couldn&#39;t&nbsp;recover&nbsp;long&nbsp;file&nbsp;name&#34;</span><span class="op" id="7378022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378025">}</span><br>
<span class="lineno"></span><span class="op" id="7378027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="7378030">func</span>&nbsp;<span class="ident" id="7378035">TestPaxSymlink</span><span class="op" id="7378049">(</span><span class="ident" id="7378050">t</span>&nbsp;<span class="op" id="7378052">*</span><span class="ident" id="7378053"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7378060">.</span><span class="ident" id="7378061"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7378062">)</span>&nbsp;<span class="op" id="7378064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7378067">//&nbsp;Create&nbsp;an&nbsp;archive&nbsp;with&nbsp;a&nbsp;large&nbsp;linkname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378111">fileinfo</span><span class="op" id="7378119">,</span>&nbsp;<span class="ident" id="7378121">err</span>&nbsp;<span class="op" id="7378125">:=</span>&nbsp;<span class="ident" id="7378128"><a href="/gostd/archive/tar/writer_test.go.html#7371690">os</a></span><span class="op" id="7378130">.</span><span class="ident" id="7378131"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="7378135">(</span><span class="string" id="7378136">&#34;testdata/small.txt&#34;</span><span class="op" id="7378156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378159">if</span>&nbsp;<span class="ident" id="7378162"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span>&nbsp;<span class="op" id="7378166">!=</span>&nbsp;<span class="builtintype" id="7378169">nil</span>&nbsp;<span class="op" id="7378173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378177"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378178">.</span><span class="ident" id="7378179"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7378184">(</span><span class="ident" id="7378185"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span><span class="op" id="7378188">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378194">hdr</span><span class="op" id="7378197">,</span>&nbsp;<span class="ident" id="7378199"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span>&nbsp;<span class="op" id="7378203">:=</span>&nbsp;<span class="ident" id="7378206"><a href="/gostd/archive/tar/common.go.html#5615634">FileInfoHeader</a></span><span class="op" id="7378220">(</span><span class="ident" id="7378221"><a href="/gostd/archive/tar/writer_test.go.html#7378111">fileinfo</a></span><span class="op" id="7378229">,</span>&nbsp;<span class="string" id="7378231">&#34;&#34;</span><span class="op" id="7378233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378236"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378239">.</span><span class="ident" id="7378240"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="7378249">=</span>&nbsp;<span class="ident" id="7378251"><a href="/gostd/archive/tar/common.go.html#5610667">TypeSymlink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378264">if</span>&nbsp;<span class="ident" id="7378267"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span>&nbsp;<span class="op" id="7378271">!=</span>&nbsp;<span class="builtintype" id="7378274">nil</span>&nbsp;<span class="op" id="7378278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378282"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378283">.</span><span class="ident" id="7378284"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7378290">(</span><span class="string" id="7378291">&#34;os.Stat:1&nbsp;%v&#34;</span><span class="op" id="7378305">,</span>&nbsp;<span class="ident" id="7378307"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span><span class="op" id="7378310">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7378316">//&nbsp;Force&nbsp;a&nbsp;PAX&nbsp;long&nbsp;linkname&nbsp;to&nbsp;be&nbsp;written</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378360">longLinkname</span>&nbsp;<span class="op" id="7378373">:=</span>&nbsp;<span class="ident" id="7378376"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7378383">.</span><span class="ident" id="7378384"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7378390">(</span><span class="string" id="7378391">&#34;1234567890/1234567890&#34;</span><span class="op" id="7378414">,</span>&nbsp;<span class="num" id="7378416">10</span><span class="op" id="7378418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378421"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378424">.</span><span class="ident" id="7378425"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="7378434">=</span>&nbsp;<span class="ident" id="7378436"><a href="/gostd/archive/tar/writer_test.go.html#7378360">longLinkname</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378451"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378454">.</span><span class="ident" id="7378455"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="7378460">=</span>&nbsp;<span class="num" id="7378462">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378465">var</span>&nbsp;<span class="ident" id="7378469">buf</span>&nbsp;<span class="ident" id="7378473"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7378478">.</span><span class="ident" id="7378479"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378487">writer</span>&nbsp;<span class="op" id="7378494">:=</span>&nbsp;<span class="ident" id="7378497"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7378506">(</span><span class="op" id="7378507">&amp;</span><span class="ident" id="7378508"><a href="/gostd/archive/tar/writer_test.go.html#7378469">buf</a></span><span class="op" id="7378511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378514">if</span>&nbsp;<span class="ident" id="7378517">err</span>&nbsp;<span class="op" id="7378521">:=</span>&nbsp;<span class="ident" id="7378524"><a href="/gostd/archive/tar/writer_test.go.html#7378487">writer</a></span><span class="op" id="7378530">.</span><span class="ident" id="7378531"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7378542">(</span><span class="ident" id="7378543"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378546">)</span><span class="op" id="7378547">;</span>&nbsp;<span class="ident" id="7378549"><a href="/gostd/archive/tar/writer_test.go.html#7378517">err</a></span>&nbsp;<span class="op" id="7378553">!=</span>&nbsp;<span class="builtintype" id="7378556">nil</span>&nbsp;<span class="op" id="7378560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378564"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378565">.</span><span class="ident" id="7378566"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7378571">(</span><span class="ident" id="7378572"><a href="/gostd/archive/tar/writer_test.go.html#7378517">err</a></span><span class="op" id="7378575">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378581">if</span>&nbsp;<span class="ident" id="7378584">err</span>&nbsp;<span class="op" id="7378588">:=</span>&nbsp;<span class="ident" id="7378591"><a href="/gostd/archive/tar/writer_test.go.html#7378487">writer</a></span><span class="op" id="7378597">.</span><span class="ident" id="7378598"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7378603">(</span><span class="op" id="7378604">)</span><span class="op" id="7378605">;</span>&nbsp;<span class="ident" id="7378607"><a href="/gostd/archive/tar/writer_test.go.html#7378584">err</a></span>&nbsp;<span class="op" id="7378611">!=</span>&nbsp;<span class="builtintype" id="7378614">nil</span>&nbsp;<span class="op" id="7378618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378622"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378623">.</span><span class="ident" id="7378624"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7378629">(</span><span class="ident" id="7378630"><a href="/gostd/archive/tar/writer_test.go.html#7378584">err</a></span><span class="op" id="7378633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7378639">//&nbsp;Simple&nbsp;test&nbsp;to&nbsp;make&nbsp;sure&nbsp;PAX&nbsp;extensions&nbsp;are&nbsp;in&nbsp;effect</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378697">if</span>&nbsp;<span class="op" id="7378700">!</span><span class="ident" id="7378701"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7378706">.</span><span class="ident" id="7378707"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="7378715">(</span><span class="ident" id="7378716"><a href="/gostd/archive/tar/writer_test.go.html#7378469">buf</a></span><span class="op" id="7378719">.</span><span class="ident" id="7378720"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7378725">(</span><span class="op" id="7378726">)</span><span class="op" id="7378727">,</span>&nbsp;<span class="op" id="7378729">[</span><span class="op" id="7378730">]</span><span class="builtintype" id="7378731">byte</span><span class="op" id="7378735">(</span><span class="string" id="7378736">&#34;PaxHeaders.&#34;</span><span class="op" id="7378749">)</span><span class="op" id="7378750">)</span>&nbsp;<span class="op" id="7378752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378756"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378757">.</span><span class="ident" id="7378758"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7378763">(</span><span class="string" id="7378764">&#34;Expected&nbsp;at&nbsp;least&nbsp;one&nbsp;PAX&nbsp;header&nbsp;to&nbsp;be&nbsp;written.&#34;</span><span class="op" id="7378813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7378819">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;long&nbsp;name&nbsp;back&nbsp;out&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378881">reader</span>&nbsp;<span class="op" id="7378888">:=</span>&nbsp;<span class="ident" id="7378891"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7378900">(</span><span class="op" id="7378901">&amp;</span><span class="ident" id="7378902"><a href="/gostd/archive/tar/writer_test.go.html#7378469">buf</a></span><span class="op" id="7378905">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378908"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378911">,</span>&nbsp;<span class="ident" id="7378913"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span>&nbsp;<span class="op" id="7378917">=</span>&nbsp;<span class="ident" id="7378919"><a href="/gostd/archive/tar/writer_test.go.html#7378881">reader</a></span><span class="op" id="7378925">.</span><span class="ident" id="7378926"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7378930">(</span><span class="op" id="7378931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378934">if</span>&nbsp;<span class="ident" id="7378937"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span>&nbsp;<span class="op" id="7378941">!=</span>&nbsp;<span class="builtintype" id="7378944">nil</span>&nbsp;<span class="op" id="7378948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7378952"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7378953">.</span><span class="ident" id="7378954"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7378959">(</span><span class="ident" id="7378960"><a href="/gostd/archive/tar/writer_test.go.html#7378121">err</a></span><span class="op" id="7378963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7378966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7378969">if</span>&nbsp;<span class="ident" id="7378972"><a href="/gostd/archive/tar/writer_test.go.html#7378194">hdr</a></span><span class="op" id="7378975">.</span><span class="ident" id="7378976"><a href="/gostd/archive/tar/common.go.html#5611642">Linkname</a></span>&nbsp;<span class="op" id="7378985">!=</span>&nbsp;<span class="ident" id="7378988"><a href="/gostd/archive/tar/writer_test.go.html#7378360">longLinkname</a></span>&nbsp;<span class="op" id="7379001">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379005"><a href="/gostd/archive/tar/writer_test.go.html#7378050">t</a></span><span class="op" id="7379006">.</span><span class="ident" id="7379007"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7379012">(</span><span class="string" id="7379013">&#34;Couldn&#39;t&nbsp;recover&nbsp;long&nbsp;link&nbsp;name&#34;</span><span class="op" id="7379046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379049">}</span><br>
<span class="lineno"></span><span class="op" id="7379051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7379054">func</span>&nbsp;<span class="ident" id="7379059">TestPaxNonAscii</span><span class="op" id="7379074">(</span><span class="ident" id="7379075">t</span>&nbsp;<span class="op" id="7379077">*</span><span class="ident" id="7379078"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7379085">.</span><span class="ident" id="7379086"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7379087">)</span>&nbsp;<span class="op" id="7379089">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7379092">//&nbsp;Create&nbsp;an&nbsp;archive&nbsp;with&nbsp;non&nbsp;ascii.&nbsp;These&nbsp;should&nbsp;trigger&nbsp;a&nbsp;pax&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7379164">//&nbsp;because&nbsp;pax&nbsp;headers&nbsp;have&nbsp;a&nbsp;defined&nbsp;utf-8&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379219">fileinfo</span><span class="op" id="7379227">,</span>&nbsp;<span class="ident" id="7379229">err</span>&nbsp;<span class="op" id="7379233">:=</span>&nbsp;<span class="ident" id="7379236"><a href="/gostd/archive/tar/writer_test.go.html#7371690">os</a></span><span class="op" id="7379238">.</span><span class="ident" id="7379239"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="7379243">(</span><span class="string" id="7379244">&#34;testdata/small.txt&#34;</span><span class="op" id="7379264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379267">if</span>&nbsp;<span class="ident" id="7379270"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7379274">!=</span>&nbsp;<span class="builtintype" id="7379277">nil</span>&nbsp;<span class="op" id="7379281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379285"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7379286">.</span><span class="ident" id="7379287"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7379292">(</span><span class="ident" id="7379293"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span><span class="op" id="7379296">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379303">hdr</span><span class="op" id="7379306">,</span>&nbsp;<span class="ident" id="7379308"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7379312">:=</span>&nbsp;<span class="ident" id="7379315"><a href="/gostd/archive/tar/common.go.html#5615634">FileInfoHeader</a></span><span class="op" id="7379329">(</span><span class="ident" id="7379330"><a href="/gostd/archive/tar/writer_test.go.html#7379219">fileinfo</a></span><span class="op" id="7379338">,</span>&nbsp;<span class="string" id="7379340">&#34;&#34;</span><span class="op" id="7379342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379345">if</span>&nbsp;<span class="ident" id="7379348"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7379352">!=</span>&nbsp;<span class="builtintype" id="7379355">nil</span>&nbsp;<span class="op" id="7379359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379363"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7379364">.</span><span class="ident" id="7379365"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7379371">(</span><span class="string" id="7379372">&#34;os.Stat:1&nbsp;%v&#34;</span><span class="op" id="7379386">,</span>&nbsp;<span class="ident" id="7379388"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span><span class="op" id="7379391">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7379398">//&nbsp;some&nbsp;sample&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379419">chineseFilename</span>&nbsp;<span class="op" id="7379435">:=</span>&nbsp;<span class="string" id="7379438">&#34;文件名&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379451">chineseGroupname</span>&nbsp;<span class="op" id="7379468">:=</span>&nbsp;<span class="string" id="7379471">&#34;組&#34;</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379478">chineseUsername</span>&nbsp;<span class="op" id="7379494">:=</span>&nbsp;<span class="string" id="7379497">&#34;用戶名&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379511"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7379514">.</span><span class="ident" id="7379515"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7379520">=</span>&nbsp;<span class="ident" id="7379522"><a href="/gostd/archive/tar/writer_test.go.html#7379419">chineseFilename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379539"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7379542">.</span><span class="ident" id="7379543"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span>&nbsp;<span class="op" id="7379549">=</span>&nbsp;<span class="ident" id="7379551"><a href="/gostd/archive/tar/writer_test.go.html#7379451">chineseGroupname</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379569"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7379572">.</span><span class="ident" id="7379573"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span>&nbsp;<span class="op" id="7379579">=</span>&nbsp;<span class="ident" id="7379581"><a href="/gostd/archive/tar/writer_test.go.html#7379478">chineseUsername</a></span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379599">contents</span>&nbsp;<span class="op" id="7379608">:=</span>&nbsp;<span class="ident" id="7379611"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7379618">.</span><span class="ident" id="7379619"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7379625">(</span><span class="string" id="7379626">&#34;&nbsp;&#34;</span><span class="op" id="7379629">,</span>&nbsp;<span class="builtintype" id="7379631">int</span><span class="op" id="7379634">(</span><span class="ident" id="7379635"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7379638">.</span><span class="ident" id="7379639"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7379643">)</span><span class="op" id="7379644">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379648">var</span>&nbsp;<span class="ident" id="7379652">buf</span>&nbsp;<span class="ident" id="7379656"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7379661">.</span><span class="ident" id="7379662"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379670">writer</span>&nbsp;<span class="op" id="7379677">:=</span>&nbsp;<span class="ident" id="7379680"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7379689">(</span><span class="op" id="7379690">&amp;</span><span class="ident" id="7379691"><a href="/gostd/archive/tar/writer_test.go.html#7379652">buf</a></span><span class="op" id="7379694">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379697">if</span>&nbsp;<span class="ident" id="7379700">err</span>&nbsp;<span class="op" id="7379704">:=</span>&nbsp;<span class="ident" id="7379707"><a href="/gostd/archive/tar/writer_test.go.html#7379670">writer</a></span><span class="op" id="7379713">.</span><span class="ident" id="7379714"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7379725">(</span><span class="ident" id="7379726"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7379729">)</span><span class="op" id="7379730">;</span>&nbsp;<span class="ident" id="7379732"><a href="/gostd/archive/tar/writer_test.go.html#7379700">err</a></span>&nbsp;<span class="op" id="7379736">!=</span>&nbsp;<span class="builtintype" id="7379739">nil</span>&nbsp;<span class="op" id="7379743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379747"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7379748">.</span><span class="ident" id="7379749"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7379754">(</span><span class="ident" id="7379755"><a href="/gostd/archive/tar/writer_test.go.html#7379700">err</a></span><span class="op" id="7379758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379764">if</span>&nbsp;<span class="ident" id="7379767">_</span><span class="op" id="7379768">,</span>&nbsp;<span class="ident" id="7379770"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7379774">=</span>&nbsp;<span class="ident" id="7379776"><a href="/gostd/archive/tar/writer_test.go.html#7379670">writer</a></span><span class="op" id="7379782">.</span><span class="ident" id="7379783"><a href="/gostd/archive/tar/writer.go.html#5652342">Write</a></span><span class="op" id="7379788">(</span><span class="op" id="7379789">[</span><span class="op" id="7379790">]</span><span class="builtintype" id="7379791">byte</span><span class="op" id="7379795">(</span><span class="ident" id="7379796"><a href="/gostd/archive/tar/writer_test.go.html#7379599">contents</a></span><span class="op" id="7379804">)</span><span class="op" id="7379805">)</span><span class="op" id="7379806">;</span>&nbsp;<span class="ident" id="7379808"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7379812">!=</span>&nbsp;<span class="builtintype" id="7379815">nil</span>&nbsp;<span class="op" id="7379819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379823"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7379824">.</span><span class="ident" id="7379825"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7379830">(</span><span class="ident" id="7379831"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span><span class="op" id="7379834">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379840">if</span>&nbsp;<span class="ident" id="7379843">err</span>&nbsp;<span class="op" id="7379847">:=</span>&nbsp;<span class="ident" id="7379850"><a href="/gostd/archive/tar/writer_test.go.html#7379670">writer</a></span><span class="op" id="7379856">.</span><span class="ident" id="7379857"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7379862">(</span><span class="op" id="7379863">)</span><span class="op" id="7379864">;</span>&nbsp;<span class="ident" id="7379866"><a href="/gostd/archive/tar/writer_test.go.html#7379843">err</a></span>&nbsp;<span class="op" id="7379870">!=</span>&nbsp;<span class="builtintype" id="7379873">nil</span>&nbsp;<span class="op" id="7379877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7379881"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7379882">.</span><span class="ident" id="7379883"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7379888">(</span><span class="ident" id="7379889"><a href="/gostd/archive/tar/writer_test.go.html#7379843">err</a></span><span class="op" id="7379892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7379895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7379898">//&nbsp;Simple&nbsp;test&nbsp;to&nbsp;make&nbsp;sure&nbsp;PAX&nbsp;extensions&nbsp;are&nbsp;in&nbsp;effect</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7379956">if</span>&nbsp;<span class="op" id="7379959">!</span><span class="ident" id="7379960"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7379965">.</span><span class="ident" id="7379966"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="7379974">(</span><span class="ident" id="7379975"><a href="/gostd/archive/tar/writer_test.go.html#7379652">buf</a></span><span class="op" id="7379978">.</span><span class="ident" id="7379979"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7379984">(</span><span class="op" id="7379985">)</span><span class="op" id="7379986">,</span>&nbsp;<span class="op" id="7379988">[</span><span class="op" id="7379989">]</span><span class="builtintype" id="7379990">byte</span><span class="op" id="7379994">(</span><span class="string" id="7379995">&#34;PaxHeaders.&#34;</span><span class="op" id="7380008">)</span><span class="op" id="7380009">)</span>&nbsp;<span class="op" id="7380011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380015"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7380016">.</span><span class="ident" id="7380017"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380022">(</span><span class="string" id="7380023">&#34;Expected&nbsp;at&nbsp;least&nbsp;one&nbsp;PAX&nbsp;header&nbsp;to&nbsp;be&nbsp;written.&#34;</span><span class="op" id="7380072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7380078">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;long&nbsp;name&nbsp;back&nbsp;out&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380140">reader</span>&nbsp;<span class="op" id="7380147">:=</span>&nbsp;<span class="ident" id="7380150"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7380159">(</span><span class="op" id="7380160">&amp;</span><span class="ident" id="7380161"><a href="/gostd/archive/tar/writer_test.go.html#7379652">buf</a></span><span class="op" id="7380164">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380167"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7380170">,</span>&nbsp;<span class="ident" id="7380172"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7380176">=</span>&nbsp;<span class="ident" id="7380178"><a href="/gostd/archive/tar/writer_test.go.html#7380140">reader</a></span><span class="op" id="7380184">.</span><span class="ident" id="7380185"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7380189">(</span><span class="op" id="7380190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380193">if</span>&nbsp;<span class="ident" id="7380196"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span>&nbsp;<span class="op" id="7380200">!=</span>&nbsp;<span class="builtintype" id="7380203">nil</span>&nbsp;<span class="op" id="7380207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380211"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7380212">.</span><span class="ident" id="7380213"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380218">(</span><span class="ident" id="7380219"><a href="/gostd/archive/tar/writer_test.go.html#7379229">err</a></span><span class="op" id="7380222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380228">if</span>&nbsp;<span class="ident" id="7380231"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7380234">.</span><span class="ident" id="7380235"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7380240">!=</span>&nbsp;<span class="ident" id="7380243"><a href="/gostd/archive/tar/writer_test.go.html#7379419">chineseFilename</a></span>&nbsp;<span class="op" id="7380259">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380263"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7380264">.</span><span class="ident" id="7380265"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380270">(</span><span class="string" id="7380271">&#34;Couldn&#39;t&nbsp;recover&nbsp;unicode&nbsp;name&#34;</span><span class="op" id="7380302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380308">if</span>&nbsp;<span class="ident" id="7380311"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7380314">.</span><span class="ident" id="7380315"><a href="/gostd/archive/tar/common.go.html#5611731">Gname</a></span>&nbsp;<span class="op" id="7380321">!=</span>&nbsp;<span class="ident" id="7380324"><a href="/gostd/archive/tar/writer_test.go.html#7379451">chineseGroupname</a></span>&nbsp;<span class="op" id="7380341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380345"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7380346">.</span><span class="ident" id="7380347"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380352">(</span><span class="string" id="7380353">&#34;Couldn&#39;t&nbsp;recover&nbsp;unicode&nbsp;group&#34;</span><span class="op" id="7380385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380388">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380391">if</span>&nbsp;<span class="ident" id="7380394"><a href="/gostd/archive/tar/writer_test.go.html#7379303">hdr</a></span><span class="op" id="7380397">.</span><span class="ident" id="7380398"><a href="/gostd/archive/tar/common.go.html#5611687">Uname</a></span>&nbsp;<span class="op" id="7380404">!=</span>&nbsp;<span class="ident" id="7380407"><a href="/gostd/archive/tar/writer_test.go.html#7379478">chineseUsername</a></span>&nbsp;<span class="op" id="7380423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380427"><a href="/gostd/archive/tar/writer_test.go.html#7379075">t</a></span><span class="op" id="7380428">.</span><span class="ident" id="7380429"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380434">(</span><span class="string" id="7380435">&#34;Couldn&#39;t&nbsp;recover&nbsp;unicode&nbsp;user&#34;</span><span class="op" id="7380466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380469">}</span><br>
<span class="lineno"></span><span class="op" id="7380471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7380474">func</span>&nbsp;<span class="ident" id="7380479">TestPaxXattrs</span><span class="op" id="7380492">(</span><span class="ident" id="7380493">t</span>&nbsp;<span class="op" id="7380495">*</span><span class="ident" id="7380496"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7380503">.</span><span class="ident" id="7380504"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7380505">)</span>&nbsp;<span class="op" id="7380507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380510">xattrs</span>&nbsp;<span class="op" id="7380517">:=</span>&nbsp;<span class="keyword" id="7380520">map</span><span class="op" id="7380523">[</span><span class="builtintype" id="7380524">string</span><span class="op" id="7380530">]</span><span class="builtintype" id="7380531">string</span><span class="op" id="7380537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7380541">&#34;user.key&#34;</span><span class="op" id="7380551">:</span>&nbsp;<span class="string" id="7380553">&#34;value&#34;</span><span class="op" id="7380560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7380567">//&nbsp;Create&nbsp;an&nbsp;archive&nbsp;with&nbsp;an&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380603">fileinfo</span><span class="op" id="7380611">,</span>&nbsp;<span class="ident" id="7380613">err</span>&nbsp;<span class="op" id="7380617">:=</span>&nbsp;<span class="ident" id="7380620"><a href="/gostd/archive/tar/writer_test.go.html#7371690">os</a></span><span class="op" id="7380622">.</span><span class="ident" id="7380623"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="7380627">(</span><span class="string" id="7380628">&#34;testdata/small.txt&#34;</span><span class="op" id="7380648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380651">if</span>&nbsp;<span class="ident" id="7380654"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7380658">!=</span>&nbsp;<span class="builtintype" id="7380661">nil</span>&nbsp;<span class="op" id="7380665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380669"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7380670">.</span><span class="ident" id="7380671"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380676">(</span><span class="ident" id="7380677"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span><span class="op" id="7380680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380683">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380686">hdr</span><span class="op" id="7380689">,</span>&nbsp;<span class="ident" id="7380691"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7380695">:=</span>&nbsp;<span class="ident" id="7380698"><a href="/gostd/archive/tar/common.go.html#5615634">FileInfoHeader</a></span><span class="op" id="7380712">(</span><span class="ident" id="7380713"><a href="/gostd/archive/tar/writer_test.go.html#7380603">fileinfo</a></span><span class="op" id="7380721">,</span>&nbsp;<span class="string" id="7380723">&#34;&#34;</span><span class="op" id="7380725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380728">if</span>&nbsp;<span class="ident" id="7380731"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7380735">!=</span>&nbsp;<span class="builtintype" id="7380738">nil</span>&nbsp;<span class="op" id="7380742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380746"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7380747">.</span><span class="ident" id="7380748"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7380754">(</span><span class="string" id="7380755">&#34;os.Stat:&nbsp;%v&#34;</span><span class="op" id="7380768">,</span>&nbsp;<span class="ident" id="7380770"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span><span class="op" id="7380773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380779">contents</span>&nbsp;<span class="op" id="7380788">:=</span>&nbsp;<span class="string" id="7380791">&#34;Kilts&#34;</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380800"><a href="/gostd/archive/tar/writer_test.go.html#7380686">hdr</a></span><span class="op" id="7380803">.</span><span class="ident" id="7380804"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span>&nbsp;<span class="op" id="7380811">=</span>&nbsp;<span class="ident" id="7380813"><a href="/gostd/archive/tar/writer_test.go.html#7380510">xattrs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380821">var</span>&nbsp;<span class="ident" id="7380825">buf</span>&nbsp;<span class="ident" id="7380829"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7380834">.</span><span class="ident" id="7380835"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380843">writer</span>&nbsp;<span class="op" id="7380850">:=</span>&nbsp;<span class="ident" id="7380853"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7380862">(</span><span class="op" id="7380863">&amp;</span><span class="ident" id="7380864"><a href="/gostd/archive/tar/writer_test.go.html#7380825">buf</a></span><span class="op" id="7380867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380870">if</span>&nbsp;<span class="ident" id="7380873">err</span>&nbsp;<span class="op" id="7380877">:=</span>&nbsp;<span class="ident" id="7380880"><a href="/gostd/archive/tar/writer_test.go.html#7380843">writer</a></span><span class="op" id="7380886">.</span><span class="ident" id="7380887"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7380898">(</span><span class="ident" id="7380899"><a href="/gostd/archive/tar/writer_test.go.html#7380686">hdr</a></span><span class="op" id="7380902">)</span><span class="op" id="7380903">;</span>&nbsp;<span class="ident" id="7380905"><a href="/gostd/archive/tar/writer_test.go.html#7380873">err</a></span>&nbsp;<span class="op" id="7380909">!=</span>&nbsp;<span class="builtintype" id="7380912">nil</span>&nbsp;<span class="op" id="7380916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380920"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7380921">.</span><span class="ident" id="7380922"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7380927">(</span><span class="ident" id="7380928"><a href="/gostd/archive/tar/writer_test.go.html#7380873">err</a></span><span class="op" id="7380931">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7380934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7380937">if</span>&nbsp;<span class="ident" id="7380940">_</span><span class="op" id="7380941">,</span>&nbsp;<span class="ident" id="7380943"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7380947">=</span>&nbsp;<span class="ident" id="7380949"><a href="/gostd/archive/tar/writer_test.go.html#7380843">writer</a></span><span class="op" id="7380955">.</span><span class="ident" id="7380956"><a href="/gostd/archive/tar/writer.go.html#5652342">Write</a></span><span class="op" id="7380961">(</span><span class="op" id="7380962">[</span><span class="op" id="7380963">]</span><span class="builtintype" id="7380964">byte</span><span class="op" id="7380968">(</span><span class="ident" id="7380969"><a href="/gostd/archive/tar/writer_test.go.html#7380779">contents</a></span><span class="op" id="7380977">)</span><span class="op" id="7380978">)</span><span class="op" id="7380979">;</span>&nbsp;<span class="ident" id="7380981"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7380985">!=</span>&nbsp;<span class="builtintype" id="7380988">nil</span>&nbsp;<span class="op" id="7380992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7380996"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7380997">.</span><span class="ident" id="7380998"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7381003">(</span><span class="ident" id="7381004"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span><span class="op" id="7381007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7381013">if</span>&nbsp;<span class="ident" id="7381016">err</span>&nbsp;<span class="op" id="7381020">:=</span>&nbsp;<span class="ident" id="7381023"><a href="/gostd/archive/tar/writer_test.go.html#7380843">writer</a></span><span class="op" id="7381029">.</span><span class="ident" id="7381030"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7381035">(</span><span class="op" id="7381036">)</span><span class="op" id="7381037">;</span>&nbsp;<span class="ident" id="7381039"><a href="/gostd/archive/tar/writer_test.go.html#7381016">err</a></span>&nbsp;<span class="op" id="7381043">!=</span>&nbsp;<span class="builtintype" id="7381046">nil</span>&nbsp;<span class="op" id="7381050">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381054"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7381055">.</span><span class="ident" id="7381056"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7381061">(</span><span class="ident" id="7381062"><a href="/gostd/archive/tar/writer_test.go.html#7381016">err</a></span><span class="op" id="7381065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7381071">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;get&nbsp;the&nbsp;xattrs&nbsp;back&nbsp;out&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381132">reader</span>&nbsp;<span class="op" id="7381139">:=</span>&nbsp;<span class="ident" id="7381142"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7381151">(</span><span class="op" id="7381152">&amp;</span><span class="ident" id="7381153"><a href="/gostd/archive/tar/writer_test.go.html#7380825">buf</a></span><span class="op" id="7381156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381159"><a href="/gostd/archive/tar/writer_test.go.html#7380686">hdr</a></span><span class="op" id="7381162">,</span>&nbsp;<span class="ident" id="7381164"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7381168">=</span>&nbsp;<span class="ident" id="7381170"><a href="/gostd/archive/tar/writer_test.go.html#7381132">reader</a></span><span class="op" id="7381176">.</span><span class="ident" id="7381177"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7381181">(</span><span class="op" id="7381182">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7381185">if</span>&nbsp;<span class="ident" id="7381188"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span>&nbsp;<span class="op" id="7381192">!=</span>&nbsp;<span class="builtintype" id="7381195">nil</span>&nbsp;<span class="op" id="7381199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381203"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7381204">.</span><span class="ident" id="7381205"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7381210">(</span><span class="ident" id="7381211"><a href="/gostd/archive/tar/writer_test.go.html#7380613">err</a></span><span class="op" id="7381214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7381220">if</span>&nbsp;<span class="op" id="7381223">!</span><span class="ident" id="7381224"><a href="/gostd/archive/tar/writer_test.go.html#7371696">reflect</a></span><span class="op" id="7381231">.</span><span class="ident" id="7381232"><a href="/gostd/reflect/deepequal.go.html#2775472">DeepEqual</a></span><span class="op" id="7381241">(</span><span class="ident" id="7381242"><a href="/gostd/archive/tar/writer_test.go.html#7380686">hdr</a></span><span class="op" id="7381245">.</span><span class="ident" id="7381246"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span><span class="op" id="7381252">,</span>&nbsp;<span class="ident" id="7381254"><a href="/gostd/archive/tar/writer_test.go.html#7380510">xattrs</a></span><span class="op" id="7381260">)</span>&nbsp;<span class="op" id="7381262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381266"><a href="/gostd/archive/tar/writer_test.go.html#7380493">t</a></span><span class="op" id="7381267">.</span><span class="ident" id="7381268"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7381274">(</span><span class="string" id="7381275">&#34;xattrs&nbsp;did&nbsp;not&nbsp;survive&nbsp;round&nbsp;trip:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7381329">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381334"><a href="/gostd/archive/tar/writer_test.go.html#7380686">hdr</a></span><span class="op" id="7381337">.</span><span class="ident" id="7381338"><a href="/gostd/archive/tar/common.go.html#5611991">Xattrs</a></span><span class="op" id="7381344">,</span>&nbsp;<span class="ident" id="7381346"><a href="/gostd/archive/tar/writer_test.go.html#7380510">xattrs</a></span><span class="op" id="7381352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381355">}</span><br>
<span class="lineno"></span><span class="op" id="7381357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7381360">func</span>&nbsp;<span class="ident" id="7381365">TestPAXHeader</span><span class="op" id="7381378">(</span><span class="ident" id="7381379">t</span>&nbsp;<span class="op" id="7381381">*</span><span class="ident" id="7381382"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7381389">.</span><span class="ident" id="7381390"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7381391">)</span>&nbsp;<span class="op" id="7381393">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381396">medName</span>&nbsp;<span class="op" id="7381404">:=</span>&nbsp;<span class="ident" id="7381407"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7381414">.</span><span class="ident" id="7381415"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7381421">(</span><span class="string" id="7381422">&#34;CD&#34;</span><span class="op" id="7381426">,</span>&nbsp;<span class="num" id="7381428">50</span><span class="op" id="7381430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381433">longName</span>&nbsp;<span class="op" id="7381442">:=</span>&nbsp;<span class="ident" id="7381445"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7381452">.</span><span class="ident" id="7381453"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7381459">(</span><span class="string" id="7381460">&#34;AB&#34;</span><span class="op" id="7381464">,</span>&nbsp;<span class="num" id="7381466">100</span><span class="op" id="7381469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381472">paxTests</span>&nbsp;<span class="op" id="7381481">:=</span>&nbsp;<span class="op" id="7381484">[</span><span class="op" id="7381485">]</span><span class="op" id="7381486">[</span><span class="num" id="7381487">2</span><span class="op" id="7381488">]</span><span class="builtintype" id="7381489">string</span><span class="op" id="7381495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381499">{</span><span class="ident" id="7381500"><a href="/gostd/archive/tar/common.go.html#5615076">paxPath</a></span>&nbsp;<span class="op" id="7381508">+</span>&nbsp;<span class="string" id="7381510">&#34;=/etc/hosts&#34;</span><span class="op" id="7381523">,</span>&nbsp;<span class="string" id="7381525">&#34;19&nbsp;path=/etc/hosts\n&#34;</span><span class="op" id="7381547">}</span><span class="op" id="7381548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381552">{</span><span class="string" id="7381553">&#34;a=b&#34;</span><span class="op" id="7381558">,</span>&nbsp;<span class="string" id="7381560">&#34;6&nbsp;a=b\n&#34;</span><span class="op" id="7381569">}</span><span class="op" id="7381570">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7381581">//&nbsp;Single&nbsp;digit&nbsp;length</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381606">{</span><span class="string" id="7381607">&#34;a=names&#34;</span><span class="op" id="7381616">,</span>&nbsp;<span class="string" id="7381618">&#34;11&nbsp;a=names\n&#34;</span><span class="op" id="7381632">}</span><span class="op" id="7381633">,</span>&nbsp;<span class="comment" id="7381635">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;carries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381668">{</span><span class="ident" id="7381669"><a href="/gostd/archive/tar/common.go.html#5615076">paxPath</a></span>&nbsp;<span class="op" id="7381677">+</span>&nbsp;<span class="string" id="7381679">&#34;=&#34;</span>&nbsp;<span class="op" id="7381683">+</span>&nbsp;<span class="ident" id="7381685"><a href="/gostd/archive/tar/writer_test.go.html#7381433">longName</a></span><span class="op" id="7381693">,</span>&nbsp;<span class="ident" id="7381695"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7381698">.</span><span class="ident" id="7381699"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7381706">(</span><span class="string" id="7381707">&#34;210&nbsp;path=%s\n&#34;</span><span class="op" id="7381722">,</span>&nbsp;<span class="ident" id="7381724"><a href="/gostd/archive/tar/writer_test.go.html#7381433">longName</a></span><span class="op" id="7381732">)</span><span class="op" id="7381733">}</span><span class="op" id="7381734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381738">{</span><span class="ident" id="7381739"><a href="/gostd/archive/tar/common.go.html#5615076">paxPath</a></span>&nbsp;<span class="op" id="7381747">+</span>&nbsp;<span class="string" id="7381749">&#34;=&#34;</span>&nbsp;<span class="op" id="7381753">+</span>&nbsp;<span class="ident" id="7381755"><a href="/gostd/archive/tar/writer_test.go.html#7381396">medName</a></span><span class="op" id="7381762">,</span>&nbsp;<span class="ident" id="7381764"><a href="/gostd/archive/tar/writer_test.go.html#7371664">fmt</a></span><span class="op" id="7381767">.</span><span class="ident" id="7381768"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7381775">(</span><span class="string" id="7381776">&#34;110&nbsp;path=%s\n&#34;</span><span class="op" id="7381791">,</span>&nbsp;<span class="ident" id="7381793"><a href="/gostd/archive/tar/writer_test.go.html#7381396">medName</a></span><span class="op" id="7381800">)</span><span class="op" id="7381801">}</span><span class="op" id="7381802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7381806">for</span>&nbsp;<span class="ident" id="7381810">_</span><span class="op" id="7381811">,</span>&nbsp;<span class="ident" id="7381813">test</span>&nbsp;<span class="op" id="7381818">:=</span>&nbsp;<span class="keyword" id="7381821">range</span>&nbsp;<span class="ident" id="7381827"><a href="/gostd/archive/tar/writer_test.go.html#7381472">paxTests</a></span>&nbsp;<span class="op" id="7381836">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381840">key</span><span class="op" id="7381843">,</span>&nbsp;<span class="ident" id="7381845">expected</span>&nbsp;<span class="op" id="7381854">:=</span>&nbsp;<span class="ident" id="7381857"><a href="/gostd/archive/tar/writer_test.go.html#7381813">test</a></span><span class="op" id="7381861">[</span><span class="num" id="7381862">0</span><span class="op" id="7381863">]</span><span class="op" id="7381864">,</span>&nbsp;<span class="ident" id="7381866"><a href="/gostd/archive/tar/writer_test.go.html#7381813">test</a></span><span class="op" id="7381870">[</span><span class="num" id="7381871">1</span><span class="op" id="7381872">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7381876">if</span>&nbsp;<span class="ident" id="7381879">result</span>&nbsp;<span class="op" id="7381886">:=</span>&nbsp;<span class="ident" id="7381889"><a href="/gostd/archive/tar/writer.go.html#5651773">paxHeader</a></span><span class="op" id="7381898">(</span><span class="ident" id="7381899"><a href="/gostd/archive/tar/writer_test.go.html#7381840">key</a></span><span class="op" id="7381902">)</span><span class="op" id="7381903">;</span>&nbsp;<span class="ident" id="7381905"><a href="/gostd/archive/tar/writer_test.go.html#7381879">result</a></span>&nbsp;<span class="op" id="7381912">!=</span>&nbsp;<span class="ident" id="7381915"><a href="/gostd/archive/tar/writer_test.go.html#7381845">expected</a></span>&nbsp;<span class="op" id="7381924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7381929"><a href="/gostd/archive/tar/writer_test.go.html#7381379">t</a></span><span class="op" id="7381930">.</span><span class="ident" id="7381931"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7381937">(</span><span class="string" id="7381938">&#34;paxHeader:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op" id="7381970">,</span>&nbsp;<span class="ident" id="7381972"><a href="/gostd/archive/tar/writer_test.go.html#7381879">result</a></span><span class="op" id="7381978">,</span>&nbsp;<span class="ident" id="7381980"><a href="/gostd/archive/tar/writer_test.go.html#7381845">expected</a></span><span class="op" id="7381988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7381995">}</span><br>
<span class="lineno">420</span><span class="op" id="7381997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7382000">func</span>&nbsp;<span class="ident" id="7382005">TestUSTARLongName</span><span class="op" id="7382022">(</span><span class="ident" id="7382023">t</span>&nbsp;<span class="op" id="7382025">*</span><span class="ident" id="7382026"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7382033">.</span><span class="ident" id="7382034"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7382035">)</span>&nbsp;<span class="op" id="7382037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7382040">//&nbsp;Create&nbsp;an&nbsp;archive&nbsp;with&nbsp;a&nbsp;path&nbsp;that&nbsp;failed&nbsp;to&nbsp;split&nbsp;with&nbsp;USTAR&nbsp;extension&nbsp;in&nbsp;previous&nbsp;versions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382138">fileinfo</span><span class="op" id="7382146">,</span>&nbsp;<span class="ident" id="7382148">err</span>&nbsp;<span class="op" id="7382152">:=</span>&nbsp;<span class="ident" id="7382155"><a href="/gostd/archive/tar/writer_test.go.html#7371690">os</a></span><span class="op" id="7382157">.</span><span class="ident" id="7382158"><a href="/gostd/os/file_unix.go.html#2455511">Stat</a></span><span class="op" id="7382162">(</span><span class="string" id="7382163">&#34;testdata/small.txt&#34;</span><span class="op" id="7382183">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7382186">if</span>&nbsp;<span class="ident" id="7382189"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span>&nbsp;<span class="op" id="7382193">!=</span>&nbsp;<span class="builtintype" id="7382196">nil</span>&nbsp;<span class="op" id="7382200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382204"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7382205">.</span><span class="ident" id="7382206"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7382211">(</span><span class="ident" id="7382212"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span><span class="op" id="7382215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7382218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382221">hdr</span><span class="op" id="7382224">,</span>&nbsp;<span class="ident" id="7382226"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span>&nbsp;<span class="op" id="7382230">:=</span>&nbsp;<span class="ident" id="7382233"><a href="/gostd/archive/tar/common.go.html#5615634">FileInfoHeader</a></span><span class="op" id="7382247">(</span><span class="ident" id="7382248"><a href="/gostd/archive/tar/writer_test.go.html#7382138">fileinfo</a></span><span class="op" id="7382256">,</span>&nbsp;<span class="string" id="7382258">&#34;&#34;</span><span class="op" id="7382260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382263"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7382266">.</span><span class="ident" id="7382267"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="7382276">=</span>&nbsp;<span class="ident" id="7382278"><a href="/gostd/archive/tar/common.go.html#5610814">TypeDir</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7382287">if</span>&nbsp;<span class="ident" id="7382290"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span>&nbsp;<span class="op" id="7382294">!=</span>&nbsp;<span class="builtintype" id="7382297">nil</span>&nbsp;<span class="op" id="7382301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382305"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7382306">.</span><span class="ident" id="7382307"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7382313">(</span><span class="string" id="7382314">&#34;os.Stat:1&nbsp;%v&#34;</span><span class="op" id="7382328">,</span>&nbsp;<span class="ident" id="7382330"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span><span class="op" id="7382333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7382336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7382339">//&nbsp;Force&nbsp;a&nbsp;PAX&nbsp;long&nbsp;name&nbsp;to&nbsp;be&nbsp;written.&nbsp;The&nbsp;name&nbsp;was&nbsp;taken&nbsp;from&nbsp;a&nbsp;practical&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7382424">//&nbsp;that&nbsp;fails&nbsp;and&nbsp;replaced&nbsp;ever&nbsp;char&nbsp;through&nbsp;numbers&nbsp;to&nbsp;anonymize&nbsp;the&nbsp;sample.</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382503">longName</span>&nbsp;<span class="op" id="7382512">:=</span>&nbsp;<span class="string" id="7382515">&#34;/0000_0000000/00000-000000000/0000_0000000/00000-0000000000000/0000_0000000/00000-0000000-00000000/0000_0000000/00000000/0000_0000000/000/0000_0000000/00000000v00/0000_0000000/000000/0000_0000000/0000000/0000_0000000/00000y-00/0000/0000/00000000/0x000000/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382774"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7382777">.</span><span class="ident" id="7382778"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7382783">=</span>&nbsp;<span class="ident" id="7382785"><a href="/gostd/archive/tar/writer_test.go.html#7382503">longName</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382796"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7382799">.</span><span class="ident" id="7382800"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span>&nbsp;<span class="op" id="7382805">=</span>&nbsp;<span class="num" id="7382807">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7382810">var</span>&nbsp;<span class="ident" id="7382814">buf</span>&nbsp;<span class="ident" id="7382818"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7382823">.</span><span class="ident" id="7382824"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382832">writer</span>&nbsp;<span class="op" id="7382839">:=</span>&nbsp;<span class="ident" id="7382842"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7382851">(</span><span class="op" id="7382852">&amp;</span><span class="ident" id="7382853"><a href="/gostd/archive/tar/writer_test.go.html#7382814">buf</a></span><span class="op" id="7382856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7382859">if</span>&nbsp;<span class="ident" id="7382862">err</span>&nbsp;<span class="op" id="7382866">:=</span>&nbsp;<span class="ident" id="7382869"><a href="/gostd/archive/tar/writer_test.go.html#7382832">writer</a></span><span class="op" id="7382875">.</span><span class="ident" id="7382876"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7382887">(</span><span class="ident" id="7382888"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7382891">)</span><span class="op" id="7382892">;</span>&nbsp;<span class="ident" id="7382894"><a href="/gostd/archive/tar/writer_test.go.html#7382862">err</a></span>&nbsp;<span class="op" id="7382898">!=</span>&nbsp;<span class="builtintype" id="7382901">nil</span>&nbsp;<span class="op" id="7382905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382909"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7382910">.</span><span class="ident" id="7382911"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7382916">(</span><span class="ident" id="7382917"><a href="/gostd/archive/tar/writer_test.go.html#7382862">err</a></span><span class="op" id="7382920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7382923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7382926">if</span>&nbsp;<span class="ident" id="7382929">err</span>&nbsp;<span class="op" id="7382933">:=</span>&nbsp;<span class="ident" id="7382936"><a href="/gostd/archive/tar/writer_test.go.html#7382832">writer</a></span><span class="op" id="7382942">.</span><span class="ident" id="7382943"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7382948">(</span><span class="op" id="7382949">)</span><span class="op" id="7382950">;</span>&nbsp;<span class="ident" id="7382952"><a href="/gostd/archive/tar/writer_test.go.html#7382929">err</a></span>&nbsp;<span class="op" id="7382956">!=</span>&nbsp;<span class="builtintype" id="7382959">nil</span>&nbsp;<span class="op" id="7382963">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7382967"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7382968">.</span><span class="ident" id="7382969"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7382974">(</span><span class="ident" id="7382975"><a href="/gostd/archive/tar/writer_test.go.html#7382929">err</a></span><span class="op" id="7382978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7382981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7382984">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;long&nbsp;name&nbsp;back&nbsp;out&nbsp;of&nbsp;the&nbsp;archive.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383046">reader</span>&nbsp;<span class="op" id="7383053">:=</span>&nbsp;<span class="ident" id="7383056"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7383065">(</span><span class="op" id="7383066">&amp;</span><span class="ident" id="7383067"><a href="/gostd/archive/tar/writer_test.go.html#7382814">buf</a></span><span class="op" id="7383070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383073"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7383076">,</span>&nbsp;<span class="ident" id="7383078"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span>&nbsp;<span class="op" id="7383082">=</span>&nbsp;<span class="ident" id="7383084"><a href="/gostd/archive/tar/writer_test.go.html#7383046">reader</a></span><span class="op" id="7383090">.</span><span class="ident" id="7383091"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7383095">(</span><span class="op" id="7383096">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383099">if</span>&nbsp;<span class="ident" id="7383102"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span>&nbsp;<span class="op" id="7383106">!=</span>&nbsp;<span class="builtintype" id="7383109">nil</span>&nbsp;<span class="op" id="7383113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383117"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7383118">.</span><span class="ident" id="7383119"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7383124">(</span><span class="ident" id="7383125"><a href="/gostd/archive/tar/writer_test.go.html#7382148">err</a></span><span class="op" id="7383128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383134">if</span>&nbsp;<span class="ident" id="7383137"><a href="/gostd/archive/tar/writer_test.go.html#7382221">hdr</a></span><span class="op" id="7383140">.</span><span class="ident" id="7383141"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span>&nbsp;<span class="op" id="7383146">!=</span>&nbsp;<span class="ident" id="7383149"><a href="/gostd/archive/tar/writer_test.go.html#7382503">longName</a></span>&nbsp;<span class="op" id="7383158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383162"><a href="/gostd/archive/tar/writer_test.go.html#7382023">t</a></span><span class="op" id="7383163">.</span><span class="ident" id="7383164"><a href="/gostd/testing/testing.go.html#5480265">Fatal</a></span><span class="op" id="7383169">(</span><span class="string" id="7383170">&#34;Couldn&#39;t&nbsp;recover&nbsp;long&nbsp;name&#34;</span><span class="op" id="7383198">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383201">}</span><br>
<span class="lineno"></span><span class="op" id="7383203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7383206">func</span>&nbsp;<span class="ident" id="7383211">TestValidTypeflagWithPAXHeader</span><span class="op" id="7383241">(</span><span class="ident" id="7383242">t</span>&nbsp;<span class="op" id="7383244">*</span><span class="ident" id="7383245"><a href="/gostd/archive/tar/writer_test.go.html#7371718">testing</a></span><span class="op" id="7383252">.</span><span class="ident" id="7383253"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7383254">)</span>&nbsp;<span class="op" id="7383256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383259">var</span>&nbsp;<span class="ident" id="7383263">buffer</span>&nbsp;<span class="ident" id="7383270"><a href="/gostd/archive/tar/writer_test.go.html#7371655">bytes</a></span><span class="op" id="7383275">.</span><span class="ident" id="7383276"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383284">tw</span>&nbsp;<span class="op" id="7383287">:=</span>&nbsp;<span class="ident" id="7383290"><a href="/gostd/archive/tar/writer.go.html#5642750">NewWriter</a></span><span class="op" id="7383299">(</span><span class="op" id="7383300">&amp;</span><span class="ident" id="7383301"><a href="/gostd/archive/tar/writer_test.go.html#7383263">buffer</a></span><span class="op" id="7383307">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383311">fileName</span>&nbsp;<span class="op" id="7383320">:=</span>&nbsp;<span class="ident" id="7383323"><a href="/gostd/archive/tar/writer_test.go.html#7371707">strings</a></span><span class="op" id="7383330">.</span><span class="ident" id="7383331"><a href="/gostd/strings/strings.go.html#2976882">Repeat</a></span><span class="op" id="7383337">(</span><span class="string" id="7383338">&#34;ab&#34;</span><span class="op" id="7383342">,</span>&nbsp;<span class="num" id="7383344">100</span><span class="op" id="7383347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383351">hdr</span>&nbsp;<span class="op" id="7383355">:=</span>&nbsp;<span class="op" id="7383358">&amp;</span><span class="ident" id="7383359"><a href="/gostd/archive/tar/common.go.html#5611313">Header</a></span><span class="op" id="7383365">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383369"><a href="/gostd/archive/tar/common.go.html#5611330">Name</a></span><span class="op" id="7383373">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383379"><a href="/gostd/archive/tar/writer_test.go.html#7383311">fileName</a></span><span class="op" id="7383387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383391"><a href="/gostd/archive/tar/common.go.html#5611516">Size</a></span><span class="op" id="7383395">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7383401">4</span><span class="op" id="7383402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383406"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7383414">:</span>&nbsp;<span class="num" id="7383416">0</span><span class="op" id="7383417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383423">if</span>&nbsp;<span class="ident" id="7383426">err</span>&nbsp;<span class="op" id="7383430">:=</span>&nbsp;<span class="ident" id="7383433"><a href="/gostd/archive/tar/writer_test.go.html#7383284">tw</a></span><span class="op" id="7383435">.</span><span class="ident" id="7383436"><a href="/gostd/archive/tar/writer.go.html#5645218">WriteHeader</a></span><span class="op" id="7383447">(</span><span class="ident" id="7383448"><a href="/gostd/archive/tar/writer_test.go.html#7383351">hdr</a></span><span class="op" id="7383451">)</span><span class="op" id="7383452">;</span>&nbsp;<span class="ident" id="7383454"><a href="/gostd/archive/tar/writer_test.go.html#7383426">err</a></span>&nbsp;<span class="op" id="7383458">!=</span>&nbsp;<span class="builtintype" id="7383461">nil</span>&nbsp;<span class="op" id="7383465">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383469"><a href="/gostd/archive/tar/writer_test.go.html#7383242">t</a></span><span class="op" id="7383470">.</span><span class="ident" id="7383471"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7383477">(</span><span class="string" id="7383478">&#34;Failed&nbsp;to&nbsp;write&nbsp;header:&nbsp;%s&#34;</span><span class="op" id="7383506">,</span>&nbsp;<span class="ident" id="7383508"><a href="/gostd/archive/tar/writer_test.go.html#7383426">err</a></span><span class="op" id="7383511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383517">if</span>&nbsp;<span class="ident" id="7383520">_</span><span class="op" id="7383521">,</span>&nbsp;<span class="ident" id="7383523">err</span>&nbsp;<span class="op" id="7383527">:=</span>&nbsp;<span class="ident" id="7383530"><a href="/gostd/archive/tar/writer_test.go.html#7383284">tw</a></span><span class="op" id="7383532">.</span><span class="ident" id="7383533"><a href="/gostd/archive/tar/writer.go.html#5652342">Write</a></span><span class="op" id="7383538">(</span><span class="op" id="7383539">[</span><span class="op" id="7383540">]</span><span class="builtintype" id="7383541">byte</span><span class="op" id="7383545">(</span><span class="string" id="7383546">&#34;fooo&#34;</span><span class="op" id="7383552">)</span><span class="op" id="7383553">)</span><span class="op" id="7383554">;</span>&nbsp;<span class="ident" id="7383556"><a href="/gostd/archive/tar/writer_test.go.html#7383523">err</a></span>&nbsp;<span class="op" id="7383560">!=</span>&nbsp;<span class="builtintype" id="7383563">nil</span>&nbsp;<span class="op" id="7383567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383571"><a href="/gostd/archive/tar/writer_test.go.html#7383242">t</a></span><span class="op" id="7383572">.</span><span class="ident" id="7383573"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7383579">(</span><span class="string" id="7383580">&#34;Failed&nbsp;to&nbsp;write&nbsp;the&nbsp;file&#39;s&nbsp;data:&nbsp;%s&#34;</span><span class="op" id="7383617">,</span>&nbsp;<span class="ident" id="7383619"><a href="/gostd/archive/tar/writer_test.go.html#7383523">err</a></span><span class="op" id="7383622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383625">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383628"><a href="/gostd/archive/tar/writer_test.go.html#7383284">tw</a></span><span class="op" id="7383630">.</span><span class="ident" id="7383631"><a href="/gostd/archive/tar/writer.go.html#5652760">Close</a></span><span class="op" id="7383636">(</span><span class="op" id="7383637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383641">tr</span>&nbsp;<span class="op" id="7383644">:=</span>&nbsp;<span class="ident" id="7383647"><a href="/gostd/archive/tar/reader.go.html#5620294">NewReader</a></span><span class="op" id="7383656">(</span><span class="op" id="7383657">&amp;</span><span class="ident" id="7383658"><a href="/gostd/archive/tar/writer_test.go.html#7383263">buffer</a></span><span class="op" id="7383664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383668">for</span>&nbsp;<span class="op" id="7383672">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383676">header</span><span class="op" id="7383682">,</span>&nbsp;<span class="ident" id="7383684">err</span>&nbsp;<span class="op" id="7383688">:=</span>&nbsp;<span class="ident" id="7383691"><a href="/gostd/archive/tar/writer_test.go.html#7383641">tr</a></span><span class="op" id="7383693">.</span><span class="ident" id="7383694"><a href="/gostd/archive/tar/reader.go.html#5620424">Next</a></span><span class="op" id="7383698">(</span><span class="op" id="7383699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383703">if</span>&nbsp;<span class="ident" id="7383706"><a href="/gostd/archive/tar/writer_test.go.html#7383684">err</a></span>&nbsp;<span class="op" id="7383710">==</span>&nbsp;<span class="ident" id="7383713"><a href="/gostd/archive/tar/writer_test.go.html#7371671">io</a></span><span class="op" id="7383715">.</span><span class="ident" id="7383716"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7383720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383725">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383737">if</span>&nbsp;<span class="ident" id="7383740"><a href="/gostd/archive/tar/writer_test.go.html#7383684">err</a></span>&nbsp;<span class="op" id="7383744">!=</span>&nbsp;<span class="builtintype" id="7383747">nil</span>&nbsp;<span class="op" id="7383751">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383756"><a href="/gostd/archive/tar/writer_test.go.html#7383242">t</a></span><span class="op" id="7383757">.</span><span class="ident" id="7383758"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7383764">(</span><span class="string" id="7383765">&#34;Failed&nbsp;to&nbsp;read&nbsp;header:&nbsp;%s&#34;</span><span class="op" id="7383792">,</span>&nbsp;<span class="ident" id="7383794"><a href="/gostd/archive/tar/writer_test.go.html#7383684">err</a></span><span class="op" id="7383797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7383805">if</span>&nbsp;<span class="ident" id="7383808"><a href="/gostd/archive/tar/writer_test.go.html#7383676">header</a></span><span class="op" id="7383814">.</span><span class="ident" id="7383815"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span>&nbsp;<span class="op" id="7383824">!=</span>&nbsp;<span class="num" id="7383827">0</span>&nbsp;<span class="op" id="7383829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7383834"><a href="/gostd/archive/tar/writer_test.go.html#7383242">t</a></span><span class="op" id="7383835">.</span><span class="ident" id="7383836"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7383842">(</span><span class="string" id="7383843">&#34;Typeflag&nbsp;should&#39;ve&nbsp;been&nbsp;0,&nbsp;found&nbsp;%d&#34;</span><span class="op" id="7383880">,</span>&nbsp;<span class="ident" id="7383882"><a href="/gostd/archive/tar/writer_test.go.html#7383676">header</a></span><span class="op" id="7383888">.</span><span class="ident" id="7383889"><a href="/gostd/archive/tar/common.go.html#5611596">Typeflag</a></span><span class="op" id="7383897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383901">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7383904">}</span><br>
<span class="lineno"></span><span class="op" id="7383906">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
