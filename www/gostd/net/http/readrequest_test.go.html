<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html" class="current">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8245352">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8245408">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8245462">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8245513">package</span>&nbsp;<span class="ident" id="8245521">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245527">import</span>&nbsp;<span class="op" id="8245534">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245537">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245546">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245555">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245562">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245568">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245579">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245590">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245601">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8245611">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245614">type</span>&nbsp;<span class="ident" id="8245619">reqTest</span>&nbsp;<span class="keyword" id="8245627">struct</span>&nbsp;<span class="op" id="8245634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8245637">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8245645">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8245653">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8245661">*</span><span class="ident" id="8245662">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8245671">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8245679">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8245687">Trailer</span>&nbsp;<span class="ident" id="8245695">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8245703">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8245711">string</span><br>
<span class="lineno"></span><span class="op" id="8245718">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8245721">var</span>&nbsp;<span class="ident" id="8245725">noError</span>&nbsp;<span class="op" id="8245733">=</span>&nbsp;<span class="string" id="8245735">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8245738">var</span>&nbsp;<span class="ident" id="8245742">noBody</span>&nbsp;<span class="op" id="8245749">=</span>&nbsp;<span class="string" id="8245751">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8245754">var</span>&nbsp;<span class="ident" id="8245758">noTrailer</span>&nbsp;<span class="ident" id="8245768">Header</span>&nbsp;<span class="op" id="8245775">=</span>&nbsp;<span class="ident" id="8245777">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8245782">var</span>&nbsp;<span class="ident" id="8245786">reqTests</span>&nbsp;<span class="op" id="8245795">=</span>&nbsp;<span class="op" id="8245797">[</span><span class="op" id="8245798">]</span><span class="ident" id="8245799">reqTest</span><span class="op" id="8245806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8245809">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8245873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245877">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8245923">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245928">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="8245959">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245964">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="8245987">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8245992">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="8246070">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246075">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="8246113">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246118">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="8246154">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246159">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="8246212">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246217">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="8246239">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246244">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="8246268">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246273">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8246312">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246317">&#34;abcdef\n???&#34;</span><span class="op" id="8246330">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246335">&amp;</span><span class="ident" id="8246336">Request</span><span class="op" id="8246343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246348">Method</span><span class="op" id="8246354">:</span>&nbsp;<span class="string" id="8246356">&#34;GET&#34;</span><span class="op" id="8246361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246366">URL</span><span class="op" id="8246369">:</span>&nbsp;<span class="op" id="8246371">&amp;</span><span class="ident" id="8246372">url</span><span class="op" id="8246375">.</span><span class="ident" id="8246376">URL</span><span class="op" id="8246379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246385">Scheme</span><span class="op" id="8246391">:</span>&nbsp;<span class="string" id="8246393">&#34;http&#34;</span><span class="op" id="8246399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246405">Host</span><span class="op" id="8246409">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8246413">&#34;www.techcrunch.com&#34;</span><span class="op" id="8246433">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246439">Path</span><span class="op" id="8246443">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8246447">&#34;/&#34;</span><span class="op" id="8246450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246455">}</span><span class="op" id="8246456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246461">Proto</span><span class="op" id="8246466">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246473">&#34;HTTP/1.1&#34;</span><span class="op" id="8246483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246488">ProtoMajor</span><span class="op" id="8246498">:</span>&nbsp;<span class="num" id="8246500">1</span><span class="op" id="8246501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246506">ProtoMinor</span><span class="op" id="8246516">:</span>&nbsp;<span class="num" id="8246518">1</span><span class="op" id="8246519">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246524">Header</span><span class="op" id="8246530">:</span>&nbsp;<span class="ident" id="8246532">Header</span><span class="op" id="8246538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246544">&#34;Accept&#34;</span><span class="op" id="8246552">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246564">{</span><span class="string" id="8246565">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="8246630">}</span><span class="op" id="8246631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246637">&#34;Accept-Language&#34;</span><span class="op" id="8246654">:</span>&nbsp;&nbsp;<span class="op" id="8246657">{</span><span class="string" id="8246658">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="8246674">}</span><span class="op" id="8246675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246681">&#34;Accept-Encoding&#34;</span><span class="op" id="8246698">:</span>&nbsp;&nbsp;<span class="op" id="8246701">{</span><span class="string" id="8246702">&#34;gzip,deflate&#34;</span><span class="op" id="8246716">}</span><span class="op" id="8246717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246723">&#34;Accept-Charset&#34;</span><span class="op" id="8246739">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8246743">{</span><span class="string" id="8246744">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="8246776">}</span><span class="op" id="8246777">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246783">&#34;Keep-Alive&#34;</span><span class="op" id="8246795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246803">{</span><span class="string" id="8246804">&#34;300&#34;</span><span class="op" id="8246809">}</span><span class="op" id="8246810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246816">&#34;Proxy-Connection&#34;</span><span class="op" id="8246834">:</span>&nbsp;<span class="op" id="8246836">{</span><span class="string" id="8246837">&#34;keep-alive&#34;</span><span class="op" id="8246849">}</span><span class="op" id="8246850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246856">&#34;Content-Length&#34;</span><span class="op" id="8246872">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8246876">{</span><span class="string" id="8246877">&#34;7&#34;</span><span class="op" id="8246880">}</span><span class="op" id="8246881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246887">&#34;User-Agent&#34;</span><span class="op" id="8246899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246907">{</span><span class="string" id="8246908">&#34;Fake&#34;</span><span class="op" id="8246914">}</span><span class="op" id="8246915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8246920">}</span><span class="op" id="8246921">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246926">Close</span><span class="op" id="8246931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8246941">false</span><span class="op" id="8246946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246951">ContentLength</span><span class="op" id="8246964">:</span>&nbsp;<span class="num" id="8246966">7</span><span class="op" id="8246967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8246972">Host</span><span class="op" id="8246976">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8246987">&#34;www.techcrunch.com&#34;</span><span class="op" id="8247007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247012">RequestURI</span><span class="op" id="8247022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247027">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="8247055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247059">}</span><span class="op" id="8247060">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247065">&#34;abcdef\n&#34;</span><span class="op" id="8247075">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247080">noTrailer</span><span class="op" id="8247089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247093">noError</span><span class="op" id="8247100">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247103">}</span><span class="op" id="8247104">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8247108">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247159">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8247180">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247185">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="8247208">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247213">&amp;</span><span class="ident" id="8247214">Request</span><span class="op" id="8247221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247226">Method</span><span class="op" id="8247232">:</span>&nbsp;<span class="string" id="8247234">&#34;GET&#34;</span><span class="op" id="8247239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247244">URL</span><span class="op" id="8247247">:</span>&nbsp;<span class="op" id="8247249">&amp;</span><span class="ident" id="8247250">url</span><span class="op" id="8247253">.</span><span class="ident" id="8247254">URL</span><span class="op" id="8247257">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247263">Path</span><span class="op" id="8247267">:</span>&nbsp;<span class="string" id="8247269">&#34;/&#34;</span><span class="op" id="8247272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247277">}</span><span class="op" id="8247278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247283">Proto</span><span class="op" id="8247288">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247298">&#34;HTTP/1.1&#34;</span><span class="op" id="8247308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247313">ProtoMajor</span><span class="op" id="8247323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8247328">1</span><span class="op" id="8247329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247334">ProtoMinor</span><span class="op" id="8247344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8247349">1</span><span class="op" id="8247350">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247355">Header</span><span class="op" id="8247361">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247370">Header</span><span class="op" id="8247376">{</span><span class="op" id="8247377">}</span><span class="op" id="8247378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247383">Close</span><span class="op" id="8247388">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8247398">false</span><span class="op" id="8247403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247408">ContentLength</span><span class="op" id="8247421">:</span>&nbsp;<span class="num" id="8247423">0</span><span class="op" id="8247424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247429">Host</span><span class="op" id="8247433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247444">&#34;foo.com&#34;</span><span class="op" id="8247453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247458">RequestURI</span><span class="op" id="8247468">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247473">&#34;/&#34;</span><span class="op" id="8247476">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247480">}</span><span class="op" id="8247481">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247486">noBody</span><span class="op" id="8247492">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247496">noTrailer</span><span class="op" id="8247505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247509">noError</span><span class="op" id="8247516">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247519">}</span><span class="op" id="8247520">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8247524">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8247579">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247629">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247633">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8247684">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247689">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8247709">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247714">&amp;</span><span class="ident" id="8247715">Request</span><span class="op" id="8247722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247727">Method</span><span class="op" id="8247733">:</span>&nbsp;<span class="string" id="8247735">&#34;GET&#34;</span><span class="op" id="8247740">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247745">URL</span><span class="op" id="8247748">:</span>&nbsp;<span class="op" id="8247750">&amp;</span><span class="ident" id="8247751">url</span><span class="op" id="8247754">.</span><span class="ident" id="8247755">URL</span><span class="op" id="8247758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247764">Path</span><span class="op" id="8247768">:</span>&nbsp;<span class="string" id="8247770">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8247803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8247808">}</span><span class="op" id="8247809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247814">Proto</span><span class="op" id="8247819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247829">&#34;HTTP/1.1&#34;</span><span class="op" id="8247839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247844">ProtoMajor</span><span class="op" id="8247854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8247859">1</span><span class="op" id="8247860">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247865">ProtoMinor</span><span class="op" id="8247875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8247880">1</span><span class="op" id="8247881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247886">Header</span><span class="op" id="8247892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247901">Header</span><span class="op" id="8247907">{</span><span class="op" id="8247908">}</span><span class="op" id="8247909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247914">Close</span><span class="op" id="8247919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8247929">false</span><span class="op" id="8247934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247939">ContentLength</span><span class="op" id="8247952">:</span>&nbsp;<span class="num" id="8247954">0</span><span class="op" id="8247955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247960">Host</span><span class="op" id="8247964">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8247975">&#34;test&#34;</span><span class="op" id="8247981">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8247986">RequestURI</span><span class="op" id="8247996">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248001">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8248034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248038">}</span><span class="op" id="8248039">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248044">noBody</span><span class="op" id="8248050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248054">noTrailer</span><span class="op" id="8248063">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248067">noError</span><span class="op" id="8248074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248077">}</span><span class="op" id="8248078">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8248082">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248154">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248158">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8248200">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248205">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8248225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248229">nil</span><span class="op" id="8248232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248236">noBody</span><span class="op" id="8248242">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248246">noTrailer</span><span class="op" id="8248255">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248259">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="8248314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248317">}</span><span class="op" id="8248318">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8248322">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248345">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248349">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8248369">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248374">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8248394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248398">nil</span><span class="op" id="8248401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248405">noBody</span><span class="op" id="8248411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248415">noTrailer</span><span class="op" id="8248424">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248428">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="8248447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248450">}</span><span class="op" id="8248451">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8248455">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248492">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248496">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8248518">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248523">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="8248543">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248548">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8248585">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248590">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="8248605">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248610">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="8248625">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248630">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8248638">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248643">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="8248676">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248681">&#34;\r\n&#34;</span><span class="op" id="8248687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248691">&amp;</span><span class="ident" id="8248692">Request</span><span class="op" id="8248699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248704">Method</span><span class="op" id="8248710">:</span>&nbsp;<span class="string" id="8248712">&#34;POST&#34;</span><span class="op" id="8248718">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248723">URL</span><span class="op" id="8248726">:</span>&nbsp;<span class="op" id="8248728">&amp;</span><span class="ident" id="8248729">url</span><span class="op" id="8248732">.</span><span class="ident" id="8248733">URL</span><span class="op" id="8248736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248742">Path</span><span class="op" id="8248746">:</span>&nbsp;<span class="string" id="8248748">&#34;/&#34;</span><span class="op" id="8248751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248756">}</span><span class="op" id="8248757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248762">TransferEncoding</span><span class="op" id="8248778">:</span>&nbsp;<span class="op" id="8248780">[</span><span class="op" id="8248781">]</span><span class="builtintype" id="8248782">string</span><span class="op" id="8248788">{</span><span class="string" id="8248789">&#34;chunked&#34;</span><span class="op" id="8248798">}</span><span class="op" id="8248799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248804">Proto</span><span class="op" id="8248809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248822">&#34;HTTP/1.1&#34;</span><span class="op" id="8248832">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248837">ProtoMajor</span><span class="op" id="8248847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8248855">1</span><span class="op" id="8248856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248861">ProtoMinor</span><span class="op" id="8248871">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8248879">1</span><span class="op" id="8248880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248885">Header</span><span class="op" id="8248891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248903">Header</span><span class="op" id="8248909">{</span><span class="op" id="8248910">}</span><span class="op" id="8248911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248916">ContentLength</span><span class="op" id="8248929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248934">-</span><span class="num" id="8248935">1</span><span class="op" id="8248936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248941">Host</span><span class="op" id="8248945">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248959">&#34;foo.com&#34;</span><span class="op" id="8248968">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8248973">RequestURI</span><span class="op" id="8248983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8248991">&#34;/&#34;</span><span class="op" id="8248994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8248998">}</span><span class="op" id="8248999">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249004">&#34;foobar&#34;</span><span class="op" id="8249012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249016">Header</span><span class="op" id="8249022">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249027">&#34;Trailer-Key&#34;</span><span class="op" id="8249040">:</span>&nbsp;<span class="op" id="8249042">{</span><span class="string" id="8249043">&#34;Trailer-Value&#34;</span><span class="op" id="8249058">}</span><span class="op" id="8249059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249063">}</span><span class="op" id="8249064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249068">noError</span><span class="op" id="8249075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249078">}</span><span class="op" id="8249079">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8249083">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249125">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8249170">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249175">&amp;</span><span class="ident" id="8249176">Request</span><span class="op" id="8249183">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249188">Method</span><span class="op" id="8249194">:</span>&nbsp;<span class="string" id="8249196">&#34;CONNECT&#34;</span><span class="op" id="8249205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249210">URL</span><span class="op" id="8249213">:</span>&nbsp;<span class="op" id="8249215">&amp;</span><span class="ident" id="8249216">url</span><span class="op" id="8249219">.</span><span class="ident" id="8249220">URL</span><span class="op" id="8249223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249229">Host</span><span class="op" id="8249233">:</span>&nbsp;<span class="string" id="8249235">&#34;www.google.com:443&#34;</span><span class="op" id="8249255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249260">}</span><span class="op" id="8249261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249266">Proto</span><span class="op" id="8249271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249281">&#34;HTTP/1.1&#34;</span><span class="op" id="8249291">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249296">ProtoMajor</span><span class="op" id="8249306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8249311">1</span><span class="op" id="8249312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249317">ProtoMinor</span><span class="op" id="8249327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8249332">1</span><span class="op" id="8249333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249338">Header</span><span class="op" id="8249344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249353">Header</span><span class="op" id="8249359">{</span><span class="op" id="8249360">}</span><span class="op" id="8249361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249366">Close</span><span class="op" id="8249371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8249381">false</span><span class="op" id="8249386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249391">ContentLength</span><span class="op" id="8249404">:</span>&nbsp;<span class="num" id="8249406">0</span><span class="op" id="8249407">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249412">Host</span><span class="op" id="8249416">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249427">&#34;www.google.com:443&#34;</span><span class="op" id="8249447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249452">RequestURI</span><span class="op" id="8249462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249467">&#34;www.google.com:443&#34;</span><span class="op" id="8249487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249491">}</span><span class="op" id="8249492">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249497">noBody</span><span class="op" id="8249503">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249507">noTrailer</span><span class="op" id="8249516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249520">noError</span><span class="op" id="8249527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249530">}</span><span class="op" id="8249531">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8249535">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249576">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8249617">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249622">&amp;</span><span class="ident" id="8249623">Request</span><span class="op" id="8249630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249635">Method</span><span class="op" id="8249641">:</span>&nbsp;<span class="string" id="8249643">&#34;CONNECT&#34;</span><span class="op" id="8249652">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249657">URL</span><span class="op" id="8249660">:</span>&nbsp;<span class="op" id="8249662">&amp;</span><span class="ident" id="8249663">url</span><span class="op" id="8249666">.</span><span class="ident" id="8249667">URL</span><span class="op" id="8249670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249676">Host</span><span class="op" id="8249680">:</span>&nbsp;<span class="string" id="8249682">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8249698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249703">}</span><span class="op" id="8249704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249709">Proto</span><span class="op" id="8249714">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249724">&#34;HTTP/1.1&#34;</span><span class="op" id="8249734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249739">ProtoMajor</span><span class="op" id="8249749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8249754">1</span><span class="op" id="8249755">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249760">ProtoMinor</span><span class="op" id="8249770">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8249775">1</span><span class="op" id="8249776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249781">Header</span><span class="op" id="8249787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249796">Header</span><span class="op" id="8249802">{</span><span class="op" id="8249803">}</span><span class="op" id="8249804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249809">Close</span><span class="op" id="8249814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8249824">false</span><span class="op" id="8249829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249834">ContentLength</span><span class="op" id="8249847">:</span>&nbsp;<span class="num" id="8249849">0</span><span class="op" id="8249850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249855">Host</span><span class="op" id="8249859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249870">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8249886">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249891">RequestURI</span><span class="op" id="8249901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8249906">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8249922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249926">}</span><span class="op" id="8249927">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249932">noBody</span><span class="op" id="8249938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249942">noTrailer</span><span class="op" id="8249951">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8249955">noError</span><span class="op" id="8249962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249965">}</span><span class="op" id="8249966">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8249970">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8249999">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250003">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8250038">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250043">&amp;</span><span class="ident" id="8250044">Request</span><span class="op" id="8250051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250056">Method</span><span class="op" id="8250062">:</span>&nbsp;<span class="string" id="8250064">&#34;CONNECT&#34;</span><span class="op" id="8250073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250078">URL</span><span class="op" id="8250081">:</span>&nbsp;<span class="op" id="8250083">&amp;</span><span class="ident" id="8250084">url</span><span class="op" id="8250087">.</span><span class="ident" id="8250088">URL</span><span class="op" id="8250091">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250097">Path</span><span class="op" id="8250101">:</span>&nbsp;<span class="string" id="8250103">&#34;/_goRPC_&#34;</span><span class="op" id="8250113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250118">}</span><span class="op" id="8250119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250124">Proto</span><span class="op" id="8250129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250139">&#34;HTTP/1.1&#34;</span><span class="op" id="8250149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250154">ProtoMajor</span><span class="op" id="8250164">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8250169">1</span><span class="op" id="8250170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250175">ProtoMinor</span><span class="op" id="8250185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8250190">1</span><span class="op" id="8250191">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250196">Header</span><span class="op" id="8250202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250211">Header</span><span class="op" id="8250217">{</span><span class="op" id="8250218">}</span><span class="op" id="8250219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250224">Close</span><span class="op" id="8250229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8250239">false</span><span class="op" id="8250244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250249">ContentLength</span><span class="op" id="8250262">:</span>&nbsp;<span class="num" id="8250264">0</span><span class="op" id="8250265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250270">Host</span><span class="op" id="8250274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250285">&#34;&#34;</span><span class="op" id="8250287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250292">RequestURI</span><span class="op" id="8250302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250307">&#34;/_goRPC_&#34;</span><span class="op" id="8250317">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250321">}</span><span class="op" id="8250322">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250327">noBody</span><span class="op" id="8250333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250337">noTrailer</span><span class="op" id="8250346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250350">noError</span><span class="op" id="8250357">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250360">}</span><span class="op" id="8250361">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8250365">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250416">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8250458">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250462">&amp;</span><span class="ident" id="8250463">Request</span><span class="op" id="8250470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250475">Method</span><span class="op" id="8250481">:</span>&nbsp;<span class="string" id="8250483">&#34;NOTIFY&#34;</span><span class="op" id="8250491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250496">URL</span><span class="op" id="8250499">:</span>&nbsp;<span class="op" id="8250501">&amp;</span><span class="ident" id="8250502">url</span><span class="op" id="8250505">.</span><span class="ident" id="8250506">URL</span><span class="op" id="8250509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250515">Path</span><span class="op" id="8250519">:</span>&nbsp;<span class="string" id="8250521">&#34;*&#34;</span><span class="op" id="8250524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250529">}</span><span class="op" id="8250530">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250535">Proto</span><span class="op" id="8250540">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250547">&#34;HTTP/1.1&#34;</span><span class="op" id="8250557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250562">ProtoMajor</span><span class="op" id="8250572">:</span>&nbsp;<span class="num" id="8250574">1</span><span class="op" id="8250575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250580">ProtoMinor</span><span class="op" id="8250590">:</span>&nbsp;<span class="num" id="8250592">1</span><span class="op" id="8250593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250598">Header</span><span class="op" id="8250604">:</span>&nbsp;<span class="ident" id="8250606">Header</span><span class="op" id="8250612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250618">&#34;Server&#34;</span><span class="op" id="8250626">:</span>&nbsp;<span class="op" id="8250628">[</span><span class="op" id="8250629">]</span><span class="builtintype" id="8250630">string</span><span class="op" id="8250636">{</span><span class="string" id="8250637">&#34;foo&#34;</span><span class="op" id="8250642">}</span><span class="op" id="8250643">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250648">}</span><span class="op" id="8250649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250654">Close</span><span class="op" id="8250659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8250669">false</span><span class="op" id="8250674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250679">ContentLength</span><span class="op" id="8250692">:</span>&nbsp;<span class="num" id="8250694">0</span><span class="op" id="8250695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250700">RequestURI</span><span class="op" id="8250710">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250715">&#34;*&#34;</span><span class="op" id="8250718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250722">}</span><span class="op" id="8250723">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250728">noBody</span><span class="op" id="8250734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250738">noTrailer</span><span class="op" id="8250747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250751">noError</span><span class="op" id="8250758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250761">}</span><span class="op" id="8250762">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8250766">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250824">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8250867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250871">&amp;</span><span class="ident" id="8250872">Request</span><span class="op" id="8250879">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250884">Method</span><span class="op" id="8250890">:</span>&nbsp;<span class="string" id="8250892">&#34;OPTIONS&#34;</span><span class="op" id="8250901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250906">URL</span><span class="op" id="8250909">:</span>&nbsp;<span class="op" id="8250911">&amp;</span><span class="ident" id="8250912">url</span><span class="op" id="8250915">.</span><span class="ident" id="8250916">URL</span><span class="op" id="8250919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250925">Path</span><span class="op" id="8250929">:</span>&nbsp;<span class="string" id="8250931">&#34;*&#34;</span><span class="op" id="8250934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8250939">}</span><span class="op" id="8250940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250945">Proto</span><span class="op" id="8250950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8250957">&#34;HTTP/1.1&#34;</span><span class="op" id="8250967">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250972">ProtoMajor</span><span class="op" id="8250982">:</span>&nbsp;<span class="num" id="8250984">1</span><span class="op" id="8250985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8250990">ProtoMinor</span><span class="op" id="8251000">:</span>&nbsp;<span class="num" id="8251002">1</span><span class="op" id="8251003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251008">Header</span><span class="op" id="8251014">:</span>&nbsp;<span class="ident" id="8251016">Header</span><span class="op" id="8251022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251028">&#34;Server&#34;</span><span class="op" id="8251036">:</span>&nbsp;<span class="op" id="8251038">[</span><span class="op" id="8251039">]</span><span class="builtintype" id="8251040">string</span><span class="op" id="8251046">{</span><span class="string" id="8251047">&#34;foo&#34;</span><span class="op" id="8251052">}</span><span class="op" id="8251053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251058">}</span><span class="op" id="8251059">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251064">Close</span><span class="op" id="8251069">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8251079">false</span><span class="op" id="8251084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251089">ContentLength</span><span class="op" id="8251102">:</span>&nbsp;<span class="num" id="8251104">0</span><span class="op" id="8251105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251110">RequestURI</span><span class="op" id="8251120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251125">&#34;*&#34;</span><span class="op" id="8251128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251132">}</span><span class="op" id="8251133">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251138">noBody</span><span class="op" id="8251144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251148">noTrailer</span><span class="op" id="8251157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251161">noError</span><span class="op" id="8251168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251171">}</span><span class="op" id="8251172">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8251176">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251225">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="8251293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251297">&amp;</span><span class="ident" id="8251298">Request</span><span class="op" id="8251305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251310">Method</span><span class="op" id="8251316">:</span>&nbsp;<span class="string" id="8251318">&#34;GET&#34;</span><span class="op" id="8251323">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251328">URL</span><span class="op" id="8251331">:</span>&nbsp;<span class="op" id="8251333">&amp;</span><span class="ident" id="8251334">url</span><span class="op" id="8251337">.</span><span class="ident" id="8251338">URL</span><span class="op" id="8251341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251347">Path</span><span class="op" id="8251351">:</span>&nbsp;<span class="string" id="8251353">&#34;/&#34;</span><span class="op" id="8251356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251361">}</span><span class="op" id="8251362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251367">Header</span><span class="op" id="8251373">:</span>&nbsp;<span class="ident" id="8251375">Header</span><span class="op" id="8251381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8251387">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8251429">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8251469">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251487">&#34;Connection&#34;</span><span class="op" id="8251499">:</span>&nbsp;<span class="op" id="8251501">[</span><span class="op" id="8251502">]</span><span class="builtintype" id="8251503">string</span><span class="op" id="8251509">{</span><span class="string" id="8251510">&#34;close&#34;</span><span class="op" id="8251517">}</span><span class="op" id="8251518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251523">}</span><span class="op" id="8251524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251529">Host</span><span class="op" id="8251533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251541">&#34;issue8261.com&#34;</span><span class="op" id="8251556">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251561">Proto</span><span class="op" id="8251566">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8251573">&#34;HTTP/1.1&#34;</span><span class="op" id="8251583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251588">ProtoMajor</span><span class="op" id="8251598">:</span>&nbsp;<span class="num" id="8251600">1</span><span class="op" id="8251601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251606">ProtoMinor</span><span class="op" id="8251616">:</span>&nbsp;<span class="num" id="8251618">1</span><span class="op" id="8251619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251624">Close</span><span class="op" id="8251629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8251636">true</span><span class="op" id="8251640">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251645">RequestURI</span><span class="op" id="8251655">:</span>&nbsp;<span class="string" id="8251657">&#34;/&#34;</span><span class="op" id="8251660">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251664">}</span><span class="op" id="8251665">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251670">noBody</span><span class="op" id="8251676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251680">noTrailer</span><span class="op" id="8251689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251693">noError</span><span class="op" id="8251700">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251703">}</span><span class="op" id="8251704">,</span><br>
<span class="lineno"></span><span class="op" id="8251706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8251709">func</span>&nbsp;<span class="ident" id="8251714">TestReadRequest</span><span class="op" id="8251729">(</span><span class="ident" id="8251730">t</span>&nbsp;<span class="op" id="8251732">*</span><span class="ident" id="8251733">testing</span><span class="op" id="8251740">.</span><span class="ident" id="8251741">T</span><span class="op" id="8251742">)</span>&nbsp;<span class="op" id="8251744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8251747">for</span>&nbsp;<span class="ident" id="8251751">i</span>&nbsp;<span class="op" id="8251753">:=</span>&nbsp;<span class="keyword" id="8251756">range</span>&nbsp;<span class="ident" id="8251762">reqTests</span>&nbsp;<span class="op" id="8251771">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251775">tt</span>&nbsp;<span class="op" id="8251778">:=</span>&nbsp;<span class="op" id="8251781">&amp;</span><span class="ident" id="8251782">reqTests</span><span class="op" id="8251790">[</span><span class="ident" id="8251791">i</span><span class="op" id="8251792">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251796">req</span><span class="op" id="8251799">,</span>&nbsp;<span class="ident" id="8251801">err</span>&nbsp;<span class="op" id="8251805">:=</span>&nbsp;<span class="ident" id="8251808">ReadRequest</span><span class="op" id="8251819">(</span><span class="ident" id="8251820">bufio</span><span class="op" id="8251825">.</span><span class="ident" id="8251826">NewReader</span><span class="op" id="8251835">(</span><span class="ident" id="8251836">strings</span><span class="op" id="8251843">.</span><span class="ident" id="8251844">NewReader</span><span class="op" id="8251853">(</span><span class="ident" id="8251854">tt</span><span class="op" id="8251856">.</span><span class="ident" id="8251857">Raw</span><span class="op" id="8251860">)</span><span class="op" id="8251861">)</span><span class="op" id="8251862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8251866">if</span>&nbsp;<span class="ident" id="8251869">err</span>&nbsp;<span class="op" id="8251873">!=</span>&nbsp;<span class="ident" id="8251876">nil</span>&nbsp;<span class="op" id="8251880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8251885">if</span>&nbsp;<span class="ident" id="8251888">err</span><span class="op" id="8251891">.</span><span class="ident" id="8251892">Error</span><span class="op" id="8251897">(</span><span class="op" id="8251898">)</span>&nbsp;<span class="op" id="8251900">!=</span>&nbsp;<span class="ident" id="8251903">tt</span><span class="op" id="8251905">.</span><span class="ident" id="8251906">Error</span>&nbsp;<span class="op" id="8251912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8251918">t</span><span class="op" id="8251919">.</span><span class="ident" id="8251920">Errorf</span><span class="op" id="8251926">(</span><span class="string" id="8251927">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8251957">,</span>&nbsp;<span class="ident" id="8251959">i</span><span class="op" id="8251960">,</span>&nbsp;<span class="ident" id="8251962">err</span><span class="op" id="8251965">.</span><span class="ident" id="8251966">Error</span><span class="op" id="8251971">(</span><span class="op" id="8251972">)</span><span class="op" id="8251973">,</span>&nbsp;<span class="ident" id="8251975">tt</span><span class="op" id="8251977">.</span><span class="ident" id="8251978">Error</span><span class="op" id="8251983">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8251988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8251993">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252008">rbody</span>&nbsp;<span class="op" id="8252014">:=</span>&nbsp;<span class="ident" id="8252017">req</span><span class="op" id="8252020">.</span><span class="ident" id="8252021">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252028">req</span><span class="op" id="8252031">.</span><span class="ident" id="8252032">Body</span>&nbsp;<span class="op" id="8252037">=</span>&nbsp;<span class="ident" id="8252039">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252045">testName</span>&nbsp;<span class="op" id="8252054">:=</span>&nbsp;<span class="ident" id="8252057">fmt</span><span class="op" id="8252060">.</span><span class="ident" id="8252061">Sprintf</span><span class="op" id="8252068">(</span><span class="string" id="8252069">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="8252083">,</span>&nbsp;<span class="ident" id="8252085">i</span><span class="op" id="8252086">,</span>&nbsp;<span class="ident" id="8252088">tt</span><span class="op" id="8252090">.</span><span class="ident" id="8252091">Raw</span><span class="op" id="8252094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252098">diff</span><span class="op" id="8252102">(</span><span class="ident" id="8252103">t</span><span class="op" id="8252104">,</span>&nbsp;<span class="ident" id="8252106">testName</span><span class="op" id="8252114">,</span>&nbsp;<span class="ident" id="8252116">req</span><span class="op" id="8252119">,</span>&nbsp;<span class="ident" id="8252121">tt</span><span class="op" id="8252123">.</span><span class="ident" id="8252124">Req</span><span class="op" id="8252127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8252131">var</span>&nbsp;<span class="ident" id="8252135">bout</span>&nbsp;<span class="ident" id="8252140">bytes</span><span class="op" id="8252145">.</span><span class="ident" id="8252146">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8252155">if</span>&nbsp;<span class="ident" id="8252158">rbody</span>&nbsp;<span class="op" id="8252164">!=</span>&nbsp;<span class="ident" id="8252167">nil</span>&nbsp;<span class="op" id="8252171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252176">_</span><span class="op" id="8252177">,</span>&nbsp;<span class="ident" id="8252179">err</span>&nbsp;<span class="op" id="8252183">:=</span>&nbsp;<span class="ident" id="8252186">io</span><span class="op" id="8252188">.</span><span class="ident" id="8252189">Copy</span><span class="op" id="8252193">(</span><span class="op" id="8252194">&amp;</span><span class="ident" id="8252195">bout</span><span class="op" id="8252199">,</span>&nbsp;<span class="ident" id="8252201">rbody</span><span class="op" id="8252206">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8252211">if</span>&nbsp;<span class="ident" id="8252214">err</span>&nbsp;<span class="op" id="8252218">!=</span>&nbsp;<span class="ident" id="8252221">nil</span>&nbsp;<span class="op" id="8252225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252231">t</span><span class="op" id="8252232">.</span><span class="ident" id="8252233">Fatalf</span><span class="op" id="8252239">(</span><span class="string" id="8252240">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8252262">,</span>&nbsp;<span class="ident" id="8252264">testName</span><span class="op" id="8252272">,</span>&nbsp;<span class="ident" id="8252274">err</span><span class="op" id="8252277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252287">rbody</span><span class="op" id="8252292">.</span><span class="ident" id="8252293">Close</span><span class="op" id="8252298">(</span><span class="op" id="8252299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252303">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252307">body</span>&nbsp;<span class="op" id="8252312">:=</span>&nbsp;<span class="ident" id="8252315">bout</span><span class="op" id="8252319">.</span><span class="ident" id="8252320">String</span><span class="op" id="8252326">(</span><span class="op" id="8252327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8252331">if</span>&nbsp;<span class="ident" id="8252334">body</span>&nbsp;<span class="op" id="8252339">!=</span>&nbsp;<span class="ident" id="8252342">tt</span><span class="op" id="8252344">.</span><span class="ident" id="8252345">Body</span>&nbsp;<span class="op" id="8252350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252355">t</span><span class="op" id="8252356">.</span><span class="ident" id="8252357">Errorf</span><span class="op" id="8252363">(</span><span class="string" id="8252364">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8252387">,</span>&nbsp;<span class="ident" id="8252389">testName</span><span class="op" id="8252397">,</span>&nbsp;<span class="ident" id="8252399">body</span><span class="op" id="8252403">,</span>&nbsp;<span class="ident" id="8252405">tt</span><span class="op" id="8252407">.</span><span class="ident" id="8252408">Body</span><span class="op" id="8252412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8252420">if</span>&nbsp;<span class="op" id="8252423">!</span><span class="ident" id="8252424">reflect</span><span class="op" id="8252431">.</span><span class="ident" id="8252432">DeepEqual</span><span class="op" id="8252441">(</span><span class="ident" id="8252442">tt</span><span class="op" id="8252444">.</span><span class="ident" id="8252445">Trailer</span><span class="op" id="8252452">,</span>&nbsp;<span class="ident" id="8252454">req</span><span class="op" id="8252457">.</span><span class="ident" id="8252458">Trailer</span><span class="op" id="8252465">)</span>&nbsp;<span class="op" id="8252467">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8252472">t</span><span class="op" id="8252473">.</span><span class="ident" id="8252474">Errorf</span><span class="op" id="8252480">(</span><span class="string" id="8252481">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8252523">,</span>&nbsp;<span class="ident" id="8252525">testName</span><span class="op" id="8252533">,</span>&nbsp;<span class="ident" id="8252535">req</span><span class="op" id="8252538">.</span><span class="ident" id="8252539">Trailer</span><span class="op" id="8252546">,</span>&nbsp;<span class="ident" id="8252548">tt</span><span class="op" id="8252550">.</span><span class="ident" id="8252551">Trailer</span><span class="op" id="8252558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8252565">}</span><br>
<span class="lineno"></span><span class="op" id="8252567">}</span>
</div>
</body>
</html>
