<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5825612">package</span>&nbsp;<span class="ident" id="5825620">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5825626">import</span>&nbsp;<span class="op" id="5825633">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5825636">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5825658">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5825661">func</span>&nbsp;<span class="ident" id="5825666">parseOps</span><span class="op" id="5825674">(</span><span class="ident" id="5825675">p</span>&nbsp;<span class="op" id="5825677">*</span><span class="ident" id="5825678">parser</span><span class="op" id="5825684">)</span>&nbsp;<span class="op" id="5825686">(</span><span class="ident" id="5825687">ops</span>&nbsp;<span class="op" id="5825691">[</span><span class="op" id="5825692">]</span><span class="op" id="5825693">*</span><span class="ident" id="5825694">lex8</span><span class="op" id="5825698">.</span><span class="ident" id="5825699">Token</span><span class="op" id="5825704">)</span>&nbsp;<span class="op" id="5825706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825709">for</span>&nbsp;<span class="op" id="5825713">!</span><span class="ident" id="5825714">p</span><span class="op" id="5825715">.</span><span class="ident" id="5825716">acceptType</span><span class="op" id="5825726">(</span><span class="ident" id="5825727">Semi</span><span class="op" id="5825731">)</span>&nbsp;<span class="op" id="5825733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825737">t</span>&nbsp;<span class="op" id="5825739">:=</span>&nbsp;<span class="ident" id="5825742">p</span><span class="op" id="5825743">.</span><span class="ident" id="5825744">expect</span><span class="op" id="5825750">(</span><span class="ident" id="5825751">Operand</span><span class="op" id="5825758">)</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825762">if</span>&nbsp;<span class="ident" id="5825765">t</span>&nbsp;<span class="op" id="5825767">!=</span>&nbsp;<span class="ident" id="5825770">nil</span>&nbsp;<span class="op" id="5825774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825779">ops</span>&nbsp;<span class="op" id="5825783">=</span>&nbsp;<span class="builtinfunc" id="5825785">append</span><span class="op" id="5825791">(</span><span class="ident" id="5825792">ops</span><span class="op" id="5825795">,</span>&nbsp;<span class="ident" id="5825797">t</span><span class="op" id="5825798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825802">}</span>&nbsp;<span class="keyword" id="5825804">else</span>&nbsp;<span class="op" id="5825809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825814">ops</span>&nbsp;<span class="op" id="5825818">=</span>&nbsp;<span class="ident" id="5825820">nil</span>&nbsp;<span class="comment" id="5825824">//&nbsp;error&nbsp;now</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825840">if</span>&nbsp;<span class="ident" id="5825843">p</span><span class="op" id="5825844">.</span><span class="ident" id="5825845">see</span><span class="op" id="5825848">(</span><span class="ident" id="5825849">lex8</span><span class="op" id="5825853">.</span><span class="ident" id="5825854">EOF</span><span class="op" id="5825857">)</span>&nbsp;<span class="op" id="5825859">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825865">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825879">p</span><span class="op" id="5825880">.</span><span class="ident" id="5825881">next</span><span class="op" id="5825885">(</span><span class="op" id="5825886">)</span>&nbsp;<span class="comment" id="5825888">//&nbsp;proceed&nbsp;anyway&nbsp;for&nbsp;other&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825927">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825931">p</span><span class="op" id="5825932">.</span><span class="ident" id="5825933">clearErr</span><span class="op" id="5825941">(</span><span class="op" id="5825942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825945">return</span>&nbsp;<span class="ident" id="5825952">ops</span><br>
<span class="lineno"></span><span class="op" id="5825956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5825959">func</span>&nbsp;<span class="ident" id="5825964">parseFuncStmt</span><span class="op" id="5825977">(</span><span class="ident" id="5825978">p</span>&nbsp;<span class="op" id="5825980">*</span><span class="ident" id="5825981">parser</span><span class="op" id="5825987">)</span>&nbsp;<span class="op" id="5825989">*</span><span class="ident" id="5825990">funcStmt</span>&nbsp;<span class="op" id="5825999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826002">ops</span>&nbsp;<span class="op" id="5826006">:=</span>&nbsp;<span class="ident" id="5826009">parseOps</span><span class="op" id="5826017">(</span><span class="ident" id="5826018">p</span><span class="op" id="5826019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826022">if</span>&nbsp;<span class="builtinfunc" id="5826025">len</span><span class="op" id="5826028">(</span><span class="ident" id="5826029">ops</span><span class="op" id="5826032">)</span>&nbsp;<span class="op" id="5826034">==</span>&nbsp;<span class="num" id="5826037">0</span>&nbsp;<span class="op" id="5826039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826043">return</span>&nbsp;<span class="ident" id="5826050">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826055">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826059">op0</span>&nbsp;<span class="op" id="5826063">:=</span>&nbsp;<span class="ident" id="5826066">ops</span><span class="op" id="5826069">[</span><span class="num" id="5826070">0</span><span class="op" id="5826071">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826074">lead</span>&nbsp;<span class="op" id="5826079">:=</span>&nbsp;<span class="ident" id="5826082">op0</span><span class="op" id="5826085">.</span><span class="ident" id="5826086">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826091">if</span>&nbsp;<span class="ident" id="5826094">lead</span>&nbsp;<span class="op" id="5826099">==</span>&nbsp;<span class="string" id="5826102">&#34;&#34;</span>&nbsp;<span class="op" id="5826105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5826109">panic</span><span class="op" id="5826114">(</span><span class="string" id="5826115">&#34;empty&nbsp;operand&#34;</span><span class="op" id="5826130">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826137">if</span>&nbsp;<span class="ident" id="5826140">parseLabel</span><span class="op" id="5826150">(</span><span class="ident" id="5826151">p</span><span class="op" id="5826152">,</span>&nbsp;<span class="ident" id="5826154">op0</span><span class="op" id="5826157">)</span>&nbsp;<span class="op" id="5826159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826163">if</span>&nbsp;<span class="builtinfunc" id="5826166">len</span><span class="op" id="5826169">(</span><span class="ident" id="5826170">ops</span><span class="op" id="5826173">)</span>&nbsp;<span class="op" id="5826175">&gt;</span>&nbsp;<span class="num" id="5826177">1</span>&nbsp;<span class="op" id="5826179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826184">p</span><span class="op" id="5826185">.</span><span class="ident" id="5826186">err</span><span class="op" id="5826189">(</span><span class="ident" id="5826190">op0</span><span class="op" id="5826193">.</span><span class="ident" id="5826194">Pos</span><span class="op" id="5826197">,</span>&nbsp;<span class="string" id="5826199">&#34;label&nbsp;should&nbsp;take&nbsp;the&nbsp;entire&nbsp;line&#34;</span><span class="op" id="5826234">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826239">return</span>&nbsp;<span class="ident" id="5826246">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826256">return</span>&nbsp;<span class="op" id="5826263">&amp;</span><span class="ident" id="5826264">funcStmt</span><span class="op" id="5826272">{</span><span class="ident" id="5826273">label</span><span class="op" id="5826278">:</span>&nbsp;<span class="ident" id="5826280">lead</span><span class="op" id="5826284">,</span>&nbsp;<span class="ident" id="5826286">ops</span><span class="op" id="5826289">:</span>&nbsp;<span class="ident" id="5826291">ops</span><span class="op" id="5826294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826301">return</span>&nbsp;<span class="op" id="5826308">&amp;</span><span class="ident" id="5826309">funcStmt</span><span class="op" id="5826317">{</span><span class="ident" id="5826318">inst</span><span class="op" id="5826322">:</span>&nbsp;<span class="ident" id="5826324">parseInst</span><span class="op" id="5826333">(</span><span class="ident" id="5826334">p</span><span class="op" id="5826335">,</span>&nbsp;<span class="ident" id="5826337">ops</span><span class="op" id="5826340">)</span><span class="op" id="5826341">,</span>&nbsp;<span class="ident" id="5826343">ops</span><span class="op" id="5826346">:</span>&nbsp;<span class="ident" id="5826348">ops</span><span class="op" id="5826351">}</span><br>
<span class="lineno"></span><span class="op" id="5826353">}</span>
</div>
</body>
</html>
