<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6629631">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6629686">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6629740">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6629791">package</span>&nbsp;<span class="ident" id="6629799">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6629804">import</span>&nbsp;<span class="op" id="6629811">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629814">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629823">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629837">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629844">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629850">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629863">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629869">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629880">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629891">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6629902">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6629909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6629912">type</span>&nbsp;<span class="ident" id="6629917">untarTest</span>&nbsp;<span class="keyword" id="6629927">struct</span>&nbsp;<span class="op" id="6629934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629937">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6629945">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629953">headers</span>&nbsp;<span class="op" id="6629961">[</span><span class="op" id="6629962">]</span><span class="op" id="6629963">*</span><span class="ident" id="6629964"><a href="/archive/tar/common.go.html#6187053">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629972">cksums</span>&nbsp;&nbsp;<span class="op" id="6629980">[</span><span class="op" id="6629981">]</span><span class="builtintype" id="6629982">string</span><br>
<span class="lineno"></span><span class="op" id="6629989">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6629992">var</span>&nbsp;<span class="ident" id="6629996">gnuTarTest</span>&nbsp;<span class="op" id="6630007">=</span>&nbsp;<span class="op" id="6630009">&amp;</span><span class="ident" id="6630010"><a href="/archive/tar/reader_test.go.html#6629917">untarTest</a></span><span class="op" id="6630019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630022">file</span><span class="op" id="6630026">:</span>&nbsp;<span class="string" id="6630028">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6630046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630049">headers</span><span class="op" id="6630056">:</span>&nbsp;<span class="op" id="6630058">[</span><span class="op" id="6630059">]</span><span class="op" id="6630060">*</span><span class="ident" id="6630061"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6630067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630071">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630076">Name</span><span class="op" id="6630080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630086">&#34;small.txt&#34;</span><span class="op" id="6630097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630102">Mode</span><span class="op" id="6630106">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630112">0640</span><span class="op" id="6630116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630121">Uid</span><span class="op" id="6630124">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630131">73025</span><span class="op" id="6630136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630141">Gid</span><span class="op" id="6630144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630151">5000</span><span class="op" id="6630155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630160">Size</span><span class="op" id="6630164">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630170">5</span><span class="op" id="6630171">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630176">ModTime</span><span class="op" id="6630183">:</span>&nbsp;&nbsp;<span class="ident" id="6630186"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6630190">.</span><span class="ident" id="6630191">Unix</span><span class="op" id="6630195">(</span><span class="num" id="6630196">1244428340</span><span class="op" id="6630206">,</span>&nbsp;<span class="num" id="6630208">0</span><span class="op" id="6630209">)</span><span class="op" id="6630210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630215">Typeflag</span><span class="op" id="6630223">:</span>&nbsp;<span class="string" id="6630225">&#39;0&#39;</span><span class="op" id="6630228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630233">Uname</span><span class="op" id="6630238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630243">&#34;dsymonds&#34;</span><span class="op" id="6630253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630258">Gname</span><span class="op" id="6630263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630268">&#34;eng&#34;</span><span class="op" id="6630273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630277">}</span><span class="op" id="6630278">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630287">Name</span><span class="op" id="6630291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630297">&#34;small2.txt&#34;</span><span class="op" id="6630309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630314">Mode</span><span class="op" id="6630318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630324">0640</span><span class="op" id="6630328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630333">Uid</span><span class="op" id="6630336">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630343">73025</span><span class="op" id="6630348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630353">Gid</span><span class="op" id="6630356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630363">5000</span><span class="op" id="6630367">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630372">Size</span><span class="op" id="6630376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630382">11</span><span class="op" id="6630384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630389">ModTime</span><span class="op" id="6630396">:</span>&nbsp;&nbsp;<span class="ident" id="6630399"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6630403">.</span><span class="ident" id="6630404">Unix</span><span class="op" id="6630408">(</span><span class="num" id="6630409">1244436044</span><span class="op" id="6630419">,</span>&nbsp;<span class="num" id="6630421">0</span><span class="op" id="6630422">)</span><span class="op" id="6630423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630428">Typeflag</span><span class="op" id="6630436">:</span>&nbsp;<span class="string" id="6630438">&#39;0&#39;</span><span class="op" id="6630441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630446">Uname</span><span class="op" id="6630451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630456">&#34;dsymonds&#34;</span><span class="op" id="6630466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630471">Gname</span><span class="op" id="6630476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630481">&#34;eng&#34;</span><span class="op" id="6630486">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630490">}</span><span class="op" id="6630491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630494">}</span><span class="op" id="6630495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630498">cksums</span><span class="op" id="6630504">:</span>&nbsp;<span class="op" id="6630506">[</span><span class="op" id="6630507">]</span><span class="builtintype" id="6630508">string</span><span class="op" id="6630514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6630518">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="6630552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6630556">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="6630590">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630593">}</span><span class="op" id="6630594">,</span><br>
<span class="lineno"></span><span class="op" id="6630596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6630599">var</span>&nbsp;<span class="ident" id="6630603">sparseTarTest</span>&nbsp;<span class="op" id="6630617">=</span>&nbsp;<span class="op" id="6630619">&amp;</span><span class="ident" id="6630620"><a href="/archive/tar/reader_test.go.html#6629917">untarTest</a></span><span class="op" id="6630629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630632">file</span><span class="op" id="6630636">:</span>&nbsp;<span class="string" id="6630638">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="6630667">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630670">headers</span><span class="op" id="6630677">:</span>&nbsp;<span class="op" id="6630679">[</span><span class="op" id="6630680">]</span><span class="op" id="6630681">*</span><span class="ident" id="6630682"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6630688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630697">Name</span><span class="op" id="6630701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630707">&#34;sparse-gnu&#34;</span><span class="op" id="6630719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630724">Mode</span><span class="op" id="6630728">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630734">420</span><span class="op" id="6630737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630742">Uid</span><span class="op" id="6630745">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630752">1000</span><span class="op" id="6630756">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630761">Gid</span><span class="op" id="6630764">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630771">1000</span><span class="op" id="6630775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630780">Size</span><span class="op" id="6630784">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6630790">200</span><span class="op" id="6630793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630798">ModTime</span><span class="op" id="6630805">:</span>&nbsp;&nbsp;<span class="ident" id="6630808"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6630812">.</span><span class="ident" id="6630813">Unix</span><span class="op" id="6630817">(</span><span class="num" id="6630818">1392395740</span><span class="op" id="6630828">,</span>&nbsp;<span class="num" id="6630830">0</span><span class="op" id="6630831">)</span><span class="op" id="6630832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630837">Typeflag</span><span class="op" id="6630845">:</span>&nbsp;<span class="num" id="6630847">0x53</span><span class="op" id="6630851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630856">Linkname</span><span class="op" id="6630864">:</span>&nbsp;<span class="string" id="6630866">&#34;&#34;</span><span class="op" id="6630868">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630873">Uname</span><span class="op" id="6630878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630883">&#34;david&#34;</span><span class="op" id="6630890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630895">Gname</span><span class="op" id="6630900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630905">&#34;david&#34;</span><span class="op" id="6630912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630917">Devmajor</span><span class="op" id="6630925">:</span>&nbsp;<span class="num" id="6630927">0</span><span class="op" id="6630928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630933">Devminor</span><span class="op" id="6630941">:</span>&nbsp;<span class="num" id="6630943">0</span><span class="op" id="6630944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630948">}</span><span class="op" id="6630949">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6630953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630958">Name</span><span class="op" id="6630962">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630968">&#34;sparse-posix-0.0&#34;</span><span class="op" id="6630986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6630991">Mode</span><span class="op" id="6630995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631001">420</span><span class="op" id="6631004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631009">Uid</span><span class="op" id="6631012">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631019">1000</span><span class="op" id="6631023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631028">Gid</span><span class="op" id="6631031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631038">1000</span><span class="op" id="6631042">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631047">Size</span><span class="op" id="6631051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631057">200</span><span class="op" id="6631060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631065">ModTime</span><span class="op" id="6631072">:</span>&nbsp;&nbsp;<span class="ident" id="6631075"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6631079">.</span><span class="ident" id="6631080">Unix</span><span class="op" id="6631084">(</span><span class="num" id="6631085">1392342187</span><span class="op" id="6631095">,</span>&nbsp;<span class="num" id="6631097">0</span><span class="op" id="6631098">)</span><span class="op" id="6631099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631104">Typeflag</span><span class="op" id="6631112">:</span>&nbsp;<span class="num" id="6631114">0x30</span><span class="op" id="6631118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631123">Linkname</span><span class="op" id="6631131">:</span>&nbsp;<span class="string" id="6631133">&#34;&#34;</span><span class="op" id="6631135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631140">Uname</span><span class="op" id="6631145">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631150">&#34;david&#34;</span><span class="op" id="6631157">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631162">Gname</span><span class="op" id="6631167">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631172">&#34;david&#34;</span><span class="op" id="6631179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631184">Devmajor</span><span class="op" id="6631192">:</span>&nbsp;<span class="num" id="6631194">0</span><span class="op" id="6631195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631200">Devminor</span><span class="op" id="6631208">:</span>&nbsp;<span class="num" id="6631210">0</span><span class="op" id="6631211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631215">}</span><span class="op" id="6631216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631220">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631225">Name</span><span class="op" id="6631229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631235">&#34;sparse-posix-0.1&#34;</span><span class="op" id="6631253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631258">Mode</span><span class="op" id="6631262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631268">420</span><span class="op" id="6631271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631276">Uid</span><span class="op" id="6631279">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631286">1000</span><span class="op" id="6631290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631295">Gid</span><span class="op" id="6631298">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631305">1000</span><span class="op" id="6631309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631314">Size</span><span class="op" id="6631318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631324">200</span><span class="op" id="6631327">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631332">ModTime</span><span class="op" id="6631339">:</span>&nbsp;&nbsp;<span class="ident" id="6631342"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6631346">.</span><span class="ident" id="6631347">Unix</span><span class="op" id="6631351">(</span><span class="num" id="6631352">1392340456</span><span class="op" id="6631362">,</span>&nbsp;<span class="num" id="6631364">0</span><span class="op" id="6631365">)</span><span class="op" id="6631366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631371">Typeflag</span><span class="op" id="6631379">:</span>&nbsp;<span class="num" id="6631381">0x30</span><span class="op" id="6631385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631390">Linkname</span><span class="op" id="6631398">:</span>&nbsp;<span class="string" id="6631400">&#34;&#34;</span><span class="op" id="6631402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631407">Uname</span><span class="op" id="6631412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631417">&#34;david&#34;</span><span class="op" id="6631424">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631429">Gname</span><span class="op" id="6631434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631439">&#34;david&#34;</span><span class="op" id="6631446">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631451">Devmajor</span><span class="op" id="6631459">:</span>&nbsp;<span class="num" id="6631461">0</span><span class="op" id="6631462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631467">Devminor</span><span class="op" id="6631475">:</span>&nbsp;<span class="num" id="6631477">0</span><span class="op" id="6631478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631482">}</span><span class="op" id="6631483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631492">Name</span><span class="op" id="6631496">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631502">&#34;sparse-posix-1.0&#34;</span><span class="op" id="6631520">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631525">Mode</span><span class="op" id="6631529">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631535">420</span><span class="op" id="6631538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631543">Uid</span><span class="op" id="6631546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631553">1000</span><span class="op" id="6631557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631562">Gid</span><span class="op" id="6631565">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631572">1000</span><span class="op" id="6631576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631581">Size</span><span class="op" id="6631585">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631591">200</span><span class="op" id="6631594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631599">ModTime</span><span class="op" id="6631606">:</span>&nbsp;&nbsp;<span class="ident" id="6631609"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6631613">.</span><span class="ident" id="6631614">Unix</span><span class="op" id="6631618">(</span><span class="num" id="6631619">1392337404</span><span class="op" id="6631629">,</span>&nbsp;<span class="num" id="6631631">0</span><span class="op" id="6631632">)</span><span class="op" id="6631633">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631638">Typeflag</span><span class="op" id="6631646">:</span>&nbsp;<span class="num" id="6631648">0x30</span><span class="op" id="6631652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631657">Linkname</span><span class="op" id="6631665">:</span>&nbsp;<span class="string" id="6631667">&#34;&#34;</span><span class="op" id="6631669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631674">Uname</span><span class="op" id="6631679">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631684">&#34;david&#34;</span><span class="op" id="6631691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631696">Gname</span><span class="op" id="6631701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631706">&#34;david&#34;</span><span class="op" id="6631713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631718">Devmajor</span><span class="op" id="6631726">:</span>&nbsp;<span class="num" id="6631728">0</span><span class="op" id="6631729">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631734">Devminor</span><span class="op" id="6631742">:</span>&nbsp;<span class="num" id="6631744">0</span><span class="op" id="6631745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631749">}</span><span class="op" id="6631750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6631754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631759">Name</span><span class="op" id="6631763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631769">&#34;end&#34;</span><span class="op" id="6631774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631779">Mode</span><span class="op" id="6631783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631789">420</span><span class="op" id="6631792">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631797">Uid</span><span class="op" id="6631800">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631807">1000</span><span class="op" id="6631811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631816">Gid</span><span class="op" id="6631819">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631826">1000</span><span class="op" id="6631830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631835">Size</span><span class="op" id="6631839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6631845">4</span><span class="op" id="6631846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631851">ModTime</span><span class="op" id="6631858">:</span>&nbsp;&nbsp;<span class="ident" id="6631861"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6631865">.</span><span class="ident" id="6631866">Unix</span><span class="op" id="6631870">(</span><span class="num" id="6631871">1392398319</span><span class="op" id="6631881">,</span>&nbsp;<span class="num" id="6631883">0</span><span class="op" id="6631884">)</span><span class="op" id="6631885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631890">Typeflag</span><span class="op" id="6631898">:</span>&nbsp;<span class="num" id="6631900">0x30</span><span class="op" id="6631904">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631909">Linkname</span><span class="op" id="6631917">:</span>&nbsp;<span class="string" id="6631919">&#34;&#34;</span><span class="op" id="6631921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631926">Uname</span><span class="op" id="6631931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631936">&#34;david&#34;</span><span class="op" id="6631943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631948">Gname</span><span class="op" id="6631953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6631958">&#34;david&#34;</span><span class="op" id="6631965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631970">Devmajor</span><span class="op" id="6631978">:</span>&nbsp;<span class="num" id="6631980">0</span><span class="op" id="6631981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6631986">Devminor</span><span class="op" id="6631994">:</span>&nbsp;<span class="num" id="6631996">0</span><span class="op" id="6631997">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632001">}</span><span class="op" id="6632002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632005">}</span><span class="op" id="6632006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632009">cksums</span><span class="op" id="6632015">:</span>&nbsp;<span class="op" id="6632017">[</span><span class="op" id="6632018">]</span><span class="builtintype" id="6632019">string</span><span class="op" id="6632025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6632029">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6632063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6632067">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6632101">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6632105">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6632139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6632143">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="6632177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6632181">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="6632215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632218">}</span><span class="op" id="6632219">,</span><br>
<span class="lineno"></span><span class="op" id="6632221">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6632224">var</span>&nbsp;<span class="ident" id="6632228">untarTests</span>&nbsp;<span class="op" id="6632239">=</span>&nbsp;<span class="op" id="6632241">[</span><span class="op" id="6632242">]</span><span class="op" id="6632243">*</span><span class="ident" id="6632244"><a href="/archive/tar/reader_test.go.html#6629917">untarTest</a></span><span class="op" id="6632253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632256"><a href="/archive/tar/reader_test.go.html#6629996">gnuTarTest</a></span><span class="op" id="6632266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632269"><a href="/archive/tar/reader_test.go.html#6630603">sparseTarTest</a></span><span class="op" id="6632282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632285">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632289">file</span><span class="op" id="6632293">:</span>&nbsp;<span class="string" id="6632295">&#34;testdata/star.tar&#34;</span><span class="op" id="6632314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632318">headers</span><span class="op" id="6632325">:</span>&nbsp;<span class="op" id="6632327">[</span><span class="op" id="6632328">]</span><span class="op" id="6632329">*</span><span class="ident" id="6632330"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6632336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632347">Name</span><span class="op" id="6632351">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632359">&#34;small.txt&#34;</span><span class="op" id="6632370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632376">Mode</span><span class="op" id="6632380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632388">0640</span><span class="op" id="6632392">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632398">Uid</span><span class="op" id="6632401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632410">73025</span><span class="op" id="6632415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632421">Gid</span><span class="op" id="6632424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632433">5000</span><span class="op" id="6632437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632443">Size</span><span class="op" id="6632447">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632455">5</span><span class="op" id="6632456">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632462">ModTime</span><span class="op" id="6632469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632474"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632478">.</span><span class="ident" id="6632479">Unix</span><span class="op" id="6632483">(</span><span class="num" id="6632484">1244592783</span><span class="op" id="6632494">,</span>&nbsp;<span class="num" id="6632496">0</span><span class="op" id="6632497">)</span><span class="op" id="6632498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632504">Typeflag</span><span class="op" id="6632512">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6632516">&#39;0&#39;</span><span class="op" id="6632519">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632525">Uname</span><span class="op" id="6632530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632537">&#34;dsymonds&#34;</span><span class="op" id="6632547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632553">Gname</span><span class="op" id="6632558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632565">&#34;eng&#34;</span><span class="op" id="6632570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632576">AccessTime</span><span class="op" id="6632586">:</span>&nbsp;<span class="ident" id="6632588"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632592">.</span><span class="ident" id="6632593">Unix</span><span class="op" id="6632597">(</span><span class="num" id="6632598">1244592783</span><span class="op" id="6632608">,</span>&nbsp;<span class="num" id="6632610">0</span><span class="op" id="6632611">)</span><span class="op" id="6632612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632618">ChangeTime</span><span class="op" id="6632628">:</span>&nbsp;<span class="ident" id="6632630"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632634">.</span><span class="ident" id="6632635">Unix</span><span class="op" id="6632639">(</span><span class="num" id="6632640">1244592783</span><span class="op" id="6632650">,</span>&nbsp;<span class="num" id="6632652">0</span><span class="op" id="6632653">)</span><span class="op" id="6632654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632659">}</span><span class="op" id="6632660">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632671">Name</span><span class="op" id="6632675">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632683">&#34;small2.txt&#34;</span><span class="op" id="6632695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632701">Mode</span><span class="op" id="6632705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632713">0640</span><span class="op" id="6632717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632723">Uid</span><span class="op" id="6632726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632735">73025</span><span class="op" id="6632740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632746">Gid</span><span class="op" id="6632749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632758">5000</span><span class="op" id="6632762">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632768">Size</span><span class="op" id="6632772">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6632780">11</span><span class="op" id="6632782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632788">ModTime</span><span class="op" id="6632795">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632800"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632804">.</span><span class="ident" id="6632805">Unix</span><span class="op" id="6632809">(</span><span class="num" id="6632810">1244592783</span><span class="op" id="6632820">,</span>&nbsp;<span class="num" id="6632822">0</span><span class="op" id="6632823">)</span><span class="op" id="6632824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632830">Typeflag</span><span class="op" id="6632838">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6632842">&#39;0&#39;</span><span class="op" id="6632845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632851">Uname</span><span class="op" id="6632856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632863">&#34;dsymonds&#34;</span><span class="op" id="6632873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632879">Gname</span><span class="op" id="6632884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6632891">&#34;eng&#34;</span><span class="op" id="6632896">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632902">AccessTime</span><span class="op" id="6632912">:</span>&nbsp;<span class="ident" id="6632914"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632918">.</span><span class="ident" id="6632919">Unix</span><span class="op" id="6632923">(</span><span class="num" id="6632924">1244592783</span><span class="op" id="6632934">,</span>&nbsp;<span class="num" id="6632936">0</span><span class="op" id="6632937">)</span><span class="op" id="6632938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6632944">ChangeTime</span><span class="op" id="6632954">:</span>&nbsp;<span class="ident" id="6632956"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6632960">.</span><span class="ident" id="6632961">Unix</span><span class="op" id="6632965">(</span><span class="num" id="6632966">1244592783</span><span class="op" id="6632976">,</span>&nbsp;<span class="num" id="6632978">0</span><span class="op" id="6632979">)</span><span class="op" id="6632980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632985">}</span><span class="op" id="6632986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632990">}</span><span class="op" id="6632991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632994">}</span><span class="op" id="6632995">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6632998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633002">file</span><span class="op" id="6633006">:</span>&nbsp;<span class="string" id="6633008">&#34;testdata/v7.tar&#34;</span><span class="op" id="6633025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633029">headers</span><span class="op" id="6633036">:</span>&nbsp;<span class="op" id="6633038">[</span><span class="op" id="6633039">]</span><span class="op" id="6633040">*</span><span class="ident" id="6633041"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6633047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633058">Name</span><span class="op" id="6633062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6633068">&#34;small.txt&#34;</span><span class="op" id="6633079">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633085">Mode</span><span class="op" id="6633089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633095">0444</span><span class="op" id="6633099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633105">Uid</span><span class="op" id="6633108">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633115">73025</span><span class="op" id="6633120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633126">Gid</span><span class="op" id="6633129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633136">5000</span><span class="op" id="6633140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633146">Size</span><span class="op" id="6633150">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633156">5</span><span class="op" id="6633157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633163">ModTime</span><span class="op" id="6633170">:</span>&nbsp;&nbsp;<span class="ident" id="6633173"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6633177">.</span><span class="ident" id="6633178">Unix</span><span class="op" id="6633182">(</span><span class="num" id="6633183">1244593104</span><span class="op" id="6633193">,</span>&nbsp;<span class="num" id="6633195">0</span><span class="op" id="6633196">)</span><span class="op" id="6633197">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633203">Typeflag</span><span class="op" id="6633211">:</span>&nbsp;<span class="string" id="6633213">&#39;\x00&#39;</span><span class="op" id="6633219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633224">}</span><span class="op" id="6633225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633236">Name</span><span class="op" id="6633240">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6633246">&#34;small2.txt&#34;</span><span class="op" id="6633258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633264">Mode</span><span class="op" id="6633268">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633274">0444</span><span class="op" id="6633278">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633284">Uid</span><span class="op" id="6633287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633294">73025</span><span class="op" id="6633299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633305">Gid</span><span class="op" id="6633308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633315">5000</span><span class="op" id="6633319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633325">Size</span><span class="op" id="6633329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633335">11</span><span class="op" id="6633337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633343">ModTime</span><span class="op" id="6633350">:</span>&nbsp;&nbsp;<span class="ident" id="6633353"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6633357">.</span><span class="ident" id="6633358">Unix</span><span class="op" id="6633362">(</span><span class="num" id="6633363">1244593104</span><span class="op" id="6633373">,</span>&nbsp;<span class="num" id="6633375">0</span><span class="op" id="6633376">)</span><span class="op" id="6633377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633383">Typeflag</span><span class="op" id="6633391">:</span>&nbsp;<span class="string" id="6633393">&#39;\x00&#39;</span><span class="op" id="6633399">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633404">}</span><span class="op" id="6633405">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633409">}</span><span class="op" id="6633410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633413">}</span><span class="op" id="6633414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633421">file</span><span class="op" id="6633425">:</span>&nbsp;<span class="string" id="6633427">&#34;testdata/pax.tar&#34;</span><span class="op" id="6633445">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633449">headers</span><span class="op" id="6633456">:</span>&nbsp;<span class="op" id="6633458">[</span><span class="op" id="6633459">]</span><span class="op" id="6633460">*</span><span class="ident" id="6633461"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6633467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633478">Name</span><span class="op" id="6633482">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6633490">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6633686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633692">Mode</span><span class="op" id="6633696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633704">0664</span><span class="op" id="6633708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633714">Uid</span><span class="op" id="6633717">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633726">1000</span><span class="op" id="6633730">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633736">Gid</span><span class="op" id="6633739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633748">1000</span><span class="op" id="6633752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633758">Uname</span><span class="op" id="6633763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6633770">&#34;shane&#34;</span><span class="op" id="6633777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633783">Gname</span><span class="op" id="6633788">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6633795">&#34;shane&#34;</span><span class="op" id="6633802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633808">Size</span><span class="op" id="6633812">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6633820">7</span><span class="op" id="6633821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633827">ModTime</span><span class="op" id="6633834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633839"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6633843">.</span><span class="ident" id="6633844">Unix</span><span class="op" id="6633848">(</span><span class="num" id="6633849">1350244992</span><span class="op" id="6633859">,</span>&nbsp;<span class="num" id="6633861">23960108</span><span class="op" id="6633869">)</span><span class="op" id="6633870">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633876">ChangeTime</span><span class="op" id="6633886">:</span>&nbsp;<span class="ident" id="6633888"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6633892">.</span><span class="ident" id="6633893">Unix</span><span class="op" id="6633897">(</span><span class="num" id="6633898">1350244992</span><span class="op" id="6633908">,</span>&nbsp;<span class="num" id="6633910">23960108</span><span class="op" id="6633918">)</span><span class="op" id="6633919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633925">AccessTime</span><span class="op" id="6633935">:</span>&nbsp;<span class="ident" id="6633937"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6633941">.</span><span class="ident" id="6633942">Unix</span><span class="op" id="6633946">(</span><span class="num" id="6633947">1350244992</span><span class="op" id="6633957">,</span>&nbsp;<span class="num" id="6633959">23960108</span><span class="op" id="6633967">)</span><span class="op" id="6633968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6633974">Typeflag</span><span class="op" id="6633982">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6633986"><a href="/archive/tar/common.go.html#6186278">TypeReg</a></span><span class="op" id="6633993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6633998">}</span><span class="op" id="6633999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634004">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634010">Name</span><span class="op" id="6634014">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634022">&#34;a/b&#34;</span><span class="op" id="6634027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634033">Mode</span><span class="op" id="6634037">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634045">0777</span><span class="op" id="6634049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634055">Uid</span><span class="op" id="6634058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634067">1000</span><span class="op" id="6634071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634077">Gid</span><span class="op" id="6634080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634089">1000</span><span class="op" id="6634093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634099">Uname</span><span class="op" id="6634104">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634111">&#34;shane&#34;</span><span class="op" id="6634118">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634124">Gname</span><span class="op" id="6634129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634136">&#34;shane&#34;</span><span class="op" id="6634143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634149">Size</span><span class="op" id="6634153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634161">0</span><span class="op" id="6634162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634168">ModTime</span><span class="op" id="6634175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6634180"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6634184">.</span><span class="ident" id="6634185">Unix</span><span class="op" id="6634189">(</span><span class="num" id="6634190">1350266320</span><span class="op" id="6634200">,</span>&nbsp;<span class="num" id="6634202">910238425</span><span class="op" id="6634211">)</span><span class="op" id="6634212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634218">ChangeTime</span><span class="op" id="6634228">:</span>&nbsp;<span class="ident" id="6634230"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6634234">.</span><span class="ident" id="6634235">Unix</span><span class="op" id="6634239">(</span><span class="num" id="6634240">1350266320</span><span class="op" id="6634250">,</span>&nbsp;<span class="num" id="6634252">910238425</span><span class="op" id="6634261">)</span><span class="op" id="6634262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634268">AccessTime</span><span class="op" id="6634278">:</span>&nbsp;<span class="ident" id="6634280"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6634284">.</span><span class="ident" id="6634285">Unix</span><span class="op" id="6634289">(</span><span class="num" id="6634290">1350266320</span><span class="op" id="6634300">,</span>&nbsp;<span class="num" id="6634302">910238425</span><span class="op" id="6634311">)</span><span class="op" id="6634312">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634318">Typeflag</span><span class="op" id="6634326">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6634330"><a href="/archive/tar/common.go.html#6186407">TypeSymlink</a></span><span class="op" id="6634341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634347">Linkname</span><span class="op" id="6634355">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6634359">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="6634553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634558">}</span><span class="op" id="6634559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634563">}</span><span class="op" id="6634564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634567">}</span><span class="op" id="6634568">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634575">file</span><span class="op" id="6634579">:</span>&nbsp;<span class="string" id="6634581">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="6634603">,</span>&nbsp;<span class="comment" id="6634605">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634632">headers</span><span class="op" id="6634639">:</span>&nbsp;<span class="op" id="6634641">[</span><span class="op" id="6634642">]</span><span class="op" id="6634643">*</span><span class="ident" id="6634644"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6634650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634661">Name</span><span class="op" id="6634665">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634671">&#34;P1050238.JPG.log&#34;</span><span class="op" id="6634689">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634695">Mode</span><span class="op" id="6634699">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634705">0664</span><span class="op" id="6634709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634715">Uid</span><span class="op" id="6634718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634725">0</span><span class="op" id="6634726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634732">Gid</span><span class="op" id="6634735">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634742">0</span><span class="op" id="6634743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634749">Size</span><span class="op" id="6634753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6634759">14</span><span class="op" id="6634761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634767">ModTime</span><span class="op" id="6634774">:</span>&nbsp;&nbsp;<span class="ident" id="6634777"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6634781">.</span><span class="ident" id="6634782">Unix</span><span class="op" id="6634786">(</span><span class="num" id="6634787">1365454838</span><span class="op" id="6634797">,</span>&nbsp;<span class="num" id="6634799">0</span><span class="op" id="6634800">)</span><span class="op" id="6634801">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634807">Typeflag</span><span class="op" id="6634815">:</span>&nbsp;<span class="ident" id="6634817"><a href="/archive/tar/common.go.html#6186278">TypeReg</a></span><span class="op" id="6634824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634830">Linkname</span><span class="op" id="6634838">:</span>&nbsp;<span class="string" id="6634840">&#34;&#34;</span><span class="op" id="6634842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634848">Uname</span><span class="op" id="6634853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634858">&#34;eyefi&#34;</span><span class="op" id="6634865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634871">Gname</span><span class="op" id="6634876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6634881">&#34;eyefi&#34;</span><span class="op" id="6634888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634894">Devmajor</span><span class="op" id="6634902">:</span>&nbsp;<span class="num" id="6634904">0</span><span class="op" id="6634905">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634911">Devminor</span><span class="op" id="6634919">:</span>&nbsp;<span class="num" id="6634921">0</span><span class="op" id="6634922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634927">}</span><span class="op" id="6634928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634932">}</span><span class="op" id="6634933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634936">}</span><span class="op" id="6634937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634940">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634944">file</span><span class="op" id="6634948">:</span>&nbsp;<span class="string" id="6634950">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="6634971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6634975">headers</span><span class="op" id="6634982">:</span>&nbsp;<span class="op" id="6634984">[</span><span class="op" id="6634985">]</span><span class="op" id="6634986">*</span><span class="ident" id="6634987"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6634993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6634998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635004">Name</span><span class="op" id="6635008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635016">&#34;small.txt&#34;</span><span class="op" id="6635027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635033">Mode</span><span class="op" id="6635037">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635045">0644</span><span class="op" id="6635049">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635055">Uid</span><span class="op" id="6635058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635067">1000</span><span class="op" id="6635071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635077">Gid</span><span class="op" id="6635080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635089">10</span><span class="op" id="6635091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635097">Size</span><span class="op" id="6635101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635109">5</span><span class="op" id="6635110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635116">ModTime</span><span class="op" id="6635123">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635128"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635132">.</span><span class="ident" id="6635133">Unix</span><span class="op" id="6635137">(</span><span class="num" id="6635138">1386065770</span><span class="op" id="6635148">,</span>&nbsp;<span class="num" id="6635150">448252320</span><span class="op" id="6635159">)</span><span class="op" id="6635160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635166">Typeflag</span><span class="op" id="6635174">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6635178">&#39;0&#39;</span><span class="op" id="6635181">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635187">Uname</span><span class="op" id="6635192">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635199">&#34;alex&#34;</span><span class="op" id="6635205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635211">Gname</span><span class="op" id="6635216">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635223">&#34;wheel&#34;</span><span class="op" id="6635230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635236">AccessTime</span><span class="op" id="6635246">:</span>&nbsp;<span class="ident" id="6635248"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635252">.</span><span class="ident" id="6635253">Unix</span><span class="op" id="6635257">(</span><span class="num" id="6635258">1389782991</span><span class="op" id="6635268">,</span>&nbsp;<span class="num" id="6635270">419875220</span><span class="op" id="6635279">)</span><span class="op" id="6635280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635286">ChangeTime</span><span class="op" id="6635296">:</span>&nbsp;<span class="ident" id="6635298"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635302">.</span><span class="ident" id="6635303">Unix</span><span class="op" id="6635307">(</span><span class="num" id="6635308">1389782956</span><span class="op" id="6635318">,</span>&nbsp;<span class="num" id="6635320">794414986</span><span class="op" id="6635329">)</span><span class="op" id="6635330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635336">Xattrs</span><span class="op" id="6635342">:</span>&nbsp;<span class="keyword" id="6635344">map</span><span class="op" id="6635347">[</span><span class="builtintype" id="6635348">string</span><span class="op" id="6635354">]</span><span class="builtintype" id="6635355">string</span><span class="op" id="6635361">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6635368">&#34;user.key&#34;</span><span class="op" id="6635378">:</span>&nbsp;&nbsp;<span class="string" id="6635381">&#34;value&#34;</span><span class="op" id="6635388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6635395">&#34;user.key2&#34;</span><span class="op" id="6635406">:</span>&nbsp;<span class="string" id="6635408">&#34;value2&#34;</span><span class="op" id="6635416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6635423">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6635500">&#34;security.selinux&#34;</span><span class="op" id="6635518">:</span>&nbsp;<span class="string" id="6635520">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6635560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6635566">}</span><span class="op" id="6635567">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6635572">}</span><span class="op" id="6635573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6635578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635584">Name</span><span class="op" id="6635588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635596">&#34;small2.txt&#34;</span><span class="op" id="6635608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635614">Mode</span><span class="op" id="6635618">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635626">0644</span><span class="op" id="6635630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635636">Uid</span><span class="op" id="6635639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635648">1000</span><span class="op" id="6635652">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635658">Gid</span><span class="op" id="6635661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635670">10</span><span class="op" id="6635672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635678">Size</span><span class="op" id="6635682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6635690">11</span><span class="op" id="6635692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635698">ModTime</span><span class="op" id="6635705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6635710"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635714">.</span><span class="ident" id="6635715">Unix</span><span class="op" id="6635719">(</span><span class="num" id="6635720">1386065770</span><span class="op" id="6635730">,</span>&nbsp;<span class="num" id="6635732">449252304</span><span class="op" id="6635741">)</span><span class="op" id="6635742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635748">Typeflag</span><span class="op" id="6635756">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6635760">&#39;0&#39;</span><span class="op" id="6635763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635769">Uname</span><span class="op" id="6635774">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635781">&#34;alex&#34;</span><span class="op" id="6635787">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635793">Gname</span><span class="op" id="6635798">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6635805">&#34;wheel&#34;</span><span class="op" id="6635812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635818">AccessTime</span><span class="op" id="6635828">:</span>&nbsp;<span class="ident" id="6635830"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635834">.</span><span class="ident" id="6635835">Unix</span><span class="op" id="6635839">(</span><span class="num" id="6635840">1389782991</span><span class="op" id="6635850">,</span>&nbsp;<span class="num" id="6635852">419875220</span><span class="op" id="6635861">)</span><span class="op" id="6635862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635868">ChangeTime</span><span class="op" id="6635878">:</span>&nbsp;<span class="ident" id="6635880"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6635884">.</span><span class="ident" id="6635885">Unix</span><span class="op" id="6635889">(</span><span class="num" id="6635890">1386065770</span><span class="op" id="6635900">,</span>&nbsp;<span class="num" id="6635902">449252304</span><span class="op" id="6635911">)</span><span class="op" id="6635912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6635918">Xattrs</span><span class="op" id="6635924">:</span>&nbsp;<span class="keyword" id="6635926">map</span><span class="op" id="6635929">[</span><span class="builtintype" id="6635930">string</span><span class="op" id="6635936">]</span><span class="builtintype" id="6635937">string</span><span class="op" id="6635943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6635950">&#34;security.selinux&#34;</span><span class="op" id="6635968">:</span>&nbsp;<span class="string" id="6635970">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="6636010">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636016">}</span><span class="op" id="6636017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636022">}</span><span class="op" id="6636023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636027">}</span><span class="op" id="6636028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636031">}</span><span class="op" id="6636032">,</span><br>
<span class="lineno"></span><span class="op" id="6636034">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="6636037">func</span>&nbsp;<span class="ident" id="6636042">TestReader</span><span class="op" id="6636052">(</span><span class="ident" id="6636053">t</span>&nbsp;<span class="op" id="6636055">*</span><span class="ident" id="6636056"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6636063">.</span><span class="ident" id="6636064">T</span><span class="op" id="6636065">)</span>&nbsp;<span class="op" id="6636067">{</span><br>
<span class="lineno"></span><span class="ident" id="6636069">testLoop</span><span class="op" id="6636077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636080">for</span>&nbsp;<span class="ident" id="6636084">i</span><span class="op" id="6636085">,</span>&nbsp;<span class="ident" id="6636087">test</span>&nbsp;<span class="op" id="6636092">:=</span>&nbsp;<span class="keyword" id="6636095">range</span>&nbsp;<span class="ident" id="6636101"><a href="/archive/tar/reader_test.go.html#6632228">untarTests</a></span>&nbsp;<span class="op" id="6636112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636116">f</span><span class="op" id="6636117">,</span>&nbsp;<span class="ident" id="6636119">err</span>&nbsp;<span class="op" id="6636123">:=</span>&nbsp;<span class="ident" id="6636126"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6636128">.</span><span class="ident" id="6636129">Open</span><span class="op" id="6636133">(</span><span class="ident" id="6636134"><a href="/archive/tar/reader_test.go.html#6636087">test</a></span><span class="op" id="6636138">.</span><span class="ident" id="6636139">file</span><span class="op" id="6636143">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636147">if</span>&nbsp;<span class="ident" id="6636150"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span>&nbsp;<span class="op" id="6636154">!=</span>&nbsp;<span class="ident" id="6636157">nil</span>&nbsp;<span class="op" id="6636161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636166"><a href="/archive/tar/reader_test.go.html#6636053">t</a></span><span class="op" id="6636167">.</span><span class="ident" id="6636168">Errorf</span><span class="op" id="6636174">(</span><span class="string" id="6636175">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6636206">,</span>&nbsp;<span class="ident" id="6636208"><a href="/archive/tar/reader_test.go.html#6636084">i</a></span><span class="op" id="6636209">,</span>&nbsp;<span class="ident" id="6636211"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span><span class="op" id="6636214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636219">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636234">defer</span>&nbsp;<span class="ident" id="6636240"><a href="/archive/tar/reader_test.go.html#6636116">f</a></span><span class="op" id="6636241">.</span><span class="ident" id="6636242">Close</span><span class="op" id="6636247">(</span><span class="op" id="6636248">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636252">tr</span>&nbsp;<span class="op" id="6636255">:=</span>&nbsp;<span class="ident" id="6636258"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6636267">(</span><span class="ident" id="6636268"><a href="/archive/tar/reader_test.go.html#6636116">f</a></span><span class="op" id="6636269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636273">for</span>&nbsp;<span class="ident" id="6636277">j</span><span class="op" id="6636278">,</span>&nbsp;<span class="ident" id="6636280">header</span>&nbsp;<span class="op" id="6636287">:=</span>&nbsp;<span class="keyword" id="6636290">range</span>&nbsp;<span class="ident" id="6636296"><a href="/archive/tar/reader_test.go.html#6636087">test</a></span><span class="op" id="6636300">.</span><span class="ident" id="6636301">headers</span>&nbsp;<span class="op" id="6636309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636314">hdr</span><span class="op" id="6636317">,</span>&nbsp;<span class="ident" id="6636319">err</span>&nbsp;<span class="op" id="6636323">:=</span>&nbsp;<span class="ident" id="6636326"><a href="/archive/tar/reader_test.go.html#6636252">tr</a></span><span class="op" id="6636328">.</span><span class="ident" id="6636329">Next</span><span class="op" id="6636333">(</span><span class="op" id="6636334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636339">if</span>&nbsp;<span class="ident" id="6636342"><a href="/archive/tar/reader_test.go.html#6636319">err</a></span>&nbsp;<span class="op" id="6636346">!=</span>&nbsp;<span class="ident" id="6636349">nil</span>&nbsp;<span class="op" id="6636353">||</span>&nbsp;<span class="ident" id="6636356"><a href="/archive/tar/reader_test.go.html#6636314">hdr</a></span>&nbsp;<span class="op" id="6636360">==</span>&nbsp;<span class="ident" id="6636363">nil</span>&nbsp;<span class="op" id="6636367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636373"><a href="/archive/tar/reader_test.go.html#6636053">t</a></span><span class="op" id="6636374">.</span><span class="ident" id="6636375">Errorf</span><span class="op" id="6636381">(</span><span class="string" id="6636382">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="6636423">,</span>&nbsp;<span class="ident" id="6636425"><a href="/archive/tar/reader_test.go.html#6636084">i</a></span><span class="op" id="6636426">,</span>&nbsp;<span class="ident" id="6636428"><a href="/archive/tar/reader_test.go.html#6636277">j</a></span><span class="op" id="6636429">,</span>&nbsp;<span class="ident" id="6636431"><a href="/archive/tar/reader_test.go.html#6636319">err</a></span><span class="op" id="6636434">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636440"><a href="/archive/tar/reader_test.go.html#6636116">f</a></span><span class="op" id="6636441">.</span><span class="ident" id="6636442">Close</span><span class="op" id="6636447">(</span><span class="op" id="6636448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636454">continue</span>&nbsp;<span class="ident" id="6636463">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636480">if</span>&nbsp;<span class="op" id="6636483">!</span><span class="ident" id="6636484"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6636491">.</span><span class="ident" id="6636492">DeepEqual</span><span class="op" id="6636501">(</span><span class="op" id="6636502">*</span><span class="ident" id="6636503"><a href="/archive/tar/reader_test.go.html#6636314">hdr</a></span><span class="op" id="6636506">,</span>&nbsp;<span class="op" id="6636508">*</span><span class="ident" id="6636509"><a href="/archive/tar/reader_test.go.html#6636280">header</a></span><span class="op" id="6636515">)</span>&nbsp;<span class="op" id="6636517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636523"><a href="/archive/tar/reader_test.go.html#6636053">t</a></span><span class="op" id="6636524">.</span><span class="ident" id="6636525">Errorf</span><span class="op" id="6636531">(</span><span class="string" id="6636532">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6636590">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636597"><a href="/archive/tar/reader_test.go.html#6636084">i</a></span><span class="op" id="6636598">,</span>&nbsp;<span class="ident" id="6636600"><a href="/archive/tar/reader_test.go.html#6636277">j</a></span><span class="op" id="6636601">,</span>&nbsp;<span class="op" id="6636603">*</span><span class="ident" id="6636604"><a href="/archive/tar/reader_test.go.html#6636314">hdr</a></span><span class="op" id="6636607">,</span>&nbsp;<span class="op" id="6636609">*</span><span class="ident" id="6636610"><a href="/archive/tar/reader_test.go.html#6636280">header</a></span><span class="op" id="6636616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636629">hdr</span><span class="op" id="6636632">,</span>&nbsp;<span class="ident" id="6636634"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span>&nbsp;<span class="op" id="6636638">:=</span>&nbsp;<span class="ident" id="6636641"><a href="/archive/tar/reader_test.go.html#6636252">tr</a></span><span class="op" id="6636643">.</span><span class="ident" id="6636644">Next</span><span class="op" id="6636648">(</span><span class="op" id="6636649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636653">if</span>&nbsp;<span class="ident" id="6636656"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span>&nbsp;<span class="op" id="6636660">==</span>&nbsp;<span class="ident" id="6636663"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6636665">.</span><span class="ident" id="6636666">EOF</span>&nbsp;<span class="op" id="6636670">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636675">continue</span>&nbsp;<span class="ident" id="6636684">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636699">if</span>&nbsp;<span class="ident" id="6636702"><a href="/archive/tar/reader_test.go.html#6636629">hdr</a></span>&nbsp;<span class="op" id="6636706">!=</span>&nbsp;<span class="ident" id="6636709">nil</span>&nbsp;<span class="op" id="6636713">||</span>&nbsp;<span class="ident" id="6636716"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span>&nbsp;<span class="op" id="6636720">!=</span>&nbsp;<span class="ident" id="6636723">nil</span>&nbsp;<span class="op" id="6636727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636732"><a href="/archive/tar/reader_test.go.html#6636053">t</a></span><span class="op" id="6636733">.</span><span class="ident" id="6636734">Errorf</span><span class="op" id="6636740">(</span><span class="string" id="6636741">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="6636792">,</span>&nbsp;<span class="ident" id="6636794"><a href="/archive/tar/reader_test.go.html#6636084">i</a></span><span class="op" id="6636795">,</span>&nbsp;<span class="ident" id="6636797"><a href="/archive/tar/reader_test.go.html#6636629">hdr</a></span><span class="op" id="6636800">,</span>&nbsp;<span class="ident" id="6636802"><a href="/archive/tar/reader_test.go.html#6636119">err</a></span><span class="op" id="6636805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636809">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636812">}</span><br>
<span class="lineno"></span><span class="op" id="6636814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6636817">func</span>&nbsp;<span class="ident" id="6636822">TestPartialRead</span><span class="op" id="6636837">(</span><span class="ident" id="6636838">t</span>&nbsp;<span class="op" id="6636840">*</span><span class="ident" id="6636841"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6636848">.</span><span class="ident" id="6636849">T</span><span class="op" id="6636850">)</span>&nbsp;<span class="op" id="6636852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636855">f</span><span class="op" id="6636856">,</span>&nbsp;<span class="ident" id="6636858">err</span>&nbsp;<span class="op" id="6636862">:=</span>&nbsp;<span class="ident" id="6636865"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6636867">.</span><span class="ident" id="6636868">Open</span><span class="op" id="6636872">(</span><span class="string" id="6636873">&#34;testdata/gnu.tar&#34;</span><span class="op" id="6636891">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636894">if</span>&nbsp;<span class="ident" id="6636897"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span>&nbsp;<span class="op" id="6636901">!=</span>&nbsp;<span class="ident" id="6636904">nil</span>&nbsp;<span class="op" id="6636908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636912"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6636913">.</span><span class="ident" id="6636914">Fatalf</span><span class="op" id="6636920">(</span><span class="string" id="6636921">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6636943">,</span>&nbsp;<span class="ident" id="6636945"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span><span class="op" id="6636948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6636951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6636954">defer</span>&nbsp;<span class="ident" id="6636960"><a href="/archive/tar/reader_test.go.html#6636855">f</a></span><span class="op" id="6636961">.</span><span class="ident" id="6636962">Close</span><span class="op" id="6636967">(</span><span class="op" id="6636968">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6636972">tr</span>&nbsp;<span class="op" id="6636975">:=</span>&nbsp;<span class="ident" id="6636978"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6636987">(</span><span class="ident" id="6636988"><a href="/archive/tar/reader_test.go.html#6636855">f</a></span><span class="op" id="6636989">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6636993">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637058">hdr</span><span class="op" id="6637061">,</span>&nbsp;<span class="ident" id="6637063"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span>&nbsp;<span class="op" id="6637067">:=</span>&nbsp;<span class="ident" id="6637070"><a href="/archive/tar/reader_test.go.html#6636972">tr</a></span><span class="op" id="6637072">.</span><span class="ident" id="6637073">Next</span><span class="op" id="6637077">(</span><span class="op" id="6637078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637081">if</span>&nbsp;<span class="ident" id="6637084"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span>&nbsp;<span class="op" id="6637088">!=</span>&nbsp;<span class="ident" id="6637091">nil</span>&nbsp;<span class="op" id="6637095">||</span>&nbsp;<span class="ident" id="6637098"><a href="/archive/tar/reader_test.go.html#6637058">hdr</a></span>&nbsp;<span class="op" id="6637102">==</span>&nbsp;<span class="ident" id="6637105">nil</span>&nbsp;<span class="op" id="6637109">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637113"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637114">.</span><span class="ident" id="6637115">Fatalf</span><span class="op" id="6637121">(</span><span class="string" id="6637122">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6637149">,</span>&nbsp;<span class="ident" id="6637151"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span><span class="op" id="6637154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637160">buf</span>&nbsp;<span class="op" id="6637164">:=</span>&nbsp;<span class="builtinfunc" id="6637167">make</span><span class="op" id="6637171">(</span><span class="op" id="6637172">[</span><span class="op" id="6637173">]</span><span class="builtintype" id="6637174">byte</span><span class="op" id="6637178">,</span>&nbsp;<span class="num" id="6637180">4</span><span class="op" id="6637181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637184">if</span>&nbsp;<span class="ident" id="6637187">_</span><span class="op" id="6637188">,</span>&nbsp;<span class="ident" id="6637190">err</span>&nbsp;<span class="op" id="6637194">:=</span>&nbsp;<span class="ident" id="6637197"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6637199">.</span><span class="ident" id="6637200">ReadFull</span><span class="op" id="6637208">(</span><span class="ident" id="6637209"><a href="/archive/tar/reader_test.go.html#6636972">tr</a></span><span class="op" id="6637211">,</span>&nbsp;<span class="ident" id="6637213"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637216">)</span><span class="op" id="6637217">;</span>&nbsp;<span class="ident" id="6637219"><a href="/archive/tar/reader_test.go.html#6637190">err</a></span>&nbsp;<span class="op" id="6637223">!=</span>&nbsp;<span class="ident" id="6637226">nil</span>&nbsp;<span class="op" id="6637230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637234"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637235">.</span><span class="ident" id="6637236">Fatalf</span><span class="op" id="6637242">(</span><span class="string" id="6637243">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6637265">,</span>&nbsp;<span class="ident" id="6637267"><a href="/archive/tar/reader_test.go.html#6637190">err</a></span><span class="op" id="6637270">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637276">if</span>&nbsp;<span class="ident" id="6637279">expected</span>&nbsp;<span class="op" id="6637288">:=</span>&nbsp;<span class="op" id="6637291">[</span><span class="op" id="6637292">]</span><span class="builtintype" id="6637293">byte</span><span class="op" id="6637297">(</span><span class="string" id="6637298">&#34;Kilt&#34;</span><span class="op" id="6637304">)</span><span class="op" id="6637305">;</span>&nbsp;<span class="op" id="6637307">!</span><span class="ident" id="6637308"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6637313">.</span><span class="ident" id="6637314">Equal</span><span class="op" id="6637319">(</span><span class="ident" id="6637320"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637323">,</span>&nbsp;<span class="ident" id="6637325"><a href="/archive/tar/reader_test.go.html#6637279">expected</a></span><span class="op" id="6637333">)</span>&nbsp;<span class="op" id="6637335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637339"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637340">.</span><span class="ident" id="6637341">Errorf</span><span class="op" id="6637347">(</span><span class="string" id="6637348">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6637372">,</span>&nbsp;<span class="ident" id="6637374"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637377">,</span>&nbsp;<span class="ident" id="6637379"><a href="/archive/tar/reader_test.go.html#6637279">expected</a></span><span class="op" id="6637387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6637394">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637410"><a href="/archive/tar/reader_test.go.html#6637058">hdr</a></span><span class="op" id="6637413">,</span>&nbsp;<span class="ident" id="6637415"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span>&nbsp;<span class="op" id="6637419">=</span>&nbsp;<span class="ident" id="6637421"><a href="/archive/tar/reader_test.go.html#6636972">tr</a></span><span class="op" id="6637423">.</span><span class="ident" id="6637424">Next</span><span class="op" id="6637428">(</span><span class="op" id="6637429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637432">if</span>&nbsp;<span class="ident" id="6637435"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span>&nbsp;<span class="op" id="6637439">!=</span>&nbsp;<span class="ident" id="6637442">nil</span>&nbsp;<span class="op" id="6637446">||</span>&nbsp;<span class="ident" id="6637449"><a href="/archive/tar/reader_test.go.html#6637058">hdr</a></span>&nbsp;<span class="op" id="6637453">==</span>&nbsp;<span class="ident" id="6637456">nil</span>&nbsp;<span class="op" id="6637460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637464"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637465">.</span><span class="ident" id="6637466">Fatalf</span><span class="op" id="6637472">(</span><span class="string" id="6637473">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="6637501">,</span>&nbsp;<span class="ident" id="6637503"><a href="/archive/tar/reader_test.go.html#6636858">err</a></span><span class="op" id="6637506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637509">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637512"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span>&nbsp;<span class="op" id="6637516">=</span>&nbsp;<span class="builtinfunc" id="6637518">make</span><span class="op" id="6637522">(</span><span class="op" id="6637523">[</span><span class="op" id="6637524">]</span><span class="builtintype" id="6637525">byte</span><span class="op" id="6637529">,</span>&nbsp;<span class="num" id="6637531">6</span><span class="op" id="6637532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637535">if</span>&nbsp;<span class="ident" id="6637538">_</span><span class="op" id="6637539">,</span>&nbsp;<span class="ident" id="6637541">err</span>&nbsp;<span class="op" id="6637545">:=</span>&nbsp;<span class="ident" id="6637548"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6637550">.</span><span class="ident" id="6637551">ReadFull</span><span class="op" id="6637559">(</span><span class="ident" id="6637560"><a href="/archive/tar/reader_test.go.html#6636972">tr</a></span><span class="op" id="6637562">,</span>&nbsp;<span class="ident" id="6637564"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637567">)</span><span class="op" id="6637568">;</span>&nbsp;<span class="ident" id="6637570"><a href="/archive/tar/reader_test.go.html#6637541">err</a></span>&nbsp;<span class="op" id="6637574">!=</span>&nbsp;<span class="ident" id="6637577">nil</span>&nbsp;<span class="op" id="6637581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637585"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637586">.</span><span class="ident" id="6637587">Fatalf</span><span class="op" id="6637593">(</span><span class="string" id="6637594">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6637616">,</span>&nbsp;<span class="ident" id="6637618"><a href="/archive/tar/reader_test.go.html#6637541">err</a></span><span class="op" id="6637621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637627">if</span>&nbsp;<span class="ident" id="6637630">expected</span>&nbsp;<span class="op" id="6637639">:=</span>&nbsp;<span class="op" id="6637642">[</span><span class="op" id="6637643">]</span><span class="builtintype" id="6637644">byte</span><span class="op" id="6637648">(</span><span class="string" id="6637649">&#34;Google&#34;</span><span class="op" id="6637657">)</span><span class="op" id="6637658">;</span>&nbsp;<span class="op" id="6637660">!</span><span class="ident" id="6637661"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6637666">.</span><span class="ident" id="6637667">Equal</span><span class="op" id="6637672">(</span><span class="ident" id="6637673"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637676">,</span>&nbsp;<span class="ident" id="6637678"><a href="/archive/tar/reader_test.go.html#6637630">expected</a></span><span class="op" id="6637686">)</span>&nbsp;<span class="op" id="6637688">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637692"><a href="/archive/tar/reader_test.go.html#6636838">t</a></span><span class="op" id="6637693">.</span><span class="ident" id="6637694">Errorf</span><span class="op" id="6637700">(</span><span class="string" id="6637701">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6637725">,</span>&nbsp;<span class="ident" id="6637727"><a href="/archive/tar/reader_test.go.html#6637160">buf</a></span><span class="op" id="6637730">,</span>&nbsp;<span class="ident" id="6637732"><a href="/archive/tar/reader_test.go.html#6637630">expected</a></span><span class="op" id="6637740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637743">}</span><br>
<span class="lineno"></span><span class="op" id="6637745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6637748">func</span>&nbsp;<span class="ident" id="6637753">TestIncrementalRead</span><span class="op" id="6637772">(</span><span class="ident" id="6637773">t</span>&nbsp;<span class="op" id="6637775">*</span><span class="ident" id="6637776"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6637783">.</span><span class="ident" id="6637784">T</span><span class="op" id="6637785">)</span>&nbsp;<span class="op" id="6637787">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637790">test</span>&nbsp;<span class="op" id="6637795">:=</span>&nbsp;<span class="ident" id="6637798"><a href="/archive/tar/reader_test.go.html#6629996">gnuTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637810">f</span><span class="op" id="6637811">,</span>&nbsp;<span class="ident" id="6637813">err</span>&nbsp;<span class="op" id="6637817">:=</span>&nbsp;<span class="ident" id="6637820"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6637822">.</span><span class="ident" id="6637823">Open</span><span class="op" id="6637827">(</span><span class="ident" id="6637828"><a href="/archive/tar/reader_test.go.html#6637790">test</a></span><span class="op" id="6637832">.</span><span class="ident" id="6637833">file</span><span class="op" id="6637837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637840">if</span>&nbsp;<span class="ident" id="6637843"><a href="/archive/tar/reader_test.go.html#6637813">err</a></span>&nbsp;<span class="op" id="6637847">!=</span>&nbsp;<span class="ident" id="6637850">nil</span>&nbsp;<span class="op" id="6637854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637858"><a href="/archive/tar/reader_test.go.html#6637773">t</a></span><span class="op" id="6637859">.</span><span class="ident" id="6637860">Fatalf</span><span class="op" id="6637866">(</span><span class="string" id="6637867">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6637889">,</span>&nbsp;<span class="ident" id="6637891"><a href="/archive/tar/reader_test.go.html#6637813">err</a></span><span class="op" id="6637894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6637897">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6637900">defer</span>&nbsp;<span class="ident" id="6637906"><a href="/archive/tar/reader_test.go.html#6637810">f</a></span><span class="op" id="6637907">.</span><span class="ident" id="6637908">Close</span><span class="op" id="6637913">(</span><span class="op" id="6637914">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637918">tr</span>&nbsp;<span class="op" id="6637921">:=</span>&nbsp;<span class="ident" id="6637924"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6637933">(</span><span class="ident" id="6637934"><a href="/archive/tar/reader_test.go.html#6637810">f</a></span><span class="op" id="6637935">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637939">headers</span>&nbsp;<span class="op" id="6637947">:=</span>&nbsp;<span class="ident" id="6637950"><a href="/archive/tar/reader_test.go.html#6637790">test</a></span><span class="op" id="6637954">.</span><span class="ident" id="6637955">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637964">cksums</span>&nbsp;<span class="op" id="6637971">:=</span>&nbsp;<span class="ident" id="6637974"><a href="/archive/tar/reader_test.go.html#6637790">test</a></span><span class="op" id="6637978">.</span><span class="ident" id="6637979">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6637987">nread</span>&nbsp;<span class="op" id="6637993">:=</span>&nbsp;<span class="num" id="6637996">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6638000">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638024">for</span>&nbsp;<span class="op" id="6638028">;</span>&nbsp;<span class="op" id="6638030">;</span>&nbsp;<span class="ident" id="6638032"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span><span class="op" id="6638037">++</span>&nbsp;<span class="op" id="6638040">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638044">hdr</span><span class="op" id="6638047">,</span>&nbsp;<span class="ident" id="6638049">err</span>&nbsp;<span class="op" id="6638053">:=</span>&nbsp;<span class="ident" id="6638056"><a href="/archive/tar/reader_test.go.html#6637918">tr</a></span><span class="op" id="6638058">.</span><span class="ident" id="6638059">Next</span><span class="op" id="6638063">(</span><span class="op" id="6638064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638068">if</span>&nbsp;<span class="ident" id="6638071"><a href="/archive/tar/reader_test.go.html#6638044">hdr</a></span>&nbsp;<span class="op" id="6638075">==</span>&nbsp;<span class="ident" id="6638078">nil</span>&nbsp;<span class="op" id="6638082">||</span>&nbsp;<span class="ident" id="6638085"><a href="/archive/tar/reader_test.go.html#6638049">err</a></span>&nbsp;<span class="op" id="6638089">==</span>&nbsp;<span class="ident" id="6638092"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6638094">.</span><span class="ident" id="6638095">EOF</span>&nbsp;<span class="op" id="6638099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638104">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6638117">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638139">if</span>&nbsp;<span class="op" id="6638142">!</span><span class="ident" id="6638143"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6638150">.</span><span class="ident" id="6638151">DeepEqual</span><span class="op" id="6638160">(</span><span class="op" id="6638161">*</span><span class="ident" id="6638162"><a href="/archive/tar/reader_test.go.html#6638044">hdr</a></span><span class="op" id="6638165">,</span>&nbsp;<span class="op" id="6638167">*</span><span class="ident" id="6638168"><a href="/archive/tar/reader_test.go.html#6637939">headers</a></span><span class="op" id="6638175">[</span><span class="ident" id="6638176"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span><span class="op" id="6638181">]</span><span class="op" id="6638182">)</span>&nbsp;<span class="op" id="6638184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638189"><a href="/archive/tar/reader_test.go.html#6637773">t</a></span><span class="op" id="6638190">.</span><span class="ident" id="6638191">Errorf</span><span class="op" id="6638197">(</span><span class="string" id="6638198">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6638237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638243">*</span><span class="ident" id="6638244"><a href="/archive/tar/reader_test.go.html#6638044">hdr</a></span><span class="op" id="6638247">,</span>&nbsp;<span class="ident" id="6638249"><a href="/archive/tar/reader_test.go.html#6637939">headers</a></span><span class="op" id="6638256">[</span><span class="ident" id="6638257"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span><span class="op" id="6638262">]</span><span class="op" id="6638263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638267">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6638272">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6638318">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638348">h</span>&nbsp;<span class="op" id="6638350">:=</span>&nbsp;<span class="ident" id="6638353"><a href="/archive/tar/reader_test.go.html#6629823">md5</a></span><span class="op" id="6638356">.</span><span class="ident" id="6638357">New</span><span class="op" id="6638360">(</span><span class="op" id="6638361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638365">rdbuf</span>&nbsp;<span class="op" id="6638371">:=</span>&nbsp;<span class="builtinfunc" id="6638374">make</span><span class="op" id="6638378">(</span><span class="op" id="6638379">[</span><span class="op" id="6638380">]</span><span class="builtintype" id="6638381">uint8</span><span class="op" id="6638386">,</span>&nbsp;<span class="num" id="6638388">8</span><span class="op" id="6638389">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638393">for</span>&nbsp;<span class="op" id="6638397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638402">nr</span><span class="op" id="6638404">,</span>&nbsp;<span class="ident" id="6638406">err</span>&nbsp;<span class="op" id="6638410">:=</span>&nbsp;<span class="ident" id="6638413"><a href="/archive/tar/reader_test.go.html#6637918">tr</a></span><span class="op" id="6638415">.</span><span class="ident" id="6638416">Read</span><span class="op" id="6638420">(</span><span class="ident" id="6638421"><a href="/archive/tar/reader_test.go.html#6638365">rdbuf</a></span><span class="op" id="6638426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638431">if</span>&nbsp;<span class="ident" id="6638434"><a href="/archive/tar/reader_test.go.html#6638406">err</a></span>&nbsp;<span class="op" id="6638438">==</span>&nbsp;<span class="ident" id="6638441"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6638443">.</span><span class="ident" id="6638444">EOF</span>&nbsp;<span class="op" id="6638448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638454">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638463">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638468">if</span>&nbsp;<span class="ident" id="6638471"><a href="/archive/tar/reader_test.go.html#6638406">err</a></span>&nbsp;<span class="op" id="6638475">!=</span>&nbsp;<span class="ident" id="6638478">nil</span>&nbsp;<span class="op" id="6638482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638488"><a href="/archive/tar/reader_test.go.html#6637773">t</a></span><span class="op" id="6638489">.</span><span class="ident" id="6638490">Errorf</span><span class="op" id="6638496">(</span><span class="string" id="6638497">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6638526">,</span>&nbsp;<span class="ident" id="6638528"><a href="/archive/tar/reader_test.go.html#6638406">err</a></span><span class="op" id="6638531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638537">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638551"><a href="/archive/tar/reader_test.go.html#6638348">h</a></span><span class="op" id="6638552">.</span><span class="ident" id="6638553">Write</span><span class="op" id="6638558">(</span><span class="ident" id="6638559"><a href="/archive/tar/reader_test.go.html#6638365">rdbuf</a></span><span class="op" id="6638564">[</span><span class="num" id="6638565">0</span><span class="op" id="6638566">:</span><span class="ident" id="6638567"><a href="/archive/tar/reader_test.go.html#6638402">nr</a></span><span class="op" id="6638569">]</span><span class="op" id="6638570">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6638578">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638599">have</span>&nbsp;<span class="op" id="6638604">:=</span>&nbsp;<span class="ident" id="6638607"><a href="/archive/tar/reader_test.go.html#6629837">fmt</a></span><span class="op" id="6638610">.</span><span class="ident" id="6638611">Sprintf</span><span class="op" id="6638618">(</span><span class="string" id="6638619">&#34;%x&#34;</span><span class="op" id="6638623">,</span>&nbsp;<span class="ident" id="6638625"><a href="/archive/tar/reader_test.go.html#6638348">h</a></span><span class="op" id="6638626">.</span><span class="ident" id="6638627">Sum</span><span class="op" id="6638630">(</span><span class="ident" id="6638631">nil</span><span class="op" id="6638634">)</span><span class="op" id="6638635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638639">want</span>&nbsp;<span class="op" id="6638644">:=</span>&nbsp;<span class="ident" id="6638647"><a href="/archive/tar/reader_test.go.html#6637964">cksums</a></span><span class="op" id="6638653">[</span><span class="ident" id="6638654"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span><span class="op" id="6638659">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638663">if</span>&nbsp;<span class="ident" id="6638666"><a href="/archive/tar/reader_test.go.html#6638639">want</a></span>&nbsp;<span class="op" id="6638671">!=</span>&nbsp;<span class="ident" id="6638674"><a href="/archive/tar/reader_test.go.html#6638599">have</a></span>&nbsp;<span class="op" id="6638679">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638684"><a href="/archive/tar/reader_test.go.html#6637773">t</a></span><span class="op" id="6638685">.</span><span class="ident" id="6638686">Errorf</span><span class="op" id="6638692">(</span><span class="string" id="6638693">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6638739">,</span>&nbsp;<span class="ident" id="6638741"><a href="/archive/tar/reader_test.go.html#6638044">hdr</a></span><span class="op" id="6638744">.</span><span class="ident" id="6638745">Name</span><span class="op" id="6638749">,</span>&nbsp;<span class="ident" id="6638751"><a href="/archive/tar/reader_test.go.html#6638599">have</a></span><span class="op" id="6638755">,</span>&nbsp;<span class="ident" id="6638757"><a href="/archive/tar/reader_test.go.html#6638639">want</a></span><span class="op" id="6638761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638771">if</span>&nbsp;<span class="ident" id="6638774"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span>&nbsp;<span class="op" id="6638780">!=</span>&nbsp;<span class="builtinfunc" id="6638783">len</span><span class="op" id="6638786">(</span><span class="ident" id="6638787"><a href="/archive/tar/reader_test.go.html#6637939">headers</a></span><span class="op" id="6638794">)</span>&nbsp;<span class="op" id="6638796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638800"><a href="/archive/tar/reader_test.go.html#6637773">t</a></span><span class="op" id="6638801">.</span><span class="ident" id="6638802">Errorf</span><span class="op" id="6638808">(</span><span class="string" id="6638809">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6638865">,</span>&nbsp;<span class="builtinfunc" id="6638867">len</span><span class="op" id="6638870">(</span><span class="ident" id="6638871"><a href="/archive/tar/reader_test.go.html#6637939">headers</a></span><span class="op" id="6638878">)</span><span class="op" id="6638879">,</span>&nbsp;<span class="ident" id="6638881"><a href="/archive/tar/reader_test.go.html#6637987">nread</a></span><span class="op" id="6638886">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6638889">}</span><br>
<span class="lineno"></span><span class="op" id="6638891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6638894">func</span>&nbsp;<span class="ident" id="6638899">TestNonSeekable</span><span class="op" id="6638914">(</span><span class="ident" id="6638915">t</span>&nbsp;<span class="op" id="6638917">*</span><span class="ident" id="6638918"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6638925">.</span><span class="ident" id="6638926">T</span><span class="op" id="6638927">)</span>&nbsp;<span class="op" id="6638929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638932">test</span>&nbsp;<span class="op" id="6638937">:=</span>&nbsp;<span class="ident" id="6638940"><a href="/archive/tar/reader_test.go.html#6629996">gnuTarTest</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6638952">f</span><span class="op" id="6638953">,</span>&nbsp;<span class="ident" id="6638955">err</span>&nbsp;<span class="op" id="6638959">:=</span>&nbsp;<span class="ident" id="6638962"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6638964">.</span><span class="ident" id="6638965">Open</span><span class="op" id="6638969">(</span><span class="ident" id="6638970"><a href="/archive/tar/reader_test.go.html#6638932">test</a></span><span class="op" id="6638974">.</span><span class="ident" id="6638975">file</span><span class="op" id="6638979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6638982">if</span>&nbsp;<span class="ident" id="6638985"><a href="/archive/tar/reader_test.go.html#6638955">err</a></span>&nbsp;<span class="op" id="6638989">!=</span>&nbsp;<span class="ident" id="6638992">nil</span>&nbsp;<span class="op" id="6638996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639000"><a href="/archive/tar/reader_test.go.html#6638915">t</a></span><span class="op" id="6639001">.</span><span class="ident" id="6639002">Fatalf</span><span class="op" id="6639008">(</span><span class="string" id="6639009">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6639031">,</span>&nbsp;<span class="ident" id="6639033"><a href="/archive/tar/reader_test.go.html#6638955">err</a></span><span class="op" id="6639036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639042">defer</span>&nbsp;<span class="ident" id="6639048"><a href="/archive/tar/reader_test.go.html#6638952">f</a></span><span class="op" id="6639049">.</span><span class="ident" id="6639050">Close</span><span class="op" id="6639055">(</span><span class="op" id="6639056">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639060">type</span>&nbsp;<span class="ident" id="6639065">readerOnly</span>&nbsp;<span class="keyword" id="6639076">struct</span>&nbsp;<span class="op" id="6639083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639087"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6639089">.</span><span class="ident" id="6639090">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639101">tr</span>&nbsp;<span class="op" id="6639104">:=</span>&nbsp;<span class="ident" id="6639107"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6639116">(</span><span class="ident" id="6639117"><a href="/archive/tar/reader_test.go.html#6639065">readerOnly</a></span><span class="op" id="6639127">{</span><span class="ident" id="6639128"><a href="/archive/tar/reader_test.go.html#6638952">f</a></span><span class="op" id="6639129">}</span><span class="op" id="6639130">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639133">nread</span>&nbsp;<span class="op" id="6639139">:=</span>&nbsp;<span class="num" id="6639142">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639146">for</span>&nbsp;<span class="op" id="6639150">;</span>&nbsp;<span class="op" id="6639152">;</span>&nbsp;<span class="ident" id="6639154"><a href="/archive/tar/reader_test.go.html#6639133">nread</a></span><span class="op" id="6639159">++</span>&nbsp;<span class="op" id="6639162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639166">_</span><span class="op" id="6639167">,</span>&nbsp;<span class="ident" id="6639169">err</span>&nbsp;<span class="op" id="6639173">:=</span>&nbsp;<span class="ident" id="6639176"><a href="/archive/tar/reader_test.go.html#6639101">tr</a></span><span class="op" id="6639178">.</span><span class="ident" id="6639179">Next</span><span class="op" id="6639183">(</span><span class="op" id="6639184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639188">if</span>&nbsp;<span class="ident" id="6639191"><a href="/archive/tar/reader_test.go.html#6639169">err</a></span>&nbsp;<span class="op" id="6639195">==</span>&nbsp;<span class="ident" id="6639198"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6639200">.</span><span class="ident" id="6639201">EOF</span>&nbsp;<span class="op" id="6639205">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639210">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639222">if</span>&nbsp;<span class="ident" id="6639225"><a href="/archive/tar/reader_test.go.html#6639169">err</a></span>&nbsp;<span class="op" id="6639229">!=</span>&nbsp;<span class="ident" id="6639232">nil</span>&nbsp;<span class="op" id="6639236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639241"><a href="/archive/tar/reader_test.go.html#6638915">t</a></span><span class="op" id="6639242">.</span><span class="ident" id="6639243">Fatalf</span><span class="op" id="6639249">(</span><span class="string" id="6639250">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6639272">,</span>&nbsp;<span class="ident" id="6639274"><a href="/archive/tar/reader_test.go.html#6639169">err</a></span><span class="op" id="6639277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639281">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639288">if</span>&nbsp;<span class="ident" id="6639291"><a href="/archive/tar/reader_test.go.html#6639133">nread</a></span>&nbsp;<span class="op" id="6639297">!=</span>&nbsp;<span class="builtinfunc" id="6639300">len</span><span class="op" id="6639303">(</span><span class="ident" id="6639304"><a href="/archive/tar/reader_test.go.html#6638932">test</a></span><span class="op" id="6639308">.</span><span class="ident" id="6639309">headers</span><span class="op" id="6639316">)</span>&nbsp;<span class="op" id="6639318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639322"><a href="/archive/tar/reader_test.go.html#6638915">t</a></span><span class="op" id="6639323">.</span><span class="ident" id="6639324">Errorf</span><span class="op" id="6639330">(</span><span class="string" id="6639331">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6639387">,</span>&nbsp;<span class="builtinfunc" id="6639389">len</span><span class="op" id="6639392">(</span><span class="ident" id="6639393"><a href="/archive/tar/reader_test.go.html#6638932">test</a></span><span class="op" id="6639397">.</span><span class="ident" id="6639398">headers</span><span class="op" id="6639405">)</span><span class="op" id="6639406">,</span>&nbsp;<span class="ident" id="6639408"><a href="/archive/tar/reader_test.go.html#6639133">nread</a></span><span class="op" id="6639413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639416">}</span><br>
<span class="lineno">440</span><span class="op" id="6639418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6639421">func</span>&nbsp;<span class="ident" id="6639426">TestParsePAXHeader</span><span class="op" id="6639444">(</span><span class="ident" id="6639445">t</span>&nbsp;<span class="op" id="6639447">*</span><span class="ident" id="6639448"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6639455">.</span><span class="ident" id="6639456">T</span><span class="op" id="6639457">)</span>&nbsp;<span class="op" id="6639459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639462">paxTests</span>&nbsp;<span class="op" id="6639471">:=</span>&nbsp;<span class="op" id="6639474">[</span><span class="op" id="6639475">]</span><span class="op" id="6639476">[</span><span class="num" id="6639477">3</span><span class="op" id="6639478">]</span><span class="builtintype" id="6639479">string</span><span class="op" id="6639485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639489">{</span><span class="string" id="6639490">&#34;a&#34;</span><span class="op" id="6639493">,</span>&nbsp;<span class="string" id="6639495">&#34;a=name&#34;</span><span class="op" id="6639503">,</span>&nbsp;<span class="string" id="6639505">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="6639518">}</span><span class="op" id="6639519">,</span>&nbsp;<span class="comment" id="6639521">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639574">{</span><span class="string" id="6639575">&#34;a&#34;</span><span class="op" id="6639578">,</span>&nbsp;<span class="string" id="6639580">&#34;a=name&#34;</span><span class="op" id="6639588">,</span>&nbsp;<span class="string" id="6639590">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="6639602">}</span><span class="op" id="6639603">,</span>&nbsp;&nbsp;<span class="comment" id="6639606">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639658">{</span><span class="string" id="6639659">&#34;mtime&#34;</span><span class="op" id="6639666">,</span>&nbsp;<span class="string" id="6639668">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="6639696">,</span>&nbsp;<span class="string" id="6639698">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="6639731">}</span><span class="op" id="6639732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639735">for</span>&nbsp;<span class="ident" id="6639739">_</span><span class="op" id="6639740">,</span>&nbsp;<span class="ident" id="6639742">test</span>&nbsp;<span class="op" id="6639747">:=</span>&nbsp;<span class="keyword" id="6639750">range</span>&nbsp;<span class="ident" id="6639756"><a href="/archive/tar/reader_test.go.html#6639462">paxTests</a></span>&nbsp;<span class="op" id="6639765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639769">key</span><span class="op" id="6639772">,</span>&nbsp;<span class="ident" id="6639774">expected</span><span class="op" id="6639782">,</span>&nbsp;<span class="ident" id="6639784">raw</span>&nbsp;<span class="op" id="6639788">:=</span>&nbsp;<span class="ident" id="6639791"><a href="/archive/tar/reader_test.go.html#6639742">test</a></span><span class="op" id="6639795">[</span><span class="num" id="6639796">0</span><span class="op" id="6639797">]</span><span class="op" id="6639798">,</span>&nbsp;<span class="ident" id="6639800"><a href="/archive/tar/reader_test.go.html#6639742">test</a></span><span class="op" id="6639804">[</span><span class="num" id="6639805">1</span><span class="op" id="6639806">]</span><span class="op" id="6639807">,</span>&nbsp;<span class="ident" id="6639809"><a href="/archive/tar/reader_test.go.html#6639742">test</a></span><span class="op" id="6639813">[</span><span class="num" id="6639814">2</span><span class="op" id="6639815">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639819">reader</span>&nbsp;<span class="op" id="6639826">:=</span>&nbsp;<span class="ident" id="6639829"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6639834">.</span><span class="ident" id="6639835">NewReader</span><span class="op" id="6639844">(</span><span class="op" id="6639845">[</span><span class="op" id="6639846">]</span><span class="builtintype" id="6639847">byte</span><span class="op" id="6639851">(</span><span class="ident" id="6639852"><a href="/archive/tar/reader_test.go.html#6639784">raw</a></span><span class="op" id="6639855">)</span><span class="op" id="6639856">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639860">headers</span><span class="op" id="6639867">,</span>&nbsp;<span class="ident" id="6639869">err</span>&nbsp;<span class="op" id="6639873">:=</span>&nbsp;<span class="ident" id="6639876"><a href="/archive/tar/reader.go.html#6201949">parsePAX</a></span><span class="op" id="6639884">(</span><span class="ident" id="6639885"><a href="/archive/tar/reader_test.go.html#6639819">reader</a></span><span class="op" id="6639891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639895">if</span>&nbsp;<span class="ident" id="6639898"><a href="/archive/tar/reader_test.go.html#6639869">err</a></span>&nbsp;<span class="op" id="6639902">!=</span>&nbsp;<span class="ident" id="6639905">nil</span>&nbsp;<span class="op" id="6639909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6639914"><a href="/archive/tar/reader_test.go.html#6639445">t</a></span><span class="op" id="6639915">.</span><span class="ident" id="6639916">Errorf</span><span class="op" id="6639922">(</span><span class="string" id="6639923">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="6639971">,</span>&nbsp;<span class="ident" id="6639973"><a href="/archive/tar/reader_test.go.html#6639869">err</a></span><span class="op" id="6639976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639981">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6639992">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6639996">if</span>&nbsp;<span class="ident" id="6639999"><a href="/archive/tar/reader_test.go.html#6629880">strings</a></span><span class="op" id="6640006">.</span><span class="ident" id="6640007">EqualFold</span><span class="op" id="6640016">(</span><span class="ident" id="6640017"><a href="/archive/tar/reader_test.go.html#6639860">headers</a></span><span class="op" id="6640024">[</span><span class="ident" id="6640025"><a href="/archive/tar/reader_test.go.html#6639769">key</a></span><span class="op" id="6640028">]</span><span class="op" id="6640029">,</span>&nbsp;<span class="ident" id="6640031"><a href="/archive/tar/reader_test.go.html#6639774">expected</a></span><span class="op" id="6640039">)</span>&nbsp;<span class="op" id="6640041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640046"><a href="/archive/tar/reader_test.go.html#6639445">t</a></span><span class="op" id="6640047">.</span><span class="ident" id="6640048">Errorf</span><span class="op" id="6640054">(</span><span class="string" id="6640055">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="6640107">,</span>&nbsp;<span class="ident" id="6640109"><a href="/archive/tar/reader_test.go.html#6639860">headers</a></span><span class="op" id="6640116">[</span><span class="ident" id="6640117"><a href="/archive/tar/reader_test.go.html#6639769">key</a></span><span class="op" id="6640120">]</span><span class="op" id="6640121">,</span>&nbsp;<span class="ident" id="6640123"><a href="/archive/tar/reader_test.go.html#6639774">expected</a></span><span class="op" id="6640131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6640136">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6640147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640151">trailer</span>&nbsp;<span class="op" id="6640159">:=</span>&nbsp;<span class="builtinfunc" id="6640162">make</span><span class="op" id="6640166">(</span><span class="op" id="6640167">[</span><span class="op" id="6640168">]</span><span class="builtintype" id="6640169">byte</span><span class="op" id="6640173">,</span>&nbsp;<span class="num" id="6640175">100</span><span class="op" id="6640178">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640182">n</span><span class="op" id="6640183">,</span>&nbsp;<span class="ident" id="6640185"><a href="/archive/tar/reader_test.go.html#6639869">err</a></span>&nbsp;<span class="op" id="6640189">:=</span>&nbsp;<span class="ident" id="6640192"><a href="/archive/tar/reader_test.go.html#6639819">reader</a></span><span class="op" id="6640198">.</span><span class="ident" id="6640199">Read</span><span class="op" id="6640203">(</span><span class="ident" id="6640204"><a href="/archive/tar/reader_test.go.html#6640151">trailer</a></span><span class="op" id="6640211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6640215">if</span>&nbsp;<span class="ident" id="6640218"><a href="/archive/tar/reader_test.go.html#6639869">err</a></span>&nbsp;<span class="op" id="6640222">!=</span>&nbsp;<span class="ident" id="6640225"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6640227">.</span><span class="ident" id="6640228">EOF</span>&nbsp;<span class="op" id="6640232">||</span>&nbsp;<span class="ident" id="6640235"><a href="/archive/tar/reader_test.go.html#6640182">n</a></span>&nbsp;<span class="op" id="6640237">!=</span>&nbsp;<span class="num" id="6640240">0</span>&nbsp;<span class="op" id="6640242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640247"><a href="/archive/tar/reader_test.go.html#6639445">t</a></span><span class="op" id="6640248">.</span><span class="ident" id="6640249">Error</span><span class="op" id="6640254">(</span><span class="string" id="6640255">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="6640279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6640283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6640286">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640289">badHeader</span>&nbsp;<span class="op" id="6640299">:=</span>&nbsp;<span class="ident" id="6640302"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6640307">.</span><span class="ident" id="6640308">NewReader</span><span class="op" id="6640317">(</span><span class="op" id="6640318">[</span><span class="op" id="6640319">]</span><span class="builtintype" id="6640320">byte</span><span class="op" id="6640324">(</span><span class="string" id="6640325">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="6640341">)</span><span class="op" id="6640342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6640345">if</span>&nbsp;<span class="ident" id="6640348">_</span><span class="op" id="6640349">,</span>&nbsp;<span class="ident" id="6640351">err</span>&nbsp;<span class="op" id="6640355">:=</span>&nbsp;<span class="ident" id="6640358"><a href="/archive/tar/reader.go.html#6201949">parsePAX</a></span><span class="op" id="6640366">(</span><span class="ident" id="6640367"><a href="/archive/tar/reader_test.go.html#6640289">badHeader</a></span><span class="op" id="6640376">)</span><span class="op" id="6640377">;</span>&nbsp;<span class="ident" id="6640379"><a href="/archive/tar/reader_test.go.html#6640351">err</a></span>&nbsp;<span class="op" id="6640383">!=</span>&nbsp;<span class="ident" id="6640386"><a href="/archive/tar/reader.go.html#6193746">ErrHeader</a></span>&nbsp;<span class="op" id="6640396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640400"><a href="/archive/tar/reader_test.go.html#6639445">t</a></span><span class="op" id="6640401">.</span><span class="ident" id="6640402">Fatal</span><span class="op" id="6640407">(</span><span class="string" id="6640408">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="6640452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6640455">}</span><br>
<span class="lineno"></span><span class="op" id="6640457">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="6640460">func</span>&nbsp;<span class="ident" id="6640465">TestParsePAXTime</span><span class="op" id="6640481">(</span><span class="ident" id="6640482">t</span>&nbsp;<span class="op" id="6640484">*</span><span class="ident" id="6640485"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6640492">.</span><span class="ident" id="6640493">T</span><span class="op" id="6640494">)</span>&nbsp;<span class="op" id="6640496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6640499">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640530">timestamps</span>&nbsp;<span class="op" id="6640541">:=</span>&nbsp;<span class="keyword" id="6640544">map</span><span class="op" id="6640547">[</span><span class="builtintype" id="6640548">string</span><span class="op" id="6640554">]</span><span class="ident" id="6640555"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6640559">.</span><span class="ident" id="6640560">Time</span><span class="op" id="6640564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6640568">&#34;1350244992.023960108&#34;</span><span class="op" id="6640590">:</span>&nbsp;&nbsp;<span class="ident" id="6640593"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6640597">.</span><span class="ident" id="6640598">Unix</span><span class="op" id="6640602">(</span><span class="num" id="6640603">1350244992</span><span class="op" id="6640613">,</span>&nbsp;<span class="num" id="6640615">23960108</span><span class="op" id="6640623">)</span><span class="op" id="6640624">,</span>&nbsp;<span class="comment" id="6640626">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6640647">&#34;1350244992.02396010&#34;</span><span class="op" id="6640668">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6640672"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6640676">.</span><span class="ident" id="6640677">Unix</span><span class="op" id="6640681">(</span><span class="num" id="6640682">1350244992</span><span class="op" id="6640692">,</span>&nbsp;<span class="num" id="6640694">23960100</span><span class="op" id="6640702">)</span><span class="op" id="6640703">,</span>&nbsp;<span class="comment" id="6640705">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6640732">&#34;1350244992.0239601089&#34;</span><span class="op" id="6640755">:</span>&nbsp;<span class="ident" id="6640757"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6640761">.</span><span class="ident" id="6640762">Unix</span><span class="op" id="6640766">(</span><span class="num" id="6640767">1350244992</span><span class="op" id="6640777">,</span>&nbsp;<span class="num" id="6640779">23960108</span><span class="op" id="6640787">)</span><span class="op" id="6640788">,</span>&nbsp;<span class="comment" id="6640790">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6640818">&#34;1350244992&#34;</span><span class="op" id="6640830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6640843"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6640847">.</span><span class="ident" id="6640848">Unix</span><span class="op" id="6640852">(</span><span class="num" id="6640853">1350244992</span><span class="op" id="6640863">,</span>&nbsp;<span class="num" id="6640865">0</span><span class="op" id="6640866">)</span><span class="op" id="6640867">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6640876">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6640900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6640903">for</span>&nbsp;<span class="ident" id="6640907">input</span><span class="op" id="6640912">,</span>&nbsp;<span class="ident" id="6640914">expected</span>&nbsp;<span class="op" id="6640923">:=</span>&nbsp;<span class="keyword" id="6640926">range</span>&nbsp;<span class="ident" id="6640932"><a href="/archive/tar/reader_test.go.html#6640530">timestamps</a></span>&nbsp;<span class="op" id="6640943">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640947">ts</span><span class="op" id="6640949">,</span>&nbsp;<span class="ident" id="6640951">err</span>&nbsp;<span class="op" id="6640955">:=</span>&nbsp;<span class="ident" id="6640958"><a href="/archive/tar/reader.go.html#6200900">parsePAXTime</a></span><span class="op" id="6640970">(</span><span class="ident" id="6640971"><a href="/archive/tar/reader_test.go.html#6640907">input</a></span><span class="op" id="6640976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6640980">if</span>&nbsp;<span class="ident" id="6640983"><a href="/archive/tar/reader_test.go.html#6640951">err</a></span>&nbsp;<span class="op" id="6640987">!=</span>&nbsp;<span class="ident" id="6640990">nil</span>&nbsp;<span class="op" id="6640994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6640999"><a href="/archive/tar/reader_test.go.html#6640482">t</a></span><span class="op" id="6641000">.</span><span class="ident" id="6641001">Fatal</span><span class="op" id="6641006">(</span><span class="ident" id="6641007"><a href="/archive/tar/reader_test.go.html#6640951">err</a></span><span class="op" id="6641010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641018">if</span>&nbsp;<span class="op" id="6641021">!</span><span class="ident" id="6641022"><a href="/archive/tar/reader_test.go.html#6640947">ts</a></span><span class="op" id="6641024">.</span><span class="ident" id="6641025">Equal</span><span class="op" id="6641030">(</span><span class="ident" id="6641031"><a href="/archive/tar/reader_test.go.html#6640914">expected</a></span><span class="op" id="6641039">)</span>&nbsp;<span class="op" id="6641041">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641046"><a href="/archive/tar/reader_test.go.html#6640482">t</a></span><span class="op" id="6641047">.</span><span class="ident" id="6641048">Fatalf</span><span class="op" id="6641054">(</span><span class="string" id="6641055">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="6641083">,</span>&nbsp;<span class="ident" id="6641085"><a href="/archive/tar/reader_test.go.html#6640947">ts</a></span><span class="op" id="6641087">,</span>&nbsp;<span class="ident" id="6641089"><a href="/archive/tar/reader_test.go.html#6640914">expected</a></span><span class="op" id="6641097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641104">}</span><br>
<span class="lineno"></span><span class="op" id="6641106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="6641109">func</span>&nbsp;<span class="ident" id="6641114">TestMergePAX</span><span class="op" id="6641126">(</span><span class="ident" id="6641127">t</span>&nbsp;<span class="op" id="6641129">*</span><span class="ident" id="6641130"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6641137">.</span><span class="ident" id="6641138">T</span><span class="op" id="6641139">)</span>&nbsp;<span class="op" id="6641141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641144">hdr</span>&nbsp;<span class="op" id="6641148">:=</span>&nbsp;<span class="builtinfunc" id="6641151">new</span><span class="op" id="6641154">(</span><span class="ident" id="6641155"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6641161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6641164">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641214">headers</span>&nbsp;<span class="op" id="6641222">:=</span>&nbsp;<span class="keyword" id="6641225">map</span><span class="op" id="6641228">[</span><span class="builtintype" id="6641229">string</span><span class="op" id="6641235">]</span><span class="builtintype" id="6641236">string</span><span class="op" id="6641242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641246">&#34;path&#34;</span><span class="op" id="6641252">:</span>&nbsp;&nbsp;<span class="string" id="6641255">&#34;a/b/c&#34;</span><span class="op" id="6641262">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641266">&#34;uid&#34;</span><span class="op" id="6641271">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6641275">&#34;1000&#34;</span><span class="op" id="6641281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6641285">&#34;mtime&#34;</span><span class="op" id="6641292">:</span>&nbsp;<span class="string" id="6641294">&#34;1350244992.023960108&#34;</span><span class="op" id="6641316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641322">err</span>&nbsp;<span class="op" id="6641326">:=</span>&nbsp;<span class="ident" id="6641329"><a href="/archive/tar/reader.go.html#6199697">mergePAX</a></span><span class="op" id="6641337">(</span><span class="ident" id="6641338"><a href="/archive/tar/reader_test.go.html#6641144">hdr</a></span><span class="op" id="6641341">,</span>&nbsp;<span class="ident" id="6641343"><a href="/archive/tar/reader_test.go.html#6641214">headers</a></span><span class="op" id="6641350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641353">if</span>&nbsp;<span class="ident" id="6641356"><a href="/archive/tar/reader_test.go.html#6641322">err</a></span>&nbsp;<span class="op" id="6641360">!=</span>&nbsp;<span class="ident" id="6641363">nil</span>&nbsp;<span class="op" id="6641367">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641371"><a href="/archive/tar/reader_test.go.html#6641127">t</a></span><span class="op" id="6641372">.</span><span class="ident" id="6641373">Fatal</span><span class="op" id="6641378">(</span><span class="ident" id="6641379"><a href="/archive/tar/reader_test.go.html#6641322">err</a></span><span class="op" id="6641382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641388">want</span>&nbsp;<span class="op" id="6641393">:=</span>&nbsp;<span class="op" id="6641396">&amp;</span><span class="ident" id="6641397"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6641403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641407">Name</span><span class="op" id="6641411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6641416">&#34;a/b/c&#34;</span><span class="op" id="6641423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641427">Uid</span><span class="op" id="6641430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6641436">1000</span><span class="op" id="6641440">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641444">ModTime</span><span class="op" id="6641451">:</span>&nbsp;<span class="ident" id="6641453"><a href="/archive/tar/reader_test.go.html#6629902">time</a></span><span class="op" id="6641457">.</span><span class="ident" id="6641458">Unix</span><span class="op" id="6641462">(</span><span class="num" id="6641463">1350244992</span><span class="op" id="6641473">,</span>&nbsp;<span class="num" id="6641475">23960108</span><span class="op" id="6641483">)</span><span class="op" id="6641484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641490">if</span>&nbsp;<span class="op" id="6641493">!</span><span class="ident" id="6641494"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6641501">.</span><span class="ident" id="6641502">DeepEqual</span><span class="op" id="6641511">(</span><span class="ident" id="6641512"><a href="/archive/tar/reader_test.go.html#6641144">hdr</a></span><span class="op" id="6641515">,</span>&nbsp;<span class="ident" id="6641517"><a href="/archive/tar/reader_test.go.html#6641388">want</a></span><span class="op" id="6641521">)</span>&nbsp;<span class="op" id="6641523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641527"><a href="/archive/tar/reader_test.go.html#6641127">t</a></span><span class="op" id="6641528">.</span><span class="ident" id="6641529">Errorf</span><span class="op" id="6641535">(</span><span class="string" id="6641536">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="6641572">,</span>&nbsp;<span class="ident" id="6641574"><a href="/archive/tar/reader_test.go.html#6641144">hdr</a></span><span class="op" id="6641577">,</span>&nbsp;<span class="ident" id="6641579"><a href="/archive/tar/reader_test.go.html#6641388">want</a></span><span class="op" id="6641583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641586">}</span><br>
<span class="lineno">510</span><span class="op" id="6641588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6641591">func</span>&nbsp;<span class="ident" id="6641596">TestSparseEndToEnd</span><span class="op" id="6641614">(</span><span class="ident" id="6641615">t</span>&nbsp;<span class="op" id="6641617">*</span><span class="ident" id="6641618"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6641625">.</span><span class="ident" id="6641626">T</span><span class="op" id="6641627">)</span>&nbsp;<span class="op" id="6641629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641632">test</span>&nbsp;<span class="op" id="6641637">:=</span>&nbsp;<span class="ident" id="6641640"><a href="/archive/tar/reader_test.go.html#6630603">sparseTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641655">f</span><span class="op" id="6641656">,</span>&nbsp;<span class="ident" id="6641658">err</span>&nbsp;<span class="op" id="6641662">:=</span>&nbsp;<span class="ident" id="6641665"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6641667">.</span><span class="ident" id="6641668">Open</span><span class="op" id="6641672">(</span><span class="ident" id="6641673"><a href="/archive/tar/reader_test.go.html#6641632">test</a></span><span class="op" id="6641677">.</span><span class="ident" id="6641678">file</span><span class="op" id="6641682">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641685">if</span>&nbsp;<span class="ident" id="6641688"><a href="/archive/tar/reader_test.go.html#6641658">err</a></span>&nbsp;<span class="op" id="6641692">!=</span>&nbsp;<span class="ident" id="6641695">nil</span>&nbsp;<span class="op" id="6641699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641703"><a href="/archive/tar/reader_test.go.html#6641615">t</a></span><span class="op" id="6641704">.</span><span class="ident" id="6641705">Fatalf</span><span class="op" id="6641711">(</span><span class="string" id="6641712">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6641734">,</span>&nbsp;<span class="ident" id="6641736"><a href="/archive/tar/reader_test.go.html#6641658">err</a></span><span class="op" id="6641739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641745">defer</span>&nbsp;<span class="ident" id="6641751"><a href="/archive/tar/reader_test.go.html#6641655">f</a></span><span class="op" id="6641752">.</span><span class="ident" id="6641753">Close</span><span class="op" id="6641758">(</span><span class="op" id="6641759">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641763">tr</span>&nbsp;<span class="op" id="6641766">:=</span>&nbsp;<span class="ident" id="6641769"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6641778">(</span><span class="ident" id="6641779"><a href="/archive/tar/reader_test.go.html#6641655">f</a></span><span class="op" id="6641780">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641784">headers</span>&nbsp;<span class="op" id="6641792">:=</span>&nbsp;<span class="ident" id="6641795"><a href="/archive/tar/reader_test.go.html#6641632">test</a></span><span class="op" id="6641799">.</span><span class="ident" id="6641800">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641809">cksums</span>&nbsp;<span class="op" id="6641816">:=</span>&nbsp;<span class="ident" id="6641819"><a href="/archive/tar/reader_test.go.html#6641632">test</a></span><span class="op" id="6641823">.</span><span class="ident" id="6641824">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641832">nread</span>&nbsp;<span class="op" id="6641838">:=</span>&nbsp;<span class="num" id="6641841">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6641845">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641869">for</span>&nbsp;<span class="op" id="6641873">;</span>&nbsp;<span class="op" id="6641875">;</span>&nbsp;<span class="ident" id="6641877"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span><span class="op" id="6641882">++</span>&nbsp;<span class="op" id="6641885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6641889">hdr</span><span class="op" id="6641892">,</span>&nbsp;<span class="ident" id="6641894">err</span>&nbsp;<span class="op" id="6641898">:=</span>&nbsp;<span class="ident" id="6641901"><a href="/archive/tar/reader_test.go.html#6641763">tr</a></span><span class="op" id="6641903">.</span><span class="ident" id="6641904">Next</span><span class="op" id="6641908">(</span><span class="op" id="6641909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641913">if</span>&nbsp;<span class="ident" id="6641916"><a href="/archive/tar/reader_test.go.html#6641889">hdr</a></span>&nbsp;<span class="op" id="6641920">==</span>&nbsp;<span class="ident" id="6641923">nil</span>&nbsp;<span class="op" id="6641927">||</span>&nbsp;<span class="ident" id="6641930"><a href="/archive/tar/reader_test.go.html#6641894">err</a></span>&nbsp;<span class="op" id="6641934">==</span>&nbsp;<span class="ident" id="6641937"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6641939">.</span><span class="ident" id="6641940">EOF</span>&nbsp;<span class="op" id="6641944">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641949">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6641957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6641962">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6641984">if</span>&nbsp;<span class="op" id="6641987">!</span><span class="ident" id="6641988"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6641995">.</span><span class="ident" id="6641996">DeepEqual</span><span class="op" id="6642005">(</span><span class="op" id="6642006">*</span><span class="ident" id="6642007"><a href="/archive/tar/reader_test.go.html#6641889">hdr</a></span><span class="op" id="6642010">,</span>&nbsp;<span class="op" id="6642012">*</span><span class="ident" id="6642013"><a href="/archive/tar/reader_test.go.html#6641784">headers</a></span><span class="op" id="6642020">[</span><span class="ident" id="6642021"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span><span class="op" id="6642026">]</span><span class="op" id="6642027">)</span>&nbsp;<span class="op" id="6642029">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642034"><a href="/archive/tar/reader_test.go.html#6641615">t</a></span><span class="op" id="6642035">.</span><span class="ident" id="6642036">Errorf</span><span class="op" id="6642042">(</span><span class="string" id="6642043">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6642082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642088">*</span><span class="ident" id="6642089"><a href="/archive/tar/reader_test.go.html#6641889">hdr</a></span><span class="op" id="6642092">,</span>&nbsp;<span class="ident" id="6642094"><a href="/archive/tar/reader_test.go.html#6641784">headers</a></span><span class="op" id="6642101">[</span><span class="ident" id="6642102"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span><span class="op" id="6642107">]</span><span class="op" id="6642108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6642117">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642154">h</span>&nbsp;<span class="op" id="6642156">:=</span>&nbsp;<span class="ident" id="6642159"><a href="/archive/tar/reader_test.go.html#6629823">md5</a></span><span class="op" id="6642162">.</span><span class="ident" id="6642163">New</span><span class="op" id="6642166">(</span><span class="op" id="6642167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642171">_</span><span class="op" id="6642172">,</span>&nbsp;<span class="ident" id="6642174"><a href="/archive/tar/reader_test.go.html#6641894">err</a></span>&nbsp;<span class="op" id="6642178">=</span>&nbsp;<span class="ident" id="6642180"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6642182">.</span><span class="ident" id="6642183">Copy</span><span class="op" id="6642187">(</span><span class="ident" id="6642188"><a href="/archive/tar/reader_test.go.html#6642154">h</a></span><span class="op" id="6642189">,</span>&nbsp;<span class="ident" id="6642191"><a href="/archive/tar/reader_test.go.html#6641763">tr</a></span><span class="op" id="6642193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642197">if</span>&nbsp;<span class="ident" id="6642200"><a href="/archive/tar/reader_test.go.html#6641894">err</a></span>&nbsp;<span class="op" id="6642204">!=</span>&nbsp;<span class="ident" id="6642207">nil</span>&nbsp;<span class="op" id="6642211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642216"><a href="/archive/tar/reader_test.go.html#6641615">t</a></span><span class="op" id="6642217">.</span><span class="ident" id="6642218">Fatalf</span><span class="op" id="6642224">(</span><span class="string" id="6642225">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6642247">,</span>&nbsp;<span class="ident" id="6642249"><a href="/archive/tar/reader_test.go.html#6641894">err</a></span><span class="op" id="6642252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642256">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6642261">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642282">have</span>&nbsp;<span class="op" id="6642287">:=</span>&nbsp;<span class="ident" id="6642290"><a href="/archive/tar/reader_test.go.html#6629837">fmt</a></span><span class="op" id="6642293">.</span><span class="ident" id="6642294">Sprintf</span><span class="op" id="6642301">(</span><span class="string" id="6642302">&#34;%x&#34;</span><span class="op" id="6642306">,</span>&nbsp;<span class="ident" id="6642308"><a href="/archive/tar/reader_test.go.html#6642154">h</a></span><span class="op" id="6642309">.</span><span class="ident" id="6642310">Sum</span><span class="op" id="6642313">(</span><span class="ident" id="6642314">nil</span><span class="op" id="6642317">)</span><span class="op" id="6642318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642322">want</span>&nbsp;<span class="op" id="6642327">:=</span>&nbsp;<span class="ident" id="6642330"><a href="/archive/tar/reader_test.go.html#6641809">cksums</a></span><span class="op" id="6642336">[</span><span class="ident" id="6642337"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span><span class="op" id="6642342">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642346">if</span>&nbsp;<span class="ident" id="6642349"><a href="/archive/tar/reader_test.go.html#6642322">want</a></span>&nbsp;<span class="op" id="6642354">!=</span>&nbsp;<span class="ident" id="6642357"><a href="/archive/tar/reader_test.go.html#6642282">have</a></span>&nbsp;<span class="op" id="6642362">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642367"><a href="/archive/tar/reader_test.go.html#6641615">t</a></span><span class="op" id="6642368">.</span><span class="ident" id="6642369">Errorf</span><span class="op" id="6642375">(</span><span class="string" id="6642376">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="6642422">,</span>&nbsp;<span class="ident" id="6642424"><a href="/archive/tar/reader_test.go.html#6641889">hdr</a></span><span class="op" id="6642427">.</span><span class="ident" id="6642428">Name</span><span class="op" id="6642432">,</span>&nbsp;<span class="ident" id="6642434"><a href="/archive/tar/reader_test.go.html#6642282">have</a></span><span class="op" id="6642438">,</span>&nbsp;<span class="ident" id="6642440"><a href="/archive/tar/reader_test.go.html#6642322">want</a></span><span class="op" id="6642444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6642454">if</span>&nbsp;<span class="ident" id="6642457"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span>&nbsp;<span class="op" id="6642463">!=</span>&nbsp;<span class="builtinfunc" id="6642466">len</span><span class="op" id="6642469">(</span><span class="ident" id="6642470"><a href="/archive/tar/reader_test.go.html#6641784">headers</a></span><span class="op" id="6642477">)</span>&nbsp;<span class="op" id="6642479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642483"><a href="/archive/tar/reader_test.go.html#6641615">t</a></span><span class="op" id="6642484">.</span><span class="ident" id="6642485">Errorf</span><span class="op" id="6642491">(</span><span class="string" id="6642492">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="6642548">,</span>&nbsp;<span class="builtinfunc" id="6642550">len</span><span class="op" id="6642553">(</span><span class="ident" id="6642554"><a href="/archive/tar/reader_test.go.html#6641784">headers</a></span><span class="op" id="6642561">)</span><span class="op" id="6642562">,</span>&nbsp;<span class="ident" id="6642564"><a href="/archive/tar/reader_test.go.html#6641832">nread</a></span><span class="op" id="6642569">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642572">}</span><br>
<span class="lineno"></span><span class="op" id="6642574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6642577">type</span>&nbsp;<span class="ident" id="6642582">sparseFileReadTest</span>&nbsp;<span class="keyword" id="6642601">struct</span>&nbsp;<span class="op" id="6642608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642611">sparseData</span>&nbsp;<span class="op" id="6642622">[</span><span class="op" id="6642623">]</span><span class="builtintype" id="6642624">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642630">sparseMap</span>&nbsp;&nbsp;<span class="op" id="6642641">[</span><span class="op" id="6642642">]</span><span class="ident" id="6642643"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642656">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6642667">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642674">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6642685">[</span><span class="op" id="6642686">]</span><span class="builtintype" id="6642687">byte</span><br>
<span class="lineno"></span><span class="op" id="6642692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="6642695">var</span>&nbsp;<span class="ident" id="6642699">sparseFileReadTests</span>&nbsp;<span class="op" id="6642719">=</span>&nbsp;<span class="op" id="6642721">[</span><span class="op" id="6642722">]</span><span class="ident" id="6642723"><a href="/archive/tar/reader_test.go.html#6642582">sparseFileReadTest</a></span><span class="op" id="6642741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642748">sparseData</span><span class="op" id="6642758">:</span>&nbsp;<span class="op" id="6642760">[</span><span class="op" id="6642761">]</span><span class="builtintype" id="6642762">byte</span><span class="op" id="6642766">(</span><span class="string" id="6642767">&#34;abcde&#34;</span><span class="op" id="6642774">)</span><span class="op" id="6642775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642779">sparseMap</span><span class="op" id="6642788">:</span>&nbsp;<span class="op" id="6642790">[</span><span class="op" id="6642791">]</span><span class="ident" id="6642792"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6642803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642808">{</span><span class="ident" id="6642809">offset</span><span class="op" id="6642815">:</span>&nbsp;<span class="num" id="6642817">0</span><span class="op" id="6642818">,</span>&nbsp;<span class="ident" id="6642820">numBytes</span><span class="op" id="6642828">:</span>&nbsp;<span class="num" id="6642830">2</span><span class="op" id="6642831">}</span><span class="op" id="6642832">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642837">{</span><span class="ident" id="6642838">offset</span><span class="op" id="6642844">:</span>&nbsp;<span class="num" id="6642846">5</span><span class="op" id="6642847">,</span>&nbsp;<span class="ident" id="6642849">numBytes</span><span class="op" id="6642857">:</span>&nbsp;<span class="num" id="6642859">3</span><span class="op" id="6642860">}</span><span class="op" id="6642861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642865">}</span><span class="op" id="6642866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642870">realSize</span><span class="op" id="6642878">:</span>&nbsp;<span class="num" id="6642880">8</span><span class="op" id="6642881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642885">expected</span><span class="op" id="6642893">:</span>&nbsp;<span class="op" id="6642895">[</span><span class="op" id="6642896">]</span><span class="builtintype" id="6642897">byte</span><span class="op" id="6642901">(</span><span class="string" id="6642902">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="6642921">)</span><span class="op" id="6642922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642925">}</span><span class="op" id="6642926">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642933">sparseData</span><span class="op" id="6642943">:</span>&nbsp;<span class="op" id="6642945">[</span><span class="op" id="6642946">]</span><span class="builtintype" id="6642947">byte</span><span class="op" id="6642951">(</span><span class="string" id="6642952">&#34;abcde&#34;</span><span class="op" id="6642959">)</span><span class="op" id="6642960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6642964">sparseMap</span><span class="op" id="6642973">:</span>&nbsp;<span class="op" id="6642975">[</span><span class="op" id="6642976">]</span><span class="ident" id="6642977"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6642988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6642993">{</span><span class="ident" id="6642994">offset</span><span class="op" id="6643000">:</span>&nbsp;<span class="num" id="6643002">0</span><span class="op" id="6643003">,</span>&nbsp;<span class="ident" id="6643005">numBytes</span><span class="op" id="6643013">:</span>&nbsp;<span class="num" id="6643015">2</span><span class="op" id="6643016">}</span><span class="op" id="6643017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643022">{</span><span class="ident" id="6643023">offset</span><span class="op" id="6643029">:</span>&nbsp;<span class="num" id="6643031">5</span><span class="op" id="6643032">,</span>&nbsp;<span class="ident" id="6643034">numBytes</span><span class="op" id="6643042">:</span>&nbsp;<span class="num" id="6643044">3</span><span class="op" id="6643045">}</span><span class="op" id="6643046">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643050">}</span><span class="op" id="6643051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643055">realSize</span><span class="op" id="6643063">:</span>&nbsp;<span class="num" id="6643065">10</span><span class="op" id="6643067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643071">expected</span><span class="op" id="6643079">:</span>&nbsp;<span class="op" id="6643081">[</span><span class="op" id="6643082">]</span><span class="builtintype" id="6643083">byte</span><span class="op" id="6643087">(</span><span class="string" id="6643088">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="6643115">)</span><span class="op" id="6643116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643119">}</span><span class="op" id="6643120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643123">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643127">sparseData</span><span class="op" id="6643137">:</span>&nbsp;<span class="op" id="6643139">[</span><span class="op" id="6643140">]</span><span class="builtintype" id="6643141">byte</span><span class="op" id="6643145">(</span><span class="string" id="6643146">&#34;abcde&#34;</span><span class="op" id="6643153">)</span><span class="op" id="6643154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643158">sparseMap</span><span class="op" id="6643167">:</span>&nbsp;<span class="op" id="6643169">[</span><span class="op" id="6643170">]</span><span class="ident" id="6643171"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6643182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643187">{</span><span class="ident" id="6643188">offset</span><span class="op" id="6643194">:</span>&nbsp;<span class="num" id="6643196">1</span><span class="op" id="6643197">,</span>&nbsp;<span class="ident" id="6643199">numBytes</span><span class="op" id="6643207">:</span>&nbsp;<span class="num" id="6643209">3</span><span class="op" id="6643210">}</span><span class="op" id="6643211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643216">{</span><span class="ident" id="6643217">offset</span><span class="op" id="6643223">:</span>&nbsp;<span class="num" id="6643225">6</span><span class="op" id="6643226">,</span>&nbsp;<span class="ident" id="6643228">numBytes</span><span class="op" id="6643236">:</span>&nbsp;<span class="num" id="6643238">2</span><span class="op" id="6643239">}</span><span class="op" id="6643240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643244">}</span><span class="op" id="6643245">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643249">realSize</span><span class="op" id="6643257">:</span>&nbsp;<span class="num" id="6643259">8</span><span class="op" id="6643260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643264">expected</span><span class="op" id="6643272">:</span>&nbsp;<span class="op" id="6643274">[</span><span class="op" id="6643275">]</span><span class="builtintype" id="6643276">byte</span><span class="op" id="6643280">(</span><span class="string" id="6643281">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="6643300">)</span><span class="op" id="6643301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643304">}</span><span class="op" id="6643305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643312">sparseData</span><span class="op" id="6643322">:</span>&nbsp;<span class="op" id="6643324">[</span><span class="op" id="6643325">]</span><span class="builtintype" id="6643326">byte</span><span class="op" id="6643330">(</span><span class="string" id="6643331">&#34;abcde&#34;</span><span class="op" id="6643338">)</span><span class="op" id="6643339">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643343">sparseMap</span><span class="op" id="6643352">:</span>&nbsp;<span class="op" id="6643354">[</span><span class="op" id="6643355">]</span><span class="ident" id="6643356"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6643367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643372">{</span><span class="ident" id="6643373">offset</span><span class="op" id="6643379">:</span>&nbsp;<span class="num" id="6643381">1</span><span class="op" id="6643382">,</span>&nbsp;<span class="ident" id="6643384">numBytes</span><span class="op" id="6643392">:</span>&nbsp;<span class="num" id="6643394">3</span><span class="op" id="6643395">}</span><span class="op" id="6643396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643401">{</span><span class="ident" id="6643402">offset</span><span class="op" id="6643408">:</span>&nbsp;<span class="num" id="6643410">6</span><span class="op" id="6643411">,</span>&nbsp;<span class="ident" id="6643413">numBytes</span><span class="op" id="6643421">:</span>&nbsp;<span class="num" id="6643423">2</span><span class="op" id="6643424">}</span><span class="op" id="6643425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643429">}</span><span class="op" id="6643430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643434">realSize</span><span class="op" id="6643442">:</span>&nbsp;<span class="num" id="6643444">10</span><span class="op" id="6643446">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643450">expected</span><span class="op" id="6643458">:</span>&nbsp;<span class="op" id="6643460">[</span><span class="op" id="6643461">]</span><span class="builtintype" id="6643462">byte</span><span class="op" id="6643466">(</span><span class="string" id="6643467">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="6643494">)</span><span class="op" id="6643495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643498">}</span><span class="op" id="6643499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643506">sparseData</span><span class="op" id="6643516">:</span>&nbsp;<span class="op" id="6643518">[</span><span class="op" id="6643519">]</span><span class="builtintype" id="6643520">byte</span><span class="op" id="6643524">(</span><span class="string" id="6643525">&#34;&#34;</span><span class="op" id="6643527">)</span><span class="op" id="6643528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643532">sparseMap</span><span class="op" id="6643541">:</span>&nbsp;&nbsp;<span class="ident" id="6643544">nil</span><span class="op" id="6643547">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643551">realSize</span><span class="op" id="6643559">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6643563">2</span><span class="op" id="6643564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643568">expected</span><span class="op" id="6643576">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6643580">[</span><span class="op" id="6643581">]</span><span class="builtintype" id="6643582">byte</span><span class="op" id="6643586">(</span><span class="string" id="6643587">&#34;\x00\x00&#34;</span><span class="op" id="6643597">)</span><span class="op" id="6643598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643601">}</span><span class="op" id="6643602">,</span><br>
<span class="lineno"></span><span class="op" id="6643604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="6643607">func</span>&nbsp;<span class="ident" id="6643612">TestSparseFileReader</span><span class="op" id="6643632">(</span><span class="ident" id="6643633">t</span>&nbsp;<span class="op" id="6643635">*</span><span class="ident" id="6643636"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6643643">.</span><span class="ident" id="6643644">T</span><span class="op" id="6643645">)</span>&nbsp;<span class="op" id="6643647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643650">for</span>&nbsp;<span class="ident" id="6643654">i</span><span class="op" id="6643655">,</span>&nbsp;<span class="ident" id="6643657">test</span>&nbsp;<span class="op" id="6643662">:=</span>&nbsp;<span class="keyword" id="6643665">range</span>&nbsp;<span class="ident" id="6643671"><a href="/archive/tar/reader_test.go.html#6642699">sparseFileReadTests</a></span>&nbsp;<span class="op" id="6643691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643695">r</span>&nbsp;<span class="op" id="6643697">:=</span>&nbsp;<span class="ident" id="6643700"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6643705">.</span><span class="ident" id="6643706">NewReader</span><span class="op" id="6643715">(</span><span class="ident" id="6643716"><a href="/archive/tar/reader_test.go.html#6643657">test</a></span><span class="op" id="6643720">.</span><span class="ident" id="6643721">sparseData</span><span class="op" id="6643731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643735">nb</span>&nbsp;<span class="op" id="6643738">:=</span>&nbsp;<span class="ident" id="6643741">int64</span><span class="op" id="6643746">(</span><span class="ident" id="6643747"><a href="/archive/tar/reader_test.go.html#6643695">r</a></span><span class="op" id="6643748">.</span><span class="ident" id="6643749">Len</span><span class="op" id="6643752">(</span><span class="op" id="6643753">)</span><span class="op" id="6643754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643758">sfr</span>&nbsp;<span class="op" id="6643762">:=</span>&nbsp;<span class="op" id="6643765">&amp;</span><span class="ident" id="6643766"><a href="/archive/tar/reader.go.html#6194876">sparseFileReader</a></span><span class="op" id="6643782">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643787">rfr</span><span class="op" id="6643790">:</span>&nbsp;<span class="op" id="6643792">&amp;</span><span class="ident" id="6643793"><a href="/archive/tar/reader.go.html#6194656">regFileReader</a></span><span class="op" id="6643806">{</span><span class="ident" id="6643807">r</span><span class="op" id="6643808">:</span>&nbsp;<span class="ident" id="6643810"><a href="/archive/tar/reader_test.go.html#6643695">r</a></span><span class="op" id="6643811">,</span>&nbsp;<span class="ident" id="6643813">nb</span><span class="op" id="6643815">:</span>&nbsp;<span class="ident" id="6643817"><a href="/archive/tar/reader_test.go.html#6643735">nb</a></span><span class="op" id="6643819">}</span><span class="op" id="6643820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643825">sp</span><span class="op" id="6643827">:</span>&nbsp;&nbsp;<span class="ident" id="6643830"><a href="/archive/tar/reader_test.go.html#6643657">test</a></span><span class="op" id="6643834">.</span><span class="ident" id="6643835">sparseMap</span><span class="op" id="6643844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643849">pos</span><span class="op" id="6643852">:</span>&nbsp;<span class="num" id="6643854">0</span><span class="op" id="6643855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643860">tot</span><span class="op" id="6643863">:</span>&nbsp;<span class="ident" id="6643865"><a href="/archive/tar/reader_test.go.html#6643657">test</a></span><span class="op" id="6643869">.</span><span class="ident" id="6643870">realSize</span><span class="op" id="6643878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6643882">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6643886">if</span>&nbsp;<span class="ident" id="6643889"><a href="/archive/tar/reader_test.go.html#6643758">sfr</a></span><span class="op" id="6643892">.</span><span class="ident" id="6643893">numBytes</span><span class="op" id="6643901">(</span><span class="op" id="6643902">)</span>&nbsp;<span class="op" id="6643904">!=</span>&nbsp;<span class="ident" id="6643907"><a href="/archive/tar/reader_test.go.html#6643735">nb</a></span>&nbsp;<span class="op" id="6643910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6643915"><a href="/archive/tar/reader_test.go.html#6643633">t</a></span><span class="op" id="6643916">.</span><span class="ident" id="6643917">Errorf</span><span class="op" id="6643923">(</span><span class="string" id="6643924">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6643979">,</span>&nbsp;<span class="ident" id="6643981"><a href="/archive/tar/reader_test.go.html#6643654">i</a></span><span class="op" id="6643982">,</span>&nbsp;<span class="ident" id="6643984"><a href="/archive/tar/reader_test.go.html#6643758">sfr</a></span><span class="op" id="6643987">.</span><span class="ident" id="6643988">numBytes</span><span class="op" id="6643996">(</span><span class="op" id="6643997">)</span><span class="op" id="6643998">,</span>&nbsp;<span class="ident" id="6644000"><a href="/archive/tar/reader_test.go.html#6643735">nb</a></span><span class="op" id="6644002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644010">buf</span><span class="op" id="6644013">,</span>&nbsp;<span class="ident" id="6644015">err</span>&nbsp;<span class="op" id="6644019">:=</span>&nbsp;<span class="ident" id="6644022"><a href="/archive/tar/reader_test.go.html#6629850">ioutil</a></span><span class="op" id="6644028">.</span><span class="ident" id="6644029">ReadAll</span><span class="op" id="6644036">(</span><span class="ident" id="6644037"><a href="/archive/tar/reader_test.go.html#6643758">sfr</a></span><span class="op" id="6644040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644044">if</span>&nbsp;<span class="ident" id="6644047"><a href="/archive/tar/reader_test.go.html#6644015">err</a></span>&nbsp;<span class="op" id="6644051">!=</span>&nbsp;<span class="ident" id="6644054">nil</span>&nbsp;<span class="op" id="6644058">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644063"><a href="/archive/tar/reader_test.go.html#6643633">t</a></span><span class="op" id="6644064">.</span><span class="ident" id="6644065">Errorf</span><span class="op" id="6644071">(</span><span class="string" id="6644072">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6644103">,</span>&nbsp;<span class="ident" id="6644105"><a href="/archive/tar/reader_test.go.html#6643654">i</a></span><span class="op" id="6644106">,</span>&nbsp;<span class="ident" id="6644108"><a href="/archive/tar/reader_test.go.html#6644015">err</a></span><span class="op" id="6644111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644115">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644119">if</span>&nbsp;<span class="ident" id="6644122">e</span>&nbsp;<span class="op" id="6644124">:=</span>&nbsp;<span class="ident" id="6644127"><a href="/archive/tar/reader_test.go.html#6643657">test</a></span><span class="op" id="6644131">.</span><span class="ident" id="6644132">expected</span><span class="op" id="6644140">;</span>&nbsp;<span class="op" id="6644142">!</span><span class="ident" id="6644143"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6644148">.</span><span class="ident" id="6644149">Equal</span><span class="op" id="6644154">(</span><span class="ident" id="6644155"><a href="/archive/tar/reader_test.go.html#6644010">buf</a></span><span class="op" id="6644158">,</span>&nbsp;<span class="ident" id="6644160"><a href="/archive/tar/reader_test.go.html#6644122">e</a></span><span class="op" id="6644161">)</span>&nbsp;<span class="op" id="6644163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644168"><a href="/archive/tar/reader_test.go.html#6643633">t</a></span><span class="op" id="6644169">.</span><span class="ident" id="6644170">Errorf</span><span class="op" id="6644176">(</span><span class="string" id="6644177">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6644210">,</span>&nbsp;<span class="ident" id="6644212"><a href="/archive/tar/reader_test.go.html#6643654">i</a></span><span class="op" id="6644213">,</span>&nbsp;<span class="ident" id="6644215"><a href="/archive/tar/reader_test.go.html#6644010">buf</a></span><span class="op" id="6644218">,</span>&nbsp;<span class="ident" id="6644220"><a href="/archive/tar/reader_test.go.html#6644122">e</a></span><span class="op" id="6644221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644225">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644229">if</span>&nbsp;<span class="ident" id="6644232"><a href="/archive/tar/reader_test.go.html#6643758">sfr</a></span><span class="op" id="6644235">.</span><span class="ident" id="6644236">numBytes</span><span class="op" id="6644244">(</span><span class="op" id="6644245">)</span>&nbsp;<span class="op" id="6644247">!=</span>&nbsp;<span class="num" id="6644250">0</span>&nbsp;<span class="op" id="6644252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644257"><a href="/archive/tar/reader_test.go.html#6643633">t</a></span><span class="op" id="6644258">.</span><span class="ident" id="6644259">Errorf</span><span class="op" id="6644265">(</span><span class="string" id="6644266">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="6644326">,</span>&nbsp;<span class="ident" id="6644328"><a href="/archive/tar/reader_test.go.html#6643654">i</a></span><span class="op" id="6644329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644336">}</span><br>
<span class="lineno"></span><span class="op" id="6644338">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="6644341">func</span>&nbsp;<span class="ident" id="6644346">TestSparseIncrementalRead</span><span class="op" id="6644371">(</span><span class="ident" id="6644372">t</span>&nbsp;<span class="op" id="6644374">*</span><span class="ident" id="6644375"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6644382">.</span><span class="ident" id="6644383">T</span><span class="op" id="6644384">)</span>&nbsp;<span class="op" id="6644386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644389">sparseMap</span>&nbsp;<span class="op" id="6644399">:=</span>&nbsp;<span class="op" id="6644402">[</span><span class="op" id="6644403">]</span><span class="ident" id="6644404"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6644415">{</span><span class="op" id="6644416">{</span><span class="num" id="6644417">10</span><span class="op" id="6644419">,</span>&nbsp;<span class="num" id="6644421">2</span><span class="op" id="6644422">}</span><span class="op" id="6644423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644426">sparseData</span>&nbsp;<span class="op" id="6644437">:=</span>&nbsp;<span class="op" id="6644440">[</span><span class="op" id="6644441">]</span><span class="builtintype" id="6644442">byte</span><span class="op" id="6644446">(</span><span class="string" id="6644447">&#34;Go&#34;</span><span class="op" id="6644451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644454">expected</span>&nbsp;<span class="op" id="6644463">:=</span>&nbsp;<span class="string" id="6644466">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644545">r</span>&nbsp;<span class="op" id="6644547">:=</span>&nbsp;<span class="ident" id="6644550"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6644555">.</span><span class="ident" id="6644556">NewReader</span><span class="op" id="6644565">(</span><span class="ident" id="6644566"><a href="/archive/tar/reader_test.go.html#6644426">sparseData</a></span><span class="op" id="6644576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644579">nb</span>&nbsp;<span class="op" id="6644582">:=</span>&nbsp;<span class="ident" id="6644585">int64</span><span class="op" id="6644590">(</span><span class="ident" id="6644591"><a href="/archive/tar/reader_test.go.html#6644545">r</a></span><span class="op" id="6644592">.</span><span class="ident" id="6644593">Len</span><span class="op" id="6644596">(</span><span class="op" id="6644597">)</span><span class="op" id="6644598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644601">sfr</span>&nbsp;<span class="op" id="6644605">:=</span>&nbsp;<span class="op" id="6644608">&amp;</span><span class="ident" id="6644609"><a href="/archive/tar/reader.go.html#6194876">sparseFileReader</a></span><span class="op" id="6644625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644629">rfr</span><span class="op" id="6644632">:</span>&nbsp;<span class="op" id="6644634">&amp;</span><span class="ident" id="6644635"><a href="/archive/tar/reader.go.html#6194656">regFileReader</a></span><span class="op" id="6644648">{</span><span class="ident" id="6644649">r</span><span class="op" id="6644650">:</span>&nbsp;<span class="ident" id="6644652"><a href="/archive/tar/reader_test.go.html#6644545">r</a></span><span class="op" id="6644653">,</span>&nbsp;<span class="ident" id="6644655">nb</span><span class="op" id="6644657">:</span>&nbsp;<span class="ident" id="6644659"><a href="/archive/tar/reader_test.go.html#6644579">nb</a></span><span class="op" id="6644661">}</span><span class="op" id="6644662">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644666">sp</span><span class="op" id="6644668">:</span>&nbsp;&nbsp;<span class="ident" id="6644671"><a href="/archive/tar/reader_test.go.html#6644389">sparseMap</a></span><span class="op" id="6644680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644684">pos</span><span class="op" id="6644687">:</span>&nbsp;<span class="num" id="6644689">0</span><span class="op" id="6644690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644694">tot</span><span class="op" id="6644697">:</span>&nbsp;<span class="ident" id="6644699">int64</span><span class="op" id="6644704">(</span><span class="builtinfunc" id="6644705">len</span><span class="op" id="6644708">(</span><span class="ident" id="6644709"><a href="/archive/tar/reader_test.go.html#6644454">expected</a></span><span class="op" id="6644717">)</span><span class="op" id="6644718">)</span><span class="op" id="6644719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6644726">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6644795">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644843">var</span>&nbsp;<span class="ident" id="6644847">outputBuf</span>&nbsp;<span class="ident" id="6644857"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6644862">.</span><span class="ident" id="6644863">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644871">buf</span>&nbsp;<span class="op" id="6644875">:=</span>&nbsp;<span class="builtinfunc" id="6644878">make</span><span class="op" id="6644882">(</span><span class="op" id="6644883">[</span><span class="op" id="6644884">]</span><span class="builtintype" id="6644885">byte</span><span class="op" id="6644889">,</span>&nbsp;<span class="num" id="6644891">6</span><span class="op" id="6644892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644895">for</span>&nbsp;<span class="op" id="6644899">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644903">n</span><span class="op" id="6644904">,</span>&nbsp;<span class="ident" id="6644906">err</span>&nbsp;<span class="op" id="6644910">:=</span>&nbsp;<span class="ident" id="6644913"><a href="/archive/tar/reader_test.go.html#6644601">sfr</a></span><span class="op" id="6644916">.</span><span class="ident" id="6644917">Read</span><span class="op" id="6644921">(</span><span class="ident" id="6644922"><a href="/archive/tar/reader_test.go.html#6644871">buf</a></span><span class="op" id="6644925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644929">if</span>&nbsp;<span class="ident" id="6644932"><a href="/archive/tar/reader_test.go.html#6644906">err</a></span>&nbsp;<span class="op" id="6644936">==</span>&nbsp;<span class="ident" id="6644939"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6644941">.</span><span class="ident" id="6644942">EOF</span>&nbsp;<span class="op" id="6644946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644951">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6644959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6644963">if</span>&nbsp;<span class="ident" id="6644966"><a href="/archive/tar/reader_test.go.html#6644906">err</a></span>&nbsp;<span class="op" id="6644970">!=</span>&nbsp;<span class="ident" id="6644973">nil</span>&nbsp;<span class="op" id="6644977">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6644982"><a href="/archive/tar/reader_test.go.html#6644372">t</a></span><span class="op" id="6644983">.</span><span class="ident" id="6644984">Errorf</span><span class="op" id="6644990">(</span><span class="string" id="6644991">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6645020">,</span>&nbsp;<span class="ident" id="6645022"><a href="/archive/tar/reader_test.go.html#6644906">err</a></span><span class="op" id="6645025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645033">if</span>&nbsp;<span class="ident" id="6645036"><a href="/archive/tar/reader_test.go.html#6644903">n</a></span>&nbsp;<span class="op" id="6645038">&gt;</span>&nbsp;<span class="num" id="6645040">0</span>&nbsp;<span class="op" id="6645042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645047">_</span><span class="op" id="6645048">,</span>&nbsp;<span class="ident" id="6645050">err</span>&nbsp;<span class="op" id="6645054">:=</span>&nbsp;<span class="ident" id="6645057"><a href="/archive/tar/reader_test.go.html#6644847">outputBuf</a></span><span class="op" id="6645066">.</span><span class="ident" id="6645067">Write</span><span class="op" id="6645072">(</span><span class="ident" id="6645073"><a href="/archive/tar/reader_test.go.html#6644871">buf</a></span><span class="op" id="6645076">[</span><span class="op" id="6645077">:</span><span class="ident" id="6645078"><a href="/archive/tar/reader_test.go.html#6644903">n</a></span><span class="op" id="6645079">]</span><span class="op" id="6645080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645085">if</span>&nbsp;<span class="ident" id="6645088"><a href="/archive/tar/reader_test.go.html#6645050">err</a></span>&nbsp;<span class="op" id="6645092">!=</span>&nbsp;<span class="ident" id="6645095">nil</span>&nbsp;<span class="op" id="6645099">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645105"><a href="/archive/tar/reader_test.go.html#6644372">t</a></span><span class="op" id="6645106">.</span><span class="ident" id="6645107">Errorf</span><span class="op" id="6645113">(</span><span class="string" id="6645114">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="6645144">,</span>&nbsp;<span class="ident" id="6645146"><a href="/archive/tar/reader_test.go.html#6645050">err</a></span><span class="op" id="6645149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645164">got</span>&nbsp;<span class="op" id="6645168">:=</span>&nbsp;<span class="ident" id="6645171"><a href="/archive/tar/reader_test.go.html#6644847">outputBuf</a></span><span class="op" id="6645180">.</span><span class="ident" id="6645181">String</span><span class="op" id="6645187">(</span><span class="op" id="6645188">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645191">if</span>&nbsp;<span class="ident" id="6645194"><a href="/archive/tar/reader_test.go.html#6645164">got</a></span>&nbsp;<span class="op" id="6645198">!=</span>&nbsp;<span class="ident" id="6645201"><a href="/archive/tar/reader_test.go.html#6644454">expected</a></span>&nbsp;<span class="op" id="6645210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645214"><a href="/archive/tar/reader_test.go.html#6644372">t</a></span><span class="op" id="6645215">.</span><span class="ident" id="6645216">Errorf</span><span class="op" id="6645222">(</span><span class="string" id="6645223">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6645247">,</span>&nbsp;<span class="ident" id="6645249"><a href="/archive/tar/reader_test.go.html#6645164">got</a></span><span class="op" id="6645252">,</span>&nbsp;<span class="ident" id="6645254"><a href="/archive/tar/reader_test.go.html#6644454">expected</a></span><span class="op" id="6645262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645265">}</span><br>
<span class="lineno"></span><span class="op" id="6645267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6645270">func</span>&nbsp;<span class="ident" id="6645275">TestReadGNUSparseMap0x1</span><span class="op" id="6645298">(</span><span class="ident" id="6645299">t</span>&nbsp;<span class="op" id="6645301">*</span><span class="ident" id="6645302"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6645309">.</span><span class="ident" id="6645310">T</span><span class="op" id="6645311">)</span>&nbsp;<span class="op" id="6645313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645316">headers</span>&nbsp;<span class="op" id="6645324">:=</span>&nbsp;<span class="keyword" id="6645327">map</span><span class="op" id="6645330">[</span><span class="builtintype" id="6645331">string</span><span class="op" id="6645337">]</span><span class="builtintype" id="6645338">string</span><span class="op" id="6645344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645348"><a href="/archive/tar/reader.go.html#6195179">paxGNUSparseNumBlocks</a></span><span class="op" id="6645369">:</span>&nbsp;<span class="string" id="6645371">&#34;4&#34;</span><span class="op" id="6645374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645378"><a href="/archive/tar/reader.go.html#6195319">paxGNUSparseMap</a></span><span class="op" id="6645393">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6645401">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="6645421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645424">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645427">expected</span>&nbsp;<span class="op" id="6645436">:=</span>&nbsp;<span class="op" id="6645439">[</span><span class="op" id="6645440">]</span><span class="ident" id="6645441"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6645452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645456">{</span><span class="ident" id="6645457">offset</span><span class="op" id="6645463">:</span>&nbsp;<span class="num" id="6645465">0</span><span class="op" id="6645466">,</span>&nbsp;<span class="ident" id="6645468">numBytes</span><span class="op" id="6645476">:</span>&nbsp;<span class="num" id="6645478">5</span><span class="op" id="6645479">}</span><span class="op" id="6645480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645484">{</span><span class="ident" id="6645485">offset</span><span class="op" id="6645491">:</span>&nbsp;<span class="num" id="6645493">10</span><span class="op" id="6645495">,</span>&nbsp;<span class="ident" id="6645497">numBytes</span><span class="op" id="6645505">:</span>&nbsp;<span class="num" id="6645507">5</span><span class="op" id="6645508">}</span><span class="op" id="6645509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645513">{</span><span class="ident" id="6645514">offset</span><span class="op" id="6645520">:</span>&nbsp;<span class="num" id="6645522">20</span><span class="op" id="6645524">,</span>&nbsp;<span class="ident" id="6645526">numBytes</span><span class="op" id="6645534">:</span>&nbsp;<span class="num" id="6645536">5</span><span class="op" id="6645537">}</span><span class="op" id="6645538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645542">{</span><span class="ident" id="6645543">offset</span><span class="op" id="6645549">:</span>&nbsp;<span class="num" id="6645551">30</span><span class="op" id="6645553">,</span>&nbsp;<span class="ident" id="6645555">numBytes</span><span class="op" id="6645563">:</span>&nbsp;<span class="num" id="6645565">5</span><span class="op" id="6645566">}</span><span class="op" id="6645567">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645574">sp</span><span class="op" id="6645576">,</span>&nbsp;<span class="ident" id="6645578">err</span>&nbsp;<span class="op" id="6645582">:=</span>&nbsp;<span class="ident" id="6645585"><a href="/archive/tar/reader.go.html#6212347">readGNUSparseMap0x1</a></span><span class="op" id="6645604">(</span><span class="ident" id="6645605"><a href="/archive/tar/reader_test.go.html#6645316">headers</a></span><span class="op" id="6645612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645615">if</span>&nbsp;<span class="ident" id="6645618"><a href="/archive/tar/reader_test.go.html#6645578">err</a></span>&nbsp;<span class="op" id="6645622">!=</span>&nbsp;<span class="ident" id="6645625">nil</span>&nbsp;<span class="op" id="6645629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645633"><a href="/archive/tar/reader_test.go.html#6645299">t</a></span><span class="op" id="6645634">.</span><span class="ident" id="6645635">Errorf</span><span class="op" id="6645641">(</span><span class="string" id="6645642">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6645664">,</span>&nbsp;<span class="ident" id="6645666"><a href="/archive/tar/reader_test.go.html#6645578">err</a></span><span class="op" id="6645669">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6645675">if</span>&nbsp;<span class="op" id="6645678">!</span><span class="ident" id="6645679"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6645686">.</span><span class="ident" id="6645687">DeepEqual</span><span class="op" id="6645696">(</span><span class="ident" id="6645697"><a href="/archive/tar/reader_test.go.html#6645574">sp</a></span><span class="op" id="6645699">,</span>&nbsp;<span class="ident" id="6645701"><a href="/archive/tar/reader_test.go.html#6645427">expected</a></span><span class="op" id="6645709">)</span>&nbsp;<span class="op" id="6645711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645715"><a href="/archive/tar/reader_test.go.html#6645299">t</a></span><span class="op" id="6645716">.</span><span class="ident" id="6645717">Errorf</span><span class="op" id="6645723">(</span><span class="string" id="6645724">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6645765">,</span>&nbsp;<span class="ident" id="6645767"><a href="/archive/tar/reader_test.go.html#6645574">sp</a></span><span class="op" id="6645769">,</span>&nbsp;<span class="ident" id="6645771"><a href="/archive/tar/reader_test.go.html#6645427">expected</a></span><span class="op" id="6645779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6645782">}</span><br>
<span class="lineno"></span><span class="op" id="6645784">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="6645787">func</span>&nbsp;<span class="ident" id="6645792">TestReadGNUSparseMap1x0</span><span class="op" id="6645815">(</span><span class="ident" id="6645816">t</span>&nbsp;<span class="op" id="6645818">*</span><span class="ident" id="6645819"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6645826">.</span><span class="ident" id="6645827">T</span><span class="op" id="6645828">)</span>&nbsp;<span class="op" id="6645830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6645833">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645917">numEntries</span>&nbsp;<span class="op" id="6645928">:=</span>&nbsp;<span class="num" id="6645931">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645936">expected</span>&nbsp;<span class="op" id="6645945">:=</span>&nbsp;<span class="builtinfunc" id="6645948">make</span><span class="op" id="6645952">(</span><span class="op" id="6645953">[</span><span class="op" id="6645954">]</span><span class="ident" id="6645955"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6645966">,</span>&nbsp;<span class="num" id="6645968">0</span><span class="op" id="6645969">,</span>&nbsp;<span class="ident" id="6645971"><a href="/archive/tar/reader_test.go.html#6645917">numEntries</a></span><span class="op" id="6645981">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6645984">sparseMap</span>&nbsp;<span class="op" id="6645994">:=</span>&nbsp;<span class="builtinfunc" id="6645997">new</span><span class="op" id="6646000">(</span><span class="ident" id="6646001"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6646006">.</span><span class="ident" id="6646007">Buffer</span><span class="op" id="6646013">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646017"><a href="/archive/tar/reader_test.go.html#6629837">fmt</a></span><span class="op" id="6646020">.</span><span class="ident" id="6646021">Fprintf</span><span class="op" id="6646028">(</span><span class="ident" id="6646029"><a href="/archive/tar/reader_test.go.html#6645984">sparseMap</a></span><span class="op" id="6646038">,</span>&nbsp;<span class="string" id="6646040">&#34;%d\n&#34;</span><span class="op" id="6646046">,</span>&nbsp;<span class="ident" id="6646048"><a href="/archive/tar/reader_test.go.html#6645917">numEntries</a></span><span class="op" id="6646058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646061">for</span>&nbsp;<span class="ident" id="6646065">i</span>&nbsp;<span class="op" id="6646067">:=</span>&nbsp;<span class="num" id="6646070">0</span><span class="op" id="6646071">;</span>&nbsp;<span class="ident" id="6646073"><a href="/archive/tar/reader_test.go.html#6646065">i</a></span>&nbsp;<span class="op" id="6646075">&lt;</span>&nbsp;<span class="ident" id="6646077"><a href="/archive/tar/reader_test.go.html#6645917">numEntries</a></span><span class="op" id="6646087">;</span>&nbsp;<span class="ident" id="6646089"><a href="/archive/tar/reader_test.go.html#6646065">i</a></span><span class="op" id="6646090">++</span>&nbsp;<span class="op" id="6646093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646097">offset</span>&nbsp;<span class="op" id="6646104">:=</span>&nbsp;<span class="ident" id="6646107">int64</span><span class="op" id="6646112">(</span><span class="num" id="6646113">2048</span>&nbsp;<span class="op" id="6646118">*</span>&nbsp;<span class="ident" id="6646120"><a href="/archive/tar/reader_test.go.html#6646065">i</a></span><span class="op" id="6646121">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646125">numBytes</span>&nbsp;<span class="op" id="6646134">:=</span>&nbsp;<span class="ident" id="6646137">int64</span><span class="op" id="6646142">(</span><span class="num" id="6646143">1024</span><span class="op" id="6646147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646151"><a href="/archive/tar/reader_test.go.html#6645936">expected</a></span>&nbsp;<span class="op" id="6646160">=</span>&nbsp;<span class="builtinfunc" id="6646162">append</span><span class="op" id="6646168">(</span><span class="ident" id="6646169"><a href="/archive/tar/reader_test.go.html#6645936">expected</a></span><span class="op" id="6646177">,</span>&nbsp;<span class="ident" id="6646179"><a href="/archive/tar/reader.go.html#6208128">sparseEntry</a></span><span class="op" id="6646190">{</span><span class="ident" id="6646191">offset</span><span class="op" id="6646197">:</span>&nbsp;<span class="ident" id="6646199"><a href="/archive/tar/reader_test.go.html#6646097">offset</a></span><span class="op" id="6646205">,</span>&nbsp;<span class="ident" id="6646207">numBytes</span><span class="op" id="6646215">:</span>&nbsp;<span class="ident" id="6646217"><a href="/archive/tar/reader_test.go.html#6646125">numBytes</a></span><span class="op" id="6646225">}</span><span class="op" id="6646226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646230"><a href="/archive/tar/reader_test.go.html#6629837">fmt</a></span><span class="op" id="6646233">.</span><span class="ident" id="6646234">Fprintf</span><span class="op" id="6646241">(</span><span class="ident" id="6646242"><a href="/archive/tar/reader_test.go.html#6645984">sparseMap</a></span><span class="op" id="6646251">,</span>&nbsp;<span class="string" id="6646253">&#34;%d\n%d\n&#34;</span><span class="op" id="6646263">,</span>&nbsp;<span class="ident" id="6646265"><a href="/archive/tar/reader_test.go.html#6646097">offset</a></span><span class="op" id="6646271">,</span>&nbsp;<span class="ident" id="6646273"><a href="/archive/tar/reader_test.go.html#6646125">numBytes</a></span><span class="op" id="6646281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6646288">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646367">headerBlocks</span>&nbsp;<span class="op" id="6646380">:=</span>&nbsp;<span class="op" id="6646383">(</span><span class="ident" id="6646384"><a href="/archive/tar/reader_test.go.html#6645984">sparseMap</a></span><span class="op" id="6646393">.</span><span class="ident" id="6646394">Len</span><span class="op" id="6646397">(</span><span class="op" id="6646398">)</span>&nbsp;<span class="op" id="6646400">+</span>&nbsp;<span class="ident" id="6646402"><a href="/archive/tar/common.go.html#6186250">blockSize</a></span>&nbsp;<span class="op" id="6646412">-</span>&nbsp;<span class="num" id="6646414">1</span><span class="op" id="6646415">)</span>&nbsp;<span class="op" id="6646417">/</span>&nbsp;<span class="ident" id="6646419"><a href="/archive/tar/common.go.html#6186250">blockSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646430">bufLen</span>&nbsp;<span class="op" id="6646437">:=</span>&nbsp;<span class="ident" id="6646440"><a href="/archive/tar/common.go.html#6186250">blockSize</a></span>&nbsp;<span class="op" id="6646450">*</span>&nbsp;<span class="ident" id="6646452"><a href="/archive/tar/reader_test.go.html#6646367">headerBlocks</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646466">buf</span>&nbsp;<span class="op" id="6646470">:=</span>&nbsp;<span class="builtinfunc" id="6646473">make</span><span class="op" id="6646477">(</span><span class="op" id="6646478">[</span><span class="op" id="6646479">]</span><span class="builtintype" id="6646480">byte</span><span class="op" id="6646484">,</span>&nbsp;<span class="ident" id="6646486"><a href="/archive/tar/reader_test.go.html#6646430">bufLen</a></span><span class="op" id="6646492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6646495">copy</span><span class="op" id="6646499">(</span><span class="ident" id="6646500"><a href="/archive/tar/reader_test.go.html#6646466">buf</a></span><span class="op" id="6646503">,</span>&nbsp;<span class="ident" id="6646505"><a href="/archive/tar/reader_test.go.html#6645984">sparseMap</a></span><span class="op" id="6646514">.</span><span class="ident" id="6646515">Bytes</span><span class="op" id="6646520">(</span><span class="op" id="6646521">)</span><span class="op" id="6646522">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6646526">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646567">r</span>&nbsp;<span class="op" id="6646569">:=</span>&nbsp;<span class="ident" id="6646572"><a href="/archive/tar/reader_test.go.html#6629814">bytes</a></span><span class="op" id="6646577">.</span><span class="ident" id="6646578">NewReader</span><span class="op" id="6646587">(</span><span class="ident" id="6646588"><a href="/archive/tar/reader_test.go.html#6646466">buf</a></span><span class="op" id="6646591">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6646595">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646619">sp</span><span class="op" id="6646621">,</span>&nbsp;<span class="ident" id="6646623">err</span>&nbsp;<span class="op" id="6646627">:=</span>&nbsp;<span class="ident" id="6646630"><a href="/archive/tar/reader.go.html#6210094">readGNUSparseMap1x0</a></span><span class="op" id="6646649">(</span><span class="ident" id="6646650"><a href="/archive/tar/reader_test.go.html#6646567">r</a></span><span class="op" id="6646651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646654">if</span>&nbsp;<span class="ident" id="6646657"><a href="/archive/tar/reader_test.go.html#6646623">err</a></span>&nbsp;<span class="op" id="6646661">!=</span>&nbsp;<span class="ident" id="6646664">nil</span>&nbsp;<span class="op" id="6646668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646672"><a href="/archive/tar/reader_test.go.html#6645816">t</a></span><span class="op" id="6646673">.</span><span class="ident" id="6646674">Errorf</span><span class="op" id="6646680">(</span><span class="string" id="6646681">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6646703">,</span>&nbsp;<span class="ident" id="6646705"><a href="/archive/tar/reader_test.go.html#6646623">err</a></span><span class="op" id="6646708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646714">if</span>&nbsp;<span class="op" id="6646717">!</span><span class="ident" id="6646718"><a href="/archive/tar/reader_test.go.html#6629869">reflect</a></span><span class="op" id="6646725">.</span><span class="ident" id="6646726">DeepEqual</span><span class="op" id="6646735">(</span><span class="ident" id="6646736"><a href="/archive/tar/reader_test.go.html#6646619">sp</a></span><span class="op" id="6646738">,</span>&nbsp;<span class="ident" id="6646740"><a href="/archive/tar/reader_test.go.html#6645936">expected</a></span><span class="op" id="6646748">)</span>&nbsp;<span class="op" id="6646750">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646754"><a href="/archive/tar/reader_test.go.html#6645816">t</a></span><span class="op" id="6646755">.</span><span class="ident" id="6646756">Errorf</span><span class="op" id="6646762">(</span><span class="string" id="6646763">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6646804">,</span>&nbsp;<span class="ident" id="6646806"><a href="/archive/tar/reader_test.go.html#6646619">sp</a></span><span class="op" id="6646808">,</span>&nbsp;<span class="ident" id="6646810"><a href="/archive/tar/reader_test.go.html#6645936">expected</a></span><span class="op" id="6646818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646821">}</span><br>
<span class="lineno"></span><span class="op" id="6646823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6646826">func</span>&nbsp;<span class="ident" id="6646831">TestUninitializedRead</span><span class="op" id="6646852">(</span><span class="ident" id="6646853">t</span>&nbsp;<span class="op" id="6646855">*</span><span class="ident" id="6646856"><a href="/archive/tar/reader_test.go.html#6629891">testing</a></span><span class="op" id="6646863">.</span><span class="ident" id="6646864">T</span><span class="op" id="6646865">)</span>&nbsp;<span class="op" id="6646867">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646870">test</span>&nbsp;<span class="op" id="6646875">:=</span>&nbsp;<span class="ident" id="6646878"><a href="/archive/tar/reader_test.go.html#6629996">gnuTarTest</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646890">f</span><span class="op" id="6646891">,</span>&nbsp;<span class="ident" id="6646893">err</span>&nbsp;<span class="op" id="6646897">:=</span>&nbsp;<span class="ident" id="6646900"><a href="/archive/tar/reader_test.go.html#6629863">os</a></span><span class="op" id="6646902">.</span><span class="ident" id="6646903">Open</span><span class="op" id="6646907">(</span><span class="ident" id="6646908"><a href="/archive/tar/reader_test.go.html#6646870">test</a></span><span class="op" id="6646912">.</span><span class="ident" id="6646913">file</span><span class="op" id="6646917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646920">if</span>&nbsp;<span class="ident" id="6646923"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span>&nbsp;<span class="op" id="6646927">!=</span>&nbsp;<span class="ident" id="6646930">nil</span>&nbsp;<span class="op" id="6646934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646938"><a href="/archive/tar/reader_test.go.html#6646853">t</a></span><span class="op" id="6646939">.</span><span class="ident" id="6646940">Fatalf</span><span class="op" id="6646946">(</span><span class="string" id="6646947">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="6646969">,</span>&nbsp;<span class="ident" id="6646971"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span><span class="op" id="6646974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6646977">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6646980">defer</span>&nbsp;<span class="ident" id="6646986"><a href="/archive/tar/reader_test.go.html#6646890">f</a></span><span class="op" id="6646987">.</span><span class="ident" id="6646988">Close</span><span class="op" id="6646993">(</span><span class="op" id="6646994">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6646998">tr</span>&nbsp;<span class="op" id="6647001">:=</span>&nbsp;<span class="ident" id="6647004"><a href="/archive/tar/reader.go.html#6196034">NewReader</a></span><span class="op" id="6647013">(</span><span class="ident" id="6647014"><a href="/archive/tar/reader_test.go.html#6646890">f</a></span><span class="op" id="6647015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6647018">_</span><span class="op" id="6647019">,</span>&nbsp;<span class="ident" id="6647021"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span>&nbsp;<span class="op" id="6647025">=</span>&nbsp;<span class="ident" id="6647027"><a href="/archive/tar/reader_test.go.html#6646998">tr</a></span><span class="op" id="6647029">.</span><span class="ident" id="6647030">Read</span><span class="op" id="6647034">(</span><span class="op" id="6647035">[</span><span class="op" id="6647036">]</span><span class="builtintype" id="6647037">byte</span><span class="op" id="6647041">{</span><span class="op" id="6647042">}</span><span class="op" id="6647043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6647046">if</span>&nbsp;<span class="ident" id="6647049"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span>&nbsp;<span class="op" id="6647053">==</span>&nbsp;<span class="ident" id="6647056">nil</span>&nbsp;<span class="op" id="6647060">||</span>&nbsp;<span class="ident" id="6647063"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span>&nbsp;<span class="op" id="6647067">!=</span>&nbsp;<span class="ident" id="6647070"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6647072">.</span><span class="ident" id="6647073">EOF</span>&nbsp;<span class="op" id="6647077">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6647081"><a href="/archive/tar/reader_test.go.html#6646853">t</a></span><span class="op" id="6647082">.</span><span class="ident" id="6647083">Errorf</span><span class="op" id="6647089">(</span><span class="string" id="6647090">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="6647123">,</span>&nbsp;<span class="ident" id="6647125"><a href="/archive/tar/reader_test.go.html#6646893">err</a></span><span class="op" id="6647128">,</span>&nbsp;<span class="ident" id="6647130"><a href="/archive/tar/reader_test.go.html#6629844">io</a></span><span class="op" id="6647132">.</span><span class="ident" id="6647133">EOF</span><span class="op" id="6647136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6647139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="6647142">}</span>
</div>
</body>
</html>
