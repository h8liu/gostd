<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/format</h2>
<ul>
<li><a href="/gostd/go/format/format.go.html">format.go</a></li>
<li><a href="/gostd/go/format/format_test.go.html">format_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6809620">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6809675">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6809729">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6809780">package</span>&nbsp;<span class="ident" id="6809788">format</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809796">import</span>&nbsp;<span class="op" id="6809803">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809806">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809815">&#34;go/parser&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809828">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809840">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809853">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6809864">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6809874">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6809877">const</span>&nbsp;<span class="ident" id="6809883">testfile</span>&nbsp;<span class="op" id="6809892">=</span>&nbsp;<span class="string" id="6809894">&#34;format_test.go&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6809912">func</span>&nbsp;<span class="ident" id="6809917">diff</span><span class="op" id="6809921">(</span><span class="ident" id="6809922">t</span>&nbsp;<span class="op" id="6809924">*</span><span class="ident" id="6809925">testing</span><span class="op" id="6809932">.</span><span class="ident" id="6809933">T</span><span class="op" id="6809934">,</span>&nbsp;<span class="ident" id="6809936">dst</span><span class="op" id="6809939">,</span>&nbsp;<span class="ident" id="6809941">src</span>&nbsp;<span class="op" id="6809945">[</span><span class="op" id="6809946">]</span><span class="builtintype" id="6809947">byte</span><span class="op" id="6809951">)</span>&nbsp;<span class="op" id="6809953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809956">line</span>&nbsp;<span class="op" id="6809961">:=</span>&nbsp;<span class="num" id="6809964">1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809967">offs</span>&nbsp;<span class="op" id="6809972">:=</span>&nbsp;<span class="num" id="6809975">0</span>&nbsp;<span class="comment" id="6809977">//&nbsp;line&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6809993">for</span>&nbsp;<span class="ident" id="6809997">i</span>&nbsp;<span class="op" id="6809999">:=</span>&nbsp;<span class="num" id="6810002">0</span><span class="op" id="6810003">;</span>&nbsp;<span class="ident" id="6810005">i</span>&nbsp;<span class="op" id="6810007">&lt;</span>&nbsp;<span class="builtinfunc" id="6810009">len</span><span class="op" id="6810012">(</span><span class="ident" id="6810013">dst</span><span class="op" id="6810016">)</span>&nbsp;<span class="op" id="6810018">&amp;&amp;</span>&nbsp;<span class="ident" id="6810021">i</span>&nbsp;<span class="op" id="6810023">&lt;</span>&nbsp;<span class="builtinfunc" id="6810025">len</span><span class="op" id="6810028">(</span><span class="ident" id="6810029">src</span><span class="op" id="6810032">)</span><span class="op" id="6810033">;</span>&nbsp;<span class="ident" id="6810035">i</span><span class="op" id="6810036">++</span>&nbsp;<span class="op" id="6810039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810043">d</span>&nbsp;<span class="op" id="6810045">:=</span>&nbsp;<span class="ident" id="6810048">dst</span><span class="op" id="6810051">[</span><span class="ident" id="6810052">i</span><span class="op" id="6810053">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810057">s</span>&nbsp;<span class="op" id="6810059">:=</span>&nbsp;<span class="ident" id="6810062">src</span><span class="op" id="6810065">[</span><span class="ident" id="6810066">i</span><span class="op" id="6810067">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810071">if</span>&nbsp;<span class="ident" id="6810074">d</span>&nbsp;<span class="op" id="6810076">!=</span>&nbsp;<span class="ident" id="6810079">s</span>&nbsp;<span class="op" id="6810081">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810086">t</span><span class="op" id="6810087">.</span><span class="ident" id="6810088">Errorf</span><span class="op" id="6810094">(</span><span class="string" id="6810095">&#34;dst:%d:&nbsp;%s\n&#34;</span><span class="op" id="6810109">,</span>&nbsp;<span class="ident" id="6810111">line</span><span class="op" id="6810115">,</span>&nbsp;<span class="ident" id="6810117">dst</span><span class="op" id="6810120">[</span><span class="ident" id="6810121">offs</span><span class="op" id="6810125">:</span><span class="ident" id="6810126">i</span><span class="op" id="6810127">+</span><span class="num" id="6810128">1</span><span class="op" id="6810129">]</span><span class="op" id="6810130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810135">t</span><span class="op" id="6810136">.</span><span class="ident" id="6810137">Errorf</span><span class="op" id="6810143">(</span><span class="string" id="6810144">&#34;src:%d:&nbsp;%s\n&#34;</span><span class="op" id="6810158">,</span>&nbsp;<span class="ident" id="6810160">line</span><span class="op" id="6810164">,</span>&nbsp;<span class="ident" id="6810166">src</span><span class="op" id="6810169">[</span><span class="ident" id="6810170">offs</span><span class="op" id="6810174">:</span><span class="ident" id="6810175">i</span><span class="op" id="6810176">+</span><span class="num" id="6810177">1</span><span class="op" id="6810178">]</span><span class="op" id="6810179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810184">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810197">if</span>&nbsp;<span class="ident" id="6810200">s</span>&nbsp;<span class="op" id="6810202">==</span>&nbsp;<span class="string" id="6810205">&#39;\n&#39;</span>&nbsp;<span class="op" id="6810210">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810215">line</span><span class="op" id="6810219">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810225">offs</span>&nbsp;<span class="op" id="6810230">=</span>&nbsp;<span class="ident" id="6810232">i</span>&nbsp;<span class="op" id="6810234">+</span>&nbsp;<span class="num" id="6810236">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810246">if</span>&nbsp;<span class="builtinfunc" id="6810249">len</span><span class="op" id="6810252">(</span><span class="ident" id="6810253">dst</span><span class="op" id="6810256">)</span>&nbsp;<span class="op" id="6810258">!=</span>&nbsp;<span class="builtinfunc" id="6810261">len</span><span class="op" id="6810264">(</span><span class="ident" id="6810265">src</span><span class="op" id="6810268">)</span>&nbsp;<span class="op" id="6810270">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810274">t</span><span class="op" id="6810275">.</span><span class="ident" id="6810276">Errorf</span><span class="op" id="6810282">(</span><span class="string" id="6810283">&#34;len(dst)&nbsp;=&nbsp;%d,&nbsp;len(src)&nbsp;=&nbsp;%d\nsrc&nbsp;=&nbsp;%q&#34;</span><span class="op" id="6810323">,</span>&nbsp;<span class="builtinfunc" id="6810325">len</span><span class="op" id="6810328">(</span><span class="ident" id="6810329">dst</span><span class="op" id="6810332">)</span><span class="op" id="6810333">,</span>&nbsp;<span class="builtinfunc" id="6810335">len</span><span class="op" id="6810338">(</span><span class="ident" id="6810339">src</span><span class="op" id="6810342">)</span><span class="op" id="6810343">,</span>&nbsp;<span class="ident" id="6810345">src</span><span class="op" id="6810348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810351">}</span><br>
<span class="lineno"></span><span class="op" id="6810353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6810356">func</span>&nbsp;<span class="ident" id="6810361">TestNode</span><span class="op" id="6810369">(</span><span class="ident" id="6810370">t</span>&nbsp;<span class="op" id="6810372">*</span><span class="ident" id="6810373">testing</span><span class="op" id="6810380">.</span><span class="ident" id="6810381">T</span><span class="op" id="6810382">)</span>&nbsp;<span class="op" id="6810384">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810387">src</span><span class="op" id="6810390">,</span>&nbsp;<span class="ident" id="6810392">err</span>&nbsp;<span class="op" id="6810396">:=</span>&nbsp;<span class="ident" id="6810399">ioutil</span><span class="op" id="6810405">.</span><span class="ident" id="6810406">ReadFile</span><span class="op" id="6810414">(</span><span class="ident" id="6810415">testfile</span><span class="op" id="6810423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810426">if</span>&nbsp;<span class="ident" id="6810429">err</span>&nbsp;<span class="op" id="6810433">!=</span>&nbsp;<span class="ident" id="6810436">nil</span>&nbsp;<span class="op" id="6810440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810444">t</span><span class="op" id="6810445">.</span><span class="ident" id="6810446">Fatal</span><span class="op" id="6810451">(</span><span class="ident" id="6810452">err</span><span class="op" id="6810455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810462">fset</span>&nbsp;<span class="op" id="6810467">:=</span>&nbsp;<span class="ident" id="6810470">token</span><span class="op" id="6810475">.</span><span class="ident" id="6810476">NewFileSet</span><span class="op" id="6810486">(</span><span class="op" id="6810487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810490">file</span><span class="op" id="6810494">,</span>&nbsp;<span class="ident" id="6810496">err</span>&nbsp;<span class="op" id="6810500">:=</span>&nbsp;<span class="ident" id="6810503">parser</span><span class="op" id="6810509">.</span><span class="ident" id="6810510">ParseFile</span><span class="op" id="6810519">(</span><span class="ident" id="6810520">fset</span><span class="op" id="6810524">,</span>&nbsp;<span class="ident" id="6810526">testfile</span><span class="op" id="6810534">,</span>&nbsp;<span class="ident" id="6810536">src</span><span class="op" id="6810539">,</span>&nbsp;<span class="ident" id="6810541">parser</span><span class="op" id="6810547">.</span><span class="ident" id="6810548">ParseComments</span><span class="op" id="6810561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810564">if</span>&nbsp;<span class="ident" id="6810567">err</span>&nbsp;<span class="op" id="6810571">!=</span>&nbsp;<span class="ident" id="6810574">nil</span>&nbsp;<span class="op" id="6810578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810582">t</span><span class="op" id="6810583">.</span><span class="ident" id="6810584">Fatal</span><span class="op" id="6810589">(</span><span class="ident" id="6810590">err</span><span class="op" id="6810593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810596">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810600">var</span>&nbsp;<span class="ident" id="6810604">buf</span>&nbsp;<span class="ident" id="6810608">bytes</span><span class="op" id="6810613">.</span><span class="ident" id="6810614">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810623">if</span>&nbsp;<span class="ident" id="6810626">err</span>&nbsp;<span class="op" id="6810630">=</span>&nbsp;<span class="ident" id="6810632">Node</span><span class="op" id="6810636">(</span><span class="op" id="6810637">&amp;</span><span class="ident" id="6810638">buf</span><span class="op" id="6810641">,</span>&nbsp;<span class="ident" id="6810643">fset</span><span class="op" id="6810647">,</span>&nbsp;<span class="ident" id="6810649">file</span><span class="op" id="6810653">)</span><span class="op" id="6810654">;</span>&nbsp;<span class="ident" id="6810656">err</span>&nbsp;<span class="op" id="6810660">!=</span>&nbsp;<span class="ident" id="6810663">nil</span>&nbsp;<span class="op" id="6810667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810671">t</span><span class="op" id="6810672">.</span><span class="ident" id="6810673">Fatal</span><span class="op" id="6810678">(</span><span class="string" id="6810679">&#34;Node&nbsp;failed:&#34;</span><span class="op" id="6810693">,</span>&nbsp;<span class="ident" id="6810695">err</span><span class="op" id="6810698">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810705">diff</span><span class="op" id="6810709">(</span><span class="ident" id="6810710">t</span><span class="op" id="6810711">,</span>&nbsp;<span class="ident" id="6810713">buf</span><span class="op" id="6810716">.</span><span class="ident" id="6810717">Bytes</span><span class="op" id="6810722">(</span><span class="op" id="6810723">)</span><span class="op" id="6810724">,</span>&nbsp;<span class="ident" id="6810726">src</span><span class="op" id="6810729">)</span><br>
<span class="lineno"></span><span class="op" id="6810731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6810734">func</span>&nbsp;<span class="ident" id="6810739">TestSource</span><span class="op" id="6810749">(</span><span class="ident" id="6810750">t</span>&nbsp;<span class="op" id="6810752">*</span><span class="ident" id="6810753">testing</span><span class="op" id="6810760">.</span><span class="ident" id="6810761">T</span><span class="op" id="6810762">)</span>&nbsp;<span class="op" id="6810764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810767">src</span><span class="op" id="6810770">,</span>&nbsp;<span class="ident" id="6810772">err</span>&nbsp;<span class="op" id="6810776">:=</span>&nbsp;<span class="ident" id="6810779">ioutil</span><span class="op" id="6810785">.</span><span class="ident" id="6810786">ReadFile</span><span class="op" id="6810794">(</span><span class="ident" id="6810795">testfile</span><span class="op" id="6810803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810806">if</span>&nbsp;<span class="ident" id="6810809">err</span>&nbsp;<span class="op" id="6810813">!=</span>&nbsp;<span class="ident" id="6810816">nil</span>&nbsp;<span class="op" id="6810820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810824">t</span><span class="op" id="6810825">.</span><span class="ident" id="6810826">Fatal</span><span class="op" id="6810831">(</span><span class="ident" id="6810832">err</span><span class="op" id="6810835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810838">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810842">res</span><span class="op" id="6810845">,</span>&nbsp;<span class="ident" id="6810847">err</span>&nbsp;<span class="op" id="6810851">:=</span>&nbsp;<span class="ident" id="6810854">Source</span><span class="op" id="6810860">(</span><span class="ident" id="6810861">src</span><span class="op" id="6810864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6810867">if</span>&nbsp;<span class="ident" id="6810870">err</span>&nbsp;<span class="op" id="6810874">!=</span>&nbsp;<span class="ident" id="6810877">nil</span>&nbsp;<span class="op" id="6810881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810885">t</span><span class="op" id="6810886">.</span><span class="ident" id="6810887">Fatal</span><span class="op" id="6810892">(</span><span class="string" id="6810893">&#34;Source&nbsp;failed:&#34;</span><span class="op" id="6810909">,</span>&nbsp;<span class="ident" id="6810911">err</span><span class="op" id="6810914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6810917">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6810921">diff</span><span class="op" id="6810925">(</span><span class="ident" id="6810926">t</span><span class="op" id="6810927">,</span>&nbsp;<span class="ident" id="6810929">res</span><span class="op" id="6810932">,</span>&nbsp;<span class="ident" id="6810934">src</span><span class="op" id="6810937">)</span><br>
<span class="lineno"></span><span class="op" id="6810939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6810942">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;fail&nbsp;are&nbsp;marked&nbsp;by&nbsp;the&nbsp;prefix&nbsp;&#34;ERROR&#34;.</span><br>
<span class="lineno">75</span><span class="keyword" id="6811016">var</span>&nbsp;<span class="ident" id="6811020">tests</span>&nbsp;<span class="op" id="6811026">=</span>&nbsp;<span class="op" id="6811028">[</span><span class="op" id="6811029">]</span><span class="builtintype" id="6811030">string</span><span class="op" id="6811036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811039">//&nbsp;declaration&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811061">`import&nbsp;&#34;go/format&#34;`</span><span class="op" id="6811081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811084">&#34;var&nbsp;x&nbsp;int&#34;</span><span class="op" id="6811095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811098">&#34;var&nbsp;x&nbsp;int\n\ntype&nbsp;T&nbsp;struct{}&#34;</span><span class="op" id="6811128">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811132">//&nbsp;statement&nbsp;lists</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811152">&#34;x&nbsp;:=&nbsp;0&#34;</span><span class="op" id="6811160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811163">&#34;f(a,&nbsp;b,&nbsp;c)\nvar&nbsp;x&nbsp;int&nbsp;=&nbsp;f(1,&nbsp;2,&nbsp;3)&#34;</span><span class="op" id="6811199">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811203">//&nbsp;indentation,&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811247">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()&#34;</span><span class="op" id="6811267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811270">&#34;\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6811296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811299">&#34;\n\t\t\n\n\tx&nbsp;:=&nbsp;0\n\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6811335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811338">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tgo&nbsp;f()\n\n\n&#34;</span><span class="op" id="6811382">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811385">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\nfoo\n`\n\n\n&#34;</span><span class="op" id="6811442">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6811448">//&nbsp;no&nbsp;indentation&nbsp;added&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811492">&#34;\n\t\t\n\n\t\t\tx&nbsp;:=&nbsp;0\n\t\t\tconst&nbsp;s&nbsp;=&nbsp;`\n\t\tfoo\n`\n\n\n&#34;</span><span class="op" id="6811553">,</span>&nbsp;<span class="comment" id="6811555">//&nbsp;no&nbsp;indentation&nbsp;removed&nbsp;inside&nbsp;raw&nbsp;strings</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811602">//&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811615">&#34;i&nbsp;:=&nbsp;5&nbsp;/*&nbsp;Comment&nbsp;*/&#34;</span><span class="op" id="6811637">,</span>&nbsp;<span class="comment" id="6811639">//&nbsp;Issue&nbsp;5551.</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811656">//&nbsp;erroneous&nbsp;programs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811679">&#34;ERROR1&nbsp;+&nbsp;2&nbsp;+&#34;</span><span class="op" id="6811693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6811696">&#34;ERRORx&nbsp;:=&nbsp;&nbsp;0&#34;</span><span class="op" id="6811710">,</span><br>
<span class="lineno"></span><span class="op" id="6811712">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="6811715">func</span>&nbsp;<span class="ident" id="6811720">String</span><span class="op" id="6811726">(</span><span class="ident" id="6811727">s</span>&nbsp;<span class="builtintype" id="6811729">string</span><span class="op" id="6811735">)</span>&nbsp;<span class="op" id="6811737">(</span><span class="builtintype" id="6811738">string</span><span class="op" id="6811744">,</span>&nbsp;<span class="builtintype" id="6811746">error</span><span class="op" id="6811751">)</span>&nbsp;<span class="op" id="6811753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811756">res</span><span class="op" id="6811759">,</span>&nbsp;<span class="ident" id="6811761">err</span>&nbsp;<span class="op" id="6811765">:=</span>&nbsp;<span class="ident" id="6811768">Source</span><span class="op" id="6811774">(</span><span class="op" id="6811775">[</span><span class="op" id="6811776">]</span><span class="builtintype" id="6811777">byte</span><span class="op" id="6811781">(</span><span class="ident" id="6811782">s</span><span class="op" id="6811783">)</span><span class="op" id="6811784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811787">if</span>&nbsp;<span class="ident" id="6811790">err</span>&nbsp;<span class="op" id="6811794">!=</span>&nbsp;<span class="ident" id="6811797">nil</span>&nbsp;<span class="op" id="6811801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811805">return</span>&nbsp;<span class="string" id="6811812">&#34;&#34;</span><span class="op" id="6811814">,</span>&nbsp;<span class="ident" id="6811816">err</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6811821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811824">return</span>&nbsp;<span class="builtintype" id="6811831">string</span><span class="op" id="6811837">(</span><span class="ident" id="6811838">res</span><span class="op" id="6811841">)</span><span class="op" id="6811842">,</span>&nbsp;<span class="ident" id="6811844">nil</span><br>
<span class="lineno"></span><span class="op" id="6811848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6811851">func</span>&nbsp;<span class="ident" id="6811856">TestPartial</span><span class="op" id="6811867">(</span><span class="ident" id="6811868">t</span>&nbsp;<span class="op" id="6811870">*</span><span class="ident" id="6811871">testing</span><span class="op" id="6811878">.</span><span class="ident" id="6811879">T</span><span class="op" id="6811880">)</span>&nbsp;<span class="op" id="6811882">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811885">for</span>&nbsp;<span class="ident" id="6811889">_</span><span class="op" id="6811890">,</span>&nbsp;<span class="ident" id="6811892">src</span>&nbsp;<span class="op" id="6811896">:=</span>&nbsp;<span class="keyword" id="6811899">range</span>&nbsp;<span class="ident" id="6811905">tests</span>&nbsp;<span class="op" id="6811911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6811915">if</span>&nbsp;<span class="ident" id="6811918">strings</span><span class="op" id="6811925">.</span><span class="ident" id="6811926">HasPrefix</span><span class="op" id="6811935">(</span><span class="ident" id="6811936">src</span><span class="op" id="6811939">,</span>&nbsp;<span class="string" id="6811941">&#34;ERROR&#34;</span><span class="op" id="6811948">)</span>&nbsp;<span class="op" id="6811950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6811955">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;fail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6811983">src</span>&nbsp;<span class="op" id="6811987">=</span>&nbsp;<span class="ident" id="6811989">src</span><span class="op" id="6811992">[</span><span class="num" id="6811993">5</span><span class="op" id="6811994">:</span><span class="op" id="6811995">]</span>&nbsp;<span class="comment" id="6811997">//&nbsp;remove&nbsp;ERROR&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812023">res</span><span class="op" id="6812026">,</span>&nbsp;<span class="ident" id="6812028">err</span>&nbsp;<span class="op" id="6812032">:=</span>&nbsp;<span class="ident" id="6812035">String</span><span class="op" id="6812041">(</span><span class="ident" id="6812042">src</span><span class="op" id="6812045">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812050">if</span>&nbsp;<span class="ident" id="6812053">err</span>&nbsp;<span class="op" id="6812057">==</span>&nbsp;<span class="ident" id="6812060">nil</span>&nbsp;<span class="op" id="6812064">&amp;&amp;</span>&nbsp;<span class="ident" id="6812067">res</span>&nbsp;<span class="op" id="6812071">==</span>&nbsp;<span class="ident" id="6812074">src</span>&nbsp;<span class="op" id="6812078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812084">t</span><span class="op" id="6812085">.</span><span class="ident" id="6812086">Errorf</span><span class="op" id="6812092">(</span><span class="string" id="6812093">&#34;formatting&nbsp;succeeded&nbsp;but&nbsp;was&nbsp;expected&nbsp;to&nbsp;fail:\n%q&#34;</span><span class="op" id="6812145">,</span>&nbsp;<span class="ident" id="6812147">src</span><span class="op" id="6812150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812159">}</span>&nbsp;<span class="keyword" id="6812161">else</span>&nbsp;<span class="op" id="6812166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6812171">//&nbsp;test&nbsp;expected&nbsp;to&nbsp;succeed</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812202">res</span><span class="op" id="6812205">,</span>&nbsp;<span class="ident" id="6812207">err</span>&nbsp;<span class="op" id="6812211">:=</span>&nbsp;<span class="ident" id="6812214">String</span><span class="op" id="6812220">(</span><span class="ident" id="6812221">src</span><span class="op" id="6812224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6812229">if</span>&nbsp;<span class="ident" id="6812232">err</span>&nbsp;<span class="op" id="6812236">!=</span>&nbsp;<span class="ident" id="6812239">nil</span>&nbsp;<span class="op" id="6812243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812249">t</span><span class="op" id="6812250">.</span><span class="ident" id="6812251">Errorf</span><span class="op" id="6812257">(</span><span class="string" id="6812258">&#34;formatting&nbsp;failed&nbsp;(%s):\n%q&#34;</span><span class="op" id="6812287">,</span>&nbsp;<span class="ident" id="6812289">err</span><span class="op" id="6812292">,</span>&nbsp;<span class="ident" id="6812294">src</span><span class="op" id="6812297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812302">}</span>&nbsp;<span class="keyword" id="6812304">else</span>&nbsp;<span class="keyword" id="6812309">if</span>&nbsp;<span class="ident" id="6812312">res</span>&nbsp;<span class="op" id="6812316">!=</span>&nbsp;<span class="ident" id="6812319">src</span>&nbsp;<span class="op" id="6812323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6812329">t</span><span class="op" id="6812330">.</span><span class="ident" id="6812331">Errorf</span><span class="op" id="6812337">(</span><span class="string" id="6812338">&#34;formatting&nbsp;incorrect:\nsource:&nbsp;%q\nresult:&nbsp;%q&#34;</span><span class="op" id="6812385">,</span>&nbsp;<span class="ident" id="6812387">src</span><span class="op" id="6812390">,</span>&nbsp;<span class="ident" id="6812392">res</span><span class="op" id="6812395">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6812407">}</span><br>
<span class="lineno"></span><span class="op" id="6812409">}</span>
</div>
</body>
</html>
