<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1403793">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1403848">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1403902">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1403953">//&nbsp;Read&nbsp;static&nbsp;host/IP&nbsp;entries&nbsp;from&nbsp;/etc/hosts.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1404002">package</span>&nbsp;<span class="ident" id="1404010">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1404015">import</span>&nbsp;<span class="op" id="1404022">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1404025">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1404033">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="1404040">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1404043">const</span>&nbsp;<span class="ident" id="1404049">cacheMaxAge</span>&nbsp;<span class="op" id="1404061">=</span>&nbsp;<span class="num" id="1404063">5</span>&nbsp;<span class="op" id="1404065">*</span>&nbsp;<span class="ident" id="1404067"><a href="/net/hosts.go.html#1404033">time</a></span><span class="op" id="1404071">.</span><span class="ident" id="1404072">Minute</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1404080">//&nbsp;hostsPath&nbsp;points&nbsp;to&nbsp;the&nbsp;file&nbsp;with&nbsp;static&nbsp;IP/address&nbsp;entries.</span><br>
<span class="lineno"></span><span class="keyword" id="1404144">var</span>&nbsp;<span class="ident" id="1404148">hostsPath</span>&nbsp;<span class="op" id="1404158">=</span>&nbsp;<span class="string" id="1404160">&#34;/etc/hosts&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1404174">//&nbsp;Simple&nbsp;cache.</span><br>
<span class="lineno">20</span><span class="keyword" id="1404191">var</span>&nbsp;<span class="ident" id="1404195">hosts</span>&nbsp;<span class="keyword" id="1404201">struct</span>&nbsp;<span class="op" id="1404208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404211"><a href="/net/hosts.go.html#1404025">sync</a></span><span class="op" id="1404215">.</span><span class="ident" id="1404216">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404223">byName</span>&nbsp;<span class="keyword" id="1404230">map</span><span class="op" id="1404233">[</span><span class="builtintype" id="1404234">string</span><span class="op" id="1404240">]</span><span class="op" id="1404241">[</span><span class="op" id="1404242">]</span><span class="builtintype" id="1404243">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404251">byAddr</span>&nbsp;<span class="keyword" id="1404258">map</span><span class="op" id="1404261">[</span><span class="builtintype" id="1404262">string</span><span class="op" id="1404268">]</span><span class="op" id="1404269">[</span><span class="op" id="1404270">]</span><span class="builtintype" id="1404271">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404279">expire</span>&nbsp;<span class="ident" id="1404286"><a href="/net/hosts.go.html#1404033">time</a></span><span class="op" id="1404290">.</span><span class="ident" id="1404291">Time</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404297">path</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1404304">string</span><br>
<span class="lineno"></span><span class="op" id="1404311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1404314">func</span>&nbsp;<span class="ident" id="1404319">readHosts</span><span class="op" id="1404328">(</span><span class="op" id="1404329">)</span>&nbsp;<span class="op" id="1404331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404334">now</span>&nbsp;<span class="op" id="1404338">:=</span>&nbsp;<span class="ident" id="1404341"><a href="/net/hosts.go.html#1404033">time</a></span><span class="op" id="1404345">.</span><span class="ident" id="1404346">Now</span><span class="op" id="1404349">(</span><span class="op" id="1404350">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404353">hp</span>&nbsp;<span class="op" id="1404356">:=</span>&nbsp;<span class="ident" id="1404359"><a href="/net/hosts.go.html#1404148">hostsPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404370">if</span>&nbsp;<span class="builtinfunc" id="1404373">len</span><span class="op" id="1404376">(</span><span class="ident" id="1404377"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1404382">.</span><span class="ident" id="1404383">byName</span><span class="op" id="1404389">)</span>&nbsp;<span class="op" id="1404391">==</span>&nbsp;<span class="num" id="1404394">0</span>&nbsp;<span class="op" id="1404396">||</span>&nbsp;<span class="ident" id="1404399"><a href="/net/hosts.go.html#1404334">now</a></span><span class="op" id="1404402">.</span><span class="ident" id="1404403">After</span><span class="op" id="1404408">(</span><span class="ident" id="1404409"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1404414">.</span><span class="ident" id="1404415">expire</span><span class="op" id="1404421">)</span>&nbsp;<span class="op" id="1404423">||</span>&nbsp;<span class="ident" id="1404426"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1404431">.</span><span class="ident" id="1404432">path</span>&nbsp;<span class="op" id="1404437">!=</span>&nbsp;<span class="ident" id="1404440"><a href="/net/hosts.go.html#1404353">hp</a></span>&nbsp;<span class="op" id="1404443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404447">hs</span>&nbsp;<span class="op" id="1404450">:=</span>&nbsp;<span class="builtinfunc" id="1404453">make</span><span class="op" id="1404457">(</span><span class="keyword" id="1404458">map</span><span class="op" id="1404461">[</span><span class="builtintype" id="1404462">string</span><span class="op" id="1404468">]</span><span class="op" id="1404469">[</span><span class="op" id="1404470">]</span><span class="builtintype" id="1404471">string</span><span class="op" id="1404477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404481">is</span>&nbsp;<span class="op" id="1404484">:=</span>&nbsp;<span class="builtinfunc" id="1404487">make</span><span class="op" id="1404491">(</span><span class="keyword" id="1404492">map</span><span class="op" id="1404495">[</span><span class="builtintype" id="1404496">string</span><span class="op" id="1404502">]</span><span class="op" id="1404503">[</span><span class="op" id="1404504">]</span><span class="builtintype" id="1404505">string</span><span class="op" id="1404511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404515">var</span>&nbsp;<span class="ident" id="1404519">file</span>&nbsp;<span class="op" id="1404524">*</span><span class="ident" id="1404525"><a href="/net/parse.go.html#1475906">file</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404532">if</span>&nbsp;<span class="ident" id="1404535"><a href="/net/hosts.go.html#1404519">file</a></span><span class="op" id="1404539">,</span>&nbsp;<span class="ident" id="1404541">_</span>&nbsp;<span class="op" id="1404543">=</span>&nbsp;<span class="ident" id="1404545"><a href="/net/parse.go.html#1476797">open</a></span><span class="op" id="1404549">(</span><span class="ident" id="1404550"><a href="/net/hosts.go.html#1404353">hp</a></span><span class="op" id="1404552">)</span><span class="op" id="1404553">;</span>&nbsp;<span class="ident" id="1404555"><a href="/net/hosts.go.html#1404519">file</a></span>&nbsp;<span class="op" id="1404560">==</span>&nbsp;<span class="ident" id="1404563">nil</span>&nbsp;<span class="op" id="1404567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404572">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404585">for</span>&nbsp;<span class="ident" id="1404589">line</span><span class="op" id="1404593">,</span>&nbsp;<span class="ident" id="1404595">ok</span>&nbsp;<span class="op" id="1404598">:=</span>&nbsp;<span class="ident" id="1404601"><a href="/net/hosts.go.html#1404519">file</a></span><span class="op" id="1404605">.</span><span class="ident" id="1404606">readLine</span><span class="op" id="1404614">(</span><span class="op" id="1404615">)</span><span class="op" id="1404616">;</span>&nbsp;<span class="ident" id="1404618"><a href="/net/hosts.go.html#1404595">ok</a></span><span class="op" id="1404620">;</span>&nbsp;<span class="ident" id="1404622"><a href="/net/hosts.go.html#1404589">line</a></span><span class="op" id="1404626">,</span>&nbsp;<span class="ident" id="1404628"><a href="/net/hosts.go.html#1404595">ok</a></span>&nbsp;<span class="op" id="1404631">=</span>&nbsp;<span class="ident" id="1404633"><a href="/net/hosts.go.html#1404519">file</a></span><span class="op" id="1404637">.</span><span class="ident" id="1404638">readLine</span><span class="op" id="1404646">(</span><span class="op" id="1404647">)</span>&nbsp;<span class="op" id="1404649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404654">if</span>&nbsp;<span class="ident" id="1404657">i</span>&nbsp;<span class="op" id="1404659">:=</span>&nbsp;<span class="ident" id="1404662"><a href="/net/parse.go.html#1476969">byteIndex</a></span><span class="op" id="1404671">(</span><span class="ident" id="1404672"><a href="/net/hosts.go.html#1404589">line</a></span><span class="op" id="1404676">,</span>&nbsp;<span class="string" id="1404678">&#39;#&#39;</span><span class="op" id="1404681">)</span><span class="op" id="1404682">;</span>&nbsp;<span class="ident" id="1404684"><a href="/net/hosts.go.html#1404657">i</a></span>&nbsp;<span class="op" id="1404686">&gt;=</span>&nbsp;<span class="num" id="1404689">0</span>&nbsp;<span class="op" id="1404691">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404697">//&nbsp;Discard&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404722"><a href="/net/hosts.go.html#1404589">line</a></span>&nbsp;<span class="op" id="1404727">=</span>&nbsp;<span class="ident" id="1404729"><a href="/net/hosts.go.html#1404589">line</a></span><span class="op" id="1404733">[</span><span class="num" id="1404734">0</span><span class="op" id="1404735">:</span><span class="ident" id="1404736"><a href="/net/hosts.go.html#1404657">i</a></span><span class="op" id="1404737">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404747">f</span>&nbsp;<span class="op" id="1404749">:=</span>&nbsp;<span class="ident" id="1404752"><a href="/net/parse.go.html#1477633">getFields</a></span><span class="op" id="1404761">(</span><span class="ident" id="1404762"><a href="/net/hosts.go.html#1404589">line</a></span><span class="op" id="1404766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404771">if</span>&nbsp;<span class="builtinfunc" id="1404774">len</span><span class="op" id="1404777">(</span><span class="ident" id="1404778"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404779">)</span>&nbsp;<span class="op" id="1404781">&lt;</span>&nbsp;<span class="num" id="1404783">2</span>&nbsp;<span class="op" id="1404785">||</span>&nbsp;<span class="ident" id="1404788"><a href="/net/ip.go.html#1430775">ParseIP</a></span><span class="op" id="1404795">(</span><span class="ident" id="1404796"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404797">[</span><span class="num" id="1404798">0</span><span class="op" id="1404799">]</span><span class="op" id="1404800">)</span>&nbsp;<span class="op" id="1404802">==</span>&nbsp;<span class="ident" id="1404805">nil</span>&nbsp;<span class="op" id="1404809">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404815">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1404832">for</span>&nbsp;<span class="ident" id="1404836">i</span>&nbsp;<span class="op" id="1404838">:=</span>&nbsp;<span class="num" id="1404841">1</span><span class="op" id="1404842">;</span>&nbsp;<span class="ident" id="1404844"><a href="/net/hosts.go.html#1404836">i</a></span>&nbsp;<span class="op" id="1404846">&lt;</span>&nbsp;<span class="builtinfunc" id="1404848">len</span><span class="op" id="1404851">(</span><span class="ident" id="1404852"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404853">)</span><span class="op" id="1404854">;</span>&nbsp;<span class="ident" id="1404856"><a href="/net/hosts.go.html#1404836">i</a></span><span class="op" id="1404857">++</span>&nbsp;<span class="op" id="1404860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404866">h</span>&nbsp;<span class="op" id="1404868">:=</span>&nbsp;<span class="ident" id="1404871"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404872">[</span><span class="ident" id="1404873"><a href="/net/hosts.go.html#1404836">i</a></span><span class="op" id="1404874">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404880"><a href="/net/hosts.go.html#1404447">hs</a></span><span class="op" id="1404882">[</span><span class="ident" id="1404883"><a href="/net/hosts.go.html#1404866">h</a></span><span class="op" id="1404884">]</span>&nbsp;<span class="op" id="1404886">=</span>&nbsp;<span class="builtinfunc" id="1404888">append</span><span class="op" id="1404894">(</span><span class="ident" id="1404895"><a href="/net/hosts.go.html#1404447">hs</a></span><span class="op" id="1404897">[</span><span class="ident" id="1404898"><a href="/net/hosts.go.html#1404866">h</a></span><span class="op" id="1404899">]</span><span class="op" id="1404900">,</span>&nbsp;<span class="ident" id="1404902"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404903">[</span><span class="num" id="1404904">0</span><span class="op" id="1404905">]</span><span class="op" id="1404906">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404912"><a href="/net/hosts.go.html#1404481">is</a></span><span class="op" id="1404914">[</span><span class="ident" id="1404915"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404916">[</span><span class="num" id="1404917">0</span><span class="op" id="1404918">]</span><span class="op" id="1404919">]</span>&nbsp;<span class="op" id="1404921">=</span>&nbsp;<span class="builtinfunc" id="1404923">append</span><span class="op" id="1404929">(</span><span class="ident" id="1404930"><a href="/net/hosts.go.html#1404481">is</a></span><span class="op" id="1404932">[</span><span class="ident" id="1404933"><a href="/net/hosts.go.html#1404747">f</a></span><span class="op" id="1404934">[</span><span class="num" id="1404935">0</span><span class="op" id="1404936">]</span><span class="op" id="1404937">]</span><span class="op" id="1404938">,</span>&nbsp;<span class="ident" id="1404940"><a href="/net/hosts.go.html#1404866">h</a></span><span class="op" id="1404941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1404950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1404954">//&nbsp;Update&nbsp;the&nbsp;data&nbsp;cache.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1404982"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1404987">.</span><span class="ident" id="1404988">expire</span>&nbsp;<span class="op" id="1404995">=</span>&nbsp;<span class="ident" id="1404997"><a href="/net/hosts.go.html#1404334">now</a></span><span class="op" id="1405000">.</span><span class="ident" id="1405001">Add</span><span class="op" id="1405004">(</span><span class="ident" id="1405005"><a href="/net/hosts.go.html#1404049">cacheMaxAge</a></span><span class="op" id="1405016">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405020"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405025">.</span><span class="ident" id="1405026">path</span>&nbsp;<span class="op" id="1405031">=</span>&nbsp;<span class="ident" id="1405033"><a href="/net/hosts.go.html#1404353">hp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405038"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405043">.</span><span class="ident" id="1405044">byName</span>&nbsp;<span class="op" id="1405051">=</span>&nbsp;<span class="ident" id="1405053"><a href="/net/hosts.go.html#1404447">hs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405058"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405063">.</span><span class="ident" id="1405064">byAddr</span>&nbsp;<span class="op" id="1405071">=</span>&nbsp;<span class="ident" id="1405073"><a href="/net/hosts.go.html#1404481">is</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405078"><a href="/net/hosts.go.html#1404519">file</a></span><span class="op" id="1405082">.</span><span class="builtinfunc" id="1405083">close</span><span class="op" id="1405088">(</span><span class="op" id="1405089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405092">}</span><br>
<span class="lineno">60</span><span class="op" id="1405094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1405097">//&nbsp;lookupStaticHost&nbsp;looks&nbsp;up&nbsp;the&nbsp;addresses&nbsp;for&nbsp;the&nbsp;given&nbsp;host&nbsp;from&nbsp;/etc/hosts.</span><br>
<span class="lineno"></span><span class="keyword" id="1405176">func</span>&nbsp;<span class="ident" id="1405181">lookupStaticHost</span><span class="op" id="1405197">(</span><span class="ident" id="1405198">host</span>&nbsp;<span class="builtintype" id="1405203">string</span><span class="op" id="1405209">)</span>&nbsp;<span class="op" id="1405211">[</span><span class="op" id="1405212">]</span><span class="builtintype" id="1405213">string</span>&nbsp;<span class="op" id="1405220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405223"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405228">.</span><span class="ident" id="1405229">Lock</span><span class="op" id="1405233">(</span><span class="op" id="1405234">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405237">defer</span>&nbsp;<span class="ident" id="1405243"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405248">.</span><span class="ident" id="1405249">Unlock</span><span class="op" id="1405255">(</span><span class="op" id="1405256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405259"><a href="/net/hosts.go.html#1404319">readHosts</a></span><span class="op" id="1405268">(</span><span class="op" id="1405269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405272">if</span>&nbsp;<span class="builtinfunc" id="1405275">len</span><span class="op" id="1405278">(</span><span class="ident" id="1405279"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405284">.</span><span class="ident" id="1405285">byName</span><span class="op" id="1405291">)</span>&nbsp;<span class="op" id="1405293">!=</span>&nbsp;<span class="num" id="1405296">0</span>&nbsp;<span class="op" id="1405298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405302">if</span>&nbsp;<span class="ident" id="1405305">ips</span><span class="op" id="1405308">,</span>&nbsp;<span class="ident" id="1405310">ok</span>&nbsp;<span class="op" id="1405313">:=</span>&nbsp;<span class="ident" id="1405316"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405321">.</span><span class="ident" id="1405322">byName</span><span class="op" id="1405328">[</span><span class="ident" id="1405329"><a href="/net/hosts.go.html#1405198">host</a></span><span class="op" id="1405333">]</span><span class="op" id="1405334">;</span>&nbsp;<span class="ident" id="1405336"><a href="/net/hosts.go.html#1405310">ok</a></span>&nbsp;<span class="op" id="1405339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405344">return</span>&nbsp;<span class="ident" id="1405351"><a href="/net/hosts.go.html#1405305">ips</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405363">return</span>&nbsp;<span class="ident" id="1405370">nil</span><br>
<span class="lineno"></span><span class="op" id="1405374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="1405377">//&nbsp;lookupStaticAddr&nbsp;looks&nbsp;up&nbsp;the&nbsp;hosts&nbsp;for&nbsp;the&nbsp;given&nbsp;address&nbsp;from&nbsp;/etc/hosts.</span><br>
<span class="lineno"></span><span class="keyword" id="1405455">func</span>&nbsp;<span class="ident" id="1405460">lookupStaticAddr</span><span class="op" id="1405476">(</span><span class="ident" id="1405477">addr</span>&nbsp;<span class="builtintype" id="1405482">string</span><span class="op" id="1405488">)</span>&nbsp;<span class="op" id="1405490">[</span><span class="op" id="1405491">]</span><span class="builtintype" id="1405492">string</span>&nbsp;<span class="op" id="1405499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405502"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405507">.</span><span class="ident" id="1405508">Lock</span><span class="op" id="1405512">(</span><span class="op" id="1405513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405516">defer</span>&nbsp;<span class="ident" id="1405522"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405527">.</span><span class="ident" id="1405528">Unlock</span><span class="op" id="1405534">(</span><span class="op" id="1405535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1405538"><a href="/net/hosts.go.html#1404319">readHosts</a></span><span class="op" id="1405547">(</span><span class="op" id="1405548">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405551">if</span>&nbsp;<span class="builtinfunc" id="1405554">len</span><span class="op" id="1405557">(</span><span class="ident" id="1405558"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405563">.</span><span class="ident" id="1405564">byAddr</span><span class="op" id="1405570">)</span>&nbsp;<span class="op" id="1405572">!=</span>&nbsp;<span class="num" id="1405575">0</span>&nbsp;<span class="op" id="1405577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405581">if</span>&nbsp;<span class="ident" id="1405584">hosts</span><span class="op" id="1405589">,</span>&nbsp;<span class="ident" id="1405591">ok</span>&nbsp;<span class="op" id="1405594">:=</span>&nbsp;<span class="ident" id="1405597"><a href="/net/hosts.go.html#1404195">hosts</a></span><span class="op" id="1405602">.</span><span class="ident" id="1405603">byAddr</span><span class="op" id="1405609">[</span><span class="ident" id="1405610"><a href="/net/hosts.go.html#1405477">addr</a></span><span class="op" id="1405614">]</span><span class="op" id="1405615">;</span>&nbsp;<span class="ident" id="1405617"><a href="/net/hosts.go.html#1405591">ok</a></span>&nbsp;<span class="op" id="1405620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405625">return</span>&nbsp;<span class="ident" id="1405632"><a href="/net/hosts.go.html#1405584">hosts</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1405643">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1405646">return</span>&nbsp;<span class="ident" id="1405653">nil</span><br>
<span class="lineno"></span><span class="op" id="1405657">}</span>
</div>
</body>
</html>
