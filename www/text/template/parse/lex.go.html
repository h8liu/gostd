<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4483384">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4483439">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4483493">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4483544">package</span>&nbsp;<span class="ident" id="4483552">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4483559">import</span>&nbsp;<span class="op" id="4483566">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4483569">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4483576">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4483587">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4483598">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4483613">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4483616">//&nbsp;item&nbsp;represents&nbsp;a&nbsp;token&nbsp;or&nbsp;text&nbsp;string&nbsp;returned&nbsp;from&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">15</span><span class="keyword" id="4483685">type</span>&nbsp;<span class="ident" id="4483690">item</span>&nbsp;<span class="keyword" id="4483695">struct</span>&nbsp;<span class="op" id="4483702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483705">typ</span>&nbsp;<span class="ident" id="4483709">itemType</span>&nbsp;<span class="comment" id="4483718">//&nbsp;The&nbsp;type&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483745">pos</span>&nbsp;<span class="ident" id="4483749">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4483758">//&nbsp;The&nbsp;starting&nbsp;position,&nbsp;in&nbsp;bytes,&nbsp;of&nbsp;this&nbsp;item&nbsp;in&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4483829">val</span>&nbsp;<span class="builtintype" id="4483833">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4483842">//&nbsp;The&nbsp;value&nbsp;of&nbsp;this&nbsp;item.</span><br>
<span class="lineno"></span><span class="op" id="4483869">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="4483872">func</span>&nbsp;<span class="op" id="4483877">(</span><span class="ident" id="4483878">i</span>&nbsp;<span class="ident" id="4483880">item</span><span class="op" id="4483884">)</span>&nbsp;<span class="ident" id="4483886">String</span><span class="op" id="4483892">(</span><span class="op" id="4483893">)</span>&nbsp;<span class="builtintype" id="4483895">string</span>&nbsp;<span class="op" id="4483902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483905">switch</span>&nbsp;<span class="op" id="4483912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483915">case</span>&nbsp;<span class="ident" id="4483920">i</span><span class="op" id="4483921">.</span><span class="ident" id="4483922">typ</span>&nbsp;<span class="op" id="4483926">==</span>&nbsp;<span class="ident" id="4483929">itemEOF</span><span class="op" id="4483936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483940">return</span>&nbsp;<span class="string" id="4483947">&#34;EOF&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483954">case</span>&nbsp;<span class="ident" id="4483959">i</span><span class="op" id="4483960">.</span><span class="ident" id="4483961">typ</span>&nbsp;<span class="op" id="4483965">==</span>&nbsp;<span class="ident" id="4483968">itemError</span><span class="op" id="4483977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483981">return</span>&nbsp;<span class="ident" id="4483988">i</span><span class="op" id="4483989">.</span><span class="ident" id="4483990">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4483995">case</span>&nbsp;<span class="ident" id="4484000">i</span><span class="op" id="4484001">.</span><span class="ident" id="4484002">typ</span>&nbsp;<span class="op" id="4484006">&gt;</span>&nbsp;<span class="ident" id="4484008">itemKeyword</span><span class="op" id="4484019">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484023">return</span>&nbsp;<span class="ident" id="4484030">fmt</span><span class="op" id="4484033">.</span><span class="ident" id="4484034">Sprintf</span><span class="op" id="4484041">(</span><span class="string" id="4484042">&#34;&lt;%s&gt;&#34;</span><span class="op" id="4484048">,</span>&nbsp;<span class="ident" id="4484050">i</span><span class="op" id="4484051">.</span><span class="ident" id="4484052">val</span><span class="op" id="4484055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484058">case</span>&nbsp;<span class="builtinfunc" id="4484063">len</span><span class="op" id="4484066">(</span><span class="ident" id="4484067">i</span><span class="op" id="4484068">.</span><span class="ident" id="4484069">val</span><span class="op" id="4484072">)</span>&nbsp;<span class="op" id="4484074">&gt;</span>&nbsp;<span class="num" id="4484076">10</span><span class="op" id="4484078">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484082">return</span>&nbsp;<span class="ident" id="4484089">fmt</span><span class="op" id="4484092">.</span><span class="ident" id="4484093">Sprintf</span><span class="op" id="4484100">(</span><span class="string" id="4484101">&#34;%.10q...&#34;</span><span class="op" id="4484111">,</span>&nbsp;<span class="ident" id="4484113">i</span><span class="op" id="4484114">.</span><span class="ident" id="4484115">val</span><span class="op" id="4484118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4484121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4484124">return</span>&nbsp;<span class="ident" id="4484131">fmt</span><span class="op" id="4484134">.</span><span class="ident" id="4484135">Sprintf</span><span class="op" id="4484142">(</span><span class="string" id="4484143">&#34;%q&#34;</span><span class="op" id="4484147">,</span>&nbsp;<span class="ident" id="4484149">i</span><span class="op" id="4484150">.</span><span class="ident" id="4484151">val</span><span class="op" id="4484154">)</span><br>
<span class="lineno"></span><span class="op" id="4484156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4484159">//&nbsp;itemType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;lex&nbsp;items.</span><br>
<span class="lineno"></span><span class="keyword" id="4484205">type</span>&nbsp;<span class="ident" id="4484210">itemType</span>&nbsp;<span class="builtintype" id="4484219">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4484224">const</span>&nbsp;<span class="op" id="4484230">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484233">itemError</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4484250">itemType</span>&nbsp;<span class="op" id="4484259">=</span>&nbsp;<span class="ident" id="4484261">iota</span>&nbsp;<span class="comment" id="4484266">//&nbsp;error&nbsp;occurred;&nbsp;value&nbsp;is&nbsp;text&nbsp;of&nbsp;error</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484309">itemBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484342">//&nbsp;boolean&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484363">itemChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484396">//&nbsp;printable&nbsp;ASCII&nbsp;character;&nbsp;grab&nbsp;bag&nbsp;for&nbsp;comma&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484451">itemCharConstant</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484484">//&nbsp;character&nbsp;constant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484507">itemComplex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484540">//&nbsp;complex&nbsp;constant&nbsp;(1+2i);&nbsp;imaginary&nbsp;is&nbsp;just&nbsp;a&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484596">itemColonEquals</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484629">//&nbsp;colon-equals&nbsp;(&#39;:=&#39;)&nbsp;introducing&nbsp;a&nbsp;declaration</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484679">itemEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484688">itemField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484703">//&nbsp;alphanumeric&nbsp;identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484749">itemIdentifier</span>&nbsp;<span class="comment" id="4484764">//&nbsp;alphanumeric&nbsp;identifier&nbsp;not&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484814">itemLeftDelim</span>&nbsp;&nbsp;<span class="comment" id="4484829">//&nbsp;left&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484855">itemLeftParen</span>&nbsp;&nbsp;<span class="comment" id="4484870">//&nbsp;&#39;(&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484892">itemNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484907">//&nbsp;simple&nbsp;number,&nbsp;including&nbsp;imaginary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484946">itemPipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4484961">//&nbsp;pipe&nbsp;symbol</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4484977">itemRawString</span>&nbsp;&nbsp;<span class="comment" id="4484992">//&nbsp;raw&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485032">itemRightDelim</span>&nbsp;<span class="comment" id="4485047">//&nbsp;right&nbsp;action&nbsp;delimiter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485074">itemRightParen</span>&nbsp;<span class="comment" id="4485089">//&nbsp;&#39;)&#39;&nbsp;inside&nbsp;action</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485111">itemSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485126">//&nbsp;run&nbsp;of&nbsp;spaces&nbsp;separating&nbsp;arguments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485165">itemString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485180">//&nbsp;quoted&nbsp;string&nbsp;(includes&nbsp;quotes)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485216">itemText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485231">//&nbsp;plain&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485246">itemVariable</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4485261">//&nbsp;variable&nbsp;starting&nbsp;with&nbsp;&#39;$&#39;,&nbsp;such&nbsp;as&nbsp;&#39;$&#39;&nbsp;or&nbsp;&nbsp;&#39;$1&#39;&nbsp;or&nbsp;&#39;$hello&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4485326">//&nbsp;Keywords&nbsp;appear&nbsp;after&nbsp;all&nbsp;the&nbsp;rest.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485366">itemKeyword</span>&nbsp;&nbsp;<span class="comment" id="4485379">//&nbsp;used&nbsp;only&nbsp;to&nbsp;delimit&nbsp;the&nbsp;keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485417">itemDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485430">//&nbsp;the&nbsp;cursor,&nbsp;spelled&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485458">itemDefine</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4485471">//&nbsp;define&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485490">itemElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485503">//&nbsp;else&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485520">itemEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485533">//&nbsp;end&nbsp;keyword</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485549">itemIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485562">//&nbsp;if&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485577">itemNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485590">//&nbsp;the&nbsp;untyped&nbsp;nil&nbsp;constant,&nbsp;easiest&nbsp;to&nbsp;treat&nbsp;as&nbsp;a&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485650">itemRange</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485663">//&nbsp;range&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485681">itemTemplate</span>&nbsp;<span class="comment" id="4485694">//&nbsp;template&nbsp;keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4485715">itemWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4485728">//&nbsp;with&nbsp;keyword</span><br>
<span class="lineno">70</span><span class="op" id="4485744">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4485747">var</span>&nbsp;<span class="ident" id="4485751">key</span>&nbsp;<span class="op" id="4485755">=</span>&nbsp;<span class="keyword" id="4485757">map</span><span class="op" id="4485760">[</span><span class="builtintype" id="4485761">string</span><span class="op" id="4485767">]</span><span class="ident" id="4485768">itemType</span><span class="op" id="4485776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485779">&#34;.&#34;</span><span class="op" id="4485782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485791">itemDot</span><span class="op" id="4485798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485801">&#34;define&#34;</span><span class="op" id="4485809">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4485813">itemDefine</span><span class="op" id="4485823">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485826">&#34;else&#34;</span><span class="op" id="4485832">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485838">itemElse</span><span class="op" id="4485846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485849">&#34;end&#34;</span><span class="op" id="4485854">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485861">itemEnd</span><span class="op" id="4485868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485871">&#34;if&#34;</span><span class="op" id="4485875">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485883">itemIf</span><span class="op" id="4485889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485892">&#34;range&#34;</span><span class="op" id="4485899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485904">itemRange</span><span class="op" id="4485913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485916">&#34;nil&#34;</span><span class="op" id="4485921">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485928">itemNil</span><span class="op" id="4485935">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485938">&#34;template&#34;</span><span class="op" id="4485948">:</span>&nbsp;<span class="ident" id="4485950">itemTemplate</span><span class="op" id="4485962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4485965">&#34;with&#34;</span><span class="op" id="4485971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4485977">itemWith</span><span class="op" id="4485985">,</span><br>
<span class="lineno"></span><span class="op" id="4485987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4485990">const</span>&nbsp;<span class="ident" id="4485996">eof</span>&nbsp;<span class="op" id="4486000">=</span>&nbsp;<span class="op" id="4486002">-</span><span class="num" id="4486003">1</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="4486006">//&nbsp;stateFn&nbsp;represents&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner&nbsp;as&nbsp;a&nbsp;function&nbsp;that&nbsp;returns&nbsp;the&nbsp;next&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="4486096">type</span>&nbsp;<span class="ident" id="4486101">stateFn</span>&nbsp;<span class="keyword" id="4486109">func</span><span class="op" id="4486113">(</span><span class="op" id="4486114">*</span><span class="ident" id="4486115">lexer</span><span class="op" id="4486120">)</span>&nbsp;<span class="ident" id="4486122">stateFn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4486131">//&nbsp;lexer&nbsp;holds&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;scanner.</span><br>
<span class="lineno">90</span><span class="keyword" id="4486172">type</span>&nbsp;<span class="ident" id="4486177">lexer</span>&nbsp;<span class="keyword" id="4486183">struct</span>&nbsp;<span class="op" id="4486190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486193">name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4486204">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486214">//&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;input;&nbsp;used&nbsp;only&nbsp;for&nbsp;error&nbsp;reports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486269">input</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4486280">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486290">//&nbsp;the&nbsp;string&nbsp;being&nbsp;scanned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486319">leftDelim</span>&nbsp;&nbsp;<span class="builtintype" id="4486330">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486340">//&nbsp;start&nbsp;of&nbsp;action</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486360">rightDelim</span>&nbsp;<span class="builtintype" id="4486371">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486381">//&nbsp;end&nbsp;of&nbsp;action</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486399">state</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4486410">stateFn</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4486420">//&nbsp;the&nbsp;next&nbsp;lexing&nbsp;function&nbsp;to&nbsp;enter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486458">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4486469">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486479">//&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486513">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4486524">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486534">//&nbsp;start&nbsp;position&nbsp;of&nbsp;this&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486566">width</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4486577">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486587">//&nbsp;width&nbsp;of&nbsp;last&nbsp;rune&nbsp;read&nbsp;from&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486626">lastPos</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4486637">Pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486647">//&nbsp;position&nbsp;of&nbsp;most&nbsp;recent&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486701">items</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4486712">chan</span>&nbsp;<span class="ident" id="4486717">item</span>&nbsp;<span class="comment" id="4486722">//&nbsp;channel&nbsp;of&nbsp;scanned&nbsp;items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486751">parenDepth</span>&nbsp;<span class="builtintype" id="4486762">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4486772">//&nbsp;nesting&nbsp;depth&nbsp;of&nbsp;(&nbsp;)&nbsp;exprs</span><br>
<span class="lineno"></span><span class="op" id="4486802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4486805">//&nbsp;next&nbsp;returns&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno">105</span><span class="keyword" id="4486849">func</span>&nbsp;<span class="op" id="4486854">(</span><span class="ident" id="4486855">l</span>&nbsp;<span class="op" id="4486857">*</span><span class="ident" id="4486858">lexer</span><span class="op" id="4486863">)</span>&nbsp;<span class="ident" id="4486865">next</span><span class="op" id="4486869">(</span><span class="op" id="4486870">)</span>&nbsp;<span class="builtintype" id="4486872">rune</span>&nbsp;<span class="op" id="4486877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486880">if</span>&nbsp;<span class="builtintype" id="4486883">int</span><span class="op" id="4486886">(</span><span class="ident" id="4486887">l</span><span class="op" id="4486888">.</span><span class="ident" id="4486889">pos</span><span class="op" id="4486892">)</span>&nbsp;<span class="op" id="4486894">&gt;=</span>&nbsp;<span class="builtinfunc" id="4486897">len</span><span class="op" id="4486900">(</span><span class="ident" id="4486901">l</span><span class="op" id="4486902">.</span><span class="ident" id="4486903">input</span><span class="op" id="4486908">)</span>&nbsp;<span class="op" id="4486910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486914">l</span><span class="op" id="4486915">.</span><span class="ident" id="4486916">width</span>&nbsp;<span class="op" id="4486922">=</span>&nbsp;<span class="num" id="4486924">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4486928">return</span>&nbsp;<span class="ident" id="4486935">eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4486940">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486943">r</span><span class="op" id="4486944">,</span>&nbsp;<span class="ident" id="4486946">w</span>&nbsp;<span class="op" id="4486948">:=</span>&nbsp;<span class="ident" id="4486951">utf8</span><span class="op" id="4486955">.</span><span class="ident" id="4486956">DecodeRuneInString</span><span class="op" id="4486974">(</span><span class="ident" id="4486975">l</span><span class="op" id="4486976">.</span><span class="ident" id="4486977">input</span><span class="op" id="4486982">[</span><span class="ident" id="4486983">l</span><span class="op" id="4486984">.</span><span class="ident" id="4486985">pos</span><span class="op" id="4486988">:</span><span class="op" id="4486989">]</span><span class="op" id="4486990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4486993">l</span><span class="op" id="4486994">.</span><span class="ident" id="4486995">width</span>&nbsp;<span class="op" id="4487001">=</span>&nbsp;<span class="ident" id="4487003">Pos</span><span class="op" id="4487006">(</span><span class="ident" id="4487007">w</span><span class="op" id="4487008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487011">l</span><span class="op" id="4487012">.</span><span class="ident" id="4487013">pos</span>&nbsp;<span class="op" id="4487017">+=</span>&nbsp;<span class="ident" id="4487020">l</span><span class="op" id="4487021">.</span><span class="ident" id="4487022">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487029">return</span>&nbsp;<span class="ident" id="4487036">r</span><br>
<span class="lineno"></span><span class="op" id="4487038">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="4487041">//&nbsp;peek&nbsp;returns&nbsp;but&nbsp;does&nbsp;not&nbsp;consume&nbsp;the&nbsp;next&nbsp;rune&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="keyword" id="4487106">func</span>&nbsp;<span class="op" id="4487111">(</span><span class="ident" id="4487112">l</span>&nbsp;<span class="op" id="4487114">*</span><span class="ident" id="4487115">lexer</span><span class="op" id="4487120">)</span>&nbsp;<span class="ident" id="4487122">peek</span><span class="op" id="4487126">(</span><span class="op" id="4487127">)</span>&nbsp;<span class="builtintype" id="4487129">rune</span>&nbsp;<span class="op" id="4487134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487137">r</span>&nbsp;<span class="op" id="4487139">:=</span>&nbsp;<span class="ident" id="4487142">l</span><span class="op" id="4487143">.</span><span class="ident" id="4487144">next</span><span class="op" id="4487148">(</span><span class="op" id="4487149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487152">l</span><span class="op" id="4487153">.</span><span class="ident" id="4487154">backup</span><span class="op" id="4487160">(</span><span class="op" id="4487161">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487164">return</span>&nbsp;<span class="ident" id="4487171">r</span><br>
<span class="lineno"></span><span class="op" id="4487173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4487176">//&nbsp;backup&nbsp;steps&nbsp;back&nbsp;one&nbsp;rune.&nbsp;Can&nbsp;only&nbsp;be&nbsp;called&nbsp;once&nbsp;per&nbsp;call&nbsp;of&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="4487249">func</span>&nbsp;<span class="op" id="4487254">(</span><span class="ident" id="4487255">l</span>&nbsp;<span class="op" id="4487257">*</span><span class="ident" id="4487258">lexer</span><span class="op" id="4487263">)</span>&nbsp;<span class="ident" id="4487265">backup</span><span class="op" id="4487271">(</span><span class="op" id="4487272">)</span>&nbsp;<span class="op" id="4487274">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487277">l</span><span class="op" id="4487278">.</span><span class="ident" id="4487279">pos</span>&nbsp;<span class="op" id="4487283">-=</span>&nbsp;<span class="ident" id="4487286">l</span><span class="op" id="4487287">.</span><span class="ident" id="4487288">width</span><br>
<span class="lineno"></span><span class="op" id="4487294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4487297">//&nbsp;emit&nbsp;passes&nbsp;an&nbsp;item&nbsp;back&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="keyword" id="4487340">func</span>&nbsp;<span class="op" id="4487345">(</span><span class="ident" id="4487346">l</span>&nbsp;<span class="op" id="4487348">*</span><span class="ident" id="4487349">lexer</span><span class="op" id="4487354">)</span>&nbsp;<span class="ident" id="4487356">emit</span><span class="op" id="4487360">(</span><span class="ident" id="4487361">t</span>&nbsp;<span class="ident" id="4487363">itemType</span><span class="op" id="4487371">)</span>&nbsp;<span class="op" id="4487373">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487376">l</span><span class="op" id="4487377">.</span><span class="ident" id="4487378">items</span>&nbsp;<span class="op" id="4487384">&lt;-</span>&nbsp;<span class="ident" id="4487387">item</span><span class="op" id="4487391">{</span><span class="ident" id="4487392">t</span><span class="op" id="4487393">,</span>&nbsp;<span class="ident" id="4487395">l</span><span class="op" id="4487396">.</span><span class="ident" id="4487397">start</span><span class="op" id="4487402">,</span>&nbsp;<span class="ident" id="4487404">l</span><span class="op" id="4487405">.</span><span class="ident" id="4487406">input</span><span class="op" id="4487411">[</span><span class="ident" id="4487412">l</span><span class="op" id="4487413">.</span><span class="ident" id="4487414">start</span><span class="op" id="4487419">:</span><span class="ident" id="4487420">l</span><span class="op" id="4487421">.</span><span class="ident" id="4487422">pos</span><span class="op" id="4487425">]</span><span class="op" id="4487426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487429">l</span><span class="op" id="4487430">.</span><span class="ident" id="4487431">start</span>&nbsp;<span class="op" id="4487437">=</span>&nbsp;<span class="ident" id="4487439">l</span><span class="op" id="4487440">.</span><span class="ident" id="4487441">pos</span><br>
<span class="lineno"></span><span class="op" id="4487445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4487448">//&nbsp;ignore&nbsp;skips&nbsp;over&nbsp;the&nbsp;pending&nbsp;input&nbsp;before&nbsp;this&nbsp;point.</span><br>
<span class="lineno">135</span><span class="keyword" id="4487506">func</span>&nbsp;<span class="op" id="4487511">(</span><span class="ident" id="4487512">l</span>&nbsp;<span class="op" id="4487514">*</span><span class="ident" id="4487515">lexer</span><span class="op" id="4487520">)</span>&nbsp;<span class="ident" id="4487522">ignore</span><span class="op" id="4487528">(</span><span class="op" id="4487529">)</span>&nbsp;<span class="op" id="4487531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487534">l</span><span class="op" id="4487535">.</span><span class="ident" id="4487536">start</span>&nbsp;<span class="op" id="4487542">=</span>&nbsp;<span class="ident" id="4487544">l</span><span class="op" id="4487545">.</span><span class="ident" id="4487546">pos</span><br>
<span class="lineno"></span><span class="op" id="4487550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4487553">//&nbsp;accept&nbsp;consumes&nbsp;the&nbsp;next&nbsp;rune&nbsp;if&nbsp;it&#39;s&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno">140</span><span class="keyword" id="4487614">func</span>&nbsp;<span class="op" id="4487619">(</span><span class="ident" id="4487620">l</span>&nbsp;<span class="op" id="4487622">*</span><span class="ident" id="4487623">lexer</span><span class="op" id="4487628">)</span>&nbsp;<span class="ident" id="4487630">accept</span><span class="op" id="4487636">(</span><span class="ident" id="4487637">valid</span>&nbsp;<span class="builtintype" id="4487643">string</span><span class="op" id="4487649">)</span>&nbsp;<span class="builtintype" id="4487651">bool</span>&nbsp;<span class="op" id="4487656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487659">if</span>&nbsp;<span class="ident" id="4487662">strings</span><span class="op" id="4487669">.</span><span class="ident" id="4487670">IndexRune</span><span class="op" id="4487679">(</span><span class="ident" id="4487680">valid</span><span class="op" id="4487685">,</span>&nbsp;<span class="ident" id="4487687">l</span><span class="op" id="4487688">.</span><span class="ident" id="4487689">next</span><span class="op" id="4487693">(</span><span class="op" id="4487694">)</span><span class="op" id="4487695">)</span>&nbsp;<span class="op" id="4487697">&gt;=</span>&nbsp;<span class="num" id="4487700">0</span>&nbsp;<span class="op" id="4487702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487706">return</span>&nbsp;<span class="ident" id="4487713">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4487719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487722">l</span><span class="op" id="4487723">.</span><span class="ident" id="4487724">backup</span><span class="op" id="4487730">(</span><span class="op" id="4487731">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487734">return</span>&nbsp;<span class="ident" id="4487741">false</span><br>
<span class="lineno"></span><span class="op" id="4487747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4487750">//&nbsp;acceptRun&nbsp;consumes&nbsp;a&nbsp;run&nbsp;of&nbsp;runes&nbsp;from&nbsp;the&nbsp;valid&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="4487807">func</span>&nbsp;<span class="op" id="4487812">(</span><span class="ident" id="4487813">l</span>&nbsp;<span class="op" id="4487815">*</span><span class="ident" id="4487816">lexer</span><span class="op" id="4487821">)</span>&nbsp;<span class="ident" id="4487823">acceptRun</span><span class="op" id="4487832">(</span><span class="ident" id="4487833">valid</span>&nbsp;<span class="builtintype" id="4487839">string</span><span class="op" id="4487845">)</span>&nbsp;<span class="op" id="4487847">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4487850">for</span>&nbsp;<span class="ident" id="4487854">strings</span><span class="op" id="4487861">.</span><span class="ident" id="4487862">IndexRune</span><span class="op" id="4487871">(</span><span class="ident" id="4487872">valid</span><span class="op" id="4487877">,</span>&nbsp;<span class="ident" id="4487879">l</span><span class="op" id="4487880">.</span><span class="ident" id="4487881">next</span><span class="op" id="4487885">(</span><span class="op" id="4487886">)</span><span class="op" id="4487887">)</span>&nbsp;<span class="op" id="4487889">&gt;=</span>&nbsp;<span class="num" id="4487892">0</span>&nbsp;<span class="op" id="4487894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4487897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4487900">l</span><span class="op" id="4487901">.</span><span class="ident" id="4487902">backup</span><span class="op" id="4487908">(</span><span class="op" id="4487909">)</span><br>
<span class="lineno"></span><span class="op" id="4487911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4487914">//&nbsp;lineNumber&nbsp;reports&nbsp;which&nbsp;line&nbsp;we&#39;re&nbsp;on,&nbsp;based&nbsp;on&nbsp;the&nbsp;position&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4487982">//&nbsp;the&nbsp;previous&nbsp;item&nbsp;returned&nbsp;by&nbsp;nextItem.&nbsp;Doing&nbsp;it&nbsp;this&nbsp;way</span><br>
<span class="lineno"></span><span class="comment" id="4488043">//&nbsp;means&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;worry&nbsp;about&nbsp;peek&nbsp;double&nbsp;counting.</span><br>
<span class="lineno"></span><span class="keyword" id="4488103">func</span>&nbsp;<span class="op" id="4488108">(</span><span class="ident" id="4488109">l</span>&nbsp;<span class="op" id="4488111">*</span><span class="ident" id="4488112">lexer</span><span class="op" id="4488117">)</span>&nbsp;<span class="ident" id="4488119">lineNumber</span><span class="op" id="4488129">(</span><span class="op" id="4488130">)</span>&nbsp;<span class="builtintype" id="4488132">int</span>&nbsp;<span class="op" id="4488136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488139">return</span>&nbsp;<span class="num" id="4488146">1</span>&nbsp;<span class="op" id="4488148">+</span>&nbsp;<span class="ident" id="4488150">strings</span><span class="op" id="4488157">.</span><span class="ident" id="4488158">Count</span><span class="op" id="4488163">(</span><span class="ident" id="4488164">l</span><span class="op" id="4488165">.</span><span class="ident" id="4488166">input</span><span class="op" id="4488171">[</span><span class="op" id="4488172">:</span><span class="ident" id="4488173">l</span><span class="op" id="4488174">.</span><span class="ident" id="4488175">lastPos</span><span class="op" id="4488182">]</span><span class="op" id="4488183">,</span>&nbsp;<span class="string" id="4488185">&#34;\n&#34;</span><span class="op" id="4488189">)</span><br>
<span class="lineno">160</span><span class="op" id="4488191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4488194">//&nbsp;errorf&nbsp;returns&nbsp;an&nbsp;error&nbsp;token&nbsp;and&nbsp;terminates&nbsp;the&nbsp;scan&nbsp;by&nbsp;passing</span><br>
<span class="lineno"></span><span class="comment" id="4488262">//&nbsp;back&nbsp;a&nbsp;nil&nbsp;pointer&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;next&nbsp;state,&nbsp;terminating&nbsp;l.nextItem.</span><br>
<span class="lineno"></span><span class="keyword" id="4488337">func</span>&nbsp;<span class="op" id="4488342">(</span><span class="ident" id="4488343">l</span>&nbsp;<span class="op" id="4488345">*</span><span class="ident" id="4488346">lexer</span><span class="op" id="4488351">)</span>&nbsp;<span class="ident" id="4488353">errorf</span><span class="op" id="4488359">(</span><span class="ident" id="4488360">format</span>&nbsp;<span class="builtintype" id="4488367">string</span><span class="op" id="4488373">,</span>&nbsp;<span class="ident" id="4488375">args</span>&nbsp;<span class="op" id="4488380">...</span><span class="keyword" id="4488383">interface</span><span class="op" id="4488392">{</span><span class="op" id="4488393">}</span><span class="op" id="4488394">)</span>&nbsp;<span class="ident" id="4488396">stateFn</span>&nbsp;<span class="op" id="4488404">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488407">l</span><span class="op" id="4488408">.</span><span class="ident" id="4488409">items</span>&nbsp;<span class="op" id="4488415">&lt;-</span>&nbsp;<span class="ident" id="4488418">item</span><span class="op" id="4488422">{</span><span class="ident" id="4488423">itemError</span><span class="op" id="4488432">,</span>&nbsp;<span class="ident" id="4488434">l</span><span class="op" id="4488435">.</span><span class="ident" id="4488436">start</span><span class="op" id="4488441">,</span>&nbsp;<span class="ident" id="4488443">fmt</span><span class="op" id="4488446">.</span><span class="ident" id="4488447">Sprintf</span><span class="op" id="4488454">(</span><span class="ident" id="4488455">format</span><span class="op" id="4488461">,</span>&nbsp;<span class="ident" id="4488463">args</span><span class="op" id="4488467">...</span><span class="op" id="4488470">)</span><span class="op" id="4488471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488474">return</span>&nbsp;<span class="ident" id="4488481">nil</span><br>
<span class="lineno"></span><span class="op" id="4488485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4488488">//&nbsp;nextItem&nbsp;returns&nbsp;the&nbsp;next&nbsp;item&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno">170</span><span class="keyword" id="4488538">func</span>&nbsp;<span class="op" id="4488543">(</span><span class="ident" id="4488544">l</span>&nbsp;<span class="op" id="4488546">*</span><span class="ident" id="4488547">lexer</span><span class="op" id="4488552">)</span>&nbsp;<span class="ident" id="4488554">nextItem</span><span class="op" id="4488562">(</span><span class="op" id="4488563">)</span>&nbsp;<span class="ident" id="4488565">item</span>&nbsp;<span class="op" id="4488570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488573">item</span>&nbsp;<span class="op" id="4488578">:=</span>&nbsp;<span class="op" id="4488581">&lt;-</span><span class="ident" id="4488583">l</span><span class="op" id="4488584">.</span><span class="ident" id="4488585">items</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488592">l</span><span class="op" id="4488593">.</span><span class="ident" id="4488594">lastPos</span>&nbsp;<span class="op" id="4488602">=</span>&nbsp;<span class="ident" id="4488604">item</span><span class="op" id="4488608">.</span><span class="ident" id="4488609">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488614">return</span>&nbsp;<span class="ident" id="4488621">item</span><br>
<span class="lineno"></span><span class="op" id="4488626">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="comment" id="4488629">//&nbsp;lex&nbsp;creates&nbsp;a&nbsp;new&nbsp;scanner&nbsp;for&nbsp;the&nbsp;input&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4488680">func</span>&nbsp;<span class="ident" id="4488685">lex</span><span class="op" id="4488688">(</span><span class="ident" id="4488689">name</span><span class="op" id="4488693">,</span>&nbsp;<span class="ident" id="4488695">input</span><span class="op" id="4488700">,</span>&nbsp;<span class="ident" id="4488702">left</span><span class="op" id="4488706">,</span>&nbsp;<span class="ident" id="4488708">right</span>&nbsp;<span class="builtintype" id="4488714">string</span><span class="op" id="4488720">)</span>&nbsp;<span class="op" id="4488722">*</span><span class="ident" id="4488723">lexer</span>&nbsp;<span class="op" id="4488729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488732">if</span>&nbsp;<span class="ident" id="4488735">left</span>&nbsp;<span class="op" id="4488740">==</span>&nbsp;<span class="string" id="4488743">&#34;&#34;</span>&nbsp;<span class="op" id="4488746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488750">left</span>&nbsp;<span class="op" id="4488755">=</span>&nbsp;<span class="ident" id="4488757">leftDelim</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4488768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488771">if</span>&nbsp;<span class="ident" id="4488774">right</span>&nbsp;<span class="op" id="4488780">==</span>&nbsp;<span class="string" id="4488783">&#34;&#34;</span>&nbsp;<span class="op" id="4488786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488790">right</span>&nbsp;<span class="op" id="4488796">=</span>&nbsp;<span class="ident" id="4488798">rightDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4488810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488813">l</span>&nbsp;<span class="op" id="4488815">:=</span>&nbsp;<span class="op" id="4488818">&amp;</span><span class="ident" id="4488819">lexer</span><span class="op" id="4488824">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488828">name</span><span class="op" id="4488832">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4488840">name</span><span class="op" id="4488844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488848">input</span><span class="op" id="4488853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4488860">input</span><span class="op" id="4488865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488869">leftDelim</span><span class="op" id="4488878">:</span>&nbsp;&nbsp;<span class="ident" id="4488881">left</span><span class="op" id="4488885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488889">rightDelim</span><span class="op" id="4488899">:</span>&nbsp;<span class="ident" id="4488901">right</span><span class="op" id="4488906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4488910">items</span><span class="op" id="4488915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4488922">make</span><span class="op" id="4488926">(</span><span class="keyword" id="4488927">chan</span>&nbsp;<span class="ident" id="4488932">item</span><span class="op" id="4488936">)</span><span class="op" id="4488937">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4488940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488943">go</span>&nbsp;<span class="ident" id="4488946">l</span><span class="op" id="4488947">.</span><span class="ident" id="4488948">run</span><span class="op" id="4488951">(</span><span class="op" id="4488952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4488955">return</span>&nbsp;<span class="ident" id="4488962">l</span><br>
<span class="lineno"></span><span class="op" id="4488964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="4488967">//&nbsp;run&nbsp;runs&nbsp;the&nbsp;state&nbsp;machine&nbsp;for&nbsp;the&nbsp;lexer.</span><br>
<span class="lineno"></span><span class="keyword" id="4489012">func</span>&nbsp;<span class="op" id="4489017">(</span><span class="ident" id="4489018">l</span>&nbsp;<span class="op" id="4489020">*</span><span class="ident" id="4489021">lexer</span><span class="op" id="4489026">)</span>&nbsp;<span class="ident" id="4489028">run</span><span class="op" id="4489031">(</span><span class="op" id="4489032">)</span>&nbsp;<span class="op" id="4489034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489037">for</span>&nbsp;<span class="ident" id="4489041">l</span><span class="op" id="4489042">.</span><span class="ident" id="4489043">state</span>&nbsp;<span class="op" id="4489049">=</span>&nbsp;<span class="ident" id="4489051">lexText</span><span class="op" id="4489058">;</span>&nbsp;<span class="ident" id="4489060">l</span><span class="op" id="4489061">.</span><span class="ident" id="4489062">state</span>&nbsp;<span class="op" id="4489068">!=</span>&nbsp;<span class="ident" id="4489071">nil</span><span class="op" id="4489074">;</span>&nbsp;<span class="op" id="4489076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489080">l</span><span class="op" id="4489081">.</span><span class="ident" id="4489082">state</span>&nbsp;<span class="op" id="4489088">=</span>&nbsp;<span class="ident" id="4489090">l</span><span class="op" id="4489091">.</span><span class="ident" id="4489092">state</span><span class="op" id="4489097">(</span><span class="ident" id="4489098">l</span><span class="op" id="4489099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489102">}</span><br>
<span class="lineno">200</span><span class="op" id="4489104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4489107">//&nbsp;state&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4489127">const</span>&nbsp;<span class="op" id="4489133">(</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489136">leftDelim</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4489149">=</span>&nbsp;<span class="string" id="4489151">&#34;{{&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489157">rightDelim</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4489170">=</span>&nbsp;<span class="string" id="4489172">&#34;}}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489178">leftComment</span>&nbsp;&nbsp;<span class="op" id="4489191">=</span>&nbsp;<span class="string" id="4489193">&#34;/*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489199">rightComment</span>&nbsp;<span class="op" id="4489212">=</span>&nbsp;<span class="string" id="4489214">&#34;*/&#34;</span><br>
<span class="lineno"></span><span class="op" id="4489219">)</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="comment" id="4489222">//&nbsp;lexText&nbsp;scans&nbsp;until&nbsp;an&nbsp;opening&nbsp;action&nbsp;delimiter,&nbsp;&#34;{{&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4489280">func</span>&nbsp;<span class="ident" id="4489285">lexText</span><span class="op" id="4489292">(</span><span class="ident" id="4489293">l</span>&nbsp;<span class="op" id="4489295">*</span><span class="ident" id="4489296">lexer</span><span class="op" id="4489301">)</span>&nbsp;<span class="ident" id="4489303">stateFn</span>&nbsp;<span class="op" id="4489311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489314">for</span>&nbsp;<span class="op" id="4489318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489322">if</span>&nbsp;<span class="ident" id="4489325">strings</span><span class="op" id="4489332">.</span><span class="ident" id="4489333">HasPrefix</span><span class="op" id="4489342">(</span><span class="ident" id="4489343">l</span><span class="op" id="4489344">.</span><span class="ident" id="4489345">input</span><span class="op" id="4489350">[</span><span class="ident" id="4489351">l</span><span class="op" id="4489352">.</span><span class="ident" id="4489353">pos</span><span class="op" id="4489356">:</span><span class="op" id="4489357">]</span><span class="op" id="4489358">,</span>&nbsp;<span class="ident" id="4489360">l</span><span class="op" id="4489361">.</span><span class="ident" id="4489362">leftDelim</span><span class="op" id="4489371">)</span>&nbsp;<span class="op" id="4489373">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489378">if</span>&nbsp;<span class="ident" id="4489381">l</span><span class="op" id="4489382">.</span><span class="ident" id="4489383">pos</span>&nbsp;<span class="op" id="4489387">&gt;</span>&nbsp;<span class="ident" id="4489389">l</span><span class="op" id="4489390">.</span><span class="ident" id="4489391">start</span>&nbsp;<span class="op" id="4489397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489403">l</span><span class="op" id="4489404">.</span><span class="ident" id="4489405">emit</span><span class="op" id="4489409">(</span><span class="ident" id="4489410">itemText</span><span class="op" id="4489418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489428">return</span>&nbsp;<span class="ident" id="4489435">lexLeftDelim</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489450">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489454">if</span>&nbsp;<span class="ident" id="4489457">l</span><span class="op" id="4489458">.</span><span class="ident" id="4489459">next</span><span class="op" id="4489463">(</span><span class="op" id="4489464">)</span>&nbsp;<span class="op" id="4489466">==</span>&nbsp;<span class="ident" id="4489469">eof</span>&nbsp;<span class="op" id="4489473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489478">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4489492">//&nbsp;Correctly&nbsp;reached&nbsp;EOF.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489519">if</span>&nbsp;<span class="ident" id="4489522">l</span><span class="op" id="4489523">.</span><span class="ident" id="4489524">pos</span>&nbsp;<span class="op" id="4489528">&gt;</span>&nbsp;<span class="ident" id="4489530">l</span><span class="op" id="4489531">.</span><span class="ident" id="4489532">start</span>&nbsp;<span class="op" id="4489538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489542">l</span><span class="op" id="4489543">.</span><span class="ident" id="4489544">emit</span><span class="op" id="4489548">(</span><span class="ident" id="4489549">itemText</span><span class="op" id="4489557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489563">l</span><span class="op" id="4489564">.</span><span class="ident" id="4489565">emit</span><span class="op" id="4489569">(</span><span class="ident" id="4489570">itemEOF</span><span class="op" id="4489577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489580">return</span>&nbsp;<span class="ident" id="4489587">nil</span><br>
<span class="lineno">230</span><span class="op" id="4489591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4489594">//&nbsp;lexLeftDelim&nbsp;scans&nbsp;the&nbsp;left&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4489666">func</span>&nbsp;<span class="ident" id="4489671">lexLeftDelim</span><span class="op" id="4489683">(</span><span class="ident" id="4489684">l</span>&nbsp;<span class="op" id="4489686">*</span><span class="ident" id="4489687">lexer</span><span class="op" id="4489692">)</span>&nbsp;<span class="ident" id="4489694">stateFn</span>&nbsp;<span class="op" id="4489702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489705">l</span><span class="op" id="4489706">.</span><span class="ident" id="4489707">pos</span>&nbsp;<span class="op" id="4489711">+=</span>&nbsp;<span class="ident" id="4489714">Pos</span><span class="op" id="4489717">(</span><span class="builtinfunc" id="4489718">len</span><span class="op" id="4489721">(</span><span class="ident" id="4489722">l</span><span class="op" id="4489723">.</span><span class="ident" id="4489724">leftDelim</span><span class="op" id="4489733">)</span><span class="op" id="4489734">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489737">if</span>&nbsp;<span class="ident" id="4489740">strings</span><span class="op" id="4489747">.</span><span class="ident" id="4489748">HasPrefix</span><span class="op" id="4489757">(</span><span class="ident" id="4489758">l</span><span class="op" id="4489759">.</span><span class="ident" id="4489760">input</span><span class="op" id="4489765">[</span><span class="ident" id="4489766">l</span><span class="op" id="4489767">.</span><span class="ident" id="4489768">pos</span><span class="op" id="4489771">:</span><span class="op" id="4489772">]</span><span class="op" id="4489773">,</span>&nbsp;<span class="ident" id="4489775">leftComment</span><span class="op" id="4489786">)</span>&nbsp;<span class="op" id="4489788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489792">return</span>&nbsp;<span class="ident" id="4489799">lexComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4489811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489814">l</span><span class="op" id="4489815">.</span><span class="ident" id="4489816">emit</span><span class="op" id="4489820">(</span><span class="ident" id="4489821">itemLeftDelim</span><span class="op" id="4489834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489837">l</span><span class="op" id="4489838">.</span><span class="ident" id="4489839">parenDepth</span>&nbsp;<span class="op" id="4489850">=</span>&nbsp;<span class="num" id="4489852">0</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4489855">return</span>&nbsp;<span class="ident" id="4489862">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4489878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4489881">//&nbsp;lexComment&nbsp;scans&nbsp;a&nbsp;comment.&nbsp;The&nbsp;left&nbsp;comment&nbsp;marker&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4489960">func</span>&nbsp;<span class="ident" id="4489965">lexComment</span><span class="op" id="4489975">(</span><span class="ident" id="4489976">l</span>&nbsp;<span class="op" id="4489978">*</span><span class="ident" id="4489979">lexer</span><span class="op" id="4489984">)</span>&nbsp;<span class="ident" id="4489986">stateFn</span>&nbsp;<span class="op" id="4489994">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489997">l</span><span class="op" id="4489998">.</span><span class="ident" id="4489999">pos</span>&nbsp;<span class="op" id="4490003">+=</span>&nbsp;<span class="ident" id="4490006">Pos</span><span class="op" id="4490009">(</span><span class="builtinfunc" id="4490010">len</span><span class="op" id="4490013">(</span><span class="ident" id="4490014">leftComment</span><span class="op" id="4490025">)</span><span class="op" id="4490026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490029">i</span>&nbsp;<span class="op" id="4490031">:=</span>&nbsp;<span class="ident" id="4490034">strings</span><span class="op" id="4490041">.</span><span class="ident" id="4490042">Index</span><span class="op" id="4490047">(</span><span class="ident" id="4490048">l</span><span class="op" id="4490049">.</span><span class="ident" id="4490050">input</span><span class="op" id="4490055">[</span><span class="ident" id="4490056">l</span><span class="op" id="4490057">.</span><span class="ident" id="4490058">pos</span><span class="op" id="4490061">:</span><span class="op" id="4490062">]</span><span class="op" id="4490063">,</span>&nbsp;<span class="ident" id="4490065">rightComment</span><span class="op" id="4490077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490080">if</span>&nbsp;<span class="ident" id="4490083">i</span>&nbsp;<span class="op" id="4490085">&lt;</span>&nbsp;<span class="num" id="4490087">0</span>&nbsp;<span class="op" id="4490089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490093">return</span>&nbsp;<span class="ident" id="4490100">l</span><span class="op" id="4490101">.</span><span class="ident" id="4490102">errorf</span><span class="op" id="4490108">(</span><span class="string" id="4490109">&#34;unclosed&nbsp;comment&#34;</span><span class="op" id="4490127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490130">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490133">l</span><span class="op" id="4490134">.</span><span class="ident" id="4490135">pos</span>&nbsp;<span class="op" id="4490139">+=</span>&nbsp;<span class="ident" id="4490142">Pos</span><span class="op" id="4490145">(</span><span class="ident" id="4490146">i</span>&nbsp;<span class="op" id="4490148">+</span>&nbsp;<span class="builtinfunc" id="4490150">len</span><span class="op" id="4490153">(</span><span class="ident" id="4490154">rightComment</span><span class="op" id="4490166">)</span><span class="op" id="4490167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490170">if</span>&nbsp;<span class="op" id="4490173">!</span><span class="ident" id="4490174">strings</span><span class="op" id="4490181">.</span><span class="ident" id="4490182">HasPrefix</span><span class="op" id="4490191">(</span><span class="ident" id="4490192">l</span><span class="op" id="4490193">.</span><span class="ident" id="4490194">input</span><span class="op" id="4490199">[</span><span class="ident" id="4490200">l</span><span class="op" id="4490201">.</span><span class="ident" id="4490202">pos</span><span class="op" id="4490205">:</span><span class="op" id="4490206">]</span><span class="op" id="4490207">,</span>&nbsp;<span class="ident" id="4490209">l</span><span class="op" id="4490210">.</span><span class="ident" id="4490211">rightDelim</span><span class="op" id="4490221">)</span>&nbsp;<span class="op" id="4490223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490227">return</span>&nbsp;<span class="ident" id="4490234">l</span><span class="op" id="4490235">.</span><span class="ident" id="4490236">errorf</span><span class="op" id="4490242">(</span><span class="string" id="4490243">&#34;comment&nbsp;ends&nbsp;before&nbsp;closing&nbsp;delimiter&#34;</span><span class="op" id="4490282">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490286">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490289">l</span><span class="op" id="4490290">.</span><span class="ident" id="4490291">pos</span>&nbsp;<span class="op" id="4490295">+=</span>&nbsp;<span class="ident" id="4490298">Pos</span><span class="op" id="4490301">(</span><span class="builtinfunc" id="4490302">len</span><span class="op" id="4490305">(</span><span class="ident" id="4490306">l</span><span class="op" id="4490307">.</span><span class="ident" id="4490308">rightDelim</span><span class="op" id="4490318">)</span><span class="op" id="4490319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490322">l</span><span class="op" id="4490323">.</span><span class="ident" id="4490324">ignore</span><span class="op" id="4490330">(</span><span class="op" id="4490331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490334">return</span>&nbsp;<span class="ident" id="4490341">lexText</span><br>
<span class="lineno"></span><span class="op" id="4490349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4490352">//&nbsp;lexRightDelim&nbsp;scans&nbsp;the&nbsp;right&nbsp;delimiter,&nbsp;which&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="4490426">func</span>&nbsp;<span class="ident" id="4490431">lexRightDelim</span><span class="op" id="4490444">(</span><span class="ident" id="4490445">l</span>&nbsp;<span class="op" id="4490447">*</span><span class="ident" id="4490448">lexer</span><span class="op" id="4490453">)</span>&nbsp;<span class="ident" id="4490455">stateFn</span>&nbsp;<span class="op" id="4490463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490466">l</span><span class="op" id="4490467">.</span><span class="ident" id="4490468">pos</span>&nbsp;<span class="op" id="4490472">+=</span>&nbsp;<span class="ident" id="4490475">Pos</span><span class="op" id="4490478">(</span><span class="builtinfunc" id="4490479">len</span><span class="op" id="4490482">(</span><span class="ident" id="4490483">l</span><span class="op" id="4490484">.</span><span class="ident" id="4490485">rightDelim</span><span class="op" id="4490495">)</span><span class="op" id="4490496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4490499">l</span><span class="op" id="4490500">.</span><span class="ident" id="4490501">emit</span><span class="op" id="4490505">(</span><span class="ident" id="4490506">itemRightDelim</span><span class="op" id="4490520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490523">return</span>&nbsp;<span class="ident" id="4490530">lexText</span><br>
<span class="lineno">265</span><span class="op" id="4490538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4490541">//&nbsp;lexInsideAction&nbsp;scans&nbsp;the&nbsp;elements&nbsp;inside&nbsp;action&nbsp;delimiters.</span><br>
<span class="lineno"></span><span class="keyword" id="4490605">func</span>&nbsp;<span class="ident" id="4490610">lexInsideAction</span><span class="op" id="4490625">(</span><span class="ident" id="4490626">l</span>&nbsp;<span class="op" id="4490628">*</span><span class="ident" id="4490629">lexer</span><span class="op" id="4490634">)</span>&nbsp;<span class="ident" id="4490636">stateFn</span>&nbsp;<span class="op" id="4490644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4490647">//&nbsp;Either&nbsp;number,&nbsp;quoted&nbsp;string,&nbsp;or&nbsp;identifier.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4490696">//&nbsp;Spaces&nbsp;separate&nbsp;arguments;&nbsp;runs&nbsp;of&nbsp;spaces&nbsp;turn&nbsp;into&nbsp;itemSpace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4490763">//&nbsp;Pipe&nbsp;symbols&nbsp;separate&nbsp;and&nbsp;are&nbsp;emitted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490806">if</span>&nbsp;<span class="ident" id="4490809">strings</span><span class="op" id="4490816">.</span><span class="ident" id="4490817">HasPrefix</span><span class="op" id="4490826">(</span><span class="ident" id="4490827">l</span><span class="op" id="4490828">.</span><span class="ident" id="4490829">input</span><span class="op" id="4490834">[</span><span class="ident" id="4490835">l</span><span class="op" id="4490836">.</span><span class="ident" id="4490837">pos</span><span class="op" id="4490840">:</span><span class="op" id="4490841">]</span><span class="op" id="4490842">,</span>&nbsp;<span class="ident" id="4490844">l</span><span class="op" id="4490845">.</span><span class="ident" id="4490846">rightDelim</span><span class="op" id="4490856">)</span>&nbsp;<span class="op" id="4490858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490862">if</span>&nbsp;<span class="ident" id="4490865">l</span><span class="op" id="4490866">.</span><span class="ident" id="4490867">parenDepth</span>&nbsp;<span class="op" id="4490878">==</span>&nbsp;<span class="num" id="4490881">0</span>&nbsp;<span class="op" id="4490883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490888">return</span>&nbsp;<span class="ident" id="4490895">lexRightDelim</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490915">return</span>&nbsp;<span class="ident" id="4490922">l</span><span class="op" id="4490923">.</span><span class="ident" id="4490924">errorf</span><span class="op" id="4490930">(</span><span class="string" id="4490931">&#34;unclosed&nbsp;left&nbsp;paren&#34;</span><span class="op" id="4490952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4490955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490958">switch</span>&nbsp;<span class="ident" id="4490965">r</span>&nbsp;<span class="op" id="4490967">:=</span>&nbsp;<span class="ident" id="4490970">l</span><span class="op" id="4490971">.</span><span class="ident" id="4490972">next</span><span class="op" id="4490976">(</span><span class="op" id="4490977">)</span><span class="op" id="4490978">;</span>&nbsp;<span class="op" id="4490980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4490983">case</span>&nbsp;<span class="ident" id="4490988">r</span>&nbsp;<span class="op" id="4490990">==</span>&nbsp;<span class="ident" id="4490993">eof</span>&nbsp;<span class="op" id="4490997">||</span>&nbsp;<span class="ident" id="4491000">isEndOfLine</span><span class="op" id="4491011">(</span><span class="ident" id="4491012">r</span><span class="op" id="4491013">)</span><span class="op" id="4491014">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491018">return</span>&nbsp;<span class="ident" id="4491025">l</span><span class="op" id="4491026">.</span><span class="ident" id="4491027">errorf</span><span class="op" id="4491033">(</span><span class="string" id="4491034">&#34;unclosed&nbsp;action&#34;</span><span class="op" id="4491051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491054">case</span>&nbsp;<span class="ident" id="4491059">isSpace</span><span class="op" id="4491066">(</span><span class="ident" id="4491067">r</span><span class="op" id="4491068">)</span><span class="op" id="4491069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491073">return</span>&nbsp;<span class="ident" id="4491080">lexSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491090">case</span>&nbsp;<span class="ident" id="4491095">r</span>&nbsp;<span class="op" id="4491097">==</span>&nbsp;<span class="string" id="4491100">&#39;:&#39;</span><span class="op" id="4491103">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491107">if</span>&nbsp;<span class="ident" id="4491110">l</span><span class="op" id="4491111">.</span><span class="ident" id="4491112">next</span><span class="op" id="4491116">(</span><span class="op" id="4491117">)</span>&nbsp;<span class="op" id="4491119">!=</span>&nbsp;<span class="string" id="4491122">&#39;=&#39;</span>&nbsp;<span class="op" id="4491126">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491131">return</span>&nbsp;<span class="ident" id="4491138">l</span><span class="op" id="4491139">.</span><span class="ident" id="4491140">errorf</span><span class="op" id="4491146">(</span><span class="string" id="4491147">&#34;expected&nbsp;:=&#34;</span><span class="op" id="4491160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491168">l</span><span class="op" id="4491169">.</span><span class="ident" id="4491170">emit</span><span class="op" id="4491174">(</span><span class="ident" id="4491175">itemColonEquals</span><span class="op" id="4491190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491193">case</span>&nbsp;<span class="ident" id="4491198">r</span>&nbsp;<span class="op" id="4491200">==</span>&nbsp;<span class="string" id="4491203">&#39;|&#39;</span><span class="op" id="4491206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491210">l</span><span class="op" id="4491211">.</span><span class="ident" id="4491212">emit</span><span class="op" id="4491216">(</span><span class="ident" id="4491217">itemPipe</span><span class="op" id="4491225">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491228">case</span>&nbsp;<span class="ident" id="4491233">r</span>&nbsp;<span class="op" id="4491235">==</span>&nbsp;<span class="string" id="4491238">&#39;&#34;&#39;</span><span class="op" id="4491241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491245">return</span>&nbsp;<span class="ident" id="4491252">lexQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491262">case</span>&nbsp;<span class="ident" id="4491267">r</span>&nbsp;<span class="op" id="4491269">==</span>&nbsp;<span class="string" id="4491272">&#39;`&#39;</span><span class="op" id="4491275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491279">return</span>&nbsp;<span class="ident" id="4491286">lexRawQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491299">case</span>&nbsp;<span class="ident" id="4491304">r</span>&nbsp;<span class="op" id="4491306">==</span>&nbsp;<span class="string" id="4491309">&#39;$&#39;</span><span class="op" id="4491312">:</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491316">return</span>&nbsp;<span class="ident" id="4491323">lexVariable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491336">case</span>&nbsp;<span class="ident" id="4491341">r</span>&nbsp;<span class="op" id="4491343">==</span>&nbsp;<span class="string" id="4491346">&#39;\&#39;&#39;</span><span class="op" id="4491350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491354">return</span>&nbsp;<span class="ident" id="4491361">lexChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491370">case</span>&nbsp;<span class="ident" id="4491375">r</span>&nbsp;<span class="op" id="4491377">==</span>&nbsp;<span class="string" id="4491380">&#39;.&#39;</span><span class="op" id="4491383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4491387">//&nbsp;special&nbsp;look-ahead&nbsp;for&nbsp;&#34;.field&#34;&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;break&nbsp;l.backup().</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491454">if</span>&nbsp;<span class="ident" id="4491457">l</span><span class="op" id="4491458">.</span><span class="ident" id="4491459">pos</span>&nbsp;<span class="op" id="4491463">&lt;</span>&nbsp;<span class="ident" id="4491465">Pos</span><span class="op" id="4491468">(</span><span class="builtinfunc" id="4491469">len</span><span class="op" id="4491472">(</span><span class="ident" id="4491473">l</span><span class="op" id="4491474">.</span><span class="ident" id="4491475">input</span><span class="op" id="4491480">)</span><span class="op" id="4491481">)</span>&nbsp;<span class="op" id="4491483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491488">r</span>&nbsp;<span class="op" id="4491490">:=</span>&nbsp;<span class="ident" id="4491493">l</span><span class="op" id="4491494">.</span><span class="ident" id="4491495">input</span><span class="op" id="4491500">[</span><span class="ident" id="4491501">l</span><span class="op" id="4491502">.</span><span class="ident" id="4491503">pos</span><span class="op" id="4491506">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491511">if</span>&nbsp;<span class="ident" id="4491514">r</span>&nbsp;<span class="op" id="4491516">&lt;</span>&nbsp;<span class="string" id="4491518">&#39;0&#39;</span>&nbsp;<span class="op" id="4491522">||</span>&nbsp;<span class="string" id="4491525">&#39;9&#39;</span>&nbsp;<span class="op" id="4491529">&lt;</span>&nbsp;<span class="ident" id="4491531">r</span>&nbsp;<span class="op" id="4491533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491539">return</span>&nbsp;<span class="ident" id="4491546">lexField</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491558">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491566">fallthrough</span>&nbsp;<span class="comment" id="4491578">//&nbsp;&#39;.&#39;&nbsp;can&nbsp;start&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491606">case</span>&nbsp;<span class="ident" id="4491611">r</span>&nbsp;<span class="op" id="4491613">==</span>&nbsp;<span class="string" id="4491616">&#39;+&#39;</span>&nbsp;<span class="op" id="4491620">||</span>&nbsp;<span class="ident" id="4491623">r</span>&nbsp;<span class="op" id="4491625">==</span>&nbsp;<span class="string" id="4491628">&#39;-&#39;</span>&nbsp;<span class="op" id="4491632">||</span>&nbsp;<span class="op" id="4491635">(</span><span class="string" id="4491636">&#39;0&#39;</span>&nbsp;<span class="op" id="4491640">&lt;=</span>&nbsp;<span class="ident" id="4491643">r</span>&nbsp;<span class="op" id="4491645">&amp;&amp;</span>&nbsp;<span class="ident" id="4491648">r</span>&nbsp;<span class="op" id="4491650">&lt;=</span>&nbsp;<span class="string" id="4491653">&#39;9&#39;</span><span class="op" id="4491656">)</span><span class="op" id="4491657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491661">l</span><span class="op" id="4491662">.</span><span class="ident" id="4491663">backup</span><span class="op" id="4491669">(</span><span class="op" id="4491670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491674">return</span>&nbsp;<span class="ident" id="4491681">lexNumber</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491692">case</span>&nbsp;<span class="ident" id="4491697">isAlphaNumeric</span><span class="op" id="4491711">(</span><span class="ident" id="4491712">r</span><span class="op" id="4491713">)</span><span class="op" id="4491714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491718">l</span><span class="op" id="4491719">.</span><span class="ident" id="4491720">backup</span><span class="op" id="4491726">(</span><span class="op" id="4491727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491731">return</span>&nbsp;<span class="ident" id="4491738">lexIdentifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491753">case</span>&nbsp;<span class="ident" id="4491758">r</span>&nbsp;<span class="op" id="4491760">==</span>&nbsp;<span class="string" id="4491763">&#39;(&#39;</span><span class="op" id="4491766">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491770">l</span><span class="op" id="4491771">.</span><span class="ident" id="4491772">emit</span><span class="op" id="4491776">(</span><span class="ident" id="4491777">itemLeftParen</span><span class="op" id="4491790">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491794">l</span><span class="op" id="4491795">.</span><span class="ident" id="4491796">parenDepth</span><span class="op" id="4491806">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491811">return</span>&nbsp;<span class="ident" id="4491818">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491835">case</span>&nbsp;<span class="ident" id="4491840">r</span>&nbsp;<span class="op" id="4491842">==</span>&nbsp;<span class="string" id="4491845">&#39;)&#39;</span><span class="op" id="4491848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491852">l</span><span class="op" id="4491853">.</span><span class="ident" id="4491854">emit</span><span class="op" id="4491858">(</span><span class="ident" id="4491859">itemRightParen</span><span class="op" id="4491873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4491877">l</span><span class="op" id="4491878">.</span><span class="ident" id="4491879">parenDepth</span><span class="op" id="4491889">--</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491894">if</span>&nbsp;<span class="ident" id="4491897">l</span><span class="op" id="4491898">.</span><span class="ident" id="4491899">parenDepth</span>&nbsp;<span class="op" id="4491910">&lt;</span>&nbsp;<span class="num" id="4491912">0</span>&nbsp;<span class="op" id="4491914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491919">return</span>&nbsp;<span class="ident" id="4491926">l</span><span class="op" id="4491927">.</span><span class="ident" id="4491928">errorf</span><span class="op" id="4491934">(</span><span class="string" id="4491935">&#34;unexpected&nbsp;right&nbsp;paren&nbsp;%#U&#34;</span><span class="op" id="4491963">,</span>&nbsp;<span class="ident" id="4491965">r</span><span class="op" id="4491966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4491970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491974">return</span>&nbsp;<span class="ident" id="4491981">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4491998">case</span>&nbsp;<span class="ident" id="4492003">r</span>&nbsp;<span class="op" id="4492005">&lt;=</span>&nbsp;<span class="ident" id="4492008">unicode</span><span class="op" id="4492015">.</span><span class="ident" id="4492016">MaxASCII</span>&nbsp;<span class="op" id="4492025">&amp;&amp;</span>&nbsp;<span class="ident" id="4492028">unicode</span><span class="op" id="4492035">.</span><span class="ident" id="4492036">IsPrint</span><span class="op" id="4492043">(</span><span class="ident" id="4492044">r</span><span class="op" id="4492045">)</span><span class="op" id="4492046">:</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492050">l</span><span class="op" id="4492051">.</span><span class="ident" id="4492052">emit</span><span class="op" id="4492056">(</span><span class="ident" id="4492057">itemChar</span><span class="op" id="4492065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492069">return</span>&nbsp;<span class="ident" id="4492076">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492093">default</span><span class="op" id="4492100">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492104">return</span>&nbsp;<span class="ident" id="4492111">l</span><span class="op" id="4492112">.</span><span class="ident" id="4492113">errorf</span><span class="op" id="4492119">(</span><span class="string" id="4492120">&#34;unrecognized&nbsp;character&nbsp;in&nbsp;action:&nbsp;%#U&#34;</span><span class="op" id="4492159">,</span>&nbsp;<span class="ident" id="4492161">r</span><span class="op" id="4492162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492165">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492168">return</span>&nbsp;<span class="ident" id="4492175">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4492191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4492194">//&nbsp;lexSpace&nbsp;scans&nbsp;a&nbsp;run&nbsp;of&nbsp;space&nbsp;characters.</span><br>
<span class="lineno"></span><span class="comment" id="4492239">//&nbsp;One&nbsp;space&nbsp;has&nbsp;already&nbsp;been&nbsp;seen.</span><br>
<span class="lineno">335</span><span class="keyword" id="4492275">func</span>&nbsp;<span class="ident" id="4492280">lexSpace</span><span class="op" id="4492288">(</span><span class="ident" id="4492289">l</span>&nbsp;<span class="op" id="4492291">*</span><span class="ident" id="4492292">lexer</span><span class="op" id="4492297">)</span>&nbsp;<span class="ident" id="4492299">stateFn</span>&nbsp;<span class="op" id="4492307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492310">for</span>&nbsp;<span class="ident" id="4492314">isSpace</span><span class="op" id="4492321">(</span><span class="ident" id="4492322">l</span><span class="op" id="4492323">.</span><span class="ident" id="4492324">peek</span><span class="op" id="4492328">(</span><span class="op" id="4492329">)</span><span class="op" id="4492330">)</span>&nbsp;<span class="op" id="4492332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492336">l</span><span class="op" id="4492337">.</span><span class="ident" id="4492338">next</span><span class="op" id="4492342">(</span><span class="op" id="4492343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492349">l</span><span class="op" id="4492350">.</span><span class="ident" id="4492351">emit</span><span class="op" id="4492355">(</span><span class="ident" id="4492356">itemSpace</span><span class="op" id="4492365">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492368">return</span>&nbsp;<span class="ident" id="4492375">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4492391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4492394">//&nbsp;lexIdentifier&nbsp;scans&nbsp;an&nbsp;alphanumeric.</span><br>
<span class="lineno"></span><span class="keyword" id="4492434">func</span>&nbsp;<span class="ident" id="4492439">lexIdentifier</span><span class="op" id="4492452">(</span><span class="ident" id="4492453">l</span>&nbsp;<span class="op" id="4492455">*</span><span class="ident" id="4492456">lexer</span><span class="op" id="4492461">)</span>&nbsp;<span class="ident" id="4492463">stateFn</span>&nbsp;<span class="op" id="4492471">{</span><br>
<span class="lineno">345</span><span class="ident" id="4492473">Loop</span><span class="op" id="4492477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492480">for</span>&nbsp;<span class="op" id="4492484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492488">switch</span>&nbsp;<span class="ident" id="4492495">r</span>&nbsp;<span class="op" id="4492497">:=</span>&nbsp;<span class="ident" id="4492500">l</span><span class="op" id="4492501">.</span><span class="ident" id="4492502">next</span><span class="op" id="4492506">(</span><span class="op" id="4492507">)</span><span class="op" id="4492508">;</span>&nbsp;<span class="op" id="4492510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492514">case</span>&nbsp;<span class="ident" id="4492519">isAlphaNumeric</span><span class="op" id="4492533">(</span><span class="ident" id="4492534">r</span><span class="op" id="4492535">)</span><span class="op" id="4492536">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4492541">//&nbsp;absorb.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492554">default</span><span class="op" id="4492561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492566">l</span><span class="op" id="4492567">.</span><span class="ident" id="4492568">backup</span><span class="op" id="4492574">(</span><span class="op" id="4492575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492580">word</span>&nbsp;<span class="op" id="4492585">:=</span>&nbsp;<span class="ident" id="4492588">l</span><span class="op" id="4492589">.</span><span class="ident" id="4492590">input</span><span class="op" id="4492595">[</span><span class="ident" id="4492596">l</span><span class="op" id="4492597">.</span><span class="ident" id="4492598">start</span><span class="op" id="4492603">:</span><span class="ident" id="4492604">l</span><span class="op" id="4492605">.</span><span class="ident" id="4492606">pos</span><span class="op" id="4492609">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492614">if</span>&nbsp;<span class="op" id="4492617">!</span><span class="ident" id="4492618">l</span><span class="op" id="4492619">.</span><span class="ident" id="4492620">atTerminator</span><span class="op" id="4492632">(</span><span class="op" id="4492633">)</span>&nbsp;<span class="op" id="4492635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492641">return</span>&nbsp;<span class="ident" id="4492648">l</span><span class="op" id="4492649">.</span><span class="ident" id="4492650">errorf</span><span class="op" id="4492656">(</span><span class="string" id="4492657">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4492676">,</span>&nbsp;<span class="ident" id="4492678">r</span><span class="op" id="4492679">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492689">switch</span>&nbsp;<span class="op" id="4492696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492701">case</span>&nbsp;<span class="ident" id="4492706">key</span><span class="op" id="4492709">[</span><span class="ident" id="4492710">word</span><span class="op" id="4492714">]</span>&nbsp;<span class="op" id="4492716">&gt;</span>&nbsp;<span class="ident" id="4492718">itemKeyword</span><span class="op" id="4492729">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492735">l</span><span class="op" id="4492736">.</span><span class="ident" id="4492737">emit</span><span class="op" id="4492741">(</span><span class="ident" id="4492742">key</span><span class="op" id="4492745">[</span><span class="ident" id="4492746">word</span><span class="op" id="4492750">]</span><span class="op" id="4492751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492756">case</span>&nbsp;<span class="ident" id="4492761">word</span><span class="op" id="4492765">[</span><span class="num" id="4492766">0</span><span class="op" id="4492767">]</span>&nbsp;<span class="op" id="4492769">==</span>&nbsp;<span class="string" id="4492772">&#39;.&#39;</span><span class="op" id="4492775">:</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492781">l</span><span class="op" id="4492782">.</span><span class="ident" id="4492783">emit</span><span class="op" id="4492787">(</span><span class="ident" id="4492788">itemField</span><span class="op" id="4492797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492802">case</span>&nbsp;<span class="ident" id="4492807">word</span>&nbsp;<span class="op" id="4492812">==</span>&nbsp;<span class="string" id="4492815">&#34;true&#34;</span><span class="op" id="4492821">,</span>&nbsp;<span class="ident" id="4492823">word</span>&nbsp;<span class="op" id="4492828">==</span>&nbsp;<span class="string" id="4492831">&#34;false&#34;</span><span class="op" id="4492838">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492844">l</span><span class="op" id="4492845">.</span><span class="ident" id="4492846">emit</span><span class="op" id="4492850">(</span><span class="ident" id="4492851">itemBool</span><span class="op" id="4492859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492864">default</span><span class="op" id="4492871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4492877">l</span><span class="op" id="4492878">.</span><span class="ident" id="4492879">emit</span><span class="op" id="4492883">(</span><span class="ident" id="4492884">itemIdentifier</span><span class="op" id="4492898">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492908">break</span>&nbsp;<span class="ident" id="4492914">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4492924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4492927">return</span>&nbsp;<span class="ident" id="4492934">lexInsideAction</span><br>
<span class="lineno">370</span><span class="op" id="4492950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4492953">//&nbsp;lexField&nbsp;scans&nbsp;a&nbsp;field:&nbsp;.Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4492995">//&nbsp;The&nbsp;.&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno"></span><span class="keyword" id="4493022">func</span>&nbsp;<span class="ident" id="4493027">lexField</span><span class="op" id="4493035">(</span><span class="ident" id="4493036">l</span>&nbsp;<span class="op" id="4493038">*</span><span class="ident" id="4493039">lexer</span><span class="op" id="4493044">)</span>&nbsp;<span class="ident" id="4493046">stateFn</span>&nbsp;<span class="op" id="4493054">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493057">return</span>&nbsp;<span class="ident" id="4493064">lexFieldOrVariable</span><span class="op" id="4493082">(</span><span class="ident" id="4493083">l</span><span class="op" id="4493084">,</span>&nbsp;<span class="ident" id="4493086">itemField</span><span class="op" id="4493095">)</span><br>
<span class="lineno"></span><span class="op" id="4493097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4493100">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;Variable:&nbsp;$Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4493148">//&nbsp;The&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">380</span><span class="keyword" id="4493175">func</span>&nbsp;<span class="ident" id="4493180">lexVariable</span><span class="op" id="4493191">(</span><span class="ident" id="4493192">l</span>&nbsp;<span class="op" id="4493194">*</span><span class="ident" id="4493195">lexer</span><span class="op" id="4493200">)</span>&nbsp;<span class="ident" id="4493202">stateFn</span>&nbsp;<span class="op" id="4493210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493213">if</span>&nbsp;<span class="ident" id="4493216">l</span><span class="op" id="4493217">.</span><span class="ident" id="4493218">atTerminator</span><span class="op" id="4493230">(</span><span class="op" id="4493231">)</span>&nbsp;<span class="op" id="4493233">{</span>&nbsp;<span class="comment" id="4493235">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493276">l</span><span class="op" id="4493277">.</span><span class="ident" id="4493278">emit</span><span class="op" id="4493282">(</span><span class="ident" id="4493283">itemVariable</span><span class="op" id="4493295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493299">return</span>&nbsp;<span class="ident" id="4493306">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493323">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493326">return</span>&nbsp;<span class="ident" id="4493333">lexFieldOrVariable</span><span class="op" id="4493351">(</span><span class="ident" id="4493352">l</span><span class="op" id="4493353">,</span>&nbsp;<span class="ident" id="4493355">itemVariable</span><span class="op" id="4493367">)</span><br>
<span class="lineno"></span><span class="op" id="4493369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4493372">//&nbsp;lexVariable&nbsp;scans&nbsp;a&nbsp;field&nbsp;or&nbsp;variable:&nbsp;[.$]Alphanumeric.</span><br>
<span class="lineno"></span><span class="comment" id="4493432">//&nbsp;The&nbsp;.&nbsp;or&nbsp;$&nbsp;has&nbsp;been&nbsp;scanned.</span><br>
<span class="lineno">390</span><span class="keyword" id="4493464">func</span>&nbsp;<span class="ident" id="4493469">lexFieldOrVariable</span><span class="op" id="4493487">(</span><span class="ident" id="4493488">l</span>&nbsp;<span class="op" id="4493490">*</span><span class="ident" id="4493491">lexer</span><span class="op" id="4493496">,</span>&nbsp;<span class="ident" id="4493498">typ</span>&nbsp;<span class="ident" id="4493502">itemType</span><span class="op" id="4493510">)</span>&nbsp;<span class="ident" id="4493512">stateFn</span>&nbsp;<span class="op" id="4493520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493523">if</span>&nbsp;<span class="ident" id="4493526">l</span><span class="op" id="4493527">.</span><span class="ident" id="4493528">atTerminator</span><span class="op" id="4493540">(</span><span class="op" id="4493541">)</span>&nbsp;<span class="op" id="4493543">{</span>&nbsp;<span class="comment" id="4493545">//&nbsp;Nothing&nbsp;interesting&nbsp;follows&nbsp;-&gt;&nbsp;&#34;.&#34;&nbsp;or&nbsp;&#34;$&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493593">if</span>&nbsp;<span class="ident" id="4493596">typ</span>&nbsp;<span class="op" id="4493600">==</span>&nbsp;<span class="ident" id="4493603">itemVariable</span>&nbsp;<span class="op" id="4493616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493621">l</span><span class="op" id="4493622">.</span><span class="ident" id="4493623">emit</span><span class="op" id="4493627">(</span><span class="ident" id="4493628">itemVariable</span><span class="op" id="4493640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493644">}</span>&nbsp;<span class="keyword" id="4493646">else</span>&nbsp;<span class="op" id="4493651">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493656">l</span><span class="op" id="4493657">.</span><span class="ident" id="4493658">emit</span><span class="op" id="4493662">(</span><span class="ident" id="4493663">itemDot</span><span class="op" id="4493670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493678">return</span>&nbsp;<span class="ident" id="4493685">lexInsideAction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493705">var</span>&nbsp;<span class="ident" id="4493709">r</span>&nbsp;<span class="builtintype" id="4493711">rune</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493717">for</span>&nbsp;<span class="op" id="4493721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493725">r</span>&nbsp;<span class="op" id="4493727">=</span>&nbsp;<span class="ident" id="4493729">l</span><span class="op" id="4493730">.</span><span class="ident" id="4493731">next</span><span class="op" id="4493735">(</span><span class="op" id="4493736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493740">if</span>&nbsp;<span class="op" id="4493743">!</span><span class="ident" id="4493744">isAlphaNumeric</span><span class="op" id="4493758">(</span><span class="ident" id="4493759">r</span><span class="op" id="4493760">)</span>&nbsp;<span class="op" id="4493762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493767">l</span><span class="op" id="4493768">.</span><span class="ident" id="4493769">backup</span><span class="op" id="4493775">(</span><span class="op" id="4493776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493781">break</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493795">if</span>&nbsp;<span class="op" id="4493798">!</span><span class="ident" id="4493799">l</span><span class="op" id="4493800">.</span><span class="ident" id="4493801">atTerminator</span><span class="op" id="4493813">(</span><span class="op" id="4493814">)</span>&nbsp;<span class="op" id="4493816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493820">return</span>&nbsp;<span class="ident" id="4493827">l</span><span class="op" id="4493828">.</span><span class="ident" id="4493829">errorf</span><span class="op" id="4493835">(</span><span class="string" id="4493836">&#34;bad&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4493855">,</span>&nbsp;<span class="ident" id="4493857">r</span><span class="op" id="4493858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4493861">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4493864">l</span><span class="op" id="4493865">.</span><span class="ident" id="4493866">emit</span><span class="op" id="4493870">(</span><span class="ident" id="4493871">typ</span><span class="op" id="4493874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4493877">return</span>&nbsp;<span class="ident" id="4493884">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4493900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4493903">//&nbsp;atTerminator&nbsp;reports&nbsp;whether&nbsp;the&nbsp;input&nbsp;is&nbsp;at&nbsp;valid&nbsp;termination&nbsp;character&nbsp;to</span><br>
<span class="lineno">415</span><span class="comment" id="4493982">//&nbsp;appear&nbsp;after&nbsp;an&nbsp;identifier.&nbsp;Breaks&nbsp;.X.Y&nbsp;into&nbsp;two&nbsp;pieces.&nbsp;Also&nbsp;catches&nbsp;cases</span><br>
<span class="lineno"></span><span class="comment" id="4494061">//&nbsp;like&nbsp;&#34;$x+2&#34;&nbsp;not&nbsp;being&nbsp;acceptable&nbsp;without&nbsp;a&nbsp;space,&nbsp;in&nbsp;case&nbsp;we&nbsp;decide&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="4494136">//&nbsp;day&nbsp;to&nbsp;implement&nbsp;arithmetic.</span><br>
<span class="lineno"></span><span class="keyword" id="4494168">func</span>&nbsp;<span class="op" id="4494173">(</span><span class="ident" id="4494174">l</span>&nbsp;<span class="op" id="4494176">*</span><span class="ident" id="4494177">lexer</span><span class="op" id="4494182">)</span>&nbsp;<span class="ident" id="4494184">atTerminator</span><span class="op" id="4494196">(</span><span class="op" id="4494197">)</span>&nbsp;<span class="builtintype" id="4494199">bool</span>&nbsp;<span class="op" id="4494204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4494207">r</span>&nbsp;<span class="op" id="4494209">:=</span>&nbsp;<span class="ident" id="4494212">l</span><span class="op" id="4494213">.</span><span class="ident" id="4494214">peek</span><span class="op" id="4494218">(</span><span class="op" id="4494219">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494222">if</span>&nbsp;<span class="ident" id="4494225">isSpace</span><span class="op" id="4494232">(</span><span class="ident" id="4494233">r</span><span class="op" id="4494234">)</span>&nbsp;<span class="op" id="4494236">||</span>&nbsp;<span class="ident" id="4494239">isEndOfLine</span><span class="op" id="4494250">(</span><span class="ident" id="4494251">r</span><span class="op" id="4494252">)</span>&nbsp;<span class="op" id="4494254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494258">return</span>&nbsp;<span class="ident" id="4494265">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4494271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494274">switch</span>&nbsp;<span class="ident" id="4494281">r</span>&nbsp;<span class="op" id="4494283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494286">case</span>&nbsp;<span class="ident" id="4494291">eof</span><span class="op" id="4494294">,</span>&nbsp;<span class="string" id="4494296">&#39;.&#39;</span><span class="op" id="4494299">,</span>&nbsp;<span class="string" id="4494301">&#39;,&#39;</span><span class="op" id="4494304">,</span>&nbsp;<span class="string" id="4494306">&#39;|&#39;</span><span class="op" id="4494309">,</span>&nbsp;<span class="string" id="4494311">&#39;:&#39;</span><span class="op" id="4494314">,</span>&nbsp;<span class="string" id="4494316">&#39;)&#39;</span><span class="op" id="4494319">,</span>&nbsp;<span class="string" id="4494321">&#39;(&#39;</span><span class="op" id="4494324">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494328">return</span>&nbsp;<span class="ident" id="4494335">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4494341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4494344">//&nbsp;Does&nbsp;r&nbsp;start&nbsp;the&nbsp;delimiter?&nbsp;This&nbsp;can&nbsp;be&nbsp;ambiguous&nbsp;(with&nbsp;delim==&#34;//&#34;,&nbsp;$x/2&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4494427">//&nbsp;succeed&nbsp;but&nbsp;should&nbsp;fail)&nbsp;but&nbsp;only&nbsp;in&nbsp;extremely&nbsp;rare&nbsp;cases&nbsp;caused&nbsp;by&nbsp;willfully</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4494509">//&nbsp;bad&nbsp;choice&nbsp;of&nbsp;delimiter.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494538">if</span>&nbsp;<span class="ident" id="4494541">rd</span><span class="op" id="4494543">,</span>&nbsp;<span class="ident" id="4494545">_</span>&nbsp;<span class="op" id="4494547">:=</span>&nbsp;<span class="ident" id="4494550">utf8</span><span class="op" id="4494554">.</span><span class="ident" id="4494555">DecodeRuneInString</span><span class="op" id="4494573">(</span><span class="ident" id="4494574">l</span><span class="op" id="4494575">.</span><span class="ident" id="4494576">rightDelim</span><span class="op" id="4494586">)</span><span class="op" id="4494587">;</span>&nbsp;<span class="ident" id="4494589">rd</span>&nbsp;<span class="op" id="4494592">==</span>&nbsp;<span class="ident" id="4494595">r</span>&nbsp;<span class="op" id="4494597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494601">return</span>&nbsp;<span class="ident" id="4494608">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4494614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494617">return</span>&nbsp;<span class="ident" id="4494624">false</span><br>
<span class="lineno"></span><span class="op" id="4494630">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="4494633">//&nbsp;lexChar&nbsp;scans&nbsp;a&nbsp;character&nbsp;constant.&nbsp;The&nbsp;initial&nbsp;quote&nbsp;is&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="4494701">//&nbsp;scanned.&nbsp;Syntax&nbsp;checking&nbsp;is&nbsp;done&nbsp;by&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><span class="keyword" id="4494752">func</span>&nbsp;<span class="ident" id="4494757">lexChar</span><span class="op" id="4494764">(</span><span class="ident" id="4494765">l</span>&nbsp;<span class="op" id="4494767">*</span><span class="ident" id="4494768">lexer</span><span class="op" id="4494773">)</span>&nbsp;<span class="ident" id="4494775">stateFn</span>&nbsp;<span class="op" id="4494783">{</span><br>
<span class="lineno"></span><span class="ident" id="4494785">Loop</span><span class="op" id="4494789">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494792">for</span>&nbsp;<span class="op" id="4494796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494800">switch</span>&nbsp;<span class="ident" id="4494807">l</span><span class="op" id="4494808">.</span><span class="ident" id="4494809">next</span><span class="op" id="4494813">(</span><span class="op" id="4494814">)</span>&nbsp;<span class="op" id="4494816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494820">case</span>&nbsp;<span class="string" id="4494825">&#39;\\&#39;</span><span class="op" id="4494829">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494834">if</span>&nbsp;<span class="ident" id="4494837">r</span>&nbsp;<span class="op" id="4494839">:=</span>&nbsp;<span class="ident" id="4494842">l</span><span class="op" id="4494843">.</span><span class="ident" id="4494844">next</span><span class="op" id="4494848">(</span><span class="op" id="4494849">)</span><span class="op" id="4494850">;</span>&nbsp;<span class="ident" id="4494852">r</span>&nbsp;<span class="op" id="4494854">!=</span>&nbsp;<span class="ident" id="4494857">eof</span>&nbsp;<span class="op" id="4494861">&amp;&amp;</span>&nbsp;<span class="ident" id="4494864">r</span>&nbsp;<span class="op" id="4494866">!=</span>&nbsp;<span class="string" id="4494869">&#39;\n&#39;</span>&nbsp;<span class="op" id="4494874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494880">break</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4494889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494894">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494908">case</span>&nbsp;<span class="ident" id="4494913">eof</span><span class="op" id="4494916">,</span>&nbsp;<span class="string" id="4494918">&#39;\n&#39;</span><span class="op" id="4494922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494927">return</span>&nbsp;<span class="ident" id="4494934">l</span><span class="op" id="4494935">.</span><span class="ident" id="4494936">errorf</span><span class="op" id="4494942">(</span><span class="string" id="4494943">&#34;unterminated&nbsp;character&nbsp;constant&#34;</span><span class="op" id="4494976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494980">case</span>&nbsp;<span class="string" id="4494985">&#39;\&#39;&#39;</span><span class="op" id="4494989">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4494994">break</span>&nbsp;<span class="ident" id="4495000">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495013">l</span><span class="op" id="4495014">.</span><span class="ident" id="4495015">emit</span><span class="op" id="4495019">(</span><span class="ident" id="4495020">itemCharConstant</span><span class="op" id="4495036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495039">return</span>&nbsp;<span class="ident" id="4495046">lexInsideAction</span><br>
<span class="lineno">455</span><span class="op" id="4495062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4495065">//&nbsp;lexNumber&nbsp;scans&nbsp;a&nbsp;number:&nbsp;decimal,&nbsp;octal,&nbsp;hex,&nbsp;float,&nbsp;or&nbsp;imaginary.&nbsp;This</span><br>
<span class="lineno"></span><span class="comment" id="4495141">//&nbsp;isn&#39;t&nbsp;a&nbsp;perfect&nbsp;number&nbsp;scanner&nbsp;-&nbsp;for&nbsp;instance&nbsp;it&nbsp;accepts&nbsp;&#34;.&#34;&nbsp;and&nbsp;&#34;0x0.2&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4495217">//&nbsp;and&nbsp;&#34;089&#34;&nbsp;-&nbsp;but&nbsp;when&nbsp;it&#39;s&nbsp;wrong&nbsp;the&nbsp;input&nbsp;is&nbsp;invalid&nbsp;and&nbsp;the&nbsp;parser&nbsp;(via</span><br>
<span class="lineno">460</span><span class="comment" id="4495293">//&nbsp;strconv)&nbsp;will&nbsp;notice.</span><br>
<span class="lineno"></span><span class="keyword" id="4495318">func</span>&nbsp;<span class="ident" id="4495323">lexNumber</span><span class="op" id="4495332">(</span><span class="ident" id="4495333">l</span>&nbsp;<span class="op" id="4495335">*</span><span class="ident" id="4495336">lexer</span><span class="op" id="4495341">)</span>&nbsp;<span class="ident" id="4495343">stateFn</span>&nbsp;<span class="op" id="4495351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495354">if</span>&nbsp;<span class="op" id="4495357">!</span><span class="ident" id="4495358">l</span><span class="op" id="4495359">.</span><span class="ident" id="4495360">scanNumber</span><span class="op" id="4495370">(</span><span class="op" id="4495371">)</span>&nbsp;<span class="op" id="4495373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495377">return</span>&nbsp;<span class="ident" id="4495384">l</span><span class="op" id="4495385">.</span><span class="ident" id="4495386">errorf</span><span class="op" id="4495392">(</span><span class="string" id="4495393">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4495416">,</span>&nbsp;<span class="ident" id="4495418">l</span><span class="op" id="4495419">.</span><span class="ident" id="4495420">input</span><span class="op" id="4495425">[</span><span class="ident" id="4495426">l</span><span class="op" id="4495427">.</span><span class="ident" id="4495428">start</span><span class="op" id="4495433">:</span><span class="ident" id="4495434">l</span><span class="op" id="4495435">.</span><span class="ident" id="4495436">pos</span><span class="op" id="4495439">]</span><span class="op" id="4495440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495443">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495446">if</span>&nbsp;<span class="ident" id="4495449">sign</span>&nbsp;<span class="op" id="4495454">:=</span>&nbsp;<span class="ident" id="4495457">l</span><span class="op" id="4495458">.</span><span class="ident" id="4495459">peek</span><span class="op" id="4495463">(</span><span class="op" id="4495464">)</span><span class="op" id="4495465">;</span>&nbsp;<span class="ident" id="4495467">sign</span>&nbsp;<span class="op" id="4495472">==</span>&nbsp;<span class="string" id="4495475">&#39;+&#39;</span>&nbsp;<span class="op" id="4495479">||</span>&nbsp;<span class="ident" id="4495482">sign</span>&nbsp;<span class="op" id="4495487">==</span>&nbsp;<span class="string" id="4495490">&#39;-&#39;</span>&nbsp;<span class="op" id="4495494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4495498">//&nbsp;Complex:&nbsp;1+2i.&nbsp;No&nbsp;spaces,&nbsp;must&nbsp;end&nbsp;in&nbsp;&#39;i&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495546">if</span>&nbsp;<span class="op" id="4495549">!</span><span class="ident" id="4495550">l</span><span class="op" id="4495551">.</span><span class="ident" id="4495552">scanNumber</span><span class="op" id="4495562">(</span><span class="op" id="4495563">)</span>&nbsp;<span class="op" id="4495565">||</span>&nbsp;<span class="ident" id="4495568">l</span><span class="op" id="4495569">.</span><span class="ident" id="4495570">input</span><span class="op" id="4495575">[</span><span class="ident" id="4495576">l</span><span class="op" id="4495577">.</span><span class="ident" id="4495578">pos</span><span class="op" id="4495581">-</span><span class="num" id="4495582">1</span><span class="op" id="4495583">]</span>&nbsp;<span class="op" id="4495585">!=</span>&nbsp;<span class="string" id="4495588">&#39;i&#39;</span>&nbsp;<span class="op" id="4495592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495597">return</span>&nbsp;<span class="ident" id="4495604">l</span><span class="op" id="4495605">.</span><span class="ident" id="4495606">errorf</span><span class="op" id="4495612">(</span><span class="string" id="4495613">&#34;bad&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="4495636">,</span>&nbsp;<span class="ident" id="4495638">l</span><span class="op" id="4495639">.</span><span class="ident" id="4495640">input</span><span class="op" id="4495645">[</span><span class="ident" id="4495646">l</span><span class="op" id="4495647">.</span><span class="ident" id="4495648">start</span><span class="op" id="4495653">:</span><span class="ident" id="4495654">l</span><span class="op" id="4495655">.</span><span class="ident" id="4495656">pos</span><span class="op" id="4495659">]</span><span class="op" id="4495660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495664">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495668">l</span><span class="op" id="4495669">.</span><span class="ident" id="4495670">emit</span><span class="op" id="4495674">(</span><span class="ident" id="4495675">itemComplex</span><span class="op" id="4495686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495689">}</span>&nbsp;<span class="keyword" id="4495691">else</span>&nbsp;<span class="op" id="4495696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495700">l</span><span class="op" id="4495701">.</span><span class="ident" id="4495702">emit</span><span class="op" id="4495706">(</span><span class="ident" id="4495707">itemNumber</span><span class="op" id="4495717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495723">return</span>&nbsp;<span class="ident" id="4495730">lexInsideAction</span><br>
<span class="lineno">475</span><span class="op" id="4495746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4495749">func</span>&nbsp;<span class="op" id="4495754">(</span><span class="ident" id="4495755">l</span>&nbsp;<span class="op" id="4495757">*</span><span class="ident" id="4495758">lexer</span><span class="op" id="4495763">)</span>&nbsp;<span class="ident" id="4495765">scanNumber</span><span class="op" id="4495775">(</span><span class="op" id="4495776">)</span>&nbsp;<span class="builtintype" id="4495778">bool</span>&nbsp;<span class="op" id="4495783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4495786">//&nbsp;Optional&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495813">l</span><span class="op" id="4495814">.</span><span class="ident" id="4495815">accept</span><span class="op" id="4495821">(</span><span class="string" id="4495822">&#34;+-&#34;</span><span class="op" id="4495826">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4495829">//&nbsp;Is&nbsp;it&nbsp;hex?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495844">digits</span>&nbsp;<span class="op" id="4495851">:=</span>&nbsp;<span class="string" id="4495854">&#34;0123456789&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495868">if</span>&nbsp;<span class="ident" id="4495871">l</span><span class="op" id="4495872">.</span><span class="ident" id="4495873">accept</span><span class="op" id="4495879">(</span><span class="string" id="4495880">&#34;0&#34;</span><span class="op" id="4495883">)</span>&nbsp;<span class="op" id="4495885">&amp;&amp;</span>&nbsp;<span class="ident" id="4495888">l</span><span class="op" id="4495889">.</span><span class="ident" id="4495890">accept</span><span class="op" id="4495896">(</span><span class="string" id="4495897">&#34;xX&#34;</span><span class="op" id="4495901">)</span>&nbsp;<span class="op" id="4495903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495907">digits</span>&nbsp;<span class="op" id="4495914">=</span>&nbsp;<span class="string" id="4495916">&#34;0123456789abcdefABCDEF&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4495942">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495945">l</span><span class="op" id="4495946">.</span><span class="ident" id="4495947">acceptRun</span><span class="op" id="4495956">(</span><span class="ident" id="4495957">digits</span><span class="op" id="4495963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4495966">if</span>&nbsp;<span class="ident" id="4495969">l</span><span class="op" id="4495970">.</span><span class="ident" id="4495971">accept</span><span class="op" id="4495977">(</span><span class="string" id="4495978">&#34;.&#34;</span><span class="op" id="4495981">)</span>&nbsp;<span class="op" id="4495983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4495987">l</span><span class="op" id="4495988">.</span><span class="ident" id="4495989">acceptRun</span><span class="op" id="4495998">(</span><span class="ident" id="4495999">digits</span><span class="op" id="4496005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496011">if</span>&nbsp;<span class="ident" id="4496014">l</span><span class="op" id="4496015">.</span><span class="ident" id="4496016">accept</span><span class="op" id="4496022">(</span><span class="string" id="4496023">&#34;eE&#34;</span><span class="op" id="4496027">)</span>&nbsp;<span class="op" id="4496029">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496033">l</span><span class="op" id="4496034">.</span><span class="ident" id="4496035">accept</span><span class="op" id="4496041">(</span><span class="string" id="4496042">&#34;+-&#34;</span><span class="op" id="4496046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496050">l</span><span class="op" id="4496051">.</span><span class="ident" id="4496052">acceptRun</span><span class="op" id="4496061">(</span><span class="string" id="4496062">&#34;0123456789&#34;</span><span class="op" id="4496074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4496080">//&nbsp;Is&nbsp;it&nbsp;imaginary?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496101">l</span><span class="op" id="4496102">.</span><span class="ident" id="4496103">accept</span><span class="op" id="4496109">(</span><span class="string" id="4496110">&#34;i&#34;</span><span class="op" id="4496113">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4496116">//&nbsp;Next&nbsp;thing&nbsp;mustn&#39;t&nbsp;be&nbsp;alphanumeric.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496156">if</span>&nbsp;<span class="ident" id="4496159">isAlphaNumeric</span><span class="op" id="4496173">(</span><span class="ident" id="4496174">l</span><span class="op" id="4496175">.</span><span class="ident" id="4496176">peek</span><span class="op" id="4496180">(</span><span class="op" id="4496181">)</span><span class="op" id="4496182">)</span>&nbsp;<span class="op" id="4496184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496188">l</span><span class="op" id="4496189">.</span><span class="ident" id="4496190">next</span><span class="op" id="4496194">(</span><span class="op" id="4496195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496199">return</span>&nbsp;<span class="ident" id="4496206">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496213">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496216">return</span>&nbsp;<span class="ident" id="4496223">true</span><br>
<span class="lineno"></span><span class="op" id="4496228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4496231">//&nbsp;lexQuote&nbsp;scans&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4496266">func</span>&nbsp;<span class="ident" id="4496271">lexQuote</span><span class="op" id="4496279">(</span><span class="ident" id="4496280">l</span>&nbsp;<span class="op" id="4496282">*</span><span class="ident" id="4496283">lexer</span><span class="op" id="4496288">)</span>&nbsp;<span class="ident" id="4496290">stateFn</span>&nbsp;<span class="op" id="4496298">{</span><br>
<span class="lineno">505</span><span class="ident" id="4496300">Loop</span><span class="op" id="4496304">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496307">for</span>&nbsp;<span class="op" id="4496311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496315">switch</span>&nbsp;<span class="ident" id="4496322">l</span><span class="op" id="4496323">.</span><span class="ident" id="4496324">next</span><span class="op" id="4496328">(</span><span class="op" id="4496329">)</span>&nbsp;<span class="op" id="4496331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496335">case</span>&nbsp;<span class="string" id="4496340">&#39;\\&#39;</span><span class="op" id="4496344">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496349">if</span>&nbsp;<span class="ident" id="4496352">r</span>&nbsp;<span class="op" id="4496354">:=</span>&nbsp;<span class="ident" id="4496357">l</span><span class="op" id="4496358">.</span><span class="ident" id="4496359">next</span><span class="op" id="4496363">(</span><span class="op" id="4496364">)</span><span class="op" id="4496365">;</span>&nbsp;<span class="ident" id="4496367">r</span>&nbsp;<span class="op" id="4496369">!=</span>&nbsp;<span class="ident" id="4496372">eof</span>&nbsp;<span class="op" id="4496376">&amp;&amp;</span>&nbsp;<span class="ident" id="4496379">r</span>&nbsp;<span class="op" id="4496381">!=</span>&nbsp;<span class="string" id="4496384">&#39;\n&#39;</span>&nbsp;<span class="op" id="4496389">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496395">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496409">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496423">case</span>&nbsp;<span class="ident" id="4496428">eof</span><span class="op" id="4496431">,</span>&nbsp;<span class="string" id="4496433">&#39;\n&#39;</span><span class="op" id="4496437">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496442">return</span>&nbsp;<span class="ident" id="4496449">l</span><span class="op" id="4496450">.</span><span class="ident" id="4496451">errorf</span><span class="op" id="4496457">(</span><span class="string" id="4496458">&#34;unterminated&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4496486">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496490">case</span>&nbsp;<span class="string" id="4496495">&#39;&#34;&#39;</span><span class="op" id="4496498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496503">break</span>&nbsp;<span class="ident" id="4496509">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496522">l</span><span class="op" id="4496523">.</span><span class="ident" id="4496524">emit</span><span class="op" id="4496528">(</span><span class="ident" id="4496529">itemString</span><span class="op" id="4496539">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496542">return</span>&nbsp;<span class="ident" id="4496549">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4496565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4496568">//&nbsp;lexRawQuote&nbsp;scans&nbsp;a&nbsp;raw&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4496610">func</span>&nbsp;<span class="ident" id="4496615">lexRawQuote</span><span class="op" id="4496626">(</span><span class="ident" id="4496627">l</span>&nbsp;<span class="op" id="4496629">*</span><span class="ident" id="4496630">lexer</span><span class="op" id="4496635">)</span>&nbsp;<span class="ident" id="4496637">stateFn</span>&nbsp;<span class="op" id="4496645">{</span><br>
<span class="lineno">525</span><span class="ident" id="4496647">Loop</span><span class="op" id="4496651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496654">for</span>&nbsp;<span class="op" id="4496658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496662">switch</span>&nbsp;<span class="ident" id="4496669">l</span><span class="op" id="4496670">.</span><span class="ident" id="4496671">next</span><span class="op" id="4496675">(</span><span class="op" id="4496676">)</span>&nbsp;<span class="op" id="4496678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496682">case</span>&nbsp;<span class="ident" id="4496687">eof</span><span class="op" id="4496690">,</span>&nbsp;<span class="string" id="4496692">&#39;\n&#39;</span><span class="op" id="4496696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496701">return</span>&nbsp;<span class="ident" id="4496708">l</span><span class="op" id="4496709">.</span><span class="ident" id="4496710">errorf</span><span class="op" id="4496716">(</span><span class="string" id="4496717">&#34;unterminated&nbsp;raw&nbsp;quoted&nbsp;string&#34;</span><span class="op" id="4496749">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496753">case</span>&nbsp;<span class="string" id="4496758">&#39;`&#39;</span><span class="op" id="4496761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496766">break</span>&nbsp;<span class="ident" id="4496772">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4496782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4496785">l</span><span class="op" id="4496786">.</span><span class="ident" id="4496787">emit</span><span class="op" id="4496791">(</span><span class="ident" id="4496792">itemRawString</span><span class="op" id="4496805">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496808">return</span>&nbsp;<span class="ident" id="4496815">lexInsideAction</span><br>
<span class="lineno"></span><span class="op" id="4496831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4496834">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;a&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4496885">func</span>&nbsp;<span class="ident" id="4496890">isSpace</span><span class="op" id="4496897">(</span><span class="ident" id="4496898">r</span>&nbsp;<span class="builtintype" id="4496900">rune</span><span class="op" id="4496904">)</span>&nbsp;<span class="builtintype" id="4496906">bool</span>&nbsp;<span class="op" id="4496911">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4496914">return</span>&nbsp;<span class="ident" id="4496921">r</span>&nbsp;<span class="op" id="4496923">==</span>&nbsp;<span class="string" id="4496926">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4496930">||</span>&nbsp;<span class="ident" id="4496933">r</span>&nbsp;<span class="op" id="4496935">==</span>&nbsp;<span class="string" id="4496938">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4496943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4496946">//&nbsp;isEndOfLine&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;end-of-line&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4497008">func</span>&nbsp;<span class="ident" id="4497013">isEndOfLine</span><span class="op" id="4497024">(</span><span class="ident" id="4497025">r</span>&nbsp;<span class="builtintype" id="4497027">rune</span><span class="op" id="4497031">)</span>&nbsp;<span class="builtintype" id="4497033">bool</span>&nbsp;<span class="op" id="4497038">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4497041">return</span>&nbsp;<span class="ident" id="4497048">r</span>&nbsp;<span class="op" id="4497050">==</span>&nbsp;<span class="string" id="4497053">&#39;\r&#39;</span>&nbsp;<span class="op" id="4497058">||</span>&nbsp;<span class="ident" id="4497061">r</span>&nbsp;<span class="op" id="4497063">==</span>&nbsp;<span class="string" id="4497066">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4497071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4497074">//&nbsp;isAlphaNumeric&nbsp;reports&nbsp;whether&nbsp;r&nbsp;is&nbsp;an&nbsp;alphabetic,&nbsp;digit,&nbsp;or&nbsp;underscore.</span><br>
<span class="lineno"></span><span class="keyword" id="4497150">func</span>&nbsp;<span class="ident" id="4497155">isAlphaNumeric</span><span class="op" id="4497169">(</span><span class="ident" id="4497170">r</span>&nbsp;<span class="builtintype" id="4497172">rune</span><span class="op" id="4497176">)</span>&nbsp;<span class="builtintype" id="4497178">bool</span>&nbsp;<span class="op" id="4497183">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4497186">return</span>&nbsp;<span class="ident" id="4497193">r</span>&nbsp;<span class="op" id="4497195">==</span>&nbsp;<span class="string" id="4497198">&#39;_&#39;</span>&nbsp;<span class="op" id="4497202">||</span>&nbsp;<span class="ident" id="4497205">unicode</span><span class="op" id="4497212">.</span><span class="ident" id="4497213">IsLetter</span><span class="op" id="4497221">(</span><span class="ident" id="4497222">r</span><span class="op" id="4497223">)</span>&nbsp;<span class="op" id="4497225">||</span>&nbsp;<span class="ident" id="4497228">unicode</span><span class="op" id="4497235">.</span><span class="ident" id="4497236">IsDigit</span><span class="op" id="4497243">(</span><span class="ident" id="4497244">r</span><span class="op" id="4497245">)</span><br>
<span class="lineno"></span><span class="op" id="4497247">}</span>
</div>
</body>
</html>
