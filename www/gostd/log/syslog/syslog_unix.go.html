<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6015480">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6015535">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6015589">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6015640">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6015673">package</span>&nbsp;<span class="ident" id="6015681">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6015689">import</span>&nbsp;<span class="op" id="6015696">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6015699">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6015709">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="6015715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6015718">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="6015787">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6015833">func</span>&nbsp;<span class="ident" id="6015838">unixSyslog</span><span class="op" id="6015848">(</span><span class="op" id="6015849">)</span>&nbsp;<span class="op" id="6015851">(</span><span class="ident" id="6015852">conn</span>&nbsp;<span class="ident" id="6015857">serverConn</span><span class="op" id="6015867">,</span>&nbsp;<span class="ident" id="6015869">err</span>&nbsp;<span class="builtintype" id="6015873">error</span><span class="op" id="6015878">)</span>&nbsp;<span class="op" id="6015880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015883">logTypes</span>&nbsp;<span class="op" id="6015892">:=</span>&nbsp;<span class="op" id="6015895">[</span><span class="op" id="6015896">]</span><span class="builtintype" id="6015897">string</span><span class="op" id="6015903">{</span><span class="string" id="6015904">&#34;unixgram&#34;</span><span class="op" id="6015914">,</span>&nbsp;<span class="string" id="6015916">&#34;unix&#34;</span><span class="op" id="6015922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6015925">logPaths</span>&nbsp;<span class="op" id="6015934">:=</span>&nbsp;<span class="op" id="6015937">[</span><span class="op" id="6015938">]</span><span class="builtintype" id="6015939">string</span><span class="op" id="6015945">{</span><span class="string" id="6015946">&#34;/dev/log&#34;</span><span class="op" id="6015956">,</span>&nbsp;<span class="string" id="6015958">&#34;/var/run/syslog&#34;</span><span class="op" id="6015975">,</span>&nbsp;<span class="string" id="6015977">&#34;/var/run/log&#34;</span><span class="op" id="6015991">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6015994">for</span>&nbsp;<span class="ident" id="6015998">_</span><span class="op" id="6015999">,</span>&nbsp;<span class="ident" id="6016001">network</span>&nbsp;<span class="op" id="6016009">:=</span>&nbsp;<span class="keyword" id="6016012">range</span>&nbsp;<span class="ident" id="6016018">logTypes</span>&nbsp;<span class="op" id="6016027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016031">for</span>&nbsp;<span class="ident" id="6016035">_</span><span class="op" id="6016036">,</span>&nbsp;<span class="ident" id="6016038">path</span>&nbsp;<span class="op" id="6016043">:=</span>&nbsp;<span class="keyword" id="6016046">range</span>&nbsp;<span class="ident" id="6016052">logPaths</span>&nbsp;<span class="op" id="6016061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6016066">conn</span><span class="op" id="6016070">,</span>&nbsp;<span class="ident" id="6016072">err</span>&nbsp;<span class="op" id="6016076">:=</span>&nbsp;<span class="ident" id="6016079">net</span><span class="op" id="6016082">.</span><span class="ident" id="6016083">Dial</span><span class="op" id="6016087">(</span><span class="ident" id="6016088">network</span><span class="op" id="6016095">,</span>&nbsp;<span class="ident" id="6016097">path</span><span class="op" id="6016101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016106">if</span>&nbsp;<span class="ident" id="6016109">err</span>&nbsp;<span class="op" id="6016113">!=</span>&nbsp;<span class="ident" id="6016116">nil</span>&nbsp;<span class="op" id="6016120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016126">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016138">}</span>&nbsp;<span class="keyword" id="6016140">else</span>&nbsp;<span class="op" id="6016145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016151">return</span>&nbsp;<span class="op" id="6016158">&amp;</span><span class="ident" id="6016159">netConn</span><span class="op" id="6016166">{</span><span class="ident" id="6016167">conn</span><span class="op" id="6016171">:</span>&nbsp;<span class="ident" id="6016173">conn</span><span class="op" id="6016177">,</span>&nbsp;<span class="ident" id="6016179">local</span><span class="op" id="6016184">:</span>&nbsp;<span class="builtintype" id="6016186">true</span><span class="op" id="6016190">}</span><span class="op" id="6016191">,</span>&nbsp;<span class="ident" id="6016193">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6016207">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6016210">return</span>&nbsp;<span class="ident" id="6016217">nil</span><span class="op" id="6016220">,</span>&nbsp;<span class="ident" id="6016222">errors</span><span class="op" id="6016228">.</span><span class="ident" id="6016229">New</span><span class="op" id="6016232">(</span><span class="string" id="6016233">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="6016261">)</span><br>
<span class="lineno"></span><span class="op" id="6016263">}</span>
</div>
</body>
</html>
