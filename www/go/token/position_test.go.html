<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7705029">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7705084">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7705138">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7705189">package</span>&nbsp;<span class="ident" id="7705197">token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7705204">import</span>&nbsp;<span class="op" id="7705211">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705214">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705221">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705234">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7705242">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7705252">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7705255">func</span>&nbsp;<span class="ident" id="7705260">checkPos</span><span class="op" id="7705268">(</span><span class="ident" id="7705269">t</span>&nbsp;<span class="op" id="7705271">*</span><span class="ident" id="7705272"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7705279">.</span><span class="ident" id="7705280">T</span><span class="op" id="7705281">,</span>&nbsp;<span class="ident" id="7705283">msg</span>&nbsp;<span class="builtintype" id="7705287">string</span><span class="op" id="7705293">,</span>&nbsp;<span class="ident" id="7705295">got</span><span class="op" id="7705298">,</span>&nbsp;<span class="ident" id="7705300">want</span>&nbsp;<span class="ident" id="7705305"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7705313">)</span>&nbsp;<span class="op" id="7705315">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705318">if</span>&nbsp;<span class="ident" id="7705321"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705324">.</span><span class="ident" id="7705325">Filename</span>&nbsp;<span class="op" id="7705334">!=</span>&nbsp;<span class="ident" id="7705337"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705341">.</span><span class="ident" id="7705342">Filename</span>&nbsp;<span class="op" id="7705351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705355"><a href="/go/token/position_test.go.html#7705269">t</a></span><span class="op" id="7705356">.</span><span class="ident" id="7705357">Errorf</span><span class="op" id="7705363">(</span><span class="string" id="7705364">&#34;%s:&nbsp;got&nbsp;filename&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7705396">,</span>&nbsp;<span class="ident" id="7705398"><a href="/go/token/position_test.go.html#7705283">msg</a></span><span class="op" id="7705401">,</span>&nbsp;<span class="ident" id="7705403"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705406">.</span><span class="ident" id="7705407">Filename</span><span class="op" id="7705415">,</span>&nbsp;<span class="ident" id="7705417"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705421">.</span><span class="ident" id="7705422">Filename</span><span class="op" id="7705430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705436">if</span>&nbsp;<span class="ident" id="7705439"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705442">.</span><span class="ident" id="7705443">Offset</span>&nbsp;<span class="op" id="7705450">!=</span>&nbsp;<span class="ident" id="7705453"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705457">.</span><span class="ident" id="7705458">Offset</span>&nbsp;<span class="op" id="7705465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705469"><a href="/go/token/position_test.go.html#7705269">t</a></span><span class="op" id="7705470">.</span><span class="ident" id="7705471">Errorf</span><span class="op" id="7705477">(</span><span class="string" id="7705478">&#34;%s:&nbsp;got&nbsp;offset&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7705508">,</span>&nbsp;<span class="ident" id="7705510"><a href="/go/token/position_test.go.html#7705283">msg</a></span><span class="op" id="7705513">,</span>&nbsp;<span class="ident" id="7705515"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705518">.</span><span class="ident" id="7705519">Offset</span><span class="op" id="7705525">,</span>&nbsp;<span class="ident" id="7705527"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705531">.</span><span class="ident" id="7705532">Offset</span><span class="op" id="7705538">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705544">if</span>&nbsp;<span class="ident" id="7705547"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705550">.</span><span class="ident" id="7705551">Line</span>&nbsp;<span class="op" id="7705556">!=</span>&nbsp;<span class="ident" id="7705559"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705563">.</span><span class="ident" id="7705564">Line</span>&nbsp;<span class="op" id="7705569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705573"><a href="/go/token/position_test.go.html#7705269">t</a></span><span class="op" id="7705574">.</span><span class="ident" id="7705575">Errorf</span><span class="op" id="7705581">(</span><span class="string" id="7705582">&#34;%s:&nbsp;got&nbsp;line&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7705610">,</span>&nbsp;<span class="ident" id="7705612"><a href="/go/token/position_test.go.html#7705283">msg</a></span><span class="op" id="7705615">,</span>&nbsp;<span class="ident" id="7705617"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705620">.</span><span class="ident" id="7705621">Line</span><span class="op" id="7705625">,</span>&nbsp;<span class="ident" id="7705627"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705631">.</span><span class="ident" id="7705632">Line</span><span class="op" id="7705636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705642">if</span>&nbsp;<span class="ident" id="7705645"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705648">.</span><span class="ident" id="7705649">Column</span>&nbsp;<span class="op" id="7705656">!=</span>&nbsp;<span class="ident" id="7705659"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705663">.</span><span class="ident" id="7705664">Column</span>&nbsp;<span class="op" id="7705671">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705675"><a href="/go/token/position_test.go.html#7705269">t</a></span><span class="op" id="7705676">.</span><span class="ident" id="7705677">Errorf</span><span class="op" id="7705683">(</span><span class="string" id="7705684">&#34;%s:&nbsp;got&nbsp;column&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7705714">,</span>&nbsp;<span class="ident" id="7705716"><a href="/go/token/position_test.go.html#7705283">msg</a></span><span class="op" id="7705719">,</span>&nbsp;<span class="ident" id="7705721"><a href="/go/token/position_test.go.html#7705295">got</a></span><span class="op" id="7705724">.</span><span class="ident" id="7705725">Column</span><span class="op" id="7705731">,</span>&nbsp;<span class="ident" id="7705733"><a href="/go/token/position_test.go.html#7705300">want</a></span><span class="op" id="7705737">.</span><span class="ident" id="7705738">Column</span><span class="op" id="7705744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705747">}</span><br>
<span class="lineno"></span><span class="op" id="7705749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7705752">func</span>&nbsp;<span class="ident" id="7705757">TestNoPos</span><span class="op" id="7705766">(</span><span class="ident" id="7705767">t</span>&nbsp;<span class="op" id="7705769">*</span><span class="ident" id="7705770"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7705777">.</span><span class="ident" id="7705778">T</span><span class="op" id="7705779">)</span>&nbsp;<span class="op" id="7705781">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705784">if</span>&nbsp;<span class="ident" id="7705787"><a href="/go/token/position.go.html#5174218">NoPos</a></span><span class="op" id="7705792">.</span><span class="ident" id="7705793">IsValid</span><span class="op" id="7705800">(</span><span class="op" id="7705801">)</span>&nbsp;<span class="op" id="7705803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705807"><a href="/go/token/position_test.go.html#7705767">t</a></span><span class="op" id="7705808">.</span><span class="ident" id="7705809">Errorf</span><span class="op" id="7705815">(</span><span class="string" id="7705816">&#34;NoPos&nbsp;should&nbsp;not&nbsp;be&nbsp;valid&#34;</span><span class="op" id="7705843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7705846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7705849">var</span>&nbsp;<span class="ident" id="7705853">fset</span>&nbsp;<span class="op" id="7705858">*</span><span class="ident" id="7705859"><a href="/go/token/position.go.html#5181511">FileSet</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705868"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7705876">(</span><span class="ident" id="7705877"><a href="/go/token/position_test.go.html#7705767">t</a></span><span class="op" id="7705878">,</span>&nbsp;<span class="string" id="7705880">&#34;nil&nbsp;NoPos&#34;</span><span class="op" id="7705891">,</span>&nbsp;<span class="ident" id="7705893"><a href="/go/token/position_test.go.html#7705853">fset</a></span><span class="op" id="7705897">.</span><span class="ident" id="7705898">Position</span><span class="op" id="7705906">(</span><span class="ident" id="7705907"><a href="/go/token/position.go.html#5174218">NoPos</a></span><span class="op" id="7705912">)</span><span class="op" id="7705913">,</span>&nbsp;<span class="ident" id="7705915"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7705923">{</span><span class="op" id="7705924">}</span><span class="op" id="7705925">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705928"><a href="/go/token/position_test.go.html#7705853">fset</a></span>&nbsp;<span class="op" id="7705933">=</span>&nbsp;<span class="ident" id="7705935"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7705945">(</span><span class="op" id="7705946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7705949"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7705957">(</span><span class="ident" id="7705958"><a href="/go/token/position_test.go.html#7705767">t</a></span><span class="op" id="7705959">,</span>&nbsp;<span class="string" id="7705961">&#34;fset&nbsp;NoPos&#34;</span><span class="op" id="7705973">,</span>&nbsp;<span class="ident" id="7705975"><a href="/go/token/position_test.go.html#7705853">fset</a></span><span class="op" id="7705979">.</span><span class="ident" id="7705980">Position</span><span class="op" id="7705988">(</span><span class="ident" id="7705989"><a href="/go/token/position.go.html#5174218">NoPos</a></span><span class="op" id="7705994">)</span><span class="op" id="7705995">,</span>&nbsp;<span class="ident" id="7705997"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7706005">{</span><span class="op" id="7706006">}</span><span class="op" id="7706007">)</span><br>
<span class="lineno"></span><span class="op" id="7706009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7706012">var</span>&nbsp;<span class="ident" id="7706016">tests</span>&nbsp;<span class="op" id="7706022">=</span>&nbsp;<span class="op" id="7706024">[</span><span class="op" id="7706025">]</span><span class="keyword" id="7706026">struct</span>&nbsp;<span class="op" id="7706033">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706036">filename</span>&nbsp;<span class="builtintype" id="7706045">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706053">source</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7706062">[</span><span class="op" id="7706063">]</span><span class="builtintype" id="7706064">byte</span>&nbsp;<span class="comment" id="7706069">//&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706084">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7706093">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706098">lines</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7706107">[</span><span class="op" id="7706108">]</span><span class="builtintype" id="7706109">int</span><br>
<span class="lineno"></span><span class="op" id="7706113">}</span><span class="op" id="7706114">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706117">{</span><span class="string" id="7706118">&#34;a&#34;</span><span class="op" id="7706121">,</span>&nbsp;<span class="op" id="7706123">[</span><span class="op" id="7706124">]</span><span class="builtintype" id="7706125">byte</span><span class="op" id="7706129">{</span><span class="op" id="7706130">}</span><span class="op" id="7706131">,</span>&nbsp;<span class="num" id="7706133">0</span><span class="op" id="7706134">,</span>&nbsp;<span class="op" id="7706136">[</span><span class="op" id="7706137">]</span><span class="builtintype" id="7706138">int</span><span class="op" id="7706141">{</span><span class="op" id="7706142">}</span><span class="op" id="7706143">}</span><span class="op" id="7706144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706147">{</span><span class="string" id="7706148">&#34;b&#34;</span><span class="op" id="7706151">,</span>&nbsp;<span class="op" id="7706153">[</span><span class="op" id="7706154">]</span><span class="builtintype" id="7706155">byte</span><span class="op" id="7706159">(</span><span class="string" id="7706160">&#34;01234&#34;</span><span class="op" id="7706167">)</span><span class="op" id="7706168">,</span>&nbsp;<span class="num" id="7706170">5</span><span class="op" id="7706171">,</span>&nbsp;<span class="op" id="7706173">[</span><span class="op" id="7706174">]</span><span class="builtintype" id="7706175">int</span><span class="op" id="7706178">{</span><span class="num" id="7706179">0</span><span class="op" id="7706180">}</span><span class="op" id="7706181">}</span><span class="op" id="7706182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706185">{</span><span class="string" id="7706186">&#34;c&#34;</span><span class="op" id="7706189">,</span>&nbsp;<span class="op" id="7706191">[</span><span class="op" id="7706192">]</span><span class="builtintype" id="7706193">byte</span><span class="op" id="7706197">(</span><span class="string" id="7706198">&#34;\n\n\n\n\n\n\n\n\n&#34;</span><span class="op" id="7706218">)</span><span class="op" id="7706219">,</span>&nbsp;<span class="num" id="7706221">9</span><span class="op" id="7706222">,</span>&nbsp;<span class="op" id="7706224">[</span><span class="op" id="7706225">]</span><span class="builtintype" id="7706226">int</span><span class="op" id="7706229">{</span><span class="num" id="7706230">0</span><span class="op" id="7706231">,</span>&nbsp;<span class="num" id="7706233">1</span><span class="op" id="7706234">,</span>&nbsp;<span class="num" id="7706236">2</span><span class="op" id="7706237">,</span>&nbsp;<span class="num" id="7706239">3</span><span class="op" id="7706240">,</span>&nbsp;<span class="num" id="7706242">4</span><span class="op" id="7706243">,</span>&nbsp;<span class="num" id="7706245">5</span><span class="op" id="7706246">,</span>&nbsp;<span class="num" id="7706248">6</span><span class="op" id="7706249">,</span>&nbsp;<span class="num" id="7706251">7</span><span class="op" id="7706252">,</span>&nbsp;<span class="num" id="7706254">8</span><span class="op" id="7706255">}</span><span class="op" id="7706256">}</span><span class="op" id="7706257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706260">{</span><span class="string" id="7706261">&#34;d&#34;</span><span class="op" id="7706264">,</span>&nbsp;<span class="ident" id="7706266">nil</span><span class="op" id="7706269">,</span>&nbsp;<span class="num" id="7706271">100</span><span class="op" id="7706274">,</span>&nbsp;<span class="op" id="7706276">[</span><span class="op" id="7706277">]</span><span class="builtintype" id="7706278">int</span><span class="op" id="7706281">{</span><span class="num" id="7706282">0</span><span class="op" id="7706283">,</span>&nbsp;<span class="num" id="7706285">5</span><span class="op" id="7706286">,</span>&nbsp;<span class="num" id="7706288">10</span><span class="op" id="7706290">,</span>&nbsp;<span class="num" id="7706292">20</span><span class="op" id="7706294">,</span>&nbsp;<span class="num" id="7706296">30</span><span class="op" id="7706298">,</span>&nbsp;<span class="num" id="7706300">70</span><span class="op" id="7706302">,</span>&nbsp;<span class="num" id="7706304">71</span><span class="op" id="7706306">,</span>&nbsp;<span class="num" id="7706308">72</span><span class="op" id="7706310">,</span>&nbsp;<span class="num" id="7706312">80</span><span class="op" id="7706314">,</span>&nbsp;<span class="num" id="7706316">85</span><span class="op" id="7706318">,</span>&nbsp;<span class="num" id="7706320">90</span><span class="op" id="7706322">,</span>&nbsp;<span class="num" id="7706324">99</span><span class="op" id="7706326">}</span><span class="op" id="7706327">}</span><span class="op" id="7706328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706331">{</span><span class="string" id="7706332">&#34;e&#34;</span><span class="op" id="7706335">,</span>&nbsp;<span class="ident" id="7706337">nil</span><span class="op" id="7706340">,</span>&nbsp;<span class="num" id="7706342">777</span><span class="op" id="7706345">,</span>&nbsp;<span class="op" id="7706347">[</span><span class="op" id="7706348">]</span><span class="builtintype" id="7706349">int</span><span class="op" id="7706352">{</span><span class="num" id="7706353">0</span><span class="op" id="7706354">,</span>&nbsp;<span class="num" id="7706356">80</span><span class="op" id="7706358">,</span>&nbsp;<span class="num" id="7706360">100</span><span class="op" id="7706363">,</span>&nbsp;<span class="num" id="7706365">120</span><span class="op" id="7706368">,</span>&nbsp;<span class="num" id="7706370">130</span><span class="op" id="7706373">,</span>&nbsp;<span class="num" id="7706375">180</span><span class="op" id="7706378">,</span>&nbsp;<span class="num" id="7706380">267</span><span class="op" id="7706383">,</span>&nbsp;<span class="num" id="7706385">455</span><span class="op" id="7706388">,</span>&nbsp;<span class="num" id="7706390">500</span><span class="op" id="7706393">,</span>&nbsp;<span class="num" id="7706395">567</span><span class="op" id="7706398">,</span>&nbsp;<span class="num" id="7706400">620</span><span class="op" id="7706403">}</span><span class="op" id="7706404">}</span><span class="op" id="7706405">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706408">{</span><span class="string" id="7706409">&#34;f&#34;</span><span class="op" id="7706412">,</span>&nbsp;<span class="op" id="7706414">[</span><span class="op" id="7706415">]</span><span class="builtintype" id="7706416">byte</span><span class="op" id="7706420">(</span><span class="string" id="7706421">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;&#34;</span><span class="op" id="7706450">)</span><span class="op" id="7706451">,</span>&nbsp;<span class="num" id="7706453">23</span><span class="op" id="7706455">,</span>&nbsp;<span class="op" id="7706457">[</span><span class="op" id="7706458">]</span><span class="builtintype" id="7706459">int</span><span class="op" id="7706462">{</span><span class="num" id="7706463">0</span><span class="op" id="7706464">,</span>&nbsp;<span class="num" id="7706466">10</span><span class="op" id="7706468">,</span>&nbsp;<span class="num" id="7706470">11</span><span class="op" id="7706472">}</span><span class="op" id="7706473">}</span><span class="op" id="7706474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706477">{</span><span class="string" id="7706478">&#34;g&#34;</span><span class="op" id="7706481">,</span>&nbsp;<span class="op" id="7706483">[</span><span class="op" id="7706484">]</span><span class="builtintype" id="7706485">byte</span><span class="op" id="7706489">(</span><span class="string" id="7706490">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;\n&#34;</span><span class="op" id="7706521">)</span><span class="op" id="7706522">,</span>&nbsp;<span class="num" id="7706524">24</span><span class="op" id="7706526">,</span>&nbsp;<span class="op" id="7706528">[</span><span class="op" id="7706529">]</span><span class="builtintype" id="7706530">int</span><span class="op" id="7706533">{</span><span class="num" id="7706534">0</span><span class="op" id="7706535">,</span>&nbsp;<span class="num" id="7706537">10</span><span class="op" id="7706539">,</span>&nbsp;<span class="num" id="7706541">11</span><span class="op" id="7706543">}</span><span class="op" id="7706544">}</span><span class="op" id="7706545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706548">{</span><span class="string" id="7706549">&#34;h&#34;</span><span class="op" id="7706552">,</span>&nbsp;<span class="op" id="7706554">[</span><span class="op" id="7706555">]</span><span class="builtintype" id="7706556">byte</span><span class="op" id="7706560">(</span><span class="string" id="7706561">&#34;package&nbsp;p\n\nimport&nbsp;\&#34;fmt\&#34;\n&nbsp;&#34;</span><span class="op" id="7706593">)</span><span class="op" id="7706594">,</span>&nbsp;<span class="num" id="7706596">25</span><span class="op" id="7706598">,</span>&nbsp;<span class="op" id="7706600">[</span><span class="op" id="7706601">]</span><span class="builtintype" id="7706602">int</span><span class="op" id="7706605">{</span><span class="num" id="7706606">0</span><span class="op" id="7706607">,</span>&nbsp;<span class="num" id="7706609">10</span><span class="op" id="7706611">,</span>&nbsp;<span class="num" id="7706613">11</span><span class="op" id="7706615">,</span>&nbsp;<span class="num" id="7706617">24</span><span class="op" id="7706619">}</span><span class="op" id="7706620">}</span><span class="op" id="7706621">,</span><br>
<span class="lineno"></span><span class="op" id="7706623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="7706626">func</span>&nbsp;<span class="ident" id="7706631">linecol</span><span class="op" id="7706638">(</span><span class="ident" id="7706639">lines</span>&nbsp;<span class="op" id="7706645">[</span><span class="op" id="7706646">]</span><span class="builtintype" id="7706647">int</span><span class="op" id="7706650">,</span>&nbsp;<span class="ident" id="7706652">offs</span>&nbsp;<span class="builtintype" id="7706657">int</span><span class="op" id="7706660">)</span>&nbsp;<span class="op" id="7706662">(</span><span class="builtintype" id="7706663">int</span><span class="op" id="7706666">,</span>&nbsp;<span class="builtintype" id="7706668">int</span><span class="op" id="7706671">)</span>&nbsp;<span class="op" id="7706673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706676">prevLineOffs</span>&nbsp;<span class="op" id="7706689">:=</span>&nbsp;<span class="num" id="7706692">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706695">for</span>&nbsp;<span class="ident" id="7706699">line</span><span class="op" id="7706703">,</span>&nbsp;<span class="ident" id="7706705">lineOffs</span>&nbsp;<span class="op" id="7706714">:=</span>&nbsp;<span class="keyword" id="7706717">range</span>&nbsp;<span class="ident" id="7706723"><a href="/go/token/position_test.go.html#7706639">lines</a></span>&nbsp;<span class="op" id="7706729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706733">if</span>&nbsp;<span class="ident" id="7706736"><a href="/go/token/position_test.go.html#7706652">offs</a></span>&nbsp;<span class="op" id="7706741">&lt;</span>&nbsp;<span class="ident" id="7706743"><a href="/go/token/position_test.go.html#7706705">lineOffs</a></span>&nbsp;<span class="op" id="7706752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706757">return</span>&nbsp;<span class="ident" id="7706764"><a href="/go/token/position_test.go.html#7706699">line</a></span><span class="op" id="7706768">,</span>&nbsp;<span class="ident" id="7706770"><a href="/go/token/position_test.go.html#7706652">offs</a></span>&nbsp;<span class="op" id="7706775">-</span>&nbsp;<span class="ident" id="7706777"><a href="/go/token/position_test.go.html#7706676">prevLineOffs</a></span>&nbsp;<span class="op" id="7706790">+</span>&nbsp;<span class="num" id="7706792">1</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706800"><a href="/go/token/position_test.go.html#7706676">prevLineOffs</a></span>&nbsp;<span class="op" id="7706813">=</span>&nbsp;<span class="ident" id="7706815"><a href="/go/token/position_test.go.html#7706705">lineOffs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7706825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706828">return</span>&nbsp;<span class="builtinfunc" id="7706835">len</span><span class="op" id="7706838">(</span><span class="ident" id="7706839"><a href="/go/token/position_test.go.html#7706639">lines</a></span><span class="op" id="7706844">)</span><span class="op" id="7706845">,</span>&nbsp;<span class="ident" id="7706847"><a href="/go/token/position_test.go.html#7706652">offs</a></span>&nbsp;<span class="op" id="7706852">-</span>&nbsp;<span class="ident" id="7706854"><a href="/go/token/position_test.go.html#7706676">prevLineOffs</a></span>&nbsp;<span class="op" id="7706867">+</span>&nbsp;<span class="num" id="7706869">1</span><br>
<span class="lineno"></span><span class="op" id="7706871">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="7706874">func</span>&nbsp;<span class="ident" id="7706879">verifyPositions</span><span class="op" id="7706894">(</span><span class="ident" id="7706895">t</span>&nbsp;<span class="op" id="7706897">*</span><span class="ident" id="7706898"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7706905">.</span><span class="ident" id="7706906">T</span><span class="op" id="7706907">,</span>&nbsp;<span class="ident" id="7706909">fset</span>&nbsp;<span class="op" id="7706914">*</span><span class="ident" id="7706915"><a href="/go/token/position.go.html#5181511">FileSet</a></span><span class="op" id="7706922">,</span>&nbsp;<span class="ident" id="7706924">f</span>&nbsp;<span class="op" id="7706926">*</span><span class="ident" id="7706927"><a href="/go/token/position.go.html#5174541">File</a></span><span class="op" id="7706931">,</span>&nbsp;<span class="ident" id="7706933">lines</span>&nbsp;<span class="op" id="7706939">[</span><span class="op" id="7706940">]</span><span class="builtintype" id="7706941">int</span><span class="op" id="7706944">)</span>&nbsp;<span class="op" id="7706946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7706949">for</span>&nbsp;<span class="ident" id="7706953">offs</span>&nbsp;<span class="op" id="7706958">:=</span>&nbsp;<span class="num" id="7706961">0</span><span class="op" id="7706962">;</span>&nbsp;<span class="ident" id="7706964"><a href="/go/token/position_test.go.html#7706953">offs</a></span>&nbsp;<span class="op" id="7706969">&lt;</span>&nbsp;<span class="ident" id="7706971"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7706972">.</span><span class="ident" id="7706973">Size</span><span class="op" id="7706977">(</span><span class="op" id="7706978">)</span><span class="op" id="7706979">;</span>&nbsp;<span class="ident" id="7706981"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7706985">++</span>&nbsp;<span class="op" id="7706988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7706992">p</span>&nbsp;<span class="op" id="7706994">:=</span>&nbsp;<span class="ident" id="7706997"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7706998">.</span><span class="ident" id="7706999">Pos</span><span class="op" id="7707002">(</span><span class="ident" id="7707003"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707011">offs2</span>&nbsp;<span class="op" id="7707017">:=</span>&nbsp;<span class="ident" id="7707020"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707021">.</span><span class="ident" id="7707022">Offset</span><span class="op" id="7707028">(</span><span class="ident" id="7707029"><a href="/go/token/position_test.go.html#7706992">p</a></span><span class="op" id="7707030">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707034">if</span>&nbsp;<span class="ident" id="7707037"><a href="/go/token/position_test.go.html#7707011">offs2</a></span>&nbsp;<span class="op" id="7707043">!=</span>&nbsp;<span class="ident" id="7707046"><a href="/go/token/position_test.go.html#7706953">offs</a></span>&nbsp;<span class="op" id="7707051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707056"><a href="/go/token/position_test.go.html#7706895">t</a></span><span class="op" id="7707057">.</span><span class="ident" id="7707058">Errorf</span><span class="op" id="7707064">(</span><span class="string" id="7707065">&#34;%s,&nbsp;Offset:&nbsp;got&nbsp;offset&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7707101">,</span>&nbsp;<span class="ident" id="7707103"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707104">.</span><span class="ident" id="7707105">Name</span><span class="op" id="7707109">(</span><span class="op" id="7707110">)</span><span class="op" id="7707111">,</span>&nbsp;<span class="ident" id="7707113"><a href="/go/token/position_test.go.html#7707011">offs2</a></span><span class="op" id="7707118">,</span>&nbsp;<span class="ident" id="7707120"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707132">line</span><span class="op" id="7707136">,</span>&nbsp;<span class="ident" id="7707138">col</span>&nbsp;<span class="op" id="7707142">:=</span>&nbsp;<span class="ident" id="7707145"><a href="/go/token/position_test.go.html#7706631">linecol</a></span><span class="op" id="7707152">(</span><span class="ident" id="7707153"><a href="/go/token/position_test.go.html#7706933">lines</a></span><span class="op" id="7707158">,</span>&nbsp;<span class="ident" id="7707160"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707168">msg</span>&nbsp;<span class="op" id="7707172">:=</span>&nbsp;<span class="ident" id="7707175"><a href="/go/token/position_test.go.html#7705214">fmt</a></span><span class="op" id="7707178">.</span><span class="ident" id="7707179">Sprintf</span><span class="op" id="7707186">(</span><span class="string" id="7707187">&#34;%s&nbsp;(offs&nbsp;=&nbsp;%d,&nbsp;p&nbsp;=&nbsp;%d)&#34;</span><span class="op" id="7707211">,</span>&nbsp;<span class="ident" id="7707213"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707214">.</span><span class="ident" id="7707215">Name</span><span class="op" id="7707219">(</span><span class="op" id="7707220">)</span><span class="op" id="7707221">,</span>&nbsp;<span class="ident" id="7707223"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707227">,</span>&nbsp;<span class="ident" id="7707229"><a href="/go/token/position_test.go.html#7706992">p</a></span><span class="op" id="7707230">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707234"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7707242">(</span><span class="ident" id="7707243"><a href="/go/token/position_test.go.html#7706895">t</a></span><span class="op" id="7707244">,</span>&nbsp;<span class="ident" id="7707246"><a href="/go/token/position_test.go.html#7707168">msg</a></span><span class="op" id="7707249">,</span>&nbsp;<span class="ident" id="7707251"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707252">.</span><span class="ident" id="7707253">Position</span><span class="op" id="7707261">(</span><span class="ident" id="7707262"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707263">.</span><span class="ident" id="7707264">Pos</span><span class="op" id="7707267">(</span><span class="ident" id="7707268"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707272">)</span><span class="op" id="7707273">)</span><span class="op" id="7707274">,</span>&nbsp;<span class="ident" id="7707276"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7707284">{</span><span class="ident" id="7707285"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707286">.</span><span class="ident" id="7707287">Name</span><span class="op" id="7707291">(</span><span class="op" id="7707292">)</span><span class="op" id="7707293">,</span>&nbsp;<span class="ident" id="7707295"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707299">,</span>&nbsp;<span class="ident" id="7707301"><a href="/go/token/position_test.go.html#7707132">line</a></span><span class="op" id="7707305">,</span>&nbsp;<span class="ident" id="7707307"><a href="/go/token/position_test.go.html#7707138">col</a></span><span class="op" id="7707310">}</span><span class="op" id="7707311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707315"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7707323">(</span><span class="ident" id="7707324"><a href="/go/token/position_test.go.html#7706895">t</a></span><span class="op" id="7707325">,</span>&nbsp;<span class="ident" id="7707327"><a href="/go/token/position_test.go.html#7707168">msg</a></span><span class="op" id="7707330">,</span>&nbsp;<span class="ident" id="7707332"><a href="/go/token/position_test.go.html#7706909">fset</a></span><span class="op" id="7707336">.</span><span class="ident" id="7707337">Position</span><span class="op" id="7707345">(</span><span class="ident" id="7707346"><a href="/go/token/position_test.go.html#7706992">p</a></span><span class="op" id="7707347">)</span><span class="op" id="7707348">,</span>&nbsp;<span class="ident" id="7707350"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7707358">{</span><span class="ident" id="7707359"><a href="/go/token/position_test.go.html#7706924">f</a></span><span class="op" id="7707360">.</span><span class="ident" id="7707361">Name</span><span class="op" id="7707365">(</span><span class="op" id="7707366">)</span><span class="op" id="7707367">,</span>&nbsp;<span class="ident" id="7707369"><a href="/go/token/position_test.go.html#7706953">offs</a></span><span class="op" id="7707373">,</span>&nbsp;<span class="ident" id="7707375"><a href="/go/token/position_test.go.html#7707132">line</a></span><span class="op" id="7707379">,</span>&nbsp;<span class="ident" id="7707381"><a href="/go/token/position_test.go.html#7707138">col</a></span><span class="op" id="7707384">}</span><span class="op" id="7707385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707388">}</span><br>
<span class="lineno"></span><span class="op" id="7707390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="7707393">func</span>&nbsp;<span class="ident" id="7707398">makeTestSource</span><span class="op" id="7707412">(</span><span class="ident" id="7707413">size</span>&nbsp;<span class="builtintype" id="7707418">int</span><span class="op" id="7707421">,</span>&nbsp;<span class="ident" id="7707423">lines</span>&nbsp;<span class="op" id="7707429">[</span><span class="op" id="7707430">]</span><span class="builtintype" id="7707431">int</span><span class="op" id="7707434">)</span>&nbsp;<span class="op" id="7707436">[</span><span class="op" id="7707437">]</span><span class="builtintype" id="7707438">byte</span>&nbsp;<span class="op" id="7707443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707446">src</span>&nbsp;<span class="op" id="7707450">:=</span>&nbsp;<span class="builtinfunc" id="7707453">make</span><span class="op" id="7707457">(</span><span class="op" id="7707458">[</span><span class="op" id="7707459">]</span><span class="builtintype" id="7707460">byte</span><span class="op" id="7707464">,</span>&nbsp;<span class="ident" id="7707466"><a href="/go/token/position_test.go.html#7707413">size</a></span><span class="op" id="7707470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707473">for</span>&nbsp;<span class="ident" id="7707477">_</span><span class="op" id="7707478">,</span>&nbsp;<span class="ident" id="7707480">offs</span>&nbsp;<span class="op" id="7707485">:=</span>&nbsp;<span class="keyword" id="7707488">range</span>&nbsp;<span class="ident" id="7707494"><a href="/go/token/position_test.go.html#7707423">lines</a></span>&nbsp;<span class="op" id="7707500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707504">if</span>&nbsp;<span class="ident" id="7707507"><a href="/go/token/position_test.go.html#7707480">offs</a></span>&nbsp;<span class="op" id="7707512">&gt;</span>&nbsp;<span class="num" id="7707514">0</span>&nbsp;<span class="op" id="7707516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707521"><a href="/go/token/position_test.go.html#7707446">src</a></span><span class="op" id="7707524">[</span><span class="ident" id="7707525"><a href="/go/token/position_test.go.html#7707480">offs</a></span><span class="op" id="7707529">-</span><span class="num" id="7707530">1</span><span class="op" id="7707531">]</span>&nbsp;<span class="op" id="7707533">=</span>&nbsp;<span class="string" id="7707535">&#39;\n&#39;</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707548">return</span>&nbsp;<span class="ident" id="7707555"><a href="/go/token/position_test.go.html#7707446">src</a></span><br>
<span class="lineno"></span><span class="op" id="7707559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7707562">func</span>&nbsp;<span class="ident" id="7707567">TestPositions</span><span class="op" id="7707580">(</span><span class="ident" id="7707581">t</span>&nbsp;<span class="op" id="7707583">*</span><span class="ident" id="7707584"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7707591">.</span><span class="ident" id="7707592">T</span><span class="op" id="7707593">)</span>&nbsp;<span class="op" id="7707595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707598">const</span>&nbsp;<span class="ident" id="7707604">delta</span>&nbsp;<span class="op" id="7707610">=</span>&nbsp;<span class="num" id="7707612">7</span>&nbsp;<span class="comment" id="7707614">//&nbsp;a&nbsp;non-zero&nbsp;base&nbsp;offset&nbsp;increment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707651">fset</span>&nbsp;<span class="op" id="7707656">:=</span>&nbsp;<span class="ident" id="7707659"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7707669">(</span><span class="op" id="7707670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707673">for</span>&nbsp;<span class="ident" id="7707677">_</span><span class="op" id="7707678">,</span>&nbsp;<span class="ident" id="7707680">test</span>&nbsp;<span class="op" id="7707685">:=</span>&nbsp;<span class="keyword" id="7707688">range</span>&nbsp;<span class="ident" id="7707694"><a href="/go/token/position_test.go.html#7706016">tests</a></span>&nbsp;<span class="op" id="7707700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7707704">//&nbsp;verify&nbsp;consistency&nbsp;of&nbsp;test&nbsp;case</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7707741">if</span>&nbsp;<span class="ident" id="7707744"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707748">.</span><span class="ident" id="7707749">source</span>&nbsp;<span class="op" id="7707756">!=</span>&nbsp;<span class="ident" id="7707759">nil</span>&nbsp;<span class="op" id="7707763">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="7707766">len</span><span class="op" id="7707769">(</span><span class="ident" id="7707770"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707774">.</span><span class="ident" id="7707775">source</span><span class="op" id="7707781">)</span>&nbsp;<span class="op" id="7707783">!=</span>&nbsp;<span class="ident" id="7707786"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707790">.</span><span class="ident" id="7707791">size</span>&nbsp;<span class="op" id="7707796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707801"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7707802">.</span><span class="ident" id="7707803">Errorf</span><span class="op" id="7707809">(</span><span class="string" id="7707810">&#34;%s:&nbsp;inconsistent&nbsp;test&nbsp;case:&nbsp;got&nbsp;file&nbsp;size&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7707865">,</span>&nbsp;<span class="ident" id="7707867"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707871">.</span><span class="ident" id="7707872">filename</span><span class="op" id="7707880">,</span>&nbsp;<span class="builtinfunc" id="7707882">len</span><span class="op" id="7707885">(</span><span class="ident" id="7707886"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707890">.</span><span class="ident" id="7707891">source</span><span class="op" id="7707897">)</span><span class="op" id="7707898">,</span>&nbsp;<span class="ident" id="7707900"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707904">.</span><span class="ident" id="7707905">size</span><span class="op" id="7707909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7707913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7707918">//&nbsp;add&nbsp;file&nbsp;and&nbsp;verify&nbsp;name&nbsp;and&nbsp;size</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7707957">f</span>&nbsp;<span class="op" id="7707959">:=</span>&nbsp;<span class="ident" id="7707962"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7707966">.</span><span class="ident" id="7707967">AddFile</span><span class="op" id="7707974">(</span><span class="ident" id="7707975"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7707979">.</span><span class="ident" id="7707980">filename</span><span class="op" id="7707988">,</span>&nbsp;<span class="ident" id="7707990"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7707994">.</span><span class="ident" id="7707995">Base</span><span class="op" id="7707999">(</span><span class="op" id="7708000">)</span><span class="op" id="7708001">+</span><span class="ident" id="7708002"><a href="/go/token/position_test.go.html#7707604">delta</a></span><span class="op" id="7708007">,</span>&nbsp;<span class="ident" id="7708009"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708013">.</span><span class="ident" id="7708014">size</span><span class="op" id="7708018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708022">if</span>&nbsp;<span class="ident" id="7708025"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708026">.</span><span class="ident" id="7708027">Name</span><span class="op" id="7708031">(</span><span class="op" id="7708032">)</span>&nbsp;<span class="op" id="7708034">!=</span>&nbsp;<span class="ident" id="7708037"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708041">.</span><span class="ident" id="7708042">filename</span>&nbsp;<span class="op" id="7708051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708056"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708057">.</span><span class="ident" id="7708058">Errorf</span><span class="op" id="7708064">(</span><span class="string" id="7708065">&#34;got&nbsp;filename&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7708091">,</span>&nbsp;<span class="ident" id="7708093"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708094">.</span><span class="ident" id="7708095">Name</span><span class="op" id="7708099">(</span><span class="op" id="7708100">)</span><span class="op" id="7708101">,</span>&nbsp;<span class="ident" id="7708103"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708107">.</span><span class="ident" id="7708108">filename</span><span class="op" id="7708116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708124">if</span>&nbsp;<span class="ident" id="7708127"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708128">.</span><span class="ident" id="7708129">Size</span><span class="op" id="7708133">(</span><span class="op" id="7708134">)</span>&nbsp;<span class="op" id="7708136">!=</span>&nbsp;<span class="ident" id="7708139"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708143">.</span><span class="ident" id="7708144">size</span>&nbsp;<span class="op" id="7708149">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708154"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708155">.</span><span class="ident" id="7708156">Errorf</span><span class="op" id="7708162">(</span><span class="string" id="7708163">&#34;%s:&nbsp;got&nbsp;file&nbsp;size&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7708194">,</span>&nbsp;<span class="ident" id="7708196"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708197">.</span><span class="ident" id="7708198">Name</span><span class="op" id="7708202">(</span><span class="op" id="7708203">)</span><span class="op" id="7708204">,</span>&nbsp;<span class="ident" id="7708206"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708207">.</span><span class="ident" id="7708208">Size</span><span class="op" id="7708212">(</span><span class="op" id="7708213">)</span><span class="op" id="7708214">,</span>&nbsp;<span class="ident" id="7708216"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708220">.</span><span class="ident" id="7708221">size</span><span class="op" id="7708225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708233">if</span>&nbsp;<span class="ident" id="7708236"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7708240">.</span><span class="ident" id="7708241">File</span><span class="op" id="7708245">(</span><span class="ident" id="7708246"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708247">.</span><span class="ident" id="7708248">Pos</span><span class="op" id="7708251">(</span><span class="num" id="7708252">0</span><span class="op" id="7708253">)</span><span class="op" id="7708254">)</span>&nbsp;<span class="op" id="7708256">!=</span>&nbsp;<span class="ident" id="7708259"><a href="/go/token/position_test.go.html#7707957">f</a></span>&nbsp;<span class="op" id="7708261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708266"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708267">.</span><span class="ident" id="7708268">Errorf</span><span class="op" id="7708274">(</span><span class="string" id="7708275">&#34;%s:&nbsp;f.Pos(0)&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;f&#34;</span><span class="op" id="7708308">,</span>&nbsp;<span class="ident" id="7708310"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708311">.</span><span class="ident" id="7708312">Name</span><span class="op" id="7708316">(</span><span class="op" id="7708317">)</span><span class="op" id="7708318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708322">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708327">//&nbsp;add&nbsp;lines&nbsp;individually&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708380">for</span>&nbsp;<span class="ident" id="7708384">i</span><span class="op" id="7708385">,</span>&nbsp;<span class="ident" id="7708387">offset</span>&nbsp;<span class="op" id="7708394">:=</span>&nbsp;<span class="keyword" id="7708397">range</span>&nbsp;<span class="ident" id="7708403"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708407">.</span><span class="ident" id="7708408">lines</span>&nbsp;<span class="op" id="7708414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708419"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708420">.</span><span class="ident" id="7708421">AddLine</span><span class="op" id="7708428">(</span><span class="ident" id="7708429"><a href="/go/token/position_test.go.html#7708387">offset</a></span><span class="op" id="7708435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708440">if</span>&nbsp;<span class="ident" id="7708443"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708444">.</span><span class="ident" id="7708445">LineCount</span><span class="op" id="7708454">(</span><span class="op" id="7708455">)</span>&nbsp;<span class="op" id="7708457">!=</span>&nbsp;<span class="ident" id="7708460"><a href="/go/token/position_test.go.html#7708384">i</a></span><span class="op" id="7708461">+</span><span class="num" id="7708462">1</span>&nbsp;<span class="op" id="7708464">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708470"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708471">.</span><span class="ident" id="7708472">Errorf</span><span class="op" id="7708478">(</span><span class="string" id="7708479">&#34;%s,&nbsp;AddLine:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7708520">,</span>&nbsp;<span class="ident" id="7708522"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708523">.</span><span class="ident" id="7708524">Name</span><span class="op" id="7708528">(</span><span class="op" id="7708529">)</span><span class="op" id="7708530">,</span>&nbsp;<span class="ident" id="7708532"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708533">.</span><span class="ident" id="7708534">LineCount</span><span class="op" id="7708543">(</span><span class="op" id="7708544">)</span><span class="op" id="7708545">,</span>&nbsp;<span class="ident" id="7708547"><a href="/go/token/position_test.go.html#7708384">i</a></span><span class="op" id="7708548">+</span><span class="num" id="7708549">1</span><span class="op" id="7708550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708560">//&nbsp;adding&nbsp;the&nbsp;same&nbsp;offset&nbsp;again&nbsp;should&nbsp;be&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708613"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708614">.</span><span class="ident" id="7708615">AddLine</span><span class="op" id="7708622">(</span><span class="ident" id="7708623"><a href="/go/token/position_test.go.html#7708387">offset</a></span><span class="op" id="7708629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708634">if</span>&nbsp;<span class="ident" id="7708637"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708638">.</span><span class="ident" id="7708639">LineCount</span><span class="op" id="7708648">(</span><span class="op" id="7708649">)</span>&nbsp;<span class="op" id="7708651">!=</span>&nbsp;<span class="ident" id="7708654"><a href="/go/token/position_test.go.html#7708384">i</a></span><span class="op" id="7708655">+</span><span class="num" id="7708656">1</span>&nbsp;<span class="op" id="7708658">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708664"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708665">.</span><span class="ident" id="7708666">Errorf</span><span class="op" id="7708672">(</span><span class="string" id="7708673">&#34;%s,&nbsp;AddLine:&nbsp;got&nbsp;unchanged&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7708724">,</span>&nbsp;<span class="ident" id="7708726"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708727">.</span><span class="ident" id="7708728">Name</span><span class="op" id="7708732">(</span><span class="op" id="7708733">)</span><span class="op" id="7708734">,</span>&nbsp;<span class="ident" id="7708736"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708737">.</span><span class="ident" id="7708738">LineCount</span><span class="op" id="7708747">(</span><span class="op" id="7708748">)</span><span class="op" id="7708749">,</span>&nbsp;<span class="ident" id="7708751"><a href="/go/token/position_test.go.html#7708384">i</a></span><span class="op" id="7708752">+</span><span class="num" id="7708753">1</span><span class="op" id="7708754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708764"><a href="/go/token/position_test.go.html#7706879">verifyPositions</a></span><span class="op" id="7708779">(</span><span class="ident" id="7708780"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708781">,</span>&nbsp;<span class="ident" id="7708783"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7708787">,</span>&nbsp;<span class="ident" id="7708789"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708790">,</span>&nbsp;<span class="ident" id="7708792"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708796">.</span><span class="ident" id="7708797">lines</span><span class="op" id="7708802">[</span><span class="num" id="7708803">0</span><span class="op" id="7708804">:</span><span class="ident" id="7708805"><a href="/go/token/position_test.go.html#7708384">i</a></span><span class="op" id="7708806">+</span><span class="num" id="7708807">1</span><span class="op" id="7708808">]</span><span class="op" id="7708809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708818">//&nbsp;add&nbsp;lines&nbsp;with&nbsp;SetLines&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708872">if</span>&nbsp;<span class="ident" id="7708875">ok</span>&nbsp;<span class="op" id="7708878">:=</span>&nbsp;<span class="ident" id="7708881"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708882">.</span><span class="ident" id="7708883">SetLines</span><span class="op" id="7708891">(</span><span class="ident" id="7708892"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708896">.</span><span class="ident" id="7708897">lines</span><span class="op" id="7708902">)</span><span class="op" id="7708903">;</span>&nbsp;<span class="op" id="7708905">!</span><span class="ident" id="7708906"><a href="/go/token/position_test.go.html#7708875">ok</a></span>&nbsp;<span class="op" id="7708909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708914"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7708915">.</span><span class="ident" id="7708916">Errorf</span><span class="op" id="7708922">(</span><span class="string" id="7708923">&#34;%s:&nbsp;SetLines&nbsp;failed&#34;</span><span class="op" id="7708944">,</span>&nbsp;<span class="ident" id="7708946"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708947">.</span><span class="ident" id="7708948">Name</span><span class="op" id="7708952">(</span><span class="op" id="7708953">)</span><span class="op" id="7708954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708962">if</span>&nbsp;<span class="ident" id="7708965"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7708966">.</span><span class="ident" id="7708967">LineCount</span><span class="op" id="7708976">(</span><span class="op" id="7708977">)</span>&nbsp;<span class="op" id="7708979">!=</span>&nbsp;<span class="builtinfunc" id="7708982">len</span><span class="op" id="7708985">(</span><span class="ident" id="7708986"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7708990">.</span><span class="ident" id="7708991">lines</span><span class="op" id="7708996">)</span>&nbsp;<span class="op" id="7708998">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709003"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7709004">.</span><span class="ident" id="7709005">Errorf</span><span class="op" id="7709011">(</span><span class="string" id="7709012">&#34;%s,&nbsp;SetLines:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7709054">,</span>&nbsp;<span class="ident" id="7709056"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709057">.</span><span class="ident" id="7709058">Name</span><span class="op" id="7709062">(</span><span class="op" id="7709063">)</span><span class="op" id="7709064">,</span>&nbsp;<span class="ident" id="7709066"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709067">.</span><span class="ident" id="7709068">LineCount</span><span class="op" id="7709077">(</span><span class="op" id="7709078">)</span><span class="op" id="7709079">,</span>&nbsp;<span class="builtinfunc" id="7709081">len</span><span class="op" id="7709084">(</span><span class="ident" id="7709085"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709089">.</span><span class="ident" id="7709090">lines</span><span class="op" id="7709095">)</span><span class="op" id="7709096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709104"><a href="/go/token/position_test.go.html#7706879">verifyPositions</a></span><span class="op" id="7709119">(</span><span class="ident" id="7709120"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7709121">,</span>&nbsp;<span class="ident" id="7709123"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7709127">,</span>&nbsp;<span class="ident" id="7709129"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709130">,</span>&nbsp;<span class="ident" id="7709132"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709136">.</span><span class="ident" id="7709137">lines</span><span class="op" id="7709142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7709147">//&nbsp;add&nbsp;lines&nbsp;with&nbsp;SetLinesForContent&nbsp;and&nbsp;verify&nbsp;all&nbsp;positions</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709211">src</span>&nbsp;<span class="op" id="7709215">:=</span>&nbsp;<span class="ident" id="7709218"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709222">.</span><span class="ident" id="7709223">source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709232">if</span>&nbsp;<span class="ident" id="7709235"><a href="/go/token/position_test.go.html#7709211">src</a></span>&nbsp;<span class="op" id="7709239">==</span>&nbsp;<span class="ident" id="7709242">nil</span>&nbsp;<span class="op" id="7709246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7709251">//&nbsp;no&nbsp;test&nbsp;source&nbsp;available&nbsp;-&nbsp;create&nbsp;one&nbsp;from&nbsp;scratch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709308"><a href="/go/token/position_test.go.html#7709211">src</a></span>&nbsp;<span class="op" id="7709312">=</span>&nbsp;<span class="ident" id="7709314"><a href="/go/token/position_test.go.html#7707398">makeTestSource</a></span><span class="op" id="7709328">(</span><span class="ident" id="7709329"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709333">.</span><span class="ident" id="7709334">size</span><span class="op" id="7709338">,</span>&nbsp;<span class="ident" id="7709340"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709344">.</span><span class="ident" id="7709345">lines</span><span class="op" id="7709350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709354">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709358"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709359">.</span><span class="ident" id="7709360">SetLinesForContent</span><span class="op" id="7709378">(</span><span class="ident" id="7709379"><a href="/go/token/position_test.go.html#7709211">src</a></span><span class="op" id="7709382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709386">if</span>&nbsp;<span class="ident" id="7709389"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709390">.</span><span class="ident" id="7709391">LineCount</span><span class="op" id="7709400">(</span><span class="op" id="7709401">)</span>&nbsp;<span class="op" id="7709403">!=</span>&nbsp;<span class="builtinfunc" id="7709406">len</span><span class="op" id="7709409">(</span><span class="ident" id="7709410"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709414">.</span><span class="ident" id="7709415">lines</span><span class="op" id="7709420">)</span>&nbsp;<span class="op" id="7709422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709427"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7709428">.</span><span class="ident" id="7709429">Errorf</span><span class="op" id="7709435">(</span><span class="string" id="7709436">&#34;%s,&nbsp;SetLinesForContent:&nbsp;got&nbsp;line&nbsp;count&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7709488">,</span>&nbsp;<span class="ident" id="7709490"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709491">.</span><span class="ident" id="7709492">Name</span><span class="op" id="7709496">(</span><span class="op" id="7709497">)</span><span class="op" id="7709498">,</span>&nbsp;<span class="ident" id="7709500"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709501">.</span><span class="ident" id="7709502">LineCount</span><span class="op" id="7709511">(</span><span class="op" id="7709512">)</span><span class="op" id="7709513">,</span>&nbsp;<span class="builtinfunc" id="7709515">len</span><span class="op" id="7709518">(</span><span class="ident" id="7709519"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709523">.</span><span class="ident" id="7709524">lines</span><span class="op" id="7709529">)</span><span class="op" id="7709530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709538"><a href="/go/token/position_test.go.html#7706879">verifyPositions</a></span><span class="op" id="7709553">(</span><span class="ident" id="7709554"><a href="/go/token/position_test.go.html#7707581">t</a></span><span class="op" id="7709555">,</span>&nbsp;<span class="ident" id="7709557"><a href="/go/token/position_test.go.html#7707651">fset</a></span><span class="op" id="7709561">,</span>&nbsp;<span class="ident" id="7709563"><a href="/go/token/position_test.go.html#7707957">f</a></span><span class="op" id="7709564">,</span>&nbsp;<span class="ident" id="7709566"><a href="/go/token/position_test.go.html#7707680">test</a></span><span class="op" id="7709570">.</span><span class="ident" id="7709571">lines</span><span class="op" id="7709576">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709579">}</span><br>
<span class="lineno"></span><span class="op" id="7709581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709584">func</span>&nbsp;<span class="ident" id="7709589">TestLineInfo</span><span class="op" id="7709601">(</span><span class="ident" id="7709602">t</span>&nbsp;<span class="op" id="7709604">*</span><span class="ident" id="7709605"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7709612">.</span><span class="ident" id="7709613">T</span><span class="op" id="7709614">)</span>&nbsp;<span class="op" id="7709616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709619">fset</span>&nbsp;<span class="op" id="7709624">:=</span>&nbsp;<span class="ident" id="7709627"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7709637">(</span><span class="op" id="7709638">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709641">f</span>&nbsp;<span class="op" id="7709643">:=</span>&nbsp;<span class="ident" id="7709646"><a href="/go/token/position_test.go.html#7709619">fset</a></span><span class="op" id="7709650">.</span><span class="ident" id="7709651">AddFile</span><span class="op" id="7709658">(</span><span class="string" id="7709659">&#34;foo&#34;</span><span class="op" id="7709664">,</span>&nbsp;<span class="ident" id="7709666"><a href="/go/token/position_test.go.html#7709619">fset</a></span><span class="op" id="7709670">.</span><span class="ident" id="7709671">Base</span><span class="op" id="7709675">(</span><span class="op" id="7709676">)</span><span class="op" id="7709677">,</span>&nbsp;<span class="num" id="7709679">500</span><span class="op" id="7709682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709685">lines</span>&nbsp;<span class="op" id="7709691">:=</span>&nbsp;<span class="op" id="7709694">[</span><span class="op" id="7709695">]</span><span class="builtintype" id="7709696">int</span><span class="op" id="7709699">{</span><span class="num" id="7709700">0</span><span class="op" id="7709701">,</span>&nbsp;<span class="num" id="7709703">42</span><span class="op" id="7709705">,</span>&nbsp;<span class="num" id="7709707">77</span><span class="op" id="7709709">,</span>&nbsp;<span class="num" id="7709711">100</span><span class="op" id="7709714">,</span>&nbsp;<span class="num" id="7709716">210</span><span class="op" id="7709719">,</span>&nbsp;<span class="num" id="7709721">220</span><span class="op" id="7709724">,</span>&nbsp;<span class="num" id="7709726">277</span><span class="op" id="7709729">,</span>&nbsp;<span class="num" id="7709731">300</span><span class="op" id="7709734">,</span>&nbsp;<span class="num" id="7709736">333</span><span class="op" id="7709739">,</span>&nbsp;<span class="num" id="7709741">401</span><span class="op" id="7709744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7709747">//&nbsp;add&nbsp;lines&nbsp;individually&nbsp;and&nbsp;provide&nbsp;alternative&nbsp;line&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709815">for</span>&nbsp;<span class="ident" id="7709819">_</span><span class="op" id="7709820">,</span>&nbsp;<span class="ident" id="7709822">offs</span>&nbsp;<span class="op" id="7709827">:=</span>&nbsp;<span class="keyword" id="7709830">range</span>&nbsp;<span class="ident" id="7709836"><a href="/go/token/position_test.go.html#7709685">lines</a></span>&nbsp;<span class="op" id="7709842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709846"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7709847">.</span><span class="ident" id="7709848">AddLine</span><span class="op" id="7709855">(</span><span class="ident" id="7709856"><a href="/go/token/position_test.go.html#7709822">offs</a></span><span class="op" id="7709860">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709864"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7709865">.</span><span class="ident" id="7709866">AddLineInfo</span><span class="op" id="7709877">(</span><span class="ident" id="7709878"><a href="/go/token/position_test.go.html#7709822">offs</a></span><span class="op" id="7709882">,</span>&nbsp;<span class="string" id="7709884">&#34;bar&#34;</span><span class="op" id="7709889">,</span>&nbsp;<span class="num" id="7709891">42</span><span class="op" id="7709893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7709899">//&nbsp;verify&nbsp;positions&nbsp;for&nbsp;all&nbsp;offsets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709936">for</span>&nbsp;<span class="ident" id="7709940">offs</span>&nbsp;<span class="op" id="7709945">:=</span>&nbsp;<span class="num" id="7709948">0</span><span class="op" id="7709949">;</span>&nbsp;<span class="ident" id="7709951"><a href="/go/token/position_test.go.html#7709940">offs</a></span>&nbsp;<span class="op" id="7709956">&lt;=</span>&nbsp;<span class="ident" id="7709959"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7709960">.</span><span class="ident" id="7709961">Size</span><span class="op" id="7709965">(</span><span class="op" id="7709966">)</span><span class="op" id="7709967">;</span>&nbsp;<span class="ident" id="7709969"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7709973">++</span>&nbsp;<span class="op" id="7709976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709980">p</span>&nbsp;<span class="op" id="7709982">:=</span>&nbsp;<span class="ident" id="7709985"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7709986">.</span><span class="ident" id="7709987">Pos</span><span class="op" id="7709990">(</span><span class="ident" id="7709991"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7709995">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709999">_</span><span class="op" id="7710000">,</span>&nbsp;<span class="ident" id="7710002">col</span>&nbsp;<span class="op" id="7710006">:=</span>&nbsp;<span class="ident" id="7710009"><a href="/go/token/position_test.go.html#7706631">linecol</a></span><span class="op" id="7710016">(</span><span class="ident" id="7710017"><a href="/go/token/position_test.go.html#7709685">lines</a></span><span class="op" id="7710022">,</span>&nbsp;<span class="ident" id="7710024"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7710028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710032">msg</span>&nbsp;<span class="op" id="7710036">:=</span>&nbsp;<span class="ident" id="7710039"><a href="/go/token/position_test.go.html#7705214">fmt</a></span><span class="op" id="7710042">.</span><span class="ident" id="7710043">Sprintf</span><span class="op" id="7710050">(</span><span class="string" id="7710051">&#34;%s&nbsp;(offs&nbsp;=&nbsp;%d,&nbsp;p&nbsp;=&nbsp;%d)&#34;</span><span class="op" id="7710075">,</span>&nbsp;<span class="ident" id="7710077"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7710078">.</span><span class="ident" id="7710079">Name</span><span class="op" id="7710083">(</span><span class="op" id="7710084">)</span><span class="op" id="7710085">,</span>&nbsp;<span class="ident" id="7710087"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7710091">,</span>&nbsp;<span class="ident" id="7710093"><a href="/go/token/position_test.go.html#7709980">p</a></span><span class="op" id="7710094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710098"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7710106">(</span><span class="ident" id="7710107"><a href="/go/token/position_test.go.html#7709602">t</a></span><span class="op" id="7710108">,</span>&nbsp;<span class="ident" id="7710110"><a href="/go/token/position_test.go.html#7710032">msg</a></span><span class="op" id="7710113">,</span>&nbsp;<span class="ident" id="7710115"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7710116">.</span><span class="ident" id="7710117">Position</span><span class="op" id="7710125">(</span><span class="ident" id="7710126"><a href="/go/token/position_test.go.html#7709641">f</a></span><span class="op" id="7710127">.</span><span class="ident" id="7710128">Pos</span><span class="op" id="7710131">(</span><span class="ident" id="7710132"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7710136">)</span><span class="op" id="7710137">)</span><span class="op" id="7710138">,</span>&nbsp;<span class="ident" id="7710140"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7710148">{</span><span class="string" id="7710149">&#34;bar&#34;</span><span class="op" id="7710154">,</span>&nbsp;<span class="ident" id="7710156"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7710160">,</span>&nbsp;<span class="num" id="7710162">42</span><span class="op" id="7710164">,</span>&nbsp;<span class="ident" id="7710166"><a href="/go/token/position_test.go.html#7710002">col</a></span><span class="op" id="7710169">}</span><span class="op" id="7710170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710174"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7710182">(</span><span class="ident" id="7710183"><a href="/go/token/position_test.go.html#7709602">t</a></span><span class="op" id="7710184">,</span>&nbsp;<span class="ident" id="7710186"><a href="/go/token/position_test.go.html#7710032">msg</a></span><span class="op" id="7710189">,</span>&nbsp;<span class="ident" id="7710191"><a href="/go/token/position_test.go.html#7709619">fset</a></span><span class="op" id="7710195">.</span><span class="ident" id="7710196">Position</span><span class="op" id="7710204">(</span><span class="ident" id="7710205"><a href="/go/token/position_test.go.html#7709980">p</a></span><span class="op" id="7710206">)</span><span class="op" id="7710207">,</span>&nbsp;<span class="ident" id="7710209"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7710217">{</span><span class="string" id="7710218">&#34;bar&#34;</span><span class="op" id="7710223">,</span>&nbsp;<span class="ident" id="7710225"><a href="/go/token/position_test.go.html#7709940">offs</a></span><span class="op" id="7710229">,</span>&nbsp;<span class="num" id="7710231">42</span><span class="op" id="7710233">,</span>&nbsp;<span class="ident" id="7710235"><a href="/go/token/position_test.go.html#7710002">col</a></span><span class="op" id="7710238">}</span><span class="op" id="7710239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710242">}</span><br>
<span class="lineno">165</span><span class="op" id="7710244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710247">func</span>&nbsp;<span class="ident" id="7710252">TestFiles</span><span class="op" id="7710261">(</span><span class="ident" id="7710262">t</span>&nbsp;<span class="op" id="7710264">*</span><span class="ident" id="7710265"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7710272">.</span><span class="ident" id="7710273">T</span><span class="op" id="7710274">)</span>&nbsp;<span class="op" id="7710276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710279">fset</span>&nbsp;<span class="op" id="7710284">:=</span>&nbsp;<span class="ident" id="7710287"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7710297">(</span><span class="op" id="7710298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710301">for</span>&nbsp;<span class="ident" id="7710305">i</span><span class="op" id="7710306">,</span>&nbsp;<span class="ident" id="7710308">test</span>&nbsp;<span class="op" id="7710313">:=</span>&nbsp;<span class="keyword" id="7710316">range</span>&nbsp;<span class="ident" id="7710322"><a href="/go/token/position_test.go.html#7706016">tests</a></span>&nbsp;<span class="op" id="7710328">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710332">base</span>&nbsp;<span class="op" id="7710337">:=</span>&nbsp;<span class="ident" id="7710340"><a href="/go/token/position_test.go.html#7710279">fset</a></span><span class="op" id="7710344">.</span><span class="ident" id="7710345">Base</span><span class="op" id="7710349">(</span><span class="op" id="7710350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710354">if</span>&nbsp;<span class="ident" id="7710357"><a href="/go/token/position_test.go.html#7710305">i</a></span><span class="op" id="7710358">%</span><span class="num" id="7710359">2</span>&nbsp;<span class="op" id="7710361">==</span>&nbsp;<span class="num" id="7710364">1</span>&nbsp;<span class="op" id="7710366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7710371">//&nbsp;Setting&nbsp;a&nbsp;negative&nbsp;base&nbsp;is&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7710418">//&nbsp;fset.Base(),&nbsp;so&nbsp;test&nbsp;some&nbsp;of&nbsp;each.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710459"><a href="/go/token/position_test.go.html#7710332">base</a></span>&nbsp;<span class="op" id="7710464">=</span>&nbsp;<span class="op" id="7710466">-</span><span class="num" id="7710467">1</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710475"><a href="/go/token/position_test.go.html#7710279">fset</a></span><span class="op" id="7710479">.</span><span class="ident" id="7710480">AddFile</span><span class="op" id="7710487">(</span><span class="ident" id="7710488"><a href="/go/token/position_test.go.html#7710308">test</a></span><span class="op" id="7710492">.</span><span class="ident" id="7710493">filename</span><span class="op" id="7710501">,</span>&nbsp;<span class="ident" id="7710503"><a href="/go/token/position_test.go.html#7710332">base</a></span><span class="op" id="7710507">,</span>&nbsp;<span class="ident" id="7710509"><a href="/go/token/position_test.go.html#7710308">test</a></span><span class="op" id="7710513">.</span><span class="ident" id="7710514">size</span><span class="op" id="7710518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710522">j</span>&nbsp;<span class="op" id="7710524">:=</span>&nbsp;<span class="num" id="7710527">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710531"><a href="/go/token/position_test.go.html#7710279">fset</a></span><span class="op" id="7710535">.</span><span class="ident" id="7710536">Iterate</span><span class="op" id="7710543">(</span><span class="keyword" id="7710544">func</span><span class="op" id="7710548">(</span><span class="ident" id="7710549">f</span>&nbsp;<span class="op" id="7710551">*</span><span class="ident" id="7710552"><a href="/go/token/position.go.html#5174541">File</a></span><span class="op" id="7710556">)</span>&nbsp;<span class="builtintype" id="7710558">bool</span>&nbsp;<span class="op" id="7710563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710568">if</span>&nbsp;<span class="ident" id="7710571"><a href="/go/token/position_test.go.html#7710549">f</a></span><span class="op" id="7710572">.</span><span class="ident" id="7710573">Name</span><span class="op" id="7710577">(</span><span class="op" id="7710578">)</span>&nbsp;<span class="op" id="7710580">!=</span>&nbsp;<span class="ident" id="7710583"><a href="/go/token/position_test.go.html#7706016">tests</a></span><span class="op" id="7710588">[</span><span class="ident" id="7710589"><a href="/go/token/position_test.go.html#7710522">j</a></span><span class="op" id="7710590">]</span><span class="op" id="7710591">.</span><span class="ident" id="7710592">filename</span>&nbsp;<span class="op" id="7710601">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710607"><a href="/go/token/position_test.go.html#7710262">t</a></span><span class="op" id="7710608">.</span><span class="ident" id="7710609">Errorf</span><span class="op" id="7710615">(</span><span class="string" id="7710616">&#34;got&nbsp;filename&nbsp;=&nbsp;%s;&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7710644">,</span>&nbsp;<span class="ident" id="7710646"><a href="/go/token/position_test.go.html#7710549">f</a></span><span class="op" id="7710647">.</span><span class="ident" id="7710648">Name</span><span class="op" id="7710652">(</span><span class="op" id="7710653">)</span><span class="op" id="7710654">,</span>&nbsp;<span class="ident" id="7710656"><a href="/go/token/position_test.go.html#7706016">tests</a></span><span class="op" id="7710661">[</span><span class="ident" id="7710662"><a href="/go/token/position_test.go.html#7710522">j</a></span><span class="op" id="7710663">]</span><span class="op" id="7710664">.</span><span class="ident" id="7710665">filename</span><span class="op" id="7710673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710683"><a href="/go/token/position_test.go.html#7710522">j</a></span><span class="op" id="7710684">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710690">return</span>&nbsp;<span class="builtintype" id="7710697">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710704">}</span><span class="op" id="7710705">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710709">if</span>&nbsp;<span class="ident" id="7710712"><a href="/go/token/position_test.go.html#7710522">j</a></span>&nbsp;<span class="op" id="7710714">!=</span>&nbsp;<span class="ident" id="7710717"><a href="/go/token/position_test.go.html#7710305">i</a></span><span class="op" id="7710718">+</span><span class="num" id="7710719">1</span>&nbsp;<span class="op" id="7710721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710726"><a href="/go/token/position_test.go.html#7710262">t</a></span><span class="op" id="7710727">.</span><span class="ident" id="7710728">Errorf</span><span class="op" id="7710734">(</span><span class="string" id="7710735">&#34;got&nbsp;%d&nbsp;files;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7710758">,</span>&nbsp;<span class="ident" id="7710760"><a href="/go/token/position_test.go.html#7710522">j</a></span><span class="op" id="7710761">,</span>&nbsp;<span class="ident" id="7710763"><a href="/go/token/position_test.go.html#7710305">i</a></span><span class="op" id="7710764">+</span><span class="num" id="7710765">1</span><span class="op" id="7710766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710773">}</span><br>
<span class="lineno"></span><span class="op" id="7710775">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="7710778">//&nbsp;FileSet.File&nbsp;should&nbsp;return&nbsp;nil&nbsp;if&nbsp;Pos&nbsp;is&nbsp;past&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;FileSet.</span><br>
<span class="lineno"></span><span class="keyword" id="7710851">func</span>&nbsp;<span class="ident" id="7710856">TestFileSetPastEnd</span><span class="op" id="7710874">(</span><span class="ident" id="7710875">t</span>&nbsp;<span class="op" id="7710877">*</span><span class="ident" id="7710878"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7710885">.</span><span class="ident" id="7710886">T</span><span class="op" id="7710887">)</span>&nbsp;<span class="op" id="7710889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710892">fset</span>&nbsp;<span class="op" id="7710897">:=</span>&nbsp;<span class="ident" id="7710900"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7710910">(</span><span class="op" id="7710911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710914">for</span>&nbsp;<span class="ident" id="7710918">_</span><span class="op" id="7710919">,</span>&nbsp;<span class="ident" id="7710921">test</span>&nbsp;<span class="op" id="7710926">:=</span>&nbsp;<span class="keyword" id="7710929">range</span>&nbsp;<span class="ident" id="7710935"><a href="/go/token/position_test.go.html#7706016">tests</a></span>&nbsp;<span class="op" id="7710941">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710945"><a href="/go/token/position_test.go.html#7710892">fset</a></span><span class="op" id="7710949">.</span><span class="ident" id="7710950">AddFile</span><span class="op" id="7710957">(</span><span class="ident" id="7710958"><a href="/go/token/position_test.go.html#7710921">test</a></span><span class="op" id="7710962">.</span><span class="ident" id="7710963">filename</span><span class="op" id="7710971">,</span>&nbsp;<span class="ident" id="7710973"><a href="/go/token/position_test.go.html#7710892">fset</a></span><span class="op" id="7710977">.</span><span class="ident" id="7710978">Base</span><span class="op" id="7710982">(</span><span class="op" id="7710983">)</span><span class="op" id="7710984">,</span>&nbsp;<span class="ident" id="7710986"><a href="/go/token/position_test.go.html#7710921">test</a></span><span class="op" id="7710990">.</span><span class="ident" id="7710991">size</span><span class="op" id="7710995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7710998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711001">if</span>&nbsp;<span class="ident" id="7711004">f</span>&nbsp;<span class="op" id="7711006">:=</span>&nbsp;<span class="ident" id="7711009"><a href="/go/token/position_test.go.html#7710892">fset</a></span><span class="op" id="7711013">.</span><span class="ident" id="7711014">File</span><span class="op" id="7711018">(</span><span class="ident" id="7711019"><a href="/go/token/position.go.html#5173940">Pos</a></span><span class="op" id="7711022">(</span><span class="ident" id="7711023"><a href="/go/token/position_test.go.html#7710892">fset</a></span><span class="op" id="7711027">.</span><span class="ident" id="7711028">Base</span><span class="op" id="7711032">(</span><span class="op" id="7711033">)</span><span class="op" id="7711034">)</span><span class="op" id="7711035">)</span><span class="op" id="7711036">;</span>&nbsp;<span class="ident" id="7711038"><a href="/go/token/position_test.go.html#7711004">f</a></span>&nbsp;<span class="op" id="7711040">!=</span>&nbsp;<span class="ident" id="7711043">nil</span>&nbsp;<span class="op" id="7711047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711051"><a href="/go/token/position_test.go.html#7710875">t</a></span><span class="op" id="7711052">.</span><span class="ident" id="7711053">Errorf</span><span class="op" id="7711059">(</span><span class="string" id="7711060">&#34;got&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7711078">,</span>&nbsp;<span class="ident" id="7711080"><a href="/go/token/position_test.go.html#7711004">f</a></span><span class="op" id="7711081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711084">}</span><br>
<span class="lineno">200</span><span class="op" id="7711086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7711089">func</span>&nbsp;<span class="ident" id="7711094">TestFileSetCacheUnlikely</span><span class="op" id="7711118">(</span><span class="ident" id="7711119">t</span>&nbsp;<span class="op" id="7711121">*</span><span class="ident" id="7711122"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7711129">.</span><span class="ident" id="7711130">T</span><span class="op" id="7711131">)</span>&nbsp;<span class="op" id="7711133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711136">fset</span>&nbsp;<span class="op" id="7711141">:=</span>&nbsp;<span class="ident" id="7711144"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7711154">(</span><span class="op" id="7711155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711158">offsets</span>&nbsp;<span class="op" id="7711166">:=</span>&nbsp;<span class="builtinfunc" id="7711169">make</span><span class="op" id="7711173">(</span><span class="keyword" id="7711174">map</span><span class="op" id="7711177">[</span><span class="builtintype" id="7711178">string</span><span class="op" id="7711184">]</span><span class="builtintype" id="7711185">int</span><span class="op" id="7711188">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711191">for</span>&nbsp;<span class="ident" id="7711195">_</span><span class="op" id="7711196">,</span>&nbsp;<span class="ident" id="7711198">test</span>&nbsp;<span class="op" id="7711203">:=</span>&nbsp;<span class="keyword" id="7711206">range</span>&nbsp;<span class="ident" id="7711212"><a href="/go/token/position_test.go.html#7706016">tests</a></span>&nbsp;<span class="op" id="7711218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711222"><a href="/go/token/position_test.go.html#7711158">offsets</a></span><span class="op" id="7711229">[</span><span class="ident" id="7711230"><a href="/go/token/position_test.go.html#7711198">test</a></span><span class="op" id="7711234">.</span><span class="ident" id="7711235">filename</span><span class="op" id="7711243">]</span>&nbsp;<span class="op" id="7711245">=</span>&nbsp;<span class="ident" id="7711247"><a href="/go/token/position_test.go.html#7711136">fset</a></span><span class="op" id="7711251">.</span><span class="ident" id="7711252">Base</span><span class="op" id="7711256">(</span><span class="op" id="7711257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711261"><a href="/go/token/position_test.go.html#7711136">fset</a></span><span class="op" id="7711265">.</span><span class="ident" id="7711266">AddFile</span><span class="op" id="7711273">(</span><span class="ident" id="7711274"><a href="/go/token/position_test.go.html#7711198">test</a></span><span class="op" id="7711278">.</span><span class="ident" id="7711279">filename</span><span class="op" id="7711287">,</span>&nbsp;<span class="ident" id="7711289"><a href="/go/token/position_test.go.html#7711136">fset</a></span><span class="op" id="7711293">.</span><span class="ident" id="7711294">Base</span><span class="op" id="7711298">(</span><span class="op" id="7711299">)</span><span class="op" id="7711300">,</span>&nbsp;<span class="ident" id="7711302"><a href="/go/token/position_test.go.html#7711198">test</a></span><span class="op" id="7711306">.</span><span class="ident" id="7711307">size</span><span class="op" id="7711311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711317">for</span>&nbsp;<span class="ident" id="7711321">file</span><span class="op" id="7711325">,</span>&nbsp;<span class="ident" id="7711327">pos</span>&nbsp;<span class="op" id="7711331">:=</span>&nbsp;<span class="keyword" id="7711334">range</span>&nbsp;<span class="ident" id="7711340"><a href="/go/token/position_test.go.html#7711158">offsets</a></span>&nbsp;<span class="op" id="7711348">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711352">f</span>&nbsp;<span class="op" id="7711354">:=</span>&nbsp;<span class="ident" id="7711357"><a href="/go/token/position_test.go.html#7711136">fset</a></span><span class="op" id="7711361">.</span><span class="ident" id="7711362">File</span><span class="op" id="7711366">(</span><span class="ident" id="7711367"><a href="/go/token/position.go.html#5173940">Pos</a></span><span class="op" id="7711370">(</span><span class="ident" id="7711371"><a href="/go/token/position_test.go.html#7711327">pos</a></span><span class="op" id="7711374">)</span><span class="op" id="7711375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711379">if</span>&nbsp;<span class="ident" id="7711382"><a href="/go/token/position_test.go.html#7711352">f</a></span><span class="op" id="7711383">.</span><span class="ident" id="7711384">Name</span><span class="op" id="7711388">(</span><span class="op" id="7711389">)</span>&nbsp;<span class="op" id="7711391">!=</span>&nbsp;<span class="ident" id="7711394"><a href="/go/token/position_test.go.html#7711321">file</a></span>&nbsp;<span class="op" id="7711399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711404"><a href="/go/token/position_test.go.html#7711119">t</a></span><span class="op" id="7711405">.</span><span class="ident" id="7711406">Errorf</span><span class="op" id="7711412">(</span><span class="string" id="7711413">&#34;got&nbsp;%q&nbsp;at&nbsp;position&nbsp;%d,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7711445">,</span>&nbsp;<span class="ident" id="7711447"><a href="/go/token/position_test.go.html#7711352">f</a></span><span class="op" id="7711448">.</span><span class="ident" id="7711449">Name</span><span class="op" id="7711453">(</span><span class="op" id="7711454">)</span><span class="op" id="7711455">,</span>&nbsp;<span class="ident" id="7711457"><a href="/go/token/position_test.go.html#7711327">pos</a></span><span class="op" id="7711460">,</span>&nbsp;<span class="ident" id="7711462"><a href="/go/token/position_test.go.html#7711321">file</a></span><span class="op" id="7711466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711473">}</span><br>
<span class="lineno">215</span><span class="op" id="7711475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7711478">//&nbsp;issue&nbsp;4345.&nbsp;Test&nbsp;concurrent&nbsp;use&nbsp;of&nbsp;FileSet.Pos&nbsp;does&nbsp;not&nbsp;trigger&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="7711547">//&nbsp;race&nbsp;in&nbsp;the&nbsp;FileSet&nbsp;position&nbsp;cache.</span><br>
<span class="lineno"></span><span class="keyword" id="7711586">func</span>&nbsp;<span class="ident" id="7711591">TestFileSetRace</span><span class="op" id="7711606">(</span><span class="ident" id="7711607">t</span>&nbsp;<span class="op" id="7711609">*</span><span class="ident" id="7711610"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7711617">.</span><span class="ident" id="7711618">T</span><span class="op" id="7711619">)</span>&nbsp;<span class="op" id="7711621">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711624">fset</span>&nbsp;<span class="op" id="7711629">:=</span>&nbsp;<span class="ident" id="7711632"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7711642">(</span><span class="op" id="7711643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711646">for</span>&nbsp;<span class="ident" id="7711650">i</span>&nbsp;<span class="op" id="7711652">:=</span>&nbsp;<span class="num" id="7711655">0</span><span class="op" id="7711656">;</span>&nbsp;<span class="ident" id="7711658"><a href="/go/token/position_test.go.html#7711650">i</a></span>&nbsp;<span class="op" id="7711660">&lt;</span>&nbsp;<span class="num" id="7711662">100</span><span class="op" id="7711665">;</span>&nbsp;<span class="ident" id="7711667"><a href="/go/token/position_test.go.html#7711650">i</a></span><span class="op" id="7711668">++</span>&nbsp;<span class="op" id="7711671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711675"><a href="/go/token/position_test.go.html#7711624">fset</a></span><span class="op" id="7711679">.</span><span class="ident" id="7711680">AddFile</span><span class="op" id="7711687">(</span><span class="ident" id="7711688"><a href="/go/token/position_test.go.html#7705214">fmt</a></span><span class="op" id="7711691">.</span><span class="ident" id="7711692">Sprintf</span><span class="op" id="7711699">(</span><span class="string" id="7711700">&#34;file-%d&#34;</span><span class="op" id="7711709">,</span>&nbsp;<span class="ident" id="7711711"><a href="/go/token/position_test.go.html#7711650">i</a></span><span class="op" id="7711712">)</span><span class="op" id="7711713">,</span>&nbsp;<span class="ident" id="7711715"><a href="/go/token/position_test.go.html#7711624">fset</a></span><span class="op" id="7711719">.</span><span class="ident" id="7711720">Base</span><span class="op" id="7711724">(</span><span class="op" id="7711725">)</span><span class="op" id="7711726">,</span>&nbsp;<span class="num" id="7711728">1031</span><span class="op" id="7711732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711738">max</span>&nbsp;<span class="op" id="7711742">:=</span>&nbsp;<span class="builtintype" id="7711745">int32</span><span class="op" id="7711750">(</span><span class="ident" id="7711751"><a href="/go/token/position_test.go.html#7711624">fset</a></span><span class="op" id="7711755">.</span><span class="ident" id="7711756">Base</span><span class="op" id="7711760">(</span><span class="op" id="7711761">)</span><span class="op" id="7711762">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711765">var</span>&nbsp;<span class="ident" id="7711769">stop</span>&nbsp;<span class="ident" id="7711774"><a href="/go/token/position_test.go.html#7705234">sync</a></span><span class="op" id="7711778">.</span><span class="ident" id="7711779">WaitGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711790">r</span>&nbsp;<span class="op" id="7711792">:=</span>&nbsp;<span class="ident" id="7711795"><a href="/go/token/position_test.go.html#7705221">rand</a></span><span class="op" id="7711799">.</span><span class="ident" id="7711800">New</span><span class="op" id="7711803">(</span><span class="ident" id="7711804"><a href="/go/token/position_test.go.html#7705221">rand</a></span><span class="op" id="7711808">.</span><span class="ident" id="7711809">NewSource</span><span class="op" id="7711818">(</span><span class="num" id="7711819">7</span><span class="op" id="7711820">)</span><span class="op" id="7711821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711824">for</span>&nbsp;<span class="ident" id="7711828">i</span>&nbsp;<span class="op" id="7711830">:=</span>&nbsp;<span class="num" id="7711833">0</span><span class="op" id="7711834">;</span>&nbsp;<span class="ident" id="7711836"><a href="/go/token/position_test.go.html#7711828">i</a></span>&nbsp;<span class="op" id="7711838">&lt;</span>&nbsp;<span class="num" id="7711840">2</span><span class="op" id="7711841">;</span>&nbsp;<span class="ident" id="7711843"><a href="/go/token/position_test.go.html#7711828">i</a></span><span class="op" id="7711844">++</span>&nbsp;<span class="op" id="7711847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711851">r</span>&nbsp;<span class="op" id="7711853">:=</span>&nbsp;<span class="ident" id="7711856"><a href="/go/token/position_test.go.html#7705221">rand</a></span><span class="op" id="7711860">.</span><span class="ident" id="7711861">New</span><span class="op" id="7711864">(</span><span class="ident" id="7711865"><a href="/go/token/position_test.go.html#7705221">rand</a></span><span class="op" id="7711869">.</span><span class="ident" id="7711870">NewSource</span><span class="op" id="7711879">(</span><span class="ident" id="7711880"><a href="/go/token/position_test.go.html#7711790">r</a></span><span class="op" id="7711881">.</span><span class="ident" id="7711882">Int63</span><span class="op" id="7711887">(</span><span class="op" id="7711888">)</span><span class="op" id="7711889">)</span><span class="op" id="7711890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711894"><a href="/go/token/position_test.go.html#7711769">stop</a></span><span class="op" id="7711898">.</span><span class="ident" id="7711899">Add</span><span class="op" id="7711902">(</span><span class="num" id="7711903">1</span><span class="op" id="7711904">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711908">go</span>&nbsp;<span class="keyword" id="7711911">func</span><span class="op" id="7711915">(</span><span class="op" id="7711916">)</span>&nbsp;<span class="op" id="7711918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7711923">for</span>&nbsp;<span class="ident" id="7711927">i</span>&nbsp;<span class="op" id="7711929">:=</span>&nbsp;<span class="num" id="7711932">0</span><span class="op" id="7711933">;</span>&nbsp;<span class="ident" id="7711935"><a href="/go/token/position_test.go.html#7711927">i</a></span>&nbsp;<span class="op" id="7711937">&lt;</span>&nbsp;<span class="num" id="7711939">1000</span><span class="op" id="7711943">;</span>&nbsp;<span class="ident" id="7711945"><a href="/go/token/position_test.go.html#7711927">i</a></span><span class="op" id="7711946">++</span>&nbsp;<span class="op" id="7711949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711955"><a href="/go/token/position_test.go.html#7711624">fset</a></span><span class="op" id="7711959">.</span><span class="ident" id="7711960">Position</span><span class="op" id="7711968">(</span><span class="ident" id="7711969"><a href="/go/token/position.go.html#5173940">Pos</a></span><span class="op" id="7711972">(</span><span class="ident" id="7711973"><a href="/go/token/position_test.go.html#7711851">r</a></span><span class="op" id="7711974">.</span><span class="ident" id="7711975">Int31n</span><span class="op" id="7711981">(</span><span class="ident" id="7711982"><a href="/go/token/position_test.go.html#7711738">max</a></span><span class="op" id="7711985">)</span><span class="op" id="7711986">)</span><span class="op" id="7711987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7711992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711997"><a href="/go/token/position_test.go.html#7711769">stop</a></span><span class="op" id="7712001">.</span><span class="ident" id="7712002">Done</span><span class="op" id="7712006">(</span><span class="op" id="7712007">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712011">}</span><span class="op" id="7712012">(</span><span class="op" id="7712013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712019"><a href="/go/token/position_test.go.html#7711769">stop</a></span><span class="op" id="7712023">.</span><span class="ident" id="7712024">Wait</span><span class="op" id="7712028">(</span><span class="op" id="7712029">)</span><br>
<span class="lineno"></span><span class="op" id="7712031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7712034">func</span>&nbsp;<span class="ident" id="7712039">TestPositionFor</span><span class="op" id="7712054">(</span><span class="ident" id="7712055">t</span>&nbsp;<span class="op" id="7712057">*</span><span class="ident" id="7712058"><a href="/go/token/position_test.go.html#7705242">testing</a></span><span class="op" id="7712065">.</span><span class="ident" id="7712066">T</span><span class="op" id="7712067">)</span>&nbsp;<span class="op" id="7712069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712072">src</span>&nbsp;<span class="op" id="7712076">:=</span>&nbsp;<span class="op" id="7712079">[</span><span class="op" id="7712080">]</span><span class="builtintype" id="7712081">byte</span><span class="op" id="7712085">(</span><span class="string" id="7712086">`<br>
<span class="lineno"></span>foo<br>
<span class="lineno"></span>b<br>
<span class="lineno"></span>ar<br>
<span class="lineno">245</span>//line&nbsp;:100<br>
<span class="lineno"></span>foobar<br>
<span class="lineno"></span>//line&nbsp;bar:3<br>
<span class="lineno"></span>done<br>
<span class="lineno"></span>`</span><span class="op" id="7712135">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712139">const</span>&nbsp;<span class="ident" id="7712145">filename</span>&nbsp;<span class="op" id="7712154">=</span>&nbsp;<span class="string" id="7712156">&#34;foo&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712163">fset</span>&nbsp;<span class="op" id="7712168">:=</span>&nbsp;<span class="ident" id="7712171"><a href="/go/token/position.go.html#5181791">NewFileSet</a></span><span class="op" id="7712181">(</span><span class="op" id="7712182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712185">f</span>&nbsp;<span class="op" id="7712187">:=</span>&nbsp;<span class="ident" id="7712190"><a href="/go/token/position_test.go.html#7712163">fset</a></span><span class="op" id="7712194">.</span><span class="ident" id="7712195">AddFile</span><span class="op" id="7712202">(</span><span class="ident" id="7712203"><a href="/go/token/position_test.go.html#7712145">filename</a></span><span class="op" id="7712211">,</span>&nbsp;<span class="ident" id="7712213"><a href="/go/token/position_test.go.html#7712163">fset</a></span><span class="op" id="7712217">.</span><span class="ident" id="7712218">Base</span><span class="op" id="7712222">(</span><span class="op" id="7712223">)</span><span class="op" id="7712224">,</span>&nbsp;<span class="builtinfunc" id="7712226">len</span><span class="op" id="7712229">(</span><span class="ident" id="7712230"><a href="/go/token/position_test.go.html#7712072">src</a></span><span class="op" id="7712233">)</span><span class="op" id="7712234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712237"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712238">.</span><span class="ident" id="7712239">SetLinesForContent</span><span class="op" id="7712257">(</span><span class="ident" id="7712258"><a href="/go/token/position_test.go.html#7712072">src</a></span><span class="op" id="7712261">)</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712265">//&nbsp;verify&nbsp;position&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712290">for</span>&nbsp;<span class="ident" id="7712294">i</span><span class="op" id="7712295">,</span>&nbsp;<span class="ident" id="7712297">offs</span>&nbsp;<span class="op" id="7712302">:=</span>&nbsp;<span class="keyword" id="7712305">range</span>&nbsp;<span class="ident" id="7712311"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712312">.</span><span class="ident" id="7712313">lines</span>&nbsp;<span class="op" id="7712319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712323">got1</span>&nbsp;<span class="op" id="7712328">:=</span>&nbsp;<span class="ident" id="7712331"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712332">.</span><span class="ident" id="7712333">PositionFor</span><span class="op" id="7712344">(</span><span class="ident" id="7712345"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712346">.</span><span class="ident" id="7712347">Pos</span><span class="op" id="7712350">(</span><span class="ident" id="7712351"><a href="/go/token/position_test.go.html#7712297">offs</a></span><span class="op" id="7712355">)</span><span class="op" id="7712356">,</span>&nbsp;<span class="builtintype" id="7712358">false</span><span class="op" id="7712363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712367">got2</span>&nbsp;<span class="op" id="7712372">:=</span>&nbsp;<span class="ident" id="7712375"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712376">.</span><span class="ident" id="7712377">PositionFor</span><span class="op" id="7712388">(</span><span class="ident" id="7712389"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712390">.</span><span class="ident" id="7712391">Pos</span><span class="op" id="7712394">(</span><span class="ident" id="7712395"><a href="/go/token/position_test.go.html#7712297">offs</a></span><span class="op" id="7712399">)</span><span class="op" id="7712400">,</span>&nbsp;<span class="builtintype" id="7712402">true</span><span class="op" id="7712406">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712410">got3</span>&nbsp;<span class="op" id="7712415">:=</span>&nbsp;<span class="ident" id="7712418"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712419">.</span><span class="ident" id="7712420">Position</span><span class="op" id="7712428">(</span><span class="ident" id="7712429"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712430">.</span><span class="ident" id="7712431">Pos</span><span class="op" id="7712434">(</span><span class="ident" id="7712435"><a href="/go/token/position_test.go.html#7712297">offs</a></span><span class="op" id="7712439">)</span><span class="op" id="7712440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712444">want</span>&nbsp;<span class="op" id="7712449">:=</span>&nbsp;<span class="ident" id="7712452"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7712460">{</span><span class="ident" id="7712461"><a href="/go/token/position_test.go.html#7712145">filename</a></span><span class="op" id="7712469">,</span>&nbsp;<span class="ident" id="7712471"><a href="/go/token/position_test.go.html#7712297">offs</a></span><span class="op" id="7712475">,</span>&nbsp;<span class="ident" id="7712477"><a href="/go/token/position_test.go.html#7712294">i</a></span>&nbsp;<span class="op" id="7712479">+</span>&nbsp;<span class="num" id="7712481">1</span><span class="op" id="7712482">,</span>&nbsp;<span class="num" id="7712484">1</span><span class="op" id="7712485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712489"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7712497">(</span><span class="ident" id="7712498"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7712499">,</span>&nbsp;<span class="string" id="7712501">&#34;1.&nbsp;PositionFor&nbsp;unadjusted&#34;</span><span class="op" id="7712528">,</span>&nbsp;<span class="ident" id="7712530"><a href="/go/token/position_test.go.html#7712323">got1</a></span><span class="op" id="7712534">,</span>&nbsp;<span class="ident" id="7712536"><a href="/go/token/position_test.go.html#7712444">want</a></span><span class="op" id="7712540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712544"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7712552">(</span><span class="ident" id="7712553"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7712554">,</span>&nbsp;<span class="string" id="7712556">&#34;1.&nbsp;PositionFor&nbsp;adjusted&#34;</span><span class="op" id="7712581">,</span>&nbsp;<span class="ident" id="7712583"><a href="/go/token/position_test.go.html#7712367">got2</a></span><span class="op" id="7712587">,</span>&nbsp;<span class="ident" id="7712589"><a href="/go/token/position_test.go.html#7712444">want</a></span><span class="op" id="7712593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712597"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7712605">(</span><span class="ident" id="7712606"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7712607">,</span>&nbsp;<span class="string" id="7712609">&#34;1.&nbsp;Position&#34;</span><span class="op" id="7712622">,</span>&nbsp;<span class="ident" id="7712624"><a href="/go/token/position_test.go.html#7712410">got3</a></span><span class="op" id="7712628">,</span>&nbsp;<span class="ident" id="7712630"><a href="/go/token/position_test.go.html#7712444">want</a></span><span class="op" id="7712634">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7712637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712641">//&nbsp;manually&nbsp;add&nbsp;//line&nbsp;info&nbsp;on&nbsp;lines&nbsp;l1,&nbsp;l2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712686">const</span>&nbsp;<span class="ident" id="7712692">l1</span><span class="op" id="7712694">,</span>&nbsp;<span class="ident" id="7712696">l2</span>&nbsp;<span class="op" id="7712699">=</span>&nbsp;<span class="num" id="7712701">5</span><span class="op" id="7712702">,</span>&nbsp;<span class="num" id="7712704">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712707"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712708">.</span><span class="ident" id="7712709">AddLineInfo</span><span class="op" id="7712720">(</span><span class="ident" id="7712721"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712722">.</span><span class="ident" id="7712723">lines</span><span class="op" id="7712728">[</span><span class="ident" id="7712729"><a href="/go/token/position_test.go.html#7712692">l1</a></span><span class="op" id="7712731">-</span><span class="num" id="7712732">1</span><span class="op" id="7712733">]</span><span class="op" id="7712734">,</span>&nbsp;<span class="string" id="7712736">&#34;&#34;</span><span class="op" id="7712738">,</span>&nbsp;<span class="num" id="7712740">100</span><span class="op" id="7712743">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712746"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712747">.</span><span class="ident" id="7712748">AddLineInfo</span><span class="op" id="7712759">(</span><span class="ident" id="7712760"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712761">.</span><span class="ident" id="7712762">lines</span><span class="op" id="7712767">[</span><span class="ident" id="7712768"><a href="/go/token/position_test.go.html#7712696">l2</a></span><span class="op" id="7712770">-</span><span class="num" id="7712771">1</span><span class="op" id="7712772">]</span><span class="op" id="7712773">,</span>&nbsp;<span class="string" id="7712775">&#34;bar&#34;</span><span class="op" id="7712780">,</span>&nbsp;<span class="num" id="7712782">3</span><span class="op" id="7712783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712787">//&nbsp;unadjusted&nbsp;position&nbsp;info&nbsp;must&nbsp;remain&nbsp;unchanged</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7712838">for</span>&nbsp;<span class="ident" id="7712842">i</span><span class="op" id="7712843">,</span>&nbsp;<span class="ident" id="7712845">offs</span>&nbsp;<span class="op" id="7712850">:=</span>&nbsp;<span class="keyword" id="7712853">range</span>&nbsp;<span class="ident" id="7712859"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712860">.</span><span class="ident" id="7712861">lines</span>&nbsp;<span class="op" id="7712867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712871">got1</span>&nbsp;<span class="op" id="7712876">:=</span>&nbsp;<span class="ident" id="7712879"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712880">.</span><span class="ident" id="7712881">PositionFor</span><span class="op" id="7712892">(</span><span class="ident" id="7712893"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7712894">.</span><span class="ident" id="7712895">Pos</span><span class="op" id="7712898">(</span><span class="ident" id="7712899"><a href="/go/token/position_test.go.html#7712845">offs</a></span><span class="op" id="7712903">)</span><span class="op" id="7712904">,</span>&nbsp;<span class="builtintype" id="7712906">false</span><span class="op" id="7712911">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712915">want</span>&nbsp;<span class="op" id="7712920">:=</span>&nbsp;<span class="ident" id="7712923"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7712931">{</span><span class="ident" id="7712932"><a href="/go/token/position_test.go.html#7712145">filename</a></span><span class="op" id="7712940">,</span>&nbsp;<span class="ident" id="7712942"><a href="/go/token/position_test.go.html#7712845">offs</a></span><span class="op" id="7712946">,</span>&nbsp;<span class="ident" id="7712948"><a href="/go/token/position_test.go.html#7712842">i</a></span>&nbsp;<span class="op" id="7712950">+</span>&nbsp;<span class="num" id="7712952">1</span><span class="op" id="7712953">,</span>&nbsp;<span class="num" id="7712955">1</span><span class="op" id="7712956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712960"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7712968">(</span><span class="ident" id="7712969"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7712970">,</span>&nbsp;<span class="string" id="7712972">&#34;2.&nbsp;PositionFor&nbsp;unadjusted&#34;</span><span class="op" id="7712999">,</span>&nbsp;<span class="ident" id="7713001"><a href="/go/token/position_test.go.html#7712871">got1</a></span><span class="op" id="7713005">,</span>&nbsp;<span class="ident" id="7713007"><a href="/go/token/position_test.go.html#7712915">want</a></span><span class="op" id="7713011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713018">//&nbsp;adjusted&nbsp;position&nbsp;info&nbsp;should&nbsp;have&nbsp;changed</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713065">for</span>&nbsp;<span class="ident" id="7713069">i</span><span class="op" id="7713070">,</span>&nbsp;<span class="ident" id="7713072">offs</span>&nbsp;<span class="op" id="7713077">:=</span>&nbsp;<span class="keyword" id="7713080">range</span>&nbsp;<span class="ident" id="7713086"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7713087">.</span><span class="ident" id="7713088">lines</span>&nbsp;<span class="op" id="7713094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713098">got2</span>&nbsp;<span class="op" id="7713103">:=</span>&nbsp;<span class="ident" id="7713106"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7713107">.</span><span class="ident" id="7713108">PositionFor</span><span class="op" id="7713119">(</span><span class="ident" id="7713120"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7713121">.</span><span class="ident" id="7713122">Pos</span><span class="op" id="7713125">(</span><span class="ident" id="7713126"><a href="/go/token/position_test.go.html#7713072">offs</a></span><span class="op" id="7713130">)</span><span class="op" id="7713131">,</span>&nbsp;<span class="builtintype" id="7713133">true</span><span class="op" id="7713137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713141">got3</span>&nbsp;<span class="op" id="7713146">:=</span>&nbsp;<span class="ident" id="7713149"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7713150">.</span><span class="ident" id="7713151">Position</span><span class="op" id="7713159">(</span><span class="ident" id="7713160"><a href="/go/token/position_test.go.html#7712185">f</a></span><span class="op" id="7713161">.</span><span class="ident" id="7713162">Pos</span><span class="op" id="7713165">(</span><span class="ident" id="7713166"><a href="/go/token/position_test.go.html#7713072">offs</a></span><span class="op" id="7713170">)</span><span class="op" id="7713171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713175">want</span>&nbsp;<span class="op" id="7713180">:=</span>&nbsp;<span class="ident" id="7713183"><a href="/go/token/position.go.html#5172109">Position</a></span><span class="op" id="7713191">{</span><span class="ident" id="7713192"><a href="/go/token/position_test.go.html#7712145">filename</a></span><span class="op" id="7713200">,</span>&nbsp;<span class="ident" id="7713202"><a href="/go/token/position_test.go.html#7713072">offs</a></span><span class="op" id="7713206">,</span>&nbsp;<span class="ident" id="7713208"><a href="/go/token/position_test.go.html#7713069">i</a></span>&nbsp;<span class="op" id="7713210">+</span>&nbsp;<span class="num" id="7713212">1</span><span class="op" id="7713213">,</span>&nbsp;<span class="num" id="7713215">1</span><span class="op" id="7713216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713220">//&nbsp;manually&nbsp;compute&nbsp;wanted&nbsp;filename&nbsp;and&nbsp;line</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713267">line</span>&nbsp;<span class="op" id="7713272">:=</span>&nbsp;<span class="ident" id="7713275"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713279">.</span><span class="ident" id="7713280">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713287">if</span>&nbsp;<span class="ident" id="7713290"><a href="/go/token/position_test.go.html#7713069">i</a></span><span class="op" id="7713291">+</span><span class="num" id="7713292">1</span>&nbsp;<span class="op" id="7713294">&gt;=</span>&nbsp;<span class="ident" id="7713297"><a href="/go/token/position_test.go.html#7712692">l1</a></span>&nbsp;<span class="op" id="7713300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713305"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713309">.</span><span class="ident" id="7713310">Filename</span>&nbsp;<span class="op" id="7713319">=</span>&nbsp;<span class="string" id="7713321">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713327"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713331">.</span><span class="ident" id="7713332">Line</span>&nbsp;<span class="op" id="7713337">=</span>&nbsp;<span class="ident" id="7713339"><a href="/go/token/position_test.go.html#7713267">line</a></span>&nbsp;<span class="op" id="7713344">-</span>&nbsp;<span class="ident" id="7713346"><a href="/go/token/position_test.go.html#7712692">l1</a></span>&nbsp;<span class="op" id="7713349">+</span>&nbsp;<span class="num" id="7713351">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713357">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713361">if</span>&nbsp;<span class="ident" id="7713364"><a href="/go/token/position_test.go.html#7713069">i</a></span><span class="op" id="7713365">+</span><span class="num" id="7713366">1</span>&nbsp;<span class="op" id="7713368">&gt;=</span>&nbsp;<span class="ident" id="7713371"><a href="/go/token/position_test.go.html#7712696">l2</a></span>&nbsp;<span class="op" id="7713374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713379"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713383">.</span><span class="ident" id="7713384">Filename</span>&nbsp;<span class="op" id="7713393">=</span>&nbsp;<span class="string" id="7713395">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713404"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713408">.</span><span class="ident" id="7713409">Line</span>&nbsp;<span class="op" id="7713414">=</span>&nbsp;<span class="ident" id="7713416"><a href="/go/token/position_test.go.html#7713267">line</a></span>&nbsp;<span class="op" id="7713421">-</span>&nbsp;<span class="ident" id="7713423"><a href="/go/token/position_test.go.html#7712696">l2</a></span>&nbsp;<span class="op" id="7713426">+</span>&nbsp;<span class="num" id="7713428">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713436"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7713444">(</span><span class="ident" id="7713445"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7713446">,</span>&nbsp;<span class="string" id="7713448">&#34;3.&nbsp;PositionFor&nbsp;adjusted&#34;</span><span class="op" id="7713473">,</span>&nbsp;<span class="ident" id="7713475"><a href="/go/token/position_test.go.html#7713098">got2</a></span><span class="op" id="7713479">,</span>&nbsp;<span class="ident" id="7713481"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713485">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713489"><a href="/go/token/position_test.go.html#7705260">checkPos</a></span><span class="op" id="7713497">(</span><span class="ident" id="7713498"><a href="/go/token/position_test.go.html#7712055">t</a></span><span class="op" id="7713499">,</span>&nbsp;<span class="string" id="7713501">&#34;3.&nbsp;Position&#34;</span><span class="op" id="7713514">,</span>&nbsp;<span class="ident" id="7713516"><a href="/go/token/position_test.go.html#7713141">got3</a></span><span class="op" id="7713520">,</span>&nbsp;<span class="ident" id="7713522"><a href="/go/token/position_test.go.html#7713175">want</a></span><span class="op" id="7713526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713529">}</span><br>
<span class="lineno"></span><span class="op" id="7713531">}</span>
</div>
</body>
</html>
