<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5843362">package</span>&nbsp;<span class="ident" id="5843370">lex8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5843376">import</span>&nbsp;<span class="op" id="5843383">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5843386">&#34;bufio&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5843395">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5843400">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5843403">//&nbsp;RuneScanner&nbsp;is&nbsp;a&nbsp;rune&nbsp;scanner&nbsp;that&nbsp;scans&nbsp;runes&nbsp;from&nbsp;a&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5843466">//&nbsp;and&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;tracks&nbsp;the&nbsp;reading&nbsp;position.</span><br>
<span class="lineno">10</span><span class="keyword" id="5843519">type</span>&nbsp;<span class="ident" id="5843524">RuneScanner</span>&nbsp;<span class="keyword" id="5843536">struct</span>&nbsp;<span class="op" id="5843543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843546">file</span>&nbsp;<span class="builtintype" id="5843551">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843559">line</span>&nbsp;<span class="builtintype" id="5843564">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843570">rc</span>&nbsp;<span class="ident" id="5843573">io</span><span class="op" id="5843575">.</span><span class="ident" id="5843576">ReadCloser</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843588">r</span>&nbsp;&nbsp;<span class="op" id="5843591">*</span><span class="ident" id="5843592">bufio</span><span class="op" id="5843597">.</span><span class="ident" id="5843598">Reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843607">Err</span>&nbsp;&nbsp;<span class="builtintype" id="5843612">error</span>&nbsp;<span class="comment" id="5843618">//&nbsp;any&nbsp;error&nbsp;encountered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843644">Rune</span>&nbsp;<span class="builtintype" id="5843649">rune</span>&nbsp;&nbsp;<span class="comment" id="5843655">//&nbsp;the&nbsp;rune&nbsp;just&nbsp;read</span><br>
<span class="lineno"></span><span class="op" id="5843677">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5843680">//&nbsp;NewRuneScanner&nbsp;creates&nbsp;a&nbsp;scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="5843717">func</span>&nbsp;<span class="ident" id="5843722">NewRuneScanner</span><span class="op" id="5843736">(</span><span class="ident" id="5843737">file</span>&nbsp;<span class="builtintype" id="5843742">string</span><span class="op" id="5843748">,</span>&nbsp;<span class="ident" id="5843750">rc</span>&nbsp;<span class="ident" id="5843753">io</span><span class="op" id="5843755">.</span><span class="ident" id="5843756">ReadCloser</span><span class="op" id="5843766">)</span>&nbsp;<span class="op" id="5843768">*</span><span class="ident" id="5843769">RuneScanner</span>&nbsp;<span class="op" id="5843781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843784">ret</span>&nbsp;<span class="op" id="5843788">:=</span>&nbsp;<span class="builtinfunc" id="5843791">new</span><span class="op" id="5843794">(</span><span class="ident" id="5843795">RuneScanner</span><span class="op" id="5843806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843809">ret</span><span class="op" id="5843812">.</span><span class="ident" id="5843813">file</span>&nbsp;<span class="op" id="5843818">=</span>&nbsp;<span class="ident" id="5843820">file</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843826">ret</span><span class="op" id="5843829">.</span><span class="ident" id="5843830">rc</span>&nbsp;<span class="op" id="5843833">=</span>&nbsp;<span class="ident" id="5843835">rc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843839">ret</span><span class="op" id="5843842">.</span><span class="ident" id="5843843">r</span>&nbsp;<span class="op" id="5843845">=</span>&nbsp;<span class="ident" id="5843847">bufio</span><span class="op" id="5843852">.</span><span class="ident" id="5843853">NewReader</span><span class="op" id="5843862">(</span><span class="ident" id="5843863">rc</span><span class="op" id="5843865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5843868">ret</span><span class="op" id="5843871">.</span><span class="ident" id="5843872">line</span>&nbsp;<span class="op" id="5843877">=</span>&nbsp;<span class="num" id="5843879">1</span>&nbsp;<span class="comment" id="5843881">//&nbsp;natural&nbsp;counting</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5843903">return</span>&nbsp;<span class="ident" id="5843910">ret</span><br>
<span class="lineno">30</span><span class="op" id="5843914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5843917">//&nbsp;Scan&nbsp;reads&nbsp;in&nbsp;the&nbsp;next&nbsp;rune&nbsp;to&nbsp;s.Rune.</span><br>
<span class="lineno"></span><span class="comment" id="5843959">//&nbsp;It&nbsp;closes&nbsp;the&nbsp;reader&nbsp;automatically&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the&nbsp;end&nbsp;of&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="5844029">//&nbsp;or&nbsp;when&nbsp;an&nbsp;error&nbsp;occurs.</span><br>
<span class="lineno">35</span><span class="keyword" id="5844057">func</span>&nbsp;<span class="op" id="5844062">(</span><span class="ident" id="5844063">s</span>&nbsp;<span class="op" id="5844065">*</span><span class="ident" id="5844066">RuneScanner</span><span class="op" id="5844077">)</span>&nbsp;<span class="ident" id="5844079">Scan</span><span class="op" id="5844083">(</span><span class="op" id="5844084">)</span>&nbsp;<span class="builtintype" id="5844086">bool</span>&nbsp;<span class="op" id="5844091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5844094">wasEndline</span>&nbsp;<span class="op" id="5844105">:=</span>&nbsp;<span class="ident" id="5844108">s</span><span class="op" id="5844109">.</span><span class="ident" id="5844110">Rune</span>&nbsp;<span class="op" id="5844115">==</span>&nbsp;<span class="string" id="5844118">&#39;\n&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5844125">s</span><span class="op" id="5844126">.</span><span class="ident" id="5844127">Rune</span><span class="op" id="5844131">,</span>&nbsp;<span class="ident" id="5844133">_</span><span class="op" id="5844134">,</span>&nbsp;<span class="ident" id="5844136">s</span><span class="op" id="5844137">.</span><span class="ident" id="5844138">Err</span>&nbsp;<span class="op" id="5844142">=</span>&nbsp;<span class="ident" id="5844144">s</span><span class="op" id="5844145">.</span><span class="ident" id="5844146">r</span><span class="op" id="5844147">.</span><span class="ident" id="5844148">ReadRune</span><span class="op" id="5844156">(</span><span class="op" id="5844157">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844161">if</span>&nbsp;<span class="ident" id="5844164">s</span><span class="op" id="5844165">.</span><span class="ident" id="5844166">Err</span>&nbsp;<span class="op" id="5844170">!=</span>&nbsp;<span class="ident" id="5844173">nil</span>&nbsp;<span class="op" id="5844177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5844181">closeErr</span>&nbsp;<span class="op" id="5844190">:=</span>&nbsp;<span class="ident" id="5844193">s</span><span class="op" id="5844194">.</span><span class="ident" id="5844195">rc</span><span class="op" id="5844197">.</span><span class="ident" id="5844198">Close</span><span class="op" id="5844203">(</span><span class="op" id="5844204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844208">if</span>&nbsp;<span class="ident" id="5844211">s</span><span class="op" id="5844212">.</span><span class="ident" id="5844213">Err</span>&nbsp;<span class="op" id="5844217">==</span>&nbsp;<span class="ident" id="5844220">io</span><span class="op" id="5844222">.</span><span class="ident" id="5844223">EOF</span>&nbsp;<span class="op" id="5844227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5844232">s</span><span class="op" id="5844233">.</span><span class="ident" id="5844234">Err</span>&nbsp;<span class="op" id="5844238">=</span>&nbsp;<span class="ident" id="5844240">closeErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5844251">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844255">return</span>&nbsp;<span class="ident" id="5844262">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5844269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844273">if</span>&nbsp;<span class="ident" id="5844276">wasEndline</span>&nbsp;<span class="op" id="5844287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5844291">s</span><span class="op" id="5844292">.</span><span class="ident" id="5844293">line</span><span class="op" id="5844297">++</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5844301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844305">return</span>&nbsp;<span class="ident" id="5844312">true</span><br>
<span class="lineno"></span><span class="op" id="5844317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="5844320">//&nbsp;Pos&nbsp;returns&nbsp;the&nbsp;current&nbsp;position&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5844369">func</span>&nbsp;<span class="op" id="5844374">(</span><span class="ident" id="5844375">s</span>&nbsp;<span class="op" id="5844377">*</span><span class="ident" id="5844378">RuneScanner</span><span class="op" id="5844389">)</span>&nbsp;<span class="ident" id="5844391">Pos</span><span class="op" id="5844394">(</span><span class="op" id="5844395">)</span>&nbsp;<span class="op" id="5844397">*</span><span class="ident" id="5844398">Pos</span>&nbsp;<span class="op" id="5844402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5844405">return</span>&nbsp;<span class="op" id="5844412">&amp;</span><span class="ident" id="5844413">Pos</span><span class="op" id="5844416">{</span><span class="ident" id="5844417">s</span><span class="op" id="5844418">.</span><span class="ident" id="5844419">file</span><span class="op" id="5844423">,</span>&nbsp;<span class="ident" id="5844425">s</span><span class="op" id="5844426">.</span><span class="ident" id="5844427">line</span><span class="op" id="5844431">}</span><br>
<span class="lineno"></span><span class="op" id="5844433">}</span>
</div>
</body>
</html>
