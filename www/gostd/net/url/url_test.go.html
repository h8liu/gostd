<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html" class="current">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7348431">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7348486">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7348540">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7348591">package</span>&nbsp;<span class="ident" id="7348599">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7348604">import</span>&nbsp;<span class="op" id="7348611">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348614">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348621">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348632">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348643">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7348653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7348656">type</span>&nbsp;<span class="ident" id="7348661">URLTest</span>&nbsp;<span class="keyword" id="7348669">struct</span>&nbsp;<span class="op" id="7348676">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348679">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7348689">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348697">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7348707">*</span><span class="ident" id="7348708">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348713">roundtrip</span>&nbsp;<span class="builtintype" id="7348723">string</span>&nbsp;<span class="comment" id="7348730">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7348801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7348804">var</span>&nbsp;<span class="ident" id="7348808">urltests</span>&nbsp;<span class="op" id="7348817">=</span>&nbsp;<span class="op" id="7348819">[</span><span class="op" id="7348820">]</span><span class="ident" id="7348821">URLTest</span><span class="op" id="7348828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7348831">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348847">&#34;http://www.google.com&#34;</span><span class="op" id="7348870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348874">&amp;</span><span class="ident" id="7348875">URL</span><span class="op" id="7348878">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348883">Scheme</span><span class="op" id="7348889">:</span>&nbsp;<span class="string" id="7348891">&#34;http&#34;</span><span class="op" id="7348897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348902">Host</span><span class="op" id="7348906">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7348910">&#34;www.google.com&#34;</span><span class="op" id="7348926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348930">}</span><span class="op" id="7348931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348935">&#34;&#34;</span><span class="op" id="7348937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348940">}</span><span class="op" id="7348941">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7348944">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7348957">&#34;http://www.google.com/&#34;</span><span class="op" id="7348981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7348985">&amp;</span><span class="ident" id="7348986">URL</span><span class="op" id="7348989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7348994">Scheme</span><span class="op" id="7349000">:</span>&nbsp;<span class="string" id="7349002">&#34;http&#34;</span><span class="op" id="7349008">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349013">Host</span><span class="op" id="7349017">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349021">&#34;www.google.com&#34;</span><span class="op" id="7349037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349042">Path</span><span class="op" id="7349046">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349050">&#34;/&#34;</span><span class="op" id="7349053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349057">}</span><span class="op" id="7349058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349062">&#34;&#34;</span><span class="op" id="7349064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349067">}</span><span class="op" id="7349068">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349071">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349102">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7349142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349146">&amp;</span><span class="ident" id="7349147">URL</span><span class="op" id="7349150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349155">Scheme</span><span class="op" id="7349161">:</span>&nbsp;<span class="string" id="7349163">&#34;http&#34;</span><span class="op" id="7349169">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349174">Host</span><span class="op" id="7349178">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349182">&#34;www.google.com&#34;</span><span class="op" id="7349198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349203">Path</span><span class="op" id="7349207">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349211">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7349226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349230">}</span><span class="op" id="7349231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349235">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7349273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349276">}</span><span class="op" id="7349277">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349280">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349293">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7349326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349330">&amp;</span><span class="ident" id="7349331">URL</span><span class="op" id="7349334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349339">Scheme</span><span class="op" id="7349345">:</span>&nbsp;<span class="string" id="7349347">&#34;ftp&#34;</span><span class="op" id="7349352">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349357">User</span><span class="op" id="7349361">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7349365">User</span><span class="op" id="7349369">(</span><span class="string" id="7349370">&#34;webmaster&#34;</span><span class="op" id="7349381">)</span><span class="op" id="7349382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349387">Host</span><span class="op" id="7349391">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349395">&#34;www.google.com&#34;</span><span class="op" id="7349411">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349416">Path</span><span class="op" id="7349420">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349424">&#34;/&#34;</span><span class="op" id="7349427">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349431">}</span><span class="op" id="7349432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349436">&#34;&#34;</span><span class="op" id="7349438">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349441">}</span><span class="op" id="7349442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349445">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349481">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7349515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349519">&amp;</span><span class="ident" id="7349520">URL</span><span class="op" id="7349523">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349528">Scheme</span><span class="op" id="7349534">:</span>&nbsp;<span class="string" id="7349536">&#34;ftp&#34;</span><span class="op" id="7349541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349546">User</span><span class="op" id="7349550">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7349554">User</span><span class="op" id="7349558">(</span><span class="string" id="7349559">&#34;john&nbsp;doe&#34;</span><span class="op" id="7349569">)</span><span class="op" id="7349570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349575">Host</span><span class="op" id="7349579">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349583">&#34;www.google.com&#34;</span><span class="op" id="7349599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349604">Path</span><span class="op" id="7349608">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349612">&#34;/&#34;</span><span class="op" id="7349615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349619">}</span><span class="op" id="7349620">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349624">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7349658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349661">}</span><span class="op" id="7349662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349665">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349679">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7349717">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349721">&amp;</span><span class="ident" id="7349722">URL</span><span class="op" id="7349725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349730">Scheme</span><span class="op" id="7349736">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349740">&#34;http&#34;</span><span class="op" id="7349746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349751">Host</span><span class="op" id="7349755">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7349761">&#34;www.google.com&#34;</span><span class="op" id="7349777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349782">Path</span><span class="op" id="7349786">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7349792">&#34;/&#34;</span><span class="op" id="7349795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349800">RawQuery</span><span class="op" id="7349808">:</span>&nbsp;<span class="string" id="7349810">&#34;q=go+language&#34;</span><span class="op" id="7349825">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349829">}</span><span class="op" id="7349830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349834">&#34;&#34;</span><span class="op" id="7349836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349839">}</span><span class="op" id="7349840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7349843">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349883">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7349887">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7349927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7349931">&amp;</span><span class="ident" id="7349932">URL</span><span class="op" id="7349935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349940">Scheme</span><span class="op" id="7349946">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7349950">&#34;http&#34;</span><span class="op" id="7349956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349961">Host</span><span class="op" id="7349965">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7349971">&#34;www.google.com&#34;</span><span class="op" id="7349987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7349992">Path</span><span class="op" id="7349996">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7350002">&#34;/&#34;</span><span class="op" id="7350005">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350010">RawQuery</span><span class="op" id="7350018">:</span>&nbsp;<span class="string" id="7350020">&#34;q=go%20language&#34;</span><span class="op" id="7350037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350041">}</span><span class="op" id="7350042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350046">&#34;&#34;</span><span class="op" id="7350048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350051">}</span><span class="op" id="7350052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350055">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350081">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7350116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350120">&amp;</span><span class="ident" id="7350121">URL</span><span class="op" id="7350124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350129">Scheme</span><span class="op" id="7350135">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350139">&#34;http&#34;</span><span class="op" id="7350145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350150">Host</span><span class="op" id="7350154">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7350160">&#34;www.google.com&#34;</span><span class="op" id="7350176">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350181">Path</span><span class="op" id="7350185">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7350191">&#34;/a&nbsp;b&#34;</span><span class="op" id="7350197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350202">RawQuery</span><span class="op" id="7350210">:</span>&nbsp;<span class="string" id="7350212">&#34;q=c+d&#34;</span><span class="op" id="7350219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350223">}</span><span class="op" id="7350224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350228">&#34;&#34;</span><span class="op" id="7350230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350233">}</span><span class="op" id="7350234">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350237">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350283">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7350319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350323">&amp;</span><span class="ident" id="7350324">URL</span><span class="op" id="7350327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350332">Scheme</span><span class="op" id="7350338">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350342">&#34;http&#34;</span><span class="op" id="7350348">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350353">Opaque</span><span class="op" id="7350359">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350363">&#34;www.google.com/&#34;</span><span class="op" id="7350380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350385">RawQuery</span><span class="op" id="7350393">:</span>&nbsp;<span class="string" id="7350395">&#34;q=go+language&#34;</span><span class="op" id="7350410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350414">}</span><span class="op" id="7350415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350419">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7350455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350458">}</span><span class="op" id="7350459">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350462">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350508">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7350550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350554">&amp;</span><span class="ident" id="7350555">URL</span><span class="op" id="7350558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350563">Scheme</span><span class="op" id="7350569">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350573">&#34;http&#34;</span><span class="op" id="7350579">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350584">Opaque</span><span class="op" id="7350590">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350594">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7350617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350622">RawQuery</span><span class="op" id="7350630">:</span>&nbsp;<span class="string" id="7350632">&#34;q=go+language&#34;</span><span class="op" id="7350647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350651">}</span><span class="op" id="7350652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350656">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7350698">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350701">}</span><span class="op" id="7350702">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350705">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350737">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7350767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350771">&amp;</span><span class="ident" id="7350772">URL</span><span class="op" id="7350775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350780">Scheme</span><span class="op" id="7350786">:</span>&nbsp;<span class="string" id="7350788">&#34;mailto&#34;</span><span class="op" id="7350796">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350801">Path</span><span class="op" id="7350805">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7350809">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7350832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350836">}</span><span class="op" id="7350837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350841">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7350873">,</span>&nbsp;<span class="comment" id="7350875">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350902">}</span><span class="op" id="7350903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7350906">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7350928">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7350957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7350961">&amp;</span><span class="ident" id="7350962">URL</span><span class="op" id="7350965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350970">Scheme</span><span class="op" id="7350976">:</span>&nbsp;<span class="string" id="7350978">&#34;mailto&#34;</span><span class="op" id="7350986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7350991">Opaque</span><span class="op" id="7350997">:</span>&nbsp;<span class="string" id="7350999">&#34;webmaster@golang.org&#34;</span><span class="op" id="7351021">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351025">}</span><span class="op" id="7351026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351030">&#34;&#34;</span><span class="op" id="7351032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351035">}</span><span class="op" id="7351036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351039">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351093">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351097">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7351120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351124">&amp;</span><span class="ident" id="7351125">URL</span><span class="op" id="7351128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351133">Path</span><span class="op" id="7351137">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7351143">&#34;/foo&#34;</span><span class="op" id="7351149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351154">RawQuery</span><span class="op" id="7351162">:</span>&nbsp;<span class="string" id="7351164">&#34;query=http://bad&#34;</span><span class="op" id="7351182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351186">}</span><span class="op" id="7351187">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351191">&#34;&#34;</span><span class="op" id="7351193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351196">}</span><span class="op" id="7351197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351200">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351261">&#34;//foo&#34;</span><span class="op" id="7351268">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351272">&amp;</span><span class="ident" id="7351273">URL</span><span class="op" id="7351276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351281">Host</span><span class="op" id="7351285">:</span>&nbsp;<span class="string" id="7351287">&#34;foo&#34;</span><span class="op" id="7351292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351296">}</span><span class="op" id="7351297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351301">&#34;&#34;</span><span class="op" id="7351303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351306">}</span><span class="op" id="7351307">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351310">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351376">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7351397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351401">&amp;</span><span class="ident" id="7351402">URL</span><span class="op" id="7351405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351410">User</span><span class="op" id="7351414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7351420">User</span><span class="op" id="7351424">(</span><span class="string" id="7351425">&#34;user&#34;</span><span class="op" id="7351431">)</span><span class="op" id="7351432">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351437">Host</span><span class="op" id="7351441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7351447">&#34;foo&#34;</span><span class="op" id="7351452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351457">Path</span><span class="op" id="7351461">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7351467">&#34;/path&#34;</span><span class="op" id="7351474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351479">RawQuery</span><span class="op" id="7351487">:</span>&nbsp;<span class="string" id="7351489">&#34;a=b&#34;</span><span class="op" id="7351494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351498">}</span><span class="op" id="7351499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351503">&#34;&#34;</span><span class="op" id="7351505">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351508">}</span><span class="op" id="7351509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351512">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351587">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351648">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351707">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7351767">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351790">&#34;///threeslashes&#34;</span><span class="op" id="7351807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351811">&amp;</span><span class="ident" id="7351812">URL</span><span class="op" id="7351815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351820">Path</span><span class="op" id="7351824">:</span>&nbsp;<span class="string" id="7351826">&#34;///threeslashes&#34;</span><span class="op" id="7351843">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351847">}</span><span class="op" id="7351848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351852">&#34;&#34;</span><span class="op" id="7351854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351857">}</span><span class="op" id="7351858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351865">&#34;http://user:password@google.com&#34;</span><span class="op" id="7351898">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351902">&amp;</span><span class="ident" id="7351903">URL</span><span class="op" id="7351906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351911">Scheme</span><span class="op" id="7351917">:</span>&nbsp;<span class="string" id="7351919">&#34;http&#34;</span><span class="op" id="7351925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351930">User</span><span class="op" id="7351934">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7351938">UserPassword</span><span class="op" id="7351950">(</span><span class="string" id="7351951">&#34;user&#34;</span><span class="op" id="7351957">,</span>&nbsp;<span class="string" id="7351959">&#34;password&#34;</span><span class="op" id="7351969">)</span><span class="op" id="7351970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351975">Host</span><span class="op" id="7351979">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7351983">&#34;google.com&#34;</span><span class="op" id="7351995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351999">}</span><span class="op" id="7352000">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352004">&#34;http://user:password@google.com&#34;</span><span class="op" id="7352037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352040">}</span><span class="op" id="7352041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352044">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352100">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7352133">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352137">&amp;</span><span class="ident" id="7352138">URL</span><span class="op" id="7352141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352146">Scheme</span><span class="op" id="7352152">:</span>&nbsp;<span class="string" id="7352154">&#34;http&#34;</span><span class="op" id="7352160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352165">User</span><span class="op" id="7352169">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7352173">UserPassword</span><span class="op" id="7352185">(</span><span class="string" id="7352186">&#34;j@ne&#34;</span><span class="op" id="7352192">,</span>&nbsp;<span class="string" id="7352194">&#34;password&#34;</span><span class="op" id="7352204">)</span><span class="op" id="7352205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352210">Host</span><span class="op" id="7352214">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7352218">&#34;google.com&#34;</span><span class="op" id="7352230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352234">}</span><span class="op" id="7352235">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352239">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7352274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352277">}</span><span class="op" id="7352278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352281">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352337">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7352370">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352374">&amp;</span><span class="ident" id="7352375">URL</span><span class="op" id="7352378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352383">Scheme</span><span class="op" id="7352389">:</span>&nbsp;<span class="string" id="7352391">&#34;http&#34;</span><span class="op" id="7352397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352402">User</span><span class="op" id="7352406">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7352410">UserPassword</span><span class="op" id="7352422">(</span><span class="string" id="7352423">&#34;jane&#34;</span><span class="op" id="7352429">,</span>&nbsp;<span class="string" id="7352431">&#34;p@ssword&#34;</span><span class="op" id="7352441">)</span><span class="op" id="7352442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352447">Host</span><span class="op" id="7352451">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7352455">&#34;google.com&#34;</span><span class="op" id="7352467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352471">}</span><span class="op" id="7352472">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352476">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7352511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352514">}</span><span class="op" id="7352515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352522">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7352566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352570">&amp;</span><span class="ident" id="7352571">URL</span><span class="op" id="7352574">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352579">Scheme</span><span class="op" id="7352585">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7352589">&#34;http&#34;</span><span class="op" id="7352595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352600">User</span><span class="op" id="7352604">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7352610">UserPassword</span><span class="op" id="7352622">(</span><span class="string" id="7352623">&#34;j@ne&#34;</span><span class="op" id="7352629">,</span>&nbsp;<span class="string" id="7352631">&#34;password&#34;</span><span class="op" id="7352641">)</span><span class="op" id="7352642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352647">Host</span><span class="op" id="7352651">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7352657">&#34;google.com&#34;</span><span class="op" id="7352669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352674">Path</span><span class="op" id="7352678">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7352684">&#34;/p@th&#34;</span><span class="op" id="7352691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352696">RawQuery</span><span class="op" id="7352704">:</span>&nbsp;<span class="string" id="7352706">&#34;q=@go&#34;</span><span class="op" id="7352713">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352717">}</span><span class="op" id="7352718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352722">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7352768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352771">}</span><span class="op" id="7352772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352779">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7352821">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352825">&amp;</span><span class="ident" id="7352826">URL</span><span class="op" id="7352829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352834">Scheme</span><span class="op" id="7352840">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7352844">&#34;http&#34;</span><span class="op" id="7352850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352855">Host</span><span class="op" id="7352859">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7352865">&#34;www.google.com&#34;</span><span class="op" id="7352881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352886">Path</span><span class="op" id="7352890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7352896">&#34;/&#34;</span><span class="op" id="7352899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352904">RawQuery</span><span class="op" id="7352912">:</span>&nbsp;<span class="string" id="7352914">&#34;q=go+language&#34;</span><span class="op" id="7352929">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352934">Fragment</span><span class="op" id="7352942">:</span>&nbsp;<span class="string" id="7352944">&#34;foo&#34;</span><span class="op" id="7352949">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352953">}</span><span class="op" id="7352954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352958">&#34;&#34;</span><span class="op" id="7352960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352963">}</span><span class="op" id="7352964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352967">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7352971">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7353019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353023">&amp;</span><span class="ident" id="7353024">URL</span><span class="op" id="7353027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353032">Scheme</span><span class="op" id="7353038">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7353042">&#34;http&#34;</span><span class="op" id="7353048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353053">Host</span><span class="op" id="7353057">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353063">&#34;www.google.com&#34;</span><span class="op" id="7353079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353084">Path</span><span class="op" id="7353088">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7353094">&#34;/&#34;</span><span class="op" id="7353097">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353102">RawQuery</span><span class="op" id="7353110">:</span>&nbsp;<span class="string" id="7353112">&#34;q=go+language&#34;</span><span class="op" id="7353127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353132">Fragment</span><span class="op" id="7353140">:</span>&nbsp;<span class="string" id="7353142">&#34;foo&amp;bar&#34;</span><span class="op" id="7353151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353155">}</span><span class="op" id="7353156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353160">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7353206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353209">}</span><span class="op" id="7353210">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353217">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7353243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353247">&amp;</span><span class="ident" id="7353248">URL</span><span class="op" id="7353251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353256">Scheme</span><span class="op" id="7353262">:</span>&nbsp;<span class="string" id="7353264">&#34;file&#34;</span><span class="op" id="7353270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353275">Host</span><span class="op" id="7353279">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7353283">&#34;&#34;</span><span class="op" id="7353285">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353290">Path</span><span class="op" id="7353294">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7353298">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7353317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353321">}</span><span class="op" id="7353322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353326">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7353352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353355">}</span><span class="op" id="7353356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353359">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353409">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353467">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7353494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353498">&amp;</span><span class="ident" id="7353499">URL</span><span class="op" id="7353502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353507">Scheme</span><span class="op" id="7353513">:</span>&nbsp;<span class="string" id="7353515">&#34;file&#34;</span><span class="op" id="7353521">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353526">Host</span><span class="op" id="7353530">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7353534">&#34;&#34;</span><span class="op" id="7353536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353541">Path</span><span class="op" id="7353545">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7353549">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7353569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353573">}</span><span class="op" id="7353574">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353578">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7353605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353608">}</span><span class="op" id="7353609">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353612">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353644">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7353673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353677">&amp;</span><span class="ident" id="7353678">URL</span><span class="op" id="7353681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353686">Scheme</span><span class="op" id="7353692">:</span>&nbsp;<span class="string" id="7353694">&#34;mailto&#34;</span><span class="op" id="7353702">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353707">Opaque</span><span class="op" id="7353713">:</span>&nbsp;<span class="string" id="7353715">&#34;webmaster@golang.org&#34;</span><span class="op" id="7353737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353741">}</span><span class="op" id="7353742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353746">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7353775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353778">}</span><span class="op" id="7353779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353782">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353804">&#34;a/b/c&#34;</span><span class="op" id="7353811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353815">&amp;</span><span class="ident" id="7353816">URL</span><span class="op" id="7353819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353824">Path</span><span class="op" id="7353828">:</span>&nbsp;<span class="string" id="7353830">&#34;a/b/c&#34;</span><span class="op" id="7353837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353841">}</span><span class="op" id="7353842">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353846">&#34;a/b/c&#34;</span><span class="op" id="7353853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353856">}</span><span class="op" id="7353857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7353860">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7353905">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7353941">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353945">&amp;</span><span class="ident" id="7353946">URL</span><span class="op" id="7353949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353954">Scheme</span><span class="op" id="7353960">:</span>&nbsp;<span class="string" id="7353962">&#34;http&#34;</span><span class="op" id="7353968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353973">User</span><span class="op" id="7353977">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7353981">UserPassword</span><span class="op" id="7353993">(</span><span class="string" id="7353994">&#34;?am&#34;</span><span class="op" id="7353999">,</span>&nbsp;<span class="string" id="7354001">&#34;pa?sword&#34;</span><span class="op" id="7354011">)</span><span class="op" id="7354012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354017">Host</span><span class="op" id="7354021">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7354025">&#34;google.com&#34;</span><span class="op" id="7354037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354041">}</span><span class="op" id="7354042">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7354046">&#34;&#34;</span><span class="op" id="7354048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354051">}</span><span class="op" id="7354052">,</span><br>
<span class="lineno"></span><span class="op" id="7354054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7354057">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7354119">func</span>&nbsp;<span class="ident" id="7354124">ufmt</span><span class="op" id="7354128">(</span><span class="ident" id="7354129">u</span>&nbsp;<span class="op" id="7354131">*</span><span class="ident" id="7354132">URL</span><span class="op" id="7354135">)</span>&nbsp;<span class="builtintype" id="7354137">string</span>&nbsp;<span class="op" id="7354144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354147">var</span>&nbsp;<span class="ident" id="7354151">user</span><span class="op" id="7354155">,</span>&nbsp;<span class="ident" id="7354157">pass</span>&nbsp;<span class="keyword" id="7354162">interface</span><span class="op" id="7354171">{</span><span class="op" id="7354172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354175">if</span>&nbsp;<span class="ident" id="7354178">u</span><span class="op" id="7354179">.</span><span class="ident" id="7354180">User</span>&nbsp;<span class="op" id="7354185">!=</span>&nbsp;<span class="ident" id="7354188">nil</span>&nbsp;<span class="op" id="7354192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354196">user</span>&nbsp;<span class="op" id="7354201">=</span>&nbsp;<span class="ident" id="7354203">u</span><span class="op" id="7354204">.</span><span class="ident" id="7354205">User</span><span class="op" id="7354209">.</span><span class="ident" id="7354210">Username</span><span class="op" id="7354218">(</span><span class="op" id="7354219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354223">if</span>&nbsp;<span class="ident" id="7354226">p</span><span class="op" id="7354227">,</span>&nbsp;<span class="ident" id="7354229">ok</span>&nbsp;<span class="op" id="7354232">:=</span>&nbsp;<span class="ident" id="7354235">u</span><span class="op" id="7354236">.</span><span class="ident" id="7354237">User</span><span class="op" id="7354241">.</span><span class="ident" id="7354242">Password</span><span class="op" id="7354250">(</span><span class="op" id="7354251">)</span><span class="op" id="7354252">;</span>&nbsp;<span class="ident" id="7354254">ok</span>&nbsp;<span class="op" id="7354257">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354262">pass</span>&nbsp;<span class="op" id="7354267">=</span>&nbsp;<span class="ident" id="7354269">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354279">return</span>&nbsp;<span class="ident" id="7354286">fmt</span><span class="op" id="7354289">.</span><span class="ident" id="7354290">Sprintf</span><span class="op" id="7354297">(</span><span class="string" id="7354298">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7354376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354380">u</span><span class="op" id="7354381">.</span><span class="ident" id="7354382">Opaque</span><span class="op" id="7354388">,</span>&nbsp;<span class="ident" id="7354390">u</span><span class="op" id="7354391">.</span><span class="ident" id="7354392">Scheme</span><span class="op" id="7354398">,</span>&nbsp;<span class="ident" id="7354400">user</span><span class="op" id="7354404">,</span>&nbsp;<span class="ident" id="7354406">pass</span><span class="op" id="7354410">,</span>&nbsp;<span class="ident" id="7354412">u</span><span class="op" id="7354413">.</span><span class="ident" id="7354414">Host</span><span class="op" id="7354418">,</span>&nbsp;<span class="ident" id="7354420">u</span><span class="op" id="7354421">.</span><span class="ident" id="7354422">Path</span><span class="op" id="7354426">,</span>&nbsp;<span class="ident" id="7354428">u</span><span class="op" id="7354429">.</span><span class="ident" id="7354430">RawQuery</span><span class="op" id="7354438">,</span>&nbsp;<span class="ident" id="7354440">u</span><span class="op" id="7354441">.</span><span class="ident" id="7354442">Fragment</span><span class="op" id="7354450">)</span><br>
<span class="lineno">305</span><span class="op" id="7354452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7354455">func</span>&nbsp;<span class="ident" id="7354460">DoTest</span><span class="op" id="7354466">(</span><span class="ident" id="7354467">t</span>&nbsp;<span class="op" id="7354469">*</span><span class="ident" id="7354470">testing</span><span class="op" id="7354477">.</span><span class="ident" id="7354478">T</span><span class="op" id="7354479">,</span>&nbsp;<span class="ident" id="7354481">parse</span>&nbsp;<span class="keyword" id="7354487">func</span><span class="op" id="7354491">(</span><span class="builtintype" id="7354492">string</span><span class="op" id="7354498">)</span>&nbsp;<span class="op" id="7354500">(</span><span class="op" id="7354501">*</span><span class="ident" id="7354502">URL</span><span class="op" id="7354505">,</span>&nbsp;<span class="builtintype" id="7354507">error</span><span class="op" id="7354512">)</span><span class="op" id="7354513">,</span>&nbsp;<span class="ident" id="7354515">name</span>&nbsp;<span class="builtintype" id="7354520">string</span><span class="op" id="7354526">,</span>&nbsp;<span class="ident" id="7354528">tests</span>&nbsp;<span class="op" id="7354534">[</span><span class="op" id="7354535">]</span><span class="ident" id="7354536">URLTest</span><span class="op" id="7354543">)</span>&nbsp;<span class="op" id="7354545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354548">for</span>&nbsp;<span class="ident" id="7354552">_</span><span class="op" id="7354553">,</span>&nbsp;<span class="ident" id="7354555">tt</span>&nbsp;<span class="op" id="7354558">:=</span>&nbsp;<span class="keyword" id="7354561">range</span>&nbsp;<span class="ident" id="7354567">tests</span>&nbsp;<span class="op" id="7354573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354577">u</span><span class="op" id="7354578">,</span>&nbsp;<span class="ident" id="7354580">err</span>&nbsp;<span class="op" id="7354584">:=</span>&nbsp;<span class="ident" id="7354587">parse</span><span class="op" id="7354592">(</span><span class="ident" id="7354593">tt</span><span class="op" id="7354595">.</span><span class="ident" id="7354596">in</span><span class="op" id="7354598">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354602">if</span>&nbsp;<span class="ident" id="7354605">err</span>&nbsp;<span class="op" id="7354609">!=</span>&nbsp;<span class="ident" id="7354612">nil</span>&nbsp;<span class="op" id="7354616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354621">t</span><span class="op" id="7354622">.</span><span class="ident" id="7354623">Errorf</span><span class="op" id="7354629">(</span><span class="string" id="7354630">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7354656">,</span>&nbsp;<span class="ident" id="7354658">name</span><span class="op" id="7354662">,</span>&nbsp;<span class="ident" id="7354664">tt</span><span class="op" id="7354666">.</span><span class="ident" id="7354667">in</span><span class="op" id="7354669">,</span>&nbsp;<span class="ident" id="7354671">err</span><span class="op" id="7354674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354679">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354694">if</span>&nbsp;<span class="op" id="7354697">!</span><span class="ident" id="7354698">reflect</span><span class="op" id="7354705">.</span><span class="ident" id="7354706">DeepEqual</span><span class="op" id="7354715">(</span><span class="ident" id="7354716">u</span><span class="op" id="7354717">,</span>&nbsp;<span class="ident" id="7354719">tt</span><span class="op" id="7354721">.</span><span class="ident" id="7354722">out</span><span class="op" id="7354725">)</span>&nbsp;<span class="op" id="7354727">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354732">t</span><span class="op" id="7354733">.</span><span class="ident" id="7354734">Errorf</span><span class="op" id="7354740">(</span><span class="string" id="7354741">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7354774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354780">name</span><span class="op" id="7354784">,</span>&nbsp;<span class="ident" id="7354786">tt</span><span class="op" id="7354788">.</span><span class="ident" id="7354789">in</span><span class="op" id="7354791">,</span>&nbsp;<span class="ident" id="7354793">ufmt</span><span class="op" id="7354797">(</span><span class="ident" id="7354798">u</span><span class="op" id="7354799">)</span><span class="op" id="7354800">,</span>&nbsp;<span class="ident" id="7354802">ufmt</span><span class="op" id="7354806">(</span><span class="ident" id="7354807">tt</span><span class="op" id="7354809">.</span><span class="ident" id="7354810">out</span><span class="op" id="7354813">)</span><span class="op" id="7354814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354821">}</span><br>
<span class="lineno"></span><span class="op" id="7354823">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7354826">func</span>&nbsp;<span class="ident" id="7354831">BenchmarkString</span><span class="op" id="7354846">(</span><span class="ident" id="7354847">b</span>&nbsp;<span class="op" id="7354849">*</span><span class="ident" id="7354850">testing</span><span class="op" id="7354857">.</span><span class="ident" id="7354858">B</span><span class="op" id="7354859">)</span>&nbsp;<span class="op" id="7354861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354864">b</span><span class="op" id="7354865">.</span><span class="ident" id="7354866">StopTimer</span><span class="op" id="7354875">(</span><span class="op" id="7354876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354879">b</span><span class="op" id="7354880">.</span><span class="ident" id="7354881">ReportAllocs</span><span class="op" id="7354893">(</span><span class="op" id="7354894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354897">for</span>&nbsp;<span class="ident" id="7354901">_</span><span class="op" id="7354902">,</span>&nbsp;<span class="ident" id="7354904">tt</span>&nbsp;<span class="op" id="7354907">:=</span>&nbsp;<span class="keyword" id="7354910">range</span>&nbsp;<span class="ident" id="7354916">urltests</span>&nbsp;<span class="op" id="7354925">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354929">u</span><span class="op" id="7354930">,</span>&nbsp;<span class="ident" id="7354932">err</span>&nbsp;<span class="op" id="7354936">:=</span>&nbsp;<span class="ident" id="7354939">Parse</span><span class="op" id="7354944">(</span><span class="ident" id="7354945">tt</span><span class="op" id="7354947">.</span><span class="ident" id="7354948">in</span><span class="op" id="7354950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354954">if</span>&nbsp;<span class="ident" id="7354957">err</span>&nbsp;<span class="op" id="7354961">!=</span>&nbsp;<span class="ident" id="7354964">nil</span>&nbsp;<span class="op" id="7354968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354973">b</span><span class="op" id="7354974">.</span><span class="ident" id="7354975">Errorf</span><span class="op" id="7354981">(</span><span class="string" id="7354982">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7355011">,</span>&nbsp;<span class="ident" id="7355013">tt</span><span class="op" id="7355015">.</span><span class="ident" id="7355016">in</span><span class="op" id="7355018">,</span>&nbsp;<span class="ident" id="7355020">err</span><span class="op" id="7355023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355028">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355039">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355043">if</span>&nbsp;<span class="ident" id="7355046">tt</span><span class="op" id="7355048">.</span><span class="ident" id="7355049">roundtrip</span>&nbsp;<span class="op" id="7355059">==</span>&nbsp;<span class="string" id="7355062">&#34;&#34;</span>&nbsp;<span class="op" id="7355065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355070">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355085">b</span><span class="op" id="7355086">.</span><span class="ident" id="7355087">StartTimer</span><span class="op" id="7355097">(</span><span class="op" id="7355098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355102">var</span>&nbsp;<span class="ident" id="7355106">g</span>&nbsp;<span class="builtintype" id="7355108">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355117">for</span>&nbsp;<span class="ident" id="7355121">i</span>&nbsp;<span class="op" id="7355123">:=</span>&nbsp;<span class="num" id="7355126">0</span><span class="op" id="7355127">;</span>&nbsp;<span class="ident" id="7355129">i</span>&nbsp;<span class="op" id="7355131">&lt;</span>&nbsp;<span class="ident" id="7355133">b</span><span class="op" id="7355134">.</span><span class="ident" id="7355135">N</span><span class="op" id="7355136">;</span>&nbsp;<span class="ident" id="7355138">i</span><span class="op" id="7355139">++</span>&nbsp;<span class="op" id="7355142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355147">g</span>&nbsp;<span class="op" id="7355149">=</span>&nbsp;<span class="ident" id="7355151">u</span><span class="op" id="7355152">.</span><span class="ident" id="7355153">String</span><span class="op" id="7355159">(</span><span class="op" id="7355160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355168">b</span><span class="op" id="7355169">.</span><span class="ident" id="7355170">StopTimer</span><span class="op" id="7355179">(</span><span class="op" id="7355180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355184">if</span>&nbsp;<span class="ident" id="7355187">w</span>&nbsp;<span class="op" id="7355189">:=</span>&nbsp;<span class="ident" id="7355192">tt</span><span class="op" id="7355194">.</span><span class="ident" id="7355195">roundtrip</span><span class="op" id="7355204">;</span>&nbsp;<span class="ident" id="7355206">g</span>&nbsp;<span class="op" id="7355208">!=</span>&nbsp;<span class="ident" id="7355211">w</span>&nbsp;<span class="op" id="7355213">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355218">b</span><span class="op" id="7355219">.</span><span class="ident" id="7355220">Errorf</span><span class="op" id="7355226">(</span><span class="string" id="7355227">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7355262">,</span>&nbsp;<span class="ident" id="7355264">tt</span><span class="op" id="7355266">.</span><span class="ident" id="7355267">in</span><span class="op" id="7355269">,</span>&nbsp;<span class="ident" id="7355271">g</span><span class="op" id="7355272">,</span>&nbsp;<span class="ident" id="7355274">w</span><span class="op" id="7355275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355282">}</span><br>
<span class="lineno"></span><span class="op" id="7355284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7355287">func</span>&nbsp;<span class="ident" id="7355292">TestParse</span><span class="op" id="7355301">(</span><span class="ident" id="7355302">t</span>&nbsp;<span class="op" id="7355304">*</span><span class="ident" id="7355305">testing</span><span class="op" id="7355312">.</span><span class="ident" id="7355313">T</span><span class="op" id="7355314">)</span>&nbsp;<span class="op" id="7355316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355319">DoTest</span><span class="op" id="7355325">(</span><span class="ident" id="7355326">t</span><span class="op" id="7355327">,</span>&nbsp;<span class="ident" id="7355329">Parse</span><span class="op" id="7355334">,</span>&nbsp;<span class="string" id="7355336">&#34;Parse&#34;</span><span class="op" id="7355343">,</span>&nbsp;<span class="ident" id="7355345">urltests</span><span class="op" id="7355353">)</span><br>
<span class="lineno"></span><span class="op" id="7355355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7355358">const</span>&nbsp;<span class="ident" id="7355364">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7355392">=</span>&nbsp;<span class="string" id="7355394">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7355433">var</span>&nbsp;<span class="ident" id="7355437">parseRequestURLTests</span>&nbsp;<span class="op" id="7355458">=</span>&nbsp;<span class="op" id="7355460">[</span><span class="op" id="7355461">]</span><span class="keyword" id="7355462">struct</span>&nbsp;<span class="op" id="7355469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355472">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7355486">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355494">expectedValid</span>&nbsp;<span class="builtintype" id="7355508">bool</span><br>
<span class="lineno"></span><span class="op" id="7355513">}</span><span class="op" id="7355514">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355517">{</span><span class="string" id="7355518">&#34;http://foo.com&#34;</span><span class="op" id="7355534">,</span>&nbsp;<span class="builtintype" id="7355536">true</span><span class="op" id="7355540">}</span><span class="op" id="7355541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355544">{</span><span class="string" id="7355545">&#34;http://foo.com/&#34;</span><span class="op" id="7355562">,</span>&nbsp;<span class="builtintype" id="7355564">true</span><span class="op" id="7355568">}</span><span class="op" id="7355569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355572">{</span><span class="string" id="7355573">&#34;http://foo.com/path&#34;</span><span class="op" id="7355594">,</span>&nbsp;<span class="builtintype" id="7355596">true</span><span class="op" id="7355600">}</span><span class="op" id="7355601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355604">{</span><span class="string" id="7355605">&#34;/&#34;</span><span class="op" id="7355608">,</span>&nbsp;<span class="builtintype" id="7355610">true</span><span class="op" id="7355614">}</span><span class="op" id="7355615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355618">{</span><span class="ident" id="7355619">pathThatLooksSchemeRelative</span><span class="op" id="7355646">,</span>&nbsp;<span class="builtintype" id="7355648">true</span><span class="op" id="7355652">}</span><span class="op" id="7355653">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355656">{</span><span class="string" id="7355657">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7355702">,</span>&nbsp;<span class="builtintype" id="7355704">true</span><span class="op" id="7355708">}</span><span class="op" id="7355709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355712">{</span><span class="string" id="7355713">&#34;foo.html&#34;</span><span class="op" id="7355723">,</span>&nbsp;<span class="builtintype" id="7355725">false</span><span class="op" id="7355730">}</span><span class="op" id="7355731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355734">{</span><span class="string" id="7355735">&#34;../dir/&#34;</span><span class="op" id="7355744">,</span>&nbsp;<span class="builtintype" id="7355746">false</span><span class="op" id="7355751">}</span><span class="op" id="7355752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355755">{</span><span class="string" id="7355756">&#34;*&#34;</span><span class="op" id="7355759">,</span>&nbsp;<span class="builtintype" id="7355761">true</span><span class="op" id="7355765">}</span><span class="op" id="7355766">,</span><br>
<span class="lineno"></span><span class="op" id="7355768">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7355771">func</span>&nbsp;<span class="ident" id="7355776">TestParseRequestURI</span><span class="op" id="7355795">(</span><span class="ident" id="7355796">t</span>&nbsp;<span class="op" id="7355798">*</span><span class="ident" id="7355799">testing</span><span class="op" id="7355806">.</span><span class="ident" id="7355807">T</span><span class="op" id="7355808">)</span>&nbsp;<span class="op" id="7355810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355813">for</span>&nbsp;<span class="ident" id="7355817">_</span><span class="op" id="7355818">,</span>&nbsp;<span class="ident" id="7355820">test</span>&nbsp;<span class="op" id="7355825">:=</span>&nbsp;<span class="keyword" id="7355828">range</span>&nbsp;<span class="ident" id="7355834">parseRequestURLTests</span>&nbsp;<span class="op" id="7355855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355859">_</span><span class="op" id="7355860">,</span>&nbsp;<span class="ident" id="7355862">err</span>&nbsp;<span class="op" id="7355866">:=</span>&nbsp;<span class="ident" id="7355869">ParseRequestURI</span><span class="op" id="7355884">(</span><span class="ident" id="7355885">test</span><span class="op" id="7355889">.</span><span class="ident" id="7355890">url</span><span class="op" id="7355893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355897">valid</span>&nbsp;<span class="op" id="7355903">:=</span>&nbsp;<span class="ident" id="7355906">err</span>&nbsp;<span class="op" id="7355910">==</span>&nbsp;<span class="ident" id="7355913">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355919">if</span>&nbsp;<span class="ident" id="7355922">valid</span>&nbsp;<span class="op" id="7355928">!=</span>&nbsp;<span class="ident" id="7355931">test</span><span class="op" id="7355935">.</span><span class="ident" id="7355936">expectedValid</span>&nbsp;<span class="op" id="7355950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355955">t</span><span class="op" id="7355956">.</span><span class="ident" id="7355957">Errorf</span><span class="op" id="7355963">(</span><span class="string" id="7355964">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7355998">,</span>&nbsp;<span class="ident" id="7356000">test</span><span class="op" id="7356004">.</span><span class="ident" id="7356005">expectedValid</span><span class="op" id="7356018">,</span>&nbsp;<span class="ident" id="7356020">test</span><span class="op" id="7356024">.</span><span class="ident" id="7356025">url</span><span class="op" id="7356028">,</span>&nbsp;<span class="ident" id="7356030">valid</span><span class="op" id="7356035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356046">url</span><span class="op" id="7356049">,</span>&nbsp;<span class="ident" id="7356051">err</span>&nbsp;<span class="op" id="7356055">:=</span>&nbsp;<span class="ident" id="7356058">ParseRequestURI</span><span class="op" id="7356073">(</span><span class="ident" id="7356074">pathThatLooksSchemeRelative</span><span class="op" id="7356101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356104">if</span>&nbsp;<span class="ident" id="7356107">err</span>&nbsp;<span class="op" id="7356111">!=</span>&nbsp;<span class="ident" id="7356114">nil</span>&nbsp;<span class="op" id="7356118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356122">t</span><span class="op" id="7356123">.</span><span class="ident" id="7356124">Fatalf</span><span class="op" id="7356130">(</span><span class="string" id="7356131">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7356152">,</span>&nbsp;<span class="ident" id="7356154">err</span><span class="op" id="7356157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356163">if</span>&nbsp;<span class="ident" id="7356166">url</span><span class="op" id="7356169">.</span><span class="ident" id="7356170">Path</span>&nbsp;<span class="op" id="7356175">!=</span>&nbsp;<span class="ident" id="7356178">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7356206">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356210">t</span><span class="op" id="7356211">.</span><span class="ident" id="7356212">Errorf</span><span class="op" id="7356218">(</span><span class="string" id="7356219">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7356245">,</span>&nbsp;<span class="ident" id="7356247">pathThatLooksSchemeRelative</span><span class="op" id="7356274">,</span>&nbsp;<span class="ident" id="7356276">url</span><span class="op" id="7356279">.</span><span class="ident" id="7356280">Path</span><span class="op" id="7356284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356287">}</span><br>
<span class="lineno"></span><span class="op" id="7356289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356292">func</span>&nbsp;<span class="ident" id="7356297">DoTestString</span><span class="op" id="7356309">(</span><span class="ident" id="7356310">t</span>&nbsp;<span class="op" id="7356312">*</span><span class="ident" id="7356313">testing</span><span class="op" id="7356320">.</span><span class="ident" id="7356321">T</span><span class="op" id="7356322">,</span>&nbsp;<span class="ident" id="7356324">parse</span>&nbsp;<span class="keyword" id="7356330">func</span><span class="op" id="7356334">(</span><span class="builtintype" id="7356335">string</span><span class="op" id="7356341">)</span>&nbsp;<span class="op" id="7356343">(</span><span class="op" id="7356344">*</span><span class="ident" id="7356345">URL</span><span class="op" id="7356348">,</span>&nbsp;<span class="builtintype" id="7356350">error</span><span class="op" id="7356355">)</span><span class="op" id="7356356">,</span>&nbsp;<span class="ident" id="7356358">name</span>&nbsp;<span class="builtintype" id="7356363">string</span><span class="op" id="7356369">,</span>&nbsp;<span class="ident" id="7356371">tests</span>&nbsp;<span class="op" id="7356377">[</span><span class="op" id="7356378">]</span><span class="ident" id="7356379">URLTest</span><span class="op" id="7356386">)</span>&nbsp;<span class="op" id="7356388">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356391">for</span>&nbsp;<span class="ident" id="7356395">_</span><span class="op" id="7356396">,</span>&nbsp;<span class="ident" id="7356398">tt</span>&nbsp;<span class="op" id="7356401">:=</span>&nbsp;<span class="keyword" id="7356404">range</span>&nbsp;<span class="ident" id="7356410">tests</span>&nbsp;<span class="op" id="7356416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356420">u</span><span class="op" id="7356421">,</span>&nbsp;<span class="ident" id="7356423">err</span>&nbsp;<span class="op" id="7356427">:=</span>&nbsp;<span class="ident" id="7356430">parse</span><span class="op" id="7356435">(</span><span class="ident" id="7356436">tt</span><span class="op" id="7356438">.</span><span class="ident" id="7356439">in</span><span class="op" id="7356441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356445">if</span>&nbsp;<span class="ident" id="7356448">err</span>&nbsp;<span class="op" id="7356452">!=</span>&nbsp;<span class="ident" id="7356455">nil</span>&nbsp;<span class="op" id="7356459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356464">t</span><span class="op" id="7356465">.</span><span class="ident" id="7356466">Errorf</span><span class="op" id="7356472">(</span><span class="string" id="7356473">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7356499">,</span>&nbsp;<span class="ident" id="7356501">name</span><span class="op" id="7356505">,</span>&nbsp;<span class="ident" id="7356507">tt</span><span class="op" id="7356509">.</span><span class="ident" id="7356510">in</span><span class="op" id="7356512">,</span>&nbsp;<span class="ident" id="7356514">err</span><span class="op" id="7356517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356522">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356537">expected</span>&nbsp;<span class="op" id="7356546">:=</span>&nbsp;<span class="ident" id="7356549">tt</span><span class="op" id="7356551">.</span><span class="ident" id="7356552">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356557">if</span>&nbsp;<span class="builtinfunc" id="7356560">len</span><span class="op" id="7356563">(</span><span class="ident" id="7356564">tt</span><span class="op" id="7356566">.</span><span class="ident" id="7356567">roundtrip</span><span class="op" id="7356576">)</span>&nbsp;<span class="op" id="7356578">&gt;</span>&nbsp;<span class="num" id="7356580">0</span>&nbsp;<span class="op" id="7356582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356587">expected</span>&nbsp;<span class="op" id="7356596">=</span>&nbsp;<span class="ident" id="7356598">tt</span><span class="op" id="7356600">.</span><span class="ident" id="7356601">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356613">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356617">s</span>&nbsp;<span class="op" id="7356619">:=</span>&nbsp;<span class="ident" id="7356622">u</span><span class="op" id="7356623">.</span><span class="ident" id="7356624">String</span><span class="op" id="7356630">(</span><span class="op" id="7356631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356635">if</span>&nbsp;<span class="ident" id="7356638">s</span>&nbsp;<span class="op" id="7356640">!=</span>&nbsp;<span class="ident" id="7356643">expected</span>&nbsp;<span class="op" id="7356652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356657">t</span><span class="op" id="7356658">.</span><span class="ident" id="7356659">Errorf</span><span class="op" id="7356665">(</span><span class="string" id="7356666">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7356703">,</span>&nbsp;<span class="ident" id="7356705">name</span><span class="op" id="7356709">,</span>&nbsp;<span class="ident" id="7356711">tt</span><span class="op" id="7356713">.</span><span class="ident" id="7356714">in</span><span class="op" id="7356716">,</span>&nbsp;<span class="ident" id="7356718">s</span><span class="op" id="7356719">,</span>&nbsp;<span class="ident" id="7356721">expected</span><span class="op" id="7356729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356736">}</span><br>
<span class="lineno">400</span><span class="op" id="7356738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356741">func</span>&nbsp;<span class="ident" id="7356746">TestURLString</span><span class="op" id="7356759">(</span><span class="ident" id="7356760">t</span>&nbsp;<span class="op" id="7356762">*</span><span class="ident" id="7356763">testing</span><span class="op" id="7356770">.</span><span class="ident" id="7356771">T</span><span class="op" id="7356772">)</span>&nbsp;<span class="op" id="7356774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356777">DoTestString</span><span class="op" id="7356789">(</span><span class="ident" id="7356790">t</span><span class="op" id="7356791">,</span>&nbsp;<span class="ident" id="7356793">Parse</span><span class="op" id="7356798">,</span>&nbsp;<span class="string" id="7356800">&#34;Parse&#34;</span><span class="op" id="7356807">,</span>&nbsp;<span class="ident" id="7356809">urltests</span><span class="op" id="7356817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356821">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7356865">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356892">noslash</span>&nbsp;<span class="op" id="7356900">:=</span>&nbsp;<span class="ident" id="7356903">URLTest</span><span class="op" id="7356910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7356914">&#34;http://www.google.com/search&#34;</span><span class="op" id="7356944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356948">&amp;</span><span class="ident" id="7356949">URL</span><span class="op" id="7356952">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356957">Scheme</span><span class="op" id="7356963">:</span>&nbsp;<span class="string" id="7356965">&#34;http&#34;</span><span class="op" id="7356971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356976">Host</span><span class="op" id="7356980">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7356984">&#34;www.google.com&#34;</span><span class="op" id="7357000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357005">Path</span><span class="op" id="7357009">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7357013">&#34;search&#34;</span><span class="op" id="7357021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357025">}</span><span class="op" id="7357026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357030">&#34;&#34;</span><span class="op" id="7357032">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357038">s</span>&nbsp;<span class="op" id="7357040">:=</span>&nbsp;<span class="ident" id="7357043">noslash</span><span class="op" id="7357050">.</span><span class="ident" id="7357051">out</span><span class="op" id="7357054">.</span><span class="ident" id="7357055">String</span><span class="op" id="7357061">(</span><span class="op" id="7357062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357065">if</span>&nbsp;<span class="ident" id="7357068">s</span>&nbsp;<span class="op" id="7357070">!=</span>&nbsp;<span class="ident" id="7357073">noslash</span><span class="op" id="7357080">.</span><span class="ident" id="7357081">in</span>&nbsp;<span class="op" id="7357084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357088">t</span><span class="op" id="7357089">.</span><span class="ident" id="7357090">Errorf</span><span class="op" id="7357096">(</span><span class="string" id="7357097">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7357117">,</span>&nbsp;<span class="ident" id="7357119">noslash</span><span class="op" id="7357126">.</span><span class="ident" id="7357127">in</span><span class="op" id="7357129">,</span>&nbsp;<span class="ident" id="7357131">s</span><span class="op" id="7357132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357135">}</span><br>
<span class="lineno">420</span><span class="op" id="7357137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357140">type</span>&nbsp;<span class="ident" id="7357145">EscapeTest</span>&nbsp;<span class="keyword" id="7357156">struct</span>&nbsp;<span class="op" id="7357163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357166">in</span>&nbsp;&nbsp;<span class="builtintype" id="7357170">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357178">out</span>&nbsp;<span class="builtintype" id="7357182">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357190">err</span>&nbsp;<span class="builtintype" id="7357194">error</span><br>
<span class="lineno"></span><span class="op" id="7357200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357203">var</span>&nbsp;<span class="ident" id="7357207">unescapeTests</span>&nbsp;<span class="op" id="7357221">=</span>&nbsp;<span class="op" id="7357223">[</span><span class="op" id="7357224">]</span><span class="ident" id="7357225">EscapeTest</span><span class="op" id="7357235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357238">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357242">&#34;&#34;</span><span class="op" id="7357244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357248">&#34;&#34;</span><span class="op" id="7357250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357254">nil</span><span class="op" id="7357257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357260">}</span><span class="op" id="7357261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357264">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357268">&#34;abc&#34;</span><span class="op" id="7357273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357277">&#34;abc&#34;</span><span class="op" id="7357282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357286">nil</span><span class="op" id="7357289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357292">}</span><span class="op" id="7357293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357296">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357300">&#34;1%41&#34;</span><span class="op" id="7357306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357310">&#34;1A&#34;</span><span class="op" id="7357314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357318">nil</span><span class="op" id="7357321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357324">}</span><span class="op" id="7357325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357328">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357332">&#34;1%41%42%43&#34;</span><span class="op" id="7357344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357348">&#34;1ABC&#34;</span><span class="op" id="7357354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357358">nil</span><span class="op" id="7357361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357364">}</span><span class="op" id="7357365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357368">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357372">&#34;%4a&#34;</span><span class="op" id="7357377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357381">&#34;J&#34;</span><span class="op" id="7357384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357388">nil</span><span class="op" id="7357391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357394">}</span><span class="op" id="7357395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357398">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357402">&#34;%6F&#34;</span><span class="op" id="7357407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357411">&#34;o&#34;</span><span class="op" id="7357414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357418">nil</span><span class="op" id="7357421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357424">}</span><span class="op" id="7357425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357428">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357432">&#34;%&#34;</span><span class="op" id="7357435">,</span>&nbsp;<span class="comment" id="7357437">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357472">&#34;&#34;</span><span class="op" id="7357474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357478">EscapeError</span><span class="op" id="7357489">(</span><span class="string" id="7357490">&#34;%&#34;</span><span class="op" id="7357493">)</span><span class="op" id="7357494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357497">}</span><span class="op" id="7357498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357501">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357505">&#34;%a&#34;</span><span class="op" id="7357509">,</span>&nbsp;<span class="comment" id="7357511">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357546">&#34;&#34;</span><span class="op" id="7357548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357552">EscapeError</span><span class="op" id="7357563">(</span><span class="string" id="7357564">&#34;%a&#34;</span><span class="op" id="7357568">)</span><span class="op" id="7357569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357572">}</span><span class="op" id="7357573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357576">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357580">&#34;%1&#34;</span><span class="op" id="7357584">,</span>&nbsp;<span class="comment" id="7357586">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357621">&#34;&#34;</span><span class="op" id="7357623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357627">EscapeError</span><span class="op" id="7357638">(</span><span class="string" id="7357639">&#34;%1&#34;</span><span class="op" id="7357643">)</span><span class="op" id="7357644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357647">}</span><span class="op" id="7357648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357651">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357655">&#34;123%45%6&#34;</span><span class="op" id="7357665">,</span>&nbsp;<span class="comment" id="7357667">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357702">&#34;&#34;</span><span class="op" id="7357704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357708">EscapeError</span><span class="op" id="7357719">(</span><span class="string" id="7357720">&#34;%6&#34;</span><span class="op" id="7357724">)</span><span class="op" id="7357725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357728">}</span><span class="op" id="7357729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357732">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357736">&#34;%zzzzz&#34;</span><span class="op" id="7357744">,</span>&nbsp;<span class="comment" id="7357746">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7357770">&#34;&#34;</span><span class="op" id="7357772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357776">EscapeError</span><span class="op" id="7357787">(</span><span class="string" id="7357788">&#34;%zz&#34;</span><span class="op" id="7357793">)</span><span class="op" id="7357794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357797">}</span><span class="op" id="7357798">,</span><br>
<span class="lineno"></span><span class="op" id="7357800">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7357803">func</span>&nbsp;<span class="ident" id="7357808">TestUnescape</span><span class="op" id="7357820">(</span><span class="ident" id="7357821">t</span>&nbsp;<span class="op" id="7357823">*</span><span class="ident" id="7357824">testing</span><span class="op" id="7357831">.</span><span class="ident" id="7357832">T</span><span class="op" id="7357833">)</span>&nbsp;<span class="op" id="7357835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357838">for</span>&nbsp;<span class="ident" id="7357842">_</span><span class="op" id="7357843">,</span>&nbsp;<span class="ident" id="7357845">tt</span>&nbsp;<span class="op" id="7357848">:=</span>&nbsp;<span class="keyword" id="7357851">range</span>&nbsp;<span class="ident" id="7357857">unescapeTests</span>&nbsp;<span class="op" id="7357871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357875">actual</span><span class="op" id="7357881">,</span>&nbsp;<span class="ident" id="7357883">err</span>&nbsp;<span class="op" id="7357887">:=</span>&nbsp;<span class="ident" id="7357890">QueryUnescape</span><span class="op" id="7357903">(</span><span class="ident" id="7357904">tt</span><span class="op" id="7357906">.</span><span class="ident" id="7357907">in</span><span class="op" id="7357909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357913">if</span>&nbsp;<span class="ident" id="7357916">actual</span>&nbsp;<span class="op" id="7357923">!=</span>&nbsp;<span class="ident" id="7357926">tt</span><span class="op" id="7357928">.</span><span class="ident" id="7357929">out</span>&nbsp;<span class="op" id="7357933">||</span>&nbsp;<span class="op" id="7357936">(</span><span class="ident" id="7357937">err</span>&nbsp;<span class="op" id="7357941">!=</span>&nbsp;<span class="ident" id="7357944">nil</span><span class="op" id="7357947">)</span>&nbsp;<span class="op" id="7357949">!=</span>&nbsp;<span class="op" id="7357952">(</span><span class="ident" id="7357953">tt</span><span class="op" id="7357955">.</span><span class="ident" id="7357956">err</span>&nbsp;<span class="op" id="7357960">!=</span>&nbsp;<span class="ident" id="7357963">nil</span><span class="op" id="7357966">)</span>&nbsp;<span class="op" id="7357968">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357973">t</span><span class="op" id="7357974">.</span><span class="ident" id="7357975">Errorf</span><span class="op" id="7357981">(</span><span class="string" id="7357982">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7358023">,</span>&nbsp;<span class="ident" id="7358025">tt</span><span class="op" id="7358027">.</span><span class="ident" id="7358028">in</span><span class="op" id="7358030">,</span>&nbsp;<span class="ident" id="7358032">actual</span><span class="op" id="7358038">,</span>&nbsp;<span class="ident" id="7358040">err</span><span class="op" id="7358043">,</span>&nbsp;<span class="ident" id="7358045">tt</span><span class="op" id="7358047">.</span><span class="ident" id="7358048">out</span><span class="op" id="7358051">,</span>&nbsp;<span class="ident" id="7358053">tt</span><span class="op" id="7358055">.</span><span class="ident" id="7358056">err</span><span class="op" id="7358059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358066">}</span><br>
<span class="lineno"></span><span class="op" id="7358068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7358071">var</span>&nbsp;<span class="ident" id="7358075">escapeTests</span>&nbsp;<span class="op" id="7358087">=</span>&nbsp;<span class="op" id="7358089">[</span><span class="op" id="7358090">]</span><span class="ident" id="7358091">EscapeTest</span><span class="op" id="7358101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358108">&#34;&#34;</span><span class="op" id="7358110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358114">&#34;&#34;</span><span class="op" id="7358116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358120">nil</span><span class="op" id="7358123">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358126">}</span><span class="op" id="7358127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358134">&#34;abc&#34;</span><span class="op" id="7358139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358143">&#34;abc&#34;</span><span class="op" id="7358148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358152">nil</span><span class="op" id="7358155">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358158">}</span><span class="op" id="7358159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358166">&#34;one&nbsp;two&#34;</span><span class="op" id="7358175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358179">&#34;one+two&#34;</span><span class="op" id="7358188">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358192">nil</span><span class="op" id="7358195">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358198">}</span><span class="op" id="7358199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358206">&#34;10%&#34;</span><span class="op" id="7358211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358215">&#34;10%25&#34;</span><span class="op" id="7358222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358226">nil</span><span class="op" id="7358229">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358232">}</span><span class="op" id="7358233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358240">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7358279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7358283">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7358385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358389">nil</span><span class="op" id="7358392">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358395">}</span><span class="op" id="7358396">,</span><br>
<span class="lineno"></span><span class="op" id="7358398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7358401">func</span>&nbsp;<span class="ident" id="7358406">TestEscape</span><span class="op" id="7358416">(</span><span class="ident" id="7358417">t</span>&nbsp;<span class="op" id="7358419">*</span><span class="ident" id="7358420">testing</span><span class="op" id="7358427">.</span><span class="ident" id="7358428">T</span><span class="op" id="7358429">)</span>&nbsp;<span class="op" id="7358431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358434">for</span>&nbsp;<span class="ident" id="7358438">_</span><span class="op" id="7358439">,</span>&nbsp;<span class="ident" id="7358441">tt</span>&nbsp;<span class="op" id="7358444">:=</span>&nbsp;<span class="keyword" id="7358447">range</span>&nbsp;<span class="ident" id="7358453">escapeTests</span>&nbsp;<span class="op" id="7358465">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358469">actual</span>&nbsp;<span class="op" id="7358476">:=</span>&nbsp;<span class="ident" id="7358479">QueryEscape</span><span class="op" id="7358490">(</span><span class="ident" id="7358491">tt</span><span class="op" id="7358493">.</span><span class="ident" id="7358494">in</span><span class="op" id="7358496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358500">if</span>&nbsp;<span class="ident" id="7358503">tt</span><span class="op" id="7358505">.</span><span class="ident" id="7358506">out</span>&nbsp;<span class="op" id="7358510">!=</span>&nbsp;<span class="ident" id="7358513">actual</span>&nbsp;<span class="op" id="7358520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358525">t</span><span class="op" id="7358526">.</span><span class="ident" id="7358527">Errorf</span><span class="op" id="7358533">(</span><span class="string" id="7358534">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7358565">,</span>&nbsp;<span class="ident" id="7358567">tt</span><span class="op" id="7358569">.</span><span class="ident" id="7358570">in</span><span class="op" id="7358572">,</span>&nbsp;<span class="ident" id="7358574">actual</span><span class="op" id="7358580">,</span>&nbsp;<span class="ident" id="7358582">tt</span><span class="op" id="7358584">.</span><span class="ident" id="7358585">out</span><span class="op" id="7358588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7358597">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358664">roundtrip</span><span class="op" id="7358673">,</span>&nbsp;<span class="ident" id="7358675">err</span>&nbsp;<span class="op" id="7358679">:=</span>&nbsp;<span class="ident" id="7358682">QueryUnescape</span><span class="op" id="7358695">(</span><span class="ident" id="7358696">actual</span><span class="op" id="7358702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7358706">if</span>&nbsp;<span class="ident" id="7358709">roundtrip</span>&nbsp;<span class="op" id="7358719">!=</span>&nbsp;<span class="ident" id="7358722">tt</span><span class="op" id="7358724">.</span><span class="ident" id="7358725">in</span>&nbsp;<span class="op" id="7358728">||</span>&nbsp;<span class="ident" id="7358731">err</span>&nbsp;<span class="op" id="7358735">!=</span>&nbsp;<span class="ident" id="7358738">nil</span>&nbsp;<span class="op" id="7358742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7358747">t</span><span class="op" id="7358748">.</span><span class="ident" id="7358749">Errorf</span><span class="op" id="7358755">(</span><span class="string" id="7358756">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7358797">,</span>&nbsp;<span class="ident" id="7358799">actual</span><span class="op" id="7358805">,</span>&nbsp;<span class="ident" id="7358807">roundtrip</span><span class="op" id="7358816">,</span>&nbsp;<span class="ident" id="7358818">err</span><span class="op" id="7358821">,</span>&nbsp;<span class="ident" id="7358823">tt</span><span class="op" id="7358825">.</span><span class="ident" id="7358826">in</span><span class="op" id="7358828">,</span>&nbsp;<span class="string" id="7358830">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7358842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358846">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358849">}</span><br>
<span class="lineno"></span><span class="op" id="7358851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7358854">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7358892">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7358934">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7358987">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7359070">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359075">type</span>&nbsp;<span class="ident" id="7359080">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7359096">struct</span>&nbsp;<span class="op" id="7359103">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359106">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7359115">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359123">expected</span>&nbsp;<span class="builtintype" id="7359132">string</span><br>
<span class="lineno"></span><span class="op" id="7359139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359142">var</span>&nbsp;<span class="ident" id="7359146">encodeQueryTests</span>&nbsp;<span class="op" id="7359163">=</span>&nbsp;<span class="op" id="7359165">[</span><span class="op" id="7359166">]</span><span class="ident" id="7359167">EncodeQueryTest</span><span class="op" id="7359182">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359185">{</span><span class="ident" id="7359186">nil</span><span class="op" id="7359189">,</span>&nbsp;<span class="string" id="7359191">&#34;&#34;</span><span class="op" id="7359193">}</span><span class="op" id="7359194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359197">{</span><span class="ident" id="7359198">Values</span><span class="op" id="7359204">{</span><span class="string" id="7359205">&#34;q&#34;</span><span class="op" id="7359208">:</span>&nbsp;<span class="op" id="7359210">{</span><span class="string" id="7359211">&#34;puppies&#34;</span><span class="op" id="7359220">}</span><span class="op" id="7359221">,</span>&nbsp;<span class="string" id="7359223">&#34;oe&#34;</span><span class="op" id="7359227">:</span>&nbsp;<span class="op" id="7359229">{</span><span class="string" id="7359230">&#34;utf8&#34;</span><span class="op" id="7359236">}</span><span class="op" id="7359237">}</span><span class="op" id="7359238">,</span>&nbsp;<span class="string" id="7359240">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7359259">}</span><span class="op" id="7359260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359263">{</span><span class="ident" id="7359264">Values</span><span class="op" id="7359270">{</span><span class="string" id="7359271">&#34;q&#34;</span><span class="op" id="7359274">:</span>&nbsp;<span class="op" id="7359276">{</span><span class="string" id="7359277">&#34;dogs&#34;</span><span class="op" id="7359283">,</span>&nbsp;<span class="string" id="7359285">&#34;&amp;&#34;</span><span class="op" id="7359288">,</span>&nbsp;<span class="string" id="7359290">&#34;7&#34;</span><span class="op" id="7359293">}</span><span class="op" id="7359294">}</span><span class="op" id="7359295">,</span>&nbsp;<span class="string" id="7359297">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7359315">}</span><span class="op" id="7359316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359319">{</span><span class="ident" id="7359320">Values</span><span class="op" id="7359326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7359330">&#34;a&#34;</span><span class="op" id="7359333">:</span>&nbsp;<span class="op" id="7359335">{</span><span class="string" id="7359336">&#34;a1&#34;</span><span class="op" id="7359340">,</span>&nbsp;<span class="string" id="7359342">&#34;a2&#34;</span><span class="op" id="7359346">,</span>&nbsp;<span class="string" id="7359348">&#34;a3&#34;</span><span class="op" id="7359352">}</span><span class="op" id="7359353">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7359357">&#34;b&#34;</span><span class="op" id="7359360">:</span>&nbsp;<span class="op" id="7359362">{</span><span class="string" id="7359363">&#34;b1&#34;</span><span class="op" id="7359367">,</span>&nbsp;<span class="string" id="7359369">&#34;b2&#34;</span><span class="op" id="7359373">,</span>&nbsp;<span class="string" id="7359375">&#34;b3&#34;</span><span class="op" id="7359379">}</span><span class="op" id="7359380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7359384">&#34;c&#34;</span><span class="op" id="7359387">:</span>&nbsp;<span class="op" id="7359389">{</span><span class="string" id="7359390">&#34;c1&#34;</span><span class="op" id="7359394">,</span>&nbsp;<span class="string" id="7359396">&#34;c2&#34;</span><span class="op" id="7359400">,</span>&nbsp;<span class="string" id="7359402">&#34;c3&#34;</span><span class="op" id="7359406">}</span><span class="op" id="7359407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359410">}</span><span class="op" id="7359411">,</span>&nbsp;<span class="string" id="7359413">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7359459">}</span><span class="op" id="7359460">,</span><br>
<span class="lineno"></span><span class="op" id="7359462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7359465">func</span>&nbsp;<span class="ident" id="7359470">TestEncodeQuery</span><span class="op" id="7359485">(</span><span class="ident" id="7359486">t</span>&nbsp;<span class="op" id="7359488">*</span><span class="ident" id="7359489">testing</span><span class="op" id="7359496">.</span><span class="ident" id="7359497">T</span><span class="op" id="7359498">)</span>&nbsp;<span class="op" id="7359500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359503">for</span>&nbsp;<span class="ident" id="7359507">_</span><span class="op" id="7359508">,</span>&nbsp;<span class="ident" id="7359510">tt</span>&nbsp;<span class="op" id="7359513">:=</span>&nbsp;<span class="keyword" id="7359516">range</span>&nbsp;<span class="ident" id="7359522">encodeQueryTests</span>&nbsp;<span class="op" id="7359539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359543">if</span>&nbsp;<span class="ident" id="7359546">q</span>&nbsp;<span class="op" id="7359548">:=</span>&nbsp;<span class="ident" id="7359551">tt</span><span class="op" id="7359553">.</span><span class="ident" id="7359554">m</span><span class="op" id="7359555">.</span><span class="ident" id="7359556">Encode</span><span class="op" id="7359562">(</span><span class="op" id="7359563">)</span><span class="op" id="7359564">;</span>&nbsp;<span class="ident" id="7359566">q</span>&nbsp;<span class="op" id="7359568">!=</span>&nbsp;<span class="ident" id="7359571">tt</span><span class="op" id="7359573">.</span><span class="ident" id="7359574">expected</span>&nbsp;<span class="op" id="7359583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359588">t</span><span class="op" id="7359589">.</span><span class="ident" id="7359590">Errorf</span><span class="op" id="7359596">(</span><span class="string" id="7359597">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7359629">,</span>&nbsp;<span class="ident" id="7359631">tt</span><span class="op" id="7359633">.</span><span class="ident" id="7359634">m</span><span class="op" id="7359635">,</span>&nbsp;<span class="ident" id="7359637">q</span><span class="op" id="7359638">,</span>&nbsp;<span class="ident" id="7359640">tt</span><span class="op" id="7359642">.</span><span class="ident" id="7359643">expected</span><span class="op" id="7359651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359655">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359658">}</span><br>
<span class="lineno"></span><span class="op" id="7359660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359663">var</span>&nbsp;<span class="ident" id="7359667">resolvePathTests</span>&nbsp;<span class="op" id="7359684">=</span>&nbsp;<span class="op" id="7359686">[</span><span class="op" id="7359687">]</span><span class="keyword" id="7359688">struct</span>&nbsp;<span class="op" id="7359695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359698">base</span><span class="op" id="7359702">,</span>&nbsp;<span class="ident" id="7359704">ref</span><span class="op" id="7359707">,</span>&nbsp;<span class="ident" id="7359709">expected</span>&nbsp;<span class="builtintype" id="7359718">string</span><br>
<span class="lineno">570</span><span class="op" id="7359725">}</span><span class="op" id="7359726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359729">{</span><span class="string" id="7359730">&#34;a/b&#34;</span><span class="op" id="7359735">,</span>&nbsp;<span class="string" id="7359737">&#34;.&#34;</span><span class="op" id="7359740">,</span>&nbsp;<span class="string" id="7359742">&#34;/a/&#34;</span><span class="op" id="7359747">}</span><span class="op" id="7359748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359751">{</span><span class="string" id="7359752">&#34;a/b&#34;</span><span class="op" id="7359757">,</span>&nbsp;<span class="string" id="7359759">&#34;c&#34;</span><span class="op" id="7359762">,</span>&nbsp;<span class="string" id="7359764">&#34;/a/c&#34;</span><span class="op" id="7359770">}</span><span class="op" id="7359771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359774">{</span><span class="string" id="7359775">&#34;a/b&#34;</span><span class="op" id="7359780">,</span>&nbsp;<span class="string" id="7359782">&#34;..&#34;</span><span class="op" id="7359786">,</span>&nbsp;<span class="string" id="7359788">&#34;/&#34;</span><span class="op" id="7359791">}</span><span class="op" id="7359792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359795">{</span><span class="string" id="7359796">&#34;a/&#34;</span><span class="op" id="7359800">,</span>&nbsp;<span class="string" id="7359802">&#34;..&#34;</span><span class="op" id="7359806">,</span>&nbsp;<span class="string" id="7359808">&#34;/&#34;</span><span class="op" id="7359811">}</span><span class="op" id="7359812">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359815">{</span><span class="string" id="7359816">&#34;a/&#34;</span><span class="op" id="7359820">,</span>&nbsp;<span class="string" id="7359822">&#34;../..&#34;</span><span class="op" id="7359829">,</span>&nbsp;<span class="string" id="7359831">&#34;/&#34;</span><span class="op" id="7359834">}</span><span class="op" id="7359835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359838">{</span><span class="string" id="7359839">&#34;a/b/c&#34;</span><span class="op" id="7359846">,</span>&nbsp;<span class="string" id="7359848">&#34;..&#34;</span><span class="op" id="7359852">,</span>&nbsp;<span class="string" id="7359854">&#34;/a/&#34;</span><span class="op" id="7359859">}</span><span class="op" id="7359860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359863">{</span><span class="string" id="7359864">&#34;a/b/c&#34;</span><span class="op" id="7359871">,</span>&nbsp;<span class="string" id="7359873">&#34;../d&#34;</span><span class="op" id="7359879">,</span>&nbsp;<span class="string" id="7359881">&#34;/a/d&#34;</span><span class="op" id="7359887">}</span><span class="op" id="7359888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359891">{</span><span class="string" id="7359892">&#34;a/b/c&#34;</span><span class="op" id="7359899">,</span>&nbsp;<span class="string" id="7359901">&#34;.././d&#34;</span><span class="op" id="7359909">,</span>&nbsp;<span class="string" id="7359911">&#34;/a/d&#34;</span><span class="op" id="7359917">}</span><span class="op" id="7359918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359921">{</span><span class="string" id="7359922">&#34;a/b&#34;</span><span class="op" id="7359927">,</span>&nbsp;<span class="string" id="7359929">&#34;./..&#34;</span><span class="op" id="7359935">,</span>&nbsp;<span class="string" id="7359937">&#34;/&#34;</span><span class="op" id="7359940">}</span><span class="op" id="7359941">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359944">{</span><span class="string" id="7359945">&#34;a/./b&#34;</span><span class="op" id="7359952">,</span>&nbsp;<span class="string" id="7359954">&#34;.&#34;</span><span class="op" id="7359957">,</span>&nbsp;<span class="string" id="7359959">&#34;/a/&#34;</span><span class="op" id="7359964">}</span><span class="op" id="7359965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359968">{</span><span class="string" id="7359969">&#34;a/../&#34;</span><span class="op" id="7359976">,</span>&nbsp;<span class="string" id="7359978">&#34;.&#34;</span><span class="op" id="7359981">,</span>&nbsp;<span class="string" id="7359983">&#34;/&#34;</span><span class="op" id="7359986">}</span><span class="op" id="7359987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359990">{</span><span class="string" id="7359991">&#34;a/.././b&#34;</span><span class="op" id="7360001">,</span>&nbsp;<span class="string" id="7360003">&#34;c&#34;</span><span class="op" id="7360006">,</span>&nbsp;<span class="string" id="7360008">&#34;/c&#34;</span><span class="op" id="7360012">}</span><span class="op" id="7360013">,</span><br>
<span class="lineno"></span><span class="op" id="7360015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7360018">func</span>&nbsp;<span class="ident" id="7360023">TestResolvePath</span><span class="op" id="7360038">(</span><span class="ident" id="7360039">t</span>&nbsp;<span class="op" id="7360041">*</span><span class="ident" id="7360042">testing</span><span class="op" id="7360049">.</span><span class="ident" id="7360050">T</span><span class="op" id="7360051">)</span>&nbsp;<span class="op" id="7360053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360056">for</span>&nbsp;<span class="ident" id="7360060">_</span><span class="op" id="7360061">,</span>&nbsp;<span class="ident" id="7360063">test</span>&nbsp;<span class="op" id="7360068">:=</span>&nbsp;<span class="keyword" id="7360071">range</span>&nbsp;<span class="ident" id="7360077">resolvePathTests</span>&nbsp;<span class="op" id="7360094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360098">got</span>&nbsp;<span class="op" id="7360102">:=</span>&nbsp;<span class="ident" id="7360105">resolvePath</span><span class="op" id="7360116">(</span><span class="ident" id="7360117">test</span><span class="op" id="7360121">.</span><span class="ident" id="7360122">base</span><span class="op" id="7360126">,</span>&nbsp;<span class="ident" id="7360128">test</span><span class="op" id="7360132">.</span><span class="ident" id="7360133">ref</span><span class="op" id="7360136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360140">if</span>&nbsp;<span class="ident" id="7360143">got</span>&nbsp;<span class="op" id="7360147">!=</span>&nbsp;<span class="ident" id="7360150">test</span><span class="op" id="7360154">.</span><span class="ident" id="7360155">expected</span>&nbsp;<span class="op" id="7360164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360169">t</span><span class="op" id="7360170">.</span><span class="ident" id="7360171">Errorf</span><span class="op" id="7360177">(</span><span class="string" id="7360178">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7360211">,</span>&nbsp;<span class="ident" id="7360213">test</span><span class="op" id="7360217">.</span><span class="ident" id="7360218">base</span><span class="op" id="7360222">,</span>&nbsp;<span class="ident" id="7360224">test</span><span class="op" id="7360228">.</span><span class="ident" id="7360229">ref</span><span class="op" id="7360232">,</span>&nbsp;<span class="ident" id="7360234">got</span><span class="op" id="7360237">,</span>&nbsp;<span class="ident" id="7360239">test</span><span class="op" id="7360243">.</span><span class="ident" id="7360244">expected</span><span class="op" id="7360252">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360259">}</span><br>
<span class="lineno"></span><span class="op" id="7360261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360264">var</span>&nbsp;<span class="ident" id="7360268">resolveReferenceTests</span>&nbsp;<span class="op" id="7360290">=</span>&nbsp;<span class="op" id="7360292">[</span><span class="op" id="7360293">]</span><span class="keyword" id="7360294">struct</span>&nbsp;<span class="op" id="7360301">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360304">base</span><span class="op" id="7360308">,</span>&nbsp;<span class="ident" id="7360310">rel</span><span class="op" id="7360313">,</span>&nbsp;<span class="ident" id="7360315">expected</span>&nbsp;<span class="builtintype" id="7360324">string</span><br>
<span class="lineno"></span><span class="op" id="7360331">}</span><span class="op" id="7360332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360335">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360363">{</span><span class="string" id="7360364">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7360384">,</span>&nbsp;<span class="string" id="7360386">&#34;https://bar.com/&#34;</span><span class="op" id="7360404">,</span>&nbsp;<span class="string" id="7360406">&#34;https://bar.com/&#34;</span><span class="op" id="7360424">}</span><span class="op" id="7360425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360428">{</span><span class="string" id="7360429">&#34;http://foo.com/&#34;</span><span class="op" id="7360446">,</span>&nbsp;<span class="string" id="7360448">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7360470">,</span>&nbsp;<span class="string" id="7360472">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7360494">}</span><span class="op" id="7360495">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360498">{</span><span class="string" id="7360499">&#34;http://foo.com/bar&#34;</span><span class="op" id="7360519">,</span>&nbsp;<span class="string" id="7360521">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7360545">,</span>&nbsp;<span class="string" id="7360547">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7360571">}</span><span class="op" id="7360572">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360576">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360605">{</span><span class="string" id="7360606">&#34;http://foo.com/bar&#34;</span><span class="op" id="7360626">,</span>&nbsp;<span class="string" id="7360628">&#34;/baz&#34;</span><span class="op" id="7360634">,</span>&nbsp;<span class="string" id="7360636">&#34;http://foo.com/baz&#34;</span><span class="op" id="7360656">}</span><span class="op" id="7360657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360660">{</span><span class="string" id="7360661">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7360687">,</span>&nbsp;<span class="string" id="7360689">&#34;/baz&#34;</span><span class="op" id="7360695">,</span>&nbsp;<span class="string" id="7360697">&#34;http://foo.com/baz&#34;</span><span class="op" id="7360717">}</span><span class="op" id="7360718">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360721">{</span><span class="string" id="7360722">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7360746">,</span>&nbsp;<span class="string" id="7360748">&#34;/baz?c=d&#34;</span><span class="op" id="7360758">,</span>&nbsp;<span class="string" id="7360760">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7360784">}</span><span class="op" id="7360785">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360789">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360809">{</span><span class="string" id="7360810">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7360835">,</span>&nbsp;<span class="string" id="7360837">&#34;//bar.com/quux&#34;</span><span class="op" id="7360853">,</span>&nbsp;<span class="string" id="7360855">&#34;https://bar.com/quux&#34;</span><span class="op" id="7360877">}</span><span class="op" id="7360878">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360882">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7360913">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360939">{</span><span class="string" id="7360940">&#34;http://foo.com&#34;</span><span class="op" id="7360956">,</span>&nbsp;<span class="string" id="7360958">&#34;.&#34;</span><span class="op" id="7360961">,</span>&nbsp;<span class="string" id="7360963">&#34;http://foo.com/&#34;</span><span class="op" id="7360980">}</span><span class="op" id="7360981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360984">{</span><span class="string" id="7360985">&#34;http://foo.com/bar&#34;</span><span class="op" id="7361005">,</span>&nbsp;<span class="string" id="7361007">&#34;.&#34;</span><span class="op" id="7361010">,</span>&nbsp;<span class="string" id="7361012">&#34;http://foo.com/&#34;</span><span class="op" id="7361029">}</span><span class="op" id="7361030">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361033">{</span><span class="string" id="7361034">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7361055">,</span>&nbsp;<span class="string" id="7361057">&#34;.&#34;</span><span class="op" id="7361060">,</span>&nbsp;<span class="string" id="7361062">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7361083">}</span><span class="op" id="7361084">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7361088">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361107">{</span><span class="string" id="7361108">&#34;http://foo.com&#34;</span><span class="op" id="7361124">,</span>&nbsp;<span class="string" id="7361126">&#34;bar&#34;</span><span class="op" id="7361131">,</span>&nbsp;<span class="string" id="7361133">&#34;http://foo.com/bar&#34;</span><span class="op" id="7361153">}</span><span class="op" id="7361154">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361157">{</span><span class="string" id="7361158">&#34;http://foo.com/&#34;</span><span class="op" id="7361175">,</span>&nbsp;<span class="string" id="7361177">&#34;bar&#34;</span><span class="op" id="7361182">,</span>&nbsp;<span class="string" id="7361184">&#34;http://foo.com/bar&#34;</span><span class="op" id="7361204">}</span><span class="op" id="7361205">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361208">{</span><span class="string" id="7361209">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361233">,</span>&nbsp;<span class="string" id="7361235">&#34;quux&#34;</span><span class="op" id="7361241">,</span>&nbsp;<span class="string" id="7361243">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7361268">}</span><span class="op" id="7361269">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7361273">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361290">{</span><span class="string" id="7361291">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361315">,</span>&nbsp;<span class="string" id="7361317">&#34;../quux&#34;</span><span class="op" id="7361326">,</span>&nbsp;<span class="string" id="7361328">&#34;http://foo.com/quux&#34;</span><span class="op" id="7361349">}</span><span class="op" id="7361350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361353">{</span><span class="string" id="7361354">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361378">,</span>&nbsp;<span class="string" id="7361380">&#34;../../../../../quux&#34;</span><span class="op" id="7361401">,</span>&nbsp;<span class="string" id="7361403">&#34;http://foo.com/quux&#34;</span><span class="op" id="7361424">}</span><span class="op" id="7361425">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361428">{</span><span class="string" id="7361429">&#34;http://foo.com/bar&#34;</span><span class="op" id="7361449">,</span>&nbsp;<span class="string" id="7361451">&#34;..&#34;</span><span class="op" id="7361455">,</span>&nbsp;<span class="string" id="7361457">&#34;http://foo.com/&#34;</span><span class="op" id="7361474">}</span><span class="op" id="7361475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361478">{</span><span class="string" id="7361479">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361503">,</span>&nbsp;<span class="string" id="7361505">&#34;./..&#34;</span><span class="op" id="7361511">,</span>&nbsp;<span class="string" id="7361513">&#34;http://foo.com/&#34;</span><span class="op" id="7361530">}</span><span class="op" id="7361531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7361534">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361570">{</span><span class="string" id="7361571">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361595">,</span>&nbsp;<span class="string" id="7361597">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7361618">,</span>&nbsp;<span class="string" id="7361620">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7361650">}</span><span class="op" id="7361651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361654">{</span><span class="string" id="7361655">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361679">,</span>&nbsp;<span class="string" id="7361681">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7361704">,</span>&nbsp;<span class="string" id="7361706">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7361736">}</span><span class="op" id="7361737">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361740">{</span><span class="string" id="7361741">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361765">,</span>&nbsp;<span class="string" id="7361767">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7361792">,</span>&nbsp;<span class="string" id="7361794">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7361824">}</span><span class="op" id="7361825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361828">{</span><span class="string" id="7361829">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361853">,</span>&nbsp;<span class="string" id="7361855">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7361880">,</span>&nbsp;<span class="string" id="7361882">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7361912">}</span><span class="op" id="7361913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361916">{</span><span class="string" id="7361917">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7361941">,</span>&nbsp;<span class="string" id="7361943">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7361980">,</span>&nbsp;<span class="string" id="7361982">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7362012">}</span><span class="op" id="7362013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362016">{</span><span class="string" id="7362017">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7362041">,</span>&nbsp;<span class="string" id="7362043">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7362080">,</span>&nbsp;<span class="string" id="7362082">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7362112">}</span><span class="op" id="7362113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362116">{</span><span class="string" id="7362117">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7362141">,</span>&nbsp;<span class="string" id="7362143">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7362194">,</span>&nbsp;<span class="string" id="7362196">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7362226">}</span><span class="op" id="7362227">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362230">{</span><span class="string" id="7362231">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7362255">,</span>&nbsp;<span class="string" id="7362257">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7362299">,</span>&nbsp;<span class="string" id="7362301">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7362331">}</span><span class="op" id="7362332">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362336">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362397">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362450">{</span><span class="string" id="7362451">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7362491">,</span>&nbsp;<span class="string" id="7362493">&#34;../baz&#34;</span><span class="op" id="7362501">,</span>&nbsp;<span class="string" id="7362503">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7362527">}</span><span class="op" id="7362528">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362532">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362561">{</span><span class="string" id="7362562">&#34;http://foo.com/bar&#34;</span><span class="op" id="7362582">,</span>&nbsp;<span class="string" id="7362584">&#34;...&#34;</span><span class="op" id="7362589">,</span>&nbsp;<span class="string" id="7362591">&#34;http://foo.com/...&#34;</span><span class="op" id="7362611">}</span><span class="op" id="7362612">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362616">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362629">{</span><span class="string" id="7362630">&#34;http://foo.com/bar&#34;</span><span class="op" id="7362650">,</span>&nbsp;<span class="string" id="7362652">&#34;.#frag&#34;</span><span class="op" id="7362660">,</span>&nbsp;<span class="string" id="7362662">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7362684">}</span><span class="op" id="7362685">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362689">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362719">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362772">{</span><span class="string" id="7362773">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7362793">,</span>&nbsp;<span class="string" id="7362795">&#34;g:h&#34;</span><span class="op" id="7362800">,</span>&nbsp;<span class="string" id="7362802">&#34;g:h&#34;</span><span class="op" id="7362807">}</span><span class="op" id="7362808">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362811">{</span><span class="string" id="7362812">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7362832">,</span>&nbsp;<span class="string" id="7362834">&#34;g&#34;</span><span class="op" id="7362837">,</span>&nbsp;<span class="string" id="7362839">&#34;http://a/b/c/g&#34;</span><span class="op" id="7362855">}</span><span class="op" id="7362856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362859">{</span><span class="string" id="7362860">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7362880">,</span>&nbsp;<span class="string" id="7362882">&#34;./g&#34;</span><span class="op" id="7362887">,</span>&nbsp;<span class="string" id="7362889">&#34;http://a/b/c/g&#34;</span><span class="op" id="7362905">}</span><span class="op" id="7362906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362909">{</span><span class="string" id="7362910">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7362930">,</span>&nbsp;<span class="string" id="7362932">&#34;g/&#34;</span><span class="op" id="7362936">,</span>&nbsp;<span class="string" id="7362938">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7362955">}</span><span class="op" id="7362956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362959">{</span><span class="string" id="7362960">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7362980">,</span>&nbsp;<span class="string" id="7362982">&#34;/g&#34;</span><span class="op" id="7362986">,</span>&nbsp;<span class="string" id="7362988">&#34;http://a/g&#34;</span><span class="op" id="7363000">}</span><span class="op" id="7363001">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363004">{</span><span class="string" id="7363005">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363025">,</span>&nbsp;<span class="string" id="7363027">&#34;//g&#34;</span><span class="op" id="7363032">,</span>&nbsp;<span class="string" id="7363034">&#34;http://g&#34;</span><span class="op" id="7363044">}</span><span class="op" id="7363045">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363048">{</span><span class="string" id="7363049">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363069">,</span>&nbsp;<span class="string" id="7363071">&#34;?y&#34;</span><span class="op" id="7363075">,</span>&nbsp;<span class="string" id="7363077">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7363097">}</span><span class="op" id="7363098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363101">{</span><span class="string" id="7363102">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363122">,</span>&nbsp;<span class="string" id="7363124">&#34;g?y&#34;</span><span class="op" id="7363129">,</span>&nbsp;<span class="string" id="7363131">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7363149">}</span><span class="op" id="7363150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363153">{</span><span class="string" id="7363154">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363174">,</span>&nbsp;<span class="string" id="7363176">&#34;#s&#34;</span><span class="op" id="7363180">,</span>&nbsp;<span class="string" id="7363182">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7363204">}</span><span class="op" id="7363205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363208">{</span><span class="string" id="7363209">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363229">,</span>&nbsp;<span class="string" id="7363231">&#34;g#s&#34;</span><span class="op" id="7363236">,</span>&nbsp;<span class="string" id="7363238">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7363256">}</span><span class="op" id="7363257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363260">{</span><span class="string" id="7363261">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363281">,</span>&nbsp;<span class="string" id="7363283">&#34;g?y#s&#34;</span><span class="op" id="7363290">,</span>&nbsp;<span class="string" id="7363292">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7363312">}</span><span class="op" id="7363313">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363316">{</span><span class="string" id="7363317">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363337">,</span>&nbsp;<span class="string" id="7363339">&#34;;x&#34;</span><span class="op" id="7363343">,</span>&nbsp;<span class="string" id="7363345">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7363362">}</span><span class="op" id="7363363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363366">{</span><span class="string" id="7363367">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363387">,</span>&nbsp;<span class="string" id="7363389">&#34;g;x&#34;</span><span class="op" id="7363394">,</span>&nbsp;<span class="string" id="7363396">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7363414">}</span><span class="op" id="7363415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363418">{</span><span class="string" id="7363419">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363439">,</span>&nbsp;<span class="string" id="7363441">&#34;g;x?y#s&#34;</span><span class="op" id="7363450">,</span>&nbsp;<span class="string" id="7363452">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7363474">}</span><span class="op" id="7363475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363478">{</span><span class="string" id="7363479">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363499">,</span>&nbsp;<span class="string" id="7363501">&#34;&#34;</span><span class="op" id="7363503">,</span>&nbsp;<span class="string" id="7363505">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363525">}</span><span class="op" id="7363526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363529">{</span><span class="string" id="7363530">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363550">,</span>&nbsp;<span class="string" id="7363552">&#34;.&#34;</span><span class="op" id="7363555">,</span>&nbsp;<span class="string" id="7363557">&#34;http://a/b/c/&#34;</span><span class="op" id="7363572">}</span><span class="op" id="7363573">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363576">{</span><span class="string" id="7363577">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363597">,</span>&nbsp;<span class="string" id="7363599">&#34;./&#34;</span><span class="op" id="7363603">,</span>&nbsp;<span class="string" id="7363605">&#34;http://a/b/c/&#34;</span><span class="op" id="7363620">}</span><span class="op" id="7363621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363624">{</span><span class="string" id="7363625">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363645">,</span>&nbsp;<span class="string" id="7363647">&#34;..&#34;</span><span class="op" id="7363651">,</span>&nbsp;<span class="string" id="7363653">&#34;http://a/b/&#34;</span><span class="op" id="7363666">}</span><span class="op" id="7363667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363670">{</span><span class="string" id="7363671">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363691">,</span>&nbsp;<span class="string" id="7363693">&#34;../&#34;</span><span class="op" id="7363698">,</span>&nbsp;<span class="string" id="7363700">&#34;http://a/b/&#34;</span><span class="op" id="7363713">}</span><span class="op" id="7363714">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363717">{</span><span class="string" id="7363718">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363738">,</span>&nbsp;<span class="string" id="7363740">&#34;../g&#34;</span><span class="op" id="7363746">,</span>&nbsp;<span class="string" id="7363748">&#34;http://a/b/g&#34;</span><span class="op" id="7363762">}</span><span class="op" id="7363763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363766">{</span><span class="string" id="7363767">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363787">,</span>&nbsp;<span class="string" id="7363789">&#34;../..&#34;</span><span class="op" id="7363796">,</span>&nbsp;<span class="string" id="7363798">&#34;http://a/&#34;</span><span class="op" id="7363809">}</span><span class="op" id="7363810">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363813">{</span><span class="string" id="7363814">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363834">,</span>&nbsp;<span class="string" id="7363836">&#34;../../&#34;</span><span class="op" id="7363844">,</span>&nbsp;<span class="string" id="7363846">&#34;http://a/&#34;</span><span class="op" id="7363857">}</span><span class="op" id="7363858">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363861">{</span><span class="string" id="7363862">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7363882">,</span>&nbsp;<span class="string" id="7363884">&#34;../../g&#34;</span><span class="op" id="7363893">,</span>&nbsp;<span class="string" id="7363895">&#34;http://a/g&#34;</span><span class="op" id="7363907">}</span><span class="op" id="7363908">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363912">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363944">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363997">{</span><span class="string" id="7363998">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364018">,</span>&nbsp;<span class="string" id="7364020">&#34;../../../g&#34;</span><span class="op" id="7364032">,</span>&nbsp;<span class="string" id="7364034">&#34;http://a/g&#34;</span><span class="op" id="7364046">}</span><span class="op" id="7364047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364050">{</span><span class="string" id="7364051">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364071">,</span>&nbsp;<span class="string" id="7364073">&#34;../../../../g&#34;</span><span class="op" id="7364088">,</span>&nbsp;<span class="string" id="7364090">&#34;http://a/g&#34;</span><span class="op" id="7364102">}</span><span class="op" id="7364103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364106">{</span><span class="string" id="7364107">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364127">,</span>&nbsp;<span class="string" id="7364129">&#34;/./g&#34;</span><span class="op" id="7364135">,</span>&nbsp;<span class="string" id="7364137">&#34;http://a/g&#34;</span><span class="op" id="7364149">}</span><span class="op" id="7364150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364153">{</span><span class="string" id="7364154">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364174">,</span>&nbsp;<span class="string" id="7364176">&#34;/../g&#34;</span><span class="op" id="7364183">,</span>&nbsp;<span class="string" id="7364185">&#34;http://a/g&#34;</span><span class="op" id="7364197">}</span><span class="op" id="7364198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364201">{</span><span class="string" id="7364202">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364222">,</span>&nbsp;<span class="string" id="7364224">&#34;g.&#34;</span><span class="op" id="7364228">,</span>&nbsp;<span class="string" id="7364230">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7364247">}</span><span class="op" id="7364248">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364251">{</span><span class="string" id="7364252">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364272">,</span>&nbsp;<span class="string" id="7364274">&#34;.g&#34;</span><span class="op" id="7364278">,</span>&nbsp;<span class="string" id="7364280">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7364297">}</span><span class="op" id="7364298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364301">{</span><span class="string" id="7364302">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364322">,</span>&nbsp;<span class="string" id="7364324">&#34;g..&#34;</span><span class="op" id="7364329">,</span>&nbsp;<span class="string" id="7364331">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7364349">}</span><span class="op" id="7364350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364353">{</span><span class="string" id="7364354">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364374">,</span>&nbsp;<span class="string" id="7364376">&#34;..g&#34;</span><span class="op" id="7364381">,</span>&nbsp;<span class="string" id="7364383">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7364401">}</span><span class="op" id="7364402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364405">{</span><span class="string" id="7364406">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364426">,</span>&nbsp;<span class="string" id="7364428">&#34;./../g&#34;</span><span class="op" id="7364436">,</span>&nbsp;<span class="string" id="7364438">&#34;http://a/b/g&#34;</span><span class="op" id="7364452">}</span><span class="op" id="7364453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364456">{</span><span class="string" id="7364457">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364477">,</span>&nbsp;<span class="string" id="7364479">&#34;./g/.&#34;</span><span class="op" id="7364486">,</span>&nbsp;<span class="string" id="7364488">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7364505">}</span><span class="op" id="7364506">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364509">{</span><span class="string" id="7364510">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364530">,</span>&nbsp;<span class="string" id="7364532">&#34;g/./h&#34;</span><span class="op" id="7364539">,</span>&nbsp;<span class="string" id="7364541">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7364559">}</span><span class="op" id="7364560">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364563">{</span><span class="string" id="7364564">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364584">,</span>&nbsp;<span class="string" id="7364586">&#34;g/../h&#34;</span><span class="op" id="7364594">,</span>&nbsp;<span class="string" id="7364596">&#34;http://a/b/c/h&#34;</span><span class="op" id="7364612">}</span><span class="op" id="7364613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364616">{</span><span class="string" id="7364617">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364637">,</span>&nbsp;<span class="string" id="7364639">&#34;g;x=1/./y&#34;</span><span class="op" id="7364650">,</span>&nbsp;<span class="string" id="7364652">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7364674">}</span><span class="op" id="7364675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364678">{</span><span class="string" id="7364679">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364699">,</span>&nbsp;<span class="string" id="7364701">&#34;g;x=1/../y&#34;</span><span class="op" id="7364713">,</span>&nbsp;<span class="string" id="7364715">&#34;http://a/b/c/y&#34;</span><span class="op" id="7364731">}</span><span class="op" id="7364732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364735">{</span><span class="string" id="7364736">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364756">,</span>&nbsp;<span class="string" id="7364758">&#34;g?y/./x&#34;</span><span class="op" id="7364767">,</span>&nbsp;<span class="string" id="7364769">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7364791">}</span><span class="op" id="7364792">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364795">{</span><span class="string" id="7364796">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364816">,</span>&nbsp;<span class="string" id="7364818">&#34;g?y/../x&#34;</span><span class="op" id="7364828">,</span>&nbsp;<span class="string" id="7364830">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7364853">}</span><span class="op" id="7364854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364857">{</span><span class="string" id="7364858">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364878">,</span>&nbsp;<span class="string" id="7364880">&#34;g#s/./x&#34;</span><span class="op" id="7364889">,</span>&nbsp;<span class="string" id="7364891">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7364913">}</span><span class="op" id="7364914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364917">{</span><span class="string" id="7364918">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7364938">,</span>&nbsp;<span class="string" id="7364940">&#34;g#s/../x&#34;</span><span class="op" id="7364950">,</span>&nbsp;<span class="string" id="7364952">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7364975">}</span><span class="op" id="7364976">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364980">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364992">{</span><span class="string" id="7364993">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7365014">,</span>&nbsp;<span class="string" id="7365016">&#34;//g?q&#34;</span><span class="op" id="7365023">,</span>&nbsp;<span class="string" id="7365025">&#34;https://g?q&#34;</span><span class="op" id="7365038">}</span><span class="op" id="7365039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365042">{</span><span class="string" id="7365043">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7365064">,</span>&nbsp;<span class="string" id="7365066">&#34;//g#s&#34;</span><span class="op" id="7365073">,</span>&nbsp;<span class="string" id="7365075">&#34;https://g#s&#34;</span><span class="op" id="7365088">}</span><span class="op" id="7365089">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365092">{</span><span class="string" id="7365093">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7365114">,</span>&nbsp;<span class="string" id="7365116">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7365131">,</span>&nbsp;<span class="string" id="7365133">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7365154">}</span><span class="op" id="7365155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365158">{</span><span class="string" id="7365159">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7365180">,</span>&nbsp;<span class="string" id="7365182">&#34;?y&#34;</span><span class="op" id="7365186">,</span>&nbsp;<span class="string" id="7365188">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7365209">}</span><span class="op" id="7365210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365213">{</span><span class="string" id="7365214">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7365237">,</span>&nbsp;<span class="string" id="7365239">&#34;?y&#34;</span><span class="op" id="7365243">,</span>&nbsp;<span class="string" id="7365245">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7365266">}</span><span class="op" id="7365267">,</span><br>
<span class="lineno">700</span><span class="op" id="7365269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7365272">func</span>&nbsp;<span class="ident" id="7365277">TestResolveReference</span><span class="op" id="7365297">(</span><span class="ident" id="7365298">t</span>&nbsp;<span class="op" id="7365300">*</span><span class="ident" id="7365301">testing</span><span class="op" id="7365308">.</span><span class="ident" id="7365309">T</span><span class="op" id="7365310">)</span>&nbsp;<span class="op" id="7365312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365315">mustParse</span>&nbsp;<span class="op" id="7365325">:=</span>&nbsp;<span class="keyword" id="7365328">func</span><span class="op" id="7365332">(</span><span class="ident" id="7365333">url</span>&nbsp;<span class="builtintype" id="7365337">string</span><span class="op" id="7365343">)</span>&nbsp;<span class="op" id="7365345">*</span><span class="ident" id="7365346">URL</span>&nbsp;<span class="op" id="7365350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365354">u</span><span class="op" id="7365355">,</span>&nbsp;<span class="ident" id="7365357">err</span>&nbsp;<span class="op" id="7365361">:=</span>&nbsp;<span class="ident" id="7365364">Parse</span><span class="op" id="7365369">(</span><span class="ident" id="7365370">url</span><span class="op" id="7365373">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365377">if</span>&nbsp;<span class="ident" id="7365380">err</span>&nbsp;<span class="op" id="7365384">!=</span>&nbsp;<span class="ident" id="7365387">nil</span>&nbsp;<span class="op" id="7365391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365396">t</span><span class="op" id="7365397">.</span><span class="ident" id="7365398">Fatalf</span><span class="op" id="7365404">(</span><span class="string" id="7365405">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7365447">,</span>&nbsp;<span class="ident" id="7365449">url</span><span class="op" id="7365452">,</span>&nbsp;<span class="ident" id="7365454">err</span><span class="op" id="7365457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365465">return</span>&nbsp;<span class="ident" id="7365472">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365475">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365478">opaque</span>&nbsp;<span class="op" id="7365485">:=</span>&nbsp;<span class="op" id="7365488">&amp;</span><span class="ident" id="7365489">URL</span><span class="op" id="7365492">{</span><span class="ident" id="7365493">Scheme</span><span class="op" id="7365499">:</span>&nbsp;<span class="string" id="7365501">&#34;scheme&#34;</span><span class="op" id="7365509">,</span>&nbsp;<span class="ident" id="7365511">Opaque</span><span class="op" id="7365517">:</span>&nbsp;<span class="string" id="7365519">&#34;opaque&#34;</span><span class="op" id="7365527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365530">for</span>&nbsp;<span class="ident" id="7365534">_</span><span class="op" id="7365535">,</span>&nbsp;<span class="ident" id="7365537">test</span>&nbsp;<span class="op" id="7365542">:=</span>&nbsp;<span class="keyword" id="7365545">range</span>&nbsp;<span class="ident" id="7365551">resolveReferenceTests</span>&nbsp;<span class="op" id="7365573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365577">base</span>&nbsp;<span class="op" id="7365582">:=</span>&nbsp;<span class="ident" id="7365585">mustParse</span><span class="op" id="7365594">(</span><span class="ident" id="7365595">test</span><span class="op" id="7365599">.</span><span class="ident" id="7365600">base</span><span class="op" id="7365604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365608">rel</span>&nbsp;<span class="op" id="7365612">:=</span>&nbsp;<span class="ident" id="7365615">mustParse</span><span class="op" id="7365624">(</span><span class="ident" id="7365625">test</span><span class="op" id="7365629">.</span><span class="ident" id="7365630">rel</span><span class="op" id="7365633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365637">url</span>&nbsp;<span class="op" id="7365641">:=</span>&nbsp;<span class="ident" id="7365644">base</span><span class="op" id="7365648">.</span><span class="ident" id="7365649">ResolveReference</span><span class="op" id="7365665">(</span><span class="ident" id="7365666">rel</span><span class="op" id="7365669">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365673">if</span>&nbsp;<span class="ident" id="7365676">url</span><span class="op" id="7365679">.</span><span class="ident" id="7365680">String</span><span class="op" id="7365686">(</span><span class="op" id="7365687">)</span>&nbsp;<span class="op" id="7365689">!=</span>&nbsp;<span class="ident" id="7365692">test</span><span class="op" id="7365696">.</span><span class="ident" id="7365697">expected</span>&nbsp;<span class="op" id="7365706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365711">t</span><span class="op" id="7365712">.</span><span class="ident" id="7365713">Errorf</span><span class="op" id="7365719">(</span><span class="string" id="7365720">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7365764">,</span>&nbsp;<span class="ident" id="7365766">test</span><span class="op" id="7365770">.</span><span class="ident" id="7365771">base</span><span class="op" id="7365775">,</span>&nbsp;<span class="ident" id="7365777">test</span><span class="op" id="7365781">.</span><span class="ident" id="7365782">rel</span><span class="op" id="7365785">,</span>&nbsp;<span class="ident" id="7365787">test</span><span class="op" id="7365791">.</span><span class="ident" id="7365792">expected</span><span class="op" id="7365800">,</span>&nbsp;<span class="ident" id="7365802">url</span><span class="op" id="7365805">.</span><span class="ident" id="7365806">String</span><span class="op" id="7365812">(</span><span class="op" id="7365813">)</span><span class="op" id="7365814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365822">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365867">if</span>&nbsp;<span class="ident" id="7365870">base</span>&nbsp;<span class="op" id="7365875">==</span>&nbsp;<span class="ident" id="7365878">url</span>&nbsp;<span class="op" id="7365882">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365887">t</span><span class="op" id="7365888">.</span><span class="ident" id="7365889">Errorf</span><span class="op" id="7365895">(</span><span class="string" id="7365896">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7365955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365963">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366002">url</span><span class="op" id="7366005">,</span>&nbsp;<span class="ident" id="7366007">err</span>&nbsp;<span class="op" id="7366011">:=</span>&nbsp;<span class="ident" id="7366014">base</span><span class="op" id="7366018">.</span><span class="ident" id="7366019">Parse</span><span class="op" id="7366024">(</span><span class="ident" id="7366025">test</span><span class="op" id="7366029">.</span><span class="ident" id="7366030">rel</span><span class="op" id="7366033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366037">if</span>&nbsp;<span class="ident" id="7366040">err</span>&nbsp;<span class="op" id="7366044">!=</span>&nbsp;<span class="ident" id="7366047">nil</span>&nbsp;<span class="op" id="7366051">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366056">t</span><span class="op" id="7366057">.</span><span class="ident" id="7366058">Errorf</span><span class="op" id="7366064">(</span><span class="string" id="7366065">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7366095">,</span>&nbsp;<span class="ident" id="7366097">test</span><span class="op" id="7366101">.</span><span class="ident" id="7366102">base</span><span class="op" id="7366106">,</span>&nbsp;<span class="ident" id="7366108">test</span><span class="op" id="7366112">.</span><span class="ident" id="7366113">rel</span><span class="op" id="7366116">,</span>&nbsp;<span class="ident" id="7366118">err</span><span class="op" id="7366121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366125">}</span>&nbsp;<span class="keyword" id="7366127">else</span>&nbsp;<span class="keyword" id="7366132">if</span>&nbsp;<span class="ident" id="7366135">url</span><span class="op" id="7366138">.</span><span class="ident" id="7366139">String</span><span class="op" id="7366145">(</span><span class="op" id="7366146">)</span>&nbsp;<span class="op" id="7366148">!=</span>&nbsp;<span class="ident" id="7366151">test</span><span class="op" id="7366155">.</span><span class="ident" id="7366156">expected</span>&nbsp;<span class="op" id="7366165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366170">t</span><span class="op" id="7366171">.</span><span class="ident" id="7366172">Errorf</span><span class="op" id="7366178">(</span><span class="string" id="7366179">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7366212">,</span>&nbsp;<span class="ident" id="7366214">test</span><span class="op" id="7366218">.</span><span class="ident" id="7366219">base</span><span class="op" id="7366223">,</span>&nbsp;<span class="ident" id="7366225">test</span><span class="op" id="7366229">.</span><span class="ident" id="7366230">rel</span><span class="op" id="7366233">,</span>&nbsp;<span class="ident" id="7366235">test</span><span class="op" id="7366239">.</span><span class="ident" id="7366240">expected</span><span class="op" id="7366248">,</span>&nbsp;<span class="ident" id="7366250">url</span><span class="op" id="7366253">.</span><span class="ident" id="7366254">String</span><span class="op" id="7366260">(</span><span class="op" id="7366261">)</span><span class="op" id="7366262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366266">}</span>&nbsp;<span class="keyword" id="7366268">else</span>&nbsp;<span class="keyword" id="7366273">if</span>&nbsp;<span class="ident" id="7366276">base</span>&nbsp;<span class="op" id="7366281">==</span>&nbsp;<span class="ident" id="7366284">url</span>&nbsp;<span class="op" id="7366288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366293">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366359">t</span><span class="op" id="7366360">.</span><span class="ident" id="7366361">Errorf</span><span class="op" id="7366367">(</span><span class="string" id="7366368">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7366416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366424">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366459">url</span>&nbsp;<span class="op" id="7366463">=</span>&nbsp;<span class="ident" id="7366465">base</span><span class="op" id="7366469">.</span><span class="ident" id="7366470">ResolveReference</span><span class="op" id="7366486">(</span><span class="ident" id="7366487">opaque</span><span class="op" id="7366493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366497">if</span>&nbsp;<span class="op" id="7366500">*</span><span class="ident" id="7366501">url</span>&nbsp;<span class="op" id="7366505">!=</span>&nbsp;<span class="op" id="7366508">*</span><span class="ident" id="7366509">opaque</span>&nbsp;<span class="op" id="7366516">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366521">t</span><span class="op" id="7366522">.</span><span class="ident" id="7366523">Errorf</span><span class="op" id="7366529">(</span><span class="string" id="7366530">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7366596">,</span>&nbsp;<span class="ident" id="7366598">url</span><span class="op" id="7366601">,</span>&nbsp;<span class="ident" id="7366603">opaque</span><span class="op" id="7366609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366617">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366675">url</span><span class="op" id="7366678">,</span>&nbsp;<span class="ident" id="7366680">err</span>&nbsp;<span class="op" id="7366684">=</span>&nbsp;<span class="ident" id="7366686">base</span><span class="op" id="7366690">.</span><span class="ident" id="7366691">Parse</span><span class="op" id="7366696">(</span><span class="string" id="7366697">&#34;scheme:opaque&#34;</span><span class="op" id="7366712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366716">if</span>&nbsp;<span class="ident" id="7366719">err</span>&nbsp;<span class="op" id="7366723">!=</span>&nbsp;<span class="ident" id="7366726">nil</span>&nbsp;<span class="op" id="7366730">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366735">t</span><span class="op" id="7366736">.</span><span class="ident" id="7366737">Errorf</span><span class="op" id="7366743">(</span><span class="string" id="7366744">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7366787">,</span>&nbsp;<span class="ident" id="7366789">test</span><span class="op" id="7366793">.</span><span class="ident" id="7366794">base</span><span class="op" id="7366798">,</span>&nbsp;<span class="ident" id="7366800">err</span><span class="op" id="7366803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366807">}</span>&nbsp;<span class="keyword" id="7366809">else</span>&nbsp;<span class="keyword" id="7366814">if</span>&nbsp;<span class="op" id="7366817">*</span><span class="ident" id="7366818">url</span>&nbsp;<span class="op" id="7366822">!=</span>&nbsp;<span class="op" id="7366825">*</span><span class="ident" id="7366826">opaque</span>&nbsp;<span class="op" id="7366833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366838">t</span><span class="op" id="7366839">.</span><span class="ident" id="7366840">Errorf</span><span class="op" id="7366846">(</span><span class="string" id="7366847">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7366902">,</span>&nbsp;<span class="ident" id="7366904">url</span><span class="op" id="7366907">,</span>&nbsp;<span class="ident" id="7366909">opaque</span><span class="op" id="7366915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366919">}</span>&nbsp;<span class="keyword" id="7366921">else</span>&nbsp;<span class="keyword" id="7366926">if</span>&nbsp;<span class="ident" id="7366929">base</span>&nbsp;<span class="op" id="7366934">==</span>&nbsp;<span class="ident" id="7366937">url</span>&nbsp;<span class="op" id="7366941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366946">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366999">t</span><span class="op" id="7367000">.</span><span class="ident" id="7367001">Errorf</span><span class="op" id="7367007">(</span><span class="string" id="7367008">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7367056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367063">}</span><br>
<span class="lineno"></span><span class="op" id="7367065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7367068">func</span>&nbsp;<span class="ident" id="7367073">TestQueryValues</span><span class="op" id="7367088">(</span><span class="ident" id="7367089">t</span>&nbsp;<span class="op" id="7367091">*</span><span class="ident" id="7367092">testing</span><span class="op" id="7367099">.</span><span class="ident" id="7367100">T</span><span class="op" id="7367101">)</span>&nbsp;<span class="op" id="7367103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367106">u</span><span class="op" id="7367107">,</span>&nbsp;<span class="ident" id="7367109">_</span>&nbsp;<span class="op" id="7367111">:=</span>&nbsp;<span class="ident" id="7367114">Parse</span><span class="op" id="7367119">(</span><span class="string" id="7367120">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7367154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367157">v</span>&nbsp;<span class="op" id="7367159">:=</span>&nbsp;<span class="ident" id="7367162">u</span><span class="op" id="7367163">.</span><span class="ident" id="7367164">Query</span><span class="op" id="7367169">(</span><span class="op" id="7367170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367173">if</span>&nbsp;<span class="builtinfunc" id="7367176">len</span><span class="op" id="7367179">(</span><span class="ident" id="7367180">v</span><span class="op" id="7367181">)</span>&nbsp;<span class="op" id="7367183">!=</span>&nbsp;<span class="num" id="7367186">2</span>&nbsp;<span class="op" id="7367188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367192">t</span><span class="op" id="7367193">.</span><span class="ident" id="7367194">Errorf</span><span class="op" id="7367200">(</span><span class="string" id="7367201">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7367238">,</span>&nbsp;<span class="builtinfunc" id="7367240">len</span><span class="op" id="7367243">(</span><span class="ident" id="7367244">v</span><span class="op" id="7367245">)</span><span class="op" id="7367246">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367252">if</span>&nbsp;<span class="ident" id="7367255">g</span><span class="op" id="7367256">,</span>&nbsp;<span class="ident" id="7367258">e</span>&nbsp;<span class="op" id="7367260">:=</span>&nbsp;<span class="ident" id="7367263">v</span><span class="op" id="7367264">.</span><span class="ident" id="7367265">Get</span><span class="op" id="7367268">(</span><span class="string" id="7367269">&#34;foo&#34;</span><span class="op" id="7367274">)</span><span class="op" id="7367275">,</span>&nbsp;<span class="string" id="7367277">&#34;bar&#34;</span><span class="op" id="7367282">;</span>&nbsp;<span class="ident" id="7367284">g</span>&nbsp;<span class="op" id="7367286">!=</span>&nbsp;<span class="ident" id="7367289">e</span>&nbsp;<span class="op" id="7367291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367295">t</span><span class="op" id="7367296">.</span><span class="ident" id="7367297">Errorf</span><span class="op" id="7367303">(</span><span class="string" id="7367304">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367328">,</span>&nbsp;<span class="ident" id="7367330">g</span><span class="op" id="7367331">,</span>&nbsp;<span class="ident" id="7367333">e</span><span class="op" id="7367334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367340">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367360">if</span>&nbsp;<span class="ident" id="7367363">g</span><span class="op" id="7367364">,</span>&nbsp;<span class="ident" id="7367366">e</span>&nbsp;<span class="op" id="7367368">:=</span>&nbsp;<span class="ident" id="7367371">v</span><span class="op" id="7367372">.</span><span class="ident" id="7367373">Get</span><span class="op" id="7367376">(</span><span class="string" id="7367377">&#34;Foo&#34;</span><span class="op" id="7367382">)</span><span class="op" id="7367383">,</span>&nbsp;<span class="string" id="7367385">&#34;&#34;</span><span class="op" id="7367387">;</span>&nbsp;<span class="ident" id="7367389">g</span>&nbsp;<span class="op" id="7367391">!=</span>&nbsp;<span class="ident" id="7367394">e</span>&nbsp;<span class="op" id="7367396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367400">t</span><span class="op" id="7367401">.</span><span class="ident" id="7367402">Errorf</span><span class="op" id="7367408">(</span><span class="string" id="7367409">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367433">,</span>&nbsp;<span class="ident" id="7367435">g</span><span class="op" id="7367436">,</span>&nbsp;<span class="ident" id="7367438">e</span><span class="op" id="7367439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367445">if</span>&nbsp;<span class="ident" id="7367448">g</span><span class="op" id="7367449">,</span>&nbsp;<span class="ident" id="7367451">e</span>&nbsp;<span class="op" id="7367453">:=</span>&nbsp;<span class="ident" id="7367456">v</span><span class="op" id="7367457">.</span><span class="ident" id="7367458">Get</span><span class="op" id="7367461">(</span><span class="string" id="7367462">&#34;bar&#34;</span><span class="op" id="7367467">)</span><span class="op" id="7367468">,</span>&nbsp;<span class="string" id="7367470">&#34;1&#34;</span><span class="op" id="7367473">;</span>&nbsp;<span class="ident" id="7367475">g</span>&nbsp;<span class="op" id="7367477">!=</span>&nbsp;<span class="ident" id="7367480">e</span>&nbsp;<span class="op" id="7367482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367486">t</span><span class="op" id="7367487">.</span><span class="ident" id="7367488">Errorf</span><span class="op" id="7367494">(</span><span class="string" id="7367495">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367519">,</span>&nbsp;<span class="ident" id="7367521">g</span><span class="op" id="7367522">,</span>&nbsp;<span class="ident" id="7367524">e</span><span class="op" id="7367525">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367531">if</span>&nbsp;<span class="ident" id="7367534">g</span><span class="op" id="7367535">,</span>&nbsp;<span class="ident" id="7367537">e</span>&nbsp;<span class="op" id="7367539">:=</span>&nbsp;<span class="ident" id="7367542">v</span><span class="op" id="7367543">.</span><span class="ident" id="7367544">Get</span><span class="op" id="7367547">(</span><span class="string" id="7367548">&#34;baz&#34;</span><span class="op" id="7367553">)</span><span class="op" id="7367554">,</span>&nbsp;<span class="string" id="7367556">&#34;&#34;</span><span class="op" id="7367558">;</span>&nbsp;<span class="ident" id="7367560">g</span>&nbsp;<span class="op" id="7367562">!=</span>&nbsp;<span class="ident" id="7367565">e</span>&nbsp;<span class="op" id="7367567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367571">t</span><span class="op" id="7367572">.</span><span class="ident" id="7367573">Errorf</span><span class="op" id="7367579">(</span><span class="string" id="7367580">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367604">,</span>&nbsp;<span class="ident" id="7367606">g</span><span class="op" id="7367607">,</span>&nbsp;<span class="ident" id="7367609">e</span><span class="op" id="7367610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367616">v</span><span class="op" id="7367617">.</span><span class="ident" id="7367618">Del</span><span class="op" id="7367621">(</span><span class="string" id="7367622">&#34;bar&#34;</span><span class="op" id="7367627">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367630">if</span>&nbsp;<span class="ident" id="7367633">g</span><span class="op" id="7367634">,</span>&nbsp;<span class="ident" id="7367636">e</span>&nbsp;<span class="op" id="7367638">:=</span>&nbsp;<span class="ident" id="7367641">v</span><span class="op" id="7367642">.</span><span class="ident" id="7367643">Get</span><span class="op" id="7367646">(</span><span class="string" id="7367647">&#34;bar&#34;</span><span class="op" id="7367652">)</span><span class="op" id="7367653">,</span>&nbsp;<span class="string" id="7367655">&#34;&#34;</span><span class="op" id="7367657">;</span>&nbsp;<span class="ident" id="7367659">g</span>&nbsp;<span class="op" id="7367661">!=</span>&nbsp;<span class="ident" id="7367664">e</span>&nbsp;<span class="op" id="7367666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367670">t</span><span class="op" id="7367671">.</span><span class="ident" id="7367672">Errorf</span><span class="op" id="7367678">(</span><span class="string" id="7367679">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7367710">,</span>&nbsp;<span class="ident" id="7367712">g</span><span class="op" id="7367713">,</span>&nbsp;<span class="ident" id="7367715">e</span><span class="op" id="7367716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367719">}</span><br>
<span class="lineno"></span><span class="op" id="7367721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7367724">type</span>&nbsp;<span class="ident" id="7367729">parseTest</span>&nbsp;<span class="keyword" id="7367739">struct</span>&nbsp;<span class="op" id="7367746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367749">query</span>&nbsp;<span class="builtintype" id="7367755">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367763">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7367769">Values</span><br>
<span class="lineno"></span><span class="op" id="7367776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7367779">var</span>&nbsp;<span class="ident" id="7367783">parseTests</span>&nbsp;<span class="op" id="7367794">=</span>&nbsp;<span class="op" id="7367796">[</span><span class="op" id="7367797">]</span><span class="ident" id="7367798">parseTest</span><span class="op" id="7367807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367814">query</span><span class="op" id="7367819">:</span>&nbsp;<span class="string" id="7367821">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7367830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367834">out</span><span class="op" id="7367837">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7367841">Values</span><span class="op" id="7367847">{</span><span class="string" id="7367848">&#34;a&#34;</span><span class="op" id="7367851">:</span>&nbsp;<span class="op" id="7367853">[</span><span class="op" id="7367854">]</span><span class="builtintype" id="7367855">string</span><span class="op" id="7367861">{</span><span class="string" id="7367862">&#34;1&#34;</span><span class="op" id="7367865">}</span><span class="op" id="7367866">,</span>&nbsp;<span class="string" id="7367868">&#34;b&#34;</span><span class="op" id="7367871">:</span>&nbsp;<span class="op" id="7367873">[</span><span class="op" id="7367874">]</span><span class="builtintype" id="7367875">string</span><span class="op" id="7367881">{</span><span class="string" id="7367882">&#34;2&#34;</span><span class="op" id="7367885">}</span><span class="op" id="7367886">}</span><span class="op" id="7367887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367890">}</span><span class="op" id="7367891">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367898">query</span><span class="op" id="7367903">:</span>&nbsp;<span class="string" id="7367905">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7367923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367927">out</span><span class="op" id="7367930">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7367934">Values</span><span class="op" id="7367940">{</span><span class="string" id="7367941">&#34;a&#34;</span><span class="op" id="7367944">:</span>&nbsp;<span class="op" id="7367946">[</span><span class="op" id="7367947">]</span><span class="builtintype" id="7367948">string</span><span class="op" id="7367954">{</span><span class="string" id="7367955">&#34;1&#34;</span><span class="op" id="7367958">,</span>&nbsp;<span class="string" id="7367960">&#34;2&#34;</span><span class="op" id="7367963">,</span>&nbsp;<span class="string" id="7367965">&#34;banana&#34;</span><span class="op" id="7367973">}</span><span class="op" id="7367974">}</span><span class="op" id="7367975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367978">}</span><span class="op" id="7367979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367982">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367986">query</span><span class="op" id="7367991">:</span>&nbsp;<span class="string" id="7367993">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7368018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368022">out</span><span class="op" id="7368025">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7368029">Values</span><span class="op" id="7368035">{</span><span class="string" id="7368036">&#34;ascii&#34;</span><span class="op" id="7368043">:</span>&nbsp;<span class="op" id="7368045">[</span><span class="op" id="7368046">]</span><span class="builtintype" id="7368047">string</span><span class="op" id="7368053">{</span><span class="string" id="7368054">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7368067">}</span><span class="op" id="7368068">}</span><span class="op" id="7368069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368072">}</span><span class="op" id="7368073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368080">query</span><span class="op" id="7368085">:</span>&nbsp;<span class="string" id="7368087">&#34;a=1;b=2&#34;</span><span class="op" id="7368096">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368100">out</span><span class="op" id="7368103">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7368107">Values</span><span class="op" id="7368113">{</span><span class="string" id="7368114">&#34;a&#34;</span><span class="op" id="7368117">:</span>&nbsp;<span class="op" id="7368119">[</span><span class="op" id="7368120">]</span><span class="builtintype" id="7368121">string</span><span class="op" id="7368127">{</span><span class="string" id="7368128">&#34;1&#34;</span><span class="op" id="7368131">}</span><span class="op" id="7368132">,</span>&nbsp;<span class="string" id="7368134">&#34;b&#34;</span><span class="op" id="7368137">:</span>&nbsp;<span class="op" id="7368139">[</span><span class="op" id="7368140">]</span><span class="builtintype" id="7368141">string</span><span class="op" id="7368147">{</span><span class="string" id="7368148">&#34;2&#34;</span><span class="op" id="7368151">}</span><span class="op" id="7368152">}</span><span class="op" id="7368153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368156">}</span><span class="op" id="7368157">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368164">query</span><span class="op" id="7368169">:</span>&nbsp;<span class="string" id="7368171">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7368189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368193">out</span><span class="op" id="7368196">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7368200">Values</span><span class="op" id="7368206">{</span><span class="string" id="7368207">&#34;a&#34;</span><span class="op" id="7368210">:</span>&nbsp;<span class="op" id="7368212">[</span><span class="op" id="7368213">]</span><span class="builtintype" id="7368214">string</span><span class="op" id="7368220">{</span><span class="string" id="7368221">&#34;1&#34;</span><span class="op" id="7368224">,</span>&nbsp;<span class="string" id="7368226">&#34;2&#34;</span><span class="op" id="7368229">,</span>&nbsp;<span class="string" id="7368231">&#34;banana&#34;</span><span class="op" id="7368239">}</span><span class="op" id="7368240">}</span><span class="op" id="7368241">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368244">}</span><span class="op" id="7368245">,</span><br>
<span class="lineno"></span><span class="op" id="7368247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368250">func</span>&nbsp;<span class="ident" id="7368255">TestParseQuery</span><span class="op" id="7368269">(</span><span class="ident" id="7368270">t</span>&nbsp;<span class="op" id="7368272">*</span><span class="ident" id="7368273">testing</span><span class="op" id="7368280">.</span><span class="ident" id="7368281">T</span><span class="op" id="7368282">)</span>&nbsp;<span class="op" id="7368284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368287">for</span>&nbsp;<span class="ident" id="7368291">i</span><span class="op" id="7368292">,</span>&nbsp;<span class="ident" id="7368294">test</span>&nbsp;<span class="op" id="7368299">:=</span>&nbsp;<span class="keyword" id="7368302">range</span>&nbsp;<span class="ident" id="7368308">parseTests</span>&nbsp;<span class="op" id="7368319">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368323">form</span><span class="op" id="7368327">,</span>&nbsp;<span class="ident" id="7368329">err</span>&nbsp;<span class="op" id="7368333">:=</span>&nbsp;<span class="ident" id="7368336">ParseQuery</span><span class="op" id="7368346">(</span><span class="ident" id="7368347">test</span><span class="op" id="7368351">.</span><span class="ident" id="7368352">query</span><span class="op" id="7368357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368361">if</span>&nbsp;<span class="ident" id="7368364">err</span>&nbsp;<span class="op" id="7368368">!=</span>&nbsp;<span class="ident" id="7368371">nil</span>&nbsp;<span class="op" id="7368375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368380">t</span><span class="op" id="7368381">.</span><span class="ident" id="7368382">Errorf</span><span class="op" id="7368388">(</span><span class="string" id="7368389">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7368420">,</span>&nbsp;<span class="ident" id="7368422">i</span><span class="op" id="7368423">,</span>&nbsp;<span class="ident" id="7368425">err</span><span class="op" id="7368428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368433">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368444">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368448">if</span>&nbsp;<span class="builtinfunc" id="7368451">len</span><span class="op" id="7368454">(</span><span class="ident" id="7368455">form</span><span class="op" id="7368459">)</span>&nbsp;<span class="op" id="7368461">!=</span>&nbsp;<span class="builtinfunc" id="7368464">len</span><span class="op" id="7368467">(</span><span class="ident" id="7368468">test</span><span class="op" id="7368472">.</span><span class="ident" id="7368473">out</span><span class="op" id="7368476">)</span>&nbsp;<span class="op" id="7368478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368483">t</span><span class="op" id="7368484">.</span><span class="ident" id="7368485">Errorf</span><span class="op" id="7368491">(</span><span class="string" id="7368492">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7368526">,</span>&nbsp;<span class="ident" id="7368528">i</span><span class="op" id="7368529">,</span>&nbsp;<span class="builtinfunc" id="7368531">len</span><span class="op" id="7368534">(</span><span class="ident" id="7368535">form</span><span class="op" id="7368539">)</span><span class="op" id="7368540">,</span>&nbsp;<span class="builtinfunc" id="7368542">len</span><span class="op" id="7368545">(</span><span class="ident" id="7368546">test</span><span class="op" id="7368550">.</span><span class="ident" id="7368551">out</span><span class="op" id="7368554">)</span><span class="op" id="7368555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368563">for</span>&nbsp;<span class="ident" id="7368567">k</span><span class="op" id="7368568">,</span>&nbsp;<span class="ident" id="7368570">evs</span>&nbsp;<span class="op" id="7368574">:=</span>&nbsp;<span class="keyword" id="7368577">range</span>&nbsp;<span class="ident" id="7368583">test</span><span class="op" id="7368587">.</span><span class="ident" id="7368588">out</span>&nbsp;<span class="op" id="7368592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368597">vs</span><span class="op" id="7368599">,</span>&nbsp;<span class="ident" id="7368601">ok</span>&nbsp;<span class="op" id="7368604">:=</span>&nbsp;<span class="ident" id="7368607">form</span><span class="op" id="7368611">[</span><span class="ident" id="7368612">k</span><span class="op" id="7368613">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368618">if</span>&nbsp;<span class="op" id="7368621">!</span><span class="ident" id="7368622">ok</span>&nbsp;<span class="op" id="7368625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368631">t</span><span class="op" id="7368632">.</span><span class="ident" id="7368633">Errorf</span><span class="op" id="7368639">(</span><span class="string" id="7368640">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7368665">,</span>&nbsp;<span class="ident" id="7368667">i</span><span class="op" id="7368668">,</span>&nbsp;<span class="ident" id="7368670">k</span><span class="op" id="7368671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368677">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368694">if</span>&nbsp;<span class="builtinfunc" id="7368697">len</span><span class="op" id="7368700">(</span><span class="ident" id="7368701">vs</span><span class="op" id="7368703">)</span>&nbsp;<span class="op" id="7368705">!=</span>&nbsp;<span class="builtinfunc" id="7368708">len</span><span class="op" id="7368711">(</span><span class="ident" id="7368712">evs</span><span class="op" id="7368715">)</span>&nbsp;<span class="op" id="7368717">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368723">t</span><span class="op" id="7368724">.</span><span class="ident" id="7368725">Errorf</span><span class="op" id="7368731">(</span><span class="string" id="7368732">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7368770">,</span>&nbsp;<span class="ident" id="7368772">i</span><span class="op" id="7368773">,</span>&nbsp;<span class="ident" id="7368775">k</span><span class="op" id="7368776">,</span>&nbsp;<span class="builtinfunc" id="7368778">len</span><span class="op" id="7368781">(</span><span class="ident" id="7368782">vs</span><span class="op" id="7368784">)</span><span class="op" id="7368785">,</span>&nbsp;<span class="builtinfunc" id="7368787">len</span><span class="op" id="7368790">(</span><span class="ident" id="7368791">evs</span><span class="op" id="7368794">)</span><span class="op" id="7368795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368801">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368818">for</span>&nbsp;<span class="ident" id="7368822">j</span><span class="op" id="7368823">,</span>&nbsp;<span class="ident" id="7368825">ev</span>&nbsp;<span class="op" id="7368828">:=</span>&nbsp;<span class="keyword" id="7368831">range</span>&nbsp;<span class="ident" id="7368837">evs</span>&nbsp;<span class="op" id="7368841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368847">if</span>&nbsp;<span class="ident" id="7368850">v</span>&nbsp;<span class="op" id="7368852">:=</span>&nbsp;<span class="ident" id="7368855">vs</span><span class="op" id="7368857">[</span><span class="ident" id="7368858">j</span><span class="op" id="7368859">]</span><span class="op" id="7368860">;</span>&nbsp;<span class="ident" id="7368862">v</span>&nbsp;<span class="op" id="7368864">!=</span>&nbsp;<span class="ident" id="7368867">ev</span>&nbsp;<span class="op" id="7368870">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368877">t</span><span class="op" id="7368878">.</span><span class="ident" id="7368879">Errorf</span><span class="op" id="7368885">(</span><span class="string" id="7368886">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7368923">,</span>&nbsp;<span class="ident" id="7368925">i</span><span class="op" id="7368926">,</span>&nbsp;<span class="ident" id="7368928">k</span><span class="op" id="7368929">,</span>&nbsp;<span class="ident" id="7368931">j</span><span class="op" id="7368932">,</span>&nbsp;<span class="ident" id="7368934">v</span><span class="op" id="7368935">,</span>&nbsp;<span class="ident" id="7368937">ev</span><span class="op" id="7368939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368957">}</span><br>
<span class="lineno">830</span><span class="op" id="7368959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368962">type</span>&nbsp;<span class="ident" id="7368967">RequestURITest</span>&nbsp;<span class="keyword" id="7368982">struct</span>&nbsp;<span class="op" id="7368989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368992">url</span>&nbsp;<span class="op" id="7368996">*</span><span class="ident" id="7368997">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369002">out</span>&nbsp;<span class="builtintype" id="7369006">string</span><br>
<span class="lineno">835</span><span class="op" id="7369013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369016">var</span>&nbsp;<span class="ident" id="7369020">requritests</span>&nbsp;<span class="op" id="7369032">=</span>&nbsp;<span class="op" id="7369034">[</span><span class="op" id="7369035">]</span><span class="ident" id="7369036">RequestURITest</span><span class="op" id="7369050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369057">&amp;</span><span class="ident" id="7369058">URL</span><span class="op" id="7369061">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369066">Scheme</span><span class="op" id="7369072">:</span>&nbsp;<span class="string" id="7369074">&#34;http&#34;</span><span class="op" id="7369080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369085">Host</span><span class="op" id="7369089">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369093">&#34;example.com&#34;</span><span class="op" id="7369106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369111">Path</span><span class="op" id="7369115">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369119">&#34;&#34;</span><span class="op" id="7369121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369125">}</span><span class="op" id="7369126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369130">&#34;/&#34;</span><span class="op" id="7369133">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369136">}</span><span class="op" id="7369137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369144">&amp;</span><span class="ident" id="7369145">URL</span><span class="op" id="7369148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369153">Scheme</span><span class="op" id="7369159">:</span>&nbsp;<span class="string" id="7369161">&#34;http&#34;</span><span class="op" id="7369167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369172">Host</span><span class="op" id="7369176">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369180">&#34;example.com&#34;</span><span class="op" id="7369193">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369198">Path</span><span class="op" id="7369202">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369206">&#34;/a&nbsp;b&#34;</span><span class="op" id="7369212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369216">}</span><span class="op" id="7369217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369221">&#34;/a%20b&#34;</span><span class="op" id="7369229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369232">}</span><span class="op" id="7369233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369236">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369276">&amp;</span><span class="ident" id="7369277">URL</span><span class="op" id="7369280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369285">Scheme</span><span class="op" id="7369291">:</span>&nbsp;<span class="string" id="7369293">&#34;http&#34;</span><span class="op" id="7369299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369304">Host</span><span class="op" id="7369308">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369312">&#34;example.com&#34;</span><span class="op" id="7369325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369330">Opaque</span><span class="op" id="7369336">:</span>&nbsp;<span class="string" id="7369338">&#34;/%2F/%2F/&#34;</span><span class="op" id="7369349">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369353">}</span><span class="op" id="7369354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369358">&#34;/%2F/%2F/&#34;</span><span class="op" id="7369369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369372">}</span><span class="op" id="7369373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369376">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369412">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369416">&amp;</span><span class="ident" id="7369417">URL</span><span class="op" id="7369420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369425">Scheme</span><span class="op" id="7369431">:</span>&nbsp;<span class="string" id="7369433">&#34;http&#34;</span><span class="op" id="7369439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369444">Host</span><span class="op" id="7369448">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369452">&#34;example.com&#34;</span><span class="op" id="7369465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369470">Opaque</span><span class="op" id="7369476">:</span>&nbsp;<span class="string" id="7369478">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7369508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369512">}</span><span class="op" id="7369513">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369517">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7369552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369555">}</span><span class="op" id="7369556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369563">&amp;</span><span class="ident" id="7369564">URL</span><span class="op" id="7369567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369572">Scheme</span><span class="op" id="7369578">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369582">&#34;http&#34;</span><span class="op" id="7369588">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369593">Host</span><span class="op" id="7369597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7369603">&#34;example.com&#34;</span><span class="op" id="7369616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369621">Path</span><span class="op" id="7369625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7369631">&#34;/a&nbsp;b&#34;</span><span class="op" id="7369637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369642">RawQuery</span><span class="op" id="7369650">:</span>&nbsp;<span class="string" id="7369652">&#34;q=go+language&#34;</span><span class="op" id="7369667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369671">}</span><span class="op" id="7369672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369676">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7369698">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369701">}</span><span class="op" id="7369702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369709">&amp;</span><span class="ident" id="7369710">URL</span><span class="op" id="7369713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369718">Scheme</span><span class="op" id="7369724">:</span>&nbsp;<span class="string" id="7369726">&#34;myschema&#34;</span><span class="op" id="7369736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369741">Opaque</span><span class="op" id="7369747">:</span>&nbsp;<span class="string" id="7369749">&#34;opaque&#34;</span><span class="op" id="7369757">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369761">}</span><span class="op" id="7369762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369766">&#34;opaque&#34;</span><span class="op" id="7369774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369777">}</span><span class="op" id="7369778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369785">&amp;</span><span class="ident" id="7369786">URL</span><span class="op" id="7369789">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369794">Scheme</span><span class="op" id="7369800">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369804">&#34;myschema&#34;</span><span class="op" id="7369814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369819">Opaque</span><span class="op" id="7369825">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7369829">&#34;opaque&#34;</span><span class="op" id="7369837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369842">RawQuery</span><span class="op" id="7369850">:</span>&nbsp;<span class="string" id="7369852">&#34;q=go+language&#34;</span><span class="op" id="7369867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369871">}</span><span class="op" id="7369872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369876">&#34;opaque?q=go+language&#34;</span><span class="op" id="7369898">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369901">}</span><span class="op" id="7369902">,</span><br>
<span class="lineno"></span><span class="op" id="7369904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369907">func</span>&nbsp;<span class="ident" id="7369912">TestRequestURI</span><span class="op" id="7369926">(</span><span class="ident" id="7369927">t</span>&nbsp;<span class="op" id="7369929">*</span><span class="ident" id="7369930">testing</span><span class="op" id="7369937">.</span><span class="ident" id="7369938">T</span><span class="op" id="7369939">)</span>&nbsp;<span class="op" id="7369941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369944">for</span>&nbsp;<span class="ident" id="7369948">_</span><span class="op" id="7369949">,</span>&nbsp;<span class="ident" id="7369951">tt</span>&nbsp;<span class="op" id="7369954">:=</span>&nbsp;<span class="keyword" id="7369957">range</span>&nbsp;<span class="ident" id="7369963">requritests</span>&nbsp;<span class="op" id="7369975">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369979">s</span>&nbsp;<span class="op" id="7369981">:=</span>&nbsp;<span class="ident" id="7369984">tt</span><span class="op" id="7369986">.</span><span class="ident" id="7369987">url</span><span class="op" id="7369990">.</span><span class="ident" id="7369991">RequestURI</span><span class="op" id="7370001">(</span><span class="op" id="7370002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370006">if</span>&nbsp;<span class="ident" id="7370009">s</span>&nbsp;<span class="op" id="7370011">!=</span>&nbsp;<span class="ident" id="7370014">tt</span><span class="op" id="7370016">.</span><span class="ident" id="7370017">out</span>&nbsp;<span class="op" id="7370021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370026">t</span><span class="op" id="7370027">.</span><span class="ident" id="7370028">Errorf</span><span class="op" id="7370034">(</span><span class="string" id="7370035">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7370073">,</span>&nbsp;<span class="ident" id="7370075">tt</span><span class="op" id="7370077">.</span><span class="ident" id="7370078">url</span><span class="op" id="7370081">,</span>&nbsp;<span class="ident" id="7370083">s</span><span class="op" id="7370084">,</span>&nbsp;<span class="ident" id="7370086">tt</span><span class="op" id="7370088">.</span><span class="ident" id="7370089">out</span><span class="op" id="7370092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370099">}</span><br>
<span class="lineno">905</span><span class="op" id="7370101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370104">func</span>&nbsp;<span class="ident" id="7370109">TestParseFailure</span><span class="op" id="7370125">(</span><span class="ident" id="7370126">t</span>&nbsp;<span class="op" id="7370128">*</span><span class="ident" id="7370129">testing</span><span class="op" id="7370136">.</span><span class="ident" id="7370137">T</span><span class="op" id="7370138">)</span>&nbsp;<span class="op" id="7370140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370143">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370192">const</span>&nbsp;<span class="ident" id="7370198">url</span>&nbsp;<span class="op" id="7370202">=</span>&nbsp;<span class="string" id="7370204">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370215">_</span><span class="op" id="7370216">,</span>&nbsp;<span class="ident" id="7370218">err</span>&nbsp;<span class="op" id="7370222">:=</span>&nbsp;<span class="ident" id="7370225">ParseQuery</span><span class="op" id="7370235">(</span><span class="ident" id="7370236">url</span><span class="op" id="7370239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370242">errStr</span>&nbsp;<span class="op" id="7370249">:=</span>&nbsp;<span class="ident" id="7370252">fmt</span><span class="op" id="7370255">.</span><span class="ident" id="7370256">Sprint</span><span class="op" id="7370262">(</span><span class="ident" id="7370263">err</span><span class="op" id="7370266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7370269">if</span>&nbsp;<span class="op" id="7370272">!</span><span class="ident" id="7370273">strings</span><span class="op" id="7370280">.</span><span class="ident" id="7370281">Contains</span><span class="op" id="7370289">(</span><span class="ident" id="7370290">errStr</span><span class="op" id="7370296">,</span>&nbsp;<span class="string" id="7370298">&#34;%gh&#34;</span><span class="op" id="7370303">)</span>&nbsp;<span class="op" id="7370305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370309">t</span><span class="op" id="7370310">.</span><span class="ident" id="7370311">Errorf</span><span class="op" id="7370317">(</span><span class="string" id="7370318">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7370383">,</span>&nbsp;<span class="ident" id="7370385">url</span><span class="op" id="7370388">,</span>&nbsp;<span class="ident" id="7370390">errStr</span><span class="op" id="7370396">,</span>&nbsp;<span class="string" id="7370398">&#34;%gh&#34;</span><span class="op" id="7370403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370406">}</span><br>
<span class="lineno">915</span><span class="op" id="7370408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370411">type</span>&nbsp;<span class="ident" id="7370416">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7370433">struct</span>&nbsp;<span class="op" id="7370440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370443">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7370450">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370456">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7370463">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7370473">escape</span>&nbsp;<span class="builtintype" id="7370480">bool</span><br>
<span class="lineno"></span><span class="op" id="7370485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7370488">var</span>&nbsp;<span class="ident" id="7370492">shouldEscapeTests</span>&nbsp;<span class="op" id="7370510">=</span>&nbsp;<span class="op" id="7370512">[</span><span class="op" id="7370513">]</span><span class="ident" id="7370514">shouldEscapeTest</span><span class="op" id="7370530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370533">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370567">{</span><span class="string" id="7370568">&#39;a&#39;</span><span class="op" id="7370571">,</span>&nbsp;<span class="ident" id="7370573">encodePath</span><span class="op" id="7370583">,</span>&nbsp;<span class="builtintype" id="7370585">false</span><span class="op" id="7370590">}</span><span class="op" id="7370591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370594">{</span><span class="string" id="7370595">&#39;a&#39;</span><span class="op" id="7370598">,</span>&nbsp;<span class="ident" id="7370600">encodeUserPassword</span><span class="op" id="7370618">,</span>&nbsp;<span class="builtintype" id="7370620">false</span><span class="op" id="7370625">}</span><span class="op" id="7370626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370629">{</span><span class="string" id="7370630">&#39;a&#39;</span><span class="op" id="7370633">,</span>&nbsp;<span class="ident" id="7370635">encodeQueryComponent</span><span class="op" id="7370655">,</span>&nbsp;<span class="builtintype" id="7370657">false</span><span class="op" id="7370662">}</span><span class="op" id="7370663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370666">{</span><span class="string" id="7370667">&#39;a&#39;</span><span class="op" id="7370670">,</span>&nbsp;<span class="ident" id="7370672">encodeFragment</span><span class="op" id="7370686">,</span>&nbsp;<span class="builtintype" id="7370688">false</span><span class="op" id="7370693">}</span><span class="op" id="7370694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370697">{</span><span class="string" id="7370698">&#39;z&#39;</span><span class="op" id="7370701">,</span>&nbsp;<span class="ident" id="7370703">encodePath</span><span class="op" id="7370713">,</span>&nbsp;<span class="builtintype" id="7370715">false</span><span class="op" id="7370720">}</span><span class="op" id="7370721">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370724">{</span><span class="string" id="7370725">&#39;A&#39;</span><span class="op" id="7370728">,</span>&nbsp;<span class="ident" id="7370730">encodePath</span><span class="op" id="7370740">,</span>&nbsp;<span class="builtintype" id="7370742">false</span><span class="op" id="7370747">}</span><span class="op" id="7370748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370751">{</span><span class="string" id="7370752">&#39;Z&#39;</span><span class="op" id="7370755">,</span>&nbsp;<span class="ident" id="7370757">encodePath</span><span class="op" id="7370767">,</span>&nbsp;<span class="builtintype" id="7370769">false</span><span class="op" id="7370774">}</span><span class="op" id="7370775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370778">{</span><span class="string" id="7370779">&#39;0&#39;</span><span class="op" id="7370782">,</span>&nbsp;<span class="ident" id="7370784">encodePath</span><span class="op" id="7370794">,</span>&nbsp;<span class="builtintype" id="7370796">false</span><span class="op" id="7370801">}</span><span class="op" id="7370802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370805">{</span><span class="string" id="7370806">&#39;9&#39;</span><span class="op" id="7370809">,</span>&nbsp;<span class="ident" id="7370811">encodePath</span><span class="op" id="7370821">,</span>&nbsp;<span class="builtintype" id="7370823">false</span><span class="op" id="7370828">}</span><span class="op" id="7370829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370832">{</span><span class="string" id="7370833">&#39;-&#39;</span><span class="op" id="7370836">,</span>&nbsp;<span class="ident" id="7370838">encodePath</span><span class="op" id="7370848">,</span>&nbsp;<span class="builtintype" id="7370850">false</span><span class="op" id="7370855">}</span><span class="op" id="7370856">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370859">{</span><span class="string" id="7370860">&#39;-&#39;</span><span class="op" id="7370863">,</span>&nbsp;<span class="ident" id="7370865">encodeUserPassword</span><span class="op" id="7370883">,</span>&nbsp;<span class="builtintype" id="7370885">false</span><span class="op" id="7370890">}</span><span class="op" id="7370891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370894">{</span><span class="string" id="7370895">&#39;-&#39;</span><span class="op" id="7370898">,</span>&nbsp;<span class="ident" id="7370900">encodeQueryComponent</span><span class="op" id="7370920">,</span>&nbsp;<span class="builtintype" id="7370922">false</span><span class="op" id="7370927">}</span><span class="op" id="7370928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370931">{</span><span class="string" id="7370932">&#39;-&#39;</span><span class="op" id="7370935">,</span>&nbsp;<span class="ident" id="7370937">encodeFragment</span><span class="op" id="7370951">,</span>&nbsp;<span class="builtintype" id="7370953">false</span><span class="op" id="7370958">}</span><span class="op" id="7370959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370962">{</span><span class="string" id="7370963">&#39;.&#39;</span><span class="op" id="7370966">,</span>&nbsp;<span class="ident" id="7370968">encodePath</span><span class="op" id="7370978">,</span>&nbsp;<span class="builtintype" id="7370980">false</span><span class="op" id="7370985">}</span><span class="op" id="7370986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7370989">{</span><span class="string" id="7370990">&#39;_&#39;</span><span class="op" id="7370993">,</span>&nbsp;<span class="ident" id="7370995">encodePath</span><span class="op" id="7371005">,</span>&nbsp;<span class="builtintype" id="7371007">false</span><span class="op" id="7371012">}</span><span class="op" id="7371013">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371016">{</span><span class="string" id="7371017">&#39;~&#39;</span><span class="op" id="7371020">,</span>&nbsp;<span class="ident" id="7371022">encodePath</span><span class="op" id="7371032">,</span>&nbsp;<span class="builtintype" id="7371034">false</span><span class="op" id="7371039">}</span><span class="op" id="7371040">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371044">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371075">{</span><span class="string" id="7371076">&#39;:&#39;</span><span class="op" id="7371079">,</span>&nbsp;<span class="ident" id="7371081">encodeUserPassword</span><span class="op" id="7371099">,</span>&nbsp;<span class="builtintype" id="7371101">true</span><span class="op" id="7371105">}</span><span class="op" id="7371106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371109">{</span><span class="string" id="7371110">&#39;/&#39;</span><span class="op" id="7371113">,</span>&nbsp;<span class="ident" id="7371115">encodeUserPassword</span><span class="op" id="7371133">,</span>&nbsp;<span class="builtintype" id="7371135">true</span><span class="op" id="7371139">}</span><span class="op" id="7371140">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371143">{</span><span class="string" id="7371144">&#39;?&#39;</span><span class="op" id="7371147">,</span>&nbsp;<span class="ident" id="7371149">encodeUserPassword</span><span class="op" id="7371167">,</span>&nbsp;<span class="builtintype" id="7371169">true</span><span class="op" id="7371173">}</span><span class="op" id="7371174">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371177">{</span><span class="string" id="7371178">&#39;@&#39;</span><span class="op" id="7371181">,</span>&nbsp;<span class="ident" id="7371183">encodeUserPassword</span><span class="op" id="7371201">,</span>&nbsp;<span class="builtintype" id="7371203">true</span><span class="op" id="7371207">}</span><span class="op" id="7371208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371211">{</span><span class="string" id="7371212">&#39;$&#39;</span><span class="op" id="7371215">,</span>&nbsp;<span class="ident" id="7371217">encodeUserPassword</span><span class="op" id="7371235">,</span>&nbsp;<span class="builtintype" id="7371237">false</span><span class="op" id="7371242">}</span><span class="op" id="7371243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371246">{</span><span class="string" id="7371247">&#39;&amp;&#39;</span><span class="op" id="7371250">,</span>&nbsp;<span class="ident" id="7371252">encodeUserPassword</span><span class="op" id="7371270">,</span>&nbsp;<span class="builtintype" id="7371272">false</span><span class="op" id="7371277">}</span><span class="op" id="7371278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371281">{</span><span class="string" id="7371282">&#39;+&#39;</span><span class="op" id="7371285">,</span>&nbsp;<span class="ident" id="7371287">encodeUserPassword</span><span class="op" id="7371305">,</span>&nbsp;<span class="builtintype" id="7371307">false</span><span class="op" id="7371312">}</span><span class="op" id="7371313">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371316">{</span><span class="string" id="7371317">&#39;,&#39;</span><span class="op" id="7371320">,</span>&nbsp;<span class="ident" id="7371322">encodeUserPassword</span><span class="op" id="7371340">,</span>&nbsp;<span class="builtintype" id="7371342">false</span><span class="op" id="7371347">}</span><span class="op" id="7371348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371351">{</span><span class="string" id="7371352">&#39;;&#39;</span><span class="op" id="7371355">,</span>&nbsp;<span class="ident" id="7371357">encodeUserPassword</span><span class="op" id="7371375">,</span>&nbsp;<span class="builtintype" id="7371377">false</span><span class="op" id="7371382">}</span><span class="op" id="7371383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371386">{</span><span class="string" id="7371387">&#39;=&#39;</span><span class="op" id="7371390">,</span>&nbsp;<span class="ident" id="7371392">encodeUserPassword</span><span class="op" id="7371410">,</span>&nbsp;<span class="builtintype" id="7371412">false</span><span class="op" id="7371417">}</span><span class="op" id="7371418">,</span><br>
<span class="lineno"></span><span class="op" id="7371420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7371423">func</span>&nbsp;<span class="ident" id="7371428">TestShouldEscape</span><span class="op" id="7371444">(</span><span class="ident" id="7371445">t</span>&nbsp;<span class="op" id="7371447">*</span><span class="ident" id="7371448">testing</span><span class="op" id="7371455">.</span><span class="ident" id="7371456">T</span><span class="op" id="7371457">)</span>&nbsp;<span class="op" id="7371459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371462">for</span>&nbsp;<span class="ident" id="7371466">_</span><span class="op" id="7371467">,</span>&nbsp;<span class="ident" id="7371469">tt</span>&nbsp;<span class="op" id="7371472">:=</span>&nbsp;<span class="keyword" id="7371475">range</span>&nbsp;<span class="ident" id="7371481">shouldEscapeTests</span>&nbsp;<span class="op" id="7371499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371503">if</span>&nbsp;<span class="ident" id="7371506">shouldEscape</span><span class="op" id="7371518">(</span><span class="ident" id="7371519">tt</span><span class="op" id="7371521">.</span><span class="ident" id="7371522">in</span><span class="op" id="7371524">,</span>&nbsp;<span class="ident" id="7371526">tt</span><span class="op" id="7371528">.</span><span class="ident" id="7371529">mode</span><span class="op" id="7371533">)</span>&nbsp;<span class="op" id="7371535">!=</span>&nbsp;<span class="ident" id="7371538">tt</span><span class="op" id="7371540">.</span><span class="ident" id="7371541">escape</span>&nbsp;<span class="op" id="7371548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371553">t</span><span class="op" id="7371554">.</span><span class="ident" id="7371555">Errorf</span><span class="op" id="7371561">(</span><span class="string" id="7371562">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7371609">,</span>&nbsp;<span class="ident" id="7371611">tt</span><span class="op" id="7371613">.</span><span class="ident" id="7371614">in</span><span class="op" id="7371616">,</span>&nbsp;<span class="ident" id="7371618">tt</span><span class="op" id="7371620">.</span><span class="ident" id="7371621">mode</span><span class="op" id="7371625">,</span>&nbsp;<span class="op" id="7371627">!</span><span class="ident" id="7371628">tt</span><span class="op" id="7371630">.</span><span class="ident" id="7371631">escape</span><span class="op" id="7371637">,</span>&nbsp;<span class="ident" id="7371639">tt</span><span class="op" id="7371641">.</span><span class="ident" id="7371642">escape</span><span class="op" id="7371648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371652">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371655">}</span><br>
<span class="lineno"></span><span class="op" id="7371657">}</span>
</div>
</body>
</html>
