<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7866709">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7866764">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7866818">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7866869">package</span>&nbsp;<span class="ident" id="7866877">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7866882">import</span>&nbsp;<span class="op" id="7866889">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7866892">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7866898">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7866909">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7866920">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7866930">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7866933">type</span>&nbsp;<span class="ident" id="7866938">listenerFile</span>&nbsp;<span class="keyword" id="7866951">interface</span>&nbsp;<span class="op" id="7866961">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866964"><a href="/net/net.go.html#1471621">Listener</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7866974">File</span><span class="op" id="7866978">(</span><span class="op" id="7866979">)</span>&nbsp;<span class="op" id="7866981">(</span><span class="ident" id="7866982">f</span>&nbsp;<span class="op" id="7866984">*</span><span class="ident" id="7866985"><a href="/net/file_test.go.html#7866892">os</a></span><span class="op" id="7866987">.</span><span class="ident" id="7866988">File</span><span class="op" id="7866992">,</span>&nbsp;<span class="ident" id="7866994">err</span>&nbsp;<span class="builtintype" id="7866998">error</span><span class="op" id="7867003">)</span><br>
<span class="lineno"></span><span class="op" id="7867005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7867008">type</span>&nbsp;<span class="ident" id="7867013">packetConnFile</span>&nbsp;<span class="keyword" id="7867028">interface</span>&nbsp;<span class="op" id="7867038">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867041"><a href="/net/net.go.html#1469751">PacketConn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867053">File</span><span class="op" id="7867057">(</span><span class="op" id="7867058">)</span>&nbsp;<span class="op" id="7867060">(</span><span class="ident" id="7867061">f</span>&nbsp;<span class="op" id="7867063">*</span><span class="ident" id="7867064"><a href="/net/file_test.go.html#7866892">os</a></span><span class="op" id="7867066">.</span><span class="ident" id="7867067">File</span><span class="op" id="7867071">,</span>&nbsp;<span class="ident" id="7867073">err</span>&nbsp;<span class="builtintype" id="7867077">error</span><span class="op" id="7867082">)</span><br>
<span class="lineno"></span><span class="op" id="7867084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7867087">type</span>&nbsp;<span class="ident" id="7867092">connFile</span>&nbsp;<span class="keyword" id="7867101">interface</span>&nbsp;<span class="op" id="7867111">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867114"><a href="/net/net.go.html#1465335">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867120">File</span><span class="op" id="7867124">(</span><span class="op" id="7867125">)</span>&nbsp;<span class="op" id="7867127">(</span><span class="ident" id="7867128">f</span>&nbsp;<span class="op" id="7867130">*</span><span class="ident" id="7867131"><a href="/net/file_test.go.html#7866892">os</a></span><span class="op" id="7867133">.</span><span class="ident" id="7867134">File</span><span class="op" id="7867138">,</span>&nbsp;<span class="ident" id="7867140">err</span>&nbsp;<span class="builtintype" id="7867144">error</span><span class="op" id="7867149">)</span><br>
<span class="lineno"></span><span class="op" id="7867151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7867154">func</span>&nbsp;<span class="ident" id="7867159">testFileListener</span><span class="op" id="7867175">(</span><span class="ident" id="7867176">t</span>&nbsp;<span class="op" id="7867178">*</span><span class="ident" id="7867179"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7867186">.</span><span class="ident" id="7867187">T</span><span class="op" id="7867188">,</span>&nbsp;<span class="ident" id="7867190">net</span><span class="op" id="7867193">,</span>&nbsp;<span class="ident" id="7867195">laddr</span>&nbsp;<span class="builtintype" id="7867201">string</span><span class="op" id="7867207">)</span>&nbsp;<span class="op" id="7867209">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867212">switch</span>&nbsp;<span class="ident" id="7867219"><a href="/net/file_test.go.html#7867190">net</a></span>&nbsp;<span class="op" id="7867223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867226">case</span>&nbsp;<span class="string" id="7867231">&#34;tcp&#34;</span><span class="op" id="7867236">,</span>&nbsp;<span class="string" id="7867238">&#34;tcp4&#34;</span><span class="op" id="7867244">,</span>&nbsp;<span class="string" id="7867246">&#34;tcp6&#34;</span><span class="op" id="7867252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867256"><a href="/net/file_test.go.html#7867195">laddr</a></span>&nbsp;<span class="op" id="7867262">+=</span>&nbsp;<span class="string" id="7867265">&#34;:0&#34;</span>&nbsp;<span class="comment" id="7867270">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867296">l</span><span class="op" id="7867297">,</span>&nbsp;<span class="ident" id="7867299">err</span>&nbsp;<span class="op" id="7867303">:=</span>&nbsp;<span class="ident" id="7867306"><a href="/net/dial.go.html#1338035">Listen</a></span><span class="op" id="7867312">(</span><span class="ident" id="7867313"><a href="/net/file_test.go.html#7867190">net</a></span><span class="op" id="7867316">,</span>&nbsp;<span class="ident" id="7867318"><a href="/net/file_test.go.html#7867195">laddr</a></span><span class="op" id="7867323">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867326">if</span>&nbsp;<span class="ident" id="7867329"><a href="/net/file_test.go.html#7867299">err</a></span>&nbsp;<span class="op" id="7867333">!=</span>&nbsp;<span class="ident" id="7867336">nil</span>&nbsp;<span class="op" id="7867340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867344"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867345">.</span><span class="ident" id="7867346">Fatalf</span><span class="op" id="7867352">(</span><span class="string" id="7867353">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7867372">,</span>&nbsp;<span class="ident" id="7867374"><a href="/net/file_test.go.html#7867299">err</a></span><span class="op" id="7867377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867383">defer</span>&nbsp;<span class="ident" id="7867389"><a href="/net/file_test.go.html#7867296">l</a></span><span class="op" id="7867390">.</span><span class="ident" id="7867391">Close</span><span class="op" id="7867396">(</span><span class="op" id="7867397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867400">lf</span>&nbsp;<span class="op" id="7867403">:=</span>&nbsp;<span class="ident" id="7867406"><a href="/net/file_test.go.html#7867296">l</a></span><span class="op" id="7867407">.</span><span class="op" id="7867408">(</span><span class="ident" id="7867409"><a href="/net/file_test.go.html#7866938">listenerFile</a></span><span class="op" id="7867421">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867424">f</span><span class="op" id="7867425">,</span>&nbsp;<span class="ident" id="7867427"><a href="/net/file_test.go.html#7867299">err</a></span>&nbsp;<span class="op" id="7867431">:=</span>&nbsp;<span class="ident" id="7867434"><a href="/net/file_test.go.html#7867400">lf</a></span><span class="op" id="7867436">.</span><span class="ident" id="7867437">File</span><span class="op" id="7867441">(</span><span class="op" id="7867442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867445">if</span>&nbsp;<span class="ident" id="7867448"><a href="/net/file_test.go.html#7867299">err</a></span>&nbsp;<span class="op" id="7867452">!=</span>&nbsp;<span class="ident" id="7867455">nil</span>&nbsp;<span class="op" id="7867459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867463"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867464">.</span><span class="ident" id="7867465">Fatalf</span><span class="op" id="7867471">(</span><span class="string" id="7867472">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7867489">,</span>&nbsp;<span class="ident" id="7867491"><a href="/net/file_test.go.html#7867299">err</a></span><span class="op" id="7867494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867500">c</span><span class="op" id="7867501">,</span>&nbsp;<span class="ident" id="7867503"><a href="/net/file_test.go.html#7867299">err</a></span>&nbsp;<span class="op" id="7867507">:=</span>&nbsp;<span class="ident" id="7867510"><a href="/net/file_unix.go.html#1402927">FileListener</a></span><span class="op" id="7867522">(</span><span class="ident" id="7867523"><a href="/net/file_test.go.html#7867424">f</a></span><span class="op" id="7867524">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867527">if</span>&nbsp;<span class="ident" id="7867530"><a href="/net/file_test.go.html#7867299">err</a></span>&nbsp;<span class="op" id="7867534">!=</span>&nbsp;<span class="ident" id="7867537">nil</span>&nbsp;<span class="op" id="7867541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867545"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867546">.</span><span class="ident" id="7867547">Fatalf</span><span class="op" id="7867553">(</span><span class="string" id="7867554">&#34;FileListener&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7867579">,</span>&nbsp;<span class="ident" id="7867581"><a href="/net/file_test.go.html#7867299">err</a></span><span class="op" id="7867584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867590">if</span>&nbsp;<span class="op" id="7867593">!</span><span class="ident" id="7867594"><a href="/net/file_test.go.html#7866898">reflect</a></span><span class="op" id="7867601">.</span><span class="ident" id="7867602">DeepEqual</span><span class="op" id="7867611">(</span><span class="ident" id="7867612"><a href="/net/file_test.go.html#7867296">l</a></span><span class="op" id="7867613">.</span><span class="ident" id="7867614">Addr</span><span class="op" id="7867618">(</span><span class="op" id="7867619">)</span><span class="op" id="7867620">,</span>&nbsp;<span class="ident" id="7867622"><a href="/net/file_test.go.html#7867500">c</a></span><span class="op" id="7867623">.</span><span class="ident" id="7867624">Addr</span><span class="op" id="7867628">(</span><span class="op" id="7867629">)</span><span class="op" id="7867630">)</span>&nbsp;<span class="op" id="7867632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867636"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867637">.</span><span class="ident" id="7867638">Fatalf</span><span class="op" id="7867644">(</span><span class="string" id="7867645">&#34;Addrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="7867674">,</span>&nbsp;<span class="ident" id="7867676"><a href="/net/file_test.go.html#7867296">l</a></span><span class="op" id="7867677">.</span><span class="ident" id="7867678">Addr</span><span class="op" id="7867682">(</span><span class="op" id="7867683">)</span><span class="op" id="7867684">,</span>&nbsp;<span class="ident" id="7867686"><a href="/net/file_test.go.html#7867500">c</a></span><span class="op" id="7867687">.</span><span class="ident" id="7867688">Addr</span><span class="op" id="7867692">(</span><span class="op" id="7867693">)</span><span class="op" id="7867694">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867700">if</span>&nbsp;<span class="ident" id="7867703">err</span>&nbsp;<span class="op" id="7867707">:=</span>&nbsp;<span class="ident" id="7867710"><a href="/net/file_test.go.html#7867500">c</a></span><span class="op" id="7867711">.</span><span class="ident" id="7867712">Close</span><span class="op" id="7867717">(</span><span class="op" id="7867718">)</span><span class="op" id="7867719">;</span>&nbsp;<span class="ident" id="7867721"><a href="/net/file_test.go.html#7867703">err</a></span>&nbsp;<span class="op" id="7867725">!=</span>&nbsp;<span class="ident" id="7867728">nil</span>&nbsp;<span class="op" id="7867732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867736"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867737">.</span><span class="ident" id="7867738">Fatalf</span><span class="op" id="7867744">(</span><span class="string" id="7867745">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7867763">,</span>&nbsp;<span class="ident" id="7867765"><a href="/net/file_test.go.html#7867703">err</a></span><span class="op" id="7867768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7867774">if</span>&nbsp;<span class="ident" id="7867777">err</span>&nbsp;<span class="op" id="7867781">:=</span>&nbsp;<span class="ident" id="7867784"><a href="/net/file_test.go.html#7867424">f</a></span><span class="op" id="7867785">.</span><span class="ident" id="7867786">Close</span><span class="op" id="7867791">(</span><span class="op" id="7867792">)</span><span class="op" id="7867793">;</span>&nbsp;<span class="ident" id="7867795"><a href="/net/file_test.go.html#7867777">err</a></span>&nbsp;<span class="op" id="7867799">!=</span>&nbsp;<span class="ident" id="7867802">nil</span>&nbsp;<span class="op" id="7867806">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867810"><a href="/net/file_test.go.html#7867176">t</a></span><span class="op" id="7867811">.</span><span class="ident" id="7867812">Fatalf</span><span class="op" id="7867818">(</span><span class="string" id="7867819">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7867837">,</span>&nbsp;<span class="ident" id="7867839"><a href="/net/file_test.go.html#7867777">err</a></span><span class="op" id="7867842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7867845">}</span><br>
<span class="lineno"></span><span class="op" id="7867847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7867850">var</span>&nbsp;<span class="ident" id="7867854">fileListenerTests</span>&nbsp;<span class="op" id="7867872">=</span>&nbsp;<span class="op" id="7867874">[</span><span class="op" id="7867875">]</span><span class="keyword" id="7867876">struct</span>&nbsp;<span class="op" id="7867883">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867886">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7867892">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867900">laddr</span>&nbsp;<span class="builtintype" id="7867906">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867914">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="7867920">bool</span>&nbsp;<span class="comment" id="7867925">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7867966">linux</span>&nbsp;<span class="builtintype" id="7867972">bool</span>&nbsp;<span class="comment" id="7867977">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7868031">}</span><span class="op" id="7868032">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868035">{</span><span class="ident" id="7868036">net</span><span class="op" id="7868039">:</span>&nbsp;<span class="string" id="7868041">&#34;tcp&#34;</span><span class="op" id="7868046">,</span>&nbsp;<span class="ident" id="7868048">laddr</span><span class="op" id="7868053">:</span>&nbsp;<span class="string" id="7868055">&#34;&#34;</span><span class="op" id="7868057">}</span><span class="op" id="7868058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868061">{</span><span class="ident" id="7868062">net</span><span class="op" id="7868065">:</span>&nbsp;<span class="string" id="7868067">&#34;tcp&#34;</span><span class="op" id="7868072">,</span>&nbsp;<span class="ident" id="7868074">laddr</span><span class="op" id="7868079">:</span>&nbsp;<span class="string" id="7868081">&#34;0.0.0.0&#34;</span><span class="op" id="7868090">}</span><span class="op" id="7868091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868094">{</span><span class="ident" id="7868095">net</span><span class="op" id="7868098">:</span>&nbsp;<span class="string" id="7868100">&#34;tcp&#34;</span><span class="op" id="7868105">,</span>&nbsp;<span class="ident" id="7868107">laddr</span><span class="op" id="7868112">:</span>&nbsp;<span class="string" id="7868114">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7868132">}</span><span class="op" id="7868133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868136">{</span><span class="ident" id="7868137">net</span><span class="op" id="7868140">:</span>&nbsp;<span class="string" id="7868142">&#34;tcp&#34;</span><span class="op" id="7868147">,</span>&nbsp;<span class="ident" id="7868149">laddr</span><span class="op" id="7868154">:</span>&nbsp;<span class="string" id="7868156">&#34;[::]&#34;</span><span class="op" id="7868162">,</span>&nbsp;<span class="ident" id="7868164">ipv6</span><span class="op" id="7868168">:</span>&nbsp;<span class="builtintype" id="7868170">true</span><span class="op" id="7868174">}</span><span class="op" id="7868175">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868179">{</span><span class="ident" id="7868180">net</span><span class="op" id="7868183">:</span>&nbsp;<span class="string" id="7868185">&#34;tcp&#34;</span><span class="op" id="7868190">,</span>&nbsp;<span class="ident" id="7868192">laddr</span><span class="op" id="7868197">:</span>&nbsp;<span class="string" id="7868199">&#34;127.0.0.1&#34;</span><span class="op" id="7868210">}</span><span class="op" id="7868211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868214">{</span><span class="ident" id="7868215">net</span><span class="op" id="7868218">:</span>&nbsp;<span class="string" id="7868220">&#34;tcp&#34;</span><span class="op" id="7868225">,</span>&nbsp;<span class="ident" id="7868227">laddr</span><span class="op" id="7868232">:</span>&nbsp;<span class="string" id="7868234">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7868254">}</span><span class="op" id="7868255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868258">{</span><span class="ident" id="7868259">net</span><span class="op" id="7868262">:</span>&nbsp;<span class="string" id="7868264">&#34;tcp&#34;</span><span class="op" id="7868269">,</span>&nbsp;<span class="ident" id="7868271">laddr</span><span class="op" id="7868276">:</span>&nbsp;<span class="string" id="7868278">&#34;[::1]&#34;</span><span class="op" id="7868285">,</span>&nbsp;<span class="ident" id="7868287">ipv6</span><span class="op" id="7868291">:</span>&nbsp;<span class="builtintype" id="7868293">true</span><span class="op" id="7868297">}</span><span class="op" id="7868298">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868302">{</span><span class="ident" id="7868303">net</span><span class="op" id="7868306">:</span>&nbsp;<span class="string" id="7868308">&#34;tcp4&#34;</span><span class="op" id="7868314">,</span>&nbsp;<span class="ident" id="7868316">laddr</span><span class="op" id="7868321">:</span>&nbsp;<span class="string" id="7868323">&#34;&#34;</span><span class="op" id="7868325">}</span><span class="op" id="7868326">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868329">{</span><span class="ident" id="7868330">net</span><span class="op" id="7868333">:</span>&nbsp;<span class="string" id="7868335">&#34;tcp4&#34;</span><span class="op" id="7868341">,</span>&nbsp;<span class="ident" id="7868343">laddr</span><span class="op" id="7868348">:</span>&nbsp;<span class="string" id="7868350">&#34;0.0.0.0&#34;</span><span class="op" id="7868359">}</span><span class="op" id="7868360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868363">{</span><span class="ident" id="7868364">net</span><span class="op" id="7868367">:</span>&nbsp;<span class="string" id="7868369">&#34;tcp4&#34;</span><span class="op" id="7868375">,</span>&nbsp;<span class="ident" id="7868377">laddr</span><span class="op" id="7868382">:</span>&nbsp;<span class="string" id="7868384">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7868402">}</span><span class="op" id="7868403">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868407">{</span><span class="ident" id="7868408">net</span><span class="op" id="7868411">:</span>&nbsp;<span class="string" id="7868413">&#34;tcp4&#34;</span><span class="op" id="7868419">,</span>&nbsp;<span class="ident" id="7868421">laddr</span><span class="op" id="7868426">:</span>&nbsp;<span class="string" id="7868428">&#34;127.0.0.1&#34;</span><span class="op" id="7868439">}</span><span class="op" id="7868440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868443">{</span><span class="ident" id="7868444">net</span><span class="op" id="7868447">:</span>&nbsp;<span class="string" id="7868449">&#34;tcp4&#34;</span><span class="op" id="7868455">,</span>&nbsp;<span class="ident" id="7868457">laddr</span><span class="op" id="7868462">:</span>&nbsp;<span class="string" id="7868464">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7868484">}</span><span class="op" id="7868485">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868489">{</span><span class="ident" id="7868490">net</span><span class="op" id="7868493">:</span>&nbsp;<span class="string" id="7868495">&#34;tcp6&#34;</span><span class="op" id="7868501">,</span>&nbsp;<span class="ident" id="7868503">laddr</span><span class="op" id="7868508">:</span>&nbsp;<span class="string" id="7868510">&#34;&#34;</span><span class="op" id="7868512">,</span>&nbsp;<span class="ident" id="7868514">ipv6</span><span class="op" id="7868518">:</span>&nbsp;<span class="builtintype" id="7868520">true</span><span class="op" id="7868524">}</span><span class="op" id="7868525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868528">{</span><span class="ident" id="7868529">net</span><span class="op" id="7868532">:</span>&nbsp;<span class="string" id="7868534">&#34;tcp6&#34;</span><span class="op" id="7868540">,</span>&nbsp;<span class="ident" id="7868542">laddr</span><span class="op" id="7868547">:</span>&nbsp;<span class="string" id="7868549">&#34;[::]&#34;</span><span class="op" id="7868555">,</span>&nbsp;<span class="ident" id="7868557">ipv6</span><span class="op" id="7868561">:</span>&nbsp;<span class="builtintype" id="7868563">true</span><span class="op" id="7868567">}</span><span class="op" id="7868568">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868572">{</span><span class="ident" id="7868573">net</span><span class="op" id="7868576">:</span>&nbsp;<span class="string" id="7868578">&#34;tcp6&#34;</span><span class="op" id="7868584">,</span>&nbsp;<span class="ident" id="7868586">laddr</span><span class="op" id="7868591">:</span>&nbsp;<span class="string" id="7868593">&#34;[::1]&#34;</span><span class="op" id="7868600">,</span>&nbsp;<span class="ident" id="7868602">ipv6</span><span class="op" id="7868606">:</span>&nbsp;<span class="builtintype" id="7868608">true</span><span class="op" id="7868612">}</span><span class="op" id="7868613">,</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868617">{</span><span class="ident" id="7868618">net</span><span class="op" id="7868621">:</span>&nbsp;<span class="string" id="7868623">&#34;unix&#34;</span><span class="op" id="7868629">,</span>&nbsp;<span class="ident" id="7868631">laddr</span><span class="op" id="7868636">:</span>&nbsp;<span class="string" id="7868638">&#34;@gotest/net&#34;</span><span class="op" id="7868651">,</span>&nbsp;<span class="ident" id="7868653">linux</span><span class="op" id="7868658">:</span>&nbsp;<span class="builtintype" id="7868660">true</span><span class="op" id="7868664">}</span><span class="op" id="7868665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868668">{</span><span class="ident" id="7868669">net</span><span class="op" id="7868672">:</span>&nbsp;<span class="string" id="7868674">&#34;unixpacket&#34;</span><span class="op" id="7868686">,</span>&nbsp;<span class="ident" id="7868688">laddr</span><span class="op" id="7868693">:</span>&nbsp;<span class="string" id="7868695">&#34;@gotest/net&#34;</span><span class="op" id="7868708">,</span>&nbsp;<span class="ident" id="7868710">linux</span><span class="op" id="7868715">:</span>&nbsp;<span class="builtintype" id="7868717">true</span><span class="op" id="7868721">}</span><span class="op" id="7868722">,</span><br>
<span class="lineno"></span><span class="op" id="7868724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="7868727">func</span>&nbsp;<span class="ident" id="7868732">TestFileListener</span><span class="op" id="7868748">(</span><span class="ident" id="7868749">t</span>&nbsp;<span class="op" id="7868751">*</span><span class="ident" id="7868752"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7868759">.</span><span class="ident" id="7868760">T</span><span class="op" id="7868761">)</span>&nbsp;<span class="op" id="7868763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868766">switch</span>&nbsp;<span class="ident" id="7868773"><a href="/net/file_test.go.html#7866909">runtime</a></span><span class="op" id="7868780">.</span><span class="ident" id="7868781">GOOS</span>&nbsp;<span class="op" id="7868786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868789">case</span>&nbsp;<span class="string" id="7868794">&#34;nacl&#34;</span><span class="op" id="7868800">,</span>&nbsp;<span class="string" id="7868802">&#34;windows&#34;</span><span class="op" id="7868811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7868815"><a href="/net/file_test.go.html#7868749">t</a></span><span class="op" id="7868816">.</span><span class="ident" id="7868817">Skipf</span><span class="op" id="7868822">(</span><span class="string" id="7868823">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7868844">,</span>&nbsp;<span class="ident" id="7868846"><a href="/net/file_test.go.html#7866909">runtime</a></span><span class="op" id="7868853">.</span><span class="ident" id="7868854">GOOS</span><span class="op" id="7868858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868861">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868865">for</span>&nbsp;<span class="ident" id="7868869">_</span><span class="op" id="7868870">,</span>&nbsp;<span class="ident" id="7868872">tt</span>&nbsp;<span class="op" id="7868875">:=</span>&nbsp;<span class="keyword" id="7868878">range</span>&nbsp;<span class="ident" id="7868884"><a href="/net/file_test.go.html#7867854">fileListenerTests</a></span>&nbsp;<span class="op" id="7868902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868906">if</span>&nbsp;<span class="ident" id="7868909"><a href="/net/server_test.go.html#7955175">skipServerTest</a></span><span class="op" id="7868923">(</span><span class="ident" id="7868924"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7868926">.</span><span class="ident" id="7868927">net</span><span class="op" id="7868930">,</span>&nbsp;<span class="string" id="7868932">&#34;unix&#34;</span><span class="op" id="7868938">,</span>&nbsp;<span class="ident" id="7868940"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7868942">.</span><span class="ident" id="7868943">laddr</span><span class="op" id="7868948">,</span>&nbsp;<span class="ident" id="7868950"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7868952">.</span><span class="ident" id="7868953">ipv6</span><span class="op" id="7868957">,</span>&nbsp;<span class="builtintype" id="7868959">false</span><span class="op" id="7868964">,</span>&nbsp;<span class="ident" id="7868966"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7868968">.</span><span class="ident" id="7868969">linux</span><span class="op" id="7868974">)</span>&nbsp;<span class="op" id="7868976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868981">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7868992">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7868996">if</span>&nbsp;<span class="ident" id="7868999"><a href="/net/server_test.go.html#7955175">skipServerTest</a></span><span class="op" id="7869013">(</span><span class="ident" id="7869014"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869016">.</span><span class="ident" id="7869017">net</span><span class="op" id="7869020">,</span>&nbsp;<span class="string" id="7869022">&#34;unixpacket&#34;</span><span class="op" id="7869034">,</span>&nbsp;<span class="ident" id="7869036"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869038">.</span><span class="ident" id="7869039">laddr</span><span class="op" id="7869044">,</span>&nbsp;<span class="ident" id="7869046"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869048">.</span><span class="ident" id="7869049">ipv6</span><span class="op" id="7869053">,</span>&nbsp;<span class="builtintype" id="7869055">false</span><span class="op" id="7869060">,</span>&nbsp;<span class="ident" id="7869062"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869064">.</span><span class="ident" id="7869065">linux</span><span class="op" id="7869070">)</span>&nbsp;<span class="op" id="7869072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869077">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869092"><a href="/net/file_test.go.html#7867159">testFileListener</a></span><span class="op" id="7869108">(</span><span class="ident" id="7869109"><a href="/net/file_test.go.html#7868749">t</a></span><span class="op" id="7869110">,</span>&nbsp;<span class="ident" id="7869112"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869114">.</span><span class="ident" id="7869115">net</span><span class="op" id="7869118">,</span>&nbsp;<span class="ident" id="7869120"><a href="/net/file_test.go.html#7868872">tt</a></span><span class="op" id="7869122">.</span><span class="ident" id="7869123">laddr</span><span class="op" id="7869128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869131">}</span><br>
<span class="lineno">105</span><span class="op" id="7869133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7869136">func</span>&nbsp;<span class="ident" id="7869141">testFilePacketConn</span><span class="op" id="7869159">(</span><span class="ident" id="7869160">t</span>&nbsp;<span class="op" id="7869162">*</span><span class="ident" id="7869163"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7869170">.</span><span class="ident" id="7869171">T</span><span class="op" id="7869172">,</span>&nbsp;<span class="ident" id="7869174">pcf</span>&nbsp;<span class="ident" id="7869178"><a href="/net/file_test.go.html#7867013">packetConnFile</a></span><span class="op" id="7869192">,</span>&nbsp;<span class="ident" id="7869194">listen</span>&nbsp;<span class="builtintype" id="7869201">bool</span><span class="op" id="7869205">)</span>&nbsp;<span class="op" id="7869207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869210">f</span><span class="op" id="7869211">,</span>&nbsp;<span class="ident" id="7869213">err</span>&nbsp;<span class="op" id="7869217">:=</span>&nbsp;<span class="ident" id="7869220"><a href="/net/file_test.go.html#7869174">pcf</a></span><span class="op" id="7869223">.</span><span class="ident" id="7869224">File</span><span class="op" id="7869228">(</span><span class="op" id="7869229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869232">if</span>&nbsp;<span class="ident" id="7869235"><a href="/net/file_test.go.html#7869213">err</a></span>&nbsp;<span class="op" id="7869239">!=</span>&nbsp;<span class="ident" id="7869242">nil</span>&nbsp;<span class="op" id="7869246">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869250"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869251">.</span><span class="ident" id="7869252">Fatalf</span><span class="op" id="7869258">(</span><span class="string" id="7869259">&#34;File&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7869276">,</span>&nbsp;<span class="ident" id="7869278"><a href="/net/file_test.go.html#7869213">err</a></span><span class="op" id="7869281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869287">c</span><span class="op" id="7869288">,</span>&nbsp;<span class="ident" id="7869290"><a href="/net/file_test.go.html#7869213">err</a></span>&nbsp;<span class="op" id="7869294">:=</span>&nbsp;<span class="ident" id="7869297"><a href="/net/file_unix.go.html#1403468">FilePacketConn</a></span><span class="op" id="7869311">(</span><span class="ident" id="7869312"><a href="/net/file_test.go.html#7869210">f</a></span><span class="op" id="7869313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869316">if</span>&nbsp;<span class="ident" id="7869319"><a href="/net/file_test.go.html#7869213">err</a></span>&nbsp;<span class="op" id="7869323">!=</span>&nbsp;<span class="ident" id="7869326">nil</span>&nbsp;<span class="op" id="7869330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869334"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869335">.</span><span class="ident" id="7869336">Fatalf</span><span class="op" id="7869342">(</span><span class="string" id="7869343">&#34;FilePacketConn&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7869370">,</span>&nbsp;<span class="ident" id="7869372"><a href="/net/file_test.go.html#7869213">err</a></span><span class="op" id="7869375">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869381">if</span>&nbsp;<span class="op" id="7869384">!</span><span class="ident" id="7869385"><a href="/net/file_test.go.html#7866898">reflect</a></span><span class="op" id="7869392">.</span><span class="ident" id="7869393">DeepEqual</span><span class="op" id="7869402">(</span><span class="ident" id="7869403"><a href="/net/file_test.go.html#7869174">pcf</a></span><span class="op" id="7869406">.</span><span class="ident" id="7869407">LocalAddr</span><span class="op" id="7869416">(</span><span class="op" id="7869417">)</span><span class="op" id="7869418">,</span>&nbsp;<span class="ident" id="7869420"><a href="/net/file_test.go.html#7869287">c</a></span><span class="op" id="7869421">.</span><span class="ident" id="7869422">LocalAddr</span><span class="op" id="7869431">(</span><span class="op" id="7869432">)</span><span class="op" id="7869433">)</span>&nbsp;<span class="op" id="7869435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869439"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869440">.</span><span class="ident" id="7869441">Fatalf</span><span class="op" id="7869447">(</span><span class="string" id="7869448">&#34;LocalAddrs&nbsp;not&nbsp;equal:&nbsp;%#v&nbsp;!=&nbsp;%#v&#34;</span><span class="op" id="7869482">,</span>&nbsp;<span class="ident" id="7869484"><a href="/net/file_test.go.html#7869174">pcf</a></span><span class="op" id="7869487">.</span><span class="ident" id="7869488">LocalAddr</span><span class="op" id="7869497">(</span><span class="op" id="7869498">)</span><span class="op" id="7869499">,</span>&nbsp;<span class="ident" id="7869501"><a href="/net/file_test.go.html#7869287">c</a></span><span class="op" id="7869502">.</span><span class="ident" id="7869503">LocalAddr</span><span class="op" id="7869512">(</span><span class="op" id="7869513">)</span><span class="op" id="7869514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869520">if</span>&nbsp;<span class="ident" id="7869523"><a href="/net/file_test.go.html#7869194">listen</a></span>&nbsp;<span class="op" id="7869530">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869534">if</span>&nbsp;<span class="ident" id="7869537">_</span><span class="op" id="7869538">,</span>&nbsp;<span class="ident" id="7869540">err</span>&nbsp;<span class="op" id="7869544">:=</span>&nbsp;<span class="ident" id="7869547"><a href="/net/file_test.go.html#7869287">c</a></span><span class="op" id="7869548">.</span><span class="ident" id="7869549">WriteTo</span><span class="op" id="7869556">(</span><span class="op" id="7869557">[</span><span class="op" id="7869558">]</span><span class="builtintype" id="7869559">byte</span><span class="op" id="7869563">{</span><span class="op" id="7869564">}</span><span class="op" id="7869565">,</span>&nbsp;<span class="ident" id="7869567"><a href="/net/file_test.go.html#7869287">c</a></span><span class="op" id="7869568">.</span><span class="ident" id="7869569">LocalAddr</span><span class="op" id="7869578">(</span><span class="op" id="7869579">)</span><span class="op" id="7869580">)</span><span class="op" id="7869581">;</span>&nbsp;<span class="ident" id="7869583"><a href="/net/file_test.go.html#7869540">err</a></span>&nbsp;<span class="op" id="7869587">!=</span>&nbsp;<span class="ident" id="7869590">nil</span>&nbsp;<span class="op" id="7869594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869599"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869600">.</span><span class="ident" id="7869601">Fatalf</span><span class="op" id="7869607">(</span><span class="string" id="7869608">&#34;WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7869628">,</span>&nbsp;<span class="ident" id="7869630"><a href="/net/file_test.go.html#7869540">err</a></span><span class="op" id="7869633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869643">if</span>&nbsp;<span class="ident" id="7869646">err</span>&nbsp;<span class="op" id="7869650">:=</span>&nbsp;<span class="ident" id="7869653"><a href="/net/file_test.go.html#7869287">c</a></span><span class="op" id="7869654">.</span><span class="ident" id="7869655">Close</span><span class="op" id="7869660">(</span><span class="op" id="7869661">)</span><span class="op" id="7869662">;</span>&nbsp;<span class="ident" id="7869664"><a href="/net/file_test.go.html#7869646">err</a></span>&nbsp;<span class="op" id="7869668">!=</span>&nbsp;<span class="ident" id="7869671">nil</span>&nbsp;<span class="op" id="7869675">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869679"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869680">.</span><span class="ident" id="7869681">Fatalf</span><span class="op" id="7869687">(</span><span class="string" id="7869688">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7869706">,</span>&nbsp;<span class="ident" id="7869708"><a href="/net/file_test.go.html#7869646">err</a></span><span class="op" id="7869711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869717">if</span>&nbsp;<span class="ident" id="7869720">err</span>&nbsp;<span class="op" id="7869724">:=</span>&nbsp;<span class="ident" id="7869727"><a href="/net/file_test.go.html#7869210">f</a></span><span class="op" id="7869728">.</span><span class="ident" id="7869729">Close</span><span class="op" id="7869734">(</span><span class="op" id="7869735">)</span><span class="op" id="7869736">;</span>&nbsp;<span class="ident" id="7869738"><a href="/net/file_test.go.html#7869720">err</a></span>&nbsp;<span class="op" id="7869742">!=</span>&nbsp;<span class="ident" id="7869745">nil</span>&nbsp;<span class="op" id="7869749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869753"><a href="/net/file_test.go.html#7869160">t</a></span><span class="op" id="7869754">.</span><span class="ident" id="7869755">Fatalf</span><span class="op" id="7869761">(</span><span class="string" id="7869762">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7869780">,</span>&nbsp;<span class="ident" id="7869782"><a href="/net/file_test.go.html#7869720">err</a></span><span class="op" id="7869785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869788">}</span><br>
<span class="lineno">130</span><span class="op" id="7869790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7869793">func</span>&nbsp;<span class="ident" id="7869798">testFilePacketConnListen</span><span class="op" id="7869822">(</span><span class="ident" id="7869823">t</span>&nbsp;<span class="op" id="7869825">*</span><span class="ident" id="7869826"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7869833">.</span><span class="ident" id="7869834">T</span><span class="op" id="7869835">,</span>&nbsp;<span class="ident" id="7869837">net</span><span class="op" id="7869840">,</span>&nbsp;<span class="ident" id="7869842">laddr</span>&nbsp;<span class="builtintype" id="7869848">string</span><span class="op" id="7869854">)</span>&nbsp;<span class="op" id="7869856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869859">switch</span>&nbsp;<span class="ident" id="7869866"><a href="/net/file_test.go.html#7869837">net</a></span>&nbsp;<span class="op" id="7869870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869873">case</span>&nbsp;<span class="string" id="7869878">&#34;udp&#34;</span><span class="op" id="7869883">,</span>&nbsp;<span class="string" id="7869885">&#34;udp4&#34;</span><span class="op" id="7869891">,</span>&nbsp;<span class="string" id="7869893">&#34;udp6&#34;</span><span class="op" id="7869899">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869903"><a href="/net/file_test.go.html#7869842">laddr</a></span>&nbsp;<span class="op" id="7869909">+=</span>&nbsp;<span class="string" id="7869912">&#34;:0&#34;</span>&nbsp;<span class="comment" id="7869917">//&nbsp;any&nbsp;available&nbsp;port</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7869940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869943">l</span><span class="op" id="7869944">,</span>&nbsp;<span class="ident" id="7869946">err</span>&nbsp;<span class="op" id="7869950">:=</span>&nbsp;<span class="ident" id="7869953"><a href="/net/dial.go.html#1338827">ListenPacket</a></span><span class="op" id="7869965">(</span><span class="ident" id="7869966"><a href="/net/file_test.go.html#7869837">net</a></span><span class="op" id="7869969">,</span>&nbsp;<span class="ident" id="7869971"><a href="/net/file_test.go.html#7869842">laddr</a></span><span class="op" id="7869976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7869979">if</span>&nbsp;<span class="ident" id="7869982"><a href="/net/file_test.go.html#7869946">err</a></span>&nbsp;<span class="op" id="7869986">!=</span>&nbsp;<span class="ident" id="7869989">nil</span>&nbsp;<span class="op" id="7869993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7869997"><a href="/net/file_test.go.html#7869823">t</a></span><span class="op" id="7869998">.</span><span class="ident" id="7869999">Fatalf</span><span class="op" id="7870005">(</span><span class="string" id="7870006">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7870031">,</span>&nbsp;<span class="ident" id="7870033"><a href="/net/file_test.go.html#7869946">err</a></span><span class="op" id="7870036">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870042"><a href="/net/file_test.go.html#7869141">testFilePacketConn</a></span><span class="op" id="7870060">(</span><span class="ident" id="7870061"><a href="/net/file_test.go.html#7869823">t</a></span><span class="op" id="7870062">,</span>&nbsp;<span class="ident" id="7870064"><a href="/net/file_test.go.html#7869943">l</a></span><span class="op" id="7870065">.</span><span class="op" id="7870066">(</span><span class="ident" id="7870067"><a href="/net/file_test.go.html#7867013">packetConnFile</a></span><span class="op" id="7870081">)</span><span class="op" id="7870082">,</span>&nbsp;<span class="builtintype" id="7870084">true</span><span class="op" id="7870088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870091">if</span>&nbsp;<span class="ident" id="7870094">err</span>&nbsp;<span class="op" id="7870098">:=</span>&nbsp;<span class="ident" id="7870101"><a href="/net/file_test.go.html#7869943">l</a></span><span class="op" id="7870102">.</span><span class="ident" id="7870103">Close</span><span class="op" id="7870108">(</span><span class="op" id="7870109">)</span><span class="op" id="7870110">;</span>&nbsp;<span class="ident" id="7870112"><a href="/net/file_test.go.html#7870094">err</a></span>&nbsp;<span class="op" id="7870116">!=</span>&nbsp;<span class="ident" id="7870119">nil</span>&nbsp;<span class="op" id="7870123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870127"><a href="/net/file_test.go.html#7869823">t</a></span><span class="op" id="7870128">.</span><span class="ident" id="7870129">Fatalf</span><span class="op" id="7870135">(</span><span class="string" id="7870136">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7870154">,</span>&nbsp;<span class="ident" id="7870156"><a href="/net/file_test.go.html#7870094">err</a></span><span class="op" id="7870159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870162">}</span><br>
<span class="lineno">145</span><span class="op" id="7870164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870167">func</span>&nbsp;<span class="ident" id="7870172">testFilePacketConnDial</span><span class="op" id="7870194">(</span><span class="ident" id="7870195">t</span>&nbsp;<span class="op" id="7870197">*</span><span class="ident" id="7870198"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7870205">.</span><span class="ident" id="7870206">T</span><span class="op" id="7870207">,</span>&nbsp;<span class="ident" id="7870209">net</span><span class="op" id="7870212">,</span>&nbsp;<span class="ident" id="7870214">raddr</span>&nbsp;<span class="builtintype" id="7870220">string</span><span class="op" id="7870226">)</span>&nbsp;<span class="op" id="7870228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870231">switch</span>&nbsp;<span class="ident" id="7870238"><a href="/net/file_test.go.html#7870209">net</a></span>&nbsp;<span class="op" id="7870242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870245">case</span>&nbsp;<span class="string" id="7870250">&#34;udp&#34;</span><span class="op" id="7870255">,</span>&nbsp;<span class="string" id="7870257">&#34;udp4&#34;</span><span class="op" id="7870263">,</span>&nbsp;<span class="string" id="7870265">&#34;udp6&#34;</span><span class="op" id="7870271">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870275"><a href="/net/file_test.go.html#7870214">raddr</a></span>&nbsp;<span class="op" id="7870281">+=</span>&nbsp;<span class="string" id="7870284">&#34;:12345&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870297">c</span><span class="op" id="7870298">,</span>&nbsp;<span class="ident" id="7870300">err</span>&nbsp;<span class="op" id="7870304">:=</span>&nbsp;<span class="ident" id="7870307"><a href="/net/dial.go.html#1334377">Dial</a></span><span class="op" id="7870311">(</span><span class="ident" id="7870312"><a href="/net/file_test.go.html#7870209">net</a></span><span class="op" id="7870315">,</span>&nbsp;<span class="ident" id="7870317"><a href="/net/file_test.go.html#7870214">raddr</a></span><span class="op" id="7870322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870325">if</span>&nbsp;<span class="ident" id="7870328"><a href="/net/file_test.go.html#7870300">err</a></span>&nbsp;<span class="op" id="7870332">!=</span>&nbsp;<span class="ident" id="7870335">nil</span>&nbsp;<span class="op" id="7870339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870343"><a href="/net/file_test.go.html#7870195">t</a></span><span class="op" id="7870344">.</span><span class="ident" id="7870345">Fatalf</span><span class="op" id="7870351">(</span><span class="string" id="7870352">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7870369">,</span>&nbsp;<span class="ident" id="7870371"><a href="/net/file_test.go.html#7870300">err</a></span><span class="op" id="7870374">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870380"><a href="/net/file_test.go.html#7869141">testFilePacketConn</a></span><span class="op" id="7870398">(</span><span class="ident" id="7870399"><a href="/net/file_test.go.html#7870195">t</a></span><span class="op" id="7870400">,</span>&nbsp;<span class="ident" id="7870402"><a href="/net/file_test.go.html#7870297">c</a></span><span class="op" id="7870403">.</span><span class="op" id="7870404">(</span><span class="ident" id="7870405"><a href="/net/file_test.go.html#7867013">packetConnFile</a></span><span class="op" id="7870419">)</span><span class="op" id="7870420">,</span>&nbsp;<span class="builtintype" id="7870422">false</span><span class="op" id="7870427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7870430">if</span>&nbsp;<span class="ident" id="7870433">err</span>&nbsp;<span class="op" id="7870437">:=</span>&nbsp;<span class="ident" id="7870440"><a href="/net/file_test.go.html#7870297">c</a></span><span class="op" id="7870441">.</span><span class="ident" id="7870442">Close</span><span class="op" id="7870447">(</span><span class="op" id="7870448">)</span><span class="op" id="7870449">;</span>&nbsp;<span class="ident" id="7870451"><a href="/net/file_test.go.html#7870433">err</a></span>&nbsp;<span class="op" id="7870455">!=</span>&nbsp;<span class="ident" id="7870458">nil</span>&nbsp;<span class="op" id="7870462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870466"><a href="/net/file_test.go.html#7870195">t</a></span><span class="op" id="7870467">.</span><span class="ident" id="7870468">Fatalf</span><span class="op" id="7870474">(</span><span class="string" id="7870475">&#34;Close&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7870493">,</span>&nbsp;<span class="ident" id="7870495"><a href="/net/file_test.go.html#7870433">err</a></span><span class="op" id="7870498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870501">}</span><br>
<span class="lineno">160</span><span class="op" id="7870503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870506">var</span>&nbsp;<span class="ident" id="7870510">filePacketConnTests</span>&nbsp;<span class="op" id="7870530">=</span>&nbsp;<span class="op" id="7870532">[</span><span class="op" id="7870533">]</span><span class="keyword" id="7870534">struct</span>&nbsp;<span class="op" id="7870541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870544">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7870550">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870558">addr</span>&nbsp;&nbsp;<span class="builtintype" id="7870564">string</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870572">ipv6</span>&nbsp;&nbsp;<span class="builtintype" id="7870578">bool</span>&nbsp;<span class="comment" id="7870583">//&nbsp;test&nbsp;with&nbsp;underlying&nbsp;AF_INET6&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7870624">linux</span>&nbsp;<span class="builtintype" id="7870630">bool</span>&nbsp;<span class="comment" id="7870635">//&nbsp;test&nbsp;with&nbsp;abstract&nbsp;unix&nbsp;domain&nbsp;socket,&nbsp;a&nbsp;Linux-ism</span><br>
<span class="lineno"></span><span class="op" id="7870689">}</span><span class="op" id="7870690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870693">{</span><span class="ident" id="7870694">net</span><span class="op" id="7870697">:</span>&nbsp;<span class="string" id="7870699">&#34;udp&#34;</span><span class="op" id="7870704">,</span>&nbsp;<span class="ident" id="7870706">addr</span><span class="op" id="7870710">:</span>&nbsp;<span class="string" id="7870712">&#34;127.0.0.1&#34;</span><span class="op" id="7870723">}</span><span class="op" id="7870724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870727">{</span><span class="ident" id="7870728">net</span><span class="op" id="7870731">:</span>&nbsp;<span class="string" id="7870733">&#34;udp&#34;</span><span class="op" id="7870738">,</span>&nbsp;<span class="ident" id="7870740">addr</span><span class="op" id="7870744">:</span>&nbsp;<span class="string" id="7870746">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7870766">}</span><span class="op" id="7870767">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870770">{</span><span class="ident" id="7870771">net</span><span class="op" id="7870774">:</span>&nbsp;<span class="string" id="7870776">&#34;udp&#34;</span><span class="op" id="7870781">,</span>&nbsp;<span class="ident" id="7870783">addr</span><span class="op" id="7870787">:</span>&nbsp;<span class="string" id="7870789">&#34;[::1]&#34;</span><span class="op" id="7870796">,</span>&nbsp;<span class="ident" id="7870798">ipv6</span><span class="op" id="7870802">:</span>&nbsp;<span class="builtintype" id="7870804">true</span><span class="op" id="7870808">}</span><span class="op" id="7870809">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870813">{</span><span class="ident" id="7870814">net</span><span class="op" id="7870817">:</span>&nbsp;<span class="string" id="7870819">&#34;udp4&#34;</span><span class="op" id="7870825">,</span>&nbsp;<span class="ident" id="7870827">addr</span><span class="op" id="7870831">:</span>&nbsp;<span class="string" id="7870833">&#34;127.0.0.1&#34;</span><span class="op" id="7870844">}</span><span class="op" id="7870845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870848">{</span><span class="ident" id="7870849">net</span><span class="op" id="7870852">:</span>&nbsp;<span class="string" id="7870854">&#34;udp4&#34;</span><span class="op" id="7870860">,</span>&nbsp;<span class="ident" id="7870862">addr</span><span class="op" id="7870866">:</span>&nbsp;<span class="string" id="7870868">&#34;[::ffff:127.0.0.1]&#34;</span><span class="op" id="7870888">}</span><span class="op" id="7870889">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870893">{</span><span class="ident" id="7870894">net</span><span class="op" id="7870897">:</span>&nbsp;<span class="string" id="7870899">&#34;udp6&#34;</span><span class="op" id="7870905">,</span>&nbsp;<span class="ident" id="7870907">addr</span><span class="op" id="7870911">:</span>&nbsp;<span class="string" id="7870913">&#34;[::1]&#34;</span><span class="op" id="7870920">,</span>&nbsp;<span class="ident" id="7870922">ipv6</span><span class="op" id="7870926">:</span>&nbsp;<span class="builtintype" id="7870928">true</span><span class="op" id="7870932">}</span><span class="op" id="7870933">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870937">{</span><span class="ident" id="7870938">net</span><span class="op" id="7870941">:</span>&nbsp;<span class="string" id="7870943">&#34;ip4:icmp&#34;</span><span class="op" id="7870953">,</span>&nbsp;<span class="ident" id="7870955">addr</span><span class="op" id="7870959">:</span>&nbsp;<span class="string" id="7870961">&#34;127.0.0.1&#34;</span><span class="op" id="7870972">}</span><span class="op" id="7870973">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7870977">{</span><span class="ident" id="7870978">net</span><span class="op" id="7870981">:</span>&nbsp;<span class="string" id="7870983">&#34;unixgram&#34;</span><span class="op" id="7870993">,</span>&nbsp;<span class="ident" id="7870995">addr</span><span class="op" id="7870999">:</span>&nbsp;<span class="string" id="7871001">&#34;@gotest3/net&#34;</span><span class="op" id="7871015">,</span>&nbsp;<span class="ident" id="7871017">linux</span><span class="op" id="7871022">:</span>&nbsp;<span class="builtintype" id="7871024">true</span><span class="op" id="7871028">}</span><span class="op" id="7871029">,</span><br>
<span class="lineno">180</span><span class="op" id="7871031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871034">func</span>&nbsp;<span class="ident" id="7871039">TestFilePacketConn</span><span class="op" id="7871057">(</span><span class="ident" id="7871058">t</span>&nbsp;<span class="op" id="7871060">*</span><span class="ident" id="7871061"><a href="/net/file_test.go.html#7866920">testing</a></span><span class="op" id="7871068">.</span><span class="ident" id="7871069">T</span><span class="op" id="7871070">)</span>&nbsp;<span class="op" id="7871072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871075">switch</span>&nbsp;<span class="ident" id="7871082"><a href="/net/file_test.go.html#7866909">runtime</a></span><span class="op" id="7871089">.</span><span class="ident" id="7871090">GOOS</span>&nbsp;<span class="op" id="7871095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871098">case</span>&nbsp;<span class="string" id="7871103">&#34;nacl&#34;</span><span class="op" id="7871109">,</span>&nbsp;<span class="string" id="7871111">&#34;plan9&#34;</span><span class="op" id="7871118">,</span>&nbsp;<span class="string" id="7871120">&#34;windows&#34;</span><span class="op" id="7871129">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871133"><a href="/net/file_test.go.html#7871058">t</a></span><span class="op" id="7871134">.</span><span class="ident" id="7871135">Skipf</span><span class="op" id="7871140">(</span><span class="string" id="7871141">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7871162">,</span>&nbsp;<span class="ident" id="7871164"><a href="/net/file_test.go.html#7866909">runtime</a></span><span class="op" id="7871171">.</span><span class="ident" id="7871172">GOOS</span><span class="op" id="7871176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871183">for</span>&nbsp;<span class="ident" id="7871187">_</span><span class="op" id="7871188">,</span>&nbsp;<span class="ident" id="7871190">tt</span>&nbsp;<span class="op" id="7871193">:=</span>&nbsp;<span class="keyword" id="7871196">range</span>&nbsp;<span class="ident" id="7871202"><a href="/net/file_test.go.html#7870510">filePacketConnTests</a></span>&nbsp;<span class="op" id="7871222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871226">if</span>&nbsp;<span class="ident" id="7871229"><a href="/net/server_test.go.html#7955175">skipServerTest</a></span><span class="op" id="7871243">(</span><span class="ident" id="7871244"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871246">.</span><span class="ident" id="7871247">net</span><span class="op" id="7871250">,</span>&nbsp;<span class="string" id="7871252">&#34;unixgram&#34;</span><span class="op" id="7871262">,</span>&nbsp;<span class="ident" id="7871264"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871266">.</span><span class="ident" id="7871267">addr</span><span class="op" id="7871271">,</span>&nbsp;<span class="ident" id="7871273"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871275">.</span><span class="ident" id="7871276">ipv6</span><span class="op" id="7871280">,</span>&nbsp;<span class="builtintype" id="7871282">false</span><span class="op" id="7871287">,</span>&nbsp;<span class="ident" id="7871289"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871291">.</span><span class="ident" id="7871292">linux</span><span class="op" id="7871297">)</span>&nbsp;<span class="op" id="7871299">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871304">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871319">if</span>&nbsp;<span class="ident" id="7871322"><a href="/net/file_test.go.html#7866892">os</a></span><span class="op" id="7871324">.</span><span class="ident" id="7871325">Getuid</span><span class="op" id="7871331">(</span><span class="op" id="7871332">)</span>&nbsp;<span class="op" id="7871334">!=</span>&nbsp;<span class="num" id="7871337">0</span>&nbsp;<span class="op" id="7871339">&amp;&amp;</span>&nbsp;<span class="ident" id="7871342"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871344">.</span><span class="ident" id="7871345">net</span>&nbsp;<span class="op" id="7871349">==</span>&nbsp;<span class="string" id="7871352">&#34;ip4:icmp&#34;</span>&nbsp;<span class="op" id="7871363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871368"><a href="/net/file_test.go.html#7871058">t</a></span><span class="op" id="7871369">.</span><span class="ident" id="7871370">Log</span><span class="op" id="7871373">(</span><span class="string" id="7871374">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="7871403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871408">continue</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871423"><a href="/net/file_test.go.html#7869798">testFilePacketConnListen</a></span><span class="op" id="7871447">(</span><span class="ident" id="7871448"><a href="/net/file_test.go.html#7871058">t</a></span><span class="op" id="7871449">,</span>&nbsp;<span class="ident" id="7871451"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871453">.</span><span class="ident" id="7871454">net</span><span class="op" id="7871457">,</span>&nbsp;<span class="ident" id="7871459"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871461">.</span><span class="ident" id="7871462">addr</span><span class="op" id="7871466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871470">switch</span>&nbsp;<span class="ident" id="7871477"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871479">.</span><span class="ident" id="7871480">addr</span>&nbsp;<span class="op" id="7871485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871489">case</span>&nbsp;<span class="string" id="7871494">&#34;&#34;</span><span class="op" id="7871496">,</span>&nbsp;<span class="string" id="7871498">&#34;0.0.0.0&#34;</span><span class="op" id="7871507">,</span>&nbsp;<span class="string" id="7871509">&#34;[::ffff:0.0.0.0]&#34;</span><span class="op" id="7871527">,</span>&nbsp;<span class="string" id="7871529">&#34;[::]&#34;</span><span class="op" id="7871535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871539">default</span><span class="op" id="7871546">:</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7871551">if</span>&nbsp;<span class="ident" id="7871554"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871556">.</span><span class="ident" id="7871557">net</span>&nbsp;<span class="op" id="7871561">!=</span>&nbsp;<span class="string" id="7871564">&#34;unixgram&#34;</span>&nbsp;<span class="op" id="7871575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7871581"><a href="/net/file_test.go.html#7870172">testFilePacketConnDial</a></span><span class="op" id="7871603">(</span><span class="ident" id="7871604"><a href="/net/file_test.go.html#7871058">t</a></span><span class="op" id="7871605">,</span>&nbsp;<span class="ident" id="7871607"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871609">.</span><span class="ident" id="7871610">net</span><span class="op" id="7871613">,</span>&nbsp;<span class="ident" id="7871615"><a href="/net/file_test.go.html#7871190">tt</a></span><span class="op" id="7871617">.</span><span class="ident" id="7871618">addr</span><span class="op" id="7871622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7871634">}</span><br>
<span class="lineno">205</span><span class="op" id="7871636">}</span>
</div>
</body>
</html>
