<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3357643">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3357698">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3357752">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3357803">/*<br>
<span class="lineno"></span>Package&nbsp;net&nbsp;provides&nbsp;a&nbsp;portable&nbsp;interface&nbsp;for&nbsp;network&nbsp;I/O,&nbsp;including<br>
<span class="lineno"></span>TCP/IP,&nbsp;UDP,&nbsp;domain&nbsp;name&nbsp;resolution,&nbsp;and&nbsp;Unix&nbsp;domain&nbsp;sockets.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Although&nbsp;the&nbsp;package&nbsp;provides&nbsp;access&nbsp;to&nbsp;low-level&nbsp;networking<br>
<span class="lineno">10</span>primitives,&nbsp;most&nbsp;clients&nbsp;will&nbsp;need&nbsp;only&nbsp;the&nbsp;basic&nbsp;interface&nbsp;provided<br>
<span class="lineno"></span>by&nbsp;the&nbsp;Dial,&nbsp;Listen,&nbsp;and&nbsp;Accept&nbsp;functions&nbsp;and&nbsp;the&nbsp;associated<br>
<span class="lineno"></span>Conn&nbsp;and&nbsp;Listener&nbsp;interfaces.&nbsp;The&nbsp;crypto/tls&nbsp;package&nbsp;uses<br>
<span class="lineno"></span>the&nbsp;same&nbsp;interfaces&nbsp;and&nbsp;similar&nbsp;Dial&nbsp;and&nbsp;Listen&nbsp;functions.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>The&nbsp;Dial&nbsp;function&nbsp;connects&nbsp;to&nbsp;a&nbsp;server:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspconn,&nbsp;err&nbsp;:=&nbsp;net.Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:80&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfmt.Fprintf(conn,&nbsp;&#34;GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspstatus,&nbsp;err&nbsp;:=&nbsp;bufio.NewReader(conn).ReadString(&#39;\n&#39;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;...<br>
<span class="lineno"></span><br>
<span class="lineno">25</span>The&nbsp;Listen&nbsp;function&nbsp;creates&nbsp;servers:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspln,&nbsp;err&nbsp;:=&nbsp;net.Listen(&#34;tcp&#34;,&nbsp;&#34;:8080&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspconn,&nbsp;err&nbsp;:=&nbsp;ln.Accept()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;handle&nbsp;error<br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspgo&nbsp;handleConnection(conn)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp}<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3358706">package</span>&nbsp;<span class="ident" id="3358714">net</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="3358719">//&nbsp;TODO(rsc):</span><br>
<span class="lineno"></span><span class="comment" id="3358733">//&nbsp;&nbsp;&nbsp;&nbspsupport&nbsp;for&nbsp;raw&nbsp;ethernet&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3358770">import</span>&nbsp;<span class="op" id="3358777">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3358780">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3358790">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3358796">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3358802">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3358813">&#34;time&#34;</span><br>
<span class="lineno">50</span><span class="op" id="3358820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358823">//&nbsp;Addr&nbsp;represents&nbsp;a&nbsp;network&nbsp;end&nbsp;point&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3358871">type</span>&nbsp;<span class="ident" id="3358876">Addr</span>&nbsp;<span class="keyword" id="3358881">interface</span>&nbsp;<span class="op" id="3358891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358894">Network</span><span class="op" id="3358901">(</span><span class="op" id="3358902">)</span>&nbsp;<span class="builtintype" id="3358904">string</span>&nbsp;<span class="comment" id="3358911">//&nbsp;name&nbsp;of&nbsp;the&nbsp;network</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358935">String</span><span class="op" id="3358941">(</span><span class="op" id="3358942">)</span>&nbsp;<span class="builtintype" id="3358944">string</span>&nbsp;&nbsp;<span class="comment" id="3358952">//&nbsp;string&nbsp;form&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span><span class="op" id="3358978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358981">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;generic&nbsp;stream-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3359038">//</span><br>
<span class="lineno">60</span><span class="comment" id="3359041">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Conn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3359109">type</span>&nbsp;<span class="ident" id="3359114">Conn</span>&nbsp;<span class="keyword" id="3359119">interface</span>&nbsp;<span class="op" id="3359129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359132">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359173">//&nbsp;Read&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359248">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359315">Read</span><span class="op" id="3359319">(</span><span class="ident" id="3359320">b</span>&nbsp;<span class="op" id="3359322">[</span><span class="op" id="3359323">]</span><span class="builtintype" id="3359324">byte</span><span class="op" id="3359328">)</span>&nbsp;<span class="op" id="3359330">(</span><span class="ident" id="3359331">n</span>&nbsp;<span class="builtintype" id="3359333">int</span><span class="op" id="3359336">,</span>&nbsp;<span class="ident" id="3359338">err</span>&nbsp;<span class="builtintype" id="3359342">error</span><span class="op" id="3359347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359351">//&nbsp;Write&nbsp;writes&nbsp;data&nbsp;to&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359392">//&nbsp;Write&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359468">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359536">Write</span><span class="op" id="3359541">(</span><span class="ident" id="3359542">b</span>&nbsp;<span class="op" id="3359544">[</span><span class="op" id="3359545">]</span><span class="builtintype" id="3359546">byte</span><span class="op" id="3359550">)</span>&nbsp;<span class="op" id="3359552">(</span><span class="ident" id="3359553">n</span>&nbsp;<span class="builtintype" id="3359555">int</span><span class="op" id="3359558">,</span>&nbsp;<span class="ident" id="3359560">err</span>&nbsp;<span class="builtintype" id="3359564">error</span><span class="op" id="3359569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359573">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359606">//&nbsp;Any&nbsp;blocked&nbsp;Read&nbsp;or&nbsp;Write&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359684">Close</span><span class="op" id="3359689">(</span><span class="op" id="3359690">)</span>&nbsp;<span class="builtintype" id="3359692">error</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359700">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359749">LocalAddr</span><span class="op" id="3359758">(</span><span class="op" id="3359759">)</span>&nbsp;<span class="ident" id="3359761">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359768">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359819">RemoteAddr</span><span class="op" id="3359829">(</span><span class="op" id="3359830">)</span>&nbsp;<span class="ident" id="3359832">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359839">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359900">//&nbsp;with&nbsp;the&nbsp;connection.&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3359958">//&nbsp;SetReadDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360000">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360004">//&nbsp;A&nbsp;deadline&nbsp;is&nbsp;an&nbsp;absolute&nbsp;time&nbsp;after&nbsp;which&nbsp;I/O&nbsp;operations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360066">//&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360118">//&nbsp;blocking.&nbsp;The&nbsp;deadline&nbsp;applies&nbsp;to&nbsp;all&nbsp;future&nbsp;I/O,&nbsp;not&nbsp;just</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360181">//&nbsp;the&nbsp;immediately&nbsp;following&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;Write.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360234">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360238">//&nbsp;An&nbsp;idle&nbsp;timeout&nbsp;can&nbsp;be&nbsp;implemented&nbsp;by&nbsp;repeatedly&nbsp;extending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360301">//&nbsp;the&nbsp;deadline&nbsp;after&nbsp;successful&nbsp;Read&nbsp;or&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360356">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360360">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;I/O&nbsp;operations&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360423">SetDeadline</span><span class="op" id="3360434">(</span><span class="ident" id="3360435">t</span>&nbsp;<span class="ident" id="3360437">time</span><span class="op" id="3360441">.</span><span class="ident" id="3360442">Time</span><span class="op" id="3360446">)</span>&nbsp;<span class="builtintype" id="3360448">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360456">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360517">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360570">SetReadDeadline</span><span class="op" id="3360585">(</span><span class="ident" id="3360586">t</span>&nbsp;<span class="ident" id="3360588">time</span><span class="op" id="3360592">.</span><span class="ident" id="3360593">Time</span><span class="op" id="3360597">)</span>&nbsp;<span class="builtintype" id="3360599">error</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360607">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360670">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360736">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3360783">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360837">SetWriteDeadline</span><span class="op" id="3360853">(</span><span class="ident" id="3360854">t</span>&nbsp;<span class="ident" id="3360856">time</span><span class="op" id="3360860">.</span><span class="ident" id="3360861">Time</span><span class="op" id="3360865">)</span>&nbsp;<span class="builtintype" id="3360867">error</span><br>
<span class="lineno"></span><span class="op" id="3360873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3360876">type</span>&nbsp;<span class="ident" id="3360881">conn</span>&nbsp;<span class="keyword" id="3360886">struct</span>&nbsp;<span class="op" id="3360893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360896">fd</span>&nbsp;<span class="op" id="3360899">*</span><span class="ident" id="3360900">netFD</span><br>
<span class="lineno">110</span><span class="op" id="3360906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3360909">func</span>&nbsp;<span class="op" id="3360914">(</span><span class="ident" id="3360915">c</span>&nbsp;<span class="op" id="3360917">*</span><span class="ident" id="3360918">conn</span><span class="op" id="3360922">)</span>&nbsp;<span class="ident" id="3360924">ok</span><span class="op" id="3360926">(</span><span class="op" id="3360927">)</span>&nbsp;<span class="builtintype" id="3360929">bool</span>&nbsp;<span class="op" id="3360934">{</span>&nbsp;<span class="keyword" id="3360936">return</span>&nbsp;<span class="ident" id="3360943">c</span>&nbsp;<span class="op" id="3360945">!=</span>&nbsp;<span class="ident" id="3360948">nil</span>&nbsp;<span class="op" id="3360952">&amp;&amp;</span>&nbsp;<span class="ident" id="3360955">c</span><span class="op" id="3360956">.</span><span class="ident" id="3360957">fd</span>&nbsp;<span class="op" id="3360960">!=</span>&nbsp;<span class="ident" id="3360963">nil</span>&nbsp;<span class="op" id="3360967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3360970">//&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3361012">//&nbsp;Read&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3361053">func</span>&nbsp;<span class="op" id="3361058">(</span><span class="ident" id="3361059">c</span>&nbsp;<span class="op" id="3361061">*</span><span class="ident" id="3361062">conn</span><span class="op" id="3361066">)</span>&nbsp;<span class="ident" id="3361068">Read</span><span class="op" id="3361072">(</span><span class="ident" id="3361073">b</span>&nbsp;<span class="op" id="3361075">[</span><span class="op" id="3361076">]</span><span class="builtintype" id="3361077">byte</span><span class="op" id="3361081">)</span>&nbsp;<span class="op" id="3361083">(</span><span class="builtintype" id="3361084">int</span><span class="op" id="3361087">,</span>&nbsp;<span class="builtintype" id="3361089">error</span><span class="op" id="3361094">)</span>&nbsp;<span class="op" id="3361096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361099">if</span>&nbsp;<span class="op" id="3361102">!</span><span class="ident" id="3361103">c</span><span class="op" id="3361104">.</span><span class="ident" id="3361105">ok</span><span class="op" id="3361107">(</span><span class="op" id="3361108">)</span>&nbsp;<span class="op" id="3361110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361114">return</span>&nbsp;<span class="num" id="3361121">0</span><span class="op" id="3361122">,</span>&nbsp;<span class="ident" id="3361124">syscall</span><span class="op" id="3361131">.</span><span class="ident" id="3361132">EINVAL</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361143">return</span>&nbsp;<span class="ident" id="3361150">c</span><span class="op" id="3361151">.</span><span class="ident" id="3361152">fd</span><span class="op" id="3361154">.</span><span class="ident" id="3361155">Read</span><span class="op" id="3361159">(</span><span class="ident" id="3361160">b</span><span class="op" id="3361161">)</span><br>
<span class="lineno"></span><span class="op" id="3361163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3361166">//&nbsp;Write&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">125</span><span class="keyword" id="3361209">func</span>&nbsp;<span class="op" id="3361214">(</span><span class="ident" id="3361215">c</span>&nbsp;<span class="op" id="3361217">*</span><span class="ident" id="3361218">conn</span><span class="op" id="3361222">)</span>&nbsp;<span class="ident" id="3361224">Write</span><span class="op" id="3361229">(</span><span class="ident" id="3361230">b</span>&nbsp;<span class="op" id="3361232">[</span><span class="op" id="3361233">]</span><span class="builtintype" id="3361234">byte</span><span class="op" id="3361238">)</span>&nbsp;<span class="op" id="3361240">(</span><span class="builtintype" id="3361241">int</span><span class="op" id="3361244">,</span>&nbsp;<span class="builtintype" id="3361246">error</span><span class="op" id="3361251">)</span>&nbsp;<span class="op" id="3361253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361256">if</span>&nbsp;<span class="op" id="3361259">!</span><span class="ident" id="3361260">c</span><span class="op" id="3361261">.</span><span class="ident" id="3361262">ok</span><span class="op" id="3361264">(</span><span class="op" id="3361265">)</span>&nbsp;<span class="op" id="3361267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361271">return</span>&nbsp;<span class="num" id="3361278">0</span><span class="op" id="3361279">,</span>&nbsp;<span class="ident" id="3361281">syscall</span><span class="op" id="3361288">.</span><span class="ident" id="3361289">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361300">return</span>&nbsp;<span class="ident" id="3361307">c</span><span class="op" id="3361308">.</span><span class="ident" id="3361309">fd</span><span class="op" id="3361311">.</span><span class="ident" id="3361312">Write</span><span class="op" id="3361317">(</span><span class="ident" id="3361318">b</span><span class="op" id="3361319">)</span><br>
<span class="lineno">130</span><span class="op" id="3361321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3361324">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3361356">func</span>&nbsp;<span class="op" id="3361361">(</span><span class="ident" id="3361362">c</span>&nbsp;<span class="op" id="3361364">*</span><span class="ident" id="3361365">conn</span><span class="op" id="3361369">)</span>&nbsp;<span class="ident" id="3361371">Close</span><span class="op" id="3361376">(</span><span class="op" id="3361377">)</span>&nbsp;<span class="builtintype" id="3361379">error</span>&nbsp;<span class="op" id="3361385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361388">if</span>&nbsp;<span class="op" id="3361391">!</span><span class="ident" id="3361392">c</span><span class="op" id="3361393">.</span><span class="ident" id="3361394">ok</span><span class="op" id="3361396">(</span><span class="op" id="3361397">)</span>&nbsp;<span class="op" id="3361399">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361403">return</span>&nbsp;<span class="ident" id="3361410">syscall</span><span class="op" id="3361417">.</span><span class="ident" id="3361418">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361429">return</span>&nbsp;<span class="ident" id="3361436">c</span><span class="op" id="3361437">.</span><span class="ident" id="3361438">fd</span><span class="op" id="3361440">.</span><span class="ident" id="3361441">Close</span><span class="op" id="3361446">(</span><span class="op" id="3361447">)</span><br>
<span class="lineno"></span><span class="op" id="3361449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3361452">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3361500">func</span>&nbsp;<span class="op" id="3361505">(</span><span class="ident" id="3361506">c</span>&nbsp;<span class="op" id="3361508">*</span><span class="ident" id="3361509">conn</span><span class="op" id="3361513">)</span>&nbsp;<span class="ident" id="3361515">LocalAddr</span><span class="op" id="3361524">(</span><span class="op" id="3361525">)</span>&nbsp;<span class="ident" id="3361527">Addr</span>&nbsp;<span class="op" id="3361532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361535">if</span>&nbsp;<span class="op" id="3361538">!</span><span class="ident" id="3361539">c</span><span class="op" id="3361540">.</span><span class="ident" id="3361541">ok</span><span class="op" id="3361543">(</span><span class="op" id="3361544">)</span>&nbsp;<span class="op" id="3361546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361550">return</span>&nbsp;<span class="ident" id="3361557">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361562">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361565">return</span>&nbsp;<span class="ident" id="3361572">c</span><span class="op" id="3361573">.</span><span class="ident" id="3361574">fd</span><span class="op" id="3361576">.</span><span class="ident" id="3361577">laddr</span><br>
<span class="lineno"></span><span class="op" id="3361583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3361586">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3361636">func</span>&nbsp;<span class="op" id="3361641">(</span><span class="ident" id="3361642">c</span>&nbsp;<span class="op" id="3361644">*</span><span class="ident" id="3361645">conn</span><span class="op" id="3361649">)</span>&nbsp;<span class="ident" id="3361651">RemoteAddr</span><span class="op" id="3361661">(</span><span class="op" id="3361662">)</span>&nbsp;<span class="ident" id="3361664">Addr</span>&nbsp;<span class="op" id="3361669">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361672">if</span>&nbsp;<span class="op" id="3361675">!</span><span class="ident" id="3361676">c</span><span class="op" id="3361677">.</span><span class="ident" id="3361678">ok</span><span class="op" id="3361680">(</span><span class="op" id="3361681">)</span>&nbsp;<span class="op" id="3361683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361687">return</span>&nbsp;<span class="ident" id="3361694">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361702">return</span>&nbsp;<span class="ident" id="3361709">c</span><span class="op" id="3361710">.</span><span class="ident" id="3361711">fd</span><span class="op" id="3361713">.</span><span class="ident" id="3361714">raddr</span><br>
<span class="lineno"></span><span class="op" id="3361720">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3361723">//&nbsp;SetDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3361778">func</span>&nbsp;<span class="op" id="3361783">(</span><span class="ident" id="3361784">c</span>&nbsp;<span class="op" id="3361786">*</span><span class="ident" id="3361787">conn</span><span class="op" id="3361791">)</span>&nbsp;<span class="ident" id="3361793">SetDeadline</span><span class="op" id="3361804">(</span><span class="ident" id="3361805">t</span>&nbsp;<span class="ident" id="3361807">time</span><span class="op" id="3361811">.</span><span class="ident" id="3361812">Time</span><span class="op" id="3361816">)</span>&nbsp;<span class="builtintype" id="3361818">error</span>&nbsp;<span class="op" id="3361824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361827">if</span>&nbsp;<span class="op" id="3361830">!</span><span class="ident" id="3361831">c</span><span class="op" id="3361832">.</span><span class="ident" id="3361833">ok</span><span class="op" id="3361835">(</span><span class="op" id="3361836">)</span>&nbsp;<span class="op" id="3361838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361842">return</span>&nbsp;<span class="ident" id="3361849">syscall</span><span class="op" id="3361856">.</span><span class="ident" id="3361857">EINVAL</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361868">return</span>&nbsp;<span class="ident" id="3361875">c</span><span class="op" id="3361876">.</span><span class="ident" id="3361877">fd</span><span class="op" id="3361879">.</span><span class="ident" id="3361880">setDeadline</span><span class="op" id="3361891">(</span><span class="ident" id="3361892">t</span><span class="op" id="3361893">)</span><br>
<span class="lineno"></span><span class="op" id="3361895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3361898">//&nbsp;SetReadDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetReadDeadline&nbsp;method.</span><br>
<span class="lineno">165</span><span class="keyword" id="3361961">func</span>&nbsp;<span class="op" id="3361966">(</span><span class="ident" id="3361967">c</span>&nbsp;<span class="op" id="3361969">*</span><span class="ident" id="3361970">conn</span><span class="op" id="3361974">)</span>&nbsp;<span class="ident" id="3361976">SetReadDeadline</span><span class="op" id="3361991">(</span><span class="ident" id="3361992">t</span>&nbsp;<span class="ident" id="3361994">time</span><span class="op" id="3361998">.</span><span class="ident" id="3361999">Time</span><span class="op" id="3362003">)</span>&nbsp;<span class="builtintype" id="3362005">error</span>&nbsp;<span class="op" id="3362011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362014">if</span>&nbsp;<span class="op" id="3362017">!</span><span class="ident" id="3362018">c</span><span class="op" id="3362019">.</span><span class="ident" id="3362020">ok</span><span class="op" id="3362022">(</span><span class="op" id="3362023">)</span>&nbsp;<span class="op" id="3362025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362029">return</span>&nbsp;<span class="ident" id="3362036">syscall</span><span class="op" id="3362043">.</span><span class="ident" id="3362044">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3362052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362055">return</span>&nbsp;<span class="ident" id="3362062">c</span><span class="op" id="3362063">.</span><span class="ident" id="3362064">fd</span><span class="op" id="3362066">.</span><span class="ident" id="3362067">setReadDeadline</span><span class="op" id="3362082">(</span><span class="ident" id="3362083">t</span><span class="op" id="3362084">)</span><br>
<span class="lineno">170</span><span class="op" id="3362086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3362089">//&nbsp;SetWriteDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetWriteDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3362154">func</span>&nbsp;<span class="op" id="3362159">(</span><span class="ident" id="3362160">c</span>&nbsp;<span class="op" id="3362162">*</span><span class="ident" id="3362163">conn</span><span class="op" id="3362167">)</span>&nbsp;<span class="ident" id="3362169">SetWriteDeadline</span><span class="op" id="3362185">(</span><span class="ident" id="3362186">t</span>&nbsp;<span class="ident" id="3362188">time</span><span class="op" id="3362192">.</span><span class="ident" id="3362193">Time</span><span class="op" id="3362197">)</span>&nbsp;<span class="builtintype" id="3362199">error</span>&nbsp;<span class="op" id="3362205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362208">if</span>&nbsp;<span class="op" id="3362211">!</span><span class="ident" id="3362212">c</span><span class="op" id="3362213">.</span><span class="ident" id="3362214">ok</span><span class="op" id="3362216">(</span><span class="op" id="3362217">)</span>&nbsp;<span class="op" id="3362219">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362223">return</span>&nbsp;<span class="ident" id="3362230">syscall</span><span class="op" id="3362237">.</span><span class="ident" id="3362238">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3362246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362249">return</span>&nbsp;<span class="ident" id="3362256">c</span><span class="op" id="3362257">.</span><span class="ident" id="3362258">fd</span><span class="op" id="3362260">.</span><span class="ident" id="3362261">setWriteDeadline</span><span class="op" id="3362277">(</span><span class="ident" id="3362278">t</span><span class="op" id="3362279">)</span><br>
<span class="lineno"></span><span class="op" id="3362281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3362284">//&nbsp;SetReadBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3362341">//&nbsp;receive&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3362391">func</span>&nbsp;<span class="op" id="3362396">(</span><span class="ident" id="3362397">c</span>&nbsp;<span class="op" id="3362399">*</span><span class="ident" id="3362400">conn</span><span class="op" id="3362404">)</span>&nbsp;<span class="ident" id="3362406">SetReadBuffer</span><span class="op" id="3362419">(</span><span class="ident" id="3362420">bytes</span>&nbsp;<span class="builtintype" id="3362426">int</span><span class="op" id="3362429">)</span>&nbsp;<span class="builtintype" id="3362431">error</span>&nbsp;<span class="op" id="3362437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362440">if</span>&nbsp;<span class="op" id="3362443">!</span><span class="ident" id="3362444">c</span><span class="op" id="3362445">.</span><span class="ident" id="3362446">ok</span><span class="op" id="3362448">(</span><span class="op" id="3362449">)</span>&nbsp;<span class="op" id="3362451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362455">return</span>&nbsp;<span class="ident" id="3362462">syscall</span><span class="op" id="3362469">.</span><span class="ident" id="3362470">EINVAL</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3362478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362481">return</span>&nbsp;<span class="ident" id="3362488">setReadBuffer</span><span class="op" id="3362501">(</span><span class="ident" id="3362502">c</span><span class="op" id="3362503">.</span><span class="ident" id="3362504">fd</span><span class="op" id="3362506">,</span>&nbsp;<span class="ident" id="3362508">bytes</span><span class="op" id="3362513">)</span><br>
<span class="lineno"></span><span class="op" id="3362515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3362518">//&nbsp;SetWriteBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno">190</span><span class="comment" id="3362576">//&nbsp;transmit&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3362627">func</span>&nbsp;<span class="op" id="3362632">(</span><span class="ident" id="3362633">c</span>&nbsp;<span class="op" id="3362635">*</span><span class="ident" id="3362636">conn</span><span class="op" id="3362640">)</span>&nbsp;<span class="ident" id="3362642">SetWriteBuffer</span><span class="op" id="3362656">(</span><span class="ident" id="3362657">bytes</span>&nbsp;<span class="builtintype" id="3362663">int</span><span class="op" id="3362666">)</span>&nbsp;<span class="builtintype" id="3362668">error</span>&nbsp;<span class="op" id="3362674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362677">if</span>&nbsp;<span class="op" id="3362680">!</span><span class="ident" id="3362681">c</span><span class="op" id="3362682">.</span><span class="ident" id="3362683">ok</span><span class="op" id="3362685">(</span><span class="op" id="3362686">)</span>&nbsp;<span class="op" id="3362688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362692">return</span>&nbsp;<span class="ident" id="3362699">syscall</span><span class="op" id="3362706">.</span><span class="ident" id="3362707">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3362715">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3362718">return</span>&nbsp;<span class="ident" id="3362725">setWriteBuffer</span><span class="op" id="3362739">(</span><span class="ident" id="3362740">c</span><span class="op" id="3362741">.</span><span class="ident" id="3362742">fd</span><span class="op" id="3362744">,</span>&nbsp;<span class="ident" id="3362746">bytes</span><span class="op" id="3362751">)</span><br>
<span class="lineno"></span><span class="op" id="3362753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3362756">//&nbsp;File&nbsp;sets&nbsp;the&nbsp;underlying&nbsp;os.File&nbsp;to&nbsp;blocking&nbsp;mode&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span><span class="comment" id="3362829">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno">200</span><span class="comment" id="3362892">//&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="3362957">//</span><br>
<span class="lineno"></span><span class="comment" id="3362960">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;connection&#39;s.</span><br>
<span class="lineno"></span><span class="comment" id="3363038">//&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original&nbsp;using&nbsp;this&nbsp;duplicate</span><br>
<span class="lineno"></span><span class="comment" id="3363110">//&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno">205</span><span class="keyword" id="3363153">func</span>&nbsp;<span class="op" id="3363158">(</span><span class="ident" id="3363159">c</span>&nbsp;<span class="op" id="3363161">*</span><span class="ident" id="3363162">conn</span><span class="op" id="3363166">)</span>&nbsp;<span class="ident" id="3363168">File</span><span class="op" id="3363172">(</span><span class="op" id="3363173">)</span>&nbsp;<span class="op" id="3363175">(</span><span class="ident" id="3363176">f</span>&nbsp;<span class="op" id="3363178">*</span><span class="ident" id="3363179">os</span><span class="op" id="3363181">.</span><span class="ident" id="3363182">File</span><span class="op" id="3363186">,</span>&nbsp;<span class="ident" id="3363188">err</span>&nbsp;<span class="builtintype" id="3363192">error</span><span class="op" id="3363197">)</span>&nbsp;<span class="op" id="3363199">{</span>&nbsp;<span class="keyword" id="3363201">return</span>&nbsp;<span class="ident" id="3363208">c</span><span class="op" id="3363209">.</span><span class="ident" id="3363210">fd</span><span class="op" id="3363212">.</span><span class="ident" id="3363213">dup</span><span class="op" id="3363216">(</span><span class="op" id="3363217">)</span>&nbsp;<span class="op" id="3363219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3363222">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;network&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3363262">type</span>&nbsp;<span class="ident" id="3363267">Error</span>&nbsp;<span class="keyword" id="3363273">interface</span>&nbsp;<span class="op" id="3363283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3363286">error</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3363293">Timeout</span><span class="op" id="3363300">(</span><span class="op" id="3363301">)</span>&nbsp;<span class="builtintype" id="3363303">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3363310">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;a&nbsp;timeout?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3363338">Temporary</span><span class="op" id="3363347">(</span><span class="op" id="3363348">)</span>&nbsp;<span class="builtintype" id="3363350">bool</span>&nbsp;<span class="comment" id="3363355">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;temporary?</span><br>
<span class="lineno"></span><span class="op" id="3363382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3363385">//&nbsp;PacketConn&nbsp;is&nbsp;a&nbsp;generic&nbsp;packet-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">215</span><span class="comment" id="3363448">//</span><br>
<span class="lineno"></span><span class="comment" id="3363451">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;PacketConn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3363525">type</span>&nbsp;<span class="ident" id="3363530">PacketConn</span>&nbsp;<span class="keyword" id="3363541">interface</span>&nbsp;<span class="op" id="3363551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363554">//&nbsp;ReadFrom&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;the&nbsp;connection,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363603">//&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363661">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363713">//&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363736">//&nbsp;ReadFrom&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363784">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363846">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3363887">ReadFrom</span><span class="op" id="3363895">(</span><span class="ident" id="3363896">b</span>&nbsp;<span class="op" id="3363898">[</span><span class="op" id="3363899">]</span><span class="builtintype" id="3363900">byte</span><span class="op" id="3363904">)</span>&nbsp;<span class="op" id="3363906">(</span><span class="ident" id="3363907">n</span>&nbsp;<span class="builtintype" id="3363909">int</span><span class="op" id="3363912">,</span>&nbsp;<span class="ident" id="3363914">addr</span>&nbsp;<span class="ident" id="3363919">Addr</span><span class="op" id="3363923">,</span>&nbsp;<span class="ident" id="3363925">err</span>&nbsp;<span class="builtintype" id="3363929">error</span><span class="op" id="3363934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363938">//&nbsp;WriteTo&nbsp;writes&nbsp;a&nbsp;packet&nbsp;with&nbsp;payload&nbsp;b&nbsp;to&nbsp;addr.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3363990">//&nbsp;WriteTo&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364037">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364099">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364141">//&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3364202">WriteTo</span><span class="op" id="3364209">(</span><span class="ident" id="3364210">b</span>&nbsp;<span class="op" id="3364212">[</span><span class="op" id="3364213">]</span><span class="builtintype" id="3364214">byte</span><span class="op" id="3364218">,</span>&nbsp;<span class="ident" id="3364220">addr</span>&nbsp;<span class="ident" id="3364225">Addr</span><span class="op" id="3364229">)</span>&nbsp;<span class="op" id="3364231">(</span><span class="ident" id="3364232">n</span>&nbsp;<span class="builtintype" id="3364234">int</span><span class="op" id="3364237">,</span>&nbsp;<span class="ident" id="3364239">err</span>&nbsp;<span class="builtintype" id="3364243">error</span><span class="op" id="3364248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364252">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364285">//&nbsp;Any&nbsp;blocked&nbsp;ReadFrom&nbsp;or&nbsp;WriteTo&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3364369">Close</span><span class="op" id="3364374">(</span><span class="op" id="3364375">)</span>&nbsp;<span class="builtintype" id="3364377">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364385">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3364434">LocalAddr</span><span class="op" id="3364443">(</span><span class="op" id="3364444">)</span>&nbsp;<span class="ident" id="3364446">Addr</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364453">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364514">//&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3364539">SetDeadline</span><span class="op" id="3364550">(</span><span class="ident" id="3364551">t</span>&nbsp;<span class="ident" id="3364553">time</span><span class="op" id="3364557">.</span><span class="ident" id="3364558">Time</span><span class="op" id="3364562">)</span>&nbsp;<span class="builtintype" id="3364564">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364572">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364633">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Read&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364695">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364737">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3364790">SetReadDeadline</span><span class="op" id="3364805">(</span><span class="ident" id="3364806">t</span>&nbsp;<span class="ident" id="3364808">time</span><span class="op" id="3364812">.</span><span class="ident" id="3364813">Time</span><span class="op" id="3364817">)</span>&nbsp;<span class="builtintype" id="3364819">error</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364827">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364890">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Write&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364953">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3364995">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365049">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365115">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365162">SetWriteDeadline</span><span class="op" id="3365178">(</span><span class="ident" id="3365179">t</span>&nbsp;<span class="ident" id="3365181">time</span><span class="op" id="3365185">.</span><span class="ident" id="3365186">Time</span><span class="op" id="3365190">)</span>&nbsp;<span class="builtintype" id="3365192">error</span><br>
<span class="lineno"></span><span class="op" id="3365198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3365201">var</span>&nbsp;<span class="ident" id="3365205">listenerBacklog</span>&nbsp;<span class="op" id="3365221">=</span>&nbsp;<span class="ident" id="3365223">maxListenerBacklog</span><span class="op" id="3365241">(</span><span class="op" id="3365242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3365245">//&nbsp;A&nbsp;Listener&nbsp;is&nbsp;a&nbsp;generic&nbsp;network&nbsp;listener&nbsp;for&nbsp;stream-oriented&nbsp;protocols.</span><br>
<span class="lineno"></span><span class="comment" id="3365320">//</span><br>
<span class="lineno"></span><span class="comment" id="3365323">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Listener&nbsp;simultaneously.</span><br>
<span class="lineno">265</span><span class="keyword" id="3365395">type</span>&nbsp;<span class="ident" id="3365400">Listener</span>&nbsp;<span class="keyword" id="3365409">interface</span>&nbsp;<span class="op" id="3365419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365422">//&nbsp;Accept&nbsp;waits&nbsp;for&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;connection&nbsp;to&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365492">Accept</span><span class="op" id="3365498">(</span><span class="op" id="3365499">)</span>&nbsp;<span class="op" id="3365501">(</span><span class="ident" id="3365502">c</span>&nbsp;<span class="ident" id="3365504">Conn</span><span class="op" id="3365508">,</span>&nbsp;<span class="ident" id="3365510">err</span>&nbsp;<span class="builtintype" id="3365514">error</span><span class="op" id="3365519">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365523">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;listener.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365554">//&nbsp;Any&nbsp;blocked&nbsp;Accept&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365625">Close</span><span class="op" id="3365630">(</span><span class="op" id="3365631">)</span>&nbsp;<span class="builtintype" id="3365633">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365641">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365690">Addr</span><span class="op" id="3365694">(</span><span class="op" id="3365695">)</span>&nbsp;<span class="ident" id="3365697">Addr</span><br>
<span class="lineno">275</span><span class="op" id="3365702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3365705">//&nbsp;Various&nbsp;errors&nbsp;contained&nbsp;in&nbsp;OpError.</span><br>
<span class="lineno"></span><span class="keyword" id="3365745">var</span>&nbsp;<span class="op" id="3365749">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365752">//&nbsp;For&nbsp;connection&nbsp;setup&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365799">errMissingAddress</span>&nbsp;<span class="op" id="3365817">=</span>&nbsp;<span class="ident" id="3365819">errors</span><span class="op" id="3365825">.</span><span class="ident" id="3365826">New</span><span class="op" id="3365829">(</span><span class="string" id="3365830">&#34;missing&nbsp;address&#34;</span><span class="op" id="3365847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3365851">//&nbsp;For&nbsp;both&nbsp;read&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365891">errTimeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3365911">error</span>&nbsp;<span class="op" id="3365917">=</span>&nbsp;<span class="op" id="3365919">&amp;</span><span class="ident" id="3365920">timeoutError</span><span class="op" id="3365932">{</span><span class="op" id="3365933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3365936">errClosing</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3365962">=</span>&nbsp;<span class="ident" id="3365964">errors</span><span class="op" id="3365970">.</span><span class="ident" id="3365971">New</span><span class="op" id="3365974">(</span><span class="string" id="3365975">&#34;use&nbsp;of&nbsp;closed&nbsp;network&nbsp;connection&#34;</span><span class="op" id="3366009">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366012">ErrWriteToConnected</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3366038">=</span>&nbsp;<span class="ident" id="3366040">errors</span><span class="op" id="3366046">.</span><span class="ident" id="3366047">New</span><span class="op" id="3366050">(</span><span class="string" id="3366051">&#34;use&nbsp;of&nbsp;WriteTo&nbsp;with&nbsp;pre-connected&nbsp;connection&#34;</span><span class="op" id="3366097">)</span><br>
<span class="lineno"></span><span class="op" id="3366099">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3366102">//&nbsp;OpError&nbsp;is&nbsp;the&nbsp;error&nbsp;type&nbsp;usually&nbsp;returned&nbsp;by&nbsp;functions&nbsp;in&nbsp;the&nbsp;net</span><br>
<span class="lineno"></span><span class="comment" id="3366172">//&nbsp;package.&nbsp;It&nbsp;describes&nbsp;the&nbsp;operation,&nbsp;network&nbsp;type,&nbsp;and&nbsp;address&nbsp;of</span><br>
<span class="lineno">290</span><span class="comment" id="3366241">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3366254">type</span>&nbsp;<span class="ident" id="3366259">OpError</span>&nbsp;<span class="keyword" id="3366267">struct</span>&nbsp;<span class="op" id="3366274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366277">//&nbsp;Op&nbsp;is&nbsp;the&nbsp;operation&nbsp;which&nbsp;caused&nbsp;the&nbsp;error,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366333">//&nbsp;&#34;read&#34;&nbsp;or&nbsp;&#34;write&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366356">Op</span>&nbsp;<span class="builtintype" id="3366359">string</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366368">//&nbsp;Net&nbsp;is&nbsp;the&nbsp;network&nbsp;type&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366426">//&nbsp;such&nbsp;as&nbsp;&#34;tcp&#34;&nbsp;or&nbsp;&#34;udp6&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366455">Net</span>&nbsp;<span class="builtintype" id="3366459">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366468">//&nbsp;Addr&nbsp;is&nbsp;the&nbsp;network&nbsp;address&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366530">Addr</span>&nbsp;<span class="ident" id="3366535">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3366542">//&nbsp;Err&nbsp;is&nbsp;the&nbsp;error&nbsp;that&nbsp;occurred&nbsp;during&nbsp;the&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366599">Err</span>&nbsp;<span class="builtintype" id="3366603">error</span><br>
<span class="lineno">305</span><span class="op" id="3366609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3366612">func</span>&nbsp;<span class="op" id="3366617">(</span><span class="ident" id="3366618">e</span>&nbsp;<span class="op" id="3366620">*</span><span class="ident" id="3366621">OpError</span><span class="op" id="3366628">)</span>&nbsp;<span class="ident" id="3366630">Error</span><span class="op" id="3366635">(</span><span class="op" id="3366636">)</span>&nbsp;<span class="builtintype" id="3366638">string</span>&nbsp;<span class="op" id="3366645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366648">if</span>&nbsp;<span class="ident" id="3366651">e</span>&nbsp;<span class="op" id="3366653">==</span>&nbsp;<span class="ident" id="3366656">nil</span>&nbsp;<span class="op" id="3366660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366664">return</span>&nbsp;<span class="string" id="3366671">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3366680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366683">s</span>&nbsp;<span class="op" id="3366685">:=</span>&nbsp;<span class="ident" id="3366688">e</span><span class="op" id="3366689">.</span><span class="ident" id="3366690">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366694">if</span>&nbsp;<span class="ident" id="3366697">e</span><span class="op" id="3366698">.</span><span class="ident" id="3366699">Net</span>&nbsp;<span class="op" id="3366703">!=</span>&nbsp;<span class="string" id="3366706">&#34;&#34;</span>&nbsp;<span class="op" id="3366709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366713">s</span>&nbsp;<span class="op" id="3366715">+=</span>&nbsp;<span class="string" id="3366718">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3366722">+</span>&nbsp;<span class="ident" id="3366724">e</span><span class="op" id="3366725">.</span><span class="ident" id="3366726">Net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3366731">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366734">if</span>&nbsp;<span class="ident" id="3366737">e</span><span class="op" id="3366738">.</span><span class="ident" id="3366739">Addr</span>&nbsp;<span class="op" id="3366744">!=</span>&nbsp;<span class="ident" id="3366747">nil</span>&nbsp;<span class="op" id="3366751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366755">s</span>&nbsp;<span class="op" id="3366757">+=</span>&nbsp;<span class="string" id="3366760">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3366764">+</span>&nbsp;<span class="ident" id="3366766">e</span><span class="op" id="3366767">.</span><span class="ident" id="3366768">Addr</span><span class="op" id="3366772">.</span><span class="ident" id="3366773">String</span><span class="op" id="3366779">(</span><span class="op" id="3366780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3366783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366786">s</span>&nbsp;<span class="op" id="3366788">+=</span>&nbsp;<span class="string" id="3366791">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3366796">+</span>&nbsp;<span class="ident" id="3366798">e</span><span class="op" id="3366799">.</span><span class="ident" id="3366800">Err</span><span class="op" id="3366803">.</span><span class="ident" id="3366804">Error</span><span class="op" id="3366809">(</span><span class="op" id="3366810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366813">return</span>&nbsp;<span class="ident" id="3366820">s</span><br>
<span class="lineno">320</span><span class="op" id="3366822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3366825">type</span>&nbsp;<span class="ident" id="3366830">temporary</span>&nbsp;<span class="keyword" id="3366840">interface</span>&nbsp;<span class="op" id="3366850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366853">Temporary</span><span class="op" id="3366862">(</span><span class="op" id="3366863">)</span>&nbsp;<span class="builtintype" id="3366865">bool</span><br>
<span class="lineno"></span><span class="op" id="3366870">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="3366873">func</span>&nbsp;<span class="op" id="3366878">(</span><span class="ident" id="3366879">e</span>&nbsp;<span class="op" id="3366881">*</span><span class="ident" id="3366882">OpError</span><span class="op" id="3366889">)</span>&nbsp;<span class="ident" id="3366891">Temporary</span><span class="op" id="3366900">(</span><span class="op" id="3366901">)</span>&nbsp;<span class="builtintype" id="3366903">bool</span>&nbsp;<span class="op" id="3366908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3366911">t</span><span class="op" id="3366912">,</span>&nbsp;<span class="ident" id="3366914">ok</span>&nbsp;<span class="op" id="3366917">:=</span>&nbsp;<span class="ident" id="3366920">e</span><span class="op" id="3366921">.</span><span class="ident" id="3366922">Err</span><span class="op" id="3366925">.</span><span class="op" id="3366926">(</span><span class="ident" id="3366927">temporary</span><span class="op" id="3366936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3366939">return</span>&nbsp;<span class="ident" id="3366946">ok</span>&nbsp;<span class="op" id="3366949">&amp;&amp;</span>&nbsp;<span class="ident" id="3366952">t</span><span class="op" id="3366953">.</span><span class="ident" id="3366954">Temporary</span><span class="op" id="3366963">(</span><span class="op" id="3366964">)</span><br>
<span class="lineno"></span><span class="op" id="3366966">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="3366969">var</span>&nbsp;<span class="ident" id="3366973">noDeadline</span>&nbsp;<span class="op" id="3366984">=</span>&nbsp;<span class="ident" id="3366986">time</span><span class="op" id="3366990">.</span><span class="ident" id="3366991">Time</span><span class="op" id="3366995">{</span><span class="op" id="3366996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3366999">type</span>&nbsp;<span class="ident" id="3367004">timeout</span>&nbsp;<span class="keyword" id="3367012">interface</span>&nbsp;<span class="op" id="3367022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367025">Timeout</span><span class="op" id="3367032">(</span><span class="op" id="3367033">)</span>&nbsp;<span class="builtintype" id="3367035">bool</span><br>
<span class="lineno">335</span><span class="op" id="3367040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367043">func</span>&nbsp;<span class="op" id="3367048">(</span><span class="ident" id="3367049">e</span>&nbsp;<span class="op" id="3367051">*</span><span class="ident" id="3367052">OpError</span><span class="op" id="3367059">)</span>&nbsp;<span class="ident" id="3367061">Timeout</span><span class="op" id="3367068">(</span><span class="op" id="3367069">)</span>&nbsp;<span class="builtintype" id="3367071">bool</span>&nbsp;<span class="op" id="3367076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367079">t</span><span class="op" id="3367080">,</span>&nbsp;<span class="ident" id="3367082">ok</span>&nbsp;<span class="op" id="3367085">:=</span>&nbsp;<span class="ident" id="3367088">e</span><span class="op" id="3367089">.</span><span class="ident" id="3367090">Err</span><span class="op" id="3367093">.</span><span class="op" id="3367094">(</span><span class="ident" id="3367095">timeout</span><span class="op" id="3367102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367105">return</span>&nbsp;<span class="ident" id="3367112">ok</span>&nbsp;<span class="op" id="3367115">&amp;&amp;</span>&nbsp;<span class="ident" id="3367118">t</span><span class="op" id="3367119">.</span><span class="ident" id="3367120">Timeout</span><span class="op" id="3367127">(</span><span class="op" id="3367128">)</span><br>
<span class="lineno">340</span><span class="op" id="3367130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367133">type</span>&nbsp;<span class="ident" id="3367138">timeoutError</span>&nbsp;<span class="keyword" id="3367151">struct</span><span class="op" id="3367157">{</span><span class="op" id="3367158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367161">func</span>&nbsp;<span class="op" id="3367166">(</span><span class="ident" id="3367167">e</span>&nbsp;<span class="op" id="3367169">*</span><span class="ident" id="3367170">timeoutError</span><span class="op" id="3367182">)</span>&nbsp;<span class="ident" id="3367184">Error</span><span class="op" id="3367189">(</span><span class="op" id="3367190">)</span>&nbsp;<span class="builtintype" id="3367192">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3367201">{</span>&nbsp;<span class="keyword" id="3367203">return</span>&nbsp;<span class="string" id="3367210">&#34;i/o&nbsp;timeout&#34;</span>&nbsp;<span class="op" id="3367224">}</span><br>
<span class="lineno">345</span><span class="keyword" id="3367226">func</span>&nbsp;<span class="op" id="3367231">(</span><span class="ident" id="3367232">e</span>&nbsp;<span class="op" id="3367234">*</span><span class="ident" id="3367235">timeoutError</span><span class="op" id="3367247">)</span>&nbsp;<span class="ident" id="3367249">Timeout</span><span class="op" id="3367256">(</span><span class="op" id="3367257">)</span>&nbsp;<span class="builtintype" id="3367259">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3367266">{</span>&nbsp;<span class="keyword" id="3367268">return</span>&nbsp;<span class="builtintype" id="3367275">true</span>&nbsp;<span class="op" id="3367280">}</span><br>
<span class="lineno"></span><span class="keyword" id="3367282">func</span>&nbsp;<span class="op" id="3367287">(</span><span class="ident" id="3367288">e</span>&nbsp;<span class="op" id="3367290">*</span><span class="ident" id="3367291">timeoutError</span><span class="op" id="3367303">)</span>&nbsp;<span class="ident" id="3367305">Temporary</span><span class="op" id="3367314">(</span><span class="op" id="3367315">)</span>&nbsp;<span class="builtintype" id="3367317">bool</span>&nbsp;<span class="op" id="3367322">{</span>&nbsp;<span class="keyword" id="3367324">return</span>&nbsp;<span class="builtintype" id="3367331">true</span>&nbsp;<span class="op" id="3367336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367339">type</span>&nbsp;<span class="ident" id="3367344">AddrError</span>&nbsp;<span class="keyword" id="3367354">struct</span>&nbsp;<span class="op" id="3367361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367364">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3367369">string</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367377">Addr</span>&nbsp;<span class="builtintype" id="3367382">string</span><br>
<span class="lineno"></span><span class="op" id="3367389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367392">func</span>&nbsp;<span class="op" id="3367397">(</span><span class="ident" id="3367398">e</span>&nbsp;<span class="op" id="3367400">*</span><span class="ident" id="3367401">AddrError</span><span class="op" id="3367410">)</span>&nbsp;<span class="ident" id="3367412">Error</span><span class="op" id="3367417">(</span><span class="op" id="3367418">)</span>&nbsp;<span class="builtintype" id="3367420">string</span>&nbsp;<span class="op" id="3367427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367430">if</span>&nbsp;<span class="ident" id="3367433">e</span>&nbsp;<span class="op" id="3367435">==</span>&nbsp;<span class="ident" id="3367438">nil</span>&nbsp;<span class="op" id="3367442">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367446">return</span>&nbsp;<span class="string" id="3367453">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3367462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367465">s</span>&nbsp;<span class="op" id="3367467">:=</span>&nbsp;<span class="ident" id="3367470">e</span><span class="op" id="3367471">.</span><span class="ident" id="3367472">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367477">if</span>&nbsp;<span class="ident" id="3367480">e</span><span class="op" id="3367481">.</span><span class="ident" id="3367482">Addr</span>&nbsp;<span class="op" id="3367487">!=</span>&nbsp;<span class="string" id="3367490">&#34;&#34;</span>&nbsp;<span class="op" id="3367493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3367497">s</span>&nbsp;<span class="op" id="3367499">+=</span>&nbsp;<span class="string" id="3367502">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3367506">+</span>&nbsp;<span class="ident" id="3367508">e</span><span class="op" id="3367509">.</span><span class="ident" id="3367510">Addr</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3367516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367519">return</span>&nbsp;<span class="ident" id="3367526">s</span><br>
<span class="lineno"></span><span class="op" id="3367528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367531">func</span>&nbsp;<span class="op" id="3367536">(</span><span class="ident" id="3367537">e</span>&nbsp;<span class="op" id="3367539">*</span><span class="ident" id="3367540">AddrError</span><span class="op" id="3367549">)</span>&nbsp;<span class="ident" id="3367551">Temporary</span><span class="op" id="3367560">(</span><span class="op" id="3367561">)</span>&nbsp;<span class="builtintype" id="3367563">bool</span>&nbsp;<span class="op" id="3367568">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367571">return</span>&nbsp;<span class="builtintype" id="3367578">false</span><br>
<span class="lineno"></span><span class="op" id="3367584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367587">func</span>&nbsp;<span class="op" id="3367592">(</span><span class="ident" id="3367593">e</span>&nbsp;<span class="op" id="3367595">*</span><span class="ident" id="3367596">AddrError</span><span class="op" id="3367605">)</span>&nbsp;<span class="ident" id="3367607">Timeout</span><span class="op" id="3367614">(</span><span class="op" id="3367615">)</span>&nbsp;<span class="builtintype" id="3367617">bool</span>&nbsp;<span class="op" id="3367622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3367625">return</span>&nbsp;<span class="builtintype" id="3367632">false</span><br>
<span class="lineno">370</span><span class="op" id="3367638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367641">type</span>&nbsp;<span class="ident" id="3367646">UnknownNetworkError</span>&nbsp;<span class="builtintype" id="3367666">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367674">func</span>&nbsp;<span class="op" id="3367679">(</span><span class="ident" id="3367680">e</span>&nbsp;<span class="ident" id="3367682">UnknownNetworkError</span><span class="op" id="3367701">)</span>&nbsp;<span class="ident" id="3367703">Error</span><span class="op" id="3367708">(</span><span class="op" id="3367709">)</span>&nbsp;<span class="builtintype" id="3367711">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3367720">{</span>&nbsp;<span class="keyword" id="3367722">return</span>&nbsp;<span class="string" id="3367729">&#34;unknown&nbsp;network&nbsp;&#34;</span>&nbsp;<span class="op" id="3367748">+</span>&nbsp;<span class="builtintype" id="3367750">string</span><span class="op" id="3367756">(</span><span class="ident" id="3367757">e</span><span class="op" id="3367758">)</span>&nbsp;<span class="op" id="3367760">}</span><br>
<span class="lineno">375</span><span class="keyword" id="3367762">func</span>&nbsp;<span class="op" id="3367767">(</span><span class="ident" id="3367768">e</span>&nbsp;<span class="ident" id="3367770">UnknownNetworkError</span><span class="op" id="3367789">)</span>&nbsp;<span class="ident" id="3367791">Temporary</span><span class="op" id="3367800">(</span><span class="op" id="3367801">)</span>&nbsp;<span class="builtintype" id="3367803">bool</span>&nbsp;<span class="op" id="3367808">{</span>&nbsp;<span class="keyword" id="3367810">return</span>&nbsp;<span class="builtintype" id="3367817">false</span>&nbsp;<span class="op" id="3367823">}</span><br>
<span class="lineno"></span><span class="keyword" id="3367825">func</span>&nbsp;<span class="op" id="3367830">(</span><span class="ident" id="3367831">e</span>&nbsp;<span class="ident" id="3367833">UnknownNetworkError</span><span class="op" id="3367852">)</span>&nbsp;<span class="ident" id="3367854">Timeout</span><span class="op" id="3367861">(</span><span class="op" id="3367862">)</span>&nbsp;<span class="builtintype" id="3367864">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3367871">{</span>&nbsp;<span class="keyword" id="3367873">return</span>&nbsp;<span class="builtintype" id="3367880">false</span>&nbsp;<span class="op" id="3367886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3367889">type</span>&nbsp;<span class="ident" id="3367894">InvalidAddrError</span>&nbsp;<span class="builtintype" id="3367911">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3367919">func</span>&nbsp;<span class="op" id="3367924">(</span><span class="ident" id="3367925">e</span>&nbsp;<span class="ident" id="3367927">InvalidAddrError</span><span class="op" id="3367943">)</span>&nbsp;<span class="ident" id="3367945">Error</span><span class="op" id="3367950">(</span><span class="op" id="3367951">)</span>&nbsp;<span class="builtintype" id="3367953">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3367962">{</span>&nbsp;<span class="keyword" id="3367964">return</span>&nbsp;<span class="builtintype" id="3367971">string</span><span class="op" id="3367977">(</span><span class="ident" id="3367978">e</span><span class="op" id="3367979">)</span>&nbsp;<span class="op" id="3367981">}</span><br>
<span class="lineno"></span><span class="keyword" id="3367983">func</span>&nbsp;<span class="op" id="3367988">(</span><span class="ident" id="3367989">e</span>&nbsp;<span class="ident" id="3367991">InvalidAddrError</span><span class="op" id="3368007">)</span>&nbsp;<span class="ident" id="3368009">Timeout</span><span class="op" id="3368016">(</span><span class="op" id="3368017">)</span>&nbsp;<span class="builtintype" id="3368019">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3368026">{</span>&nbsp;<span class="keyword" id="3368028">return</span>&nbsp;<span class="builtintype" id="3368035">false</span>&nbsp;<span class="op" id="3368041">}</span><br>
<span class="lineno"></span><span class="keyword" id="3368043">func</span>&nbsp;<span class="op" id="3368048">(</span><span class="ident" id="3368049">e</span>&nbsp;<span class="ident" id="3368051">InvalidAddrError</span><span class="op" id="3368067">)</span>&nbsp;<span class="ident" id="3368069">Temporary</span><span class="op" id="3368078">(</span><span class="op" id="3368079">)</span>&nbsp;<span class="builtintype" id="3368081">bool</span>&nbsp;<span class="op" id="3368086">{</span>&nbsp;<span class="keyword" id="3368088">return</span>&nbsp;<span class="builtintype" id="3368095">false</span>&nbsp;<span class="op" id="3368101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3368104">//&nbsp;DNSConfigError&nbsp;represents&nbsp;an&nbsp;error&nbsp;reading&nbsp;the&nbsp;machine&#39;s&nbsp;DNS&nbsp;configuration.</span><br>
<span class="lineno">385</span><span class="keyword" id="3368183">type</span>&nbsp;<span class="ident" id="3368188">DNSConfigError</span>&nbsp;<span class="keyword" id="3368203">struct</span>&nbsp;<span class="op" id="3368210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3368213">Err</span>&nbsp;<span class="builtintype" id="3368217">error</span><br>
<span class="lineno"></span><span class="op" id="3368223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3368226">func</span>&nbsp;<span class="op" id="3368231">(</span><span class="ident" id="3368232">e</span>&nbsp;<span class="op" id="3368234">*</span><span class="ident" id="3368235">DNSConfigError</span><span class="op" id="3368249">)</span>&nbsp;<span class="ident" id="3368251">Error</span><span class="op" id="3368256">(</span><span class="op" id="3368257">)</span>&nbsp;<span class="builtintype" id="3368259">string</span>&nbsp;<span class="op" id="3368266">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3368269">return</span>&nbsp;<span class="string" id="3368276">&#34;error&nbsp;reading&nbsp;DNS&nbsp;config:&nbsp;&#34;</span>&nbsp;<span class="op" id="3368305">+</span>&nbsp;<span class="ident" id="3368307">e</span><span class="op" id="3368308">.</span><span class="ident" id="3368309">Err</span><span class="op" id="3368312">.</span><span class="ident" id="3368313">Error</span><span class="op" id="3368318">(</span><span class="op" id="3368319">)</span><br>
<span class="lineno"></span><span class="op" id="3368321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3368324">func</span>&nbsp;<span class="op" id="3368329">(</span><span class="ident" id="3368330">e</span>&nbsp;<span class="op" id="3368332">*</span><span class="ident" id="3368333">DNSConfigError</span><span class="op" id="3368347">)</span>&nbsp;<span class="ident" id="3368349">Timeout</span><span class="op" id="3368356">(</span><span class="op" id="3368357">)</span>&nbsp;<span class="builtintype" id="3368359">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3368366">{</span>&nbsp;<span class="keyword" id="3368368">return</span>&nbsp;<span class="builtintype" id="3368375">false</span>&nbsp;<span class="op" id="3368381">}</span><br>
<span class="lineno"></span><span class="keyword" id="3368383">func</span>&nbsp;<span class="op" id="3368388">(</span><span class="ident" id="3368389">e</span>&nbsp;<span class="op" id="3368391">*</span><span class="ident" id="3368392">DNSConfigError</span><span class="op" id="3368406">)</span>&nbsp;<span class="ident" id="3368408">Temporary</span><span class="op" id="3368417">(</span><span class="op" id="3368418">)</span>&nbsp;<span class="builtintype" id="3368420">bool</span>&nbsp;<span class="op" id="3368425">{</span>&nbsp;<span class="keyword" id="3368427">return</span>&nbsp;<span class="builtintype" id="3368434">false</span>&nbsp;<span class="op" id="3368440">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="3368443">type</span>&nbsp;<span class="ident" id="3368448">writerOnly</span>&nbsp;<span class="keyword" id="3368459">struct</span>&nbsp;<span class="op" id="3368466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3368469">io</span><span class="op" id="3368471">.</span><span class="ident" id="3368472">Writer</span><br>
<span class="lineno"></span><span class="op" id="3368479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="3368482">//&nbsp;Fallback&nbsp;implementation&nbsp;of&nbsp;io.ReaderFrom&#39;s&nbsp;ReadFrom,&nbsp;when&nbsp;sendfile&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3368558">//&nbsp;applicable.</span><br>
<span class="lineno"></span><span class="keyword" id="3368573">func</span>&nbsp;<span class="ident" id="3368578">genericReadFrom</span><span class="op" id="3368593">(</span><span class="ident" id="3368594">w</span>&nbsp;<span class="ident" id="3368596">io</span><span class="op" id="3368598">.</span><span class="ident" id="3368599">Writer</span><span class="op" id="3368605">,</span>&nbsp;<span class="ident" id="3368607">r</span>&nbsp;<span class="ident" id="3368609">io</span><span class="op" id="3368611">.</span><span class="ident" id="3368612">Reader</span><span class="op" id="3368618">)</span>&nbsp;<span class="op" id="3368620">(</span><span class="ident" id="3368621">n</span>&nbsp;<span class="ident" id="3368623">int64</span><span class="op" id="3368628">,</span>&nbsp;<span class="ident" id="3368630">err</span>&nbsp;<span class="builtintype" id="3368634">error</span><span class="op" id="3368639">)</span>&nbsp;<span class="op" id="3368641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3368644">//&nbsp;Use&nbsp;wrapper&nbsp;to&nbsp;hide&nbsp;existing&nbsp;r.ReadFrom&nbsp;from&nbsp;io.Copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3368702">return</span>&nbsp;<span class="ident" id="3368709">io</span><span class="op" id="3368711">.</span><span class="ident" id="3368712">Copy</span><span class="op" id="3368716">(</span><span class="ident" id="3368717">writerOnly</span><span class="op" id="3368727">{</span><span class="ident" id="3368728">w</span><span class="op" id="3368729">}</span><span class="op" id="3368730">,</span>&nbsp;<span class="ident" id="3368732">r</span><span class="op" id="3368733">)</span><br>
<span class="lineno">405</span><span class="op" id="3368735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3368738">//&nbsp;Limit&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;cgo-using&nbsp;goroutines,&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3368802">//&nbsp;each&nbsp;will&nbsp;block&nbsp;an&nbsp;entire&nbsp;operating&nbsp;system&nbsp;thread.&nbsp;The&nbsp;usual&nbsp;culprit</span><br>
<span class="lineno"></span><span class="comment" id="3368874">//&nbsp;is&nbsp;resolving&nbsp;many&nbsp;DNS&nbsp;names&nbsp;in&nbsp;separate&nbsp;goroutines&nbsp;but&nbsp;the&nbsp;DNS</span><br>
<span class="lineno">410</span><span class="comment" id="3368940">//&nbsp;server&nbsp;is&nbsp;not&nbsp;responding.&nbsp;Then&nbsp;the&nbsp;many&nbsp;lookups&nbsp;each&nbsp;use&nbsp;a&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3369012">//&nbsp;thread,&nbsp;and&nbsp;the&nbsp;system&nbsp;or&nbsp;the&nbsp;program&nbsp;runs&nbsp;out&nbsp;of&nbsp;threads.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3369075">var</span>&nbsp;<span class="ident" id="3369079">threadLimit</span>&nbsp;<span class="op" id="3369091">=</span>&nbsp;<span class="builtinfunc" id="3369093">make</span><span class="op" id="3369097">(</span><span class="keyword" id="3369098">chan</span>&nbsp;<span class="keyword" id="3369103">struct</span><span class="op" id="3369109">{</span><span class="op" id="3369110">}</span><span class="op" id="3369111">,</span>&nbsp;<span class="num" id="3369113">500</span><span class="op" id="3369116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3369119">//&nbsp;Using&nbsp;send&nbsp;for&nbsp;acquire&nbsp;is&nbsp;fine&nbsp;here&nbsp;because&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="3369188">//&nbsp;to&nbsp;protect&nbsp;any&nbsp;memory.&nbsp;All&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="3369260">//&nbsp;making&nbsp;calls&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3369288">func</span>&nbsp;<span class="ident" id="3369293">acquireThread</span><span class="op" id="3369306">(</span><span class="op" id="3369307">)</span>&nbsp;<span class="op" id="3369309">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3369312">threadLimit</span>&nbsp;<span class="op" id="3369324">&lt;-</span>&nbsp;<span class="keyword" id="3369327">struct</span><span class="op" id="3369333">{</span><span class="op" id="3369334">}</span><span class="op" id="3369335">{</span><span class="op" id="3369336">}</span><br>
<span class="lineno"></span><span class="op" id="3369338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3369341">func</span>&nbsp;<span class="ident" id="3369346">releaseThread</span><span class="op" id="3369359">(</span><span class="op" id="3369360">)</span>&nbsp;<span class="op" id="3369362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3369365">&lt;-</span><span class="ident" id="3369367">threadLimit</span><br>
<span class="lineno">425</span><span class="op" id="3369379">}</span>
</div>
</body>
</html>
