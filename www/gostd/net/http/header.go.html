<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html" class="current">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4087615">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4087671">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4087725">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4087776">package</span>&nbsp;<span class="ident" id="4087784">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4087790">import</span>&nbsp;<span class="op" id="4087797">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087800">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087806">&#34;net/textproto&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087823">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087831">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087842">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4087850">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="4087857">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="4087860">var</span>&nbsp;<span class="ident" id="4087864">raceEnabled</span>&nbsp;<span class="op" id="4087876">=</span>&nbsp;<span class="builtintype" id="4087878">false</span>&nbsp;<span class="comment" id="4087884">//&nbsp;set&nbsp;by&nbsp;race.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4087903">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;the&nbsp;key-value&nbsp;pairs&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="4087965">type</span>&nbsp;<span class="ident" id="4087970">Header</span>&nbsp;<span class="keyword" id="4087977">map</span><span class="op" id="4087980">[</span><span class="builtintype" id="4087981">string</span><span class="op" id="4087987">]</span><span class="op" id="4087988">[</span><span class="op" id="4087989">]</span><span class="builtintype" id="4087990">string</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4087998">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;key,&nbsp;value&nbsp;pair&nbsp;to&nbsp;the&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="4088045">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="4088103">func</span>&nbsp;<span class="op" id="4088108">(</span><span class="ident" id="4088109">h</span>&nbsp;<span class="ident" id="4088111">Header</span><span class="op" id="4088117">)</span>&nbsp;<span class="ident" id="4088119">Add</span><span class="op" id="4088122">(</span><span class="ident" id="4088123">key</span><span class="op" id="4088126">,</span>&nbsp;<span class="ident" id="4088128">value</span>&nbsp;<span class="builtintype" id="4088134">string</span><span class="op" id="4088140">)</span>&nbsp;<span class="op" id="4088142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088145">textproto</span><span class="op" id="4088154">.</span><span class="ident" id="4088155">MIMEHeader</span><span class="op" id="4088165">(</span><span class="ident" id="4088166">h</span><span class="op" id="4088167">)</span><span class="op" id="4088168">.</span><span class="ident" id="4088169">Add</span><span class="op" id="4088172">(</span><span class="ident" id="4088173">key</span><span class="op" id="4088176">,</span>&nbsp;<span class="ident" id="4088178">value</span><span class="op" id="4088183">)</span><br>
<span class="lineno">25</span><span class="op" id="4088185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088188">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;header&nbsp;entries&nbsp;associated&nbsp;with&nbsp;key&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4088242">//&nbsp;the&nbsp;single&nbsp;element&nbsp;value.&nbsp;&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="4088297">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno">30</span><span class="keyword" id="4088328">func</span>&nbsp;<span class="op" id="4088333">(</span><span class="ident" id="4088334">h</span>&nbsp;<span class="ident" id="4088336">Header</span><span class="op" id="4088342">)</span>&nbsp;<span class="ident" id="4088344">Set</span><span class="op" id="4088347">(</span><span class="ident" id="4088348">key</span><span class="op" id="4088351">,</span>&nbsp;<span class="ident" id="4088353">value</span>&nbsp;<span class="builtintype" id="4088359">string</span><span class="op" id="4088365">)</span>&nbsp;<span class="op" id="4088367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088370">textproto</span><span class="op" id="4088379">.</span><span class="ident" id="4088380">MIMEHeader</span><span class="op" id="4088390">(</span><span class="ident" id="4088391">h</span><span class="op" id="4088392">)</span><span class="op" id="4088393">.</span><span class="ident" id="4088394">Set</span><span class="op" id="4088397">(</span><span class="ident" id="4088398">key</span><span class="op" id="4088401">,</span>&nbsp;<span class="ident" id="4088403">value</span><span class="op" id="4088408">)</span><br>
<span class="lineno"></span><span class="op" id="4088410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088413">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno">35</span><span class="comment" id="4088472">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="4088539">//&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values&nbsp;of&nbsp;a&nbsp;key,&nbsp;access&nbsp;the&nbsp;map&nbsp;directly</span><br>
<span class="lineno"></span><span class="comment" id="4088602">//&nbsp;with&nbsp;CanonicalHeaderKey.</span><br>
<span class="lineno"></span><span class="keyword" id="4088630">func</span>&nbsp;<span class="op" id="4088635">(</span><span class="ident" id="4088636">h</span>&nbsp;<span class="ident" id="4088638">Header</span><span class="op" id="4088644">)</span>&nbsp;<span class="ident" id="4088646">Get</span><span class="op" id="4088649">(</span><span class="ident" id="4088650">key</span>&nbsp;<span class="builtintype" id="4088654">string</span><span class="op" id="4088660">)</span>&nbsp;<span class="builtintype" id="4088662">string</span>&nbsp;<span class="op" id="4088669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088672">return</span>&nbsp;<span class="ident" id="4088679">textproto</span><span class="op" id="4088688">.</span><span class="ident" id="4088689">MIMEHeader</span><span class="op" id="4088699">(</span><span class="ident" id="4088700">h</span><span class="op" id="4088701">)</span><span class="op" id="4088702">.</span><span class="ident" id="4088703">Get</span><span class="op" id="4088706">(</span><span class="ident" id="4088707">key</span><span class="op" id="4088710">)</span><br>
<span class="lineno">40</span><span class="op" id="4088712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4088715">//&nbsp;get&nbsp;is&nbsp;like&nbsp;Get,&nbsp;but&nbsp;key&nbsp;must&nbsp;already&nbsp;be&nbsp;in&nbsp;CanonicalHeaderKey&nbsp;form.</span><br>
<span class="lineno"></span><span class="keyword" id="4088787">func</span>&nbsp;<span class="op" id="4088792">(</span><span class="ident" id="4088793">h</span>&nbsp;<span class="ident" id="4088795">Header</span><span class="op" id="4088801">)</span>&nbsp;<span class="ident" id="4088803">get</span><span class="op" id="4088806">(</span><span class="ident" id="4088807">key</span>&nbsp;<span class="builtintype" id="4088811">string</span><span class="op" id="4088817">)</span>&nbsp;<span class="builtintype" id="4088819">string</span>&nbsp;<span class="op" id="4088826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088829">if</span>&nbsp;<span class="ident" id="4088832">v</span>&nbsp;<span class="op" id="4088834">:=</span>&nbsp;<span class="ident" id="4088837">h</span><span class="op" id="4088838">[</span><span class="ident" id="4088839">key</span><span class="op" id="4088842">]</span><span class="op" id="4088843">;</span>&nbsp;<span class="builtinfunc" id="4088845">len</span><span class="op" id="4088848">(</span><span class="ident" id="4088849">v</span><span class="op" id="4088850">)</span>&nbsp;<span class="op" id="4088852">&gt;</span>&nbsp;<span class="num" id="4088854">0</span>&nbsp;<span class="op" id="4088856">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088860">return</span>&nbsp;<span class="ident" id="4088867">v</span><span class="op" id="4088868">[</span><span class="num" id="4088869">0</span><span class="op" id="4088870">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4088873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4088876">return</span>&nbsp;<span class="string" id="4088883">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4088886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4088889">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="4088936">func</span>&nbsp;<span class="op" id="4088941">(</span><span class="ident" id="4088942">h</span>&nbsp;<span class="ident" id="4088944">Header</span><span class="op" id="4088950">)</span>&nbsp;<span class="ident" id="4088952">Del</span><span class="op" id="4088955">(</span><span class="ident" id="4088956">key</span>&nbsp;<span class="builtintype" id="4088960">string</span><span class="op" id="4088966">)</span>&nbsp;<span class="op" id="4088968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4088971">textproto</span><span class="op" id="4088980">.</span><span class="ident" id="4088981">MIMEHeader</span><span class="op" id="4088991">(</span><span class="ident" id="4088992">h</span><span class="op" id="4088993">)</span><span class="op" id="4088994">.</span><span class="ident" id="4088995">Del</span><span class="op" id="4088998">(</span><span class="ident" id="4088999">key</span><span class="op" id="4089002">)</span><br>
<span class="lineno"></span><span class="op" id="4089004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="4089007">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="4089048">func</span>&nbsp;<span class="op" id="4089053">(</span><span class="ident" id="4089054">h</span>&nbsp;<span class="ident" id="4089056">Header</span><span class="op" id="4089062">)</span>&nbsp;<span class="ident" id="4089064">Write</span><span class="op" id="4089069">(</span><span class="ident" id="4089070">w</span>&nbsp;<span class="ident" id="4089072">io</span><span class="op" id="4089074">.</span><span class="ident" id="4089075">Writer</span><span class="op" id="4089081">)</span>&nbsp;<span class="builtintype" id="4089083">error</span>&nbsp;<span class="op" id="4089089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089092">return</span>&nbsp;<span class="ident" id="4089099">h</span><span class="op" id="4089100">.</span><span class="ident" id="4089101">WriteSubset</span><span class="op" id="4089112">(</span><span class="ident" id="4089113">w</span><span class="op" id="4089114">,</span>&nbsp;<span class="builtintype" id="4089116">nil</span><span class="op" id="4089119">)</span><br>
<span class="lineno"></span><span class="op" id="4089121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="4089124">func</span>&nbsp;<span class="op" id="4089129">(</span><span class="ident" id="4089130">h</span>&nbsp;<span class="ident" id="4089132">Header</span><span class="op" id="4089138">)</span>&nbsp;<span class="ident" id="4089140">clone</span><span class="op" id="4089145">(</span><span class="op" id="4089146">)</span>&nbsp;<span class="ident" id="4089148">Header</span>&nbsp;<span class="op" id="4089155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089158">h2</span>&nbsp;<span class="op" id="4089161">:=</span>&nbsp;<span class="builtinfunc" id="4089164">make</span><span class="op" id="4089168">(</span><span class="ident" id="4089169">Header</span><span class="op" id="4089175">,</span>&nbsp;<span class="builtinfunc" id="4089177">len</span><span class="op" id="4089180">(</span><span class="ident" id="4089181">h</span><span class="op" id="4089182">)</span><span class="op" id="4089183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089186">for</span>&nbsp;<span class="ident" id="4089190">k</span><span class="op" id="4089191">,</span>&nbsp;<span class="ident" id="4089193">vv</span>&nbsp;<span class="op" id="4089196">:=</span>&nbsp;<span class="keyword" id="4089199">range</span>&nbsp;<span class="ident" id="4089205">h</span>&nbsp;<span class="op" id="4089207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089211">vv2</span>&nbsp;<span class="op" id="4089215">:=</span>&nbsp;<span class="builtinfunc" id="4089218">make</span><span class="op" id="4089222">(</span><span class="op" id="4089223">[</span><span class="op" id="4089224">]</span><span class="builtintype" id="4089225">string</span><span class="op" id="4089231">,</span>&nbsp;<span class="builtinfunc" id="4089233">len</span><span class="op" id="4089236">(</span><span class="ident" id="4089237">vv</span><span class="op" id="4089239">)</span><span class="op" id="4089240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4089244">copy</span><span class="op" id="4089248">(</span><span class="ident" id="4089249">vv2</span><span class="op" id="4089252">,</span>&nbsp;<span class="ident" id="4089254">vv</span><span class="op" id="4089256">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089260">h2</span><span class="op" id="4089262">[</span><span class="ident" id="4089263">k</span><span class="op" id="4089264">]</span>&nbsp;<span class="op" id="4089266">=</span>&nbsp;<span class="ident" id="4089268">vv2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089276">return</span>&nbsp;<span class="ident" id="4089283">h2</span><br>
<span class="lineno"></span><span class="op" id="4089286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="4089289">var</span>&nbsp;<span class="ident" id="4089293">timeFormats</span>&nbsp;<span class="op" id="4089305">=</span>&nbsp;<span class="op" id="4089307">[</span><span class="op" id="4089308">]</span><span class="builtintype" id="4089309">string</span><span class="op" id="4089315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089318">TimeFormat</span><span class="op" id="4089328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089331">time</span><span class="op" id="4089335">.</span><span class="ident" id="4089336">RFC850</span><span class="op" id="4089342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089345">time</span><span class="op" id="4089349">.</span><span class="ident" id="4089350">ANSIC</span><span class="op" id="4089355">,</span><br>
<span class="lineno"></span><span class="op" id="4089357">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4089360">//&nbsp;ParseTime&nbsp;parses&nbsp;a&nbsp;time&nbsp;header&nbsp;(such&nbsp;as&nbsp;the&nbsp;Date:&nbsp;header),</span><br>
<span class="lineno"></span><span class="comment" id="4089422">//&nbsp;trying&nbsp;each&nbsp;of&nbsp;the&nbsp;three&nbsp;formats&nbsp;allowed&nbsp;by&nbsp;HTTP/1.1:</span><br>
<span class="lineno"></span><span class="comment" id="4089479">//&nbsp;TimeFormat,&nbsp;time.RFC850,&nbsp;and&nbsp;time.ANSIC.</span><br>
<span class="lineno"></span><span class="keyword" id="4089523">func</span>&nbsp;<span class="ident" id="4089528">ParseTime</span><span class="op" id="4089537">(</span><span class="ident" id="4089538">text</span>&nbsp;<span class="builtintype" id="4089543">string</span><span class="op" id="4089549">)</span>&nbsp;<span class="op" id="4089551">(</span><span class="ident" id="4089552">t</span>&nbsp;<span class="ident" id="4089554">time</span><span class="op" id="4089558">.</span><span class="ident" id="4089559">Time</span><span class="op" id="4089563">,</span>&nbsp;<span class="ident" id="4089565">err</span>&nbsp;<span class="builtintype" id="4089569">error</span><span class="op" id="4089574">)</span>&nbsp;<span class="op" id="4089576">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089579">for</span>&nbsp;<span class="ident" id="4089583">_</span><span class="op" id="4089584">,</span>&nbsp;<span class="ident" id="4089586">layout</span>&nbsp;<span class="op" id="4089593">:=</span>&nbsp;<span class="keyword" id="4089596">range</span>&nbsp;<span class="ident" id="4089602">timeFormats</span>&nbsp;<span class="op" id="4089614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089618">t</span><span class="op" id="4089619">,</span>&nbsp;<span class="ident" id="4089621">err</span>&nbsp;<span class="op" id="4089625">=</span>&nbsp;<span class="ident" id="4089627">time</span><span class="op" id="4089631">.</span><span class="ident" id="4089632">Parse</span><span class="op" id="4089637">(</span><span class="ident" id="4089638">layout</span><span class="op" id="4089644">,</span>&nbsp;<span class="ident" id="4089646">text</span><span class="op" id="4089650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089654">if</span>&nbsp;<span class="ident" id="4089657">err</span>&nbsp;<span class="op" id="4089661">==</span>&nbsp;<span class="builtintype" id="4089664">nil</span>&nbsp;<span class="op" id="4089668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089673">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089682">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4089685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089688">return</span><br>
<span class="lineno"></span><span class="op" id="4089695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4089698">var</span>&nbsp;<span class="ident" id="4089702">headerNewlineToSpace</span>&nbsp;<span class="op" id="4089723">=</span>&nbsp;<span class="ident" id="4089725">strings</span><span class="op" id="4089732">.</span><span class="ident" id="4089733">NewReplacer</span><span class="op" id="4089744">(</span><span class="string" id="4089745">&#34;\n&#34;</span><span class="op" id="4089749">,</span>&nbsp;<span class="string" id="4089751">&#34;&nbsp;&#34;</span><span class="op" id="4089754">,</span>&nbsp;<span class="string" id="4089756">&#34;\r&#34;</span><span class="op" id="4089760">,</span>&nbsp;<span class="string" id="4089762">&#34;&nbsp;&#34;</span><span class="op" id="4089765">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="4089768">type</span>&nbsp;<span class="ident" id="4089773">writeStringer</span>&nbsp;<span class="keyword" id="4089787">interface</span>&nbsp;<span class="op" id="4089797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089800">WriteString</span><span class="op" id="4089811">(</span><span class="builtintype" id="4089812">string</span><span class="op" id="4089818">)</span>&nbsp;<span class="op" id="4089820">(</span><span class="builtintype" id="4089821">int</span><span class="op" id="4089824">,</span>&nbsp;<span class="builtintype" id="4089826">error</span><span class="op" id="4089831">)</span><br>
<span class="lineno"></span><span class="op" id="4089833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="4089836">//&nbsp;stringWriter&nbsp;implements&nbsp;WriteString&nbsp;on&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="4089888">type</span>&nbsp;<span class="ident" id="4089893">stringWriter</span>&nbsp;<span class="keyword" id="4089906">struct</span>&nbsp;<span class="op" id="4089913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4089916">w</span>&nbsp;<span class="ident" id="4089918">io</span><span class="op" id="4089920">.</span><span class="ident" id="4089921">Writer</span><br>
<span class="lineno"></span><span class="op" id="4089928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="4089931">func</span>&nbsp;<span class="op" id="4089936">(</span><span class="ident" id="4089937">w</span>&nbsp;<span class="ident" id="4089939">stringWriter</span><span class="op" id="4089951">)</span>&nbsp;<span class="ident" id="4089953">WriteString</span><span class="op" id="4089964">(</span><span class="ident" id="4089965">s</span>&nbsp;<span class="builtintype" id="4089967">string</span><span class="op" id="4089973">)</span>&nbsp;<span class="op" id="4089975">(</span><span class="ident" id="4089976">n</span>&nbsp;<span class="builtintype" id="4089978">int</span><span class="op" id="4089981">,</span>&nbsp;<span class="ident" id="4089983">err</span>&nbsp;<span class="builtintype" id="4089987">error</span><span class="op" id="4089992">)</span>&nbsp;<span class="op" id="4089994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4089997">return</span>&nbsp;<span class="ident" id="4090004">w</span><span class="op" id="4090005">.</span><span class="ident" id="4090006">w</span><span class="op" id="4090007">.</span><span class="ident" id="4090008">Write</span><span class="op" id="4090013">(</span><span class="op" id="4090014">[</span><span class="op" id="4090015">]</span><span class="builtintype" id="4090016">byte</span><span class="op" id="4090020">(</span><span class="ident" id="4090021">s</span><span class="op" id="4090022">)</span><span class="op" id="4090023">)</span><br>
<span class="lineno"></span><span class="op" id="4090025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4090028">type</span>&nbsp;<span class="ident" id="4090033">keyValues</span>&nbsp;<span class="keyword" id="4090043">struct</span>&nbsp;<span class="op" id="4090050">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090053">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4090060">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090068">values</span>&nbsp;<span class="op" id="4090075">[</span><span class="op" id="4090076">]</span><span class="builtintype" id="4090077">string</span><br>
<span class="lineno"></span><span class="op" id="4090084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090087">//&nbsp;A&nbsp;headerSorter&nbsp;implements&nbsp;sort.Interface&nbsp;by&nbsp;sorting&nbsp;a&nbsp;[]keyValues</span><br>
<span class="lineno">110</span><span class="comment" id="4090156">//&nbsp;by&nbsp;key.&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;pointer,&nbsp;so&nbsp;it&nbsp;can&nbsp;fit&nbsp;in&nbsp;a&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="comment" id="4090225">//&nbsp;interface&nbsp;value&nbsp;without&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4090264">type</span>&nbsp;<span class="ident" id="4090269">headerSorter</span>&nbsp;<span class="keyword" id="4090282">struct</span>&nbsp;<span class="op" id="4090289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090292">kvs</span>&nbsp;<span class="op" id="4090296">[</span><span class="op" id="4090297">]</span><span class="ident" id="4090298">keyValues</span><br>
<span class="lineno"></span><span class="op" id="4090308">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="4090311">func</span>&nbsp;<span class="op" id="4090316">(</span><span class="ident" id="4090317">s</span>&nbsp;<span class="op" id="4090319">*</span><span class="ident" id="4090320">headerSorter</span><span class="op" id="4090332">)</span>&nbsp;<span class="ident" id="4090334">Len</span><span class="op" id="4090337">(</span><span class="op" id="4090338">)</span>&nbsp;<span class="builtintype" id="4090340">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090354">{</span>&nbsp;<span class="keyword" id="4090356">return</span>&nbsp;<span class="builtinfunc" id="4090363">len</span><span class="op" id="4090366">(</span><span class="ident" id="4090367">s</span><span class="op" id="4090368">.</span><span class="ident" id="4090369">kvs</span><span class="op" id="4090372">)</span>&nbsp;<span class="op" id="4090374">}</span><br>
<span class="lineno"></span><span class="keyword" id="4090376">func</span>&nbsp;<span class="op" id="4090381">(</span><span class="ident" id="4090382">s</span>&nbsp;<span class="op" id="4090384">*</span><span class="ident" id="4090385">headerSorter</span><span class="op" id="4090397">)</span>&nbsp;<span class="ident" id="4090399">Swap</span><span class="op" id="4090403">(</span><span class="ident" id="4090404">i</span><span class="op" id="4090405">,</span>&nbsp;<span class="ident" id="4090407">j</span>&nbsp;<span class="builtintype" id="4090409">int</span><span class="op" id="4090412">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4090419">{</span>&nbsp;<span class="ident" id="4090421">s</span><span class="op" id="4090422">.</span><span class="ident" id="4090423">kvs</span><span class="op" id="4090426">[</span><span class="ident" id="4090427">i</span><span class="op" id="4090428">]</span><span class="op" id="4090429">,</span>&nbsp;<span class="ident" id="4090431">s</span><span class="op" id="4090432">.</span><span class="ident" id="4090433">kvs</span><span class="op" id="4090436">[</span><span class="ident" id="4090437">j</span><span class="op" id="4090438">]</span>&nbsp;<span class="op" id="4090440">=</span>&nbsp;<span class="ident" id="4090442">s</span><span class="op" id="4090443">.</span><span class="ident" id="4090444">kvs</span><span class="op" id="4090447">[</span><span class="ident" id="4090448">j</span><span class="op" id="4090449">]</span><span class="op" id="4090450">,</span>&nbsp;<span class="ident" id="4090452">s</span><span class="op" id="4090453">.</span><span class="ident" id="4090454">kvs</span><span class="op" id="4090457">[</span><span class="ident" id="4090458">i</span><span class="op" id="4090459">]</span>&nbsp;<span class="op" id="4090461">}</span><br>
<span class="lineno"></span><span class="keyword" id="4090463">func</span>&nbsp;<span class="op" id="4090468">(</span><span class="ident" id="4090469">s</span>&nbsp;<span class="op" id="4090471">*</span><span class="ident" id="4090472">headerSorter</span><span class="op" id="4090484">)</span>&nbsp;<span class="ident" id="4090486">Less</span><span class="op" id="4090490">(</span><span class="ident" id="4090491">i</span><span class="op" id="4090492">,</span>&nbsp;<span class="ident" id="4090494">j</span>&nbsp;<span class="builtintype" id="4090496">int</span><span class="op" id="4090499">)</span>&nbsp;<span class="builtintype" id="4090501">bool</span>&nbsp;<span class="op" id="4090506">{</span>&nbsp;<span class="keyword" id="4090508">return</span>&nbsp;<span class="ident" id="4090515">s</span><span class="op" id="4090516">.</span><span class="ident" id="4090517">kvs</span><span class="op" id="4090520">[</span><span class="ident" id="4090521">i</span><span class="op" id="4090522">]</span><span class="op" id="4090523">.</span><span class="ident" id="4090524">key</span>&nbsp;<span class="op" id="4090528">&lt;</span>&nbsp;<span class="ident" id="4090530">s</span><span class="op" id="4090531">.</span><span class="ident" id="4090532">kvs</span><span class="op" id="4090535">[</span><span class="ident" id="4090536">j</span><span class="op" id="4090537">]</span><span class="op" id="4090538">.</span><span class="ident" id="4090539">key</span>&nbsp;<span class="op" id="4090543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="4090546">var</span>&nbsp;<span class="ident" id="4090550">headerSorterPool</span>&nbsp;<span class="op" id="4090567">=</span>&nbsp;<span class="ident" id="4090569">sync</span><span class="op" id="4090573">.</span><span class="ident" id="4090574">Pool</span><span class="op" id="4090578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090581">New</span><span class="op" id="4090584">:</span>&nbsp;<span class="keyword" id="4090586">func</span><span class="op" id="4090590">(</span><span class="op" id="4090591">)</span>&nbsp;<span class="keyword" id="4090593">interface</span><span class="op" id="4090602">{</span><span class="op" id="4090603">}</span>&nbsp;<span class="op" id="4090605">{</span>&nbsp;<span class="keyword" id="4090607">return</span>&nbsp;<span class="builtinfunc" id="4090614">new</span><span class="op" id="4090617">(</span><span class="ident" id="4090618">headerSorter</span><span class="op" id="4090630">)</span>&nbsp;<span class="op" id="4090632">}</span><span class="op" id="4090633">,</span><br>
<span class="lineno"></span><span class="op" id="4090635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4090638">//&nbsp;sortedKeyValues&nbsp;returns&nbsp;h&#39;s&nbsp;keys&nbsp;sorted&nbsp;in&nbsp;the&nbsp;returned&nbsp;kvs</span><br>
<span class="lineno">125</span><span class="comment" id="4090701">//&nbsp;slice.&nbsp;The&nbsp;headerSorter&nbsp;used&nbsp;to&nbsp;sort&nbsp;is&nbsp;also&nbsp;returned,&nbsp;for&nbsp;possible</span><br>
<span class="lineno"></span><span class="comment" id="4090772">//&nbsp;return&nbsp;to&nbsp;headerSorterCache.</span><br>
<span class="lineno"></span><span class="keyword" id="4090804">func</span>&nbsp;<span class="op" id="4090809">(</span><span class="ident" id="4090810">h</span>&nbsp;<span class="ident" id="4090812">Header</span><span class="op" id="4090818">)</span>&nbsp;<span class="ident" id="4090820">sortedKeyValues</span><span class="op" id="4090835">(</span><span class="ident" id="4090836">exclude</span>&nbsp;<span class="keyword" id="4090844">map</span><span class="op" id="4090847">[</span><span class="builtintype" id="4090848">string</span><span class="op" id="4090854">]</span><span class="builtintype" id="4090855">bool</span><span class="op" id="4090859">)</span>&nbsp;<span class="op" id="4090861">(</span><span class="ident" id="4090862">kvs</span>&nbsp;<span class="op" id="4090866">[</span><span class="op" id="4090867">]</span><span class="ident" id="4090868">keyValues</span><span class="op" id="4090877">,</span>&nbsp;<span class="ident" id="4090879">hs</span>&nbsp;<span class="op" id="4090882">*</span><span class="ident" id="4090883">headerSorter</span><span class="op" id="4090895">)</span>&nbsp;<span class="op" id="4090897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090900">hs</span>&nbsp;<span class="op" id="4090903">=</span>&nbsp;<span class="ident" id="4090905">headerSorterPool</span><span class="op" id="4090921">.</span><span class="ident" id="4090922">Get</span><span class="op" id="4090925">(</span><span class="op" id="4090926">)</span><span class="op" id="4090927">.</span><span class="op" id="4090928">(</span><span class="op" id="4090929">*</span><span class="ident" id="4090930">headerSorter</span><span class="op" id="4090942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4090945">if</span>&nbsp;<span class="builtinfunc" id="4090948">cap</span><span class="op" id="4090951">(</span><span class="ident" id="4090952">hs</span><span class="op" id="4090954">.</span><span class="ident" id="4090955">kvs</span><span class="op" id="4090958">)</span>&nbsp;<span class="op" id="4090960">&lt;</span>&nbsp;<span class="builtinfunc" id="4090962">len</span><span class="op" id="4090965">(</span><span class="ident" id="4090966">h</span><span class="op" id="4090967">)</span>&nbsp;<span class="op" id="4090969">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4090973">hs</span><span class="op" id="4090975">.</span><span class="ident" id="4090976">kvs</span>&nbsp;<span class="op" id="4090980">=</span>&nbsp;<span class="builtinfunc" id="4090982">make</span><span class="op" id="4090986">(</span><span class="op" id="4090987">[</span><span class="op" id="4090988">]</span><span class="ident" id="4090989">keyValues</span><span class="op" id="4090998">,</span>&nbsp;<span class="num" id="4091000">0</span><span class="op" id="4091001">,</span>&nbsp;<span class="builtinfunc" id="4091003">len</span><span class="op" id="4091006">(</span><span class="ident" id="4091007">h</span><span class="op" id="4091008">)</span><span class="op" id="4091009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091015">kvs</span>&nbsp;<span class="op" id="4091019">=</span>&nbsp;<span class="ident" id="4091021">hs</span><span class="op" id="4091023">.</span><span class="ident" id="4091024">kvs</span><span class="op" id="4091027">[</span><span class="op" id="4091028">:</span><span class="num" id="4091029">0</span><span class="op" id="4091030">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091033">for</span>&nbsp;<span class="ident" id="4091037">k</span><span class="op" id="4091038">,</span>&nbsp;<span class="ident" id="4091040">vv</span>&nbsp;<span class="op" id="4091043">:=</span>&nbsp;<span class="keyword" id="4091046">range</span>&nbsp;<span class="ident" id="4091052">h</span>&nbsp;<span class="op" id="4091054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091058">if</span>&nbsp;<span class="op" id="4091061">!</span><span class="ident" id="4091062">exclude</span><span class="op" id="4091069">[</span><span class="ident" id="4091070">k</span><span class="op" id="4091071">]</span>&nbsp;<span class="op" id="4091073">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091078">kvs</span>&nbsp;<span class="op" id="4091082">=</span>&nbsp;<span class="builtinfunc" id="4091084">append</span><span class="op" id="4091090">(</span><span class="ident" id="4091091">kvs</span><span class="op" id="4091094">,</span>&nbsp;<span class="ident" id="4091096">keyValues</span><span class="op" id="4091105">{</span><span class="ident" id="4091106">k</span><span class="op" id="4091107">,</span>&nbsp;<span class="ident" id="4091109">vv</span><span class="op" id="4091111">}</span><span class="op" id="4091112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091122">hs</span><span class="op" id="4091124">.</span><span class="ident" id="4091125">kvs</span>&nbsp;<span class="op" id="4091129">=</span>&nbsp;<span class="ident" id="4091131">kvs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091136">sort</span><span class="op" id="4091140">.</span><span class="ident" id="4091141">Sort</span><span class="op" id="4091145">(</span><span class="ident" id="4091146">hs</span><span class="op" id="4091148">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091151">return</span>&nbsp;<span class="ident" id="4091158">kvs</span><span class="op" id="4091161">,</span>&nbsp;<span class="ident" id="4091163">hs</span><br>
<span class="lineno"></span><span class="op" id="4091166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4091169">//&nbsp;WriteSubset&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="4091216">//&nbsp;If&nbsp;exclude&nbsp;is&nbsp;not&nbsp;nil,&nbsp;keys&nbsp;where&nbsp;exclude[key]&nbsp;==&nbsp;true&nbsp;are&nbsp;not&nbsp;written.</span><br>
<span class="lineno">145</span><span class="keyword" id="4091291">func</span>&nbsp;<span class="op" id="4091296">(</span><span class="ident" id="4091297">h</span>&nbsp;<span class="ident" id="4091299">Header</span><span class="op" id="4091305">)</span>&nbsp;<span class="ident" id="4091307">WriteSubset</span><span class="op" id="4091318">(</span><span class="ident" id="4091319">w</span>&nbsp;<span class="ident" id="4091321">io</span><span class="op" id="4091323">.</span><span class="ident" id="4091324">Writer</span><span class="op" id="4091330">,</span>&nbsp;<span class="ident" id="4091332">exclude</span>&nbsp;<span class="keyword" id="4091340">map</span><span class="op" id="4091343">[</span><span class="builtintype" id="4091344">string</span><span class="op" id="4091350">]</span><span class="builtintype" id="4091351">bool</span><span class="op" id="4091355">)</span>&nbsp;<span class="builtintype" id="4091357">error</span>&nbsp;<span class="op" id="4091363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091366">ws</span><span class="op" id="4091368">,</span>&nbsp;<span class="ident" id="4091370">ok</span>&nbsp;<span class="op" id="4091373">:=</span>&nbsp;<span class="ident" id="4091376">w</span><span class="op" id="4091377">.</span><span class="op" id="4091378">(</span><span class="ident" id="4091379">writeStringer</span><span class="op" id="4091392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091395">if</span>&nbsp;<span class="op" id="4091398">!</span><span class="ident" id="4091399">ok</span>&nbsp;<span class="op" id="4091402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091406">ws</span>&nbsp;<span class="op" id="4091409">=</span>&nbsp;<span class="ident" id="4091411">stringWriter</span><span class="op" id="4091423">{</span><span class="ident" id="4091424">w</span><span class="op" id="4091425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091428">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091431">kvs</span><span class="op" id="4091434">,</span>&nbsp;<span class="ident" id="4091436">sorter</span>&nbsp;<span class="op" id="4091443">:=</span>&nbsp;<span class="ident" id="4091446">h</span><span class="op" id="4091447">.</span><span class="ident" id="4091448">sortedKeyValues</span><span class="op" id="4091463">(</span><span class="ident" id="4091464">exclude</span><span class="op" id="4091471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091474">for</span>&nbsp;<span class="ident" id="4091478">_</span><span class="op" id="4091479">,</span>&nbsp;<span class="ident" id="4091481">kv</span>&nbsp;<span class="op" id="4091484">:=</span>&nbsp;<span class="keyword" id="4091487">range</span>&nbsp;<span class="ident" id="4091493">kvs</span>&nbsp;<span class="op" id="4091497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091501">for</span>&nbsp;<span class="ident" id="4091505">_</span><span class="op" id="4091506">,</span>&nbsp;<span class="ident" id="4091508">v</span>&nbsp;<span class="op" id="4091510">:=</span>&nbsp;<span class="keyword" id="4091513">range</span>&nbsp;<span class="ident" id="4091519">kv</span><span class="op" id="4091521">.</span><span class="ident" id="4091522">values</span>&nbsp;<span class="op" id="4091529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091534">v</span>&nbsp;<span class="op" id="4091536">=</span>&nbsp;<span class="ident" id="4091538">headerNewlineToSpace</span><span class="op" id="4091558">.</span><span class="ident" id="4091559">Replace</span><span class="op" id="4091566">(</span><span class="ident" id="4091567">v</span><span class="op" id="4091568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091573">v</span>&nbsp;<span class="op" id="4091575">=</span>&nbsp;<span class="ident" id="4091577">textproto</span><span class="op" id="4091586">.</span><span class="ident" id="4091587">TrimString</span><span class="op" id="4091597">(</span><span class="ident" id="4091598">v</span><span class="op" id="4091599">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091604">for</span>&nbsp;<span class="ident" id="4091608">_</span><span class="op" id="4091609">,</span>&nbsp;<span class="ident" id="4091611">s</span>&nbsp;<span class="op" id="4091613">:=</span>&nbsp;<span class="keyword" id="4091616">range</span>&nbsp;<span class="op" id="4091622">[</span><span class="op" id="4091623">]</span><span class="builtintype" id="4091624">string</span><span class="op" id="4091630">{</span><span class="ident" id="4091631">kv</span><span class="op" id="4091633">.</span><span class="ident" id="4091634">key</span><span class="op" id="4091637">,</span>&nbsp;<span class="string" id="4091639">&#34;:&nbsp;&#34;</span><span class="op" id="4091643">,</span>&nbsp;<span class="ident" id="4091645">v</span><span class="op" id="4091646">,</span>&nbsp;<span class="string" id="4091648">&#34;\r\n&#34;</span><span class="op" id="4091654">}</span>&nbsp;<span class="op" id="4091656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091662">if</span>&nbsp;<span class="ident" id="4091665">_</span><span class="op" id="4091666">,</span>&nbsp;<span class="ident" id="4091668">err</span>&nbsp;<span class="op" id="4091672">:=</span>&nbsp;<span class="ident" id="4091675">ws</span><span class="op" id="4091677">.</span><span class="ident" id="4091678">WriteString</span><span class="op" id="4091689">(</span><span class="ident" id="4091690">s</span><span class="op" id="4091691">)</span><span class="op" id="4091692">;</span>&nbsp;<span class="ident" id="4091694">err</span>&nbsp;<span class="op" id="4091698">!=</span>&nbsp;<span class="builtintype" id="4091701">nil</span>&nbsp;<span class="op" id="4091705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091712">return</span>&nbsp;<span class="ident" id="4091719">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091732">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4091739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4091742">headerSorterPool</span><span class="op" id="4091758">.</span><span class="ident" id="4091759">Put</span><span class="op" id="4091762">(</span><span class="ident" id="4091763">sorter</span><span class="op" id="4091769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4091772">return</span>&nbsp;<span class="builtintype" id="4091779">nil</span><br>
<span class="lineno"></span><span class="op" id="4091783">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="4091786">//&nbsp;CanonicalHeaderKey&nbsp;returns&nbsp;the&nbsp;canonical&nbsp;format&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4091844">//&nbsp;header&nbsp;key&nbsp;s.&nbsp;&nbsp;The&nbsp;canonicalization&nbsp;converts&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="4091902">//&nbsp;letter&nbsp;and&nbsp;any&nbsp;letter&nbsp;following&nbsp;a&nbsp;hyphen&nbsp;to&nbsp;upper&nbsp;case;</span><br>
<span class="lineno"></span><span class="comment" id="4091961">//&nbsp;the&nbsp;rest&nbsp;are&nbsp;converted&nbsp;to&nbsp;lowercase.&nbsp;&nbsp;For&nbsp;example,&nbsp;the</span><br>
<span class="lineno">170</span><span class="comment" id="4092019">//&nbsp;canonical&nbsp;key&nbsp;for&nbsp;&#34;accept-encoding&#34;&nbsp;is&nbsp;&#34;Accept-Encoding&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4092080">func</span>&nbsp;<span class="ident" id="4092085">CanonicalHeaderKey</span><span class="op" id="4092103">(</span><span class="ident" id="4092104">s</span>&nbsp;<span class="builtintype" id="4092106">string</span><span class="op" id="4092112">)</span>&nbsp;<span class="builtintype" id="4092114">string</span>&nbsp;<span class="op" id="4092121">{</span>&nbsp;<span class="keyword" id="4092123">return</span>&nbsp;<span class="ident" id="4092130">textproto</span><span class="op" id="4092139">.</span><span class="ident" id="4092140">CanonicalMIMEHeaderKey</span><span class="op" id="4092162">(</span><span class="ident" id="4092163">s</span><span class="op" id="4092164">)</span>&nbsp;<span class="op" id="4092166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4092169">//&nbsp;hasToken&nbsp;reports&nbsp;whether&nbsp;token&nbsp;appears&nbsp;with&nbsp;v,&nbsp;ASCII</span><br>
<span class="lineno"></span><span class="comment" id="4092225">//&nbsp;case-insensitive,&nbsp;with&nbsp;space&nbsp;or&nbsp;comma&nbsp;boundaries.</span><br>
<span class="lineno">175</span><span class="comment" id="4092278">//&nbsp;token&nbsp;must&nbsp;be&nbsp;all&nbsp;lowercase.</span><br>
<span class="lineno"></span><span class="comment" id="4092310">//&nbsp;v&nbsp;may&nbsp;contain&nbsp;mixed&nbsp;cased.</span><br>
<span class="lineno"></span><span class="keyword" id="4092340">func</span>&nbsp;<span class="ident" id="4092345">hasToken</span><span class="op" id="4092353">(</span><span class="ident" id="4092354">v</span><span class="op" id="4092355">,</span>&nbsp;<span class="ident" id="4092357">token</span>&nbsp;<span class="builtintype" id="4092363">string</span><span class="op" id="4092369">)</span>&nbsp;<span class="builtintype" id="4092371">bool</span>&nbsp;<span class="op" id="4092376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092379">if</span>&nbsp;<span class="builtinfunc" id="4092382">len</span><span class="op" id="4092385">(</span><span class="ident" id="4092386">token</span><span class="op" id="4092391">)</span>&nbsp;<span class="op" id="4092393">&gt;</span>&nbsp;<span class="builtinfunc" id="4092395">len</span><span class="op" id="4092398">(</span><span class="ident" id="4092399">v</span><span class="op" id="4092400">)</span>&nbsp;<span class="op" id="4092402">||</span>&nbsp;<span class="ident" id="4092405">token</span>&nbsp;<span class="op" id="4092411">==</span>&nbsp;<span class="string" id="4092414">&#34;&#34;</span>&nbsp;<span class="op" id="4092417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092421">return</span>&nbsp;<span class="builtintype" id="4092428">false</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4092435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092438">if</span>&nbsp;<span class="ident" id="4092441">v</span>&nbsp;<span class="op" id="4092443">==</span>&nbsp;<span class="ident" id="4092446">token</span>&nbsp;<span class="op" id="4092452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092456">return</span>&nbsp;<span class="builtintype" id="4092463">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4092469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092472">for</span>&nbsp;<span class="ident" id="4092476">sp</span>&nbsp;<span class="op" id="4092479">:=</span>&nbsp;<span class="num" id="4092482">0</span><span class="op" id="4092483">;</span>&nbsp;<span class="ident" id="4092485">sp</span>&nbsp;<span class="op" id="4092488">&lt;=</span>&nbsp;<span class="builtinfunc" id="4092491">len</span><span class="op" id="4092494">(</span><span class="ident" id="4092495">v</span><span class="op" id="4092496">)</span><span class="op" id="4092497">-</span><span class="builtinfunc" id="4092498">len</span><span class="op" id="4092501">(</span><span class="ident" id="4092502">token</span><span class="op" id="4092507">)</span><span class="op" id="4092508">;</span>&nbsp;<span class="ident" id="4092510">sp</span><span class="op" id="4092512">++</span>&nbsp;<span class="op" id="4092515">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092519">//&nbsp;Check&nbsp;that&nbsp;first&nbsp;character&nbsp;is&nbsp;good.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092560">//&nbsp;The&nbsp;token&nbsp;is&nbsp;ASCII,&nbsp;so&nbsp;checking&nbsp;only&nbsp;a&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092616">//&nbsp;is&nbsp;sufficient.&nbsp;&nbsp;We&nbsp;skip&nbsp;this&nbsp;potential&nbsp;starting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092669">//&nbsp;position&nbsp;if&nbsp;both&nbsp;the&nbsp;first&nbsp;byte&nbsp;and&nbsp;its&nbsp;potential</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092724">//&nbsp;ASCII&nbsp;uppercase&nbsp;equivalent&nbsp;(b|0x20)&nbsp;don&#39;t&nbsp;match.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092778">//&nbsp;False&nbsp;positives&nbsp;(&#39;^&#39;&nbsp;=&gt;&nbsp;&#39;~&#39;)&nbsp;are&nbsp;caught&nbsp;by&nbsp;EqualFold.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092837">if</span>&nbsp;<span class="ident" id="4092840">b</span>&nbsp;<span class="op" id="4092842">:=</span>&nbsp;<span class="ident" id="4092845">v</span><span class="op" id="4092846">[</span><span class="ident" id="4092847">sp</span><span class="op" id="4092849">]</span><span class="op" id="4092850">;</span>&nbsp;<span class="ident" id="4092852">b</span>&nbsp;<span class="op" id="4092854">!=</span>&nbsp;<span class="ident" id="4092857">token</span><span class="op" id="4092862">[</span><span class="num" id="4092863">0</span><span class="op" id="4092864">]</span>&nbsp;<span class="op" id="4092866">&amp;&amp;</span>&nbsp;<span class="ident" id="4092869">b</span><span class="op" id="4092870">|</span><span class="num" id="4092871">0x20</span>&nbsp;<span class="op" id="4092876">!=</span>&nbsp;<span class="ident" id="4092879">token</span><span class="op" id="4092884">[</span><span class="num" id="4092885">0</span><span class="op" id="4092886">]</span>&nbsp;<span class="op" id="4092888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092893">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4092904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4092908">//&nbsp;Check&nbsp;that&nbsp;start&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4092964">if</span>&nbsp;<span class="ident" id="4092967">sp</span>&nbsp;<span class="op" id="4092970">&gt;</span>&nbsp;<span class="num" id="4092972">0</span>&nbsp;<span class="op" id="4092974">&amp;&amp;</span>&nbsp;<span class="op" id="4092977">!</span><span class="ident" id="4092978">isTokenBoundary</span><span class="op" id="4092993">(</span><span class="ident" id="4092994">v</span><span class="op" id="4092995">[</span><span class="ident" id="4092996">sp</span><span class="op" id="4092998">-</span><span class="num" id="4092999">1</span><span class="op" id="4093000">]</span><span class="op" id="4093001">)</span>&nbsp;<span class="op" id="4093003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093008">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4093019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4093023">//&nbsp;Check&nbsp;that&nbsp;end&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093077">if</span>&nbsp;<span class="ident" id="4093080">endPos</span>&nbsp;<span class="op" id="4093087">:=</span>&nbsp;<span class="ident" id="4093090">sp</span>&nbsp;<span class="op" id="4093093">+</span>&nbsp;<span class="builtinfunc" id="4093095">len</span><span class="op" id="4093098">(</span><span class="ident" id="4093099">token</span><span class="op" id="4093104">)</span><span class="op" id="4093105">;</span>&nbsp;<span class="ident" id="4093107">endPos</span>&nbsp;<span class="op" id="4093114">!=</span>&nbsp;<span class="builtinfunc" id="4093117">len</span><span class="op" id="4093120">(</span><span class="ident" id="4093121">v</span><span class="op" id="4093122">)</span>&nbsp;<span class="op" id="4093124">&amp;&amp;</span>&nbsp;<span class="op" id="4093127">!</span><span class="ident" id="4093128">isTokenBoundary</span><span class="op" id="4093143">(</span><span class="ident" id="4093144">v</span><span class="op" id="4093145">[</span><span class="ident" id="4093146">endPos</span><span class="op" id="4093152">]</span><span class="op" id="4093153">)</span>&nbsp;<span class="op" id="4093155">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093160">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4093171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093175">if</span>&nbsp;<span class="ident" id="4093178">strings</span><span class="op" id="4093185">.</span><span class="ident" id="4093186">EqualFold</span><span class="op" id="4093195">(</span><span class="ident" id="4093196">v</span><span class="op" id="4093197">[</span><span class="ident" id="4093198">sp</span><span class="op" id="4093200">:</span><span class="ident" id="4093201">sp</span><span class="op" id="4093203">+</span><span class="builtinfunc" id="4093204">len</span><span class="op" id="4093207">(</span><span class="ident" id="4093208">token</span><span class="op" id="4093213">)</span><span class="op" id="4093214">]</span><span class="op" id="4093215">,</span>&nbsp;<span class="ident" id="4093217">token</span><span class="op" id="4093222">)</span>&nbsp;<span class="op" id="4093224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093229">return</span>&nbsp;<span class="builtintype" id="4093236">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4093243">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4093246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093249">return</span>&nbsp;<span class="builtintype" id="4093256">false</span><br>
<span class="lineno"></span><span class="op" id="4093262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4093265">func</span>&nbsp;<span class="ident" id="4093270">isTokenBoundary</span><span class="op" id="4093285">(</span><span class="ident" id="4093286">b</span>&nbsp;<span class="builtintype" id="4093288">byte</span><span class="op" id="4093292">)</span>&nbsp;<span class="builtintype" id="4093294">bool</span>&nbsp;<span class="op" id="4093299">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4093302">return</span>&nbsp;<span class="ident" id="4093309">b</span>&nbsp;<span class="op" id="4093311">==</span>&nbsp;<span class="string" id="4093314">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4093318">||</span>&nbsp;<span class="ident" id="4093321">b</span>&nbsp;<span class="op" id="4093323">==</span>&nbsp;<span class="string" id="4093326">&#39;,&#39;</span>&nbsp;<span class="op" id="4093330">||</span>&nbsp;<span class="ident" id="4093333">b</span>&nbsp;<span class="op" id="4093335">==</span>&nbsp;<span class="string" id="4093338">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="4093343">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
