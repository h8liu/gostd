<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8085313">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8085368">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8085422">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8085473">package</span>&nbsp;<span class="ident" id="8085481">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8085486">import</span>&nbsp;<span class="op" id="8085493">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8085496">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8085505">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8085515">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8085525">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8085528">var</span>&nbsp;<span class="ident" id="8085532">writeTests</span>&nbsp;<span class="op" id="8085543">=</span>&nbsp;<span class="op" id="8085545">[</span><span class="op" id="8085546">]</span><span class="keyword" id="8085547">struct</span>&nbsp;<span class="op" id="8085554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085557">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8085565">[</span><span class="op" id="8085566">]</span><span class="op" id="8085567">[</span><span class="op" id="8085568">]</span><span class="builtintype" id="8085569">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085577">Output</span>&nbsp;&nbsp;<span class="builtintype" id="8085585">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085593">UseCRLF</span>&nbsp;<span class="builtintype" id="8085601">bool</span><br>
<span class="lineno"></span><span class="op" id="8085606">}</span><span class="op" id="8085607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085610">{</span><span class="ident" id="8085611">Input</span><span class="op" id="8085616">:</span>&nbsp;<span class="op" id="8085618">[</span><span class="op" id="8085619">]</span><span class="op" id="8085620">[</span><span class="op" id="8085621">]</span><span class="builtintype" id="8085622">string</span><span class="op" id="8085628">{</span><span class="op" id="8085629">{</span><span class="string" id="8085630">&#34;abc&#34;</span><span class="op" id="8085635">}</span><span class="op" id="8085636">}</span><span class="op" id="8085637">,</span>&nbsp;<span class="ident" id="8085639">Output</span><span class="op" id="8085645">:</span>&nbsp;<span class="string" id="8085647">&#34;abc\n&#34;</span><span class="op" id="8085654">}</span><span class="op" id="8085655">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085658">{</span><span class="ident" id="8085659">Input</span><span class="op" id="8085664">:</span>&nbsp;<span class="op" id="8085666">[</span><span class="op" id="8085667">]</span><span class="op" id="8085668">[</span><span class="op" id="8085669">]</span><span class="builtintype" id="8085670">string</span><span class="op" id="8085676">{</span><span class="op" id="8085677">{</span><span class="string" id="8085678">&#34;abc&#34;</span><span class="op" id="8085683">}</span><span class="op" id="8085684">}</span><span class="op" id="8085685">,</span>&nbsp;<span class="ident" id="8085687">Output</span><span class="op" id="8085693">:</span>&nbsp;<span class="string" id="8085695">&#34;abc\r\n&#34;</span><span class="op" id="8085704">,</span>&nbsp;<span class="ident" id="8085706">UseCRLF</span><span class="op" id="8085713">:</span>&nbsp;<span class="builtintype" id="8085715">true</span><span class="op" id="8085719">}</span><span class="op" id="8085720">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085723">{</span><span class="ident" id="8085724">Input</span><span class="op" id="8085729">:</span>&nbsp;<span class="op" id="8085731">[</span><span class="op" id="8085732">]</span><span class="op" id="8085733">[</span><span class="op" id="8085734">]</span><span class="builtintype" id="8085735">string</span><span class="op" id="8085741">{</span><span class="op" id="8085742">{</span><span class="string" id="8085743">`&#34;abc&#34;`</span><span class="op" id="8085750">}</span><span class="op" id="8085751">}</span><span class="op" id="8085752">,</span>&nbsp;<span class="ident" id="8085754">Output</span><span class="op" id="8085760">:</span>&nbsp;<span class="string" id="8085762">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8085774">+</span>&nbsp;<span class="string" id="8085776">&#34;\n&#34;</span><span class="op" id="8085780">}</span><span class="op" id="8085781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085784">{</span><span class="ident" id="8085785">Input</span><span class="op" id="8085790">:</span>&nbsp;<span class="op" id="8085792">[</span><span class="op" id="8085793">]</span><span class="op" id="8085794">[</span><span class="op" id="8085795">]</span><span class="builtintype" id="8085796">string</span><span class="op" id="8085802">{</span><span class="op" id="8085803">{</span><span class="string" id="8085804">`a&#34;b`</span><span class="op" id="8085809">}</span><span class="op" id="8085810">}</span><span class="op" id="8085811">,</span>&nbsp;<span class="ident" id="8085813">Output</span><span class="op" id="8085819">:</span>&nbsp;<span class="string" id="8085821">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="8085830">+</span>&nbsp;<span class="string" id="8085832">&#34;\n&#34;</span><span class="op" id="8085836">}</span><span class="op" id="8085837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085840">{</span><span class="ident" id="8085841">Input</span><span class="op" id="8085846">:</span>&nbsp;<span class="op" id="8085848">[</span><span class="op" id="8085849">]</span><span class="op" id="8085850">[</span><span class="op" id="8085851">]</span><span class="builtintype" id="8085852">string</span><span class="op" id="8085858">{</span><span class="op" id="8085859">{</span><span class="string" id="8085860">`&#34;a&#34;b&#34;`</span><span class="op" id="8085867">}</span><span class="op" id="8085868">}</span><span class="op" id="8085869">,</span>&nbsp;<span class="ident" id="8085871">Output</span><span class="op" id="8085877">:</span>&nbsp;<span class="string" id="8085879">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8085892">+</span>&nbsp;<span class="string" id="8085894">&#34;\n&#34;</span><span class="op" id="8085898">}</span><span class="op" id="8085899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085902">{</span><span class="ident" id="8085903">Input</span><span class="op" id="8085908">:</span>&nbsp;<span class="op" id="8085910">[</span><span class="op" id="8085911">]</span><span class="op" id="8085912">[</span><span class="op" id="8085913">]</span><span class="builtintype" id="8085914">string</span><span class="op" id="8085920">{</span><span class="op" id="8085921">{</span><span class="string" id="8085922">&#34;&nbsp;abc&#34;</span><span class="op" id="8085928">}</span><span class="op" id="8085929">}</span><span class="op" id="8085930">,</span>&nbsp;<span class="ident" id="8085932">Output</span><span class="op" id="8085938">:</span>&nbsp;<span class="string" id="8085940">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="8085949">+</span>&nbsp;<span class="string" id="8085951">&#34;\n&#34;</span><span class="op" id="8085955">}</span><span class="op" id="8085956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085959">{</span><span class="ident" id="8085960">Input</span><span class="op" id="8085965">:</span>&nbsp;<span class="op" id="8085967">[</span><span class="op" id="8085968">]</span><span class="op" id="8085969">[</span><span class="op" id="8085970">]</span><span class="builtintype" id="8085971">string</span><span class="op" id="8085977">{</span><span class="op" id="8085978">{</span><span class="string" id="8085979">&#34;abc,def&#34;</span><span class="op" id="8085988">}</span><span class="op" id="8085989">}</span><span class="op" id="8085990">,</span>&nbsp;<span class="ident" id="8085992">Output</span><span class="op" id="8085998">:</span>&nbsp;<span class="string" id="8086000">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="8086012">+</span>&nbsp;<span class="string" id="8086014">&#34;\n&#34;</span><span class="op" id="8086018">}</span><span class="op" id="8086019">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086022">{</span><span class="ident" id="8086023">Input</span><span class="op" id="8086028">:</span>&nbsp;<span class="op" id="8086030">[</span><span class="op" id="8086031">]</span><span class="op" id="8086032">[</span><span class="op" id="8086033">]</span><span class="builtintype" id="8086034">string</span><span class="op" id="8086040">{</span><span class="op" id="8086041">{</span><span class="string" id="8086042">&#34;abc&#34;</span><span class="op" id="8086047">,</span>&nbsp;<span class="string" id="8086049">&#34;def&#34;</span><span class="op" id="8086054">}</span><span class="op" id="8086055">}</span><span class="op" id="8086056">,</span>&nbsp;<span class="ident" id="8086058">Output</span><span class="op" id="8086064">:</span>&nbsp;<span class="string" id="8086066">&#34;abc,def\n&#34;</span><span class="op" id="8086077">}</span><span class="op" id="8086078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086081">{</span><span class="ident" id="8086082">Input</span><span class="op" id="8086087">:</span>&nbsp;<span class="op" id="8086089">[</span><span class="op" id="8086090">]</span><span class="op" id="8086091">[</span><span class="op" id="8086092">]</span><span class="builtintype" id="8086093">string</span><span class="op" id="8086099">{</span><span class="op" id="8086100">{</span><span class="string" id="8086101">&#34;abc&#34;</span><span class="op" id="8086106">}</span><span class="op" id="8086107">,</span>&nbsp;<span class="op" id="8086109">{</span><span class="string" id="8086110">&#34;def&#34;</span><span class="op" id="8086115">}</span><span class="op" id="8086116">}</span><span class="op" id="8086117">,</span>&nbsp;<span class="ident" id="8086119">Output</span><span class="op" id="8086125">:</span>&nbsp;<span class="string" id="8086127">&#34;abc\ndef\n&#34;</span><span class="op" id="8086139">}</span><span class="op" id="8086140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086143">{</span><span class="ident" id="8086144">Input</span><span class="op" id="8086149">:</span>&nbsp;<span class="op" id="8086151">[</span><span class="op" id="8086152">]</span><span class="op" id="8086153">[</span><span class="op" id="8086154">]</span><span class="builtintype" id="8086155">string</span><span class="op" id="8086161">{</span><span class="op" id="8086162">{</span><span class="string" id="8086163">&#34;abc\ndef&#34;</span><span class="op" id="8086173">}</span><span class="op" id="8086174">}</span><span class="op" id="8086175">,</span>&nbsp;<span class="ident" id="8086177">Output</span><span class="op" id="8086183">:</span>&nbsp;<span class="string" id="8086185">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="8086201">}</span><span class="op" id="8086202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086205">{</span><span class="ident" id="8086206">Input</span><span class="op" id="8086211">:</span>&nbsp;<span class="op" id="8086213">[</span><span class="op" id="8086214">]</span><span class="op" id="8086215">[</span><span class="op" id="8086216">]</span><span class="builtintype" id="8086217">string</span><span class="op" id="8086223">{</span><span class="op" id="8086224">{</span><span class="string" id="8086225">&#34;abc\ndef&#34;</span><span class="op" id="8086235">}</span><span class="op" id="8086236">}</span><span class="op" id="8086237">,</span>&nbsp;<span class="ident" id="8086239">Output</span><span class="op" id="8086245">:</span>&nbsp;<span class="string" id="8086247">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="8086267">,</span>&nbsp;<span class="ident" id="8086269">UseCRLF</span><span class="op" id="8086276">:</span>&nbsp;<span class="builtintype" id="8086278">true</span><span class="op" id="8086282">}</span><span class="op" id="8086283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086286">{</span><span class="ident" id="8086287">Input</span><span class="op" id="8086292">:</span>&nbsp;<span class="op" id="8086294">[</span><span class="op" id="8086295">]</span><span class="op" id="8086296">[</span><span class="op" id="8086297">]</span><span class="builtintype" id="8086298">string</span><span class="op" id="8086304">{</span><span class="op" id="8086305">{</span><span class="string" id="8086306">&#34;abc\rdef&#34;</span><span class="op" id="8086316">}</span><span class="op" id="8086317">}</span><span class="op" id="8086318">,</span>&nbsp;<span class="ident" id="8086320">Output</span><span class="op" id="8086326">:</span>&nbsp;<span class="string" id="8086328">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="8086344">,</span>&nbsp;<span class="ident" id="8086346">UseCRLF</span><span class="op" id="8086353">:</span>&nbsp;<span class="builtintype" id="8086355">true</span><span class="op" id="8086359">}</span><span class="op" id="8086360">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086363">{</span><span class="ident" id="8086364">Input</span><span class="op" id="8086369">:</span>&nbsp;<span class="op" id="8086371">[</span><span class="op" id="8086372">]</span><span class="op" id="8086373">[</span><span class="op" id="8086374">]</span><span class="builtintype" id="8086375">string</span><span class="op" id="8086381">{</span><span class="op" id="8086382">{</span><span class="string" id="8086383">&#34;abc\rdef&#34;</span><span class="op" id="8086393">}</span><span class="op" id="8086394">}</span><span class="op" id="8086395">,</span>&nbsp;<span class="ident" id="8086397">Output</span><span class="op" id="8086403">:</span>&nbsp;<span class="string" id="8086405">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="8086421">,</span>&nbsp;<span class="ident" id="8086423">UseCRLF</span><span class="op" id="8086430">:</span>&nbsp;<span class="builtintype" id="8086432">false</span><span class="op" id="8086437">}</span><span class="op" id="8086438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086441">{</span><span class="ident" id="8086442">Input</span><span class="op" id="8086447">:</span>&nbsp;<span class="op" id="8086449">[</span><span class="op" id="8086450">]</span><span class="op" id="8086451">[</span><span class="op" id="8086452">]</span><span class="builtintype" id="8086453">string</span><span class="op" id="8086459">{</span><span class="op" id="8086460">{</span><span class="string" id="8086461">&#34;&#34;</span><span class="op" id="8086463">}</span><span class="op" id="8086464">}</span><span class="op" id="8086465">,</span>&nbsp;<span class="ident" id="8086467">Output</span><span class="op" id="8086473">:</span>&nbsp;<span class="string" id="8086475">&#34;\n&#34;</span><span class="op" id="8086479">}</span><span class="op" id="8086480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086483">{</span><span class="ident" id="8086484">Input</span><span class="op" id="8086489">:</span>&nbsp;<span class="op" id="8086491">[</span><span class="op" id="8086492">]</span><span class="op" id="8086493">[</span><span class="op" id="8086494">]</span><span class="builtintype" id="8086495">string</span><span class="op" id="8086501">{</span><span class="op" id="8086502">{</span><span class="string" id="8086503">&#34;&#34;</span><span class="op" id="8086505">,</span>&nbsp;<span class="string" id="8086507">&#34;&#34;</span><span class="op" id="8086509">}</span><span class="op" id="8086510">}</span><span class="op" id="8086511">,</span>&nbsp;<span class="ident" id="8086513">Output</span><span class="op" id="8086519">:</span>&nbsp;<span class="string" id="8086521">&#34;,\n&#34;</span><span class="op" id="8086526">}</span><span class="op" id="8086527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086530">{</span><span class="ident" id="8086531">Input</span><span class="op" id="8086536">:</span>&nbsp;<span class="op" id="8086538">[</span><span class="op" id="8086539">]</span><span class="op" id="8086540">[</span><span class="op" id="8086541">]</span><span class="builtintype" id="8086542">string</span><span class="op" id="8086548">{</span><span class="op" id="8086549">{</span><span class="string" id="8086550">&#34;&#34;</span><span class="op" id="8086552">,</span>&nbsp;<span class="string" id="8086554">&#34;&#34;</span><span class="op" id="8086556">,</span>&nbsp;<span class="string" id="8086558">&#34;&#34;</span><span class="op" id="8086560">}</span><span class="op" id="8086561">}</span><span class="op" id="8086562">,</span>&nbsp;<span class="ident" id="8086564">Output</span><span class="op" id="8086570">:</span>&nbsp;<span class="string" id="8086572">&#34;,,\n&#34;</span><span class="op" id="8086578">}</span><span class="op" id="8086579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086582">{</span><span class="ident" id="8086583">Input</span><span class="op" id="8086588">:</span>&nbsp;<span class="op" id="8086590">[</span><span class="op" id="8086591">]</span><span class="op" id="8086592">[</span><span class="op" id="8086593">]</span><span class="builtintype" id="8086594">string</span><span class="op" id="8086600">{</span><span class="op" id="8086601">{</span><span class="string" id="8086602">&#34;&#34;</span><span class="op" id="8086604">,</span>&nbsp;<span class="string" id="8086606">&#34;&#34;</span><span class="op" id="8086608">,</span>&nbsp;<span class="string" id="8086610">&#34;a&#34;</span><span class="op" id="8086613">}</span><span class="op" id="8086614">}</span><span class="op" id="8086615">,</span>&nbsp;<span class="ident" id="8086617">Output</span><span class="op" id="8086623">:</span>&nbsp;<span class="string" id="8086625">&#34;,,a\n&#34;</span><span class="op" id="8086632">}</span><span class="op" id="8086633">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086636">{</span><span class="ident" id="8086637">Input</span><span class="op" id="8086642">:</span>&nbsp;<span class="op" id="8086644">[</span><span class="op" id="8086645">]</span><span class="op" id="8086646">[</span><span class="op" id="8086647">]</span><span class="builtintype" id="8086648">string</span><span class="op" id="8086654">{</span><span class="op" id="8086655">{</span><span class="string" id="8086656">&#34;&#34;</span><span class="op" id="8086658">,</span>&nbsp;<span class="string" id="8086660">&#34;a&#34;</span><span class="op" id="8086663">,</span>&nbsp;<span class="string" id="8086665">&#34;&#34;</span><span class="op" id="8086667">}</span><span class="op" id="8086668">}</span><span class="op" id="8086669">,</span>&nbsp;<span class="ident" id="8086671">Output</span><span class="op" id="8086677">:</span>&nbsp;<span class="string" id="8086679">&#34;,a,\n&#34;</span><span class="op" id="8086686">}</span><span class="op" id="8086687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086690">{</span><span class="ident" id="8086691">Input</span><span class="op" id="8086696">:</span>&nbsp;<span class="op" id="8086698">[</span><span class="op" id="8086699">]</span><span class="op" id="8086700">[</span><span class="op" id="8086701">]</span><span class="builtintype" id="8086702">string</span><span class="op" id="8086708">{</span><span class="op" id="8086709">{</span><span class="string" id="8086710">&#34;&#34;</span><span class="op" id="8086712">,</span>&nbsp;<span class="string" id="8086714">&#34;a&#34;</span><span class="op" id="8086717">,</span>&nbsp;<span class="string" id="8086719">&#34;a&#34;</span><span class="op" id="8086722">}</span><span class="op" id="8086723">}</span><span class="op" id="8086724">,</span>&nbsp;<span class="ident" id="8086726">Output</span><span class="op" id="8086732">:</span>&nbsp;<span class="string" id="8086734">&#34;,a,a\n&#34;</span><span class="op" id="8086742">}</span><span class="op" id="8086743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086746">{</span><span class="ident" id="8086747">Input</span><span class="op" id="8086752">:</span>&nbsp;<span class="op" id="8086754">[</span><span class="op" id="8086755">]</span><span class="op" id="8086756">[</span><span class="op" id="8086757">]</span><span class="builtintype" id="8086758">string</span><span class="op" id="8086764">{</span><span class="op" id="8086765">{</span><span class="string" id="8086766">&#34;a&#34;</span><span class="op" id="8086769">,</span>&nbsp;<span class="string" id="8086771">&#34;&#34;</span><span class="op" id="8086773">,</span>&nbsp;<span class="string" id="8086775">&#34;&#34;</span><span class="op" id="8086777">}</span><span class="op" id="8086778">}</span><span class="op" id="8086779">,</span>&nbsp;<span class="ident" id="8086781">Output</span><span class="op" id="8086787">:</span>&nbsp;<span class="string" id="8086789">&#34;a,,\n&#34;</span><span class="op" id="8086796">}</span><span class="op" id="8086797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086800">{</span><span class="ident" id="8086801">Input</span><span class="op" id="8086806">:</span>&nbsp;<span class="op" id="8086808">[</span><span class="op" id="8086809">]</span><span class="op" id="8086810">[</span><span class="op" id="8086811">]</span><span class="builtintype" id="8086812">string</span><span class="op" id="8086818">{</span><span class="op" id="8086819">{</span><span class="string" id="8086820">&#34;a&#34;</span><span class="op" id="8086823">,</span>&nbsp;<span class="string" id="8086825">&#34;&#34;</span><span class="op" id="8086827">,</span>&nbsp;<span class="string" id="8086829">&#34;a&#34;</span><span class="op" id="8086832">}</span><span class="op" id="8086833">}</span><span class="op" id="8086834">,</span>&nbsp;<span class="ident" id="8086836">Output</span><span class="op" id="8086842">:</span>&nbsp;<span class="string" id="8086844">&#34;a,,a\n&#34;</span><span class="op" id="8086852">}</span><span class="op" id="8086853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086856">{</span><span class="ident" id="8086857">Input</span><span class="op" id="8086862">:</span>&nbsp;<span class="op" id="8086864">[</span><span class="op" id="8086865">]</span><span class="op" id="8086866">[</span><span class="op" id="8086867">]</span><span class="builtintype" id="8086868">string</span><span class="op" id="8086874">{</span><span class="op" id="8086875">{</span><span class="string" id="8086876">&#34;a&#34;</span><span class="op" id="8086879">,</span>&nbsp;<span class="string" id="8086881">&#34;a&#34;</span><span class="op" id="8086884">,</span>&nbsp;<span class="string" id="8086886">&#34;&#34;</span><span class="op" id="8086888">}</span><span class="op" id="8086889">}</span><span class="op" id="8086890">,</span>&nbsp;<span class="ident" id="8086892">Output</span><span class="op" id="8086898">:</span>&nbsp;<span class="string" id="8086900">&#34;a,a,\n&#34;</span><span class="op" id="8086908">}</span><span class="op" id="8086909">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086912">{</span><span class="ident" id="8086913">Input</span><span class="op" id="8086918">:</span>&nbsp;<span class="op" id="8086920">[</span><span class="op" id="8086921">]</span><span class="op" id="8086922">[</span><span class="op" id="8086923">]</span><span class="builtintype" id="8086924">string</span><span class="op" id="8086930">{</span><span class="op" id="8086931">{</span><span class="string" id="8086932">&#34;a&#34;</span><span class="op" id="8086935">,</span>&nbsp;<span class="string" id="8086937">&#34;a&#34;</span><span class="op" id="8086940">,</span>&nbsp;<span class="string" id="8086942">&#34;a&#34;</span><span class="op" id="8086945">}</span><span class="op" id="8086946">}</span><span class="op" id="8086947">,</span>&nbsp;<span class="ident" id="8086949">Output</span><span class="op" id="8086955">:</span>&nbsp;<span class="string" id="8086957">&#34;a,a,a\n&#34;</span><span class="op" id="8086966">}</span><span class="op" id="8086967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086970">{</span><span class="ident" id="8086971">Input</span><span class="op" id="8086976">:</span>&nbsp;<span class="op" id="8086978">[</span><span class="op" id="8086979">]</span><span class="op" id="8086980">[</span><span class="op" id="8086981">]</span><span class="builtintype" id="8086982">string</span><span class="op" id="8086988">{</span><span class="op" id="8086989">{</span><span class="string" id="8086990">`\.`</span><span class="op" id="8086994">}</span><span class="op" id="8086995">}</span><span class="op" id="8086996">,</span>&nbsp;<span class="ident" id="8086998">Output</span><span class="op" id="8087004">:</span>&nbsp;<span class="string" id="8087006">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="8087017">}</span><span class="op" id="8087018">,</span><br>
<span class="lineno"></span><span class="op" id="8087020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8087023">func</span>&nbsp;<span class="ident" id="8087028">TestWrite</span><span class="op" id="8087037">(</span><span class="ident" id="8087038">t</span>&nbsp;<span class="op" id="8087040">*</span><span class="ident" id="8087041">testing</span><span class="op" id="8087048">.</span><span class="ident" id="8087049">T</span><span class="op" id="8087050">)</span>&nbsp;<span class="op" id="8087052">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087055">for</span>&nbsp;<span class="ident" id="8087059">n</span><span class="op" id="8087060">,</span>&nbsp;<span class="ident" id="8087062">tt</span>&nbsp;<span class="op" id="8087065">:=</span>&nbsp;<span class="keyword" id="8087068">range</span>&nbsp;<span class="ident" id="8087074">writeTests</span>&nbsp;<span class="op" id="8087085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087089">b</span>&nbsp;<span class="op" id="8087091">:=</span>&nbsp;<span class="op" id="8087094">&amp;</span><span class="ident" id="8087095">bytes</span><span class="op" id="8087100">.</span><span class="ident" id="8087101">Buffer</span><span class="op" id="8087107">{</span><span class="op" id="8087108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087112">f</span>&nbsp;<span class="op" id="8087114">:=</span>&nbsp;<span class="ident" id="8087117">NewWriter</span><span class="op" id="8087126">(</span><span class="ident" id="8087127">b</span><span class="op" id="8087128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087132">f</span><span class="op" id="8087133">.</span><span class="ident" id="8087134">UseCRLF</span>&nbsp;<span class="op" id="8087142">=</span>&nbsp;<span class="ident" id="8087144">tt</span><span class="op" id="8087146">.</span><span class="ident" id="8087147">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087157">err</span>&nbsp;<span class="op" id="8087161">:=</span>&nbsp;<span class="ident" id="8087164">f</span><span class="op" id="8087165">.</span><span class="ident" id="8087166">WriteAll</span><span class="op" id="8087174">(</span><span class="ident" id="8087175">tt</span><span class="op" id="8087177">.</span><span class="ident" id="8087178">Input</span><span class="op" id="8087183">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087187">if</span>&nbsp;<span class="ident" id="8087190">err</span>&nbsp;<span class="op" id="8087194">!=</span>&nbsp;<span class="ident" id="8087197">nil</span>&nbsp;<span class="op" id="8087201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087206">t</span><span class="op" id="8087207">.</span><span class="ident" id="8087208">Errorf</span><span class="op" id="8087214">(</span><span class="string" id="8087215">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8087239">,</span>&nbsp;<span class="ident" id="8087241">err</span><span class="op" id="8087244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087252">out</span>&nbsp;<span class="op" id="8087256">:=</span>&nbsp;<span class="ident" id="8087259">b</span><span class="op" id="8087260">.</span><span class="ident" id="8087261">String</span><span class="op" id="8087267">(</span><span class="op" id="8087268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087272">if</span>&nbsp;<span class="ident" id="8087275">out</span>&nbsp;<span class="op" id="8087279">!=</span>&nbsp;<span class="ident" id="8087282">tt</span><span class="op" id="8087284">.</span><span class="ident" id="8087285">Output</span>&nbsp;<span class="op" id="8087292">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087297">t</span><span class="op" id="8087298">.</span><span class="ident" id="8087299">Errorf</span><span class="op" id="8087305">(</span><span class="string" id="8087306">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8087327">,</span>&nbsp;<span class="ident" id="8087329">n</span><span class="op" id="8087330">,</span>&nbsp;<span class="ident" id="8087332">out</span><span class="op" id="8087335">,</span>&nbsp;<span class="ident" id="8087337">tt</span><span class="op" id="8087339">.</span><span class="ident" id="8087340">Output</span><span class="op" id="8087346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087353">}</span><br>
<span class="lineno"></span><span class="op" id="8087355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8087358">type</span>&nbsp;<span class="ident" id="8087363">errorWriter</span>&nbsp;<span class="keyword" id="8087375">struct</span><span class="op" id="8087381">{</span><span class="op" id="8087382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8087385">func</span>&nbsp;<span class="op" id="8087390">(</span><span class="ident" id="8087391">e</span>&nbsp;<span class="ident" id="8087393">errorWriter</span><span class="op" id="8087404">)</span>&nbsp;<span class="ident" id="8087406">Write</span><span class="op" id="8087411">(</span><span class="ident" id="8087412">b</span>&nbsp;<span class="op" id="8087414">[</span><span class="op" id="8087415">]</span><span class="builtintype" id="8087416">byte</span><span class="op" id="8087420">)</span>&nbsp;<span class="op" id="8087422">(</span><span class="builtintype" id="8087423">int</span><span class="op" id="8087426">,</span>&nbsp;<span class="builtintype" id="8087428">error</span><span class="op" id="8087433">)</span>&nbsp;<span class="op" id="8087435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087438">return</span>&nbsp;<span class="num" id="8087445">0</span><span class="op" id="8087446">,</span>&nbsp;<span class="ident" id="8087448">errors</span><span class="op" id="8087454">.</span><span class="ident" id="8087455">New</span><span class="op" id="8087458">(</span><span class="string" id="8087459">&#34;Test&#34;</span><span class="op" id="8087465">)</span><br>
<span class="lineno"></span><span class="op" id="8087467">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8087470">func</span>&nbsp;<span class="ident" id="8087475">TestError</span><span class="op" id="8087484">(</span><span class="ident" id="8087485">t</span>&nbsp;<span class="op" id="8087487">*</span><span class="ident" id="8087488">testing</span><span class="op" id="8087495">.</span><span class="ident" id="8087496">T</span><span class="op" id="8087497">)</span>&nbsp;<span class="op" id="8087499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087502">b</span>&nbsp;<span class="op" id="8087504">:=</span>&nbsp;<span class="op" id="8087507">&amp;</span><span class="ident" id="8087508">bytes</span><span class="op" id="8087513">.</span><span class="ident" id="8087514">Buffer</span><span class="op" id="8087520">{</span><span class="op" id="8087521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087524">f</span>&nbsp;<span class="op" id="8087526">:=</span>&nbsp;<span class="ident" id="8087529">NewWriter</span><span class="op" id="8087538">(</span><span class="ident" id="8087539">b</span><span class="op" id="8087540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087543">f</span><span class="op" id="8087544">.</span><span class="ident" id="8087545">Write</span><span class="op" id="8087550">(</span><span class="op" id="8087551">[</span><span class="op" id="8087552">]</span><span class="builtintype" id="8087553">string</span><span class="op" id="8087559">{</span><span class="string" id="8087560">&#34;abc&#34;</span><span class="op" id="8087565">}</span><span class="op" id="8087566">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087569">f</span><span class="op" id="8087570">.</span><span class="ident" id="8087571">Flush</span><span class="op" id="8087576">(</span><span class="op" id="8087577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087580">err</span>&nbsp;<span class="op" id="8087584">:=</span>&nbsp;<span class="ident" id="8087587">f</span><span class="op" id="8087588">.</span><span class="ident" id="8087589">Error</span><span class="op" id="8087594">(</span><span class="op" id="8087595">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087599">if</span>&nbsp;<span class="ident" id="8087602">err</span>&nbsp;<span class="op" id="8087606">!=</span>&nbsp;<span class="ident" id="8087609">nil</span>&nbsp;<span class="op" id="8087613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087617">t</span><span class="op" id="8087618">.</span><span class="ident" id="8087619">Errorf</span><span class="op" id="8087625">(</span><span class="string" id="8087626">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8087650">,</span>&nbsp;<span class="ident" id="8087652">err</span><span class="op" id="8087655">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087662">f</span>&nbsp;<span class="op" id="8087664">=</span>&nbsp;<span class="ident" id="8087666">NewWriter</span><span class="op" id="8087675">(</span><span class="ident" id="8087676">errorWriter</span><span class="op" id="8087687">{</span><span class="op" id="8087688">}</span><span class="op" id="8087689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087692">f</span><span class="op" id="8087693">.</span><span class="ident" id="8087694">Write</span><span class="op" id="8087699">(</span><span class="op" id="8087700">[</span><span class="op" id="8087701">]</span><span class="builtintype" id="8087702">string</span><span class="op" id="8087708">{</span><span class="string" id="8087709">&#34;abc&#34;</span><span class="op" id="8087714">}</span><span class="op" id="8087715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087718">f</span><span class="op" id="8087719">.</span><span class="ident" id="8087720">Flush</span><span class="op" id="8087725">(</span><span class="op" id="8087726">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087729">err</span>&nbsp;<span class="op" id="8087733">=</span>&nbsp;<span class="ident" id="8087735">f</span><span class="op" id="8087736">.</span><span class="ident" id="8087737">Error</span><span class="op" id="8087742">(</span><span class="op" id="8087743">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087747">if</span>&nbsp;<span class="ident" id="8087750">err</span>&nbsp;<span class="op" id="8087754">==</span>&nbsp;<span class="ident" id="8087757">nil</span>&nbsp;<span class="op" id="8087761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087765">t</span><span class="op" id="8087766">.</span><span class="ident" id="8087767">Error</span><span class="op" id="8087772">(</span><span class="string" id="8087773">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="8087798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087801">}</span><br>
<span class="lineno">85</span><span class="op" id="8087803">}</span>
</div>
</body>
</html>
