<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6747123">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6747178">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6747232">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6747283">package</span>&nbsp;<span class="ident" id="6747291">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6747296">import</span>&nbsp;<span class="op" id="6747303">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6747306">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6747315">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6747321">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6747327">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6747338">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6747348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6747351">type</span>&nbsp;<span class="ident" id="6747356">Bench</span>&nbsp;<span class="keyword" id="6747362">struct</span>&nbsp;<span class="op" id="6747369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747372">A</span>&nbsp;<span class="builtintype" id="6747374">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747379">B</span>&nbsp;<span class="builtintype" id="6747381">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747390">C</span>&nbsp;<span class="builtintype" id="6747392">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747400">D</span>&nbsp;<span class="op" id="6747402">[</span><span class="op" id="6747403">]</span><span class="builtintype" id="6747404">byte</span><br>
<span class="lineno">20</span><span class="op" id="6747409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6747412">func</span>&nbsp;<span class="ident" id="6747417">benchmarkEndToEnd</span><span class="op" id="6747434">(</span><span class="ident" id="6747435">b</span>&nbsp;<span class="op" id="6747437">*</span><span class="ident" id="6747438">testing</span><span class="op" id="6747445">.</span><span class="ident" id="6747446">B</span><span class="op" id="6747447">,</span>&nbsp;<span class="ident" id="6747449">ctor</span>&nbsp;<span class="keyword" id="6747454">func</span><span class="op" id="6747458">(</span><span class="op" id="6747459">)</span>&nbsp;<span class="keyword" id="6747461">interface</span><span class="op" id="6747470">{</span><span class="op" id="6747471">}</span><span class="op" id="6747472">,</span>&nbsp;<span class="ident" id="6747474">pipe</span>&nbsp;<span class="keyword" id="6747479">func</span><span class="op" id="6747483">(</span><span class="op" id="6747484">)</span>&nbsp;<span class="op" id="6747486">(</span><span class="ident" id="6747487">r</span>&nbsp;<span class="ident" id="6747489">io</span><span class="op" id="6747491">.</span><span class="ident" id="6747492">Reader</span><span class="op" id="6747498">,</span>&nbsp;<span class="ident" id="6747500">w</span>&nbsp;<span class="ident" id="6747502">io</span><span class="op" id="6747504">.</span><span class="ident" id="6747505">Writer</span><span class="op" id="6747511">,</span>&nbsp;<span class="ident" id="6747513">err</span>&nbsp;<span class="builtintype" id="6747517">error</span><span class="op" id="6747522">)</span><span class="op" id="6747523">)</span>&nbsp;<span class="op" id="6747525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747528">b</span><span class="op" id="6747529">.</span><span class="ident" id="6747530">RunParallel</span><span class="op" id="6747541">(</span><span class="keyword" id="6747542">func</span><span class="op" id="6747546">(</span><span class="ident" id="6747547">pb</span>&nbsp;<span class="op" id="6747550">*</span><span class="ident" id="6747551">testing</span><span class="op" id="6747558">.</span><span class="ident" id="6747559">PB</span><span class="op" id="6747561">)</span>&nbsp;<span class="op" id="6747563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747567">r</span><span class="op" id="6747568">,</span>&nbsp;<span class="ident" id="6747570">w</span><span class="op" id="6747571">,</span>&nbsp;<span class="ident" id="6747573">err</span>&nbsp;<span class="op" id="6747577">:=</span>&nbsp;<span class="ident" id="6747580">pipe</span><span class="op" id="6747584">(</span><span class="op" id="6747585">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747589">if</span>&nbsp;<span class="ident" id="6747592">err</span>&nbsp;<span class="op" id="6747596">!=</span>&nbsp;<span class="ident" id="6747599">nil</span>&nbsp;<span class="op" id="6747603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747608">b</span><span class="op" id="6747609">.</span><span class="ident" id="6747610">Fatal</span><span class="op" id="6747615">(</span><span class="string" id="6747616">&#34;can&#39;t&nbsp;get&nbsp;pipe:&#34;</span><span class="op" id="6747633">,</span>&nbsp;<span class="ident" id="6747635">err</span><span class="op" id="6747638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747646">v</span>&nbsp;<span class="op" id="6747648">:=</span>&nbsp;<span class="ident" id="6747651">ctor</span><span class="op" id="6747655">(</span><span class="op" id="6747656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747660">enc</span>&nbsp;<span class="op" id="6747664">:=</span>&nbsp;<span class="ident" id="6747667">NewEncoder</span><span class="op" id="6747677">(</span><span class="ident" id="6747678">w</span><span class="op" id="6747679">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747683">dec</span>&nbsp;<span class="op" id="6747687">:=</span>&nbsp;<span class="ident" id="6747690">NewDecoder</span><span class="op" id="6747700">(</span><span class="ident" id="6747701">r</span><span class="op" id="6747702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747706">for</span>&nbsp;<span class="ident" id="6747710">pb</span><span class="op" id="6747712">.</span><span class="ident" id="6747713">Next</span><span class="op" id="6747717">(</span><span class="op" id="6747718">)</span>&nbsp;<span class="op" id="6747720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747725">if</span>&nbsp;<span class="ident" id="6747728">err</span>&nbsp;<span class="op" id="6747732">:=</span>&nbsp;<span class="ident" id="6747735">enc</span><span class="op" id="6747738">.</span><span class="ident" id="6747739">Encode</span><span class="op" id="6747745">(</span><span class="ident" id="6747746">v</span><span class="op" id="6747747">)</span><span class="op" id="6747748">;</span>&nbsp;<span class="ident" id="6747750">err</span>&nbsp;<span class="op" id="6747754">!=</span>&nbsp;<span class="ident" id="6747757">nil</span>&nbsp;<span class="op" id="6747761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747767">b</span><span class="op" id="6747768">.</span><span class="ident" id="6747769">Fatal</span><span class="op" id="6747774">(</span><span class="string" id="6747775">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6747790">,</span>&nbsp;<span class="ident" id="6747792">err</span><span class="op" id="6747795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747800">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747805">if</span>&nbsp;<span class="ident" id="6747808">err</span>&nbsp;<span class="op" id="6747812">:=</span>&nbsp;<span class="ident" id="6747815">dec</span><span class="op" id="6747818">.</span><span class="ident" id="6747819">Decode</span><span class="op" id="6747825">(</span><span class="ident" id="6747826">v</span><span class="op" id="6747827">)</span><span class="op" id="6747828">;</span>&nbsp;<span class="ident" id="6747830">err</span>&nbsp;<span class="op" id="6747834">!=</span>&nbsp;<span class="ident" id="6747837">nil</span>&nbsp;<span class="op" id="6747841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747847">b</span><span class="op" id="6747848">.</span><span class="ident" id="6747849">Fatal</span><span class="op" id="6747854">(</span><span class="string" id="6747855">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6747870">,</span>&nbsp;<span class="ident" id="6747872">err</span><span class="op" id="6747875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6747887">}</span><span class="op" id="6747888">)</span><br>
<span class="lineno">40</span><span class="op" id="6747890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6747893">func</span>&nbsp;<span class="ident" id="6747898">BenchmarkEndToEndPipe</span><span class="op" id="6747919">(</span><span class="ident" id="6747920">b</span>&nbsp;<span class="op" id="6747922">*</span><span class="ident" id="6747923">testing</span><span class="op" id="6747930">.</span><span class="ident" id="6747931">B</span><span class="op" id="6747932">)</span>&nbsp;<span class="op" id="6747934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6747937">benchmarkEndToEnd</span><span class="op" id="6747954">(</span><span class="ident" id="6747955">b</span><span class="op" id="6747956">,</span>&nbsp;<span class="keyword" id="6747958">func</span><span class="op" id="6747962">(</span><span class="op" id="6747963">)</span>&nbsp;<span class="keyword" id="6747965">interface</span><span class="op" id="6747974">{</span><span class="op" id="6747975">}</span>&nbsp;<span class="op" id="6747977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6747981">return</span>&nbsp;<span class="op" id="6747988">&amp;</span><span class="ident" id="6747989">Bench</span><span class="op" id="6747994">{</span><span class="num" id="6747995">7</span><span class="op" id="6747996">,</span>&nbsp;<span class="num" id="6747998">3.2</span><span class="op" id="6748001">,</span>&nbsp;<span class="string" id="6748003">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6748020">,</span>&nbsp;<span class="ident" id="6748022">bytes</span><span class="op" id="6748027">.</span><span class="ident" id="6748028">Repeat</span><span class="op" id="6748034">(</span><span class="op" id="6748035">[</span><span class="op" id="6748036">]</span><span class="builtintype" id="6748037">byte</span><span class="op" id="6748041">(</span><span class="string" id="6748042">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6748060">)</span><span class="op" id="6748061">,</span>&nbsp;<span class="num" id="6748063">100</span><span class="op" id="6748066">)</span><span class="op" id="6748067">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748070">}</span><span class="op" id="6748071">,</span>&nbsp;<span class="keyword" id="6748073">func</span><span class="op" id="6748077">(</span><span class="op" id="6748078">)</span>&nbsp;<span class="op" id="6748080">(</span><span class="ident" id="6748081">r</span>&nbsp;<span class="ident" id="6748083">io</span><span class="op" id="6748085">.</span><span class="ident" id="6748086">Reader</span><span class="op" id="6748092">,</span>&nbsp;<span class="ident" id="6748094">w</span>&nbsp;<span class="ident" id="6748096">io</span><span class="op" id="6748098">.</span><span class="ident" id="6748099">Writer</span><span class="op" id="6748105">,</span>&nbsp;<span class="ident" id="6748107">err</span>&nbsp;<span class="builtintype" id="6748111">error</span><span class="op" id="6748116">)</span>&nbsp;<span class="op" id="6748118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748122">r</span><span class="op" id="6748123">,</span>&nbsp;<span class="ident" id="6748125">w</span><span class="op" id="6748126">,</span>&nbsp;<span class="ident" id="6748128">err</span>&nbsp;<span class="op" id="6748132">=</span>&nbsp;<span class="ident" id="6748134">os</span><span class="op" id="6748136">.</span><span class="ident" id="6748137">Pipe</span><span class="op" id="6748141">(</span><span class="op" id="6748142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748146">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748154">}</span><span class="op" id="6748155">)</span><br>
<span class="lineno"></span><span class="op" id="6748157">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6748160">func</span>&nbsp;<span class="ident" id="6748165">BenchmarkEndToEndByteBuffer</span><span class="op" id="6748192">(</span><span class="ident" id="6748193">b</span>&nbsp;<span class="op" id="6748195">*</span><span class="ident" id="6748196">testing</span><span class="op" id="6748203">.</span><span class="ident" id="6748204">B</span><span class="op" id="6748205">)</span>&nbsp;<span class="op" id="6748207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748210">benchmarkEndToEnd</span><span class="op" id="6748227">(</span><span class="ident" id="6748228">b</span><span class="op" id="6748229">,</span>&nbsp;<span class="keyword" id="6748231">func</span><span class="op" id="6748235">(</span><span class="op" id="6748236">)</span>&nbsp;<span class="keyword" id="6748238">interface</span><span class="op" id="6748247">{</span><span class="op" id="6748248">}</span>&nbsp;<span class="op" id="6748250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748254">return</span>&nbsp;<span class="op" id="6748261">&amp;</span><span class="ident" id="6748262">Bench</span><span class="op" id="6748267">{</span><span class="num" id="6748268">7</span><span class="op" id="6748269">,</span>&nbsp;<span class="num" id="6748271">3.2</span><span class="op" id="6748274">,</span>&nbsp;<span class="string" id="6748276">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6748293">,</span>&nbsp;<span class="ident" id="6748295">bytes</span><span class="op" id="6748300">.</span><span class="ident" id="6748301">Repeat</span><span class="op" id="6748307">(</span><span class="op" id="6748308">[</span><span class="op" id="6748309">]</span><span class="builtintype" id="6748310">byte</span><span class="op" id="6748314">(</span><span class="string" id="6748315">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6748333">)</span><span class="op" id="6748334">,</span>&nbsp;<span class="num" id="6748336">100</span><span class="op" id="6748339">)</span><span class="op" id="6748340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748343">}</span><span class="op" id="6748344">,</span>&nbsp;<span class="keyword" id="6748346">func</span><span class="op" id="6748350">(</span><span class="op" id="6748351">)</span>&nbsp;<span class="op" id="6748353">(</span><span class="ident" id="6748354">r</span>&nbsp;<span class="ident" id="6748356">io</span><span class="op" id="6748358">.</span><span class="ident" id="6748359">Reader</span><span class="op" id="6748365">,</span>&nbsp;<span class="ident" id="6748367">w</span>&nbsp;<span class="ident" id="6748369">io</span><span class="op" id="6748371">.</span><span class="ident" id="6748372">Writer</span><span class="op" id="6748378">,</span>&nbsp;<span class="ident" id="6748380">err</span>&nbsp;<span class="builtintype" id="6748384">error</span><span class="op" id="6748389">)</span>&nbsp;<span class="op" id="6748391">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748395">var</span>&nbsp;<span class="ident" id="6748399">buf</span>&nbsp;<span class="ident" id="6748403">bytes</span><span class="op" id="6748408">.</span><span class="ident" id="6748409">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748418">return</span>&nbsp;<span class="op" id="6748425">&amp;</span><span class="ident" id="6748426">buf</span><span class="op" id="6748429">,</span>&nbsp;<span class="op" id="6748431">&amp;</span><span class="ident" id="6748432">buf</span><span class="op" id="6748435">,</span>&nbsp;<span class="ident" id="6748437">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748442">}</span><span class="op" id="6748443">)</span><br>
<span class="lineno"></span><span class="op" id="6748445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6748448">func</span>&nbsp;<span class="ident" id="6748453">BenchmarkEndToEndSliceByteBuffer</span><span class="op" id="6748485">(</span><span class="ident" id="6748486">b</span>&nbsp;<span class="op" id="6748488">*</span><span class="ident" id="6748489">testing</span><span class="op" id="6748496">.</span><span class="ident" id="6748497">B</span><span class="op" id="6748498">)</span>&nbsp;<span class="op" id="6748500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748503">benchmarkEndToEnd</span><span class="op" id="6748520">(</span><span class="ident" id="6748521">b</span><span class="op" id="6748522">,</span>&nbsp;<span class="keyword" id="6748524">func</span><span class="op" id="6748528">(</span><span class="op" id="6748529">)</span>&nbsp;<span class="keyword" id="6748531">interface</span><span class="op" id="6748540">{</span><span class="op" id="6748541">}</span>&nbsp;<span class="op" id="6748543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748547">v</span>&nbsp;<span class="op" id="6748549">:=</span>&nbsp;<span class="op" id="6748552">&amp;</span><span class="ident" id="6748553">Bench</span><span class="op" id="6748558">{</span><span class="num" id="6748559">7</span><span class="op" id="6748560">,</span>&nbsp;<span class="num" id="6748562">3.2</span><span class="op" id="6748565">,</span>&nbsp;<span class="string" id="6748567">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6748584">,</span>&nbsp;<span class="ident" id="6748586">nil</span><span class="op" id="6748589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748593">Register</span><span class="op" id="6748601">(</span><span class="ident" id="6748602">v</span><span class="op" id="6748603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748607">arr</span>&nbsp;<span class="op" id="6748611">:=</span>&nbsp;<span class="builtinfunc" id="6748614">make</span><span class="op" id="6748618">(</span><span class="op" id="6748619">[</span><span class="op" id="6748620">]</span><span class="keyword" id="6748621">interface</span><span class="op" id="6748630">{</span><span class="op" id="6748631">}</span><span class="op" id="6748632">,</span>&nbsp;<span class="num" id="6748634">100</span><span class="op" id="6748637">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748641">for</span>&nbsp;<span class="ident" id="6748645">i</span>&nbsp;<span class="op" id="6748647">:=</span>&nbsp;<span class="keyword" id="6748650">range</span>&nbsp;<span class="ident" id="6748656">arr</span>&nbsp;<span class="op" id="6748660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748665">arr</span><span class="op" id="6748668">[</span><span class="ident" id="6748669">i</span><span class="op" id="6748670">]</span>&nbsp;<span class="op" id="6748672">=</span>&nbsp;<span class="ident" id="6748674">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748682">return</span>&nbsp;<span class="op" id="6748689">&amp;</span><span class="ident" id="6748690">arr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748695">}</span><span class="op" id="6748696">,</span>&nbsp;<span class="keyword" id="6748698">func</span><span class="op" id="6748702">(</span><span class="op" id="6748703">)</span>&nbsp;<span class="op" id="6748705">(</span><span class="ident" id="6748706">r</span>&nbsp;<span class="ident" id="6748708">io</span><span class="op" id="6748710">.</span><span class="ident" id="6748711">Reader</span><span class="op" id="6748717">,</span>&nbsp;<span class="ident" id="6748719">w</span>&nbsp;<span class="ident" id="6748721">io</span><span class="op" id="6748723">.</span><span class="ident" id="6748724">Writer</span><span class="op" id="6748730">,</span>&nbsp;<span class="ident" id="6748732">err</span>&nbsp;<span class="builtintype" id="6748736">error</span><span class="op" id="6748741">)</span>&nbsp;<span class="op" id="6748743">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748747">var</span>&nbsp;<span class="ident" id="6748751">buf</span>&nbsp;<span class="ident" id="6748755">bytes</span><span class="op" id="6748760">.</span><span class="ident" id="6748761">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748770">return</span>&nbsp;<span class="op" id="6748777">&amp;</span><span class="ident" id="6748778">buf</span><span class="op" id="6748781">,</span>&nbsp;<span class="op" id="6748783">&amp;</span><span class="ident" id="6748784">buf</span><span class="op" id="6748787">,</span>&nbsp;<span class="ident" id="6748789">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748794">}</span><span class="op" id="6748795">)</span><br>
<span class="lineno"></span><span class="op" id="6748797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="6748800">func</span>&nbsp;<span class="ident" id="6748805">TestCountEncodeMallocs</span><span class="op" id="6748827">(</span><span class="ident" id="6748828">t</span>&nbsp;<span class="op" id="6748830">*</span><span class="ident" id="6748831">testing</span><span class="op" id="6748838">.</span><span class="ident" id="6748839">T</span><span class="op" id="6748840">)</span>&nbsp;<span class="op" id="6748842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748845">if</span>&nbsp;<span class="ident" id="6748848">testing</span><span class="op" id="6748855">.</span><span class="ident" id="6748856">Short</span><span class="op" id="6748861">(</span><span class="op" id="6748862">)</span>&nbsp;<span class="op" id="6748864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748868">t</span><span class="op" id="6748869">.</span><span class="ident" id="6748870">Skip</span><span class="op" id="6748874">(</span><span class="string" id="6748875">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6748912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748918">if</span>&nbsp;<span class="ident" id="6748921">runtime</span><span class="op" id="6748928">.</span><span class="ident" id="6748929">GOMAXPROCS</span><span class="op" id="6748939">(</span><span class="num" id="6748940">0</span><span class="op" id="6748941">)</span>&nbsp;<span class="op" id="6748943">&gt;</span>&nbsp;<span class="num" id="6748945">1</span>&nbsp;<span class="op" id="6748947">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6748951">t</span><span class="op" id="6748952">.</span><span class="ident" id="6748953">Skip</span><span class="op" id="6748957">(</span><span class="string" id="6748958">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6748982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6748985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6748989">const</span>&nbsp;<span class="ident" id="6748995">N</span>&nbsp;<span class="op" id="6748997">=</span>&nbsp;<span class="num" id="6748999">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749006">var</span>&nbsp;<span class="ident" id="6749010">buf</span>&nbsp;<span class="ident" id="6749014">bytes</span><span class="op" id="6749019">.</span><span class="ident" id="6749020">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749028">enc</span>&nbsp;<span class="op" id="6749032">:=</span>&nbsp;<span class="ident" id="6749035">NewEncoder</span><span class="op" id="6749045">(</span><span class="op" id="6749046">&amp;</span><span class="ident" id="6749047">buf</span><span class="op" id="6749050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749053">bench</span>&nbsp;<span class="op" id="6749059">:=</span>&nbsp;<span class="op" id="6749062">&amp;</span><span class="ident" id="6749063">Bench</span><span class="op" id="6749068">{</span><span class="num" id="6749069">7</span><span class="op" id="6749070">,</span>&nbsp;<span class="num" id="6749072">3.2</span><span class="op" id="6749075">,</span>&nbsp;<span class="string" id="6749077">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6749094">,</span>&nbsp;<span class="op" id="6749096">[</span><span class="op" id="6749097">]</span><span class="builtintype" id="6749098">byte</span><span class="op" id="6749102">(</span><span class="string" id="6749103">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6749121">)</span><span class="op" id="6749122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749126">allocs</span>&nbsp;<span class="op" id="6749133">:=</span>&nbsp;<span class="ident" id="6749136">testing</span><span class="op" id="6749143">.</span><span class="ident" id="6749144">AllocsPerRun</span><span class="op" id="6749156">(</span><span class="ident" id="6749157">N</span><span class="op" id="6749158">,</span>&nbsp;<span class="keyword" id="6749160">func</span><span class="op" id="6749164">(</span><span class="op" id="6749165">)</span>&nbsp;<span class="op" id="6749167">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749171">err</span>&nbsp;<span class="op" id="6749175">:=</span>&nbsp;<span class="ident" id="6749178">enc</span><span class="op" id="6749181">.</span><span class="ident" id="6749182">Encode</span><span class="op" id="6749188">(</span><span class="ident" id="6749189">bench</span><span class="op" id="6749194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749198">if</span>&nbsp;<span class="ident" id="6749201">err</span>&nbsp;<span class="op" id="6749205">!=</span>&nbsp;<span class="ident" id="6749208">nil</span>&nbsp;<span class="op" id="6749212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749217">t</span><span class="op" id="6749218">.</span><span class="ident" id="6749219">Fatal</span><span class="op" id="6749224">(</span><span class="string" id="6749225">&#34;encode:&#34;</span><span class="op" id="6749234">,</span>&nbsp;<span class="ident" id="6749236">err</span><span class="op" id="6749239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749246">}</span><span class="op" id="6749247">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749250">if</span>&nbsp;<span class="ident" id="6749253">allocs</span>&nbsp;<span class="op" id="6749260">!=</span>&nbsp;<span class="num" id="6749263">0</span>&nbsp;<span class="op" id="6749265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749269">t</span><span class="op" id="6749270">.</span><span class="ident" id="6749271">Fatalf</span><span class="op" id="6749277">(</span><span class="string" id="6749278">&#34;mallocs&nbsp;per&nbsp;encode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;0\n&#34;</span><span class="op" id="6749328">,</span>&nbsp;<span class="ident" id="6749330">allocs</span><span class="op" id="6749336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749339">}</span><br>
<span class="lineno"></span><span class="op" id="6749341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6749344">func</span>&nbsp;<span class="ident" id="6749349">TestCountDecodeMallocs</span><span class="op" id="6749371">(</span><span class="ident" id="6749372">t</span>&nbsp;<span class="op" id="6749374">*</span><span class="ident" id="6749375">testing</span><span class="op" id="6749382">.</span><span class="ident" id="6749383">T</span><span class="op" id="6749384">)</span>&nbsp;<span class="op" id="6749386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749389">if</span>&nbsp;<span class="ident" id="6749392">testing</span><span class="op" id="6749399">.</span><span class="ident" id="6749400">Short</span><span class="op" id="6749405">(</span><span class="op" id="6749406">)</span>&nbsp;<span class="op" id="6749408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749412">t</span><span class="op" id="6749413">.</span><span class="ident" id="6749414">Skip</span><span class="op" id="6749418">(</span><span class="string" id="6749419">&#34;skipping&nbsp;malloc&nbsp;count&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6749456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749462">if</span>&nbsp;<span class="ident" id="6749465">runtime</span><span class="op" id="6749472">.</span><span class="ident" id="6749473">GOMAXPROCS</span><span class="op" id="6749483">(</span><span class="num" id="6749484">0</span><span class="op" id="6749485">)</span>&nbsp;<span class="op" id="6749487">&gt;</span>&nbsp;<span class="num" id="6749489">1</span>&nbsp;<span class="op" id="6749491">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749495">t</span><span class="op" id="6749496">.</span><span class="ident" id="6749497">Skip</span><span class="op" id="6749501">(</span><span class="string" id="6749502">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6749526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749533">const</span>&nbsp;<span class="ident" id="6749539">N</span>&nbsp;<span class="op" id="6749541">=</span>&nbsp;<span class="num" id="6749543">1000</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749550">var</span>&nbsp;<span class="ident" id="6749554">buf</span>&nbsp;<span class="ident" id="6749558">bytes</span><span class="op" id="6749563">.</span><span class="ident" id="6749564">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749572">enc</span>&nbsp;<span class="op" id="6749576">:=</span>&nbsp;<span class="ident" id="6749579">NewEncoder</span><span class="op" id="6749589">(</span><span class="op" id="6749590">&amp;</span><span class="ident" id="6749591">buf</span><span class="op" id="6749594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749597">bench</span>&nbsp;<span class="op" id="6749603">:=</span>&nbsp;<span class="op" id="6749606">&amp;</span><span class="ident" id="6749607">Bench</span><span class="op" id="6749612">{</span><span class="num" id="6749613">7</span><span class="op" id="6749614">,</span>&nbsp;<span class="num" id="6749616">3.2</span><span class="op" id="6749619">,</span>&nbsp;<span class="string" id="6749621">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><span class="op" id="6749638">,</span>&nbsp;<span class="op" id="6749640">[</span><span class="op" id="6749641">]</span><span class="builtintype" id="6749642">byte</span><span class="op" id="6749646">(</span><span class="string" id="6749647">&#34;for&nbsp;all&nbsp;good&nbsp;men&#34;</span><span class="op" id="6749665">)</span><span class="op" id="6749666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6749670">//&nbsp;Fill&nbsp;the&nbsp;buffer&nbsp;with&nbsp;enough&nbsp;to&nbsp;decode</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749712">testing</span><span class="op" id="6749719">.</span><span class="ident" id="6749720">AllocsPerRun</span><span class="op" id="6749732">(</span><span class="ident" id="6749733">N</span><span class="op" id="6749734">,</span>&nbsp;<span class="keyword" id="6749736">func</span><span class="op" id="6749740">(</span><span class="op" id="6749741">)</span>&nbsp;<span class="op" id="6749743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749747">err</span>&nbsp;<span class="op" id="6749751">:=</span>&nbsp;<span class="ident" id="6749754">enc</span><span class="op" id="6749757">.</span><span class="ident" id="6749758">Encode</span><span class="op" id="6749764">(</span><span class="ident" id="6749765">bench</span><span class="op" id="6749770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749774">if</span>&nbsp;<span class="ident" id="6749777">err</span>&nbsp;<span class="op" id="6749781">!=</span>&nbsp;<span class="ident" id="6749784">nil</span>&nbsp;<span class="op" id="6749788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749793">t</span><span class="op" id="6749794">.</span><span class="ident" id="6749795">Fatal</span><span class="op" id="6749800">(</span><span class="string" id="6749801">&#34;encode:&#34;</span><span class="op" id="6749810">,</span>&nbsp;<span class="ident" id="6749812">err</span><span class="op" id="6749815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749819">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749822">}</span><span class="op" id="6749823">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749827">dec</span>&nbsp;<span class="op" id="6749831">:=</span>&nbsp;<span class="ident" id="6749834">NewDecoder</span><span class="op" id="6749844">(</span><span class="op" id="6749845">&amp;</span><span class="ident" id="6749846">buf</span><span class="op" id="6749849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749852">allocs</span>&nbsp;<span class="op" id="6749859">:=</span>&nbsp;<span class="ident" id="6749862">testing</span><span class="op" id="6749869">.</span><span class="ident" id="6749870">AllocsPerRun</span><span class="op" id="6749882">(</span><span class="ident" id="6749883">N</span><span class="op" id="6749884">,</span>&nbsp;<span class="keyword" id="6749886">func</span><span class="op" id="6749890">(</span><span class="op" id="6749891">)</span>&nbsp;<span class="op" id="6749893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749897">*</span><span class="ident" id="6749898">bench</span>&nbsp;<span class="op" id="6749904">=</span>&nbsp;<span class="ident" id="6749906">Bench</span><span class="op" id="6749911">{</span><span class="op" id="6749912">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749916">err</span>&nbsp;<span class="op" id="6749920">:=</span>&nbsp;<span class="ident" id="6749923">dec</span><span class="op" id="6749926">.</span><span class="ident" id="6749927">Decode</span><span class="op" id="6749933">(</span><span class="op" id="6749934">&amp;</span><span class="ident" id="6749935">bench</span><span class="op" id="6749940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749944">if</span>&nbsp;<span class="ident" id="6749947">err</span>&nbsp;<span class="op" id="6749951">!=</span>&nbsp;<span class="ident" id="6749954">nil</span>&nbsp;<span class="op" id="6749958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6749963">t</span><span class="op" id="6749964">.</span><span class="ident" id="6749965">Fatal</span><span class="op" id="6749970">(</span><span class="string" id="6749971">&#34;decode:&#34;</span><span class="op" id="6749980">,</span>&nbsp;<span class="ident" id="6749982">err</span><span class="op" id="6749985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6749992">}</span><span class="op" id="6749993">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6749996">if</span>&nbsp;<span class="ident" id="6749999">allocs</span>&nbsp;<span class="op" id="6750006">!=</span>&nbsp;<span class="num" id="6750009">4</span>&nbsp;<span class="op" id="6750011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750015">t</span><span class="op" id="6750016">.</span><span class="ident" id="6750017">Fatalf</span><span class="op" id="6750023">(</span><span class="string" id="6750024">&#34;mallocs&nbsp;per&nbsp;decode&nbsp;of&nbsp;type&nbsp;Bench:&nbsp;%v;&nbsp;wanted&nbsp;4\n&#34;</span><span class="op" id="6750074">,</span>&nbsp;<span class="ident" id="6750076">allocs</span><span class="op" id="6750082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750085">}</span><br>
<span class="lineno"></span><span class="op" id="6750087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6750090">func</span>&nbsp;<span class="ident" id="6750095">BenchmarkEncodeComplex128Slice</span><span class="op" id="6750125">(</span><span class="ident" id="6750126">b</span>&nbsp;<span class="op" id="6750128">*</span><span class="ident" id="6750129">testing</span><span class="op" id="6750136">.</span><span class="ident" id="6750137">B</span><span class="op" id="6750138">)</span>&nbsp;<span class="op" id="6750140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750143">var</span>&nbsp;<span class="ident" id="6750147">buf</span>&nbsp;<span class="ident" id="6750151">bytes</span><span class="op" id="6750156">.</span><span class="ident" id="6750157">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750165">enc</span>&nbsp;<span class="op" id="6750169">:=</span>&nbsp;<span class="ident" id="6750172">NewEncoder</span><span class="op" id="6750182">(</span><span class="op" id="6750183">&amp;</span><span class="ident" id="6750184">buf</span><span class="op" id="6750187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750190">a</span>&nbsp;<span class="op" id="6750192">:=</span>&nbsp;<span class="builtinfunc" id="6750195">make</span><span class="op" id="6750199">(</span><span class="op" id="6750200">[</span><span class="op" id="6750201">]</span><span class="builtintype" id="6750202">complex128</span><span class="op" id="6750212">,</span>&nbsp;<span class="num" id="6750214">1000</span><span class="op" id="6750218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750221">for</span>&nbsp;<span class="ident" id="6750225">i</span>&nbsp;<span class="op" id="6750227">:=</span>&nbsp;<span class="keyword" id="6750230">range</span>&nbsp;<span class="ident" id="6750236">a</span>&nbsp;<span class="op" id="6750238">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750242">a</span><span class="op" id="6750243">[</span><span class="ident" id="6750244">i</span><span class="op" id="6750245">]</span>&nbsp;<span class="op" id="6750247">=</span>&nbsp;<span class="num" id="6750249">1.2</span>&nbsp;<span class="op" id="6750253">+</span>&nbsp;<span class="num" id="6750255">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750264">b</span><span class="op" id="6750265">.</span><span class="ident" id="6750266">ResetTimer</span><span class="op" id="6750276">(</span><span class="op" id="6750277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750280">for</span>&nbsp;<span class="ident" id="6750284">i</span>&nbsp;<span class="op" id="6750286">:=</span>&nbsp;<span class="num" id="6750289">0</span><span class="op" id="6750290">;</span>&nbsp;<span class="ident" id="6750292">i</span>&nbsp;<span class="op" id="6750294">&lt;</span>&nbsp;<span class="ident" id="6750296">b</span><span class="op" id="6750297">.</span><span class="ident" id="6750298">N</span><span class="op" id="6750299">;</span>&nbsp;<span class="ident" id="6750301">i</span><span class="op" id="6750302">++</span>&nbsp;<span class="op" id="6750305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750309">buf</span><span class="op" id="6750312">.</span><span class="ident" id="6750313">Reset</span><span class="op" id="6750318">(</span><span class="op" id="6750319">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750323">err</span>&nbsp;<span class="op" id="6750327">:=</span>&nbsp;<span class="ident" id="6750330">enc</span><span class="op" id="6750333">.</span><span class="ident" id="6750334">Encode</span><span class="op" id="6750340">(</span><span class="ident" id="6750341">a</span><span class="op" id="6750342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750346">if</span>&nbsp;<span class="ident" id="6750349">err</span>&nbsp;<span class="op" id="6750353">!=</span>&nbsp;<span class="ident" id="6750356">nil</span>&nbsp;<span class="op" id="6750360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750365">b</span><span class="op" id="6750366">.</span><span class="ident" id="6750367">Fatal</span><span class="op" id="6750372">(</span><span class="ident" id="6750373">err</span><span class="op" id="6750376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750383">}</span><br>
<span class="lineno">150</span><span class="op" id="6750385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6750388">func</span>&nbsp;<span class="ident" id="6750393">BenchmarkEncodeFloat64Slice</span><span class="op" id="6750420">(</span><span class="ident" id="6750421">b</span>&nbsp;<span class="op" id="6750423">*</span><span class="ident" id="6750424">testing</span><span class="op" id="6750431">.</span><span class="ident" id="6750432">B</span><span class="op" id="6750433">)</span>&nbsp;<span class="op" id="6750435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750438">var</span>&nbsp;<span class="ident" id="6750442">buf</span>&nbsp;<span class="ident" id="6750446">bytes</span><span class="op" id="6750451">.</span><span class="ident" id="6750452">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750460">enc</span>&nbsp;<span class="op" id="6750464">:=</span>&nbsp;<span class="ident" id="6750467">NewEncoder</span><span class="op" id="6750477">(</span><span class="op" id="6750478">&amp;</span><span class="ident" id="6750479">buf</span><span class="op" id="6750482">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750485">a</span>&nbsp;<span class="op" id="6750487">:=</span>&nbsp;<span class="builtinfunc" id="6750490">make</span><span class="op" id="6750494">(</span><span class="op" id="6750495">[</span><span class="op" id="6750496">]</span><span class="builtintype" id="6750497">float64</span><span class="op" id="6750504">,</span>&nbsp;<span class="num" id="6750506">1000</span><span class="op" id="6750510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750513">for</span>&nbsp;<span class="ident" id="6750517">i</span>&nbsp;<span class="op" id="6750519">:=</span>&nbsp;<span class="keyword" id="6750522">range</span>&nbsp;<span class="ident" id="6750528">a</span>&nbsp;<span class="op" id="6750530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750534">a</span><span class="op" id="6750535">[</span><span class="ident" id="6750536">i</span><span class="op" id="6750537">]</span>&nbsp;<span class="op" id="6750539">=</span>&nbsp;<span class="num" id="6750541">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750552">b</span><span class="op" id="6750553">.</span><span class="ident" id="6750554">ResetTimer</span><span class="op" id="6750564">(</span><span class="op" id="6750565">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750568">for</span>&nbsp;<span class="ident" id="6750572">i</span>&nbsp;<span class="op" id="6750574">:=</span>&nbsp;<span class="num" id="6750577">0</span><span class="op" id="6750578">;</span>&nbsp;<span class="ident" id="6750580">i</span>&nbsp;<span class="op" id="6750582">&lt;</span>&nbsp;<span class="ident" id="6750584">b</span><span class="op" id="6750585">.</span><span class="ident" id="6750586">N</span><span class="op" id="6750587">;</span>&nbsp;<span class="ident" id="6750589">i</span><span class="op" id="6750590">++</span>&nbsp;<span class="op" id="6750593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750597">buf</span><span class="op" id="6750600">.</span><span class="ident" id="6750601">Reset</span><span class="op" id="6750606">(</span><span class="op" id="6750607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750611">err</span>&nbsp;<span class="op" id="6750615">:=</span>&nbsp;<span class="ident" id="6750618">enc</span><span class="op" id="6750621">.</span><span class="ident" id="6750622">Encode</span><span class="op" id="6750628">(</span><span class="ident" id="6750629">a</span><span class="op" id="6750630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750634">if</span>&nbsp;<span class="ident" id="6750637">err</span>&nbsp;<span class="op" id="6750641">!=</span>&nbsp;<span class="ident" id="6750644">nil</span>&nbsp;<span class="op" id="6750648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750653">b</span><span class="op" id="6750654">.</span><span class="ident" id="6750655">Fatal</span><span class="op" id="6750660">(</span><span class="ident" id="6750661">err</span><span class="op" id="6750664">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750671">}</span><br>
<span class="lineno"></span><span class="op" id="6750673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6750676">func</span>&nbsp;<span class="ident" id="6750681">BenchmarkEncodeInt32Slice</span><span class="op" id="6750706">(</span><span class="ident" id="6750707">b</span>&nbsp;<span class="op" id="6750709">*</span><span class="ident" id="6750710">testing</span><span class="op" id="6750717">.</span><span class="ident" id="6750718">B</span><span class="op" id="6750719">)</span>&nbsp;<span class="op" id="6750721">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750724">var</span>&nbsp;<span class="ident" id="6750728">buf</span>&nbsp;<span class="ident" id="6750732">bytes</span><span class="op" id="6750737">.</span><span class="ident" id="6750738">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750746">enc</span>&nbsp;<span class="op" id="6750750">:=</span>&nbsp;<span class="ident" id="6750753">NewEncoder</span><span class="op" id="6750763">(</span><span class="op" id="6750764">&amp;</span><span class="ident" id="6750765">buf</span><span class="op" id="6750768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750771">a</span>&nbsp;<span class="op" id="6750773">:=</span>&nbsp;<span class="builtinfunc" id="6750776">make</span><span class="op" id="6750780">(</span><span class="op" id="6750781">[</span><span class="op" id="6750782">]</span><span class="builtintype" id="6750783">int32</span><span class="op" id="6750788">,</span>&nbsp;<span class="num" id="6750790">1000</span><span class="op" id="6750794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750797">for</span>&nbsp;<span class="ident" id="6750801">i</span>&nbsp;<span class="op" id="6750803">:=</span>&nbsp;<span class="keyword" id="6750806">range</span>&nbsp;<span class="ident" id="6750812">a</span>&nbsp;<span class="op" id="6750814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750818">a</span><span class="op" id="6750819">[</span><span class="ident" id="6750820">i</span><span class="op" id="6750821">]</span>&nbsp;<span class="op" id="6750823">=</span>&nbsp;<span class="num" id="6750825">1234</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750834">b</span><span class="op" id="6750835">.</span><span class="ident" id="6750836">ResetTimer</span><span class="op" id="6750846">(</span><span class="op" id="6750847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750850">for</span>&nbsp;<span class="ident" id="6750854">i</span>&nbsp;<span class="op" id="6750856">:=</span>&nbsp;<span class="num" id="6750859">0</span><span class="op" id="6750860">;</span>&nbsp;<span class="ident" id="6750862">i</span>&nbsp;<span class="op" id="6750864">&lt;</span>&nbsp;<span class="ident" id="6750866">b</span><span class="op" id="6750867">.</span><span class="ident" id="6750868">N</span><span class="op" id="6750869">;</span>&nbsp;<span class="ident" id="6750871">i</span><span class="op" id="6750872">++</span>&nbsp;<span class="op" id="6750875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750879">buf</span><span class="op" id="6750882">.</span><span class="ident" id="6750883">Reset</span><span class="op" id="6750888">(</span><span class="op" id="6750889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750893">err</span>&nbsp;<span class="op" id="6750897">:=</span>&nbsp;<span class="ident" id="6750900">enc</span><span class="op" id="6750903">.</span><span class="ident" id="6750904">Encode</span><span class="op" id="6750910">(</span><span class="ident" id="6750911">a</span><span class="op" id="6750912">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6750916">if</span>&nbsp;<span class="ident" id="6750919">err</span>&nbsp;<span class="op" id="6750923">!=</span>&nbsp;<span class="ident" id="6750926">nil</span>&nbsp;<span class="op" id="6750930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6750935">b</span><span class="op" id="6750936">.</span><span class="ident" id="6750937">Fatal</span><span class="op" id="6750942">(</span><span class="ident" id="6750943">err</span><span class="op" id="6750946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6750953">}</span><br>
<span class="lineno"></span><span class="op" id="6750955">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="6750958">func</span>&nbsp;<span class="ident" id="6750963">BenchmarkEncodeStringSlice</span><span class="op" id="6750989">(</span><span class="ident" id="6750990">b</span>&nbsp;<span class="op" id="6750992">*</span><span class="ident" id="6750993">testing</span><span class="op" id="6751000">.</span><span class="ident" id="6751001">B</span><span class="op" id="6751002">)</span>&nbsp;<span class="op" id="6751004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751007">var</span>&nbsp;<span class="ident" id="6751011">buf</span>&nbsp;<span class="ident" id="6751015">bytes</span><span class="op" id="6751020">.</span><span class="ident" id="6751021">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751029">enc</span>&nbsp;<span class="op" id="6751033">:=</span>&nbsp;<span class="ident" id="6751036">NewEncoder</span><span class="op" id="6751046">(</span><span class="op" id="6751047">&amp;</span><span class="ident" id="6751048">buf</span><span class="op" id="6751051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751054">a</span>&nbsp;<span class="op" id="6751056">:=</span>&nbsp;<span class="builtinfunc" id="6751059">make</span><span class="op" id="6751063">(</span><span class="op" id="6751064">[</span><span class="op" id="6751065">]</span><span class="builtintype" id="6751066">string</span><span class="op" id="6751072">,</span>&nbsp;<span class="num" id="6751074">1000</span><span class="op" id="6751078">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751081">for</span>&nbsp;<span class="ident" id="6751085">i</span>&nbsp;<span class="op" id="6751087">:=</span>&nbsp;<span class="keyword" id="6751090">range</span>&nbsp;<span class="ident" id="6751096">a</span>&nbsp;<span class="op" id="6751098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751102">a</span><span class="op" id="6751103">[</span><span class="ident" id="6751104">i</span><span class="op" id="6751105">]</span>&nbsp;<span class="op" id="6751107">=</span>&nbsp;<span class="string" id="6751109">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751131">b</span><span class="op" id="6751132">.</span><span class="ident" id="6751133">ResetTimer</span><span class="op" id="6751143">(</span><span class="op" id="6751144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751147">for</span>&nbsp;<span class="ident" id="6751151">i</span>&nbsp;<span class="op" id="6751153">:=</span>&nbsp;<span class="num" id="6751156">0</span><span class="op" id="6751157">;</span>&nbsp;<span class="ident" id="6751159">i</span>&nbsp;<span class="op" id="6751161">&lt;</span>&nbsp;<span class="ident" id="6751163">b</span><span class="op" id="6751164">.</span><span class="ident" id="6751165">N</span><span class="op" id="6751166">;</span>&nbsp;<span class="ident" id="6751168">i</span><span class="op" id="6751169">++</span>&nbsp;<span class="op" id="6751172">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751176">buf</span><span class="op" id="6751179">.</span><span class="ident" id="6751180">Reset</span><span class="op" id="6751185">(</span><span class="op" id="6751186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751190">err</span>&nbsp;<span class="op" id="6751194">:=</span>&nbsp;<span class="ident" id="6751197">enc</span><span class="op" id="6751200">.</span><span class="ident" id="6751201">Encode</span><span class="op" id="6751207">(</span><span class="ident" id="6751208">a</span><span class="op" id="6751209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751213">if</span>&nbsp;<span class="ident" id="6751216">err</span>&nbsp;<span class="op" id="6751220">!=</span>&nbsp;<span class="ident" id="6751223">nil</span>&nbsp;<span class="op" id="6751227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751232">b</span><span class="op" id="6751233">.</span><span class="ident" id="6751234">Fatal</span><span class="op" id="6751239">(</span><span class="ident" id="6751240">err</span><span class="op" id="6751243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751247">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751250">}</span><br>
<span class="lineno"></span><span class="op" id="6751252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6751255">//&nbsp;benchmarkBuf&nbsp;is&nbsp;a&nbsp;read&nbsp;buffer&nbsp;we&nbsp;can&nbsp;reset</span><br>
<span class="lineno"></span><span class="keyword" id="6751301">type</span>&nbsp;<span class="ident" id="6751306">benchmarkBuf</span>&nbsp;<span class="keyword" id="6751319">struct</span>&nbsp;<span class="op" id="6751326">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751329">offset</span>&nbsp;<span class="builtintype" id="6751336">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751341">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6751348">[</span><span class="op" id="6751349">]</span><span class="builtintype" id="6751350">byte</span><br>
<span class="lineno"></span><span class="op" id="6751355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6751358">func</span>&nbsp;<span class="op" id="6751363">(</span><span class="ident" id="6751364">b</span>&nbsp;<span class="op" id="6751366">*</span><span class="ident" id="6751367">benchmarkBuf</span><span class="op" id="6751379">)</span>&nbsp;<span class="ident" id="6751381">Read</span><span class="op" id="6751385">(</span><span class="ident" id="6751386">p</span>&nbsp;<span class="op" id="6751388">[</span><span class="op" id="6751389">]</span><span class="builtintype" id="6751390">byte</span><span class="op" id="6751394">)</span>&nbsp;<span class="op" id="6751396">(</span><span class="ident" id="6751397">n</span>&nbsp;<span class="builtintype" id="6751399">int</span><span class="op" id="6751402">,</span>&nbsp;<span class="ident" id="6751404">err</span>&nbsp;<span class="builtintype" id="6751408">error</span><span class="op" id="6751413">)</span>&nbsp;<span class="op" id="6751415">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751418">n</span>&nbsp;<span class="op" id="6751420">=</span>&nbsp;<span class="builtinfunc" id="6751422">copy</span><span class="op" id="6751426">(</span><span class="ident" id="6751427">p</span><span class="op" id="6751428">,</span>&nbsp;<span class="ident" id="6751430">b</span><span class="op" id="6751431">.</span><span class="ident" id="6751432">data</span><span class="op" id="6751436">[</span><span class="ident" id="6751437">b</span><span class="op" id="6751438">.</span><span class="ident" id="6751439">offset</span><span class="op" id="6751445">:</span><span class="op" id="6751446">]</span><span class="op" id="6751447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751450">if</span>&nbsp;<span class="ident" id="6751453">n</span>&nbsp;<span class="op" id="6751455">==</span>&nbsp;<span class="num" id="6751458">0</span>&nbsp;<span class="op" id="6751460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751464">return</span>&nbsp;<span class="num" id="6751471">0</span><span class="op" id="6751472">,</span>&nbsp;<span class="ident" id="6751474">io</span><span class="op" id="6751476">.</span><span class="ident" id="6751477">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751485">b</span><span class="op" id="6751486">.</span><span class="ident" id="6751487">offset</span>&nbsp;<span class="op" id="6751494">+=</span>&nbsp;<span class="ident" id="6751497">n</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751500">return</span><br>
<span class="lineno"></span><span class="op" id="6751507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6751510">func</span>&nbsp;<span class="op" id="6751515">(</span><span class="ident" id="6751516">b</span>&nbsp;<span class="op" id="6751518">*</span><span class="ident" id="6751519">benchmarkBuf</span><span class="op" id="6751531">)</span>&nbsp;<span class="ident" id="6751533">ReadByte</span><span class="op" id="6751541">(</span><span class="op" id="6751542">)</span>&nbsp;<span class="op" id="6751544">(</span><span class="ident" id="6751545">c</span>&nbsp;<span class="builtintype" id="6751547">byte</span><span class="op" id="6751551">,</span>&nbsp;<span class="ident" id="6751553">err</span>&nbsp;<span class="builtintype" id="6751557">error</span><span class="op" id="6751562">)</span>&nbsp;<span class="op" id="6751564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751567">if</span>&nbsp;<span class="ident" id="6751570">b</span><span class="op" id="6751571">.</span><span class="ident" id="6751572">offset</span>&nbsp;<span class="op" id="6751579">&gt;=</span>&nbsp;<span class="builtinfunc" id="6751582">len</span><span class="op" id="6751585">(</span><span class="ident" id="6751586">b</span><span class="op" id="6751587">.</span><span class="ident" id="6751588">data</span><span class="op" id="6751592">)</span>&nbsp;<span class="op" id="6751594">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751598">return</span>&nbsp;<span class="num" id="6751605">0</span><span class="op" id="6751606">,</span>&nbsp;<span class="ident" id="6751608">io</span><span class="op" id="6751610">.</span><span class="ident" id="6751611">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751619">c</span>&nbsp;<span class="op" id="6751621">=</span>&nbsp;<span class="ident" id="6751623">b</span><span class="op" id="6751624">.</span><span class="ident" id="6751625">data</span><span class="op" id="6751629">[</span><span class="ident" id="6751630">b</span><span class="op" id="6751631">.</span><span class="ident" id="6751632">offset</span><span class="op" id="6751638">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751641">b</span><span class="op" id="6751642">.</span><span class="ident" id="6751643">offset</span><span class="op" id="6751649">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751653">return</span><br>
<span class="lineno">225</span><span class="op" id="6751660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6751663">func</span>&nbsp;<span class="op" id="6751668">(</span><span class="ident" id="6751669">b</span>&nbsp;<span class="op" id="6751671">*</span><span class="ident" id="6751672">benchmarkBuf</span><span class="op" id="6751684">)</span>&nbsp;<span class="ident" id="6751686">reset</span><span class="op" id="6751691">(</span><span class="op" id="6751692">)</span>&nbsp;<span class="op" id="6751694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751697">b</span><span class="op" id="6751698">.</span><span class="ident" id="6751699">offset</span>&nbsp;<span class="op" id="6751706">=</span>&nbsp;<span class="num" id="6751708">0</span><br>
<span class="lineno"></span><span class="op" id="6751710">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="6751713">func</span>&nbsp;<span class="ident" id="6751718">BenchmarkDecodeComplex128Slice</span><span class="op" id="6751748">(</span><span class="ident" id="6751749">b</span>&nbsp;<span class="op" id="6751751">*</span><span class="ident" id="6751752">testing</span><span class="op" id="6751759">.</span><span class="ident" id="6751760">B</span><span class="op" id="6751761">)</span>&nbsp;<span class="op" id="6751763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751766">var</span>&nbsp;<span class="ident" id="6751770">buf</span>&nbsp;<span class="ident" id="6751774">bytes</span><span class="op" id="6751779">.</span><span class="ident" id="6751780">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751788">enc</span>&nbsp;<span class="op" id="6751792">:=</span>&nbsp;<span class="ident" id="6751795">NewEncoder</span><span class="op" id="6751805">(</span><span class="op" id="6751806">&amp;</span><span class="ident" id="6751807">buf</span><span class="op" id="6751810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751813">a</span>&nbsp;<span class="op" id="6751815">:=</span>&nbsp;<span class="builtinfunc" id="6751818">make</span><span class="op" id="6751822">(</span><span class="op" id="6751823">[</span><span class="op" id="6751824">]</span><span class="builtintype" id="6751825">complex128</span><span class="op" id="6751835">,</span>&nbsp;<span class="num" id="6751837">1000</span><span class="op" id="6751841">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751844">for</span>&nbsp;<span class="ident" id="6751848">i</span>&nbsp;<span class="op" id="6751850">:=</span>&nbsp;<span class="keyword" id="6751853">range</span>&nbsp;<span class="ident" id="6751859">a</span>&nbsp;<span class="op" id="6751861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751865">a</span><span class="op" id="6751866">[</span><span class="ident" id="6751867">i</span><span class="op" id="6751868">]</span>&nbsp;<span class="op" id="6751870">=</span>&nbsp;<span class="num" id="6751872">1.2</span>&nbsp;<span class="op" id="6751876">+</span>&nbsp;<span class="num" id="6751878">3.4i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751887">err</span>&nbsp;<span class="op" id="6751891">:=</span>&nbsp;<span class="ident" id="6751894">enc</span><span class="op" id="6751897">.</span><span class="ident" id="6751898">Encode</span><span class="op" id="6751904">(</span><span class="ident" id="6751905">a</span><span class="op" id="6751906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6751909">if</span>&nbsp;<span class="ident" id="6751912">err</span>&nbsp;<span class="op" id="6751916">!=</span>&nbsp;<span class="ident" id="6751919">nil</span>&nbsp;<span class="op" id="6751923">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751927">b</span><span class="op" id="6751928">.</span><span class="ident" id="6751929">Fatal</span><span class="op" id="6751934">(</span><span class="ident" id="6751935">err</span><span class="op" id="6751938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6751941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751944">x</span>&nbsp;<span class="op" id="6751946">:=</span>&nbsp;<span class="builtinfunc" id="6751949">make</span><span class="op" id="6751953">(</span><span class="op" id="6751954">[</span><span class="op" id="6751955">]</span><span class="builtintype" id="6751956">complex128</span><span class="op" id="6751966">,</span>&nbsp;<span class="num" id="6751968">1000</span><span class="op" id="6751972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6751975">bbuf</span>&nbsp;<span class="op" id="6751980">:=</span>&nbsp;<span class="ident" id="6751983">benchmarkBuf</span><span class="op" id="6751995">{</span><span class="ident" id="6751996">data</span><span class="op" id="6752000">:</span>&nbsp;<span class="ident" id="6752002">buf</span><span class="op" id="6752005">.</span><span class="ident" id="6752006">Bytes</span><span class="op" id="6752011">(</span><span class="op" id="6752012">)</span><span class="op" id="6752013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752016">b</span><span class="op" id="6752017">.</span><span class="ident" id="6752018">ResetTimer</span><span class="op" id="6752028">(</span><span class="op" id="6752029">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752032">for</span>&nbsp;<span class="ident" id="6752036">i</span>&nbsp;<span class="op" id="6752038">:=</span>&nbsp;<span class="num" id="6752041">0</span><span class="op" id="6752042">;</span>&nbsp;<span class="ident" id="6752044">i</span>&nbsp;<span class="op" id="6752046">&lt;</span>&nbsp;<span class="ident" id="6752048">b</span><span class="op" id="6752049">.</span><span class="ident" id="6752050">N</span><span class="op" id="6752051">;</span>&nbsp;<span class="ident" id="6752053">i</span><span class="op" id="6752054">++</span>&nbsp;<span class="op" id="6752057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752061">bbuf</span><span class="op" id="6752065">.</span><span class="ident" id="6752066">reset</span><span class="op" id="6752071">(</span><span class="op" id="6752072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752076">dec</span>&nbsp;<span class="op" id="6752080">:=</span>&nbsp;<span class="ident" id="6752083">NewDecoder</span><span class="op" id="6752093">(</span><span class="op" id="6752094">&amp;</span><span class="ident" id="6752095">bbuf</span><span class="op" id="6752099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752103">err</span>&nbsp;<span class="op" id="6752107">:=</span>&nbsp;<span class="ident" id="6752110">dec</span><span class="op" id="6752113">.</span><span class="ident" id="6752114">Decode</span><span class="op" id="6752120">(</span><span class="op" id="6752121">&amp;</span><span class="ident" id="6752122">x</span><span class="op" id="6752123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752127">if</span>&nbsp;<span class="ident" id="6752130">err</span>&nbsp;<span class="op" id="6752134">!=</span>&nbsp;<span class="ident" id="6752137">nil</span>&nbsp;<span class="op" id="6752141">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752146">b</span><span class="op" id="6752147">.</span><span class="ident" id="6752148">Fatal</span><span class="op" id="6752153">(</span><span class="ident" id="6752154">i</span><span class="op" id="6752155">,</span>&nbsp;<span class="ident" id="6752157">err</span><span class="op" id="6752160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752167">}</span><br>
<span class="lineno"></span><span class="op" id="6752169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="6752172">func</span>&nbsp;<span class="ident" id="6752177">BenchmarkDecodeFloat64Slice</span><span class="op" id="6752204">(</span><span class="ident" id="6752205">b</span>&nbsp;<span class="op" id="6752207">*</span><span class="ident" id="6752208">testing</span><span class="op" id="6752215">.</span><span class="ident" id="6752216">B</span><span class="op" id="6752217">)</span>&nbsp;<span class="op" id="6752219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752222">var</span>&nbsp;<span class="ident" id="6752226">buf</span>&nbsp;<span class="ident" id="6752230">bytes</span><span class="op" id="6752235">.</span><span class="ident" id="6752236">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752244">enc</span>&nbsp;<span class="op" id="6752248">:=</span>&nbsp;<span class="ident" id="6752251">NewEncoder</span><span class="op" id="6752261">(</span><span class="op" id="6752262">&amp;</span><span class="ident" id="6752263">buf</span><span class="op" id="6752266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752269">a</span>&nbsp;<span class="op" id="6752271">:=</span>&nbsp;<span class="builtinfunc" id="6752274">make</span><span class="op" id="6752278">(</span><span class="op" id="6752279">[</span><span class="op" id="6752280">]</span><span class="builtintype" id="6752281">float64</span><span class="op" id="6752288">,</span>&nbsp;<span class="num" id="6752290">1000</span><span class="op" id="6752294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752297">for</span>&nbsp;<span class="ident" id="6752301">i</span>&nbsp;<span class="op" id="6752303">:=</span>&nbsp;<span class="keyword" id="6752306">range</span>&nbsp;<span class="ident" id="6752312">a</span>&nbsp;<span class="op" id="6752314">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752318">a</span><span class="op" id="6752319">[</span><span class="ident" id="6752320">i</span><span class="op" id="6752321">]</span>&nbsp;<span class="op" id="6752323">=</span>&nbsp;<span class="num" id="6752325">1.23e4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752336">err</span>&nbsp;<span class="op" id="6752340">:=</span>&nbsp;<span class="ident" id="6752343">enc</span><span class="op" id="6752346">.</span><span class="ident" id="6752347">Encode</span><span class="op" id="6752353">(</span><span class="ident" id="6752354">a</span><span class="op" id="6752355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752358">if</span>&nbsp;<span class="ident" id="6752361">err</span>&nbsp;<span class="op" id="6752365">!=</span>&nbsp;<span class="ident" id="6752368">nil</span>&nbsp;<span class="op" id="6752372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752376">b</span><span class="op" id="6752377">.</span><span class="ident" id="6752378">Fatal</span><span class="op" id="6752383">(</span><span class="ident" id="6752384">err</span><span class="op" id="6752387">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752393">x</span>&nbsp;<span class="op" id="6752395">:=</span>&nbsp;<span class="builtinfunc" id="6752398">make</span><span class="op" id="6752402">(</span><span class="op" id="6752403">[</span><span class="op" id="6752404">]</span><span class="builtintype" id="6752405">float64</span><span class="op" id="6752412">,</span>&nbsp;<span class="num" id="6752414">1000</span><span class="op" id="6752418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752421">bbuf</span>&nbsp;<span class="op" id="6752426">:=</span>&nbsp;<span class="ident" id="6752429">benchmarkBuf</span><span class="op" id="6752441">{</span><span class="ident" id="6752442">data</span><span class="op" id="6752446">:</span>&nbsp;<span class="ident" id="6752448">buf</span><span class="op" id="6752451">.</span><span class="ident" id="6752452">Bytes</span><span class="op" id="6752457">(</span><span class="op" id="6752458">)</span><span class="op" id="6752459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752462">b</span><span class="op" id="6752463">.</span><span class="ident" id="6752464">ResetTimer</span><span class="op" id="6752474">(</span><span class="op" id="6752475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752478">for</span>&nbsp;<span class="ident" id="6752482">i</span>&nbsp;<span class="op" id="6752484">:=</span>&nbsp;<span class="num" id="6752487">0</span><span class="op" id="6752488">;</span>&nbsp;<span class="ident" id="6752490">i</span>&nbsp;<span class="op" id="6752492">&lt;</span>&nbsp;<span class="ident" id="6752494">b</span><span class="op" id="6752495">.</span><span class="ident" id="6752496">N</span><span class="op" id="6752497">;</span>&nbsp;<span class="ident" id="6752499">i</span><span class="op" id="6752500">++</span>&nbsp;<span class="op" id="6752503">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752507">bbuf</span><span class="op" id="6752511">.</span><span class="ident" id="6752512">reset</span><span class="op" id="6752517">(</span><span class="op" id="6752518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752522">dec</span>&nbsp;<span class="op" id="6752526">:=</span>&nbsp;<span class="ident" id="6752529">NewDecoder</span><span class="op" id="6752539">(</span><span class="op" id="6752540">&amp;</span><span class="ident" id="6752541">bbuf</span><span class="op" id="6752545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752549">err</span>&nbsp;<span class="op" id="6752553">:=</span>&nbsp;<span class="ident" id="6752556">dec</span><span class="op" id="6752559">.</span><span class="ident" id="6752560">Decode</span><span class="op" id="6752566">(</span><span class="op" id="6752567">&amp;</span><span class="ident" id="6752568">x</span><span class="op" id="6752569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752573">if</span>&nbsp;<span class="ident" id="6752576">err</span>&nbsp;<span class="op" id="6752580">!=</span>&nbsp;<span class="ident" id="6752583">nil</span>&nbsp;<span class="op" id="6752587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752592">b</span><span class="op" id="6752593">.</span><span class="ident" id="6752594">Fatal</span><span class="op" id="6752599">(</span><span class="ident" id="6752600">i</span><span class="op" id="6752601">,</span>&nbsp;<span class="ident" id="6752603">err</span><span class="op" id="6752606">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752613">}</span><br>
<span class="lineno"></span><span class="op" id="6752615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6752618">func</span>&nbsp;<span class="ident" id="6752623">BenchmarkDecodeInt32Slice</span><span class="op" id="6752648">(</span><span class="ident" id="6752649">b</span>&nbsp;<span class="op" id="6752651">*</span><span class="ident" id="6752652">testing</span><span class="op" id="6752659">.</span><span class="ident" id="6752660">B</span><span class="op" id="6752661">)</span>&nbsp;<span class="op" id="6752663">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752666">var</span>&nbsp;<span class="ident" id="6752670">buf</span>&nbsp;<span class="ident" id="6752674">bytes</span><span class="op" id="6752679">.</span><span class="ident" id="6752680">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752688">enc</span>&nbsp;<span class="op" id="6752692">:=</span>&nbsp;<span class="ident" id="6752695">NewEncoder</span><span class="op" id="6752705">(</span><span class="op" id="6752706">&amp;</span><span class="ident" id="6752707">buf</span><span class="op" id="6752710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752713">a</span>&nbsp;<span class="op" id="6752715">:=</span>&nbsp;<span class="builtinfunc" id="6752718">make</span><span class="op" id="6752722">(</span><span class="op" id="6752723">[</span><span class="op" id="6752724">]</span><span class="builtintype" id="6752725">int32</span><span class="op" id="6752730">,</span>&nbsp;<span class="num" id="6752732">1000</span><span class="op" id="6752736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752739">for</span>&nbsp;<span class="ident" id="6752743">i</span>&nbsp;<span class="op" id="6752745">:=</span>&nbsp;<span class="keyword" id="6752748">range</span>&nbsp;<span class="ident" id="6752754">a</span>&nbsp;<span class="op" id="6752756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752760">a</span><span class="op" id="6752761">[</span><span class="ident" id="6752762">i</span><span class="op" id="6752763">]</span>&nbsp;<span class="op" id="6752765">=</span>&nbsp;<span class="num" id="6752767">1234</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752776">err</span>&nbsp;<span class="op" id="6752780">:=</span>&nbsp;<span class="ident" id="6752783">enc</span><span class="op" id="6752786">.</span><span class="ident" id="6752787">Encode</span><span class="op" id="6752793">(</span><span class="ident" id="6752794">a</span><span class="op" id="6752795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752798">if</span>&nbsp;<span class="ident" id="6752801">err</span>&nbsp;<span class="op" id="6752805">!=</span>&nbsp;<span class="ident" id="6752808">nil</span>&nbsp;<span class="op" id="6752812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752816">b</span><span class="op" id="6752817">.</span><span class="ident" id="6752818">Fatal</span><span class="op" id="6752823">(</span><span class="ident" id="6752824">err</span><span class="op" id="6752827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6752830">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752833">x</span>&nbsp;<span class="op" id="6752835">:=</span>&nbsp;<span class="builtinfunc" id="6752838">make</span><span class="op" id="6752842">(</span><span class="op" id="6752843">[</span><span class="op" id="6752844">]</span><span class="builtintype" id="6752845">int32</span><span class="op" id="6752850">,</span>&nbsp;<span class="num" id="6752852">1000</span><span class="op" id="6752856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752859">bbuf</span>&nbsp;<span class="op" id="6752864">:=</span>&nbsp;<span class="ident" id="6752867">benchmarkBuf</span><span class="op" id="6752879">{</span><span class="ident" id="6752880">data</span><span class="op" id="6752884">:</span>&nbsp;<span class="ident" id="6752886">buf</span><span class="op" id="6752889">.</span><span class="ident" id="6752890">Bytes</span><span class="op" id="6752895">(</span><span class="op" id="6752896">)</span><span class="op" id="6752897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752900">b</span><span class="op" id="6752901">.</span><span class="ident" id="6752902">ResetTimer</span><span class="op" id="6752912">(</span><span class="op" id="6752913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6752916">for</span>&nbsp;<span class="ident" id="6752920">i</span>&nbsp;<span class="op" id="6752922">:=</span>&nbsp;<span class="num" id="6752925">0</span><span class="op" id="6752926">;</span>&nbsp;<span class="ident" id="6752928">i</span>&nbsp;<span class="op" id="6752930">&lt;</span>&nbsp;<span class="ident" id="6752932">b</span><span class="op" id="6752933">.</span><span class="ident" id="6752934">N</span><span class="op" id="6752935">;</span>&nbsp;<span class="ident" id="6752937">i</span><span class="op" id="6752938">++</span>&nbsp;<span class="op" id="6752941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752945">bbuf</span><span class="op" id="6752949">.</span><span class="ident" id="6752950">reset</span><span class="op" id="6752955">(</span><span class="op" id="6752956">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752960">dec</span>&nbsp;<span class="op" id="6752964">:=</span>&nbsp;<span class="ident" id="6752967">NewDecoder</span><span class="op" id="6752977">(</span><span class="op" id="6752978">&amp;</span><span class="ident" id="6752979">bbuf</span><span class="op" id="6752983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6752987">err</span>&nbsp;<span class="op" id="6752991">:=</span>&nbsp;<span class="ident" id="6752994">dec</span><span class="op" id="6752997">.</span><span class="ident" id="6752998">Decode</span><span class="op" id="6753004">(</span><span class="op" id="6753005">&amp;</span><span class="ident" id="6753006">x</span><span class="op" id="6753007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753011">if</span>&nbsp;<span class="ident" id="6753014">err</span>&nbsp;<span class="op" id="6753018">!=</span>&nbsp;<span class="ident" id="6753021">nil</span>&nbsp;<span class="op" id="6753025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753030">b</span><span class="op" id="6753031">.</span><span class="ident" id="6753032">Fatal</span><span class="op" id="6753037">(</span><span class="ident" id="6753038">i</span><span class="op" id="6753039">,</span>&nbsp;<span class="ident" id="6753041">err</span><span class="op" id="6753044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753048">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753051">}</span><br>
<span class="lineno"></span><span class="op" id="6753053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6753056">func</span>&nbsp;<span class="ident" id="6753061">BenchmarkDecodeStringSlice</span><span class="op" id="6753087">(</span><span class="ident" id="6753088">b</span>&nbsp;<span class="op" id="6753090">*</span><span class="ident" id="6753091">testing</span><span class="op" id="6753098">.</span><span class="ident" id="6753099">B</span><span class="op" id="6753100">)</span>&nbsp;<span class="op" id="6753102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753105">var</span>&nbsp;<span class="ident" id="6753109">buf</span>&nbsp;<span class="ident" id="6753113">bytes</span><span class="op" id="6753118">.</span><span class="ident" id="6753119">Buffer</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753127">enc</span>&nbsp;<span class="op" id="6753131">:=</span>&nbsp;<span class="ident" id="6753134">NewEncoder</span><span class="op" id="6753144">(</span><span class="op" id="6753145">&amp;</span><span class="ident" id="6753146">buf</span><span class="op" id="6753149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753152">a</span>&nbsp;<span class="op" id="6753154">:=</span>&nbsp;<span class="builtinfunc" id="6753157">make</span><span class="op" id="6753161">(</span><span class="op" id="6753162">[</span><span class="op" id="6753163">]</span><span class="builtintype" id="6753164">string</span><span class="op" id="6753170">,</span>&nbsp;<span class="num" id="6753172">1000</span><span class="op" id="6753176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753179">for</span>&nbsp;<span class="ident" id="6753183">i</span>&nbsp;<span class="op" id="6753185">:=</span>&nbsp;<span class="keyword" id="6753188">range</span>&nbsp;<span class="ident" id="6753194">a</span>&nbsp;<span class="op" id="6753196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753200">a</span><span class="op" id="6753201">[</span><span class="ident" id="6753202">i</span><span class="op" id="6753203">]</span>&nbsp;<span class="op" id="6753205">=</span>&nbsp;<span class="string" id="6753207">&#34;now&nbsp;is&nbsp;the&nbsp;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753226">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753229">err</span>&nbsp;<span class="op" id="6753233">:=</span>&nbsp;<span class="ident" id="6753236">enc</span><span class="op" id="6753239">.</span><span class="ident" id="6753240">Encode</span><span class="op" id="6753246">(</span><span class="ident" id="6753247">a</span><span class="op" id="6753248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753251">if</span>&nbsp;<span class="ident" id="6753254">err</span>&nbsp;<span class="op" id="6753258">!=</span>&nbsp;<span class="ident" id="6753261">nil</span>&nbsp;<span class="op" id="6753265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753269">b</span><span class="op" id="6753270">.</span><span class="ident" id="6753271">Fatal</span><span class="op" id="6753276">(</span><span class="ident" id="6753277">err</span><span class="op" id="6753280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753286">x</span>&nbsp;<span class="op" id="6753288">:=</span>&nbsp;<span class="builtinfunc" id="6753291">make</span><span class="op" id="6753295">(</span><span class="op" id="6753296">[</span><span class="op" id="6753297">]</span><span class="builtintype" id="6753298">string</span><span class="op" id="6753304">,</span>&nbsp;<span class="num" id="6753306">1000</span><span class="op" id="6753310">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753313">bbuf</span>&nbsp;<span class="op" id="6753318">:=</span>&nbsp;<span class="ident" id="6753321">benchmarkBuf</span><span class="op" id="6753333">{</span><span class="ident" id="6753334">data</span><span class="op" id="6753338">:</span>&nbsp;<span class="ident" id="6753340">buf</span><span class="op" id="6753343">.</span><span class="ident" id="6753344">Bytes</span><span class="op" id="6753349">(</span><span class="op" id="6753350">)</span><span class="op" id="6753351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753354">b</span><span class="op" id="6753355">.</span><span class="ident" id="6753356">ResetTimer</span><span class="op" id="6753366">(</span><span class="op" id="6753367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753370">for</span>&nbsp;<span class="ident" id="6753374">i</span>&nbsp;<span class="op" id="6753376">:=</span>&nbsp;<span class="num" id="6753379">0</span><span class="op" id="6753380">;</span>&nbsp;<span class="ident" id="6753382">i</span>&nbsp;<span class="op" id="6753384">&lt;</span>&nbsp;<span class="ident" id="6753386">b</span><span class="op" id="6753387">.</span><span class="ident" id="6753388">N</span><span class="op" id="6753389">;</span>&nbsp;<span class="ident" id="6753391">i</span><span class="op" id="6753392">++</span>&nbsp;<span class="op" id="6753395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753399">bbuf</span><span class="op" id="6753403">.</span><span class="ident" id="6753404">reset</span><span class="op" id="6753409">(</span><span class="op" id="6753410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753414">dec</span>&nbsp;<span class="op" id="6753418">:=</span>&nbsp;<span class="ident" id="6753421">NewDecoder</span><span class="op" id="6753431">(</span><span class="op" id="6753432">&amp;</span><span class="ident" id="6753433">bbuf</span><span class="op" id="6753437">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753441">err</span>&nbsp;<span class="op" id="6753445">:=</span>&nbsp;<span class="ident" id="6753448">dec</span><span class="op" id="6753451">.</span><span class="ident" id="6753452">Decode</span><span class="op" id="6753458">(</span><span class="op" id="6753459">&amp;</span><span class="ident" id="6753460">x</span><span class="op" id="6753461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6753465">if</span>&nbsp;<span class="ident" id="6753468">err</span>&nbsp;<span class="op" id="6753472">!=</span>&nbsp;<span class="ident" id="6753475">nil</span>&nbsp;<span class="op" id="6753479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6753484">b</span><span class="op" id="6753485">.</span><span class="ident" id="6753486">Fatal</span><span class="op" id="6753491">(</span><span class="ident" id="6753492">i</span><span class="op" id="6753493">,</span>&nbsp;<span class="ident" id="6753495">err</span><span class="op" id="6753498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6753505">}</span><br>
<span class="lineno">325</span><span class="op" id="6753507">}</span>
</div>
</body>
</html>
