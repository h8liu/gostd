<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6019795">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6019850">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6019904">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6019955">package</span>&nbsp;<span class="ident" id="6019963">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6019968">import</span>&nbsp;<span class="op" id="6019975">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6019978">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6019988">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6020000">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6020010">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6020018">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="6020028">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6020031">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6020111">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="6020135">//</span><br>
<span class="lineno"></span><span class="comment" id="6020138">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6020219">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="6020301">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="6020383">//</span><br>
<span class="lineno"></span><span class="keyword" id="6020386">type</span>&nbsp;<span class="ident" id="6020391">methodSet</span>&nbsp;<span class="keyword" id="6020401">map</span><span class="op" id="6020404">[</span><span class="builtintype" id="6020405">string</span><span class="op" id="6020411">]</span><span class="op" id="6020412">*</span><span class="ident" id="6020413">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6020419">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6020480">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="6020545">//</span><br>
<span class="lineno"></span><span class="keyword" id="6020548">func</span>&nbsp;<span class="ident" id="6020553">recvString</span><span class="op" id="6020563">(</span><span class="ident" id="6020564">recv</span>&nbsp;<span class="ident" id="6020569">ast</span><span class="op" id="6020572">.</span><span class="ident" id="6020573">Expr</span><span class="op" id="6020577">)</span>&nbsp;<span class="builtintype" id="6020579">string</span>&nbsp;<span class="op" id="6020586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020589">switch</span>&nbsp;<span class="ident" id="6020596">t</span>&nbsp;<span class="op" id="6020598">:=</span>&nbsp;<span class="ident" id="6020601">recv</span><span class="op" id="6020605">.</span><span class="op" id="6020606">(</span><span class="keyword" id="6020607">type</span><span class="op" id="6020611">)</span>&nbsp;<span class="op" id="6020613">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020616">case</span>&nbsp;<span class="op" id="6020621">*</span><span class="ident" id="6020622">ast</span><span class="op" id="6020625">.</span><span class="ident" id="6020626">Ident</span><span class="op" id="6020631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020635">return</span>&nbsp;<span class="ident" id="6020642">t</span><span class="op" id="6020643">.</span><span class="ident" id="6020644">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020650">case</span>&nbsp;<span class="op" id="6020655">*</span><span class="ident" id="6020656">ast</span><span class="op" id="6020659">.</span><span class="ident" id="6020660">StarExpr</span><span class="op" id="6020668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020672">return</span>&nbsp;<span class="string" id="6020679">&#34;*&#34;</span>&nbsp;<span class="op" id="6020683">+</span>&nbsp;<span class="ident" id="6020685">recvString</span><span class="op" id="6020695">(</span><span class="ident" id="6020696">t</span><span class="op" id="6020697">.</span><span class="ident" id="6020698">X</span><span class="op" id="6020699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6020702">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020705">return</span>&nbsp;<span class="string" id="6020712">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="6020722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6020725">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6020790">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="6020859">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6020909">//</span><br>
<span class="lineno"></span><span class="keyword" id="6020912">func</span>&nbsp;<span class="op" id="6020917">(</span><span class="ident" id="6020918">mset</span>&nbsp;<span class="ident" id="6020923">methodSet</span><span class="op" id="6020932">)</span>&nbsp;<span class="ident" id="6020934">set</span><span class="op" id="6020937">(</span><span class="ident" id="6020938">f</span>&nbsp;<span class="op" id="6020940">*</span><span class="ident" id="6020941">ast</span><span class="op" id="6020944">.</span><span class="ident" id="6020945">FuncDecl</span><span class="op" id="6020953">)</span>&nbsp;<span class="op" id="6020955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6020958">name</span>&nbsp;<span class="op" id="6020963">:=</span>&nbsp;<span class="ident" id="6020966">f</span><span class="op" id="6020967">.</span><span class="ident" id="6020968">Name</span><span class="op" id="6020972">.</span><span class="ident" id="6020973">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6020979">if</span>&nbsp;<span class="ident" id="6020982">g</span>&nbsp;<span class="op" id="6020984">:=</span>&nbsp;<span class="ident" id="6020987">mset</span><span class="op" id="6020991">[</span><span class="ident" id="6020992">name</span><span class="op" id="6020996">]</span><span class="op" id="6020997">;</span>&nbsp;<span class="ident" id="6020999">g</span>&nbsp;<span class="op" id="6021001">!=</span>&nbsp;<span class="ident" id="6021004">nil</span>&nbsp;<span class="op" id="6021008">&amp;&amp;</span>&nbsp;<span class="ident" id="6021011">g</span><span class="op" id="6021012">.</span><span class="ident" id="6021013">Doc</span>&nbsp;<span class="op" id="6021017">!=</span>&nbsp;<span class="string" id="6021020">&#34;&#34;</span>&nbsp;<span class="op" id="6021023">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021027">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021091">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021151">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021214">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021277">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6021312">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6021320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021323">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021381">recv</span>&nbsp;<span class="op" id="6021386">:=</span>&nbsp;<span class="string" id="6021389">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6021393">if</span>&nbsp;<span class="ident" id="6021396">f</span><span class="op" id="6021397">.</span><span class="ident" id="6021398">Recv</span>&nbsp;<span class="op" id="6021403">!=</span>&nbsp;<span class="ident" id="6021406">nil</span>&nbsp;<span class="op" id="6021410">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6021414">var</span>&nbsp;<span class="ident" id="6021418">typ</span>&nbsp;<span class="ident" id="6021422">ast</span><span class="op" id="6021425">.</span><span class="ident" id="6021426">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6021433">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6021475">if</span>&nbsp;<span class="ident" id="6021478">list</span>&nbsp;<span class="op" id="6021483">:=</span>&nbsp;<span class="ident" id="6021486">f</span><span class="op" id="6021487">.</span><span class="ident" id="6021488">Recv</span><span class="op" id="6021492">.</span><span class="ident" id="6021493">List</span><span class="op" id="6021497">;</span>&nbsp;<span class="builtinfunc" id="6021499">len</span><span class="op" id="6021502">(</span><span class="ident" id="6021503">list</span><span class="op" id="6021507">)</span>&nbsp;<span class="op" id="6021509">==</span>&nbsp;<span class="num" id="6021512">1</span>&nbsp;<span class="op" id="6021514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021519">typ</span>&nbsp;<span class="op" id="6021523">=</span>&nbsp;<span class="ident" id="6021525">list</span><span class="op" id="6021529">[</span><span class="num" id="6021530">0</span><span class="op" id="6021531">]</span><span class="op" id="6021532">.</span><span class="ident" id="6021533">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6021540">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021544">recv</span>&nbsp;<span class="op" id="6021549">=</span>&nbsp;<span class="ident" id="6021551">recvString</span><span class="op" id="6021561">(</span><span class="ident" id="6021562">typ</span><span class="op" id="6021565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6021568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021571">mset</span><span class="op" id="6021575">[</span><span class="ident" id="6021576">name</span><span class="op" id="6021580">]</span>&nbsp;<span class="op" id="6021582">=</span>&nbsp;<span class="op" id="6021584">&amp;</span><span class="ident" id="6021585">Func</span><span class="op" id="6021589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021593">Doc</span><span class="op" id="6021596">:</span>&nbsp;&nbsp;<span class="ident" id="6021599">f</span><span class="op" id="6021600">.</span><span class="ident" id="6021601">Doc</span><span class="op" id="6021604">.</span><span class="ident" id="6021605">Text</span><span class="op" id="6021609">(</span><span class="op" id="6021610">)</span><span class="op" id="6021611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021615">Name</span><span class="op" id="6021619">:</span>&nbsp;<span class="ident" id="6021621">name</span><span class="op" id="6021625">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021629">Decl</span><span class="op" id="6021633">:</span>&nbsp;<span class="ident" id="6021635">f</span><span class="op" id="6021636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021640">Recv</span><span class="op" id="6021644">:</span>&nbsp;<span class="ident" id="6021646">recv</span><span class="op" id="6021650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021654">Orig</span><span class="op" id="6021658">:</span>&nbsp;<span class="ident" id="6021660">recv</span><span class="op" id="6021664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6021667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021670">f</span><span class="op" id="6021671">.</span><span class="ident" id="6021672">Doc</span>&nbsp;<span class="op" id="6021676">=</span>&nbsp;<span class="ident" id="6021678">nil</span>&nbsp;<span class="comment" id="6021682">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="6021716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6021719">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="6021790">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="6021862">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="6021879">//</span><br>
<span class="lineno"></span><span class="keyword" id="6021882">func</span>&nbsp;<span class="op" id="6021887">(</span><span class="ident" id="6021888">mset</span>&nbsp;<span class="ident" id="6021893">methodSet</span><span class="op" id="6021902">)</span>&nbsp;<span class="ident" id="6021904">add</span><span class="op" id="6021907">(</span><span class="ident" id="6021908">m</span>&nbsp;<span class="op" id="6021910">*</span><span class="ident" id="6021911">Func</span><span class="op" id="6021915">)</span>&nbsp;<span class="op" id="6021917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021920">old</span>&nbsp;<span class="op" id="6021924">:=</span>&nbsp;<span class="ident" id="6021927">mset</span><span class="op" id="6021931">[</span><span class="ident" id="6021932">m</span><span class="op" id="6021933">.</span><span class="ident" id="6021934">Name</span><span class="op" id="6021938">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6021941">if</span>&nbsp;<span class="ident" id="6021944">old</span>&nbsp;<span class="op" id="6021948">==</span>&nbsp;<span class="ident" id="6021951">nil</span>&nbsp;<span class="op" id="6021955">||</span>&nbsp;<span class="ident" id="6021958">m</span><span class="op" id="6021959">.</span><span class="ident" id="6021960">Level</span>&nbsp;<span class="op" id="6021966">&lt;</span>&nbsp;<span class="ident" id="6021968">old</span><span class="op" id="6021971">.</span><span class="ident" id="6021972">Level</span>&nbsp;<span class="op" id="6021978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6021982">mset</span><span class="op" id="6021986">[</span><span class="ident" id="6021987">m</span><span class="op" id="6021988">.</span><span class="ident" id="6021989">Name</span><span class="op" id="6021993">]</span>&nbsp;<span class="op" id="6021995">=</span>&nbsp;<span class="ident" id="6021997">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022001">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6022009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022012">if</span>&nbsp;<span class="ident" id="6022015">old</span>&nbsp;<span class="op" id="6022019">!=</span>&nbsp;<span class="ident" id="6022022">nil</span>&nbsp;<span class="op" id="6022026">&amp;&amp;</span>&nbsp;<span class="ident" id="6022029">m</span><span class="op" id="6022030">.</span><span class="ident" id="6022031">Level</span>&nbsp;<span class="op" id="6022037">==</span>&nbsp;<span class="ident" id="6022040">old</span><span class="op" id="6022043">.</span><span class="ident" id="6022044">Level</span>&nbsp;<span class="op" id="6022050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6022054">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6022107">mset</span><span class="op" id="6022111">[</span><span class="ident" id="6022112">m</span><span class="op" id="6022113">.</span><span class="ident" id="6022114">Name</span><span class="op" id="6022118">]</span>&nbsp;<span class="op" id="6022120">=</span>&nbsp;<span class="op" id="6022122">&amp;</span><span class="ident" id="6022123">Func</span><span class="op" id="6022127">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6022132">Name</span><span class="op" id="6022136">:</span>&nbsp;&nbsp;<span class="ident" id="6022139">m</span><span class="op" id="6022140">.</span><span class="ident" id="6022141">Name</span><span class="op" id="6022145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6022150">Level</span><span class="op" id="6022155">:</span>&nbsp;<span class="ident" id="6022157">m</span><span class="op" id="6022158">.</span><span class="ident" id="6022159">Level</span><span class="op" id="6022164">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6022168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6022171">}</span><br>
<span class="lineno"></span><span class="op" id="6022173">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="6022176">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6022256">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6022272">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="6022335">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="6022379">//</span><br>
<span class="lineno"></span><span class="keyword" id="6022382">func</span>&nbsp;<span class="ident" id="6022387">baseTypeName</span><span class="op" id="6022399">(</span><span class="ident" id="6022400">x</span>&nbsp;<span class="ident" id="6022402">ast</span><span class="op" id="6022405">.</span><span class="ident" id="6022406">Expr</span><span class="op" id="6022410">)</span>&nbsp;<span class="op" id="6022412">(</span><span class="ident" id="6022413">name</span>&nbsp;<span class="builtintype" id="6022418">string</span><span class="op" id="6022424">,</span>&nbsp;<span class="ident" id="6022426">imported</span>&nbsp;<span class="builtintype" id="6022435">bool</span><span class="op" id="6022439">)</span>&nbsp;<span class="op" id="6022441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022444">switch</span>&nbsp;<span class="ident" id="6022451">t</span>&nbsp;<span class="op" id="6022453">:=</span>&nbsp;<span class="ident" id="6022456">x</span><span class="op" id="6022457">.</span><span class="op" id="6022458">(</span><span class="keyword" id="6022459">type</span><span class="op" id="6022463">)</span>&nbsp;<span class="op" id="6022465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022468">case</span>&nbsp;<span class="op" id="6022473">*</span><span class="ident" id="6022474">ast</span><span class="op" id="6022477">.</span><span class="ident" id="6022478">Ident</span><span class="op" id="6022483">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022487">return</span>&nbsp;<span class="ident" id="6022494">t</span><span class="op" id="6022495">.</span><span class="ident" id="6022496">Name</span><span class="op" id="6022500">,</span>&nbsp;<span class="builtintype" id="6022502">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022509">case</span>&nbsp;<span class="op" id="6022514">*</span><span class="ident" id="6022515">ast</span><span class="op" id="6022518">.</span><span class="ident" id="6022519">SelectorExpr</span><span class="op" id="6022531">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022535">if</span>&nbsp;<span class="ident" id="6022538">_</span><span class="op" id="6022539">,</span>&nbsp;<span class="ident" id="6022541">ok</span>&nbsp;<span class="op" id="6022544">:=</span>&nbsp;<span class="ident" id="6022547">t</span><span class="op" id="6022548">.</span><span class="ident" id="6022549">X</span><span class="op" id="6022550">.</span><span class="op" id="6022551">(</span><span class="op" id="6022552">*</span><span class="ident" id="6022553">ast</span><span class="op" id="6022556">.</span><span class="ident" id="6022557">Ident</span><span class="op" id="6022562">)</span><span class="op" id="6022563">;</span>&nbsp;<span class="ident" id="6022565">ok</span>&nbsp;<span class="op" id="6022568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6022573">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6022619">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022649">return</span>&nbsp;<span class="ident" id="6022656">t</span><span class="op" id="6022657">.</span><span class="ident" id="6022658">Sel</span><span class="op" id="6022661">.</span><span class="ident" id="6022662">Name</span><span class="op" id="6022666">,</span>&nbsp;<span class="builtintype" id="6022668">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6022675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022678">case</span>&nbsp;<span class="op" id="6022683">*</span><span class="ident" id="6022684">ast</span><span class="op" id="6022687">.</span><span class="ident" id="6022688">StarExpr</span><span class="op" id="6022696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022700">return</span>&nbsp;<span class="ident" id="6022707">baseTypeName</span><span class="op" id="6022719">(</span><span class="ident" id="6022720">t</span><span class="op" id="6022721">.</span><span class="ident" id="6022722">X</span><span class="op" id="6022723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6022726">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6022729">return</span><br>
<span class="lineno"></span><span class="op" id="6022736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6022739">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="6022792">type</span>&nbsp;<span class="ident" id="6022797">embeddedSet</span>&nbsp;<span class="keyword" id="6022809">map</span><span class="op" id="6022812">[</span><span class="op" id="6022813">*</span><span class="ident" id="6022814">namedType</span><span class="op" id="6022823">]</span><span class="builtintype" id="6022824">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="6022830">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="6022904">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="6022976">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="6022998">//</span><br>
<span class="lineno">120</span><span class="keyword" id="6023001">type</span>&nbsp;<span class="ident" id="6023006">namedType</span>&nbsp;<span class="keyword" id="6023016">struct</span>&nbsp;<span class="op" id="6023023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023026">doc</span>&nbsp;&nbsp;<span class="builtintype" id="6023031">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023044">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023069">name</span>&nbsp;<span class="builtintype" id="6023074">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023087">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023101">decl</span>&nbsp;<span class="op" id="6023106">*</span><span class="ident" id="6023107">ast</span><span class="op" id="6023110">.</span><span class="ident" id="6023111">GenDecl</span>&nbsp;<span class="comment" id="6023119">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023164">isEmbedded</span>&nbsp;<span class="builtintype" id="6023175">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023187">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023221">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6023232">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023244">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023278">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6023289">embeddedSet</span>&nbsp;<span class="comment" id="6023301">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023345">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023373">values</span>&nbsp;&nbsp;<span class="op" id="6023381">[</span><span class="op" id="6023382">]</span><span class="op" id="6023383">*</span><span class="ident" id="6023384">Value</span>&nbsp;<span class="comment" id="6023390">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023410">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6023418">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023429">methods</span>&nbsp;<span class="ident" id="6023437">methodSet</span><br>
<span class="lineno"></span><span class="op" id="6023447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="6023450">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6023530">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6023545">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="6023603">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="6023664">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="6023721">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="6023781">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6023842">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="6023883">//</span><br>
<span class="lineno">145</span><span class="keyword" id="6023886">type</span>&nbsp;<span class="ident" id="6023891">reader</span>&nbsp;<span class="keyword" id="6023898">struct</span>&nbsp;<span class="op" id="6023905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023908">mode</span>&nbsp;<span class="ident" id="6023913">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6023920">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023943">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6023953">string</span>&nbsp;<span class="comment" id="6023960">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6023994">filenames</span>&nbsp;<span class="op" id="6024004">[</span><span class="op" id="6024005">]</span><span class="builtintype" id="6024006">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024014">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024024">map</span><span class="op" id="6024027">[</span><span class="builtintype" id="6024028">string</span><span class="op" id="6024034">]</span><span class="op" id="6024035">[</span><span class="op" id="6024036">]</span><span class="op" id="6024037">*</span><span class="ident" id="6024038">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6024045">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024062">imports</span>&nbsp;<span class="keyword" id="6024070">map</span><span class="op" id="6024073">[</span><span class="builtintype" id="6024074">string</span><span class="op" id="6024080">]</span><span class="builtintype" id="6024081">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024086">values</span>&nbsp;&nbsp;<span class="op" id="6024094">[</span><span class="op" id="6024095">]</span><span class="op" id="6024096">*</span><span class="ident" id="6024097">Value</span>&nbsp;<span class="comment" id="6024103">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024123">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024131">map</span><span class="op" id="6024134">[</span><span class="builtintype" id="6024135">string</span><span class="op" id="6024141">]</span><span class="op" id="6024142">*</span><span class="ident" id="6024143">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024154">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6024162">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6024174">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024228">errorDecl</span>&nbsp;<span class="builtintype" id="6024238">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6024259">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024305">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6024315">[</span><span class="op" id="6024316">]</span><span class="op" id="6024317">*</span><span class="ident" id="6024318">ast</span><span class="op" id="6024321">.</span><span class="ident" id="6024322">InterfaceType</span>&nbsp;<span class="comment" id="6024336">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="6024393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6024396">func</span>&nbsp;<span class="op" id="6024401">(</span><span class="ident" id="6024402">r</span>&nbsp;<span class="op" id="6024404">*</span><span class="ident" id="6024405">reader</span><span class="op" id="6024411">)</span>&nbsp;<span class="ident" id="6024413">isVisible</span><span class="op" id="6024422">(</span><span class="ident" id="6024423">name</span>&nbsp;<span class="builtintype" id="6024428">string</span><span class="op" id="6024434">)</span>&nbsp;<span class="builtintype" id="6024436">bool</span>&nbsp;<span class="op" id="6024441">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024444">return</span>&nbsp;<span class="ident" id="6024451">r</span><span class="op" id="6024452">.</span><span class="ident" id="6024453">mode</span><span class="op" id="6024457">&amp;</span><span class="ident" id="6024458">AllDecls</span>&nbsp;<span class="op" id="6024467">!=</span>&nbsp;<span class="num" id="6024470">0</span>&nbsp;<span class="op" id="6024472">||</span>&nbsp;<span class="ident" id="6024475">ast</span><span class="op" id="6024478">.</span><span class="ident" id="6024479">IsExported</span><span class="op" id="6024489">(</span><span class="ident" id="6024490">name</span><span class="op" id="6024494">)</span><br>
<span class="lineno"></span><span class="op" id="6024496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6024499">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="6024556">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="6024612">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="6024670">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="6024699">//</span><br>
<span class="lineno"></span><span class="keyword" id="6024702">func</span>&nbsp;<span class="op" id="6024707">(</span><span class="ident" id="6024708">r</span>&nbsp;<span class="op" id="6024710">*</span><span class="ident" id="6024711">reader</span><span class="op" id="6024717">)</span>&nbsp;<span class="ident" id="6024719">lookupType</span><span class="op" id="6024729">(</span><span class="ident" id="6024730">name</span>&nbsp;<span class="builtintype" id="6024735">string</span><span class="op" id="6024741">)</span>&nbsp;<span class="op" id="6024743">*</span><span class="ident" id="6024744">namedType</span>&nbsp;<span class="op" id="6024754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024757">if</span>&nbsp;<span class="ident" id="6024760">name</span>&nbsp;<span class="op" id="6024765">==</span>&nbsp;<span class="string" id="6024768">&#34;&#34;</span>&nbsp;<span class="op" id="6024771">||</span>&nbsp;<span class="ident" id="6024774">name</span>&nbsp;<span class="op" id="6024779">==</span>&nbsp;<span class="string" id="6024782">&#34;_&#34;</span>&nbsp;<span class="op" id="6024786">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024790">return</span>&nbsp;<span class="ident" id="6024797">nil</span>&nbsp;<span class="comment" id="6024801">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6024838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024841">if</span>&nbsp;<span class="ident" id="6024844">typ</span><span class="op" id="6024847">,</span>&nbsp;<span class="ident" id="6024849">found</span>&nbsp;<span class="op" id="6024855">:=</span>&nbsp;<span class="ident" id="6024858">r</span><span class="op" id="6024859">.</span><span class="ident" id="6024860">types</span><span class="op" id="6024865">[</span><span class="ident" id="6024866">name</span><span class="op" id="6024870">]</span><span class="op" id="6024871">;</span>&nbsp;<span class="ident" id="6024873">found</span>&nbsp;<span class="op" id="6024879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6024883">return</span>&nbsp;<span class="ident" id="6024890">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6024895">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6024898">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024947">typ</span>&nbsp;<span class="op" id="6024951">:=</span>&nbsp;<span class="op" id="6024954">&amp;</span><span class="ident" id="6024955">namedType</span><span class="op" id="6024964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024968">name</span><span class="op" id="6024972">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024978">name</span><span class="op" id="6024982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6024986">embedded</span><span class="op" id="6024994">:</span>&nbsp;<span class="builtinfunc" id="6024996">make</span><span class="op" id="6025000">(</span><span class="ident" id="6025001">embeddedSet</span><span class="op" id="6025012">)</span><span class="op" id="6025013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025017">funcs</span><span class="op" id="6025022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6025027">make</span><span class="op" id="6025031">(</span><span class="ident" id="6025032">methodSet</span><span class="op" id="6025041">)</span><span class="op" id="6025042">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025046">methods</span><span class="op" id="6025053">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="6025056">make</span><span class="op" id="6025060">(</span><span class="ident" id="6025061">methodSet</span><span class="op" id="6025070">)</span><span class="op" id="6025071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025077">r</span><span class="op" id="6025078">.</span><span class="ident" id="6025079">types</span><span class="op" id="6025084">[</span><span class="ident" id="6025085">name</span><span class="op" id="6025089">]</span>&nbsp;<span class="op" id="6025091">=</span>&nbsp;<span class="ident" id="6025093">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025098">return</span>&nbsp;<span class="ident" id="6025105">typ</span><br>
<span class="lineno"></span><span class="op" id="6025109">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6025112">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6025174">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="6025238">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6025302">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="6025342">//</span><br>
<span class="lineno"></span><span class="keyword" id="6025345">func</span>&nbsp;<span class="op" id="6025350">(</span><span class="ident" id="6025351">r</span>&nbsp;<span class="op" id="6025353">*</span><span class="ident" id="6025354">reader</span><span class="op" id="6025360">)</span>&nbsp;<span class="ident" id="6025362">recordAnonymousField</span><span class="op" id="6025382">(</span><span class="ident" id="6025383">parent</span>&nbsp;<span class="op" id="6025390">*</span><span class="ident" id="6025391">namedType</span><span class="op" id="6025400">,</span>&nbsp;<span class="ident" id="6025402">fieldType</span>&nbsp;<span class="ident" id="6025412">ast</span><span class="op" id="6025415">.</span><span class="ident" id="6025416">Expr</span><span class="op" id="6025420">)</span>&nbsp;<span class="op" id="6025422">(</span><span class="ident" id="6025423">fname</span>&nbsp;<span class="builtintype" id="6025429">string</span><span class="op" id="6025435">)</span>&nbsp;<span class="op" id="6025437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025440">fname</span><span class="op" id="6025445">,</span>&nbsp;<span class="ident" id="6025447">imp</span>&nbsp;<span class="op" id="6025451">:=</span>&nbsp;<span class="ident" id="6025454">baseTypeName</span><span class="op" id="6025466">(</span><span class="ident" id="6025467">fieldType</span><span class="op" id="6025476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025479">if</span>&nbsp;<span class="ident" id="6025482">parent</span>&nbsp;<span class="op" id="6025489">==</span>&nbsp;<span class="ident" id="6025492">nil</span>&nbsp;<span class="op" id="6025496">||</span>&nbsp;<span class="ident" id="6025499">imp</span>&nbsp;<span class="op" id="6025503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025507">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025518">if</span>&nbsp;<span class="ident" id="6025521">ftype</span>&nbsp;<span class="op" id="6025527">:=</span>&nbsp;<span class="ident" id="6025530">r</span><span class="op" id="6025531">.</span><span class="ident" id="6025532">lookupType</span><span class="op" id="6025542">(</span><span class="ident" id="6025543">fname</span><span class="op" id="6025548">)</span><span class="op" id="6025549">;</span>&nbsp;<span class="ident" id="6025551">ftype</span>&nbsp;<span class="op" id="6025557">!=</span>&nbsp;<span class="ident" id="6025560">nil</span>&nbsp;<span class="op" id="6025564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025568">ftype</span><span class="op" id="6025573">.</span><span class="ident" id="6025574">isEmbedded</span>&nbsp;<span class="op" id="6025585">=</span>&nbsp;<span class="builtintype" id="6025587">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025594">_</span><span class="op" id="6025595">,</span>&nbsp;<span class="ident" id="6025597">ptr</span>&nbsp;<span class="op" id="6025601">:=</span>&nbsp;<span class="ident" id="6025604">fieldType</span><span class="op" id="6025613">.</span><span class="op" id="6025614">(</span><span class="op" id="6025615">*</span><span class="ident" id="6025616">ast</span><span class="op" id="6025619">.</span><span class="ident" id="6025620">StarExpr</span><span class="op" id="6025628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025632">parent</span><span class="op" id="6025638">.</span><span class="ident" id="6025639">embedded</span><span class="op" id="6025647">[</span><span class="ident" id="6025648">ftype</span><span class="op" id="6025653">]</span>&nbsp;<span class="op" id="6025655">=</span>&nbsp;<span class="ident" id="6025657">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025665">return</span><br>
<span class="lineno"></span><span class="op" id="6025672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6025675">func</span>&nbsp;<span class="op" id="6025680">(</span><span class="ident" id="6025681">r</span>&nbsp;<span class="op" id="6025683">*</span><span class="ident" id="6025684">reader</span><span class="op" id="6025690">)</span>&nbsp;<span class="ident" id="6025692">readDoc</span><span class="op" id="6025699">(</span><span class="ident" id="6025700">comment</span>&nbsp;<span class="op" id="6025708">*</span><span class="ident" id="6025709">ast</span><span class="op" id="6025712">.</span><span class="ident" id="6025713">CommentGroup</span><span class="op" id="6025725">)</span>&nbsp;<span class="op" id="6025727">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6025730">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6025789">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025845">text</span>&nbsp;<span class="op" id="6025850">:=</span>&nbsp;<span class="ident" id="6025853">comment</span><span class="op" id="6025860">.</span><span class="ident" id="6025861">Text</span><span class="op" id="6025865">(</span><span class="op" id="6025866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025869">if</span>&nbsp;<span class="ident" id="6025872">r</span><span class="op" id="6025873">.</span><span class="ident" id="6025874">doc</span>&nbsp;<span class="op" id="6025878">==</span>&nbsp;<span class="string" id="6025881">&#34;&#34;</span>&nbsp;<span class="op" id="6025884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025888">r</span><span class="op" id="6025889">.</span><span class="ident" id="6025890">doc</span>&nbsp;<span class="op" id="6025894">=</span>&nbsp;<span class="ident" id="6025896">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6025903">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6025911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025914">r</span><span class="op" id="6025915">.</span><span class="ident" id="6025916">doc</span>&nbsp;<span class="op" id="6025920">+=</span>&nbsp;<span class="string" id="6025923">&#34;\n&#34;</span>&nbsp;<span class="op" id="6025928">+</span>&nbsp;<span class="ident" id="6025930">text</span><br>
<span class="lineno"></span><span class="op" id="6025935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6025938">func</span>&nbsp;<span class="op" id="6025943">(</span><span class="ident" id="6025944">r</span>&nbsp;<span class="op" id="6025946">*</span><span class="ident" id="6025947">reader</span><span class="op" id="6025953">)</span>&nbsp;<span class="ident" id="6025955">remember</span><span class="op" id="6025963">(</span><span class="ident" id="6025964">typ</span>&nbsp;<span class="op" id="6025968">*</span><span class="ident" id="6025969">ast</span><span class="op" id="6025972">.</span><span class="ident" id="6025973">InterfaceType</span><span class="op" id="6025986">)</span>&nbsp;<span class="op" id="6025988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6025991">r</span><span class="op" id="6025992">.</span><span class="ident" id="6025993">fixlist</span>&nbsp;<span class="op" id="6026001">=</span>&nbsp;<span class="builtinfunc" id="6026003">append</span><span class="op" id="6026009">(</span><span class="ident" id="6026010">r</span><span class="op" id="6026011">.</span><span class="ident" id="6026012">fixlist</span><span class="op" id="6026019">,</span>&nbsp;<span class="ident" id="6026021">typ</span><span class="op" id="6026024">)</span><br>
<span class="lineno"></span><span class="op" id="6026026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6026029">func</span>&nbsp;<span class="ident" id="6026034">specNames</span><span class="op" id="6026043">(</span><span class="ident" id="6026044">specs</span>&nbsp;<span class="op" id="6026050">[</span><span class="op" id="6026051">]</span><span class="ident" id="6026052">ast</span><span class="op" id="6026055">.</span><span class="ident" id="6026056">Spec</span><span class="op" id="6026060">)</span>&nbsp;<span class="op" id="6026062">[</span><span class="op" id="6026063">]</span><span class="builtintype" id="6026064">string</span>&nbsp;<span class="op" id="6026071">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026074">names</span>&nbsp;<span class="op" id="6026080">:=</span>&nbsp;<span class="builtinfunc" id="6026083">make</span><span class="op" id="6026087">(</span><span class="op" id="6026088">[</span><span class="op" id="6026089">]</span><span class="builtintype" id="6026090">string</span><span class="op" id="6026096">,</span>&nbsp;<span class="num" id="6026098">0</span><span class="op" id="6026099">,</span>&nbsp;<span class="builtinfunc" id="6026101">len</span><span class="op" id="6026104">(</span><span class="ident" id="6026105">specs</span><span class="op" id="6026110">)</span><span class="op" id="6026111">)</span>&nbsp;<span class="comment" id="6026113">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026137">for</span>&nbsp;<span class="ident" id="6026141">_</span><span class="op" id="6026142">,</span>&nbsp;<span class="ident" id="6026144">s</span>&nbsp;<span class="op" id="6026146">:=</span>&nbsp;<span class="keyword" id="6026149">range</span>&nbsp;<span class="ident" id="6026155">specs</span>&nbsp;<span class="op" id="6026161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026165">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026220">for</span>&nbsp;<span class="ident" id="6026224">_</span><span class="op" id="6026225">,</span>&nbsp;<span class="ident" id="6026227">ident</span>&nbsp;<span class="op" id="6026233">:=</span>&nbsp;<span class="keyword" id="6026236">range</span>&nbsp;<span class="ident" id="6026242">s</span><span class="op" id="6026243">.</span><span class="op" id="6026244">(</span><span class="op" id="6026245">*</span><span class="ident" id="6026246">ast</span><span class="op" id="6026249">.</span><span class="ident" id="6026250">ValueSpec</span><span class="op" id="6026259">)</span><span class="op" id="6026260">.</span><span class="ident" id="6026261">Names</span>&nbsp;<span class="op" id="6026267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026272">names</span>&nbsp;<span class="op" id="6026278">=</span>&nbsp;<span class="builtinfunc" id="6026280">append</span><span class="op" id="6026286">(</span><span class="ident" id="6026287">names</span><span class="op" id="6026292">,</span>&nbsp;<span class="ident" id="6026294">ident</span><span class="op" id="6026299">.</span><span class="ident" id="6026300">Name</span><span class="op" id="6026304">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6026308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6026311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026314">return</span>&nbsp;<span class="ident" id="6026321">names</span><br>
<span class="lineno"></span><span class="op" id="6026327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="6026330">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6026381">//</span><br>
<span class="lineno"></span><span class="keyword" id="6026384">func</span>&nbsp;<span class="op" id="6026389">(</span><span class="ident" id="6026390">r</span>&nbsp;<span class="op" id="6026392">*</span><span class="ident" id="6026393">reader</span><span class="op" id="6026399">)</span>&nbsp;<span class="ident" id="6026401">readValue</span><span class="op" id="6026410">(</span><span class="ident" id="6026411">decl</span>&nbsp;<span class="op" id="6026416">*</span><span class="ident" id="6026417">ast</span><span class="op" id="6026420">.</span><span class="ident" id="6026421">GenDecl</span><span class="op" id="6026428">)</span>&nbsp;<span class="op" id="6026430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026433">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026488">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026558">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026628">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026698">domName</span>&nbsp;<span class="op" id="6026706">:=</span>&nbsp;<span class="string" id="6026709">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026713">domFreq</span>&nbsp;<span class="op" id="6026721">:=</span>&nbsp;<span class="num" id="6026724">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026727">prev</span>&nbsp;<span class="op" id="6026732">:=</span>&nbsp;<span class="string" id="6026735">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026739">n</span>&nbsp;<span class="op" id="6026741">:=</span>&nbsp;<span class="num" id="6026744">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026747">for</span>&nbsp;<span class="ident" id="6026751">_</span><span class="op" id="6026752">,</span>&nbsp;<span class="ident" id="6026754">spec</span>&nbsp;<span class="op" id="6026759">:=</span>&nbsp;<span class="keyword" id="6026762">range</span>&nbsp;<span class="ident" id="6026768">decl</span><span class="op" id="6026772">.</span><span class="ident" id="6026773">Specs</span>&nbsp;<span class="op" id="6026779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026783">s</span><span class="op" id="6026784">,</span>&nbsp;<span class="ident" id="6026786">ok</span>&nbsp;<span class="op" id="6026789">:=</span>&nbsp;<span class="ident" id="6026792">spec</span><span class="op" id="6026796">.</span><span class="op" id="6026797">(</span><span class="op" id="6026798">*</span><span class="ident" id="6026799">ast</span><span class="op" id="6026802">.</span><span class="ident" id="6026803">ValueSpec</span><span class="op" id="6026812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026816">if</span>&nbsp;<span class="op" id="6026819">!</span><span class="ident" id="6026820">ok</span>&nbsp;<span class="op" id="6026823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026828">continue</span>&nbsp;<span class="comment" id="6026837">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6026881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6026885">name</span>&nbsp;<span class="op" id="6026890">:=</span>&nbsp;<span class="string" id="6026893">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026898">switch</span>&nbsp;<span class="op" id="6026905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026909">case</span>&nbsp;<span class="ident" id="6026914">s</span><span class="op" id="6026915">.</span><span class="ident" id="6026916">Type</span>&nbsp;<span class="op" id="6026921">!=</span>&nbsp;<span class="ident" id="6026924">nil</span><span class="op" id="6026927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6026932">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6026976">if</span>&nbsp;<span class="ident" id="6026979">n</span><span class="op" id="6026980">,</span>&nbsp;<span class="ident" id="6026982">imp</span>&nbsp;<span class="op" id="6026986">:=</span>&nbsp;<span class="ident" id="6026989">baseTypeName</span><span class="op" id="6027001">(</span><span class="ident" id="6027002">s</span><span class="op" id="6027003">.</span><span class="ident" id="6027004">Type</span><span class="op" id="6027008">)</span><span class="op" id="6027009">;</span>&nbsp;<span class="op" id="6027011">!</span><span class="ident" id="6027012">imp</span>&nbsp;<span class="op" id="6027016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027022">name</span>&nbsp;<span class="op" id="6027027">=</span>&nbsp;<span class="ident" id="6027029">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027038">case</span>&nbsp;<span class="ident" id="6027043">decl</span><span class="op" id="6027047">.</span><span class="ident" id="6027048">Tok</span>&nbsp;<span class="op" id="6027052">==</span>&nbsp;<span class="ident" id="6027055">token</span><span class="op" id="6027060">.</span><span class="ident" id="6027061">CONST</span><span class="op" id="6027066">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027071">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027132">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027192">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027250">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027311">name</span>&nbsp;<span class="op" id="6027316">=</span>&nbsp;<span class="ident" id="6027318">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027325">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027329">if</span>&nbsp;<span class="ident" id="6027332">name</span>&nbsp;<span class="op" id="6027337">!=</span>&nbsp;<span class="string" id="6027340">&#34;&#34;</span>&nbsp;<span class="op" id="6027343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027348">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027377">if</span>&nbsp;<span class="ident" id="6027380">domName</span>&nbsp;<span class="op" id="6027388">!=</span>&nbsp;<span class="string" id="6027391">&#34;&#34;</span>&nbsp;<span class="op" id="6027394">&amp;&amp;</span>&nbsp;<span class="ident" id="6027397">domName</span>&nbsp;<span class="op" id="6027405">!=</span>&nbsp;<span class="ident" id="6027408">name</span>&nbsp;<span class="op" id="6027413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027419">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027469">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027490">domName</span>&nbsp;<span class="op" id="6027498">=</span>&nbsp;<span class="string" id="6027500">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027507">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027521">domName</span>&nbsp;<span class="op" id="6027529">=</span>&nbsp;<span class="ident" id="6027531">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027539">domFreq</span><span class="op" id="6027546">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027555">prev</span>&nbsp;<span class="op" id="6027560">=</span>&nbsp;<span class="ident" id="6027562">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027569">n</span><span class="op" id="6027570">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027578">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027620">if</span>&nbsp;<span class="ident" id="6027623">n</span>&nbsp;<span class="op" id="6027625">==</span>&nbsp;<span class="num" id="6027628">0</span>&nbsp;<span class="op" id="6027630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027634">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6027642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027646">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027720">values</span>&nbsp;<span class="op" id="6027727">:=</span>&nbsp;<span class="op" id="6027730">&amp;</span><span class="ident" id="6027731">r</span><span class="op" id="6027732">.</span><span class="ident" id="6027733">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027741">const</span>&nbsp;<span class="ident" id="6027747">threshold</span>&nbsp;<span class="op" id="6027757">=</span>&nbsp;<span class="num" id="6027759">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027765">if</span>&nbsp;<span class="ident" id="6027768">domName</span>&nbsp;<span class="op" id="6027776">!=</span>&nbsp;<span class="string" id="6027779">&#34;&#34;</span>&nbsp;<span class="op" id="6027782">&amp;&amp;</span>&nbsp;<span class="ident" id="6027785">r</span><span class="op" id="6027786">.</span><span class="ident" id="6027787">isVisible</span><span class="op" id="6027796">(</span><span class="ident" id="6027797">domName</span><span class="op" id="6027804">)</span>&nbsp;<span class="op" id="6027806">&amp;&amp;</span>&nbsp;<span class="ident" id="6027809">domFreq</span>&nbsp;<span class="op" id="6027817">&gt;=</span>&nbsp;<span class="builtintype" id="6027820">int</span><span class="op" id="6027823">(</span><span class="builtintype" id="6027824">float64</span><span class="op" id="6027831">(</span><span class="builtinfunc" id="6027832">len</span><span class="op" id="6027835">(</span><span class="ident" id="6027836">decl</span><span class="op" id="6027840">.</span><span class="ident" id="6027841">Specs</span><span class="op" id="6027846">)</span><span class="op" id="6027847">)</span><span class="op" id="6027848">*</span><span class="ident" id="6027849">threshold</span><span class="op" id="6027858">)</span>&nbsp;<span class="op" id="6027860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6027864">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6027909">if</span>&nbsp;<span class="ident" id="6027912">typ</span>&nbsp;<span class="op" id="6027916">:=</span>&nbsp;<span class="ident" id="6027919">r</span><span class="op" id="6027920">.</span><span class="ident" id="6027921">lookupType</span><span class="op" id="6027931">(</span><span class="ident" id="6027932">domName</span><span class="op" id="6027939">)</span><span class="op" id="6027940">;</span>&nbsp;<span class="ident" id="6027942">typ</span>&nbsp;<span class="op" id="6027946">!=</span>&nbsp;<span class="ident" id="6027949">nil</span>&nbsp;<span class="op" id="6027953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6027958">values</span>&nbsp;<span class="op" id="6027965">=</span>&nbsp;<span class="op" id="6027967">&amp;</span><span class="ident" id="6027968">typ</span><span class="op" id="6027971">.</span><span class="ident" id="6027972">values</span>&nbsp;<span class="comment" id="6027979">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028009">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028016">*</span><span class="ident" id="6028017">values</span>&nbsp;<span class="op" id="6028024">=</span>&nbsp;<span class="builtinfunc" id="6028026">append</span><span class="op" id="6028032">(</span><span class="op" id="6028033">*</span><span class="ident" id="6028034">values</span><span class="op" id="6028040">,</span>&nbsp;<span class="op" id="6028042">&amp;</span><span class="ident" id="6028043">Value</span><span class="op" id="6028048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028052">Doc</span><span class="op" id="6028055">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6028059">decl</span><span class="op" id="6028063">.</span><span class="ident" id="6028064">Doc</span><span class="op" id="6028067">.</span><span class="ident" id="6028068">Text</span><span class="op" id="6028072">(</span><span class="op" id="6028073">)</span><span class="op" id="6028074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028078">Names</span><span class="op" id="6028083">:</span>&nbsp;<span class="ident" id="6028085">specNames</span><span class="op" id="6028094">(</span><span class="ident" id="6028095">decl</span><span class="op" id="6028099">.</span><span class="ident" id="6028100">Specs</span><span class="op" id="6028105">)</span><span class="op" id="6028106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028110">Decl</span><span class="op" id="6028114">:</span>&nbsp;&nbsp;<span class="ident" id="6028117">decl</span><span class="op" id="6028121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028125">order</span><span class="op" id="6028130">:</span>&nbsp;<span class="builtinfunc" id="6028132">len</span><span class="op" id="6028135">(</span><span class="op" id="6028136">*</span><span class="ident" id="6028137">values</span><span class="op" id="6028143">)</span><span class="op" id="6028144">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028147">}</span><span class="op" id="6028148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028151">decl</span><span class="op" id="6028155">.</span><span class="ident" id="6028156">Doc</span>&nbsp;<span class="op" id="6028160">=</span>&nbsp;<span class="ident" id="6028162">nil</span>&nbsp;<span class="comment" id="6028166">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6028200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6028203">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="6028266">//</span><br>
<span class="lineno"></span><span class="keyword" id="6028269">func</span>&nbsp;<span class="ident" id="6028274">fields</span><span class="op" id="6028280">(</span><span class="ident" id="6028281">typ</span>&nbsp;<span class="ident" id="6028285">ast</span><span class="op" id="6028288">.</span><span class="ident" id="6028289">Expr</span><span class="op" id="6028293">)</span>&nbsp;<span class="op" id="6028295">(</span><span class="ident" id="6028296">list</span>&nbsp;<span class="op" id="6028301">[</span><span class="op" id="6028302">]</span><span class="op" id="6028303">*</span><span class="ident" id="6028304">ast</span><span class="op" id="6028307">.</span><span class="ident" id="6028308">Field</span><span class="op" id="6028313">,</span>&nbsp;<span class="ident" id="6028315">isStruct</span>&nbsp;<span class="builtintype" id="6028324">bool</span><span class="op" id="6028328">)</span>&nbsp;<span class="op" id="6028330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028333">var</span>&nbsp;<span class="ident" id="6028337">fields</span>&nbsp;<span class="op" id="6028344">*</span><span class="ident" id="6028345">ast</span><span class="op" id="6028348">.</span><span class="ident" id="6028349">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028360">switch</span>&nbsp;<span class="ident" id="6028367">t</span>&nbsp;<span class="op" id="6028369">:=</span>&nbsp;<span class="ident" id="6028372">typ</span><span class="op" id="6028375">.</span><span class="op" id="6028376">(</span><span class="keyword" id="6028377">type</span><span class="op" id="6028381">)</span>&nbsp;<span class="op" id="6028383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028386">case</span>&nbsp;<span class="op" id="6028391">*</span><span class="ident" id="6028392">ast</span><span class="op" id="6028395">.</span><span class="ident" id="6028396">StructType</span><span class="op" id="6028406">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028410">fields</span>&nbsp;<span class="op" id="6028417">=</span>&nbsp;<span class="ident" id="6028419">t</span><span class="op" id="6028420">.</span><span class="ident" id="6028421">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028430">isStruct</span>&nbsp;<span class="op" id="6028439">=</span>&nbsp;<span class="builtintype" id="6028441">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028447">case</span>&nbsp;<span class="op" id="6028452">*</span><span class="ident" id="6028453">ast</span><span class="op" id="6028456">.</span><span class="ident" id="6028457">InterfaceType</span><span class="op" id="6028470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028474">fields</span>&nbsp;<span class="op" id="6028481">=</span>&nbsp;<span class="ident" id="6028483">t</span><span class="op" id="6028484">.</span><span class="ident" id="6028485">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028494">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028497">if</span>&nbsp;<span class="ident" id="6028500">fields</span>&nbsp;<span class="op" id="6028507">!=</span>&nbsp;<span class="ident" id="6028510">nil</span>&nbsp;<span class="op" id="6028514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028518">list</span>&nbsp;<span class="op" id="6028523">=</span>&nbsp;<span class="ident" id="6028525">fields</span><span class="op" id="6028531">.</span><span class="ident" id="6028532">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028541">return</span><br>
<span class="lineno"></span><span class="op" id="6028548">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="6028551">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6028593">//</span><br>
<span class="lineno"></span><span class="keyword" id="6028596">func</span>&nbsp;<span class="op" id="6028601">(</span><span class="ident" id="6028602">r</span>&nbsp;<span class="op" id="6028604">*</span><span class="ident" id="6028605">reader</span><span class="op" id="6028611">)</span>&nbsp;<span class="ident" id="6028613">readType</span><span class="op" id="6028621">(</span><span class="ident" id="6028622">decl</span>&nbsp;<span class="op" id="6028627">*</span><span class="ident" id="6028628">ast</span><span class="op" id="6028631">.</span><span class="ident" id="6028632">GenDecl</span><span class="op" id="6028639">,</span>&nbsp;<span class="ident" id="6028641">spec</span>&nbsp;<span class="op" id="6028646">*</span><span class="ident" id="6028647">ast</span><span class="op" id="6028650">.</span><span class="ident" id="6028651">TypeSpec</span><span class="op" id="6028659">)</span>&nbsp;<span class="op" id="6028661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028664">typ</span>&nbsp;<span class="op" id="6028668">:=</span>&nbsp;<span class="ident" id="6028671">r</span><span class="op" id="6028672">.</span><span class="ident" id="6028673">lookupType</span><span class="op" id="6028683">(</span><span class="ident" id="6028684">spec</span><span class="op" id="6028688">.</span><span class="ident" id="6028689">Name</span><span class="op" id="6028693">.</span><span class="ident" id="6028694">Name</span><span class="op" id="6028698">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028701">if</span>&nbsp;<span class="ident" id="6028704">typ</span>&nbsp;<span class="op" id="6028708">==</span>&nbsp;<span class="ident" id="6028711">nil</span>&nbsp;<span class="op" id="6028715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028719">return</span>&nbsp;<span class="comment" id="6028726">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6028770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6028774">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6028827">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028882">typ</span><span class="op" id="6028885">.</span><span class="ident" id="6028886">decl</span>&nbsp;<span class="op" id="6028891">=</span>&nbsp;<span class="ident" id="6028893">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6028900">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028926">doc</span>&nbsp;<span class="op" id="6028930">:=</span>&nbsp;<span class="ident" id="6028933">spec</span><span class="op" id="6028937">.</span><span class="ident" id="6028938">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6028943">spec</span><span class="op" id="6028947">.</span><span class="ident" id="6028948">Doc</span>&nbsp;<span class="op" id="6028952">=</span>&nbsp;<span class="ident" id="6028954">nil</span>&nbsp;<span class="comment" id="6028958">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6028993">if</span>&nbsp;<span class="ident" id="6028996">doc</span>&nbsp;<span class="op" id="6029000">==</span>&nbsp;<span class="ident" id="6029003">nil</span>&nbsp;<span class="op" id="6029007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029011">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029081">doc</span>&nbsp;<span class="op" id="6029085">=</span>&nbsp;<span class="ident" id="6029087">decl</span><span class="op" id="6029091">.</span><span class="ident" id="6029092">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029097">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029100">decl</span><span class="op" id="6029104">.</span><span class="ident" id="6029105">Doc</span>&nbsp;<span class="op" id="6029109">=</span>&nbsp;<span class="ident" id="6029111">nil</span>&nbsp;<span class="comment" id="6029115">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029150">typ</span><span class="op" id="6029153">.</span><span class="ident" id="6029154">doc</span>&nbsp;<span class="op" id="6029158">=</span>&nbsp;<span class="ident" id="6029160">doc</span><span class="op" id="6029163">.</span><span class="ident" id="6029164">Text</span><span class="op" id="6029168">(</span><span class="op" id="6029169">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029173">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029231">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029294">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029322">var</span>&nbsp;<span class="ident" id="6029326">list</span>&nbsp;<span class="op" id="6029331">[</span><span class="op" id="6029332">]</span><span class="op" id="6029333">*</span><span class="ident" id="6029334">ast</span><span class="op" id="6029337">.</span><span class="ident" id="6029338">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029345">list</span><span class="op" id="6029349">,</span>&nbsp;<span class="ident" id="6029351">typ</span><span class="op" id="6029354">.</span><span class="ident" id="6029355">isStruct</span>&nbsp;<span class="op" id="6029364">=</span>&nbsp;<span class="ident" id="6029366">fields</span><span class="op" id="6029372">(</span><span class="ident" id="6029373">spec</span><span class="op" id="6029377">.</span><span class="ident" id="6029378">Type</span><span class="op" id="6029382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029385">for</span>&nbsp;<span class="ident" id="6029389">_</span><span class="op" id="6029390">,</span>&nbsp;<span class="ident" id="6029392">field</span>&nbsp;<span class="op" id="6029398">:=</span>&nbsp;<span class="keyword" id="6029401">range</span>&nbsp;<span class="ident" id="6029407">list</span>&nbsp;<span class="op" id="6029412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029416">if</span>&nbsp;<span class="builtinfunc" id="6029419">len</span><span class="op" id="6029422">(</span><span class="ident" id="6029423">field</span><span class="op" id="6029428">.</span><span class="ident" id="6029429">Names</span><span class="op" id="6029434">)</span>&nbsp;<span class="op" id="6029436">==</span>&nbsp;<span class="num" id="6029439">0</span>&nbsp;<span class="op" id="6029441">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029446">r</span><span class="op" id="6029447">.</span><span class="ident" id="6029448">recordAnonymousField</span><span class="op" id="6029468">(</span><span class="ident" id="6029469">typ</span><span class="op" id="6029472">,</span>&nbsp;<span class="ident" id="6029474">field</span><span class="op" id="6029479">.</span><span class="ident" id="6029480">Type</span><span class="op" id="6029484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029491">}</span><br>
<span class="lineno"></span><span class="op" id="6029493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="6029496">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6029548">//</span><br>
<span class="lineno"></span><span class="keyword" id="6029551">func</span>&nbsp;<span class="op" id="6029556">(</span><span class="ident" id="6029557">r</span>&nbsp;<span class="op" id="6029559">*</span><span class="ident" id="6029560">reader</span><span class="op" id="6029566">)</span>&nbsp;<span class="ident" id="6029568">readFunc</span><span class="op" id="6029576">(</span><span class="ident" id="6029577">fun</span>&nbsp;<span class="op" id="6029581">*</span><span class="ident" id="6029582">ast</span><span class="op" id="6029585">.</span><span class="ident" id="6029586">FuncDecl</span><span class="op" id="6029594">)</span>&nbsp;<span class="op" id="6029596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029599">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029623">fun</span><span class="op" id="6029626">.</span><span class="ident" id="6029627">Body</span>&nbsp;<span class="op" id="6029632">=</span>&nbsp;<span class="ident" id="6029634">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029640">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029693">if</span>&nbsp;<span class="ident" id="6029696">fun</span><span class="op" id="6029699">.</span><span class="ident" id="6029700">Recv</span>&nbsp;<span class="op" id="6029705">!=</span>&nbsp;<span class="ident" id="6029708">nil</span>&nbsp;<span class="op" id="6029712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029716">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029728">recvTypeName</span><span class="op" id="6029740">,</span>&nbsp;<span class="ident" id="6029742">imp</span>&nbsp;<span class="op" id="6029746">:=</span>&nbsp;<span class="ident" id="6029749">baseTypeName</span><span class="op" id="6029761">(</span><span class="ident" id="6029762">fun</span><span class="op" id="6029765">.</span><span class="ident" id="6029766">Recv</span><span class="op" id="6029770">.</span><span class="ident" id="6029771">List</span><span class="op" id="6029775">[</span><span class="num" id="6029776">0</span><span class="op" id="6029777">]</span><span class="op" id="6029778">.</span><span class="ident" id="6029779">Type</span><span class="op" id="6029783">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029787">if</span>&nbsp;<span class="ident" id="6029790">imp</span>&nbsp;<span class="op" id="6029794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029799">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029840">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029869">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029878">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6029882">if</span>&nbsp;<span class="ident" id="6029885">typ</span>&nbsp;<span class="op" id="6029889">:=</span>&nbsp;<span class="ident" id="6029892">r</span><span class="op" id="6029893">.</span><span class="ident" id="6029894">lookupType</span><span class="op" id="6029904">(</span><span class="ident" id="6029905">recvTypeName</span><span class="op" id="6029917">)</span><span class="op" id="6029918">;</span>&nbsp;<span class="ident" id="6029920">typ</span>&nbsp;<span class="op" id="6029924">!=</span>&nbsp;<span class="ident" id="6029927">nil</span>&nbsp;<span class="op" id="6029931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6029936">typ</span><span class="op" id="6029939">.</span><span class="ident" id="6029940">methods</span><span class="op" id="6029947">.</span><span class="ident" id="6029948">set</span><span class="op" id="6029951">(</span><span class="ident" id="6029952">fun</span><span class="op" id="6029955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6029959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029963">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6029996">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030064">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030133">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030201">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030266">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030274">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030278">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030353">if</span>&nbsp;<span class="ident" id="6030356">fun</span><span class="op" id="6030359">.</span><span class="ident" id="6030360">Type</span><span class="op" id="6030364">.</span><span class="ident" id="6030365">Results</span><span class="op" id="6030372">.</span><span class="ident" id="6030373">NumFields</span><span class="op" id="6030382">(</span><span class="op" id="6030383">)</span>&nbsp;<span class="op" id="6030385">&gt;=</span>&nbsp;<span class="num" id="6030388">1</span>&nbsp;<span class="op" id="6030390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030394">res</span>&nbsp;<span class="op" id="6030398">:=</span>&nbsp;<span class="ident" id="6030401">fun</span><span class="op" id="6030404">.</span><span class="ident" id="6030405">Type</span><span class="op" id="6030409">.</span><span class="ident" id="6030410">Results</span><span class="op" id="6030417">.</span><span class="ident" id="6030418">List</span><span class="op" id="6030422">[</span><span class="num" id="6030423">0</span><span class="op" id="6030424">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030428">if</span>&nbsp;<span class="builtinfunc" id="6030431">len</span><span class="op" id="6030434">(</span><span class="ident" id="6030435">res</span><span class="op" id="6030438">.</span><span class="ident" id="6030439">Names</span><span class="op" id="6030444">)</span>&nbsp;<span class="op" id="6030446">&lt;=</span>&nbsp;<span class="num" id="6030449">1</span>&nbsp;<span class="op" id="6030451">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030456">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030513">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030570">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030601">if</span>&nbsp;<span class="ident" id="6030604">n</span><span class="op" id="6030605">,</span>&nbsp;<span class="ident" id="6030607">imp</span>&nbsp;<span class="op" id="6030611">:=</span>&nbsp;<span class="ident" id="6030614">baseTypeName</span><span class="op" id="6030626">(</span><span class="ident" id="6030627">res</span><span class="op" id="6030630">.</span><span class="ident" id="6030631">Type</span><span class="op" id="6030635">)</span><span class="op" id="6030636">;</span>&nbsp;<span class="op" id="6030638">!</span><span class="ident" id="6030639">imp</span>&nbsp;<span class="op" id="6030643">&amp;&amp;</span>&nbsp;<span class="ident" id="6030646">r</span><span class="op" id="6030647">.</span><span class="ident" id="6030648">isVisible</span><span class="op" id="6030657">(</span><span class="ident" id="6030658">n</span><span class="op" id="6030659">)</span>&nbsp;<span class="op" id="6030661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030667">if</span>&nbsp;<span class="ident" id="6030670">typ</span>&nbsp;<span class="op" id="6030674">:=</span>&nbsp;<span class="ident" id="6030677">r</span><span class="op" id="6030678">.</span><span class="ident" id="6030679">lookupType</span><span class="op" id="6030689">(</span><span class="ident" id="6030690">n</span><span class="op" id="6030691">)</span><span class="op" id="6030692">;</span>&nbsp;<span class="ident" id="6030694">typ</span>&nbsp;<span class="op" id="6030698">!=</span>&nbsp;<span class="ident" id="6030701">nil</span>&nbsp;<span class="op" id="6030705">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030712">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030748">typ</span><span class="op" id="6030751">.</span><span class="ident" id="6030752">funcs</span><span class="op" id="6030757">.</span><span class="ident" id="6030758">set</span><span class="op" id="6030761">(</span><span class="ident" id="6030762">fun</span><span class="op" id="6030765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6030772">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030788">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030799">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030829">r</span><span class="op" id="6030830">.</span><span class="ident" id="6030831">funcs</span><span class="op" id="6030836">.</span><span class="ident" id="6030837">set</span><span class="op" id="6030840">(</span><span class="ident" id="6030841">fun</span><span class="op" id="6030844">)</span><br>
<span class="lineno">400</span><span class="op" id="6030846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6030849">var</span>&nbsp;<span class="op" id="6030853">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030856">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6030870">=</span>&nbsp;<span class="string" id="6030872">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6030920">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6030982">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="6030996">=</span>&nbsp;<span class="ident" id="6030998">regexp</span><span class="op" id="6031004">.</span><span class="ident" id="6031005">MustCompile</span><span class="op" id="6031016">(</span><span class="string" id="6031017">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="6031027">+</span>&nbsp;<span class="ident" id="6031029">noteMarker</span><span class="op" id="6031039">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031046">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031076">noteCommentRx</span>&nbsp;<span class="op" id="6031090">=</span>&nbsp;<span class="ident" id="6031092">regexp</span><span class="op" id="6031098">.</span><span class="ident" id="6031099">MustCompile</span><span class="op" id="6031110">(</span><span class="string" id="6031111">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="6031126">+</span>&nbsp;<span class="ident" id="6031128">noteMarker</span><span class="op" id="6031138">)</span>&nbsp;<span class="comment" id="6031140">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="6031172">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6031175">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6031239">//</span><br>
<span class="lineno">410</span><span class="keyword" id="6031242">func</span>&nbsp;<span class="op" id="6031247">(</span><span class="ident" id="6031248">r</span>&nbsp;<span class="op" id="6031250">*</span><span class="ident" id="6031251">reader</span><span class="op" id="6031257">)</span>&nbsp;<span class="ident" id="6031259">readNote</span><span class="op" id="6031267">(</span><span class="ident" id="6031268">list</span>&nbsp;<span class="op" id="6031273">[</span><span class="op" id="6031274">]</span><span class="op" id="6031275">*</span><span class="ident" id="6031276">ast</span><span class="op" id="6031279">.</span><span class="ident" id="6031280">Comment</span><span class="op" id="6031287">)</span>&nbsp;<span class="op" id="6031289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031292">text</span>&nbsp;<span class="op" id="6031297">:=</span>&nbsp;<span class="op" id="6031300">(</span><span class="op" id="6031301">&amp;</span><span class="ident" id="6031302">ast</span><span class="op" id="6031305">.</span><span class="ident" id="6031306">CommentGroup</span><span class="op" id="6031318">{</span><span class="ident" id="6031319">List</span><span class="op" id="6031323">:</span>&nbsp;<span class="ident" id="6031325">list</span><span class="op" id="6031329">}</span><span class="op" id="6031330">)</span><span class="op" id="6031331">.</span><span class="ident" id="6031332">Text</span><span class="op" id="6031336">(</span><span class="op" id="6031337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031340">if</span>&nbsp;<span class="ident" id="6031343">m</span>&nbsp;<span class="op" id="6031345">:=</span>&nbsp;<span class="ident" id="6031348">noteMarkerRx</span><span class="op" id="6031360">.</span><span class="ident" id="6031361">FindStringSubmatchIndex</span><span class="op" id="6031384">(</span><span class="ident" id="6031385">text</span><span class="op" id="6031389">)</span><span class="op" id="6031390">;</span>&nbsp;<span class="ident" id="6031392">m</span>&nbsp;<span class="op" id="6031394">!=</span>&nbsp;<span class="ident" id="6031397">nil</span>&nbsp;<span class="op" id="6031401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031405">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031449">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031496">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6031543">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031571">body</span>&nbsp;<span class="op" id="6031576">:=</span>&nbsp;<span class="ident" id="6031579">clean</span><span class="op" id="6031584">(</span><span class="ident" id="6031585">text</span><span class="op" id="6031589">[</span><span class="ident" id="6031590">m</span><span class="op" id="6031591">[</span><span class="num" id="6031592">1</span><span class="op" id="6031593">]</span><span class="op" id="6031594">:</span><span class="op" id="6031595">]</span><span class="op" id="6031596">,</span>&nbsp;<span class="ident" id="6031598">keepNL</span><span class="op" id="6031604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6031608">if</span>&nbsp;<span class="ident" id="6031611">body</span>&nbsp;<span class="op" id="6031616">!=</span>&nbsp;<span class="string" id="6031619">&#34;&#34;</span>&nbsp;<span class="op" id="6031622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031627">marker</span>&nbsp;<span class="op" id="6031634">:=</span>&nbsp;<span class="ident" id="6031637">text</span><span class="op" id="6031641">[</span><span class="ident" id="6031642">m</span><span class="op" id="6031643">[</span><span class="num" id="6031644">2</span><span class="op" id="6031645">]</span><span class="op" id="6031646">:</span><span class="ident" id="6031647">m</span><span class="op" id="6031648">[</span><span class="num" id="6031649">3</span><span class="op" id="6031650">]</span><span class="op" id="6031651">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031656">r</span><span class="op" id="6031657">.</span><span class="ident" id="6031658">notes</span><span class="op" id="6031663">[</span><span class="ident" id="6031664">marker</span><span class="op" id="6031670">]</span>&nbsp;<span class="op" id="6031672">=</span>&nbsp;<span class="builtinfunc" id="6031674">append</span><span class="op" id="6031680">(</span><span class="ident" id="6031681">r</span><span class="op" id="6031682">.</span><span class="ident" id="6031683">notes</span><span class="op" id="6031688">[</span><span class="ident" id="6031689">marker</span><span class="op" id="6031695">]</span><span class="op" id="6031696">,</span>&nbsp;<span class="op" id="6031698">&amp;</span><span class="ident" id="6031699">Note</span><span class="op" id="6031703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031709">Pos</span><span class="op" id="6031712">:</span>&nbsp;&nbsp;<span class="ident" id="6031715">list</span><span class="op" id="6031719">[</span><span class="num" id="6031720">0</span><span class="op" id="6031721">]</span><span class="op" id="6031722">.</span><span class="ident" id="6031723">Pos</span><span class="op" id="6031726">(</span><span class="op" id="6031727">)</span><span class="op" id="6031728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031734">End</span><span class="op" id="6031737">:</span>&nbsp;&nbsp;<span class="ident" id="6031740">list</span><span class="op" id="6031744">[</span><span class="builtinfunc" id="6031745">len</span><span class="op" id="6031748">(</span><span class="ident" id="6031749">list</span><span class="op" id="6031753">)</span><span class="op" id="6031754">-</span><span class="num" id="6031755">1</span><span class="op" id="6031756">]</span><span class="op" id="6031757">.</span><span class="ident" id="6031758">End</span><span class="op" id="6031761">(</span><span class="op" id="6031762">)</span><span class="op" id="6031763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031769">UID</span><span class="op" id="6031772">:</span>&nbsp;&nbsp;<span class="ident" id="6031775">text</span><span class="op" id="6031779">[</span><span class="ident" id="6031780">m</span><span class="op" id="6031781">[</span><span class="num" id="6031782">4</span><span class="op" id="6031783">]</span><span class="op" id="6031784">:</span><span class="ident" id="6031785">m</span><span class="op" id="6031786">[</span><span class="num" id="6031787">5</span><span class="op" id="6031788">]</span><span class="op" id="6031789">]</span><span class="op" id="6031790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6031796">Body</span><span class="op" id="6031800">:</span>&nbsp;<span class="ident" id="6031802">body</span><span class="op" id="6031806">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031811">}</span><span class="op" id="6031812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6031819">}</span><br>
<span class="lineno"></span><span class="op" id="6031821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="6031824">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6031867">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6031938">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="6032007">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6032075">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="6032141">//</span><br>
<span class="lineno"></span><span class="keyword" id="6032144">func</span>&nbsp;<span class="op" id="6032149">(</span><span class="ident" id="6032150">r</span>&nbsp;<span class="op" id="6032152">*</span><span class="ident" id="6032153">reader</span><span class="op" id="6032159">)</span>&nbsp;<span class="ident" id="6032161">readNotes</span><span class="op" id="6032170">(</span><span class="ident" id="6032171">comments</span>&nbsp;<span class="op" id="6032180">[</span><span class="op" id="6032181">]</span><span class="op" id="6032182">*</span><span class="ident" id="6032183">ast</span><span class="op" id="6032186">.</span><span class="ident" id="6032187">CommentGroup</span><span class="op" id="6032199">)</span>&nbsp;<span class="op" id="6032201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032204">for</span>&nbsp;<span class="ident" id="6032208">_</span><span class="op" id="6032209">,</span>&nbsp;<span class="ident" id="6032211">group</span>&nbsp;<span class="op" id="6032217">:=</span>&nbsp;<span class="keyword" id="6032220">range</span>&nbsp;<span class="ident" id="6032226">comments</span>&nbsp;<span class="op" id="6032235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032239">i</span>&nbsp;<span class="op" id="6032241">:=</span>&nbsp;<span class="op" id="6032244">-</span><span class="num" id="6032245">1</span>&nbsp;<span class="comment" id="6032247">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032307">list</span>&nbsp;<span class="op" id="6032312">:=</span>&nbsp;<span class="ident" id="6032315">group</span><span class="op" id="6032320">.</span><span class="ident" id="6032321">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032328">for</span>&nbsp;<span class="ident" id="6032332">j</span><span class="op" id="6032333">,</span>&nbsp;<span class="ident" id="6032335">c</span>&nbsp;<span class="op" id="6032337">:=</span>&nbsp;<span class="keyword" id="6032340">range</span>&nbsp;<span class="ident" id="6032346">list</span>&nbsp;<span class="op" id="6032351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032356">if</span>&nbsp;<span class="ident" id="6032359">noteCommentRx</span><span class="op" id="6032372">.</span><span class="ident" id="6032373">MatchString</span><span class="op" id="6032384">(</span><span class="ident" id="6032385">c</span><span class="op" id="6032386">.</span><span class="ident" id="6032387">Text</span><span class="op" id="6032391">)</span>&nbsp;<span class="op" id="6032393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032399">if</span>&nbsp;<span class="ident" id="6032402">i</span>&nbsp;<span class="op" id="6032404">&gt;=</span>&nbsp;<span class="num" id="6032407">0</span>&nbsp;<span class="op" id="6032409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032416">r</span><span class="op" id="6032417">.</span><span class="ident" id="6032418">readNote</span><span class="op" id="6032426">(</span><span class="ident" id="6032427">list</span><span class="op" id="6032431">[</span><span class="ident" id="6032432">i</span><span class="op" id="6032433">:</span><span class="ident" id="6032434">j</span><span class="op" id="6032435">]</span><span class="op" id="6032436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032442">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032448">i</span>&nbsp;<span class="op" id="6032450">=</span>&nbsp;<span class="ident" id="6032452">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032465">if</span>&nbsp;<span class="ident" id="6032468">i</span>&nbsp;<span class="op" id="6032470">&gt;=</span>&nbsp;<span class="num" id="6032473">0</span>&nbsp;<span class="op" id="6032475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032480">r</span><span class="op" id="6032481">.</span><span class="ident" id="6032482">readNote</span><span class="op" id="6032490">(</span><span class="ident" id="6032491">list</span><span class="op" id="6032495">[</span><span class="ident" id="6032496">i</span><span class="op" id="6032497">:</span><span class="op" id="6032498">]</span><span class="op" id="6032499">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032506">}</span><br>
<span class="lineno"></span><span class="op" id="6032508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6032511">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="6032569">//</span><br>
<span class="lineno"></span><span class="keyword" id="6032572">func</span>&nbsp;<span class="op" id="6032577">(</span><span class="ident" id="6032578">r</span>&nbsp;<span class="op" id="6032580">*</span><span class="ident" id="6032581">reader</span><span class="op" id="6032587">)</span>&nbsp;<span class="ident" id="6032589">readFile</span><span class="op" id="6032597">(</span><span class="ident" id="6032598">src</span>&nbsp;<span class="op" id="6032602">*</span><span class="ident" id="6032603">ast</span><span class="op" id="6032606">.</span><span class="ident" id="6032607">File</span><span class="op" id="6032611">)</span>&nbsp;<span class="op" id="6032613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032616">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032646">if</span>&nbsp;<span class="ident" id="6032649">src</span><span class="op" id="6032652">.</span><span class="ident" id="6032653">Doc</span>&nbsp;<span class="op" id="6032657">!=</span>&nbsp;<span class="ident" id="6032660">nil</span>&nbsp;<span class="op" id="6032664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032668">r</span><span class="op" id="6032669">.</span><span class="ident" id="6032670">readDoc</span><span class="op" id="6032677">(</span><span class="ident" id="6032678">src</span><span class="op" id="6032681">.</span><span class="ident" id="6032682">Doc</span><span class="op" id="6032685">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6032689">src</span><span class="op" id="6032692">.</span><span class="ident" id="6032693">Doc</span>&nbsp;<span class="op" id="6032697">=</span>&nbsp;<span class="ident" id="6032699">nil</span>&nbsp;<span class="comment" id="6032703">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6032738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032742">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032767">for</span>&nbsp;<span class="ident" id="6032771">_</span><span class="op" id="6032772">,</span>&nbsp;<span class="ident" id="6032774">decl</span>&nbsp;<span class="op" id="6032779">:=</span>&nbsp;<span class="keyword" id="6032782">range</span>&nbsp;<span class="ident" id="6032788">src</span><span class="op" id="6032791">.</span><span class="ident" id="6032792">Decls</span>&nbsp;<span class="op" id="6032798">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032802">switch</span>&nbsp;<span class="ident" id="6032809">d</span>&nbsp;<span class="op" id="6032811">:=</span>&nbsp;<span class="ident" id="6032814">decl</span><span class="op" id="6032818">.</span><span class="op" id="6032819">(</span><span class="keyword" id="6032820">type</span><span class="op" id="6032824">)</span>&nbsp;<span class="op" id="6032826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032830">case</span>&nbsp;<span class="op" id="6032835">*</span><span class="ident" id="6032836">ast</span><span class="op" id="6032839">.</span><span class="ident" id="6032840">GenDecl</span><span class="op" id="6032847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032852">switch</span>&nbsp;<span class="ident" id="6032859">d</span><span class="op" id="6032860">.</span><span class="ident" id="6032861">Tok</span>&nbsp;<span class="op" id="6032865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032870">case</span>&nbsp;<span class="ident" id="6032875">token</span><span class="op" id="6032880">.</span><span class="ident" id="6032881">IMPORT</span><span class="op" id="6032887">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6032893">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032933">for</span>&nbsp;<span class="ident" id="6032937">_</span><span class="op" id="6032938">,</span>&nbsp;<span class="ident" id="6032940">spec</span>&nbsp;<span class="op" id="6032945">:=</span>&nbsp;<span class="keyword" id="6032948">range</span>&nbsp;<span class="ident" id="6032954">d</span><span class="op" id="6032955">.</span><span class="ident" id="6032956">Specs</span>&nbsp;<span class="op" id="6032962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6032969">if</span>&nbsp;<span class="ident" id="6032972">s</span><span class="op" id="6032973">,</span>&nbsp;<span class="ident" id="6032975">ok</span>&nbsp;<span class="op" id="6032978">:=</span>&nbsp;<span class="ident" id="6032981">spec</span><span class="op" id="6032985">.</span><span class="op" id="6032986">(</span><span class="op" id="6032987">*</span><span class="ident" id="6032988">ast</span><span class="op" id="6032991">.</span><span class="ident" id="6032992">ImportSpec</span><span class="op" id="6033002">)</span><span class="op" id="6033003">;</span>&nbsp;<span class="ident" id="6033005">ok</span>&nbsp;<span class="op" id="6033008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033016">if</span>&nbsp;<span class="ident" id="6033019">import_</span><span class="op" id="6033026">,</span>&nbsp;<span class="ident" id="6033028">err</span>&nbsp;<span class="op" id="6033032">:=</span>&nbsp;<span class="ident" id="6033035">strconv</span><span class="op" id="6033042">.</span><span class="ident" id="6033043">Unquote</span><span class="op" id="6033050">(</span><span class="ident" id="6033051">s</span><span class="op" id="6033052">.</span><span class="ident" id="6033053">Path</span><span class="op" id="6033057">.</span><span class="ident" id="6033058">Value</span><span class="op" id="6033063">)</span><span class="op" id="6033064">;</span>&nbsp;<span class="ident" id="6033066">err</span>&nbsp;<span class="op" id="6033070">==</span>&nbsp;<span class="ident" id="6033073">nil</span>&nbsp;<span class="op" id="6033077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6033086">r</span><span class="op" id="6033087">.</span><span class="ident" id="6033088">imports</span><span class="op" id="6033095">[</span><span class="ident" id="6033096">import_</span><span class="op" id="6033103">]</span>&nbsp;<span class="op" id="6033105">=</span>&nbsp;<span class="num" id="6033107">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033115">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033122">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033133">case</span>&nbsp;<span class="ident" id="6033138">token</span><span class="op" id="6033143">.</span><span class="ident" id="6033144">CONST</span><span class="op" id="6033149">,</span>&nbsp;<span class="ident" id="6033151">token</span><span class="op" id="6033156">.</span><span class="ident" id="6033157">VAR</span><span class="op" id="6033160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033166">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6033227">r</span><span class="op" id="6033228">.</span><span class="ident" id="6033229">readValue</span><span class="op" id="6033238">(</span><span class="ident" id="6033239">d</span><span class="op" id="6033240">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033245">case</span>&nbsp;<span class="ident" id="6033250">token</span><span class="op" id="6033255">.</span><span class="ident" id="6033256">TYPE</span><span class="op" id="6033260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033266">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033304">if</span>&nbsp;<span class="builtinfunc" id="6033307">len</span><span class="op" id="6033310">(</span><span class="ident" id="6033311">d</span><span class="op" id="6033312">.</span><span class="ident" id="6033313">Specs</span><span class="op" id="6033318">)</span>&nbsp;<span class="op" id="6033320">==</span>&nbsp;<span class="num" id="6033323">1</span>&nbsp;<span class="op" id="6033325">&amp;&amp;</span>&nbsp;<span class="op" id="6033328">!</span><span class="ident" id="6033329">d</span><span class="op" id="6033330">.</span><span class="ident" id="6033331">Lparen</span><span class="op" id="6033337">.</span><span class="ident" id="6033338">IsValid</span><span class="op" id="6033345">(</span><span class="op" id="6033346">)</span>&nbsp;<span class="op" id="6033348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033355">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033411">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033462">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033515">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033566">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033587">if</span>&nbsp;<span class="ident" id="6033590">s</span><span class="op" id="6033591">,</span>&nbsp;<span class="ident" id="6033593">ok</span>&nbsp;<span class="op" id="6033596">:=</span>&nbsp;<span class="ident" id="6033599">d</span><span class="op" id="6033600">.</span><span class="ident" id="6033601">Specs</span><span class="op" id="6033606">[</span><span class="num" id="6033607">0</span><span class="op" id="6033608">]</span><span class="op" id="6033609">.</span><span class="op" id="6033610">(</span><span class="op" id="6033611">*</span><span class="ident" id="6033612">ast</span><span class="op" id="6033615">.</span><span class="ident" id="6033616">TypeSpec</span><span class="op" id="6033624">)</span><span class="op" id="6033625">;</span>&nbsp;<span class="ident" id="6033627">ok</span>&nbsp;<span class="op" id="6033630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6033638">r</span><span class="op" id="6033639">.</span><span class="ident" id="6033640">readType</span><span class="op" id="6033648">(</span><span class="ident" id="6033649">d</span><span class="op" id="6033650">,</span>&nbsp;<span class="ident" id="6033652">s</span><span class="op" id="6033653">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033667">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6033677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033683">for</span>&nbsp;<span class="ident" id="6033687">_</span><span class="op" id="6033688">,</span>&nbsp;<span class="ident" id="6033690">spec</span>&nbsp;<span class="op" id="6033695">:=</span>&nbsp;<span class="keyword" id="6033698">range</span>&nbsp;<span class="ident" id="6033704">d</span><span class="op" id="6033705">.</span><span class="ident" id="6033706">Specs</span>&nbsp;<span class="op" id="6033712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6033719">if</span>&nbsp;<span class="ident" id="6033722">s</span><span class="op" id="6033723">,</span>&nbsp;<span class="ident" id="6033725">ok</span>&nbsp;<span class="op" id="6033728">:=</span>&nbsp;<span class="ident" id="6033731">spec</span><span class="op" id="6033735">.</span><span class="op" id="6033736">(</span><span class="op" id="6033737">*</span><span class="ident" id="6033738">ast</span><span class="op" id="6033741">.</span><span class="ident" id="6033742">TypeSpec</span><span class="op" id="6033750">)</span><span class="op" id="6033751">;</span>&nbsp;<span class="ident" id="6033753">ok</span>&nbsp;<span class="op" id="6033756">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033764">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033819">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033876">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6033932">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6033989">fake</span>&nbsp;<span class="op" id="6033994">:=</span>&nbsp;<span class="op" id="6033997">&amp;</span><span class="ident" id="6033998">ast</span><span class="op" id="6034001">.</span><span class="ident" id="6034002">GenDecl</span><span class="op" id="6034009">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034018">Doc</span><span class="op" id="6034021">:</span>&nbsp;<span class="ident" id="6034023">d</span><span class="op" id="6034024">.</span><span class="ident" id="6034025">Doc</span><span class="op" id="6034028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034037">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034088">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034141">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034190">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034241">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034293">TokPos</span><span class="op" id="6034299">:</span>&nbsp;<span class="ident" id="6034301">s</span><span class="op" id="6034302">.</span><span class="ident" id="6034303">Pos</span><span class="op" id="6034306">(</span><span class="op" id="6034307">)</span><span class="op" id="6034308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034317">Tok</span><span class="op" id="6034320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034325">token</span><span class="op" id="6034330">.</span><span class="ident" id="6034331">TYPE</span><span class="op" id="6034335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034344">Specs</span><span class="op" id="6034349">:</span>&nbsp;&nbsp;<span class="op" id="6034352">[</span><span class="op" id="6034353">]</span><span class="ident" id="6034354">ast</span><span class="op" id="6034357">.</span><span class="ident" id="6034358">Spec</span><span class="op" id="6034362">{</span><span class="ident" id="6034363">s</span><span class="op" id="6034364">}</span><span class="op" id="6034365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034373">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034381">r</span><span class="op" id="6034382">.</span><span class="ident" id="6034383">readType</span><span class="op" id="6034391">(</span><span class="ident" id="6034392">fake</span><span class="op" id="6034396">,</span>&nbsp;<span class="ident" id="6034398">s</span><span class="op" id="6034399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6034421">case</span>&nbsp;<span class="op" id="6034426">*</span><span class="ident" id="6034427">ast</span><span class="op" id="6034430">.</span><span class="ident" id="6034431">FuncDecl</span><span class="op" id="6034439">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034444">r</span><span class="op" id="6034445">.</span><span class="ident" id="6034446">readFunc</span><span class="op" id="6034454">(</span><span class="ident" id="6034455">d</span><span class="op" id="6034456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6034463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034467">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034504">r</span><span class="op" id="6034505">.</span><span class="ident" id="6034506">readNotes</span><span class="op" id="6034515">(</span><span class="ident" id="6034516">src</span><span class="op" id="6034519">.</span><span class="ident" id="6034520">Comments</span><span class="op" id="6034528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034531">src</span><span class="op" id="6034534">.</span><span class="ident" id="6034535">Comments</span>&nbsp;<span class="op" id="6034544">=</span>&nbsp;<span class="ident" id="6034546">nil</span>&nbsp;<span class="comment" id="6034550">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="6034602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6034605">func</span>&nbsp;<span class="op" id="6034610">(</span><span class="ident" id="6034611">r</span>&nbsp;<span class="op" id="6034613">*</span><span class="ident" id="6034614">reader</span><span class="op" id="6034620">)</span>&nbsp;<span class="ident" id="6034622">readPackage</span><span class="op" id="6034633">(</span><span class="ident" id="6034634">pkg</span>&nbsp;<span class="op" id="6034638">*</span><span class="ident" id="6034639">ast</span><span class="op" id="6034642">.</span><span class="ident" id="6034643">Package</span><span class="op" id="6034650">,</span>&nbsp;<span class="ident" id="6034652">mode</span>&nbsp;<span class="ident" id="6034657">Mode</span><span class="op" id="6034661">)</span>&nbsp;<span class="op" id="6034663">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034666">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034688">r</span><span class="op" id="6034689">.</span><span class="ident" id="6034690">filenames</span>&nbsp;<span class="op" id="6034700">=</span>&nbsp;<span class="builtinfunc" id="6034702">make</span><span class="op" id="6034706">(</span><span class="op" id="6034707">[</span><span class="op" id="6034708">]</span><span class="builtintype" id="6034709">string</span><span class="op" id="6034715">,</span>&nbsp;<span class="builtinfunc" id="6034717">len</span><span class="op" id="6034720">(</span><span class="ident" id="6034721">pkg</span><span class="op" id="6034724">.</span><span class="ident" id="6034725">Files</span><span class="op" id="6034730">)</span><span class="op" id="6034731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034734">r</span><span class="op" id="6034735">.</span><span class="ident" id="6034736">imports</span>&nbsp;<span class="op" id="6034744">=</span>&nbsp;<span class="builtinfunc" id="6034746">make</span><span class="op" id="6034750">(</span><span class="keyword" id="6034751">map</span><span class="op" id="6034754">[</span><span class="builtintype" id="6034755">string</span><span class="op" id="6034761">]</span><span class="builtintype" id="6034762">int</span><span class="op" id="6034765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034768">r</span><span class="op" id="6034769">.</span><span class="ident" id="6034770">mode</span>&nbsp;<span class="op" id="6034775">=</span>&nbsp;<span class="ident" id="6034777">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034783">r</span><span class="op" id="6034784">.</span><span class="ident" id="6034785">types</span>&nbsp;<span class="op" id="6034791">=</span>&nbsp;<span class="builtinfunc" id="6034793">make</span><span class="op" id="6034797">(</span><span class="keyword" id="6034798">map</span><span class="op" id="6034801">[</span><span class="builtintype" id="6034802">string</span><span class="op" id="6034808">]</span><span class="op" id="6034809">*</span><span class="ident" id="6034810">namedType</span><span class="op" id="6034819">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034822">r</span><span class="op" id="6034823">.</span><span class="ident" id="6034824">funcs</span>&nbsp;<span class="op" id="6034830">=</span>&nbsp;<span class="builtinfunc" id="6034832">make</span><span class="op" id="6034836">(</span><span class="ident" id="6034837">methodSet</span><span class="op" id="6034846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034849">r</span><span class="op" id="6034850">.</span><span class="ident" id="6034851">notes</span>&nbsp;<span class="op" id="6034857">=</span>&nbsp;<span class="builtinfunc" id="6034859">make</span><span class="op" id="6034863">(</span><span class="keyword" id="6034864">map</span><span class="op" id="6034867">[</span><span class="builtintype" id="6034868">string</span><span class="op" id="6034874">]</span><span class="op" id="6034875">[</span><span class="op" id="6034876">]</span><span class="op" id="6034877">*</span><span class="ident" id="6034878">Note</span><span class="op" id="6034882">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034886">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6034941">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6034991">i</span>&nbsp;<span class="op" id="6034993">:=</span>&nbsp;<span class="num" id="6034996">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6034999">for</span>&nbsp;<span class="ident" id="6035003">filename</span>&nbsp;<span class="op" id="6035012">:=</span>&nbsp;<span class="keyword" id="6035015">range</span>&nbsp;<span class="ident" id="6035021">pkg</span><span class="op" id="6035024">.</span><span class="ident" id="6035025">Files</span>&nbsp;<span class="op" id="6035031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035035">r</span><span class="op" id="6035036">.</span><span class="ident" id="6035037">filenames</span><span class="op" id="6035046">[</span><span class="ident" id="6035047">i</span><span class="op" id="6035048">]</span>&nbsp;<span class="op" id="6035050">=</span>&nbsp;<span class="ident" id="6035052">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035063">i</span><span class="op" id="6035064">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6035068">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035071">sort</span><span class="op" id="6035075">.</span><span class="ident" id="6035076">Strings</span><span class="op" id="6035083">(</span><span class="ident" id="6035084">r</span><span class="op" id="6035085">.</span><span class="ident" id="6035086">filenames</span><span class="op" id="6035095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6035099">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035133">for</span>&nbsp;<span class="ident" id="6035137">_</span><span class="op" id="6035138">,</span>&nbsp;<span class="ident" id="6035140">filename</span>&nbsp;<span class="op" id="6035149">:=</span>&nbsp;<span class="keyword" id="6035152">range</span>&nbsp;<span class="ident" id="6035158">r</span><span class="op" id="6035159">.</span><span class="ident" id="6035160">filenames</span>&nbsp;<span class="op" id="6035170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035174">f</span>&nbsp;<span class="op" id="6035176">:=</span>&nbsp;<span class="ident" id="6035179">pkg</span><span class="op" id="6035182">.</span><span class="ident" id="6035183">Files</span><span class="op" id="6035188">[</span><span class="ident" id="6035189">filename</span><span class="op" id="6035197">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035201">if</span>&nbsp;<span class="ident" id="6035204">mode</span><span class="op" id="6035208">&amp;</span><span class="ident" id="6035209">AllDecls</span>&nbsp;<span class="op" id="6035218">==</span>&nbsp;<span class="num" id="6035221">0</span>&nbsp;<span class="op" id="6035223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035228">r</span><span class="op" id="6035229">.</span><span class="ident" id="6035230">fileExports</span><span class="op" id="6035241">(</span><span class="ident" id="6035242">f</span><span class="op" id="6035243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6035247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035251">r</span><span class="op" id="6035252">.</span><span class="ident" id="6035253">readFile</span><span class="op" id="6035261">(</span><span class="ident" id="6035262">f</span><span class="op" id="6035263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6035266">}</span><br>
<span class="lineno">550</span><span class="op" id="6035268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6035271">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6035351">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6035361">func</span>&nbsp;<span class="ident" id="6035366">customizeRecv</span><span class="op" id="6035379">(</span><span class="ident" id="6035380">f</span>&nbsp;<span class="op" id="6035382">*</span><span class="ident" id="6035383">Func</span><span class="op" id="6035387">,</span>&nbsp;<span class="ident" id="6035389">recvTypeName</span>&nbsp;<span class="builtintype" id="6035402">string</span><span class="op" id="6035408">,</span>&nbsp;<span class="ident" id="6035410">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6035424">bool</span><span class="op" id="6035428">,</span>&nbsp;<span class="ident" id="6035430">level</span>&nbsp;<span class="builtintype" id="6035436">int</span><span class="op" id="6035439">)</span>&nbsp;<span class="op" id="6035441">*</span><span class="ident" id="6035442">Func</span>&nbsp;<span class="op" id="6035447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035450">if</span>&nbsp;<span class="ident" id="6035453">f</span>&nbsp;<span class="op" id="6035455">==</span>&nbsp;<span class="ident" id="6035458">nil</span>&nbsp;<span class="op" id="6035462">||</span>&nbsp;<span class="ident" id="6035465">f</span><span class="op" id="6035466">.</span><span class="ident" id="6035467">Decl</span>&nbsp;<span class="op" id="6035472">==</span>&nbsp;<span class="ident" id="6035475">nil</span>&nbsp;<span class="op" id="6035479">||</span>&nbsp;<span class="ident" id="6035482">f</span><span class="op" id="6035483">.</span><span class="ident" id="6035484">Decl</span><span class="op" id="6035488">.</span><span class="ident" id="6035489">Recv</span>&nbsp;<span class="op" id="6035494">==</span>&nbsp;<span class="ident" id="6035497">nil</span>&nbsp;<span class="op" id="6035501">||</span>&nbsp;<span class="builtinfunc" id="6035504">len</span><span class="op" id="6035507">(</span><span class="ident" id="6035508">f</span><span class="op" id="6035509">.</span><span class="ident" id="6035510">Decl</span><span class="op" id="6035514">.</span><span class="ident" id="6035515">Recv</span><span class="op" id="6035519">.</span><span class="ident" id="6035520">List</span><span class="op" id="6035524">)</span>&nbsp;<span class="op" id="6035526">!=</span>&nbsp;<span class="num" id="6035529">1</span>&nbsp;<span class="op" id="6035531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035535">return</span>&nbsp;<span class="ident" id="6035542">f</span>&nbsp;<span class="comment" id="6035544">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6035578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6035582">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035632">newField</span>&nbsp;<span class="op" id="6035641">:=</span>&nbsp;<span class="op" id="6035644">*</span><span class="ident" id="6035645">f</span><span class="op" id="6035646">.</span><span class="ident" id="6035647">Decl</span><span class="op" id="6035651">.</span><span class="ident" id="6035652">Recv</span><span class="op" id="6035656">.</span><span class="ident" id="6035657">List</span><span class="op" id="6035661">[</span><span class="num" id="6035662">0</span><span class="op" id="6035663">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035666">origPos</span>&nbsp;<span class="op" id="6035674">:=</span>&nbsp;<span class="ident" id="6035677">newField</span><span class="op" id="6035685">.</span><span class="ident" id="6035686">Type</span><span class="op" id="6035690">.</span><span class="ident" id="6035691">Pos</span><span class="op" id="6035694">(</span><span class="op" id="6035695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035698">_</span><span class="op" id="6035699">,</span>&nbsp;<span class="ident" id="6035701">origRecvIsPtr</span>&nbsp;<span class="op" id="6035715">:=</span>&nbsp;<span class="ident" id="6035718">newField</span><span class="op" id="6035726">.</span><span class="ident" id="6035727">Type</span><span class="op" id="6035731">.</span><span class="op" id="6035732">(</span><span class="op" id="6035733">*</span><span class="ident" id="6035734">ast</span><span class="op" id="6035737">.</span><span class="ident" id="6035738">StarExpr</span><span class="op" id="6035746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035749">newIdent</span>&nbsp;<span class="op" id="6035758">:=</span>&nbsp;<span class="op" id="6035761">&amp;</span><span class="ident" id="6035762">ast</span><span class="op" id="6035765">.</span><span class="ident" id="6035766">Ident</span><span class="op" id="6035771">{</span><span class="ident" id="6035772">NamePos</span><span class="op" id="6035779">:</span>&nbsp;<span class="ident" id="6035781">origPos</span><span class="op" id="6035788">,</span>&nbsp;<span class="ident" id="6035790">Name</span><span class="op" id="6035794">:</span>&nbsp;<span class="ident" id="6035796">recvTypeName</span><span class="op" id="6035808">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035811">var</span>&nbsp;<span class="ident" id="6035815">typ</span>&nbsp;<span class="ident" id="6035819">ast</span><span class="op" id="6035822">.</span><span class="ident" id="6035823">Expr</span>&nbsp;<span class="op" id="6035828">=</span>&nbsp;<span class="ident" id="6035830">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6035840">if</span>&nbsp;<span class="op" id="6035843">!</span><span class="ident" id="6035844">embeddedIsPtr</span>&nbsp;<span class="op" id="6035858">&amp;&amp;</span>&nbsp;<span class="ident" id="6035861">origRecvIsPtr</span>&nbsp;<span class="op" id="6035875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035879">newIdent</span><span class="op" id="6035887">.</span><span class="ident" id="6035888">NamePos</span><span class="op" id="6035895">++</span>&nbsp;<span class="comment" id="6035898">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035924">typ</span>&nbsp;<span class="op" id="6035928">=</span>&nbsp;<span class="op" id="6035930">&amp;</span><span class="ident" id="6035931">ast</span><span class="op" id="6035934">.</span><span class="ident" id="6035935">StarExpr</span><span class="op" id="6035943">{</span><span class="ident" id="6035944">Star</span><span class="op" id="6035948">:</span>&nbsp;<span class="ident" id="6035950">origPos</span><span class="op" id="6035957">,</span>&nbsp;<span class="ident" id="6035959">X</span><span class="op" id="6035960">:</span>&nbsp;<span class="ident" id="6035962">newIdent</span><span class="op" id="6035970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6035973">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6035976">newField</span><span class="op" id="6035984">.</span><span class="ident" id="6035985">Type</span>&nbsp;<span class="op" id="6035990">=</span>&nbsp;<span class="ident" id="6035992">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6035998">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036063">newFieldList</span>&nbsp;<span class="op" id="6036076">:=</span>&nbsp;<span class="op" id="6036079">*</span><span class="ident" id="6036080">f</span><span class="op" id="6036081">.</span><span class="ident" id="6036082">Decl</span><span class="op" id="6036086">.</span><span class="ident" id="6036087">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036093">newFieldList</span><span class="op" id="6036105">.</span><span class="ident" id="6036106">List</span>&nbsp;<span class="op" id="6036111">=</span>&nbsp;<span class="op" id="6036113">[</span><span class="op" id="6036114">]</span><span class="op" id="6036115">*</span><span class="ident" id="6036116">ast</span><span class="op" id="6036119">.</span><span class="ident" id="6036120">Field</span><span class="op" id="6036125">{</span><span class="op" id="6036126">&amp;</span><span class="ident" id="6036127">newField</span><span class="op" id="6036135">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036139">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036210">newFuncDecl</span>&nbsp;<span class="op" id="6036222">:=</span>&nbsp;<span class="op" id="6036225">*</span><span class="ident" id="6036226">f</span><span class="op" id="6036227">.</span><span class="ident" id="6036228">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036234">newFuncDecl</span><span class="op" id="6036245">.</span><span class="ident" id="6036246">Recv</span>&nbsp;<span class="op" id="6036251">=</span>&nbsp;<span class="op" id="6036253">&amp;</span><span class="ident" id="6036254">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036269">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036334">newF</span>&nbsp;<span class="op" id="6036339">:=</span>&nbsp;<span class="op" id="6036342">*</span><span class="ident" id="6036343">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036346">newF</span><span class="op" id="6036350">.</span><span class="ident" id="6036351">Decl</span>&nbsp;<span class="op" id="6036356">=</span>&nbsp;<span class="op" id="6036358">&amp;</span><span class="ident" id="6036359">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036372">newF</span><span class="op" id="6036376">.</span><span class="ident" id="6036377">Recv</span>&nbsp;<span class="op" id="6036382">=</span>&nbsp;<span class="ident" id="6036384">recvString</span><span class="op" id="6036394">(</span><span class="ident" id="6036395">typ</span><span class="op" id="6036398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036401">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036434">newF</span><span class="op" id="6036438">.</span><span class="ident" id="6036439">Level</span>&nbsp;<span class="op" id="6036445">=</span>&nbsp;<span class="ident" id="6036447">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6036455">return</span>&nbsp;<span class="op" id="6036462">&amp;</span><span class="ident" id="6036463">newF</span><br>
<span class="lineno"></span><span class="op" id="6036468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="6036471">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="6036543">//</span><br>
<span class="lineno"></span><span class="keyword" id="6036546">func</span>&nbsp;<span class="op" id="6036551">(</span><span class="ident" id="6036552">r</span>&nbsp;<span class="op" id="6036554">*</span><span class="ident" id="6036555">reader</span><span class="op" id="6036561">)</span>&nbsp;<span class="ident" id="6036563">collectEmbeddedMethods</span><span class="op" id="6036585">(</span><span class="ident" id="6036586">mset</span>&nbsp;<span class="ident" id="6036591">methodSet</span><span class="op" id="6036600">,</span>&nbsp;<span class="ident" id="6036602">typ</span>&nbsp;<span class="op" id="6036606">*</span><span class="ident" id="6036607">namedType</span><span class="op" id="6036616">,</span>&nbsp;<span class="ident" id="6036618">recvTypeName</span>&nbsp;<span class="builtintype" id="6036631">string</span><span class="op" id="6036637">,</span>&nbsp;<span class="ident" id="6036639">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="6036653">bool</span><span class="op" id="6036657">,</span>&nbsp;<span class="ident" id="6036659">level</span>&nbsp;<span class="builtintype" id="6036665">int</span><span class="op" id="6036668">,</span>&nbsp;<span class="ident" id="6036670">visited</span>&nbsp;<span class="ident" id="6036678">embeddedSet</span><span class="op" id="6036689">)</span>&nbsp;<span class="op" id="6036691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6036694">visited</span><span class="op" id="6036701">[</span><span class="ident" id="6036702">typ</span><span class="op" id="6036705">]</span>&nbsp;<span class="op" id="6036707">=</span>&nbsp;<span class="builtintype" id="6036709">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6036715">for</span>&nbsp;<span class="ident" id="6036719">embedded</span><span class="op" id="6036727">,</span>&nbsp;<span class="ident" id="6036729">isPtr</span>&nbsp;<span class="op" id="6036735">:=</span>&nbsp;<span class="keyword" id="6036738">range</span>&nbsp;<span class="ident" id="6036744">typ</span><span class="op" id="6036747">.</span><span class="ident" id="6036748">embedded</span>&nbsp;<span class="op" id="6036757">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036761">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036818">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036874">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036930">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6036987">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6037013">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="6037031">:=</span>&nbsp;<span class="ident" id="6037034">embeddedIsPtr</span>&nbsp;<span class="op" id="6037048">||</span>&nbsp;<span class="ident" id="6037051">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037059">for</span>&nbsp;<span class="ident" id="6037063">_</span><span class="op" id="6037064">,</span>&nbsp;<span class="ident" id="6037066">m</span>&nbsp;<span class="op" id="6037068">:=</span>&nbsp;<span class="keyword" id="6037071">range</span>&nbsp;<span class="ident" id="6037077">embedded</span><span class="op" id="6037085">.</span><span class="ident" id="6037086">methods</span>&nbsp;<span class="op" id="6037094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037099">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037141">if</span>&nbsp;<span class="ident" id="6037144">m</span><span class="op" id="6037145">.</span><span class="ident" id="6037146">Level</span>&nbsp;<span class="op" id="6037152">==</span>&nbsp;<span class="num" id="6037155">0</span>&nbsp;<span class="op" id="6037157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6037163">mset</span><span class="op" id="6037167">.</span><span class="ident" id="6037168">add</span><span class="op" id="6037171">(</span><span class="ident" id="6037172">customizeRecv</span><span class="op" id="6037185">(</span><span class="ident" id="6037186">m</span><span class="op" id="6037187">,</span>&nbsp;<span class="ident" id="6037189">recvTypeName</span><span class="op" id="6037201">,</span>&nbsp;<span class="ident" id="6037203">thisEmbeddedIsPtr</span><span class="op" id="6037220">,</span>&nbsp;<span class="ident" id="6037222">level</span><span class="op" id="6037227">)</span><span class="op" id="6037228">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037241">if</span>&nbsp;<span class="op" id="6037244">!</span><span class="ident" id="6037245">visited</span><span class="op" id="6037252">[</span><span class="ident" id="6037253">embedded</span><span class="op" id="6037261">]</span>&nbsp;<span class="op" id="6037263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6037268">r</span><span class="op" id="6037269">.</span><span class="ident" id="6037270">collectEmbeddedMethods</span><span class="op" id="6037292">(</span><span class="ident" id="6037293">mset</span><span class="op" id="6037297">,</span>&nbsp;<span class="ident" id="6037299">embedded</span><span class="op" id="6037307">,</span>&nbsp;<span class="ident" id="6037309">recvTypeName</span><span class="op" id="6037321">,</span>&nbsp;<span class="ident" id="6037323">thisEmbeddedIsPtr</span><span class="op" id="6037340">,</span>&nbsp;<span class="ident" id="6037342">level</span><span class="op" id="6037347">+</span><span class="num" id="6037348">1</span><span class="op" id="6037349">,</span>&nbsp;<span class="ident" id="6037351">visited</span><span class="op" id="6037358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037362">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6037368">delete</span><span class="op" id="6037374">(</span><span class="ident" id="6037375">visited</span><span class="op" id="6037382">,</span>&nbsp;<span class="ident" id="6037384">typ</span><span class="op" id="6037387">)</span><br>
<span class="lineno"></span><span class="op" id="6037389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6037392">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="6037474">//</span><br>
<span class="lineno"></span><span class="keyword" id="6037477">func</span>&nbsp;<span class="op" id="6037482">(</span><span class="ident" id="6037483">r</span>&nbsp;<span class="op" id="6037485">*</span><span class="ident" id="6037486">reader</span><span class="op" id="6037492">)</span>&nbsp;<span class="ident" id="6037494">computeMethodSets</span><span class="op" id="6037511">(</span><span class="op" id="6037512">)</span>&nbsp;<span class="op" id="6037514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037517">for</span>&nbsp;<span class="ident" id="6037521">_</span><span class="op" id="6037522">,</span>&nbsp;<span class="ident" id="6037524">t</span>&nbsp;<span class="op" id="6037526">:=</span>&nbsp;<span class="keyword" id="6037529">range</span>&nbsp;<span class="ident" id="6037535">r</span><span class="op" id="6037536">.</span><span class="ident" id="6037537">types</span>&nbsp;<span class="op" id="6037543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037547">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037583">if</span>&nbsp;<span class="ident" id="6037586">t</span><span class="op" id="6037587">.</span><span class="ident" id="6037588">isStruct</span>&nbsp;<span class="op" id="6037597">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037602">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6037615">r</span><span class="op" id="6037616">.</span><span class="ident" id="6037617">collectEmbeddedMethods</span><span class="op" id="6037639">(</span><span class="ident" id="6037640">t</span><span class="op" id="6037641">.</span><span class="ident" id="6037642">methods</span><span class="op" id="6037649">,</span>&nbsp;<span class="ident" id="6037651">t</span><span class="op" id="6037652">,</span>&nbsp;<span class="ident" id="6037654">t</span><span class="op" id="6037655">.</span><span class="ident" id="6037656">name</span><span class="op" id="6037660">,</span>&nbsp;<span class="builtintype" id="6037662">false</span><span class="op" id="6037667">,</span>&nbsp;<span class="num" id="6037669">1</span><span class="op" id="6037670">,</span>&nbsp;<span class="builtinfunc" id="6037672">make</span><span class="op" id="6037676">(</span><span class="ident" id="6037677">embeddedSet</span><span class="op" id="6037688">)</span><span class="op" id="6037689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037693">}</span>&nbsp;<span class="keyword" id="6037695">else</span>&nbsp;<span class="op" id="6037700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037705">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037721">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6037752">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037828">if</span>&nbsp;<span class="ident" id="6037831">r</span><span class="op" id="6037832">.</span><span class="ident" id="6037833">errorDecl</span>&nbsp;<span class="op" id="6037843">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6037847">for</span>&nbsp;<span class="ident" id="6037851">_</span><span class="op" id="6037852">,</span>&nbsp;<span class="ident" id="6037854">ityp</span>&nbsp;<span class="op" id="6037859">:=</span>&nbsp;<span class="keyword" id="6037862">range</span>&nbsp;<span class="ident" id="6037868">r</span><span class="op" id="6037869">.</span><span class="ident" id="6037870">fixlist</span>&nbsp;<span class="op" id="6037878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6037883">removeErrorField</span><span class="op" id="6037899">(</span><span class="ident" id="6037900">ityp</span><span class="op" id="6037904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6037911">}</span><br>
<span class="lineno"></span><span class="op" id="6037913">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="6037916">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6037986">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="6038058">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="6038128">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="6038170">//</span><br>
<span class="lineno"></span><span class="keyword" id="6038173">func</span>&nbsp;<span class="op" id="6038178">(</span><span class="ident" id="6038179">r</span>&nbsp;<span class="op" id="6038181">*</span><span class="ident" id="6038182">reader</span><span class="op" id="6038188">)</span>&nbsp;<span class="ident" id="6038190">cleanupTypes</span><span class="op" id="6038202">(</span><span class="op" id="6038203">)</span>&nbsp;<span class="op" id="6038205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6038208">for</span>&nbsp;<span class="ident" id="6038212">_</span><span class="op" id="6038213">,</span>&nbsp;<span class="ident" id="6038215">t</span>&nbsp;<span class="op" id="6038217">:=</span>&nbsp;<span class="keyword" id="6038220">range</span>&nbsp;<span class="ident" id="6038226">r</span><span class="op" id="6038227">.</span><span class="ident" id="6038228">types</span>&nbsp;<span class="op" id="6038234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6038238">visible</span>&nbsp;<span class="op" id="6038246">:=</span>&nbsp;<span class="ident" id="6038249">r</span><span class="op" id="6038250">.</span><span class="ident" id="6038251">isVisible</span><span class="op" id="6038260">(</span><span class="ident" id="6038261">t</span><span class="op" id="6038262">.</span><span class="ident" id="6038263">name</span><span class="op" id="6038267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6038271">if</span>&nbsp;<span class="ident" id="6038274">t</span><span class="op" id="6038275">.</span><span class="ident" id="6038276">decl</span>&nbsp;<span class="op" id="6038281">==</span>&nbsp;<span class="ident" id="6038284">nil</span>&nbsp;<span class="op" id="6038288">&amp;&amp;</span>&nbsp;<span class="op" id="6038291">(</span><span class="ident" id="6038292">predeclaredTypes</span><span class="op" id="6038308">[</span><span class="ident" id="6038309">t</span><span class="op" id="6038310">.</span><span class="ident" id="6038311">name</span><span class="op" id="6038315">]</span>&nbsp;<span class="op" id="6038317">||</span>&nbsp;<span class="ident" id="6038320">t</span><span class="op" id="6038321">.</span><span class="ident" id="6038322">isEmbedded</span>&nbsp;<span class="op" id="6038333">&amp;&amp;</span>&nbsp;<span class="ident" id="6038336">visible</span><span class="op" id="6038343">)</span>&nbsp;<span class="op" id="6038345">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038350">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038427">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038502">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038579">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038634">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6038655">r</span><span class="op" id="6038656">.</span><span class="ident" id="6038657">values</span>&nbsp;<span class="op" id="6038664">=</span>&nbsp;<span class="builtinfunc" id="6038666">append</span><span class="op" id="6038672">(</span><span class="ident" id="6038673">r</span><span class="op" id="6038674">.</span><span class="ident" id="6038675">values</span><span class="op" id="6038681">,</span>&nbsp;<span class="ident" id="6038683">t</span><span class="op" id="6038684">.</span><span class="ident" id="6038685">values</span><span class="op" id="6038691">...</span><span class="op" id="6038694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038699">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6038731">for</span>&nbsp;<span class="ident" id="6038735">name</span><span class="op" id="6038739">,</span>&nbsp;<span class="ident" id="6038741">f</span>&nbsp;<span class="op" id="6038743">:=</span>&nbsp;<span class="keyword" id="6038746">range</span>&nbsp;<span class="ident" id="6038752">t</span><span class="op" id="6038753">.</span><span class="ident" id="6038754">funcs</span>&nbsp;<span class="op" id="6038760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038766">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038820">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6038878">r</span><span class="op" id="6038879">.</span><span class="ident" id="6038880">funcs</span><span class="op" id="6038885">[</span><span class="ident" id="6038886">name</span><span class="op" id="6038890">]</span>&nbsp;<span class="op" id="6038892">=</span>&nbsp;<span class="ident" id="6038894">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6038899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038904">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6038926">for</span>&nbsp;<span class="ident" id="6038930">name</span><span class="op" id="6038934">,</span>&nbsp;<span class="ident" id="6038936">m</span>&nbsp;<span class="op" id="6038938">:=</span>&nbsp;<span class="keyword" id="6038941">range</span>&nbsp;<span class="ident" id="6038947">t</span><span class="op" id="6038948">.</span><span class="ident" id="6038949">methods</span>&nbsp;<span class="op" id="6038957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038963">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6039027">if</span>&nbsp;<span class="ident" id="6039030">_</span><span class="op" id="6039031">,</span>&nbsp;<span class="ident" id="6039033">found</span>&nbsp;<span class="op" id="6039039">:=</span>&nbsp;<span class="ident" id="6039042">r</span><span class="op" id="6039043">.</span><span class="ident" id="6039044">funcs</span><span class="op" id="6039049">[</span><span class="ident" id="6039050">name</span><span class="op" id="6039054">]</span><span class="op" id="6039055">;</span>&nbsp;<span class="op" id="6039057">!</span><span class="ident" id="6039058">found</span>&nbsp;<span class="op" id="6039064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039071">r</span><span class="op" id="6039072">.</span><span class="ident" id="6039073">funcs</span><span class="op" id="6039078">[</span><span class="ident" id="6039079">name</span><span class="op" id="6039083">]</span>&nbsp;<span class="op" id="6039085">=</span>&nbsp;<span class="ident" id="6039087">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039102">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6039106">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6039165">if</span>&nbsp;<span class="ident" id="6039168">t</span><span class="op" id="6039169">.</span><span class="ident" id="6039170">decl</span>&nbsp;<span class="op" id="6039175">==</span>&nbsp;<span class="ident" id="6039178">nil</span>&nbsp;<span class="op" id="6039182">||</span>&nbsp;<span class="op" id="6039185">!</span><span class="ident" id="6039186">visible</span>&nbsp;<span class="op" id="6039194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6039199">delete</span><span class="op" id="6039205">(</span><span class="ident" id="6039206">r</span><span class="op" id="6039207">.</span><span class="ident" id="6039208">types</span><span class="op" id="6039213">,</span>&nbsp;<span class="ident" id="6039215">t</span><span class="op" id="6039216">.</span><span class="ident" id="6039217">name</span><span class="op" id="6039221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039228">}</span><br>
<span class="lineno">670</span><span class="op" id="6039230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6039233">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6039313">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6039325">type</span>&nbsp;<span class="ident" id="6039330">data</span>&nbsp;<span class="keyword" id="6039335">struct</span>&nbsp;<span class="op" id="6039342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039345">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6039350">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039355">swap</span>&nbsp;<span class="keyword" id="6039360">func</span><span class="op" id="6039364">(</span><span class="ident" id="6039365">i</span><span class="op" id="6039366">,</span>&nbsp;<span class="ident" id="6039368">j</span>&nbsp;<span class="builtintype" id="6039370">int</span><span class="op" id="6039373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039376">less</span>&nbsp;<span class="keyword" id="6039381">func</span><span class="op" id="6039385">(</span><span class="ident" id="6039386">i</span><span class="op" id="6039387">,</span>&nbsp;<span class="ident" id="6039389">j</span>&nbsp;<span class="builtintype" id="6039391">int</span><span class="op" id="6039394">)</span>&nbsp;<span class="builtintype" id="6039396">bool</span><br>
<span class="lineno"></span><span class="op" id="6039401">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="6039404">func</span>&nbsp;<span class="op" id="6039409">(</span><span class="ident" id="6039410">d</span>&nbsp;<span class="op" id="6039412">*</span><span class="ident" id="6039413">data</span><span class="op" id="6039417">)</span>&nbsp;<span class="ident" id="6039419">Len</span><span class="op" id="6039422">(</span><span class="op" id="6039423">)</span>&nbsp;<span class="builtintype" id="6039425">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039439">{</span>&nbsp;<span class="keyword" id="6039441">return</span>&nbsp;<span class="ident" id="6039448">d</span><span class="op" id="6039449">.</span><span class="ident" id="6039450">n</span>&nbsp;<span class="op" id="6039452">}</span><br>
<span class="lineno"></span><span class="keyword" id="6039454">func</span>&nbsp;<span class="op" id="6039459">(</span><span class="ident" id="6039460">d</span>&nbsp;<span class="op" id="6039462">*</span><span class="ident" id="6039463">data</span><span class="op" id="6039467">)</span>&nbsp;<span class="ident" id="6039469">Swap</span><span class="op" id="6039473">(</span><span class="ident" id="6039474">i</span><span class="op" id="6039475">,</span>&nbsp;<span class="ident" id="6039477">j</span>&nbsp;<span class="builtintype" id="6039479">int</span><span class="op" id="6039482">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039489">{</span>&nbsp;<span class="ident" id="6039491">d</span><span class="op" id="6039492">.</span><span class="ident" id="6039493">swap</span><span class="op" id="6039497">(</span><span class="ident" id="6039498">i</span><span class="op" id="6039499">,</span>&nbsp;<span class="ident" id="6039501">j</span><span class="op" id="6039502">)</span>&nbsp;<span class="op" id="6039504">}</span><br>
<span class="lineno"></span><span class="keyword" id="6039506">func</span>&nbsp;<span class="op" id="6039511">(</span><span class="ident" id="6039512">d</span>&nbsp;<span class="op" id="6039514">*</span><span class="ident" id="6039515">data</span><span class="op" id="6039519">)</span>&nbsp;<span class="ident" id="6039521">Less</span><span class="op" id="6039525">(</span><span class="ident" id="6039526">i</span><span class="op" id="6039527">,</span>&nbsp;<span class="ident" id="6039529">j</span>&nbsp;<span class="builtintype" id="6039531">int</span><span class="op" id="6039534">)</span>&nbsp;<span class="builtintype" id="6039536">bool</span>&nbsp;<span class="op" id="6039541">{</span>&nbsp;<span class="keyword" id="6039543">return</span>&nbsp;<span class="ident" id="6039550">d</span><span class="op" id="6039551">.</span><span class="ident" id="6039552">less</span><span class="op" id="6039556">(</span><span class="ident" id="6039557">i</span><span class="op" id="6039558">,</span>&nbsp;<span class="ident" id="6039560">j</span><span class="op" id="6039561">)</span>&nbsp;<span class="op" id="6039563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="6039566">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="6039609">func</span>&nbsp;<span class="ident" id="6039614">sortBy</span><span class="op" id="6039620">(</span><span class="ident" id="6039621">less</span>&nbsp;<span class="keyword" id="6039626">func</span><span class="op" id="6039630">(</span><span class="ident" id="6039631">i</span><span class="op" id="6039632">,</span>&nbsp;<span class="ident" id="6039634">j</span>&nbsp;<span class="builtintype" id="6039636">int</span><span class="op" id="6039639">)</span>&nbsp;<span class="builtintype" id="6039641">bool</span><span class="op" id="6039645">,</span>&nbsp;<span class="ident" id="6039647">swap</span>&nbsp;<span class="keyword" id="6039652">func</span><span class="op" id="6039656">(</span><span class="ident" id="6039657">i</span><span class="op" id="6039658">,</span>&nbsp;<span class="ident" id="6039660">j</span>&nbsp;<span class="builtintype" id="6039662">int</span><span class="op" id="6039665">)</span><span class="op" id="6039666">,</span>&nbsp;<span class="ident" id="6039668">n</span>&nbsp;<span class="builtintype" id="6039670">int</span><span class="op" id="6039673">)</span>&nbsp;<span class="op" id="6039675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039678">sort</span><span class="op" id="6039682">.</span><span class="ident" id="6039683">Sort</span><span class="op" id="6039687">(</span><span class="op" id="6039688">&amp;</span><span class="ident" id="6039689">data</span><span class="op" id="6039693">{</span><span class="ident" id="6039694">n</span><span class="op" id="6039695">,</span>&nbsp;<span class="ident" id="6039697">swap</span><span class="op" id="6039701">,</span>&nbsp;<span class="ident" id="6039703">less</span><span class="op" id="6039707">}</span><span class="op" id="6039708">)</span><br>
<span class="lineno"></span><span class="op" id="6039710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="6039713">func</span>&nbsp;<span class="ident" id="6039718">sortedKeys</span><span class="op" id="6039728">(</span><span class="ident" id="6039729">m</span>&nbsp;<span class="keyword" id="6039731">map</span><span class="op" id="6039734">[</span><span class="builtintype" id="6039735">string</span><span class="op" id="6039741">]</span><span class="builtintype" id="6039742">int</span><span class="op" id="6039745">)</span>&nbsp;<span class="op" id="6039747">[</span><span class="op" id="6039748">]</span><span class="builtintype" id="6039749">string</span>&nbsp;<span class="op" id="6039756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039759">list</span>&nbsp;<span class="op" id="6039764">:=</span>&nbsp;<span class="builtinfunc" id="6039767">make</span><span class="op" id="6039771">(</span><span class="op" id="6039772">[</span><span class="op" id="6039773">]</span><span class="builtintype" id="6039774">string</span><span class="op" id="6039780">,</span>&nbsp;<span class="builtinfunc" id="6039782">len</span><span class="op" id="6039785">(</span><span class="ident" id="6039786">m</span><span class="op" id="6039787">)</span><span class="op" id="6039788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039791">i</span>&nbsp;<span class="op" id="6039793">:=</span>&nbsp;<span class="num" id="6039796">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6039799">for</span>&nbsp;<span class="ident" id="6039803">key</span>&nbsp;<span class="op" id="6039807">:=</span>&nbsp;<span class="keyword" id="6039810">range</span>&nbsp;<span class="ident" id="6039816">m</span>&nbsp;<span class="op" id="6039818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039822">list</span><span class="op" id="6039826">[</span><span class="ident" id="6039827">i</span><span class="op" id="6039828">]</span>&nbsp;<span class="op" id="6039830">=</span>&nbsp;<span class="ident" id="6039832">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039838">i</span><span class="op" id="6039839">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6039846">sort</span><span class="op" id="6039850">.</span><span class="ident" id="6039851">Strings</span><span class="op" id="6039858">(</span><span class="ident" id="6039859">list</span><span class="op" id="6039863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6039866">return</span>&nbsp;<span class="ident" id="6039873">list</span><br>
<span class="lineno"></span><span class="op" id="6039878">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="6039881">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="6039947">//</span><br>
<span class="lineno"></span><span class="keyword" id="6039950">func</span>&nbsp;<span class="ident" id="6039955">sortingName</span><span class="op" id="6039966">(</span><span class="ident" id="6039967">d</span>&nbsp;<span class="op" id="6039969">*</span><span class="ident" id="6039970">ast</span><span class="op" id="6039973">.</span><span class="ident" id="6039974">GenDecl</span><span class="op" id="6039981">)</span>&nbsp;<span class="builtintype" id="6039983">string</span>&nbsp;<span class="op" id="6039990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6039993">if</span>&nbsp;<span class="builtinfunc" id="6039996">len</span><span class="op" id="6039999">(</span><span class="ident" id="6040000">d</span><span class="op" id="6040001">.</span><span class="ident" id="6040002">Specs</span><span class="op" id="6040007">)</span>&nbsp;<span class="op" id="6040009">==</span>&nbsp;<span class="num" id="6040012">1</span>&nbsp;<span class="op" id="6040014">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040018">if</span>&nbsp;<span class="ident" id="6040021">s</span><span class="op" id="6040022">,</span>&nbsp;<span class="ident" id="6040024">ok</span>&nbsp;<span class="op" id="6040027">:=</span>&nbsp;<span class="ident" id="6040030">d</span><span class="op" id="6040031">.</span><span class="ident" id="6040032">Specs</span><span class="op" id="6040037">[</span><span class="num" id="6040038">0</span><span class="op" id="6040039">]</span><span class="op" id="6040040">.</span><span class="op" id="6040041">(</span><span class="op" id="6040042">*</span><span class="ident" id="6040043">ast</span><span class="op" id="6040046">.</span><span class="ident" id="6040047">ValueSpec</span><span class="op" id="6040056">)</span><span class="op" id="6040057">;</span>&nbsp;<span class="ident" id="6040059">ok</span>&nbsp;<span class="op" id="6040062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040067">return</span>&nbsp;<span class="ident" id="6040074">s</span><span class="op" id="6040075">.</span><span class="ident" id="6040076">Names</span><span class="op" id="6040081">[</span><span class="num" id="6040082">0</span><span class="op" id="6040083">]</span><span class="op" id="6040084">.</span><span class="ident" id="6040085">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040098">return</span>&nbsp;<span class="string" id="6040105">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="6040108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040111">func</span>&nbsp;<span class="ident" id="6040116">sortedValues</span><span class="op" id="6040128">(</span><span class="ident" id="6040129">m</span>&nbsp;<span class="op" id="6040131">[</span><span class="op" id="6040132">]</span><span class="op" id="6040133">*</span><span class="ident" id="6040134">Value</span><span class="op" id="6040139">,</span>&nbsp;<span class="ident" id="6040141">tok</span>&nbsp;<span class="ident" id="6040145">token</span><span class="op" id="6040150">.</span><span class="ident" id="6040151">Token</span><span class="op" id="6040156">)</span>&nbsp;<span class="op" id="6040158">[</span><span class="op" id="6040159">]</span><span class="op" id="6040160">*</span><span class="ident" id="6040161">Value</span>&nbsp;<span class="op" id="6040167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040170">list</span>&nbsp;<span class="op" id="6040175">:=</span>&nbsp;<span class="builtinfunc" id="6040178">make</span><span class="op" id="6040182">(</span><span class="op" id="6040183">[</span><span class="op" id="6040184">]</span><span class="op" id="6040185">*</span><span class="ident" id="6040186">Value</span><span class="op" id="6040191">,</span>&nbsp;<span class="builtinfunc" id="6040193">len</span><span class="op" id="6040196">(</span><span class="ident" id="6040197">m</span><span class="op" id="6040198">)</span><span class="op" id="6040199">)</span>&nbsp;<span class="comment" id="6040201">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040228">i</span>&nbsp;<span class="op" id="6040230">:=</span>&nbsp;<span class="num" id="6040233">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040236">for</span>&nbsp;<span class="ident" id="6040240">_</span><span class="op" id="6040241">,</span>&nbsp;<span class="ident" id="6040243">val</span>&nbsp;<span class="op" id="6040247">:=</span>&nbsp;<span class="keyword" id="6040250">range</span>&nbsp;<span class="ident" id="6040256">m</span>&nbsp;<span class="op" id="6040258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040262">if</span>&nbsp;<span class="ident" id="6040265">val</span><span class="op" id="6040268">.</span><span class="ident" id="6040269">Decl</span><span class="op" id="6040273">.</span><span class="ident" id="6040274">Tok</span>&nbsp;<span class="op" id="6040278">==</span>&nbsp;<span class="ident" id="6040281">tok</span>&nbsp;<span class="op" id="6040285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040290">list</span><span class="op" id="6040294">[</span><span class="ident" id="6040295">i</span><span class="op" id="6040296">]</span>&nbsp;<span class="op" id="6040298">=</span>&nbsp;<span class="ident" id="6040300">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040307">i</span><span class="op" id="6040308">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040313">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040319">list</span>&nbsp;<span class="op" id="6040324">=</span>&nbsp;<span class="ident" id="6040326">list</span><span class="op" id="6040330">[</span><span class="num" id="6040331">0</span><span class="op" id="6040332">:</span><span class="ident" id="6040333">i</span><span class="op" id="6040334">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040338">sortBy</span><span class="op" id="6040344">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040348">func</span><span class="op" id="6040352">(</span><span class="ident" id="6040353">i</span><span class="op" id="6040354">,</span>&nbsp;<span class="ident" id="6040356">j</span>&nbsp;<span class="builtintype" id="6040358">int</span><span class="op" id="6040361">)</span>&nbsp;<span class="builtintype" id="6040363">bool</span>&nbsp;<span class="op" id="6040368">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040373">if</span>&nbsp;<span class="ident" id="6040376">ni</span><span class="op" id="6040378">,</span>&nbsp;<span class="ident" id="6040380">nj</span>&nbsp;<span class="op" id="6040383">:=</span>&nbsp;<span class="ident" id="6040386">sortingName</span><span class="op" id="6040397">(</span><span class="ident" id="6040398">list</span><span class="op" id="6040402">[</span><span class="ident" id="6040403">i</span><span class="op" id="6040404">]</span><span class="op" id="6040405">.</span><span class="ident" id="6040406">Decl</span><span class="op" id="6040410">)</span><span class="op" id="6040411">,</span>&nbsp;<span class="ident" id="6040413">sortingName</span><span class="op" id="6040424">(</span><span class="ident" id="6040425">list</span><span class="op" id="6040429">[</span><span class="ident" id="6040430">j</span><span class="op" id="6040431">]</span><span class="op" id="6040432">.</span><span class="ident" id="6040433">Decl</span><span class="op" id="6040437">)</span><span class="op" id="6040438">;</span>&nbsp;<span class="ident" id="6040440">ni</span>&nbsp;<span class="op" id="6040443">!=</span>&nbsp;<span class="ident" id="6040446">nj</span>&nbsp;<span class="op" id="6040449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040455">return</span>&nbsp;<span class="ident" id="6040462">ni</span>&nbsp;<span class="op" id="6040465">&lt;</span>&nbsp;<span class="ident" id="6040467">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040478">return</span>&nbsp;<span class="ident" id="6040485">list</span><span class="op" id="6040489">[</span><span class="ident" id="6040490">i</span><span class="op" id="6040491">]</span><span class="op" id="6040492">.</span><span class="ident" id="6040493">order</span>&nbsp;<span class="op" id="6040499">&lt;</span>&nbsp;<span class="ident" id="6040501">list</span><span class="op" id="6040505">[</span><span class="ident" id="6040506">j</span><span class="op" id="6040507">]</span><span class="op" id="6040508">.</span><span class="ident" id="6040509">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040517">}</span><span class="op" id="6040518">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040522">func</span><span class="op" id="6040526">(</span><span class="ident" id="6040527">i</span><span class="op" id="6040528">,</span>&nbsp;<span class="ident" id="6040530">j</span>&nbsp;<span class="builtintype" id="6040532">int</span><span class="op" id="6040535">)</span>&nbsp;<span class="op" id="6040537">{</span>&nbsp;<span class="ident" id="6040539">list</span><span class="op" id="6040543">[</span><span class="ident" id="6040544">i</span><span class="op" id="6040545">]</span><span class="op" id="6040546">,</span>&nbsp;<span class="ident" id="6040548">list</span><span class="op" id="6040552">[</span><span class="ident" id="6040553">j</span><span class="op" id="6040554">]</span>&nbsp;<span class="op" id="6040556">=</span>&nbsp;<span class="ident" id="6040558">list</span><span class="op" id="6040562">[</span><span class="ident" id="6040563">j</span><span class="op" id="6040564">]</span><span class="op" id="6040565">,</span>&nbsp;<span class="ident" id="6040567">list</span><span class="op" id="6040571">[</span><span class="ident" id="6040572">i</span><span class="op" id="6040573">]</span>&nbsp;<span class="op" id="6040575">}</span><span class="op" id="6040576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6040580">len</span><span class="op" id="6040583">(</span><span class="ident" id="6040584">list</span><span class="op" id="6040588">)</span><span class="op" id="6040589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6040592">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040596">return</span>&nbsp;<span class="ident" id="6040603">list</span><br>
<span class="lineno">735</span><span class="op" id="6040608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040611">func</span>&nbsp;<span class="ident" id="6040616">sortedTypes</span><span class="op" id="6040627">(</span><span class="ident" id="6040628">m</span>&nbsp;<span class="keyword" id="6040630">map</span><span class="op" id="6040633">[</span><span class="builtintype" id="6040634">string</span><span class="op" id="6040640">]</span><span class="op" id="6040641">*</span><span class="ident" id="6040642">namedType</span><span class="op" id="6040651">,</span>&nbsp;<span class="ident" id="6040653">allMethods</span>&nbsp;<span class="builtintype" id="6040664">bool</span><span class="op" id="6040668">)</span>&nbsp;<span class="op" id="6040670">[</span><span class="op" id="6040671">]</span><span class="op" id="6040672">*</span><span class="ident" id="6040673">Type</span>&nbsp;<span class="op" id="6040678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040681">list</span>&nbsp;<span class="op" id="6040686">:=</span>&nbsp;<span class="builtinfunc" id="6040689">make</span><span class="op" id="6040693">(</span><span class="op" id="6040694">[</span><span class="op" id="6040695">]</span><span class="op" id="6040696">*</span><span class="ident" id="6040697">Type</span><span class="op" id="6040701">,</span>&nbsp;<span class="builtinfunc" id="6040703">len</span><span class="op" id="6040706">(</span><span class="ident" id="6040707">m</span><span class="op" id="6040708">)</span><span class="op" id="6040709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040712">i</span>&nbsp;<span class="op" id="6040714">:=</span>&nbsp;<span class="num" id="6040717">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6040720">for</span>&nbsp;<span class="ident" id="6040724">_</span><span class="op" id="6040725">,</span>&nbsp;<span class="ident" id="6040727">t</span>&nbsp;<span class="op" id="6040729">:=</span>&nbsp;<span class="keyword" id="6040732">range</span>&nbsp;<span class="ident" id="6040738">m</span>&nbsp;<span class="op" id="6040740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040744">list</span><span class="op" id="6040748">[</span><span class="ident" id="6040749">i</span><span class="op" id="6040750">]</span>&nbsp;<span class="op" id="6040752">=</span>&nbsp;<span class="op" id="6040754">&amp;</span><span class="ident" id="6040755">Type</span><span class="op" id="6040759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040764">Doc</span><span class="op" id="6040767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040773">t</span><span class="op" id="6040774">.</span><span class="ident" id="6040775">doc</span><span class="op" id="6040778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040783">Name</span><span class="op" id="6040787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040792">t</span><span class="op" id="6040793">.</span><span class="ident" id="6040794">name</span><span class="op" id="6040798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040803">Decl</span><span class="op" id="6040807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040812">t</span><span class="op" id="6040813">.</span><span class="ident" id="6040814">decl</span><span class="op" id="6040818">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040823">Consts</span><span class="op" id="6040829">:</span>&nbsp;&nbsp;<span class="ident" id="6040832">sortedValues</span><span class="op" id="6040844">(</span><span class="ident" id="6040845">t</span><span class="op" id="6040846">.</span><span class="ident" id="6040847">values</span><span class="op" id="6040853">,</span>&nbsp;<span class="ident" id="6040855">token</span><span class="op" id="6040860">.</span><span class="ident" id="6040861">CONST</span><span class="op" id="6040866">)</span><span class="op" id="6040867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040872">Vars</span><span class="op" id="6040876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040881">sortedValues</span><span class="op" id="6040893">(</span><span class="ident" id="6040894">t</span><span class="op" id="6040895">.</span><span class="ident" id="6040896">values</span><span class="op" id="6040902">,</span>&nbsp;<span class="ident" id="6040904">token</span><span class="op" id="6040909">.</span><span class="ident" id="6040910">VAR</span><span class="op" id="6040913">)</span><span class="op" id="6040914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040919">Funcs</span><span class="op" id="6040924">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6040928">sortedFuncs</span><span class="op" id="6040939">(</span><span class="ident" id="6040940">t</span><span class="op" id="6040941">.</span><span class="ident" id="6040942">funcs</span><span class="op" id="6040947">,</span>&nbsp;<span class="builtintype" id="6040949">true</span><span class="op" id="6040953">)</span><span class="op" id="6040954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6040959">Methods</span><span class="op" id="6040966">:</span>&nbsp;<span class="ident" id="6040968">sortedFuncs</span><span class="op" id="6040979">(</span><span class="ident" id="6040980">t</span><span class="op" id="6040981">.</span><span class="ident" id="6040982">methods</span><span class="op" id="6040989">,</span>&nbsp;<span class="ident" id="6040991">allMethods</span><span class="op" id="6041001">)</span><span class="op" id="6041002">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041006">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041010">i</span><span class="op" id="6041011">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041019">sortBy</span><span class="op" id="6041025">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041029">func</span><span class="op" id="6041033">(</span><span class="ident" id="6041034">i</span><span class="op" id="6041035">,</span>&nbsp;<span class="ident" id="6041037">j</span>&nbsp;<span class="builtintype" id="6041039">int</span><span class="op" id="6041042">)</span>&nbsp;<span class="builtintype" id="6041044">bool</span>&nbsp;<span class="op" id="6041049">{</span>&nbsp;<span class="keyword" id="6041051">return</span>&nbsp;<span class="ident" id="6041058">list</span><span class="op" id="6041062">[</span><span class="ident" id="6041063">i</span><span class="op" id="6041064">]</span><span class="op" id="6041065">.</span><span class="ident" id="6041066">Name</span>&nbsp;<span class="op" id="6041071">&lt;</span>&nbsp;<span class="ident" id="6041073">list</span><span class="op" id="6041077">[</span><span class="ident" id="6041078">j</span><span class="op" id="6041079">]</span><span class="op" id="6041080">.</span><span class="ident" id="6041081">Name</span>&nbsp;<span class="op" id="6041086">}</span><span class="op" id="6041087">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041091">func</span><span class="op" id="6041095">(</span><span class="ident" id="6041096">i</span><span class="op" id="6041097">,</span>&nbsp;<span class="ident" id="6041099">j</span>&nbsp;<span class="builtintype" id="6041101">int</span><span class="op" id="6041104">)</span>&nbsp;<span class="op" id="6041106">{</span>&nbsp;<span class="ident" id="6041108">list</span><span class="op" id="6041112">[</span><span class="ident" id="6041113">i</span><span class="op" id="6041114">]</span><span class="op" id="6041115">,</span>&nbsp;<span class="ident" id="6041117">list</span><span class="op" id="6041121">[</span><span class="ident" id="6041122">j</span><span class="op" id="6041123">]</span>&nbsp;<span class="op" id="6041125">=</span>&nbsp;<span class="ident" id="6041127">list</span><span class="op" id="6041131">[</span><span class="ident" id="6041132">j</span><span class="op" id="6041133">]</span><span class="op" id="6041134">,</span>&nbsp;<span class="ident" id="6041136">list</span><span class="op" id="6041140">[</span><span class="ident" id="6041141">i</span><span class="op" id="6041142">]</span>&nbsp;<span class="op" id="6041144">}</span><span class="op" id="6041145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6041149">len</span><span class="op" id="6041152">(</span><span class="ident" id="6041153">list</span><span class="op" id="6041157">)</span><span class="op" id="6041158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041161">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041165">return</span>&nbsp;<span class="ident" id="6041172">list</span><br>
<span class="lineno">760</span><span class="op" id="6041177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6041180">func</span>&nbsp;<span class="ident" id="6041185">removeStar</span><span class="op" id="6041195">(</span><span class="ident" id="6041196">s</span>&nbsp;<span class="builtintype" id="6041198">string</span><span class="op" id="6041204">)</span>&nbsp;<span class="builtintype" id="6041206">string</span>&nbsp;<span class="op" id="6041213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041216">if</span>&nbsp;<span class="builtinfunc" id="6041219">len</span><span class="op" id="6041222">(</span><span class="ident" id="6041223">s</span><span class="op" id="6041224">)</span>&nbsp;<span class="op" id="6041226">&gt;</span>&nbsp;<span class="num" id="6041228">0</span>&nbsp;<span class="op" id="6041230">&amp;&amp;</span>&nbsp;<span class="ident" id="6041233">s</span><span class="op" id="6041234">[</span><span class="num" id="6041235">0</span><span class="op" id="6041236">]</span>&nbsp;<span class="op" id="6041238">==</span>&nbsp;<span class="string" id="6041241">&#39;*&#39;</span>&nbsp;<span class="op" id="6041245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041249">return</span>&nbsp;<span class="ident" id="6041256">s</span><span class="op" id="6041257">[</span><span class="num" id="6041258">1</span><span class="op" id="6041259">:</span><span class="op" id="6041260">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041266">return</span>&nbsp;<span class="ident" id="6041273">s</span><br>
<span class="lineno"></span><span class="op" id="6041275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6041278">func</span>&nbsp;<span class="ident" id="6041283">sortedFuncs</span><span class="op" id="6041294">(</span><span class="ident" id="6041295">m</span>&nbsp;<span class="ident" id="6041297">methodSet</span><span class="op" id="6041306">,</span>&nbsp;<span class="ident" id="6041308">allMethods</span>&nbsp;<span class="builtintype" id="6041319">bool</span><span class="op" id="6041323">)</span>&nbsp;<span class="op" id="6041325">[</span><span class="op" id="6041326">]</span><span class="op" id="6041327">*</span><span class="ident" id="6041328">Func</span>&nbsp;<span class="op" id="6041333">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041336">list</span>&nbsp;<span class="op" id="6041341">:=</span>&nbsp;<span class="builtinfunc" id="6041344">make</span><span class="op" id="6041348">(</span><span class="op" id="6041349">[</span><span class="op" id="6041350">]</span><span class="op" id="6041351">*</span><span class="ident" id="6041352">Func</span><span class="op" id="6041356">,</span>&nbsp;<span class="builtinfunc" id="6041358">len</span><span class="op" id="6041361">(</span><span class="ident" id="6041362">m</span><span class="op" id="6041363">)</span><span class="op" id="6041364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041367">i</span>&nbsp;<span class="op" id="6041369">:=</span>&nbsp;<span class="num" id="6041372">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041375">for</span>&nbsp;<span class="ident" id="6041379">_</span><span class="op" id="6041380">,</span>&nbsp;<span class="ident" id="6041382">m</span>&nbsp;<span class="op" id="6041384">:=</span>&nbsp;<span class="keyword" id="6041387">range</span>&nbsp;<span class="ident" id="6041393">m</span>&nbsp;<span class="op" id="6041395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6041399">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041439">switch</span>&nbsp;<span class="op" id="6041446">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041450">case</span>&nbsp;<span class="ident" id="6041455">m</span><span class="op" id="6041456">.</span><span class="ident" id="6041457">Decl</span>&nbsp;<span class="op" id="6041462">==</span>&nbsp;<span class="ident" id="6041465">nil</span><span class="op" id="6041468">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6041473">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041501">case</span>&nbsp;<span class="ident" id="6041506">allMethods</span><span class="op" id="6041516">,</span>&nbsp;<span class="ident" id="6041518">m</span><span class="op" id="6041519">.</span><span class="ident" id="6041520">Level</span>&nbsp;<span class="op" id="6041526">==</span>&nbsp;<span class="num" id="6041529">0</span><span class="op" id="6041530">,</span>&nbsp;<span class="op" id="6041532">!</span><span class="ident" id="6041533">ast</span><span class="op" id="6041536">.</span><span class="ident" id="6041537">IsExported</span><span class="op" id="6041547">(</span><span class="ident" id="6041548">removeStar</span><span class="op" id="6041558">(</span><span class="ident" id="6041559">m</span><span class="op" id="6041560">.</span><span class="ident" id="6041561">Orig</span><span class="op" id="6041565">)</span><span class="op" id="6041566">)</span><span class="op" id="6041567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6041572">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6041627">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041682">list</span><span class="op" id="6041686">[</span><span class="ident" id="6041687">i</span><span class="op" id="6041688">]</span>&nbsp;<span class="op" id="6041690">=</span>&nbsp;<span class="ident" id="6041692">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041697">i</span><span class="op" id="6041698">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041709">list</span>&nbsp;<span class="op" id="6041714">=</span>&nbsp;<span class="ident" id="6041716">list</span><span class="op" id="6041720">[</span><span class="num" id="6041721">0</span><span class="op" id="6041722">:</span><span class="ident" id="6041723">i</span><span class="op" id="6041724">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6041727">sortBy</span><span class="op" id="6041733">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041737">func</span><span class="op" id="6041741">(</span><span class="ident" id="6041742">i</span><span class="op" id="6041743">,</span>&nbsp;<span class="ident" id="6041745">j</span>&nbsp;<span class="builtintype" id="6041747">int</span><span class="op" id="6041750">)</span>&nbsp;<span class="builtintype" id="6041752">bool</span>&nbsp;<span class="op" id="6041757">{</span>&nbsp;<span class="keyword" id="6041759">return</span>&nbsp;<span class="ident" id="6041766">list</span><span class="op" id="6041770">[</span><span class="ident" id="6041771">i</span><span class="op" id="6041772">]</span><span class="op" id="6041773">.</span><span class="ident" id="6041774">Name</span>&nbsp;<span class="op" id="6041779">&lt;</span>&nbsp;<span class="ident" id="6041781">list</span><span class="op" id="6041785">[</span><span class="ident" id="6041786">j</span><span class="op" id="6041787">]</span><span class="op" id="6041788">.</span><span class="ident" id="6041789">Name</span>&nbsp;<span class="op" id="6041794">}</span><span class="op" id="6041795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041799">func</span><span class="op" id="6041803">(</span><span class="ident" id="6041804">i</span><span class="op" id="6041805">,</span>&nbsp;<span class="ident" id="6041807">j</span>&nbsp;<span class="builtintype" id="6041809">int</span><span class="op" id="6041812">)</span>&nbsp;<span class="op" id="6041814">{</span>&nbsp;<span class="ident" id="6041816">list</span><span class="op" id="6041820">[</span><span class="ident" id="6041821">i</span><span class="op" id="6041822">]</span><span class="op" id="6041823">,</span>&nbsp;<span class="ident" id="6041825">list</span><span class="op" id="6041829">[</span><span class="ident" id="6041830">j</span><span class="op" id="6041831">]</span>&nbsp;<span class="op" id="6041833">=</span>&nbsp;<span class="ident" id="6041835">list</span><span class="op" id="6041839">[</span><span class="ident" id="6041840">j</span><span class="op" id="6041841">]</span><span class="op" id="6041842">,</span>&nbsp;<span class="ident" id="6041844">list</span><span class="op" id="6041848">[</span><span class="ident" id="6041849">i</span><span class="op" id="6041850">]</span>&nbsp;<span class="op" id="6041852">}</span><span class="op" id="6041853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6041857">len</span><span class="op" id="6041860">(</span><span class="ident" id="6041861">list</span><span class="op" id="6041865">)</span><span class="op" id="6041866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6041869">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6041872">return</span>&nbsp;<span class="ident" id="6041879">list</span><br>
<span class="lineno"></span><span class="op" id="6041884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6041887">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="6041960">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="6042028">//</span><br>
<span class="lineno"></span><span class="keyword" id="6042031">func</span>&nbsp;<span class="ident" id="6042036">noteBodies</span><span class="op" id="6042046">(</span><span class="ident" id="6042047">notes</span>&nbsp;<span class="op" id="6042053">[</span><span class="op" id="6042054">]</span><span class="op" id="6042055">*</span><span class="ident" id="6042056">Note</span><span class="op" id="6042060">)</span>&nbsp;<span class="op" id="6042062">[</span><span class="op" id="6042063">]</span><span class="builtintype" id="6042064">string</span>&nbsp;<span class="op" id="6042071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6042074">var</span>&nbsp;<span class="ident" id="6042078">list</span>&nbsp;<span class="op" id="6042083">[</span><span class="op" id="6042084">]</span><span class="builtintype" id="6042085">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6042093">for</span>&nbsp;<span class="ident" id="6042097">_</span><span class="op" id="6042098">,</span>&nbsp;<span class="ident" id="6042100">n</span>&nbsp;<span class="op" id="6042102">:=</span>&nbsp;<span class="keyword" id="6042105">range</span>&nbsp;<span class="ident" id="6042111">notes</span>&nbsp;<span class="op" id="6042117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6042121">list</span>&nbsp;<span class="op" id="6042126">=</span>&nbsp;<span class="builtinfunc" id="6042128">append</span><span class="op" id="6042134">(</span><span class="ident" id="6042135">list</span><span class="op" id="6042139">,</span>&nbsp;<span class="ident" id="6042141">n</span><span class="op" id="6042142">.</span><span class="ident" id="6042143">Body</span><span class="op" id="6042147">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6042150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6042153">return</span>&nbsp;<span class="ident" id="6042160">list</span><br>
<span class="lineno"></span><span class="op" id="6042165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6042168">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="6042248">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042276">var</span>&nbsp;<span class="ident" id="6042280">predeclaredTypes</span>&nbsp;<span class="op" id="6042297">=</span>&nbsp;<span class="keyword" id="6042299">map</span><span class="op" id="6042302">[</span><span class="builtintype" id="6042303">string</span><span class="op" id="6042309">]</span><span class="builtintype" id="6042310">bool</span><span class="op" id="6042314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042317">&#34;bool&#34;</span><span class="op" id="6042323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042331">true</span><span class="op" id="6042335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042338">&#34;byte&#34;</span><span class="op" id="6042344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042352">true</span><span class="op" id="6042356">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042359">&#34;complex64&#34;</span><span class="op" id="6042370">:</span>&nbsp;&nbsp;<span class="builtintype" id="6042373">true</span><span class="op" id="6042377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042380">&#34;complex128&#34;</span><span class="op" id="6042392">:</span>&nbsp;<span class="builtintype" id="6042394">true</span><span class="op" id="6042398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042401">&#34;error&#34;</span><span class="op" id="6042408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042415">true</span><span class="op" id="6042419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042422">&#34;float32&#34;</span><span class="op" id="6042431">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042436">true</span><span class="op" id="6042440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042443">&#34;float64&#34;</span><span class="op" id="6042452">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042457">true</span><span class="op" id="6042461">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042464">&#34;int&#34;</span><span class="op" id="6042469">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042478">true</span><span class="op" id="6042482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042485">&#34;int8&#34;</span><span class="op" id="6042491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042499">true</span><span class="op" id="6042503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042506">&#34;int16&#34;</span><span class="op" id="6042513">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042520">true</span><span class="op" id="6042524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042527">&#34;int32&#34;</span><span class="op" id="6042534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042541">true</span><span class="op" id="6042545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042548">&#34;int64&#34;</span><span class="op" id="6042555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042562">true</span><span class="op" id="6042566">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042569">&#34;rune&#34;</span><span class="op" id="6042575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042583">true</span><span class="op" id="6042587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042590">&#34;string&#34;</span><span class="op" id="6042598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042604">true</span><span class="op" id="6042608">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042611">&#34;uint&#34;</span><span class="op" id="6042617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042625">true</span><span class="op" id="6042629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042632">&#34;uint8&#34;</span><span class="op" id="6042639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042646">true</span><span class="op" id="6042650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042653">&#34;uint16&#34;</span><span class="op" id="6042661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042667">true</span><span class="op" id="6042671">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042674">&#34;uint32&#34;</span><span class="op" id="6042682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042688">true</span><span class="op" id="6042692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042695">&#34;uint64&#34;</span><span class="op" id="6042703">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042709">true</span><span class="op" id="6042713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042716">&#34;uintptr&#34;</span><span class="op" id="6042725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042730">true</span><span class="op" id="6042734">,</span><br>
<span class="lineno"></span><span class="op" id="6042736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="6042739">var</span>&nbsp;<span class="ident" id="6042743">predeclaredFuncs</span>&nbsp;<span class="op" id="6042760">=</span>&nbsp;<span class="keyword" id="6042762">map</span><span class="op" id="6042765">[</span><span class="builtintype" id="6042766">string</span><span class="op" id="6042772">]</span><span class="builtintype" id="6042773">bool</span><span class="op" id="6042777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042780">&#34;append&#34;</span><span class="op" id="6042788">:</span>&nbsp;&nbsp;<span class="builtintype" id="6042791">true</span><span class="op" id="6042795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042798">&#34;cap&#34;</span><span class="op" id="6042803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042809">true</span><span class="op" id="6042813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042816">&#34;close&#34;</span><span class="op" id="6042823">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042827">true</span><span class="op" id="6042831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042834">&#34;complex&#34;</span><span class="op" id="6042843">:</span>&nbsp;<span class="builtintype" id="6042845">true</span><span class="op" id="6042849">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042852">&#34;copy&#34;</span><span class="op" id="6042858">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042863">true</span><span class="op" id="6042867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042870">&#34;delete&#34;</span><span class="op" id="6042878">:</span>&nbsp;&nbsp;<span class="builtintype" id="6042881">true</span><span class="op" id="6042885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042888">&#34;imag&#34;</span><span class="op" id="6042894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042899">true</span><span class="op" id="6042903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042906">&#34;len&#34;</span><span class="op" id="6042911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042917">true</span><span class="op" id="6042921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042924">&#34;make&#34;</span><span class="op" id="6042930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042935">true</span><span class="op" id="6042939">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042942">&#34;new&#34;</span><span class="op" id="6042947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042953">true</span><span class="op" id="6042957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042960">&#34;panic&#34;</span><span class="op" id="6042967">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042971">true</span><span class="op" id="6042975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042978">&#34;print&#34;</span><span class="op" id="6042985">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6042989">true</span><span class="op" id="6042993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6042996">&#34;println&#34;</span><span class="op" id="6043005">:</span>&nbsp;<span class="builtintype" id="6043007">true</span><span class="op" id="6043011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043014">&#34;real&#34;</span><span class="op" id="6043020">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6043025">true</span><span class="op" id="6043029">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043032">&#34;recover&#34;</span><span class="op" id="6043041">:</span>&nbsp;<span class="builtintype" id="6043043">true</span><span class="op" id="6043047">,</span><br>
<span class="lineno"></span><span class="op" id="6043049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6043052">var</span>&nbsp;<span class="ident" id="6043056">predeclaredConstants</span>&nbsp;<span class="op" id="6043077">=</span>&nbsp;<span class="keyword" id="6043079">map</span><span class="op" id="6043082">[</span><span class="builtintype" id="6043083">string</span><span class="op" id="6043089">]</span><span class="builtintype" id="6043090">bool</span><span class="op" id="6043094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043097">&#34;false&#34;</span><span class="op" id="6043104">:</span>&nbsp;<span class="builtintype" id="6043106">true</span><span class="op" id="6043110">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043113">&#34;iota&#34;</span><span class="op" id="6043119">:</span>&nbsp;&nbsp;<span class="builtintype" id="6043122">true</span><span class="op" id="6043126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043129">&#34;nil&#34;</span><span class="op" id="6043134">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6043138">true</span><span class="op" id="6043142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6043145">&#34;true&#34;</span><span class="op" id="6043151">:</span>&nbsp;&nbsp;<span class="builtintype" id="6043154">true</span><span class="op" id="6043158">,</span><br>
<span class="lineno"></span><span class="op" id="6043160">}</span>
</div>
</body>
</html>
