<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7112977">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7113033">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7113087">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7113138">package</span>&nbsp;<span class="ident" id="7113146">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7113157">import</span>&nbsp;<span class="op" id="7113164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113167">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113176">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7113185">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7113195">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7113198">func</span>&nbsp;<span class="ident" id="7113203">TestPrintfLine</span><span class="op" id="7113217">(</span><span class="ident" id="7113218">t</span>&nbsp;<span class="op" id="7113220">*</span><span class="ident" id="7113221">testing</span><span class="op" id="7113228">.</span><span class="ident" id="7113229">T</span><span class="op" id="7113230">)</span>&nbsp;<span class="op" id="7113232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113235">var</span>&nbsp;<span class="ident" id="7113239">buf</span>&nbsp;<span class="ident" id="7113243">bytes</span><span class="op" id="7113248">.</span><span class="ident" id="7113249">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113257">w</span>&nbsp;<span class="op" id="7113259">:=</span>&nbsp;<span class="ident" id="7113262">NewWriter</span><span class="op" id="7113271">(</span><span class="ident" id="7113272">bufio</span><span class="op" id="7113277">.</span><span class="ident" id="7113278">NewWriter</span><span class="op" id="7113287">(</span><span class="op" id="7113288">&amp;</span><span class="ident" id="7113289">buf</span><span class="op" id="7113292">)</span><span class="op" id="7113293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113296">err</span>&nbsp;<span class="op" id="7113300">:=</span>&nbsp;<span class="ident" id="7113303">w</span><span class="op" id="7113304">.</span><span class="ident" id="7113305">PrintfLine</span><span class="op" id="7113315">(</span><span class="string" id="7113316">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7113324">,</span>&nbsp;<span class="num" id="7113326">123</span><span class="op" id="7113329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113332">if</span>&nbsp;<span class="ident" id="7113335">s</span>&nbsp;<span class="op" id="7113337">:=</span>&nbsp;<span class="ident" id="7113340">buf</span><span class="op" id="7113343">.</span><span class="ident" id="7113344">String</span><span class="op" id="7113350">(</span><span class="op" id="7113351">)</span><span class="op" id="7113352">;</span>&nbsp;<span class="ident" id="7113354">s</span>&nbsp;<span class="op" id="7113356">!=</span>&nbsp;<span class="string" id="7113359">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7113373">||</span>&nbsp;<span class="ident" id="7113376">err</span>&nbsp;<span class="op" id="7113380">!=</span>&nbsp;<span class="ident" id="7113383">nil</span>&nbsp;<span class="op" id="7113387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113391">t</span><span class="op" id="7113392">.</span><span class="ident" id="7113393">Fatalf</span><span class="op" id="7113399">(</span><span class="string" id="7113400">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7113414">,</span>&nbsp;<span class="ident" id="7113416">s</span><span class="op" id="7113417">,</span>&nbsp;<span class="ident" id="7113419">err</span><span class="op" id="7113422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113425">}</span><br>
<span class="lineno">20</span><span class="op" id="7113427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7113430">func</span>&nbsp;<span class="ident" id="7113435">TestDotWriter</span><span class="op" id="7113448">(</span><span class="ident" id="7113449">t</span>&nbsp;<span class="op" id="7113451">*</span><span class="ident" id="7113452">testing</span><span class="op" id="7113459">.</span><span class="ident" id="7113460">T</span><span class="op" id="7113461">)</span>&nbsp;<span class="op" id="7113463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113466">var</span>&nbsp;<span class="ident" id="7113470">buf</span>&nbsp;<span class="ident" id="7113474">bytes</span><span class="op" id="7113479">.</span><span class="ident" id="7113480">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113488">w</span>&nbsp;<span class="op" id="7113490">:=</span>&nbsp;<span class="ident" id="7113493">NewWriter</span><span class="op" id="7113502">(</span><span class="ident" id="7113503">bufio</span><span class="op" id="7113508">.</span><span class="ident" id="7113509">NewWriter</span><span class="op" id="7113518">(</span><span class="op" id="7113519">&amp;</span><span class="ident" id="7113520">buf</span><span class="op" id="7113523">)</span><span class="op" id="7113524">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113527">d</span>&nbsp;<span class="op" id="7113529">:=</span>&nbsp;<span class="ident" id="7113532">w</span><span class="op" id="7113533">.</span><span class="ident" id="7113534">DotWriter</span><span class="op" id="7113543">(</span><span class="op" id="7113544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113547">n</span><span class="op" id="7113548">,</span>&nbsp;<span class="ident" id="7113550">err</span>&nbsp;<span class="op" id="7113554">:=</span>&nbsp;<span class="ident" id="7113557">d</span><span class="op" id="7113558">.</span><span class="ident" id="7113559">Write</span><span class="op" id="7113564">(</span><span class="op" id="7113565">[</span><span class="op" id="7113566">]</span><span class="builtintype" id="7113567">byte</span><span class="op" id="7113571">(</span><span class="string" id="7113572">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7113599">)</span><span class="op" id="7113600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113603">if</span>&nbsp;<span class="ident" id="7113606">n</span>&nbsp;<span class="op" id="7113608">!=</span>&nbsp;<span class="num" id="7113611">21</span>&nbsp;<span class="op" id="7113614">||</span>&nbsp;<span class="ident" id="7113617">err</span>&nbsp;<span class="op" id="7113621">!=</span>&nbsp;<span class="ident" id="7113624">nil</span>&nbsp;<span class="op" id="7113628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113632">t</span><span class="op" id="7113633">.</span><span class="ident" id="7113634">Fatalf</span><span class="op" id="7113640">(</span><span class="string" id="7113641">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7113656">,</span>&nbsp;<span class="ident" id="7113658">n</span><span class="op" id="7113659">,</span>&nbsp;<span class="ident" id="7113661">err</span><span class="op" id="7113664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113667">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113670">d</span><span class="op" id="7113671">.</span><span class="ident" id="7113672">Close</span><span class="op" id="7113677">(</span><span class="op" id="7113678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113681">want</span>&nbsp;<span class="op" id="7113686">:=</span>&nbsp;<span class="string" id="7113689">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113739">if</span>&nbsp;<span class="ident" id="7113742">s</span>&nbsp;<span class="op" id="7113744">:=</span>&nbsp;<span class="ident" id="7113747">buf</span><span class="op" id="7113750">.</span><span class="ident" id="7113751">String</span><span class="op" id="7113757">(</span><span class="op" id="7113758">)</span><span class="op" id="7113759">;</span>&nbsp;<span class="ident" id="7113761">s</span>&nbsp;<span class="op" id="7113763">!=</span>&nbsp;<span class="ident" id="7113766">want</span>&nbsp;<span class="op" id="7113771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7113775">t</span><span class="op" id="7113776">.</span><span class="ident" id="7113777">Fatalf</span><span class="op" id="7113783">(</span><span class="string" id="7113784">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7113794">,</span>&nbsp;<span class="ident" id="7113796">s</span><span class="op" id="7113797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7113800">}</span><br>
<span class="lineno">35</span><span class="op" id="7113802">}</span>
</div>
</body>
</html>
