<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2151784">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2151839">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2151893">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2151944">package</span>&nbsp;<span class="ident" id="2151952">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2151961">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2152033">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2152107">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2152134">func</span>&nbsp;<span class="ident" id="2152139">FormatUint</span><span class="op" id="2152149">(</span><span class="ident" id="2152150">i</span>&nbsp;<span class="builtintype" id="2152152">uint64</span><span class="op" id="2152158">,</span>&nbsp;<span class="ident" id="2152160">base</span>&nbsp;<span class="builtintype" id="2152165">int</span><span class="op" id="2152168">)</span>&nbsp;<span class="builtintype" id="2152170">string</span>&nbsp;<span class="op" id="2152177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2152180">_</span><span class="op" id="2152181">,</span>&nbsp;<span class="ident" id="2152183">s</span>&nbsp;<span class="op" id="2152185">:=</span>&nbsp;<span class="ident" id="2152188">formatBits</span><span class="op" id="2152198">(</span><span class="builtintype" id="2152199">nil</span><span class="op" id="2152202">,</span>&nbsp;<span class="ident" id="2152204">i</span><span class="op" id="2152205">,</span>&nbsp;<span class="ident" id="2152207">base</span><span class="op" id="2152211">,</span>&nbsp;<span class="builtintype" id="2152213">false</span><span class="op" id="2152218">,</span>&nbsp;<span class="builtintype" id="2152220">false</span><span class="op" id="2152225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2152228">return</span>&nbsp;<span class="ident" id="2152235">s</span><br>
<span class="lineno"></span><span class="op" id="2152237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2152240">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2152311">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2152385">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2152412">func</span>&nbsp;<span class="ident" id="2152417">FormatInt</span><span class="op" id="2152426">(</span><span class="ident" id="2152427">i</span>&nbsp;<span class="builtintype" id="2152429">int64</span><span class="op" id="2152434">,</span>&nbsp;<span class="ident" id="2152436">base</span>&nbsp;<span class="builtintype" id="2152441">int</span><span class="op" id="2152444">)</span>&nbsp;<span class="builtintype" id="2152446">string</span>&nbsp;<span class="op" id="2152453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2152456">_</span><span class="op" id="2152457">,</span>&nbsp;<span class="ident" id="2152459">s</span>&nbsp;<span class="op" id="2152461">:=</span>&nbsp;<span class="ident" id="2152464">formatBits</span><span class="op" id="2152474">(</span><span class="builtintype" id="2152475">nil</span><span class="op" id="2152478">,</span>&nbsp;<span class="builtintype" id="2152480">uint64</span><span class="op" id="2152486">(</span><span class="ident" id="2152487">i</span><span class="op" id="2152488">)</span><span class="op" id="2152489">,</span>&nbsp;<span class="ident" id="2152491">base</span><span class="op" id="2152495">,</span>&nbsp;<span class="ident" id="2152497">i</span>&nbsp;<span class="op" id="2152499">&lt;</span>&nbsp;<span class="num" id="2152501">0</span><span class="op" id="2152502">,</span>&nbsp;<span class="builtintype" id="2152504">false</span><span class="op" id="2152509">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2152512">return</span>&nbsp;<span class="ident" id="2152519">s</span><br>
<span class="lineno"></span><span class="op" id="2152521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2152524">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2152567">func</span>&nbsp;<span class="ident" id="2152572">Itoa</span><span class="op" id="2152576">(</span><span class="ident" id="2152577">i</span>&nbsp;<span class="builtintype" id="2152579">int</span><span class="op" id="2152582">)</span>&nbsp;<span class="builtintype" id="2152584">string</span>&nbsp;<span class="op" id="2152591">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2152594">return</span>&nbsp;<span class="ident" id="2152601">FormatInt</span><span class="op" id="2152610">(</span><span class="builtintype" id="2152611">int64</span><span class="op" id="2152616">(</span><span class="ident" id="2152617">i</span><span class="op" id="2152618">)</span><span class="op" id="2152619">,</span>&nbsp;<span class="num" id="2152621">10</span><span class="op" id="2152623">)</span><br>
<span class="lineno"></span><span class="op" id="2152625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2152628">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2152683">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2152753">func</span>&nbsp;<span class="ident" id="2152758">AppendInt</span><span class="op" id="2152767">(</span><span class="ident" id="2152768">dst</span>&nbsp;<span class="op" id="2152772">[</span><span class="op" id="2152773">]</span><span class="builtintype" id="2152774">byte</span><span class="op" id="2152778">,</span>&nbsp;<span class="ident" id="2152780">i</span>&nbsp;<span class="builtintype" id="2152782">int64</span><span class="op" id="2152787">,</span>&nbsp;<span class="ident" id="2152789">base</span>&nbsp;<span class="builtintype" id="2152794">int</span><span class="op" id="2152797">)</span>&nbsp;<span class="op" id="2152799">[</span><span class="op" id="2152800">]</span><span class="builtintype" id="2152801">byte</span>&nbsp;<span class="op" id="2152806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2152809">dst</span><span class="op" id="2152812">,</span>&nbsp;<span class="ident" id="2152814">_</span>&nbsp;<span class="op" id="2152816">=</span>&nbsp;<span class="ident" id="2152818">formatBits</span><span class="op" id="2152828">(</span><span class="ident" id="2152829">dst</span><span class="op" id="2152832">,</span>&nbsp;<span class="builtintype" id="2152834">uint64</span><span class="op" id="2152840">(</span><span class="ident" id="2152841">i</span><span class="op" id="2152842">)</span><span class="op" id="2152843">,</span>&nbsp;<span class="ident" id="2152845">base</span><span class="op" id="2152849">,</span>&nbsp;<span class="ident" id="2152851">i</span>&nbsp;<span class="op" id="2152853">&lt;</span>&nbsp;<span class="num" id="2152855">0</span><span class="op" id="2152856">,</span>&nbsp;<span class="builtintype" id="2152858">true</span><span class="op" id="2152862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2152865">return</span>&nbsp;<span class="ident" id="2152872">dst</span><br>
<span class="lineno"></span><span class="op" id="2152876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2152879">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2152944">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2153015">func</span>&nbsp;<span class="ident" id="2153020">AppendUint</span><span class="op" id="2153030">(</span><span class="ident" id="2153031">dst</span>&nbsp;<span class="op" id="2153035">[</span><span class="op" id="2153036">]</span><span class="builtintype" id="2153037">byte</span><span class="op" id="2153041">,</span>&nbsp;<span class="ident" id="2153043">i</span>&nbsp;<span class="builtintype" id="2153045">uint64</span><span class="op" id="2153051">,</span>&nbsp;<span class="ident" id="2153053">base</span>&nbsp;<span class="builtintype" id="2153058">int</span><span class="op" id="2153061">)</span>&nbsp;<span class="op" id="2153063">[</span><span class="op" id="2153064">]</span><span class="builtintype" id="2153065">byte</span>&nbsp;<span class="op" id="2153070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2153073">dst</span><span class="op" id="2153076">,</span>&nbsp;<span class="ident" id="2153078">_</span>&nbsp;<span class="op" id="2153080">=</span>&nbsp;<span class="ident" id="2153082">formatBits</span><span class="op" id="2153092">(</span><span class="ident" id="2153093">dst</span><span class="op" id="2153096">,</span>&nbsp;<span class="ident" id="2153098">i</span><span class="op" id="2153099">,</span>&nbsp;<span class="ident" id="2153101">base</span><span class="op" id="2153105">,</span>&nbsp;<span class="builtintype" id="2153107">false</span><span class="op" id="2153112">,</span>&nbsp;<span class="builtintype" id="2153114">true</span><span class="op" id="2153118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2153121">return</span>&nbsp;<span class="ident" id="2153128">dst</span><br>
<span class="lineno">40</span><span class="op" id="2153132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2153135">const</span>&nbsp;<span class="op" id="2153141">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2153144">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2153153">=</span>&nbsp;<span class="string" id="2153155">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2153195">digits01</span>&nbsp;<span class="op" id="2153204">=</span>&nbsp;<span class="string" id="2153206">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2153310">digits10</span>&nbsp;<span class="op" id="2153319">=</span>&nbsp;<span class="string" id="2153321">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2153424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2153427">var</span>&nbsp;<span class="ident" id="2153431">shifts</span>&nbsp;<span class="op" id="2153438">=</span>&nbsp;<span class="op" id="2153440">[</span><span class="builtinfunc" id="2153441">len</span><span class="op" id="2153444">(</span><span class="ident" id="2153445">digits</span><span class="op" id="2153451">)</span>&nbsp;<span class="op" id="2153453">+</span>&nbsp;<span class="num" id="2153455">1</span><span class="op" id="2153456">]</span><span class="builtintype" id="2153457">uint</span><span class="op" id="2153461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2153464">1</span>&nbsp;<span class="op" id="2153466">&lt;&lt;</span>&nbsp;<span class="num" id="2153469">1</span><span class="op" id="2153470">:</span>&nbsp;<span class="num" id="2153472">1</span><span class="op" id="2153473">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2153476">1</span>&nbsp;<span class="op" id="2153478">&lt;&lt;</span>&nbsp;<span class="num" id="2153481">2</span><span class="op" id="2153482">:</span>&nbsp;<span class="num" id="2153484">2</span><span class="op" id="2153485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2153488">1</span>&nbsp;<span class="op" id="2153490">&lt;&lt;</span>&nbsp;<span class="num" id="2153493">3</span><span class="op" id="2153494">:</span>&nbsp;<span class="num" id="2153496">3</span><span class="op" id="2153497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2153500">1</span>&nbsp;<span class="op" id="2153502">&lt;&lt;</span>&nbsp;<span class="num" id="2153505">4</span><span class="op" id="2153506">:</span>&nbsp;<span class="num" id="2153508">4</span><span class="op" id="2153509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2153512">1</span>&nbsp;<span class="op" id="2153514">&lt;&lt;</span>&nbsp;<span class="num" id="2153517">5</span><span class="op" id="2153518">:</span>&nbsp;<span class="num" id="2153520">5</span><span class="op" id="2153521">,</span><br>
<span class="lineno"></span><span class="op" id="2153523">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2153526">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2153599">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2153669">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2153739">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2153811">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2153842">//</span><br>
<span class="lineno"></span><span class="keyword" id="2153845">func</span>&nbsp;<span class="ident" id="2153850">formatBits</span><span class="op" id="2153860">(</span><span class="ident" id="2153861">dst</span>&nbsp;<span class="op" id="2153865">[</span><span class="op" id="2153866">]</span><span class="builtintype" id="2153867">byte</span><span class="op" id="2153871">,</span>&nbsp;<span class="ident" id="2153873">u</span>&nbsp;<span class="builtintype" id="2153875">uint64</span><span class="op" id="2153881">,</span>&nbsp;<span class="ident" id="2153883">base</span>&nbsp;<span class="builtintype" id="2153888">int</span><span class="op" id="2153891">,</span>&nbsp;<span class="ident" id="2153893">neg</span><span class="op" id="2153896">,</span>&nbsp;<span class="ident" id="2153898">append_</span>&nbsp;<span class="builtintype" id="2153906">bool</span><span class="op" id="2153910">)</span>&nbsp;<span class="op" id="2153912">(</span><span class="ident" id="2153913">d</span>&nbsp;<span class="op" id="2153915">[</span><span class="op" id="2153916">]</span><span class="builtintype" id="2153917">byte</span><span class="op" id="2153921">,</span>&nbsp;<span class="ident" id="2153923">s</span>&nbsp;<span class="builtintype" id="2153925">string</span><span class="op" id="2153931">)</span>&nbsp;<span class="op" id="2153933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2153936">if</span>&nbsp;<span class="ident" id="2153939">base</span>&nbsp;<span class="op" id="2153944">&lt;</span>&nbsp;<span class="num" id="2153946">2</span>&nbsp;<span class="op" id="2153948">||</span>&nbsp;<span class="ident" id="2153951">base</span>&nbsp;<span class="op" id="2153956">&gt;</span>&nbsp;<span class="builtinfunc" id="2153958">len</span><span class="op" id="2153961">(</span><span class="ident" id="2153962">digits</span><span class="op" id="2153968">)</span>&nbsp;<span class="op" id="2153970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2153974">panic</span><span class="op" id="2153979">(</span><span class="string" id="2153980">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2154023">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154029">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154067">var</span>&nbsp;<span class="ident" id="2154071">a</span>&nbsp;<span class="op" id="2154073">[</span><span class="num" id="2154074">64</span>&nbsp;<span class="op" id="2154077">+</span>&nbsp;<span class="num" id="2154079">1</span><span class="op" id="2154080">]</span><span class="builtintype" id="2154081">byte</span>&nbsp;<span class="comment" id="2154086">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154127">i</span>&nbsp;<span class="op" id="2154129">:=</span>&nbsp;<span class="builtinfunc" id="2154132">len</span><span class="op" id="2154135">(</span><span class="ident" id="2154136">a</span><span class="op" id="2154137">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154141">if</span>&nbsp;<span class="ident" id="2154144">neg</span>&nbsp;<span class="op" id="2154148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154152">u</span>&nbsp;<span class="op" id="2154154">=</span>&nbsp;<span class="op" id="2154156">-</span><span class="ident" id="2154157">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154164">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154181">if</span>&nbsp;<span class="ident" id="2154184">base</span>&nbsp;<span class="op" id="2154189">==</span>&nbsp;<span class="num" id="2154192">10</span>&nbsp;<span class="op" id="2154195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154199">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154251">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154308">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154329">for</span>&nbsp;<span class="ident" id="2154333">u</span>&nbsp;<span class="op" id="2154335">&gt;=</span>&nbsp;<span class="num" id="2154338">100</span>&nbsp;<span class="op" id="2154342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154347">i</span>&nbsp;<span class="op" id="2154349">-=</span>&nbsp;<span class="num" id="2154352">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154357">q</span>&nbsp;<span class="op" id="2154359">:=</span>&nbsp;<span class="ident" id="2154362">u</span>&nbsp;<span class="op" id="2154364">/</span>&nbsp;<span class="num" id="2154366">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154373">j</span>&nbsp;<span class="op" id="2154375">:=</span>&nbsp;<span class="builtintype" id="2154378">uintptr</span><span class="op" id="2154385">(</span><span class="ident" id="2154386">u</span>&nbsp;<span class="op" id="2154388">-</span>&nbsp;<span class="ident" id="2154390">q</span><span class="op" id="2154391">*</span><span class="num" id="2154392">100</span><span class="op" id="2154395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154400">a</span><span class="op" id="2154401">[</span><span class="ident" id="2154402">i</span><span class="op" id="2154403">+</span><span class="num" id="2154404">1</span><span class="op" id="2154405">]</span>&nbsp;<span class="op" id="2154407">=</span>&nbsp;<span class="ident" id="2154409">digits01</span><span class="op" id="2154417">[</span><span class="ident" id="2154418">j</span><span class="op" id="2154419">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154424">a</span><span class="op" id="2154425">[</span><span class="ident" id="2154426">i</span><span class="op" id="2154427">+</span><span class="num" id="2154428">0</span><span class="op" id="2154429">]</span>&nbsp;<span class="op" id="2154431">=</span>&nbsp;<span class="ident" id="2154433">digits10</span><span class="op" id="2154441">[</span><span class="ident" id="2154442">j</span><span class="op" id="2154443">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154448">u</span>&nbsp;<span class="op" id="2154450">=</span>&nbsp;<span class="ident" id="2154452">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154460">if</span>&nbsp;<span class="ident" id="2154463">u</span>&nbsp;<span class="op" id="2154465">&gt;=</span>&nbsp;<span class="num" id="2154468">10</span>&nbsp;<span class="op" id="2154471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154476">i</span><span class="op" id="2154477">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154483">q</span>&nbsp;<span class="op" id="2154485">:=</span>&nbsp;<span class="ident" id="2154488">u</span>&nbsp;<span class="op" id="2154490">/</span>&nbsp;<span class="num" id="2154492">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154498">a</span><span class="op" id="2154499">[</span><span class="ident" id="2154500">i</span><span class="op" id="2154501">]</span>&nbsp;<span class="op" id="2154503">=</span>&nbsp;<span class="ident" id="2154505">digits</span><span class="op" id="2154511">[</span><span class="builtintype" id="2154512">uintptr</span><span class="op" id="2154519">(</span><span class="ident" id="2154520">u</span><span class="op" id="2154521">-</span><span class="ident" id="2154522">q</span><span class="op" id="2154523">*</span><span class="num" id="2154524">10</span><span class="op" id="2154526">)</span><span class="op" id="2154527">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154532">u</span>&nbsp;<span class="op" id="2154534">=</span>&nbsp;<span class="ident" id="2154536">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154544">}</span>&nbsp;<span class="keyword" id="2154546">else</span>&nbsp;<span class="keyword" id="2154551">if</span>&nbsp;<span class="ident" id="2154554">s</span>&nbsp;<span class="op" id="2154556">:=</span>&nbsp;<span class="ident" id="2154559">shifts</span><span class="op" id="2154565">[</span><span class="ident" id="2154566">base</span><span class="op" id="2154570">]</span><span class="op" id="2154571">;</span>&nbsp;<span class="ident" id="2154573">s</span>&nbsp;<span class="op" id="2154575">&gt;</span>&nbsp;<span class="num" id="2154577">0</span>&nbsp;<span class="op" id="2154579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154583">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154648">b</span>&nbsp;<span class="op" id="2154650">:=</span>&nbsp;<span class="builtintype" id="2154653">uint64</span><span class="op" id="2154659">(</span><span class="ident" id="2154660">base</span><span class="op" id="2154664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154668">m</span>&nbsp;<span class="op" id="2154670">:=</span>&nbsp;<span class="builtintype" id="2154673">uintptr</span><span class="op" id="2154680">(</span><span class="ident" id="2154681">b</span><span class="op" id="2154682">)</span>&nbsp;<span class="op" id="2154684">-</span>&nbsp;<span class="num" id="2154686">1</span>&nbsp;<span class="comment" id="2154688">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154705">for</span>&nbsp;<span class="ident" id="2154709">u</span>&nbsp;<span class="op" id="2154711">&gt;=</span>&nbsp;<span class="ident" id="2154714">b</span>&nbsp;<span class="op" id="2154716">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154721">i</span><span class="op" id="2154722">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154728">a</span><span class="op" id="2154729">[</span><span class="ident" id="2154730">i</span><span class="op" id="2154731">]</span>&nbsp;<span class="op" id="2154733">=</span>&nbsp;<span class="ident" id="2154735">digits</span><span class="op" id="2154741">[</span><span class="builtintype" id="2154742">uintptr</span><span class="op" id="2154749">(</span><span class="ident" id="2154750">u</span><span class="op" id="2154751">)</span><span class="op" id="2154752">&amp;</span><span class="ident" id="2154753">m</span><span class="op" id="2154754">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154759">u</span>&nbsp;<span class="op" id="2154761">&gt;&gt;=</span>&nbsp;<span class="ident" id="2154765">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154773">}</span>&nbsp;<span class="keyword" id="2154775">else</span>&nbsp;<span class="op" id="2154780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154784">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154802">b</span>&nbsp;<span class="op" id="2154804">:=</span>&nbsp;<span class="builtintype" id="2154807">uint64</span><span class="op" id="2154813">(</span><span class="ident" id="2154814">base</span><span class="op" id="2154818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154822">for</span>&nbsp;<span class="ident" id="2154826">u</span>&nbsp;<span class="op" id="2154828">&gt;=</span>&nbsp;<span class="ident" id="2154831">b</span>&nbsp;<span class="op" id="2154833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154838">i</span><span class="op" id="2154839">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154845">a</span><span class="op" id="2154846">[</span><span class="ident" id="2154847">i</span><span class="op" id="2154848">]</span>&nbsp;<span class="op" id="2154850">=</span>&nbsp;<span class="ident" id="2154852">digits</span><span class="op" id="2154858">[</span><span class="builtintype" id="2154859">uintptr</span><span class="op" id="2154866">(</span><span class="ident" id="2154867">u</span><span class="op" id="2154868">%</span><span class="ident" id="2154869">b</span><span class="op" id="2154870">)</span><span class="op" id="2154871">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154876">u</span>&nbsp;<span class="op" id="2154878">/=</span>&nbsp;<span class="ident" id="2154881">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154892">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154905">i</span><span class="op" id="2154906">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154910">a</span><span class="op" id="2154911">[</span><span class="ident" id="2154912">i</span><span class="op" id="2154913">]</span>&nbsp;<span class="op" id="2154915">=</span>&nbsp;<span class="ident" id="2154917">digits</span><span class="op" id="2154923">[</span><span class="builtintype" id="2154924">uintptr</span><span class="op" id="2154931">(</span><span class="ident" id="2154932">u</span><span class="op" id="2154933">)</span><span class="op" id="2154934">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2154938">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154959">if</span>&nbsp;<span class="ident" id="2154962">neg</span>&nbsp;<span class="op" id="2154966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154970">i</span><span class="op" id="2154971">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2154976">a</span><span class="op" id="2154977">[</span><span class="ident" id="2154978">i</span><span class="op" id="2154979">]</span>&nbsp;<span class="op" id="2154981">=</span>&nbsp;<span class="string" id="2154983">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2154988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2154992">if</span>&nbsp;<span class="ident" id="2154995">append_</span>&nbsp;<span class="op" id="2155003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155007">d</span>&nbsp;<span class="op" id="2155009">=</span>&nbsp;<span class="builtinfunc" id="2155011">append</span><span class="op" id="2155017">(</span><span class="ident" id="2155018">dst</span><span class="op" id="2155021">,</span>&nbsp;<span class="ident" id="2155023">a</span><span class="op" id="2155024">[</span><span class="ident" id="2155025">i</span><span class="op" id="2155026">:</span><span class="op" id="2155027">]</span><span class="op" id="2155028">...</span><span class="op" id="2155031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155035">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2155043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2155046">s</span>&nbsp;<span class="op" id="2155048">=</span>&nbsp;<span class="builtintype" id="2155050">string</span><span class="op" id="2155056">(</span><span class="ident" id="2155057">a</span><span class="op" id="2155058">[</span><span class="ident" id="2155059">i</span><span class="op" id="2155060">:</span><span class="op" id="2155061">]</span><span class="op" id="2155062">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2155065">return</span><br>
<span class="lineno"></span><span class="op" id="2155072">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
