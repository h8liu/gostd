<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/cipher</h2>
<ul>
<li><a href="/gostd/crypto/cipher/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc.go.html">cbc.go</a></li>
<li><a href="/gostd/crypto/cipher/cbc_aes_test.go.html">cbc_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb.go.html" class="current">cfb.go</a></li>
<li><a href="/gostd/crypto/cipher/cfb_test.go.html">cfb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher.go.html">cipher.go</a></li>
<li><a href="/gostd/crypto/cipher/cipher_test.go.html">cipher_test.go</a></li>
<li><a href="/gostd/crypto/cipher/common_test.go.html">common_test.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr.go.html">ctr.go</a></li>
<li><a href="/gostd/crypto/cipher/ctr_aes_test.go.html">ctr_aes_test.go</a></li>
<li><a href="/gostd/crypto/cipher/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm.go.html">gcm.go</a></li>
<li><a href="/gostd/crypto/cipher/gcm_test.go.html">gcm_test.go</a></li>
<li><a href="/gostd/crypto/cipher/io.go.html">io.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb.go.html">ofb.go</a></li>
<li><a href="/gostd/crypto/cipher/ofb_test.go.html">ofb_test.go</a></li>
<li><a href="/gostd/crypto/cipher/xor.go.html">xor.go</a></li>
<li><a href="/gostd/crypto/cipher/xor_test.go.html">xor_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4408281">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4408336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4408390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4408441">//&nbsp;CFB&nbsp;(Cipher&nbsp;Feedback)&nbsp;Mode.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4408473">package</span>&nbsp;<span class="ident" id="4408481">cipher</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4408489">type</span>&nbsp;<span class="ident" id="4408494">cfb</span>&nbsp;<span class="keyword" id="4408498">struct</span>&nbsp;<span class="op" id="4408505">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408508">b</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408516"><a href="/gostd/crypto/cipher/cipher.go.html#4410698">Block</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408523">next</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408531">[</span><span class="op" id="4408532">]</span><span class="builtintype" id="4408533">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408539">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408547">[</span><span class="op" id="4408548">]</span><span class="builtintype" id="4408549">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408555">outUsed</span>&nbsp;<span class="builtintype" id="4408563">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408569">decrypt</span>&nbsp;<span class="builtintype" id="4408577">bool</span><br>
<span class="lineno"></span><span class="op" id="4408582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4408585">func</span>&nbsp;<span class="op" id="4408590">(</span><span class="ident" id="4408591">x</span>&nbsp;<span class="op" id="4408593">*</span><span class="ident" id="4408594"><a href="/gostd/crypto/cipher/cfb.go.html#4408494">cfb</a></span><span class="op" id="4408597">)</span>&nbsp;<span class="ident" id="4408599">XORKeyStream</span><span class="op" id="4408611">(</span><span class="ident" id="4408612">dst</span><span class="op" id="4408615">,</span>&nbsp;<span class="ident" id="4408617">src</span>&nbsp;<span class="op" id="4408621">[</span><span class="op" id="4408622">]</span><span class="builtintype" id="4408623">byte</span><span class="op" id="4408627">)</span>&nbsp;<span class="op" id="4408629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408632">for</span>&nbsp;<span class="builtinfunc" id="4408636">len</span><span class="op" id="4408639">(</span><span class="ident" id="4408640"><a href="/gostd/crypto/cipher/cfb.go.html#4408617">src</a></span><span class="op" id="4408643">)</span>&nbsp;<span class="op" id="4408645">&gt;</span>&nbsp;<span class="num" id="4408647">0</span>&nbsp;<span class="op" id="4408649">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408653">if</span>&nbsp;<span class="ident" id="4408656"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408657">.</span><span class="ident" id="4408658"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span>&nbsp;<span class="op" id="4408666">==</span>&nbsp;<span class="builtinfunc" id="4408669">len</span><span class="op" id="4408672">(</span><span class="ident" id="4408673"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408674">.</span><span class="ident" id="4408675"><a href="/gostd/crypto/cipher/cfb.go.html#4408539">out</a></span><span class="op" id="4408678">)</span>&nbsp;<span class="op" id="4408680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408685"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408686">.</span><span class="ident" id="4408687"><a href="/gostd/crypto/cipher/cfb.go.html#4408508">b</a></span><span class="op" id="4408688">.</span><span class="ident" id="4408689"><a href="/gostd/crypto/cipher/cipher.go.html#4410882">Encrypt</a></span><span class="op" id="4408696">(</span><span class="ident" id="4408697"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408698">.</span><span class="ident" id="4408699"><a href="/gostd/crypto/cipher/cfb.go.html#4408539">out</a></span><span class="op" id="4408702">,</span>&nbsp;<span class="ident" id="4408704"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408705">.</span><span class="ident" id="4408706"><a href="/gostd/crypto/cipher/cfb.go.html#4408523">next</a></span><span class="op" id="4408710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408715"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408716">.</span><span class="ident" id="4408717"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span>&nbsp;<span class="op" id="4408725">=</span>&nbsp;<span class="num" id="4408727">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4408736">if</span>&nbsp;<span class="ident" id="4408739"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408740">.</span><span class="ident" id="4408741"><a href="/gostd/crypto/cipher/cfb.go.html#4408569">decrypt</a></span>&nbsp;<span class="op" id="4408749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4408754">//&nbsp;We&nbsp;can&nbsp;precompute&nbsp;a&nbsp;larger&nbsp;segment&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4408802">//&nbsp;keystream&nbsp;on&nbsp;decryption.&nbsp;This&nbsp;will&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4408849">//&nbsp;larger&nbsp;batches&nbsp;for&nbsp;xor,&nbsp;and&nbsp;we&nbsp;should&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4408896">//&nbsp;able&nbsp;to&nbsp;match&nbsp;CTR/OFB&nbsp;performance.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4408937">copy</span><span class="op" id="4408941">(</span><span class="ident" id="4408942"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408943">.</span><span class="ident" id="4408944"><a href="/gostd/crypto/cipher/cfb.go.html#4408523">next</a></span><span class="op" id="4408948">[</span><span class="ident" id="4408949"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408950">.</span><span class="ident" id="4408951"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span><span class="op" id="4408958">:</span><span class="op" id="4408959">]</span><span class="op" id="4408960">,</span>&nbsp;<span class="ident" id="4408962"><a href="/gostd/crypto/cipher/cfb.go.html#4408617">src</a></span><span class="op" id="4408965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4408969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4408973">n</span>&nbsp;<span class="op" id="4408975">:=</span>&nbsp;<span class="ident" id="4408978"><a href="/gostd/crypto/cipher/xor.go.html#4427201">xorBytes</a></span><span class="op" id="4408986">(</span><span class="ident" id="4408987"><a href="/gostd/crypto/cipher/cfb.go.html#4408612">dst</a></span><span class="op" id="4408990">,</span>&nbsp;<span class="ident" id="4408992"><a href="/gostd/crypto/cipher/cfb.go.html#4408617">src</a></span><span class="op" id="4408995">,</span>&nbsp;<span class="ident" id="4408997"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4408998">.</span><span class="ident" id="4408999"><a href="/gostd/crypto/cipher/cfb.go.html#4408539">out</a></span><span class="op" id="4409002">[</span><span class="ident" id="4409003"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4409004">.</span><span class="ident" id="4409005"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span><span class="op" id="4409012">:</span><span class="op" id="4409013">]</span><span class="op" id="4409014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409018">if</span>&nbsp;<span class="op" id="4409021">!</span><span class="ident" id="4409022"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4409023">.</span><span class="ident" id="4409024"><a href="/gostd/crypto/cipher/cfb.go.html#4408569">decrypt</a></span>&nbsp;<span class="op" id="4409032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4409037">copy</span><span class="op" id="4409041">(</span><span class="ident" id="4409042"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4409043">.</span><span class="ident" id="4409044"><a href="/gostd/crypto/cipher/cfb.go.html#4408523">next</a></span><span class="op" id="4409048">[</span><span class="ident" id="4409049"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4409050">.</span><span class="ident" id="4409051"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span><span class="op" id="4409058">:</span><span class="op" id="4409059">]</span><span class="op" id="4409060">,</span>&nbsp;<span class="ident" id="4409062"><a href="/gostd/crypto/cipher/cfb.go.html#4408612">dst</a></span><span class="op" id="4409065">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409073"><a href="/gostd/crypto/cipher/cfb.go.html#4408612">dst</a></span>&nbsp;<span class="op" id="4409077">=</span>&nbsp;<span class="ident" id="4409079"><a href="/gostd/crypto/cipher/cfb.go.html#4408612">dst</a></span><span class="op" id="4409082">[</span><span class="ident" id="4409083"><a href="/gostd/crypto/cipher/cfb.go.html#4408973">n</a></span><span class="op" id="4409084">:</span><span class="op" id="4409085">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409089"><a href="/gostd/crypto/cipher/cfb.go.html#4408617">src</a></span>&nbsp;<span class="op" id="4409093">=</span>&nbsp;<span class="ident" id="4409095"><a href="/gostd/crypto/cipher/cfb.go.html#4408617">src</a></span><span class="op" id="4409098">[</span><span class="ident" id="4409099"><a href="/gostd/crypto/cipher/cfb.go.html#4408973">n</a></span><span class="op" id="4409100">:</span><span class="op" id="4409101">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409105"><a href="/gostd/crypto/cipher/cfb.go.html#4408591">x</a></span><span class="op" id="4409106">.</span><span class="ident" id="4409107"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span>&nbsp;<span class="op" id="4409115">+=</span>&nbsp;<span class="ident" id="4409118"><a href="/gostd/crypto/cipher/cfb.go.html#4408973">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409121">}</span><br>
<span class="lineno">40</span><span class="op" id="4409123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4409126">//&nbsp;NewCFBEncrypter&nbsp;returns&nbsp;a&nbsp;Stream&nbsp;which&nbsp;encrypts&nbsp;with&nbsp;cipher&nbsp;feedback&nbsp;mode,</span><br>
<span class="lineno"></span><span class="comment" id="4409204">//&nbsp;using&nbsp;the&nbsp;given&nbsp;Block.&nbsp;The&nbsp;iv&nbsp;must&nbsp;be&nbsp;the&nbsp;same&nbsp;length&nbsp;as&nbsp;the&nbsp;Block&#39;s&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="4409282">//&nbsp;size.</span><br>
<span class="lineno">45</span><span class="keyword" id="4409291">func</span>&nbsp;<span class="ident" id="4409296">NewCFBEncrypter</span><span class="op" id="4409311">(</span><span class="ident" id="4409312">block</span>&nbsp;<span class="ident" id="4409318"><a href="/gostd/crypto/cipher/cipher.go.html#4410698">Block</a></span><span class="op" id="4409323">,</span>&nbsp;<span class="ident" id="4409325">iv</span>&nbsp;<span class="op" id="4409328">[</span><span class="op" id="4409329">]</span><span class="builtintype" id="4409330">byte</span><span class="op" id="4409334">)</span>&nbsp;<span class="ident" id="4409336"><a href="/gostd/crypto/cipher/cipher.go.html#4411082">Stream</a></span>&nbsp;<span class="op" id="4409343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409346">return</span>&nbsp;<span class="ident" id="4409353"><a href="/gostd/crypto/cipher/cfb.go.html#4409640">newCFB</a></span><span class="op" id="4409359">(</span><span class="ident" id="4409360"><a href="/gostd/crypto/cipher/cfb.go.html#4409312">block</a></span><span class="op" id="4409365">,</span>&nbsp;<span class="ident" id="4409367"><a href="/gostd/crypto/cipher/cfb.go.html#4409325">iv</a></span><span class="op" id="4409369">,</span>&nbsp;<span class="builtintype" id="4409371">false</span><span class="op" id="4409376">)</span><br>
<span class="lineno"></span><span class="op" id="4409378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4409381">//&nbsp;NewCFBDecrypter&nbsp;returns&nbsp;a&nbsp;Stream&nbsp;which&nbsp;decrypts&nbsp;with&nbsp;cipher&nbsp;feedback&nbsp;mode,</span><br>
<span class="lineno">50</span><span class="comment" id="4409459">//&nbsp;using&nbsp;the&nbsp;given&nbsp;Block.&nbsp;The&nbsp;iv&nbsp;must&nbsp;be&nbsp;the&nbsp;same&nbsp;length&nbsp;as&nbsp;the&nbsp;Block&#39;s&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="4409537">//&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="4409546">func</span>&nbsp;<span class="ident" id="4409551">NewCFBDecrypter</span><span class="op" id="4409566">(</span><span class="ident" id="4409567">block</span>&nbsp;<span class="ident" id="4409573"><a href="/gostd/crypto/cipher/cipher.go.html#4410698">Block</a></span><span class="op" id="4409578">,</span>&nbsp;<span class="ident" id="4409580">iv</span>&nbsp;<span class="op" id="4409583">[</span><span class="op" id="4409584">]</span><span class="builtintype" id="4409585">byte</span><span class="op" id="4409589">)</span>&nbsp;<span class="ident" id="4409591"><a href="/gostd/crypto/cipher/cipher.go.html#4411082">Stream</a></span>&nbsp;<span class="op" id="4409598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409601">return</span>&nbsp;<span class="ident" id="4409608"><a href="/gostd/crypto/cipher/cfb.go.html#4409640">newCFB</a></span><span class="op" id="4409614">(</span><span class="ident" id="4409615"><a href="/gostd/crypto/cipher/cfb.go.html#4409567">block</a></span><span class="op" id="4409620">,</span>&nbsp;<span class="ident" id="4409622"><a href="/gostd/crypto/cipher/cfb.go.html#4409580">iv</a></span><span class="op" id="4409624">,</span>&nbsp;<span class="builtintype" id="4409626">true</span><span class="op" id="4409630">)</span><br>
<span class="lineno"></span><span class="op" id="4409632">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="4409635">func</span>&nbsp;<span class="ident" id="4409640">newCFB</span><span class="op" id="4409646">(</span><span class="ident" id="4409647">block</span>&nbsp;<span class="ident" id="4409653"><a href="/gostd/crypto/cipher/cipher.go.html#4410698">Block</a></span><span class="op" id="4409658">,</span>&nbsp;<span class="ident" id="4409660">iv</span>&nbsp;<span class="op" id="4409663">[</span><span class="op" id="4409664">]</span><span class="builtintype" id="4409665">byte</span><span class="op" id="4409669">,</span>&nbsp;<span class="ident" id="4409671">decrypt</span>&nbsp;<span class="builtintype" id="4409679">bool</span><span class="op" id="4409683">)</span>&nbsp;<span class="ident" id="4409685"><a href="/gostd/crypto/cipher/cipher.go.html#4411082">Stream</a></span>&nbsp;<span class="op" id="4409692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409695">blockSize</span>&nbsp;<span class="op" id="4409705">:=</span>&nbsp;<span class="ident" id="4409708"><a href="/gostd/crypto/cipher/cfb.go.html#4409647">block</a></span><span class="op" id="4409713">.</span><span class="ident" id="4409714"><a href="/gostd/crypto/cipher/cipher.go.html#4410764">BlockSize</a></span><span class="op" id="4409723">(</span><span class="op" id="4409724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4409727">if</span>&nbsp;<span class="builtinfunc" id="4409730">len</span><span class="op" id="4409733">(</span><span class="ident" id="4409734"><a href="/gostd/crypto/cipher/cfb.go.html#4409660">iv</a></span><span class="op" id="4409736">)</span>&nbsp;<span class="op" id="4409738">!=</span>&nbsp;<span class="ident" id="4409741"><a href="/gostd/crypto/cipher/cfb.go.html#4409695">blockSize</a></span>&nbsp;<span class="op" id="4409751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4409755">//&nbsp;stack&nbsp;trace&nbsp;will&nbsp;indicate&nbsp;whether&nbsp;it&nbsp;was&nbsp;de&nbsp;or&nbsp;encryption</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4409818">panic</span><span class="op" id="4409823">(</span><span class="string" id="4409824">&#34;cipher.newCFB:&nbsp;IV&nbsp;length&nbsp;must&nbsp;equal&nbsp;block&nbsp;size&#34;</span><span class="op" id="4409872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4409875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409878">x</span>&nbsp;<span class="op" id="4409880">:=</span>&nbsp;<span class="op" id="4409883">&amp;</span><span class="ident" id="4409884"><a href="/gostd/crypto/cipher/cfb.go.html#4408494">cfb</a></span><span class="op" id="4409887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409891"><a href="/gostd/crypto/cipher/cfb.go.html#4408508">b</a></span><span class="op" id="4409892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409900"><a href="/gostd/crypto/cipher/cfb.go.html#4409647">block</a></span><span class="op" id="4409905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409909"><a href="/gostd/crypto/cipher/cfb.go.html#4408539">out</a></span><span class="op" id="4409912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4409918">make</span><span class="op" id="4409922">(</span><span class="op" id="4409923">[</span><span class="op" id="4409924">]</span><span class="builtintype" id="4409925">byte</span><span class="op" id="4409929">,</span>&nbsp;<span class="ident" id="4409931"><a href="/gostd/crypto/cipher/cfb.go.html#4409695">blockSize</a></span><span class="op" id="4409940">)</span><span class="op" id="4409941">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409945"><a href="/gostd/crypto/cipher/cfb.go.html#4408523">next</a></span><span class="op" id="4409949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4409954">make</span><span class="op" id="4409958">(</span><span class="op" id="4409959">[</span><span class="op" id="4409960">]</span><span class="builtintype" id="4409961">byte</span><span class="op" id="4409965">,</span>&nbsp;<span class="ident" id="4409967"><a href="/gostd/crypto/cipher/cfb.go.html#4409695">blockSize</a></span><span class="op" id="4409976">)</span><span class="op" id="4409977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4409981"><a href="/gostd/crypto/cipher/cfb.go.html#4408555">outUsed</a></span><span class="op" id="4409988">:</span>&nbsp;<span class="ident" id="4409990"><a href="/gostd/crypto/cipher/cfb.go.html#4409695">blockSize</a></span><span class="op" id="4409999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4410003"><a href="/gostd/crypto/cipher/cfb.go.html#4408569">decrypt</a></span><span class="op" id="4410010">:</span>&nbsp;<span class="ident" id="4410012"><a href="/gostd/crypto/cipher/cfb.go.html#4409671">decrypt</a></span><span class="op" id="4410019">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4410022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4410025">copy</span><span class="op" id="4410029">(</span><span class="ident" id="4410030"><a href="/gostd/crypto/cipher/cfb.go.html#4409878">x</a></span><span class="op" id="4410031">.</span><span class="ident" id="4410032"><a href="/gostd/crypto/cipher/cfb.go.html#4408523">next</a></span><span class="op" id="4410036">,</span>&nbsp;<span class="ident" id="4410038"><a href="/gostd/crypto/cipher/cfb.go.html#4409660">iv</a></span><span class="op" id="4410040">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4410044">return</span>&nbsp;<span class="ident" id="4410051"><a href="/gostd/crypto/cipher/cfb.go.html#4409878">x</a></span><br>
<span class="lineno"></span><span class="op" id="4410053">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
