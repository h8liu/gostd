<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5577823">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5577878">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5577932">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5577983">//&nbsp;Package&nbsp;png&nbsp;implements&nbsp;a&nbsp;PNG&nbsp;image&nbsp;decoder&nbsp;and&nbsp;encoder.</span><br>
<span class="lineno"></span><span class="comment" id="5578042">//</span><br>
<span class="lineno"></span><span class="comment" id="5578045">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;is&nbsp;at&nbsp;http://www.w3.org/TR/PNG/.</span><br>
<span class="lineno"></span><span class="keyword" id="5578103">package</span>&nbsp;<span class="ident" id="5578111">png</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="5578116">import</span>&nbsp;<span class="op" id="5578123">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578126">&#34;compress/zlib&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578143">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578162">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578169">&#34;hash&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578177">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578191">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578200">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5578215">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5578220">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5578223">//&nbsp;Color&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="5578259">const</span>&nbsp;<span class="op" id="5578265">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578268">ctGrayscale</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578285">=</span>&nbsp;<span class="num" id="5578287">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578290">ctTrueColor</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578307">=</span>&nbsp;<span class="num" id="5578309">2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578312">ctPaletted</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578329">=</span>&nbsp;<span class="num" id="5578331">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578334">ctGrayscaleAlpha</span>&nbsp;<span class="op" id="5578351">=</span>&nbsp;<span class="num" id="5578353">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578356">ctTrueColorAlpha</span>&nbsp;<span class="op" id="5578373">=</span>&nbsp;<span class="num" id="5578375">6</span><br>
<span class="lineno"></span><span class="op" id="5578377">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="5578380">//&nbsp;A&nbsp;cb&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;color&nbsp;type&nbsp;and&nbsp;bit&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="5578434">const</span>&nbsp;<span class="op" id="5578440">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578443">cbInvalid</span>&nbsp;<span class="op" id="5578453">=</span>&nbsp;<span class="ident" id="5578455">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578461">cbG1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578467">cbG2</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578473">cbG4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578479">cbG8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578485">cbGA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578492">cbTC8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578499">cbP1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578505">cbP2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578511">cbP4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578517">cbP8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578523">cbTCA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578531">cbG16</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578538">cbGA16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578546">cbTC16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578554">cbTCA16</span><br>
<span class="lineno"></span><span class="op" id="5578562">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5578565">//&nbsp;Filter&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="5578602">const</span>&nbsp;<span class="op" id="5578608">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578611">ftNone</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578621">=</span>&nbsp;<span class="num" id="5578623">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578626">ftSub</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578636">=</span>&nbsp;<span class="num" id="5578638">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578641">ftUp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5578651">=</span>&nbsp;<span class="num" id="5578653">2</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578656">ftAverage</span>&nbsp;<span class="op" id="5578666">=</span>&nbsp;<span class="num" id="5578668">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578671">ftPaeth</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5578681">=</span>&nbsp;<span class="num" id="5578683">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578686">nFilter</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5578696">=</span>&nbsp;<span class="num" id="5578698">5</span><br>
<span class="lineno"></span><span class="op" id="5578700">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="5578703">//&nbsp;Interlace&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5578722">const</span>&nbsp;<span class="op" id="5578728">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578731">itNone</span>&nbsp;&nbsp;<span class="op" id="5578739">=</span>&nbsp;<span class="num" id="5578741">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578744">itAdam7</span>&nbsp;<span class="op" id="5578752">=</span>&nbsp;<span class="num" id="5578754">1</span><br>
<span class="lineno"></span><span class="op" id="5578756">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="5578759">//&nbsp;interlaceScan&nbsp;defines&nbsp;the&nbsp;placement&nbsp;and&nbsp;size&nbsp;of&nbsp;a&nbsp;pass&nbsp;for&nbsp;Adam7&nbsp;interlacing.</span><br>
<span class="lineno"></span><span class="keyword" id="5578840">type</span>&nbsp;<span class="ident" id="5578845">interlaceScan</span>&nbsp;<span class="keyword" id="5578859">struct</span>&nbsp;<span class="op" id="5578866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5578869">xFactor</span><span class="op" id="5578876">,</span>&nbsp;<span class="ident" id="5578878">yFactor</span><span class="op" id="5578885">,</span>&nbsp;<span class="ident" id="5578887">xOffset</span><span class="op" id="5578894">,</span>&nbsp;<span class="ident" id="5578896">yOffset</span>&nbsp;<span class="builtintype" id="5578904">int</span><br>
<span class="lineno"></span><span class="op" id="5578908">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="5578911">//&nbsp;interlacing&nbsp;defines&nbsp;Adam7&nbsp;interlacing,&nbsp;with&nbsp;7&nbsp;passes&nbsp;of&nbsp;reduced&nbsp;images.</span><br>
<span class="lineno"></span><span class="comment" id="5578986">//&nbsp;See&nbsp;http://www.w3.org/TR/PNG/#8Interlace</span><br>
<span class="lineno"></span><span class="keyword" id="5579030">var</span>&nbsp;<span class="ident" id="5579034">interlacing</span>&nbsp;<span class="op" id="5579046">=</span>&nbsp;<span class="op" id="5579048">[</span><span class="op" id="5579049">]</span><span class="ident" id="5579050"><a href="/image/png/reader.go.html#5578845">interlaceScan</a></span><span class="op" id="5579063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579066">{</span><span class="num" id="5579067">8</span><span class="op" id="5579068">,</span>&nbsp;<span class="num" id="5579070">8</span><span class="op" id="5579071">,</span>&nbsp;<span class="num" id="5579073">0</span><span class="op" id="5579074">,</span>&nbsp;<span class="num" id="5579076">0</span><span class="op" id="5579077">}</span><span class="op" id="5579078">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579081">{</span><span class="num" id="5579082">8</span><span class="op" id="5579083">,</span>&nbsp;<span class="num" id="5579085">8</span><span class="op" id="5579086">,</span>&nbsp;<span class="num" id="5579088">4</span><span class="op" id="5579089">,</span>&nbsp;<span class="num" id="5579091">0</span><span class="op" id="5579092">}</span><span class="op" id="5579093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579096">{</span><span class="num" id="5579097">4</span><span class="op" id="5579098">,</span>&nbsp;<span class="num" id="5579100">8</span><span class="op" id="5579101">,</span>&nbsp;<span class="num" id="5579103">0</span><span class="op" id="5579104">,</span>&nbsp;<span class="num" id="5579106">4</span><span class="op" id="5579107">}</span><span class="op" id="5579108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579111">{</span><span class="num" id="5579112">4</span><span class="op" id="5579113">,</span>&nbsp;<span class="num" id="5579115">4</span><span class="op" id="5579116">,</span>&nbsp;<span class="num" id="5579118">2</span><span class="op" id="5579119">,</span>&nbsp;<span class="num" id="5579121">0</span><span class="op" id="5579122">}</span><span class="op" id="5579123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579126">{</span><span class="num" id="5579127">2</span><span class="op" id="5579128">,</span>&nbsp;<span class="num" id="5579130">4</span><span class="op" id="5579131">,</span>&nbsp;<span class="num" id="5579133">0</span><span class="op" id="5579134">,</span>&nbsp;<span class="num" id="5579136">2</span><span class="op" id="5579137">}</span><span class="op" id="5579138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579141">{</span><span class="num" id="5579142">2</span><span class="op" id="5579143">,</span>&nbsp;<span class="num" id="5579145">2</span><span class="op" id="5579146">,</span>&nbsp;<span class="num" id="5579148">1</span><span class="op" id="5579149">,</span>&nbsp;<span class="num" id="5579151">0</span><span class="op" id="5579152">}</span><span class="op" id="5579153">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5579156">{</span><span class="num" id="5579157">1</span><span class="op" id="5579158">,</span>&nbsp;<span class="num" id="5579160">2</span><span class="op" id="5579161">,</span>&nbsp;<span class="num" id="5579163">0</span><span class="op" id="5579164">,</span>&nbsp;<span class="num" id="5579166">1</span><span class="op" id="5579167">}</span><span class="op" id="5579168">,</span><br>
<span class="lineno"></span><span class="op" id="5579170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5579173">//&nbsp;Decoding&nbsp;stage.</span><br>
<span class="lineno"></span><span class="comment" id="5579192">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;says&nbsp;that&nbsp;the&nbsp;IHDR,&nbsp;PLTE&nbsp;(if&nbsp;present),&nbsp;IDAT&nbsp;and&nbsp;IEND</span><br>
<span class="lineno">85</span><span class="comment" id="5579270">//&nbsp;chunks&nbsp;must&nbsp;appear&nbsp;in&nbsp;that&nbsp;order.&nbsp;There&nbsp;may&nbsp;be&nbsp;multiple&nbsp;IDAT&nbsp;chunks,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5579346">//&nbsp;IDAT&nbsp;chunks&nbsp;must&nbsp;be&nbsp;sequential&nbsp;(i.e.&nbsp;they&nbsp;may&nbsp;not&nbsp;have&nbsp;any&nbsp;other&nbsp;chunks</span><br>
<span class="lineno"></span><span class="comment" id="5579421">//&nbsp;between&nbsp;them).</span><br>
<span class="lineno"></span><span class="comment" id="5579439">//&nbsp;http://www.w3.org/TR/PNG/#5ChunkOrdering</span><br>
<span class="lineno"></span><span class="keyword" id="5579483">const</span>&nbsp;<span class="op" id="5579489">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579492">dsStart</span>&nbsp;<span class="op" id="5579500">=</span>&nbsp;<span class="ident" id="5579502">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579508">dsSeenIHDR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579520">dsSeenPLTE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579532">dsSeenIDAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579544">dsSeenIEND</span><br>
<span class="lineno">95</span><span class="op" id="5579555">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5579558">const</span>&nbsp;<span class="ident" id="5579564">pngHeader</span>&nbsp;<span class="op" id="5579574">=</span>&nbsp;<span class="string" id="5579576">&#34;\x89PNG\r\n\x1a\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5579597">type</span>&nbsp;<span class="ident" id="5579602">decoder</span>&nbsp;<span class="keyword" id="5579610">struct</span>&nbsp;<span class="op" id="5579617">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579620">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5579634"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5579636">.</span><span class="ident" id="5579637">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579645">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5579659"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5579664">.</span><span class="ident" id="5579665">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579672">crc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5579686"><a href="/image/png/reader.go.html#5578169">hash</a></span><span class="op" id="5579690">.</span><span class="ident" id="5579691">Hash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579699">width</span><span class="op" id="5579704">,</span>&nbsp;<span class="ident" id="5579706">height</span>&nbsp;<span class="builtintype" id="5579713">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579718">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5579732">int</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579737">palette</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5579751"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5579756">.</span><span class="ident" id="5579757">Palette</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579766">cb</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5579780">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579785">stage</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5579799">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579804">idatLength</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5579818">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579826">tmp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5579840">[</span><span class="num" id="5579841">3</span>&nbsp;<span class="op" id="5579843">*</span>&nbsp;<span class="num" id="5579845">256</span><span class="op" id="5579848">]</span><span class="builtintype" id="5579849">byte</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5579855">interlace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5579869">int</span><br>
<span class="lineno"></span><span class="op" id="5579873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5579876">//&nbsp;A&nbsp;FormatError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;PNG.</span><br>
<span class="lineno"></span><span class="keyword" id="5579936">type</span>&nbsp;<span class="ident" id="5579941">FormatError</span>&nbsp;<span class="builtintype" id="5579953">string</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="5579961">func</span>&nbsp;<span class="op" id="5579966">(</span><span class="ident" id="5579967">e</span>&nbsp;<span class="ident" id="5579969"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5579980">)</span>&nbsp;<span class="ident" id="5579982">Error</span><span class="op" id="5579987">(</span><span class="op" id="5579988">)</span>&nbsp;<span class="builtintype" id="5579990">string</span>&nbsp;<span class="op" id="5579997">{</span>&nbsp;<span class="keyword" id="5579999">return</span>&nbsp;<span class="string" id="5580006">&#34;png:&nbsp;invalid&nbsp;format:&nbsp;&#34;</span>&nbsp;<span class="op" id="5580030">+</span>&nbsp;<span class="builtintype" id="5580032">string</span><span class="op" id="5580038">(</span><span class="ident" id="5580039"><a href="/image/png/reader.go.html#5579967">e</a></span><span class="op" id="5580040">)</span>&nbsp;<span class="op" id="5580042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5580045">var</span>&nbsp;<span class="ident" id="5580049">chunkOrderError</span>&nbsp;<span class="op" id="5580065">=</span>&nbsp;<span class="ident" id="5580067"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5580078">(</span><span class="string" id="5580079">&#34;chunk&nbsp;out&nbsp;of&nbsp;order&#34;</span><span class="op" id="5580099">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5580102">//&nbsp;An&nbsp;UnsupportedError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;uses&nbsp;a&nbsp;valid&nbsp;but&nbsp;unimplemented&nbsp;PNG&nbsp;feature.</span><br>
<span class="lineno"></span><span class="keyword" id="5580192">type</span>&nbsp;<span class="ident" id="5580197">UnsupportedError</span>&nbsp;<span class="builtintype" id="5580214">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5580222">func</span>&nbsp;<span class="op" id="5580227">(</span><span class="ident" id="5580228">e</span>&nbsp;<span class="ident" id="5580230"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5580246">)</span>&nbsp;<span class="ident" id="5580248">Error</span><span class="op" id="5580253">(</span><span class="op" id="5580254">)</span>&nbsp;<span class="builtintype" id="5580256">string</span>&nbsp;<span class="op" id="5580263">{</span>&nbsp;<span class="keyword" id="5580265">return</span>&nbsp;<span class="string" id="5580272">&#34;png:&nbsp;unsupported&nbsp;feature:&nbsp;&#34;</span>&nbsp;<span class="op" id="5580301">+</span>&nbsp;<span class="builtintype" id="5580303">string</span><span class="op" id="5580309">(</span><span class="ident" id="5580310"><a href="/image/png/reader.go.html#5580228">e</a></span><span class="op" id="5580311">)</span>&nbsp;<span class="op" id="5580313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="5580316">func</span>&nbsp;<span class="ident" id="5580321">min</span><span class="op" id="5580324">(</span><span class="ident" id="5580325">a</span><span class="op" id="5580326">,</span>&nbsp;<span class="ident" id="5580328">b</span>&nbsp;<span class="builtintype" id="5580330">int</span><span class="op" id="5580333">)</span>&nbsp;<span class="builtintype" id="5580335">int</span>&nbsp;<span class="op" id="5580339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580342">if</span>&nbsp;<span class="ident" id="5580345"><a href="/image/png/reader.go.html#5580325">a</a></span>&nbsp;<span class="op" id="5580347">&lt;</span>&nbsp;<span class="ident" id="5580349"><a href="/image/png/reader.go.html#5580328">b</a></span>&nbsp;<span class="op" id="5580351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580355">return</span>&nbsp;<span class="ident" id="5580362"><a href="/image/png/reader.go.html#5580325">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580368">return</span>&nbsp;<span class="ident" id="5580375"><a href="/image/png/reader.go.html#5580328">b</a></span><br>
<span class="lineno">130</span><span class="op" id="5580377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5580380">func</span>&nbsp;<span class="op" id="5580385">(</span><span class="ident" id="5580386">d</span>&nbsp;<span class="op" id="5580388">*</span><span class="ident" id="5580389"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5580396">)</span>&nbsp;<span class="ident" id="5580398">parseIHDR</span><span class="op" id="5580407">(</span><span class="ident" id="5580408">length</span>&nbsp;<span class="builtintype" id="5580415">uint32</span><span class="op" id="5580421">)</span>&nbsp;<span class="builtintype" id="5580423">error</span>&nbsp;<span class="op" id="5580429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580432">if</span>&nbsp;<span class="ident" id="5580435"><a href="/image/png/reader.go.html#5580408">length</a></span>&nbsp;<span class="op" id="5580442">!=</span>&nbsp;<span class="num" id="5580445">13</span>&nbsp;<span class="op" id="5580448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580452">return</span>&nbsp;<span class="ident" id="5580459"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5580470">(</span><span class="string" id="5580471">&#34;bad&nbsp;IHDR&nbsp;length&#34;</span><span class="op" id="5580488">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580494">if</span>&nbsp;<span class="ident" id="5580497">_</span><span class="op" id="5580498">,</span>&nbsp;<span class="ident" id="5580500">err</span>&nbsp;<span class="op" id="5580504">:=</span>&nbsp;<span class="ident" id="5580507"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5580509">.</span><span class="ident" id="5580510">ReadFull</span><span class="op" id="5580518">(</span><span class="ident" id="5580519"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580520">.</span><span class="ident" id="5580521">r</span><span class="op" id="5580522">,</span>&nbsp;<span class="ident" id="5580524"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580525">.</span><span class="ident" id="5580526">tmp</span><span class="op" id="5580529">[</span><span class="op" id="5580530">:</span><span class="num" id="5580531">13</span><span class="op" id="5580533">]</span><span class="op" id="5580534">)</span><span class="op" id="5580535">;</span>&nbsp;<span class="ident" id="5580537"><a href="/image/png/reader.go.html#5580500">err</a></span>&nbsp;<span class="op" id="5580541">!=</span>&nbsp;<span class="ident" id="5580544">nil</span>&nbsp;<span class="op" id="5580548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580552">return</span>&nbsp;<span class="ident" id="5580559"><a href="/image/png/reader.go.html#5580500">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5580567"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580568">.</span><span class="ident" id="5580569">crc</span><span class="op" id="5580572">.</span><span class="ident" id="5580573">Write</span><span class="op" id="5580578">(</span><span class="ident" id="5580579"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580580">.</span><span class="ident" id="5580581">tmp</span><span class="op" id="5580584">[</span><span class="op" id="5580585">:</span><span class="num" id="5580586">13</span><span class="op" id="5580588">]</span><span class="op" id="5580589">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580592">if</span>&nbsp;<span class="ident" id="5580595"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580596">.</span><span class="ident" id="5580597">tmp</span><span class="op" id="5580600">[</span><span class="num" id="5580601">10</span><span class="op" id="5580603">]</span>&nbsp;<span class="op" id="5580605">!=</span>&nbsp;<span class="num" id="5580608">0</span>&nbsp;<span class="op" id="5580610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580614">return</span>&nbsp;<span class="ident" id="5580621"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5580637">(</span><span class="string" id="5580638">&#34;compression&nbsp;method&#34;</span><span class="op" id="5580658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580664">if</span>&nbsp;<span class="ident" id="5580667"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580668">.</span><span class="ident" id="5580669">tmp</span><span class="op" id="5580672">[</span><span class="num" id="5580673">11</span><span class="op" id="5580675">]</span>&nbsp;<span class="op" id="5580677">!=</span>&nbsp;<span class="num" id="5580680">0</span>&nbsp;<span class="op" id="5580682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580686">return</span>&nbsp;<span class="ident" id="5580693"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5580709">(</span><span class="string" id="5580710">&#34;filter&nbsp;method&#34;</span><span class="op" id="5580725">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580731">if</span>&nbsp;<span class="ident" id="5580734"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580735">.</span><span class="ident" id="5580736">tmp</span><span class="op" id="5580739">[</span><span class="num" id="5580740">12</span><span class="op" id="5580742">]</span>&nbsp;<span class="op" id="5580744">!=</span>&nbsp;<span class="ident" id="5580747"><a href="/image/png/reader.go.html#5578731">itNone</a></span>&nbsp;<span class="op" id="5580754">&amp;&amp;</span>&nbsp;<span class="ident" id="5580757"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580758">.</span><span class="ident" id="5580759">tmp</span><span class="op" id="5580762">[</span><span class="num" id="5580763">12</span><span class="op" id="5580765">]</span>&nbsp;<span class="op" id="5580767">!=</span>&nbsp;<span class="ident" id="5580770"><a href="/image/png/reader.go.html#5578744">itAdam7</a></span>&nbsp;<span class="op" id="5580778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580782">return</span>&nbsp;<span class="ident" id="5580789"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5580800">(</span><span class="string" id="5580801">&#34;invalid&nbsp;interlace&nbsp;method&#34;</span><span class="op" id="5580827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5580830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5580833"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580834">.</span><span class="ident" id="5580835">interlace</span>&nbsp;<span class="op" id="5580845">=</span>&nbsp;<span class="builtintype" id="5580847">int</span><span class="op" id="5580850">(</span><span class="ident" id="5580851"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580852">.</span><span class="ident" id="5580853">tmp</span><span class="op" id="5580856">[</span><span class="num" id="5580857">12</span><span class="op" id="5580859">]</span><span class="op" id="5580860">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5580863">w</span>&nbsp;<span class="op" id="5580865">:=</span>&nbsp;<span class="builtintype" id="5580868">int32</span><span class="op" id="5580873">(</span><span class="ident" id="5580874"><a href="/image/png/reader.go.html#5578143">binary</a></span><span class="op" id="5580880">.</span><span class="ident" id="5580881">BigEndian</span><span class="op" id="5580890">.</span><span class="ident" id="5580891">Uint32</span><span class="op" id="5580897">(</span><span class="ident" id="5580898"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580899">.</span><span class="ident" id="5580900">tmp</span><span class="op" id="5580903">[</span><span class="num" id="5580904">0</span><span class="op" id="5580905">:</span><span class="num" id="5580906">4</span><span class="op" id="5580907">]</span><span class="op" id="5580908">)</span><span class="op" id="5580909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5580912">h</span>&nbsp;<span class="op" id="5580914">:=</span>&nbsp;<span class="builtintype" id="5580917">int32</span><span class="op" id="5580922">(</span><span class="ident" id="5580923"><a href="/image/png/reader.go.html#5578143">binary</a></span><span class="op" id="5580929">.</span><span class="ident" id="5580930">BigEndian</span><span class="op" id="5580939">.</span><span class="ident" id="5580940">Uint32</span><span class="op" id="5580946">(</span><span class="ident" id="5580947"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5580948">.</span><span class="ident" id="5580949">tmp</span><span class="op" id="5580952">[</span><span class="num" id="5580953">4</span><span class="op" id="5580954">:</span><span class="num" id="5580955">8</span><span class="op" id="5580956">]</span><span class="op" id="5580957">)</span><span class="op" id="5580958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580961">if</span>&nbsp;<span class="ident" id="5580964"><a href="/image/png/reader.go.html#5580863">w</a></span>&nbsp;<span class="op" id="5580966">&lt;</span>&nbsp;<span class="num" id="5580968">0</span>&nbsp;<span class="op" id="5580970">||</span>&nbsp;<span class="ident" id="5580973"><a href="/image/png/reader.go.html#5580912">h</a></span>&nbsp;<span class="op" id="5580975">&lt;</span>&nbsp;<span class="num" id="5580977">0</span>&nbsp;<span class="op" id="5580979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5580983">return</span>&nbsp;<span class="ident" id="5580990"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5581001">(</span><span class="string" id="5581002">&#34;negative&nbsp;dimension&#34;</span><span class="op" id="5581022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581025">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581028">nPixels</span>&nbsp;<span class="op" id="5581036">:=</span>&nbsp;<span class="ident" id="5581039">int64</span><span class="op" id="5581044">(</span><span class="ident" id="5581045"><a href="/image/png/reader.go.html#5580863">w</a></span><span class="op" id="5581046">)</span>&nbsp;<span class="op" id="5581048">*</span>&nbsp;<span class="ident" id="5581050">int64</span><span class="op" id="5581055">(</span><span class="ident" id="5581056"><a href="/image/png/reader.go.html#5580912">h</a></span><span class="op" id="5581057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581060">if</span>&nbsp;<span class="ident" id="5581063"><a href="/image/png/reader.go.html#5581028">nPixels</a></span>&nbsp;<span class="op" id="5581071">!=</span>&nbsp;<span class="ident" id="5581074">int64</span><span class="op" id="5581079">(</span><span class="builtintype" id="5581080">int</span><span class="op" id="5581083">(</span><span class="ident" id="5581084"><a href="/image/png/reader.go.html#5581028">nPixels</a></span><span class="op" id="5581091">)</span><span class="op" id="5581092">)</span>&nbsp;<span class="op" id="5581094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581098">return</span>&nbsp;<span class="ident" id="5581105"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5581121">(</span><span class="string" id="5581122">&#34;dimension&nbsp;overflow&#34;</span><span class="op" id="5581142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581148"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581149">.</span><span class="ident" id="5581150">cb</span>&nbsp;<span class="op" id="5581153">=</span>&nbsp;<span class="ident" id="5581155"><a href="/image/png/reader.go.html#5578443">cbInvalid</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581166"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581167">.</span><span class="ident" id="5581168">depth</span>&nbsp;<span class="op" id="5581174">=</span>&nbsp;<span class="builtintype" id="5581176">int</span><span class="op" id="5581179">(</span><span class="ident" id="5581180"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581181">.</span><span class="ident" id="5581182">tmp</span><span class="op" id="5581185">[</span><span class="num" id="5581186">8</span><span class="op" id="5581187">]</span><span class="op" id="5581188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581191">switch</span>&nbsp;<span class="ident" id="5581198"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581199">.</span><span class="ident" id="5581200">depth</span>&nbsp;<span class="op" id="5581206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581209">case</span>&nbsp;<span class="num" id="5581214">1</span><span class="op" id="5581215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581219">switch</span>&nbsp;<span class="ident" id="5581226"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581227">.</span><span class="ident" id="5581228">tmp</span><span class="op" id="5581231">[</span><span class="num" id="5581232">9</span><span class="op" id="5581233">]</span>&nbsp;<span class="op" id="5581235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581239">case</span>&nbsp;<span class="ident" id="5581244"><a href="/image/png/reader.go.html#5578268">ctGrayscale</a></span><span class="op" id="5581255">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581260"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581261">.</span><span class="ident" id="5581262">cb</span>&nbsp;<span class="op" id="5581265">=</span>&nbsp;<span class="ident" id="5581267"><a href="/image/png/reader.go.html#5578461">cbG1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581274">case</span>&nbsp;<span class="ident" id="5581279"><a href="/image/png/reader.go.html#5578312">ctPaletted</a></span><span class="op" id="5581289">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581294"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581295">.</span><span class="ident" id="5581296">cb</span>&nbsp;<span class="op" id="5581299">=</span>&nbsp;<span class="ident" id="5581301"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581311">case</span>&nbsp;<span class="num" id="5581316">2</span><span class="op" id="5581317">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581321">switch</span>&nbsp;<span class="ident" id="5581328"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581329">.</span><span class="ident" id="5581330">tmp</span><span class="op" id="5581333">[</span><span class="num" id="5581334">9</span><span class="op" id="5581335">]</span>&nbsp;<span class="op" id="5581337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581341">case</span>&nbsp;<span class="ident" id="5581346"><a href="/image/png/reader.go.html#5578268">ctGrayscale</a></span><span class="op" id="5581357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581362"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581363">.</span><span class="ident" id="5581364">cb</span>&nbsp;<span class="op" id="5581367">=</span>&nbsp;<span class="ident" id="5581369"><a href="/image/png/reader.go.html#5578467">cbG2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581376">case</span>&nbsp;<span class="ident" id="5581381"><a href="/image/png/reader.go.html#5578312">ctPaletted</a></span><span class="op" id="5581391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581396"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581397">.</span><span class="ident" id="5581398">cb</span>&nbsp;<span class="op" id="5581401">=</span>&nbsp;<span class="ident" id="5581403"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581413">case</span>&nbsp;<span class="num" id="5581418">4</span><span class="op" id="5581419">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581423">switch</span>&nbsp;<span class="ident" id="5581430"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581431">.</span><span class="ident" id="5581432">tmp</span><span class="op" id="5581435">[</span><span class="num" id="5581436">9</span><span class="op" id="5581437">]</span>&nbsp;<span class="op" id="5581439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581443">case</span>&nbsp;<span class="ident" id="5581448"><a href="/image/png/reader.go.html#5578268">ctGrayscale</a></span><span class="op" id="5581459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581464"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581465">.</span><span class="ident" id="5581466">cb</span>&nbsp;<span class="op" id="5581469">=</span>&nbsp;<span class="ident" id="5581471"><a href="/image/png/reader.go.html#5578473">cbG4</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581478">case</span>&nbsp;<span class="ident" id="5581483"><a href="/image/png/reader.go.html#5578312">ctPaletted</a></span><span class="op" id="5581493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581498"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581499">.</span><span class="ident" id="5581500">cb</span>&nbsp;<span class="op" id="5581503">=</span>&nbsp;<span class="ident" id="5581505"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581515">case</span>&nbsp;<span class="num" id="5581520">8</span><span class="op" id="5581521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581525">switch</span>&nbsp;<span class="ident" id="5581532"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581533">.</span><span class="ident" id="5581534">tmp</span><span class="op" id="5581537">[</span><span class="num" id="5581538">9</span><span class="op" id="5581539">]</span>&nbsp;<span class="op" id="5581541">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581545">case</span>&nbsp;<span class="ident" id="5581550"><a href="/image/png/reader.go.html#5578268">ctGrayscale</a></span><span class="op" id="5581561">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581566"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581567">.</span><span class="ident" id="5581568">cb</span>&nbsp;<span class="op" id="5581571">=</span>&nbsp;<span class="ident" id="5581573"><a href="/image/png/reader.go.html#5578479">cbG8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581580">case</span>&nbsp;<span class="ident" id="5581585"><a href="/image/png/reader.go.html#5578290">ctTrueColor</a></span><span class="op" id="5581596">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581601"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581602">.</span><span class="ident" id="5581603">cb</span>&nbsp;<span class="op" id="5581606">=</span>&nbsp;<span class="ident" id="5581608"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581616">case</span>&nbsp;<span class="ident" id="5581621"><a href="/image/png/reader.go.html#5578312">ctPaletted</a></span><span class="op" id="5581631">:</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581636"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581637">.</span><span class="ident" id="5581638">cb</span>&nbsp;<span class="op" id="5581641">=</span>&nbsp;<span class="ident" id="5581643"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581650">case</span>&nbsp;<span class="ident" id="5581655"><a href="/image/png/reader.go.html#5578334">ctGrayscaleAlpha</a></span><span class="op" id="5581671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581676"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581677">.</span><span class="ident" id="5581678">cb</span>&nbsp;<span class="op" id="5581681">=</span>&nbsp;<span class="ident" id="5581683"><a href="/image/png/reader.go.html#5578485">cbGA8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581691">case</span>&nbsp;<span class="ident" id="5581696"><a href="/image/png/reader.go.html#5578356">ctTrueColorAlpha</a></span><span class="op" id="5581712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581717"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581718">.</span><span class="ident" id="5581719">cb</span>&nbsp;<span class="op" id="5581722">=</span>&nbsp;<span class="ident" id="5581724"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581736">case</span>&nbsp;<span class="num" id="5581741">16</span><span class="op" id="5581743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581747">switch</span>&nbsp;<span class="ident" id="5581754"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581755">.</span><span class="ident" id="5581756">tmp</span><span class="op" id="5581759">[</span><span class="num" id="5581760">9</span><span class="op" id="5581761">]</span>&nbsp;<span class="op" id="5581763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581767">case</span>&nbsp;<span class="ident" id="5581772"><a href="/image/png/reader.go.html#5578268">ctGrayscale</a></span><span class="op" id="5581783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581788"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581789">.</span><span class="ident" id="5581790">cb</span>&nbsp;<span class="op" id="5581793">=</span>&nbsp;<span class="ident" id="5581795"><a href="/image/png/reader.go.html#5578531">cbG16</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581803">case</span>&nbsp;<span class="ident" id="5581808"><a href="/image/png/reader.go.html#5578290">ctTrueColor</a></span><span class="op" id="5581819">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581824"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581825">.</span><span class="ident" id="5581826">cb</span>&nbsp;<span class="op" id="5581829">=</span>&nbsp;<span class="ident" id="5581831"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581840">case</span>&nbsp;<span class="ident" id="5581845"><a href="/image/png/reader.go.html#5578334">ctGrayscaleAlpha</a></span><span class="op" id="5581861">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581866"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581867">.</span><span class="ident" id="5581868">cb</span>&nbsp;<span class="op" id="5581871">=</span>&nbsp;<span class="ident" id="5581873"><a href="/image/png/reader.go.html#5578538">cbGA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581882">case</span>&nbsp;<span class="ident" id="5581887"><a href="/image/png/reader.go.html#5578356">ctTrueColorAlpha</a></span><span class="op" id="5581903">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5581908"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581909">.</span><span class="ident" id="5581910">cb</span>&nbsp;<span class="op" id="5581913">=</span>&nbsp;<span class="ident" id="5581915"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5581928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581931">if</span>&nbsp;<span class="ident" id="5581934"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5581935">.</span><span class="ident" id="5581936">cb</span>&nbsp;<span class="op" id="5581939">==</span>&nbsp;<span class="ident" id="5581942"><a href="/image/png/reader.go.html#5578443">cbInvalid</a></span>&nbsp;<span class="op" id="5581952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5581956">return</span>&nbsp;<span class="ident" id="5581963"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5581979">(</span><span class="ident" id="5581980"><a href="/image/png/reader.go.html#5578162">fmt</a></span><span class="op" id="5581983">.</span><span class="ident" id="5581984">Sprintf</span><span class="op" id="5581991">(</span><span class="string" id="5581992">&#34;bit&nbsp;depth&nbsp;%d,&nbsp;color&nbsp;type&nbsp;%d&#34;</span><span class="op" id="5582021">,</span>&nbsp;<span class="ident" id="5582023"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5582024">.</span><span class="ident" id="5582025">tmp</span><span class="op" id="5582028">[</span><span class="num" id="5582029">8</span><span class="op" id="5582030">]</span><span class="op" id="5582031">,</span>&nbsp;<span class="ident" id="5582033"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5582034">.</span><span class="ident" id="5582035">tmp</span><span class="op" id="5582038">[</span><span class="num" id="5582039">9</span><span class="op" id="5582040">]</span><span class="op" id="5582041">)</span><span class="op" id="5582042">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5582045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582048"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5582049">.</span><span class="ident" id="5582050">width</span><span class="op" id="5582055">,</span>&nbsp;<span class="ident" id="5582057"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5582058">.</span><span class="ident" id="5582059">height</span>&nbsp;<span class="op" id="5582066">=</span>&nbsp;<span class="builtintype" id="5582068">int</span><span class="op" id="5582071">(</span><span class="ident" id="5582072"><a href="/image/png/reader.go.html#5580863">w</a></span><span class="op" id="5582073">)</span><span class="op" id="5582074">,</span>&nbsp;<span class="builtintype" id="5582076">int</span><span class="op" id="5582079">(</span><span class="ident" id="5582080"><a href="/image/png/reader.go.html#5580912">h</a></span><span class="op" id="5582081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582084">return</span>&nbsp;<span class="ident" id="5582091"><a href="/image/png/reader.go.html#5580386">d</a></span><span class="op" id="5582092">.</span><span class="ident" id="5582093">verifyChecksum</span><span class="op" id="5582107">(</span><span class="op" id="5582108">)</span><br>
<span class="lineno"></span><span class="op" id="5582110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="5582113">func</span>&nbsp;<span class="op" id="5582118">(</span><span class="ident" id="5582119">d</span>&nbsp;<span class="op" id="5582121">*</span><span class="ident" id="5582122"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5582129">)</span>&nbsp;<span class="ident" id="5582131">parsePLTE</span><span class="op" id="5582140">(</span><span class="ident" id="5582141">length</span>&nbsp;<span class="builtintype" id="5582148">uint32</span><span class="op" id="5582154">)</span>&nbsp;<span class="builtintype" id="5582156">error</span>&nbsp;<span class="op" id="5582162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582165">np</span>&nbsp;<span class="op" id="5582168">:=</span>&nbsp;<span class="builtintype" id="5582171">int</span><span class="op" id="5582174">(</span><span class="ident" id="5582175"><a href="/image/png/reader.go.html#5582141">length</a></span>&nbsp;<span class="op" id="5582182">/</span>&nbsp;<span class="num" id="5582184">3</span><span class="op" id="5582185">)</span>&nbsp;<span class="comment" id="5582187">//&nbsp;The&nbsp;number&nbsp;of&nbsp;palette&nbsp;entries.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582222">if</span>&nbsp;<span class="ident" id="5582225"><a href="/image/png/reader.go.html#5582141">length</a></span><span class="op" id="5582231">%</span><span class="num" id="5582232">3</span>&nbsp;<span class="op" id="5582234">!=</span>&nbsp;<span class="num" id="5582237">0</span>&nbsp;<span class="op" id="5582239">||</span>&nbsp;<span class="ident" id="5582242"><a href="/image/png/reader.go.html#5582165">np</a></span>&nbsp;<span class="op" id="5582245">&lt;=</span>&nbsp;<span class="num" id="5582248">0</span>&nbsp;<span class="op" id="5582250">||</span>&nbsp;<span class="ident" id="5582253"><a href="/image/png/reader.go.html#5582165">np</a></span>&nbsp;<span class="op" id="5582256">&gt;</span>&nbsp;<span class="num" id="5582258">256</span>&nbsp;<span class="op" id="5582262">||</span>&nbsp;<span class="ident" id="5582265"><a href="/image/png/reader.go.html#5582165">np</a></span>&nbsp;<span class="op" id="5582268">&gt;</span>&nbsp;<span class="num" id="5582270">1</span><span class="op" id="5582271">&lt;&lt;</span><span class="builtintype" id="5582273">uint</span><span class="op" id="5582277">(</span><span class="ident" id="5582278"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582279">.</span><span class="ident" id="5582280">depth</span><span class="op" id="5582285">)</span>&nbsp;<span class="op" id="5582287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582291">return</span>&nbsp;<span class="ident" id="5582298"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5582309">(</span><span class="string" id="5582310">&#34;bad&nbsp;PLTE&nbsp;length&#34;</span><span class="op" id="5582327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5582330">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582333">n</span><span class="op" id="5582334">,</span>&nbsp;<span class="ident" id="5582336">err</span>&nbsp;<span class="op" id="5582340">:=</span>&nbsp;<span class="ident" id="5582343"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5582345">.</span><span class="ident" id="5582346">ReadFull</span><span class="op" id="5582354">(</span><span class="ident" id="5582355"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582356">.</span><span class="ident" id="5582357">r</span><span class="op" id="5582358">,</span>&nbsp;<span class="ident" id="5582360"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582361">.</span><span class="ident" id="5582362">tmp</span><span class="op" id="5582365">[</span><span class="op" id="5582366">:</span><span class="num" id="5582367">3</span><span class="op" id="5582368">*</span><span class="ident" id="5582369"><a href="/image/png/reader.go.html#5582165">np</a></span><span class="op" id="5582371">]</span><span class="op" id="5582372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582375">if</span>&nbsp;<span class="ident" id="5582378"><a href="/image/png/reader.go.html#5582336">err</a></span>&nbsp;<span class="op" id="5582382">!=</span>&nbsp;<span class="ident" id="5582385">nil</span>&nbsp;<span class="op" id="5582389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582393">return</span>&nbsp;<span class="ident" id="5582400"><a href="/image/png/reader.go.html#5582336">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5582405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582408"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582409">.</span><span class="ident" id="5582410">crc</span><span class="op" id="5582413">.</span><span class="ident" id="5582414">Write</span><span class="op" id="5582419">(</span><span class="ident" id="5582420"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582421">.</span><span class="ident" id="5582422">tmp</span><span class="op" id="5582425">[</span><span class="op" id="5582426">:</span><span class="ident" id="5582427"><a href="/image/png/reader.go.html#5582333">n</a></span><span class="op" id="5582428">]</span><span class="op" id="5582429">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582432">switch</span>&nbsp;<span class="ident" id="5582439"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582440">.</span><span class="ident" id="5582441">cb</span>&nbsp;<span class="op" id="5582444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582447">case</span>&nbsp;<span class="ident" id="5582452"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><span class="op" id="5582456">,</span>&nbsp;<span class="ident" id="5582458"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><span class="op" id="5582462">,</span>&nbsp;<span class="ident" id="5582464"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><span class="op" id="5582468">,</span>&nbsp;<span class="ident" id="5582470"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><span class="op" id="5582474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582478"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582479">.</span><span class="ident" id="5582480">palette</span>&nbsp;<span class="op" id="5582488">=</span>&nbsp;<span class="builtinfunc" id="5582490">make</span><span class="op" id="5582494">(</span><span class="ident" id="5582495"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5582500">.</span><span class="ident" id="5582501">Palette</span><span class="op" id="5582508">,</span>&nbsp;<span class="num" id="5582510">256</span><span class="op" id="5582513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582517">for</span>&nbsp;<span class="ident" id="5582521">i</span>&nbsp;<span class="op" id="5582523">:=</span>&nbsp;<span class="num" id="5582526">0</span><span class="op" id="5582527">;</span>&nbsp;<span class="ident" id="5582529"><a href="/image/png/reader.go.html#5582521">i</a></span>&nbsp;<span class="op" id="5582531">&lt;</span>&nbsp;<span class="ident" id="5582533"><a href="/image/png/reader.go.html#5582165">np</a></span><span class="op" id="5582535">;</span>&nbsp;<span class="ident" id="5582537"><a href="/image/png/reader.go.html#5582521">i</a></span><span class="op" id="5582538">++</span>&nbsp;<span class="op" id="5582541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582546"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582547">.</span><span class="ident" id="5582548">palette</span><span class="op" id="5582555">[</span><span class="ident" id="5582556"><a href="/image/png/reader.go.html#5582521">i</a></span><span class="op" id="5582557">]</span>&nbsp;<span class="op" id="5582559">=</span>&nbsp;<span class="ident" id="5582561"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5582566">.</span><span class="ident" id="5582567">RGBA</span><span class="op" id="5582571">{</span><span class="ident" id="5582572"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582573">.</span><span class="ident" id="5582574">tmp</span><span class="op" id="5582577">[</span><span class="num" id="5582578">3</span><span class="op" id="5582579">*</span><span class="ident" id="5582580"><a href="/image/png/reader.go.html#5582521">i</a></span><span class="op" id="5582581">+</span><span class="num" id="5582582">0</span><span class="op" id="5582583">]</span><span class="op" id="5582584">,</span>&nbsp;<span class="ident" id="5582586"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582587">.</span><span class="ident" id="5582588">tmp</span><span class="op" id="5582591">[</span><span class="num" id="5582592">3</span><span class="op" id="5582593">*</span><span class="ident" id="5582594"><a href="/image/png/reader.go.html#5582521">i</a></span><span class="op" id="5582595">+</span><span class="num" id="5582596">1</span><span class="op" id="5582597">]</span><span class="op" id="5582598">,</span>&nbsp;<span class="ident" id="5582600"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582601">.</span><span class="ident" id="5582602">tmp</span><span class="op" id="5582605">[</span><span class="num" id="5582606">3</span><span class="op" id="5582607">*</span><span class="ident" id="5582608"><a href="/image/png/reader.go.html#5582521">i</a></span><span class="op" id="5582609">+</span><span class="num" id="5582610">2</span><span class="op" id="5582611">]</span><span class="op" id="5582612">,</span>&nbsp;<span class="num" id="5582614">0xff</span><span class="op" id="5582618">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5582622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5582626">for</span>&nbsp;<span class="ident" id="5582630">i</span>&nbsp;<span class="op" id="5582632">:=</span>&nbsp;<span class="ident" id="5582635"><a href="/image/png/reader.go.html#5582165">np</a></span><span class="op" id="5582637">;</span>&nbsp;<span class="ident" id="5582639"><a href="/image/png/reader.go.html#5582630">i</a></span>&nbsp;<span class="op" id="5582641">&lt;</span>&nbsp;<span class="num" id="5582643">256</span><span class="op" id="5582646">;</span>&nbsp;<span class="ident" id="5582648"><a href="/image/png/reader.go.html#5582630">i</a></span><span class="op" id="5582649">++</span>&nbsp;<span class="op" id="5582652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5582657">//&nbsp;Initialize&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;palette&nbsp;to&nbsp;opaque&nbsp;black.&nbsp;The&nbsp;spec&nbsp;(section</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5582733">//&nbsp;11.2.3)&nbsp;says&nbsp;that&nbsp;&#34;any&nbsp;out-of-range&nbsp;pixel&nbsp;value&nbsp;found&nbsp;in&nbsp;the&nbsp;image&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5582811">//&nbsp;is&nbsp;an&nbsp;error&#34;,&nbsp;but&nbsp;some&nbsp;real-world&nbsp;PNG&nbsp;files&nbsp;have&nbsp;out-of-range&nbsp;pixel</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5582885">//&nbsp;values.&nbsp;We&nbsp;fall&nbsp;back&nbsp;to&nbsp;opaque&nbsp;black,&nbsp;the&nbsp;same&nbsp;as&nbsp;libpng&nbsp;1.5.13;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5582956">//&nbsp;ImageMagick&nbsp;6.5.7&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5582998"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5582999">.</span><span class="ident" id="5583000">palette</span><span class="op" id="5583007">[</span><span class="ident" id="5583008"><a href="/image/png/reader.go.html#5582630">i</a></span><span class="op" id="5583009">]</span>&nbsp;<span class="op" id="5583011">=</span>&nbsp;<span class="ident" id="5583013"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5583018">.</span><span class="ident" id="5583019">RGBA</span><span class="op" id="5583023">{</span><span class="num" id="5583024">0x00</span><span class="op" id="5583028">,</span>&nbsp;<span class="num" id="5583030">0x00</span><span class="op" id="5583034">,</span>&nbsp;<span class="num" id="5583036">0x00</span><span class="op" id="5583040">,</span>&nbsp;<span class="num" id="5583042">0xff</span><span class="op" id="5583046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583054"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5583055">.</span><span class="ident" id="5583056">palette</span>&nbsp;<span class="op" id="5583064">=</span>&nbsp;<span class="ident" id="5583066"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5583067">.</span><span class="ident" id="5583068">palette</span><span class="op" id="5583075">[</span><span class="op" id="5583076">:</span><span class="ident" id="5583077"><a href="/image/png/reader.go.html#5582165">np</a></span><span class="op" id="5583079">]</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583082">case</span>&nbsp;<span class="ident" id="5583087"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><span class="op" id="5583092">,</span>&nbsp;<span class="ident" id="5583094"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><span class="op" id="5583100">,</span>&nbsp;<span class="ident" id="5583102"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><span class="op" id="5583108">,</span>&nbsp;<span class="ident" id="5583110"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><span class="op" id="5583117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5583121">//&nbsp;As&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;a&nbsp;PLTE&nbsp;chunk&nbsp;is&nbsp;optional&nbsp;(and&nbsp;for&nbsp;practical&nbsp;purposes,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5583201">//&nbsp;ignorable)&nbsp;for&nbsp;the&nbsp;ctTrueColor&nbsp;and&nbsp;ctTrueColorAlpha&nbsp;color&nbsp;types&nbsp;(section&nbsp;4.1.2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583286">default</span><span class="op" id="5583293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583297">return</span>&nbsp;<span class="ident" id="5583304"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5583315">(</span><span class="string" id="5583316">&#34;PLTE,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="5583343">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583349">return</span>&nbsp;<span class="ident" id="5583356"><a href="/image/png/reader.go.html#5582119">d</a></span><span class="op" id="5583357">.</span><span class="ident" id="5583358">verifyChecksum</span><span class="op" id="5583372">(</span><span class="op" id="5583373">)</span><br>
<span class="lineno"></span><span class="op" id="5583375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5583378">func</span>&nbsp;<span class="op" id="5583383">(</span><span class="ident" id="5583384">d</span>&nbsp;<span class="op" id="5583386">*</span><span class="ident" id="5583387"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5583394">)</span>&nbsp;<span class="ident" id="5583396">parsetRNS</span><span class="op" id="5583405">(</span><span class="ident" id="5583406">length</span>&nbsp;<span class="builtintype" id="5583413">uint32</span><span class="op" id="5583419">)</span>&nbsp;<span class="builtintype" id="5583421">error</span>&nbsp;<span class="op" id="5583427">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583430">if</span>&nbsp;<span class="ident" id="5583433"><a href="/image/png/reader.go.html#5583406">length</a></span>&nbsp;<span class="op" id="5583440">&gt;</span>&nbsp;<span class="num" id="5583442">256</span>&nbsp;<span class="op" id="5583446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583450">return</span>&nbsp;<span class="ident" id="5583457"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5583468">(</span><span class="string" id="5583469">&#34;bad&nbsp;tRNS&nbsp;length&#34;</span><span class="op" id="5583486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583492">n</span><span class="op" id="5583493">,</span>&nbsp;<span class="ident" id="5583495">err</span>&nbsp;<span class="op" id="5583499">:=</span>&nbsp;<span class="ident" id="5583502"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5583504">.</span><span class="ident" id="5583505">ReadFull</span><span class="op" id="5583513">(</span><span class="ident" id="5583514"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583515">.</span><span class="ident" id="5583516">r</span><span class="op" id="5583517">,</span>&nbsp;<span class="ident" id="5583519"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583520">.</span><span class="ident" id="5583521">tmp</span><span class="op" id="5583524">[</span><span class="op" id="5583525">:</span><span class="ident" id="5583526"><a href="/image/png/reader.go.html#5583406">length</a></span><span class="op" id="5583532">]</span><span class="op" id="5583533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583536">if</span>&nbsp;<span class="ident" id="5583539"><a href="/image/png/reader.go.html#5583495">err</a></span>&nbsp;<span class="op" id="5583543">!=</span>&nbsp;<span class="ident" id="5583546">nil</span>&nbsp;<span class="op" id="5583550">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583554">return</span>&nbsp;<span class="ident" id="5583561"><a href="/image/png/reader.go.html#5583495">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583569"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583570">.</span><span class="ident" id="5583571">crc</span><span class="op" id="5583574">.</span><span class="ident" id="5583575">Write</span><span class="op" id="5583580">(</span><span class="ident" id="5583581"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583582">.</span><span class="ident" id="5583583">tmp</span><span class="op" id="5583586">[</span><span class="op" id="5583587">:</span><span class="ident" id="5583588"><a href="/image/png/reader.go.html#5583492">n</a></span><span class="op" id="5583589">]</span><span class="op" id="5583590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583593">switch</span>&nbsp;<span class="ident" id="5583600"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583601">.</span><span class="ident" id="5583602">cb</span>&nbsp;<span class="op" id="5583605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583608">case</span>&nbsp;<span class="ident" id="5583613"><a href="/image/png/reader.go.html#5578479">cbG8</a></span><span class="op" id="5583617">,</span>&nbsp;<span class="ident" id="5583619"><a href="/image/png/reader.go.html#5578531">cbG16</a></span><span class="op" id="5583624">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583628">return</span>&nbsp;<span class="ident" id="5583635"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5583651">(</span><span class="string" id="5583652">&#34;grayscale&nbsp;transparency&#34;</span><span class="op" id="5583676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583679">case</span>&nbsp;<span class="ident" id="5583684"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><span class="op" id="5583689">,</span>&nbsp;<span class="ident" id="5583691"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><span class="op" id="5583697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583701">return</span>&nbsp;<span class="ident" id="5583708"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5583724">(</span><span class="string" id="5583725">&#34;truecolor&nbsp;transparency&#34;</span><span class="op" id="5583749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583752">case</span>&nbsp;<span class="ident" id="5583757"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><span class="op" id="5583761">,</span>&nbsp;<span class="ident" id="5583763"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><span class="op" id="5583767">,</span>&nbsp;<span class="ident" id="5583769"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><span class="op" id="5583773">,</span>&nbsp;<span class="ident" id="5583775"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><span class="op" id="5583779">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583783">if</span>&nbsp;<span class="builtinfunc" id="5583786">len</span><span class="op" id="5583789">(</span><span class="ident" id="5583790"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583791">.</span><span class="ident" id="5583792">palette</span><span class="op" id="5583799">)</span>&nbsp;<span class="op" id="5583801">&lt;</span>&nbsp;<span class="ident" id="5583803"><a href="/image/png/reader.go.html#5583492">n</a></span>&nbsp;<span class="op" id="5583805">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583810"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583811">.</span><span class="ident" id="5583812">palette</span>&nbsp;<span class="op" id="5583820">=</span>&nbsp;<span class="ident" id="5583822"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583823">.</span><span class="ident" id="5583824">palette</span><span class="op" id="5583831">[</span><span class="op" id="5583832">:</span><span class="ident" id="5583833"><a href="/image/png/reader.go.html#5583492">n</a></span><span class="op" id="5583834">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583842">for</span>&nbsp;<span class="ident" id="5583846">i</span>&nbsp;<span class="op" id="5583848">:=</span>&nbsp;<span class="num" id="5583851">0</span><span class="op" id="5583852">;</span>&nbsp;<span class="ident" id="5583854"><a href="/image/png/reader.go.html#5583846">i</a></span>&nbsp;<span class="op" id="5583856">&lt;</span>&nbsp;<span class="ident" id="5583858"><a href="/image/png/reader.go.html#5583492">n</a></span><span class="op" id="5583859">;</span>&nbsp;<span class="ident" id="5583861"><a href="/image/png/reader.go.html#5583846">i</a></span><span class="op" id="5583862">++</span>&nbsp;<span class="op" id="5583865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583870">rgba</span>&nbsp;<span class="op" id="5583875">:=</span>&nbsp;<span class="ident" id="5583878"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583879">.</span><span class="ident" id="5583880">palette</span><span class="op" id="5583887">[</span><span class="ident" id="5583888"><a href="/image/png/reader.go.html#5583846">i</a></span><span class="op" id="5583889">]</span><span class="op" id="5583890">.</span><span class="op" id="5583891">(</span><span class="ident" id="5583892"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5583897">.</span><span class="ident" id="5583898">RGBA</span><span class="op" id="5583902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5583907"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583908">.</span><span class="ident" id="5583909">palette</span><span class="op" id="5583916">[</span><span class="ident" id="5583917"><a href="/image/png/reader.go.html#5583846">i</a></span><span class="op" id="5583918">]</span>&nbsp;<span class="op" id="5583920">=</span>&nbsp;<span class="ident" id="5583922"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5583927">.</span><span class="ident" id="5583928">NRGBA</span><span class="op" id="5583933">{</span><span class="ident" id="5583934"><a href="/image/png/reader.go.html#5583870">rgba</a></span><span class="op" id="5583938">.</span><span class="ident" id="5583939">R</span><span class="op" id="5583940">,</span>&nbsp;<span class="ident" id="5583942"><a href="/image/png/reader.go.html#5583870">rgba</a></span><span class="op" id="5583946">.</span><span class="ident" id="5583947">G</span><span class="op" id="5583948">,</span>&nbsp;<span class="ident" id="5583950"><a href="/image/png/reader.go.html#5583870">rgba</a></span><span class="op" id="5583954">.</span><span class="ident" id="5583955">B</span><span class="op" id="5583956">,</span>&nbsp;<span class="ident" id="5583958"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5583959">.</span><span class="ident" id="5583960">tmp</span><span class="op" id="5583963">[</span><span class="ident" id="5583964"><a href="/image/png/reader.go.html#5583846">i</a></span><span class="op" id="5583965">]</span><span class="op" id="5583966">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5583970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5583973">case</span>&nbsp;<span class="ident" id="5583978"><a href="/image/png/reader.go.html#5578485">cbGA8</a></span><span class="op" id="5583983">,</span>&nbsp;<span class="ident" id="5583985"><a href="/image/png/reader.go.html#5578538">cbGA16</a></span><span class="op" id="5583991">,</span>&nbsp;<span class="ident" id="5583993"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><span class="op" id="5583999">,</span>&nbsp;<span class="ident" id="5584001"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><span class="op" id="5584008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584012">return</span>&nbsp;<span class="ident" id="5584019"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5584030">(</span><span class="string" id="5584031">&#34;tRNS,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="5584058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5584061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584064">return</span>&nbsp;<span class="ident" id="5584071"><a href="/image/png/reader.go.html#5583384">d</a></span><span class="op" id="5584072">.</span><span class="ident" id="5584073">verifyChecksum</span><span class="op" id="5584087">(</span><span class="op" id="5584088">)</span><br>
<span class="lineno">275</span><span class="op" id="5584090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5584093">//&nbsp;Read&nbsp;presents&nbsp;one&nbsp;or&nbsp;more&nbsp;IDAT&nbsp;chunks&nbsp;as&nbsp;one&nbsp;continuous&nbsp;stream&nbsp;(minus&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5584170">//&nbsp;intermediate&nbsp;chunk&nbsp;headers&nbsp;and&nbsp;footers).&nbsp;If&nbsp;the&nbsp;PNG&nbsp;data&nbsp;looked&nbsp;like:</span><br>
<span class="lineno"></span><span class="comment" id="5584243">//&nbsp;&nbsp;&nbsp;...&nbsp;len0&nbsp;IDAT&nbsp;xxx&nbsp;crc0&nbsp;len1&nbsp;IDAT&nbsp;yy&nbsp;crc1&nbsp;len2&nbsp;IEND&nbsp;crc2</span><br>
<span class="lineno">280</span><span class="comment" id="5584304">//&nbsp;then&nbsp;this&nbsp;reader&nbsp;presents&nbsp;xxxyy.&nbsp;For&nbsp;well-formed&nbsp;PNG&nbsp;data,&nbsp;the&nbsp;decoder&nbsp;state</span><br>
<span class="lineno"></span><span class="comment" id="5584384">//&nbsp;immediately&nbsp;before&nbsp;the&nbsp;first&nbsp;Read&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5584464">//&nbsp;first&nbsp;IDAT&nbsp;and&nbsp;xxx,&nbsp;and&nbsp;the&nbsp;decoder&nbsp;state&nbsp;immediately&nbsp;after&nbsp;the&nbsp;last&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="5584541">//&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;yy&nbsp;and&nbsp;crc1.</span><br>
<span class="lineno"></span><span class="keyword" id="5584596">func</span>&nbsp;<span class="op" id="5584601">(</span><span class="ident" id="5584602">d</span>&nbsp;<span class="op" id="5584604">*</span><span class="ident" id="5584605"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5584612">)</span>&nbsp;<span class="ident" id="5584614">Read</span><span class="op" id="5584618">(</span><span class="ident" id="5584619">p</span>&nbsp;<span class="op" id="5584621">[</span><span class="op" id="5584622">]</span><span class="builtintype" id="5584623">byte</span><span class="op" id="5584627">)</span>&nbsp;<span class="op" id="5584629">(</span><span class="builtintype" id="5584630">int</span><span class="op" id="5584633">,</span>&nbsp;<span class="builtintype" id="5584635">error</span><span class="op" id="5584640">)</span>&nbsp;<span class="op" id="5584642">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584645">if</span>&nbsp;<span class="builtinfunc" id="5584648">len</span><span class="op" id="5584651">(</span><span class="ident" id="5584652"><a href="/image/png/reader.go.html#5584619">p</a></span><span class="op" id="5584653">)</span>&nbsp;<span class="op" id="5584655">==</span>&nbsp;<span class="num" id="5584658">0</span>&nbsp;<span class="op" id="5584660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584664">return</span>&nbsp;<span class="num" id="5584671">0</span><span class="op" id="5584672">,</span>&nbsp;<span class="ident" id="5584674">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5584679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584682">for</span>&nbsp;<span class="ident" id="5584686"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5584687">.</span><span class="ident" id="5584688">idatLength</span>&nbsp;<span class="op" id="5584699">==</span>&nbsp;<span class="num" id="5584702">0</span>&nbsp;<span class="op" id="5584704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5584708">//&nbsp;We&nbsp;have&nbsp;exhausted&nbsp;an&nbsp;IDAT&nbsp;chunk.&nbsp;Verify&nbsp;the&nbsp;checksum&nbsp;of&nbsp;that&nbsp;chunk.</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584781">if</span>&nbsp;<span class="ident" id="5584784">err</span>&nbsp;<span class="op" id="5584788">:=</span>&nbsp;<span class="ident" id="5584791"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5584792">.</span><span class="ident" id="5584793">verifyChecksum</span><span class="op" id="5584807">(</span><span class="op" id="5584808">)</span><span class="op" id="5584809">;</span>&nbsp;<span class="ident" id="5584811"><a href="/image/png/reader.go.html#5584784">err</a></span>&nbsp;<span class="op" id="5584815">!=</span>&nbsp;<span class="ident" id="5584818">nil</span>&nbsp;<span class="op" id="5584822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584827">return</span>&nbsp;<span class="num" id="5584834">0</span><span class="op" id="5584835">,</span>&nbsp;<span class="ident" id="5584837"><a href="/image/png/reader.go.html#5584784">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5584843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5584847">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type&nbsp;of&nbsp;the&nbsp;next&nbsp;chunk,&nbsp;and&nbsp;check&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5584917">//&nbsp;it&nbsp;is&nbsp;an&nbsp;IDAT&nbsp;chunk.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5584943">if</span>&nbsp;<span class="ident" id="5584946">_</span><span class="op" id="5584947">,</span>&nbsp;<span class="ident" id="5584949">err</span>&nbsp;<span class="op" id="5584953">:=</span>&nbsp;<span class="ident" id="5584956"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5584958">.</span><span class="ident" id="5584959">ReadFull</span><span class="op" id="5584967">(</span><span class="ident" id="5584968"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5584969">.</span><span class="ident" id="5584970">r</span><span class="op" id="5584971">,</span>&nbsp;<span class="ident" id="5584973"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5584974">.</span><span class="ident" id="5584975">tmp</span><span class="op" id="5584978">[</span><span class="op" id="5584979">:</span><span class="num" id="5584980">8</span><span class="op" id="5584981">]</span><span class="op" id="5584982">)</span><span class="op" id="5584983">;</span>&nbsp;<span class="ident" id="5584985"><a href="/image/png/reader.go.html#5584949">err</a></span>&nbsp;<span class="op" id="5584989">!=</span>&nbsp;<span class="ident" id="5584992">nil</span>&nbsp;<span class="op" id="5584996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585001">return</span>&nbsp;<span class="num" id="5585008">0</span><span class="op" id="5585009">,</span>&nbsp;<span class="ident" id="5585011"><a href="/image/png/reader.go.html#5584949">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585021"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585022">.</span><span class="ident" id="5585023">idatLength</span>&nbsp;<span class="op" id="5585034">=</span>&nbsp;<span class="ident" id="5585036"><a href="/image/png/reader.go.html#5578143">binary</a></span><span class="op" id="5585042">.</span><span class="ident" id="5585043">BigEndian</span><span class="op" id="5585052">.</span><span class="ident" id="5585053">Uint32</span><span class="op" id="5585059">(</span><span class="ident" id="5585060"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585061">.</span><span class="ident" id="5585062">tmp</span><span class="op" id="5585065">[</span><span class="op" id="5585066">:</span><span class="num" id="5585067">4</span><span class="op" id="5585068">]</span><span class="op" id="5585069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585073">if</span>&nbsp;<span class="builtintype" id="5585076">string</span><span class="op" id="5585082">(</span><span class="ident" id="5585083"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585084">.</span><span class="ident" id="5585085">tmp</span><span class="op" id="5585088">[</span><span class="num" id="5585089">4</span><span class="op" id="5585090">:</span><span class="num" id="5585091">8</span><span class="op" id="5585092">]</span><span class="op" id="5585093">)</span>&nbsp;<span class="op" id="5585095">!=</span>&nbsp;<span class="string" id="5585098">&#34;IDAT&#34;</span>&nbsp;<span class="op" id="5585105">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585110">return</span>&nbsp;<span class="num" id="5585117">0</span><span class="op" id="5585118">,</span>&nbsp;<span class="ident" id="5585120"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5585131">(</span><span class="string" id="5585132">&#34;not&nbsp;enough&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="5585155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585163"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585164">.</span><span class="ident" id="5585165">crc</span><span class="op" id="5585168">.</span><span class="ident" id="5585169">Reset</span><span class="op" id="5585174">(</span><span class="op" id="5585175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585179"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585180">.</span><span class="ident" id="5585181">crc</span><span class="op" id="5585184">.</span><span class="ident" id="5585185">Write</span><span class="op" id="5585190">(</span><span class="ident" id="5585191"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585192">.</span><span class="ident" id="5585193">tmp</span><span class="op" id="5585196">[</span><span class="num" id="5585197">4</span><span class="op" id="5585198">:</span><span class="num" id="5585199">8</span><span class="op" id="5585200">]</span><span class="op" id="5585201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585204">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585207">if</span>&nbsp;<span class="builtintype" id="5585210">int</span><span class="op" id="5585213">(</span><span class="ident" id="5585214"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585215">.</span><span class="ident" id="5585216">idatLength</span><span class="op" id="5585226">)</span>&nbsp;<span class="op" id="5585228">&lt;</span>&nbsp;<span class="num" id="5585230">0</span>&nbsp;<span class="op" id="5585232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585236">return</span>&nbsp;<span class="num" id="5585243">0</span><span class="op" id="5585244">,</span>&nbsp;<span class="ident" id="5585246"><a href="/image/png/reader.go.html#5580197">UnsupportedError</a></span><span class="op" id="5585262">(</span><span class="string" id="5585263">&#34;IDAT&nbsp;chunk&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5585291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585297">n</span><span class="op" id="5585298">,</span>&nbsp;<span class="ident" id="5585300">err</span>&nbsp;<span class="op" id="5585304">:=</span>&nbsp;<span class="ident" id="5585307"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585308">.</span><span class="ident" id="5585309">r</span><span class="op" id="5585310">.</span><span class="ident" id="5585311">Read</span><span class="op" id="5585315">(</span><span class="ident" id="5585316"><a href="/image/png/reader.go.html#5584619">p</a></span><span class="op" id="5585317">[</span><span class="op" id="5585318">:</span><span class="ident" id="5585319"><a href="/image/png/reader.go.html#5580321">min</a></span><span class="op" id="5585322">(</span><span class="builtinfunc" id="5585323">len</span><span class="op" id="5585326">(</span><span class="ident" id="5585327"><a href="/image/png/reader.go.html#5584619">p</a></span><span class="op" id="5585328">)</span><span class="op" id="5585329">,</span>&nbsp;<span class="builtintype" id="5585331">int</span><span class="op" id="5585334">(</span><span class="ident" id="5585335"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585336">.</span><span class="ident" id="5585337">idatLength</span><span class="op" id="5585347">)</span><span class="op" id="5585348">)</span><span class="op" id="5585349">]</span><span class="op" id="5585350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585353"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585354">.</span><span class="ident" id="5585355">crc</span><span class="op" id="5585358">.</span><span class="ident" id="5585359">Write</span><span class="op" id="5585364">(</span><span class="ident" id="5585365"><a href="/image/png/reader.go.html#5584619">p</a></span><span class="op" id="5585366">[</span><span class="op" id="5585367">:</span><span class="ident" id="5585368"><a href="/image/png/reader.go.html#5585297">n</a></span><span class="op" id="5585369">]</span><span class="op" id="5585370">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585373"><a href="/image/png/reader.go.html#5584602">d</a></span><span class="op" id="5585374">.</span><span class="ident" id="5585375">idatLength</span>&nbsp;<span class="op" id="5585386">-=</span>&nbsp;<span class="builtintype" id="5585389">uint32</span><span class="op" id="5585395">(</span><span class="ident" id="5585396"><a href="/image/png/reader.go.html#5585297">n</a></span><span class="op" id="5585397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585400">return</span>&nbsp;<span class="ident" id="5585407"><a href="/image/png/reader.go.html#5585297">n</a></span><span class="op" id="5585408">,</span>&nbsp;<span class="ident" id="5585410"><a href="/image/png/reader.go.html#5585300">err</a></span><br>
<span class="lineno"></span><span class="op" id="5585414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5585417">//&nbsp;decode&nbsp;decodes&nbsp;the&nbsp;IDAT&nbsp;data&nbsp;into&nbsp;an&nbsp;image.</span><br>
<span class="lineno">315</span><span class="keyword" id="5585464">func</span>&nbsp;<span class="op" id="5585469">(</span><span class="ident" id="5585470">d</span>&nbsp;<span class="op" id="5585472">*</span><span class="ident" id="5585473"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5585480">)</span>&nbsp;<span class="ident" id="5585482">decode</span><span class="op" id="5585488">(</span><span class="op" id="5585489">)</span>&nbsp;<span class="op" id="5585491">(</span><span class="ident" id="5585492"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5585497">.</span><span class="ident" id="5585498">Image</span><span class="op" id="5585503">,</span>&nbsp;<span class="builtintype" id="5585505">error</span><span class="op" id="5585510">)</span>&nbsp;<span class="op" id="5585512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585515">r</span><span class="op" id="5585516">,</span>&nbsp;<span class="ident" id="5585518">err</span>&nbsp;<span class="op" id="5585522">:=</span>&nbsp;<span class="ident" id="5585525"><a href="/image/png/reader.go.html#5578126">zlib</a></span><span class="op" id="5585529">.</span><span class="ident" id="5585530">NewReader</span><span class="op" id="5585539">(</span><span class="ident" id="5585540"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585544">if</span>&nbsp;<span class="ident" id="5585547"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5585551">!=</span>&nbsp;<span class="ident" id="5585554">nil</span>&nbsp;<span class="op" id="5585558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585562">return</span>&nbsp;<span class="ident" id="5585569">nil</span><span class="op" id="5585572">,</span>&nbsp;<span class="ident" id="5585574"><a href="/image/png/reader.go.html#5585518">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585579">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585582">defer</span>&nbsp;<span class="ident" id="5585588"><a href="/image/png/reader.go.html#5585515">r</a></span><span class="op" id="5585589">.</span><span class="ident" id="5585590">Close</span><span class="op" id="5585595">(</span><span class="op" id="5585596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585599">var</span>&nbsp;<span class="ident" id="5585603">img</span>&nbsp;<span class="ident" id="5585607"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5585612">.</span><span class="ident" id="5585613">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585620">if</span>&nbsp;<span class="ident" id="5585623"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585624">.</span><span class="ident" id="5585625">interlace</span>&nbsp;<span class="op" id="5585635">==</span>&nbsp;<span class="ident" id="5585638"><a href="/image/png/reader.go.html#5578731">itNone</a></span>&nbsp;<span class="op" id="5585645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585649"><a href="/image/png/reader.go.html#5585603">img</a></span><span class="op" id="5585652">,</span>&nbsp;<span class="ident" id="5585654"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5585658">=</span>&nbsp;<span class="ident" id="5585660"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585661">.</span><span class="ident" id="5585662">readImagePass</span><span class="op" id="5585675">(</span><span class="ident" id="5585676"><a href="/image/png/reader.go.html#5585515">r</a></span><span class="op" id="5585677">,</span>&nbsp;<span class="num" id="5585679">0</span><span class="op" id="5585680">,</span>&nbsp;<span class="ident" id="5585682">false</span><span class="op" id="5585687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585690">}</span>&nbsp;<span class="keyword" id="5585692">else</span>&nbsp;<span class="keyword" id="5585697">if</span>&nbsp;<span class="ident" id="5585700"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585701">.</span><span class="ident" id="5585702">interlace</span>&nbsp;<span class="op" id="5585712">==</span>&nbsp;<span class="ident" id="5585715"><a href="/image/png/reader.go.html#5578744">itAdam7</a></span>&nbsp;<span class="op" id="5585723">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5585727">//&nbsp;Allocate&nbsp;a&nbsp;blank&nbsp;image&nbsp;of&nbsp;the&nbsp;full&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585773"><a href="/image/png/reader.go.html#5585603">img</a></span><span class="op" id="5585776">,</span>&nbsp;<span class="ident" id="5585778"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5585782">=</span>&nbsp;<span class="ident" id="5585784"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585785">.</span><span class="ident" id="5585786">readImagePass</span><span class="op" id="5585799">(</span><span class="ident" id="5585800">nil</span><span class="op" id="5585803">,</span>&nbsp;<span class="num" id="5585805">0</span><span class="op" id="5585806">,</span>&nbsp;<span class="ident" id="5585808">true</span><span class="op" id="5585812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585816">for</span>&nbsp;<span class="ident" id="5585820">pass</span>&nbsp;<span class="op" id="5585825">:=</span>&nbsp;<span class="num" id="5585828">0</span><span class="op" id="5585829">;</span>&nbsp;<span class="ident" id="5585831"><a href="/image/png/reader.go.html#5585820">pass</a></span>&nbsp;<span class="op" id="5585836">&lt;</span>&nbsp;<span class="num" id="5585838">7</span><span class="op" id="5585839">;</span>&nbsp;<span class="ident" id="5585841"><a href="/image/png/reader.go.html#5585820">pass</a></span><span class="op" id="5585845">++</span>&nbsp;<span class="op" id="5585848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585853">imagePass</span><span class="op" id="5585862">,</span>&nbsp;<span class="ident" id="5585864">err</span>&nbsp;<span class="op" id="5585868">:=</span>&nbsp;<span class="ident" id="5585871"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585872">.</span><span class="ident" id="5585873">readImagePass</span><span class="op" id="5585886">(</span><span class="ident" id="5585887"><a href="/image/png/reader.go.html#5585515">r</a></span><span class="op" id="5585888">,</span>&nbsp;<span class="ident" id="5585890"><a href="/image/png/reader.go.html#5585820">pass</a></span><span class="op" id="5585894">,</span>&nbsp;<span class="ident" id="5585896">false</span><span class="op" id="5585901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585906">if</span>&nbsp;<span class="ident" id="5585909"><a href="/image/png/reader.go.html#5585864">err</a></span>&nbsp;<span class="op" id="5585913">!=</span>&nbsp;<span class="ident" id="5585916">nil</span>&nbsp;<span class="op" id="5585920">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5585926">return</span>&nbsp;<span class="ident" id="5585933">nil</span><span class="op" id="5585936">,</span>&nbsp;<span class="ident" id="5585938"><a href="/image/png/reader.go.html#5585864">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5585950"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5585951">.</span><span class="ident" id="5585952">mergePassInto</span><span class="op" id="5585965">(</span><span class="ident" id="5585966"><a href="/image/png/reader.go.html#5585603">img</a></span><span class="op" id="5585969">,</span>&nbsp;<span class="ident" id="5585971"><a href="/image/png/reader.go.html#5585853">imagePass</a></span><span class="op" id="5585980">,</span>&nbsp;<span class="ident" id="5585982"><a href="/image/png/reader.go.html#5585820">pass</a></span><span class="op" id="5585986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5585993">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5585997">//&nbsp;Check&nbsp;for&nbsp;EOF,&nbsp;to&nbsp;verify&nbsp;the&nbsp;zlib&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586045">n</span>&nbsp;<span class="op" id="5586047">:=</span>&nbsp;<span class="num" id="5586050">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586053">for</span>&nbsp;<span class="ident" id="5586057">i</span>&nbsp;<span class="op" id="5586059">:=</span>&nbsp;<span class="num" id="5586062">0</span><span class="op" id="5586063">;</span>&nbsp;<span class="ident" id="5586065"><a href="/image/png/reader.go.html#5586045">n</a></span>&nbsp;<span class="op" id="5586067">==</span>&nbsp;<span class="num" id="5586070">0</span>&nbsp;<span class="op" id="5586072">&amp;&amp;</span>&nbsp;<span class="ident" id="5586075"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5586079">==</span>&nbsp;<span class="ident" id="5586082">nil</span><span class="op" id="5586085">;</span>&nbsp;<span class="ident" id="5586087"><a href="/image/png/reader.go.html#5586057">i</a></span><span class="op" id="5586088">++</span>&nbsp;<span class="op" id="5586091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586095">if</span>&nbsp;<span class="ident" id="5586098"><a href="/image/png/reader.go.html#5586057">i</a></span>&nbsp;<span class="op" id="5586100">==</span>&nbsp;<span class="num" id="5586103">100</span>&nbsp;<span class="op" id="5586107">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586112">return</span>&nbsp;<span class="ident" id="5586119">nil</span><span class="op" id="5586122">,</span>&nbsp;<span class="ident" id="5586124"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5586126">.</span><span class="ident" id="5586127">ErrNoProgress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586147"><a href="/image/png/reader.go.html#5586045">n</a></span><span class="op" id="5586148">,</span>&nbsp;<span class="ident" id="5586150"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5586154">=</span>&nbsp;<span class="ident" id="5586156"><a href="/image/png/reader.go.html#5585515">r</a></span><span class="op" id="5586157">.</span><span class="ident" id="5586158">Read</span><span class="op" id="5586162">(</span><span class="ident" id="5586163"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5586164">.</span><span class="ident" id="5586165">tmp</span><span class="op" id="5586168">[</span><span class="op" id="5586169">:</span><span class="num" id="5586170">1</span><span class="op" id="5586171">]</span><span class="op" id="5586172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586178">if</span>&nbsp;<span class="ident" id="5586181"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5586185">!=</span>&nbsp;<span class="ident" id="5586188">nil</span>&nbsp;<span class="op" id="5586192">&amp;&amp;</span>&nbsp;<span class="ident" id="5586195"><a href="/image/png/reader.go.html#5585518">err</a></span>&nbsp;<span class="op" id="5586199">!=</span>&nbsp;<span class="ident" id="5586202"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5586204">.</span><span class="ident" id="5586205">EOF</span>&nbsp;<span class="op" id="5586209">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586213">return</span>&nbsp;<span class="ident" id="5586220">nil</span><span class="op" id="5586223">,</span>&nbsp;<span class="ident" id="5586225"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5586236">(</span><span class="ident" id="5586237"><a href="/image/png/reader.go.html#5585518">err</a></span><span class="op" id="5586240">.</span><span class="ident" id="5586241">Error</span><span class="op" id="5586246">(</span><span class="op" id="5586247">)</span><span class="op" id="5586248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586254">if</span>&nbsp;<span class="ident" id="5586257"><a href="/image/png/reader.go.html#5586045">n</a></span>&nbsp;<span class="op" id="5586259">!=</span>&nbsp;<span class="num" id="5586262">0</span>&nbsp;<span class="op" id="5586264">||</span>&nbsp;<span class="ident" id="5586267"><a href="/image/png/reader.go.html#5585470">d</a></span><span class="op" id="5586268">.</span><span class="ident" id="5586269">idatLength</span>&nbsp;<span class="op" id="5586280">!=</span>&nbsp;<span class="num" id="5586283">0</span>&nbsp;<span class="op" id="5586285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586289">return</span>&nbsp;<span class="ident" id="5586296">nil</span><span class="op" id="5586299">,</span>&nbsp;<span class="ident" id="5586301"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5586312">(</span><span class="string" id="5586313">&#34;too&nbsp;much&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="5586334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586337">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586341">return</span>&nbsp;<span class="ident" id="5586348"><a href="/image/png/reader.go.html#5585603">img</a></span><span class="op" id="5586351">,</span>&nbsp;<span class="ident" id="5586353">nil</span><br>
<span class="lineno"></span><span class="op" id="5586357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5586360">//&nbsp;readImagePass&nbsp;reads&nbsp;a&nbsp;single&nbsp;image&nbsp;pass,&nbsp;sized&nbsp;according&nbsp;to&nbsp;the&nbsp;pass&nbsp;number.</span><br>
<span class="lineno">355</span><span class="keyword" id="5586440">func</span>&nbsp;<span class="op" id="5586445">(</span><span class="ident" id="5586446">d</span>&nbsp;<span class="op" id="5586448">*</span><span class="ident" id="5586449"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5586456">)</span>&nbsp;<span class="ident" id="5586458">readImagePass</span><span class="op" id="5586471">(</span><span class="ident" id="5586472">r</span>&nbsp;<span class="ident" id="5586474"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5586476">.</span><span class="ident" id="5586477">Reader</span><span class="op" id="5586483">,</span>&nbsp;<span class="ident" id="5586485">pass</span>&nbsp;<span class="builtintype" id="5586490">int</span><span class="op" id="5586493">,</span>&nbsp;<span class="ident" id="5586495">allocateOnly</span>&nbsp;<span class="builtintype" id="5586508">bool</span><span class="op" id="5586512">)</span>&nbsp;<span class="op" id="5586514">(</span><span class="ident" id="5586515"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586520">.</span><span class="ident" id="5586521">Image</span><span class="op" id="5586526">,</span>&nbsp;<span class="builtintype" id="5586528">error</span><span class="op" id="5586533">)</span>&nbsp;<span class="op" id="5586535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586538">var</span>&nbsp;<span class="ident" id="5586542">bitsPerPixel</span>&nbsp;<span class="builtintype" id="5586555">int</span>&nbsp;<span class="op" id="5586559">=</span>&nbsp;<span class="num" id="5586561">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586564">pixOffset</span>&nbsp;<span class="op" id="5586574">:=</span>&nbsp;<span class="num" id="5586577">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586580">var</span>&nbsp;<span class="op" id="5586584">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586588">gray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5586597">*</span><span class="ident" id="5586598"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586603">.</span><span class="ident" id="5586604">Gray</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586611">rgba</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5586620">*</span><span class="ident" id="5586621"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586626">.</span><span class="ident" id="5586627">RGBA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586634">paletted</span>&nbsp;<span class="op" id="5586643">*</span><span class="ident" id="5586644"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586649">.</span><span class="ident" id="5586650">Paletted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586661">nrgba</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5586670">*</span><span class="ident" id="5586671"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586676">.</span><span class="ident" id="5586677">NRGBA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586685">gray16</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5586694">*</span><span class="ident" id="5586695"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586700">.</span><span class="ident" id="5586701">Gray16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586710">rgba64</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5586719">*</span><span class="ident" id="5586720"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586725">.</span><span class="ident" id="5586726">RGBA64</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586735">nrgba64</span>&nbsp;&nbsp;<span class="op" id="5586744">*</span><span class="ident" id="5586745"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586750">.</span><span class="ident" id="5586751">NRGBA64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586761">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5586770"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5586775">.</span><span class="ident" id="5586776">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5586783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586786">width</span><span class="op" id="5586791">,</span>&nbsp;<span class="ident" id="5586793">height</span>&nbsp;<span class="op" id="5586800">:=</span>&nbsp;<span class="ident" id="5586803"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5586804">.</span><span class="ident" id="5586805">width</span><span class="op" id="5586810">,</span>&nbsp;<span class="ident" id="5586812"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5586813">.</span><span class="ident" id="5586814">height</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5586822">if</span>&nbsp;<span class="ident" id="5586825"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5586826">.</span><span class="ident" id="5586827">interlace</span>&nbsp;<span class="op" id="5586837">==</span>&nbsp;<span class="ident" id="5586840"><a href="/image/png/reader.go.html#5578744">itAdam7</a></span>&nbsp;<span class="op" id="5586848">&amp;&amp;</span>&nbsp;<span class="op" id="5586851">!</span><span class="ident" id="5586852"><a href="/image/png/reader.go.html#5586495">allocateOnly</a></span>&nbsp;<span class="op" id="5586865">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586869">p</span>&nbsp;<span class="op" id="5586871">:=</span>&nbsp;<span class="ident" id="5586874"><a href="/image/png/reader.go.html#5579034">interlacing</a></span><span class="op" id="5586885">[</span><span class="ident" id="5586886"><a href="/image/png/reader.go.html#5586485">pass</a></span><span class="op" id="5586890">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5586894">//&nbsp;Add&nbsp;the&nbsp;multiplication&nbsp;factor&nbsp;and&nbsp;subtract&nbsp;one,&nbsp;effectively&nbsp;rounding&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5586972"><a href="/image/png/reader.go.html#5586786">width</a></span>&nbsp;<span class="op" id="5586978">=</span>&nbsp;<span class="op" id="5586980">(</span><span class="ident" id="5586981"><a href="/image/png/reader.go.html#5586786">width</a></span>&nbsp;<span class="op" id="5586987">-</span>&nbsp;<span class="ident" id="5586989"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5586990">.</span><span class="ident" id="5586991">xOffset</span>&nbsp;<span class="op" id="5586999">+</span>&nbsp;<span class="ident" id="5587001"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5587002">.</span><span class="ident" id="5587003">xFactor</span>&nbsp;<span class="op" id="5587011">-</span>&nbsp;<span class="num" id="5587013">1</span><span class="op" id="5587014">)</span>&nbsp;<span class="op" id="5587016">/</span>&nbsp;<span class="ident" id="5587018"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5587019">.</span><span class="ident" id="5587020">xFactor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587030"><a href="/image/png/reader.go.html#5586793">height</a></span>&nbsp;<span class="op" id="5587037">=</span>&nbsp;<span class="op" id="5587039">(</span><span class="ident" id="5587040"><a href="/image/png/reader.go.html#5586793">height</a></span>&nbsp;<span class="op" id="5587047">-</span>&nbsp;<span class="ident" id="5587049"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5587050">.</span><span class="ident" id="5587051">yOffset</span>&nbsp;<span class="op" id="5587059">+</span>&nbsp;<span class="ident" id="5587061"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5587062">.</span><span class="ident" id="5587063">yFactor</span>&nbsp;<span class="op" id="5587071">-</span>&nbsp;<span class="num" id="5587073">1</span><span class="op" id="5587074">)</span>&nbsp;<span class="op" id="5587076">/</span>&nbsp;<span class="ident" id="5587078"><a href="/image/png/reader.go.html#5586869">p</a></span><span class="op" id="5587079">.</span><span class="ident" id="5587080">yFactor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5587089">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587092">switch</span>&nbsp;<span class="ident" id="5587099"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5587100">.</span><span class="ident" id="5587101">cb</span>&nbsp;<span class="op" id="5587104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587107">case</span>&nbsp;<span class="ident" id="5587112"><a href="/image/png/reader.go.html#5578461">cbG1</a></span><span class="op" id="5587116">,</span>&nbsp;<span class="ident" id="5587118"><a href="/image/png/reader.go.html#5578467">cbG2</a></span><span class="op" id="5587122">,</span>&nbsp;<span class="ident" id="5587124"><a href="/image/png/reader.go.html#5578473">cbG4</a></span><span class="op" id="5587128">,</span>&nbsp;<span class="ident" id="5587130"><a href="/image/png/reader.go.html#5578479">cbG8</a></span><span class="op" id="5587134">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587138"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587151">=</span>&nbsp;<span class="ident" id="5587153"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5587154">.</span><span class="ident" id="5587155">depth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587163"><a href="/image/png/reader.go.html#5586588">gray</a></span>&nbsp;<span class="op" id="5587168">=</span>&nbsp;<span class="ident" id="5587170"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587175">.</span><span class="ident" id="5587176">NewGray</span><span class="op" id="5587183">(</span><span class="ident" id="5587184"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587189">.</span><span class="ident" id="5587190">Rect</span><span class="op" id="5587194">(</span><span class="num" id="5587195">0</span><span class="op" id="5587196">,</span>&nbsp;<span class="num" id="5587198">0</span><span class="op" id="5587199">,</span>&nbsp;<span class="ident" id="5587201"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587206">,</span>&nbsp;<span class="ident" id="5587208"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587214">)</span><span class="op" id="5587215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587219"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587223">=</span>&nbsp;<span class="ident" id="5587225"><a href="/image/png/reader.go.html#5586588">gray</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587231">case</span>&nbsp;<span class="ident" id="5587236"><a href="/image/png/reader.go.html#5578485">cbGA8</a></span><span class="op" id="5587241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587245"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587258">=</span>&nbsp;<span class="num" id="5587260">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587265"><a href="/image/png/reader.go.html#5586661">nrgba</a></span>&nbsp;<span class="op" id="5587271">=</span>&nbsp;<span class="ident" id="5587273"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587278">.</span><span class="ident" id="5587279">NewNRGBA</span><span class="op" id="5587287">(</span><span class="ident" id="5587288"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587293">.</span><span class="ident" id="5587294">Rect</span><span class="op" id="5587298">(</span><span class="num" id="5587299">0</span><span class="op" id="5587300">,</span>&nbsp;<span class="num" id="5587302">0</span><span class="op" id="5587303">,</span>&nbsp;<span class="ident" id="5587305"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587310">,</span>&nbsp;<span class="ident" id="5587312"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587318">)</span><span class="op" id="5587319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587323"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587327">=</span>&nbsp;<span class="ident" id="5587329"><a href="/image/png/reader.go.html#5586661">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587336">case</span>&nbsp;<span class="ident" id="5587341"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><span class="op" id="5587346">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587350"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587363">=</span>&nbsp;<span class="num" id="5587365">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587370"><a href="/image/png/reader.go.html#5586611">rgba</a></span>&nbsp;<span class="op" id="5587375">=</span>&nbsp;<span class="ident" id="5587377"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587382">.</span><span class="ident" id="5587383">NewRGBA</span><span class="op" id="5587390">(</span><span class="ident" id="5587391"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587396">.</span><span class="ident" id="5587397">Rect</span><span class="op" id="5587401">(</span><span class="num" id="5587402">0</span><span class="op" id="5587403">,</span>&nbsp;<span class="num" id="5587405">0</span><span class="op" id="5587406">,</span>&nbsp;<span class="ident" id="5587408"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587413">,</span>&nbsp;<span class="ident" id="5587415"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587421">)</span><span class="op" id="5587422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587426"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587430">=</span>&nbsp;<span class="ident" id="5587432"><a href="/image/png/reader.go.html#5586611">rgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587438">case</span>&nbsp;<span class="ident" id="5587443"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><span class="op" id="5587447">,</span>&nbsp;<span class="ident" id="5587449"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><span class="op" id="5587453">,</span>&nbsp;<span class="ident" id="5587455"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><span class="op" id="5587459">,</span>&nbsp;<span class="ident" id="5587461"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><span class="op" id="5587465">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587469"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587482">=</span>&nbsp;<span class="ident" id="5587484"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5587485">.</span><span class="ident" id="5587486">depth</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587494"><a href="/image/png/reader.go.html#5586634">paletted</a></span>&nbsp;<span class="op" id="5587503">=</span>&nbsp;<span class="ident" id="5587505"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587510">.</span><span class="ident" id="5587511">NewPaletted</span><span class="op" id="5587522">(</span><span class="ident" id="5587523"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587528">.</span><span class="ident" id="5587529">Rect</span><span class="op" id="5587533">(</span><span class="num" id="5587534">0</span><span class="op" id="5587535">,</span>&nbsp;<span class="num" id="5587537">0</span><span class="op" id="5587538">,</span>&nbsp;<span class="ident" id="5587540"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587545">,</span>&nbsp;<span class="ident" id="5587547"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587553">)</span><span class="op" id="5587554">,</span>&nbsp;<span class="ident" id="5587556"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5587557">.</span><span class="ident" id="5587558">palette</span><span class="op" id="5587565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587569"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587573">=</span>&nbsp;<span class="ident" id="5587575"><a href="/image/png/reader.go.html#5586634">paletted</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587585">case</span>&nbsp;<span class="ident" id="5587590"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><span class="op" id="5587596">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587600"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587613">=</span>&nbsp;<span class="num" id="5587615">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587620"><a href="/image/png/reader.go.html#5586661">nrgba</a></span>&nbsp;<span class="op" id="5587626">=</span>&nbsp;<span class="ident" id="5587628"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587633">.</span><span class="ident" id="5587634">NewNRGBA</span><span class="op" id="5587642">(</span><span class="ident" id="5587643"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587648">.</span><span class="ident" id="5587649">Rect</span><span class="op" id="5587653">(</span><span class="num" id="5587654">0</span><span class="op" id="5587655">,</span>&nbsp;<span class="num" id="5587657">0</span><span class="op" id="5587658">,</span>&nbsp;<span class="ident" id="5587660"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587665">,</span>&nbsp;<span class="ident" id="5587667"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587673">)</span><span class="op" id="5587674">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587678"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587682">=</span>&nbsp;<span class="ident" id="5587684"><a href="/image/png/reader.go.html#5586661">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587691">case</span>&nbsp;<span class="ident" id="5587696"><a href="/image/png/reader.go.html#5578531">cbG16</a></span><span class="op" id="5587701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587705"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587718">=</span>&nbsp;<span class="num" id="5587720">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587725"><a href="/image/png/reader.go.html#5586685">gray16</a></span>&nbsp;<span class="op" id="5587732">=</span>&nbsp;<span class="ident" id="5587734"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587739">.</span><span class="ident" id="5587740">NewGray16</span><span class="op" id="5587749">(</span><span class="ident" id="5587750"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587755">.</span><span class="ident" id="5587756">Rect</span><span class="op" id="5587760">(</span><span class="num" id="5587761">0</span><span class="op" id="5587762">,</span>&nbsp;<span class="num" id="5587764">0</span><span class="op" id="5587765">,</span>&nbsp;<span class="ident" id="5587767"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587772">,</span>&nbsp;<span class="ident" id="5587774"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587780">)</span><span class="op" id="5587781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587785"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587789">=</span>&nbsp;<span class="ident" id="5587791"><a href="/image/png/reader.go.html#5586685">gray16</a></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587799">case</span>&nbsp;<span class="ident" id="5587804"><a href="/image/png/reader.go.html#5578538">cbGA16</a></span><span class="op" id="5587810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587814"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587827">=</span>&nbsp;<span class="num" id="5587829">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587834"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span>&nbsp;<span class="op" id="5587842">=</span>&nbsp;<span class="ident" id="5587844"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587849">.</span><span class="ident" id="5587850">NewNRGBA64</span><span class="op" id="5587860">(</span><span class="ident" id="5587861"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587866">.</span><span class="ident" id="5587867">Rect</span><span class="op" id="5587871">(</span><span class="num" id="5587872">0</span><span class="op" id="5587873">,</span>&nbsp;<span class="num" id="5587875">0</span><span class="op" id="5587876">,</span>&nbsp;<span class="ident" id="5587878"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587883">,</span>&nbsp;<span class="ident" id="5587885"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5587891">)</span><span class="op" id="5587892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587896"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5587900">=</span>&nbsp;<span class="ident" id="5587902"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5587911">case</span>&nbsp;<span class="ident" id="5587916"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><span class="op" id="5587922">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587926"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5587939">=</span>&nbsp;<span class="num" id="5587941">48</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5587946"><a href="/image/png/reader.go.html#5586710">rgba64</a></span>&nbsp;<span class="op" id="5587953">=</span>&nbsp;<span class="ident" id="5587955"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587960">.</span><span class="ident" id="5587961">NewRGBA64</span><span class="op" id="5587970">(</span><span class="ident" id="5587971"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5587976">.</span><span class="ident" id="5587977">Rect</span><span class="op" id="5587981">(</span><span class="num" id="5587982">0</span><span class="op" id="5587983">,</span>&nbsp;<span class="num" id="5587985">0</span><span class="op" id="5587986">,</span>&nbsp;<span class="ident" id="5587988"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5587993">,</span>&nbsp;<span class="ident" id="5587995"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5588001">)</span><span class="op" id="5588002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588006"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5588010">=</span>&nbsp;<span class="ident" id="5588012"><a href="/image/png/reader.go.html#5586710">rgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588020">case</span>&nbsp;<span class="ident" id="5588025"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><span class="op" id="5588032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588036"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5588049">=</span>&nbsp;<span class="num" id="5588051">64</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588056"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span>&nbsp;<span class="op" id="5588064">=</span>&nbsp;<span class="ident" id="5588066"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5588071">.</span><span class="ident" id="5588072">NewNRGBA64</span><span class="op" id="5588082">(</span><span class="ident" id="5588083"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5588088">.</span><span class="ident" id="5588089">Rect</span><span class="op" id="5588093">(</span><span class="num" id="5588094">0</span><span class="op" id="5588095">,</span>&nbsp;<span class="num" id="5588097">0</span><span class="op" id="5588098">,</span>&nbsp;<span class="ident" id="5588100"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5588105">,</span>&nbsp;<span class="ident" id="5588107"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5588113">)</span><span class="op" id="5588114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588118"><a href="/image/png/reader.go.html#5586761">img</a></span>&nbsp;<span class="op" id="5588122">=</span>&nbsp;<span class="ident" id="5588124"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588136">if</span>&nbsp;<span class="ident" id="5588139"><a href="/image/png/reader.go.html#5586495">allocateOnly</a></span>&nbsp;<span class="op" id="5588152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588156">return</span>&nbsp;<span class="ident" id="5588163"><a href="/image/png/reader.go.html#5586761">img</a></span><span class="op" id="5588166">,</span>&nbsp;<span class="ident" id="5588168">nil</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588176">bytesPerPixel</span>&nbsp;<span class="op" id="5588190">:=</span>&nbsp;<span class="op" id="5588193">(</span><span class="ident" id="5588194"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span>&nbsp;<span class="op" id="5588207">+</span>&nbsp;<span class="num" id="5588209">7</span><span class="op" id="5588210">)</span>&nbsp;<span class="op" id="5588212">/</span>&nbsp;<span class="num" id="5588214">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5588218">//&nbsp;The&nbsp;+1&nbsp;is&nbsp;for&nbsp;the&nbsp;per-row&nbsp;filter&nbsp;type,&nbsp;which&nbsp;is&nbsp;at&nbsp;cr[0].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588280">rowSize</span>&nbsp;<span class="op" id="5588288">:=</span>&nbsp;<span class="num" id="5588291">1</span>&nbsp;<span class="op" id="5588293">+</span>&nbsp;<span class="op" id="5588295">(</span><span class="ident" id="5588296"><a href="/image/png/reader.go.html#5586542">bitsPerPixel</a></span><span class="op" id="5588308">*</span><span class="ident" id="5588309"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5588314">+</span><span class="num" id="5588315">7</span><span class="op" id="5588316">)</span><span class="op" id="5588317">/</span><span class="num" id="5588318">8</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5588321">//&nbsp;cr&nbsp;and&nbsp;pr&nbsp;are&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;current&nbsp;and&nbsp;previous&nbsp;row.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588383">cr</span>&nbsp;<span class="op" id="5588386">:=</span>&nbsp;<span class="builtinfunc" id="5588389">make</span><span class="op" id="5588393">(</span><span class="op" id="5588394">[</span><span class="op" id="5588395">]</span><span class="builtintype" id="5588396">uint8</span><span class="op" id="5588401">,</span>&nbsp;<span class="ident" id="5588403"><a href="/image/png/reader.go.html#5588280">rowSize</a></span><span class="op" id="5588410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588413">pr</span>&nbsp;<span class="op" id="5588416">:=</span>&nbsp;<span class="builtinfunc" id="5588419">make</span><span class="op" id="5588423">(</span><span class="op" id="5588424">[</span><span class="op" id="5588425">]</span><span class="builtintype" id="5588426">uint8</span><span class="op" id="5588431">,</span>&nbsp;<span class="ident" id="5588433"><a href="/image/png/reader.go.html#5588280">rowSize</a></span><span class="op" id="5588440">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588444">for</span>&nbsp;<span class="ident" id="5588448">y</span>&nbsp;<span class="op" id="5588450">:=</span>&nbsp;<span class="num" id="5588453">0</span><span class="op" id="5588454">;</span>&nbsp;<span class="ident" id="5588456"><a href="/image/png/reader.go.html#5588448">y</a></span>&nbsp;<span class="op" id="5588458">&lt;</span>&nbsp;<span class="ident" id="5588460"><a href="/image/png/reader.go.html#5586793">height</a></span><span class="op" id="5588466">;</span>&nbsp;<span class="ident" id="5588468"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5588469">++</span>&nbsp;<span class="op" id="5588472">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5588476">//&nbsp;Read&nbsp;the&nbsp;decompressed&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588510">_</span><span class="op" id="5588511">,</span>&nbsp;<span class="ident" id="5588513">err</span>&nbsp;<span class="op" id="5588517">:=</span>&nbsp;<span class="ident" id="5588520"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5588522">.</span><span class="ident" id="5588523">ReadFull</span><span class="op" id="5588531">(</span><span class="ident" id="5588532"><a href="/image/png/reader.go.html#5586472">r</a></span><span class="op" id="5588533">,</span>&nbsp;<span class="ident" id="5588535"><a href="/image/png/reader.go.html#5588383">cr</a></span><span class="op" id="5588537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588541">if</span>&nbsp;<span class="ident" id="5588544"><a href="/image/png/reader.go.html#5588513">err</a></span>&nbsp;<span class="op" id="5588548">!=</span>&nbsp;<span class="ident" id="5588551">nil</span>&nbsp;<span class="op" id="5588555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588560">return</span>&nbsp;<span class="ident" id="5588567">nil</span><span class="op" id="5588570">,</span>&nbsp;<span class="ident" id="5588572"><a href="/image/png/reader.go.html#5588513">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588578">}</span><br>
<span class="lineno">430</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5588583">//&nbsp;Apply&nbsp;the&nbsp;filter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588606">cdat</span>&nbsp;<span class="op" id="5588611">:=</span>&nbsp;<span class="ident" id="5588614"><a href="/image/png/reader.go.html#5588383">cr</a></span><span class="op" id="5588616">[</span><span class="num" id="5588617">1</span><span class="op" id="5588618">:</span><span class="op" id="5588619">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588623">pdat</span>&nbsp;<span class="op" id="5588628">:=</span>&nbsp;<span class="ident" id="5588631"><a href="/image/png/reader.go.html#5588413">pr</a></span><span class="op" id="5588633">[</span><span class="num" id="5588634">1</span><span class="op" id="5588635">:</span><span class="op" id="5588636">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588640">switch</span>&nbsp;<span class="ident" id="5588647"><a href="/image/png/reader.go.html#5588383">cr</a></span><span class="op" id="5588649">[</span><span class="num" id="5588650">0</span><span class="op" id="5588651">]</span>&nbsp;<span class="op" id="5588653">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588657">case</span>&nbsp;<span class="ident" id="5588662"><a href="/image/png/reader.go.html#5578611">ftNone</a></span><span class="op" id="5588668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5588673">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588685">case</span>&nbsp;<span class="ident" id="5588690"><a href="/image/png/reader.go.html#5578626">ftSub</a></span><span class="op" id="5588695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588700">for</span>&nbsp;<span class="ident" id="5588704">i</span>&nbsp;<span class="op" id="5588706">:=</span>&nbsp;<span class="ident" id="5588709"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5588722">;</span>&nbsp;<span class="ident" id="5588724"><a href="/image/png/reader.go.html#5588704">i</a></span>&nbsp;<span class="op" id="5588726">&lt;</span>&nbsp;<span class="builtinfunc" id="5588728">len</span><span class="op" id="5588731">(</span><span class="ident" id="5588732"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588736">)</span><span class="op" id="5588737">;</span>&nbsp;<span class="ident" id="5588739"><a href="/image/png/reader.go.html#5588704">i</a></span><span class="op" id="5588740">++</span>&nbsp;<span class="op" id="5588743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588749"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588753">[</span><span class="ident" id="5588754"><a href="/image/png/reader.go.html#5588704">i</a></span><span class="op" id="5588755">]</span>&nbsp;<span class="op" id="5588757">+=</span>&nbsp;<span class="ident" id="5588760"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588764">[</span><span class="ident" id="5588765"><a href="/image/png/reader.go.html#5588704">i</a></span><span class="op" id="5588766">-</span><span class="ident" id="5588767"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5588780">]</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588789">case</span>&nbsp;<span class="ident" id="5588794"><a href="/image/png/reader.go.html#5578641">ftUp</a></span><span class="op" id="5588798">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588803">for</span>&nbsp;<span class="ident" id="5588807">i</span><span class="op" id="5588808">,</span>&nbsp;<span class="ident" id="5588810">p</span>&nbsp;<span class="op" id="5588812">:=</span>&nbsp;<span class="keyword" id="5588815">range</span>&nbsp;<span class="ident" id="5588821"><a href="/image/png/reader.go.html#5588623">pdat</a></span>&nbsp;<span class="op" id="5588826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588832"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588836">[</span><span class="ident" id="5588837"><a href="/image/png/reader.go.html#5588807">i</a></span><span class="op" id="5588838">]</span>&nbsp;<span class="op" id="5588840">+=</span>&nbsp;<span class="ident" id="5588843"><a href="/image/png/reader.go.html#5588810">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588848">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588852">case</span>&nbsp;<span class="ident" id="5588857"><a href="/image/png/reader.go.html#5578656">ftAverage</a></span><span class="op" id="5588866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588871">for</span>&nbsp;<span class="ident" id="5588875">i</span>&nbsp;<span class="op" id="5588877">:=</span>&nbsp;<span class="num" id="5588880">0</span><span class="op" id="5588881">;</span>&nbsp;<span class="ident" id="5588883"><a href="/image/png/reader.go.html#5588875">i</a></span>&nbsp;<span class="op" id="5588885">&lt;</span>&nbsp;<span class="ident" id="5588887"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5588900">;</span>&nbsp;<span class="ident" id="5588902"><a href="/image/png/reader.go.html#5588875">i</a></span><span class="op" id="5588903">++</span>&nbsp;<span class="op" id="5588906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588912"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588916">[</span><span class="ident" id="5588917"><a href="/image/png/reader.go.html#5588875">i</a></span><span class="op" id="5588918">]</span>&nbsp;<span class="op" id="5588920">+=</span>&nbsp;<span class="ident" id="5588923"><a href="/image/png/reader.go.html#5588623">pdat</a></span><span class="op" id="5588927">[</span><span class="ident" id="5588928"><a href="/image/png/reader.go.html#5588875">i</a></span><span class="op" id="5588929">]</span>&nbsp;<span class="op" id="5588931">/</span>&nbsp;<span class="num" id="5588933">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5588938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5588943">for</span>&nbsp;<span class="ident" id="5588947">i</span>&nbsp;<span class="op" id="5588949">:=</span>&nbsp;<span class="ident" id="5588952"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5588965">;</span>&nbsp;<span class="ident" id="5588967"><a href="/image/png/reader.go.html#5588947">i</a></span>&nbsp;<span class="op" id="5588969">&lt;</span>&nbsp;<span class="builtinfunc" id="5588971">len</span><span class="op" id="5588974">(</span><span class="ident" id="5588975"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588979">)</span><span class="op" id="5588980">;</span>&nbsp;<span class="ident" id="5588982"><a href="/image/png/reader.go.html#5588947">i</a></span><span class="op" id="5588983">++</span>&nbsp;<span class="op" id="5588986">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5588992"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5588996">[</span><span class="ident" id="5588997"><a href="/image/png/reader.go.html#5588947">i</a></span><span class="op" id="5588998">]</span>&nbsp;<span class="op" id="5589000">+=</span>&nbsp;<span class="builtintype" id="5589003">uint8</span><span class="op" id="5589008">(</span><span class="op" id="5589009">(</span><span class="builtintype" id="5589010">int</span><span class="op" id="5589013">(</span><span class="ident" id="5589014"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589018">[</span><span class="ident" id="5589019"><a href="/image/png/reader.go.html#5588947">i</a></span><span class="op" id="5589020">-</span><span class="ident" id="5589021"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5589034">]</span><span class="op" id="5589035">)</span>&nbsp;<span class="op" id="5589037">+</span>&nbsp;<span class="builtintype" id="5589039">int</span><span class="op" id="5589042">(</span><span class="ident" id="5589043"><a href="/image/png/reader.go.html#5588623">pdat</a></span><span class="op" id="5589047">[</span><span class="ident" id="5589048"><a href="/image/png/reader.go.html#5588947">i</a></span><span class="op" id="5589049">]</span><span class="op" id="5589050">)</span><span class="op" id="5589051">)</span>&nbsp;<span class="op" id="5589053">/</span>&nbsp;<span class="num" id="5589055">2</span><span class="op" id="5589056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589065">case</span>&nbsp;<span class="ident" id="5589070"><a href="/image/png/reader.go.html#5578671">ftPaeth</a></span><span class="op" id="5589077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589082"><a href="/image/png/paeth.go.html#5577360">filterPaeth</a></span><span class="op" id="5589093">(</span><span class="ident" id="5589094"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589098">,</span>&nbsp;<span class="ident" id="5589100"><a href="/image/png/reader.go.html#5588623">pdat</a></span><span class="op" id="5589104">,</span>&nbsp;<span class="ident" id="5589106"><a href="/image/png/reader.go.html#5588176">bytesPerPixel</a></span><span class="op" id="5589119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589123">default</span><span class="op" id="5589130">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589135">return</span>&nbsp;<span class="ident" id="5589142">nil</span><span class="op" id="5589145">,</span>&nbsp;<span class="ident" id="5589147"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5589158">(</span><span class="string" id="5589159">&#34;bad&nbsp;filter&nbsp;type&#34;</span><span class="op" id="5589176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5589185">//&nbsp;Convert&nbsp;from&nbsp;bytes&nbsp;to&nbsp;colors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589220">switch</span>&nbsp;<span class="ident" id="5589227"><a href="/image/png/reader.go.html#5586446">d</a></span><span class="op" id="5589228">.</span><span class="ident" id="5589229">cb</span>&nbsp;<span class="op" id="5589232">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589236">case</span>&nbsp;<span class="ident" id="5589241"><a href="/image/png/reader.go.html#5578461">cbG1</a></span><span class="op" id="5589245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589250">for</span>&nbsp;<span class="ident" id="5589254">x</span>&nbsp;<span class="op" id="5589256">:=</span>&nbsp;<span class="num" id="5589259">0</span><span class="op" id="5589260">;</span>&nbsp;<span class="ident" id="5589262"><a href="/image/png/reader.go.html#5589254">x</a></span>&nbsp;<span class="op" id="5589264">&lt;</span>&nbsp;<span class="ident" id="5589266"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589271">;</span>&nbsp;<span class="ident" id="5589273"><a href="/image/png/reader.go.html#5589254">x</a></span>&nbsp;<span class="op" id="5589275">+=</span>&nbsp;<span class="num" id="5589278">8</span>&nbsp;<span class="op" id="5589280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589286">b</span>&nbsp;<span class="op" id="5589288">:=</span>&nbsp;<span class="ident" id="5589291"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589295">[</span><span class="ident" id="5589296"><a href="/image/png/reader.go.html#5589254">x</a></span><span class="op" id="5589297">/</span><span class="num" id="5589298">8</span><span class="op" id="5589299">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589305">for</span>&nbsp;<span class="ident" id="5589309">x2</span>&nbsp;<span class="op" id="5589312">:=</span>&nbsp;<span class="num" id="5589315">0</span><span class="op" id="5589316">;</span>&nbsp;<span class="ident" id="5589318"><a href="/image/png/reader.go.html#5589309">x2</a></span>&nbsp;<span class="op" id="5589321">&lt;</span>&nbsp;<span class="num" id="5589323">8</span>&nbsp;<span class="op" id="5589325">&amp;&amp;</span>&nbsp;<span class="ident" id="5589328"><a href="/image/png/reader.go.html#5589254">x</a></span><span class="op" id="5589329">+</span><span class="ident" id="5589330"><a href="/image/png/reader.go.html#5589309">x2</a></span>&nbsp;<span class="op" id="5589333">&lt;</span>&nbsp;<span class="ident" id="5589335"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589340">;</span>&nbsp;<span class="ident" id="5589342"><a href="/image/png/reader.go.html#5589309">x2</a></span><span class="op" id="5589344">++</span>&nbsp;<span class="op" id="5589347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589354"><a href="/image/png/reader.go.html#5586588">gray</a></span><span class="op" id="5589358">.</span><span class="ident" id="5589359">SetGray</span><span class="op" id="5589366">(</span><span class="ident" id="5589367"><a href="/image/png/reader.go.html#5589254">x</a></span><span class="op" id="5589368">+</span><span class="ident" id="5589369"><a href="/image/png/reader.go.html#5589309">x2</a></span><span class="op" id="5589371">,</span>&nbsp;<span class="ident" id="5589373"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5589374">,</span>&nbsp;<span class="ident" id="5589376"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5589381">.</span><span class="ident" id="5589382">Gray</span><span class="op" id="5589386">{</span><span class="op" id="5589387">(</span><span class="ident" id="5589388"><a href="/image/png/reader.go.html#5589286">b</a></span>&nbsp;<span class="op" id="5589390">&gt;&gt;</span>&nbsp;<span class="num" id="5589393">7</span><span class="op" id="5589394">)</span>&nbsp;<span class="op" id="5589396">*</span>&nbsp;<span class="num" id="5589398">0xff</span><span class="op" id="5589402">}</span><span class="op" id="5589403">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589410"><a href="/image/png/reader.go.html#5589286">b</a></span>&nbsp;<span class="op" id="5589412">&lt;&lt;=</span>&nbsp;<span class="num" id="5589416">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589431">case</span>&nbsp;<span class="ident" id="5589436"><a href="/image/png/reader.go.html#5578467">cbG2</a></span><span class="op" id="5589440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589445">for</span>&nbsp;<span class="ident" id="5589449">x</span>&nbsp;<span class="op" id="5589451">:=</span>&nbsp;<span class="num" id="5589454">0</span><span class="op" id="5589455">;</span>&nbsp;<span class="ident" id="5589457"><a href="/image/png/reader.go.html#5589449">x</a></span>&nbsp;<span class="op" id="5589459">&lt;</span>&nbsp;<span class="ident" id="5589461"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589466">;</span>&nbsp;<span class="ident" id="5589468"><a href="/image/png/reader.go.html#5589449">x</a></span>&nbsp;<span class="op" id="5589470">+=</span>&nbsp;<span class="num" id="5589473">4</span>&nbsp;<span class="op" id="5589475">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589481">b</span>&nbsp;<span class="op" id="5589483">:=</span>&nbsp;<span class="ident" id="5589486"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589490">[</span><span class="ident" id="5589491"><a href="/image/png/reader.go.html#5589449">x</a></span><span class="op" id="5589492">/</span><span class="num" id="5589493">4</span><span class="op" id="5589494">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589500">for</span>&nbsp;<span class="ident" id="5589504">x2</span>&nbsp;<span class="op" id="5589507">:=</span>&nbsp;<span class="num" id="5589510">0</span><span class="op" id="5589511">;</span>&nbsp;<span class="ident" id="5589513"><a href="/image/png/reader.go.html#5589504">x2</a></span>&nbsp;<span class="op" id="5589516">&lt;</span>&nbsp;<span class="num" id="5589518">4</span>&nbsp;<span class="op" id="5589520">&amp;&amp;</span>&nbsp;<span class="ident" id="5589523"><a href="/image/png/reader.go.html#5589449">x</a></span><span class="op" id="5589524">+</span><span class="ident" id="5589525"><a href="/image/png/reader.go.html#5589504">x2</a></span>&nbsp;<span class="op" id="5589528">&lt;</span>&nbsp;<span class="ident" id="5589530"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589535">;</span>&nbsp;<span class="ident" id="5589537"><a href="/image/png/reader.go.html#5589504">x2</a></span><span class="op" id="5589539">++</span>&nbsp;<span class="op" id="5589542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589549"><a href="/image/png/reader.go.html#5586588">gray</a></span><span class="op" id="5589553">.</span><span class="ident" id="5589554">SetGray</span><span class="op" id="5589561">(</span><span class="ident" id="5589562"><a href="/image/png/reader.go.html#5589449">x</a></span><span class="op" id="5589563">+</span><span class="ident" id="5589564"><a href="/image/png/reader.go.html#5589504">x2</a></span><span class="op" id="5589566">,</span>&nbsp;<span class="ident" id="5589568"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5589569">,</span>&nbsp;<span class="ident" id="5589571"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5589576">.</span><span class="ident" id="5589577">Gray</span><span class="op" id="5589581">{</span><span class="op" id="5589582">(</span><span class="ident" id="5589583"><a href="/image/png/reader.go.html#5589481">b</a></span>&nbsp;<span class="op" id="5589585">&gt;&gt;</span>&nbsp;<span class="num" id="5589588">6</span><span class="op" id="5589589">)</span>&nbsp;<span class="op" id="5589591">*</span>&nbsp;<span class="num" id="5589593">0x55</span><span class="op" id="5589597">}</span><span class="op" id="5589598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589605"><a href="/image/png/reader.go.html#5589481">b</a></span>&nbsp;<span class="op" id="5589607">&lt;&lt;=</span>&nbsp;<span class="num" id="5589611">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589617">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589626">case</span>&nbsp;<span class="ident" id="5589631"><a href="/image/png/reader.go.html#5578473">cbG4</a></span><span class="op" id="5589635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589640">for</span>&nbsp;<span class="ident" id="5589644">x</span>&nbsp;<span class="op" id="5589646">:=</span>&nbsp;<span class="num" id="5589649">0</span><span class="op" id="5589650">;</span>&nbsp;<span class="ident" id="5589652"><a href="/image/png/reader.go.html#5589644">x</a></span>&nbsp;<span class="op" id="5589654">&lt;</span>&nbsp;<span class="ident" id="5589656"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589661">;</span>&nbsp;<span class="ident" id="5589663"><a href="/image/png/reader.go.html#5589644">x</a></span>&nbsp;<span class="op" id="5589665">+=</span>&nbsp;<span class="num" id="5589668">2</span>&nbsp;<span class="op" id="5589670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589676">b</span>&nbsp;<span class="op" id="5589678">:=</span>&nbsp;<span class="ident" id="5589681"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589685">[</span><span class="ident" id="5589686"><a href="/image/png/reader.go.html#5589644">x</a></span><span class="op" id="5589687">/</span><span class="num" id="5589688">2</span><span class="op" id="5589689">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589695">for</span>&nbsp;<span class="ident" id="5589699">x2</span>&nbsp;<span class="op" id="5589702">:=</span>&nbsp;<span class="num" id="5589705">0</span><span class="op" id="5589706">;</span>&nbsp;<span class="ident" id="5589708"><a href="/image/png/reader.go.html#5589699">x2</a></span>&nbsp;<span class="op" id="5589711">&lt;</span>&nbsp;<span class="num" id="5589713">2</span>&nbsp;<span class="op" id="5589715">&amp;&amp;</span>&nbsp;<span class="ident" id="5589718"><a href="/image/png/reader.go.html#5589644">x</a></span><span class="op" id="5589719">+</span><span class="ident" id="5589720"><a href="/image/png/reader.go.html#5589699">x2</a></span>&nbsp;<span class="op" id="5589723">&lt;</span>&nbsp;<span class="ident" id="5589725"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589730">;</span>&nbsp;<span class="ident" id="5589732"><a href="/image/png/reader.go.html#5589699">x2</a></span><span class="op" id="5589734">++</span>&nbsp;<span class="op" id="5589737">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589744"><a href="/image/png/reader.go.html#5586588">gray</a></span><span class="op" id="5589748">.</span><span class="ident" id="5589749">SetGray</span><span class="op" id="5589756">(</span><span class="ident" id="5589757"><a href="/image/png/reader.go.html#5589644">x</a></span><span class="op" id="5589758">+</span><span class="ident" id="5589759"><a href="/image/png/reader.go.html#5589699">x2</a></span><span class="op" id="5589761">,</span>&nbsp;<span class="ident" id="5589763"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5589764">,</span>&nbsp;<span class="ident" id="5589766"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5589771">.</span><span class="ident" id="5589772">Gray</span><span class="op" id="5589776">{</span><span class="op" id="5589777">(</span><span class="ident" id="5589778"><a href="/image/png/reader.go.html#5589676">b</a></span>&nbsp;<span class="op" id="5589780">&gt;&gt;</span>&nbsp;<span class="num" id="5589783">4</span><span class="op" id="5589784">)</span>&nbsp;<span class="op" id="5589786">*</span>&nbsp;<span class="num" id="5589788">0x11</span><span class="op" id="5589792">}</span><span class="op" id="5589793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589800"><a href="/image/png/reader.go.html#5589676">b</a></span>&nbsp;<span class="op" id="5589802">&lt;&lt;=</span>&nbsp;<span class="num" id="5589806">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5589817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589821">case</span>&nbsp;<span class="ident" id="5589826"><a href="/image/png/reader.go.html#5578479">cbG8</a></span><span class="op" id="5589830">:</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5589835">copy</span><span class="op" id="5589839">(</span><span class="ident" id="5589840"><a href="/image/png/reader.go.html#5586588">gray</a></span><span class="op" id="5589844">.</span><span class="ident" id="5589845">Pix</span><span class="op" id="5589848">[</span><span class="ident" id="5589849"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span><span class="op" id="5589858">:</span><span class="op" id="5589859">]</span><span class="op" id="5589860">,</span>&nbsp;<span class="ident" id="5589862"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589871"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span>&nbsp;<span class="op" id="5589881">+=</span>&nbsp;<span class="ident" id="5589884"><a href="/image/png/reader.go.html#5586588">gray</a></span><span class="op" id="5589888">.</span><span class="ident" id="5589889">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589898">case</span>&nbsp;<span class="ident" id="5589903"><a href="/image/png/reader.go.html#5578485">cbGA8</a></span><span class="op" id="5589908">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5589913">for</span>&nbsp;<span class="ident" id="5589917">x</span>&nbsp;<span class="op" id="5589919">:=</span>&nbsp;<span class="num" id="5589922">0</span><span class="op" id="5589923">;</span>&nbsp;<span class="ident" id="5589925"><a href="/image/png/reader.go.html#5589917">x</a></span>&nbsp;<span class="op" id="5589927">&lt;</span>&nbsp;<span class="ident" id="5589929"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5589934">;</span>&nbsp;<span class="ident" id="5589936"><a href="/image/png/reader.go.html#5589917">x</a></span><span class="op" id="5589937">++</span>&nbsp;<span class="op" id="5589940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589946">ycol</span>&nbsp;<span class="op" id="5589951">:=</span>&nbsp;<span class="ident" id="5589954"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5589958">[</span><span class="num" id="5589959">2</span><span class="op" id="5589960">*</span><span class="ident" id="5589961"><a href="/image/png/reader.go.html#5589917">x</a></span><span class="op" id="5589962">+</span><span class="num" id="5589963">0</span><span class="op" id="5589964">]</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5589970"><a href="/image/png/reader.go.html#5586661">nrgba</a></span><span class="op" id="5589975">.</span><span class="ident" id="5589976">SetNRGBA</span><span class="op" id="5589984">(</span><span class="ident" id="5589985"><a href="/image/png/reader.go.html#5589917">x</a></span><span class="op" id="5589986">,</span>&nbsp;<span class="ident" id="5589988"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5589989">,</span>&nbsp;<span class="ident" id="5589991"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5589996">.</span><span class="ident" id="5589997">NRGBA</span><span class="op" id="5590002">{</span><span class="ident" id="5590003"><a href="/image/png/reader.go.html#5589946">ycol</a></span><span class="op" id="5590007">,</span>&nbsp;<span class="ident" id="5590009"><a href="/image/png/reader.go.html#5589946">ycol</a></span><span class="op" id="5590013">,</span>&nbsp;<span class="ident" id="5590015"><a href="/image/png/reader.go.html#5589946">ycol</a></span><span class="op" id="5590019">,</span>&nbsp;<span class="ident" id="5590021"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590025">[</span><span class="num" id="5590026">2</span><span class="op" id="5590027">*</span><span class="ident" id="5590028"><a href="/image/png/reader.go.html#5589917">x</a></span><span class="op" id="5590029">+</span><span class="num" id="5590030">1</span><span class="op" id="5590031">]</span><span class="op" id="5590032">}</span><span class="op" id="5590033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590042">case</span>&nbsp;<span class="ident" id="5590047"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><span class="op" id="5590052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590057">pix</span><span class="op" id="5590060">,</span>&nbsp;<span class="ident" id="5590062">i</span><span class="op" id="5590063">,</span>&nbsp;<span class="ident" id="5590065">j</span>&nbsp;<span class="op" id="5590067">:=</span>&nbsp;<span class="ident" id="5590070"><a href="/image/png/reader.go.html#5586611">rgba</a></span><span class="op" id="5590074">.</span><span class="ident" id="5590075">Pix</span><span class="op" id="5590078">,</span>&nbsp;<span class="ident" id="5590080"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span><span class="op" id="5590089">,</span>&nbsp;<span class="num" id="5590091">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590096">for</span>&nbsp;<span class="ident" id="5590100">x</span>&nbsp;<span class="op" id="5590102">:=</span>&nbsp;<span class="num" id="5590105">0</span><span class="op" id="5590106">;</span>&nbsp;<span class="ident" id="5590108"><a href="/image/png/reader.go.html#5590100">x</a></span>&nbsp;<span class="op" id="5590110">&lt;</span>&nbsp;<span class="ident" id="5590112"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590117">;</span>&nbsp;<span class="ident" id="5590119"><a href="/image/png/reader.go.html#5590100">x</a></span><span class="op" id="5590120">++</span>&nbsp;<span class="op" id="5590123">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590129"><a href="/image/png/reader.go.html#5590057">pix</a></span><span class="op" id="5590132">[</span><span class="ident" id="5590133"><a href="/image/png/reader.go.html#5590062">i</a></span><span class="op" id="5590134">+</span><span class="num" id="5590135">0</span><span class="op" id="5590136">]</span>&nbsp;<span class="op" id="5590138">=</span>&nbsp;<span class="ident" id="5590140"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590144">[</span><span class="ident" id="5590145"><a href="/image/png/reader.go.html#5590065">j</a></span><span class="op" id="5590146">+</span><span class="num" id="5590147">0</span><span class="op" id="5590148">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590154"><a href="/image/png/reader.go.html#5590057">pix</a></span><span class="op" id="5590157">[</span><span class="ident" id="5590158"><a href="/image/png/reader.go.html#5590062">i</a></span><span class="op" id="5590159">+</span><span class="num" id="5590160">1</span><span class="op" id="5590161">]</span>&nbsp;<span class="op" id="5590163">=</span>&nbsp;<span class="ident" id="5590165"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590169">[</span><span class="ident" id="5590170"><a href="/image/png/reader.go.html#5590065">j</a></span><span class="op" id="5590171">+</span><span class="num" id="5590172">1</span><span class="op" id="5590173">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590179"><a href="/image/png/reader.go.html#5590057">pix</a></span><span class="op" id="5590182">[</span><span class="ident" id="5590183"><a href="/image/png/reader.go.html#5590062">i</a></span><span class="op" id="5590184">+</span><span class="num" id="5590185">2</span><span class="op" id="5590186">]</span>&nbsp;<span class="op" id="5590188">=</span>&nbsp;<span class="ident" id="5590190"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590194">[</span><span class="ident" id="5590195"><a href="/image/png/reader.go.html#5590065">j</a></span><span class="op" id="5590196">+</span><span class="num" id="5590197">2</span><span class="op" id="5590198">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590204"><a href="/image/png/reader.go.html#5590057">pix</a></span><span class="op" id="5590207">[</span><span class="ident" id="5590208"><a href="/image/png/reader.go.html#5590062">i</a></span><span class="op" id="5590209">+</span><span class="num" id="5590210">3</span><span class="op" id="5590211">]</span>&nbsp;<span class="op" id="5590213">=</span>&nbsp;<span class="num" id="5590215">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590224"><a href="/image/png/reader.go.html#5590062">i</a></span>&nbsp;<span class="op" id="5590226">+=</span>&nbsp;<span class="num" id="5590229">4</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590235"><a href="/image/png/reader.go.html#5590065">j</a></span>&nbsp;<span class="op" id="5590237">+=</span>&nbsp;<span class="num" id="5590240">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590250"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span>&nbsp;<span class="op" id="5590260">+=</span>&nbsp;<span class="ident" id="5590263"><a href="/image/png/reader.go.html#5586611">rgba</a></span><span class="op" id="5590267">.</span><span class="ident" id="5590268">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590277">case</span>&nbsp;<span class="ident" id="5590282"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><span class="op" id="5590286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590291">for</span>&nbsp;<span class="ident" id="5590295">x</span>&nbsp;<span class="op" id="5590297">:=</span>&nbsp;<span class="num" id="5590300">0</span><span class="op" id="5590301">;</span>&nbsp;<span class="ident" id="5590303"><a href="/image/png/reader.go.html#5590295">x</a></span>&nbsp;<span class="op" id="5590305">&lt;</span>&nbsp;<span class="ident" id="5590307"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590312">;</span>&nbsp;<span class="ident" id="5590314"><a href="/image/png/reader.go.html#5590295">x</a></span>&nbsp;<span class="op" id="5590316">+=</span>&nbsp;<span class="num" id="5590319">8</span>&nbsp;<span class="op" id="5590321">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590327">b</span>&nbsp;<span class="op" id="5590329">:=</span>&nbsp;<span class="ident" id="5590332"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590336">[</span><span class="ident" id="5590337"><a href="/image/png/reader.go.html#5590295">x</a></span><span class="op" id="5590338">/</span><span class="num" id="5590339">8</span><span class="op" id="5590340">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590346">for</span>&nbsp;<span class="ident" id="5590350">x2</span>&nbsp;<span class="op" id="5590353">:=</span>&nbsp;<span class="num" id="5590356">0</span><span class="op" id="5590357">;</span>&nbsp;<span class="ident" id="5590359"><a href="/image/png/reader.go.html#5590350">x2</a></span>&nbsp;<span class="op" id="5590362">&lt;</span>&nbsp;<span class="num" id="5590364">8</span>&nbsp;<span class="op" id="5590366">&amp;&amp;</span>&nbsp;<span class="ident" id="5590369"><a href="/image/png/reader.go.html#5590295">x</a></span><span class="op" id="5590370">+</span><span class="ident" id="5590371"><a href="/image/png/reader.go.html#5590350">x2</a></span>&nbsp;<span class="op" id="5590374">&lt;</span>&nbsp;<span class="ident" id="5590376"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590381">;</span>&nbsp;<span class="ident" id="5590383"><a href="/image/png/reader.go.html#5590350">x2</a></span><span class="op" id="5590385">++</span>&nbsp;<span class="op" id="5590388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590395">idx</span>&nbsp;<span class="op" id="5590399">:=</span>&nbsp;<span class="ident" id="5590402"><a href="/image/png/reader.go.html#5590327">b</a></span>&nbsp;<span class="op" id="5590404">&gt;&gt;</span>&nbsp;<span class="num" id="5590407">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590414">if</span>&nbsp;<span class="builtinfunc" id="5590417">len</span><span class="op" id="5590420">(</span><span class="ident" id="5590421"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590429">.</span><span class="ident" id="5590430">Palette</span><span class="op" id="5590437">)</span>&nbsp;<span class="op" id="5590439">&lt;=</span>&nbsp;<span class="builtintype" id="5590442">int</span><span class="op" id="5590445">(</span><span class="ident" id="5590446"><a href="/image/png/reader.go.html#5590395">idx</a></span><span class="op" id="5590449">)</span>&nbsp;<span class="op" id="5590451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590459"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590467">.</span><span class="ident" id="5590468">Palette</span>&nbsp;<span class="op" id="5590476">=</span>&nbsp;<span class="ident" id="5590478"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590486">.</span><span class="ident" id="5590487">Palette</span><span class="op" id="5590494">[</span><span class="op" id="5590495">:</span><span class="builtintype" id="5590496">int</span><span class="op" id="5590499">(</span><span class="ident" id="5590500"><a href="/image/png/reader.go.html#5590395">idx</a></span><span class="op" id="5590503">)</span><span class="op" id="5590504">+</span><span class="num" id="5590505">1</span><span class="op" id="5590506">]</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590520"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590528">.</span><span class="ident" id="5590529">SetColorIndex</span><span class="op" id="5590542">(</span><span class="ident" id="5590543"><a href="/image/png/reader.go.html#5590295">x</a></span><span class="op" id="5590544">+</span><span class="ident" id="5590545"><a href="/image/png/reader.go.html#5590350">x2</a></span><span class="op" id="5590547">,</span>&nbsp;<span class="ident" id="5590549"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5590550">,</span>&nbsp;<span class="ident" id="5590552"><a href="/image/png/reader.go.html#5590395">idx</a></span><span class="op" id="5590555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590562"><a href="/image/png/reader.go.html#5590327">b</a></span>&nbsp;<span class="op" id="5590564">&lt;&lt;=</span>&nbsp;<span class="num" id="5590568">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590579">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590583">case</span>&nbsp;<span class="ident" id="5590588"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><span class="op" id="5590592">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590597">for</span>&nbsp;<span class="ident" id="5590601">x</span>&nbsp;<span class="op" id="5590603">:=</span>&nbsp;<span class="num" id="5590606">0</span><span class="op" id="5590607">;</span>&nbsp;<span class="ident" id="5590609"><a href="/image/png/reader.go.html#5590601">x</a></span>&nbsp;<span class="op" id="5590611">&lt;</span>&nbsp;<span class="ident" id="5590613"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590618">;</span>&nbsp;<span class="ident" id="5590620"><a href="/image/png/reader.go.html#5590601">x</a></span>&nbsp;<span class="op" id="5590622">+=</span>&nbsp;<span class="num" id="5590625">4</span>&nbsp;<span class="op" id="5590627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590633">b</span>&nbsp;<span class="op" id="5590635">:=</span>&nbsp;<span class="ident" id="5590638"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590642">[</span><span class="ident" id="5590643"><a href="/image/png/reader.go.html#5590601">x</a></span><span class="op" id="5590644">/</span><span class="num" id="5590645">4</span><span class="op" id="5590646">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590652">for</span>&nbsp;<span class="ident" id="5590656">x2</span>&nbsp;<span class="op" id="5590659">:=</span>&nbsp;<span class="num" id="5590662">0</span><span class="op" id="5590663">;</span>&nbsp;<span class="ident" id="5590665"><a href="/image/png/reader.go.html#5590656">x2</a></span>&nbsp;<span class="op" id="5590668">&lt;</span>&nbsp;<span class="num" id="5590670">4</span>&nbsp;<span class="op" id="5590672">&amp;&amp;</span>&nbsp;<span class="ident" id="5590675"><a href="/image/png/reader.go.html#5590601">x</a></span><span class="op" id="5590676">+</span><span class="ident" id="5590677"><a href="/image/png/reader.go.html#5590656">x2</a></span>&nbsp;<span class="op" id="5590680">&lt;</span>&nbsp;<span class="ident" id="5590682"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590687">;</span>&nbsp;<span class="ident" id="5590689"><a href="/image/png/reader.go.html#5590656">x2</a></span><span class="op" id="5590691">++</span>&nbsp;<span class="op" id="5590694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590701">idx</span>&nbsp;<span class="op" id="5590705">:=</span>&nbsp;<span class="ident" id="5590708"><a href="/image/png/reader.go.html#5590633">b</a></span>&nbsp;<span class="op" id="5590710">&gt;&gt;</span>&nbsp;<span class="num" id="5590713">6</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590720">if</span>&nbsp;<span class="builtinfunc" id="5590723">len</span><span class="op" id="5590726">(</span><span class="ident" id="5590727"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590735">.</span><span class="ident" id="5590736">Palette</span><span class="op" id="5590743">)</span>&nbsp;<span class="op" id="5590745">&lt;=</span>&nbsp;<span class="builtintype" id="5590748">int</span><span class="op" id="5590751">(</span><span class="ident" id="5590752"><a href="/image/png/reader.go.html#5590701">idx</a></span><span class="op" id="5590755">)</span>&nbsp;<span class="op" id="5590757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590765"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590773">.</span><span class="ident" id="5590774">Palette</span>&nbsp;<span class="op" id="5590782">=</span>&nbsp;<span class="ident" id="5590784"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590792">.</span><span class="ident" id="5590793">Palette</span><span class="op" id="5590800">[</span><span class="op" id="5590801">:</span><span class="builtintype" id="5590802">int</span><span class="op" id="5590805">(</span><span class="ident" id="5590806"><a href="/image/png/reader.go.html#5590701">idx</a></span><span class="op" id="5590809">)</span><span class="op" id="5590810">+</span><span class="num" id="5590811">1</span><span class="op" id="5590812">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590826"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5590834">.</span><span class="ident" id="5590835">SetColorIndex</span><span class="op" id="5590848">(</span><span class="ident" id="5590849"><a href="/image/png/reader.go.html#5590601">x</a></span><span class="op" id="5590850">+</span><span class="ident" id="5590851"><a href="/image/png/reader.go.html#5590656">x2</a></span><span class="op" id="5590853">,</span>&nbsp;<span class="ident" id="5590855"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5590856">,</span>&nbsp;<span class="ident" id="5590858"><a href="/image/png/reader.go.html#5590701">idx</a></span><span class="op" id="5590861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590868"><a href="/image/png/reader.go.html#5590633">b</a></span>&nbsp;<span class="op" id="5590870">&lt;&lt;=</span>&nbsp;<span class="num" id="5590874">2</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5590885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590889">case</span>&nbsp;<span class="ident" id="5590894"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><span class="op" id="5590898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590903">for</span>&nbsp;<span class="ident" id="5590907">x</span>&nbsp;<span class="op" id="5590909">:=</span>&nbsp;<span class="num" id="5590912">0</span><span class="op" id="5590913">;</span>&nbsp;<span class="ident" id="5590915"><a href="/image/png/reader.go.html#5590907">x</a></span>&nbsp;<span class="op" id="5590917">&lt;</span>&nbsp;<span class="ident" id="5590919"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590924">;</span>&nbsp;<span class="ident" id="5590926"><a href="/image/png/reader.go.html#5590907">x</a></span>&nbsp;<span class="op" id="5590928">+=</span>&nbsp;<span class="num" id="5590931">2</span>&nbsp;<span class="op" id="5590933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5590939">b</span>&nbsp;<span class="op" id="5590941">:=</span>&nbsp;<span class="ident" id="5590944"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5590948">[</span><span class="ident" id="5590949"><a href="/image/png/reader.go.html#5590907">x</a></span><span class="op" id="5590950">/</span><span class="num" id="5590951">2</span><span class="op" id="5590952">]</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5590958">for</span>&nbsp;<span class="ident" id="5590962">x2</span>&nbsp;<span class="op" id="5590965">:=</span>&nbsp;<span class="num" id="5590968">0</span><span class="op" id="5590969">;</span>&nbsp;<span class="ident" id="5590971"><a href="/image/png/reader.go.html#5590962">x2</a></span>&nbsp;<span class="op" id="5590974">&lt;</span>&nbsp;<span class="num" id="5590976">2</span>&nbsp;<span class="op" id="5590978">&amp;&amp;</span>&nbsp;<span class="ident" id="5590981"><a href="/image/png/reader.go.html#5590907">x</a></span><span class="op" id="5590982">+</span><span class="ident" id="5590983"><a href="/image/png/reader.go.html#5590962">x2</a></span>&nbsp;<span class="op" id="5590986">&lt;</span>&nbsp;<span class="ident" id="5590988"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5590993">;</span>&nbsp;<span class="ident" id="5590995"><a href="/image/png/reader.go.html#5590962">x2</a></span><span class="op" id="5590997">++</span>&nbsp;<span class="op" id="5591000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591007">idx</span>&nbsp;<span class="op" id="5591011">:=</span>&nbsp;<span class="ident" id="5591014"><a href="/image/png/reader.go.html#5590939">b</a></span>&nbsp;<span class="op" id="5591016">&gt;&gt;</span>&nbsp;<span class="num" id="5591019">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591026">if</span>&nbsp;<span class="builtinfunc" id="5591029">len</span><span class="op" id="5591032">(</span><span class="ident" id="5591033"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591041">.</span><span class="ident" id="5591042">Palette</span><span class="op" id="5591049">)</span>&nbsp;<span class="op" id="5591051">&lt;=</span>&nbsp;<span class="builtintype" id="5591054">int</span><span class="op" id="5591057">(</span><span class="ident" id="5591058"><a href="/image/png/reader.go.html#5591007">idx</a></span><span class="op" id="5591061">)</span>&nbsp;<span class="op" id="5591063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591071"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591079">.</span><span class="ident" id="5591080">Palette</span>&nbsp;<span class="op" id="5591088">=</span>&nbsp;<span class="ident" id="5591090"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591098">.</span><span class="ident" id="5591099">Palette</span><span class="op" id="5591106">[</span><span class="op" id="5591107">:</span><span class="builtintype" id="5591108">int</span><span class="op" id="5591111">(</span><span class="ident" id="5591112"><a href="/image/png/reader.go.html#5591007">idx</a></span><span class="op" id="5591115">)</span><span class="op" id="5591116">+</span><span class="num" id="5591117">1</span><span class="op" id="5591118">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591125">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591132"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591140">.</span><span class="ident" id="5591141">SetColorIndex</span><span class="op" id="5591154">(</span><span class="ident" id="5591155"><a href="/image/png/reader.go.html#5590907">x</a></span><span class="op" id="5591156">+</span><span class="ident" id="5591157"><a href="/image/png/reader.go.html#5590962">x2</a></span><span class="op" id="5591159">,</span>&nbsp;<span class="ident" id="5591161"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5591162">,</span>&nbsp;<span class="ident" id="5591164"><a href="/image/png/reader.go.html#5591007">idx</a></span><span class="op" id="5591167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591174"><a href="/image/png/reader.go.html#5590939">b</a></span>&nbsp;<span class="op" id="5591176">&lt;&lt;=</span>&nbsp;<span class="num" id="5591180">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591195">case</span>&nbsp;<span class="ident" id="5591200"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><span class="op" id="5591204">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591209">if</span>&nbsp;<span class="builtinfunc" id="5591212">len</span><span class="op" id="5591215">(</span><span class="ident" id="5591216"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591224">.</span><span class="ident" id="5591225">Palette</span><span class="op" id="5591232">)</span>&nbsp;<span class="op" id="5591234">!=</span>&nbsp;<span class="num" id="5591237">255</span>&nbsp;<span class="op" id="5591241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591247">for</span>&nbsp;<span class="ident" id="5591251">x</span>&nbsp;<span class="op" id="5591253">:=</span>&nbsp;<span class="num" id="5591256">0</span><span class="op" id="5591257">;</span>&nbsp;<span class="ident" id="5591259"><a href="/image/png/reader.go.html#5591251">x</a></span>&nbsp;<span class="op" id="5591261">&lt;</span>&nbsp;<span class="ident" id="5591263"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5591268">;</span>&nbsp;<span class="ident" id="5591270"><a href="/image/png/reader.go.html#5591251">x</a></span><span class="op" id="5591271">++</span>&nbsp;<span class="op" id="5591274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591281">if</span>&nbsp;<span class="builtinfunc" id="5591284">len</span><span class="op" id="5591287">(</span><span class="ident" id="5591288"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591296">.</span><span class="ident" id="5591297">Palette</span><span class="op" id="5591304">)</span>&nbsp;<span class="op" id="5591306">&lt;=</span>&nbsp;<span class="builtintype" id="5591309">int</span><span class="op" id="5591312">(</span><span class="ident" id="5591313"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591317">[</span><span class="ident" id="5591318"><a href="/image/png/reader.go.html#5591251">x</a></span><span class="op" id="5591319">]</span><span class="op" id="5591320">)</span>&nbsp;<span class="op" id="5591322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591330"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591338">.</span><span class="ident" id="5591339">Palette</span>&nbsp;<span class="op" id="5591347">=</span>&nbsp;<span class="ident" id="5591349"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591357">.</span><span class="ident" id="5591358">Palette</span><span class="op" id="5591365">[</span><span class="op" id="5591366">:</span><span class="builtintype" id="5591367">int</span><span class="op" id="5591370">(</span><span class="ident" id="5591371"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591375">[</span><span class="ident" id="5591376"><a href="/image/png/reader.go.html#5591251">x</a></span><span class="op" id="5591377">]</span><span class="op" id="5591378">)</span><span class="op" id="5591379">+</span><span class="num" id="5591380">1</span><span class="op" id="5591381">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591388">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5591404">copy</span><span class="op" id="5591408">(</span><span class="ident" id="5591409"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591417">.</span><span class="ident" id="5591418">Pix</span><span class="op" id="5591421">[</span><span class="ident" id="5591422"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span><span class="op" id="5591431">:</span><span class="op" id="5591432">]</span><span class="op" id="5591433">,</span>&nbsp;<span class="ident" id="5591435"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591444"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span>&nbsp;<span class="op" id="5591454">+=</span>&nbsp;<span class="ident" id="5591457"><a href="/image/png/reader.go.html#5586634">paletted</a></span><span class="op" id="5591465">.</span><span class="ident" id="5591466">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591475">case</span>&nbsp;<span class="ident" id="5591480"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><span class="op" id="5591486">:</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5591491">copy</span><span class="op" id="5591495">(</span><span class="ident" id="5591496"><a href="/image/png/reader.go.html#5586661">nrgba</a></span><span class="op" id="5591501">.</span><span class="ident" id="5591502">Pix</span><span class="op" id="5591505">[</span><span class="ident" id="5591506"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span><span class="op" id="5591515">:</span><span class="op" id="5591516">]</span><span class="op" id="5591517">,</span>&nbsp;<span class="ident" id="5591519"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591528"><a href="/image/png/reader.go.html#5586564">pixOffset</a></span>&nbsp;<span class="op" id="5591538">+=</span>&nbsp;<span class="ident" id="5591541"><a href="/image/png/reader.go.html#5586661">nrgba</a></span><span class="op" id="5591546">.</span><span class="ident" id="5591547">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591556">case</span>&nbsp;<span class="ident" id="5591561"><a href="/image/png/reader.go.html#5578531">cbG16</a></span><span class="op" id="5591566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591571">for</span>&nbsp;<span class="ident" id="5591575">x</span>&nbsp;<span class="op" id="5591577">:=</span>&nbsp;<span class="num" id="5591580">0</span><span class="op" id="5591581">;</span>&nbsp;<span class="ident" id="5591583"><a href="/image/png/reader.go.html#5591575">x</a></span>&nbsp;<span class="op" id="5591585">&lt;</span>&nbsp;<span class="ident" id="5591587"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5591592">;</span>&nbsp;<span class="ident" id="5591594"><a href="/image/png/reader.go.html#5591575">x</a></span><span class="op" id="5591595">++</span>&nbsp;<span class="op" id="5591598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591604">ycol</span>&nbsp;<span class="op" id="5591609">:=</span>&nbsp;<span class="builtintype" id="5591612">uint16</span><span class="op" id="5591618">(</span><span class="ident" id="5591619"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591623">[</span><span class="num" id="5591624">2</span><span class="op" id="5591625">*</span><span class="ident" id="5591626"><a href="/image/png/reader.go.html#5591575">x</a></span><span class="op" id="5591627">+</span><span class="num" id="5591628">0</span><span class="op" id="5591629">]</span><span class="op" id="5591630">)</span><span class="op" id="5591631">&lt;&lt;</span><span class="num" id="5591633">8</span>&nbsp;<span class="op" id="5591635">|</span>&nbsp;<span class="builtintype" id="5591637">uint16</span><span class="op" id="5591643">(</span><span class="ident" id="5591644"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591648">[</span><span class="num" id="5591649">2</span><span class="op" id="5591650">*</span><span class="ident" id="5591651"><a href="/image/png/reader.go.html#5591575">x</a></span><span class="op" id="5591652">+</span><span class="num" id="5591653">1</span><span class="op" id="5591654">]</span><span class="op" id="5591655">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591661"><a href="/image/png/reader.go.html#5586685">gray16</a></span><span class="op" id="5591667">.</span><span class="ident" id="5591668">SetGray16</span><span class="op" id="5591677">(</span><span class="ident" id="5591678"><a href="/image/png/reader.go.html#5591575">x</a></span><span class="op" id="5591679">,</span>&nbsp;<span class="ident" id="5591681"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5591682">,</span>&nbsp;<span class="ident" id="5591684"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5591689">.</span><span class="ident" id="5591690">Gray16</span><span class="op" id="5591696">{</span><span class="ident" id="5591697"><a href="/image/png/reader.go.html#5591604">ycol</a></span><span class="op" id="5591701">}</span><span class="op" id="5591702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591711">case</span>&nbsp;<span class="ident" id="5591716"><a href="/image/png/reader.go.html#5578538">cbGA16</a></span><span class="op" id="5591722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591727">for</span>&nbsp;<span class="ident" id="5591731">x</span>&nbsp;<span class="op" id="5591733">:=</span>&nbsp;<span class="num" id="5591736">0</span><span class="op" id="5591737">;</span>&nbsp;<span class="ident" id="5591739"><a href="/image/png/reader.go.html#5591731">x</a></span>&nbsp;<span class="op" id="5591741">&lt;</span>&nbsp;<span class="ident" id="5591743"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5591748">;</span>&nbsp;<span class="ident" id="5591750"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591751">++</span>&nbsp;<span class="op" id="5591754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591760">ycol</span>&nbsp;<span class="op" id="5591765">:=</span>&nbsp;<span class="builtintype" id="5591768">uint16</span><span class="op" id="5591774">(</span><span class="ident" id="5591775"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591779">[</span><span class="num" id="5591780">4</span><span class="op" id="5591781">*</span><span class="ident" id="5591782"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591783">+</span><span class="num" id="5591784">0</span><span class="op" id="5591785">]</span><span class="op" id="5591786">)</span><span class="op" id="5591787">&lt;&lt;</span><span class="num" id="5591789">8</span>&nbsp;<span class="op" id="5591791">|</span>&nbsp;<span class="builtintype" id="5591793">uint16</span><span class="op" id="5591799">(</span><span class="ident" id="5591800"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591804">[</span><span class="num" id="5591805">4</span><span class="op" id="5591806">*</span><span class="ident" id="5591807"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591808">+</span><span class="num" id="5591809">1</span><span class="op" id="5591810">]</span><span class="op" id="5591811">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591817">acol</span>&nbsp;<span class="op" id="5591822">:=</span>&nbsp;<span class="builtintype" id="5591825">uint16</span><span class="op" id="5591831">(</span><span class="ident" id="5591832"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591836">[</span><span class="num" id="5591837">4</span><span class="op" id="5591838">*</span><span class="ident" id="5591839"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591840">+</span><span class="num" id="5591841">2</span><span class="op" id="5591842">]</span><span class="op" id="5591843">)</span><span class="op" id="5591844">&lt;&lt;</span><span class="num" id="5591846">8</span>&nbsp;<span class="op" id="5591848">|</span>&nbsp;<span class="builtintype" id="5591850">uint16</span><span class="op" id="5591856">(</span><span class="ident" id="5591857"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5591861">[</span><span class="num" id="5591862">4</span><span class="op" id="5591863">*</span><span class="ident" id="5591864"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591865">+</span><span class="num" id="5591866">3</span><span class="op" id="5591867">]</span><span class="op" id="5591868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591874"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span><span class="op" id="5591881">.</span><span class="ident" id="5591882">SetNRGBA64</span><span class="op" id="5591892">(</span><span class="ident" id="5591893"><a href="/image/png/reader.go.html#5591731">x</a></span><span class="op" id="5591894">,</span>&nbsp;<span class="ident" id="5591896"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5591897">,</span>&nbsp;<span class="ident" id="5591899"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5591904">.</span><span class="ident" id="5591905">NRGBA64</span><span class="op" id="5591912">{</span><span class="ident" id="5591913"><a href="/image/png/reader.go.html#5591760">ycol</a></span><span class="op" id="5591917">,</span>&nbsp;<span class="ident" id="5591919"><a href="/image/png/reader.go.html#5591760">ycol</a></span><span class="op" id="5591923">,</span>&nbsp;<span class="ident" id="5591925"><a href="/image/png/reader.go.html#5591760">ycol</a></span><span class="op" id="5591929">,</span>&nbsp;<span class="ident" id="5591931"><a href="/image/png/reader.go.html#5591817">acol</a></span><span class="op" id="5591935">}</span><span class="op" id="5591936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5591941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591945">case</span>&nbsp;<span class="ident" id="5591950"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><span class="op" id="5591956">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5591961">for</span>&nbsp;<span class="ident" id="5591965">x</span>&nbsp;<span class="op" id="5591967">:=</span>&nbsp;<span class="num" id="5591970">0</span><span class="op" id="5591971">;</span>&nbsp;<span class="ident" id="5591973"><a href="/image/png/reader.go.html#5591965">x</a></span>&nbsp;<span class="op" id="5591975">&lt;</span>&nbsp;<span class="ident" id="5591977"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5591982">;</span>&nbsp;<span class="ident" id="5591984"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5591985">++</span>&nbsp;<span class="op" id="5591988">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5591994">rcol</span>&nbsp;<span class="op" id="5591999">:=</span>&nbsp;<span class="builtintype" id="5592002">uint16</span><span class="op" id="5592008">(</span><span class="ident" id="5592009"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592013">[</span><span class="num" id="5592014">6</span><span class="op" id="5592015">*</span><span class="ident" id="5592016"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592017">+</span><span class="num" id="5592018">0</span><span class="op" id="5592019">]</span><span class="op" id="5592020">)</span><span class="op" id="5592021">&lt;&lt;</span><span class="num" id="5592023">8</span>&nbsp;<span class="op" id="5592025">|</span>&nbsp;<span class="builtintype" id="5592027">uint16</span><span class="op" id="5592033">(</span><span class="ident" id="5592034"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592038">[</span><span class="num" id="5592039">6</span><span class="op" id="5592040">*</span><span class="ident" id="5592041"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592042">+</span><span class="num" id="5592043">1</span><span class="op" id="5592044">]</span><span class="op" id="5592045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592051">gcol</span>&nbsp;<span class="op" id="5592056">:=</span>&nbsp;<span class="builtintype" id="5592059">uint16</span><span class="op" id="5592065">(</span><span class="ident" id="5592066"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592070">[</span><span class="num" id="5592071">6</span><span class="op" id="5592072">*</span><span class="ident" id="5592073"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592074">+</span><span class="num" id="5592075">2</span><span class="op" id="5592076">]</span><span class="op" id="5592077">)</span><span class="op" id="5592078">&lt;&lt;</span><span class="num" id="5592080">8</span>&nbsp;<span class="op" id="5592082">|</span>&nbsp;<span class="builtintype" id="5592084">uint16</span><span class="op" id="5592090">(</span><span class="ident" id="5592091"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592095">[</span><span class="num" id="5592096">6</span><span class="op" id="5592097">*</span><span class="ident" id="5592098"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592099">+</span><span class="num" id="5592100">3</span><span class="op" id="5592101">]</span><span class="op" id="5592102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592108">bcol</span>&nbsp;<span class="op" id="5592113">:=</span>&nbsp;<span class="builtintype" id="5592116">uint16</span><span class="op" id="5592122">(</span><span class="ident" id="5592123"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592127">[</span><span class="num" id="5592128">6</span><span class="op" id="5592129">*</span><span class="ident" id="5592130"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592131">+</span><span class="num" id="5592132">4</span><span class="op" id="5592133">]</span><span class="op" id="5592134">)</span><span class="op" id="5592135">&lt;&lt;</span><span class="num" id="5592137">8</span>&nbsp;<span class="op" id="5592139">|</span>&nbsp;<span class="builtintype" id="5592141">uint16</span><span class="op" id="5592147">(</span><span class="ident" id="5592148"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592152">[</span><span class="num" id="5592153">6</span><span class="op" id="5592154">*</span><span class="ident" id="5592155"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592156">+</span><span class="num" id="5592157">5</span><span class="op" id="5592158">]</span><span class="op" id="5592159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592165"><a href="/image/png/reader.go.html#5586710">rgba64</a></span><span class="op" id="5592171">.</span><span class="ident" id="5592172">SetRGBA64</span><span class="op" id="5592181">(</span><span class="ident" id="5592182"><a href="/image/png/reader.go.html#5591965">x</a></span><span class="op" id="5592183">,</span>&nbsp;<span class="ident" id="5592185"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5592186">,</span>&nbsp;<span class="ident" id="5592188"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5592193">.</span><span class="ident" id="5592194">RGBA64</span><span class="op" id="5592200">{</span><span class="ident" id="5592201"><a href="/image/png/reader.go.html#5591994">rcol</a></span><span class="op" id="5592205">,</span>&nbsp;<span class="ident" id="5592207"><a href="/image/png/reader.go.html#5592051">gcol</a></span><span class="op" id="5592211">,</span>&nbsp;<span class="ident" id="5592213"><a href="/image/png/reader.go.html#5592108">bcol</a></span><span class="op" id="5592217">,</span>&nbsp;<span class="num" id="5592219">0xffff</span><span class="op" id="5592225">}</span><span class="op" id="5592226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5592231">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5592235">case</span>&nbsp;<span class="ident" id="5592240"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><span class="op" id="5592247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5592252">for</span>&nbsp;<span class="ident" id="5592256">x</span>&nbsp;<span class="op" id="5592258">:=</span>&nbsp;<span class="num" id="5592261">0</span><span class="op" id="5592262">;</span>&nbsp;<span class="ident" id="5592264"><a href="/image/png/reader.go.html#5592256">x</a></span>&nbsp;<span class="op" id="5592266">&lt;</span>&nbsp;<span class="ident" id="5592268"><a href="/image/png/reader.go.html#5586786">width</a></span><span class="op" id="5592273">;</span>&nbsp;<span class="ident" id="5592275"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592276">++</span>&nbsp;<span class="op" id="5592279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592285">rcol</span>&nbsp;<span class="op" id="5592290">:=</span>&nbsp;<span class="builtintype" id="5592293">uint16</span><span class="op" id="5592299">(</span><span class="ident" id="5592300"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592304">[</span><span class="num" id="5592305">8</span><span class="op" id="5592306">*</span><span class="ident" id="5592307"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592308">+</span><span class="num" id="5592309">0</span><span class="op" id="5592310">]</span><span class="op" id="5592311">)</span><span class="op" id="5592312">&lt;&lt;</span><span class="num" id="5592314">8</span>&nbsp;<span class="op" id="5592316">|</span>&nbsp;<span class="builtintype" id="5592318">uint16</span><span class="op" id="5592324">(</span><span class="ident" id="5592325"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592329">[</span><span class="num" id="5592330">8</span><span class="op" id="5592331">*</span><span class="ident" id="5592332"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592333">+</span><span class="num" id="5592334">1</span><span class="op" id="5592335">]</span><span class="op" id="5592336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592342">gcol</span>&nbsp;<span class="op" id="5592347">:=</span>&nbsp;<span class="builtintype" id="5592350">uint16</span><span class="op" id="5592356">(</span><span class="ident" id="5592357"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592361">[</span><span class="num" id="5592362">8</span><span class="op" id="5592363">*</span><span class="ident" id="5592364"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592365">+</span><span class="num" id="5592366">2</span><span class="op" id="5592367">]</span><span class="op" id="5592368">)</span><span class="op" id="5592369">&lt;&lt;</span><span class="num" id="5592371">8</span>&nbsp;<span class="op" id="5592373">|</span>&nbsp;<span class="builtintype" id="5592375">uint16</span><span class="op" id="5592381">(</span><span class="ident" id="5592382"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592386">[</span><span class="num" id="5592387">8</span><span class="op" id="5592388">*</span><span class="ident" id="5592389"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592390">+</span><span class="num" id="5592391">3</span><span class="op" id="5592392">]</span><span class="op" id="5592393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592399">bcol</span>&nbsp;<span class="op" id="5592404">:=</span>&nbsp;<span class="builtintype" id="5592407">uint16</span><span class="op" id="5592413">(</span><span class="ident" id="5592414"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592418">[</span><span class="num" id="5592419">8</span><span class="op" id="5592420">*</span><span class="ident" id="5592421"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592422">+</span><span class="num" id="5592423">4</span><span class="op" id="5592424">]</span><span class="op" id="5592425">)</span><span class="op" id="5592426">&lt;&lt;</span><span class="num" id="5592428">8</span>&nbsp;<span class="op" id="5592430">|</span>&nbsp;<span class="builtintype" id="5592432">uint16</span><span class="op" id="5592438">(</span><span class="ident" id="5592439"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592443">[</span><span class="num" id="5592444">8</span><span class="op" id="5592445">*</span><span class="ident" id="5592446"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592447">+</span><span class="num" id="5592448">5</span><span class="op" id="5592449">]</span><span class="op" id="5592450">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592456">acol</span>&nbsp;<span class="op" id="5592461">:=</span>&nbsp;<span class="builtintype" id="5592464">uint16</span><span class="op" id="5592470">(</span><span class="ident" id="5592471"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592475">[</span><span class="num" id="5592476">8</span><span class="op" id="5592477">*</span><span class="ident" id="5592478"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592479">+</span><span class="num" id="5592480">6</span><span class="op" id="5592481">]</span><span class="op" id="5592482">)</span><span class="op" id="5592483">&lt;&lt;</span><span class="num" id="5592485">8</span>&nbsp;<span class="op" id="5592487">|</span>&nbsp;<span class="builtintype" id="5592489">uint16</span><span class="op" id="5592495">(</span><span class="ident" id="5592496"><a href="/image/png/reader.go.html#5588606">cdat</a></span><span class="op" id="5592500">[</span><span class="num" id="5592501">8</span><span class="op" id="5592502">*</span><span class="ident" id="5592503"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592504">+</span><span class="num" id="5592505">7</span><span class="op" id="5592506">]</span><span class="op" id="5592507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592513"><a href="/image/png/reader.go.html#5586735">nrgba64</a></span><span class="op" id="5592520">.</span><span class="ident" id="5592521">SetNRGBA64</span><span class="op" id="5592531">(</span><span class="ident" id="5592532"><a href="/image/png/reader.go.html#5592256">x</a></span><span class="op" id="5592533">,</span>&nbsp;<span class="ident" id="5592535"><a href="/image/png/reader.go.html#5588448">y</a></span><span class="op" id="5592536">,</span>&nbsp;<span class="ident" id="5592538"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5592543">.</span><span class="ident" id="5592544">NRGBA64</span><span class="op" id="5592551">{</span><span class="ident" id="5592552"><a href="/image/png/reader.go.html#5592285">rcol</a></span><span class="op" id="5592556">,</span>&nbsp;<span class="ident" id="5592558"><a href="/image/png/reader.go.html#5592342">gcol</a></span><span class="op" id="5592562">,</span>&nbsp;<span class="ident" id="5592564"><a href="/image/png/reader.go.html#5592399">bcol</a></span><span class="op" id="5592568">,</span>&nbsp;<span class="ident" id="5592570"><a href="/image/png/reader.go.html#5592456">acol</a></span><span class="op" id="5592574">}</span><span class="op" id="5592575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5592580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5592584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5592589">//&nbsp;The&nbsp;current&nbsp;row&nbsp;for&nbsp;y&nbsp;is&nbsp;the&nbsp;previous&nbsp;row&nbsp;for&nbsp;y+1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592645"><a href="/image/png/reader.go.html#5588413">pr</a></span><span class="op" id="5592647">,</span>&nbsp;<span class="ident" id="5592649"><a href="/image/png/reader.go.html#5588383">cr</a></span>&nbsp;<span class="op" id="5592652">=</span>&nbsp;<span class="ident" id="5592654"><a href="/image/png/reader.go.html#5588383">cr</a></span><span class="op" id="5592656">,</span>&nbsp;<span class="ident" id="5592658"><a href="/image/png/reader.go.html#5588413">pr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5592662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5592666">return</span>&nbsp;<span class="ident" id="5592673"><a href="/image/png/reader.go.html#5586761">img</a></span><span class="op" id="5592676">,</span>&nbsp;<span class="ident" id="5592678">nil</span><br>
<span class="lineno">585</span><span class="op" id="5592682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5592685">//&nbsp;mergePassInto&nbsp;merges&nbsp;a&nbsp;single&nbsp;pass&nbsp;into&nbsp;a&nbsp;full&nbsp;sized&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5592748">func</span>&nbsp;<span class="op" id="5592753">(</span><span class="ident" id="5592754">d</span>&nbsp;<span class="op" id="5592756">*</span><span class="ident" id="5592757"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5592764">)</span>&nbsp;<span class="ident" id="5592766">mergePassInto</span><span class="op" id="5592779">(</span><span class="ident" id="5592780">dst</span>&nbsp;<span class="ident" id="5592784"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5592789">.</span><span class="ident" id="5592790">Image</span><span class="op" id="5592795">,</span>&nbsp;<span class="ident" id="5592797">src</span>&nbsp;<span class="ident" id="5592801"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5592806">.</span><span class="ident" id="5592807">Image</span><span class="op" id="5592812">,</span>&nbsp;<span class="ident" id="5592814">pass</span>&nbsp;<span class="builtintype" id="5592819">int</span><span class="op" id="5592822">)</span>&nbsp;<span class="op" id="5592824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592827">p</span>&nbsp;<span class="op" id="5592829">:=</span>&nbsp;<span class="ident" id="5592832"><a href="/image/png/reader.go.html#5579034">interlacing</a></span><span class="op" id="5592843">[</span><span class="ident" id="5592844"><a href="/image/png/reader.go.html#5592814">pass</a></span><span class="op" id="5592848">]</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5592851">var</span>&nbsp;<span class="op" id="5592855">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592859">srcPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5592873">[</span><span class="op" id="5592874">]</span><span class="builtintype" id="5592875">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592883">dstPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5592897">[</span><span class="op" id="5592898">]</span><span class="builtintype" id="5592899">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592907">stride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5592921">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592927">rect</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5592941"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5592946">.</span><span class="ident" id="5592947">Rectangle</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5592959">bytesPerPixel</span>&nbsp;<span class="builtintype" id="5592973">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5592978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5592981">switch</span>&nbsp;<span class="ident" id="5592988">target</span>&nbsp;<span class="op" id="5592995">:=</span>&nbsp;<span class="ident" id="5592998"><a href="/image/png/reader.go.html#5592780">dst</a></span><span class="op" id="5593001">.</span><span class="op" id="5593002">(</span><span class="keyword" id="5593003">type</span><span class="op" id="5593007">)</span>&nbsp;<span class="op" id="5593009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593012">case</span>&nbsp;<span class="op" id="5593017">*</span><span class="ident" id="5593018"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593023">.</span><span class="ident" id="5593024">Alpha</span><span class="op" id="5593029">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593033"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593040">=</span>&nbsp;<span class="ident" id="5593042"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593045">.</span><span class="op" id="5593046">(</span><span class="op" id="5593047">*</span><span class="ident" id="5593048"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593053">.</span><span class="ident" id="5593054">Alpha</span><span class="op" id="5593059">)</span><span class="op" id="5593060">.</span><span class="ident" id="5593061">Pix</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593067"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593073">,</span>&nbsp;<span class="ident" id="5593075"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593081">,</span>&nbsp;<span class="ident" id="5593083"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593088">=</span>&nbsp;<span class="ident" id="5593090"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593096">.</span><span class="ident" id="5593097">Pix</span><span class="op" id="5593100">,</span>&nbsp;<span class="ident" id="5593102"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593108">.</span><span class="ident" id="5593109">Stride</span><span class="op" id="5593115">,</span>&nbsp;<span class="ident" id="5593117"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593123">.</span><span class="ident" id="5593124">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593131"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593145">=</span>&nbsp;<span class="num" id="5593147">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593150">case</span>&nbsp;<span class="op" id="5593155">*</span><span class="ident" id="5593156"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593161">.</span><span class="ident" id="5593162">Alpha16</span><span class="op" id="5593169">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593173"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593180">=</span>&nbsp;<span class="ident" id="5593182"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593185">.</span><span class="op" id="5593186">(</span><span class="op" id="5593187">*</span><span class="ident" id="5593188"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593193">.</span><span class="ident" id="5593194">Alpha16</span><span class="op" id="5593201">)</span><span class="op" id="5593202">.</span><span class="ident" id="5593203">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593209"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593215">,</span>&nbsp;<span class="ident" id="5593217"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593223">,</span>&nbsp;<span class="ident" id="5593225"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593230">=</span>&nbsp;<span class="ident" id="5593232"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593238">.</span><span class="ident" id="5593239">Pix</span><span class="op" id="5593242">,</span>&nbsp;<span class="ident" id="5593244"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593250">.</span><span class="ident" id="5593251">Stride</span><span class="op" id="5593257">,</span>&nbsp;<span class="ident" id="5593259"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593265">.</span><span class="ident" id="5593266">Rect</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593273"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593287">=</span>&nbsp;<span class="num" id="5593289">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593292">case</span>&nbsp;<span class="op" id="5593297">*</span><span class="ident" id="5593298"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593303">.</span><span class="ident" id="5593304">Gray</span><span class="op" id="5593308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593312"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593319">=</span>&nbsp;<span class="ident" id="5593321"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593324">.</span><span class="op" id="5593325">(</span><span class="op" id="5593326">*</span><span class="ident" id="5593327"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593332">.</span><span class="ident" id="5593333">Gray</span><span class="op" id="5593337">)</span><span class="op" id="5593338">.</span><span class="ident" id="5593339">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593345"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593351">,</span>&nbsp;<span class="ident" id="5593353"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593359">,</span>&nbsp;<span class="ident" id="5593361"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593366">=</span>&nbsp;<span class="ident" id="5593368"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593374">.</span><span class="ident" id="5593375">Pix</span><span class="op" id="5593378">,</span>&nbsp;<span class="ident" id="5593380"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593386">.</span><span class="ident" id="5593387">Stride</span><span class="op" id="5593393">,</span>&nbsp;<span class="ident" id="5593395"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593401">.</span><span class="ident" id="5593402">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593409"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593423">=</span>&nbsp;<span class="num" id="5593425">1</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593428">case</span>&nbsp;<span class="op" id="5593433">*</span><span class="ident" id="5593434"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593439">.</span><span class="ident" id="5593440">Gray16</span><span class="op" id="5593446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593450"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593457">=</span>&nbsp;<span class="ident" id="5593459"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593462">.</span><span class="op" id="5593463">(</span><span class="op" id="5593464">*</span><span class="ident" id="5593465"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593470">.</span><span class="ident" id="5593471">Gray16</span><span class="op" id="5593477">)</span><span class="op" id="5593478">.</span><span class="ident" id="5593479">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593485"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593491">,</span>&nbsp;<span class="ident" id="5593493"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593499">,</span>&nbsp;<span class="ident" id="5593501"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593506">=</span>&nbsp;<span class="ident" id="5593508"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593514">.</span><span class="ident" id="5593515">Pix</span><span class="op" id="5593518">,</span>&nbsp;<span class="ident" id="5593520"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593526">.</span><span class="ident" id="5593527">Stride</span><span class="op" id="5593533">,</span>&nbsp;<span class="ident" id="5593535"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593541">.</span><span class="ident" id="5593542">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593549"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593563">=</span>&nbsp;<span class="num" id="5593565">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593568">case</span>&nbsp;<span class="op" id="5593573">*</span><span class="ident" id="5593574"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593579">.</span><span class="ident" id="5593580">NRGBA</span><span class="op" id="5593585">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593589"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593596">=</span>&nbsp;<span class="ident" id="5593598"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593601">.</span><span class="op" id="5593602">(</span><span class="op" id="5593603">*</span><span class="ident" id="5593604"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593609">.</span><span class="ident" id="5593610">NRGBA</span><span class="op" id="5593615">)</span><span class="op" id="5593616">.</span><span class="ident" id="5593617">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593623"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593629">,</span>&nbsp;<span class="ident" id="5593631"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593637">,</span>&nbsp;<span class="ident" id="5593639"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593644">=</span>&nbsp;<span class="ident" id="5593646"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593652">.</span><span class="ident" id="5593653">Pix</span><span class="op" id="5593656">,</span>&nbsp;<span class="ident" id="5593658"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593664">.</span><span class="ident" id="5593665">Stride</span><span class="op" id="5593671">,</span>&nbsp;<span class="ident" id="5593673"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593679">.</span><span class="ident" id="5593680">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593687"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593701">=</span>&nbsp;<span class="num" id="5593703">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593706">case</span>&nbsp;<span class="op" id="5593711">*</span><span class="ident" id="5593712"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593717">.</span><span class="ident" id="5593718">NRGBA64</span><span class="op" id="5593725">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593729"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593736">=</span>&nbsp;<span class="ident" id="5593738"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593741">.</span><span class="op" id="5593742">(</span><span class="op" id="5593743">*</span><span class="ident" id="5593744"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593749">.</span><span class="ident" id="5593750">NRGBA64</span><span class="op" id="5593757">)</span><span class="op" id="5593758">.</span><span class="ident" id="5593759">Pix</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593765"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593771">,</span>&nbsp;<span class="ident" id="5593773"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593779">,</span>&nbsp;<span class="ident" id="5593781"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593786">=</span>&nbsp;<span class="ident" id="5593788"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593794">.</span><span class="ident" id="5593795">Pix</span><span class="op" id="5593798">,</span>&nbsp;<span class="ident" id="5593800"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593806">.</span><span class="ident" id="5593807">Stride</span><span class="op" id="5593813">,</span>&nbsp;<span class="ident" id="5593815"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593821">.</span><span class="ident" id="5593822">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593829"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593843">=</span>&nbsp;<span class="num" id="5593845">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593848">case</span>&nbsp;<span class="op" id="5593853">*</span><span class="ident" id="5593854"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593859">.</span><span class="ident" id="5593860">Paletted</span><span class="op" id="5593868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593872"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5593879">=</span>&nbsp;<span class="ident" id="5593881"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5593884">.</span><span class="op" id="5593885">(</span><span class="op" id="5593886">*</span><span class="ident" id="5593887"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5593892">.</span><span class="ident" id="5593893">Paletted</span><span class="op" id="5593901">)</span><span class="op" id="5593902">.</span><span class="ident" id="5593903">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593909"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5593915">,</span>&nbsp;<span class="ident" id="5593917"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5593923">,</span>&nbsp;<span class="ident" id="5593925"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5593930">=</span>&nbsp;<span class="ident" id="5593932"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593938">.</span><span class="ident" id="5593939">Pix</span><span class="op" id="5593942">,</span>&nbsp;<span class="ident" id="5593944"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593950">.</span><span class="ident" id="5593951">Stride</span><span class="op" id="5593957">,</span>&nbsp;<span class="ident" id="5593959"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5593965">.</span><span class="ident" id="5593966">Rect</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5593973"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5593987">=</span>&nbsp;<span class="num" id="5593989">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5593992">case</span>&nbsp;<span class="op" id="5593997">*</span><span class="ident" id="5593998"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5594003">.</span><span class="ident" id="5594004">RGBA</span><span class="op" id="5594008">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594012"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5594019">=</span>&nbsp;<span class="ident" id="5594021"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5594024">.</span><span class="op" id="5594025">(</span><span class="op" id="5594026">*</span><span class="ident" id="5594027"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5594032">.</span><span class="ident" id="5594033">RGBA</span><span class="op" id="5594037">)</span><span class="op" id="5594038">.</span><span class="ident" id="5594039">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594045"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5594051">,</span>&nbsp;<span class="ident" id="5594053"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5594059">,</span>&nbsp;<span class="ident" id="5594061"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5594066">=</span>&nbsp;<span class="ident" id="5594068"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594074">.</span><span class="ident" id="5594075">Pix</span><span class="op" id="5594078">,</span>&nbsp;<span class="ident" id="5594080"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594086">.</span><span class="ident" id="5594087">Stride</span><span class="op" id="5594093">,</span>&nbsp;<span class="ident" id="5594095"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594101">.</span><span class="ident" id="5594102">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594109"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5594123">=</span>&nbsp;<span class="num" id="5594125">4</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594128">case</span>&nbsp;<span class="op" id="5594133">*</span><span class="ident" id="5594134"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5594139">.</span><span class="ident" id="5594140">RGBA64</span><span class="op" id="5594146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594150"><a href="/image/png/reader.go.html#5592859">srcPix</a></span>&nbsp;<span class="op" id="5594157">=</span>&nbsp;<span class="ident" id="5594159"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5594162">.</span><span class="op" id="5594163">(</span><span class="op" id="5594164">*</span><span class="ident" id="5594165"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5594170">.</span><span class="ident" id="5594171">RGBA64</span><span class="op" id="5594177">)</span><span class="op" id="5594178">.</span><span class="ident" id="5594179">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594185"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5594191">,</span>&nbsp;<span class="ident" id="5594193"><a href="/image/png/reader.go.html#5592907">stride</a></span><span class="op" id="5594199">,</span>&nbsp;<span class="ident" id="5594201"><a href="/image/png/reader.go.html#5592927">rect</a></span>&nbsp;<span class="op" id="5594206">=</span>&nbsp;<span class="ident" id="5594208"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594214">.</span><span class="ident" id="5594215">Pix</span><span class="op" id="5594218">,</span>&nbsp;<span class="ident" id="5594220"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594226">.</span><span class="ident" id="5594227">Stride</span><span class="op" id="5594233">,</span>&nbsp;<span class="ident" id="5594235"><a href="/image/png/reader.go.html#5592988">target</a></span><span class="op" id="5594241">.</span><span class="ident" id="5594242">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594249"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span>&nbsp;<span class="op" id="5594263">=</span>&nbsp;<span class="num" id="5594265">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5594268">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594271">s</span><span class="op" id="5594272">,</span>&nbsp;<span class="ident" id="5594274">bounds</span>&nbsp;<span class="op" id="5594281">:=</span>&nbsp;<span class="num" id="5594284">0</span><span class="op" id="5594285">,</span>&nbsp;<span class="ident" id="5594287"><a href="/image/png/reader.go.html#5592797">src</a></span><span class="op" id="5594290">.</span><span class="ident" id="5594291">Bounds</span><span class="op" id="5594297">(</span><span class="op" id="5594298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594301">for</span>&nbsp;<span class="ident" id="5594305">y</span>&nbsp;<span class="op" id="5594307">:=</span>&nbsp;<span class="ident" id="5594310"><a href="/image/png/reader.go.html#5594274">bounds</a></span><span class="op" id="5594316">.</span><span class="ident" id="5594317">Min</span><span class="op" id="5594320">.</span><span class="ident" id="5594321">Y</span><span class="op" id="5594322">;</span>&nbsp;<span class="ident" id="5594324"><a href="/image/png/reader.go.html#5594305">y</a></span>&nbsp;<span class="op" id="5594326">&lt;</span>&nbsp;<span class="ident" id="5594328"><a href="/image/png/reader.go.html#5594274">bounds</a></span><span class="op" id="5594334">.</span><span class="ident" id="5594335">Max</span><span class="op" id="5594338">.</span><span class="ident" id="5594339">Y</span><span class="op" id="5594340">;</span>&nbsp;<span class="ident" id="5594342"><a href="/image/png/reader.go.html#5594305">y</a></span><span class="op" id="5594343">++</span>&nbsp;<span class="op" id="5594346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594350">dBase</span>&nbsp;<span class="op" id="5594356">:=</span>&nbsp;<span class="op" id="5594359">(</span><span class="ident" id="5594360"><a href="/image/png/reader.go.html#5594305">y</a></span><span class="op" id="5594361">*</span><span class="ident" id="5594362"><a href="/image/png/reader.go.html#5592827">p</a></span><span class="op" id="5594363">.</span><span class="ident" id="5594364">yFactor</span><span class="op" id="5594371">+</span><span class="ident" id="5594372"><a href="/image/png/reader.go.html#5592827">p</a></span><span class="op" id="5594373">.</span><span class="ident" id="5594374">yOffset</span><span class="op" id="5594381">-</span><span class="ident" id="5594382"><a href="/image/png/reader.go.html#5592927">rect</a></span><span class="op" id="5594386">.</span><span class="ident" id="5594387">Min</span><span class="op" id="5594390">.</span><span class="ident" id="5594391">Y</span><span class="op" id="5594392">)</span><span class="op" id="5594393">*</span><span class="ident" id="5594394"><a href="/image/png/reader.go.html#5592907">stride</a></span>&nbsp;<span class="op" id="5594401">+</span>&nbsp;<span class="op" id="5594403">(</span><span class="ident" id="5594404"><a href="/image/png/reader.go.html#5592827">p</a></span><span class="op" id="5594405">.</span><span class="ident" id="5594406">xOffset</span><span class="op" id="5594413">-</span><span class="ident" id="5594414"><a href="/image/png/reader.go.html#5592927">rect</a></span><span class="op" id="5594418">.</span><span class="ident" id="5594419">Min</span><span class="op" id="5594422">.</span><span class="ident" id="5594423">X</span><span class="op" id="5594424">)</span><span class="op" id="5594425">*</span><span class="ident" id="5594426"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594442">for</span>&nbsp;<span class="ident" id="5594446">x</span>&nbsp;<span class="op" id="5594448">:=</span>&nbsp;<span class="ident" id="5594451"><a href="/image/png/reader.go.html#5594274">bounds</a></span><span class="op" id="5594457">.</span><span class="ident" id="5594458">Min</span><span class="op" id="5594461">.</span><span class="ident" id="5594462">X</span><span class="op" id="5594463">;</span>&nbsp;<span class="ident" id="5594465"><a href="/image/png/reader.go.html#5594446">x</a></span>&nbsp;<span class="op" id="5594467">&lt;</span>&nbsp;<span class="ident" id="5594469"><a href="/image/png/reader.go.html#5594274">bounds</a></span><span class="op" id="5594475">.</span><span class="ident" id="5594476">Max</span><span class="op" id="5594479">.</span><span class="ident" id="5594480">X</span><span class="op" id="5594481">;</span>&nbsp;<span class="ident" id="5594483"><a href="/image/png/reader.go.html#5594446">x</a></span><span class="op" id="5594484">++</span>&nbsp;<span class="op" id="5594487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594492">d</span>&nbsp;<span class="op" id="5594494">:=</span>&nbsp;<span class="ident" id="5594497"><a href="/image/png/reader.go.html#5594350">dBase</a></span>&nbsp;<span class="op" id="5594503">+</span>&nbsp;<span class="ident" id="5594505"><a href="/image/png/reader.go.html#5594446">x</a></span><span class="op" id="5594506">*</span><span class="ident" id="5594507"><a href="/image/png/reader.go.html#5592827">p</a></span><span class="op" id="5594508">.</span><span class="ident" id="5594509">xFactor</span><span class="op" id="5594516">*</span><span class="ident" id="5594517"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5594534">copy</span><span class="op" id="5594538">(</span><span class="ident" id="5594539"><a href="/image/png/reader.go.html#5592883">dstPix</a></span><span class="op" id="5594545">[</span><span class="ident" id="5594546"><a href="/image/png/reader.go.html#5594492">d</a></span><span class="op" id="5594547">:</span><span class="op" id="5594548">]</span><span class="op" id="5594549">,</span>&nbsp;<span class="ident" id="5594551"><a href="/image/png/reader.go.html#5592859">srcPix</a></span><span class="op" id="5594557">[</span><span class="ident" id="5594558"><a href="/image/png/reader.go.html#5594271">s</a></span><span class="op" id="5594559">:</span><span class="ident" id="5594560"><a href="/image/png/reader.go.html#5594271">s</a></span><span class="op" id="5594561">+</span><span class="ident" id="5594562"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span><span class="op" id="5594575">]</span><span class="op" id="5594576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594581"><a href="/image/png/reader.go.html#5594271">s</a></span>&nbsp;<span class="op" id="5594583">+=</span>&nbsp;<span class="ident" id="5594586"><a href="/image/png/reader.go.html#5592959">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5594602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5594605">}</span><br>
<span class="lineno"></span><span class="op" id="5594607">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="keyword" id="5594610">func</span>&nbsp;<span class="op" id="5594615">(</span><span class="ident" id="5594616">d</span>&nbsp;<span class="op" id="5594618">*</span><span class="ident" id="5594619"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5594626">)</span>&nbsp;<span class="ident" id="5594628">parseIDAT</span><span class="op" id="5594637">(</span><span class="ident" id="5594638">length</span>&nbsp;<span class="builtintype" id="5594645">uint32</span><span class="op" id="5594651">)</span>&nbsp;<span class="op" id="5594653">(</span><span class="ident" id="5594654">err</span>&nbsp;<span class="builtintype" id="5594658">error</span><span class="op" id="5594663">)</span>&nbsp;<span class="op" id="5594665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594668"><a href="/image/png/reader.go.html#5594616">d</a></span><span class="op" id="5594669">.</span><span class="ident" id="5594670">idatLength</span>&nbsp;<span class="op" id="5594681">=</span>&nbsp;<span class="ident" id="5594683"><a href="/image/png/reader.go.html#5594638">length</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594691"><a href="/image/png/reader.go.html#5594616">d</a></span><span class="op" id="5594692">.</span><span class="ident" id="5594693">img</span><span class="op" id="5594696">,</span>&nbsp;<span class="ident" id="5594698"><a href="/image/png/reader.go.html#5594654">err</a></span>&nbsp;<span class="op" id="5594702">=</span>&nbsp;<span class="ident" id="5594704"><a href="/image/png/reader.go.html#5594616">d</a></span><span class="op" id="5594705">.</span><span class="ident" id="5594706">decode</span><span class="op" id="5594712">(</span><span class="op" id="5594713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594716">if</span>&nbsp;<span class="ident" id="5594719"><a href="/image/png/reader.go.html#5594654">err</a></span>&nbsp;<span class="op" id="5594723">!=</span>&nbsp;<span class="ident" id="5594726">nil</span>&nbsp;<span class="op" id="5594730">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594734">return</span>&nbsp;<span class="ident" id="5594741"><a href="/image/png/reader.go.html#5594654">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5594746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594749">return</span>&nbsp;<span class="ident" id="5594756"><a href="/image/png/reader.go.html#5594616">d</a></span><span class="op" id="5594757">.</span><span class="ident" id="5594758">verifyChecksum</span><span class="op" id="5594772">(</span><span class="op" id="5594773">)</span><br>
<span class="lineno"></span><span class="op" id="5594775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">655</span><span class="keyword" id="5594778">func</span>&nbsp;<span class="op" id="5594783">(</span><span class="ident" id="5594784">d</span>&nbsp;<span class="op" id="5594786">*</span><span class="ident" id="5594787"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5594794">)</span>&nbsp;<span class="ident" id="5594796">parseIEND</span><span class="op" id="5594805">(</span><span class="ident" id="5594806">length</span>&nbsp;<span class="builtintype" id="5594813">uint32</span><span class="op" id="5594819">)</span>&nbsp;<span class="builtintype" id="5594821">error</span>&nbsp;<span class="op" id="5594827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594830">if</span>&nbsp;<span class="ident" id="5594833"><a href="/image/png/reader.go.html#5594806">length</a></span>&nbsp;<span class="op" id="5594840">!=</span>&nbsp;<span class="num" id="5594843">0</span>&nbsp;<span class="op" id="5594845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594849">return</span>&nbsp;<span class="ident" id="5594856"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5594867">(</span><span class="string" id="5594868">&#34;bad&nbsp;IEND&nbsp;length&#34;</span><span class="op" id="5594885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5594888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5594891">return</span>&nbsp;<span class="ident" id="5594898"><a href="/image/png/reader.go.html#5594784">d</a></span><span class="op" id="5594899">.</span><span class="ident" id="5594900">verifyChecksum</span><span class="op" id="5594914">(</span><span class="op" id="5594915">)</span><br>
<span class="lineno">660</span><span class="op" id="5594917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5594920">func</span>&nbsp;<span class="op" id="5594925">(</span><span class="ident" id="5594926">d</span>&nbsp;<span class="op" id="5594928">*</span><span class="ident" id="5594929"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5594936">)</span>&nbsp;<span class="ident" id="5594938">parseChunk</span><span class="op" id="5594948">(</span><span class="op" id="5594949">)</span>&nbsp;<span class="builtintype" id="5594951">error</span>&nbsp;<span class="op" id="5594957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5594960">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5594996">n</span><span class="op" id="5594997">,</span>&nbsp;<span class="ident" id="5594999">err</span>&nbsp;<span class="op" id="5595003">:=</span>&nbsp;<span class="ident" id="5595006"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5595008">.</span><span class="ident" id="5595009">ReadFull</span><span class="op" id="5595017">(</span><span class="ident" id="5595018"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595019">.</span><span class="ident" id="5595020">r</span><span class="op" id="5595021">,</span>&nbsp;<span class="ident" id="5595023"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595024">.</span><span class="ident" id="5595025">tmp</span><span class="op" id="5595028">[</span><span class="op" id="5595029">:</span><span class="num" id="5595030">8</span><span class="op" id="5595031">]</span><span class="op" id="5595032">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595035">if</span>&nbsp;<span class="ident" id="5595038"><a href="/image/png/reader.go.html#5594999">err</a></span>&nbsp;<span class="op" id="5595042">!=</span>&nbsp;<span class="ident" id="5595045">nil</span>&nbsp;<span class="op" id="5595049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595053">return</span>&nbsp;<span class="ident" id="5595060"><a href="/image/png/reader.go.html#5594999">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595068">length</span>&nbsp;<span class="op" id="5595075">:=</span>&nbsp;<span class="ident" id="5595078"><a href="/image/png/reader.go.html#5578143">binary</a></span><span class="op" id="5595084">.</span><span class="ident" id="5595085">BigEndian</span><span class="op" id="5595094">.</span><span class="ident" id="5595095">Uint32</span><span class="op" id="5595101">(</span><span class="ident" id="5595102"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595103">.</span><span class="ident" id="5595104">tmp</span><span class="op" id="5595107">[</span><span class="op" id="5595108">:</span><span class="num" id="5595109">4</span><span class="op" id="5595110">]</span><span class="op" id="5595111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595114"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595115">.</span><span class="ident" id="5595116">crc</span><span class="op" id="5595119">.</span><span class="ident" id="5595120">Reset</span><span class="op" id="5595125">(</span><span class="op" id="5595126">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595129"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595130">.</span><span class="ident" id="5595131">crc</span><span class="op" id="5595134">.</span><span class="ident" id="5595135">Write</span><span class="op" id="5595140">(</span><span class="ident" id="5595141"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595142">.</span><span class="ident" id="5595143">tmp</span><span class="op" id="5595146">[</span><span class="num" id="5595147">4</span><span class="op" id="5595148">:</span><span class="num" id="5595149">8</span><span class="op" id="5595150">]</span><span class="op" id="5595151">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5595155">//&nbsp;Read&nbsp;the&nbsp;chunk&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595180">switch</span>&nbsp;<span class="builtintype" id="5595187">string</span><span class="op" id="5595193">(</span><span class="ident" id="5595194"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595195">.</span><span class="ident" id="5595196">tmp</span><span class="op" id="5595199">[</span><span class="num" id="5595200">4</span><span class="op" id="5595201">:</span><span class="num" id="5595202">8</span><span class="op" id="5595203">]</span><span class="op" id="5595204">)</span>&nbsp;<span class="op" id="5595206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595209">case</span>&nbsp;<span class="string" id="5595214">&#34;IHDR&#34;</span><span class="op" id="5595220">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595224">if</span>&nbsp;<span class="ident" id="5595227"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595228">.</span><span class="ident" id="5595229">stage</span>&nbsp;<span class="op" id="5595235">!=</span>&nbsp;<span class="ident" id="5595238"><a href="/image/png/reader.go.html#5579492">dsStart</a></span>&nbsp;<span class="op" id="5595246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595251">return</span>&nbsp;<span class="ident" id="5595258"><a href="/image/png/reader.go.html#5580049">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595280"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595281">.</span><span class="ident" id="5595282">stage</span>&nbsp;<span class="op" id="5595288">=</span>&nbsp;<span class="ident" id="5595290"><a href="/image/png/reader.go.html#5579508">dsSeenIHDR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595303">return</span>&nbsp;<span class="ident" id="5595310"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595311">.</span><span class="ident" id="5595312">parseIHDR</span><span class="op" id="5595321">(</span><span class="ident" id="5595322"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5595328">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595331">case</span>&nbsp;<span class="string" id="5595336">&#34;PLTE&#34;</span><span class="op" id="5595342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595346">if</span>&nbsp;<span class="ident" id="5595349"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595350">.</span><span class="ident" id="5595351">stage</span>&nbsp;<span class="op" id="5595357">!=</span>&nbsp;<span class="ident" id="5595360"><a href="/image/png/reader.go.html#5579508">dsSeenIHDR</a></span>&nbsp;<span class="op" id="5595371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595376">return</span>&nbsp;<span class="ident" id="5595383"><a href="/image/png/reader.go.html#5580049">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595405"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595406">.</span><span class="ident" id="5595407">stage</span>&nbsp;<span class="op" id="5595413">=</span>&nbsp;<span class="ident" id="5595415"><a href="/image/png/reader.go.html#5579520">dsSeenPLTE</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595428">return</span>&nbsp;<span class="ident" id="5595435"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595436">.</span><span class="ident" id="5595437">parsePLTE</span><span class="op" id="5595446">(</span><span class="ident" id="5595447"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5595453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595456">case</span>&nbsp;<span class="string" id="5595461">&#34;tRNS&#34;</span><span class="op" id="5595467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595471">if</span>&nbsp;<span class="ident" id="5595474"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595475">.</span><span class="ident" id="5595476">stage</span>&nbsp;<span class="op" id="5595482">!=</span>&nbsp;<span class="ident" id="5595485"><a href="/image/png/reader.go.html#5579520">dsSeenPLTE</a></span>&nbsp;<span class="op" id="5595496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595501">return</span>&nbsp;<span class="ident" id="5595508"><a href="/image/png/reader.go.html#5580049">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595526">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595530">return</span>&nbsp;<span class="ident" id="5595537"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595538">.</span><span class="ident" id="5595539">parsetRNS</span><span class="op" id="5595548">(</span><span class="ident" id="5595549"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5595555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595558">case</span>&nbsp;<span class="string" id="5595563">&#34;IDAT&#34;</span><span class="op" id="5595569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595573">if</span>&nbsp;<span class="ident" id="5595576"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595577">.</span><span class="ident" id="5595578">stage</span>&nbsp;<span class="op" id="5595584">&lt;</span>&nbsp;<span class="ident" id="5595586"><a href="/image/png/reader.go.html#5579508">dsSeenIHDR</a></span>&nbsp;<span class="op" id="5595597">||</span>&nbsp;<span class="ident" id="5595600"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595601">.</span><span class="ident" id="5595602">stage</span>&nbsp;<span class="op" id="5595608">&gt;</span>&nbsp;<span class="ident" id="5595610"><a href="/image/png/reader.go.html#5579532">dsSeenIDAT</a></span>&nbsp;<span class="op" id="5595621">||</span>&nbsp;<span class="op" id="5595624">(</span><span class="ident" id="5595625"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595626">.</span><span class="ident" id="5595627">cb</span>&nbsp;<span class="op" id="5595630">==</span>&nbsp;<span class="ident" id="5595633"><a href="/image/png/reader.go.html#5578517">cbP8</a></span>&nbsp;<span class="op" id="5595638">&amp;&amp;</span>&nbsp;<span class="ident" id="5595641"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595642">.</span><span class="ident" id="5595643">stage</span>&nbsp;<span class="op" id="5595649">==</span>&nbsp;<span class="ident" id="5595652"><a href="/image/png/reader.go.html#5579508">dsSeenIHDR</a></span><span class="op" id="5595662">)</span>&nbsp;<span class="op" id="5595664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595669">return</span>&nbsp;<span class="ident" id="5595676"><a href="/image/png/reader.go.html#5580049">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595694">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595698"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595699">.</span><span class="ident" id="5595700">stage</span>&nbsp;<span class="op" id="5595706">=</span>&nbsp;<span class="ident" id="5595708"><a href="/image/png/reader.go.html#5579532">dsSeenIDAT</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595721">return</span>&nbsp;<span class="ident" id="5595728"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595729">.</span><span class="ident" id="5595730">parseIDAT</span><span class="op" id="5595739">(</span><span class="ident" id="5595740"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5595746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595749">case</span>&nbsp;<span class="string" id="5595754">&#34;IEND&#34;</span><span class="op" id="5595760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595764">if</span>&nbsp;<span class="ident" id="5595767"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595768">.</span><span class="ident" id="5595769">stage</span>&nbsp;<span class="op" id="5595775">!=</span>&nbsp;<span class="ident" id="5595778"><a href="/image/png/reader.go.html#5579532">dsSeenIDAT</a></span>&nbsp;<span class="op" id="5595789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595794">return</span>&nbsp;<span class="ident" id="5595801"><a href="/image/png/reader.go.html#5580049">chunkOrderError</a></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595823"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595824">.</span><span class="ident" id="5595825">stage</span>&nbsp;<span class="op" id="5595831">=</span>&nbsp;<span class="ident" id="5595833"><a href="/image/png/reader.go.html#5579544">dsSeenIEND</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595846">return</span>&nbsp;<span class="ident" id="5595853"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595854">.</span><span class="ident" id="5595855">parseIEND</span><span class="op" id="5595864">(</span><span class="ident" id="5595865"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5595871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5595874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5595877">//&nbsp;Ignore&nbsp;this&nbsp;chunk&nbsp;(of&nbsp;a&nbsp;known&nbsp;length).</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595920">var</span>&nbsp;<span class="ident" id="5595924">ignored</span>&nbsp;<span class="op" id="5595932">[</span><span class="num" id="5595933">4096</span><span class="op" id="5595937">]</span><span class="builtintype" id="5595938">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5595944">for</span>&nbsp;<span class="ident" id="5595948"><a href="/image/png/reader.go.html#5595068">length</a></span>&nbsp;<span class="op" id="5595955">&gt;</span>&nbsp;<span class="num" id="5595957">0</span>&nbsp;<span class="op" id="5595959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5595963"><a href="/image/png/reader.go.html#5594996">n</a></span><span class="op" id="5595964">,</span>&nbsp;<span class="ident" id="5595966"><a href="/image/png/reader.go.html#5594999">err</a></span>&nbsp;<span class="op" id="5595970">=</span>&nbsp;<span class="ident" id="5595972"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5595974">.</span><span class="ident" id="5595975">ReadFull</span><span class="op" id="5595983">(</span><span class="ident" id="5595984"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5595985">.</span><span class="ident" id="5595986">r</span><span class="op" id="5595987">,</span>&nbsp;<span class="ident" id="5595989"><a href="/image/png/reader.go.html#5595924">ignored</a></span><span class="op" id="5595996">[</span><span class="op" id="5595997">:</span><span class="ident" id="5595998"><a href="/image/png/reader.go.html#5580321">min</a></span><span class="op" id="5596001">(</span><span class="builtinfunc" id="5596002">len</span><span class="op" id="5596005">(</span><span class="ident" id="5596006"><a href="/image/png/reader.go.html#5595924">ignored</a></span><span class="op" id="5596013">)</span><span class="op" id="5596014">,</span>&nbsp;<span class="builtintype" id="5596016">int</span><span class="op" id="5596019">(</span><span class="ident" id="5596020"><a href="/image/png/reader.go.html#5595068">length</a></span><span class="op" id="5596026">)</span><span class="op" id="5596027">)</span><span class="op" id="5596028">]</span><span class="op" id="5596029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596033">if</span>&nbsp;<span class="ident" id="5596036"><a href="/image/png/reader.go.html#5594999">err</a></span>&nbsp;<span class="op" id="5596040">!=</span>&nbsp;<span class="ident" id="5596043">nil</span>&nbsp;<span class="op" id="5596047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596052">return</span>&nbsp;<span class="ident" id="5596059"><a href="/image/png/reader.go.html#5594999">err</a></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596069"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5596070">.</span><span class="ident" id="5596071">crc</span><span class="op" id="5596074">.</span><span class="ident" id="5596075">Write</span><span class="op" id="5596080">(</span><span class="ident" id="5596081"><a href="/image/png/reader.go.html#5595924">ignored</a></span><span class="op" id="5596088">[</span><span class="op" id="5596089">:</span><span class="ident" id="5596090"><a href="/image/png/reader.go.html#5594996">n</a></span><span class="op" id="5596091">]</span><span class="op" id="5596092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596096"><a href="/image/png/reader.go.html#5595068">length</a></span>&nbsp;<span class="op" id="5596103">-=</span>&nbsp;<span class="builtintype" id="5596106">uint32</span><span class="op" id="5596112">(</span><span class="ident" id="5596113"><a href="/image/png/reader.go.html#5594996">n</a></span><span class="op" id="5596114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596120">return</span>&nbsp;<span class="ident" id="5596127"><a href="/image/png/reader.go.html#5594926">d</a></span><span class="op" id="5596128">.</span><span class="ident" id="5596129">verifyChecksum</span><span class="op" id="5596143">(</span><span class="op" id="5596144">)</span><br>
<span class="lineno">715</span><span class="op" id="5596146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5596149">func</span>&nbsp;<span class="op" id="5596154">(</span><span class="ident" id="5596155">d</span>&nbsp;<span class="op" id="5596157">*</span><span class="ident" id="5596158"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5596165">)</span>&nbsp;<span class="ident" id="5596167">verifyChecksum</span><span class="op" id="5596181">(</span><span class="op" id="5596182">)</span>&nbsp;<span class="builtintype" id="5596184">error</span>&nbsp;<span class="op" id="5596190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596193">if</span>&nbsp;<span class="ident" id="5596196">_</span><span class="op" id="5596197">,</span>&nbsp;<span class="ident" id="5596199">err</span>&nbsp;<span class="op" id="5596203">:=</span>&nbsp;<span class="ident" id="5596206"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5596208">.</span><span class="ident" id="5596209">ReadFull</span><span class="op" id="5596217">(</span><span class="ident" id="5596218"><a href="/image/png/reader.go.html#5596155">d</a></span><span class="op" id="5596219">.</span><span class="ident" id="5596220">r</span><span class="op" id="5596221">,</span>&nbsp;<span class="ident" id="5596223"><a href="/image/png/reader.go.html#5596155">d</a></span><span class="op" id="5596224">.</span><span class="ident" id="5596225">tmp</span><span class="op" id="5596228">[</span><span class="op" id="5596229">:</span><span class="num" id="5596230">4</span><span class="op" id="5596231">]</span><span class="op" id="5596232">)</span><span class="op" id="5596233">;</span>&nbsp;<span class="ident" id="5596235"><a href="/image/png/reader.go.html#5596199">err</a></span>&nbsp;<span class="op" id="5596239">!=</span>&nbsp;<span class="ident" id="5596242">nil</span>&nbsp;<span class="op" id="5596246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596250">return</span>&nbsp;<span class="ident" id="5596257"><a href="/image/png/reader.go.html#5596199">err</a></span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596265">if</span>&nbsp;<span class="ident" id="5596268"><a href="/image/png/reader.go.html#5578143">binary</a></span><span class="op" id="5596274">.</span><span class="ident" id="5596275">BigEndian</span><span class="op" id="5596284">.</span><span class="ident" id="5596285">Uint32</span><span class="op" id="5596291">(</span><span class="ident" id="5596292"><a href="/image/png/reader.go.html#5596155">d</a></span><span class="op" id="5596293">.</span><span class="ident" id="5596294">tmp</span><span class="op" id="5596297">[</span><span class="op" id="5596298">:</span><span class="num" id="5596299">4</span><span class="op" id="5596300">]</span><span class="op" id="5596301">)</span>&nbsp;<span class="op" id="5596303">!=</span>&nbsp;<span class="ident" id="5596306"><a href="/image/png/reader.go.html#5596155">d</a></span><span class="op" id="5596307">.</span><span class="ident" id="5596308">crc</span><span class="op" id="5596311">.</span><span class="ident" id="5596312">Sum32</span><span class="op" id="5596317">(</span><span class="op" id="5596318">)</span>&nbsp;<span class="op" id="5596320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596324">return</span>&nbsp;<span class="ident" id="5596331"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5596342">(</span><span class="string" id="5596343">&#34;invalid&nbsp;checksum&#34;</span><span class="op" id="5596361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596367">return</span>&nbsp;<span class="ident" id="5596374">nil</span><br>
<span class="lineno">725</span><span class="op" id="5596378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5596381">func</span>&nbsp;<span class="op" id="5596386">(</span><span class="ident" id="5596387">d</span>&nbsp;<span class="op" id="5596389">*</span><span class="ident" id="5596390"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5596397">)</span>&nbsp;<span class="ident" id="5596399">checkHeader</span><span class="op" id="5596410">(</span><span class="op" id="5596411">)</span>&nbsp;<span class="builtintype" id="5596413">error</span>&nbsp;<span class="op" id="5596419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596422">_</span><span class="op" id="5596423">,</span>&nbsp;<span class="ident" id="5596425">err</span>&nbsp;<span class="op" id="5596429">:=</span>&nbsp;<span class="ident" id="5596432"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5596434">.</span><span class="ident" id="5596435">ReadFull</span><span class="op" id="5596443">(</span><span class="ident" id="5596444"><a href="/image/png/reader.go.html#5596387">d</a></span><span class="op" id="5596445">.</span><span class="ident" id="5596446">r</span><span class="op" id="5596447">,</span>&nbsp;<span class="ident" id="5596449"><a href="/image/png/reader.go.html#5596387">d</a></span><span class="op" id="5596450">.</span><span class="ident" id="5596451">tmp</span><span class="op" id="5596454">[</span><span class="op" id="5596455">:</span><span class="builtinfunc" id="5596456">len</span><span class="op" id="5596459">(</span><span class="ident" id="5596460"><a href="/image/png/reader.go.html#5579564">pngHeader</a></span><span class="op" id="5596469">)</span><span class="op" id="5596470">]</span><span class="op" id="5596471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596474">if</span>&nbsp;<span class="ident" id="5596477"><a href="/image/png/reader.go.html#5596425">err</a></span>&nbsp;<span class="op" id="5596481">!=</span>&nbsp;<span class="ident" id="5596484">nil</span>&nbsp;<span class="op" id="5596488">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596492">return</span>&nbsp;<span class="ident" id="5596499"><a href="/image/png/reader.go.html#5596425">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596507">if</span>&nbsp;<span class="builtintype" id="5596510">string</span><span class="op" id="5596516">(</span><span class="ident" id="5596517"><a href="/image/png/reader.go.html#5596387">d</a></span><span class="op" id="5596518">.</span><span class="ident" id="5596519">tmp</span><span class="op" id="5596522">[</span><span class="op" id="5596523">:</span><span class="builtinfunc" id="5596524">len</span><span class="op" id="5596527">(</span><span class="ident" id="5596528"><a href="/image/png/reader.go.html#5579564">pngHeader</a></span><span class="op" id="5596537">)</span><span class="op" id="5596538">]</span><span class="op" id="5596539">)</span>&nbsp;<span class="op" id="5596541">!=</span>&nbsp;<span class="ident" id="5596544"><a href="/image/png/reader.go.html#5579564">pngHeader</a></span>&nbsp;<span class="op" id="5596554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596558">return</span>&nbsp;<span class="ident" id="5596565"><a href="/image/png/reader.go.html#5579941">FormatError</a></span><span class="op" id="5596576">(</span><span class="string" id="5596577">&#34;not&nbsp;a&nbsp;PNG&nbsp;file&#34;</span><span class="op" id="5596593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596596">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596599">return</span>&nbsp;<span class="ident" id="5596606">nil</span><br>
<span class="lineno"></span><span class="op" id="5596610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5596613">//&nbsp;Decode&nbsp;reads&nbsp;a&nbsp;PNG&nbsp;image&nbsp;from&nbsp;r&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;an&nbsp;image.Image.</span><br>
<span class="lineno"></span><span class="comment" id="5596682">//&nbsp;The&nbsp;type&nbsp;of&nbsp;Image&nbsp;returned&nbsp;depends&nbsp;on&nbsp;the&nbsp;PNG&nbsp;contents.</span><br>
<span class="lineno">740</span><span class="keyword" id="5596741">func</span>&nbsp;<span class="ident" id="5596746">Decode</span><span class="op" id="5596752">(</span><span class="ident" id="5596753">r</span>&nbsp;<span class="ident" id="5596755"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5596757">.</span><span class="ident" id="5596758">Reader</span><span class="op" id="5596764">)</span>&nbsp;<span class="op" id="5596766">(</span><span class="ident" id="5596767"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5596772">.</span><span class="ident" id="5596773">Image</span><span class="op" id="5596778">,</span>&nbsp;<span class="builtintype" id="5596780">error</span><span class="op" id="5596785">)</span>&nbsp;<span class="op" id="5596787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596790">d</span>&nbsp;<span class="op" id="5596792">:=</span>&nbsp;<span class="op" id="5596795">&amp;</span><span class="ident" id="5596796"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5596803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596807">r</span><span class="op" id="5596808">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5596812"><a href="/image/png/reader.go.html#5596753">r</a></span><span class="op" id="5596813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596817">crc</span><span class="op" id="5596820">:</span>&nbsp;<span class="ident" id="5596822"><a href="/image/png/reader.go.html#5578177">crc32</a></span><span class="op" id="5596827">.</span><span class="ident" id="5596828">NewIEEE</span><span class="op" id="5596835">(</span><span class="op" id="5596836">)</span><span class="op" id="5596837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596840">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596843">if</span>&nbsp;<span class="ident" id="5596846">err</span>&nbsp;<span class="op" id="5596850">:=</span>&nbsp;<span class="ident" id="5596853"><a href="/image/png/reader.go.html#5596790">d</a></span><span class="op" id="5596854">.</span><span class="ident" id="5596855">checkHeader</span><span class="op" id="5596866">(</span><span class="op" id="5596867">)</span><span class="op" id="5596868">;</span>&nbsp;<span class="ident" id="5596870"><a href="/image/png/reader.go.html#5596846">err</a></span>&nbsp;<span class="op" id="5596874">!=</span>&nbsp;<span class="ident" id="5596877">nil</span>&nbsp;<span class="op" id="5596881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596885">if</span>&nbsp;<span class="ident" id="5596888"><a href="/image/png/reader.go.html#5596846">err</a></span>&nbsp;<span class="op" id="5596892">==</span>&nbsp;<span class="ident" id="5596895"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5596897">.</span><span class="ident" id="5596898">EOF</span>&nbsp;<span class="op" id="5596902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5596907"><a href="/image/png/reader.go.html#5596846">err</a></span>&nbsp;<span class="op" id="5596911">=</span>&nbsp;<span class="ident" id="5596913"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5596915">.</span><span class="ident" id="5596916">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596939">return</span>&nbsp;<span class="ident" id="5596946">nil</span><span class="op" id="5596949">,</span>&nbsp;<span class="ident" id="5596951"><a href="/image/png/reader.go.html#5596846">err</a></span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596959">for</span>&nbsp;<span class="ident" id="5596963"><a href="/image/png/reader.go.html#5596790">d</a></span><span class="op" id="5596964">.</span><span class="ident" id="5596965">stage</span>&nbsp;<span class="op" id="5596971">!=</span>&nbsp;<span class="ident" id="5596974"><a href="/image/png/reader.go.html#5579544">dsSeenIEND</a></span>&nbsp;<span class="op" id="5596985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5596989">if</span>&nbsp;<span class="ident" id="5596992">err</span>&nbsp;<span class="op" id="5596996">:=</span>&nbsp;<span class="ident" id="5596999"><a href="/image/png/reader.go.html#5596790">d</a></span><span class="op" id="5597000">.</span><span class="ident" id="5597001">parseChunk</span><span class="op" id="5597011">(</span><span class="op" id="5597012">)</span><span class="op" id="5597013">;</span>&nbsp;<span class="ident" id="5597015"><a href="/image/png/reader.go.html#5596992">err</a></span>&nbsp;<span class="op" id="5597019">!=</span>&nbsp;<span class="ident" id="5597022">nil</span>&nbsp;<span class="op" id="5597026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597031">if</span>&nbsp;<span class="ident" id="5597034"><a href="/image/png/reader.go.html#5596992">err</a></span>&nbsp;<span class="op" id="5597038">==</span>&nbsp;<span class="ident" id="5597041"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597043">.</span><span class="ident" id="5597044">EOF</span>&nbsp;<span class="op" id="5597048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597054"><a href="/image/png/reader.go.html#5596992">err</a></span>&nbsp;<span class="op" id="5597058">=</span>&nbsp;<span class="ident" id="5597060"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597062">.</span><span class="ident" id="5597063">ErrUnexpectedEOF</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597088">return</span>&nbsp;<span class="ident" id="5597095">nil</span><span class="op" id="5597098">,</span>&nbsp;<span class="ident" id="5597100"><a href="/image/png/reader.go.html#5596992">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597112">return</span>&nbsp;<span class="ident" id="5597119"><a href="/image/png/reader.go.html#5596790">d</a></span><span class="op" id="5597120">.</span><span class="ident" id="5597121">img</span><span class="op" id="5597124">,</span>&nbsp;<span class="ident" id="5597126">nil</span><br>
<span class="lineno">760</span><span class="op" id="5597130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5597133">//&nbsp;DecodeConfig&nbsp;returns&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;a&nbsp;PNG&nbsp;image&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="5597211">//&nbsp;decoding&nbsp;the&nbsp;entire&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5597241">func</span>&nbsp;<span class="ident" id="5597246">DecodeConfig</span><span class="op" id="5597258">(</span><span class="ident" id="5597259">r</span>&nbsp;<span class="ident" id="5597261"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597263">.</span><span class="ident" id="5597264">Reader</span><span class="op" id="5597270">)</span>&nbsp;<span class="op" id="5597272">(</span><span class="ident" id="5597273"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5597278">.</span><span class="ident" id="5597279">Config</span><span class="op" id="5597285">,</span>&nbsp;<span class="builtintype" id="5597287">error</span><span class="op" id="5597292">)</span>&nbsp;<span class="op" id="5597294">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597297">d</span>&nbsp;<span class="op" id="5597299">:=</span>&nbsp;<span class="op" id="5597302">&amp;</span><span class="ident" id="5597303"><a href="/image/png/reader.go.html#5579602">decoder</a></span><span class="op" id="5597310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597314">r</span><span class="op" id="5597315">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5597319"><a href="/image/png/reader.go.html#5597259">r</a></span><span class="op" id="5597320">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597324">crc</span><span class="op" id="5597327">:</span>&nbsp;<span class="ident" id="5597329"><a href="/image/png/reader.go.html#5578177">crc32</a></span><span class="op" id="5597334">.</span><span class="ident" id="5597335">NewIEEE</span><span class="op" id="5597342">(</span><span class="op" id="5597343">)</span><span class="op" id="5597344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597350">if</span>&nbsp;<span class="ident" id="5597353">err</span>&nbsp;<span class="op" id="5597357">:=</span>&nbsp;<span class="ident" id="5597360"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597361">.</span><span class="ident" id="5597362">checkHeader</span><span class="op" id="5597373">(</span><span class="op" id="5597374">)</span><span class="op" id="5597375">;</span>&nbsp;<span class="ident" id="5597377"><a href="/image/png/reader.go.html#5597353">err</a></span>&nbsp;<span class="op" id="5597381">!=</span>&nbsp;<span class="ident" id="5597384">nil</span>&nbsp;<span class="op" id="5597388">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597392">if</span>&nbsp;<span class="ident" id="5597395"><a href="/image/png/reader.go.html#5597353">err</a></span>&nbsp;<span class="op" id="5597399">==</span>&nbsp;<span class="ident" id="5597402"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597404">.</span><span class="ident" id="5597405">EOF</span>&nbsp;<span class="op" id="5597409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597414"><a href="/image/png/reader.go.html#5597353">err</a></span>&nbsp;<span class="op" id="5597418">=</span>&nbsp;<span class="ident" id="5597420"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597422">.</span><span class="ident" id="5597423">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597446">return</span>&nbsp;<span class="ident" id="5597453"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5597458">.</span><span class="ident" id="5597459">Config</span><span class="op" id="5597465">{</span><span class="op" id="5597466">}</span><span class="op" id="5597467">,</span>&nbsp;<span class="ident" id="5597469"><a href="/image/png/reader.go.html#5597353">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597474">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597477">for</span>&nbsp;<span class="op" id="5597481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597485">if</span>&nbsp;<span class="ident" id="5597488">err</span>&nbsp;<span class="op" id="5597492">:=</span>&nbsp;<span class="ident" id="5597495"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597496">.</span><span class="ident" id="5597497">parseChunk</span><span class="op" id="5597507">(</span><span class="op" id="5597508">)</span><span class="op" id="5597509">;</span>&nbsp;<span class="ident" id="5597511"><a href="/image/png/reader.go.html#5597488">err</a></span>&nbsp;<span class="op" id="5597515">!=</span>&nbsp;<span class="ident" id="5597518">nil</span>&nbsp;<span class="op" id="5597522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597527">if</span>&nbsp;<span class="ident" id="5597530"><a href="/image/png/reader.go.html#5597488">err</a></span>&nbsp;<span class="op" id="5597534">==</span>&nbsp;<span class="ident" id="5597537"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597539">.</span><span class="ident" id="5597540">EOF</span>&nbsp;<span class="op" id="5597544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597550"><a href="/image/png/reader.go.html#5597488">err</a></span>&nbsp;<span class="op" id="5597554">=</span>&nbsp;<span class="ident" id="5597556"><a href="/image/png/reader.go.html#5578215">io</a></span><span class="op" id="5597558">.</span><span class="ident" id="5597559">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597579">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597584">return</span>&nbsp;<span class="ident" id="5597591"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5597596">.</span><span class="ident" id="5597597">Config</span><span class="op" id="5597603">{</span><span class="op" id="5597604">}</span><span class="op" id="5597605">,</span>&nbsp;<span class="ident" id="5597607"><a href="/image/png/reader.go.html#5597488">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597617">paletted</span>&nbsp;<span class="op" id="5597626">:=</span>&nbsp;<span class="ident" id="5597629"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597630">.</span><span class="ident" id="5597631">cb</span>&nbsp;<span class="op" id="5597634">==</span>&nbsp;<span class="ident" id="5597637"><a href="/image/png/reader.go.html#5578517">cbP8</a></span>&nbsp;<span class="op" id="5597642">||</span>&nbsp;<span class="ident" id="5597645"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597646">.</span><span class="ident" id="5597647">cb</span>&nbsp;<span class="op" id="5597650">==</span>&nbsp;<span class="ident" id="5597653"><a href="/image/png/reader.go.html#5578511">cbP4</a></span>&nbsp;<span class="op" id="5597658">||</span>&nbsp;<span class="ident" id="5597661"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597662">.</span><span class="ident" id="5597663">cb</span>&nbsp;<span class="op" id="5597666">==</span>&nbsp;<span class="ident" id="5597669"><a href="/image/png/reader.go.html#5578505">cbP2</a></span>&nbsp;<span class="op" id="5597674">||</span>&nbsp;<span class="ident" id="5597677"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597678">.</span><span class="ident" id="5597679">cb</span>&nbsp;<span class="op" id="5597682">==</span>&nbsp;<span class="ident" id="5597685"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597692">if</span>&nbsp;<span class="ident" id="5597695"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597696">.</span><span class="ident" id="5597697">stage</span>&nbsp;<span class="op" id="5597703">==</span>&nbsp;<span class="ident" id="5597706"><a href="/image/png/reader.go.html#5579508">dsSeenIHDR</a></span>&nbsp;<span class="op" id="5597717">&amp;&amp;</span>&nbsp;<span class="op" id="5597720">!</span><span class="ident" id="5597721"><a href="/image/png/reader.go.html#5597617">paletted</a></span>&nbsp;<span class="op" id="5597730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597735">break</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597747">if</span>&nbsp;<span class="ident" id="5597750"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597751">.</span><span class="ident" id="5597752">stage</span>&nbsp;<span class="op" id="5597758">==</span>&nbsp;<span class="ident" id="5597761"><a href="/image/png/reader.go.html#5579520">dsSeenPLTE</a></span>&nbsp;<span class="op" id="5597772">&amp;&amp;</span>&nbsp;<span class="ident" id="5597775"><a href="/image/png/reader.go.html#5597617">paletted</a></span>&nbsp;<span class="op" id="5597784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597789">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5597800">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597803">var</span>&nbsp;<span class="ident" id="5597807">cm</span>&nbsp;<span class="ident" id="5597810"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5597815">.</span><span class="ident" id="5597816">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597823">switch</span>&nbsp;<span class="ident" id="5597830"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5597831">.</span><span class="ident" id="5597832">cb</span>&nbsp;<span class="op" id="5597835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597838">case</span>&nbsp;<span class="ident" id="5597843"><a href="/image/png/reader.go.html#5578461">cbG1</a></span><span class="op" id="5597847">,</span>&nbsp;<span class="ident" id="5597849"><a href="/image/png/reader.go.html#5578467">cbG2</a></span><span class="op" id="5597853">,</span>&nbsp;<span class="ident" id="5597855"><a href="/image/png/reader.go.html#5578473">cbG4</a></span><span class="op" id="5597859">,</span>&nbsp;<span class="ident" id="5597861"><a href="/image/png/reader.go.html#5578479">cbG8</a></span><span class="op" id="5597865">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597869"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5597872">=</span>&nbsp;<span class="ident" id="5597874"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5597879">.</span><span class="ident" id="5597880">GrayModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597891">case</span>&nbsp;<span class="ident" id="5597896"><a href="/image/png/reader.go.html#5578485">cbGA8</a></span><span class="op" id="5597901">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597905"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5597908">=</span>&nbsp;<span class="ident" id="5597910"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5597915">.</span><span class="ident" id="5597916">NRGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597928">case</span>&nbsp;<span class="ident" id="5597933"><a href="/image/png/reader.go.html#5578492">cbTC8</a></span><span class="op" id="5597938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597942"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5597945">=</span>&nbsp;<span class="ident" id="5597947"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5597952">.</span><span class="ident" id="5597953">RGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5597964">case</span>&nbsp;<span class="ident" id="5597969"><a href="/image/png/reader.go.html#5578499">cbP1</a></span><span class="op" id="5597973">,</span>&nbsp;<span class="ident" id="5597975"><a href="/image/png/reader.go.html#5578505">cbP2</a></span><span class="op" id="5597979">,</span>&nbsp;<span class="ident" id="5597981"><a href="/image/png/reader.go.html#5578511">cbP4</a></span><span class="op" id="5597985">,</span>&nbsp;<span class="ident" id="5597987"><a href="/image/png/reader.go.html#5578517">cbP8</a></span><span class="op" id="5597991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5597995"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5597998">=</span>&nbsp;<span class="ident" id="5598000"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5598001">.</span><span class="ident" id="5598002">palette</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598011">case</span>&nbsp;<span class="ident" id="5598016"><a href="/image/png/reader.go.html#5578523">cbTCA8</a></span><span class="op" id="5598022">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598026"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5598029">=</span>&nbsp;<span class="ident" id="5598031"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5598036">.</span><span class="ident" id="5598037">NRGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598049">case</span>&nbsp;<span class="ident" id="5598054"><a href="/image/png/reader.go.html#5578531">cbG16</a></span><span class="op" id="5598059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598063"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5598066">=</span>&nbsp;<span class="ident" id="5598068"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5598073">.</span><span class="ident" id="5598074">Gray16Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598087">case</span>&nbsp;<span class="ident" id="5598092"><a href="/image/png/reader.go.html#5578538">cbGA16</a></span><span class="op" id="5598098">:</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598102"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5598105">=</span>&nbsp;<span class="ident" id="5598107"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5598112">.</span><span class="ident" id="5598113">NRGBA64Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598127">case</span>&nbsp;<span class="ident" id="5598132"><a href="/image/png/reader.go.html#5578546">cbTC16</a></span><span class="op" id="5598138">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598142"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5598145">=</span>&nbsp;<span class="ident" id="5598147"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5598152">.</span><span class="ident" id="5598153">RGBA64Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598166">case</span>&nbsp;<span class="ident" id="5598171"><a href="/image/png/reader.go.html#5578554">cbTCA16</a></span><span class="op" id="5598178">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598182"><a href="/image/png/reader.go.html#5597807">cm</a></span>&nbsp;<span class="op" id="5598185">=</span>&nbsp;<span class="ident" id="5598187"><a href="/image/png/reader.go.html#5578200">color</a></span><span class="op" id="5598192">.</span><span class="ident" id="5598193">NRGBA64Model</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5598207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5598210">return</span>&nbsp;<span class="ident" id="5598217"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5598222">.</span><span class="ident" id="5598223">Config</span><span class="op" id="5598229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598233">ColorModel</span><span class="op" id="5598243">:</span>&nbsp;<span class="ident" id="5598245"><a href="/image/png/reader.go.html#5597807">cm</a></span><span class="op" id="5598247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598251">Width</span><span class="op" id="5598256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5598263"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5598264">.</span><span class="ident" id="5598265">width</span><span class="op" id="5598270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598274">Height</span><span class="op" id="5598280">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5598286"><a href="/image/png/reader.go.html#5597297">d</a></span><span class="op" id="5598287">.</span><span class="ident" id="5598288">height</span><span class="op" id="5598294">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5598297">}</span><span class="op" id="5598298">,</span>&nbsp;<span class="ident" id="5598300">nil</span><br>
<span class="lineno"></span><span class="op" id="5598304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5598307">func</span>&nbsp;<span class="ident" id="5598312">init</span><span class="op" id="5598316">(</span><span class="op" id="5598317">)</span>&nbsp;<span class="op" id="5598319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5598322"><a href="/image/png/reader.go.html#5578191">image</a></span><span class="op" id="5598327">.</span><span class="ident" id="5598328">RegisterFormat</span><span class="op" id="5598342">(</span><span class="string" id="5598343">&#34;png&#34;</span><span class="op" id="5598348">,</span>&nbsp;<span class="ident" id="5598350"><a href="/image/png/reader.go.html#5579564">pngHeader</a></span><span class="op" id="5598359">,</span>&nbsp;<span class="ident" id="5598361"><a href="/image/png/reader.go.html#5596746">Decode</a></span><span class="op" id="5598367">,</span>&nbsp;<span class="ident" id="5598369"><a href="/image/png/reader.go.html#5597246">DecodeConfig</a></span><span class="op" id="5598381">)</span><br>
<span class="lineno">820</span><span class="op" id="5598383">}</span>
</div>
</body>
</html>
