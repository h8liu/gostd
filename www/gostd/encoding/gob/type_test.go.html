<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8501265">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8501320">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8501374">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8501425">package</span>&nbsp;<span class="ident" id="8501433">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501438">import</span>&nbsp;<span class="op" id="8501445">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8501448">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8501457">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8501468">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8501478">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501481">type</span>&nbsp;<span class="ident" id="8501486">typeT</span>&nbsp;<span class="keyword" id="8501492">struct</span>&nbsp;<span class="op" id="8501499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501502">id</span>&nbsp;&nbsp;<span class="ident" id="8501506">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501514">str</span>&nbsp;<span class="builtintype" id="8501518">string</span><br>
<span class="lineno"></span><span class="op" id="8501525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501528">var</span>&nbsp;<span class="ident" id="8501532">basicTypes</span>&nbsp;<span class="op" id="8501543">=</span>&nbsp;<span class="op" id="8501545">[</span><span class="op" id="8501546">]</span><span class="ident" id="8501547">typeT</span><span class="op" id="8501552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501555">{</span><span class="ident" id="8501556">tBool</span><span class="op" id="8501561">,</span>&nbsp;<span class="string" id="8501563">&#34;bool&#34;</span><span class="op" id="8501569">}</span><span class="op" id="8501570">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501573">{</span><span class="ident" id="8501574">tInt</span><span class="op" id="8501578">,</span>&nbsp;<span class="string" id="8501580">&#34;int&#34;</span><span class="op" id="8501585">}</span><span class="op" id="8501586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501589">{</span><span class="ident" id="8501590">tUint</span><span class="op" id="8501595">,</span>&nbsp;<span class="string" id="8501597">&#34;uint&#34;</span><span class="op" id="8501603">}</span><span class="op" id="8501604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501607">{</span><span class="ident" id="8501608">tFloat</span><span class="op" id="8501614">,</span>&nbsp;<span class="string" id="8501616">&#34;float&#34;</span><span class="op" id="8501623">}</span><span class="op" id="8501624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501627">{</span><span class="ident" id="8501628">tBytes</span><span class="op" id="8501634">,</span>&nbsp;<span class="string" id="8501636">&#34;bytes&#34;</span><span class="op" id="8501643">}</span><span class="op" id="8501644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501647">{</span><span class="ident" id="8501648">tString</span><span class="op" id="8501655">,</span>&nbsp;<span class="string" id="8501657">&#34;string&#34;</span><span class="op" id="8501665">}</span><span class="op" id="8501666">,</span><br>
<span class="lineno">25</span><span class="op" id="8501668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8501671">func</span>&nbsp;<span class="ident" id="8501676">getTypeUnlocked</span><span class="op" id="8501691">(</span><span class="ident" id="8501692">name</span>&nbsp;<span class="builtintype" id="8501697">string</span><span class="op" id="8501703">,</span>&nbsp;<span class="ident" id="8501705">rt</span>&nbsp;<span class="ident" id="8501708">reflect</span><span class="op" id="8501715">.</span><span class="ident" id="8501716">Type</span><span class="op" id="8501720">)</span>&nbsp;<span class="ident" id="8501722">gobType</span>&nbsp;<span class="op" id="8501730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501733">typeLock</span><span class="op" id="8501741">.</span><span class="ident" id="8501742">Lock</span><span class="op" id="8501746">(</span><span class="op" id="8501747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501750">defer</span>&nbsp;<span class="ident" id="8501756">typeLock</span><span class="op" id="8501764">.</span><span class="ident" id="8501765">Unlock</span><span class="op" id="8501771">(</span><span class="op" id="8501772">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501775">t</span><span class="op" id="8501776">,</span>&nbsp;<span class="ident" id="8501778">err</span>&nbsp;<span class="op" id="8501782">:=</span>&nbsp;<span class="ident" id="8501785">getBaseType</span><span class="op" id="8501796">(</span><span class="ident" id="8501797">name</span><span class="op" id="8501801">,</span>&nbsp;<span class="ident" id="8501803">rt</span><span class="op" id="8501805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501808">if</span>&nbsp;<span class="ident" id="8501811">err</span>&nbsp;<span class="op" id="8501815">!=</span>&nbsp;<span class="ident" id="8501818">nil</span>&nbsp;<span class="op" id="8501822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8501826">panic</span><span class="op" id="8501831">(</span><span class="string" id="8501832">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8501852">+</span>&nbsp;<span class="ident" id="8501854">err</span><span class="op" id="8501857">.</span><span class="ident" id="8501858">Error</span><span class="op" id="8501863">(</span><span class="op" id="8501864">)</span><span class="op" id="8501865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8501868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501871">return</span>&nbsp;<span class="ident" id="8501878">t</span><br>
<span class="lineno">35</span><span class="op" id="8501880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8501883">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8501900">func</span>&nbsp;<span class="ident" id="8501905">TestBasic</span><span class="op" id="8501914">(</span><span class="ident" id="8501915">t</span>&nbsp;<span class="op" id="8501917">*</span><span class="ident" id="8501918">testing</span><span class="op" id="8501925">.</span><span class="ident" id="8501926">T</span><span class="op" id="8501927">)</span>&nbsp;<span class="op" id="8501929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501932">for</span>&nbsp;<span class="ident" id="8501936">_</span><span class="op" id="8501937">,</span>&nbsp;<span class="ident" id="8501939">tt</span>&nbsp;<span class="op" id="8501942">:=</span>&nbsp;<span class="keyword" id="8501945">range</span>&nbsp;<span class="ident" id="8501951">basicTypes</span>&nbsp;<span class="op" id="8501962">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8501966">if</span>&nbsp;<span class="ident" id="8501969">tt</span><span class="op" id="8501971">.</span><span class="ident" id="8501972">id</span><span class="op" id="8501974">.</span><span class="builtintype" id="8501975">string</span><span class="op" id="8501981">(</span><span class="op" id="8501982">)</span>&nbsp;<span class="op" id="8501984">!=</span>&nbsp;<span class="ident" id="8501987">tt</span><span class="op" id="8501989">.</span><span class="ident" id="8501990">str</span>&nbsp;<span class="op" id="8501994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8501999">t</span><span class="op" id="8502000">.</span><span class="ident" id="8502001">Errorf</span><span class="op" id="8502007">(</span><span class="string" id="8502008">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8502039">,</span>&nbsp;<span class="ident" id="8502041">tt</span><span class="op" id="8502043">.</span><span class="ident" id="8502044">str</span><span class="op" id="8502047">,</span>&nbsp;<span class="ident" id="8502049">tt</span><span class="op" id="8502051">.</span><span class="ident" id="8502052">id</span><span class="op" id="8502054">.</span><span class="builtintype" id="8502055">string</span><span class="op" id="8502061">(</span><span class="op" id="8502062">)</span><span class="op" id="8502063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502071">if</span>&nbsp;<span class="ident" id="8502074">tt</span><span class="op" id="8502076">.</span><span class="ident" id="8502077">id</span>&nbsp;<span class="op" id="8502080">==</span>&nbsp;<span class="num" id="8502083">0</span>&nbsp;<span class="op" id="8502085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502090">t</span><span class="op" id="8502091">.</span><span class="ident" id="8502092">Errorf</span><span class="op" id="8502098">(</span><span class="string" id="8502099">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8502118">,</span>&nbsp;<span class="ident" id="8502120">tt</span><span class="op" id="8502122">.</span><span class="ident" id="8502123">str</span><span class="op" id="8502126">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502133">}</span><br>
<span class="lineno"></span><span class="op" id="8502135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8502138">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8502206">func</span>&nbsp;<span class="ident" id="8502211">TestReregistration</span><span class="op" id="8502229">(</span><span class="ident" id="8502230">t</span>&nbsp;<span class="op" id="8502232">*</span><span class="ident" id="8502233">testing</span><span class="op" id="8502240">.</span><span class="ident" id="8502241">T</span><span class="op" id="8502242">)</span>&nbsp;<span class="op" id="8502244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502247">newtyp</span>&nbsp;<span class="op" id="8502254">:=</span>&nbsp;<span class="ident" id="8502257">getTypeUnlocked</span><span class="op" id="8502272">(</span><span class="string" id="8502273">&#34;int&#34;</span><span class="op" id="8502278">,</span>&nbsp;<span class="ident" id="8502280">reflect</span><span class="op" id="8502287">.</span><span class="ident" id="8502288">TypeOf</span><span class="op" id="8502294">(</span><span class="builtintype" id="8502295">int</span><span class="op" id="8502298">(</span><span class="num" id="8502299">0</span><span class="op" id="8502300">)</span><span class="op" id="8502301">)</span><span class="op" id="8502302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502305">if</span>&nbsp;<span class="ident" id="8502308">newtyp</span>&nbsp;<span class="op" id="8502315">!=</span>&nbsp;<span class="ident" id="8502318">tInt</span><span class="op" id="8502322">.</span><span class="ident" id="8502323">gobType</span><span class="op" id="8502330">(</span><span class="op" id="8502331">)</span>&nbsp;<span class="op" id="8502333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502337">t</span><span class="op" id="8502338">.</span><span class="ident" id="8502339">Errorf</span><span class="op" id="8502345">(</span><span class="string" id="8502346">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8502381">,</span>&nbsp;<span class="ident" id="8502383">newtyp</span><span class="op" id="8502389">.</span><span class="builtintype" id="8502390">string</span><span class="op" id="8502396">(</span><span class="op" id="8502397">)</span><span class="op" id="8502398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502401">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502404">newtyp</span>&nbsp;<span class="op" id="8502411">=</span>&nbsp;<span class="ident" id="8502413">getTypeUnlocked</span><span class="op" id="8502428">(</span><span class="string" id="8502429">&#34;uint&#34;</span><span class="op" id="8502435">,</span>&nbsp;<span class="ident" id="8502437">reflect</span><span class="op" id="8502444">.</span><span class="ident" id="8502445">TypeOf</span><span class="op" id="8502451">(</span><span class="builtintype" id="8502452">uint</span><span class="op" id="8502456">(</span><span class="num" id="8502457">0</span><span class="op" id="8502458">)</span><span class="op" id="8502459">)</span><span class="op" id="8502460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502463">if</span>&nbsp;<span class="ident" id="8502466">newtyp</span>&nbsp;<span class="op" id="8502473">!=</span>&nbsp;<span class="ident" id="8502476">tUint</span><span class="op" id="8502481">.</span><span class="ident" id="8502482">gobType</span><span class="op" id="8502489">(</span><span class="op" id="8502490">)</span>&nbsp;<span class="op" id="8502492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502496">t</span><span class="op" id="8502497">.</span><span class="ident" id="8502498">Errorf</span><span class="op" id="8502504">(</span><span class="string" id="8502505">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8502540">,</span>&nbsp;<span class="ident" id="8502542">newtyp</span><span class="op" id="8502548">.</span><span class="builtintype" id="8502549">string</span><span class="op" id="8502555">(</span><span class="op" id="8502556">)</span><span class="op" id="8502557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502563">newtyp</span>&nbsp;<span class="op" id="8502570">=</span>&nbsp;<span class="ident" id="8502572">getTypeUnlocked</span><span class="op" id="8502587">(</span><span class="string" id="8502588">&#34;string&#34;</span><span class="op" id="8502596">,</span>&nbsp;<span class="ident" id="8502598">reflect</span><span class="op" id="8502605">.</span><span class="ident" id="8502606">TypeOf</span><span class="op" id="8502612">(</span><span class="string" id="8502613">&#34;hello&#34;</span><span class="op" id="8502620">)</span><span class="op" id="8502621">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502624">if</span>&nbsp;<span class="ident" id="8502627">newtyp</span>&nbsp;<span class="op" id="8502634">!=</span>&nbsp;<span class="ident" id="8502637">tString</span><span class="op" id="8502644">.</span><span class="ident" id="8502645">gobType</span><span class="op" id="8502652">(</span><span class="op" id="8502653">)</span>&nbsp;<span class="op" id="8502655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502659">t</span><span class="op" id="8502660">.</span><span class="ident" id="8502661">Errorf</span><span class="op" id="8502667">(</span><span class="string" id="8502668">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8502703">,</span>&nbsp;<span class="ident" id="8502705">newtyp</span><span class="op" id="8502711">.</span><span class="builtintype" id="8502712">string</span><span class="op" id="8502718">(</span><span class="op" id="8502719">)</span><span class="op" id="8502720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502723">}</span><br>
<span class="lineno"></span><span class="op" id="8502725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8502728">func</span>&nbsp;<span class="ident" id="8502733">TestArrayType</span><span class="op" id="8502746">(</span><span class="ident" id="8502747">t</span>&nbsp;<span class="op" id="8502749">*</span><span class="ident" id="8502750">testing</span><span class="op" id="8502757">.</span><span class="ident" id="8502758">T</span><span class="op" id="8502759">)</span>&nbsp;<span class="op" id="8502761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502764">var</span>&nbsp;<span class="ident" id="8502768">a3</span>&nbsp;<span class="op" id="8502771">[</span><span class="num" id="8502772">3</span><span class="op" id="8502773">]</span><span class="builtintype" id="8502774">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502779">a3int</span>&nbsp;<span class="op" id="8502785">:=</span>&nbsp;<span class="ident" id="8502788">getTypeUnlocked</span><span class="op" id="8502803">(</span><span class="string" id="8502804">&#34;foo&#34;</span><span class="op" id="8502809">,</span>&nbsp;<span class="ident" id="8502811">reflect</span><span class="op" id="8502818">.</span><span class="ident" id="8502819">TypeOf</span><span class="op" id="8502825">(</span><span class="ident" id="8502826">a3</span><span class="op" id="8502828">)</span><span class="op" id="8502829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502832">newa3int</span>&nbsp;<span class="op" id="8502841">:=</span>&nbsp;<span class="ident" id="8502844">getTypeUnlocked</span><span class="op" id="8502859">(</span><span class="string" id="8502860">&#34;bar&#34;</span><span class="op" id="8502865">,</span>&nbsp;<span class="ident" id="8502867">reflect</span><span class="op" id="8502874">.</span><span class="ident" id="8502875">TypeOf</span><span class="op" id="8502881">(</span><span class="ident" id="8502882">a3</span><span class="op" id="8502884">)</span><span class="op" id="8502885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502888">if</span>&nbsp;<span class="ident" id="8502891">a3int</span>&nbsp;<span class="op" id="8502897">!=</span>&nbsp;<span class="ident" id="8502900">newa3int</span>&nbsp;<span class="op" id="8502909">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502913">t</span><span class="op" id="8502914">.</span><span class="ident" id="8502915">Errorf</span><span class="op" id="8502921">(</span><span class="string" id="8502922">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8502970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8502973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8502976">var</span>&nbsp;<span class="ident" id="8502980">a4</span>&nbsp;<span class="op" id="8502983">[</span><span class="num" id="8502984">4</span><span class="op" id="8502985">]</span><span class="builtintype" id="8502986">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8502991">a4int</span>&nbsp;<span class="op" id="8502997">:=</span>&nbsp;<span class="ident" id="8503000">getTypeUnlocked</span><span class="op" id="8503015">(</span><span class="string" id="8503016">&#34;goo&#34;</span><span class="op" id="8503021">,</span>&nbsp;<span class="ident" id="8503023">reflect</span><span class="op" id="8503030">.</span><span class="ident" id="8503031">TypeOf</span><span class="op" id="8503037">(</span><span class="ident" id="8503038">a4</span><span class="op" id="8503040">)</span><span class="op" id="8503041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503044">if</span>&nbsp;<span class="ident" id="8503047">a3int</span>&nbsp;<span class="op" id="8503053">==</span>&nbsp;<span class="ident" id="8503056">a4int</span>&nbsp;<span class="op" id="8503062">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503066">t</span><span class="op" id="8503067">.</span><span class="ident" id="8503068">Errorf</span><span class="op" id="8503074">(</span><span class="string" id="8503075">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8503127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503133">var</span>&nbsp;<span class="ident" id="8503137">b3</span>&nbsp;<span class="op" id="8503140">[</span><span class="num" id="8503141">3</span><span class="op" id="8503142">]</span><span class="builtintype" id="8503143">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503149">a3bool</span>&nbsp;<span class="op" id="8503156">:=</span>&nbsp;<span class="ident" id="8503159">getTypeUnlocked</span><span class="op" id="8503174">(</span><span class="string" id="8503175">&#34;&#34;</span><span class="op" id="8503177">,</span>&nbsp;<span class="ident" id="8503179">reflect</span><span class="op" id="8503186">.</span><span class="ident" id="8503187">TypeOf</span><span class="op" id="8503193">(</span><span class="ident" id="8503194">b3</span><span class="op" id="8503196">)</span><span class="op" id="8503197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503200">if</span>&nbsp;<span class="ident" id="8503203">a3int</span>&nbsp;<span class="op" id="8503209">==</span>&nbsp;<span class="ident" id="8503212">a3bool</span>&nbsp;<span class="op" id="8503219">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503223">t</span><span class="op" id="8503224">.</span><span class="ident" id="8503225">Errorf</span><span class="op" id="8503231">(</span><span class="string" id="8503232">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8503285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503291">str</span>&nbsp;<span class="op" id="8503295">:=</span>&nbsp;<span class="ident" id="8503298">a3bool</span><span class="op" id="8503304">.</span><span class="builtintype" id="8503305">string</span><span class="op" id="8503311">(</span><span class="op" id="8503312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503315">expected</span>&nbsp;<span class="op" id="8503324">:=</span>&nbsp;<span class="string" id="8503327">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503338">if</span>&nbsp;<span class="ident" id="8503341">str</span>&nbsp;<span class="op" id="8503345">!=</span>&nbsp;<span class="ident" id="8503348">expected</span>&nbsp;<span class="op" id="8503357">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503361">t</span><span class="op" id="8503362">.</span><span class="ident" id="8503363">Errorf</span><span class="op" id="8503369">(</span><span class="string" id="8503370">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8503404">,</span>&nbsp;<span class="ident" id="8503406">str</span><span class="op" id="8503409">,</span>&nbsp;<span class="ident" id="8503411">expected</span><span class="op" id="8503419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503422">}</span><br>
<span class="lineno"></span><span class="op" id="8503424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8503427">func</span>&nbsp;<span class="ident" id="8503432">TestSliceType</span><span class="op" id="8503445">(</span><span class="ident" id="8503446">t</span>&nbsp;<span class="op" id="8503448">*</span><span class="ident" id="8503449">testing</span><span class="op" id="8503456">.</span><span class="ident" id="8503457">T</span><span class="op" id="8503458">)</span>&nbsp;<span class="op" id="8503460">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503463">var</span>&nbsp;<span class="ident" id="8503467">s</span>&nbsp;<span class="op" id="8503469">[</span><span class="op" id="8503470">]</span><span class="builtintype" id="8503471">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503476">sint</span>&nbsp;<span class="op" id="8503481">:=</span>&nbsp;<span class="ident" id="8503484">getTypeUnlocked</span><span class="op" id="8503499">(</span><span class="string" id="8503500">&#34;slice&#34;</span><span class="op" id="8503507">,</span>&nbsp;<span class="ident" id="8503509">reflect</span><span class="op" id="8503516">.</span><span class="ident" id="8503517">TypeOf</span><span class="op" id="8503523">(</span><span class="ident" id="8503524">s</span><span class="op" id="8503525">)</span><span class="op" id="8503526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503529">var</span>&nbsp;<span class="ident" id="8503533">news</span>&nbsp;<span class="op" id="8503538">[</span><span class="op" id="8503539">]</span><span class="builtintype" id="8503540">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503545">newsint</span>&nbsp;<span class="op" id="8503553">:=</span>&nbsp;<span class="ident" id="8503556">getTypeUnlocked</span><span class="op" id="8503571">(</span><span class="string" id="8503572">&#34;slice1&#34;</span><span class="op" id="8503580">,</span>&nbsp;<span class="ident" id="8503582">reflect</span><span class="op" id="8503589">.</span><span class="ident" id="8503590">TypeOf</span><span class="op" id="8503596">(</span><span class="ident" id="8503597">news</span><span class="op" id="8503601">)</span><span class="op" id="8503602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503605">if</span>&nbsp;<span class="ident" id="8503608">sint</span>&nbsp;<span class="op" id="8503613">!=</span>&nbsp;<span class="ident" id="8503616">newsint</span>&nbsp;<span class="op" id="8503624">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503628">t</span><span class="op" id="8503629">.</span><span class="ident" id="8503630">Errorf</span><span class="op" id="8503636">(</span><span class="string" id="8503637">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8503684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503690">var</span>&nbsp;<span class="ident" id="8503694">b</span>&nbsp;<span class="op" id="8503696">[</span><span class="op" id="8503697">]</span><span class="builtintype" id="8503698">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503704">sbool</span>&nbsp;<span class="op" id="8503710">:=</span>&nbsp;<span class="ident" id="8503713">getTypeUnlocked</span><span class="op" id="8503728">(</span><span class="string" id="8503729">&#34;&#34;</span><span class="op" id="8503731">,</span>&nbsp;<span class="ident" id="8503733">reflect</span><span class="op" id="8503740">.</span><span class="ident" id="8503741">TypeOf</span><span class="op" id="8503747">(</span><span class="ident" id="8503748">b</span><span class="op" id="8503749">)</span><span class="op" id="8503750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503753">if</span>&nbsp;<span class="ident" id="8503756">sbool</span>&nbsp;<span class="op" id="8503762">==</span>&nbsp;<span class="ident" id="8503765">sint</span>&nbsp;<span class="op" id="8503770">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503774">t</span><span class="op" id="8503775">.</span><span class="ident" id="8503776">Errorf</span><span class="op" id="8503782">(</span><span class="string" id="8503783">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8503834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503840">str</span>&nbsp;<span class="op" id="8503844">:=</span>&nbsp;<span class="ident" id="8503847">sbool</span><span class="op" id="8503852">.</span><span class="builtintype" id="8503853">string</span><span class="op" id="8503859">(</span><span class="op" id="8503860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503863">expected</span>&nbsp;<span class="op" id="8503872">:=</span>&nbsp;<span class="string" id="8503875">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8503885">if</span>&nbsp;<span class="ident" id="8503888">str</span>&nbsp;<span class="op" id="8503892">!=</span>&nbsp;<span class="ident" id="8503895">expected</span>&nbsp;<span class="op" id="8503904">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8503908">t</span><span class="op" id="8503909">.</span><span class="ident" id="8503910">Errorf</span><span class="op" id="8503916">(</span><span class="string" id="8503917">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8503951">,</span>&nbsp;<span class="ident" id="8503953">str</span><span class="op" id="8503956">,</span>&nbsp;<span class="ident" id="8503958">expected</span><span class="op" id="8503966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8503969">}</span><br>
<span class="lineno"></span><span class="op" id="8503971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8503974">func</span>&nbsp;<span class="ident" id="8503979">TestMapType</span><span class="op" id="8503990">(</span><span class="ident" id="8503991">t</span>&nbsp;<span class="op" id="8503993">*</span><span class="ident" id="8503994">testing</span><span class="op" id="8504001">.</span><span class="ident" id="8504002">T</span><span class="op" id="8504003">)</span>&nbsp;<span class="op" id="8504005">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504008">var</span>&nbsp;<span class="ident" id="8504012">m</span>&nbsp;<span class="keyword" id="8504014">map</span><span class="op" id="8504017">[</span><span class="builtintype" id="8504018">string</span><span class="op" id="8504024">]</span><span class="builtintype" id="8504025">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504030">mapStringInt</span>&nbsp;<span class="op" id="8504043">:=</span>&nbsp;<span class="ident" id="8504046">getTypeUnlocked</span><span class="op" id="8504061">(</span><span class="string" id="8504062">&#34;map&#34;</span><span class="op" id="8504067">,</span>&nbsp;<span class="ident" id="8504069">reflect</span><span class="op" id="8504076">.</span><span class="ident" id="8504077">TypeOf</span><span class="op" id="8504083">(</span><span class="ident" id="8504084">m</span><span class="op" id="8504085">)</span><span class="op" id="8504086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504089">var</span>&nbsp;<span class="ident" id="8504093">newm</span>&nbsp;<span class="keyword" id="8504098">map</span><span class="op" id="8504101">[</span><span class="builtintype" id="8504102">string</span><span class="op" id="8504108">]</span><span class="builtintype" id="8504109">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504114">newMapStringInt</span>&nbsp;<span class="op" id="8504130">:=</span>&nbsp;<span class="ident" id="8504133">getTypeUnlocked</span><span class="op" id="8504148">(</span><span class="string" id="8504149">&#34;map1&#34;</span><span class="op" id="8504155">,</span>&nbsp;<span class="ident" id="8504157">reflect</span><span class="op" id="8504164">.</span><span class="ident" id="8504165">TypeOf</span><span class="op" id="8504171">(</span><span class="ident" id="8504172">newm</span><span class="op" id="8504176">)</span><span class="op" id="8504177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504180">if</span>&nbsp;<span class="ident" id="8504183">mapStringInt</span>&nbsp;<span class="op" id="8504196">!=</span>&nbsp;<span class="ident" id="8504199">newMapStringInt</span>&nbsp;<span class="op" id="8504215">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504219">t</span><span class="op" id="8504220">.</span><span class="ident" id="8504221">Errorf</span><span class="op" id="8504227">(</span><span class="string" id="8504228">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8504284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504290">var</span>&nbsp;<span class="ident" id="8504294">b</span>&nbsp;<span class="keyword" id="8504296">map</span><span class="op" id="8504299">[</span><span class="builtintype" id="8504300">string</span><span class="op" id="8504306">]</span><span class="builtintype" id="8504307">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504313">mapStringBool</span>&nbsp;<span class="op" id="8504327">:=</span>&nbsp;<span class="ident" id="8504330">getTypeUnlocked</span><span class="op" id="8504345">(</span><span class="string" id="8504346">&#34;&#34;</span><span class="op" id="8504348">,</span>&nbsp;<span class="ident" id="8504350">reflect</span><span class="op" id="8504357">.</span><span class="ident" id="8504358">TypeOf</span><span class="op" id="8504364">(</span><span class="ident" id="8504365">b</span><span class="op" id="8504366">)</span><span class="op" id="8504367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504370">if</span>&nbsp;<span class="ident" id="8504373">mapStringBool</span>&nbsp;<span class="op" id="8504387">==</span>&nbsp;<span class="ident" id="8504390">mapStringInt</span>&nbsp;<span class="op" id="8504403">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504407">t</span><span class="op" id="8504408">.</span><span class="ident" id="8504409">Errorf</span><span class="op" id="8504415">(</span><span class="string" id="8504416">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8504485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504491">str</span>&nbsp;<span class="op" id="8504495">:=</span>&nbsp;<span class="ident" id="8504498">mapStringBool</span><span class="op" id="8504511">.</span><span class="builtintype" id="8504512">string</span><span class="op" id="8504518">(</span><span class="op" id="8504519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504522">expected</span>&nbsp;<span class="op" id="8504531">:=</span>&nbsp;<span class="string" id="8504534">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8504553">if</span>&nbsp;<span class="ident" id="8504556">str</span>&nbsp;<span class="op" id="8504560">!=</span>&nbsp;<span class="ident" id="8504563">expected</span>&nbsp;<span class="op" id="8504572">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504576">t</span><span class="op" id="8504577">.</span><span class="ident" id="8504578">Errorf</span><span class="op" id="8504584">(</span><span class="string" id="8504585">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8504617">,</span>&nbsp;<span class="ident" id="8504619">str</span><span class="op" id="8504622">,</span>&nbsp;<span class="ident" id="8504624">expected</span><span class="op" id="8504632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8504635">}</span><br>
<span class="lineno"></span><span class="op" id="8504637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8504640">type</span>&nbsp;<span class="ident" id="8504645">Bar</span>&nbsp;<span class="keyword" id="8504649">struct</span>&nbsp;<span class="op" id="8504656">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504659">X</span>&nbsp;<span class="builtintype" id="8504661">string</span><br>
<span class="lineno"></span><span class="op" id="8504668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8504671">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8504752">type</span>&nbsp;<span class="ident" id="8504757">Foo</span>&nbsp;<span class="keyword" id="8504761">struct</span>&nbsp;<span class="op" id="8504768">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504771">A</span>&nbsp;<span class="builtintype" id="8504773">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504778">B</span>&nbsp;<span class="builtintype" id="8504780">int32</span>&nbsp;<span class="comment" id="8504786">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504806">C</span>&nbsp;<span class="builtintype" id="8504808">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504816">D</span>&nbsp;<span class="op" id="8504818">[</span><span class="op" id="8504819">]</span><span class="builtintype" id="8504820">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504826">E</span>&nbsp;<span class="op" id="8504828">*</span><span class="builtintype" id="8504829">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8504840">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504864">F</span>&nbsp;<span class="op" id="8504866">*</span><span class="op" id="8504867">*</span><span class="op" id="8504868">*</span><span class="op" id="8504869">*</span><span class="builtintype" id="8504870">float64</span>&nbsp;<span class="comment" id="8504878">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504902">G</span>&nbsp;<span class="op" id="8504904">*</span><span class="ident" id="8504905">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504910">H</span>&nbsp;<span class="op" id="8504912">*</span><span class="ident" id="8504913">Bar</span>&nbsp;<span class="comment" id="8504917">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8504972">I</span>&nbsp;<span class="op" id="8504974">*</span><span class="ident" id="8504975">Foo</span>&nbsp;<span class="comment" id="8504979">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8504999">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8505002">func</span>&nbsp;<span class="ident" id="8505007">TestStructType</span><span class="op" id="8505021">(</span><span class="ident" id="8505022">t</span>&nbsp;<span class="op" id="8505024">*</span><span class="ident" id="8505025">testing</span><span class="op" id="8505032">.</span><span class="ident" id="8505033">T</span><span class="op" id="8505034">)</span>&nbsp;<span class="op" id="8505036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505039">sstruct</span>&nbsp;<span class="op" id="8505047">:=</span>&nbsp;<span class="ident" id="8505050">getTypeUnlocked</span><span class="op" id="8505065">(</span><span class="string" id="8505066">&#34;Foo&#34;</span><span class="op" id="8505071">,</span>&nbsp;<span class="ident" id="8505073">reflect</span><span class="op" id="8505080">.</span><span class="ident" id="8505081">TypeOf</span><span class="op" id="8505087">(</span><span class="ident" id="8505088">Foo</span><span class="op" id="8505091">{</span><span class="op" id="8505092">}</span><span class="op" id="8505093">)</span><span class="op" id="8505094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505097">str</span>&nbsp;<span class="op" id="8505101">:=</span>&nbsp;<span class="ident" id="8505104">sstruct</span><span class="op" id="8505111">.</span><span class="builtintype" id="8505112">string</span><span class="op" id="8505118">(</span><span class="op" id="8505119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8505122">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505179">expected</span>&nbsp;<span class="op" id="8505188">:=</span>&nbsp;<span class="string" id="8505191">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505306">if</span>&nbsp;<span class="ident" id="8505309">str</span>&nbsp;<span class="op" id="8505313">!=</span>&nbsp;<span class="ident" id="8505316">expected</span>&nbsp;<span class="op" id="8505325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505329">t</span><span class="op" id="8505330">.</span><span class="ident" id="8505331">Errorf</span><span class="op" id="8505337">(</span><span class="string" id="8505338">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8505373">,</span>&nbsp;<span class="ident" id="8505375">str</span><span class="op" id="8505378">,</span>&nbsp;<span class="ident" id="8505380">expected</span><span class="op" id="8505388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505391">}</span><br>
<span class="lineno"></span><span class="op" id="8505393">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8505396">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8505473">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8505510">func</span>&nbsp;<span class="ident" id="8505515">TestRegistration</span><span class="op" id="8505531">(</span><span class="ident" id="8505532">t</span>&nbsp;<span class="op" id="8505534">*</span><span class="ident" id="8505535">testing</span><span class="op" id="8505542">.</span><span class="ident" id="8505543">T</span><span class="op" id="8505544">)</span>&nbsp;<span class="op" id="8505546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505549">type</span>&nbsp;<span class="ident" id="8505554">T</span>&nbsp;<span class="keyword" id="8505556">struct</span><span class="op" id="8505562">{</span>&nbsp;<span class="ident" id="8505564">a</span>&nbsp;<span class="builtintype" id="8505566">int</span>&nbsp;<span class="op" id="8505570">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505573">Register</span><span class="op" id="8505581">(</span><span class="builtinfunc" id="8505582">new</span><span class="op" id="8505585">(</span><span class="ident" id="8505586">T</span><span class="op" id="8505587">)</span><span class="op" id="8505588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505591">Register</span><span class="op" id="8505599">(</span><span class="builtinfunc" id="8505600">new</span><span class="op" id="8505603">(</span><span class="ident" id="8505604">T</span><span class="op" id="8505605">)</span><span class="op" id="8505606">)</span><br>
<span class="lineno"></span><span class="op" id="8505608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8505611">type</span>&nbsp;<span class="ident" id="8505616">N1</span>&nbsp;<span class="keyword" id="8505619">struct</span><span class="op" id="8505625">{</span><span class="op" id="8505626">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8505628">type</span>&nbsp;<span class="ident" id="8505633">N2</span>&nbsp;<span class="keyword" id="8505636">struct</span><span class="op" id="8505642">{</span><span class="op" id="8505643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8505646">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8505682">func</span>&nbsp;<span class="ident" id="8505687">TestRegistrationNaming</span><span class="op" id="8505709">(</span><span class="ident" id="8505710">t</span>&nbsp;<span class="op" id="8505712">*</span><span class="ident" id="8505713">testing</span><span class="op" id="8505720">.</span><span class="ident" id="8505721">T</span><span class="op" id="8505722">)</span>&nbsp;<span class="op" id="8505724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505727">testCases</span>&nbsp;<span class="op" id="8505737">:=</span>&nbsp;<span class="op" id="8505740">[</span><span class="op" id="8505741">]</span><span class="keyword" id="8505742">struct</span>&nbsp;<span class="op" id="8505749">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505753">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8505758">interface</span><span class="op" id="8505767">{</span><span class="op" id="8505768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505772">name</span>&nbsp;<span class="builtintype" id="8505777">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505785">}</span><span class="op" id="8505786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505790">{</span><span class="op" id="8505791">&amp;</span><span class="ident" id="8505792">N1</span><span class="op" id="8505794">{</span><span class="op" id="8505795">}</span><span class="op" id="8505796">,</span>&nbsp;<span class="string" id="8505798">&#34;*gob.N1&#34;</span><span class="op" id="8505807">}</span><span class="op" id="8505808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505812">{</span><span class="ident" id="8505813">N2</span><span class="op" id="8505815">{</span><span class="op" id="8505816">}</span><span class="op" id="8505817">,</span>&nbsp;<span class="string" id="8505819">&#34;encoding/gob.N2&#34;</span><span class="op" id="8505836">}</span><span class="op" id="8505837">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8505840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8505844">for</span>&nbsp;<span class="ident" id="8505848">_</span><span class="op" id="8505849">,</span>&nbsp;<span class="ident" id="8505851">tc</span>&nbsp;<span class="op" id="8505854">:=</span>&nbsp;<span class="keyword" id="8505857">range</span>&nbsp;<span class="ident" id="8505863">testCases</span>&nbsp;<span class="op" id="8505873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505877">Register</span><span class="op" id="8505885">(</span><span class="ident" id="8505886">tc</span><span class="op" id="8505888">.</span><span class="ident" id="8505889">t</span><span class="op" id="8505890">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505895">tct</span>&nbsp;<span class="op" id="8505899">:=</span>&nbsp;<span class="ident" id="8505902">reflect</span><span class="op" id="8505909">.</span><span class="ident" id="8505910">TypeOf</span><span class="op" id="8505916">(</span><span class="ident" id="8505917">tc</span><span class="op" id="8505919">.</span><span class="ident" id="8505920">t</span><span class="op" id="8505921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505925">registerLock</span><span class="op" id="8505937">.</span><span class="ident" id="8505938">RLock</span><span class="op" id="8505943">(</span><span class="op" id="8505944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505948">ct</span>&nbsp;<span class="op" id="8505951">:=</span>&nbsp;<span class="ident" id="8505954">nameToConcreteType</span><span class="op" id="8505972">[</span><span class="ident" id="8505973">tc</span><span class="op" id="8505975">.</span><span class="ident" id="8505976">name</span><span class="op" id="8505980">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8505984">registerLock</span><span class="op" id="8505996">.</span><span class="ident" id="8505997">RUnlock</span><span class="op" id="8506004">(</span><span class="op" id="8506005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506009">if</span>&nbsp;<span class="ident" id="8506012">ct</span>&nbsp;<span class="op" id="8506015">!=</span>&nbsp;<span class="ident" id="8506018">tct</span>&nbsp;<span class="op" id="8506022">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506027">t</span><span class="op" id="8506028">.</span><span class="ident" id="8506029">Errorf</span><span class="op" id="8506035">(</span><span class="string" id="8506036">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8506074">,</span>&nbsp;<span class="ident" id="8506076">tc</span><span class="op" id="8506078">.</span><span class="ident" id="8506079">name</span><span class="op" id="8506083">,</span>&nbsp;<span class="ident" id="8506085">ct</span><span class="op" id="8506087">,</span>&nbsp;<span class="ident" id="8506089">tct</span><span class="op" id="8506092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8506100">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506152">if</span>&nbsp;<span class="ident" id="8506155">tct</span><span class="op" id="8506158">.</span><span class="ident" id="8506159">Kind</span><span class="op" id="8506163">(</span><span class="op" id="8506164">)</span>&nbsp;<span class="op" id="8506166">==</span>&nbsp;<span class="ident" id="8506169">reflect</span><span class="op" id="8506176">.</span><span class="ident" id="8506177">Ptr</span>&nbsp;<span class="op" id="8506181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506186">tct</span>&nbsp;<span class="op" id="8506190">=</span>&nbsp;<span class="ident" id="8506192">tct</span><span class="op" id="8506195">.</span><span class="ident" id="8506196">Elem</span><span class="op" id="8506200">(</span><span class="op" id="8506201">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506209">if</span>&nbsp;<span class="ident" id="8506212">n</span>&nbsp;<span class="op" id="8506214">:=</span>&nbsp;<span class="ident" id="8506217">concreteTypeToName</span><span class="op" id="8506235">[</span><span class="ident" id="8506236">tct</span><span class="op" id="8506239">]</span><span class="op" id="8506240">;</span>&nbsp;<span class="ident" id="8506242">n</span>&nbsp;<span class="op" id="8506244">!=</span>&nbsp;<span class="ident" id="8506247">tc</span><span class="op" id="8506249">.</span><span class="ident" id="8506250">name</span>&nbsp;<span class="op" id="8506255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506260">t</span><span class="op" id="8506261">.</span><span class="ident" id="8506262">Errorf</span><span class="op" id="8506268">(</span><span class="string" id="8506269">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8506309">,</span>&nbsp;<span class="ident" id="8506311">tct</span><span class="op" id="8506314">,</span>&nbsp;<span class="ident" id="8506316">n</span><span class="op" id="8506317">,</span>&nbsp;<span class="ident" id="8506319">tc</span><span class="op" id="8506321">.</span><span class="ident" id="8506322">name</span><span class="op" id="8506326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506333">}</span><br>
<span class="lineno">195</span><span class="op" id="8506335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8506338">func</span>&nbsp;<span class="ident" id="8506343">TestStressParallel</span><span class="op" id="8506361">(</span><span class="ident" id="8506362">t</span>&nbsp;<span class="op" id="8506364">*</span><span class="ident" id="8506365">testing</span><span class="op" id="8506372">.</span><span class="ident" id="8506373">T</span><span class="op" id="8506374">)</span>&nbsp;<span class="op" id="8506376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506379">type</span>&nbsp;<span class="ident" id="8506384">T2</span>&nbsp;<span class="keyword" id="8506387">struct</span><span class="op" id="8506393">{</span>&nbsp;<span class="ident" id="8506395">A</span>&nbsp;<span class="builtintype" id="8506397">int</span>&nbsp;<span class="op" id="8506401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506404">c</span>&nbsp;<span class="op" id="8506406">:=</span>&nbsp;<span class="builtinfunc" id="8506409">make</span><span class="op" id="8506413">(</span><span class="keyword" id="8506414">chan</span>&nbsp;<span class="builtintype" id="8506419">bool</span><span class="op" id="8506423">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506426">const</span>&nbsp;<span class="ident" id="8506432">N</span>&nbsp;<span class="op" id="8506434">=</span>&nbsp;<span class="num" id="8506436">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506440">for</span>&nbsp;<span class="ident" id="8506444">i</span>&nbsp;<span class="op" id="8506446">:=</span>&nbsp;<span class="num" id="8506449">0</span><span class="op" id="8506450">;</span>&nbsp;<span class="ident" id="8506452">i</span>&nbsp;<span class="op" id="8506454">&lt;</span>&nbsp;<span class="ident" id="8506456">N</span><span class="op" id="8506457">;</span>&nbsp;<span class="ident" id="8506459">i</span><span class="op" id="8506460">++</span>&nbsp;<span class="op" id="8506463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506467">go</span>&nbsp;<span class="keyword" id="8506470">func</span><span class="op" id="8506474">(</span><span class="op" id="8506475">)</span>&nbsp;<span class="op" id="8506477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506482">p</span>&nbsp;<span class="op" id="8506484">:=</span>&nbsp;<span class="builtinfunc" id="8506487">new</span><span class="op" id="8506490">(</span><span class="ident" id="8506491">T2</span><span class="op" id="8506493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506498">Register</span><span class="op" id="8506506">(</span><span class="ident" id="8506507">p</span><span class="op" id="8506508">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506513">b</span>&nbsp;<span class="op" id="8506515">:=</span>&nbsp;<span class="builtinfunc" id="8506518">new</span><span class="op" id="8506521">(</span><span class="ident" id="8506522">bytes</span><span class="op" id="8506527">.</span><span class="ident" id="8506528">Buffer</span><span class="op" id="8506534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506539">enc</span>&nbsp;<span class="op" id="8506543">:=</span>&nbsp;<span class="ident" id="8506546">NewEncoder</span><span class="op" id="8506556">(</span><span class="ident" id="8506557">b</span><span class="op" id="8506558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506563">err</span>&nbsp;<span class="op" id="8506567">:=</span>&nbsp;<span class="ident" id="8506570">enc</span><span class="op" id="8506573">.</span><span class="ident" id="8506574">Encode</span><span class="op" id="8506580">(</span><span class="ident" id="8506581">p</span><span class="op" id="8506582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506587">if</span>&nbsp;<span class="ident" id="8506590">err</span>&nbsp;<span class="op" id="8506594">!=</span>&nbsp;<span class="ident" id="8506597">nil</span>&nbsp;<span class="op" id="8506601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506607">t</span><span class="op" id="8506608">.</span><span class="ident" id="8506609">Error</span><span class="op" id="8506614">(</span><span class="string" id="8506615">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8506630">,</span>&nbsp;<span class="ident" id="8506632">err</span><span class="op" id="8506635">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506645">dec</span>&nbsp;<span class="op" id="8506649">:=</span>&nbsp;<span class="ident" id="8506652">NewDecoder</span><span class="op" id="8506662">(</span><span class="ident" id="8506663">b</span><span class="op" id="8506664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506669">err</span>&nbsp;<span class="op" id="8506673">=</span>&nbsp;<span class="ident" id="8506675">dec</span><span class="op" id="8506678">.</span><span class="ident" id="8506679">Decode</span><span class="op" id="8506685">(</span><span class="ident" id="8506686">p</span><span class="op" id="8506687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506692">if</span>&nbsp;<span class="ident" id="8506695">err</span>&nbsp;<span class="op" id="8506699">!=</span>&nbsp;<span class="ident" id="8506702">nil</span>&nbsp;<span class="op" id="8506706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506712">t</span><span class="op" id="8506713">.</span><span class="ident" id="8506714">Error</span><span class="op" id="8506719">(</span><span class="string" id="8506720">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8506735">,</span>&nbsp;<span class="ident" id="8506737">err</span><span class="op" id="8506740">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8506750">c</span>&nbsp;<span class="op" id="8506752">&lt;-</span>&nbsp;<span class="builtintype" id="8506755">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506762">}</span><span class="op" id="8506763">(</span><span class="op" id="8506764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8506770">for</span>&nbsp;<span class="ident" id="8506774">i</span>&nbsp;<span class="op" id="8506776">:=</span>&nbsp;<span class="num" id="8506779">0</span><span class="op" id="8506780">;</span>&nbsp;<span class="ident" id="8506782">i</span>&nbsp;<span class="op" id="8506784">&lt;</span>&nbsp;<span class="ident" id="8506786">N</span><span class="op" id="8506787">;</span>&nbsp;<span class="ident" id="8506789">i</span><span class="op" id="8506790">++</span>&nbsp;<span class="op" id="8506793">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506797">&lt;-</span><span class="ident" id="8506799">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8506802">}</span><br>
<span class="lineno"></span><span class="op" id="8506804">}</span>
</div>
</body>
</html>
