<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/rpc</h2>
<ul>
<li><a href="/gostd/net/rpc/client.go.html">client.go</a></li>
<li><a href="/gostd/net/rpc/client_test.go.html" class="current">client_test.go</a></li>
<li><a href="/gostd/net/rpc/debug.go.html">debug.go</a></li>
<li><a href="/gostd/net/rpc/server.go.html">server.go</a></li>
<li><a href="/gostd/net/rpc/server_test.go.html">server_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6972576">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6972631">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6972685">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6972736">package</span>&nbsp;<span class="ident" id="6972744">rpc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6972749">import</span>&nbsp;<span class="op" id="6972756">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972759">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972769">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972776">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972783">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972794">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6972805">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6972815">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6972818">type</span>&nbsp;<span class="ident" id="6972823">shutdownCodec</span>&nbsp;<span class="keyword" id="6972837">struct</span>&nbsp;<span class="op" id="6972844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972847">responded</span>&nbsp;<span class="keyword" id="6972857">chan</span>&nbsp;<span class="builtintype" id="6972862">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6972867">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6972877">bool</span><br>
<span class="lineno"></span><span class="op" id="6972882">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6972885">func</span>&nbsp;<span class="op" id="6972890">(</span><span class="ident" id="6972891">c</span>&nbsp;<span class="op" id="6972893">*</span><span class="ident" id="6972894">shutdownCodec</span><span class="op" id="6972907">)</span>&nbsp;<span class="ident" id="6972909">WriteRequest</span><span class="op" id="6972921">(</span><span class="op" id="6972922">*</span><span class="ident" id="6972923">Request</span><span class="op" id="6972930">,</span>&nbsp;<span class="keyword" id="6972932">interface</span><span class="op" id="6972941">{</span><span class="op" id="6972942">}</span><span class="op" id="6972943">)</span>&nbsp;<span class="builtintype" id="6972945">error</span>&nbsp;<span class="op" id="6972951">{</span>&nbsp;<span class="keyword" id="6972953">return</span>&nbsp;<span class="ident" id="6972960">nil</span>&nbsp;<span class="op" id="6972964">}</span><br>
<span class="lineno"></span><span class="keyword" id="6972966">func</span>&nbsp;<span class="op" id="6972971">(</span><span class="ident" id="6972972">c</span>&nbsp;<span class="op" id="6972974">*</span><span class="ident" id="6972975">shutdownCodec</span><span class="op" id="6972988">)</span>&nbsp;<span class="ident" id="6972990">ReadResponseBody</span><span class="op" id="6973006">(</span><span class="keyword" id="6973007">interface</span><span class="op" id="6973016">{</span><span class="op" id="6973017">}</span><span class="op" id="6973018">)</span>&nbsp;<span class="builtintype" id="6973020">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6973032">{</span>&nbsp;<span class="keyword" id="6973034">return</span>&nbsp;<span class="ident" id="6973041">nil</span>&nbsp;<span class="op" id="6973045">}</span><br>
<span class="lineno"></span><span class="keyword" id="6973047">func</span>&nbsp;<span class="op" id="6973052">(</span><span class="ident" id="6973053">c</span>&nbsp;<span class="op" id="6973055">*</span><span class="ident" id="6973056">shutdownCodec</span><span class="op" id="6973069">)</span>&nbsp;<span class="ident" id="6973071">ReadResponseHeader</span><span class="op" id="6973089">(</span><span class="op" id="6973090">*</span><span class="ident" id="6973091">Response</span><span class="op" id="6973099">)</span>&nbsp;<span class="builtintype" id="6973101">error</span>&nbsp;<span class="op" id="6973107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973110">c</span><span class="op" id="6973111">.</span><span class="ident" id="6973112">responded</span>&nbsp;<span class="op" id="6973122">&lt;-</span>&nbsp;<span class="num" id="6973125">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973128">return</span>&nbsp;<span class="ident" id="6973135">errors</span><span class="op" id="6973141">.</span><span class="ident" id="6973142">New</span><span class="op" id="6973145">(</span><span class="string" id="6973146">&#34;shutdownCodec&nbsp;ReadResponseHeader&#34;</span><span class="op" id="6973180">)</span><br>
<span class="lineno"></span><span class="op" id="6973182">}</span><br>
<span class="lineno"></span><span class="keyword" id="6973184">func</span>&nbsp;<span class="op" id="6973189">(</span><span class="ident" id="6973190">c</span>&nbsp;<span class="op" id="6973192">*</span><span class="ident" id="6973193">shutdownCodec</span><span class="op" id="6973206">)</span>&nbsp;<span class="ident" id="6973208">Close</span><span class="op" id="6973213">(</span><span class="op" id="6973214">)</span>&nbsp;<span class="builtintype" id="6973216">error</span>&nbsp;<span class="op" id="6973222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973225">c</span><span class="op" id="6973226">.</span><span class="ident" id="6973227">closed</span>&nbsp;<span class="op" id="6973234">=</span>&nbsp;<span class="builtintype" id="6973236">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973242">return</span>&nbsp;<span class="ident" id="6973249">nil</span><br>
<span class="lineno">30</span><span class="op" id="6973253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6973256">func</span>&nbsp;<span class="ident" id="6973261">TestCloseCodec</span><span class="op" id="6973275">(</span><span class="ident" id="6973276">t</span>&nbsp;<span class="op" id="6973278">*</span><span class="ident" id="6973279">testing</span><span class="op" id="6973286">.</span><span class="ident" id="6973287">T</span><span class="op" id="6973288">)</span>&nbsp;<span class="op" id="6973290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973293">codec</span>&nbsp;<span class="op" id="6973299">:=</span>&nbsp;<span class="op" id="6973302">&amp;</span><span class="ident" id="6973303">shutdownCodec</span><span class="op" id="6973316">{</span><span class="ident" id="6973317">responded</span><span class="op" id="6973326">:</span>&nbsp;<span class="builtinfunc" id="6973328">make</span><span class="op" id="6973332">(</span><span class="keyword" id="6973333">chan</span>&nbsp;<span class="builtintype" id="6973338">int</span><span class="op" id="6973341">)</span><span class="op" id="6973342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973345">client</span>&nbsp;<span class="op" id="6973352">:=</span>&nbsp;<span class="ident" id="6973355">NewClientWithCodec</span><span class="op" id="6973373">(</span><span class="ident" id="6973374">codec</span><span class="op" id="6973379">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973382">&lt;-</span><span class="ident" id="6973384">codec</span><span class="op" id="6973389">.</span><span class="ident" id="6973390">responded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973401">client</span><span class="op" id="6973407">.</span><span class="ident" id="6973408">Close</span><span class="op" id="6973413">(</span><span class="op" id="6973414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973417">if</span>&nbsp;<span class="op" id="6973420">!</span><span class="ident" id="6973421">codec</span><span class="op" id="6973426">.</span><span class="ident" id="6973427">closed</span>&nbsp;<span class="op" id="6973434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973438">t</span><span class="op" id="6973439">.</span><span class="ident" id="6973440">Error</span><span class="op" id="6973445">(</span><span class="string" id="6973446">&#34;client.Close&nbsp;did&nbsp;not&nbsp;close&nbsp;codec&#34;</span><span class="op" id="6973480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973483">}</span><br>
<span class="lineno">40</span><span class="op" id="6973485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6973488">//&nbsp;Test&nbsp;that&nbsp;errors&nbsp;in&nbsp;gob&nbsp;shut&nbsp;down&nbsp;the&nbsp;connection.&nbsp;Issue&nbsp;7689.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6973554">type</span>&nbsp;<span class="ident" id="6973559">R</span>&nbsp;<span class="keyword" id="6973561">struct</span>&nbsp;<span class="op" id="6973568">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973571">msg</span>&nbsp;<span class="op" id="6973575">[</span><span class="op" id="6973576">]</span><span class="builtintype" id="6973577">byte</span>&nbsp;<span class="comment" id="6973582">//&nbsp;Not&nbsp;exported,&nbsp;so&nbsp;R&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;gob.</span><br>
<span class="lineno"></span><span class="op" id="6973628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6973631">type</span>&nbsp;<span class="ident" id="6973636">S</span>&nbsp;<span class="keyword" id="6973638">struct</span><span class="op" id="6973644">{</span><span class="op" id="6973645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="6973648">func</span>&nbsp;<span class="op" id="6973653">(</span><span class="ident" id="6973654">s</span>&nbsp;<span class="op" id="6973656">*</span><span class="ident" id="6973657">S</span><span class="op" id="6973658">)</span>&nbsp;<span class="ident" id="6973660">Recv</span><span class="op" id="6973664">(</span><span class="ident" id="6973665">nul</span>&nbsp;<span class="op" id="6973669">*</span><span class="keyword" id="6973670">struct</span><span class="op" id="6973676">{</span><span class="op" id="6973677">}</span><span class="op" id="6973678">,</span>&nbsp;<span class="ident" id="6973680">reply</span>&nbsp;<span class="op" id="6973686">*</span><span class="ident" id="6973687">R</span><span class="op" id="6973688">)</span>&nbsp;<span class="builtintype" id="6973690">error</span>&nbsp;<span class="op" id="6973696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973699">*</span><span class="ident" id="6973700">reply</span>&nbsp;<span class="op" id="6973706">=</span>&nbsp;<span class="ident" id="6973708">R</span><span class="op" id="6973709">{</span><span class="op" id="6973710">[</span><span class="op" id="6973711">]</span><span class="builtintype" id="6973712">byte</span><span class="op" id="6973716">(</span><span class="string" id="6973717">&#34;foo&#34;</span><span class="op" id="6973722">)</span><span class="op" id="6973723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973726">return</span>&nbsp;<span class="ident" id="6973733">nil</span><br>
<span class="lineno"></span><span class="op" id="6973737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="6973740">func</span>&nbsp;<span class="ident" id="6973745">TestGobError</span><span class="op" id="6973757">(</span><span class="ident" id="6973758">t</span>&nbsp;<span class="op" id="6973760">*</span><span class="ident" id="6973761">testing</span><span class="op" id="6973768">.</span><span class="ident" id="6973769">T</span><span class="op" id="6973770">)</span>&nbsp;<span class="op" id="6973772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973775">if</span>&nbsp;<span class="ident" id="6973778">runtime</span><span class="op" id="6973785">.</span><span class="ident" id="6973786">GOOS</span>&nbsp;<span class="op" id="6973791">==</span>&nbsp;<span class="string" id="6973794">&#34;plan9&#34;</span>&nbsp;<span class="op" id="6973802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973806">t</span><span class="op" id="6973807">.</span><span class="ident" id="6973808">Skip</span><span class="op" id="6973812">(</span><span class="string" id="6973813">&#34;skipping&nbsp;test;&nbsp;see&nbsp;http://golang.org/issue/8908&#34;</span><span class="op" id="6973862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973868">defer</span>&nbsp;<span class="keyword" id="6973874">func</span><span class="op" id="6973878">(</span><span class="op" id="6973879">)</span>&nbsp;<span class="op" id="6973881">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973885">err</span>&nbsp;<span class="op" id="6973889">:=</span>&nbsp;<span class="builtinfunc" id="6973892">recover</span><span class="op" id="6973899">(</span><span class="op" id="6973900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973904">if</span>&nbsp;<span class="ident" id="6973907">err</span>&nbsp;<span class="op" id="6973911">==</span>&nbsp;<span class="ident" id="6973914">nil</span>&nbsp;<span class="op" id="6973918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6973923">t</span><span class="op" id="6973924">.</span><span class="ident" id="6973925">Fatal</span><span class="op" id="6973930">(</span><span class="string" id="6973931">&#34;no&nbsp;error&#34;</span><span class="op" id="6973941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6973945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6973949">if</span>&nbsp;<span class="op" id="6973952">!</span><span class="ident" id="6973953">strings</span><span class="op" id="6973960">.</span><span class="ident" id="6973961">Contains</span><span class="op" id="6973969">(</span><span class="string" id="6973970">&#34;reading&nbsp;body&nbsp;EOF&#34;</span><span class="op" id="6973988">,</span>&nbsp;<span class="ident" id="6973990">err</span><span class="op" id="6973993">.</span><span class="op" id="6973994">(</span><span class="builtintype" id="6973995">error</span><span class="op" id="6974000">)</span><span class="op" id="6974001">.</span><span class="ident" id="6974002">Error</span><span class="op" id="6974007">(</span><span class="op" id="6974008">)</span><span class="op" id="6974009">)</span>&nbsp;<span class="op" id="6974011">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974016">t</span><span class="op" id="6974017">.</span><span class="ident" id="6974018">Fatal</span><span class="op" id="6974023">(</span><span class="string" id="6974024">&#34;expected&nbsp;`reading&nbsp;body&nbsp;EOF&#39;,&nbsp;got&#34;</span><span class="op" id="6974058">,</span>&nbsp;<span class="ident" id="6974060">err</span><span class="op" id="6974063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974070">}</span><span class="op" id="6974071">(</span><span class="op" id="6974072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974075">Register</span><span class="op" id="6974083">(</span><span class="builtinfunc" id="6974084">new</span><span class="op" id="6974087">(</span><span class="ident" id="6974088">S</span><span class="op" id="6974089">)</span><span class="op" id="6974090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974094">listen</span><span class="op" id="6974100">,</span>&nbsp;<span class="ident" id="6974102">err</span>&nbsp;<span class="op" id="6974106">:=</span>&nbsp;<span class="ident" id="6974109">net</span><span class="op" id="6974112">.</span><span class="ident" id="6974113">Listen</span><span class="op" id="6974119">(</span><span class="string" id="6974120">&#34;tcp&#34;</span><span class="op" id="6974125">,</span>&nbsp;<span class="string" id="6974127">&#34;127.0.0.1:0&#34;</span><span class="op" id="6974140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974143">if</span>&nbsp;<span class="ident" id="6974146">err</span>&nbsp;<span class="op" id="6974150">!=</span>&nbsp;<span class="ident" id="6974153">nil</span>&nbsp;<span class="op" id="6974157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6974161">panic</span><span class="op" id="6974166">(</span><span class="ident" id="6974167">err</span><span class="op" id="6974170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974176">go</span>&nbsp;<span class="ident" id="6974179">Accept</span><span class="op" id="6974185">(</span><span class="ident" id="6974186">listen</span><span class="op" id="6974192">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974196">client</span><span class="op" id="6974202">,</span>&nbsp;<span class="ident" id="6974204">err</span>&nbsp;<span class="op" id="6974208">:=</span>&nbsp;<span class="ident" id="6974211">Dial</span><span class="op" id="6974215">(</span><span class="string" id="6974216">&#34;tcp&#34;</span><span class="op" id="6974221">,</span>&nbsp;<span class="ident" id="6974223">listen</span><span class="op" id="6974229">.</span><span class="ident" id="6974230">Addr</span><span class="op" id="6974234">(</span><span class="op" id="6974235">)</span><span class="op" id="6974236">.</span><span class="ident" id="6974237">String</span><span class="op" id="6974243">(</span><span class="op" id="6974244">)</span><span class="op" id="6974245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974248">if</span>&nbsp;<span class="ident" id="6974251">err</span>&nbsp;<span class="op" id="6974255">!=</span>&nbsp;<span class="ident" id="6974258">nil</span>&nbsp;<span class="op" id="6974262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6974266">panic</span><span class="op" id="6974271">(</span><span class="ident" id="6974272">err</span><span class="op" id="6974275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974278">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974282">var</span>&nbsp;<span class="ident" id="6974286">reply</span>&nbsp;<span class="ident" id="6974292">Reply</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974299">err</span>&nbsp;<span class="op" id="6974303">=</span>&nbsp;<span class="ident" id="6974305">client</span><span class="op" id="6974311">.</span><span class="ident" id="6974312">Call</span><span class="op" id="6974316">(</span><span class="string" id="6974317">&#34;S.Recv&#34;</span><span class="op" id="6974325">,</span>&nbsp;<span class="op" id="6974327">&amp;</span><span class="keyword" id="6974328">struct</span><span class="op" id="6974334">{</span><span class="op" id="6974335">}</span><span class="op" id="6974336">{</span><span class="op" id="6974337">}</span><span class="op" id="6974338">,</span>&nbsp;<span class="op" id="6974340">&amp;</span><span class="ident" id="6974341">reply</span><span class="op" id="6974346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6974349">if</span>&nbsp;<span class="ident" id="6974352">err</span>&nbsp;<span class="op" id="6974356">!=</span>&nbsp;<span class="ident" id="6974359">nil</span>&nbsp;<span class="op" id="6974363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6974367">panic</span><span class="op" id="6974372">(</span><span class="ident" id="6974373">err</span><span class="op" id="6974376">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6974379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974383">fmt</span><span class="op" id="6974386">.</span><span class="ident" id="6974387">Printf</span><span class="op" id="6974393">(</span><span class="string" id="6974394">&#34;%#v\n&#34;</span><span class="op" id="6974401">,</span>&nbsp;<span class="ident" id="6974403">reply</span><span class="op" id="6974408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974411">client</span><span class="op" id="6974417">.</span><span class="ident" id="6974418">Close</span><span class="op" id="6974423">(</span><span class="op" id="6974424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6974428">listen</span><span class="op" id="6974434">.</span><span class="ident" id="6974435">Close</span><span class="op" id="6974440">(</span><span class="op" id="6974441">)</span><br>
<span class="lineno"></span><span class="op" id="6974443">}</span>
</div>
</body>
</html>
