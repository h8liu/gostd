<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3651648">package</span>&nbsp;<span class="ident" id="3651656">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3651662">import</span>&nbsp;<span class="op" id="3651669">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3651672">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3651694">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3651697">func</span>&nbsp;<span class="ident" id="3651702">parseFile</span><span class="op" id="3651711">(</span><span class="ident" id="3651712">p</span>&nbsp;<span class="op" id="3651714">*</span><span class="ident" id="3651715">parser</span><span class="op" id="3651721">)</span>&nbsp;<span class="op" id="3651723">*</span><span class="ident" id="3651724">file</span>&nbsp;<span class="op" id="3651729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3651732">ret</span>&nbsp;<span class="op" id="3651736">:=</span>&nbsp;<span class="builtinfunc" id="3651739">new</span><span class="op" id="3651742">(</span><span class="ident" id="3651743">file</span><span class="op" id="3651747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651751">for</span>&nbsp;<span class="ident" id="3651755">p</span><span class="op" id="3651756">.</span><span class="ident" id="3651757">seeKeyword</span><span class="op" id="3651767">(</span><span class="string" id="3651768">&#34;import&#34;</span><span class="op" id="3651776">)</span>&nbsp;<span class="op" id="3651778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3651782">panic</span><span class="op" id="3651787">(</span><span class="string" id="3651788">&#34;todo&#34;</span><span class="op" id="3651794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3651797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651801">for</span>&nbsp;<span class="op" id="3651805">!</span><span class="ident" id="3651806">p</span><span class="op" id="3651807">.</span><span class="ident" id="3651808">see</span><span class="op" id="3651811">(</span><span class="ident" id="3651812">lex8</span><span class="op" id="3651816">.</span><span class="ident" id="3651817">EOF</span><span class="op" id="3651820">)</span>&nbsp;<span class="op" id="3651822">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651826">if</span>&nbsp;<span class="ident" id="3651829">p</span><span class="op" id="3651830">.</span><span class="ident" id="3651831">seeKeyword</span><span class="op" id="3651841">(</span><span class="string" id="3651842">&#34;func&#34;</span><span class="op" id="3651848">)</span>&nbsp;<span class="op" id="3651850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651855">if</span>&nbsp;<span class="ident" id="3651858">f</span>&nbsp;<span class="op" id="3651860">:=</span>&nbsp;<span class="ident" id="3651863">parseFunc</span><span class="op" id="3651872">(</span><span class="ident" id="3651873">p</span><span class="op" id="3651874">)</span><span class="op" id="3651875">;</span>&nbsp;<span class="ident" id="3651877">f</span>&nbsp;<span class="op" id="3651879">!=</span>&nbsp;<span class="ident" id="3651882">nil</span>&nbsp;<span class="op" id="3651886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3651892">ret</span><span class="op" id="3651895">.</span><span class="ident" id="3651896">Funcs</span>&nbsp;<span class="op" id="3651902">=</span>&nbsp;<span class="builtinfunc" id="3651904">append</span><span class="op" id="3651910">(</span><span class="ident" id="3651911">ret</span><span class="op" id="3651914">.</span><span class="ident" id="3651915">Funcs</span><span class="op" id="3651920">,</span>&nbsp;<span class="ident" id="3651922">f</span><span class="op" id="3651923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3651928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3651932">}</span>&nbsp;<span class="keyword" id="3651934">else</span>&nbsp;<span class="keyword" id="3651939">if</span>&nbsp;<span class="ident" id="3651942">p</span><span class="op" id="3651943">.</span><span class="ident" id="3651944">seeKeyword</span><span class="op" id="3651954">(</span><span class="string" id="3651955">&#34;var&#34;</span><span class="op" id="3651960">)</span>&nbsp;<span class="op" id="3651962">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3651967">if</span>&nbsp;<span class="ident" id="3651970">v</span>&nbsp;<span class="op" id="3651972">:=</span>&nbsp;<span class="ident" id="3651975">parseVar</span><span class="op" id="3651983">(</span><span class="ident" id="3651984">p</span><span class="op" id="3651985">)</span><span class="op" id="3651986">;</span>&nbsp;<span class="ident" id="3651988">v</span>&nbsp;<span class="op" id="3651990">!=</span>&nbsp;<span class="ident" id="3651993">nil</span>&nbsp;<span class="op" id="3651997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3652003">ret</span><span class="op" id="3652006">.</span><span class="ident" id="3652007">Vars</span>&nbsp;<span class="op" id="3652012">=</span>&nbsp;<span class="builtinfunc" id="3652014">append</span><span class="op" id="3652020">(</span><span class="ident" id="3652021">ret</span><span class="op" id="3652024">.</span><span class="ident" id="3652025">Vars</span><span class="op" id="3652029">,</span>&nbsp;<span class="ident" id="3652031">v</span><span class="op" id="3652032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3652037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3652041">}</span>&nbsp;<span class="keyword" id="3652043">else</span>&nbsp;<span class="keyword" id="3652048">if</span>&nbsp;<span class="ident" id="3652051">p</span><span class="op" id="3652052">.</span><span class="ident" id="3652053">seeKeyword</span><span class="op" id="3652063">(</span><span class="string" id="3652064">&#34;const&#34;</span><span class="op" id="3652071">)</span>&nbsp;<span class="op" id="3652073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3652078">//&nbsp;TODO:</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3652090">p</span><span class="op" id="3652091">.</span><span class="ident" id="3652092">err</span><span class="op" id="3652095">(</span><span class="ident" id="3652096">p</span><span class="op" id="3652097">.</span><span class="ident" id="3652098">t</span><span class="op" id="3652099">.</span><span class="ident" id="3652100">Pos</span><span class="op" id="3652103">,</span>&nbsp;<span class="string" id="3652105">&#34;const&nbsp;support&nbsp;not&nbsp;implemented&nbsp;yet&#34;</span><span class="op" id="3652140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3652145">p</span><span class="op" id="3652146">.</span><span class="ident" id="3652147">skipErrStmt</span><span class="op" id="3652158">(</span><span class="op" id="3652159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3652163">}</span>&nbsp;<span class="keyword" id="3652165">else</span>&nbsp;<span class="op" id="3652170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3652175">p</span><span class="op" id="3652176">.</span><span class="ident" id="3652177">err</span><span class="op" id="3652180">(</span><span class="ident" id="3652181">p</span><span class="op" id="3652182">.</span><span class="ident" id="3652183">t</span><span class="op" id="3652184">.</span><span class="ident" id="3652185">Pos</span><span class="op" id="3652188">,</span>&nbsp;<span class="string" id="3652190">&#34;expect&nbsp;top-declaration:&nbsp;func,&nbsp;var&nbsp;or&nbsp;const&#34;</span><span class="op" id="3652234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3652239">return</span>&nbsp;<span class="ident" id="3652246">nil</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3652252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3652257">p</span><span class="op" id="3652258">.</span><span class="ident" id="3652259">clearErr</span><span class="op" id="3652267">(</span><span class="op" id="3652268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3652271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3652275">return</span>&nbsp;<span class="ident" id="3652282">ret</span><br>
<span class="lineno"></span><span class="op" id="3652286">}</span>
</div>
</body>
</html>
