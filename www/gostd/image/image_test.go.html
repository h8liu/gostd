<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html" class="current">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6407617">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6407672">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6407726">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6407777">package</span>&nbsp;<span class="ident" id="6407785">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6407792">import</span>&nbsp;<span class="op" id="6407799">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407802">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6407817">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6407827">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6407830">type</span>&nbsp;<span class="ident" id="6407835">image</span>&nbsp;<span class="keyword" id="6407841">interface</span>&nbsp;<span class="op" id="6407851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407854">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407861">Opaque</span><span class="op" id="6407867">(</span><span class="op" id="6407868">)</span>&nbsp;<span class="builtintype" id="6407870">bool</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407876">Set</span><span class="op" id="6407879">(</span><span class="builtintype" id="6407880">int</span><span class="op" id="6407883">,</span>&nbsp;<span class="builtintype" id="6407885">int</span><span class="op" id="6407888">,</span>&nbsp;<span class="ident" id="6407890">color</span><span class="op" id="6407895">.</span><span class="ident" id="6407896">Color</span><span class="op" id="6407901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6407904">SubImage</span><span class="op" id="6407912">(</span><span class="ident" id="6407913">Rectangle</span><span class="op" id="6407922">)</span>&nbsp;<span class="ident" id="6407924">Image</span><br>
<span class="lineno"></span><span class="op" id="6407930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6407933">func</span>&nbsp;<span class="ident" id="6407938">cmp</span><span class="op" id="6407941">(</span><span class="ident" id="6407942">t</span>&nbsp;<span class="op" id="6407944">*</span><span class="ident" id="6407945">testing</span><span class="op" id="6407952">.</span><span class="ident" id="6407953">T</span><span class="op" id="6407954">,</span>&nbsp;<span class="ident" id="6407956">cm</span>&nbsp;<span class="ident" id="6407959">color</span><span class="op" id="6407964">.</span><span class="ident" id="6407965">Model</span><span class="op" id="6407970">,</span>&nbsp;<span class="ident" id="6407972">c0</span><span class="op" id="6407974">,</span>&nbsp;<span class="ident" id="6407976">c1</span>&nbsp;<span class="ident" id="6407979">color</span><span class="op" id="6407984">.</span><span class="ident" id="6407985">Color</span><span class="op" id="6407990">)</span>&nbsp;<span class="builtintype" id="6407992">bool</span>&nbsp;<span class="op" id="6407997">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408000">r0</span><span class="op" id="6408002">,</span>&nbsp;<span class="ident" id="6408004">g0</span><span class="op" id="6408006">,</span>&nbsp;<span class="ident" id="6408008">b0</span><span class="op" id="6408010">,</span>&nbsp;<span class="ident" id="6408012">a0</span>&nbsp;<span class="op" id="6408015">:=</span>&nbsp;<span class="ident" id="6408018">cm</span><span class="op" id="6408020">.</span><span class="ident" id="6408021">Convert</span><span class="op" id="6408028">(</span><span class="ident" id="6408029">c0</span><span class="op" id="6408031">)</span><span class="op" id="6408032">.</span><span class="ident" id="6408033">RGBA</span><span class="op" id="6408037">(</span><span class="op" id="6408038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408041">r1</span><span class="op" id="6408043">,</span>&nbsp;<span class="ident" id="6408045">g1</span><span class="op" id="6408047">,</span>&nbsp;<span class="ident" id="6408049">b1</span><span class="op" id="6408051">,</span>&nbsp;<span class="ident" id="6408053">a1</span>&nbsp;<span class="op" id="6408056">:=</span>&nbsp;<span class="ident" id="6408059">cm</span><span class="op" id="6408061">.</span><span class="ident" id="6408062">Convert</span><span class="op" id="6408069">(</span><span class="ident" id="6408070">c1</span><span class="op" id="6408072">)</span><span class="op" id="6408073">.</span><span class="ident" id="6408074">RGBA</span><span class="op" id="6408078">(</span><span class="op" id="6408079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408082">return</span>&nbsp;<span class="ident" id="6408089">r0</span>&nbsp;<span class="op" id="6408092">==</span>&nbsp;<span class="ident" id="6408095">r1</span>&nbsp;<span class="op" id="6408098">&amp;&amp;</span>&nbsp;<span class="ident" id="6408101">g0</span>&nbsp;<span class="op" id="6408104">==</span>&nbsp;<span class="ident" id="6408107">g1</span>&nbsp;<span class="op" id="6408110">&amp;&amp;</span>&nbsp;<span class="ident" id="6408113">b0</span>&nbsp;<span class="op" id="6408116">==</span>&nbsp;<span class="ident" id="6408119">b1</span>&nbsp;<span class="op" id="6408122">&amp;&amp;</span>&nbsp;<span class="ident" id="6408125">a0</span>&nbsp;<span class="op" id="6408128">==</span>&nbsp;<span class="ident" id="6408131">a1</span><br>
<span class="lineno"></span><span class="op" id="6408134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6408137">func</span>&nbsp;<span class="ident" id="6408142">TestImage</span><span class="op" id="6408151">(</span><span class="ident" id="6408152">t</span>&nbsp;<span class="op" id="6408154">*</span><span class="ident" id="6408155">testing</span><span class="op" id="6408162">.</span><span class="ident" id="6408163">T</span><span class="op" id="6408164">)</span>&nbsp;<span class="op" id="6408166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408169">testImage</span>&nbsp;<span class="op" id="6408179">:=</span>&nbsp;<span class="op" id="6408182">[</span><span class="op" id="6408183">]</span><span class="ident" id="6408184">image</span><span class="op" id="6408189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408193">NewRGBA</span><span class="op" id="6408200">(</span><span class="ident" id="6408201">Rect</span><span class="op" id="6408205">(</span><span class="num" id="6408206">0</span><span class="op" id="6408207">,</span>&nbsp;<span class="num" id="6408209">0</span><span class="op" id="6408210">,</span>&nbsp;<span class="num" id="6408212">10</span><span class="op" id="6408214">,</span>&nbsp;<span class="num" id="6408216">10</span><span class="op" id="6408218">)</span><span class="op" id="6408219">)</span><span class="op" id="6408220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408224">NewRGBA64</span><span class="op" id="6408233">(</span><span class="ident" id="6408234">Rect</span><span class="op" id="6408238">(</span><span class="num" id="6408239">0</span><span class="op" id="6408240">,</span>&nbsp;<span class="num" id="6408242">0</span><span class="op" id="6408243">,</span>&nbsp;<span class="num" id="6408245">10</span><span class="op" id="6408247">,</span>&nbsp;<span class="num" id="6408249">10</span><span class="op" id="6408251">)</span><span class="op" id="6408252">)</span><span class="op" id="6408253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408257">NewNRGBA</span><span class="op" id="6408265">(</span><span class="ident" id="6408266">Rect</span><span class="op" id="6408270">(</span><span class="num" id="6408271">0</span><span class="op" id="6408272">,</span>&nbsp;<span class="num" id="6408274">0</span><span class="op" id="6408275">,</span>&nbsp;<span class="num" id="6408277">10</span><span class="op" id="6408279">,</span>&nbsp;<span class="num" id="6408281">10</span><span class="op" id="6408283">)</span><span class="op" id="6408284">)</span><span class="op" id="6408285">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408289">NewNRGBA64</span><span class="op" id="6408299">(</span><span class="ident" id="6408300">Rect</span><span class="op" id="6408304">(</span><span class="num" id="6408305">0</span><span class="op" id="6408306">,</span>&nbsp;<span class="num" id="6408308">0</span><span class="op" id="6408309">,</span>&nbsp;<span class="num" id="6408311">10</span><span class="op" id="6408313">,</span>&nbsp;<span class="num" id="6408315">10</span><span class="op" id="6408317">)</span><span class="op" id="6408318">)</span><span class="op" id="6408319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408323">NewAlpha</span><span class="op" id="6408331">(</span><span class="ident" id="6408332">Rect</span><span class="op" id="6408336">(</span><span class="num" id="6408337">0</span><span class="op" id="6408338">,</span>&nbsp;<span class="num" id="6408340">0</span><span class="op" id="6408341">,</span>&nbsp;<span class="num" id="6408343">10</span><span class="op" id="6408345">,</span>&nbsp;<span class="num" id="6408347">10</span><span class="op" id="6408349">)</span><span class="op" id="6408350">)</span><span class="op" id="6408351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408355">NewAlpha16</span><span class="op" id="6408365">(</span><span class="ident" id="6408366">Rect</span><span class="op" id="6408370">(</span><span class="num" id="6408371">0</span><span class="op" id="6408372">,</span>&nbsp;<span class="num" id="6408374">0</span><span class="op" id="6408375">,</span>&nbsp;<span class="num" id="6408377">10</span><span class="op" id="6408379">,</span>&nbsp;<span class="num" id="6408381">10</span><span class="op" id="6408383">)</span><span class="op" id="6408384">)</span><span class="op" id="6408385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408389">NewGray</span><span class="op" id="6408396">(</span><span class="ident" id="6408397">Rect</span><span class="op" id="6408401">(</span><span class="num" id="6408402">0</span><span class="op" id="6408403">,</span>&nbsp;<span class="num" id="6408405">0</span><span class="op" id="6408406">,</span>&nbsp;<span class="num" id="6408408">10</span><span class="op" id="6408410">,</span>&nbsp;<span class="num" id="6408412">10</span><span class="op" id="6408414">)</span><span class="op" id="6408415">)</span><span class="op" id="6408416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408420">NewGray16</span><span class="op" id="6408429">(</span><span class="ident" id="6408430">Rect</span><span class="op" id="6408434">(</span><span class="num" id="6408435">0</span><span class="op" id="6408436">,</span>&nbsp;<span class="num" id="6408438">0</span><span class="op" id="6408439">,</span>&nbsp;<span class="num" id="6408441">10</span><span class="op" id="6408443">,</span>&nbsp;<span class="num" id="6408445">10</span><span class="op" id="6408447">)</span><span class="op" id="6408448">)</span><span class="op" id="6408449">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408453">NewPaletted</span><span class="op" id="6408464">(</span><span class="ident" id="6408465">Rect</span><span class="op" id="6408469">(</span><span class="num" id="6408470">0</span><span class="op" id="6408471">,</span>&nbsp;<span class="num" id="6408473">0</span><span class="op" id="6408474">,</span>&nbsp;<span class="num" id="6408476">10</span><span class="op" id="6408478">,</span>&nbsp;<span class="num" id="6408480">10</span><span class="op" id="6408482">)</span><span class="op" id="6408483">,</span>&nbsp;<span class="ident" id="6408485">color</span><span class="op" id="6408490">.</span><span class="ident" id="6408491">Palette</span><span class="op" id="6408498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408503">Transparent</span><span class="op" id="6408514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408519">Opaque</span><span class="op" id="6408525">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408529">}</span><span class="op" id="6408530">)</span><span class="op" id="6408531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408534">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408537">for</span>&nbsp;<span class="ident" id="6408541">_</span><span class="op" id="6408542">,</span>&nbsp;<span class="ident" id="6408544">m</span>&nbsp;<span class="op" id="6408546">:=</span>&nbsp;<span class="keyword" id="6408549">range</span>&nbsp;<span class="ident" id="6408555">testImage</span>&nbsp;<span class="op" id="6408565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408569">if</span>&nbsp;<span class="op" id="6408572">!</span><span class="ident" id="6408573">Rect</span><span class="op" id="6408577">(</span><span class="num" id="6408578">0</span><span class="op" id="6408579">,</span>&nbsp;<span class="num" id="6408581">0</span><span class="op" id="6408582">,</span>&nbsp;<span class="num" id="6408584">10</span><span class="op" id="6408586">,</span>&nbsp;<span class="num" id="6408588">10</span><span class="op" id="6408590">)</span><span class="op" id="6408591">.</span><span class="ident" id="6408592">Eq</span><span class="op" id="6408594">(</span><span class="ident" id="6408595">m</span><span class="op" id="6408596">.</span><span class="ident" id="6408597">Bounds</span><span class="op" id="6408603">(</span><span class="op" id="6408604">)</span><span class="op" id="6408605">)</span>&nbsp;<span class="op" id="6408607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408612">t</span><span class="op" id="6408613">.</span><span class="ident" id="6408614">Errorf</span><span class="op" id="6408620">(</span><span class="string" id="6408621">&#34;%T:&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6408649">,</span>&nbsp;<span class="ident" id="6408651">m</span><span class="op" id="6408652">,</span>&nbsp;<span class="ident" id="6408654">Rect</span><span class="op" id="6408658">(</span><span class="num" id="6408659">0</span><span class="op" id="6408660">,</span>&nbsp;<span class="num" id="6408662">0</span><span class="op" id="6408663">,</span>&nbsp;<span class="num" id="6408665">10</span><span class="op" id="6408667">,</span>&nbsp;<span class="num" id="6408669">10</span><span class="op" id="6408671">)</span><span class="op" id="6408672">,</span>&nbsp;<span class="ident" id="6408674">m</span><span class="op" id="6408675">.</span><span class="ident" id="6408676">Bounds</span><span class="op" id="6408682">(</span><span class="op" id="6408683">)</span><span class="op" id="6408684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408689">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408700">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408704">if</span>&nbsp;<span class="op" id="6408707">!</span><span class="ident" id="6408708">cmp</span><span class="op" id="6408711">(</span><span class="ident" id="6408712">t</span><span class="op" id="6408713">,</span>&nbsp;<span class="ident" id="6408715">m</span><span class="op" id="6408716">.</span><span class="ident" id="6408717">ColorModel</span><span class="op" id="6408727">(</span><span class="op" id="6408728">)</span><span class="op" id="6408729">,</span>&nbsp;<span class="ident" id="6408731">Transparent</span><span class="op" id="6408742">,</span>&nbsp;<span class="ident" id="6408744">m</span><span class="op" id="6408745">.</span><span class="ident" id="6408746">At</span><span class="op" id="6408748">(</span><span class="num" id="6408749">6</span><span class="op" id="6408750">,</span>&nbsp;<span class="num" id="6408752">3</span><span class="op" id="6408753">)</span><span class="op" id="6408754">)</span>&nbsp;<span class="op" id="6408756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408761">t</span><span class="op" id="6408762">.</span><span class="ident" id="6408763">Errorf</span><span class="op" id="6408769">(</span><span class="string" id="6408770">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6408812">,</span>&nbsp;<span class="ident" id="6408814">m</span><span class="op" id="6408815">,</span>&nbsp;<span class="ident" id="6408817">m</span><span class="op" id="6408818">.</span><span class="ident" id="6408819">At</span><span class="op" id="6408821">(</span><span class="num" id="6408822">6</span><span class="op" id="6408823">,</span>&nbsp;<span class="num" id="6408825">3</span><span class="op" id="6408826">)</span><span class="op" id="6408827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408832">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6408843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408847">m</span><span class="op" id="6408848">.</span><span class="ident" id="6408849">Set</span><span class="op" id="6408852">(</span><span class="num" id="6408853">6</span><span class="op" id="6408854">,</span>&nbsp;<span class="num" id="6408856">3</span><span class="op" id="6408857">,</span>&nbsp;<span class="ident" id="6408859">Opaque</span><span class="op" id="6408865">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408869">if</span>&nbsp;<span class="op" id="6408872">!</span><span class="ident" id="6408873">cmp</span><span class="op" id="6408876">(</span><span class="ident" id="6408877">t</span><span class="op" id="6408878">,</span>&nbsp;<span class="ident" id="6408880">m</span><span class="op" id="6408881">.</span><span class="ident" id="6408882">ColorModel</span><span class="op" id="6408892">(</span><span class="op" id="6408893">)</span><span class="op" id="6408894">,</span>&nbsp;<span class="ident" id="6408896">Opaque</span><span class="op" id="6408902">,</span>&nbsp;<span class="ident" id="6408904">m</span><span class="op" id="6408905">.</span><span class="ident" id="6408906">At</span><span class="op" id="6408908">(</span><span class="num" id="6408909">6</span><span class="op" id="6408910">,</span>&nbsp;<span class="num" id="6408912">3</span><span class="op" id="6408913">)</span><span class="op" id="6408914">)</span>&nbsp;<span class="op" id="6408916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6408921">t</span><span class="op" id="6408922">.</span><span class="ident" id="6408923">Errorf</span><span class="op" id="6408929">(</span><span class="string" id="6408930">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6408976">,</span>&nbsp;<span class="ident" id="6408978">m</span><span class="op" id="6408979">,</span>&nbsp;<span class="ident" id="6408981">m</span><span class="op" id="6408982">.</span><span class="ident" id="6408983">At</span><span class="op" id="6408985">(</span><span class="num" id="6408986">6</span><span class="op" id="6408987">,</span>&nbsp;<span class="num" id="6408989">3</span><span class="op" id="6408990">)</span><span class="op" id="6408991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6408996">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409011">if</span>&nbsp;<span class="op" id="6409014">!</span><span class="ident" id="6409015">m</span><span class="op" id="6409016">.</span><span class="ident" id="6409017">SubImage</span><span class="op" id="6409025">(</span><span class="ident" id="6409026">Rect</span><span class="op" id="6409030">(</span><span class="num" id="6409031">6</span><span class="op" id="6409032">,</span>&nbsp;<span class="num" id="6409034">3</span><span class="op" id="6409035">,</span>&nbsp;<span class="num" id="6409037">7</span><span class="op" id="6409038">,</span>&nbsp;<span class="num" id="6409040">4</span><span class="op" id="6409041">)</span><span class="op" id="6409042">)</span><span class="op" id="6409043">.</span><span class="op" id="6409044">(</span><span class="ident" id="6409045">image</span><span class="op" id="6409050">)</span><span class="op" id="6409051">.</span><span class="ident" id="6409052">Opaque</span><span class="op" id="6409058">(</span><span class="op" id="6409059">)</span>&nbsp;<span class="op" id="6409061">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409066">t</span><span class="op" id="6409067">.</span><span class="ident" id="6409068">Errorf</span><span class="op" id="6409074">(</span><span class="string" id="6409075">&#34;%T:&nbsp;at&nbsp;(6,&nbsp;3)&nbsp;was&nbsp;not&nbsp;opaque&#34;</span><span class="op" id="6409105">,</span>&nbsp;<span class="ident" id="6409107">m</span><span class="op" id="6409108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409113">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409128">m</span>&nbsp;<span class="op" id="6409130">=</span>&nbsp;<span class="ident" id="6409132">m</span><span class="op" id="6409133">.</span><span class="ident" id="6409134">SubImage</span><span class="op" id="6409142">(</span><span class="ident" id="6409143">Rect</span><span class="op" id="6409147">(</span><span class="num" id="6409148">3</span><span class="op" id="6409149">,</span>&nbsp;<span class="num" id="6409151">2</span><span class="op" id="6409152">,</span>&nbsp;<span class="num" id="6409154">9</span><span class="op" id="6409155">,</span>&nbsp;<span class="num" id="6409157">8</span><span class="op" id="6409158">)</span><span class="op" id="6409159">)</span><span class="op" id="6409160">.</span><span class="op" id="6409161">(</span><span class="ident" id="6409162">image</span><span class="op" id="6409167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409171">if</span>&nbsp;<span class="op" id="6409174">!</span><span class="ident" id="6409175">Rect</span><span class="op" id="6409179">(</span><span class="num" id="6409180">3</span><span class="op" id="6409181">,</span>&nbsp;<span class="num" id="6409183">2</span><span class="op" id="6409184">,</span>&nbsp;<span class="num" id="6409186">9</span><span class="op" id="6409187">,</span>&nbsp;<span class="num" id="6409189">8</span><span class="op" id="6409190">)</span><span class="op" id="6409191">.</span><span class="ident" id="6409192">Eq</span><span class="op" id="6409194">(</span><span class="ident" id="6409195">m</span><span class="op" id="6409196">.</span><span class="ident" id="6409197">Bounds</span><span class="op" id="6409203">(</span><span class="op" id="6409204">)</span><span class="op" id="6409205">)</span>&nbsp;<span class="op" id="6409207">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409212">t</span><span class="op" id="6409213">.</span><span class="ident" id="6409214">Errorf</span><span class="op" id="6409220">(</span><span class="string" id="6409221">&#34;%T:&nbsp;sub-image&nbsp;want&nbsp;bounds&nbsp;%v,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6409259">,</span>&nbsp;<span class="ident" id="6409261">m</span><span class="op" id="6409262">,</span>&nbsp;<span class="ident" id="6409264">Rect</span><span class="op" id="6409268">(</span><span class="num" id="6409269">3</span><span class="op" id="6409270">,</span>&nbsp;<span class="num" id="6409272">2</span><span class="op" id="6409273">,</span>&nbsp;<span class="num" id="6409275">9</span><span class="op" id="6409276">,</span>&nbsp;<span class="num" id="6409278">8</span><span class="op" id="6409279">)</span><span class="op" id="6409280">,</span>&nbsp;<span class="ident" id="6409282">m</span><span class="op" id="6409283">.</span><span class="ident" id="6409284">Bounds</span><span class="op" id="6409290">(</span><span class="op" id="6409291">)</span><span class="op" id="6409292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409297">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409312">if</span>&nbsp;<span class="op" id="6409315">!</span><span class="ident" id="6409316">cmp</span><span class="op" id="6409319">(</span><span class="ident" id="6409320">t</span><span class="op" id="6409321">,</span>&nbsp;<span class="ident" id="6409323">m</span><span class="op" id="6409324">.</span><span class="ident" id="6409325">ColorModel</span><span class="op" id="6409335">(</span><span class="op" id="6409336">)</span><span class="op" id="6409337">,</span>&nbsp;<span class="ident" id="6409339">Opaque</span><span class="op" id="6409345">,</span>&nbsp;<span class="ident" id="6409347">m</span><span class="op" id="6409348">.</span><span class="ident" id="6409349">At</span><span class="op" id="6409351">(</span><span class="num" id="6409352">6</span><span class="op" id="6409353">,</span>&nbsp;<span class="num" id="6409355">3</span><span class="op" id="6409356">)</span><span class="op" id="6409357">)</span>&nbsp;<span class="op" id="6409359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409364">t</span><span class="op" id="6409365">.</span><span class="ident" id="6409366">Errorf</span><span class="op" id="6409372">(</span><span class="string" id="6409373">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(6,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6409429">,</span>&nbsp;<span class="ident" id="6409431">m</span><span class="op" id="6409432">,</span>&nbsp;<span class="ident" id="6409434">m</span><span class="op" id="6409435">.</span><span class="ident" id="6409436">At</span><span class="op" id="6409438">(</span><span class="num" id="6409439">6</span><span class="op" id="6409440">,</span>&nbsp;<span class="num" id="6409442">3</span><span class="op" id="6409443">)</span><span class="op" id="6409444">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409449">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409464">if</span>&nbsp;<span class="op" id="6409467">!</span><span class="ident" id="6409468">cmp</span><span class="op" id="6409471">(</span><span class="ident" id="6409472">t</span><span class="op" id="6409473">,</span>&nbsp;<span class="ident" id="6409475">m</span><span class="op" id="6409476">.</span><span class="ident" id="6409477">ColorModel</span><span class="op" id="6409487">(</span><span class="op" id="6409488">)</span><span class="op" id="6409489">,</span>&nbsp;<span class="ident" id="6409491">Transparent</span><span class="op" id="6409502">,</span>&nbsp;<span class="ident" id="6409504">m</span><span class="op" id="6409505">.</span><span class="ident" id="6409506">At</span><span class="op" id="6409508">(</span><span class="num" id="6409509">3</span><span class="op" id="6409510">,</span>&nbsp;<span class="num" id="6409512">3</span><span class="op" id="6409513">)</span><span class="op" id="6409514">)</span>&nbsp;<span class="op" id="6409516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409521">t</span><span class="op" id="6409522">.</span><span class="ident" id="6409523">Errorf</span><span class="op" id="6409529">(</span><span class="string" id="6409530">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6409582">,</span>&nbsp;<span class="ident" id="6409584">m</span><span class="op" id="6409585">,</span>&nbsp;<span class="ident" id="6409587">m</span><span class="op" id="6409588">.</span><span class="ident" id="6409589">At</span><span class="op" id="6409591">(</span><span class="num" id="6409592">3</span><span class="op" id="6409593">,</span>&nbsp;<span class="num" id="6409595">3</span><span class="op" id="6409596">)</span><span class="op" id="6409597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409602">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409617">m</span><span class="op" id="6409618">.</span><span class="ident" id="6409619">Set</span><span class="op" id="6409622">(</span><span class="num" id="6409623">3</span><span class="op" id="6409624">,</span>&nbsp;<span class="num" id="6409626">3</span><span class="op" id="6409627">,</span>&nbsp;<span class="ident" id="6409629">Opaque</span><span class="op" id="6409635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409639">if</span>&nbsp;<span class="op" id="6409642">!</span><span class="ident" id="6409643">cmp</span><span class="op" id="6409646">(</span><span class="ident" id="6409647">t</span><span class="op" id="6409648">,</span>&nbsp;<span class="ident" id="6409650">m</span><span class="op" id="6409651">.</span><span class="ident" id="6409652">ColorModel</span><span class="op" id="6409662">(</span><span class="op" id="6409663">)</span><span class="op" id="6409664">,</span>&nbsp;<span class="ident" id="6409666">Opaque</span><span class="op" id="6409672">,</span>&nbsp;<span class="ident" id="6409674">m</span><span class="op" id="6409675">.</span><span class="ident" id="6409676">At</span><span class="op" id="6409678">(</span><span class="num" id="6409679">3</span><span class="op" id="6409680">,</span>&nbsp;<span class="num" id="6409682">3</span><span class="op" id="6409683">)</span><span class="op" id="6409684">)</span>&nbsp;<span class="op" id="6409686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409691">t</span><span class="op" id="6409692">.</span><span class="ident" id="6409693">Errorf</span><span class="op" id="6409699">(</span><span class="string" id="6409700">&#34;%T:&nbsp;sub-image&nbsp;at&nbsp;(3,&nbsp;3),&nbsp;want&nbsp;a&nbsp;non-zero&nbsp;color,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6409756">,</span>&nbsp;<span class="ident" id="6409758">m</span><span class="op" id="6409759">,</span>&nbsp;<span class="ident" id="6409761">m</span><span class="op" id="6409762">.</span><span class="ident" id="6409763">At</span><span class="op" id="6409765">(</span><span class="num" id="6409766">3</span><span class="op" id="6409767">,</span>&nbsp;<span class="num" id="6409769">3</span><span class="op" id="6409770">)</span><span class="op" id="6409771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6409776">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6409787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6409791">//&nbsp;Test&nbsp;that&nbsp;taking&nbsp;an&nbsp;empty&nbsp;sub-image&nbsp;starting&nbsp;at&nbsp;a&nbsp;corner&nbsp;does&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409869">m</span><span class="op" id="6409870">.</span><span class="ident" id="6409871">SubImage</span><span class="op" id="6409879">(</span><span class="ident" id="6409880">Rect</span><span class="op" id="6409884">(</span><span class="num" id="6409885">0</span><span class="op" id="6409886">,</span>&nbsp;<span class="num" id="6409888">0</span><span class="op" id="6409889">,</span>&nbsp;<span class="num" id="6409891">0</span><span class="op" id="6409892">,</span>&nbsp;<span class="num" id="6409894">0</span><span class="op" id="6409895">)</span><span class="op" id="6409896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409900">m</span><span class="op" id="6409901">.</span><span class="ident" id="6409902">SubImage</span><span class="op" id="6409910">(</span><span class="ident" id="6409911">Rect</span><span class="op" id="6409915">(</span><span class="num" id="6409916">10</span><span class="op" id="6409918">,</span>&nbsp;<span class="num" id="6409920">0</span><span class="op" id="6409921">,</span>&nbsp;<span class="num" id="6409923">10</span><span class="op" id="6409925">,</span>&nbsp;<span class="num" id="6409927">0</span><span class="op" id="6409928">)</span><span class="op" id="6409929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409933">m</span><span class="op" id="6409934">.</span><span class="ident" id="6409935">SubImage</span><span class="op" id="6409943">(</span><span class="ident" id="6409944">Rect</span><span class="op" id="6409948">(</span><span class="num" id="6409949">0</span><span class="op" id="6409950">,</span>&nbsp;<span class="num" id="6409952">10</span><span class="op" id="6409954">,</span>&nbsp;<span class="num" id="6409956">0</span><span class="op" id="6409957">,</span>&nbsp;<span class="num" id="6409959">10</span><span class="op" id="6409961">)</span><span class="op" id="6409962">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6409966">m</span><span class="op" id="6409967">.</span><span class="ident" id="6409968">SubImage</span><span class="op" id="6409976">(</span><span class="ident" id="6409977">Rect</span><span class="op" id="6409981">(</span><span class="num" id="6409982">10</span><span class="op" id="6409984">,</span>&nbsp;<span class="num" id="6409986">10</span><span class="op" id="6409988">,</span>&nbsp;<span class="num" id="6409990">10</span><span class="op" id="6409992">,</span>&nbsp;<span class="num" id="6409994">10</span><span class="op" id="6409996">)</span><span class="op" id="6409997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410000">}</span><br>
<span class="lineno"></span><span class="op" id="6410002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6410005">func</span>&nbsp;<span class="ident" id="6410010">Test16BitsPerColorChannel</span><span class="op" id="6410035">(</span><span class="ident" id="6410036">t</span>&nbsp;<span class="op" id="6410038">*</span><span class="ident" id="6410039">testing</span><span class="op" id="6410046">.</span><span class="ident" id="6410047">T</span><span class="op" id="6410048">)</span>&nbsp;<span class="op" id="6410050">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410053">testColorModel</span>&nbsp;<span class="op" id="6410068">:=</span>&nbsp;<span class="op" id="6410071">[</span><span class="op" id="6410072">]</span><span class="ident" id="6410073">color</span><span class="op" id="6410078">.</span><span class="ident" id="6410079">Model</span><span class="op" id="6410084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410088">color</span><span class="op" id="6410093">.</span><span class="ident" id="6410094">RGBA64Model</span><span class="op" id="6410105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410109">color</span><span class="op" id="6410114">.</span><span class="ident" id="6410115">NRGBA64Model</span><span class="op" id="6410127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410131">color</span><span class="op" id="6410136">.</span><span class="ident" id="6410137">Alpha16Model</span><span class="op" id="6410149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410153">color</span><span class="op" id="6410158">.</span><span class="ident" id="6410159">Gray16Model</span><span class="op" id="6410170">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410176">for</span>&nbsp;<span class="ident" id="6410180">_</span><span class="op" id="6410181">,</span>&nbsp;<span class="ident" id="6410183">cm</span>&nbsp;<span class="op" id="6410186">:=</span>&nbsp;<span class="keyword" id="6410189">range</span>&nbsp;<span class="ident" id="6410195">testColorModel</span>&nbsp;<span class="op" id="6410210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410214">c</span>&nbsp;<span class="op" id="6410216">:=</span>&nbsp;<span class="ident" id="6410219">cm</span><span class="op" id="6410221">.</span><span class="ident" id="6410222">Convert</span><span class="op" id="6410229">(</span><span class="ident" id="6410230">color</span><span class="op" id="6410235">.</span><span class="ident" id="6410236">RGBA64</span><span class="op" id="6410242">{</span><span class="num" id="6410243">0x1234</span><span class="op" id="6410249">,</span>&nbsp;<span class="num" id="6410251">0x1234</span><span class="op" id="6410257">,</span>&nbsp;<span class="num" id="6410259">0x1234</span><span class="op" id="6410265">,</span>&nbsp;<span class="num" id="6410267">0x1234</span><span class="op" id="6410273">}</span><span class="op" id="6410274">)</span>&nbsp;<span class="comment" id="6410276">//&nbsp;Premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410302">r</span><span class="op" id="6410303">,</span>&nbsp;<span class="ident" id="6410305">_</span><span class="op" id="6410306">,</span>&nbsp;<span class="ident" id="6410308">_</span><span class="op" id="6410309">,</span>&nbsp;<span class="ident" id="6410311">_</span>&nbsp;<span class="op" id="6410313">:=</span>&nbsp;<span class="ident" id="6410316">c</span><span class="op" id="6410317">.</span><span class="ident" id="6410318">RGBA</span><span class="op" id="6410322">(</span><span class="op" id="6410323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410327">if</span>&nbsp;<span class="ident" id="6410330">r</span>&nbsp;<span class="op" id="6410332">!=</span>&nbsp;<span class="num" id="6410335">0x1234</span>&nbsp;<span class="op" id="6410342">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410347">t</span><span class="op" id="6410348">.</span><span class="ident" id="6410349">Errorf</span><span class="op" id="6410355">(</span><span class="string" id="6410356">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="6410394">,</span>&nbsp;<span class="ident" id="6410396">c</span><span class="op" id="6410397">,</span>&nbsp;<span class="num" id="6410399">0x1234</span><span class="op" id="6410405">,</span>&nbsp;<span class="ident" id="6410407">r</span><span class="op" id="6410408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410413">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410430">testImage</span>&nbsp;<span class="op" id="6410440">:=</span>&nbsp;<span class="op" id="6410443">[</span><span class="op" id="6410444">]</span><span class="ident" id="6410445">image</span><span class="op" id="6410450">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410454">NewRGBA64</span><span class="op" id="6410463">(</span><span class="ident" id="6410464">Rect</span><span class="op" id="6410468">(</span><span class="num" id="6410469">0</span><span class="op" id="6410470">,</span>&nbsp;<span class="num" id="6410472">0</span><span class="op" id="6410473">,</span>&nbsp;<span class="num" id="6410475">10</span><span class="op" id="6410477">,</span>&nbsp;<span class="num" id="6410479">10</span><span class="op" id="6410481">)</span><span class="op" id="6410482">)</span><span class="op" id="6410483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410487">NewNRGBA64</span><span class="op" id="6410497">(</span><span class="ident" id="6410498">Rect</span><span class="op" id="6410502">(</span><span class="num" id="6410503">0</span><span class="op" id="6410504">,</span>&nbsp;<span class="num" id="6410506">0</span><span class="op" id="6410507">,</span>&nbsp;<span class="num" id="6410509">10</span><span class="op" id="6410511">,</span>&nbsp;<span class="num" id="6410513">10</span><span class="op" id="6410515">)</span><span class="op" id="6410516">)</span><span class="op" id="6410517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410521">NewAlpha16</span><span class="op" id="6410531">(</span><span class="ident" id="6410532">Rect</span><span class="op" id="6410536">(</span><span class="num" id="6410537">0</span><span class="op" id="6410538">,</span>&nbsp;<span class="num" id="6410540">0</span><span class="op" id="6410541">,</span>&nbsp;<span class="num" id="6410543">10</span><span class="op" id="6410545">,</span>&nbsp;<span class="num" id="6410547">10</span><span class="op" id="6410549">)</span><span class="op" id="6410550">)</span><span class="op" id="6410551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410555">NewGray16</span><span class="op" id="6410564">(</span><span class="ident" id="6410565">Rect</span><span class="op" id="6410569">(</span><span class="num" id="6410570">0</span><span class="op" id="6410571">,</span>&nbsp;<span class="num" id="6410573">0</span><span class="op" id="6410574">,</span>&nbsp;<span class="num" id="6410576">10</span><span class="op" id="6410578">,</span>&nbsp;<span class="num" id="6410580">10</span><span class="op" id="6410582">)</span><span class="op" id="6410583">)</span><span class="op" id="6410584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410587">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410590">for</span>&nbsp;<span class="ident" id="6410594">_</span><span class="op" id="6410595">,</span>&nbsp;<span class="ident" id="6410597">m</span>&nbsp;<span class="op" id="6410599">:=</span>&nbsp;<span class="keyword" id="6410602">range</span>&nbsp;<span class="ident" id="6410608">testImage</span>&nbsp;<span class="op" id="6410618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410622">m</span><span class="op" id="6410623">.</span><span class="ident" id="6410624">Set</span><span class="op" id="6410627">(</span><span class="num" id="6410628">1</span><span class="op" id="6410629">,</span>&nbsp;<span class="num" id="6410631">2</span><span class="op" id="6410632">,</span>&nbsp;<span class="ident" id="6410634">color</span><span class="op" id="6410639">.</span><span class="ident" id="6410640">NRGBA64</span><span class="op" id="6410647">{</span><span class="num" id="6410648">0xffff</span><span class="op" id="6410654">,</span>&nbsp;<span class="num" id="6410656">0xffff</span><span class="op" id="6410662">,</span>&nbsp;<span class="num" id="6410664">0xffff</span><span class="op" id="6410670">,</span>&nbsp;<span class="num" id="6410672">0x1357</span><span class="op" id="6410678">}</span><span class="op" id="6410679">)</span>&nbsp;<span class="comment" id="6410681">//&nbsp;Non-premultiplied&nbsp;alpha.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410711">r</span><span class="op" id="6410712">,</span>&nbsp;<span class="ident" id="6410714">_</span><span class="op" id="6410715">,</span>&nbsp;<span class="ident" id="6410717">_</span><span class="op" id="6410718">,</span>&nbsp;<span class="ident" id="6410720">_</span>&nbsp;<span class="op" id="6410722">:=</span>&nbsp;<span class="ident" id="6410725">m</span><span class="op" id="6410726">.</span><span class="ident" id="6410727">At</span><span class="op" id="6410729">(</span><span class="num" id="6410730">1</span><span class="op" id="6410731">,</span>&nbsp;<span class="num" id="6410733">2</span><span class="op" id="6410734">)</span><span class="op" id="6410735">.</span><span class="ident" id="6410736">RGBA</span><span class="op" id="6410740">(</span><span class="op" id="6410741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410745">if</span>&nbsp;<span class="ident" id="6410748">r</span>&nbsp;<span class="op" id="6410750">!=</span>&nbsp;<span class="num" id="6410753">0x1357</span>&nbsp;<span class="op" id="6410760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6410765">t</span><span class="op" id="6410766">.</span><span class="ident" id="6410767">Errorf</span><span class="op" id="6410773">(</span><span class="string" id="6410774">&#34;%T:&nbsp;want&nbsp;red&nbsp;value&nbsp;0x%04x&nbsp;got&nbsp;0x%04x&#34;</span><span class="op" id="6410812">,</span>&nbsp;<span class="ident" id="6410814">m</span><span class="op" id="6410815">,</span>&nbsp;<span class="num" id="6410817">0x1357</span><span class="op" id="6410823">,</span>&nbsp;<span class="ident" id="6410825">r</span><span class="op" id="6410826">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6410831">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6410845">}</span><br>
<span class="lineno"></span><span class="op" id="6410847">}</span>
</div>
</body>
</html>
