<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3256759">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3256814">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3256868">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3256919">package</span>&nbsp;<span class="ident" id="3256927">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3256937">import</span>&nbsp;<span class="op" id="3256944">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3256947">&#34;fmt&#34;</span><br>
<span class="lineno"></span><span class="op" id="3256953">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3256956">//&nbsp;context&nbsp;describes&nbsp;the&nbsp;state&nbsp;an&nbsp;HTML&nbsp;parser&nbsp;must&nbsp;be&nbsp;in&nbsp;when&nbsp;it&nbsp;reaches&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3257033">//&nbsp;portion&nbsp;of&nbsp;HTML&nbsp;produced&nbsp;by&nbsp;evaluating&nbsp;a&nbsp;particular&nbsp;template&nbsp;node.</span><br>
<span class="lineno"></span><span class="comment" id="3257103">//</span><br>
<span class="lineno"></span><span class="comment" id="3257106">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;of&nbsp;type&nbsp;context&nbsp;is&nbsp;the&nbsp;start&nbsp;context&nbsp;for&nbsp;a&nbsp;template&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="3257181">//&nbsp;produces&nbsp;an&nbsp;HTML&nbsp;fragment&nbsp;as&nbsp;defined&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="3257224">//&nbsp;http://www.w3.org/TR/html5/syntax.html#the-end</span><br>
<span class="lineno"></span><span class="comment" id="3257274">//&nbsp;where&nbsp;the&nbsp;context&nbsp;element&nbsp;is&nbsp;null.</span><br>
<span class="lineno"></span><span class="keyword" id="3257312">type</span>&nbsp;<span class="ident" id="3257317">context</span>&nbsp;<span class="keyword" id="3257325">struct</span>&nbsp;<span class="op" id="3257332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257335">state</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3257343"><a href="/html/template/context.go.html#3259016">state</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257350">delim</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3257358"><a href="/html/template/context.go.html#3262882">delim</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257365">urlPart</span>&nbsp;<span class="ident" id="3257373"><a href="/html/template/context.go.html#3263716">urlPart</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257382">jsCtx</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3257390"><a href="/html/template/context.go.html#3264693">jsCtx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257397">attr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3257405"><a href="/html/template/context.go.html#3266421">attr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257411">element</span>&nbsp;<span class="ident" id="3257419"><a href="/html/template/context.go.html#3265548">element</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257428">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3257436">*</span><span class="ident" id="3257437"><a href="/html/template/error.go.html#3280695">Error</a></span><br>
<span class="lineno"></span><span class="op" id="3257443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3257446">func</span>&nbsp;<span class="op" id="3257451">(</span><span class="ident" id="3257452">c</span>&nbsp;<span class="ident" id="3257454"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3257461">)</span>&nbsp;<span class="ident" id="3257463">String</span><span class="op" id="3257469">(</span><span class="op" id="3257470">)</span>&nbsp;<span class="builtintype" id="3257472">string</span>&nbsp;<span class="op" id="3257479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257482">return</span>&nbsp;<span class="ident" id="3257489"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3257492">.</span><span class="ident" id="3257493">Sprintf</span><span class="op" id="3257500">(</span><span class="string" id="3257501">&#34;{%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v&nbsp;%v}&#34;</span><span class="op" id="3257525">,</span>&nbsp;<span class="ident" id="3257527"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257528">.</span><span class="ident" id="3257529">state</span><span class="op" id="3257534">,</span>&nbsp;<span class="ident" id="3257536"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257537">.</span><span class="ident" id="3257538">delim</span><span class="op" id="3257543">,</span>&nbsp;<span class="ident" id="3257545"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257546">.</span><span class="ident" id="3257547">urlPart</span><span class="op" id="3257554">,</span>&nbsp;<span class="ident" id="3257556"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257557">.</span><span class="ident" id="3257558">jsCtx</span><span class="op" id="3257563">,</span>&nbsp;<span class="ident" id="3257565"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257566">.</span><span class="ident" id="3257567">attr</span><span class="op" id="3257571">,</span>&nbsp;<span class="ident" id="3257573"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257574">.</span><span class="ident" id="3257575">element</span><span class="op" id="3257582">,</span>&nbsp;<span class="ident" id="3257584"><a href="/html/template/context.go.html#3257452">c</a></span><span class="op" id="3257585">.</span><span class="ident" id="3257586">err</span><span class="op" id="3257589">)</span><br>
<span class="lineno">30</span><span class="op" id="3257591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257594">//&nbsp;eq&nbsp;reports&nbsp;whether&nbsp;two&nbsp;contexts&nbsp;are&nbsp;equal.</span><br>
<span class="lineno"></span><span class="keyword" id="3257640">func</span>&nbsp;<span class="op" id="3257645">(</span><span class="ident" id="3257646">c</span>&nbsp;<span class="ident" id="3257648"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3257655">)</span>&nbsp;<span class="ident" id="3257657">eq</span><span class="op" id="3257659">(</span><span class="ident" id="3257660">d</span>&nbsp;<span class="ident" id="3257662"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3257669">)</span>&nbsp;<span class="builtintype" id="3257671">bool</span>&nbsp;<span class="op" id="3257676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3257679">return</span>&nbsp;<span class="ident" id="3257686"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257687">.</span><span class="ident" id="3257688">state</span>&nbsp;<span class="op" id="3257694">==</span>&nbsp;<span class="ident" id="3257697"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257698">.</span><span class="ident" id="3257699">state</span>&nbsp;<span class="op" id="3257705">&amp;&amp;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257710"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257711">.</span><span class="ident" id="3257712">delim</span>&nbsp;<span class="op" id="3257718">==</span>&nbsp;<span class="ident" id="3257721"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257722">.</span><span class="ident" id="3257723">delim</span>&nbsp;<span class="op" id="3257729">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257734"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257735">.</span><span class="ident" id="3257736">urlPart</span>&nbsp;<span class="op" id="3257744">==</span>&nbsp;<span class="ident" id="3257747"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257748">.</span><span class="ident" id="3257749">urlPart</span>&nbsp;<span class="op" id="3257757">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257762"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257763">.</span><span class="ident" id="3257764">jsCtx</span>&nbsp;<span class="op" id="3257770">==</span>&nbsp;<span class="ident" id="3257773"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257774">.</span><span class="ident" id="3257775">jsCtx</span>&nbsp;<span class="op" id="3257781">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257786"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257787">.</span><span class="ident" id="3257788">attr</span>&nbsp;<span class="op" id="3257793">==</span>&nbsp;<span class="ident" id="3257796"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257797">.</span><span class="ident" id="3257798">attr</span>&nbsp;<span class="op" id="3257803">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257808"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257809">.</span><span class="ident" id="3257810">element</span>&nbsp;<span class="op" id="3257818">==</span>&nbsp;<span class="ident" id="3257821"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257822">.</span><span class="ident" id="3257823">element</span>&nbsp;<span class="op" id="3257831">&amp;&amp;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3257836"><a href="/html/template/context.go.html#3257646">c</a></span><span class="op" id="3257837">.</span><span class="ident" id="3257838">err</span>&nbsp;<span class="op" id="3257842">==</span>&nbsp;<span class="ident" id="3257845"><a href="/html/template/context.go.html#3257660">d</a></span><span class="op" id="3257846">.</span><span class="ident" id="3257847">err</span><br>
<span class="lineno"></span><span class="op" id="3257851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3257854">//&nbsp;mangle&nbsp;produces&nbsp;an&nbsp;identifier&nbsp;that&nbsp;includes&nbsp;a&nbsp;suffix&nbsp;that&nbsp;distinguishes&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3257932">//&nbsp;from&nbsp;template&nbsp;names&nbsp;mangled&nbsp;with&nbsp;different&nbsp;contexts.</span><br>
<span class="lineno">45</span><span class="keyword" id="3257988">func</span>&nbsp;<span class="op" id="3257993">(</span><span class="ident" id="3257994">c</span>&nbsp;<span class="ident" id="3257996"><a href="/html/template/context.go.html#3257317">context</a></span><span class="op" id="3258003">)</span>&nbsp;<span class="ident" id="3258005">mangle</span><span class="op" id="3258011">(</span><span class="ident" id="3258012">templateName</span>&nbsp;<span class="builtintype" id="3258025">string</span><span class="op" id="3258031">)</span>&nbsp;<span class="builtintype" id="3258033">string</span>&nbsp;<span class="op" id="3258040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3258043">//&nbsp;The&nbsp;mangled&nbsp;name&nbsp;for&nbsp;the&nbsp;default&nbsp;context&nbsp;is&nbsp;the&nbsp;input&nbsp;templateName.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258115">if</span>&nbsp;<span class="ident" id="3258118"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258119">.</span><span class="ident" id="3258120">state</span>&nbsp;<span class="op" id="3258126">==</span>&nbsp;<span class="ident" id="3258129"><a href="/html/template/context.go.html#3259212">stateText</a></span>&nbsp;<span class="op" id="3258139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258143">return</span>&nbsp;<span class="ident" id="3258150"><a href="/html/template/context.go.html#3258012">templateName</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258164">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258167">s</span>&nbsp;<span class="op" id="3258169">:=</span>&nbsp;<span class="ident" id="3258172"><a href="/html/template/context.go.html#3258012">templateName</a></span>&nbsp;<span class="op" id="3258185">+</span>&nbsp;<span class="string" id="3258187">&#34;$htmltemplate_&#34;</span>&nbsp;<span class="op" id="3258204">+</span>&nbsp;<span class="ident" id="3258206"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258207">.</span><span class="ident" id="3258208">state</span><span class="op" id="3258213">.</span><span class="ident" id="3258214">String</span><span class="op" id="3258220">(</span><span class="op" id="3258221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258224">if</span>&nbsp;<span class="ident" id="3258227"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258228">.</span><span class="ident" id="3258229">delim</span>&nbsp;<span class="op" id="3258235">!=</span>&nbsp;<span class="num" id="3258238">0</span>&nbsp;<span class="op" id="3258240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258244"><a href="/html/template/context.go.html#3258167">s</a></span>&nbsp;<span class="op" id="3258246">+=</span>&nbsp;<span class="string" id="3258249">&#34;_&#34;</span>&nbsp;<span class="op" id="3258253">+</span>&nbsp;<span class="ident" id="3258255"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258256">.</span><span class="ident" id="3258257">delim</span><span class="op" id="3258262">.</span><span class="ident" id="3258263">String</span><span class="op" id="3258269">(</span><span class="op" id="3258270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258276">if</span>&nbsp;<span class="ident" id="3258279"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258280">.</span><span class="ident" id="3258281">urlPart</span>&nbsp;<span class="op" id="3258289">!=</span>&nbsp;<span class="num" id="3258292">0</span>&nbsp;<span class="op" id="3258294">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258298"><a href="/html/template/context.go.html#3258167">s</a></span>&nbsp;<span class="op" id="3258300">+=</span>&nbsp;<span class="string" id="3258303">&#34;_&#34;</span>&nbsp;<span class="op" id="3258307">+</span>&nbsp;<span class="ident" id="3258309"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258310">.</span><span class="ident" id="3258311">urlPart</span><span class="op" id="3258318">.</span><span class="ident" id="3258319">String</span><span class="op" id="3258325">(</span><span class="op" id="3258326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258332">if</span>&nbsp;<span class="ident" id="3258335"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258336">.</span><span class="ident" id="3258337">jsCtx</span>&nbsp;<span class="op" id="3258343">!=</span>&nbsp;<span class="num" id="3258346">0</span>&nbsp;<span class="op" id="3258348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258352"><a href="/html/template/context.go.html#3258167">s</a></span>&nbsp;<span class="op" id="3258354">+=</span>&nbsp;<span class="string" id="3258357">&#34;_&#34;</span>&nbsp;<span class="op" id="3258361">+</span>&nbsp;<span class="ident" id="3258363"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258364">.</span><span class="ident" id="3258365">jsCtx</span><span class="op" id="3258370">.</span><span class="ident" id="3258371">String</span><span class="op" id="3258377">(</span><span class="op" id="3258378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258381">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258384">if</span>&nbsp;<span class="ident" id="3258387"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258388">.</span><span class="ident" id="3258389">attr</span>&nbsp;<span class="op" id="3258394">!=</span>&nbsp;<span class="num" id="3258397">0</span>&nbsp;<span class="op" id="3258399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258403"><a href="/html/template/context.go.html#3258167">s</a></span>&nbsp;<span class="op" id="3258405">+=</span>&nbsp;<span class="string" id="3258408">&#34;_&#34;</span>&nbsp;<span class="op" id="3258412">+</span>&nbsp;<span class="ident" id="3258414"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258415">.</span><span class="ident" id="3258416">attr</span><span class="op" id="3258420">.</span><span class="ident" id="3258421">String</span><span class="op" id="3258427">(</span><span class="op" id="3258428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258434">if</span>&nbsp;<span class="ident" id="3258437"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258438">.</span><span class="ident" id="3258439">element</span>&nbsp;<span class="op" id="3258447">!=</span>&nbsp;<span class="num" id="3258450">0</span>&nbsp;<span class="op" id="3258452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3258456"><a href="/html/template/context.go.html#3258167">s</a></span>&nbsp;<span class="op" id="3258458">+=</span>&nbsp;<span class="string" id="3258461">&#34;_&#34;</span>&nbsp;<span class="op" id="3258465">+</span>&nbsp;<span class="ident" id="3258467"><a href="/html/template/context.go.html#3257994">c</a></span><span class="op" id="3258468">.</span><span class="ident" id="3258469">element</span><span class="op" id="3258476">.</span><span class="ident" id="3258477">String</span><span class="op" id="3258483">(</span><span class="op" id="3258484">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3258487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3258490">return</span>&nbsp;<span class="ident" id="3258497"><a href="/html/template/context.go.html#3258167">s</a></span><br>
<span class="lineno"></span><span class="op" id="3258499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3258502">//&nbsp;state&nbsp;describes&nbsp;a&nbsp;high-level&nbsp;HTML&nbsp;parser&nbsp;state.</span><br>
<span class="lineno">70</span><span class="comment" id="3258553">//</span><br>
<span class="lineno"></span><span class="comment" id="3258556">//&nbsp;It&nbsp;bounds&nbsp;the&nbsp;top&nbsp;of&nbsp;the&nbsp;element&nbsp;stack,&nbsp;and&nbsp;by&nbsp;extension&nbsp;the&nbsp;HTML&nbsp;insertion</span><br>
<span class="lineno"></span><span class="comment" id="3258635">//&nbsp;mode,&nbsp;but&nbsp;also&nbsp;contains&nbsp;state&nbsp;that&nbsp;does&nbsp;not&nbsp;correspond&nbsp;to&nbsp;anything&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3258712">//&nbsp;HTML5&nbsp;parsing&nbsp;algorithm&nbsp;because&nbsp;a&nbsp;single&nbsp;token&nbsp;production&nbsp;in&nbsp;the&nbsp;HTML</span><br>
<span class="lineno"></span><span class="comment" id="3258785">//&nbsp;grammar&nbsp;may&nbsp;contain&nbsp;embedded&nbsp;actions&nbsp;in&nbsp;a&nbsp;template.&nbsp;For&nbsp;instance,&nbsp;the&nbsp;quoted</span><br>
<span class="lineno">75</span><span class="comment" id="3258865">//&nbsp;HTML&nbsp;attribute&nbsp;produced&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3258895">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;title=&#34;Hello&nbsp;{{.World}}&#34;&gt;</span><br>
<span class="lineno"></span><span class="comment" id="3258933">//&nbsp;is&nbsp;a&nbsp;single&nbsp;token&nbsp;in&nbsp;HTML&#39;s&nbsp;grammar&nbsp;but&nbsp;in&nbsp;a&nbsp;template&nbsp;spans&nbsp;several&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="3259011">type</span>&nbsp;<span class="ident" id="3259016">state</span>&nbsp;<span class="builtintype" id="3259022">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="3259029">const</span>&nbsp;<span class="op" id="3259035">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259038">//&nbsp;stateText&nbsp;is&nbsp;parsed&nbsp;character&nbsp;data.&nbsp;An&nbsp;HTML&nbsp;parser&nbsp;is&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259099">//&nbsp;this&nbsp;state&nbsp;when&nbsp;its&nbsp;parse&nbsp;position&nbsp;is&nbsp;outside&nbsp;an&nbsp;HTML&nbsp;tag,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259162">//&nbsp;directive,&nbsp;comment,&nbsp;and&nbsp;special&nbsp;element&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259212">stateText</span>&nbsp;<span class="ident" id="3259222"><a href="/html/template/context.go.html#3259016">state</a></span>&nbsp;<span class="op" id="3259228">=</span>&nbsp;<span class="ident" id="3259230">iota</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259236">//&nbsp;stateTag&nbsp;occurs&nbsp;before&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;or&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259302">stateTag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259312">//&nbsp;stateAttrName&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;attribute&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259363">//&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;^name^&nbsp;=&nbsp;value`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259415">stateAttrName</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259430">//&nbsp;stateAfterName&nbsp;occurs&nbsp;after&nbsp;an&nbsp;attr&nbsp;name&nbsp;has&nbsp;ended&nbsp;but&nbsp;before&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259500">//&nbsp;equals&nbsp;sign.&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;name^&nbsp;^=&nbsp;value`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259565">stateAfterName</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259581">//&nbsp;stateBeforeValue&nbsp;occurs&nbsp;after&nbsp;the&nbsp;equals&nbsp;sign&nbsp;but&nbsp;before&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259653">//&nbsp;It&nbsp;occurs&nbsp;between&nbsp;the&nbsp;^&#39;s&nbsp;in&nbsp;`&nbsp;name&nbsp;=^&nbsp;^value`.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259705">stateBeforeValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259723">//&nbsp;stateHTMLCmt&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;&lt;!--&nbsp;HTML&nbsp;comment&nbsp;--&gt;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259780">stateHTMLCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259794">//&nbsp;stateRCDATA&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;RCDATA&nbsp;element&nbsp;(&lt;textarea&gt;&nbsp;or&nbsp;&lt;title&gt;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259866">//&nbsp;as&nbsp;described&nbsp;at&nbsp;http://www.w3.org/TR/html5/syntax.html#elements-0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3259936">stateRCDATA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3259949">//&nbsp;stateAttr&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;whose&nbsp;content&nbsp;is&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260018">stateAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260029">//&nbsp;stateURL&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;whose&nbsp;content&nbsp;is&nbsp;a&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260098">stateURL</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260108">//&nbsp;stateJS&nbsp;occurs&nbsp;inside&nbsp;an&nbsp;event&nbsp;handler&nbsp;or&nbsp;script&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260170">stateJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260179">//&nbsp;stateJSDqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;double&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260245">stateJSDqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260259">//&nbsp;stateJSSqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;single&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260325">stateJSSqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260339">//&nbsp;stateJSRegexp&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;regexp&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260400">stateJSRegexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260415">//&nbsp;stateJSBlockCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;/*&nbsp;block&nbsp;comment&nbsp;*/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260483">stateJSBlockCmt</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260500">//&nbsp;stateJSLineCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;JavaScript&nbsp;//&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260563">stateJSLineCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260579">//&nbsp;stateCSS&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;&lt;style&gt;&nbsp;element&nbsp;or&nbsp;style&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260644">stateCSS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260654">//&nbsp;stateCSSDqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;double&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260714">stateCSSDqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260729">//&nbsp;stateCSSSqStr&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;single&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260789">stateCSSSqStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260804">//&nbsp;stateCSSDqURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;double&nbsp;quoted&nbsp;url(&#34;...&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260868">stateCSSDqURL</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260883">//&nbsp;stateCSSSqURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;single&nbsp;quoted&nbsp;url(&#39;...&#39;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3260947">stateCSSSqURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3260962">//&nbsp;stateCSSURL&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;unquoted&nbsp;url(...).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261017">stateCSSURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261030">//&nbsp;stateCSSBlockCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;/*&nbsp;block&nbsp;comment&nbsp;*/.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261092">stateCSSBlockCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261110">//&nbsp;stateCSSLineCmt&nbsp;occurs&nbsp;inside&nbsp;a&nbsp;CSS&nbsp;//&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261167">stateCSSLineCmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261184">//&nbsp;stateError&nbsp;is&nbsp;an&nbsp;infectious&nbsp;error&nbsp;state&nbsp;outside&nbsp;any&nbsp;valid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3261246">//&nbsp;HTML/CSS/JS&nbsp;construct.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261273">stateError</span><br>
<span class="lineno"></span><span class="op" id="3261284">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3261287">var</span>&nbsp;<span class="ident" id="3261291">stateNames</span>&nbsp;<span class="op" id="3261302">=</span>&nbsp;<span class="op" id="3261304">[</span><span class="op" id="3261305">...</span><span class="op" id="3261308">]</span><span class="builtintype" id="3261309">string</span><span class="op" id="3261315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261318"><a href="/html/template/context.go.html#3259212">stateText</a></span><span class="op" id="3261327">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261336">&#34;stateText&#34;</span><span class="op" id="3261347">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261350"><a href="/html/template/context.go.html#3259302">stateTag</a></span><span class="op" id="3261358">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261368">&#34;stateTag&#34;</span><span class="op" id="3261378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261381"><a href="/html/template/context.go.html#3259415">stateAttrName</a></span><span class="op" id="3261394">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261399">&#34;stateAttrName&#34;</span><span class="op" id="3261414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261417"><a href="/html/template/context.go.html#3259565">stateAfterName</a></span><span class="op" id="3261431">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3261435">&#34;stateAfterName&#34;</span><span class="op" id="3261451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261454"><a href="/html/template/context.go.html#3259705">stateBeforeValue</a></span><span class="op" id="3261470">:</span>&nbsp;<span class="string" id="3261472">&#34;stateBeforeValue&#34;</span><span class="op" id="3261490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261493"><a href="/html/template/context.go.html#3259780">stateHTMLCmt</a></span><span class="op" id="3261505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261511">&#34;stateHTMLCmt&#34;</span><span class="op" id="3261525">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261528"><a href="/html/template/context.go.html#3259936">stateRCDATA</a></span><span class="op" id="3261539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261546">&#34;stateRCDATA&#34;</span><span class="op" id="3261559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261562"><a href="/html/template/context.go.html#3260018">stateAttr</a></span><span class="op" id="3261571">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261580">&#34;stateAttr&#34;</span><span class="op" id="3261591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261594"><a href="/html/template/context.go.html#3260098">stateURL</a></span><span class="op" id="3261602">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261612">&#34;stateURL&#34;</span><span class="op" id="3261622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261625"><a href="/html/template/context.go.html#3260170">stateJS</a></span><span class="op" id="3261632">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261643">&#34;stateJS&#34;</span><span class="op" id="3261652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261655"><a href="/html/template/context.go.html#3260245">stateJSDqStr</a></span><span class="op" id="3261667">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261673">&#34;stateJSDqStr&#34;</span><span class="op" id="3261687">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261690"><a href="/html/template/context.go.html#3260325">stateJSSqStr</a></span><span class="op" id="3261702">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261708">&#34;stateJSSqStr&#34;</span><span class="op" id="3261722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261725"><a href="/html/template/context.go.html#3260400">stateJSRegexp</a></span><span class="op" id="3261738">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261743">&#34;stateJSRegexp&#34;</span><span class="op" id="3261758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261761"><a href="/html/template/context.go.html#3260483">stateJSBlockCmt</a></span><span class="op" id="3261776">:</span>&nbsp;&nbsp;<span class="string" id="3261779">&#34;stateJSBlockCmt&#34;</span><span class="op" id="3261796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261799"><a href="/html/template/context.go.html#3260563">stateJSLineCmt</a></span><span class="op" id="3261813">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3261817">&#34;stateJSLineCmt&#34;</span><span class="op" id="3261833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261836"><a href="/html/template/context.go.html#3260644">stateCSS</a></span><span class="op" id="3261844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261854">&#34;stateCSS&#34;</span><span class="op" id="3261864">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261867"><a href="/html/template/context.go.html#3260714">stateCSSDqStr</a></span><span class="op" id="3261880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261885">&#34;stateCSSDqStr&#34;</span><span class="op" id="3261900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261903"><a href="/html/template/context.go.html#3260789">stateCSSSqStr</a></span><span class="op" id="3261916">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261921">&#34;stateCSSSqStr&#34;</span><span class="op" id="3261936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261939"><a href="/html/template/context.go.html#3260868">stateCSSDqURL</a></span><span class="op" id="3261952">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261957">&#34;stateCSSDqURL&#34;</span><span class="op" id="3261972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3261975"><a href="/html/template/context.go.html#3260947">stateCSSSqURL</a></span><span class="op" id="3261988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3261993">&#34;stateCSSSqURL&#34;</span><span class="op" id="3262008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262011"><a href="/html/template/context.go.html#3261017">stateCSSURL</a></span><span class="op" id="3262022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3262029">&#34;stateCSSURL&#34;</span><span class="op" id="3262042">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262045"><a href="/html/template/context.go.html#3261092">stateCSSBlockCmt</a></span><span class="op" id="3262061">:</span>&nbsp;<span class="string" id="3262063">&#34;stateCSSBlockCmt&#34;</span><span class="op" id="3262081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262084"><a href="/html/template/context.go.html#3261167">stateCSSLineCmt</a></span><span class="op" id="3262099">:</span>&nbsp;&nbsp;<span class="string" id="3262102">&#34;stateCSSLineCmt&#34;</span><span class="op" id="3262119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262122"><a href="/html/template/context.go.html#3261273">stateError</a></span><span class="op" id="3262132">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3262140">&#34;stateError&#34;</span><span class="op" id="3262152">,</span><br>
<span class="lineno"></span><span class="op" id="3262154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="3262157">func</span>&nbsp;<span class="op" id="3262162">(</span><span class="ident" id="3262163">s</span>&nbsp;<span class="ident" id="3262165"><a href="/html/template/context.go.html#3259016">state</a></span><span class="op" id="3262170">)</span>&nbsp;<span class="ident" id="3262172">String</span><span class="op" id="3262178">(</span><span class="op" id="3262179">)</span>&nbsp;<span class="builtintype" id="3262181">string</span>&nbsp;<span class="op" id="3262188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262191">if</span>&nbsp;<span class="builtintype" id="3262194">int</span><span class="op" id="3262197">(</span><span class="ident" id="3262198"><a href="/html/template/context.go.html#3262163">s</a></span><span class="op" id="3262199">)</span>&nbsp;<span class="op" id="3262201">&lt;</span>&nbsp;<span class="builtinfunc" id="3262203">len</span><span class="op" id="3262206">(</span><span class="ident" id="3262207"><a href="/html/template/context.go.html#3261291">stateNames</a></span><span class="op" id="3262217">)</span>&nbsp;<span class="op" id="3262219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262223">return</span>&nbsp;<span class="ident" id="3262230"><a href="/html/template/context.go.html#3261291">stateNames</a></span><span class="op" id="3262240">[</span><span class="ident" id="3262241"><a href="/html/template/context.go.html#3262163">s</a></span><span class="op" id="3262242">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262248">return</span>&nbsp;<span class="ident" id="3262255"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3262258">.</span><span class="ident" id="3262259">Sprintf</span><span class="op" id="3262266">(</span><span class="string" id="3262267">&#34;illegal&nbsp;state&nbsp;%d&#34;</span><span class="op" id="3262285">,</span>&nbsp;<span class="builtintype" id="3262287">int</span><span class="op" id="3262290">(</span><span class="ident" id="3262291"><a href="/html/template/context.go.html#3262163">s</a></span><span class="op" id="3262292">)</span><span class="op" id="3262293">)</span><br>
<span class="lineno">170</span><span class="op" id="3262295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262298">//&nbsp;isComment&nbsp;is&nbsp;true&nbsp;for&nbsp;any&nbsp;state&nbsp;that&nbsp;contains&nbsp;content&nbsp;meant&nbsp;for&nbsp;template</span><br>
<span class="lineno"></span><span class="comment" id="3262374">//&nbsp;authors&nbsp;&amp;&nbsp;maintainers,&nbsp;not&nbsp;for&nbsp;end-users&nbsp;or&nbsp;machines.</span><br>
<span class="lineno"></span><span class="keyword" id="3262431">func</span>&nbsp;<span class="ident" id="3262436">isComment</span><span class="op" id="3262445">(</span><span class="ident" id="3262446">s</span>&nbsp;<span class="ident" id="3262448"><a href="/html/template/context.go.html#3259016">state</a></span><span class="op" id="3262453">)</span>&nbsp;<span class="builtintype" id="3262455">bool</span>&nbsp;<span class="op" id="3262460">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262463">switch</span>&nbsp;<span class="ident" id="3262470"><a href="/html/template/context.go.html#3262446">s</a></span>&nbsp;<span class="op" id="3262472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262475">case</span>&nbsp;<span class="ident" id="3262480"><a href="/html/template/context.go.html#3259780">stateHTMLCmt</a></span><span class="op" id="3262492">,</span>&nbsp;<span class="ident" id="3262494"><a href="/html/template/context.go.html#3260483">stateJSBlockCmt</a></span><span class="op" id="3262509">,</span>&nbsp;<span class="ident" id="3262511"><a href="/html/template/context.go.html#3260563">stateJSLineCmt</a></span><span class="op" id="3262525">,</span>&nbsp;<span class="ident" id="3262527"><a href="/html/template/context.go.html#3261092">stateCSSBlockCmt</a></span><span class="op" id="3262543">,</span>&nbsp;<span class="ident" id="3262545"><a href="/html/template/context.go.html#3261167">stateCSSLineCmt</a></span><span class="op" id="3262560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262564">return</span>&nbsp;<span class="ident" id="3262571">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262580">return</span>&nbsp;<span class="ident" id="3262587">false</span><br>
<span class="lineno">180</span><span class="op" id="3262593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3262596">//&nbsp;isInTag&nbsp;return&nbsp;whether&nbsp;s&nbsp;occurs&nbsp;solely&nbsp;inside&nbsp;an&nbsp;HTML&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="3262658">func</span>&nbsp;<span class="ident" id="3262663">isInTag</span><span class="op" id="3262670">(</span><span class="ident" id="3262671">s</span>&nbsp;<span class="ident" id="3262673"><a href="/html/template/context.go.html#3259016">state</a></span><span class="op" id="3262678">)</span>&nbsp;<span class="builtintype" id="3262680">bool</span>&nbsp;<span class="op" id="3262685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262688">switch</span>&nbsp;<span class="ident" id="3262695"><a href="/html/template/context.go.html#3262671">s</a></span>&nbsp;<span class="op" id="3262697">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262700">case</span>&nbsp;<span class="ident" id="3262705"><a href="/html/template/context.go.html#3259302">stateTag</a></span><span class="op" id="3262713">,</span>&nbsp;<span class="ident" id="3262715"><a href="/html/template/context.go.html#3259415">stateAttrName</a></span><span class="op" id="3262728">,</span>&nbsp;<span class="ident" id="3262730"><a href="/html/template/context.go.html#3259565">stateAfterName</a></span><span class="op" id="3262744">,</span>&nbsp;<span class="ident" id="3262746"><a href="/html/template/context.go.html#3259705">stateBeforeValue</a></span><span class="op" id="3262762">,</span>&nbsp;<span class="ident" id="3262764"><a href="/html/template/context.go.html#3260018">stateAttr</a></span><span class="op" id="3262773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262777">return</span>&nbsp;<span class="ident" id="3262784">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3262790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3262793">return</span>&nbsp;<span class="ident" id="3262800">false</span><br>
<span class="lineno"></span><span class="op" id="3262806">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3262809">//&nbsp;delim&nbsp;is&nbsp;the&nbsp;delimiter&nbsp;that&nbsp;will&nbsp;end&nbsp;the&nbsp;current&nbsp;HTML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="keyword" id="3262877">type</span>&nbsp;<span class="ident" id="3262882">delim</span>&nbsp;<span class="builtintype" id="3262888">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3262895">const</span>&nbsp;<span class="op" id="3262901">(</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262904">//&nbsp;delimNone&nbsp;occurs&nbsp;outside&nbsp;any&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3262948">delimNone</span>&nbsp;<span class="ident" id="3262958"><a href="/html/template/context.go.html#3262882">delim</a></span>&nbsp;<span class="op" id="3262964">=</span>&nbsp;<span class="ident" id="3262966">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3262972">//&nbsp;delimDoubleQuote&nbsp;occurs&nbsp;when&nbsp;a&nbsp;double&nbsp;quote&nbsp;(&#34;)&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263046">delimDoubleQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263064">//&nbsp;delimSingleQuote&nbsp;occurs&nbsp;when&nbsp;a&nbsp;single&nbsp;quote&nbsp;(&#39;)&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263138">delimSingleQuote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263156">//&nbsp;delimSpaceOrTagEnd&nbsp;occurs&nbsp;when&nbsp;a&nbsp;space&nbsp;or&nbsp;right&nbsp;angle&nbsp;bracket&nbsp;(&gt;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263226">//&nbsp;closes&nbsp;the&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263252">delimSpaceOrTagEnd</span><br>
<span class="lineno"></span><span class="op" id="3263271">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="3263274">var</span>&nbsp;<span class="ident" id="3263278">delimNames</span>&nbsp;<span class="op" id="3263289">=</span>&nbsp;<span class="op" id="3263291">[</span><span class="op" id="3263292">...</span><span class="op" id="3263295">]</span><span class="builtintype" id="3263296">string</span><span class="op" id="3263302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263305"><a href="/html/template/context.go.html#3262948">delimNone</a></span><span class="op" id="3263314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3263325">&#34;delimNone&#34;</span><span class="op" id="3263336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263339"><a href="/html/template/context.go.html#3263046">delimDoubleQuote</a></span><span class="op" id="3263355">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3263359">&#34;delimDoubleQuote&#34;</span><span class="op" id="3263377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263380"><a href="/html/template/context.go.html#3263138">delimSingleQuote</a></span><span class="op" id="3263396">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3263400">&#34;delimSingleQuote&#34;</span><span class="op" id="3263418">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263421"><a href="/html/template/context.go.html#3263252">delimSpaceOrTagEnd</a></span><span class="op" id="3263439">:</span>&nbsp;<span class="string" id="3263441">&#34;delimSpaceOrTagEnd&#34;</span><span class="op" id="3263461">,</span><br>
<span class="lineno"></span><span class="op" id="3263463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263466">func</span>&nbsp;<span class="op" id="3263471">(</span><span class="ident" id="3263472">d</span>&nbsp;<span class="ident" id="3263474"><a href="/html/template/context.go.html#3262882">delim</a></span><span class="op" id="3263479">)</span>&nbsp;<span class="ident" id="3263481">String</span><span class="op" id="3263487">(</span><span class="op" id="3263488">)</span>&nbsp;<span class="builtintype" id="3263490">string</span>&nbsp;<span class="op" id="3263497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263500">if</span>&nbsp;<span class="builtintype" id="3263503">int</span><span class="op" id="3263506">(</span><span class="ident" id="3263507"><a href="/html/template/context.go.html#3263472">d</a></span><span class="op" id="3263508">)</span>&nbsp;<span class="op" id="3263510">&lt;</span>&nbsp;<span class="builtinfunc" id="3263512">len</span><span class="op" id="3263515">(</span><span class="ident" id="3263516"><a href="/html/template/context.go.html#3263278">delimNames</a></span><span class="op" id="3263526">)</span>&nbsp;<span class="op" id="3263528">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263532">return</span>&nbsp;<span class="ident" id="3263539"><a href="/html/template/context.go.html#3263278">delimNames</a></span><span class="op" id="3263549">[</span><span class="ident" id="3263550"><a href="/html/template/context.go.html#3263472">d</a></span><span class="op" id="3263551">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3263554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3263557">return</span>&nbsp;<span class="ident" id="3263564"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3263567">.</span><span class="ident" id="3263568">Sprintf</span><span class="op" id="3263575">(</span><span class="string" id="3263576">&#34;illegal&nbsp;delim&nbsp;%d&#34;</span><span class="op" id="3263594">,</span>&nbsp;<span class="builtintype" id="3263596">int</span><span class="op" id="3263599">(</span><span class="ident" id="3263600"><a href="/html/template/context.go.html#3263472">d</a></span><span class="op" id="3263601">)</span><span class="op" id="3263602">)</span><br>
<span class="lineno"></span><span class="op" id="3263604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="3263607">//&nbsp;urlPart&nbsp;identifies&nbsp;a&nbsp;part&nbsp;in&nbsp;an&nbsp;RFC&nbsp;3986&nbsp;hierarchical&nbsp;URL&nbsp;to&nbsp;allow&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3263687">//&nbsp;encoding&nbsp;strategies.</span><br>
<span class="lineno"></span><span class="keyword" id="3263711">type</span>&nbsp;<span class="ident" id="3263716">urlPart</span>&nbsp;<span class="builtintype" id="3263724">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3263731">const</span>&nbsp;<span class="op" id="3263737">(</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263740">//&nbsp;urlPartNone&nbsp;occurs&nbsp;when&nbsp;not&nbsp;in&nbsp;a&nbsp;URL,&nbsp;or&nbsp;possibly&nbsp;at&nbsp;the&nbsp;start:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263808">//&nbsp;^&nbsp;in&nbsp;&#34;^http://auth/path?k=v#frag&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263847">urlPartNone</span>&nbsp;<span class="ident" id="3263859"><a href="/html/template/context.go.html#3263716">urlPart</a></span>&nbsp;<span class="op" id="3263867">=</span>&nbsp;<span class="ident" id="3263869">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263875">//&nbsp;urlPartPreQuery&nbsp;occurs&nbsp;in&nbsp;the&nbsp;scheme,&nbsp;authority,&nbsp;or&nbsp;path;&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3263949">//&nbsp;^s&nbsp;in&nbsp;&#34;h^ttp://auth/path^?k=v#frag&#34;.</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3263990">urlPartPreQuery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264007">//&nbsp;urlPartQueryOrFrag&nbsp;occurs&nbsp;in&nbsp;the&nbsp;query&nbsp;portion&nbsp;between&nbsp;the&nbsp;^s&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264076">//&nbsp;&#34;http://auth/path?^k=v#frag^&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264111">urlPartQueryOrFrag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264131">//&nbsp;urlPartUnknown&nbsp;occurs&nbsp;due&nbsp;to&nbsp;joining&nbsp;of&nbsp;contexts&nbsp;both&nbsp;before&nbsp;and</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264200">//&nbsp;after&nbsp;the&nbsp;query&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264231">urlPartUnknown</span><br>
<span class="lineno"></span><span class="op" id="3264246">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3264249">var</span>&nbsp;<span class="ident" id="3264253">urlPartNames</span>&nbsp;<span class="op" id="3264266">=</span>&nbsp;<span class="op" id="3264268">[</span><span class="op" id="3264269">...</span><span class="op" id="3264272">]</span><span class="builtintype" id="3264273">string</span><span class="op" id="3264279">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264282"><a href="/html/template/context.go.html#3263847">urlPartNone</a></span><span class="op" id="3264293">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3264302">&#34;urlPartNone&#34;</span><span class="op" id="3264315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264318"><a href="/html/template/context.go.html#3263990">urlPartPreQuery</a></span><span class="op" id="3264333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3264338">&#34;urlPartPreQuery&#34;</span><span class="op" id="3264355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264358"><a href="/html/template/context.go.html#3264111">urlPartQueryOrFrag</a></span><span class="op" id="3264376">:</span>&nbsp;<span class="string" id="3264378">&#34;urlPartQueryOrFrag&#34;</span><span class="op" id="3264398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264401"><a href="/html/template/context.go.html#3264231">urlPartUnknown</a></span><span class="op" id="3264415">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3264421">&#34;urlPartUnknown&#34;</span><span class="op" id="3264437">,</span><br>
<span class="lineno"></span><span class="op" id="3264439">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="3264442">func</span>&nbsp;<span class="op" id="3264447">(</span><span class="ident" id="3264448">u</span>&nbsp;<span class="ident" id="3264450"><a href="/html/template/context.go.html#3263716">urlPart</a></span><span class="op" id="3264457">)</span>&nbsp;<span class="ident" id="3264459">String</span><span class="op" id="3264465">(</span><span class="op" id="3264466">)</span>&nbsp;<span class="builtintype" id="3264468">string</span>&nbsp;<span class="op" id="3264475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264478">if</span>&nbsp;<span class="builtintype" id="3264481">int</span><span class="op" id="3264484">(</span><span class="ident" id="3264485"><a href="/html/template/context.go.html#3264448">u</a></span><span class="op" id="3264486">)</span>&nbsp;<span class="op" id="3264488">&lt;</span>&nbsp;<span class="builtinfunc" id="3264490">len</span><span class="op" id="3264493">(</span><span class="ident" id="3264494"><a href="/html/template/context.go.html#3264253">urlPartNames</a></span><span class="op" id="3264506">)</span>&nbsp;<span class="op" id="3264508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264512">return</span>&nbsp;<span class="ident" id="3264519"><a href="/html/template/context.go.html#3264253">urlPartNames</a></span><span class="op" id="3264531">[</span><span class="ident" id="3264532"><a href="/html/template/context.go.html#3264448">u</a></span><span class="op" id="3264533">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3264536">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3264539">return</span>&nbsp;<span class="ident" id="3264546"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3264549">.</span><span class="ident" id="3264550">Sprintf</span><span class="op" id="3264557">(</span><span class="string" id="3264558">&#34;illegal&nbsp;urlPart&nbsp;%d&#34;</span><span class="op" id="3264578">,</span>&nbsp;<span class="builtintype" id="3264580">int</span><span class="op" id="3264583">(</span><span class="ident" id="3264584"><a href="/html/template/context.go.html#3264448">u</a></span><span class="op" id="3264585">)</span><span class="op" id="3264586">)</span><br>
<span class="lineno"></span><span class="op" id="3264588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3264591">//&nbsp;jsCtx&nbsp;determines&nbsp;whether&nbsp;a&nbsp;&#39;/&#39;&nbsp;starts&nbsp;a&nbsp;regular&nbsp;expression&nbsp;literal&nbsp;or&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3264666">//&nbsp;division&nbsp;operator.</span><br>
<span class="lineno">255</span><span class="keyword" id="3264688">type</span>&nbsp;<span class="ident" id="3264693">jsCtx</span>&nbsp;<span class="builtintype" id="3264699">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3264706">const</span>&nbsp;<span class="op" id="3264712">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264715">//&nbsp;jsCtxRegexp&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;would&nbsp;start&nbsp;a&nbsp;regexp&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264780">jsCtxRegexp</span>&nbsp;<span class="ident" id="3264792"><a href="/html/template/context.go.html#3264693">jsCtx</a></span>&nbsp;<span class="op" id="3264798">=</span>&nbsp;<span class="ident" id="3264800">iota</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264806">//&nbsp;jsCtxDivOp&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;would&nbsp;start&nbsp;a&nbsp;division&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264873">jsCtxDivOp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3264885">//&nbsp;jsCtxUnknown&nbsp;occurs&nbsp;where&nbsp;a&nbsp;&#39;/&#39;&nbsp;is&nbsp;ambiguous&nbsp;due&nbsp;to&nbsp;context&nbsp;joining.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3264958">jsCtxUnknown</span><br>
<span class="lineno"></span><span class="op" id="3264971">)</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span><span class="keyword" id="3264974">func</span>&nbsp;<span class="op" id="3264979">(</span><span class="ident" id="3264980">c</span>&nbsp;<span class="ident" id="3264982"><a href="/html/template/context.go.html#3264693">jsCtx</a></span><span class="op" id="3264987">)</span>&nbsp;<span class="ident" id="3264989">String</span><span class="op" id="3264995">(</span><span class="op" id="3264996">)</span>&nbsp;<span class="builtintype" id="3264998">string</span>&nbsp;<span class="op" id="3265005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265008">switch</span>&nbsp;<span class="ident" id="3265015"><a href="/html/template/context.go.html#3264980">c</a></span>&nbsp;<span class="op" id="3265017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265020">case</span>&nbsp;<span class="ident" id="3265025"><a href="/html/template/context.go.html#3264780">jsCtxRegexp</a></span><span class="op" id="3265036">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265040">return</span>&nbsp;<span class="string" id="3265047">&#34;jsCtxRegexp&#34;</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265062">case</span>&nbsp;<span class="ident" id="3265067"><a href="/html/template/context.go.html#3264873">jsCtxDivOp</a></span><span class="op" id="3265077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265081">return</span>&nbsp;<span class="string" id="3265088">&#34;jsCtxDivOp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265102">case</span>&nbsp;<span class="ident" id="3265107"><a href="/html/template/context.go.html#3264958">jsCtxUnknown</a></span><span class="op" id="3265119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265123">return</span>&nbsp;<span class="string" id="3265130">&#34;jsCtxUnknown&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3265146">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3265149">return</span>&nbsp;<span class="ident" id="3265156"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3265159">.</span><span class="ident" id="3265160">Sprintf</span><span class="op" id="3265167">(</span><span class="string" id="3265168">&#34;illegal&nbsp;jsCtx&nbsp;%d&#34;</span><span class="op" id="3265186">,</span>&nbsp;<span class="builtintype" id="3265188">int</span><span class="op" id="3265191">(</span><span class="ident" id="3265192"><a href="/html/template/context.go.html#3264980">c</a></span><span class="op" id="3265193">)</span><span class="op" id="3265194">)</span><br>
<span class="lineno"></span><span class="op" id="3265196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3265199">//&nbsp;element&nbsp;identifies&nbsp;the&nbsp;HTML&nbsp;element&nbsp;when&nbsp;inside&nbsp;a&nbsp;start&nbsp;tag&nbsp;or&nbsp;special&nbsp;body.</span><br>
<span class="lineno"></span><span class="comment" id="3265279">//&nbsp;Certain&nbsp;HTML&nbsp;element&nbsp;(for&nbsp;example&nbsp;&lt;script&gt;&nbsp;and&nbsp;&lt;style&gt;)&nbsp;have&nbsp;bodies&nbsp;that&nbsp;are</span><br>
<span class="lineno">280</span><span class="comment" id="3265359">//&nbsp;treated&nbsp;differently&nbsp;from&nbsp;stateText&nbsp;so&nbsp;the&nbsp;element&nbsp;type&nbsp;is&nbsp;necessary&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3265433">//&nbsp;transition&nbsp;into&nbsp;the&nbsp;correct&nbsp;context&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;tag&nbsp;and&nbsp;to&nbsp;identify&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3265512">//&nbsp;end&nbsp;delimiter&nbsp;for&nbsp;the&nbsp;body.</span><br>
<span class="lineno"></span><span class="keyword" id="3265543">type</span>&nbsp;<span class="ident" id="3265548">element</span>&nbsp;<span class="builtintype" id="3265556">uint8</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="3265563">const</span>&nbsp;<span class="op" id="3265569">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265572">//&nbsp;elementNone&nbsp;occurs&nbsp;outside&nbsp;a&nbsp;special&nbsp;tag&nbsp;or&nbsp;special&nbsp;element&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265642">elementNone</span>&nbsp;<span class="ident" id="3265654"><a href="/html/template/context.go.html#3265548">element</a></span>&nbsp;<span class="op" id="3265662">=</span>&nbsp;<span class="ident" id="3265664">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265670">//&nbsp;elementScript&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;raw&nbsp;text&nbsp;&lt;script&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265734">elementScript</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265749">//&nbsp;elementStyle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;raw&nbsp;text&nbsp;&lt;style&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265811">elementStyle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265825">//&nbsp;elementTextarea&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;RCDATA&nbsp;&lt;textarea&gt;&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265891">elementTextarea</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3265908">//&nbsp;elementTitle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;RCDATA&nbsp;&lt;title&gt;&nbsp;element.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3265968">elementTitle</span><br>
<span class="lineno"></span><span class="op" id="3265981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3265984">var</span>&nbsp;<span class="ident" id="3265988">elementNames</span>&nbsp;<span class="op" id="3266001">=</span>&nbsp;<span class="op" id="3266003">[</span><span class="op" id="3266004">...</span><span class="op" id="3266007">]</span><span class="builtintype" id="3266008">string</span><span class="op" id="3266014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266017"><a href="/html/template/context.go.html#3265642">elementNone</a></span><span class="op" id="3266028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3266034">&#34;elementNone&#34;</span><span class="op" id="3266047">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266050"><a href="/html/template/context.go.html#3265734">elementScript</a></span><span class="op" id="3266063">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3266067">&#34;elementScript&#34;</span><span class="op" id="3266082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266085"><a href="/html/template/context.go.html#3265811">elementStyle</a></span><span class="op" id="3266097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3266102">&#34;elementStyle&#34;</span><span class="op" id="3266116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266119"><a href="/html/template/context.go.html#3265891">elementTextarea</a></span><span class="op" id="3266134">:</span>&nbsp;<span class="string" id="3266136">&#34;elementTextarea&#34;</span><span class="op" id="3266153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266156"><a href="/html/template/context.go.html#3265968">elementTitle</a></span><span class="op" id="3266168">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3266173">&#34;elementTitle&#34;</span><span class="op" id="3266187">,</span><br>
<span class="lineno"></span><span class="op" id="3266189">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="keyword" id="3266192">func</span>&nbsp;<span class="op" id="3266197">(</span><span class="ident" id="3266198">e</span>&nbsp;<span class="ident" id="3266200"><a href="/html/template/context.go.html#3265548">element</a></span><span class="op" id="3266207">)</span>&nbsp;<span class="ident" id="3266209">String</span><span class="op" id="3266215">(</span><span class="op" id="3266216">)</span>&nbsp;<span class="builtintype" id="3266218">string</span>&nbsp;<span class="op" id="3266225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266228">if</span>&nbsp;<span class="builtintype" id="3266231">int</span><span class="op" id="3266234">(</span><span class="ident" id="3266235"><a href="/html/template/context.go.html#3266198">e</a></span><span class="op" id="3266236">)</span>&nbsp;<span class="op" id="3266238">&lt;</span>&nbsp;<span class="builtinfunc" id="3266240">len</span><span class="op" id="3266243">(</span><span class="ident" id="3266244"><a href="/html/template/context.go.html#3265988">elementNames</a></span><span class="op" id="3266256">)</span>&nbsp;<span class="op" id="3266258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266262">return</span>&nbsp;<span class="ident" id="3266269"><a href="/html/template/context.go.html#3265988">elementNames</a></span><span class="op" id="3266281">[</span><span class="ident" id="3266282"><a href="/html/template/context.go.html#3266198">e</a></span><span class="op" id="3266283">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3266286">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266289">return</span>&nbsp;<span class="ident" id="3266296"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3266299">.</span><span class="ident" id="3266300">Sprintf</span><span class="op" id="3266307">(</span><span class="string" id="3266308">&#34;illegal&nbsp;element&nbsp;%d&#34;</span><span class="op" id="3266328">,</span>&nbsp;<span class="builtintype" id="3266330">int</span><span class="op" id="3266333">(</span><span class="ident" id="3266334"><a href="/html/template/context.go.html#3266198">e</a></span><span class="op" id="3266335">)</span><span class="op" id="3266336">)</span><br>
<span class="lineno"></span><span class="op" id="3266338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3266341">//&nbsp;attr&nbsp;identifies&nbsp;the&nbsp;most&nbsp;recent&nbsp;HTML&nbsp;attribute&nbsp;when&nbsp;inside&nbsp;a&nbsp;start&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="3266416">type</span>&nbsp;<span class="ident" id="3266421">attr</span>&nbsp;<span class="builtintype" id="3266426">uint8</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="3266433">const</span>&nbsp;<span class="op" id="3266439">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3266442">//&nbsp;attrNone&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;normal&nbsp;attribute&nbsp;or&nbsp;no&nbsp;attribute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266506">attrNone</span>&nbsp;<span class="ident" id="3266515"><a href="/html/template/context.go.html#3266421">attr</a></span>&nbsp;<span class="op" id="3266520">=</span>&nbsp;<span class="ident" id="3266522">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3266528">//&nbsp;attrScript&nbsp;corresponds&nbsp;to&nbsp;an&nbsp;event&nbsp;handler&nbsp;attribute.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266586">attrScript</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3266598">//&nbsp;attrStyle&nbsp;corresponds&nbsp;to&nbsp;the&nbsp;style&nbsp;attribute&nbsp;whose&nbsp;value&nbsp;is&nbsp;CSS.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266667">attrStyle</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3266678">//&nbsp;attrURL&nbsp;corresponds&nbsp;to&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;value&nbsp;is&nbsp;a&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266740">attrURL</span><br>
<span class="lineno">325</span><span class="op" id="3266748">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3266751">var</span>&nbsp;<span class="ident" id="3266755">attrNames</span>&nbsp;<span class="op" id="3266765">=</span>&nbsp;<span class="op" id="3266767">[</span><span class="op" id="3266768">...</span><span class="op" id="3266771">]</span><span class="builtintype" id="3266772">string</span><span class="op" id="3266778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266781"><a href="/html/template/context.go.html#3266506">attrNone</a></span><span class="op" id="3266789">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="3266793">&#34;attrNone&#34;</span><span class="op" id="3266803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266806"><a href="/html/template/context.go.html#3266586">attrScript</a></span><span class="op" id="3266816">:</span>&nbsp;<span class="string" id="3266818">&#34;attrScript&#34;</span><span class="op" id="3266830">,</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266833"><a href="/html/template/context.go.html#3266667">attrStyle</a></span><span class="op" id="3266842">:</span>&nbsp;&nbsp;<span class="string" id="3266845">&#34;attrStyle&#34;</span><span class="op" id="3266856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3266859"><a href="/html/template/context.go.html#3266740">attrURL</a></span><span class="op" id="3266866">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3266871">&#34;attrURL&#34;</span><span class="op" id="3266880">,</span><br>
<span class="lineno"></span><span class="op" id="3266882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3266885">func</span>&nbsp;<span class="op" id="3266890">(</span><span class="ident" id="3266891">a</span>&nbsp;<span class="ident" id="3266893"><a href="/html/template/context.go.html#3266421">attr</a></span><span class="op" id="3266897">)</span>&nbsp;<span class="ident" id="3266899">String</span><span class="op" id="3266905">(</span><span class="op" id="3266906">)</span>&nbsp;<span class="builtintype" id="3266908">string</span>&nbsp;<span class="op" id="3266915">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266918">if</span>&nbsp;<span class="builtintype" id="3266921">int</span><span class="op" id="3266924">(</span><span class="ident" id="3266925"><a href="/html/template/context.go.html#3266891">a</a></span><span class="op" id="3266926">)</span>&nbsp;<span class="op" id="3266928">&lt;</span>&nbsp;<span class="builtinfunc" id="3266930">len</span><span class="op" id="3266933">(</span><span class="ident" id="3266934"><a href="/html/template/context.go.html#3266755">attrNames</a></span><span class="op" id="3266943">)</span>&nbsp;<span class="op" id="3266945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266949">return</span>&nbsp;<span class="ident" id="3266956"><a href="/html/template/context.go.html#3266755">attrNames</a></span><span class="op" id="3266965">[</span><span class="ident" id="3266966"><a href="/html/template/context.go.html#3266891">a</a></span><span class="op" id="3266967">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3266970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3266973">return</span>&nbsp;<span class="ident" id="3266980"><a href="/html/template/context.go.html#3256947">fmt</a></span><span class="op" id="3266983">.</span><span class="ident" id="3266984">Sprintf</span><span class="op" id="3266991">(</span><span class="string" id="3266992">&#34;illegal&nbsp;attr&nbsp;%d&#34;</span><span class="op" id="3267009">,</span>&nbsp;<span class="builtintype" id="3267011">int</span><span class="op" id="3267014">(</span><span class="ident" id="3267015"><a href="/html/template/context.go.html#3266891">a</a></span><span class="op" id="3267016">)</span><span class="op" id="3267017">)</span><br>
<span class="lineno"></span><span class="op" id="3267019">}</span>
</div>
</body>
</html>
