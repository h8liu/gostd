<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5455855">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5455910">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5455964">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5456015">//&nbsp;Package&nbsp;image&nbsp;implements&nbsp;a&nbsp;basic&nbsp;2-D&nbsp;image&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="5456070">//</span><br>
<span class="lineno"></span><span class="comment" id="5456073">//&nbsp;The&nbsp;fundamental&nbsp;interface&nbsp;is&nbsp;called&nbsp;Image.&nbsp;An&nbsp;Image&nbsp;contains&nbsp;colors,&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="5456151">//&nbsp;are&nbsp;described&nbsp;in&nbsp;the&nbsp;image/color&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5456196">//</span><br>
<span class="lineno">10</span><span class="comment" id="5456199">//&nbsp;Values&nbsp;of&nbsp;the&nbsp;Image&nbsp;interface&nbsp;are&nbsp;created&nbsp;either&nbsp;by&nbsp;calling&nbsp;functions&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="5456277">//&nbsp;as&nbsp;NewRGBA&nbsp;and&nbsp;NewPaletted,&nbsp;or&nbsp;by&nbsp;calling&nbsp;Decode&nbsp;on&nbsp;an&nbsp;io.Reader&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="5456356">//&nbsp;image&nbsp;data&nbsp;in&nbsp;a&nbsp;format&nbsp;such&nbsp;as&nbsp;GIF,&nbsp;JPEG&nbsp;or&nbsp;PNG.&nbsp;Decoding&nbsp;any&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="5456432">//&nbsp;image&nbsp;format&nbsp;requires&nbsp;the&nbsp;prior&nbsp;registration&nbsp;of&nbsp;a&nbsp;decoder&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5456503">//&nbsp;Registration&nbsp;is&nbsp;typically&nbsp;automatic&nbsp;as&nbsp;a&nbsp;side&nbsp;effect&nbsp;of&nbsp;initializing&nbsp;that</span><br>
<span class="lineno">15</span><span class="comment" id="5456580">//&nbsp;format&#39;s&nbsp;package&nbsp;so&nbsp;that,&nbsp;to&nbsp;decode&nbsp;a&nbsp;PNG&nbsp;image,&nbsp;it&nbsp;suffices&nbsp;to&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="5456652">//&nbsp;&nbsp;&nbsp;&nbspimport&nbsp;_&nbsp;&#34;image/png&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5456676">//&nbsp;in&nbsp;a&nbsp;program&#39;s&nbsp;main&nbsp;package.&nbsp;The&nbsp;_&nbsp;means&nbsp;to&nbsp;import&nbsp;a&nbsp;package&nbsp;purely&nbsp;for&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5456755">//&nbsp;initialization&nbsp;side&nbsp;effects.</span><br>
<span class="lineno"></span><span class="comment" id="5456787">//</span><br>
<span class="lineno">20</span><span class="comment" id="5456790">//&nbsp;See&nbsp;&#34;The&nbsp;Go&nbsp;image&nbsp;package&#34;&nbsp;for&nbsp;more&nbsp;details:</span><br>
<span class="lineno"></span><span class="comment" id="5456838">//&nbsp;http://golang.org/doc/articles/image_package.html</span><br>
<span class="lineno"></span><span class="keyword" id="5456891">package</span>&nbsp;<span class="ident" id="5456899">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5456906">import</span>&nbsp;<span class="op" id="5456913">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5456916">&#34;image/color&#34;</span><br>
<span class="lineno"></span><span class="op" id="5456930">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5456933">//&nbsp;Config&nbsp;holds&nbsp;an&nbsp;image&#39;s&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions.</span><br>
<span class="lineno"></span><span class="keyword" id="5456988">type</span>&nbsp;<span class="ident" id="5456993">Config</span>&nbsp;<span class="keyword" id="5457000">struct</span>&nbsp;<span class="op" id="5457007">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457010">ColorModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5457024"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5457029">.</span><span class="ident" id="5457030">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457037">Width</span><span class="op" id="5457042">,</span>&nbsp;<span class="ident" id="5457044">Height</span>&nbsp;<span class="builtintype" id="5457051">int</span><br>
<span class="lineno"></span><span class="op" id="5457055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5457058">//&nbsp;Image&nbsp;is&nbsp;a&nbsp;finite&nbsp;rectangular&nbsp;grid&nbsp;of&nbsp;color.Color&nbsp;values&nbsp;taken&nbsp;from&nbsp;a&nbsp;color</span><br>
<span class="lineno">35</span><span class="comment" id="5457137">//&nbsp;model.</span><br>
<span class="lineno"></span><span class="keyword" id="5457147">type</span>&nbsp;<span class="ident" id="5457152">Image</span>&nbsp;<span class="keyword" id="5457158">interface</span>&nbsp;<span class="op" id="5457168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457171">//&nbsp;ColorModel&nbsp;returns&nbsp;the&nbsp;Image&#39;s&nbsp;color&nbsp;model.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457219">ColorModel</span><span class="op" id="5457229">(</span><span class="op" id="5457230">)</span>&nbsp;<span class="ident" id="5457232"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5457237">.</span><span class="ident" id="5457238">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457245">//&nbsp;Bounds&nbsp;returns&nbsp;the&nbsp;domain&nbsp;for&nbsp;which&nbsp;At&nbsp;can&nbsp;return&nbsp;non-zero&nbsp;color.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457315">//&nbsp;The&nbsp;bounds&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;contain&nbsp;the&nbsp;point&nbsp;(0,&nbsp;0).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457375">Bounds</span><span class="op" id="5457381">(</span><span class="op" id="5457382">)</span>&nbsp;<span class="ident" id="5457384"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457395">//&nbsp;At&nbsp;returns&nbsp;the&nbsp;color&nbsp;of&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457444">//&nbsp;At(Bounds().Min.X,&nbsp;Bounds().Min.Y)&nbsp;returns&nbsp;the&nbsp;upper-left&nbsp;pixel&nbsp;of&nbsp;the&nbsp;grid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457525">//&nbsp;At(Bounds().Max.X-1,&nbsp;Bounds().Max.Y-1)&nbsp;returns&nbsp;the&nbsp;lower-right&nbsp;one.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5457597">At</span><span class="op" id="5457599">(</span><span class="ident" id="5457600">x</span><span class="op" id="5457601">,</span>&nbsp;<span class="ident" id="5457603">y</span>&nbsp;<span class="builtintype" id="5457605">int</span><span class="op" id="5457608">)</span>&nbsp;<span class="ident" id="5457610"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5457615">.</span><span class="ident" id="5457616">Color</span><br>
<span class="lineno"></span><span class="op" id="5457622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5457625">//&nbsp;PalettedImage&nbsp;is&nbsp;an&nbsp;image&nbsp;whose&nbsp;colors&nbsp;may&nbsp;come&nbsp;from&nbsp;a&nbsp;limited&nbsp;palette.</span><br>
<span class="lineno"></span><span class="comment" id="5457700">//&nbsp;If&nbsp;m&nbsp;is&nbsp;a&nbsp;PalettedImage&nbsp;and&nbsp;m.ColorModel()&nbsp;returns&nbsp;a&nbsp;PalettedColorModel&nbsp;p,</span><br>
<span class="lineno">50</span><span class="comment" id="5457778">//&nbsp;then&nbsp;m.At(x,&nbsp;y)&nbsp;should&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;p[m.ColorIndexAt(x,&nbsp;y)].&nbsp;If&nbsp;m&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="5457853">//&nbsp;color&nbsp;model&nbsp;is&nbsp;not&nbsp;a&nbsp;PalettedColorModel,&nbsp;then&nbsp;ColorIndexAt&#39;s&nbsp;behavior&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5457929">//&nbsp;undefined.</span><br>
<span class="lineno"></span><span class="keyword" id="5457943">type</span>&nbsp;<span class="ident" id="5457948">PalettedImage</span>&nbsp;<span class="keyword" id="5457962">interface</span>&nbsp;<span class="op" id="5457972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5457975">//&nbsp;ColorIndexAt&nbsp;returns&nbsp;the&nbsp;palette&nbsp;index&nbsp;of&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458042">ColorIndexAt</span><span class="op" id="5458054">(</span><span class="ident" id="5458055">x</span><span class="op" id="5458056">,</span>&nbsp;<span class="ident" id="5458058">y</span>&nbsp;<span class="builtintype" id="5458060">int</span><span class="op" id="5458063">)</span>&nbsp;<span class="builtintype" id="5458065">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458072"><a href="/image/image.go.html#5457152">Image</a></span><br>
<span class="lineno"></span><span class="op" id="5458078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5458081">//&nbsp;RGBA&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.RGBA&nbsp;values.</span><br>
<span class="lineno">60</span><span class="keyword" id="5458154">type</span>&nbsp;<span class="ident" id="5458159">RGBA</span>&nbsp;<span class="keyword" id="5458164">struct</span>&nbsp;<span class="op" id="5458171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5458174">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5458242">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458310">Pix</span>&nbsp;<span class="op" id="5458314">[</span><span class="op" id="5458315">]</span><span class="builtintype" id="5458316">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5458323">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458399">Stride</span>&nbsp;<span class="builtintype" id="5458406">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5458411">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458443">Rect</span>&nbsp;<span class="ident" id="5458448"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5458458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="5458461">func</span>&nbsp;<span class="op" id="5458466">(</span><span class="ident" id="5458467">p</span>&nbsp;<span class="op" id="5458469">*</span><span class="ident" id="5458470"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5458474">)</span>&nbsp;<span class="ident" id="5458476">ColorModel</span><span class="op" id="5458486">(</span><span class="op" id="5458487">)</span>&nbsp;<span class="ident" id="5458489"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458494">.</span><span class="ident" id="5458495">Model</span>&nbsp;<span class="op" id="5458501">{</span>&nbsp;<span class="keyword" id="5458503">return</span>&nbsp;<span class="ident" id="5458510"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458515">.</span><span class="ident" id="5458516">RGBAModel</span>&nbsp;<span class="op" id="5458526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5458529">func</span>&nbsp;<span class="op" id="5458534">(</span><span class="ident" id="5458535">p</span>&nbsp;<span class="op" id="5458537">*</span><span class="ident" id="5458538"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5458542">)</span>&nbsp;<span class="ident" id="5458544">Bounds</span><span class="op" id="5458550">(</span><span class="op" id="5458551">)</span>&nbsp;<span class="ident" id="5458553"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5458563">{</span>&nbsp;<span class="keyword" id="5458565">return</span>&nbsp;<span class="ident" id="5458572"><a href="/image/image.go.html#5458535">p</a></span><span class="op" id="5458573">.</span><span class="ident" id="5458574">Rect</span>&nbsp;<span class="op" id="5458579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5458582">func</span>&nbsp;<span class="op" id="5458587">(</span><span class="ident" id="5458588">p</span>&nbsp;<span class="op" id="5458590">*</span><span class="ident" id="5458591"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5458595">)</span>&nbsp;<span class="ident" id="5458597">At</span><span class="op" id="5458599">(</span><span class="ident" id="5458600">x</span><span class="op" id="5458601">,</span>&nbsp;<span class="ident" id="5458603">y</span>&nbsp;<span class="builtintype" id="5458605">int</span><span class="op" id="5458608">)</span>&nbsp;<span class="ident" id="5458610"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458615">.</span><span class="ident" id="5458616">Color</span>&nbsp;<span class="op" id="5458622">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458625">return</span>&nbsp;<span class="ident" id="5458632"><a href="/image/image.go.html#5458588">p</a></span><span class="op" id="5458633">.</span><span class="ident" id="5458634">RGBAAt</span><span class="op" id="5458640">(</span><span class="ident" id="5458641"><a href="/image/image.go.html#5458600">x</a></span><span class="op" id="5458642">,</span>&nbsp;<span class="ident" id="5458644"><a href="/image/image.go.html#5458603">y</a></span><span class="op" id="5458645">)</span><br>
<span class="lineno"></span><span class="op" id="5458647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5458650">func</span>&nbsp;<span class="op" id="5458655">(</span><span class="ident" id="5458656">p</span>&nbsp;<span class="op" id="5458658">*</span><span class="ident" id="5458659"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5458663">)</span>&nbsp;<span class="ident" id="5458665">RGBAAt</span><span class="op" id="5458671">(</span><span class="ident" id="5458672">x</span><span class="op" id="5458673">,</span>&nbsp;<span class="ident" id="5458675">y</span>&nbsp;<span class="builtintype" id="5458677">int</span><span class="op" id="5458680">)</span>&nbsp;<span class="ident" id="5458682"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458687">.</span><span class="ident" id="5458688">RGBA</span>&nbsp;<span class="op" id="5458693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458696">if</span>&nbsp;<span class="op" id="5458699">!</span><span class="op" id="5458700">(</span><span class="ident" id="5458701"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5458706">{</span><span class="ident" id="5458707"><a href="/image/image.go.html#5458672">x</a></span><span class="op" id="5458708">,</span>&nbsp;<span class="ident" id="5458710"><a href="/image/image.go.html#5458675">y</a></span><span class="op" id="5458711">}</span><span class="op" id="5458712">.</span><span class="ident" id="5458713">In</span><span class="op" id="5458715">(</span><span class="ident" id="5458716"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458717">.</span><span class="ident" id="5458718">Rect</span><span class="op" id="5458722">)</span><span class="op" id="5458723">)</span>&nbsp;<span class="op" id="5458725">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458729">return</span>&nbsp;<span class="ident" id="5458736"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458741">.</span><span class="ident" id="5458742">RGBA</span><span class="op" id="5458746">{</span><span class="op" id="5458747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5458750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5458753">i</span>&nbsp;<span class="op" id="5458755">:=</span>&nbsp;<span class="ident" id="5458758"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458759">.</span><span class="ident" id="5458760">PixOffset</span><span class="op" id="5458769">(</span><span class="ident" id="5458770"><a href="/image/image.go.html#5458672">x</a></span><span class="op" id="5458771">,</span>&nbsp;<span class="ident" id="5458773"><a href="/image/image.go.html#5458675">y</a></span><span class="op" id="5458774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458777">return</span>&nbsp;<span class="ident" id="5458784"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5458789">.</span><span class="ident" id="5458790">RGBA</span><span class="op" id="5458794">{</span><span class="ident" id="5458795"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458796">.</span><span class="ident" id="5458797">Pix</span><span class="op" id="5458800">[</span><span class="ident" id="5458801"><a href="/image/image.go.html#5458753">i</a></span><span class="op" id="5458802">+</span><span class="num" id="5458803">0</span><span class="op" id="5458804">]</span><span class="op" id="5458805">,</span>&nbsp;<span class="ident" id="5458807"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458808">.</span><span class="ident" id="5458809">Pix</span><span class="op" id="5458812">[</span><span class="ident" id="5458813"><a href="/image/image.go.html#5458753">i</a></span><span class="op" id="5458814">+</span><span class="num" id="5458815">1</span><span class="op" id="5458816">]</span><span class="op" id="5458817">,</span>&nbsp;<span class="ident" id="5458819"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458820">.</span><span class="ident" id="5458821">Pix</span><span class="op" id="5458824">[</span><span class="ident" id="5458825"><a href="/image/image.go.html#5458753">i</a></span><span class="op" id="5458826">+</span><span class="num" id="5458827">2</span><span class="op" id="5458828">]</span><span class="op" id="5458829">,</span>&nbsp;<span class="ident" id="5458831"><a href="/image/image.go.html#5458656">p</a></span><span class="op" id="5458832">.</span><span class="ident" id="5458833">Pix</span><span class="op" id="5458836">[</span><span class="ident" id="5458837"><a href="/image/image.go.html#5458753">i</a></span><span class="op" id="5458838">+</span><span class="num" id="5458839">3</span><span class="op" id="5458840">]</span><span class="op" id="5458841">}</span><br>
<span class="lineno"></span><span class="op" id="5458843">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="5458846">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5458925">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5458949">func</span>&nbsp;<span class="op" id="5458954">(</span><span class="ident" id="5458955">p</span>&nbsp;<span class="op" id="5458957">*</span><span class="ident" id="5458958"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5458962">)</span>&nbsp;<span class="ident" id="5458964">PixOffset</span><span class="op" id="5458973">(</span><span class="ident" id="5458974">x</span><span class="op" id="5458975">,</span>&nbsp;<span class="ident" id="5458977">y</span>&nbsp;<span class="builtintype" id="5458979">int</span><span class="op" id="5458982">)</span>&nbsp;<span class="builtintype" id="5458984">int</span>&nbsp;<span class="op" id="5458988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458991">return</span>&nbsp;<span class="op" id="5458998">(</span><span class="ident" id="5458999"><a href="/image/image.go.html#5458977">y</a></span><span class="op" id="5459000">-</span><span class="ident" id="5459001"><a href="/image/image.go.html#5458955">p</a></span><span class="op" id="5459002">.</span><span class="ident" id="5459003">Rect</span><span class="op" id="5459007">.</span><span class="ident" id="5459008">Min</span><span class="op" id="5459011">.</span><span class="ident" id="5459012">Y</span><span class="op" id="5459013">)</span><span class="op" id="5459014">*</span><span class="ident" id="5459015"><a href="/image/image.go.html#5458955">p</a></span><span class="op" id="5459016">.</span><span class="ident" id="5459017">Stride</span>&nbsp;<span class="op" id="5459024">+</span>&nbsp;<span class="op" id="5459026">(</span><span class="ident" id="5459027"><a href="/image/image.go.html#5458974">x</a></span><span class="op" id="5459028">-</span><span class="ident" id="5459029"><a href="/image/image.go.html#5458955">p</a></span><span class="op" id="5459030">.</span><span class="ident" id="5459031">Rect</span><span class="op" id="5459035">.</span><span class="ident" id="5459036">Min</span><span class="op" id="5459039">.</span><span class="ident" id="5459040">X</span><span class="op" id="5459041">)</span><span class="op" id="5459042">*</span><span class="num" id="5459043">4</span><br>
<span class="lineno">90</span><span class="op" id="5459045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5459048">func</span>&nbsp;<span class="op" id="5459053">(</span><span class="ident" id="5459054">p</span>&nbsp;<span class="op" id="5459056">*</span><span class="ident" id="5459057"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5459061">)</span>&nbsp;<span class="ident" id="5459063">Set</span><span class="op" id="5459066">(</span><span class="ident" id="5459067">x</span><span class="op" id="5459068">,</span>&nbsp;<span class="ident" id="5459070">y</span>&nbsp;<span class="builtintype" id="5459072">int</span><span class="op" id="5459075">,</span>&nbsp;<span class="ident" id="5459077">c</span>&nbsp;<span class="ident" id="5459079"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5459084">.</span><span class="ident" id="5459085">Color</span><span class="op" id="5459090">)</span>&nbsp;<span class="op" id="5459092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459095">if</span>&nbsp;<span class="op" id="5459098">!</span><span class="op" id="5459099">(</span><span class="ident" id="5459100"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5459105">{</span><span class="ident" id="5459106"><a href="/image/image.go.html#5459067">x</a></span><span class="op" id="5459107">,</span>&nbsp;<span class="ident" id="5459109"><a href="/image/image.go.html#5459070">y</a></span><span class="op" id="5459110">}</span><span class="op" id="5459111">.</span><span class="ident" id="5459112">In</span><span class="op" id="5459114">(</span><span class="ident" id="5459115"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459116">.</span><span class="ident" id="5459117">Rect</span><span class="op" id="5459121">)</span><span class="op" id="5459122">)</span>&nbsp;<span class="op" id="5459124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459128">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459139">i</span>&nbsp;<span class="op" id="5459141">:=</span>&nbsp;<span class="ident" id="5459144"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459145">.</span><span class="ident" id="5459146">PixOffset</span><span class="op" id="5459155">(</span><span class="ident" id="5459156"><a href="/image/image.go.html#5459067">x</a></span><span class="op" id="5459157">,</span>&nbsp;<span class="ident" id="5459159"><a href="/image/image.go.html#5459070">y</a></span><span class="op" id="5459160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459163">c1</span>&nbsp;<span class="op" id="5459166">:=</span>&nbsp;<span class="ident" id="5459169"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5459174">.</span><span class="ident" id="5459175">RGBAModel</span><span class="op" id="5459184">.</span><span class="ident" id="5459185">Convert</span><span class="op" id="5459192">(</span><span class="ident" id="5459193"><a href="/image/image.go.html#5459077">c</a></span><span class="op" id="5459194">)</span><span class="op" id="5459195">.</span><span class="op" id="5459196">(</span><span class="ident" id="5459197"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5459202">.</span><span class="ident" id="5459203">RGBA</span><span class="op" id="5459207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459210"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459211">.</span><span class="ident" id="5459212">Pix</span><span class="op" id="5459215">[</span><span class="ident" id="5459216"><a href="/image/image.go.html#5459139">i</a></span><span class="op" id="5459217">+</span><span class="num" id="5459218">0</span><span class="op" id="5459219">]</span>&nbsp;<span class="op" id="5459221">=</span>&nbsp;<span class="ident" id="5459223"><a href="/image/image.go.html#5459163">c1</a></span><span class="op" id="5459225">.</span><span class="ident" id="5459226">R</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459229"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459230">.</span><span class="ident" id="5459231">Pix</span><span class="op" id="5459234">[</span><span class="ident" id="5459235"><a href="/image/image.go.html#5459139">i</a></span><span class="op" id="5459236">+</span><span class="num" id="5459237">1</span><span class="op" id="5459238">]</span>&nbsp;<span class="op" id="5459240">=</span>&nbsp;<span class="ident" id="5459242"><a href="/image/image.go.html#5459163">c1</a></span><span class="op" id="5459244">.</span><span class="ident" id="5459245">G</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459248"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459249">.</span><span class="ident" id="5459250">Pix</span><span class="op" id="5459253">[</span><span class="ident" id="5459254"><a href="/image/image.go.html#5459139">i</a></span><span class="op" id="5459255">+</span><span class="num" id="5459256">2</span><span class="op" id="5459257">]</span>&nbsp;<span class="op" id="5459259">=</span>&nbsp;<span class="ident" id="5459261"><a href="/image/image.go.html#5459163">c1</a></span><span class="op" id="5459263">.</span><span class="ident" id="5459264">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459267"><a href="/image/image.go.html#5459054">p</a></span><span class="op" id="5459268">.</span><span class="ident" id="5459269">Pix</span><span class="op" id="5459272">[</span><span class="ident" id="5459273"><a href="/image/image.go.html#5459139">i</a></span><span class="op" id="5459274">+</span><span class="num" id="5459275">3</span><span class="op" id="5459276">]</span>&nbsp;<span class="op" id="5459278">=</span>&nbsp;<span class="ident" id="5459280"><a href="/image/image.go.html#5459163">c1</a></span><span class="op" id="5459282">.</span><span class="ident" id="5459283">A</span><br>
<span class="lineno"></span><span class="op" id="5459285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5459288">func</span>&nbsp;<span class="op" id="5459293">(</span><span class="ident" id="5459294">p</span>&nbsp;<span class="op" id="5459296">*</span><span class="ident" id="5459297"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5459301">)</span>&nbsp;<span class="ident" id="5459303">SetRGBA</span><span class="op" id="5459310">(</span><span class="ident" id="5459311">x</span><span class="op" id="5459312">,</span>&nbsp;<span class="ident" id="5459314">y</span>&nbsp;<span class="builtintype" id="5459316">int</span><span class="op" id="5459319">,</span>&nbsp;<span class="ident" id="5459321">c</span>&nbsp;<span class="ident" id="5459323"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5459328">.</span><span class="ident" id="5459329">RGBA</span><span class="op" id="5459333">)</span>&nbsp;<span class="op" id="5459335">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459338">if</span>&nbsp;<span class="op" id="5459341">!</span><span class="op" id="5459342">(</span><span class="ident" id="5459343"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5459348">{</span><span class="ident" id="5459349"><a href="/image/image.go.html#5459311">x</a></span><span class="op" id="5459350">,</span>&nbsp;<span class="ident" id="5459352"><a href="/image/image.go.html#5459314">y</a></span><span class="op" id="5459353">}</span><span class="op" id="5459354">.</span><span class="ident" id="5459355">In</span><span class="op" id="5459357">(</span><span class="ident" id="5459358"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459359">.</span><span class="ident" id="5459360">Rect</span><span class="op" id="5459364">)</span><span class="op" id="5459365">)</span>&nbsp;<span class="op" id="5459367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459371">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459382">i</span>&nbsp;<span class="op" id="5459384">:=</span>&nbsp;<span class="ident" id="5459387"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459388">.</span><span class="ident" id="5459389">PixOffset</span><span class="op" id="5459398">(</span><span class="ident" id="5459399"><a href="/image/image.go.html#5459311">x</a></span><span class="op" id="5459400">,</span>&nbsp;<span class="ident" id="5459402"><a href="/image/image.go.html#5459314">y</a></span><span class="op" id="5459403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459406"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459407">.</span><span class="ident" id="5459408">Pix</span><span class="op" id="5459411">[</span><span class="ident" id="5459412"><a href="/image/image.go.html#5459382">i</a></span><span class="op" id="5459413">+</span><span class="num" id="5459414">0</span><span class="op" id="5459415">]</span>&nbsp;<span class="op" id="5459417">=</span>&nbsp;<span class="ident" id="5459419"><a href="/image/image.go.html#5459321">c</a></span><span class="op" id="5459420">.</span><span class="ident" id="5459421">R</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459424"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459425">.</span><span class="ident" id="5459426">Pix</span><span class="op" id="5459429">[</span><span class="ident" id="5459430"><a href="/image/image.go.html#5459382">i</a></span><span class="op" id="5459431">+</span><span class="num" id="5459432">1</span><span class="op" id="5459433">]</span>&nbsp;<span class="op" id="5459435">=</span>&nbsp;<span class="ident" id="5459437"><a href="/image/image.go.html#5459321">c</a></span><span class="op" id="5459438">.</span><span class="ident" id="5459439">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459442"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459443">.</span><span class="ident" id="5459444">Pix</span><span class="op" id="5459447">[</span><span class="ident" id="5459448"><a href="/image/image.go.html#5459382">i</a></span><span class="op" id="5459449">+</span><span class="num" id="5459450">2</span><span class="op" id="5459451">]</span>&nbsp;<span class="op" id="5459453">=</span>&nbsp;<span class="ident" id="5459455"><a href="/image/image.go.html#5459321">c</a></span><span class="op" id="5459456">.</span><span class="ident" id="5459457">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459460"><a href="/image/image.go.html#5459294">p</a></span><span class="op" id="5459461">.</span><span class="ident" id="5459462">Pix</span><span class="op" id="5459465">[</span><span class="ident" id="5459466"><a href="/image/image.go.html#5459382">i</a></span><span class="op" id="5459467">+</span><span class="num" id="5459468">3</span><span class="op" id="5459469">]</span>&nbsp;<span class="op" id="5459471">=</span>&nbsp;<span class="ident" id="5459473"><a href="/image/image.go.html#5459321">c</a></span><span class="op" id="5459474">.</span><span class="ident" id="5459475">A</span><br>
<span class="lineno"></span><span class="op" id="5459477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5459480">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5459557">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5459629">func</span>&nbsp;<span class="op" id="5459634">(</span><span class="ident" id="5459635">p</span>&nbsp;<span class="op" id="5459637">*</span><span class="ident" id="5459638"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5459642">)</span>&nbsp;<span class="ident" id="5459644">SubImage</span><span class="op" id="5459652">(</span><span class="ident" id="5459653">r</span>&nbsp;<span class="ident" id="5459655"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5459664">)</span>&nbsp;<span class="ident" id="5459666"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5459672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459675"><a href="/image/image.go.html#5459653">r</a></span>&nbsp;<span class="op" id="5459677">=</span>&nbsp;<span class="ident" id="5459679"><a href="/image/image.go.html#5459653">r</a></span><span class="op" id="5459680">.</span><span class="ident" id="5459681">Intersect</span><span class="op" id="5459690">(</span><span class="ident" id="5459691"><a href="/image/image.go.html#5459635">p</a></span><span class="op" id="5459692">.</span><span class="ident" id="5459693">Rect</span><span class="op" id="5459697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5459700">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5459781">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5459863">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459913">if</span>&nbsp;<span class="ident" id="5459916"><a href="/image/image.go.html#5459653">r</a></span><span class="op" id="5459917">.</span><span class="ident" id="5459918">Empty</span><span class="op" id="5459923">(</span><span class="op" id="5459924">)</span>&nbsp;<span class="op" id="5459926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459930">return</span>&nbsp;<span class="op" id="5459937">&amp;</span><span class="ident" id="5459938"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5459942">{</span><span class="op" id="5459943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5459946">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5459949">i</span>&nbsp;<span class="op" id="5459951">:=</span>&nbsp;<span class="ident" id="5459954"><a href="/image/image.go.html#5459635">p</a></span><span class="op" id="5459955">.</span><span class="ident" id="5459956">PixOffset</span><span class="op" id="5459965">(</span><span class="ident" id="5459966"><a href="/image/image.go.html#5459653">r</a></span><span class="op" id="5459967">.</span><span class="ident" id="5459968">Min</span><span class="op" id="5459971">.</span><span class="ident" id="5459972">X</span><span class="op" id="5459973">,</span>&nbsp;<span class="ident" id="5459975"><a href="/image/image.go.html#5459653">r</a></span><span class="op" id="5459976">.</span><span class="ident" id="5459977">Min</span><span class="op" id="5459980">.</span><span class="ident" id="5459981">Y</span><span class="op" id="5459982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5459985">return</span>&nbsp;<span class="op" id="5459992">&amp;</span><span class="ident" id="5459993"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5459997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460001">Pix</span><span class="op" id="5460004">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5460009"><a href="/image/image.go.html#5459635">p</a></span><span class="op" id="5460010">.</span><span class="ident" id="5460011">Pix</span><span class="op" id="5460014">[</span><span class="ident" id="5460015"><a href="/image/image.go.html#5459949">i</a></span><span class="op" id="5460016">:</span><span class="op" id="5460017">]</span><span class="op" id="5460018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460022">Stride</span><span class="op" id="5460028">:</span>&nbsp;<span class="ident" id="5460030"><a href="/image/image.go.html#5459635">p</a></span><span class="op" id="5460031">.</span><span class="ident" id="5460032">Stride</span><span class="op" id="5460038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460042">Rect</span><span class="op" id="5460046">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5460050"><a href="/image/image.go.html#5459653">r</a></span><span class="op" id="5460051">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460054">}</span><br>
<span class="lineno"></span><span class="op" id="5460056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5460059">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5460132">func</span>&nbsp;<span class="op" id="5460137">(</span><span class="ident" id="5460138">p</span>&nbsp;<span class="op" id="5460140">*</span><span class="ident" id="5460141"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5460145">)</span>&nbsp;<span class="ident" id="5460147">Opaque</span><span class="op" id="5460153">(</span><span class="op" id="5460154">)</span>&nbsp;<span class="builtintype" id="5460156">bool</span>&nbsp;<span class="op" id="5460161">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460164">if</span>&nbsp;<span class="ident" id="5460167"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460168">.</span><span class="ident" id="5460169">Rect</span><span class="op" id="5460173">.</span><span class="ident" id="5460174">Empty</span><span class="op" id="5460179">(</span><span class="op" id="5460180">)</span>&nbsp;<span class="op" id="5460182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460186">return</span>&nbsp;<span class="ident" id="5460193">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460202">i0</span><span class="op" id="5460204">,</span>&nbsp;<span class="ident" id="5460206">i1</span>&nbsp;<span class="op" id="5460209">:=</span>&nbsp;<span class="num" id="5460212">3</span><span class="op" id="5460213">,</span>&nbsp;<span class="ident" id="5460215"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460216">.</span><span class="ident" id="5460217">Rect</span><span class="op" id="5460221">.</span><span class="ident" id="5460222">Dx</span><span class="op" id="5460224">(</span><span class="op" id="5460225">)</span><span class="op" id="5460226">*</span><span class="num" id="5460227">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460230">for</span>&nbsp;<span class="ident" id="5460234">y</span>&nbsp;<span class="op" id="5460236">:=</span>&nbsp;<span class="ident" id="5460239"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460240">.</span><span class="ident" id="5460241">Rect</span><span class="op" id="5460245">.</span><span class="ident" id="5460246">Min</span><span class="op" id="5460249">.</span><span class="ident" id="5460250">Y</span><span class="op" id="5460251">;</span>&nbsp;<span class="ident" id="5460253"><a href="/image/image.go.html#5460234">y</a></span>&nbsp;<span class="op" id="5460255">&lt;</span>&nbsp;<span class="ident" id="5460257"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460258">.</span><span class="ident" id="5460259">Rect</span><span class="op" id="5460263">.</span><span class="ident" id="5460264">Max</span><span class="op" id="5460267">.</span><span class="ident" id="5460268">Y</span><span class="op" id="5460269">;</span>&nbsp;<span class="ident" id="5460271"><a href="/image/image.go.html#5460234">y</a></span><span class="op" id="5460272">++</span>&nbsp;<span class="op" id="5460275">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460279">for</span>&nbsp;<span class="ident" id="5460283">i</span>&nbsp;<span class="op" id="5460285">:=</span>&nbsp;<span class="ident" id="5460288"><a href="/image/image.go.html#5460202">i0</a></span><span class="op" id="5460290">;</span>&nbsp;<span class="ident" id="5460292"><a href="/image/image.go.html#5460283">i</a></span>&nbsp;<span class="op" id="5460294">&lt;</span>&nbsp;<span class="ident" id="5460296"><a href="/image/image.go.html#5460206">i1</a></span><span class="op" id="5460298">;</span>&nbsp;<span class="ident" id="5460300"><a href="/image/image.go.html#5460283">i</a></span>&nbsp;<span class="op" id="5460302">+=</span>&nbsp;<span class="num" id="5460305">4</span>&nbsp;<span class="op" id="5460307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460312">if</span>&nbsp;<span class="ident" id="5460315"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460316">.</span><span class="ident" id="5460317">Pix</span><span class="op" id="5460320">[</span><span class="ident" id="5460321"><a href="/image/image.go.html#5460283">i</a></span><span class="op" id="5460322">]</span>&nbsp;<span class="op" id="5460324">!=</span>&nbsp;<span class="num" id="5460327">0xff</span>&nbsp;<span class="op" id="5460332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460338">return</span>&nbsp;<span class="ident" id="5460345">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460358">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460362"><a href="/image/image.go.html#5460202">i0</a></span>&nbsp;<span class="op" id="5460365">+=</span>&nbsp;<span class="ident" id="5460368"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460369">.</span><span class="ident" id="5460370">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460379"><a href="/image/image.go.html#5460206">i1</a></span>&nbsp;<span class="op" id="5460382">+=</span>&nbsp;<span class="ident" id="5460385"><a href="/image/image.go.html#5460138">p</a></span><span class="op" id="5460386">.</span><span class="ident" id="5460387">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5460395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460398">return</span>&nbsp;<span class="ident" id="5460405">true</span><br>
<span class="lineno"></span><span class="op" id="5460410">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="comment" id="5460413">//&nbsp;NewRGBA&nbsp;returns&nbsp;a&nbsp;new&nbsp;RGBA&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5460466">func</span>&nbsp;<span class="ident" id="5460471">NewRGBA</span><span class="op" id="5460478">(</span><span class="ident" id="5460479">r</span>&nbsp;<span class="ident" id="5460481"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5460490">)</span>&nbsp;<span class="op" id="5460492">*</span><span class="ident" id="5460493"><a href="/image/image.go.html#5458159">RGBA</a></span>&nbsp;<span class="op" id="5460498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460501">w</span><span class="op" id="5460502">,</span>&nbsp;<span class="ident" id="5460504">h</span>&nbsp;<span class="op" id="5460506">:=</span>&nbsp;<span class="ident" id="5460509"><a href="/image/image.go.html#5460479">r</a></span><span class="op" id="5460510">.</span><span class="ident" id="5460511">Dx</span><span class="op" id="5460513">(</span><span class="op" id="5460514">)</span><span class="op" id="5460515">,</span>&nbsp;<span class="ident" id="5460517"><a href="/image/image.go.html#5460479">r</a></span><span class="op" id="5460518">.</span><span class="ident" id="5460519">Dy</span><span class="op" id="5460521">(</span><span class="op" id="5460522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460525">buf</span>&nbsp;<span class="op" id="5460529">:=</span>&nbsp;<span class="builtinfunc" id="5460532">make</span><span class="op" id="5460536">(</span><span class="op" id="5460537">[</span><span class="op" id="5460538">]</span><span class="builtintype" id="5460539">uint8</span><span class="op" id="5460544">,</span>&nbsp;<span class="num" id="5460546">4</span><span class="op" id="5460547">*</span><span class="ident" id="5460548"><a href="/image/image.go.html#5460501">w</a></span><span class="op" id="5460549">*</span><span class="ident" id="5460550"><a href="/image/image.go.html#5460504">h</a></span><span class="op" id="5460551">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5460554">return</span>&nbsp;<span class="op" id="5460561">&amp;</span><span class="ident" id="5460562"><a href="/image/image.go.html#5458159">RGBA</a></span><span class="op" id="5460566">{</span><span class="ident" id="5460567"><a href="/image/image.go.html#5460525">buf</a></span><span class="op" id="5460570">,</span>&nbsp;<span class="num" id="5460572">4</span>&nbsp;<span class="op" id="5460574">*</span>&nbsp;<span class="ident" id="5460576"><a href="/image/image.go.html#5460501">w</a></span><span class="op" id="5460577">,</span>&nbsp;<span class="ident" id="5460579"><a href="/image/image.go.html#5460479">r</a></span><span class="op" id="5460580">}</span><br>
<span class="lineno"></span><span class="op" id="5460582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5460585">//&nbsp;RGBA64&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.RGBA64&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5460662">type</span>&nbsp;<span class="ident" id="5460667">RGBA64</span>&nbsp;<span class="keyword" id="5460674">struct</span>&nbsp;<span class="op" id="5460681">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5460684">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order&nbsp;and&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5460774">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*8].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460842">Pix</span>&nbsp;<span class="op" id="5460846">[</span><span class="op" id="5460847">]</span><span class="builtintype" id="5460848">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5460855">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460931">Stride</span>&nbsp;<span class="builtintype" id="5460938">int</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5460943">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5460975">Rect</span>&nbsp;<span class="ident" id="5460980"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5460990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5460993">func</span>&nbsp;<span class="op" id="5460998">(</span><span class="ident" id="5460999">p</span>&nbsp;<span class="op" id="5461001">*</span><span class="ident" id="5461002"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461008">)</span>&nbsp;<span class="ident" id="5461010">ColorModel</span><span class="op" id="5461020">(</span><span class="op" id="5461021">)</span>&nbsp;<span class="ident" id="5461023"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461028">.</span><span class="ident" id="5461029">Model</span>&nbsp;<span class="op" id="5461035">{</span>&nbsp;<span class="keyword" id="5461037">return</span>&nbsp;<span class="ident" id="5461044"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461049">.</span><span class="ident" id="5461050">RGBA64Model</span>&nbsp;<span class="op" id="5461062">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="5461065">func</span>&nbsp;<span class="op" id="5461070">(</span><span class="ident" id="5461071">p</span>&nbsp;<span class="op" id="5461073">*</span><span class="ident" id="5461074"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461080">)</span>&nbsp;<span class="ident" id="5461082">Bounds</span><span class="op" id="5461088">(</span><span class="op" id="5461089">)</span>&nbsp;<span class="ident" id="5461091"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5461101">{</span>&nbsp;<span class="keyword" id="5461103">return</span>&nbsp;<span class="ident" id="5461110"><a href="/image/image.go.html#5461071">p</a></span><span class="op" id="5461111">.</span><span class="ident" id="5461112">Rect</span>&nbsp;<span class="op" id="5461117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5461120">func</span>&nbsp;<span class="op" id="5461125">(</span><span class="ident" id="5461126">p</span>&nbsp;<span class="op" id="5461128">*</span><span class="ident" id="5461129"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461135">)</span>&nbsp;<span class="ident" id="5461137">At</span><span class="op" id="5461139">(</span><span class="ident" id="5461140">x</span><span class="op" id="5461141">,</span>&nbsp;<span class="ident" id="5461143">y</span>&nbsp;<span class="builtintype" id="5461145">int</span><span class="op" id="5461148">)</span>&nbsp;<span class="ident" id="5461150"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461155">.</span><span class="ident" id="5461156">Color</span>&nbsp;<span class="op" id="5461162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461165">return</span>&nbsp;<span class="ident" id="5461172"><a href="/image/image.go.html#5461126">p</a></span><span class="op" id="5461173">.</span><span class="ident" id="5461174">RGBA64At</span><span class="op" id="5461182">(</span><span class="ident" id="5461183"><a href="/image/image.go.html#5461140">x</a></span><span class="op" id="5461184">,</span>&nbsp;<span class="ident" id="5461186"><a href="/image/image.go.html#5461143">y</a></span><span class="op" id="5461187">)</span><br>
<span class="lineno">175</span><span class="op" id="5461189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5461192">func</span>&nbsp;<span class="op" id="5461197">(</span><span class="ident" id="5461198">p</span>&nbsp;<span class="op" id="5461200">*</span><span class="ident" id="5461201"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461207">)</span>&nbsp;<span class="ident" id="5461209">RGBA64At</span><span class="op" id="5461217">(</span><span class="ident" id="5461218">x</span><span class="op" id="5461219">,</span>&nbsp;<span class="ident" id="5461221">y</span>&nbsp;<span class="builtintype" id="5461223">int</span><span class="op" id="5461226">)</span>&nbsp;<span class="ident" id="5461228"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461233">.</span><span class="ident" id="5461234">RGBA64</span>&nbsp;<span class="op" id="5461241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461244">if</span>&nbsp;<span class="op" id="5461247">!</span><span class="op" id="5461248">(</span><span class="ident" id="5461249"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5461254">{</span><span class="ident" id="5461255"><a href="/image/image.go.html#5461218">x</a></span><span class="op" id="5461256">,</span>&nbsp;<span class="ident" id="5461258"><a href="/image/image.go.html#5461221">y</a></span><span class="op" id="5461259">}</span><span class="op" id="5461260">.</span><span class="ident" id="5461261">In</span><span class="op" id="5461263">(</span><span class="ident" id="5461264"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461265">.</span><span class="ident" id="5461266">Rect</span><span class="op" id="5461270">)</span><span class="op" id="5461271">)</span>&nbsp;<span class="op" id="5461273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461277">return</span>&nbsp;<span class="ident" id="5461284"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461289">.</span><span class="ident" id="5461290">RGBA64</span><span class="op" id="5461296">{</span><span class="op" id="5461297">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461303">i</span>&nbsp;<span class="op" id="5461305">:=</span>&nbsp;<span class="ident" id="5461308"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461309">.</span><span class="ident" id="5461310">PixOffset</span><span class="op" id="5461319">(</span><span class="ident" id="5461320"><a href="/image/image.go.html#5461218">x</a></span><span class="op" id="5461321">,</span>&nbsp;<span class="ident" id="5461323"><a href="/image/image.go.html#5461221">y</a></span><span class="op" id="5461324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461327">return</span>&nbsp;<span class="ident" id="5461334"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461339">.</span><span class="ident" id="5461340">RGBA64</span><span class="op" id="5461346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5461350">uint16</span><span class="op" id="5461356">(</span><span class="ident" id="5461357"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461358">.</span><span class="ident" id="5461359">Pix</span><span class="op" id="5461362">[</span><span class="ident" id="5461363"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461364">+</span><span class="num" id="5461365">0</span><span class="op" id="5461366">]</span><span class="op" id="5461367">)</span><span class="op" id="5461368">&lt;&lt;</span><span class="num" id="5461370">8</span>&nbsp;<span class="op" id="5461372">|</span>&nbsp;<span class="builtintype" id="5461374">uint16</span><span class="op" id="5461380">(</span><span class="ident" id="5461381"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461382">.</span><span class="ident" id="5461383">Pix</span><span class="op" id="5461386">[</span><span class="ident" id="5461387"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461388">+</span><span class="num" id="5461389">1</span><span class="op" id="5461390">]</span><span class="op" id="5461391">)</span><span class="op" id="5461392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5461396">uint16</span><span class="op" id="5461402">(</span><span class="ident" id="5461403"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461404">.</span><span class="ident" id="5461405">Pix</span><span class="op" id="5461408">[</span><span class="ident" id="5461409"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461410">+</span><span class="num" id="5461411">2</span><span class="op" id="5461412">]</span><span class="op" id="5461413">)</span><span class="op" id="5461414">&lt;&lt;</span><span class="num" id="5461416">8</span>&nbsp;<span class="op" id="5461418">|</span>&nbsp;<span class="builtintype" id="5461420">uint16</span><span class="op" id="5461426">(</span><span class="ident" id="5461427"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461428">.</span><span class="ident" id="5461429">Pix</span><span class="op" id="5461432">[</span><span class="ident" id="5461433"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461434">+</span><span class="num" id="5461435">3</span><span class="op" id="5461436">]</span><span class="op" id="5461437">)</span><span class="op" id="5461438">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5461442">uint16</span><span class="op" id="5461448">(</span><span class="ident" id="5461449"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461450">.</span><span class="ident" id="5461451">Pix</span><span class="op" id="5461454">[</span><span class="ident" id="5461455"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461456">+</span><span class="num" id="5461457">4</span><span class="op" id="5461458">]</span><span class="op" id="5461459">)</span><span class="op" id="5461460">&lt;&lt;</span><span class="num" id="5461462">8</span>&nbsp;<span class="op" id="5461464">|</span>&nbsp;<span class="builtintype" id="5461466">uint16</span><span class="op" id="5461472">(</span><span class="ident" id="5461473"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461474">.</span><span class="ident" id="5461475">Pix</span><span class="op" id="5461478">[</span><span class="ident" id="5461479"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461480">+</span><span class="num" id="5461481">5</span><span class="op" id="5461482">]</span><span class="op" id="5461483">)</span><span class="op" id="5461484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5461488">uint16</span><span class="op" id="5461494">(</span><span class="ident" id="5461495"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461496">.</span><span class="ident" id="5461497">Pix</span><span class="op" id="5461500">[</span><span class="ident" id="5461501"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461502">+</span><span class="num" id="5461503">6</span><span class="op" id="5461504">]</span><span class="op" id="5461505">)</span><span class="op" id="5461506">&lt;&lt;</span><span class="num" id="5461508">8</span>&nbsp;<span class="op" id="5461510">|</span>&nbsp;<span class="builtintype" id="5461512">uint16</span><span class="op" id="5461518">(</span><span class="ident" id="5461519"><a href="/image/image.go.html#5461198">p</a></span><span class="op" id="5461520">.</span><span class="ident" id="5461521">Pix</span><span class="op" id="5461524">[</span><span class="ident" id="5461525"><a href="/image/image.go.html#5461303">i</a></span><span class="op" id="5461526">+</span><span class="num" id="5461527">7</span><span class="op" id="5461528">]</span><span class="op" id="5461529">)</span><span class="op" id="5461530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461533">}</span><br>
<span class="lineno"></span><span class="op" id="5461535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="comment" id="5461538">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5461617">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5461641">func</span>&nbsp;<span class="op" id="5461646">(</span><span class="ident" id="5461647">p</span>&nbsp;<span class="op" id="5461649">*</span><span class="ident" id="5461650"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461656">)</span>&nbsp;<span class="ident" id="5461658">PixOffset</span><span class="op" id="5461667">(</span><span class="ident" id="5461668">x</span><span class="op" id="5461669">,</span>&nbsp;<span class="ident" id="5461671">y</span>&nbsp;<span class="builtintype" id="5461673">int</span><span class="op" id="5461676">)</span>&nbsp;<span class="builtintype" id="5461678">int</span>&nbsp;<span class="op" id="5461682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461685">return</span>&nbsp;<span class="op" id="5461692">(</span><span class="ident" id="5461693"><a href="/image/image.go.html#5461671">y</a></span><span class="op" id="5461694">-</span><span class="ident" id="5461695"><a href="/image/image.go.html#5461647">p</a></span><span class="op" id="5461696">.</span><span class="ident" id="5461697">Rect</span><span class="op" id="5461701">.</span><span class="ident" id="5461702">Min</span><span class="op" id="5461705">.</span><span class="ident" id="5461706">Y</span><span class="op" id="5461707">)</span><span class="op" id="5461708">*</span><span class="ident" id="5461709"><a href="/image/image.go.html#5461647">p</a></span><span class="op" id="5461710">.</span><span class="ident" id="5461711">Stride</span>&nbsp;<span class="op" id="5461718">+</span>&nbsp;<span class="op" id="5461720">(</span><span class="ident" id="5461721"><a href="/image/image.go.html#5461668">x</a></span><span class="op" id="5461722">-</span><span class="ident" id="5461723"><a href="/image/image.go.html#5461647">p</a></span><span class="op" id="5461724">.</span><span class="ident" id="5461725">Rect</span><span class="op" id="5461729">.</span><span class="ident" id="5461730">Min</span><span class="op" id="5461733">.</span><span class="ident" id="5461734">X</span><span class="op" id="5461735">)</span><span class="op" id="5461736">*</span><span class="num" id="5461737">8</span><br>
<span class="lineno"></span><span class="op" id="5461739">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="5461742">func</span>&nbsp;<span class="op" id="5461747">(</span><span class="ident" id="5461748">p</span>&nbsp;<span class="op" id="5461750">*</span><span class="ident" id="5461751"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5461757">)</span>&nbsp;<span class="ident" id="5461759">Set</span><span class="op" id="5461762">(</span><span class="ident" id="5461763">x</span><span class="op" id="5461764">,</span>&nbsp;<span class="ident" id="5461766">y</span>&nbsp;<span class="builtintype" id="5461768">int</span><span class="op" id="5461771">,</span>&nbsp;<span class="ident" id="5461773">c</span>&nbsp;<span class="ident" id="5461775"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461780">.</span><span class="ident" id="5461781">Color</span><span class="op" id="5461786">)</span>&nbsp;<span class="op" id="5461788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461791">if</span>&nbsp;<span class="op" id="5461794">!</span><span class="op" id="5461795">(</span><span class="ident" id="5461796"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5461801">{</span><span class="ident" id="5461802"><a href="/image/image.go.html#5461763">x</a></span><span class="op" id="5461803">,</span>&nbsp;<span class="ident" id="5461805"><a href="/image/image.go.html#5461766">y</a></span><span class="op" id="5461806">}</span><span class="op" id="5461807">.</span><span class="ident" id="5461808">In</span><span class="op" id="5461810">(</span><span class="ident" id="5461811"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461812">.</span><span class="ident" id="5461813">Rect</span><span class="op" id="5461817">)</span><span class="op" id="5461818">)</span>&nbsp;<span class="op" id="5461820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5461824">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5461832">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461835">i</span>&nbsp;<span class="op" id="5461837">:=</span>&nbsp;<span class="ident" id="5461840"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461841">.</span><span class="ident" id="5461842">PixOffset</span><span class="op" id="5461851">(</span><span class="ident" id="5461852"><a href="/image/image.go.html#5461763">x</a></span><span class="op" id="5461853">,</span>&nbsp;<span class="ident" id="5461855"><a href="/image/image.go.html#5461766">y</a></span><span class="op" id="5461856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461859">c1</span>&nbsp;<span class="op" id="5461862">:=</span>&nbsp;<span class="ident" id="5461865"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461870">.</span><span class="ident" id="5461871">RGBA64Model</span><span class="op" id="5461882">.</span><span class="ident" id="5461883">Convert</span><span class="op" id="5461890">(</span><span class="ident" id="5461891"><a href="/image/image.go.html#5461773">c</a></span><span class="op" id="5461892">)</span><span class="op" id="5461893">.</span><span class="op" id="5461894">(</span><span class="ident" id="5461895"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5461900">.</span><span class="ident" id="5461901">RGBA64</span><span class="op" id="5461907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461910"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461911">.</span><span class="ident" id="5461912">Pix</span><span class="op" id="5461915">[</span><span class="ident" id="5461916"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5461917">+</span><span class="num" id="5461918">0</span><span class="op" id="5461919">]</span>&nbsp;<span class="op" id="5461921">=</span>&nbsp;<span class="builtintype" id="5461923">uint8</span><span class="op" id="5461928">(</span><span class="ident" id="5461929"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5461931">.</span><span class="ident" id="5461932">R</span>&nbsp;<span class="op" id="5461934">&gt;&gt;</span>&nbsp;<span class="num" id="5461937">8</span><span class="op" id="5461938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461941"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461942">.</span><span class="ident" id="5461943">Pix</span><span class="op" id="5461946">[</span><span class="ident" id="5461947"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5461948">+</span><span class="num" id="5461949">1</span><span class="op" id="5461950">]</span>&nbsp;<span class="op" id="5461952">=</span>&nbsp;<span class="builtintype" id="5461954">uint8</span><span class="op" id="5461959">(</span><span class="ident" id="5461960"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5461962">.</span><span class="ident" id="5461963">R</span><span class="op" id="5461964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461967"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461968">.</span><span class="ident" id="5461969">Pix</span><span class="op" id="5461972">[</span><span class="ident" id="5461973"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5461974">+</span><span class="num" id="5461975">2</span><span class="op" id="5461976">]</span>&nbsp;<span class="op" id="5461978">=</span>&nbsp;<span class="builtintype" id="5461980">uint8</span><span class="op" id="5461985">(</span><span class="ident" id="5461986"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5461988">.</span><span class="ident" id="5461989">G</span>&nbsp;<span class="op" id="5461991">&gt;&gt;</span>&nbsp;<span class="num" id="5461994">8</span><span class="op" id="5461995">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5461998"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5461999">.</span><span class="ident" id="5462000">Pix</span><span class="op" id="5462003">[</span><span class="ident" id="5462004"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5462005">+</span><span class="num" id="5462006">3</span><span class="op" id="5462007">]</span>&nbsp;<span class="op" id="5462009">=</span>&nbsp;<span class="builtintype" id="5462011">uint8</span><span class="op" id="5462016">(</span><span class="ident" id="5462017"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5462019">.</span><span class="ident" id="5462020">G</span><span class="op" id="5462021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462024"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5462025">.</span><span class="ident" id="5462026">Pix</span><span class="op" id="5462029">[</span><span class="ident" id="5462030"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5462031">+</span><span class="num" id="5462032">4</span><span class="op" id="5462033">]</span>&nbsp;<span class="op" id="5462035">=</span>&nbsp;<span class="builtintype" id="5462037">uint8</span><span class="op" id="5462042">(</span><span class="ident" id="5462043"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5462045">.</span><span class="ident" id="5462046">B</span>&nbsp;<span class="op" id="5462048">&gt;&gt;</span>&nbsp;<span class="num" id="5462051">8</span><span class="op" id="5462052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462055"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5462056">.</span><span class="ident" id="5462057">Pix</span><span class="op" id="5462060">[</span><span class="ident" id="5462061"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5462062">+</span><span class="num" id="5462063">5</span><span class="op" id="5462064">]</span>&nbsp;<span class="op" id="5462066">=</span>&nbsp;<span class="builtintype" id="5462068">uint8</span><span class="op" id="5462073">(</span><span class="ident" id="5462074"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5462076">.</span><span class="ident" id="5462077">B</span><span class="op" id="5462078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462081"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5462082">.</span><span class="ident" id="5462083">Pix</span><span class="op" id="5462086">[</span><span class="ident" id="5462087"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5462088">+</span><span class="num" id="5462089">6</span><span class="op" id="5462090">]</span>&nbsp;<span class="op" id="5462092">=</span>&nbsp;<span class="builtintype" id="5462094">uint8</span><span class="op" id="5462099">(</span><span class="ident" id="5462100"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5462102">.</span><span class="ident" id="5462103">A</span>&nbsp;<span class="op" id="5462105">&gt;&gt;</span>&nbsp;<span class="num" id="5462108">8</span><span class="op" id="5462109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462112"><a href="/image/image.go.html#5461748">p</a></span><span class="op" id="5462113">.</span><span class="ident" id="5462114">Pix</span><span class="op" id="5462117">[</span><span class="ident" id="5462118"><a href="/image/image.go.html#5461835">i</a></span><span class="op" id="5462119">+</span><span class="num" id="5462120">7</span><span class="op" id="5462121">]</span>&nbsp;<span class="op" id="5462123">=</span>&nbsp;<span class="builtintype" id="5462125">uint8</span><span class="op" id="5462130">(</span><span class="ident" id="5462131"><a href="/image/image.go.html#5461859">c1</a></span><span class="op" id="5462133">.</span><span class="ident" id="5462134">A</span><span class="op" id="5462135">)</span><br>
<span class="lineno">210</span><span class="op" id="5462137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5462140">func</span>&nbsp;<span class="op" id="5462145">(</span><span class="ident" id="5462146">p</span>&nbsp;<span class="op" id="5462148">*</span><span class="ident" id="5462149"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5462155">)</span>&nbsp;<span class="ident" id="5462157">SetRGBA64</span><span class="op" id="5462166">(</span><span class="ident" id="5462167">x</span><span class="op" id="5462168">,</span>&nbsp;<span class="ident" id="5462170">y</span>&nbsp;<span class="builtintype" id="5462172">int</span><span class="op" id="5462175">,</span>&nbsp;<span class="ident" id="5462177">c</span>&nbsp;<span class="ident" id="5462179"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5462184">.</span><span class="ident" id="5462185">RGBA64</span><span class="op" id="5462191">)</span>&nbsp;<span class="op" id="5462193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462196">if</span>&nbsp;<span class="op" id="5462199">!</span><span class="op" id="5462200">(</span><span class="ident" id="5462201"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5462206">{</span><span class="ident" id="5462207"><a href="/image/image.go.html#5462167">x</a></span><span class="op" id="5462208">,</span>&nbsp;<span class="ident" id="5462210"><a href="/image/image.go.html#5462170">y</a></span><span class="op" id="5462211">}</span><span class="op" id="5462212">.</span><span class="ident" id="5462213">In</span><span class="op" id="5462215">(</span><span class="ident" id="5462216"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462217">.</span><span class="ident" id="5462218">Rect</span><span class="op" id="5462222">)</span><span class="op" id="5462223">)</span>&nbsp;<span class="op" id="5462225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462229">return</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462240">i</span>&nbsp;<span class="op" id="5462242">:=</span>&nbsp;<span class="ident" id="5462245"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462246">.</span><span class="ident" id="5462247">PixOffset</span><span class="op" id="5462256">(</span><span class="ident" id="5462257"><a href="/image/image.go.html#5462167">x</a></span><span class="op" id="5462258">,</span>&nbsp;<span class="ident" id="5462260"><a href="/image/image.go.html#5462170">y</a></span><span class="op" id="5462261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462264"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462265">.</span><span class="ident" id="5462266">Pix</span><span class="op" id="5462269">[</span><span class="ident" id="5462270"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462271">+</span><span class="num" id="5462272">0</span><span class="op" id="5462273">]</span>&nbsp;<span class="op" id="5462275">=</span>&nbsp;<span class="builtintype" id="5462277">uint8</span><span class="op" id="5462282">(</span><span class="ident" id="5462283"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462284">.</span><span class="ident" id="5462285">R</span>&nbsp;<span class="op" id="5462287">&gt;&gt;</span>&nbsp;<span class="num" id="5462290">8</span><span class="op" id="5462291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462294"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462295">.</span><span class="ident" id="5462296">Pix</span><span class="op" id="5462299">[</span><span class="ident" id="5462300"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462301">+</span><span class="num" id="5462302">1</span><span class="op" id="5462303">]</span>&nbsp;<span class="op" id="5462305">=</span>&nbsp;<span class="builtintype" id="5462307">uint8</span><span class="op" id="5462312">(</span><span class="ident" id="5462313"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462314">.</span><span class="ident" id="5462315">R</span><span class="op" id="5462316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462319"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462320">.</span><span class="ident" id="5462321">Pix</span><span class="op" id="5462324">[</span><span class="ident" id="5462325"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462326">+</span><span class="num" id="5462327">2</span><span class="op" id="5462328">]</span>&nbsp;<span class="op" id="5462330">=</span>&nbsp;<span class="builtintype" id="5462332">uint8</span><span class="op" id="5462337">(</span><span class="ident" id="5462338"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462339">.</span><span class="ident" id="5462340">G</span>&nbsp;<span class="op" id="5462342">&gt;&gt;</span>&nbsp;<span class="num" id="5462345">8</span><span class="op" id="5462346">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462349"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462350">.</span><span class="ident" id="5462351">Pix</span><span class="op" id="5462354">[</span><span class="ident" id="5462355"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462356">+</span><span class="num" id="5462357">3</span><span class="op" id="5462358">]</span>&nbsp;<span class="op" id="5462360">=</span>&nbsp;<span class="builtintype" id="5462362">uint8</span><span class="op" id="5462367">(</span><span class="ident" id="5462368"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462369">.</span><span class="ident" id="5462370">G</span><span class="op" id="5462371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462374"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462375">.</span><span class="ident" id="5462376">Pix</span><span class="op" id="5462379">[</span><span class="ident" id="5462380"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462381">+</span><span class="num" id="5462382">4</span><span class="op" id="5462383">]</span>&nbsp;<span class="op" id="5462385">=</span>&nbsp;<span class="builtintype" id="5462387">uint8</span><span class="op" id="5462392">(</span><span class="ident" id="5462393"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462394">.</span><span class="ident" id="5462395">B</span>&nbsp;<span class="op" id="5462397">&gt;&gt;</span>&nbsp;<span class="num" id="5462400">8</span><span class="op" id="5462401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462404"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462405">.</span><span class="ident" id="5462406">Pix</span><span class="op" id="5462409">[</span><span class="ident" id="5462410"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462411">+</span><span class="num" id="5462412">5</span><span class="op" id="5462413">]</span>&nbsp;<span class="op" id="5462415">=</span>&nbsp;<span class="builtintype" id="5462417">uint8</span><span class="op" id="5462422">(</span><span class="ident" id="5462423"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462424">.</span><span class="ident" id="5462425">B</span><span class="op" id="5462426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462429"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462430">.</span><span class="ident" id="5462431">Pix</span><span class="op" id="5462434">[</span><span class="ident" id="5462435"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462436">+</span><span class="num" id="5462437">6</span><span class="op" id="5462438">]</span>&nbsp;<span class="op" id="5462440">=</span>&nbsp;<span class="builtintype" id="5462442">uint8</span><span class="op" id="5462447">(</span><span class="ident" id="5462448"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462449">.</span><span class="ident" id="5462450">A</span>&nbsp;<span class="op" id="5462452">&gt;&gt;</span>&nbsp;<span class="num" id="5462455">8</span><span class="op" id="5462456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462459"><a href="/image/image.go.html#5462146">p</a></span><span class="op" id="5462460">.</span><span class="ident" id="5462461">Pix</span><span class="op" id="5462464">[</span><span class="ident" id="5462465"><a href="/image/image.go.html#5462240">i</a></span><span class="op" id="5462466">+</span><span class="num" id="5462467">7</span><span class="op" id="5462468">]</span>&nbsp;<span class="op" id="5462470">=</span>&nbsp;<span class="builtintype" id="5462472">uint8</span><span class="op" id="5462477">(</span><span class="ident" id="5462478"><a href="/image/image.go.html#5462177">c</a></span><span class="op" id="5462479">.</span><span class="ident" id="5462480">A</span><span class="op" id="5462481">)</span><br>
<span class="lineno">225</span><span class="op" id="5462483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5462486">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5462563">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5462635">func</span>&nbsp;<span class="op" id="5462640">(</span><span class="ident" id="5462641">p</span>&nbsp;<span class="op" id="5462643">*</span><span class="ident" id="5462644"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5462650">)</span>&nbsp;<span class="ident" id="5462652">SubImage</span><span class="op" id="5462660">(</span><span class="ident" id="5462661">r</span>&nbsp;<span class="ident" id="5462663"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5462672">)</span>&nbsp;<span class="ident" id="5462674"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5462680">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462683"><a href="/image/image.go.html#5462661">r</a></span>&nbsp;<span class="op" id="5462685">=</span>&nbsp;<span class="ident" id="5462687"><a href="/image/image.go.html#5462661">r</a></span><span class="op" id="5462688">.</span><span class="ident" id="5462689">Intersect</span><span class="op" id="5462698">(</span><span class="ident" id="5462699"><a href="/image/image.go.html#5462641">p</a></span><span class="op" id="5462700">.</span><span class="ident" id="5462701">Rect</span><span class="op" id="5462705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5462708">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5462789">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5462871">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462921">if</span>&nbsp;<span class="ident" id="5462924"><a href="/image/image.go.html#5462661">r</a></span><span class="op" id="5462925">.</span><span class="ident" id="5462926">Empty</span><span class="op" id="5462931">(</span><span class="op" id="5462932">)</span>&nbsp;<span class="op" id="5462934">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462938">return</span>&nbsp;<span class="op" id="5462945">&amp;</span><span class="ident" id="5462946"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5462952">{</span><span class="op" id="5462953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5462956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5462959">i</span>&nbsp;<span class="op" id="5462961">:=</span>&nbsp;<span class="ident" id="5462964"><a href="/image/image.go.html#5462641">p</a></span><span class="op" id="5462965">.</span><span class="ident" id="5462966">PixOffset</span><span class="op" id="5462975">(</span><span class="ident" id="5462976"><a href="/image/image.go.html#5462661">r</a></span><span class="op" id="5462977">.</span><span class="ident" id="5462978">Min</span><span class="op" id="5462981">.</span><span class="ident" id="5462982">X</span><span class="op" id="5462983">,</span>&nbsp;<span class="ident" id="5462985"><a href="/image/image.go.html#5462661">r</a></span><span class="op" id="5462986">.</span><span class="ident" id="5462987">Min</span><span class="op" id="5462990">.</span><span class="ident" id="5462991">Y</span><span class="op" id="5462992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5462995">return</span>&nbsp;<span class="op" id="5463002">&amp;</span><span class="ident" id="5463003"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5463009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463013">Pix</span><span class="op" id="5463016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463021"><a href="/image/image.go.html#5462641">p</a></span><span class="op" id="5463022">.</span><span class="ident" id="5463023">Pix</span><span class="op" id="5463026">[</span><span class="ident" id="5463027"><a href="/image/image.go.html#5462959">i</a></span><span class="op" id="5463028">:</span><span class="op" id="5463029">]</span><span class="op" id="5463030">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463034">Stride</span><span class="op" id="5463040">:</span>&nbsp;<span class="ident" id="5463042"><a href="/image/image.go.html#5462641">p</a></span><span class="op" id="5463043">.</span><span class="ident" id="5463044">Stride</span><span class="op" id="5463050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463054">Rect</span><span class="op" id="5463058">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5463062"><a href="/image/image.go.html#5462661">r</a></span><span class="op" id="5463063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463066">}</span><br>
<span class="lineno"></span><span class="op" id="5463068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="5463071">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5463144">func</span>&nbsp;<span class="op" id="5463149">(</span><span class="ident" id="5463150">p</span>&nbsp;<span class="op" id="5463152">*</span><span class="ident" id="5463153"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5463159">)</span>&nbsp;<span class="ident" id="5463161">Opaque</span><span class="op" id="5463167">(</span><span class="op" id="5463168">)</span>&nbsp;<span class="builtintype" id="5463170">bool</span>&nbsp;<span class="op" id="5463175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463178">if</span>&nbsp;<span class="ident" id="5463181"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463182">.</span><span class="ident" id="5463183">Rect</span><span class="op" id="5463187">.</span><span class="ident" id="5463188">Empty</span><span class="op" id="5463193">(</span><span class="op" id="5463194">)</span>&nbsp;<span class="op" id="5463196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463200">return</span>&nbsp;<span class="ident" id="5463207">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463213">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463216">i0</span><span class="op" id="5463218">,</span>&nbsp;<span class="ident" id="5463220">i1</span>&nbsp;<span class="op" id="5463223">:=</span>&nbsp;<span class="num" id="5463226">6</span><span class="op" id="5463227">,</span>&nbsp;<span class="ident" id="5463229"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463230">.</span><span class="ident" id="5463231">Rect</span><span class="op" id="5463235">.</span><span class="ident" id="5463236">Dx</span><span class="op" id="5463238">(</span><span class="op" id="5463239">)</span><span class="op" id="5463240">*</span><span class="num" id="5463241">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463244">for</span>&nbsp;<span class="ident" id="5463248">y</span>&nbsp;<span class="op" id="5463250">:=</span>&nbsp;<span class="ident" id="5463253"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463254">.</span><span class="ident" id="5463255">Rect</span><span class="op" id="5463259">.</span><span class="ident" id="5463260">Min</span><span class="op" id="5463263">.</span><span class="ident" id="5463264">Y</span><span class="op" id="5463265">;</span>&nbsp;<span class="ident" id="5463267"><a href="/image/image.go.html#5463248">y</a></span>&nbsp;<span class="op" id="5463269">&lt;</span>&nbsp;<span class="ident" id="5463271"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463272">.</span><span class="ident" id="5463273">Rect</span><span class="op" id="5463277">.</span><span class="ident" id="5463278">Max</span><span class="op" id="5463281">.</span><span class="ident" id="5463282">Y</span><span class="op" id="5463283">;</span>&nbsp;<span class="ident" id="5463285"><a href="/image/image.go.html#5463248">y</a></span><span class="op" id="5463286">++</span>&nbsp;<span class="op" id="5463289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463293">for</span>&nbsp;<span class="ident" id="5463297">i</span>&nbsp;<span class="op" id="5463299">:=</span>&nbsp;<span class="ident" id="5463302"><a href="/image/image.go.html#5463216">i0</a></span><span class="op" id="5463304">;</span>&nbsp;<span class="ident" id="5463306"><a href="/image/image.go.html#5463297">i</a></span>&nbsp;<span class="op" id="5463308">&lt;</span>&nbsp;<span class="ident" id="5463310"><a href="/image/image.go.html#5463220">i1</a></span><span class="op" id="5463312">;</span>&nbsp;<span class="ident" id="5463314"><a href="/image/image.go.html#5463297">i</a></span>&nbsp;<span class="op" id="5463316">+=</span>&nbsp;<span class="num" id="5463319">8</span>&nbsp;<span class="op" id="5463321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463326">if</span>&nbsp;<span class="ident" id="5463329"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463330">.</span><span class="ident" id="5463331">Pix</span><span class="op" id="5463334">[</span><span class="ident" id="5463335"><a href="/image/image.go.html#5463297">i</a></span><span class="op" id="5463336">+</span><span class="num" id="5463337">0</span><span class="op" id="5463338">]</span>&nbsp;<span class="op" id="5463340">!=</span>&nbsp;<span class="num" id="5463343">0xff</span>&nbsp;<span class="op" id="5463348">||</span>&nbsp;<span class="ident" id="5463351"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463352">.</span><span class="ident" id="5463353">Pix</span><span class="op" id="5463356">[</span><span class="ident" id="5463357"><a href="/image/image.go.html#5463297">i</a></span><span class="op" id="5463358">+</span><span class="num" id="5463359">1</span><span class="op" id="5463360">]</span>&nbsp;<span class="op" id="5463362">!=</span>&nbsp;<span class="num" id="5463365">0xff</span>&nbsp;<span class="op" id="5463370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463376">return</span>&nbsp;<span class="ident" id="5463383">false</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463400"><a href="/image/image.go.html#5463216">i0</a></span>&nbsp;<span class="op" id="5463403">+=</span>&nbsp;<span class="ident" id="5463406"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463407">.</span><span class="ident" id="5463408">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463417"><a href="/image/image.go.html#5463220">i1</a></span>&nbsp;<span class="op" id="5463420">+=</span>&nbsp;<span class="ident" id="5463423"><a href="/image/image.go.html#5463150">p</a></span><span class="op" id="5463424">.</span><span class="ident" id="5463425">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5463433">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463436">return</span>&nbsp;<span class="ident" id="5463443">true</span><br>
<span class="lineno"></span><span class="op" id="5463448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5463451">//&nbsp;NewRGBA64&nbsp;returns&nbsp;a&nbsp;new&nbsp;RGBA64&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5463508">func</span>&nbsp;<span class="ident" id="5463513">NewRGBA64</span><span class="op" id="5463522">(</span><span class="ident" id="5463523">r</span>&nbsp;<span class="ident" id="5463525"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5463534">)</span>&nbsp;<span class="op" id="5463536">*</span><span class="ident" id="5463537"><a href="/image/image.go.html#5460667">RGBA64</a></span>&nbsp;<span class="op" id="5463544">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463547">w</span><span class="op" id="5463548">,</span>&nbsp;<span class="ident" id="5463550">h</span>&nbsp;<span class="op" id="5463552">:=</span>&nbsp;<span class="ident" id="5463555"><a href="/image/image.go.html#5463523">r</a></span><span class="op" id="5463556">.</span><span class="ident" id="5463557">Dx</span><span class="op" id="5463559">(</span><span class="op" id="5463560">)</span><span class="op" id="5463561">,</span>&nbsp;<span class="ident" id="5463563"><a href="/image/image.go.html#5463523">r</a></span><span class="op" id="5463564">.</span><span class="ident" id="5463565">Dy</span><span class="op" id="5463567">(</span><span class="op" id="5463568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463571">pix</span>&nbsp;<span class="op" id="5463575">:=</span>&nbsp;<span class="builtinfunc" id="5463578">make</span><span class="op" id="5463582">(</span><span class="op" id="5463583">[</span><span class="op" id="5463584">]</span><span class="builtintype" id="5463585">uint8</span><span class="op" id="5463590">,</span>&nbsp;<span class="num" id="5463592">8</span><span class="op" id="5463593">*</span><span class="ident" id="5463594"><a href="/image/image.go.html#5463547">w</a></span><span class="op" id="5463595">*</span><span class="ident" id="5463596"><a href="/image/image.go.html#5463550">h</a></span><span class="op" id="5463597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5463600">return</span>&nbsp;<span class="op" id="5463607">&amp;</span><span class="ident" id="5463608"><a href="/image/image.go.html#5460667">RGBA64</a></span><span class="op" id="5463614">{</span><span class="ident" id="5463615"><a href="/image/image.go.html#5463571">pix</a></span><span class="op" id="5463618">,</span>&nbsp;<span class="num" id="5463620">8</span>&nbsp;<span class="op" id="5463622">*</span>&nbsp;<span class="ident" id="5463624"><a href="/image/image.go.html#5463547">w</a></span><span class="op" id="5463625">,</span>&nbsp;<span class="ident" id="5463627"><a href="/image/image.go.html#5463523">r</a></span><span class="op" id="5463628">}</span><br>
<span class="lineno"></span><span class="op" id="5463630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="5463633">//&nbsp;NRGBA&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.NRGBA&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5463708">type</span>&nbsp;<span class="ident" id="5463713">NRGBA</span>&nbsp;<span class="keyword" id="5463719">struct</span>&nbsp;<span class="op" id="5463726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5463729">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5463797">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*4].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463865">Pix</span>&nbsp;<span class="op" id="5463869">[</span><span class="op" id="5463870">]</span><span class="builtintype" id="5463871">uint8</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5463878">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463954">Stride</span>&nbsp;<span class="builtintype" id="5463961">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5463966">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5463998">Rect</span>&nbsp;<span class="ident" id="5464003"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5464013">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="5464016">func</span>&nbsp;<span class="op" id="5464021">(</span><span class="ident" id="5464022">p</span>&nbsp;<span class="op" id="5464024">*</span><span class="ident" id="5464025"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464030">)</span>&nbsp;<span class="ident" id="5464032">ColorModel</span><span class="op" id="5464042">(</span><span class="op" id="5464043">)</span>&nbsp;<span class="ident" id="5464045"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464050">.</span><span class="ident" id="5464051">Model</span>&nbsp;<span class="op" id="5464057">{</span>&nbsp;<span class="keyword" id="5464059">return</span>&nbsp;<span class="ident" id="5464066"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464071">.</span><span class="ident" id="5464072">NRGBAModel</span>&nbsp;<span class="op" id="5464083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5464086">func</span>&nbsp;<span class="op" id="5464091">(</span><span class="ident" id="5464092">p</span>&nbsp;<span class="op" id="5464094">*</span><span class="ident" id="5464095"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464100">)</span>&nbsp;<span class="ident" id="5464102">Bounds</span><span class="op" id="5464108">(</span><span class="op" id="5464109">)</span>&nbsp;<span class="ident" id="5464111"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5464121">{</span>&nbsp;<span class="keyword" id="5464123">return</span>&nbsp;<span class="ident" id="5464130"><a href="/image/image.go.html#5464092">p</a></span><span class="op" id="5464131">.</span><span class="ident" id="5464132">Rect</span>&nbsp;<span class="op" id="5464137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5464140">func</span>&nbsp;<span class="op" id="5464145">(</span><span class="ident" id="5464146">p</span>&nbsp;<span class="op" id="5464148">*</span><span class="ident" id="5464149"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464154">)</span>&nbsp;<span class="ident" id="5464156">At</span><span class="op" id="5464158">(</span><span class="ident" id="5464159">x</span><span class="op" id="5464160">,</span>&nbsp;<span class="ident" id="5464162">y</span>&nbsp;<span class="builtintype" id="5464164">int</span><span class="op" id="5464167">)</span>&nbsp;<span class="ident" id="5464169"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464174">.</span><span class="ident" id="5464175">Color</span>&nbsp;<span class="op" id="5464181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464184">return</span>&nbsp;<span class="ident" id="5464191"><a href="/image/image.go.html#5464146">p</a></span><span class="op" id="5464192">.</span><span class="ident" id="5464193">NRGBAAt</span><span class="op" id="5464200">(</span><span class="ident" id="5464201"><a href="/image/image.go.html#5464159">x</a></span><span class="op" id="5464202">,</span>&nbsp;<span class="ident" id="5464204"><a href="/image/image.go.html#5464162">y</a></span><span class="op" id="5464205">)</span><br>
<span class="lineno"></span><span class="op" id="5464207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5464210">func</span>&nbsp;<span class="op" id="5464215">(</span><span class="ident" id="5464216">p</span>&nbsp;<span class="op" id="5464218">*</span><span class="ident" id="5464219"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464224">)</span>&nbsp;<span class="ident" id="5464226">NRGBAAt</span><span class="op" id="5464233">(</span><span class="ident" id="5464234">x</span><span class="op" id="5464235">,</span>&nbsp;<span class="ident" id="5464237">y</span>&nbsp;<span class="builtintype" id="5464239">int</span><span class="op" id="5464242">)</span>&nbsp;<span class="ident" id="5464244"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464249">.</span><span class="ident" id="5464250">NRGBA</span>&nbsp;<span class="op" id="5464256">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464259">if</span>&nbsp;<span class="op" id="5464262">!</span><span class="op" id="5464263">(</span><span class="ident" id="5464264"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5464269">{</span><span class="ident" id="5464270"><a href="/image/image.go.html#5464234">x</a></span><span class="op" id="5464271">,</span>&nbsp;<span class="ident" id="5464273"><a href="/image/image.go.html#5464237">y</a></span><span class="op" id="5464274">}</span><span class="op" id="5464275">.</span><span class="ident" id="5464276">In</span><span class="op" id="5464278">(</span><span class="ident" id="5464279"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464280">.</span><span class="ident" id="5464281">Rect</span><span class="op" id="5464285">)</span><span class="op" id="5464286">)</span>&nbsp;<span class="op" id="5464288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464292">return</span>&nbsp;<span class="ident" id="5464299"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464304">.</span><span class="ident" id="5464305">NRGBA</span><span class="op" id="5464310">{</span><span class="op" id="5464311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464317">i</span>&nbsp;<span class="op" id="5464319">:=</span>&nbsp;<span class="ident" id="5464322"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464323">.</span><span class="ident" id="5464324">PixOffset</span><span class="op" id="5464333">(</span><span class="ident" id="5464334"><a href="/image/image.go.html#5464234">x</a></span><span class="op" id="5464335">,</span>&nbsp;<span class="ident" id="5464337"><a href="/image/image.go.html#5464237">y</a></span><span class="op" id="5464338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464341">return</span>&nbsp;<span class="ident" id="5464348"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464353">.</span><span class="ident" id="5464354">NRGBA</span><span class="op" id="5464359">{</span><span class="ident" id="5464360"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464361">.</span><span class="ident" id="5464362">Pix</span><span class="op" id="5464365">[</span><span class="ident" id="5464366"><a href="/image/image.go.html#5464317">i</a></span><span class="op" id="5464367">+</span><span class="num" id="5464368">0</span><span class="op" id="5464369">]</span><span class="op" id="5464370">,</span>&nbsp;<span class="ident" id="5464372"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464373">.</span><span class="ident" id="5464374">Pix</span><span class="op" id="5464377">[</span><span class="ident" id="5464378"><a href="/image/image.go.html#5464317">i</a></span><span class="op" id="5464379">+</span><span class="num" id="5464380">1</span><span class="op" id="5464381">]</span><span class="op" id="5464382">,</span>&nbsp;<span class="ident" id="5464384"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464385">.</span><span class="ident" id="5464386">Pix</span><span class="op" id="5464389">[</span><span class="ident" id="5464390"><a href="/image/image.go.html#5464317">i</a></span><span class="op" id="5464391">+</span><span class="num" id="5464392">2</span><span class="op" id="5464393">]</span><span class="op" id="5464394">,</span>&nbsp;<span class="ident" id="5464396"><a href="/image/image.go.html#5464216">p</a></span><span class="op" id="5464397">.</span><span class="ident" id="5464398">Pix</span><span class="op" id="5464401">[</span><span class="ident" id="5464402"><a href="/image/image.go.html#5464317">i</a></span><span class="op" id="5464403">+</span><span class="num" id="5464404">3</span><span class="op" id="5464405">]</span><span class="op" id="5464406">}</span><br>
<span class="lineno">295</span><span class="op" id="5464408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5464411">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5464490">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5464514">func</span>&nbsp;<span class="op" id="5464519">(</span><span class="ident" id="5464520">p</span>&nbsp;<span class="op" id="5464522">*</span><span class="ident" id="5464523"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464528">)</span>&nbsp;<span class="ident" id="5464530">PixOffset</span><span class="op" id="5464539">(</span><span class="ident" id="5464540">x</span><span class="op" id="5464541">,</span>&nbsp;<span class="ident" id="5464543">y</span>&nbsp;<span class="builtintype" id="5464545">int</span><span class="op" id="5464548">)</span>&nbsp;<span class="builtintype" id="5464550">int</span>&nbsp;<span class="op" id="5464554">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464557">return</span>&nbsp;<span class="op" id="5464564">(</span><span class="ident" id="5464565"><a href="/image/image.go.html#5464543">y</a></span><span class="op" id="5464566">-</span><span class="ident" id="5464567"><a href="/image/image.go.html#5464520">p</a></span><span class="op" id="5464568">.</span><span class="ident" id="5464569">Rect</span><span class="op" id="5464573">.</span><span class="ident" id="5464574">Min</span><span class="op" id="5464577">.</span><span class="ident" id="5464578">Y</span><span class="op" id="5464579">)</span><span class="op" id="5464580">*</span><span class="ident" id="5464581"><a href="/image/image.go.html#5464520">p</a></span><span class="op" id="5464582">.</span><span class="ident" id="5464583">Stride</span>&nbsp;<span class="op" id="5464590">+</span>&nbsp;<span class="op" id="5464592">(</span><span class="ident" id="5464593"><a href="/image/image.go.html#5464540">x</a></span><span class="op" id="5464594">-</span><span class="ident" id="5464595"><a href="/image/image.go.html#5464520">p</a></span><span class="op" id="5464596">.</span><span class="ident" id="5464597">Rect</span><span class="op" id="5464601">.</span><span class="ident" id="5464602">Min</span><span class="op" id="5464605">.</span><span class="ident" id="5464606">X</span><span class="op" id="5464607">)</span><span class="op" id="5464608">*</span><span class="num" id="5464609">4</span><br>
<span class="lineno"></span><span class="op" id="5464611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5464614">func</span>&nbsp;<span class="op" id="5464619">(</span><span class="ident" id="5464620">p</span>&nbsp;<span class="op" id="5464622">*</span><span class="ident" id="5464623"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464628">)</span>&nbsp;<span class="ident" id="5464630">Set</span><span class="op" id="5464633">(</span><span class="ident" id="5464634">x</span><span class="op" id="5464635">,</span>&nbsp;<span class="ident" id="5464637">y</span>&nbsp;<span class="builtintype" id="5464639">int</span><span class="op" id="5464642">,</span>&nbsp;<span class="ident" id="5464644">c</span>&nbsp;<span class="ident" id="5464646"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464651">.</span><span class="ident" id="5464652">Color</span><span class="op" id="5464657">)</span>&nbsp;<span class="op" id="5464659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464662">if</span>&nbsp;<span class="op" id="5464665">!</span><span class="op" id="5464666">(</span><span class="ident" id="5464667"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5464672">{</span><span class="ident" id="5464673"><a href="/image/image.go.html#5464634">x</a></span><span class="op" id="5464674">,</span>&nbsp;<span class="ident" id="5464676"><a href="/image/image.go.html#5464637">y</a></span><span class="op" id="5464677">}</span><span class="op" id="5464678">.</span><span class="ident" id="5464679">In</span><span class="op" id="5464681">(</span><span class="ident" id="5464682"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464683">.</span><span class="ident" id="5464684">Rect</span><span class="op" id="5464688">)</span><span class="op" id="5464689">)</span>&nbsp;<span class="op" id="5464691">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464695">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464706">i</span>&nbsp;<span class="op" id="5464708">:=</span>&nbsp;<span class="ident" id="5464711"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464712">.</span><span class="ident" id="5464713">PixOffset</span><span class="op" id="5464722">(</span><span class="ident" id="5464723"><a href="/image/image.go.html#5464634">x</a></span><span class="op" id="5464724">,</span>&nbsp;<span class="ident" id="5464726"><a href="/image/image.go.html#5464637">y</a></span><span class="op" id="5464727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464730">c1</span>&nbsp;<span class="op" id="5464733">:=</span>&nbsp;<span class="ident" id="5464736"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464741">.</span><span class="ident" id="5464742">NRGBAModel</span><span class="op" id="5464752">.</span><span class="ident" id="5464753">Convert</span><span class="op" id="5464760">(</span><span class="ident" id="5464761"><a href="/image/image.go.html#5464644">c</a></span><span class="op" id="5464762">)</span><span class="op" id="5464763">.</span><span class="op" id="5464764">(</span><span class="ident" id="5464765"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464770">.</span><span class="ident" id="5464771">NRGBA</span><span class="op" id="5464776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464779"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464780">.</span><span class="ident" id="5464781">Pix</span><span class="op" id="5464784">[</span><span class="ident" id="5464785"><a href="/image/image.go.html#5464706">i</a></span><span class="op" id="5464786">+</span><span class="num" id="5464787">0</span><span class="op" id="5464788">]</span>&nbsp;<span class="op" id="5464790">=</span>&nbsp;<span class="ident" id="5464792"><a href="/image/image.go.html#5464730">c1</a></span><span class="op" id="5464794">.</span><span class="ident" id="5464795">R</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464798"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464799">.</span><span class="ident" id="5464800">Pix</span><span class="op" id="5464803">[</span><span class="ident" id="5464804"><a href="/image/image.go.html#5464706">i</a></span><span class="op" id="5464805">+</span><span class="num" id="5464806">1</span><span class="op" id="5464807">]</span>&nbsp;<span class="op" id="5464809">=</span>&nbsp;<span class="ident" id="5464811"><a href="/image/image.go.html#5464730">c1</a></span><span class="op" id="5464813">.</span><span class="ident" id="5464814">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464817"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464818">.</span><span class="ident" id="5464819">Pix</span><span class="op" id="5464822">[</span><span class="ident" id="5464823"><a href="/image/image.go.html#5464706">i</a></span><span class="op" id="5464824">+</span><span class="num" id="5464825">2</span><span class="op" id="5464826">]</span>&nbsp;<span class="op" id="5464828">=</span>&nbsp;<span class="ident" id="5464830"><a href="/image/image.go.html#5464730">c1</a></span><span class="op" id="5464832">.</span><span class="ident" id="5464833">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464836"><a href="/image/image.go.html#5464620">p</a></span><span class="op" id="5464837">.</span><span class="ident" id="5464838">Pix</span><span class="op" id="5464841">[</span><span class="ident" id="5464842"><a href="/image/image.go.html#5464706">i</a></span><span class="op" id="5464843">+</span><span class="num" id="5464844">3</span><span class="op" id="5464845">]</span>&nbsp;<span class="op" id="5464847">=</span>&nbsp;<span class="ident" id="5464849"><a href="/image/image.go.html#5464730">c1</a></span><span class="op" id="5464851">.</span><span class="ident" id="5464852">A</span><br>
<span class="lineno"></span><span class="op" id="5464854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="5464857">func</span>&nbsp;<span class="op" id="5464862">(</span><span class="ident" id="5464863">p</span>&nbsp;<span class="op" id="5464865">*</span><span class="ident" id="5464866"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5464871">)</span>&nbsp;<span class="ident" id="5464873">SetNRGBA</span><span class="op" id="5464881">(</span><span class="ident" id="5464882">x</span><span class="op" id="5464883">,</span>&nbsp;<span class="ident" id="5464885">y</span>&nbsp;<span class="builtintype" id="5464887">int</span><span class="op" id="5464890">,</span>&nbsp;<span class="ident" id="5464892">c</span>&nbsp;<span class="ident" id="5464894"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5464899">.</span><span class="ident" id="5464900">NRGBA</span><span class="op" id="5464905">)</span>&nbsp;<span class="op" id="5464907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464910">if</span>&nbsp;<span class="op" id="5464913">!</span><span class="op" id="5464914">(</span><span class="ident" id="5464915"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5464920">{</span><span class="ident" id="5464921"><a href="/image/image.go.html#5464882">x</a></span><span class="op" id="5464922">,</span>&nbsp;<span class="ident" id="5464924"><a href="/image/image.go.html#5464885">y</a></span><span class="op" id="5464925">}</span><span class="op" id="5464926">.</span><span class="ident" id="5464927">In</span><span class="op" id="5464929">(</span><span class="ident" id="5464930"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5464931">.</span><span class="ident" id="5464932">Rect</span><span class="op" id="5464936">)</span><span class="op" id="5464937">)</span>&nbsp;<span class="op" id="5464939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5464943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5464951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464954">i</span>&nbsp;<span class="op" id="5464956">:=</span>&nbsp;<span class="ident" id="5464959"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5464960">.</span><span class="ident" id="5464961">PixOffset</span><span class="op" id="5464970">(</span><span class="ident" id="5464971"><a href="/image/image.go.html#5464882">x</a></span><span class="op" id="5464972">,</span>&nbsp;<span class="ident" id="5464974"><a href="/image/image.go.html#5464885">y</a></span><span class="op" id="5464975">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464978"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5464979">.</span><span class="ident" id="5464980">Pix</span><span class="op" id="5464983">[</span><span class="ident" id="5464984"><a href="/image/image.go.html#5464954">i</a></span><span class="op" id="5464985">+</span><span class="num" id="5464986">0</span><span class="op" id="5464987">]</span>&nbsp;<span class="op" id="5464989">=</span>&nbsp;<span class="ident" id="5464991"><a href="/image/image.go.html#5464892">c</a></span><span class="op" id="5464992">.</span><span class="ident" id="5464993">R</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5464996"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5464997">.</span><span class="ident" id="5464998">Pix</span><span class="op" id="5465001">[</span><span class="ident" id="5465002"><a href="/image/image.go.html#5464954">i</a></span><span class="op" id="5465003">+</span><span class="num" id="5465004">1</span><span class="op" id="5465005">]</span>&nbsp;<span class="op" id="5465007">=</span>&nbsp;<span class="ident" id="5465009"><a href="/image/image.go.html#5464892">c</a></span><span class="op" id="5465010">.</span><span class="ident" id="5465011">G</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465014"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5465015">.</span><span class="ident" id="5465016">Pix</span><span class="op" id="5465019">[</span><span class="ident" id="5465020"><a href="/image/image.go.html#5464954">i</a></span><span class="op" id="5465021">+</span><span class="num" id="5465022">2</span><span class="op" id="5465023">]</span>&nbsp;<span class="op" id="5465025">=</span>&nbsp;<span class="ident" id="5465027"><a href="/image/image.go.html#5464892">c</a></span><span class="op" id="5465028">.</span><span class="ident" id="5465029">B</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465032"><a href="/image/image.go.html#5464863">p</a></span><span class="op" id="5465033">.</span><span class="ident" id="5465034">Pix</span><span class="op" id="5465037">[</span><span class="ident" id="5465038"><a href="/image/image.go.html#5464954">i</a></span><span class="op" id="5465039">+</span><span class="num" id="5465040">3</span><span class="op" id="5465041">]</span>&nbsp;<span class="op" id="5465043">=</span>&nbsp;<span class="ident" id="5465045"><a href="/image/image.go.html#5464892">c</a></span><span class="op" id="5465046">.</span><span class="ident" id="5465047">A</span><br>
<span class="lineno"></span><span class="op" id="5465049">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="5465052">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5465129">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5465201">func</span>&nbsp;<span class="op" id="5465206">(</span><span class="ident" id="5465207">p</span>&nbsp;<span class="op" id="5465209">*</span><span class="ident" id="5465210"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5465215">)</span>&nbsp;<span class="ident" id="5465217">SubImage</span><span class="op" id="5465225">(</span><span class="ident" id="5465226">r</span>&nbsp;<span class="ident" id="5465228"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5465237">)</span>&nbsp;<span class="ident" id="5465239"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5465245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465248"><a href="/image/image.go.html#5465226">r</a></span>&nbsp;<span class="op" id="5465250">=</span>&nbsp;<span class="ident" id="5465252"><a href="/image/image.go.html#5465226">r</a></span><span class="op" id="5465253">.</span><span class="ident" id="5465254">Intersect</span><span class="op" id="5465263">(</span><span class="ident" id="5465264"><a href="/image/image.go.html#5465207">p</a></span><span class="op" id="5465265">.</span><span class="ident" id="5465266">Rect</span><span class="op" id="5465270">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5465273">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5465354">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5465436">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465486">if</span>&nbsp;<span class="ident" id="5465489"><a href="/image/image.go.html#5465226">r</a></span><span class="op" id="5465490">.</span><span class="ident" id="5465491">Empty</span><span class="op" id="5465496">(</span><span class="op" id="5465497">)</span>&nbsp;<span class="op" id="5465499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465503">return</span>&nbsp;<span class="op" id="5465510">&amp;</span><span class="ident" id="5465511"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5465516">{</span><span class="op" id="5465517">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465523">i</span>&nbsp;<span class="op" id="5465525">:=</span>&nbsp;<span class="ident" id="5465528"><a href="/image/image.go.html#5465207">p</a></span><span class="op" id="5465529">.</span><span class="ident" id="5465530">PixOffset</span><span class="op" id="5465539">(</span><span class="ident" id="5465540"><a href="/image/image.go.html#5465226">r</a></span><span class="op" id="5465541">.</span><span class="ident" id="5465542">Min</span><span class="op" id="5465545">.</span><span class="ident" id="5465546">X</span><span class="op" id="5465547">,</span>&nbsp;<span class="ident" id="5465549"><a href="/image/image.go.html#5465226">r</a></span><span class="op" id="5465550">.</span><span class="ident" id="5465551">Min</span><span class="op" id="5465554">.</span><span class="ident" id="5465555">Y</span><span class="op" id="5465556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465559">return</span>&nbsp;<span class="op" id="5465566">&amp;</span><span class="ident" id="5465567"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5465572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465576">Pix</span><span class="op" id="5465579">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465584"><a href="/image/image.go.html#5465207">p</a></span><span class="op" id="5465585">.</span><span class="ident" id="5465586">Pix</span><span class="op" id="5465589">[</span><span class="ident" id="5465590"><a href="/image/image.go.html#5465523">i</a></span><span class="op" id="5465591">:</span><span class="op" id="5465592">]</span><span class="op" id="5465593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465597">Stride</span><span class="op" id="5465603">:</span>&nbsp;<span class="ident" id="5465605"><a href="/image/image.go.html#5465207">p</a></span><span class="op" id="5465606">.</span><span class="ident" id="5465607">Stride</span><span class="op" id="5465613">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465617">Rect</span><span class="op" id="5465621">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5465625"><a href="/image/image.go.html#5465226">r</a></span><span class="op" id="5465626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465629">}</span><br>
<span class="lineno"></span><span class="op" id="5465631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5465634">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno">345</span><span class="keyword" id="5465707">func</span>&nbsp;<span class="op" id="5465712">(</span><span class="ident" id="5465713">p</span>&nbsp;<span class="op" id="5465715">*</span><span class="ident" id="5465716"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5465721">)</span>&nbsp;<span class="ident" id="5465723">Opaque</span><span class="op" id="5465729">(</span><span class="op" id="5465730">)</span>&nbsp;<span class="builtintype" id="5465732">bool</span>&nbsp;<span class="op" id="5465737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465740">if</span>&nbsp;<span class="ident" id="5465743"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465744">.</span><span class="ident" id="5465745">Rect</span><span class="op" id="5465749">.</span><span class="ident" id="5465750">Empty</span><span class="op" id="5465755">(</span><span class="op" id="5465756">)</span>&nbsp;<span class="op" id="5465758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465762">return</span>&nbsp;<span class="ident" id="5465769">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465778">i0</span><span class="op" id="5465780">,</span>&nbsp;<span class="ident" id="5465782">i1</span>&nbsp;<span class="op" id="5465785">:=</span>&nbsp;<span class="num" id="5465788">3</span><span class="op" id="5465789">,</span>&nbsp;<span class="ident" id="5465791"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465792">.</span><span class="ident" id="5465793">Rect</span><span class="op" id="5465797">.</span><span class="ident" id="5465798">Dx</span><span class="op" id="5465800">(</span><span class="op" id="5465801">)</span><span class="op" id="5465802">*</span><span class="num" id="5465803">4</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465806">for</span>&nbsp;<span class="ident" id="5465810">y</span>&nbsp;<span class="op" id="5465812">:=</span>&nbsp;<span class="ident" id="5465815"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465816">.</span><span class="ident" id="5465817">Rect</span><span class="op" id="5465821">.</span><span class="ident" id="5465822">Min</span><span class="op" id="5465825">.</span><span class="ident" id="5465826">Y</span><span class="op" id="5465827">;</span>&nbsp;<span class="ident" id="5465829"><a href="/image/image.go.html#5465810">y</a></span>&nbsp;<span class="op" id="5465831">&lt;</span>&nbsp;<span class="ident" id="5465833"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465834">.</span><span class="ident" id="5465835">Rect</span><span class="op" id="5465839">.</span><span class="ident" id="5465840">Max</span><span class="op" id="5465843">.</span><span class="ident" id="5465844">Y</span><span class="op" id="5465845">;</span>&nbsp;<span class="ident" id="5465847"><a href="/image/image.go.html#5465810">y</a></span><span class="op" id="5465848">++</span>&nbsp;<span class="op" id="5465851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465855">for</span>&nbsp;<span class="ident" id="5465859">i</span>&nbsp;<span class="op" id="5465861">:=</span>&nbsp;<span class="ident" id="5465864"><a href="/image/image.go.html#5465778">i0</a></span><span class="op" id="5465866">;</span>&nbsp;<span class="ident" id="5465868"><a href="/image/image.go.html#5465859">i</a></span>&nbsp;<span class="op" id="5465870">&lt;</span>&nbsp;<span class="ident" id="5465872"><a href="/image/image.go.html#5465782">i1</a></span><span class="op" id="5465874">;</span>&nbsp;<span class="ident" id="5465876"><a href="/image/image.go.html#5465859">i</a></span>&nbsp;<span class="op" id="5465878">+=</span>&nbsp;<span class="num" id="5465881">4</span>&nbsp;<span class="op" id="5465883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465888">if</span>&nbsp;<span class="ident" id="5465891"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465892">.</span><span class="ident" id="5465893">Pix</span><span class="op" id="5465896">[</span><span class="ident" id="5465897"><a href="/image/image.go.html#5465859">i</a></span><span class="op" id="5465898">]</span>&nbsp;<span class="op" id="5465900">!=</span>&nbsp;<span class="num" id="5465903">0xff</span>&nbsp;<span class="op" id="5465908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465914">return</span>&nbsp;<span class="ident" id="5465921">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465930">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465938"><a href="/image/image.go.html#5465778">i0</a></span>&nbsp;<span class="op" id="5465941">+=</span>&nbsp;<span class="ident" id="5465944"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465945">.</span><span class="ident" id="5465946">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5465955"><a href="/image/image.go.html#5465782">i1</a></span>&nbsp;<span class="op" id="5465958">+=</span>&nbsp;<span class="ident" id="5465961"><a href="/image/image.go.html#5465713">p</a></span><span class="op" id="5465962">.</span><span class="ident" id="5465963">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5465971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5465974">return</span>&nbsp;<span class="ident" id="5465981">true</span><br>
<span class="lineno">360</span><span class="op" id="5465986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5465989">//&nbsp;NewNRGBA&nbsp;returns&nbsp;a&nbsp;new&nbsp;NRGBA&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5466044">func</span>&nbsp;<span class="ident" id="5466049">NewNRGBA</span><span class="op" id="5466057">(</span><span class="ident" id="5466058">r</span>&nbsp;<span class="ident" id="5466060"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5466069">)</span>&nbsp;<span class="op" id="5466071">*</span><span class="ident" id="5466072"><a href="/image/image.go.html#5463713">NRGBA</a></span>&nbsp;<span class="op" id="5466078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466081">w</span><span class="op" id="5466082">,</span>&nbsp;<span class="ident" id="5466084">h</span>&nbsp;<span class="op" id="5466086">:=</span>&nbsp;<span class="ident" id="5466089"><a href="/image/image.go.html#5466058">r</a></span><span class="op" id="5466090">.</span><span class="ident" id="5466091">Dx</span><span class="op" id="5466093">(</span><span class="op" id="5466094">)</span><span class="op" id="5466095">,</span>&nbsp;<span class="ident" id="5466097"><a href="/image/image.go.html#5466058">r</a></span><span class="op" id="5466098">.</span><span class="ident" id="5466099">Dy</span><span class="op" id="5466101">(</span><span class="op" id="5466102">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466105">pix</span>&nbsp;<span class="op" id="5466109">:=</span>&nbsp;<span class="builtinfunc" id="5466112">make</span><span class="op" id="5466116">(</span><span class="op" id="5466117">[</span><span class="op" id="5466118">]</span><span class="builtintype" id="5466119">uint8</span><span class="op" id="5466124">,</span>&nbsp;<span class="num" id="5466126">4</span><span class="op" id="5466127">*</span><span class="ident" id="5466128"><a href="/image/image.go.html#5466081">w</a></span><span class="op" id="5466129">*</span><span class="ident" id="5466130"><a href="/image/image.go.html#5466084">h</a></span><span class="op" id="5466131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466134">return</span>&nbsp;<span class="op" id="5466141">&amp;</span><span class="ident" id="5466142"><a href="/image/image.go.html#5463713">NRGBA</a></span><span class="op" id="5466147">{</span><span class="ident" id="5466148"><a href="/image/image.go.html#5466105">pix</a></span><span class="op" id="5466151">,</span>&nbsp;<span class="num" id="5466153">4</span>&nbsp;<span class="op" id="5466155">*</span>&nbsp;<span class="ident" id="5466157"><a href="/image/image.go.html#5466081">w</a></span><span class="op" id="5466158">,</span>&nbsp;<span class="ident" id="5466160"><a href="/image/image.go.html#5466058">r</a></span><span class="op" id="5466161">}</span><br>
<span class="lineno"></span><span class="op" id="5466163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5466166">//&nbsp;NRGBA64&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.NRGBA64&nbsp;values.</span><br>
<span class="lineno">370</span><span class="keyword" id="5466245">type</span>&nbsp;<span class="ident" id="5466250">NRGBA64</span>&nbsp;<span class="keyword" id="5466258">struct</span>&nbsp;<span class="op" id="5466265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466268">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;in&nbsp;R,&nbsp;G,&nbsp;B,&nbsp;A&nbsp;order&nbsp;and&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466358">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*8].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466426">Pix</span>&nbsp;<span class="op" id="5466430">[</span><span class="op" id="5466431">]</span><span class="builtintype" id="5466432">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466439">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466515">Stride</span>&nbsp;<span class="builtintype" id="5466522">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5466527">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466559">Rect</span>&nbsp;<span class="ident" id="5466564"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5466574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="5466577">func</span>&nbsp;<span class="op" id="5466582">(</span><span class="ident" id="5466583">p</span>&nbsp;<span class="op" id="5466585">*</span><span class="ident" id="5466586"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5466593">)</span>&nbsp;<span class="ident" id="5466595">ColorModel</span><span class="op" id="5466605">(</span><span class="op" id="5466606">)</span>&nbsp;<span class="ident" id="5466608"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466613">.</span><span class="ident" id="5466614">Model</span>&nbsp;<span class="op" id="5466620">{</span>&nbsp;<span class="keyword" id="5466622">return</span>&nbsp;<span class="ident" id="5466629"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466634">.</span><span class="ident" id="5466635">NRGBA64Model</span>&nbsp;<span class="op" id="5466648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5466651">func</span>&nbsp;<span class="op" id="5466656">(</span><span class="ident" id="5466657">p</span>&nbsp;<span class="op" id="5466659">*</span><span class="ident" id="5466660"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5466667">)</span>&nbsp;<span class="ident" id="5466669">Bounds</span><span class="op" id="5466675">(</span><span class="op" id="5466676">)</span>&nbsp;<span class="ident" id="5466678"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5466688">{</span>&nbsp;<span class="keyword" id="5466690">return</span>&nbsp;<span class="ident" id="5466697"><a href="/image/image.go.html#5466657">p</a></span><span class="op" id="5466698">.</span><span class="ident" id="5466699">Rect</span>&nbsp;<span class="op" id="5466704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5466707">func</span>&nbsp;<span class="op" id="5466712">(</span><span class="ident" id="5466713">p</span>&nbsp;<span class="op" id="5466715">*</span><span class="ident" id="5466716"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5466723">)</span>&nbsp;<span class="ident" id="5466725">At</span><span class="op" id="5466727">(</span><span class="ident" id="5466728">x</span><span class="op" id="5466729">,</span>&nbsp;<span class="ident" id="5466731">y</span>&nbsp;<span class="builtintype" id="5466733">int</span><span class="op" id="5466736">)</span>&nbsp;<span class="ident" id="5466738"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466743">.</span><span class="ident" id="5466744">Color</span>&nbsp;<span class="op" id="5466750">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466753">return</span>&nbsp;<span class="ident" id="5466760"><a href="/image/image.go.html#5466713">p</a></span><span class="op" id="5466761">.</span><span class="ident" id="5466762">NRGBA64At</span><span class="op" id="5466771">(</span><span class="ident" id="5466772"><a href="/image/image.go.html#5466728">x</a></span><span class="op" id="5466773">,</span>&nbsp;<span class="ident" id="5466775"><a href="/image/image.go.html#5466731">y</a></span><span class="op" id="5466776">)</span><br>
<span class="lineno"></span><span class="op" id="5466778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5466781">func</span>&nbsp;<span class="op" id="5466786">(</span><span class="ident" id="5466787">p</span>&nbsp;<span class="op" id="5466789">*</span><span class="ident" id="5466790"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5466797">)</span>&nbsp;<span class="ident" id="5466799">NRGBA64At</span><span class="op" id="5466808">(</span><span class="ident" id="5466809">x</span><span class="op" id="5466810">,</span>&nbsp;<span class="ident" id="5466812">y</span>&nbsp;<span class="builtintype" id="5466814">int</span><span class="op" id="5466817">)</span>&nbsp;<span class="ident" id="5466819"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466824">.</span><span class="ident" id="5466825">NRGBA64</span>&nbsp;<span class="op" id="5466833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466836">if</span>&nbsp;<span class="op" id="5466839">!</span><span class="op" id="5466840">(</span><span class="ident" id="5466841"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5466846">{</span><span class="ident" id="5466847"><a href="/image/image.go.html#5466809">x</a></span><span class="op" id="5466848">,</span>&nbsp;<span class="ident" id="5466850"><a href="/image/image.go.html#5466812">y</a></span><span class="op" id="5466851">}</span><span class="op" id="5466852">.</span><span class="ident" id="5466853">In</span><span class="op" id="5466855">(</span><span class="ident" id="5466856"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5466857">.</span><span class="ident" id="5466858">Rect</span><span class="op" id="5466862">)</span><span class="op" id="5466863">)</span>&nbsp;<span class="op" id="5466865">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466869">return</span>&nbsp;<span class="ident" id="5466876"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466881">.</span><span class="ident" id="5466882">NRGBA64</span><span class="op" id="5466889">{</span><span class="op" id="5466890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5466896">i</span>&nbsp;<span class="op" id="5466898">:=</span>&nbsp;<span class="ident" id="5466901"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5466902">.</span><span class="ident" id="5466903">PixOffset</span><span class="op" id="5466912">(</span><span class="ident" id="5466913"><a href="/image/image.go.html#5466809">x</a></span><span class="op" id="5466914">,</span>&nbsp;<span class="ident" id="5466916"><a href="/image/image.go.html#5466812">y</a></span><span class="op" id="5466917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5466920">return</span>&nbsp;<span class="ident" id="5466927"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5466932">.</span><span class="ident" id="5466933">NRGBA64</span><span class="op" id="5466940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5466944">uint16</span><span class="op" id="5466950">(</span><span class="ident" id="5466951"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5466952">.</span><span class="ident" id="5466953">Pix</span><span class="op" id="5466956">[</span><span class="ident" id="5466957"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5466958">+</span><span class="num" id="5466959">0</span><span class="op" id="5466960">]</span><span class="op" id="5466961">)</span><span class="op" id="5466962">&lt;&lt;</span><span class="num" id="5466964">8</span>&nbsp;<span class="op" id="5466966">|</span>&nbsp;<span class="builtintype" id="5466968">uint16</span><span class="op" id="5466974">(</span><span class="ident" id="5466975"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5466976">.</span><span class="ident" id="5466977">Pix</span><span class="op" id="5466980">[</span><span class="ident" id="5466981"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5466982">+</span><span class="num" id="5466983">1</span><span class="op" id="5466984">]</span><span class="op" id="5466985">)</span><span class="op" id="5466986">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5466990">uint16</span><span class="op" id="5466996">(</span><span class="ident" id="5466997"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5466998">.</span><span class="ident" id="5466999">Pix</span><span class="op" id="5467002">[</span><span class="ident" id="5467003"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467004">+</span><span class="num" id="5467005">2</span><span class="op" id="5467006">]</span><span class="op" id="5467007">)</span><span class="op" id="5467008">&lt;&lt;</span><span class="num" id="5467010">8</span>&nbsp;<span class="op" id="5467012">|</span>&nbsp;<span class="builtintype" id="5467014">uint16</span><span class="op" id="5467020">(</span><span class="ident" id="5467021"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5467022">.</span><span class="ident" id="5467023">Pix</span><span class="op" id="5467026">[</span><span class="ident" id="5467027"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467028">+</span><span class="num" id="5467029">3</span><span class="op" id="5467030">]</span><span class="op" id="5467031">)</span><span class="op" id="5467032">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5467036">uint16</span><span class="op" id="5467042">(</span><span class="ident" id="5467043"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5467044">.</span><span class="ident" id="5467045">Pix</span><span class="op" id="5467048">[</span><span class="ident" id="5467049"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467050">+</span><span class="num" id="5467051">4</span><span class="op" id="5467052">]</span><span class="op" id="5467053">)</span><span class="op" id="5467054">&lt;&lt;</span><span class="num" id="5467056">8</span>&nbsp;<span class="op" id="5467058">|</span>&nbsp;<span class="builtintype" id="5467060">uint16</span><span class="op" id="5467066">(</span><span class="ident" id="5467067"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5467068">.</span><span class="ident" id="5467069">Pix</span><span class="op" id="5467072">[</span><span class="ident" id="5467073"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467074">+</span><span class="num" id="5467075">5</span><span class="op" id="5467076">]</span><span class="op" id="5467077">)</span><span class="op" id="5467078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5467082">uint16</span><span class="op" id="5467088">(</span><span class="ident" id="5467089"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5467090">.</span><span class="ident" id="5467091">Pix</span><span class="op" id="5467094">[</span><span class="ident" id="5467095"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467096">+</span><span class="num" id="5467097">6</span><span class="op" id="5467098">]</span><span class="op" id="5467099">)</span><span class="op" id="5467100">&lt;&lt;</span><span class="num" id="5467102">8</span>&nbsp;<span class="op" id="5467104">|</span>&nbsp;<span class="builtintype" id="5467106">uint16</span><span class="op" id="5467112">(</span><span class="ident" id="5467113"><a href="/image/image.go.html#5466787">p</a></span><span class="op" id="5467114">.</span><span class="ident" id="5467115">Pix</span><span class="op" id="5467118">[</span><span class="ident" id="5467119"><a href="/image/image.go.html#5466896">i</a></span><span class="op" id="5467120">+</span><span class="num" id="5467121">7</span><span class="op" id="5467122">]</span><span class="op" id="5467123">)</span><span class="op" id="5467124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467127">}</span><br>
<span class="lineno"></span><span class="op" id="5467129">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="comment" id="5467132">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5467211">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5467235">func</span>&nbsp;<span class="op" id="5467240">(</span><span class="ident" id="5467241">p</span>&nbsp;<span class="op" id="5467243">*</span><span class="ident" id="5467244"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5467251">)</span>&nbsp;<span class="ident" id="5467253">PixOffset</span><span class="op" id="5467262">(</span><span class="ident" id="5467263">x</span><span class="op" id="5467264">,</span>&nbsp;<span class="ident" id="5467266">y</span>&nbsp;<span class="builtintype" id="5467268">int</span><span class="op" id="5467271">)</span>&nbsp;<span class="builtintype" id="5467273">int</span>&nbsp;<span class="op" id="5467277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467280">return</span>&nbsp;<span class="op" id="5467287">(</span><span class="ident" id="5467288"><a href="/image/image.go.html#5467266">y</a></span><span class="op" id="5467289">-</span><span class="ident" id="5467290"><a href="/image/image.go.html#5467241">p</a></span><span class="op" id="5467291">.</span><span class="ident" id="5467292">Rect</span><span class="op" id="5467296">.</span><span class="ident" id="5467297">Min</span><span class="op" id="5467300">.</span><span class="ident" id="5467301">Y</span><span class="op" id="5467302">)</span><span class="op" id="5467303">*</span><span class="ident" id="5467304"><a href="/image/image.go.html#5467241">p</a></span><span class="op" id="5467305">.</span><span class="ident" id="5467306">Stride</span>&nbsp;<span class="op" id="5467313">+</span>&nbsp;<span class="op" id="5467315">(</span><span class="ident" id="5467316"><a href="/image/image.go.html#5467263">x</a></span><span class="op" id="5467317">-</span><span class="ident" id="5467318"><a href="/image/image.go.html#5467241">p</a></span><span class="op" id="5467319">.</span><span class="ident" id="5467320">Rect</span><span class="op" id="5467324">.</span><span class="ident" id="5467325">Min</span><span class="op" id="5467328">.</span><span class="ident" id="5467329">X</span><span class="op" id="5467330">)</span><span class="op" id="5467331">*</span><span class="num" id="5467332">8</span><br>
<span class="lineno">405</span><span class="op" id="5467334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5467337">func</span>&nbsp;<span class="op" id="5467342">(</span><span class="ident" id="5467343">p</span>&nbsp;<span class="op" id="5467345">*</span><span class="ident" id="5467346"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5467353">)</span>&nbsp;<span class="ident" id="5467355">Set</span><span class="op" id="5467358">(</span><span class="ident" id="5467359">x</span><span class="op" id="5467360">,</span>&nbsp;<span class="ident" id="5467362">y</span>&nbsp;<span class="builtintype" id="5467364">int</span><span class="op" id="5467367">,</span>&nbsp;<span class="ident" id="5467369">c</span>&nbsp;<span class="ident" id="5467371"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5467376">.</span><span class="ident" id="5467377">Color</span><span class="op" id="5467382">)</span>&nbsp;<span class="op" id="5467384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467387">if</span>&nbsp;<span class="op" id="5467390">!</span><span class="op" id="5467391">(</span><span class="ident" id="5467392"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5467397">{</span><span class="ident" id="5467398"><a href="/image/image.go.html#5467359">x</a></span><span class="op" id="5467399">,</span>&nbsp;<span class="ident" id="5467401"><a href="/image/image.go.html#5467362">y</a></span><span class="op" id="5467402">}</span><span class="op" id="5467403">.</span><span class="ident" id="5467404">In</span><span class="op" id="5467406">(</span><span class="ident" id="5467407"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467408">.</span><span class="ident" id="5467409">Rect</span><span class="op" id="5467413">)</span><span class="op" id="5467414">)</span>&nbsp;<span class="op" id="5467416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467420">return</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467431">i</span>&nbsp;<span class="op" id="5467433">:=</span>&nbsp;<span class="ident" id="5467436"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467437">.</span><span class="ident" id="5467438">PixOffset</span><span class="op" id="5467447">(</span><span class="ident" id="5467448"><a href="/image/image.go.html#5467359">x</a></span><span class="op" id="5467449">,</span>&nbsp;<span class="ident" id="5467451"><a href="/image/image.go.html#5467362">y</a></span><span class="op" id="5467452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467455">c1</span>&nbsp;<span class="op" id="5467458">:=</span>&nbsp;<span class="ident" id="5467461"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5467466">.</span><span class="ident" id="5467467">NRGBA64Model</span><span class="op" id="5467479">.</span><span class="ident" id="5467480">Convert</span><span class="op" id="5467487">(</span><span class="ident" id="5467488"><a href="/image/image.go.html#5467369">c</a></span><span class="op" id="5467489">)</span><span class="op" id="5467490">.</span><span class="op" id="5467491">(</span><span class="ident" id="5467492"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5467497">.</span><span class="ident" id="5467498">NRGBA64</span><span class="op" id="5467505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467508"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467509">.</span><span class="ident" id="5467510">Pix</span><span class="op" id="5467513">[</span><span class="ident" id="5467514"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467515">+</span><span class="num" id="5467516">0</span><span class="op" id="5467517">]</span>&nbsp;<span class="op" id="5467519">=</span>&nbsp;<span class="builtintype" id="5467521">uint8</span><span class="op" id="5467526">(</span><span class="ident" id="5467527"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467529">.</span><span class="ident" id="5467530">R</span>&nbsp;<span class="op" id="5467532">&gt;&gt;</span>&nbsp;<span class="num" id="5467535">8</span><span class="op" id="5467536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467539"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467540">.</span><span class="ident" id="5467541">Pix</span><span class="op" id="5467544">[</span><span class="ident" id="5467545"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467546">+</span><span class="num" id="5467547">1</span><span class="op" id="5467548">]</span>&nbsp;<span class="op" id="5467550">=</span>&nbsp;<span class="builtintype" id="5467552">uint8</span><span class="op" id="5467557">(</span><span class="ident" id="5467558"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467560">.</span><span class="ident" id="5467561">R</span><span class="op" id="5467562">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467565"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467566">.</span><span class="ident" id="5467567">Pix</span><span class="op" id="5467570">[</span><span class="ident" id="5467571"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467572">+</span><span class="num" id="5467573">2</span><span class="op" id="5467574">]</span>&nbsp;<span class="op" id="5467576">=</span>&nbsp;<span class="builtintype" id="5467578">uint8</span><span class="op" id="5467583">(</span><span class="ident" id="5467584"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467586">.</span><span class="ident" id="5467587">G</span>&nbsp;<span class="op" id="5467589">&gt;&gt;</span>&nbsp;<span class="num" id="5467592">8</span><span class="op" id="5467593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467596"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467597">.</span><span class="ident" id="5467598">Pix</span><span class="op" id="5467601">[</span><span class="ident" id="5467602"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467603">+</span><span class="num" id="5467604">3</span><span class="op" id="5467605">]</span>&nbsp;<span class="op" id="5467607">=</span>&nbsp;<span class="builtintype" id="5467609">uint8</span><span class="op" id="5467614">(</span><span class="ident" id="5467615"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467617">.</span><span class="ident" id="5467618">G</span><span class="op" id="5467619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467622"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467623">.</span><span class="ident" id="5467624">Pix</span><span class="op" id="5467627">[</span><span class="ident" id="5467628"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467629">+</span><span class="num" id="5467630">4</span><span class="op" id="5467631">]</span>&nbsp;<span class="op" id="5467633">=</span>&nbsp;<span class="builtintype" id="5467635">uint8</span><span class="op" id="5467640">(</span><span class="ident" id="5467641"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467643">.</span><span class="ident" id="5467644">B</span>&nbsp;<span class="op" id="5467646">&gt;&gt;</span>&nbsp;<span class="num" id="5467649">8</span><span class="op" id="5467650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467653"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467654">.</span><span class="ident" id="5467655">Pix</span><span class="op" id="5467658">[</span><span class="ident" id="5467659"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467660">+</span><span class="num" id="5467661">5</span><span class="op" id="5467662">]</span>&nbsp;<span class="op" id="5467664">=</span>&nbsp;<span class="builtintype" id="5467666">uint8</span><span class="op" id="5467671">(</span><span class="ident" id="5467672"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467674">.</span><span class="ident" id="5467675">B</span><span class="op" id="5467676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467679"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467680">.</span><span class="ident" id="5467681">Pix</span><span class="op" id="5467684">[</span><span class="ident" id="5467685"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467686">+</span><span class="num" id="5467687">6</span><span class="op" id="5467688">]</span>&nbsp;<span class="op" id="5467690">=</span>&nbsp;<span class="builtintype" id="5467692">uint8</span><span class="op" id="5467697">(</span><span class="ident" id="5467698"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467700">.</span><span class="ident" id="5467701">A</span>&nbsp;<span class="op" id="5467703">&gt;&gt;</span>&nbsp;<span class="num" id="5467706">8</span><span class="op" id="5467707">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467710"><a href="/image/image.go.html#5467343">p</a></span><span class="op" id="5467711">.</span><span class="ident" id="5467712">Pix</span><span class="op" id="5467715">[</span><span class="ident" id="5467716"><a href="/image/image.go.html#5467431">i</a></span><span class="op" id="5467717">+</span><span class="num" id="5467718">7</span><span class="op" id="5467719">]</span>&nbsp;<span class="op" id="5467721">=</span>&nbsp;<span class="builtintype" id="5467723">uint8</span><span class="op" id="5467728">(</span><span class="ident" id="5467729"><a href="/image/image.go.html#5467455">c1</a></span><span class="op" id="5467731">.</span><span class="ident" id="5467732">A</span><span class="op" id="5467733">)</span><br>
<span class="lineno"></span><span class="op" id="5467735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5467738">func</span>&nbsp;<span class="op" id="5467743">(</span><span class="ident" id="5467744">p</span>&nbsp;<span class="op" id="5467746">*</span><span class="ident" id="5467747"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5467754">)</span>&nbsp;<span class="ident" id="5467756">SetNRGBA64</span><span class="op" id="5467766">(</span><span class="ident" id="5467767">x</span><span class="op" id="5467768">,</span>&nbsp;<span class="ident" id="5467770">y</span>&nbsp;<span class="builtintype" id="5467772">int</span><span class="op" id="5467775">,</span>&nbsp;<span class="ident" id="5467777">c</span>&nbsp;<span class="ident" id="5467779"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5467784">.</span><span class="ident" id="5467785">NRGBA64</span><span class="op" id="5467792">)</span>&nbsp;<span class="op" id="5467794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467797">if</span>&nbsp;<span class="op" id="5467800">!</span><span class="op" id="5467801">(</span><span class="ident" id="5467802"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5467807">{</span><span class="ident" id="5467808"><a href="/image/image.go.html#5467767">x</a></span><span class="op" id="5467809">,</span>&nbsp;<span class="ident" id="5467811"><a href="/image/image.go.html#5467770">y</a></span><span class="op" id="5467812">}</span><span class="op" id="5467813">.</span><span class="ident" id="5467814">In</span><span class="op" id="5467816">(</span><span class="ident" id="5467817"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467818">.</span><span class="ident" id="5467819">Rect</span><span class="op" id="5467823">)</span><span class="op" id="5467824">)</span>&nbsp;<span class="op" id="5467826">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5467830">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5467838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467841">i</span>&nbsp;<span class="op" id="5467843">:=</span>&nbsp;<span class="ident" id="5467846"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467847">.</span><span class="ident" id="5467848">PixOffset</span><span class="op" id="5467857">(</span><span class="ident" id="5467858"><a href="/image/image.go.html#5467767">x</a></span><span class="op" id="5467859">,</span>&nbsp;<span class="ident" id="5467861"><a href="/image/image.go.html#5467770">y</a></span><span class="op" id="5467862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467865"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467866">.</span><span class="ident" id="5467867">Pix</span><span class="op" id="5467870">[</span><span class="ident" id="5467871"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5467872">+</span><span class="num" id="5467873">0</span><span class="op" id="5467874">]</span>&nbsp;<span class="op" id="5467876">=</span>&nbsp;<span class="builtintype" id="5467878">uint8</span><span class="op" id="5467883">(</span><span class="ident" id="5467884"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5467885">.</span><span class="ident" id="5467886">R</span>&nbsp;<span class="op" id="5467888">&gt;&gt;</span>&nbsp;<span class="num" id="5467891">8</span><span class="op" id="5467892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467895"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467896">.</span><span class="ident" id="5467897">Pix</span><span class="op" id="5467900">[</span><span class="ident" id="5467901"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5467902">+</span><span class="num" id="5467903">1</span><span class="op" id="5467904">]</span>&nbsp;<span class="op" id="5467906">=</span>&nbsp;<span class="builtintype" id="5467908">uint8</span><span class="op" id="5467913">(</span><span class="ident" id="5467914"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5467915">.</span><span class="ident" id="5467916">R</span><span class="op" id="5467917">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467920"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467921">.</span><span class="ident" id="5467922">Pix</span><span class="op" id="5467925">[</span><span class="ident" id="5467926"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5467927">+</span><span class="num" id="5467928">2</span><span class="op" id="5467929">]</span>&nbsp;<span class="op" id="5467931">=</span>&nbsp;<span class="builtintype" id="5467933">uint8</span><span class="op" id="5467938">(</span><span class="ident" id="5467939"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5467940">.</span><span class="ident" id="5467941">G</span>&nbsp;<span class="op" id="5467943">&gt;&gt;</span>&nbsp;<span class="num" id="5467946">8</span><span class="op" id="5467947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467950"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467951">.</span><span class="ident" id="5467952">Pix</span><span class="op" id="5467955">[</span><span class="ident" id="5467956"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5467957">+</span><span class="num" id="5467958">3</span><span class="op" id="5467959">]</span>&nbsp;<span class="op" id="5467961">=</span>&nbsp;<span class="builtintype" id="5467963">uint8</span><span class="op" id="5467968">(</span><span class="ident" id="5467969"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5467970">.</span><span class="ident" id="5467971">G</span><span class="op" id="5467972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5467975"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5467976">.</span><span class="ident" id="5467977">Pix</span><span class="op" id="5467980">[</span><span class="ident" id="5467981"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5467982">+</span><span class="num" id="5467983">4</span><span class="op" id="5467984">]</span>&nbsp;<span class="op" id="5467986">=</span>&nbsp;<span class="builtintype" id="5467988">uint8</span><span class="op" id="5467993">(</span><span class="ident" id="5467994"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5467995">.</span><span class="ident" id="5467996">B</span>&nbsp;<span class="op" id="5467998">&gt;&gt;</span>&nbsp;<span class="num" id="5468001">8</span><span class="op" id="5468002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468005"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5468006">.</span><span class="ident" id="5468007">Pix</span><span class="op" id="5468010">[</span><span class="ident" id="5468011"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5468012">+</span><span class="num" id="5468013">5</span><span class="op" id="5468014">]</span>&nbsp;<span class="op" id="5468016">=</span>&nbsp;<span class="builtintype" id="5468018">uint8</span><span class="op" id="5468023">(</span><span class="ident" id="5468024"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5468025">.</span><span class="ident" id="5468026">B</span><span class="op" id="5468027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468030"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5468031">.</span><span class="ident" id="5468032">Pix</span><span class="op" id="5468035">[</span><span class="ident" id="5468036"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5468037">+</span><span class="num" id="5468038">6</span><span class="op" id="5468039">]</span>&nbsp;<span class="op" id="5468041">=</span>&nbsp;<span class="builtintype" id="5468043">uint8</span><span class="op" id="5468048">(</span><span class="ident" id="5468049"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5468050">.</span><span class="ident" id="5468051">A</span>&nbsp;<span class="op" id="5468053">&gt;&gt;</span>&nbsp;<span class="num" id="5468056">8</span><span class="op" id="5468057">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468060"><a href="/image/image.go.html#5467744">p</a></span><span class="op" id="5468061">.</span><span class="ident" id="5468062">Pix</span><span class="op" id="5468065">[</span><span class="ident" id="5468066"><a href="/image/image.go.html#5467841">i</a></span><span class="op" id="5468067">+</span><span class="num" id="5468068">7</span><span class="op" id="5468069">]</span>&nbsp;<span class="op" id="5468071">=</span>&nbsp;<span class="builtintype" id="5468073">uint8</span><span class="op" id="5468078">(</span><span class="ident" id="5468079"><a href="/image/image.go.html#5467777">c</a></span><span class="op" id="5468080">.</span><span class="ident" id="5468081">A</span><span class="op" id="5468082">)</span><br>
<span class="lineno"></span><span class="op" id="5468084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5468087">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5468164">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno">440</span><span class="keyword" id="5468236">func</span>&nbsp;<span class="op" id="5468241">(</span><span class="ident" id="5468242">p</span>&nbsp;<span class="op" id="5468244">*</span><span class="ident" id="5468245"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5468252">)</span>&nbsp;<span class="ident" id="5468254">SubImage</span><span class="op" id="5468262">(</span><span class="ident" id="5468263">r</span>&nbsp;<span class="ident" id="5468265"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5468274">)</span>&nbsp;<span class="ident" id="5468276"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5468282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468285"><a href="/image/image.go.html#5468263">r</a></span>&nbsp;<span class="op" id="5468287">=</span>&nbsp;<span class="ident" id="5468289"><a href="/image/image.go.html#5468263">r</a></span><span class="op" id="5468290">.</span><span class="ident" id="5468291">Intersect</span><span class="op" id="5468300">(</span><span class="ident" id="5468301"><a href="/image/image.go.html#5468242">p</a></span><span class="op" id="5468302">.</span><span class="ident" id="5468303">Rect</span><span class="op" id="5468307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5468310">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5468391">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5468473">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468523">if</span>&nbsp;<span class="ident" id="5468526"><a href="/image/image.go.html#5468263">r</a></span><span class="op" id="5468527">.</span><span class="ident" id="5468528">Empty</span><span class="op" id="5468533">(</span><span class="op" id="5468534">)</span>&nbsp;<span class="op" id="5468536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468540">return</span>&nbsp;<span class="op" id="5468547">&amp;</span><span class="ident" id="5468548"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5468555">{</span><span class="op" id="5468556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5468559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468562">i</span>&nbsp;<span class="op" id="5468564">:=</span>&nbsp;<span class="ident" id="5468567"><a href="/image/image.go.html#5468242">p</a></span><span class="op" id="5468568">.</span><span class="ident" id="5468569">PixOffset</span><span class="op" id="5468578">(</span><span class="ident" id="5468579"><a href="/image/image.go.html#5468263">r</a></span><span class="op" id="5468580">.</span><span class="ident" id="5468581">Min</span><span class="op" id="5468584">.</span><span class="ident" id="5468585">X</span><span class="op" id="5468586">,</span>&nbsp;<span class="ident" id="5468588"><a href="/image/image.go.html#5468263">r</a></span><span class="op" id="5468589">.</span><span class="ident" id="5468590">Min</span><span class="op" id="5468593">.</span><span class="ident" id="5468594">Y</span><span class="op" id="5468595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468598">return</span>&nbsp;<span class="op" id="5468605">&amp;</span><span class="ident" id="5468606"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5468613">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468617">Pix</span><span class="op" id="5468620">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5468625"><a href="/image/image.go.html#5468242">p</a></span><span class="op" id="5468626">.</span><span class="ident" id="5468627">Pix</span><span class="op" id="5468630">[</span><span class="ident" id="5468631"><a href="/image/image.go.html#5468562">i</a></span><span class="op" id="5468632">:</span><span class="op" id="5468633">]</span><span class="op" id="5468634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468638">Stride</span><span class="op" id="5468644">:</span>&nbsp;<span class="ident" id="5468646"><a href="/image/image.go.html#5468242">p</a></span><span class="op" id="5468647">.</span><span class="ident" id="5468648">Stride</span><span class="op" id="5468654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468658">Rect</span><span class="op" id="5468662">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5468666"><a href="/image/image.go.html#5468263">r</a></span><span class="op" id="5468667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5468670">}</span><br>
<span class="lineno"></span><span class="op" id="5468672">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span><span class="comment" id="5468675">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5468748">func</span>&nbsp;<span class="op" id="5468753">(</span><span class="ident" id="5468754">p</span>&nbsp;<span class="op" id="5468756">*</span><span class="ident" id="5468757"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5468764">)</span>&nbsp;<span class="ident" id="5468766">Opaque</span><span class="op" id="5468772">(</span><span class="op" id="5468773">)</span>&nbsp;<span class="builtintype" id="5468775">bool</span>&nbsp;<span class="op" id="5468780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468783">if</span>&nbsp;<span class="ident" id="5468786"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468787">.</span><span class="ident" id="5468788">Rect</span><span class="op" id="5468792">.</span><span class="ident" id="5468793">Empty</span><span class="op" id="5468798">(</span><span class="op" id="5468799">)</span>&nbsp;<span class="op" id="5468801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468805">return</span>&nbsp;<span class="ident" id="5468812">true</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5468818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5468821">i0</span><span class="op" id="5468823">,</span>&nbsp;<span class="ident" id="5468825">i1</span>&nbsp;<span class="op" id="5468828">:=</span>&nbsp;<span class="num" id="5468831">6</span><span class="op" id="5468832">,</span>&nbsp;<span class="ident" id="5468834"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468835">.</span><span class="ident" id="5468836">Rect</span><span class="op" id="5468840">.</span><span class="ident" id="5468841">Dx</span><span class="op" id="5468843">(</span><span class="op" id="5468844">)</span><span class="op" id="5468845">*</span><span class="num" id="5468846">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468849">for</span>&nbsp;<span class="ident" id="5468853">y</span>&nbsp;<span class="op" id="5468855">:=</span>&nbsp;<span class="ident" id="5468858"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468859">.</span><span class="ident" id="5468860">Rect</span><span class="op" id="5468864">.</span><span class="ident" id="5468865">Min</span><span class="op" id="5468868">.</span><span class="ident" id="5468869">Y</span><span class="op" id="5468870">;</span>&nbsp;<span class="ident" id="5468872"><a href="/image/image.go.html#5468853">y</a></span>&nbsp;<span class="op" id="5468874">&lt;</span>&nbsp;<span class="ident" id="5468876"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468877">.</span><span class="ident" id="5468878">Rect</span><span class="op" id="5468882">.</span><span class="ident" id="5468883">Max</span><span class="op" id="5468886">.</span><span class="ident" id="5468887">Y</span><span class="op" id="5468888">;</span>&nbsp;<span class="ident" id="5468890"><a href="/image/image.go.html#5468853">y</a></span><span class="op" id="5468891">++</span>&nbsp;<span class="op" id="5468894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468898">for</span>&nbsp;<span class="ident" id="5468902">i</span>&nbsp;<span class="op" id="5468904">:=</span>&nbsp;<span class="ident" id="5468907"><a href="/image/image.go.html#5468821">i0</a></span><span class="op" id="5468909">;</span>&nbsp;<span class="ident" id="5468911"><a href="/image/image.go.html#5468902">i</a></span>&nbsp;<span class="op" id="5468913">&lt;</span>&nbsp;<span class="ident" id="5468915"><a href="/image/image.go.html#5468825">i1</a></span><span class="op" id="5468917">;</span>&nbsp;<span class="ident" id="5468919"><a href="/image/image.go.html#5468902">i</a></span>&nbsp;<span class="op" id="5468921">+=</span>&nbsp;<span class="num" id="5468924">8</span>&nbsp;<span class="op" id="5468926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468931">if</span>&nbsp;<span class="ident" id="5468934"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468935">.</span><span class="ident" id="5468936">Pix</span><span class="op" id="5468939">[</span><span class="ident" id="5468940"><a href="/image/image.go.html#5468902">i</a></span><span class="op" id="5468941">+</span><span class="num" id="5468942">0</span><span class="op" id="5468943">]</span>&nbsp;<span class="op" id="5468945">!=</span>&nbsp;<span class="num" id="5468948">0xff</span>&nbsp;<span class="op" id="5468953">||</span>&nbsp;<span class="ident" id="5468956"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5468957">.</span><span class="ident" id="5468958">Pix</span><span class="op" id="5468961">[</span><span class="ident" id="5468962"><a href="/image/image.go.html#5468902">i</a></span><span class="op" id="5468963">+</span><span class="num" id="5468964">1</span><span class="op" id="5468965">]</span>&nbsp;<span class="op" id="5468967">!=</span>&nbsp;<span class="num" id="5468970">0xff</span>&nbsp;<span class="op" id="5468975">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5468981">return</span>&nbsp;<span class="ident" id="5468988">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5468997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5469001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469005"><a href="/image/image.go.html#5468821">i0</a></span>&nbsp;<span class="op" id="5469008">+=</span>&nbsp;<span class="ident" id="5469011"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5469012">.</span><span class="ident" id="5469013">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469022"><a href="/image/image.go.html#5468825">i1</a></span>&nbsp;<span class="op" id="5469025">+=</span>&nbsp;<span class="ident" id="5469028"><a href="/image/image.go.html#5468754">p</a></span><span class="op" id="5469029">.</span><span class="ident" id="5469030">Stride</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5469038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469041">return</span>&nbsp;<span class="ident" id="5469048">true</span><br>
<span class="lineno"></span><span class="op" id="5469053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5469056">//&nbsp;NewNRGBA64&nbsp;returns&nbsp;a&nbsp;new&nbsp;NRGBA64&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno">475</span><span class="keyword" id="5469115">func</span>&nbsp;<span class="ident" id="5469120">NewNRGBA64</span><span class="op" id="5469130">(</span><span class="ident" id="5469131">r</span>&nbsp;<span class="ident" id="5469133"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5469142">)</span>&nbsp;<span class="op" id="5469144">*</span><span class="ident" id="5469145"><a href="/image/image.go.html#5466250">NRGBA64</a></span>&nbsp;<span class="op" id="5469153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469156">w</span><span class="op" id="5469157">,</span>&nbsp;<span class="ident" id="5469159">h</span>&nbsp;<span class="op" id="5469161">:=</span>&nbsp;<span class="ident" id="5469164"><a href="/image/image.go.html#5469131">r</a></span><span class="op" id="5469165">.</span><span class="ident" id="5469166">Dx</span><span class="op" id="5469168">(</span><span class="op" id="5469169">)</span><span class="op" id="5469170">,</span>&nbsp;<span class="ident" id="5469172"><a href="/image/image.go.html#5469131">r</a></span><span class="op" id="5469173">.</span><span class="ident" id="5469174">Dy</span><span class="op" id="5469176">(</span><span class="op" id="5469177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469180">pix</span>&nbsp;<span class="op" id="5469184">:=</span>&nbsp;<span class="builtinfunc" id="5469187">make</span><span class="op" id="5469191">(</span><span class="op" id="5469192">[</span><span class="op" id="5469193">]</span><span class="builtintype" id="5469194">uint8</span><span class="op" id="5469199">,</span>&nbsp;<span class="num" id="5469201">8</span><span class="op" id="5469202">*</span><span class="ident" id="5469203"><a href="/image/image.go.html#5469156">w</a></span><span class="op" id="5469204">*</span><span class="ident" id="5469205"><a href="/image/image.go.html#5469159">h</a></span><span class="op" id="5469206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469209">return</span>&nbsp;<span class="op" id="5469216">&amp;</span><span class="ident" id="5469217"><a href="/image/image.go.html#5466250">NRGBA64</a></span><span class="op" id="5469224">{</span><span class="ident" id="5469225"><a href="/image/image.go.html#5469180">pix</a></span><span class="op" id="5469228">,</span>&nbsp;<span class="num" id="5469230">8</span>&nbsp;<span class="op" id="5469232">*</span>&nbsp;<span class="ident" id="5469234"><a href="/image/image.go.html#5469156">w</a></span><span class="op" id="5469235">,</span>&nbsp;<span class="ident" id="5469237"><a href="/image/image.go.html#5469131">r</a></span><span class="op" id="5469238">}</span><br>
<span class="lineno"></span><span class="op" id="5469240">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span><span class="comment" id="5469243">//&nbsp;Alpha&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Alpha&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5469318">type</span>&nbsp;<span class="ident" id="5469323">Alpha</span>&nbsp;<span class="keyword" id="5469329">struct</span>&nbsp;<span class="op" id="5469336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5469339">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;alpha&nbsp;values.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5469403">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469471">Pix</span>&nbsp;<span class="op" id="5469475">[</span><span class="op" id="5469476">]</span><span class="builtintype" id="5469477">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5469484">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469560">Stride</span>&nbsp;<span class="builtintype" id="5469567">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5469572">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469604">Rect</span>&nbsp;<span class="ident" id="5469609"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno">490</span><span class="op" id="5469619">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5469622">func</span>&nbsp;<span class="op" id="5469627">(</span><span class="ident" id="5469628">p</span>&nbsp;<span class="op" id="5469630">*</span><span class="ident" id="5469631"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5469636">)</span>&nbsp;<span class="ident" id="5469638">ColorModel</span><span class="op" id="5469648">(</span><span class="op" id="5469649">)</span>&nbsp;<span class="ident" id="5469651"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469656">.</span><span class="ident" id="5469657">Model</span>&nbsp;<span class="op" id="5469663">{</span>&nbsp;<span class="keyword" id="5469665">return</span>&nbsp;<span class="ident" id="5469672"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469677">.</span><span class="ident" id="5469678">AlphaModel</span>&nbsp;<span class="op" id="5469689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5469692">func</span>&nbsp;<span class="op" id="5469697">(</span><span class="ident" id="5469698">p</span>&nbsp;<span class="op" id="5469700">*</span><span class="ident" id="5469701"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5469706">)</span>&nbsp;<span class="ident" id="5469708">Bounds</span><span class="op" id="5469714">(</span><span class="op" id="5469715">)</span>&nbsp;<span class="ident" id="5469717"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5469727">{</span>&nbsp;<span class="keyword" id="5469729">return</span>&nbsp;<span class="ident" id="5469736"><a href="/image/image.go.html#5469698">p</a></span><span class="op" id="5469737">.</span><span class="ident" id="5469738">Rect</span>&nbsp;<span class="op" id="5469743">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="5469746">func</span>&nbsp;<span class="op" id="5469751">(</span><span class="ident" id="5469752">p</span>&nbsp;<span class="op" id="5469754">*</span><span class="ident" id="5469755"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5469760">)</span>&nbsp;<span class="ident" id="5469762">At</span><span class="op" id="5469764">(</span><span class="ident" id="5469765">x</span><span class="op" id="5469766">,</span>&nbsp;<span class="ident" id="5469768">y</span>&nbsp;<span class="builtintype" id="5469770">int</span><span class="op" id="5469773">)</span>&nbsp;<span class="ident" id="5469775"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469780">.</span><span class="ident" id="5469781">Color</span>&nbsp;<span class="op" id="5469787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469790">return</span>&nbsp;<span class="ident" id="5469797"><a href="/image/image.go.html#5469752">p</a></span><span class="op" id="5469798">.</span><span class="ident" id="5469799">AlphaAt</span><span class="op" id="5469806">(</span><span class="ident" id="5469807"><a href="/image/image.go.html#5469765">x</a></span><span class="op" id="5469808">,</span>&nbsp;<span class="ident" id="5469810"><a href="/image/image.go.html#5469768">y</a></span><span class="op" id="5469811">)</span><br>
<span class="lineno"></span><span class="op" id="5469813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="5469816">func</span>&nbsp;<span class="op" id="5469821">(</span><span class="ident" id="5469822">p</span>&nbsp;<span class="op" id="5469824">*</span><span class="ident" id="5469825"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5469830">)</span>&nbsp;<span class="ident" id="5469832">AlphaAt</span><span class="op" id="5469839">(</span><span class="ident" id="5469840">x</span><span class="op" id="5469841">,</span>&nbsp;<span class="ident" id="5469843">y</span>&nbsp;<span class="builtintype" id="5469845">int</span><span class="op" id="5469848">)</span>&nbsp;<span class="ident" id="5469850"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469855">.</span><span class="ident" id="5469856">Alpha</span>&nbsp;<span class="op" id="5469862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469865">if</span>&nbsp;<span class="op" id="5469868">!</span><span class="op" id="5469869">(</span><span class="ident" id="5469870"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5469875">{</span><span class="ident" id="5469876"><a href="/image/image.go.html#5469840">x</a></span><span class="op" id="5469877">,</span>&nbsp;<span class="ident" id="5469879"><a href="/image/image.go.html#5469843">y</a></span><span class="op" id="5469880">}</span><span class="op" id="5469881">.</span><span class="ident" id="5469882">In</span><span class="op" id="5469884">(</span><span class="ident" id="5469885"><a href="/image/image.go.html#5469822">p</a></span><span class="op" id="5469886">.</span><span class="ident" id="5469887">Rect</span><span class="op" id="5469891">)</span><span class="op" id="5469892">)</span>&nbsp;<span class="op" id="5469894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469898">return</span>&nbsp;<span class="ident" id="5469905"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469910">.</span><span class="ident" id="5469911">Alpha</span><span class="op" id="5469916">{</span><span class="op" id="5469917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5469920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5469923">i</span>&nbsp;<span class="op" id="5469925">:=</span>&nbsp;<span class="ident" id="5469928"><a href="/image/image.go.html#5469822">p</a></span><span class="op" id="5469929">.</span><span class="ident" id="5469930">PixOffset</span><span class="op" id="5469939">(</span><span class="ident" id="5469940"><a href="/image/image.go.html#5469840">x</a></span><span class="op" id="5469941">,</span>&nbsp;<span class="ident" id="5469943"><a href="/image/image.go.html#5469843">y</a></span><span class="op" id="5469944">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5469947">return</span>&nbsp;<span class="ident" id="5469954"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5469959">.</span><span class="ident" id="5469960">Alpha</span><span class="op" id="5469965">{</span><span class="ident" id="5469966"><a href="/image/image.go.html#5469822">p</a></span><span class="op" id="5469967">.</span><span class="ident" id="5469968">Pix</span><span class="op" id="5469971">[</span><span class="ident" id="5469972"><a href="/image/image.go.html#5469923">i</a></span><span class="op" id="5469973">]</span><span class="op" id="5469974">}</span><br>
<span class="lineno"></span><span class="op" id="5469976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5469979">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5470058">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno">510</span><span class="keyword" id="5470082">func</span>&nbsp;<span class="op" id="5470087">(</span><span class="ident" id="5470088">p</span>&nbsp;<span class="op" id="5470090">*</span><span class="ident" id="5470091"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5470096">)</span>&nbsp;<span class="ident" id="5470098">PixOffset</span><span class="op" id="5470107">(</span><span class="ident" id="5470108">x</span><span class="op" id="5470109">,</span>&nbsp;<span class="ident" id="5470111">y</span>&nbsp;<span class="builtintype" id="5470113">int</span><span class="op" id="5470116">)</span>&nbsp;<span class="builtintype" id="5470118">int</span>&nbsp;<span class="op" id="5470122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470125">return</span>&nbsp;<span class="op" id="5470132">(</span><span class="ident" id="5470133"><a href="/image/image.go.html#5470111">y</a></span><span class="op" id="5470134">-</span><span class="ident" id="5470135"><a href="/image/image.go.html#5470088">p</a></span><span class="op" id="5470136">.</span><span class="ident" id="5470137">Rect</span><span class="op" id="5470141">.</span><span class="ident" id="5470142">Min</span><span class="op" id="5470145">.</span><span class="ident" id="5470146">Y</span><span class="op" id="5470147">)</span><span class="op" id="5470148">*</span><span class="ident" id="5470149"><a href="/image/image.go.html#5470088">p</a></span><span class="op" id="5470150">.</span><span class="ident" id="5470151">Stride</span>&nbsp;<span class="op" id="5470158">+</span>&nbsp;<span class="op" id="5470160">(</span><span class="ident" id="5470161"><a href="/image/image.go.html#5470108">x</a></span><span class="op" id="5470162">-</span><span class="ident" id="5470163"><a href="/image/image.go.html#5470088">p</a></span><span class="op" id="5470164">.</span><span class="ident" id="5470165">Rect</span><span class="op" id="5470169">.</span><span class="ident" id="5470170">Min</span><span class="op" id="5470173">.</span><span class="ident" id="5470174">X</span><span class="op" id="5470175">)</span><span class="op" id="5470176">*</span><span class="num" id="5470177">1</span><br>
<span class="lineno"></span><span class="op" id="5470179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5470182">func</span>&nbsp;<span class="op" id="5470187">(</span><span class="ident" id="5470188">p</span>&nbsp;<span class="op" id="5470190">*</span><span class="ident" id="5470191"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5470196">)</span>&nbsp;<span class="ident" id="5470198">Set</span><span class="op" id="5470201">(</span><span class="ident" id="5470202">x</span><span class="op" id="5470203">,</span>&nbsp;<span class="ident" id="5470205">y</span>&nbsp;<span class="builtintype" id="5470207">int</span><span class="op" id="5470210">,</span>&nbsp;<span class="ident" id="5470212">c</span>&nbsp;<span class="ident" id="5470214"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5470219">.</span><span class="ident" id="5470220">Color</span><span class="op" id="5470225">)</span>&nbsp;<span class="op" id="5470227">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470230">if</span>&nbsp;<span class="op" id="5470233">!</span><span class="op" id="5470234">(</span><span class="ident" id="5470235"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5470240">{</span><span class="ident" id="5470241"><a href="/image/image.go.html#5470202">x</a></span><span class="op" id="5470242">,</span>&nbsp;<span class="ident" id="5470244"><a href="/image/image.go.html#5470205">y</a></span><span class="op" id="5470245">}</span><span class="op" id="5470246">.</span><span class="ident" id="5470247">In</span><span class="op" id="5470249">(</span><span class="ident" id="5470250"><a href="/image/image.go.html#5470188">p</a></span><span class="op" id="5470251">.</span><span class="ident" id="5470252">Rect</span><span class="op" id="5470256">)</span><span class="op" id="5470257">)</span>&nbsp;<span class="op" id="5470259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470263">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5470271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470274">i</span>&nbsp;<span class="op" id="5470276">:=</span>&nbsp;<span class="ident" id="5470279"><a href="/image/image.go.html#5470188">p</a></span><span class="op" id="5470280">.</span><span class="ident" id="5470281">PixOffset</span><span class="op" id="5470290">(</span><span class="ident" id="5470291"><a href="/image/image.go.html#5470202">x</a></span><span class="op" id="5470292">,</span>&nbsp;<span class="ident" id="5470294"><a href="/image/image.go.html#5470205">y</a></span><span class="op" id="5470295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470298"><a href="/image/image.go.html#5470188">p</a></span><span class="op" id="5470299">.</span><span class="ident" id="5470300">Pix</span><span class="op" id="5470303">[</span><span class="ident" id="5470304"><a href="/image/image.go.html#5470274">i</a></span><span class="op" id="5470305">]</span>&nbsp;<span class="op" id="5470307">=</span>&nbsp;<span class="ident" id="5470309"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5470314">.</span><span class="ident" id="5470315">AlphaModel</span><span class="op" id="5470325">.</span><span class="ident" id="5470326">Convert</span><span class="op" id="5470333">(</span><span class="ident" id="5470334"><a href="/image/image.go.html#5470212">c</a></span><span class="op" id="5470335">)</span><span class="op" id="5470336">.</span><span class="op" id="5470337">(</span><span class="ident" id="5470338"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5470343">.</span><span class="ident" id="5470344">Alpha</span><span class="op" id="5470349">)</span><span class="op" id="5470350">.</span><span class="ident" id="5470351">A</span><br>
<span class="lineno">520</span><span class="op" id="5470353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5470356">func</span>&nbsp;<span class="op" id="5470361">(</span><span class="ident" id="5470362">p</span>&nbsp;<span class="op" id="5470364">*</span><span class="ident" id="5470365"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5470370">)</span>&nbsp;<span class="ident" id="5470372">SetAlpha</span><span class="op" id="5470380">(</span><span class="ident" id="5470381">x</span><span class="op" id="5470382">,</span>&nbsp;<span class="ident" id="5470384">y</span>&nbsp;<span class="builtintype" id="5470386">int</span><span class="op" id="5470389">,</span>&nbsp;<span class="ident" id="5470391">c</span>&nbsp;<span class="ident" id="5470393"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5470398">.</span><span class="ident" id="5470399">Alpha</span><span class="op" id="5470404">)</span>&nbsp;<span class="op" id="5470406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470409">if</span>&nbsp;<span class="op" id="5470412">!</span><span class="op" id="5470413">(</span><span class="ident" id="5470414"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5470419">{</span><span class="ident" id="5470420"><a href="/image/image.go.html#5470381">x</a></span><span class="op" id="5470421">,</span>&nbsp;<span class="ident" id="5470423"><a href="/image/image.go.html#5470384">y</a></span><span class="op" id="5470424">}</span><span class="op" id="5470425">.</span><span class="ident" id="5470426">In</span><span class="op" id="5470428">(</span><span class="ident" id="5470429"><a href="/image/image.go.html#5470362">p</a></span><span class="op" id="5470430">.</span><span class="ident" id="5470431">Rect</span><span class="op" id="5470435">)</span><span class="op" id="5470436">)</span>&nbsp;<span class="op" id="5470438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470442">return</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5470450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470453">i</span>&nbsp;<span class="op" id="5470455">:=</span>&nbsp;<span class="ident" id="5470458"><a href="/image/image.go.html#5470362">p</a></span><span class="op" id="5470459">.</span><span class="ident" id="5470460">PixOffset</span><span class="op" id="5470469">(</span><span class="ident" id="5470470"><a href="/image/image.go.html#5470381">x</a></span><span class="op" id="5470471">,</span>&nbsp;<span class="ident" id="5470473"><a href="/image/image.go.html#5470384">y</a></span><span class="op" id="5470474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470477"><a href="/image/image.go.html#5470362">p</a></span><span class="op" id="5470478">.</span><span class="ident" id="5470479">Pix</span><span class="op" id="5470482">[</span><span class="ident" id="5470483"><a href="/image/image.go.html#5470453">i</a></span><span class="op" id="5470484">]</span>&nbsp;<span class="op" id="5470486">=</span>&nbsp;<span class="ident" id="5470488"><a href="/image/image.go.html#5470391">c</a></span><span class="op" id="5470489">.</span><span class="ident" id="5470490">A</span><br>
<span class="lineno"></span><span class="op" id="5470492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="comment" id="5470495">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5470572">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5470644">func</span>&nbsp;<span class="op" id="5470649">(</span><span class="ident" id="5470650">p</span>&nbsp;<span class="op" id="5470652">*</span><span class="ident" id="5470653"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5470658">)</span>&nbsp;<span class="ident" id="5470660">SubImage</span><span class="op" id="5470668">(</span><span class="ident" id="5470669">r</span>&nbsp;<span class="ident" id="5470671"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5470680">)</span>&nbsp;<span class="ident" id="5470682"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5470688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470691"><a href="/image/image.go.html#5470669">r</a></span>&nbsp;<span class="op" id="5470693">=</span>&nbsp;<span class="ident" id="5470695"><a href="/image/image.go.html#5470669">r</a></span><span class="op" id="5470696">.</span><span class="ident" id="5470697">Intersect</span><span class="op" id="5470706">(</span><span class="ident" id="5470707"><a href="/image/image.go.html#5470650">p</a></span><span class="op" id="5470708">.</span><span class="ident" id="5470709">Rect</span><span class="op" id="5470713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5470716">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5470797">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5470879">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470929">if</span>&nbsp;<span class="ident" id="5470932"><a href="/image/image.go.html#5470669">r</a></span><span class="op" id="5470933">.</span><span class="ident" id="5470934">Empty</span><span class="op" id="5470939">(</span><span class="op" id="5470940">)</span>&nbsp;<span class="op" id="5470942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5470946">return</span>&nbsp;<span class="op" id="5470953">&amp;</span><span class="ident" id="5470954"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5470959">{</span><span class="op" id="5470960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5470963">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5470966">i</span>&nbsp;<span class="op" id="5470968">:=</span>&nbsp;<span class="ident" id="5470971"><a href="/image/image.go.html#5470650">p</a></span><span class="op" id="5470972">.</span><span class="ident" id="5470973">PixOffset</span><span class="op" id="5470982">(</span><span class="ident" id="5470983"><a href="/image/image.go.html#5470669">r</a></span><span class="op" id="5470984">.</span><span class="ident" id="5470985">Min</span><span class="op" id="5470988">.</span><span class="ident" id="5470989">X</span><span class="op" id="5470990">,</span>&nbsp;<span class="ident" id="5470992"><a href="/image/image.go.html#5470669">r</a></span><span class="op" id="5470993">.</span><span class="ident" id="5470994">Min</span><span class="op" id="5470997">.</span><span class="ident" id="5470998">Y</span><span class="op" id="5470999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471002">return</span>&nbsp;<span class="op" id="5471009">&amp;</span><span class="ident" id="5471010"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5471015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471019">Pix</span><span class="op" id="5471022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5471027"><a href="/image/image.go.html#5470650">p</a></span><span class="op" id="5471028">.</span><span class="ident" id="5471029">Pix</span><span class="op" id="5471032">[</span><span class="ident" id="5471033"><a href="/image/image.go.html#5470966">i</a></span><span class="op" id="5471034">:</span><span class="op" id="5471035">]</span><span class="op" id="5471036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471040">Stride</span><span class="op" id="5471046">:</span>&nbsp;<span class="ident" id="5471048"><a href="/image/image.go.html#5470650">p</a></span><span class="op" id="5471049">.</span><span class="ident" id="5471050">Stride</span><span class="op" id="5471056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471060">Rect</span><span class="op" id="5471064">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5471068"><a href="/image/image.go.html#5470669">r</a></span><span class="op" id="5471069">,</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5471072">}</span><br>
<span class="lineno"></span><span class="op" id="5471074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5471077">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5471150">func</span>&nbsp;<span class="op" id="5471155">(</span><span class="ident" id="5471156">p</span>&nbsp;<span class="op" id="5471158">*</span><span class="ident" id="5471159"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5471164">)</span>&nbsp;<span class="ident" id="5471166">Opaque</span><span class="op" id="5471172">(</span><span class="op" id="5471173">)</span>&nbsp;<span class="builtintype" id="5471175">bool</span>&nbsp;<span class="op" id="5471180">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471183">if</span>&nbsp;<span class="ident" id="5471186"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471187">.</span><span class="ident" id="5471188">Rect</span><span class="op" id="5471192">.</span><span class="ident" id="5471193">Empty</span><span class="op" id="5471198">(</span><span class="op" id="5471199">)</span>&nbsp;<span class="op" id="5471201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471205">return</span>&nbsp;<span class="ident" id="5471212">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5471218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471221">i0</span><span class="op" id="5471223">,</span>&nbsp;<span class="ident" id="5471225">i1</span>&nbsp;<span class="op" id="5471228">:=</span>&nbsp;<span class="num" id="5471231">0</span><span class="op" id="5471232">,</span>&nbsp;<span class="ident" id="5471234"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471235">.</span><span class="ident" id="5471236">Rect</span><span class="op" id="5471240">.</span><span class="ident" id="5471241">Dx</span><span class="op" id="5471243">(</span><span class="op" id="5471244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471247">for</span>&nbsp;<span class="ident" id="5471251">y</span>&nbsp;<span class="op" id="5471253">:=</span>&nbsp;<span class="ident" id="5471256"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471257">.</span><span class="ident" id="5471258">Rect</span><span class="op" id="5471262">.</span><span class="ident" id="5471263">Min</span><span class="op" id="5471266">.</span><span class="ident" id="5471267">Y</span><span class="op" id="5471268">;</span>&nbsp;<span class="ident" id="5471270"><a href="/image/image.go.html#5471251">y</a></span>&nbsp;<span class="op" id="5471272">&lt;</span>&nbsp;<span class="ident" id="5471274"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471275">.</span><span class="ident" id="5471276">Rect</span><span class="op" id="5471280">.</span><span class="ident" id="5471281">Max</span><span class="op" id="5471284">.</span><span class="ident" id="5471285">Y</span><span class="op" id="5471286">;</span>&nbsp;<span class="ident" id="5471288"><a href="/image/image.go.html#5471251">y</a></span><span class="op" id="5471289">++</span>&nbsp;<span class="op" id="5471292">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471296">for</span>&nbsp;<span class="ident" id="5471300">i</span>&nbsp;<span class="op" id="5471302">:=</span>&nbsp;<span class="ident" id="5471305"><a href="/image/image.go.html#5471221">i0</a></span><span class="op" id="5471307">;</span>&nbsp;<span class="ident" id="5471309"><a href="/image/image.go.html#5471300">i</a></span>&nbsp;<span class="op" id="5471311">&lt;</span>&nbsp;<span class="ident" id="5471313"><a href="/image/image.go.html#5471225">i1</a></span><span class="op" id="5471315">;</span>&nbsp;<span class="ident" id="5471317"><a href="/image/image.go.html#5471300">i</a></span><span class="op" id="5471318">++</span>&nbsp;<span class="op" id="5471321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471326">if</span>&nbsp;<span class="ident" id="5471329"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471330">.</span><span class="ident" id="5471331">Pix</span><span class="op" id="5471334">[</span><span class="ident" id="5471335"><a href="/image/image.go.html#5471300">i</a></span><span class="op" id="5471336">]</span>&nbsp;<span class="op" id="5471338">!=</span>&nbsp;<span class="num" id="5471341">0xff</span>&nbsp;<span class="op" id="5471346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471352">return</span>&nbsp;<span class="ident" id="5471359">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5471368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5471372">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471376"><a href="/image/image.go.html#5471221">i0</a></span>&nbsp;<span class="op" id="5471379">+=</span>&nbsp;<span class="ident" id="5471382"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471383">.</span><span class="ident" id="5471384">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471393"><a href="/image/image.go.html#5471225">i1</a></span>&nbsp;<span class="op" id="5471396">+=</span>&nbsp;<span class="ident" id="5471399"><a href="/image/image.go.html#5471156">p</a></span><span class="op" id="5471400">.</span><span class="ident" id="5471401">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5471409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471412">return</span>&nbsp;<span class="ident" id="5471419">true</span><br>
<span class="lineno"></span><span class="op" id="5471424">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="comment" id="5471427">//&nbsp;NewAlpha&nbsp;returns&nbsp;a&nbsp;new&nbsp;Alpha&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5471482">func</span>&nbsp;<span class="ident" id="5471487">NewAlpha</span><span class="op" id="5471495">(</span><span class="ident" id="5471496">r</span>&nbsp;<span class="ident" id="5471498"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5471507">)</span>&nbsp;<span class="op" id="5471509">*</span><span class="ident" id="5471510"><a href="/image/image.go.html#5469323">Alpha</a></span>&nbsp;<span class="op" id="5471516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471519">w</span><span class="op" id="5471520">,</span>&nbsp;<span class="ident" id="5471522">h</span>&nbsp;<span class="op" id="5471524">:=</span>&nbsp;<span class="ident" id="5471527"><a href="/image/image.go.html#5471496">r</a></span><span class="op" id="5471528">.</span><span class="ident" id="5471529">Dx</span><span class="op" id="5471531">(</span><span class="op" id="5471532">)</span><span class="op" id="5471533">,</span>&nbsp;<span class="ident" id="5471535"><a href="/image/image.go.html#5471496">r</a></span><span class="op" id="5471536">.</span><span class="ident" id="5471537">Dy</span><span class="op" id="5471539">(</span><span class="op" id="5471540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471543">pix</span>&nbsp;<span class="op" id="5471547">:=</span>&nbsp;<span class="builtinfunc" id="5471550">make</span><span class="op" id="5471554">(</span><span class="op" id="5471555">[</span><span class="op" id="5471556">]</span><span class="builtintype" id="5471557">uint8</span><span class="op" id="5471562">,</span>&nbsp;<span class="num" id="5471564">1</span><span class="op" id="5471565">*</span><span class="ident" id="5471566"><a href="/image/image.go.html#5471519">w</a></span><span class="op" id="5471567">*</span><span class="ident" id="5471568"><a href="/image/image.go.html#5471522">h</a></span><span class="op" id="5471569">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5471572">return</span>&nbsp;<span class="op" id="5471579">&amp;</span><span class="ident" id="5471580"><a href="/image/image.go.html#5469323">Alpha</a></span><span class="op" id="5471585">{</span><span class="ident" id="5471586"><a href="/image/image.go.html#5471543">pix</a></span><span class="op" id="5471589">,</span>&nbsp;<span class="num" id="5471591">1</span>&nbsp;<span class="op" id="5471593">*</span>&nbsp;<span class="ident" id="5471595"><a href="/image/image.go.html#5471519">w</a></span><span class="op" id="5471596">,</span>&nbsp;<span class="ident" id="5471598"><a href="/image/image.go.html#5471496">r</a></span><span class="op" id="5471599">}</span><br>
<span class="lineno"></span><span class="op" id="5471601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5471604">//&nbsp;Alpha16&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Alpha64&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5471683">type</span>&nbsp;<span class="ident" id="5471688">Alpha16</span>&nbsp;<span class="keyword" id="5471696">struct</span>&nbsp;<span class="op" id="5471703">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5471706">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;alpha&nbsp;values&nbsp;in&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5471791">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*2].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471859">Pix</span>&nbsp;<span class="op" id="5471863">[</span><span class="op" id="5471864">]</span><span class="builtintype" id="5471865">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5471872">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471948">Stride</span>&nbsp;<span class="builtintype" id="5471955">int</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5471960">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5471992">Rect</span>&nbsp;<span class="ident" id="5471997"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5472007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5472010">func</span>&nbsp;<span class="op" id="5472015">(</span><span class="ident" id="5472016">p</span>&nbsp;<span class="op" id="5472018">*</span><span class="ident" id="5472019"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472026">)</span>&nbsp;<span class="ident" id="5472028">ColorModel</span><span class="op" id="5472038">(</span><span class="op" id="5472039">)</span>&nbsp;<span class="ident" id="5472041"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472046">.</span><span class="ident" id="5472047">Model</span>&nbsp;<span class="op" id="5472053">{</span>&nbsp;<span class="keyword" id="5472055">return</span>&nbsp;<span class="ident" id="5472062"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472067">.</span><span class="ident" id="5472068">Alpha16Model</span>&nbsp;<span class="op" id="5472081">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span><span class="keyword" id="5472084">func</span>&nbsp;<span class="op" id="5472089">(</span><span class="ident" id="5472090">p</span>&nbsp;<span class="op" id="5472092">*</span><span class="ident" id="5472093"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472100">)</span>&nbsp;<span class="ident" id="5472102">Bounds</span><span class="op" id="5472108">(</span><span class="op" id="5472109">)</span>&nbsp;<span class="ident" id="5472111"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5472121">{</span>&nbsp;<span class="keyword" id="5472123">return</span>&nbsp;<span class="ident" id="5472130"><a href="/image/image.go.html#5472090">p</a></span><span class="op" id="5472131">.</span><span class="ident" id="5472132">Rect</span>&nbsp;<span class="op" id="5472137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5472140">func</span>&nbsp;<span class="op" id="5472145">(</span><span class="ident" id="5472146">p</span>&nbsp;<span class="op" id="5472148">*</span><span class="ident" id="5472149"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472156">)</span>&nbsp;<span class="ident" id="5472158">At</span><span class="op" id="5472160">(</span><span class="ident" id="5472161">x</span><span class="op" id="5472162">,</span>&nbsp;<span class="ident" id="5472164">y</span>&nbsp;<span class="builtintype" id="5472166">int</span><span class="op" id="5472169">)</span>&nbsp;<span class="ident" id="5472171"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472176">.</span><span class="ident" id="5472177">Color</span>&nbsp;<span class="op" id="5472183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472186">return</span>&nbsp;<span class="ident" id="5472193"><a href="/image/image.go.html#5472146">p</a></span><span class="op" id="5472194">.</span><span class="ident" id="5472195">Alpha16At</span><span class="op" id="5472204">(</span><span class="ident" id="5472205"><a href="/image/image.go.html#5472161">x</a></span><span class="op" id="5472206">,</span>&nbsp;<span class="ident" id="5472208"><a href="/image/image.go.html#5472164">y</a></span><span class="op" id="5472209">)</span><br>
<span class="lineno">590</span><span class="op" id="5472211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5472214">func</span>&nbsp;<span class="op" id="5472219">(</span><span class="ident" id="5472220">p</span>&nbsp;<span class="op" id="5472222">*</span><span class="ident" id="5472223"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472230">)</span>&nbsp;<span class="ident" id="5472232">Alpha16At</span><span class="op" id="5472241">(</span><span class="ident" id="5472242">x</span><span class="op" id="5472243">,</span>&nbsp;<span class="ident" id="5472245">y</span>&nbsp;<span class="builtintype" id="5472247">int</span><span class="op" id="5472250">)</span>&nbsp;<span class="ident" id="5472252"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472257">.</span><span class="ident" id="5472258">Alpha16</span>&nbsp;<span class="op" id="5472266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472269">if</span>&nbsp;<span class="op" id="5472272">!</span><span class="op" id="5472273">(</span><span class="ident" id="5472274"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5472279">{</span><span class="ident" id="5472280"><a href="/image/image.go.html#5472242">x</a></span><span class="op" id="5472281">,</span>&nbsp;<span class="ident" id="5472283"><a href="/image/image.go.html#5472245">y</a></span><span class="op" id="5472284">}</span><span class="op" id="5472285">.</span><span class="ident" id="5472286">In</span><span class="op" id="5472288">(</span><span class="ident" id="5472289"><a href="/image/image.go.html#5472220">p</a></span><span class="op" id="5472290">.</span><span class="ident" id="5472291">Rect</span><span class="op" id="5472295">)</span><span class="op" id="5472296">)</span>&nbsp;<span class="op" id="5472298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472302">return</span>&nbsp;<span class="ident" id="5472309"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472314">.</span><span class="ident" id="5472315">Alpha16</span><span class="op" id="5472322">{</span><span class="op" id="5472323">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5472326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472329">i</span>&nbsp;<span class="op" id="5472331">:=</span>&nbsp;<span class="ident" id="5472334"><a href="/image/image.go.html#5472220">p</a></span><span class="op" id="5472335">.</span><span class="ident" id="5472336">PixOffset</span><span class="op" id="5472345">(</span><span class="ident" id="5472346"><a href="/image/image.go.html#5472242">x</a></span><span class="op" id="5472347">,</span>&nbsp;<span class="ident" id="5472349"><a href="/image/image.go.html#5472245">y</a></span><span class="op" id="5472350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472353">return</span>&nbsp;<span class="ident" id="5472360"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472365">.</span><span class="ident" id="5472366">Alpha16</span><span class="op" id="5472373">{</span><span class="builtintype" id="5472374">uint16</span><span class="op" id="5472380">(</span><span class="ident" id="5472381"><a href="/image/image.go.html#5472220">p</a></span><span class="op" id="5472382">.</span><span class="ident" id="5472383">Pix</span><span class="op" id="5472386">[</span><span class="ident" id="5472387"><a href="/image/image.go.html#5472329">i</a></span><span class="op" id="5472388">+</span><span class="num" id="5472389">0</span><span class="op" id="5472390">]</span><span class="op" id="5472391">)</span><span class="op" id="5472392">&lt;&lt;</span><span class="num" id="5472394">8</span>&nbsp;<span class="op" id="5472396">|</span>&nbsp;<span class="builtintype" id="5472398">uint16</span><span class="op" id="5472404">(</span><span class="ident" id="5472405"><a href="/image/image.go.html#5472220">p</a></span><span class="op" id="5472406">.</span><span class="ident" id="5472407">Pix</span><span class="op" id="5472410">[</span><span class="ident" id="5472411"><a href="/image/image.go.html#5472329">i</a></span><span class="op" id="5472412">+</span><span class="num" id="5472413">1</span><span class="op" id="5472414">]</span><span class="op" id="5472415">)</span><span class="op" id="5472416">}</span><br>
<span class="lineno"></span><span class="op" id="5472418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span><span class="comment" id="5472421">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5472500">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5472524">func</span>&nbsp;<span class="op" id="5472529">(</span><span class="ident" id="5472530">p</span>&nbsp;<span class="op" id="5472532">*</span><span class="ident" id="5472533"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472540">)</span>&nbsp;<span class="ident" id="5472542">PixOffset</span><span class="op" id="5472551">(</span><span class="ident" id="5472552">x</span><span class="op" id="5472553">,</span>&nbsp;<span class="ident" id="5472555">y</span>&nbsp;<span class="builtintype" id="5472557">int</span><span class="op" id="5472560">)</span>&nbsp;<span class="builtintype" id="5472562">int</span>&nbsp;<span class="op" id="5472566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472569">return</span>&nbsp;<span class="op" id="5472576">(</span><span class="ident" id="5472577"><a href="/image/image.go.html#5472555">y</a></span><span class="op" id="5472578">-</span><span class="ident" id="5472579"><a href="/image/image.go.html#5472530">p</a></span><span class="op" id="5472580">.</span><span class="ident" id="5472581">Rect</span><span class="op" id="5472585">.</span><span class="ident" id="5472586">Min</span><span class="op" id="5472589">.</span><span class="ident" id="5472590">Y</span><span class="op" id="5472591">)</span><span class="op" id="5472592">*</span><span class="ident" id="5472593"><a href="/image/image.go.html#5472530">p</a></span><span class="op" id="5472594">.</span><span class="ident" id="5472595">Stride</span>&nbsp;<span class="op" id="5472602">+</span>&nbsp;<span class="op" id="5472604">(</span><span class="ident" id="5472605"><a href="/image/image.go.html#5472552">x</a></span><span class="op" id="5472606">-</span><span class="ident" id="5472607"><a href="/image/image.go.html#5472530">p</a></span><span class="op" id="5472608">.</span><span class="ident" id="5472609">Rect</span><span class="op" id="5472613">.</span><span class="ident" id="5472614">Min</span><span class="op" id="5472617">.</span><span class="ident" id="5472618">X</span><span class="op" id="5472619">)</span><span class="op" id="5472620">*</span><span class="num" id="5472621">2</span><br>
<span class="lineno"></span><span class="op" id="5472623">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="keyword" id="5472626">func</span>&nbsp;<span class="op" id="5472631">(</span><span class="ident" id="5472632">p</span>&nbsp;<span class="op" id="5472634">*</span><span class="ident" id="5472635"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472642">)</span>&nbsp;<span class="ident" id="5472644">Set</span><span class="op" id="5472647">(</span><span class="ident" id="5472648">x</span><span class="op" id="5472649">,</span>&nbsp;<span class="ident" id="5472651">y</span>&nbsp;<span class="builtintype" id="5472653">int</span><span class="op" id="5472656">,</span>&nbsp;<span class="ident" id="5472658">c</span>&nbsp;<span class="ident" id="5472660"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472665">.</span><span class="ident" id="5472666">Color</span><span class="op" id="5472671">)</span>&nbsp;<span class="op" id="5472673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472676">if</span>&nbsp;<span class="op" id="5472679">!</span><span class="op" id="5472680">(</span><span class="ident" id="5472681"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5472686">{</span><span class="ident" id="5472687"><a href="/image/image.go.html#5472648">x</a></span><span class="op" id="5472688">,</span>&nbsp;<span class="ident" id="5472690"><a href="/image/image.go.html#5472651">y</a></span><span class="op" id="5472691">}</span><span class="op" id="5472692">.</span><span class="ident" id="5472693">In</span><span class="op" id="5472695">(</span><span class="ident" id="5472696"><a href="/image/image.go.html#5472632">p</a></span><span class="op" id="5472697">.</span><span class="ident" id="5472698">Rect</span><span class="op" id="5472702">)</span><span class="op" id="5472703">)</span>&nbsp;<span class="op" id="5472705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472709">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5472717">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472720">i</span>&nbsp;<span class="op" id="5472722">:=</span>&nbsp;<span class="ident" id="5472725"><a href="/image/image.go.html#5472632">p</a></span><span class="op" id="5472726">.</span><span class="ident" id="5472727">PixOffset</span><span class="op" id="5472736">(</span><span class="ident" id="5472737"><a href="/image/image.go.html#5472648">x</a></span><span class="op" id="5472738">,</span>&nbsp;<span class="ident" id="5472740"><a href="/image/image.go.html#5472651">y</a></span><span class="op" id="5472741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472744">c1</span>&nbsp;<span class="op" id="5472747">:=</span>&nbsp;<span class="ident" id="5472750"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472755">.</span><span class="ident" id="5472756">Alpha16Model</span><span class="op" id="5472768">.</span><span class="ident" id="5472769">Convert</span><span class="op" id="5472776">(</span><span class="ident" id="5472777"><a href="/image/image.go.html#5472658">c</a></span><span class="op" id="5472778">)</span><span class="op" id="5472779">.</span><span class="op" id="5472780">(</span><span class="ident" id="5472781"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472786">.</span><span class="ident" id="5472787">Alpha16</span><span class="op" id="5472794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472797"><a href="/image/image.go.html#5472632">p</a></span><span class="op" id="5472798">.</span><span class="ident" id="5472799">Pix</span><span class="op" id="5472802">[</span><span class="ident" id="5472803"><a href="/image/image.go.html#5472720">i</a></span><span class="op" id="5472804">+</span><span class="num" id="5472805">0</span><span class="op" id="5472806">]</span>&nbsp;<span class="op" id="5472808">=</span>&nbsp;<span class="builtintype" id="5472810">uint8</span><span class="op" id="5472815">(</span><span class="ident" id="5472816"><a href="/image/image.go.html#5472744">c1</a></span><span class="op" id="5472818">.</span><span class="ident" id="5472819">A</span>&nbsp;<span class="op" id="5472821">&gt;&gt;</span>&nbsp;<span class="num" id="5472824">8</span><span class="op" id="5472825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472828"><a href="/image/image.go.html#5472632">p</a></span><span class="op" id="5472829">.</span><span class="ident" id="5472830">Pix</span><span class="op" id="5472833">[</span><span class="ident" id="5472834"><a href="/image/image.go.html#5472720">i</a></span><span class="op" id="5472835">+</span><span class="num" id="5472836">1</span><span class="op" id="5472837">]</span>&nbsp;<span class="op" id="5472839">=</span>&nbsp;<span class="builtintype" id="5472841">uint8</span><span class="op" id="5472846">(</span><span class="ident" id="5472847"><a href="/image/image.go.html#5472744">c1</a></span><span class="op" id="5472849">.</span><span class="ident" id="5472850">A</span><span class="op" id="5472851">)</span><br>
<span class="lineno"></span><span class="op" id="5472853">}</span><br>
<span class="lineno">615</span><br>
<span class="lineno"></span><span class="keyword" id="5472856">func</span>&nbsp;<span class="op" id="5472861">(</span><span class="ident" id="5472862">p</span>&nbsp;<span class="op" id="5472864">*</span><span class="ident" id="5472865"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5472872">)</span>&nbsp;<span class="ident" id="5472874">SetAlpha16</span><span class="op" id="5472884">(</span><span class="ident" id="5472885">x</span><span class="op" id="5472886">,</span>&nbsp;<span class="ident" id="5472888">y</span>&nbsp;<span class="builtintype" id="5472890">int</span><span class="op" id="5472893">,</span>&nbsp;<span class="ident" id="5472895">c</span>&nbsp;<span class="ident" id="5472897"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5472902">.</span><span class="ident" id="5472903">Alpha16</span><span class="op" id="5472910">)</span>&nbsp;<span class="op" id="5472912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472915">if</span>&nbsp;<span class="op" id="5472918">!</span><span class="op" id="5472919">(</span><span class="ident" id="5472920"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5472925">{</span><span class="ident" id="5472926"><a href="/image/image.go.html#5472885">x</a></span><span class="op" id="5472927">,</span>&nbsp;<span class="ident" id="5472929"><a href="/image/image.go.html#5472888">y</a></span><span class="op" id="5472930">}</span><span class="op" id="5472931">.</span><span class="ident" id="5472932">In</span><span class="op" id="5472934">(</span><span class="ident" id="5472935"><a href="/image/image.go.html#5472862">p</a></span><span class="op" id="5472936">.</span><span class="ident" id="5472937">Rect</span><span class="op" id="5472941">)</span><span class="op" id="5472942">)</span>&nbsp;<span class="op" id="5472944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472948">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5472956">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472959">i</span>&nbsp;<span class="op" id="5472961">:=</span>&nbsp;<span class="ident" id="5472964"><a href="/image/image.go.html#5472862">p</a></span><span class="op" id="5472965">.</span><span class="ident" id="5472966">PixOffset</span><span class="op" id="5472975">(</span><span class="ident" id="5472976"><a href="/image/image.go.html#5472885">x</a></span><span class="op" id="5472977">,</span>&nbsp;<span class="ident" id="5472979"><a href="/image/image.go.html#5472888">y</a></span><span class="op" id="5472980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5472983"><a href="/image/image.go.html#5472862">p</a></span><span class="op" id="5472984">.</span><span class="ident" id="5472985">Pix</span><span class="op" id="5472988">[</span><span class="ident" id="5472989"><a href="/image/image.go.html#5472959">i</a></span><span class="op" id="5472990">+</span><span class="num" id="5472991">0</span><span class="op" id="5472992">]</span>&nbsp;<span class="op" id="5472994">=</span>&nbsp;<span class="builtintype" id="5472996">uint8</span><span class="op" id="5473001">(</span><span class="ident" id="5473002"><a href="/image/image.go.html#5472895">c</a></span><span class="op" id="5473003">.</span><span class="ident" id="5473004">A</span>&nbsp;<span class="op" id="5473006">&gt;&gt;</span>&nbsp;<span class="num" id="5473009">8</span><span class="op" id="5473010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473013"><a href="/image/image.go.html#5472862">p</a></span><span class="op" id="5473014">.</span><span class="ident" id="5473015">Pix</span><span class="op" id="5473018">[</span><span class="ident" id="5473019"><a href="/image/image.go.html#5472959">i</a></span><span class="op" id="5473020">+</span><span class="num" id="5473021">1</span><span class="op" id="5473022">]</span>&nbsp;<span class="op" id="5473024">=</span>&nbsp;<span class="builtintype" id="5473026">uint8</span><span class="op" id="5473031">(</span><span class="ident" id="5473032"><a href="/image/image.go.html#5472895">c</a></span><span class="op" id="5473033">.</span><span class="ident" id="5473034">A</span><span class="op" id="5473035">)</span><br>
<span class="lineno"></span><span class="op" id="5473037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">625</span><span class="comment" id="5473040">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5473117">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5473189">func</span>&nbsp;<span class="op" id="5473194">(</span><span class="ident" id="5473195">p</span>&nbsp;<span class="op" id="5473197">*</span><span class="ident" id="5473198"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5473205">)</span>&nbsp;<span class="ident" id="5473207">SubImage</span><span class="op" id="5473215">(</span><span class="ident" id="5473216">r</span>&nbsp;<span class="ident" id="5473218"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5473227">)</span>&nbsp;<span class="ident" id="5473229"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5473235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473238"><a href="/image/image.go.html#5473216">r</a></span>&nbsp;<span class="op" id="5473240">=</span>&nbsp;<span class="ident" id="5473242"><a href="/image/image.go.html#5473216">r</a></span><span class="op" id="5473243">.</span><span class="ident" id="5473244">Intersect</span><span class="op" id="5473253">(</span><span class="ident" id="5473254"><a href="/image/image.go.html#5473195">p</a></span><span class="op" id="5473255">.</span><span class="ident" id="5473256">Rect</span><span class="op" id="5473260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5473263">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5473344">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5473426">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473476">if</span>&nbsp;<span class="ident" id="5473479"><a href="/image/image.go.html#5473216">r</a></span><span class="op" id="5473480">.</span><span class="ident" id="5473481">Empty</span><span class="op" id="5473486">(</span><span class="op" id="5473487">)</span>&nbsp;<span class="op" id="5473489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473493">return</span>&nbsp;<span class="op" id="5473500">&amp;</span><span class="ident" id="5473501"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5473508">{</span><span class="op" id="5473509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473512">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473515">i</span>&nbsp;<span class="op" id="5473517">:=</span>&nbsp;<span class="ident" id="5473520"><a href="/image/image.go.html#5473195">p</a></span><span class="op" id="5473521">.</span><span class="ident" id="5473522">PixOffset</span><span class="op" id="5473531">(</span><span class="ident" id="5473532"><a href="/image/image.go.html#5473216">r</a></span><span class="op" id="5473533">.</span><span class="ident" id="5473534">Min</span><span class="op" id="5473537">.</span><span class="ident" id="5473538">X</span><span class="op" id="5473539">,</span>&nbsp;<span class="ident" id="5473541"><a href="/image/image.go.html#5473216">r</a></span><span class="op" id="5473542">.</span><span class="ident" id="5473543">Min</span><span class="op" id="5473546">.</span><span class="ident" id="5473547">Y</span><span class="op" id="5473548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473551">return</span>&nbsp;<span class="op" id="5473558">&amp;</span><span class="ident" id="5473559"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5473566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473570">Pix</span><span class="op" id="5473573">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5473578"><a href="/image/image.go.html#5473195">p</a></span><span class="op" id="5473579">.</span><span class="ident" id="5473580">Pix</span><span class="op" id="5473583">[</span><span class="ident" id="5473584"><a href="/image/image.go.html#5473515">i</a></span><span class="op" id="5473585">:</span><span class="op" id="5473586">]</span><span class="op" id="5473587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473591">Stride</span><span class="op" id="5473597">:</span>&nbsp;<span class="ident" id="5473599"><a href="/image/image.go.html#5473195">p</a></span><span class="op" id="5473600">.</span><span class="ident" id="5473601">Stride</span><span class="op" id="5473607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473611">Rect</span><span class="op" id="5473615">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5473619"><a href="/image/image.go.html#5473216">r</a></span><span class="op" id="5473620">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473623">}</span><br>
<span class="lineno"></span><span class="op" id="5473625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5473628">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5473701">func</span>&nbsp;<span class="op" id="5473706">(</span><span class="ident" id="5473707">p</span>&nbsp;<span class="op" id="5473709">*</span><span class="ident" id="5473710"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5473717">)</span>&nbsp;<span class="ident" id="5473719">Opaque</span><span class="op" id="5473725">(</span><span class="op" id="5473726">)</span>&nbsp;<span class="builtintype" id="5473728">bool</span>&nbsp;<span class="op" id="5473733">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473736">if</span>&nbsp;<span class="ident" id="5473739"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473740">.</span><span class="ident" id="5473741">Rect</span><span class="op" id="5473745">.</span><span class="ident" id="5473746">Empty</span><span class="op" id="5473751">(</span><span class="op" id="5473752">)</span>&nbsp;<span class="op" id="5473754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473758">return</span>&nbsp;<span class="ident" id="5473765">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473774">i0</span><span class="op" id="5473776">,</span>&nbsp;<span class="ident" id="5473778">i1</span>&nbsp;<span class="op" id="5473781">:=</span>&nbsp;<span class="num" id="5473784">0</span><span class="op" id="5473785">,</span>&nbsp;<span class="ident" id="5473787"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473788">.</span><span class="ident" id="5473789">Rect</span><span class="op" id="5473793">.</span><span class="ident" id="5473794">Dx</span><span class="op" id="5473796">(</span><span class="op" id="5473797">)</span><span class="op" id="5473798">*</span><span class="num" id="5473799">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473802">for</span>&nbsp;<span class="ident" id="5473806">y</span>&nbsp;<span class="op" id="5473808">:=</span>&nbsp;<span class="ident" id="5473811"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473812">.</span><span class="ident" id="5473813">Rect</span><span class="op" id="5473817">.</span><span class="ident" id="5473818">Min</span><span class="op" id="5473821">.</span><span class="ident" id="5473822">Y</span><span class="op" id="5473823">;</span>&nbsp;<span class="ident" id="5473825"><a href="/image/image.go.html#5473806">y</a></span>&nbsp;<span class="op" id="5473827">&lt;</span>&nbsp;<span class="ident" id="5473829"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473830">.</span><span class="ident" id="5473831">Rect</span><span class="op" id="5473835">.</span><span class="ident" id="5473836">Max</span><span class="op" id="5473839">.</span><span class="ident" id="5473840">Y</span><span class="op" id="5473841">;</span>&nbsp;<span class="ident" id="5473843"><a href="/image/image.go.html#5473806">y</a></span><span class="op" id="5473844">++</span>&nbsp;<span class="op" id="5473847">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473851">for</span>&nbsp;<span class="ident" id="5473855">i</span>&nbsp;<span class="op" id="5473857">:=</span>&nbsp;<span class="ident" id="5473860"><a href="/image/image.go.html#5473774">i0</a></span><span class="op" id="5473862">;</span>&nbsp;<span class="ident" id="5473864"><a href="/image/image.go.html#5473855">i</a></span>&nbsp;<span class="op" id="5473866">&lt;</span>&nbsp;<span class="ident" id="5473868"><a href="/image/image.go.html#5473778">i1</a></span><span class="op" id="5473870">;</span>&nbsp;<span class="ident" id="5473872"><a href="/image/image.go.html#5473855">i</a></span>&nbsp;<span class="op" id="5473874">+=</span>&nbsp;<span class="num" id="5473877">2</span>&nbsp;<span class="op" id="5473879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473884">if</span>&nbsp;<span class="ident" id="5473887"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473888">.</span><span class="ident" id="5473889">Pix</span><span class="op" id="5473892">[</span><span class="ident" id="5473893"><a href="/image/image.go.html#5473855">i</a></span><span class="op" id="5473894">+</span><span class="num" id="5473895">0</span><span class="op" id="5473896">]</span>&nbsp;<span class="op" id="5473898">!=</span>&nbsp;<span class="num" id="5473901">0xff</span>&nbsp;<span class="op" id="5473906">||</span>&nbsp;<span class="ident" id="5473909"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473910">.</span><span class="ident" id="5473911">Pix</span><span class="op" id="5473914">[</span><span class="ident" id="5473915"><a href="/image/image.go.html#5473855">i</a></span><span class="op" id="5473916">+</span><span class="num" id="5473917">1</span><span class="op" id="5473918">]</span>&nbsp;<span class="op" id="5473920">!=</span>&nbsp;<span class="num" id="5473923">0xff</span>&nbsp;<span class="op" id="5473928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473934">return</span>&nbsp;<span class="ident" id="5473941">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473954">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473958"><a href="/image/image.go.html#5473774">i0</a></span>&nbsp;<span class="op" id="5473961">+=</span>&nbsp;<span class="ident" id="5473964"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473965">.</span><span class="ident" id="5473966">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5473975"><a href="/image/image.go.html#5473778">i1</a></span>&nbsp;<span class="op" id="5473978">+=</span>&nbsp;<span class="ident" id="5473981"><a href="/image/image.go.html#5473707">p</a></span><span class="op" id="5473982">.</span><span class="ident" id="5473983">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5473991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5473994">return</span>&nbsp;<span class="ident" id="5474001">true</span><br>
<span class="lineno"></span><span class="op" id="5474006">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="5474009">//&nbsp;NewAlpha16&nbsp;returns&nbsp;a&nbsp;new&nbsp;Alpha16&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5474068">func</span>&nbsp;<span class="ident" id="5474073">NewAlpha16</span><span class="op" id="5474083">(</span><span class="ident" id="5474084">r</span>&nbsp;<span class="ident" id="5474086"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5474095">)</span>&nbsp;<span class="op" id="5474097">*</span><span class="ident" id="5474098"><a href="/image/image.go.html#5471688">Alpha16</a></span>&nbsp;<span class="op" id="5474106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474109">w</span><span class="op" id="5474110">,</span>&nbsp;<span class="ident" id="5474112">h</span>&nbsp;<span class="op" id="5474114">:=</span>&nbsp;<span class="ident" id="5474117"><a href="/image/image.go.html#5474084">r</a></span><span class="op" id="5474118">.</span><span class="ident" id="5474119">Dx</span><span class="op" id="5474121">(</span><span class="op" id="5474122">)</span><span class="op" id="5474123">,</span>&nbsp;<span class="ident" id="5474125"><a href="/image/image.go.html#5474084">r</a></span><span class="op" id="5474126">.</span><span class="ident" id="5474127">Dy</span><span class="op" id="5474129">(</span><span class="op" id="5474130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474133">pix</span>&nbsp;<span class="op" id="5474137">:=</span>&nbsp;<span class="builtinfunc" id="5474140">make</span><span class="op" id="5474144">(</span><span class="op" id="5474145">[</span><span class="op" id="5474146">]</span><span class="builtintype" id="5474147">uint8</span><span class="op" id="5474152">,</span>&nbsp;<span class="num" id="5474154">2</span><span class="op" id="5474155">*</span><span class="ident" id="5474156"><a href="/image/image.go.html#5474109">w</a></span><span class="op" id="5474157">*</span><span class="ident" id="5474158"><a href="/image/image.go.html#5474112">h</a></span><span class="op" id="5474159">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5474162">return</span>&nbsp;<span class="op" id="5474169">&amp;</span><span class="ident" id="5474170"><a href="/image/image.go.html#5471688">Alpha16</a></span><span class="op" id="5474177">{</span><span class="ident" id="5474178"><a href="/image/image.go.html#5474133">pix</a></span><span class="op" id="5474181">,</span>&nbsp;<span class="num" id="5474183">2</span>&nbsp;<span class="op" id="5474185">*</span>&nbsp;<span class="ident" id="5474187"><a href="/image/image.go.html#5474109">w</a></span><span class="op" id="5474188">,</span>&nbsp;<span class="ident" id="5474190"><a href="/image/image.go.html#5474084">r</a></span><span class="op" id="5474191">}</span><br>
<span class="lineno"></span><span class="op" id="5474193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5474196">//&nbsp;Gray&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Gray&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5474269">type</span>&nbsp;<span class="ident" id="5474274">Gray</span>&nbsp;<span class="keyword" id="5474279">struct</span>&nbsp;<span class="op" id="5474286">{</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5474289">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;gray&nbsp;values.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5474352">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474420">Pix</span>&nbsp;<span class="op" id="5474424">[</span><span class="op" id="5474425">]</span><span class="builtintype" id="5474426">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5474433">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474509">Stride</span>&nbsp;<span class="builtintype" id="5474516">int</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5474521">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474553">Rect</span>&nbsp;<span class="ident" id="5474558"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5474568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5474571">func</span>&nbsp;<span class="op" id="5474576">(</span><span class="ident" id="5474577">p</span>&nbsp;<span class="op" id="5474579">*</span><span class="ident" id="5474580"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5474584">)</span>&nbsp;<span class="ident" id="5474586">ColorModel</span><span class="op" id="5474596">(</span><span class="op" id="5474597">)</span>&nbsp;<span class="ident" id="5474599"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474604">.</span><span class="ident" id="5474605">Model</span>&nbsp;<span class="op" id="5474611">{</span>&nbsp;<span class="keyword" id="5474613">return</span>&nbsp;<span class="ident" id="5474620"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474625">.</span><span class="ident" id="5474626">GrayModel</span>&nbsp;<span class="op" id="5474636">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5474639">func</span>&nbsp;<span class="op" id="5474644">(</span><span class="ident" id="5474645">p</span>&nbsp;<span class="op" id="5474647">*</span><span class="ident" id="5474648"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5474652">)</span>&nbsp;<span class="ident" id="5474654">Bounds</span><span class="op" id="5474660">(</span><span class="op" id="5474661">)</span>&nbsp;<span class="ident" id="5474663"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5474673">{</span>&nbsp;<span class="keyword" id="5474675">return</span>&nbsp;<span class="ident" id="5474682"><a href="/image/image.go.html#5474645">p</a></span><span class="op" id="5474683">.</span><span class="ident" id="5474684">Rect</span>&nbsp;<span class="op" id="5474689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5474692">func</span>&nbsp;<span class="op" id="5474697">(</span><span class="ident" id="5474698">p</span>&nbsp;<span class="op" id="5474700">*</span><span class="ident" id="5474701"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5474705">)</span>&nbsp;<span class="ident" id="5474707">At</span><span class="op" id="5474709">(</span><span class="ident" id="5474710">x</span><span class="op" id="5474711">,</span>&nbsp;<span class="ident" id="5474713">y</span>&nbsp;<span class="builtintype" id="5474715">int</span><span class="op" id="5474718">)</span>&nbsp;<span class="ident" id="5474720"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474725">.</span><span class="ident" id="5474726">Color</span>&nbsp;<span class="op" id="5474732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5474735">return</span>&nbsp;<span class="ident" id="5474742"><a href="/image/image.go.html#5474698">p</a></span><span class="op" id="5474743">.</span><span class="ident" id="5474744">GrayAt</span><span class="op" id="5474750">(</span><span class="ident" id="5474751"><a href="/image/image.go.html#5474710">x</a></span><span class="op" id="5474752">,</span>&nbsp;<span class="ident" id="5474754"><a href="/image/image.go.html#5474713">y</a></span><span class="op" id="5474755">)</span><br>
<span class="lineno">685</span><span class="op" id="5474757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5474760">func</span>&nbsp;<span class="op" id="5474765">(</span><span class="ident" id="5474766">p</span>&nbsp;<span class="op" id="5474768">*</span><span class="ident" id="5474769"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5474773">)</span>&nbsp;<span class="ident" id="5474775">GrayAt</span><span class="op" id="5474781">(</span><span class="ident" id="5474782">x</span><span class="op" id="5474783">,</span>&nbsp;<span class="ident" id="5474785">y</span>&nbsp;<span class="builtintype" id="5474787">int</span><span class="op" id="5474790">)</span>&nbsp;<span class="ident" id="5474792"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474797">.</span><span class="ident" id="5474798">Gray</span>&nbsp;<span class="op" id="5474803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5474806">if</span>&nbsp;<span class="op" id="5474809">!</span><span class="op" id="5474810">(</span><span class="ident" id="5474811"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5474816">{</span><span class="ident" id="5474817"><a href="/image/image.go.html#5474782">x</a></span><span class="op" id="5474818">,</span>&nbsp;<span class="ident" id="5474820"><a href="/image/image.go.html#5474785">y</a></span><span class="op" id="5474821">}</span><span class="op" id="5474822">.</span><span class="ident" id="5474823">In</span><span class="op" id="5474825">(</span><span class="ident" id="5474826"><a href="/image/image.go.html#5474766">p</a></span><span class="op" id="5474827">.</span><span class="ident" id="5474828">Rect</span><span class="op" id="5474832">)</span><span class="op" id="5474833">)</span>&nbsp;<span class="op" id="5474835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5474839">return</span>&nbsp;<span class="ident" id="5474846"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474851">.</span><span class="ident" id="5474852">Gray</span><span class="op" id="5474856">{</span><span class="op" id="5474857">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5474860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5474863">i</span>&nbsp;<span class="op" id="5474865">:=</span>&nbsp;<span class="ident" id="5474868"><a href="/image/image.go.html#5474766">p</a></span><span class="op" id="5474869">.</span><span class="ident" id="5474870">PixOffset</span><span class="op" id="5474879">(</span><span class="ident" id="5474880"><a href="/image/image.go.html#5474782">x</a></span><span class="op" id="5474881">,</span>&nbsp;<span class="ident" id="5474883"><a href="/image/image.go.html#5474785">y</a></span><span class="op" id="5474884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5474887">return</span>&nbsp;<span class="ident" id="5474894"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5474899">.</span><span class="ident" id="5474900">Gray</span><span class="op" id="5474904">{</span><span class="ident" id="5474905"><a href="/image/image.go.html#5474766">p</a></span><span class="op" id="5474906">.</span><span class="ident" id="5474907">Pix</span><span class="op" id="5474910">[</span><span class="ident" id="5474911"><a href="/image/image.go.html#5474863">i</a></span><span class="op" id="5474912">]</span><span class="op" id="5474913">}</span><br>
<span class="lineno"></span><span class="op" id="5474915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">695</span><span class="comment" id="5474918">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5474997">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5475021">func</span>&nbsp;<span class="op" id="5475026">(</span><span class="ident" id="5475027">p</span>&nbsp;<span class="op" id="5475029">*</span><span class="ident" id="5475030"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475034">)</span>&nbsp;<span class="ident" id="5475036">PixOffset</span><span class="op" id="5475045">(</span><span class="ident" id="5475046">x</span><span class="op" id="5475047">,</span>&nbsp;<span class="ident" id="5475049">y</span>&nbsp;<span class="builtintype" id="5475051">int</span><span class="op" id="5475054">)</span>&nbsp;<span class="builtintype" id="5475056">int</span>&nbsp;<span class="op" id="5475060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475063">return</span>&nbsp;<span class="op" id="5475070">(</span><span class="ident" id="5475071"><a href="/image/image.go.html#5475049">y</a></span><span class="op" id="5475072">-</span><span class="ident" id="5475073"><a href="/image/image.go.html#5475027">p</a></span><span class="op" id="5475074">.</span><span class="ident" id="5475075">Rect</span><span class="op" id="5475079">.</span><span class="ident" id="5475080">Min</span><span class="op" id="5475083">.</span><span class="ident" id="5475084">Y</span><span class="op" id="5475085">)</span><span class="op" id="5475086">*</span><span class="ident" id="5475087"><a href="/image/image.go.html#5475027">p</a></span><span class="op" id="5475088">.</span><span class="ident" id="5475089">Stride</span>&nbsp;<span class="op" id="5475096">+</span>&nbsp;<span class="op" id="5475098">(</span><span class="ident" id="5475099"><a href="/image/image.go.html#5475046">x</a></span><span class="op" id="5475100">-</span><span class="ident" id="5475101"><a href="/image/image.go.html#5475027">p</a></span><span class="op" id="5475102">.</span><span class="ident" id="5475103">Rect</span><span class="op" id="5475107">.</span><span class="ident" id="5475108">Min</span><span class="op" id="5475111">.</span><span class="ident" id="5475112">X</span><span class="op" id="5475113">)</span><span class="op" id="5475114">*</span><span class="num" id="5475115">1</span><br>
<span class="lineno"></span><span class="op" id="5475117">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="keyword" id="5475120">func</span>&nbsp;<span class="op" id="5475125">(</span><span class="ident" id="5475126">p</span>&nbsp;<span class="op" id="5475128">*</span><span class="ident" id="5475129"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475133">)</span>&nbsp;<span class="ident" id="5475135">Set</span><span class="op" id="5475138">(</span><span class="ident" id="5475139">x</span><span class="op" id="5475140">,</span>&nbsp;<span class="ident" id="5475142">y</span>&nbsp;<span class="builtintype" id="5475144">int</span><span class="op" id="5475147">,</span>&nbsp;<span class="ident" id="5475149">c</span>&nbsp;<span class="ident" id="5475151"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5475156">.</span><span class="ident" id="5475157">Color</span><span class="op" id="5475162">)</span>&nbsp;<span class="op" id="5475164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475167">if</span>&nbsp;<span class="op" id="5475170">!</span><span class="op" id="5475171">(</span><span class="ident" id="5475172"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5475177">{</span><span class="ident" id="5475178"><a href="/image/image.go.html#5475139">x</a></span><span class="op" id="5475179">,</span>&nbsp;<span class="ident" id="5475181"><a href="/image/image.go.html#5475142">y</a></span><span class="op" id="5475182">}</span><span class="op" id="5475183">.</span><span class="ident" id="5475184">In</span><span class="op" id="5475186">(</span><span class="ident" id="5475187"><a href="/image/image.go.html#5475126">p</a></span><span class="op" id="5475188">.</span><span class="ident" id="5475189">Rect</span><span class="op" id="5475193">)</span><span class="op" id="5475194">)</span>&nbsp;<span class="op" id="5475196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475200">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5475208">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475211">i</span>&nbsp;<span class="op" id="5475213">:=</span>&nbsp;<span class="ident" id="5475216"><a href="/image/image.go.html#5475126">p</a></span><span class="op" id="5475217">.</span><span class="ident" id="5475218">PixOffset</span><span class="op" id="5475227">(</span><span class="ident" id="5475228"><a href="/image/image.go.html#5475139">x</a></span><span class="op" id="5475229">,</span>&nbsp;<span class="ident" id="5475231"><a href="/image/image.go.html#5475142">y</a></span><span class="op" id="5475232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475235"><a href="/image/image.go.html#5475126">p</a></span><span class="op" id="5475236">.</span><span class="ident" id="5475237">Pix</span><span class="op" id="5475240">[</span><span class="ident" id="5475241"><a href="/image/image.go.html#5475211">i</a></span><span class="op" id="5475242">]</span>&nbsp;<span class="op" id="5475244">=</span>&nbsp;<span class="ident" id="5475246"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5475251">.</span><span class="ident" id="5475252">GrayModel</span><span class="op" id="5475261">.</span><span class="ident" id="5475262">Convert</span><span class="op" id="5475269">(</span><span class="ident" id="5475270"><a href="/image/image.go.html#5475149">c</a></span><span class="op" id="5475271">)</span><span class="op" id="5475272">.</span><span class="op" id="5475273">(</span><span class="ident" id="5475274"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5475279">.</span><span class="ident" id="5475280">Gray</span><span class="op" id="5475284">)</span><span class="op" id="5475285">.</span><span class="ident" id="5475286">Y</span><br>
<span class="lineno"></span><span class="op" id="5475288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5475291">func</span>&nbsp;<span class="op" id="5475296">(</span><span class="ident" id="5475297">p</span>&nbsp;<span class="op" id="5475299">*</span><span class="ident" id="5475300"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475304">)</span>&nbsp;<span class="ident" id="5475306">SetGray</span><span class="op" id="5475313">(</span><span class="ident" id="5475314">x</span><span class="op" id="5475315">,</span>&nbsp;<span class="ident" id="5475317">y</span>&nbsp;<span class="builtintype" id="5475319">int</span><span class="op" id="5475322">,</span>&nbsp;<span class="ident" id="5475324">c</span>&nbsp;<span class="ident" id="5475326"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5475331">.</span><span class="ident" id="5475332">Gray</span><span class="op" id="5475336">)</span>&nbsp;<span class="op" id="5475338">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475341">if</span>&nbsp;<span class="op" id="5475344">!</span><span class="op" id="5475345">(</span><span class="ident" id="5475346"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5475351">{</span><span class="ident" id="5475352"><a href="/image/image.go.html#5475314">x</a></span><span class="op" id="5475353">,</span>&nbsp;<span class="ident" id="5475355"><a href="/image/image.go.html#5475317">y</a></span><span class="op" id="5475356">}</span><span class="op" id="5475357">.</span><span class="ident" id="5475358">In</span><span class="op" id="5475360">(</span><span class="ident" id="5475361"><a href="/image/image.go.html#5475297">p</a></span><span class="op" id="5475362">.</span><span class="ident" id="5475363">Rect</span><span class="op" id="5475367">)</span><span class="op" id="5475368">)</span>&nbsp;<span class="op" id="5475370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475374">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5475382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475385">i</span>&nbsp;<span class="op" id="5475387">:=</span>&nbsp;<span class="ident" id="5475390"><a href="/image/image.go.html#5475297">p</a></span><span class="op" id="5475391">.</span><span class="ident" id="5475392">PixOffset</span><span class="op" id="5475401">(</span><span class="ident" id="5475402"><a href="/image/image.go.html#5475314">x</a></span><span class="op" id="5475403">,</span>&nbsp;<span class="ident" id="5475405"><a href="/image/image.go.html#5475317">y</a></span><span class="op" id="5475406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475409"><a href="/image/image.go.html#5475297">p</a></span><span class="op" id="5475410">.</span><span class="ident" id="5475411">Pix</span><span class="op" id="5475414">[</span><span class="ident" id="5475415"><a href="/image/image.go.html#5475385">i</a></span><span class="op" id="5475416">]</span>&nbsp;<span class="op" id="5475418">=</span>&nbsp;<span class="ident" id="5475420"><a href="/image/image.go.html#5475324">c</a></span><span class="op" id="5475421">.</span><span class="ident" id="5475422">Y</span><br>
<span class="lineno">715</span><span class="op" id="5475424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5475427">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5475504">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5475576">func</span>&nbsp;<span class="op" id="5475581">(</span><span class="ident" id="5475582">p</span>&nbsp;<span class="op" id="5475584">*</span><span class="ident" id="5475585"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475589">)</span>&nbsp;<span class="ident" id="5475591">SubImage</span><span class="op" id="5475599">(</span><span class="ident" id="5475600">r</span>&nbsp;<span class="ident" id="5475602"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5475611">)</span>&nbsp;<span class="ident" id="5475613"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5475619">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475622"><a href="/image/image.go.html#5475600">r</a></span>&nbsp;<span class="op" id="5475624">=</span>&nbsp;<span class="ident" id="5475626"><a href="/image/image.go.html#5475600">r</a></span><span class="op" id="5475627">.</span><span class="ident" id="5475628">Intersect</span><span class="op" id="5475637">(</span><span class="ident" id="5475638"><a href="/image/image.go.html#5475582">p</a></span><span class="op" id="5475639">.</span><span class="ident" id="5475640">Rect</span><span class="op" id="5475644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5475647">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5475728">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5475810">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475860">if</span>&nbsp;<span class="ident" id="5475863"><a href="/image/image.go.html#5475600">r</a></span><span class="op" id="5475864">.</span><span class="ident" id="5475865">Empty</span><span class="op" id="5475870">(</span><span class="op" id="5475871">)</span>&nbsp;<span class="op" id="5475873">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475877">return</span>&nbsp;<span class="op" id="5475884">&amp;</span><span class="ident" id="5475885"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475889">{</span><span class="op" id="5475890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5475893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475896">i</span>&nbsp;<span class="op" id="5475898">:=</span>&nbsp;<span class="ident" id="5475901"><a href="/image/image.go.html#5475582">p</a></span><span class="op" id="5475902">.</span><span class="ident" id="5475903">PixOffset</span><span class="op" id="5475912">(</span><span class="ident" id="5475913"><a href="/image/image.go.html#5475600">r</a></span><span class="op" id="5475914">.</span><span class="ident" id="5475915">Min</span><span class="op" id="5475918">.</span><span class="ident" id="5475919">X</span><span class="op" id="5475920">,</span>&nbsp;<span class="ident" id="5475922"><a href="/image/image.go.html#5475600">r</a></span><span class="op" id="5475923">.</span><span class="ident" id="5475924">Min</span><span class="op" id="5475927">.</span><span class="ident" id="5475928">Y</span><span class="op" id="5475929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5475932">return</span>&nbsp;<span class="op" id="5475939">&amp;</span><span class="ident" id="5475940"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5475944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475948">Pix</span><span class="op" id="5475951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5475956"><a href="/image/image.go.html#5475582">p</a></span><span class="op" id="5475957">.</span><span class="ident" id="5475958">Pix</span><span class="op" id="5475961">[</span><span class="ident" id="5475962"><a href="/image/image.go.html#5475896">i</a></span><span class="op" id="5475963">:</span><span class="op" id="5475964">]</span><span class="op" id="5475965">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475969">Stride</span><span class="op" id="5475975">:</span>&nbsp;<span class="ident" id="5475977"><a href="/image/image.go.html#5475582">p</a></span><span class="op" id="5475978">.</span><span class="ident" id="5475979">Stride</span><span class="op" id="5475985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5475989">Rect</span><span class="op" id="5475993">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5475997"><a href="/image/image.go.html#5475600">r</a></span><span class="op" id="5475998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5476001">}</span><br>
<span class="lineno"></span><span class="op" id="5476003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span><span class="comment" id="5476006">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5476079">func</span>&nbsp;<span class="op" id="5476084">(</span><span class="ident" id="5476085">p</span>&nbsp;<span class="op" id="5476087">*</span><span class="ident" id="5476088"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5476092">)</span>&nbsp;<span class="ident" id="5476094">Opaque</span><span class="op" id="5476100">(</span><span class="op" id="5476101">)</span>&nbsp;<span class="builtintype" id="5476103">bool</span>&nbsp;<span class="op" id="5476108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5476111">return</span>&nbsp;<span class="ident" id="5476118">true</span><br>
<span class="lineno"></span><span class="op" id="5476123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="comment" id="5476126">//&nbsp;NewGray&nbsp;returns&nbsp;a&nbsp;new&nbsp;Gray&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5476179">func</span>&nbsp;<span class="ident" id="5476184">NewGray</span><span class="op" id="5476191">(</span><span class="ident" id="5476192">r</span>&nbsp;<span class="ident" id="5476194"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5476203">)</span>&nbsp;<span class="op" id="5476205">*</span><span class="ident" id="5476206"><a href="/image/image.go.html#5474274">Gray</a></span>&nbsp;<span class="op" id="5476211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5476214">w</span><span class="op" id="5476215">,</span>&nbsp;<span class="ident" id="5476217">h</span>&nbsp;<span class="op" id="5476219">:=</span>&nbsp;<span class="ident" id="5476222"><a href="/image/image.go.html#5476192">r</a></span><span class="op" id="5476223">.</span><span class="ident" id="5476224">Dx</span><span class="op" id="5476226">(</span><span class="op" id="5476227">)</span><span class="op" id="5476228">,</span>&nbsp;<span class="ident" id="5476230"><a href="/image/image.go.html#5476192">r</a></span><span class="op" id="5476231">.</span><span class="ident" id="5476232">Dy</span><span class="op" id="5476234">(</span><span class="op" id="5476235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5476238">pix</span>&nbsp;<span class="op" id="5476242">:=</span>&nbsp;<span class="builtinfunc" id="5476245">make</span><span class="op" id="5476249">(</span><span class="op" id="5476250">[</span><span class="op" id="5476251">]</span><span class="builtintype" id="5476252">uint8</span><span class="op" id="5476257">,</span>&nbsp;<span class="num" id="5476259">1</span><span class="op" id="5476260">*</span><span class="ident" id="5476261"><a href="/image/image.go.html#5476214">w</a></span><span class="op" id="5476262">*</span><span class="ident" id="5476263"><a href="/image/image.go.html#5476217">h</a></span><span class="op" id="5476264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5476267">return</span>&nbsp;<span class="op" id="5476274">&amp;</span><span class="ident" id="5476275"><a href="/image/image.go.html#5474274">Gray</a></span><span class="op" id="5476279">{</span><span class="ident" id="5476280"><a href="/image/image.go.html#5476238">pix</a></span><span class="op" id="5476283">,</span>&nbsp;<span class="num" id="5476285">1</span>&nbsp;<span class="op" id="5476287">*</span>&nbsp;<span class="ident" id="5476289"><a href="/image/image.go.html#5476214">w</a></span><span class="op" id="5476290">,</span>&nbsp;<span class="ident" id="5476292"><a href="/image/image.go.html#5476192">r</a></span><span class="op" id="5476293">}</span><br>
<span class="lineno">745</span><span class="op" id="5476295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5476298">//&nbsp;Gray16&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;whose&nbsp;At&nbsp;method&nbsp;returns&nbsp;color.Gray16&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="5476375">type</span>&nbsp;<span class="ident" id="5476380">Gray16</span>&nbsp;<span class="keyword" id="5476387">struct</span>&nbsp;<span class="op" id="5476394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5476397">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;gray&nbsp;values&nbsp;in&nbsp;big-endian&nbsp;format.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5476481">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*2].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5476549">Pix</span>&nbsp;<span class="op" id="5476553">[</span><span class="op" id="5476554">]</span><span class="builtintype" id="5476555">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5476562">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5476638">Stride</span>&nbsp;<span class="builtintype" id="5476645">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5476650">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5476682">Rect</span>&nbsp;<span class="ident" id="5476687"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="5476697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5476700">func</span>&nbsp;<span class="op" id="5476705">(</span><span class="ident" id="5476706">p</span>&nbsp;<span class="op" id="5476708">*</span><span class="ident" id="5476709"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5476715">)</span>&nbsp;<span class="ident" id="5476717">ColorModel</span><span class="op" id="5476727">(</span><span class="op" id="5476728">)</span>&nbsp;<span class="ident" id="5476730"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5476735">.</span><span class="ident" id="5476736">Model</span>&nbsp;<span class="op" id="5476742">{</span>&nbsp;<span class="keyword" id="5476744">return</span>&nbsp;<span class="ident" id="5476751"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5476756">.</span><span class="ident" id="5476757">Gray16Model</span>&nbsp;<span class="op" id="5476769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span><span class="keyword" id="5476772">func</span>&nbsp;<span class="op" id="5476777">(</span><span class="ident" id="5476778">p</span>&nbsp;<span class="op" id="5476780">*</span><span class="ident" id="5476781"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5476787">)</span>&nbsp;<span class="ident" id="5476789">Bounds</span><span class="op" id="5476795">(</span><span class="op" id="5476796">)</span>&nbsp;<span class="ident" id="5476798"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5476808">{</span>&nbsp;<span class="keyword" id="5476810">return</span>&nbsp;<span class="ident" id="5476817"><a href="/image/image.go.html#5476778">p</a></span><span class="op" id="5476818">.</span><span class="ident" id="5476819">Rect</span>&nbsp;<span class="op" id="5476824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5476827">func</span>&nbsp;<span class="op" id="5476832">(</span><span class="ident" id="5476833">p</span>&nbsp;<span class="op" id="5476835">*</span><span class="ident" id="5476836"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5476842">)</span>&nbsp;<span class="ident" id="5476844">At</span><span class="op" id="5476846">(</span><span class="ident" id="5476847">x</span><span class="op" id="5476848">,</span>&nbsp;<span class="ident" id="5476850">y</span>&nbsp;<span class="builtintype" id="5476852">int</span><span class="op" id="5476855">)</span>&nbsp;<span class="ident" id="5476857"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5476862">.</span><span class="ident" id="5476863">Color</span>&nbsp;<span class="op" id="5476869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5476872">return</span>&nbsp;<span class="ident" id="5476879"><a href="/image/image.go.html#5476833">p</a></span><span class="op" id="5476880">.</span><span class="ident" id="5476881">Gray16At</span><span class="op" id="5476889">(</span><span class="ident" id="5476890"><a href="/image/image.go.html#5476847">x</a></span><span class="op" id="5476891">,</span>&nbsp;<span class="ident" id="5476893"><a href="/image/image.go.html#5476850">y</a></span><span class="op" id="5476894">)</span><br>
<span class="lineno"></span><span class="op" id="5476896">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="keyword" id="5476899">func</span>&nbsp;<span class="op" id="5476904">(</span><span class="ident" id="5476905">p</span>&nbsp;<span class="op" id="5476907">*</span><span class="ident" id="5476908"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5476914">)</span>&nbsp;<span class="ident" id="5476916">Gray16At</span><span class="op" id="5476924">(</span><span class="ident" id="5476925">x</span><span class="op" id="5476926">,</span>&nbsp;<span class="ident" id="5476928">y</span>&nbsp;<span class="builtintype" id="5476930">int</span><span class="op" id="5476933">)</span>&nbsp;<span class="ident" id="5476935"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5476940">.</span><span class="ident" id="5476941">Gray16</span>&nbsp;<span class="op" id="5476948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5476951">if</span>&nbsp;<span class="op" id="5476954">!</span><span class="op" id="5476955">(</span><span class="ident" id="5476956"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5476961">{</span><span class="ident" id="5476962"><a href="/image/image.go.html#5476925">x</a></span><span class="op" id="5476963">,</span>&nbsp;<span class="ident" id="5476965"><a href="/image/image.go.html#5476928">y</a></span><span class="op" id="5476966">}</span><span class="op" id="5476967">.</span><span class="ident" id="5476968">In</span><span class="op" id="5476970">(</span><span class="ident" id="5476971"><a href="/image/image.go.html#5476905">p</a></span><span class="op" id="5476972">.</span><span class="ident" id="5476973">Rect</span><span class="op" id="5476977">)</span><span class="op" id="5476978">)</span>&nbsp;<span class="op" id="5476980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5476984">return</span>&nbsp;<span class="ident" id="5476991"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5476996">.</span><span class="ident" id="5476997">Gray16</span><span class="op" id="5477003">{</span><span class="op" id="5477004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5477007">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477010">i</span>&nbsp;<span class="op" id="5477012">:=</span>&nbsp;<span class="ident" id="5477015"><a href="/image/image.go.html#5476905">p</a></span><span class="op" id="5477016">.</span><span class="ident" id="5477017">PixOffset</span><span class="op" id="5477026">(</span><span class="ident" id="5477027"><a href="/image/image.go.html#5476925">x</a></span><span class="op" id="5477028">,</span>&nbsp;<span class="ident" id="5477030"><a href="/image/image.go.html#5476928">y</a></span><span class="op" id="5477031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477034">return</span>&nbsp;<span class="ident" id="5477041"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5477046">.</span><span class="ident" id="5477047">Gray16</span><span class="op" id="5477053">{</span><span class="builtintype" id="5477054">uint16</span><span class="op" id="5477060">(</span><span class="ident" id="5477061"><a href="/image/image.go.html#5476905">p</a></span><span class="op" id="5477062">.</span><span class="ident" id="5477063">Pix</span><span class="op" id="5477066">[</span><span class="ident" id="5477067"><a href="/image/image.go.html#5477010">i</a></span><span class="op" id="5477068">+</span><span class="num" id="5477069">0</span><span class="op" id="5477070">]</span><span class="op" id="5477071">)</span><span class="op" id="5477072">&lt;&lt;</span><span class="num" id="5477074">8</span>&nbsp;<span class="op" id="5477076">|</span>&nbsp;<span class="builtintype" id="5477078">uint16</span><span class="op" id="5477084">(</span><span class="ident" id="5477085"><a href="/image/image.go.html#5476905">p</a></span><span class="op" id="5477086">.</span><span class="ident" id="5477087">Pix</span><span class="op" id="5477090">[</span><span class="ident" id="5477091"><a href="/image/image.go.html#5477010">i</a></span><span class="op" id="5477092">+</span><span class="num" id="5477093">1</span><span class="op" id="5477094">]</span><span class="op" id="5477095">)</span><span class="op" id="5477096">}</span><br>
<span class="lineno"></span><span class="op" id="5477098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5477101">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno">775</span><span class="comment" id="5477180">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5477204">func</span>&nbsp;<span class="op" id="5477209">(</span><span class="ident" id="5477210">p</span>&nbsp;<span class="op" id="5477212">*</span><span class="ident" id="5477213"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5477219">)</span>&nbsp;<span class="ident" id="5477221">PixOffset</span><span class="op" id="5477230">(</span><span class="ident" id="5477231">x</span><span class="op" id="5477232">,</span>&nbsp;<span class="ident" id="5477234">y</span>&nbsp;<span class="builtintype" id="5477236">int</span><span class="op" id="5477239">)</span>&nbsp;<span class="builtintype" id="5477241">int</span>&nbsp;<span class="op" id="5477245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477248">return</span>&nbsp;<span class="op" id="5477255">(</span><span class="ident" id="5477256"><a href="/image/image.go.html#5477234">y</a></span><span class="op" id="5477257">-</span><span class="ident" id="5477258"><a href="/image/image.go.html#5477210">p</a></span><span class="op" id="5477259">.</span><span class="ident" id="5477260">Rect</span><span class="op" id="5477264">.</span><span class="ident" id="5477265">Min</span><span class="op" id="5477268">.</span><span class="ident" id="5477269">Y</span><span class="op" id="5477270">)</span><span class="op" id="5477271">*</span><span class="ident" id="5477272"><a href="/image/image.go.html#5477210">p</a></span><span class="op" id="5477273">.</span><span class="ident" id="5477274">Stride</span>&nbsp;<span class="op" id="5477281">+</span>&nbsp;<span class="op" id="5477283">(</span><span class="ident" id="5477284"><a href="/image/image.go.html#5477231">x</a></span><span class="op" id="5477285">-</span><span class="ident" id="5477286"><a href="/image/image.go.html#5477210">p</a></span><span class="op" id="5477287">.</span><span class="ident" id="5477288">Rect</span><span class="op" id="5477292">.</span><span class="ident" id="5477293">Min</span><span class="op" id="5477296">.</span><span class="ident" id="5477297">X</span><span class="op" id="5477298">)</span><span class="op" id="5477299">*</span><span class="num" id="5477300">2</span><br>
<span class="lineno"></span><span class="op" id="5477302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="5477305">func</span>&nbsp;<span class="op" id="5477310">(</span><span class="ident" id="5477311">p</span>&nbsp;<span class="op" id="5477313">*</span><span class="ident" id="5477314"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5477320">)</span>&nbsp;<span class="ident" id="5477322">Set</span><span class="op" id="5477325">(</span><span class="ident" id="5477326">x</span><span class="op" id="5477327">,</span>&nbsp;<span class="ident" id="5477329">y</span>&nbsp;<span class="builtintype" id="5477331">int</span><span class="op" id="5477334">,</span>&nbsp;<span class="ident" id="5477336">c</span>&nbsp;<span class="ident" id="5477338"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5477343">.</span><span class="ident" id="5477344">Color</span><span class="op" id="5477349">)</span>&nbsp;<span class="op" id="5477351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477354">if</span>&nbsp;<span class="op" id="5477357">!</span><span class="op" id="5477358">(</span><span class="ident" id="5477359"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5477364">{</span><span class="ident" id="5477365"><a href="/image/image.go.html#5477326">x</a></span><span class="op" id="5477366">,</span>&nbsp;<span class="ident" id="5477368"><a href="/image/image.go.html#5477329">y</a></span><span class="op" id="5477369">}</span><span class="op" id="5477370">.</span><span class="ident" id="5477371">In</span><span class="op" id="5477373">(</span><span class="ident" id="5477374"><a href="/image/image.go.html#5477311">p</a></span><span class="op" id="5477375">.</span><span class="ident" id="5477376">Rect</span><span class="op" id="5477380">)</span><span class="op" id="5477381">)</span>&nbsp;<span class="op" id="5477383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477387">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5477395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477398">i</span>&nbsp;<span class="op" id="5477400">:=</span>&nbsp;<span class="ident" id="5477403"><a href="/image/image.go.html#5477311">p</a></span><span class="op" id="5477404">.</span><span class="ident" id="5477405">PixOffset</span><span class="op" id="5477414">(</span><span class="ident" id="5477415"><a href="/image/image.go.html#5477326">x</a></span><span class="op" id="5477416">,</span>&nbsp;<span class="ident" id="5477418"><a href="/image/image.go.html#5477329">y</a></span><span class="op" id="5477419">)</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477422">c1</span>&nbsp;<span class="op" id="5477425">:=</span>&nbsp;<span class="ident" id="5477428"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5477433">.</span><span class="ident" id="5477434">Gray16Model</span><span class="op" id="5477445">.</span><span class="ident" id="5477446">Convert</span><span class="op" id="5477453">(</span><span class="ident" id="5477454"><a href="/image/image.go.html#5477336">c</a></span><span class="op" id="5477455">)</span><span class="op" id="5477456">.</span><span class="op" id="5477457">(</span><span class="ident" id="5477458"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5477463">.</span><span class="ident" id="5477464">Gray16</span><span class="op" id="5477470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477473"><a href="/image/image.go.html#5477311">p</a></span><span class="op" id="5477474">.</span><span class="ident" id="5477475">Pix</span><span class="op" id="5477478">[</span><span class="ident" id="5477479"><a href="/image/image.go.html#5477398">i</a></span><span class="op" id="5477480">+</span><span class="num" id="5477481">0</span><span class="op" id="5477482">]</span>&nbsp;<span class="op" id="5477484">=</span>&nbsp;<span class="builtintype" id="5477486">uint8</span><span class="op" id="5477491">(</span><span class="ident" id="5477492"><a href="/image/image.go.html#5477422">c1</a></span><span class="op" id="5477494">.</span><span class="ident" id="5477495">Y</span>&nbsp;<span class="op" id="5477497">&gt;&gt;</span>&nbsp;<span class="num" id="5477500">8</span><span class="op" id="5477501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477504"><a href="/image/image.go.html#5477311">p</a></span><span class="op" id="5477505">.</span><span class="ident" id="5477506">Pix</span><span class="op" id="5477509">[</span><span class="ident" id="5477510"><a href="/image/image.go.html#5477398">i</a></span><span class="op" id="5477511">+</span><span class="num" id="5477512">1</span><span class="op" id="5477513">]</span>&nbsp;<span class="op" id="5477515">=</span>&nbsp;<span class="builtintype" id="5477517">uint8</span><span class="op" id="5477522">(</span><span class="ident" id="5477523"><a href="/image/image.go.html#5477422">c1</a></span><span class="op" id="5477525">.</span><span class="ident" id="5477526">Y</span><span class="op" id="5477527">)</span><br>
<span class="lineno"></span><span class="op" id="5477529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="5477532">func</span>&nbsp;<span class="op" id="5477537">(</span><span class="ident" id="5477538">p</span>&nbsp;<span class="op" id="5477540">*</span><span class="ident" id="5477541"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5477547">)</span>&nbsp;<span class="ident" id="5477549">SetGray16</span><span class="op" id="5477558">(</span><span class="ident" id="5477559">x</span><span class="op" id="5477560">,</span>&nbsp;<span class="ident" id="5477562">y</span>&nbsp;<span class="builtintype" id="5477564">int</span><span class="op" id="5477567">,</span>&nbsp;<span class="ident" id="5477569">c</span>&nbsp;<span class="ident" id="5477571"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5477576">.</span><span class="ident" id="5477577">Gray16</span><span class="op" id="5477583">)</span>&nbsp;<span class="op" id="5477585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477588">if</span>&nbsp;<span class="op" id="5477591">!</span><span class="op" id="5477592">(</span><span class="ident" id="5477593"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5477598">{</span><span class="ident" id="5477599"><a href="/image/image.go.html#5477559">x</a></span><span class="op" id="5477600">,</span>&nbsp;<span class="ident" id="5477602"><a href="/image/image.go.html#5477562">y</a></span><span class="op" id="5477603">}</span><span class="op" id="5477604">.</span><span class="ident" id="5477605">In</span><span class="op" id="5477607">(</span><span class="ident" id="5477608"><a href="/image/image.go.html#5477538">p</a></span><span class="op" id="5477609">.</span><span class="ident" id="5477610">Rect</span><span class="op" id="5477614">)</span><span class="op" id="5477615">)</span>&nbsp;<span class="op" id="5477617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5477621">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5477629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477632">i</span>&nbsp;<span class="op" id="5477634">:=</span>&nbsp;<span class="ident" id="5477637"><a href="/image/image.go.html#5477538">p</a></span><span class="op" id="5477638">.</span><span class="ident" id="5477639">PixOffset</span><span class="op" id="5477648">(</span><span class="ident" id="5477649"><a href="/image/image.go.html#5477559">x</a></span><span class="op" id="5477650">,</span>&nbsp;<span class="ident" id="5477652"><a href="/image/image.go.html#5477562">y</a></span><span class="op" id="5477653">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477656"><a href="/image/image.go.html#5477538">p</a></span><span class="op" id="5477657">.</span><span class="ident" id="5477658">Pix</span><span class="op" id="5477661">[</span><span class="ident" id="5477662"><a href="/image/image.go.html#5477632">i</a></span><span class="op" id="5477663">+</span><span class="num" id="5477664">0</span><span class="op" id="5477665">]</span>&nbsp;<span class="op" id="5477667">=</span>&nbsp;<span class="builtintype" id="5477669">uint8</span><span class="op" id="5477674">(</span><span class="ident" id="5477675"><a href="/image/image.go.html#5477569">c</a></span><span class="op" id="5477676">.</span><span class="ident" id="5477677">Y</span>&nbsp;<span class="op" id="5477679">&gt;&gt;</span>&nbsp;<span class="num" id="5477682">8</span><span class="op" id="5477683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477686"><a href="/image/image.go.html#5477538">p</a></span><span class="op" id="5477687">.</span><span class="ident" id="5477688">Pix</span><span class="op" id="5477691">[</span><span class="ident" id="5477692"><a href="/image/image.go.html#5477632">i</a></span><span class="op" id="5477693">+</span><span class="num" id="5477694">1</span><span class="op" id="5477695">]</span>&nbsp;<span class="op" id="5477697">=</span>&nbsp;<span class="builtintype" id="5477699">uint8</span><span class="op" id="5477704">(</span><span class="ident" id="5477705"><a href="/image/image.go.html#5477569">c</a></span><span class="op" id="5477706">.</span><span class="ident" id="5477707">Y</span><span class="op" id="5477708">)</span><br>
<span class="lineno"></span><span class="op" id="5477710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5477713">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno">800</span><span class="comment" id="5477790">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5477862">func</span>&nbsp;<span class="op" id="5477867">(</span><span class="ident" id="5477868">p</span>&nbsp;<span class="op" id="5477870">*</span><span class="ident" id="5477871"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5477877">)</span>&nbsp;<span class="ident" id="5477879">SubImage</span><span class="op" id="5477887">(</span><span class="ident" id="5477888">r</span>&nbsp;<span class="ident" id="5477890"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5477899">)</span>&nbsp;<span class="ident" id="5477901"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5477907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5477910"><a href="/image/image.go.html#5477888">r</a></span>&nbsp;<span class="op" id="5477912">=</span>&nbsp;<span class="ident" id="5477914"><a href="/image/image.go.html#5477888">r</a></span><span class="op" id="5477915">.</span><span class="ident" id="5477916">Intersect</span><span class="op" id="5477925">(</span><span class="ident" id="5477926"><a href="/image/image.go.html#5477868">p</a></span><span class="op" id="5477927">.</span><span class="ident" id="5477928">Rect</span><span class="op" id="5477932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5477935">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478016">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478098">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5478148">if</span>&nbsp;<span class="ident" id="5478151"><a href="/image/image.go.html#5477888">r</a></span><span class="op" id="5478152">.</span><span class="ident" id="5478153">Empty</span><span class="op" id="5478158">(</span><span class="op" id="5478159">)</span>&nbsp;<span class="op" id="5478161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5478165">return</span>&nbsp;<span class="op" id="5478172">&amp;</span><span class="ident" id="5478173"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5478179">{</span><span class="op" id="5478180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5478183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478186">i</span>&nbsp;<span class="op" id="5478188">:=</span>&nbsp;<span class="ident" id="5478191"><a href="/image/image.go.html#5477868">p</a></span><span class="op" id="5478192">.</span><span class="ident" id="5478193">PixOffset</span><span class="op" id="5478202">(</span><span class="ident" id="5478203"><a href="/image/image.go.html#5477888">r</a></span><span class="op" id="5478204">.</span><span class="ident" id="5478205">Min</span><span class="op" id="5478208">.</span><span class="ident" id="5478209">X</span><span class="op" id="5478210">,</span>&nbsp;<span class="ident" id="5478212"><a href="/image/image.go.html#5477888">r</a></span><span class="op" id="5478213">.</span><span class="ident" id="5478214">Min</span><span class="op" id="5478217">.</span><span class="ident" id="5478218">Y</span><span class="op" id="5478219">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5478222">return</span>&nbsp;<span class="op" id="5478229">&amp;</span><span class="ident" id="5478230"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5478236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478240">Pix</span><span class="op" id="5478243">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5478248"><a href="/image/image.go.html#5477868">p</a></span><span class="op" id="5478249">.</span><span class="ident" id="5478250">Pix</span><span class="op" id="5478253">[</span><span class="ident" id="5478254"><a href="/image/image.go.html#5478186">i</a></span><span class="op" id="5478255">:</span><span class="op" id="5478256">]</span><span class="op" id="5478257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478261">Stride</span><span class="op" id="5478267">:</span>&nbsp;<span class="ident" id="5478269"><a href="/image/image.go.html#5477868">p</a></span><span class="op" id="5478270">.</span><span class="ident" id="5478271">Stride</span><span class="op" id="5478277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478281">Rect</span><span class="op" id="5478285">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5478289"><a href="/image/image.go.html#5477888">r</a></span><span class="op" id="5478290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5478293">}</span><br>
<span class="lineno">815</span><span class="op" id="5478295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5478298">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5478371">func</span>&nbsp;<span class="op" id="5478376">(</span><span class="ident" id="5478377">p</span>&nbsp;<span class="op" id="5478379">*</span><span class="ident" id="5478380"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5478386">)</span>&nbsp;<span class="ident" id="5478388">Opaque</span><span class="op" id="5478394">(</span><span class="op" id="5478395">)</span>&nbsp;<span class="builtintype" id="5478397">bool</span>&nbsp;<span class="op" id="5478402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5478405">return</span>&nbsp;<span class="ident" id="5478412">true</span><br>
<span class="lineno">820</span><span class="op" id="5478417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5478420">//&nbsp;NewGray16&nbsp;returns&nbsp;a&nbsp;new&nbsp;Gray16&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="5478477">func</span>&nbsp;<span class="ident" id="5478482">NewGray16</span><span class="op" id="5478491">(</span><span class="ident" id="5478492">r</span>&nbsp;<span class="ident" id="5478494"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5478503">)</span>&nbsp;<span class="op" id="5478505">*</span><span class="ident" id="5478506"><a href="/image/image.go.html#5476380">Gray16</a></span>&nbsp;<span class="op" id="5478513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478516">w</span><span class="op" id="5478517">,</span>&nbsp;<span class="ident" id="5478519">h</span>&nbsp;<span class="op" id="5478521">:=</span>&nbsp;<span class="ident" id="5478524"><a href="/image/image.go.html#5478492">r</a></span><span class="op" id="5478525">.</span><span class="ident" id="5478526">Dx</span><span class="op" id="5478528">(</span><span class="op" id="5478529">)</span><span class="op" id="5478530">,</span>&nbsp;<span class="ident" id="5478532"><a href="/image/image.go.html#5478492">r</a></span><span class="op" id="5478533">.</span><span class="ident" id="5478534">Dy</span><span class="op" id="5478536">(</span><span class="op" id="5478537">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478540">pix</span>&nbsp;<span class="op" id="5478544">:=</span>&nbsp;<span class="builtinfunc" id="5478547">make</span><span class="op" id="5478551">(</span><span class="op" id="5478552">[</span><span class="op" id="5478553">]</span><span class="builtintype" id="5478554">uint8</span><span class="op" id="5478559">,</span>&nbsp;<span class="num" id="5478561">2</span><span class="op" id="5478562">*</span><span class="ident" id="5478563"><a href="/image/image.go.html#5478516">w</a></span><span class="op" id="5478564">*</span><span class="ident" id="5478565"><a href="/image/image.go.html#5478519">h</a></span><span class="op" id="5478566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5478569">return</span>&nbsp;<span class="op" id="5478576">&amp;</span><span class="ident" id="5478577"><a href="/image/image.go.html#5476380">Gray16</a></span><span class="op" id="5478583">{</span><span class="ident" id="5478584"><a href="/image/image.go.html#5478540">pix</a></span><span class="op" id="5478587">,</span>&nbsp;<span class="num" id="5478589">2</span>&nbsp;<span class="op" id="5478591">*</span>&nbsp;<span class="ident" id="5478593"><a href="/image/image.go.html#5478516">w</a></span><span class="op" id="5478594">,</span>&nbsp;<span class="ident" id="5478596"><a href="/image/image.go.html#5478492">r</a></span><span class="op" id="5478597">}</span><br>
<span class="lineno"></span><span class="op" id="5478599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5478602">//&nbsp;Paletted&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;of&nbsp;uint8&nbsp;indices&nbsp;into&nbsp;a&nbsp;given&nbsp;palette.</span><br>
<span class="lineno">830</span><span class="keyword" id="5478675">type</span>&nbsp;<span class="ident" id="5478680">Paletted</span>&nbsp;<span class="keyword" id="5478689">struct</span>&nbsp;<span class="op" id="5478696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478699">//&nbsp;Pix&nbsp;holds&nbsp;the&nbsp;image&#39;s&nbsp;pixels,&nbsp;as&nbsp;palette&nbsp;indices.&nbsp;The&nbsp;pixel&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478766">//&nbsp;(x,&nbsp;y)&nbsp;starts&nbsp;at&nbsp;Pix[(y-Rect.Min.Y)*Stride&nbsp;+&nbsp;(x-Rect.Min.X)*1].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478834">Pix</span>&nbsp;<span class="op" id="5478838">[</span><span class="op" id="5478839">]</span><span class="builtintype" id="5478840">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478847">//&nbsp;Stride&nbsp;is&nbsp;the&nbsp;Pix&nbsp;stride&nbsp;(in&nbsp;bytes)&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478923">Stride</span>&nbsp;<span class="builtintype" id="5478930">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478935">//&nbsp;Rect&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;bounds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5478967">Rect</span>&nbsp;<span class="ident" id="5478972"><a href="/image/geom.go.html#5452241">Rectangle</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5478983">//&nbsp;Palette&nbsp;is&nbsp;the&nbsp;image&#39;s&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479019">Palette</span>&nbsp;<span class="ident" id="5479027"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5479032">.</span><span class="ident" id="5479033">Palette</span><br>
<span class="lineno">840</span><span class="op" id="5479041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5479044">func</span>&nbsp;<span class="op" id="5479049">(</span><span class="ident" id="5479050">p</span>&nbsp;<span class="op" id="5479052">*</span><span class="ident" id="5479053"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479061">)</span>&nbsp;<span class="ident" id="5479063">ColorModel</span><span class="op" id="5479073">(</span><span class="op" id="5479074">)</span>&nbsp;<span class="ident" id="5479076"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5479081">.</span><span class="ident" id="5479082">Model</span>&nbsp;<span class="op" id="5479088">{</span>&nbsp;<span class="keyword" id="5479090">return</span>&nbsp;<span class="ident" id="5479097"><a href="/image/image.go.html#5479050">p</a></span><span class="op" id="5479098">.</span><span class="ident" id="5479099">Palette</span>&nbsp;<span class="op" id="5479107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5479110">func</span>&nbsp;<span class="op" id="5479115">(</span><span class="ident" id="5479116">p</span>&nbsp;<span class="op" id="5479118">*</span><span class="ident" id="5479119"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479127">)</span>&nbsp;<span class="ident" id="5479129">Bounds</span><span class="op" id="5479135">(</span><span class="op" id="5479136">)</span>&nbsp;<span class="ident" id="5479138"><a href="/image/geom.go.html#5452241">Rectangle</a></span>&nbsp;<span class="op" id="5479148">{</span>&nbsp;<span class="keyword" id="5479150">return</span>&nbsp;<span class="ident" id="5479157"><a href="/image/image.go.html#5479116">p</a></span><span class="op" id="5479158">.</span><span class="ident" id="5479159">Rect</span>&nbsp;<span class="op" id="5479164">}</span><br>
<span class="lineno">845</span><br>
<span class="lineno"></span><span class="keyword" id="5479167">func</span>&nbsp;<span class="op" id="5479172">(</span><span class="ident" id="5479173">p</span>&nbsp;<span class="op" id="5479175">*</span><span class="ident" id="5479176"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479184">)</span>&nbsp;<span class="ident" id="5479186">At</span><span class="op" id="5479188">(</span><span class="ident" id="5479189">x</span><span class="op" id="5479190">,</span>&nbsp;<span class="ident" id="5479192">y</span>&nbsp;<span class="builtintype" id="5479194">int</span><span class="op" id="5479197">)</span>&nbsp;<span class="ident" id="5479199"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5479204">.</span><span class="ident" id="5479205">Color</span>&nbsp;<span class="op" id="5479211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479214">if</span>&nbsp;<span class="builtinfunc" id="5479217">len</span><span class="op" id="5479220">(</span><span class="ident" id="5479221"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479222">.</span><span class="ident" id="5479223">Palette</span><span class="op" id="5479230">)</span>&nbsp;<span class="op" id="5479232">==</span>&nbsp;<span class="num" id="5479235">0</span>&nbsp;<span class="op" id="5479237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479241">return</span>&nbsp;<span class="ident" id="5479248">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5479253">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479256">if</span>&nbsp;<span class="op" id="5479259">!</span><span class="op" id="5479260">(</span><span class="ident" id="5479261"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5479266">{</span><span class="ident" id="5479267"><a href="/image/image.go.html#5479189">x</a></span><span class="op" id="5479268">,</span>&nbsp;<span class="ident" id="5479270"><a href="/image/image.go.html#5479192">y</a></span><span class="op" id="5479271">}</span><span class="op" id="5479272">.</span><span class="ident" id="5479273">In</span><span class="op" id="5479275">(</span><span class="ident" id="5479276"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479277">.</span><span class="ident" id="5479278">Rect</span><span class="op" id="5479282">)</span><span class="op" id="5479283">)</span>&nbsp;<span class="op" id="5479285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479289">return</span>&nbsp;<span class="ident" id="5479296"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479297">.</span><span class="ident" id="5479298">Palette</span><span class="op" id="5479305">[</span><span class="num" id="5479306">0</span><span class="op" id="5479307">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5479310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479313">i</span>&nbsp;<span class="op" id="5479315">:=</span>&nbsp;<span class="ident" id="5479318"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479319">.</span><span class="ident" id="5479320">PixOffset</span><span class="op" id="5479329">(</span><span class="ident" id="5479330"><a href="/image/image.go.html#5479189">x</a></span><span class="op" id="5479331">,</span>&nbsp;<span class="ident" id="5479333"><a href="/image/image.go.html#5479192">y</a></span><span class="op" id="5479334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479337">return</span>&nbsp;<span class="ident" id="5479344"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479345">.</span><span class="ident" id="5479346">Palette</span><span class="op" id="5479353">[</span><span class="ident" id="5479354"><a href="/image/image.go.html#5479173">p</a></span><span class="op" id="5479355">.</span><span class="ident" id="5479356">Pix</span><span class="op" id="5479359">[</span><span class="ident" id="5479360"><a href="/image/image.go.html#5479313">i</a></span><span class="op" id="5479361">]</span><span class="op" id="5479362">]</span><br>
<span class="lineno">855</span><span class="op" id="5479364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479367">//&nbsp;PixOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Pix&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5479446">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="5479470">func</span>&nbsp;<span class="op" id="5479475">(</span><span class="ident" id="5479476">p</span>&nbsp;<span class="op" id="5479478">*</span><span class="ident" id="5479479"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479487">)</span>&nbsp;<span class="ident" id="5479489">PixOffset</span><span class="op" id="5479498">(</span><span class="ident" id="5479499">x</span><span class="op" id="5479500">,</span>&nbsp;<span class="ident" id="5479502">y</span>&nbsp;<span class="builtintype" id="5479504">int</span><span class="op" id="5479507">)</span>&nbsp;<span class="builtintype" id="5479509">int</span>&nbsp;<span class="op" id="5479513">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479516">return</span>&nbsp;<span class="op" id="5479523">(</span><span class="ident" id="5479524"><a href="/image/image.go.html#5479502">y</a></span><span class="op" id="5479525">-</span><span class="ident" id="5479526"><a href="/image/image.go.html#5479476">p</a></span><span class="op" id="5479527">.</span><span class="ident" id="5479528">Rect</span><span class="op" id="5479532">.</span><span class="ident" id="5479533">Min</span><span class="op" id="5479536">.</span><span class="ident" id="5479537">Y</span><span class="op" id="5479538">)</span><span class="op" id="5479539">*</span><span class="ident" id="5479540"><a href="/image/image.go.html#5479476">p</a></span><span class="op" id="5479541">.</span><span class="ident" id="5479542">Stride</span>&nbsp;<span class="op" id="5479549">+</span>&nbsp;<span class="op" id="5479551">(</span><span class="ident" id="5479552"><a href="/image/image.go.html#5479499">x</a></span><span class="op" id="5479553">-</span><span class="ident" id="5479554"><a href="/image/image.go.html#5479476">p</a></span><span class="op" id="5479555">.</span><span class="ident" id="5479556">Rect</span><span class="op" id="5479560">.</span><span class="ident" id="5479561">Min</span><span class="op" id="5479564">.</span><span class="ident" id="5479565">X</span><span class="op" id="5479566">)</span><span class="op" id="5479567">*</span><span class="num" id="5479568">1</span><br>
<span class="lineno"></span><span class="op" id="5479570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5479573">func</span>&nbsp;<span class="op" id="5479578">(</span><span class="ident" id="5479579">p</span>&nbsp;<span class="op" id="5479581">*</span><span class="ident" id="5479582"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479590">)</span>&nbsp;<span class="ident" id="5479592">Set</span><span class="op" id="5479595">(</span><span class="ident" id="5479596">x</span><span class="op" id="5479597">,</span>&nbsp;<span class="ident" id="5479599">y</span>&nbsp;<span class="builtintype" id="5479601">int</span><span class="op" id="5479604">,</span>&nbsp;<span class="ident" id="5479606">c</span>&nbsp;<span class="ident" id="5479608"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5479613">.</span><span class="ident" id="5479614">Color</span><span class="op" id="5479619">)</span>&nbsp;<span class="op" id="5479621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479624">if</span>&nbsp;<span class="op" id="5479627">!</span><span class="op" id="5479628">(</span><span class="ident" id="5479629"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5479634">{</span><span class="ident" id="5479635"><a href="/image/image.go.html#5479596">x</a></span><span class="op" id="5479636">,</span>&nbsp;<span class="ident" id="5479638"><a href="/image/image.go.html#5479599">y</a></span><span class="op" id="5479639">}</span><span class="op" id="5479640">.</span><span class="ident" id="5479641">In</span><span class="op" id="5479643">(</span><span class="ident" id="5479644"><a href="/image/image.go.html#5479579">p</a></span><span class="op" id="5479645">.</span><span class="ident" id="5479646">Rect</span><span class="op" id="5479650">)</span><span class="op" id="5479651">)</span>&nbsp;<span class="op" id="5479653">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479657">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5479665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479668">i</span>&nbsp;<span class="op" id="5479670">:=</span>&nbsp;<span class="ident" id="5479673"><a href="/image/image.go.html#5479579">p</a></span><span class="op" id="5479674">.</span><span class="ident" id="5479675">PixOffset</span><span class="op" id="5479684">(</span><span class="ident" id="5479685"><a href="/image/image.go.html#5479596">x</a></span><span class="op" id="5479686">,</span>&nbsp;<span class="ident" id="5479688"><a href="/image/image.go.html#5479599">y</a></span><span class="op" id="5479689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479692"><a href="/image/image.go.html#5479579">p</a></span><span class="op" id="5479693">.</span><span class="ident" id="5479694">Pix</span><span class="op" id="5479697">[</span><span class="ident" id="5479698"><a href="/image/image.go.html#5479668">i</a></span><span class="op" id="5479699">]</span>&nbsp;<span class="op" id="5479701">=</span>&nbsp;<span class="builtintype" id="5479703">uint8</span><span class="op" id="5479708">(</span><span class="ident" id="5479709"><a href="/image/image.go.html#5479579">p</a></span><span class="op" id="5479710">.</span><span class="ident" id="5479711">Palette</span><span class="op" id="5479718">.</span><span class="ident" id="5479719">Index</span><span class="op" id="5479724">(</span><span class="ident" id="5479725"><a href="/image/image.go.html#5479606">c</a></span><span class="op" id="5479726">)</span><span class="op" id="5479727">)</span><br>
<span class="lineno"></span><span class="op" id="5479729">}</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span><span class="keyword" id="5479732">func</span>&nbsp;<span class="op" id="5479737">(</span><span class="ident" id="5479738">p</span>&nbsp;<span class="op" id="5479740">*</span><span class="ident" id="5479741"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479749">)</span>&nbsp;<span class="ident" id="5479751">ColorIndexAt</span><span class="op" id="5479763">(</span><span class="ident" id="5479764">x</span><span class="op" id="5479765">,</span>&nbsp;<span class="ident" id="5479767">y</span>&nbsp;<span class="builtintype" id="5479769">int</span><span class="op" id="5479772">)</span>&nbsp;<span class="builtintype" id="5479774">uint8</span>&nbsp;<span class="op" id="5479780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479783">if</span>&nbsp;<span class="op" id="5479786">!</span><span class="op" id="5479787">(</span><span class="ident" id="5479788"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5479793">{</span><span class="ident" id="5479794"><a href="/image/image.go.html#5479764">x</a></span><span class="op" id="5479795">,</span>&nbsp;<span class="ident" id="5479797"><a href="/image/image.go.html#5479767">y</a></span><span class="op" id="5479798">}</span><span class="op" id="5479799">.</span><span class="ident" id="5479800">In</span><span class="op" id="5479802">(</span><span class="ident" id="5479803"><a href="/image/image.go.html#5479738">p</a></span><span class="op" id="5479804">.</span><span class="ident" id="5479805">Rect</span><span class="op" id="5479809">)</span><span class="op" id="5479810">)</span>&nbsp;<span class="op" id="5479812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479816">return</span>&nbsp;<span class="num" id="5479823">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5479826">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479829">i</span>&nbsp;<span class="op" id="5479831">:=</span>&nbsp;<span class="ident" id="5479834"><a href="/image/image.go.html#5479738">p</a></span><span class="op" id="5479835">.</span><span class="ident" id="5479836">PixOffset</span><span class="op" id="5479845">(</span><span class="ident" id="5479846"><a href="/image/image.go.html#5479764">x</a></span><span class="op" id="5479847">,</span>&nbsp;<span class="ident" id="5479849"><a href="/image/image.go.html#5479767">y</a></span><span class="op" id="5479850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479853">return</span>&nbsp;<span class="ident" id="5479860"><a href="/image/image.go.html#5479738">p</a></span><span class="op" id="5479861">.</span><span class="ident" id="5479862">Pix</span><span class="op" id="5479865">[</span><span class="ident" id="5479866"><a href="/image/image.go.html#5479829">i</a></span><span class="op" id="5479867">]</span><br>
<span class="lineno"></span><span class="op" id="5479869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5479872">func</span>&nbsp;<span class="op" id="5479877">(</span><span class="ident" id="5479878">p</span>&nbsp;<span class="op" id="5479880">*</span><span class="ident" id="5479881"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5479889">)</span>&nbsp;<span class="ident" id="5479891">SetColorIndex</span><span class="op" id="5479904">(</span><span class="ident" id="5479905">x</span><span class="op" id="5479906">,</span>&nbsp;<span class="ident" id="5479908">y</span>&nbsp;<span class="builtintype" id="5479910">int</span><span class="op" id="5479913">,</span>&nbsp;<span class="ident" id="5479915">index</span>&nbsp;<span class="builtintype" id="5479921">uint8</span><span class="op" id="5479926">)</span>&nbsp;<span class="op" id="5479928">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479931">if</span>&nbsp;<span class="op" id="5479934">!</span><span class="op" id="5479935">(</span><span class="ident" id="5479936"><a href="/image/geom.go.html#5450680">Point</a></span><span class="op" id="5479941">{</span><span class="ident" id="5479942"><a href="/image/image.go.html#5479905">x</a></span><span class="op" id="5479943">,</span>&nbsp;<span class="ident" id="5479945"><a href="/image/image.go.html#5479908">y</a></span><span class="op" id="5479946">}</span><span class="op" id="5479947">.</span><span class="ident" id="5479948">In</span><span class="op" id="5479950">(</span><span class="ident" id="5479951"><a href="/image/image.go.html#5479878">p</a></span><span class="op" id="5479952">.</span><span class="ident" id="5479953">Rect</span><span class="op" id="5479957">)</span><span class="op" id="5479958">)</span>&nbsp;<span class="op" id="5479960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5479964">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5479972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479975">i</span>&nbsp;<span class="op" id="5479977">:=</span>&nbsp;<span class="ident" id="5479980"><a href="/image/image.go.html#5479878">p</a></span><span class="op" id="5479981">.</span><span class="ident" id="5479982">PixOffset</span><span class="op" id="5479991">(</span><span class="ident" id="5479992"><a href="/image/image.go.html#5479905">x</a></span><span class="op" id="5479993">,</span>&nbsp;<span class="ident" id="5479995"><a href="/image/image.go.html#5479908">y</a></span><span class="op" id="5479996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479999"><a href="/image/image.go.html#5479878">p</a></span><span class="op" id="5480000">.</span><span class="ident" id="5480001">Pix</span><span class="op" id="5480004">[</span><span class="ident" id="5480005"><a href="/image/image.go.html#5479975">i</a></span><span class="op" id="5480006">]</span>&nbsp;<span class="op" id="5480008">=</span>&nbsp;<span class="ident" id="5480010"><a href="/image/image.go.html#5479915">index</a></span><br>
<span class="lineno">885</span><span class="op" id="5480016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480019">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="5480096">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="5480168">func</span>&nbsp;<span class="op" id="5480173">(</span><span class="ident" id="5480174">p</span>&nbsp;<span class="op" id="5480176">*</span><span class="ident" id="5480177"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5480185">)</span>&nbsp;<span class="ident" id="5480187">SubImage</span><span class="op" id="5480195">(</span><span class="ident" id="5480196">r</span>&nbsp;<span class="ident" id="5480198"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5480207">)</span>&nbsp;<span class="ident" id="5480209"><a href="/image/image.go.html#5457152">Image</a></span>&nbsp;<span class="op" id="5480215">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480218"><a href="/image/image.go.html#5480196">r</a></span>&nbsp;<span class="op" id="5480220">=</span>&nbsp;<span class="ident" id="5480222"><a href="/image/image.go.html#5480196">r</a></span><span class="op" id="5480223">.</span><span class="ident" id="5480224">Intersect</span><span class="op" id="5480233">(</span><span class="ident" id="5480234"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480235">.</span><span class="ident" id="5480236">Rect</span><span class="op" id="5480240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5480243">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5480324">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5480406">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480456">if</span>&nbsp;<span class="ident" id="5480459"><a href="/image/image.go.html#5480196">r</a></span><span class="op" id="5480460">.</span><span class="ident" id="5480461">Empty</span><span class="op" id="5480466">(</span><span class="op" id="5480467">)</span>&nbsp;<span class="op" id="5480469">{</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480473">return</span>&nbsp;<span class="op" id="5480480">&amp;</span><span class="ident" id="5480481"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5480489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480494">Palette</span><span class="op" id="5480501">:</span>&nbsp;<span class="ident" id="5480503"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480504">.</span><span class="ident" id="5480505">Palette</span><span class="op" id="5480512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480522">i</span>&nbsp;<span class="op" id="5480524">:=</span>&nbsp;<span class="ident" id="5480527"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480528">.</span><span class="ident" id="5480529">PixOffset</span><span class="op" id="5480538">(</span><span class="ident" id="5480539"><a href="/image/image.go.html#5480196">r</a></span><span class="op" id="5480540">.</span><span class="ident" id="5480541">Min</span><span class="op" id="5480544">.</span><span class="ident" id="5480545">X</span><span class="op" id="5480546">,</span>&nbsp;<span class="ident" id="5480548"><a href="/image/image.go.html#5480196">r</a></span><span class="op" id="5480549">.</span><span class="ident" id="5480550">Min</span><span class="op" id="5480553">.</span><span class="ident" id="5480554">Y</span><span class="op" id="5480555">)</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480558">return</span>&nbsp;<span class="op" id="5480565">&amp;</span><span class="ident" id="5480566"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5480574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480578">Pix</span><span class="op" id="5480581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480587"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480588">.</span><span class="ident" id="5480589">Pix</span><span class="op" id="5480592">[</span><span class="ident" id="5480593"><a href="/image/image.go.html#5480522">i</a></span><span class="op" id="5480594">:</span><span class="op" id="5480595">]</span><span class="op" id="5480596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480600">Stride</span><span class="op" id="5480606">:</span>&nbsp;&nbsp;<span class="ident" id="5480609"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480610">.</span><span class="ident" id="5480611">Stride</span><span class="op" id="5480617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480621">Rect</span><span class="op" id="5480625">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5480630"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480631">.</span><span class="ident" id="5480632">Rect</span><span class="op" id="5480636">.</span><span class="ident" id="5480637">Intersect</span><span class="op" id="5480646">(</span><span class="ident" id="5480647"><a href="/image/image.go.html#5480196">r</a></span><span class="op" id="5480648">)</span><span class="op" id="5480649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480653">Palette</span><span class="op" id="5480660">:</span>&nbsp;<span class="ident" id="5480662"><a href="/image/image.go.html#5480174">p</a></span><span class="op" id="5480663">.</span><span class="ident" id="5480664">Palette</span><span class="op" id="5480671">,</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480674">}</span><br>
<span class="lineno"></span><span class="op" id="5480676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5480679">//&nbsp;Opaque&nbsp;scans&nbsp;the&nbsp;entire&nbsp;image&nbsp;and&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;fully&nbsp;opaque.</span><br>
<span class="lineno"></span><span class="keyword" id="5480752">func</span>&nbsp;<span class="op" id="5480757">(</span><span class="ident" id="5480758">p</span>&nbsp;<span class="op" id="5480760">*</span><span class="ident" id="5480761"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5480769">)</span>&nbsp;<span class="ident" id="5480771">Opaque</span><span class="op" id="5480777">(</span><span class="op" id="5480778">)</span>&nbsp;<span class="builtintype" id="5480780">bool</span>&nbsp;<span class="op" id="5480785">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480788">var</span>&nbsp;<span class="ident" id="5480792">present</span>&nbsp;<span class="op" id="5480800">[</span><span class="num" id="5480801">256</span><span class="op" id="5480804">]</span><span class="builtintype" id="5480805">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480811">i0</span><span class="op" id="5480813">,</span>&nbsp;<span class="ident" id="5480815">i1</span>&nbsp;<span class="op" id="5480818">:=</span>&nbsp;<span class="num" id="5480821">0</span><span class="op" id="5480822">,</span>&nbsp;<span class="ident" id="5480824"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480825">.</span><span class="ident" id="5480826">Rect</span><span class="op" id="5480830">.</span><span class="ident" id="5480831">Dx</span><span class="op" id="5480833">(</span><span class="op" id="5480834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480837">for</span>&nbsp;<span class="ident" id="5480841">y</span>&nbsp;<span class="op" id="5480843">:=</span>&nbsp;<span class="ident" id="5480846"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480847">.</span><span class="ident" id="5480848">Rect</span><span class="op" id="5480852">.</span><span class="ident" id="5480853">Min</span><span class="op" id="5480856">.</span><span class="ident" id="5480857">Y</span><span class="op" id="5480858">;</span>&nbsp;<span class="ident" id="5480860"><a href="/image/image.go.html#5480841">y</a></span>&nbsp;<span class="op" id="5480862">&lt;</span>&nbsp;<span class="ident" id="5480864"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480865">.</span><span class="ident" id="5480866">Rect</span><span class="op" id="5480870">.</span><span class="ident" id="5480871">Max</span><span class="op" id="5480874">.</span><span class="ident" id="5480875">Y</span><span class="op" id="5480876">;</span>&nbsp;<span class="ident" id="5480878"><a href="/image/image.go.html#5480841">y</a></span><span class="op" id="5480879">++</span>&nbsp;<span class="op" id="5480882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480886">for</span>&nbsp;<span class="ident" id="5480890">_</span><span class="op" id="5480891">,</span>&nbsp;<span class="ident" id="5480893">c</span>&nbsp;<span class="op" id="5480895">:=</span>&nbsp;<span class="keyword" id="5480898">range</span>&nbsp;<span class="ident" id="5480904"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480905">.</span><span class="ident" id="5480906">Pix</span><span class="op" id="5480909">[</span><span class="ident" id="5480910"><a href="/image/image.go.html#5480811">i0</a></span><span class="op" id="5480912">:</span><span class="ident" id="5480913"><a href="/image/image.go.html#5480815">i1</a></span><span class="op" id="5480915">]</span>&nbsp;<span class="op" id="5480917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480922"><a href="/image/image.go.html#5480792">present</a></span><span class="op" id="5480929">[</span><span class="ident" id="5480930"><a href="/image/image.go.html#5480893">c</a></span><span class="op" id="5480931">]</span>&nbsp;<span class="op" id="5480933">=</span>&nbsp;<span class="ident" id="5480935">true</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480946"><a href="/image/image.go.html#5480811">i0</a></span>&nbsp;<span class="op" id="5480949">+=</span>&nbsp;<span class="ident" id="5480952"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480953">.</span><span class="ident" id="5480954">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480963"><a href="/image/image.go.html#5480815">i1</a></span>&nbsp;<span class="op" id="5480966">+=</span>&nbsp;<span class="ident" id="5480969"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5480970">.</span><span class="ident" id="5480971">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480982">for</span>&nbsp;<span class="ident" id="5480986">i</span><span class="op" id="5480987">,</span>&nbsp;<span class="ident" id="5480989">c</span>&nbsp;<span class="op" id="5480991">:=</span>&nbsp;<span class="keyword" id="5480994">range</span>&nbsp;<span class="ident" id="5481000"><a href="/image/image.go.html#5480758">p</a></span><span class="op" id="5481001">.</span><span class="ident" id="5481002">Palette</span>&nbsp;<span class="op" id="5481010">{</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481014">if</span>&nbsp;<span class="op" id="5481017">!</span><span class="ident" id="5481018"><a href="/image/image.go.html#5480792">present</a></span><span class="op" id="5481025">[</span><span class="ident" id="5481026"><a href="/image/image.go.html#5480986">i</a></span><span class="op" id="5481027">]</span>&nbsp;<span class="op" id="5481029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481034">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481049">_</span><span class="op" id="5481050">,</span>&nbsp;<span class="ident" id="5481052">_</span><span class="op" id="5481053">,</span>&nbsp;<span class="ident" id="5481055">_</span><span class="op" id="5481056">,</span>&nbsp;<span class="ident" id="5481058">a</span>&nbsp;<span class="op" id="5481060">:=</span>&nbsp;<span class="ident" id="5481063"><a href="/image/image.go.html#5480989">c</a></span><span class="op" id="5481064">.</span><span class="ident" id="5481065">RGBA</span><span class="op" id="5481069">(</span><span class="op" id="5481070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481074">if</span>&nbsp;<span class="ident" id="5481077"><a href="/image/image.go.html#5481058">a</a></span>&nbsp;<span class="op" id="5481079">!=</span>&nbsp;<span class="num" id="5481082">0xffff</span>&nbsp;<span class="op" id="5481089">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481094">return</span>&nbsp;<span class="ident" id="5481101">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481115">return</span>&nbsp;<span class="ident" id="5481122">true</span><br>
<span class="lineno"></span><span class="op" id="5481127">}</span><br>
<span class="lineno">930</span><br>
<span class="lineno"></span><span class="comment" id="5481130">//&nbsp;NewPaletted&nbsp;returns&nbsp;a&nbsp;new&nbsp;Paletted&nbsp;with&nbsp;the&nbsp;given&nbsp;width,&nbsp;height&nbsp;and&nbsp;palette.</span><br>
<span class="lineno"></span><span class="keyword" id="5481210">func</span>&nbsp;<span class="ident" id="5481215">NewPaletted</span><span class="op" id="5481226">(</span><span class="ident" id="5481227">r</span>&nbsp;<span class="ident" id="5481229"><a href="/image/geom.go.html#5452241">Rectangle</a></span><span class="op" id="5481238">,</span>&nbsp;<span class="ident" id="5481240">p</span>&nbsp;<span class="ident" id="5481242"><a href="/image/image.go.html#5456916">color</a></span><span class="op" id="5481247">.</span><span class="ident" id="5481248">Palette</span><span class="op" id="5481255">)</span>&nbsp;<span class="op" id="5481257">*</span><span class="ident" id="5481258"><a href="/image/image.go.html#5478680">Paletted</a></span>&nbsp;<span class="op" id="5481267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481270">w</span><span class="op" id="5481271">,</span>&nbsp;<span class="ident" id="5481273">h</span>&nbsp;<span class="op" id="5481275">:=</span>&nbsp;<span class="ident" id="5481278"><a href="/image/image.go.html#5481227">r</a></span><span class="op" id="5481279">.</span><span class="ident" id="5481280">Dx</span><span class="op" id="5481282">(</span><span class="op" id="5481283">)</span><span class="op" id="5481284">,</span>&nbsp;<span class="ident" id="5481286"><a href="/image/image.go.html#5481227">r</a></span><span class="op" id="5481287">.</span><span class="ident" id="5481288">Dy</span><span class="op" id="5481290">(</span><span class="op" id="5481291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481294">pix</span>&nbsp;<span class="op" id="5481298">:=</span>&nbsp;<span class="builtinfunc" id="5481301">make</span><span class="op" id="5481305">(</span><span class="op" id="5481306">[</span><span class="op" id="5481307">]</span><span class="builtintype" id="5481308">uint8</span><span class="op" id="5481313">,</span>&nbsp;<span class="num" id="5481315">1</span><span class="op" id="5481316">*</span><span class="ident" id="5481317"><a href="/image/image.go.html#5481270">w</a></span><span class="op" id="5481318">*</span><span class="ident" id="5481319"><a href="/image/image.go.html#5481273">h</a></span><span class="op" id="5481320">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481323">return</span>&nbsp;<span class="op" id="5481330">&amp;</span><span class="ident" id="5481331"><a href="/image/image.go.html#5478680">Paletted</a></span><span class="op" id="5481339">{</span><span class="ident" id="5481340"><a href="/image/image.go.html#5481294">pix</a></span><span class="op" id="5481343">,</span>&nbsp;<span class="num" id="5481345">1</span>&nbsp;<span class="op" id="5481347">*</span>&nbsp;<span class="ident" id="5481349"><a href="/image/image.go.html#5481270">w</a></span><span class="op" id="5481350">,</span>&nbsp;<span class="ident" id="5481352"><a href="/image/image.go.html#5481227">r</a></span><span class="op" id="5481353">,</span>&nbsp;<span class="ident" id="5481355"><a href="/image/image.go.html#5481240">p</a></span><span class="op" id="5481356">}</span><br>
<span class="lineno"></span><span class="op" id="5481358">}</span>
</div>
</body>
</html>
