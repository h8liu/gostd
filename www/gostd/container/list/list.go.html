<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4540372">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4540427">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4540481">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4540532">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4540581">//</span><br>
<span class="lineno"></span><span class="comment" id="4540584">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4540632">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4540680">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4540713">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4540718">//</span><br>
<span class="lineno"></span><span class="keyword" id="4540721">package</span>&nbsp;<span class="ident" id="4540729">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4540735">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4540778">type</span>&nbsp;<span class="ident" id="4540783">Element</span>&nbsp;<span class="keyword" id="4540791">struct</span>&nbsp;<span class="op" id="4540798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4540801">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4540871">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4540942">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4541012">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4541083">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541108">next</span><span class="op" id="4541112">,</span>&nbsp;<span class="ident" id="4541114">prev</span>&nbsp;<span class="op" id="4541119">*</span><span class="ident" id="4541120">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4541130">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541174">list</span>&nbsp;<span class="op" id="4541179">*</span><span class="ident" id="4541180">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4541187">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541227">Value</span>&nbsp;<span class="keyword" id="4541233">interface</span><span class="op" id="4541242">{</span><span class="op" id="4541243">}</span><br>
<span class="lineno"></span><span class="op" id="4541245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4541248">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4541294">func</span>&nbsp;<span class="op" id="4541299">(</span><span class="ident" id="4541300">e</span>&nbsp;<span class="op" id="4541302">*</span><span class="ident" id="4541303">Element</span><span class="op" id="4541310">)</span>&nbsp;<span class="ident" id="4541312">Next</span><span class="op" id="4541316">(</span><span class="op" id="4541317">)</span>&nbsp;<span class="op" id="4541319">*</span><span class="ident" id="4541320">Element</span>&nbsp;<span class="op" id="4541328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541331">if</span>&nbsp;<span class="ident" id="4541334">p</span>&nbsp;<span class="op" id="4541336">:=</span>&nbsp;<span class="ident" id="4541339">e</span><span class="op" id="4541340">.</span><span class="ident" id="4541341">next</span><span class="op" id="4541345">;</span>&nbsp;<span class="ident" id="4541347">e</span><span class="op" id="4541348">.</span><span class="ident" id="4541349">list</span>&nbsp;<span class="op" id="4541354">!=</span>&nbsp;<span class="ident" id="4541357">nil</span>&nbsp;<span class="op" id="4541361">&amp;&amp;</span>&nbsp;<span class="ident" id="4541364">p</span>&nbsp;<span class="op" id="4541366">!=</span>&nbsp;<span class="op" id="4541369">&amp;</span><span class="ident" id="4541370">e</span><span class="op" id="4541371">.</span><span class="ident" id="4541372">list</span><span class="op" id="4541376">.</span><span class="ident" id="4541377">root</span>&nbsp;<span class="op" id="4541382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541386">return</span>&nbsp;<span class="ident" id="4541393">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4541396">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541399">return</span>&nbsp;<span class="ident" id="4541406">nil</span><br>
<span class="lineno"></span><span class="op" id="4541410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4541413">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4541463">func</span>&nbsp;<span class="op" id="4541468">(</span><span class="ident" id="4541469">e</span>&nbsp;<span class="op" id="4541471">*</span><span class="ident" id="4541472">Element</span><span class="op" id="4541479">)</span>&nbsp;<span class="ident" id="4541481">Prev</span><span class="op" id="4541485">(</span><span class="op" id="4541486">)</span>&nbsp;<span class="op" id="4541488">*</span><span class="ident" id="4541489">Element</span>&nbsp;<span class="op" id="4541497">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541500">if</span>&nbsp;<span class="ident" id="4541503">p</span>&nbsp;<span class="op" id="4541505">:=</span>&nbsp;<span class="ident" id="4541508">e</span><span class="op" id="4541509">.</span><span class="ident" id="4541510">prev</span><span class="op" id="4541514">;</span>&nbsp;<span class="ident" id="4541516">e</span><span class="op" id="4541517">.</span><span class="ident" id="4541518">list</span>&nbsp;<span class="op" id="4541523">!=</span>&nbsp;<span class="ident" id="4541526">nil</span>&nbsp;<span class="op" id="4541530">&amp;&amp;</span>&nbsp;<span class="ident" id="4541533">p</span>&nbsp;<span class="op" id="4541535">!=</span>&nbsp;<span class="op" id="4541538">&amp;</span><span class="ident" id="4541539">e</span><span class="op" id="4541540">.</span><span class="ident" id="4541541">list</span><span class="op" id="4541545">.</span><span class="ident" id="4541546">root</span>&nbsp;<span class="op" id="4541551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541555">return</span>&nbsp;<span class="ident" id="4541562">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4541565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541568">return</span>&nbsp;<span class="ident" id="4541575">nil</span><br>
<span class="lineno"></span><span class="op" id="4541579">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4541582">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4541623">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4541681">type</span>&nbsp;<span class="ident" id="4541686">List</span>&nbsp;<span class="keyword" id="4541691">struct</span>&nbsp;<span class="op" id="4541698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541701">root</span>&nbsp;<span class="ident" id="4541706">Element</span>&nbsp;<span class="comment" id="4541714">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4541787">len</span>&nbsp;&nbsp;<span class="builtintype" id="4541792">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4541800">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4541857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4541860">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4541898">func</span>&nbsp;<span class="op" id="4541903">(</span><span class="ident" id="4541904">l</span>&nbsp;<span class="op" id="4541906">*</span><span class="ident" id="4541907">List</span><span class="op" id="4541911">)</span>&nbsp;<span class="ident" id="4541913">Init</span><span class="op" id="4541917">(</span><span class="op" id="4541918">)</span>&nbsp;<span class="op" id="4541920">*</span><span class="ident" id="4541921">List</span>&nbsp;<span class="op" id="4541926">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541929">l</span><span class="op" id="4541930">.</span><span class="ident" id="4541931">root</span><span class="op" id="4541935">.</span><span class="ident" id="4541936">next</span>&nbsp;<span class="op" id="4541941">=</span>&nbsp;<span class="op" id="4541943">&amp;</span><span class="ident" id="4541944">l</span><span class="op" id="4541945">.</span><span class="ident" id="4541946">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541952">l</span><span class="op" id="4541953">.</span><span class="ident" id="4541954">root</span><span class="op" id="4541958">.</span><span class="ident" id="4541959">prev</span>&nbsp;<span class="op" id="4541964">=</span>&nbsp;<span class="op" id="4541966">&amp;</span><span class="ident" id="4541967">l</span><span class="op" id="4541968">.</span><span class="ident" id="4541969">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4541975">l</span><span class="op" id="4541976">.</span><span class="builtinfunc" id="4541977">len</span>&nbsp;<span class="op" id="4541981">=</span>&nbsp;<span class="num" id="4541983">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4541986">return</span>&nbsp;<span class="ident" id="4541993">l</span><br>
<span class="lineno"></span><span class="op" id="4541995">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4541998">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4542034">func</span>&nbsp;<span class="ident" id="4542039">New</span><span class="op" id="4542042">(</span><span class="op" id="4542043">)</span>&nbsp;<span class="op" id="4542045">*</span><span class="ident" id="4542046">List</span>&nbsp;<span class="op" id="4542051">{</span>&nbsp;<span class="keyword" id="4542053">return</span>&nbsp;<span class="builtinfunc" id="4542060">new</span><span class="op" id="4542063">(</span><span class="ident" id="4542064">List</span><span class="op" id="4542068">)</span><span class="op" id="4542069">.</span><span class="ident" id="4542070">Init</span><span class="op" id="4542074">(</span><span class="op" id="4542075">)</span>&nbsp;<span class="op" id="4542077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4542080">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4542129">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4542156">func</span>&nbsp;<span class="op" id="4542161">(</span><span class="ident" id="4542162">l</span>&nbsp;<span class="op" id="4542164">*</span><span class="ident" id="4542165">List</span><span class="op" id="4542169">)</span>&nbsp;<span class="ident" id="4542171">Len</span><span class="op" id="4542174">(</span><span class="op" id="4542175">)</span>&nbsp;<span class="builtintype" id="4542177">int</span>&nbsp;<span class="op" id="4542181">{</span>&nbsp;<span class="keyword" id="4542183">return</span>&nbsp;<span class="ident" id="4542190">l</span><span class="op" id="4542191">.</span><span class="builtinfunc" id="4542192">len</span>&nbsp;<span class="op" id="4542196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4542199">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4542252">func</span>&nbsp;<span class="op" id="4542257">(</span><span class="ident" id="4542258">l</span>&nbsp;<span class="op" id="4542260">*</span><span class="ident" id="4542261">List</span><span class="op" id="4542265">)</span>&nbsp;<span class="ident" id="4542267">Front</span><span class="op" id="4542272">(</span><span class="op" id="4542273">)</span>&nbsp;<span class="op" id="4542275">*</span><span class="ident" id="4542276">Element</span>&nbsp;<span class="op" id="4542284">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542287">if</span>&nbsp;<span class="ident" id="4542290">l</span><span class="op" id="4542291">.</span><span class="builtinfunc" id="4542292">len</span>&nbsp;<span class="op" id="4542296">==</span>&nbsp;<span class="num" id="4542299">0</span>&nbsp;<span class="op" id="4542301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542305">return</span>&nbsp;<span class="ident" id="4542312">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4542317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542320">return</span>&nbsp;<span class="ident" id="4542327">l</span><span class="op" id="4542328">.</span><span class="ident" id="4542329">root</span><span class="op" id="4542333">.</span><span class="ident" id="4542334">next</span><br>
<span class="lineno"></span><span class="op" id="4542339">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4542342">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4542393">func</span>&nbsp;<span class="op" id="4542398">(</span><span class="ident" id="4542399">l</span>&nbsp;<span class="op" id="4542401">*</span><span class="ident" id="4542402">List</span><span class="op" id="4542406">)</span>&nbsp;<span class="ident" id="4542408">Back</span><span class="op" id="4542412">(</span><span class="op" id="4542413">)</span>&nbsp;<span class="op" id="4542415">*</span><span class="ident" id="4542416">Element</span>&nbsp;<span class="op" id="4542424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542427">if</span>&nbsp;<span class="ident" id="4542430">l</span><span class="op" id="4542431">.</span><span class="builtinfunc" id="4542432">len</span>&nbsp;<span class="op" id="4542436">==</span>&nbsp;<span class="num" id="4542439">0</span>&nbsp;<span class="op" id="4542441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542445">return</span>&nbsp;<span class="ident" id="4542452">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4542457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542460">return</span>&nbsp;<span class="ident" id="4542467">l</span><span class="op" id="4542468">.</span><span class="ident" id="4542469">root</span><span class="op" id="4542473">.</span><span class="ident" id="4542474">prev</span><br>
<span class="lineno"></span><span class="op" id="4542479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4542482">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4542532">func</span>&nbsp;<span class="op" id="4542537">(</span><span class="ident" id="4542538">l</span>&nbsp;<span class="op" id="4542540">*</span><span class="ident" id="4542541">List</span><span class="op" id="4542545">)</span>&nbsp;<span class="ident" id="4542547">lazyInit</span><span class="op" id="4542555">(</span><span class="op" id="4542556">)</span>&nbsp;<span class="op" id="4542558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542561">if</span>&nbsp;<span class="ident" id="4542564">l</span><span class="op" id="4542565">.</span><span class="ident" id="4542566">root</span><span class="op" id="4542570">.</span><span class="ident" id="4542571">next</span>&nbsp;<span class="op" id="4542576">==</span>&nbsp;<span class="ident" id="4542579">nil</span>&nbsp;<span class="op" id="4542583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542587">l</span><span class="op" id="4542588">.</span><span class="ident" id="4542589">Init</span><span class="op" id="4542593">(</span><span class="op" id="4542594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4542597">}</span><br>
<span class="lineno"></span><span class="op" id="4542599">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4542602">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4542665">func</span>&nbsp;<span class="op" id="4542670">(</span><span class="ident" id="4542671">l</span>&nbsp;<span class="op" id="4542673">*</span><span class="ident" id="4542674">List</span><span class="op" id="4542678">)</span>&nbsp;<span class="ident" id="4542680">insert</span><span class="op" id="4542686">(</span><span class="ident" id="4542687">e</span><span class="op" id="4542688">,</span>&nbsp;<span class="ident" id="4542690">at</span>&nbsp;<span class="op" id="4542693">*</span><span class="ident" id="4542694">Element</span><span class="op" id="4542701">)</span>&nbsp;<span class="op" id="4542703">*</span><span class="ident" id="4542704">Element</span>&nbsp;<span class="op" id="4542712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542715">n</span>&nbsp;<span class="op" id="4542717">:=</span>&nbsp;<span class="ident" id="4542720">at</span><span class="op" id="4542722">.</span><span class="ident" id="4542723">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542729">at</span><span class="op" id="4542731">.</span><span class="ident" id="4542732">next</span>&nbsp;<span class="op" id="4542737">=</span>&nbsp;<span class="ident" id="4542739">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542742">e</span><span class="op" id="4542743">.</span><span class="ident" id="4542744">prev</span>&nbsp;<span class="op" id="4542749">=</span>&nbsp;<span class="ident" id="4542751">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542755">e</span><span class="op" id="4542756">.</span><span class="ident" id="4542757">next</span>&nbsp;<span class="op" id="4542762">=</span>&nbsp;<span class="ident" id="4542764">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542767">n</span><span class="op" id="4542768">.</span><span class="ident" id="4542769">prev</span>&nbsp;<span class="op" id="4542774">=</span>&nbsp;<span class="ident" id="4542776">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542779">e</span><span class="op" id="4542780">.</span><span class="ident" id="4542781">list</span>&nbsp;<span class="op" id="4542786">=</span>&nbsp;<span class="ident" id="4542788">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4542791">l</span><span class="op" id="4542792">.</span><span class="builtinfunc" id="4542793">len</span><span class="op" id="4542796">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542800">return</span>&nbsp;<span class="ident" id="4542807">e</span><br>
<span class="lineno"></span><span class="op" id="4542809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4542812">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4542888">func</span>&nbsp;<span class="op" id="4542893">(</span><span class="ident" id="4542894">l</span>&nbsp;<span class="op" id="4542896">*</span><span class="ident" id="4542897">List</span><span class="op" id="4542901">)</span>&nbsp;<span class="ident" id="4542903">insertValue</span><span class="op" id="4542914">(</span><span class="ident" id="4542915">v</span>&nbsp;<span class="keyword" id="4542917">interface</span><span class="op" id="4542926">{</span><span class="op" id="4542927">}</span><span class="op" id="4542928">,</span>&nbsp;<span class="ident" id="4542930">at</span>&nbsp;<span class="op" id="4542933">*</span><span class="ident" id="4542934">Element</span><span class="op" id="4542941">)</span>&nbsp;<span class="op" id="4542943">*</span><span class="ident" id="4542944">Element</span>&nbsp;<span class="op" id="4542952">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4542955">return</span>&nbsp;<span class="ident" id="4542962">l</span><span class="op" id="4542963">.</span><span class="ident" id="4542964">insert</span><span class="op" id="4542970">(</span><span class="op" id="4542971">&amp;</span><span class="ident" id="4542972">Element</span><span class="op" id="4542979">{</span><span class="ident" id="4542980">Value</span><span class="op" id="4542985">:</span>&nbsp;<span class="ident" id="4542987">v</span><span class="op" id="4542988">}</span><span class="op" id="4542989">,</span>&nbsp;<span class="ident" id="4542991">at</span><span class="op" id="4542993">)</span><br>
<span class="lineno"></span><span class="op" id="4542995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4542998">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4543066">func</span>&nbsp;<span class="op" id="4543071">(</span><span class="ident" id="4543072">l</span>&nbsp;<span class="op" id="4543074">*</span><span class="ident" id="4543075">List</span><span class="op" id="4543079">)</span>&nbsp;<span class="ident" id="4543081">remove</span><span class="op" id="4543087">(</span><span class="ident" id="4543088">e</span>&nbsp;<span class="op" id="4543090">*</span><span class="ident" id="4543091">Element</span><span class="op" id="4543098">)</span>&nbsp;<span class="op" id="4543100">*</span><span class="ident" id="4543101">Element</span>&nbsp;<span class="op" id="4543109">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543112">e</span><span class="op" id="4543113">.</span><span class="ident" id="4543114">prev</span><span class="op" id="4543118">.</span><span class="ident" id="4543119">next</span>&nbsp;<span class="op" id="4543124">=</span>&nbsp;<span class="ident" id="4543126">e</span><span class="op" id="4543127">.</span><span class="ident" id="4543128">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543134">e</span><span class="op" id="4543135">.</span><span class="ident" id="4543136">next</span><span class="op" id="4543140">.</span><span class="ident" id="4543141">prev</span>&nbsp;<span class="op" id="4543146">=</span>&nbsp;<span class="ident" id="4543148">e</span><span class="op" id="4543149">.</span><span class="ident" id="4543150">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543156">e</span><span class="op" id="4543157">.</span><span class="ident" id="4543158">next</span>&nbsp;<span class="op" id="4543163">=</span>&nbsp;<span class="ident" id="4543165">nil</span>&nbsp;<span class="comment" id="4543169">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543192">e</span><span class="op" id="4543193">.</span><span class="ident" id="4543194">prev</span>&nbsp;<span class="op" id="4543199">=</span>&nbsp;<span class="ident" id="4543201">nil</span>&nbsp;<span class="comment" id="4543205">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543228">e</span><span class="op" id="4543229">.</span><span class="ident" id="4543230">list</span>&nbsp;<span class="op" id="4543235">=</span>&nbsp;<span class="ident" id="4543237">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543242">l</span><span class="op" id="4543243">.</span><span class="builtinfunc" id="4543244">len</span><span class="op" id="4543247">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4543251">return</span>&nbsp;<span class="ident" id="4543258">e</span><br>
<span class="lineno"></span><span class="op" id="4543260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4543263">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4543320">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4543361">func</span>&nbsp;<span class="op" id="4543366">(</span><span class="ident" id="4543367">l</span>&nbsp;<span class="op" id="4543369">*</span><span class="ident" id="4543370">List</span><span class="op" id="4543374">)</span>&nbsp;<span class="ident" id="4543376">Remove</span><span class="op" id="4543382">(</span><span class="ident" id="4543383">e</span>&nbsp;<span class="op" id="4543385">*</span><span class="ident" id="4543386">Element</span><span class="op" id="4543393">)</span>&nbsp;<span class="keyword" id="4543395">interface</span><span class="op" id="4543404">{</span><span class="op" id="4543405">}</span>&nbsp;<span class="op" id="4543407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4543410">if</span>&nbsp;<span class="ident" id="4543413">e</span><span class="op" id="4543414">.</span><span class="ident" id="4543415">list</span>&nbsp;<span class="op" id="4543420">==</span>&nbsp;<span class="ident" id="4543423">l</span>&nbsp;<span class="op" id="4543425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4543429">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4543499">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543567">l</span><span class="op" id="4543568">.</span><span class="ident" id="4543569">remove</span><span class="op" id="4543575">(</span><span class="ident" id="4543576">e</span><span class="op" id="4543577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4543580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4543583">return</span>&nbsp;<span class="ident" id="4543590">e</span><span class="op" id="4543591">.</span><span class="ident" id="4543592">Value</span><br>
<span class="lineno"></span><span class="op" id="4543598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4543601">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4543689">func</span>&nbsp;<span class="op" id="4543694">(</span><span class="ident" id="4543695">l</span>&nbsp;<span class="op" id="4543697">*</span><span class="ident" id="4543698">List</span><span class="op" id="4543702">)</span>&nbsp;<span class="ident" id="4543704">PushFront</span><span class="op" id="4543713">(</span><span class="ident" id="4543714">v</span>&nbsp;<span class="keyword" id="4543716">interface</span><span class="op" id="4543725">{</span><span class="op" id="4543726">}</span><span class="op" id="4543727">)</span>&nbsp;<span class="op" id="4543729">*</span><span class="ident" id="4543730">Element</span>&nbsp;<span class="op" id="4543738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543741">l</span><span class="op" id="4543742">.</span><span class="ident" id="4543743">lazyInit</span><span class="op" id="4543751">(</span><span class="op" id="4543752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4543755">return</span>&nbsp;<span class="ident" id="4543762">l</span><span class="op" id="4543763">.</span><span class="ident" id="4543764">insertValue</span><span class="op" id="4543775">(</span><span class="ident" id="4543776">v</span><span class="op" id="4543777">,</span>&nbsp;<span class="op" id="4543779">&amp;</span><span class="ident" id="4543780">l</span><span class="op" id="4543781">.</span><span class="ident" id="4543782">root</span><span class="op" id="4543786">)</span><br>
<span class="lineno"></span><span class="op" id="4543788">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4543791">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4543877">func</span>&nbsp;<span class="op" id="4543882">(</span><span class="ident" id="4543883">l</span>&nbsp;<span class="op" id="4543885">*</span><span class="ident" id="4543886">List</span><span class="op" id="4543890">)</span>&nbsp;<span class="ident" id="4543892">PushBack</span><span class="op" id="4543900">(</span><span class="ident" id="4543901">v</span>&nbsp;<span class="keyword" id="4543903">interface</span><span class="op" id="4543912">{</span><span class="op" id="4543913">}</span><span class="op" id="4543914">)</span>&nbsp;<span class="op" id="4543916">*</span><span class="ident" id="4543917">Element</span>&nbsp;<span class="op" id="4543925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4543928">l</span><span class="op" id="4543929">.</span><span class="ident" id="4543930">lazyInit</span><span class="op" id="4543938">(</span><span class="op" id="4543939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4543942">return</span>&nbsp;<span class="ident" id="4543949">l</span><span class="op" id="4543950">.</span><span class="ident" id="4543951">insertValue</span><span class="op" id="4543962">(</span><span class="ident" id="4543963">v</span><span class="op" id="4543964">,</span>&nbsp;<span class="ident" id="4543966">l</span><span class="op" id="4543967">.</span><span class="ident" id="4543968">root</span><span class="op" id="4543972">.</span><span class="ident" id="4543973">prev</span><span class="op" id="4543977">)</span><br>
<span class="lineno">140</span><span class="op" id="4543979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4543982">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4544074">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4544135">func</span>&nbsp;<span class="op" id="4544140">(</span><span class="ident" id="4544141">l</span>&nbsp;<span class="op" id="4544143">*</span><span class="ident" id="4544144">List</span><span class="op" id="4544148">)</span>&nbsp;<span class="ident" id="4544150">InsertBefore</span><span class="op" id="4544162">(</span><span class="ident" id="4544163">v</span>&nbsp;<span class="keyword" id="4544165">interface</span><span class="op" id="4544174">{</span><span class="op" id="4544175">}</span><span class="op" id="4544176">,</span>&nbsp;<span class="ident" id="4544178">mark</span>&nbsp;<span class="op" id="4544183">*</span><span class="ident" id="4544184">Element</span><span class="op" id="4544191">)</span>&nbsp;<span class="op" id="4544193">*</span><span class="ident" id="4544194">Element</span>&nbsp;<span class="op" id="4544202">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544205">if</span>&nbsp;<span class="ident" id="4544208">mark</span><span class="op" id="4544212">.</span><span class="ident" id="4544213">list</span>&nbsp;<span class="op" id="4544218">!=</span>&nbsp;<span class="ident" id="4544221">l</span>&nbsp;<span class="op" id="4544223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544227">return</span>&nbsp;<span class="ident" id="4544234">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4544239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4544242">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544299">return</span>&nbsp;<span class="ident" id="4544306">l</span><span class="op" id="4544307">.</span><span class="ident" id="4544308">insertValue</span><span class="op" id="4544319">(</span><span class="ident" id="4544320">v</span><span class="op" id="4544321">,</span>&nbsp;<span class="ident" id="4544323">mark</span><span class="op" id="4544327">.</span><span class="ident" id="4544328">prev</span><span class="op" id="4544332">)</span><br>
<span class="lineno">150</span><span class="op" id="4544334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4544337">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4544427">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4544488">func</span>&nbsp;<span class="op" id="4544493">(</span><span class="ident" id="4544494">l</span>&nbsp;<span class="op" id="4544496">*</span><span class="ident" id="4544497">List</span><span class="op" id="4544501">)</span>&nbsp;<span class="ident" id="4544503">InsertAfter</span><span class="op" id="4544514">(</span><span class="ident" id="4544515">v</span>&nbsp;<span class="keyword" id="4544517">interface</span><span class="op" id="4544526">{</span><span class="op" id="4544527">}</span><span class="op" id="4544528">,</span>&nbsp;<span class="ident" id="4544530">mark</span>&nbsp;<span class="op" id="4544535">*</span><span class="ident" id="4544536">Element</span><span class="op" id="4544543">)</span>&nbsp;<span class="op" id="4544545">*</span><span class="ident" id="4544546">Element</span>&nbsp;<span class="op" id="4544554">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544557">if</span>&nbsp;<span class="ident" id="4544560">mark</span><span class="op" id="4544564">.</span><span class="ident" id="4544565">list</span>&nbsp;<span class="op" id="4544570">!=</span>&nbsp;<span class="ident" id="4544573">l</span>&nbsp;<span class="op" id="4544575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544579">return</span>&nbsp;<span class="ident" id="4544586">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4544591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4544594">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544651">return</span>&nbsp;<span class="ident" id="4544658">l</span><span class="op" id="4544659">.</span><span class="ident" id="4544660">insertValue</span><span class="op" id="4544671">(</span><span class="ident" id="4544672">v</span><span class="op" id="4544673">,</span>&nbsp;<span class="ident" id="4544675">mark</span><span class="op" id="4544679">)</span><br>
<span class="lineno">160</span><span class="op" id="4544681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4544684">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4544739">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4544797">func</span>&nbsp;<span class="op" id="4544802">(</span><span class="ident" id="4544803">l</span>&nbsp;<span class="op" id="4544805">*</span><span class="ident" id="4544806">List</span><span class="op" id="4544810">)</span>&nbsp;<span class="ident" id="4544812">MoveToFront</span><span class="op" id="4544823">(</span><span class="ident" id="4544824">e</span>&nbsp;<span class="op" id="4544826">*</span><span class="ident" id="4544827">Element</span><span class="op" id="4544834">)</span>&nbsp;<span class="op" id="4544836">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544839">if</span>&nbsp;<span class="ident" id="4544842">e</span><span class="op" id="4544843">.</span><span class="ident" id="4544844">list</span>&nbsp;<span class="op" id="4544849">!=</span>&nbsp;<span class="ident" id="4544852">l</span>&nbsp;<span class="op" id="4544854">||</span>&nbsp;<span class="ident" id="4544857">l</span><span class="op" id="4544858">.</span><span class="ident" id="4544859">root</span><span class="op" id="4544863">.</span><span class="ident" id="4544864">next</span>&nbsp;<span class="op" id="4544869">==</span>&nbsp;<span class="ident" id="4544872">e</span>&nbsp;<span class="op" id="4544874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4544878">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4544886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4544889">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4544946">l</span><span class="op" id="4544947">.</span><span class="ident" id="4544948">insert</span><span class="op" id="4544954">(</span><span class="ident" id="4544955">l</span><span class="op" id="4544956">.</span><span class="ident" id="4544957">remove</span><span class="op" id="4544963">(</span><span class="ident" id="4544964">e</span><span class="op" id="4544965">)</span><span class="op" id="4544966">,</span>&nbsp;<span class="op" id="4544968">&amp;</span><span class="ident" id="4544969">l</span><span class="op" id="4544970">.</span><span class="ident" id="4544971">root</span><span class="op" id="4544975">)</span><br>
<span class="lineno">170</span><span class="op" id="4544977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4544980">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4545033">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4545091">func</span>&nbsp;<span class="op" id="4545096">(</span><span class="ident" id="4545097">l</span>&nbsp;<span class="op" id="4545099">*</span><span class="ident" id="4545100">List</span><span class="op" id="4545104">)</span>&nbsp;<span class="ident" id="4545106">MoveToBack</span><span class="op" id="4545116">(</span><span class="ident" id="4545117">e</span>&nbsp;<span class="op" id="4545119">*</span><span class="ident" id="4545120">Element</span><span class="op" id="4545127">)</span>&nbsp;<span class="op" id="4545129">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545132">if</span>&nbsp;<span class="ident" id="4545135">e</span><span class="op" id="4545136">.</span><span class="ident" id="4545137">list</span>&nbsp;<span class="op" id="4545142">!=</span>&nbsp;<span class="ident" id="4545145">l</span>&nbsp;<span class="op" id="4545147">||</span>&nbsp;<span class="ident" id="4545150">l</span><span class="op" id="4545151">.</span><span class="ident" id="4545152">root</span><span class="op" id="4545156">.</span><span class="ident" id="4545157">prev</span>&nbsp;<span class="op" id="4545162">==</span>&nbsp;<span class="ident" id="4545165">e</span>&nbsp;<span class="op" id="4545167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545171">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4545179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4545182">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545239">l</span><span class="op" id="4545240">.</span><span class="ident" id="4545241">insert</span><span class="op" id="4545247">(</span><span class="ident" id="4545248">l</span><span class="op" id="4545249">.</span><span class="ident" id="4545250">remove</span><span class="op" id="4545256">(</span><span class="ident" id="4545257">e</span><span class="op" id="4545258">)</span><span class="op" id="4545259">,</span>&nbsp;<span class="ident" id="4545261">l</span><span class="op" id="4545262">.</span><span class="ident" id="4545263">root</span><span class="op" id="4545267">.</span><span class="ident" id="4545268">prev</span><span class="op" id="4545272">)</span><br>
<span class="lineno">180</span><span class="op" id="4545274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4545277">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4545340">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4545420">func</span>&nbsp;<span class="op" id="4545425">(</span><span class="ident" id="4545426">l</span>&nbsp;<span class="op" id="4545428">*</span><span class="ident" id="4545429">List</span><span class="op" id="4545433">)</span>&nbsp;<span class="ident" id="4545435">MoveBefore</span><span class="op" id="4545445">(</span><span class="ident" id="4545446">e</span><span class="op" id="4545447">,</span>&nbsp;<span class="ident" id="4545449">mark</span>&nbsp;<span class="op" id="4545454">*</span><span class="ident" id="4545455">Element</span><span class="op" id="4545462">)</span>&nbsp;<span class="op" id="4545464">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545467">if</span>&nbsp;<span class="ident" id="4545470">e</span><span class="op" id="4545471">.</span><span class="ident" id="4545472">list</span>&nbsp;<span class="op" id="4545477">!=</span>&nbsp;<span class="ident" id="4545480">l</span>&nbsp;<span class="op" id="4545482">||</span>&nbsp;<span class="ident" id="4545485">e</span>&nbsp;<span class="op" id="4545487">==</span>&nbsp;<span class="ident" id="4545490">mark</span>&nbsp;<span class="op" id="4545495">||</span>&nbsp;<span class="ident" id="4545498">mark</span><span class="op" id="4545502">.</span><span class="ident" id="4545503">list</span>&nbsp;<span class="op" id="4545508">!=</span>&nbsp;<span class="ident" id="4545511">l</span>&nbsp;<span class="op" id="4545513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545517">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4545525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545528">l</span><span class="op" id="4545529">.</span><span class="ident" id="4545530">insert</span><span class="op" id="4545536">(</span><span class="ident" id="4545537">l</span><span class="op" id="4545538">.</span><span class="ident" id="4545539">remove</span><span class="op" id="4545545">(</span><span class="ident" id="4545546">e</span><span class="op" id="4545547">)</span><span class="op" id="4545548">,</span>&nbsp;<span class="ident" id="4545550">mark</span><span class="op" id="4545554">.</span><span class="ident" id="4545555">prev</span><span class="op" id="4545559">)</span><br>
<span class="lineno"></span><span class="op" id="4545561">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4545564">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4545625">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4545705">func</span>&nbsp;<span class="op" id="4545710">(</span><span class="ident" id="4545711">l</span>&nbsp;<span class="op" id="4545713">*</span><span class="ident" id="4545714">List</span><span class="op" id="4545718">)</span>&nbsp;<span class="ident" id="4545720">MoveAfter</span><span class="op" id="4545729">(</span><span class="ident" id="4545730">e</span><span class="op" id="4545731">,</span>&nbsp;<span class="ident" id="4545733">mark</span>&nbsp;<span class="op" id="4545738">*</span><span class="ident" id="4545739">Element</span><span class="op" id="4545746">)</span>&nbsp;<span class="op" id="4545748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545751">if</span>&nbsp;<span class="ident" id="4545754">e</span><span class="op" id="4545755">.</span><span class="ident" id="4545756">list</span>&nbsp;<span class="op" id="4545761">!=</span>&nbsp;<span class="ident" id="4545764">l</span>&nbsp;<span class="op" id="4545766">||</span>&nbsp;<span class="ident" id="4545769">e</span>&nbsp;<span class="op" id="4545771">==</span>&nbsp;<span class="ident" id="4545774">mark</span>&nbsp;<span class="op" id="4545779">||</span>&nbsp;<span class="ident" id="4545782">mark</span><span class="op" id="4545786">.</span><span class="ident" id="4545787">list</span>&nbsp;<span class="op" id="4545792">!=</span>&nbsp;<span class="ident" id="4545795">l</span>&nbsp;<span class="op" id="4545797">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545801">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4545809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545812">l</span><span class="op" id="4545813">.</span><span class="ident" id="4545814">insert</span><span class="op" id="4545820">(</span><span class="ident" id="4545821">l</span><span class="op" id="4545822">.</span><span class="ident" id="4545823">remove</span><span class="op" id="4545829">(</span><span class="ident" id="4545830">e</span><span class="op" id="4545831">)</span><span class="op" id="4545832">,</span>&nbsp;<span class="ident" id="4545834">mark</span><span class="op" id="4545838">)</span><br>
<span class="lineno"></span><span class="op" id="4545840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4545843">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4545914">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4545956">func</span>&nbsp;<span class="op" id="4545961">(</span><span class="ident" id="4545962">l</span>&nbsp;<span class="op" id="4545964">*</span><span class="ident" id="4545965">List</span><span class="op" id="4545969">)</span>&nbsp;<span class="ident" id="4545971">PushBackList</span><span class="op" id="4545983">(</span><span class="ident" id="4545984">other</span>&nbsp;<span class="op" id="4545990">*</span><span class="ident" id="4545991">List</span><span class="op" id="4545995">)</span>&nbsp;<span class="op" id="4545997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546000">l</span><span class="op" id="4546001">.</span><span class="ident" id="4546002">lazyInit</span><span class="op" id="4546010">(</span><span class="op" id="4546011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546014">for</span>&nbsp;<span class="ident" id="4546018">i</span><span class="op" id="4546019">,</span>&nbsp;<span class="ident" id="4546021">e</span>&nbsp;<span class="op" id="4546023">:=</span>&nbsp;<span class="ident" id="4546026">other</span><span class="op" id="4546031">.</span><span class="ident" id="4546032">Len</span><span class="op" id="4546035">(</span><span class="op" id="4546036">)</span><span class="op" id="4546037">,</span>&nbsp;<span class="ident" id="4546039">other</span><span class="op" id="4546044">.</span><span class="ident" id="4546045">Front</span><span class="op" id="4546050">(</span><span class="op" id="4546051">)</span><span class="op" id="4546052">;</span>&nbsp;<span class="ident" id="4546054">i</span>&nbsp;<span class="op" id="4546056">&gt;</span>&nbsp;<span class="num" id="4546058">0</span><span class="op" id="4546059">;</span>&nbsp;<span class="ident" id="4546061">i</span><span class="op" id="4546062">,</span>&nbsp;<span class="ident" id="4546064">e</span>&nbsp;<span class="op" id="4546066">=</span>&nbsp;<span class="ident" id="4546068">i</span><span class="op" id="4546069">-</span><span class="num" id="4546070">1</span><span class="op" id="4546071">,</span>&nbsp;<span class="ident" id="4546073">e</span><span class="op" id="4546074">.</span><span class="ident" id="4546075">Next</span><span class="op" id="4546079">(</span><span class="op" id="4546080">)</span>&nbsp;<span class="op" id="4546082">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546086">l</span><span class="op" id="4546087">.</span><span class="ident" id="4546088">insertValue</span><span class="op" id="4546099">(</span><span class="ident" id="4546100">e</span><span class="op" id="4546101">.</span><span class="ident" id="4546102">Value</span><span class="op" id="4546107">,</span>&nbsp;<span class="ident" id="4546109">l</span><span class="op" id="4546110">.</span><span class="ident" id="4546111">root</span><span class="op" id="4546115">.</span><span class="ident" id="4546116">prev</span><span class="op" id="4546120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4546123">}</span><br>
<span class="lineno"></span><span class="op" id="4546125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4546128">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4546201">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4546243">func</span>&nbsp;<span class="op" id="4546248">(</span><span class="ident" id="4546249">l</span>&nbsp;<span class="op" id="4546251">*</span><span class="ident" id="4546252">List</span><span class="op" id="4546256">)</span>&nbsp;<span class="ident" id="4546258">PushFrontList</span><span class="op" id="4546271">(</span><span class="ident" id="4546272">other</span>&nbsp;<span class="op" id="4546278">*</span><span class="ident" id="4546279">List</span><span class="op" id="4546283">)</span>&nbsp;<span class="op" id="4546285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546288">l</span><span class="op" id="4546289">.</span><span class="ident" id="4546290">lazyInit</span><span class="op" id="4546298">(</span><span class="op" id="4546299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546302">for</span>&nbsp;<span class="ident" id="4546306">i</span><span class="op" id="4546307">,</span>&nbsp;<span class="ident" id="4546309">e</span>&nbsp;<span class="op" id="4546311">:=</span>&nbsp;<span class="ident" id="4546314">other</span><span class="op" id="4546319">.</span><span class="ident" id="4546320">Len</span><span class="op" id="4546323">(</span><span class="op" id="4546324">)</span><span class="op" id="4546325">,</span>&nbsp;<span class="ident" id="4546327">other</span><span class="op" id="4546332">.</span><span class="ident" id="4546333">Back</span><span class="op" id="4546337">(</span><span class="op" id="4546338">)</span><span class="op" id="4546339">;</span>&nbsp;<span class="ident" id="4546341">i</span>&nbsp;<span class="op" id="4546343">&gt;</span>&nbsp;<span class="num" id="4546345">0</span><span class="op" id="4546346">;</span>&nbsp;<span class="ident" id="4546348">i</span><span class="op" id="4546349">,</span>&nbsp;<span class="ident" id="4546351">e</span>&nbsp;<span class="op" id="4546353">=</span>&nbsp;<span class="ident" id="4546355">i</span><span class="op" id="4546356">-</span><span class="num" id="4546357">1</span><span class="op" id="4546358">,</span>&nbsp;<span class="ident" id="4546360">e</span><span class="op" id="4546361">.</span><span class="ident" id="4546362">Prev</span><span class="op" id="4546366">(</span><span class="op" id="4546367">)</span>&nbsp;<span class="op" id="4546369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546373">l</span><span class="op" id="4546374">.</span><span class="ident" id="4546375">insertValue</span><span class="op" id="4546386">(</span><span class="ident" id="4546387">e</span><span class="op" id="4546388">.</span><span class="ident" id="4546389">Value</span><span class="op" id="4546394">,</span>&nbsp;<span class="op" id="4546396">&amp;</span><span class="ident" id="4546397">l</span><span class="op" id="4546398">.</span><span class="ident" id="4546399">root</span><span class="op" id="4546403">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4546406">}</span><br>
<span class="lineno"></span><span class="op" id="4546408">}</span>
</div>
</body>
</html>
