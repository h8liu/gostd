<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6557541">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6557597">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6557651">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6557702">package</span>&nbsp;<span class="ident" id="6557710">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6557716">import</span>&nbsp;<span class="op" id="6557723">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557726">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557735">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557746">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557757">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6557764">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6557767">var</span>&nbsp;<span class="ident" id="6557771">headerWriteTests</span>&nbsp;<span class="op" id="6557788">=</span>&nbsp;<span class="op" id="6557790">[</span><span class="op" id="6557791">]</span><span class="keyword" id="6557792">struct</span>&nbsp;<span class="op" id="6557799">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6557802">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6557811">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6557819">exclude</span>&nbsp;&nbsp;<span class="keyword" id="6557828">map</span><span class="op" id="6557831">[</span><span class="builtintype" id="6557832">string</span><span class="op" id="6557838">]</span><span class="builtintype" id="6557839">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6557845">expected</span>&nbsp;<span class="builtintype" id="6557854">string</span><br>
<span class="lineno"></span><span class="op" id="6557861">}</span><span class="op" id="6557862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6557865">{</span><span class="ident" id="6557866">Header</span><span class="op" id="6557872">{</span><span class="op" id="6557873">}</span><span class="op" id="6557874">,</span>&nbsp;<span class="ident" id="6557876">nil</span><span class="op" id="6557879">,</span>&nbsp;<span class="string" id="6557881">&#34;&#34;</span><span class="op" id="6557883">}</span><span class="op" id="6557884">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6557887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6557891">Header</span><span class="op" id="6557897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557902">&#34;Content-Type&#34;</span><span class="op" id="6557916">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6557920">{</span><span class="string" id="6557921">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="6557947">}</span><span class="op" id="6557948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557953">&#34;Content-Length&#34;</span><span class="op" id="6557969">:</span>&nbsp;<span class="op" id="6557971">{</span><span class="string" id="6557972">&#34;0&#34;</span><span class="op" id="6557975">}</span><span class="op" id="6557976">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6557980">}</span><span class="op" id="6557981">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6557985">nil</span><span class="op" id="6557988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6557992">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="6558057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558060">}</span><span class="op" id="6558061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558068">Header</span><span class="op" id="6558074">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558079">&#34;Content-Length&#34;</span><span class="op" id="6558095">:</span>&nbsp;<span class="op" id="6558097">{</span><span class="string" id="6558098">&#34;0&#34;</span><span class="op" id="6558101">,</span>&nbsp;<span class="string" id="6558103">&#34;1&#34;</span><span class="op" id="6558106">,</span>&nbsp;<span class="string" id="6558108">&#34;2&#34;</span><span class="op" id="6558111">}</span><span class="op" id="6558112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558116">}</span><span class="op" id="6558117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558121">nil</span><span class="op" id="6558124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558128">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="6558193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558196">}</span><span class="op" id="6558197">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558204">Header</span><span class="op" id="6558210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558215">&#34;Expires&#34;</span><span class="op" id="6558224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6558235">{</span><span class="string" id="6558236">&#34;-1&#34;</span><span class="op" id="6558240">}</span><span class="op" id="6558241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558246">&#34;Content-Length&#34;</span><span class="op" id="6558262">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6558266">{</span><span class="string" id="6558267">&#34;0&#34;</span><span class="op" id="6558270">}</span><span class="op" id="6558271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558276">&#34;Content-Encoding&#34;</span><span class="op" id="6558294">:</span>&nbsp;<span class="op" id="6558296">{</span><span class="string" id="6558297">&#34;gzip&#34;</span><span class="op" id="6558303">}</span><span class="op" id="6558304">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558308">}</span><span class="op" id="6558309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6558313">map</span><span class="op" id="6558316">[</span><span class="builtintype" id="6558317">string</span><span class="op" id="6558323">]</span><span class="builtintype" id="6558324">bool</span><span class="op" id="6558328">{</span><span class="string" id="6558329">&#34;Content-Length&#34;</span><span class="op" id="6558345">:</span>&nbsp;<span class="builtintype" id="6558347">true</span><span class="op" id="6558351">}</span><span class="op" id="6558352">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558356">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="6558399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558402">}</span><span class="op" id="6558403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558406">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558410">Header</span><span class="op" id="6558416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558421">&#34;Expires&#34;</span><span class="op" id="6558430">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6558441">{</span><span class="string" id="6558442">&#34;-1&#34;</span><span class="op" id="6558446">}</span><span class="op" id="6558447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558452">&#34;Content-Length&#34;</span><span class="op" id="6558468">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6558472">{</span><span class="string" id="6558473">&#34;0&#34;</span><span class="op" id="6558476">,</span>&nbsp;<span class="string" id="6558478">&#34;1&#34;</span><span class="op" id="6558481">,</span>&nbsp;<span class="string" id="6558483">&#34;2&#34;</span><span class="op" id="6558486">}</span><span class="op" id="6558487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558492">&#34;Content-Encoding&#34;</span><span class="op" id="6558510">:</span>&nbsp;<span class="op" id="6558512">{</span><span class="string" id="6558513">&#34;gzip&#34;</span><span class="op" id="6558519">}</span><span class="op" id="6558520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558524">}</span><span class="op" id="6558525">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6558529">map</span><span class="op" id="6558532">[</span><span class="builtintype" id="6558533">string</span><span class="op" id="6558539">]</span><span class="builtintype" id="6558540">bool</span><span class="op" id="6558544">{</span><span class="string" id="6558545">&#34;Content-Length&#34;</span><span class="op" id="6558561">:</span>&nbsp;<span class="builtintype" id="6558563">true</span><span class="op" id="6558567">}</span><span class="op" id="6558568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558572">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="6558615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558618">}</span><span class="op" id="6558619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558626">Header</span><span class="op" id="6558632">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558637">&#34;Expires&#34;</span><span class="op" id="6558646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6558657">{</span><span class="string" id="6558658">&#34;-1&#34;</span><span class="op" id="6558662">}</span><span class="op" id="6558663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558668">&#34;Content-Length&#34;</span><span class="op" id="6558684">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6558688">{</span><span class="string" id="6558689">&#34;0&#34;</span><span class="op" id="6558692">}</span><span class="op" id="6558693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558698">&#34;Content-Encoding&#34;</span><span class="op" id="6558716">:</span>&nbsp;<span class="op" id="6558718">{</span><span class="string" id="6558719">&#34;gzip&#34;</span><span class="op" id="6558725">}</span><span class="op" id="6558726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558730">}</span><span class="op" id="6558731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6558735">map</span><span class="op" id="6558738">[</span><span class="builtintype" id="6558739">string</span><span class="op" id="6558745">]</span><span class="builtintype" id="6558746">bool</span><span class="op" id="6558750">{</span><span class="string" id="6558751">&#34;Content-Length&#34;</span><span class="op" id="6558767">:</span>&nbsp;<span class="builtintype" id="6558769">true</span><span class="op" id="6558773">,</span>&nbsp;<span class="string" id="6558775">&#34;Expires&#34;</span><span class="op" id="6558784">:</span>&nbsp;<span class="builtintype" id="6558786">true</span><span class="op" id="6558790">,</span>&nbsp;<span class="string" id="6558792">&#34;Content-Encoding&#34;</span><span class="op" id="6558810">:</span>&nbsp;<span class="builtintype" id="6558812">true</span><span class="op" id="6558816">}</span><span class="op" id="6558817">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558821">&#34;&#34;</span><span class="op" id="6558823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558826">}</span><span class="op" id="6558827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558834">Header</span><span class="op" id="6558840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558845">&#34;Nil&#34;</span><span class="op" id="6558850">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6558861">nil</span><span class="op" id="6558864">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558869">&#34;Empty&#34;</span><span class="op" id="6558876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6558885">{</span><span class="op" id="6558886">}</span><span class="op" id="6558887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558892">&#34;Blank&#34;</span><span class="op" id="6558899">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6558908">{</span><span class="string" id="6558909">&#34;&#34;</span><span class="op" id="6558911">}</span><span class="op" id="6558912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558917">&#34;Double-Blank&#34;</span><span class="op" id="6558931">:</span>&nbsp;<span class="op" id="6558933">{</span><span class="string" id="6558934">&#34;&#34;</span><span class="op" id="6558936">,</span>&nbsp;<span class="string" id="6558938">&#34;&#34;</span><span class="op" id="6558940">}</span><span class="op" id="6558941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6558945">}</span><span class="op" id="6558946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6558950">nil</span><span class="op" id="6558953">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6558957">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="6559006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559009">}</span><span class="op" id="6559010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6559013">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559087">Header</span><span class="op" id="6559093">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559098">&#34;k1&#34;</span><span class="op" id="6559102">:</span>&nbsp;<span class="op" id="6559104">{</span><span class="string" id="6559105">&#34;1a&#34;</span><span class="op" id="6559109">,</span>&nbsp;<span class="string" id="6559111">&#34;1b&#34;</span><span class="op" id="6559115">}</span><span class="op" id="6559116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559121">&#34;k2&#34;</span><span class="op" id="6559125">:</span>&nbsp;<span class="op" id="6559127">{</span><span class="string" id="6559128">&#34;2a&#34;</span><span class="op" id="6559132">,</span>&nbsp;<span class="string" id="6559134">&#34;2b&#34;</span><span class="op" id="6559138">}</span><span class="op" id="6559139">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559144">&#34;k3&#34;</span><span class="op" id="6559148">:</span>&nbsp;<span class="op" id="6559150">{</span><span class="string" id="6559151">&#34;3a&#34;</span><span class="op" id="6559155">,</span>&nbsp;<span class="string" id="6559157">&#34;3b&#34;</span><span class="op" id="6559161">}</span><span class="op" id="6559162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559167">&#34;k4&#34;</span><span class="op" id="6559171">:</span>&nbsp;<span class="op" id="6559173">{</span><span class="string" id="6559174">&#34;4a&#34;</span><span class="op" id="6559178">,</span>&nbsp;<span class="string" id="6559180">&#34;4b&#34;</span><span class="op" id="6559184">}</span><span class="op" id="6559185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559190">&#34;k5&#34;</span><span class="op" id="6559194">:</span>&nbsp;<span class="op" id="6559196">{</span><span class="string" id="6559197">&#34;5a&#34;</span><span class="op" id="6559201">,</span>&nbsp;<span class="string" id="6559203">&#34;5b&#34;</span><span class="op" id="6559207">}</span><span class="op" id="6559208">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559213">&#34;k6&#34;</span><span class="op" id="6559217">:</span>&nbsp;<span class="op" id="6559219">{</span><span class="string" id="6559220">&#34;6a&#34;</span><span class="op" id="6559224">,</span>&nbsp;<span class="string" id="6559226">&#34;6b&#34;</span><span class="op" id="6559230">}</span><span class="op" id="6559231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559236">&#34;k7&#34;</span><span class="op" id="6559240">:</span>&nbsp;<span class="op" id="6559242">{</span><span class="string" id="6559243">&#34;7a&#34;</span><span class="op" id="6559247">,</span>&nbsp;<span class="string" id="6559249">&#34;7b&#34;</span><span class="op" id="6559253">}</span><span class="op" id="6559254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559259">&#34;k8&#34;</span><span class="op" id="6559263">:</span>&nbsp;<span class="op" id="6559265">{</span><span class="string" id="6559266">&#34;8a&#34;</span><span class="op" id="6559270">,</span>&nbsp;<span class="string" id="6559272">&#34;8b&#34;</span><span class="op" id="6559276">}</span><span class="op" id="6559277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559282">&#34;k9&#34;</span><span class="op" id="6559286">:</span>&nbsp;<span class="op" id="6559288">{</span><span class="string" id="6559289">&#34;9a&#34;</span><span class="op" id="6559293">,</span>&nbsp;<span class="string" id="6559295">&#34;9b&#34;</span><span class="op" id="6559299">}</span><span class="op" id="6559300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559304">}</span><span class="op" id="6559305">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6559309">map</span><span class="op" id="6559312">[</span><span class="builtintype" id="6559313">string</span><span class="op" id="6559319">]</span><span class="builtintype" id="6559320">bool</span><span class="op" id="6559324">{</span><span class="string" id="6559325">&#34;k5&#34;</span><span class="op" id="6559329">:</span>&nbsp;<span class="builtintype" id="6559331">true</span><span class="op" id="6559335">}</span><span class="op" id="6559336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559340">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="6559403">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559408">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="6559451">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6559456">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="6559518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559521">}</span><span class="op" id="6559522">,</span><br>
<span class="lineno">90</span><span class="op" id="6559524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6559527">func</span>&nbsp;<span class="ident" id="6559532">TestHeaderWrite</span><span class="op" id="6559547">(</span><span class="ident" id="6559548">t</span>&nbsp;<span class="op" id="6559550">*</span><span class="ident" id="6559551">testing</span><span class="op" id="6559558">.</span><span class="ident" id="6559559">T</span><span class="op" id="6559560">)</span>&nbsp;<span class="op" id="6559562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6559565">var</span>&nbsp;<span class="ident" id="6559569">buf</span>&nbsp;<span class="ident" id="6559573">bytes</span><span class="op" id="6559578">.</span><span class="ident" id="6559579">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6559587">for</span>&nbsp;<span class="ident" id="6559591">i</span><span class="op" id="6559592">,</span>&nbsp;<span class="ident" id="6559594">test</span>&nbsp;<span class="op" id="6559599">:=</span>&nbsp;<span class="keyword" id="6559602">range</span>&nbsp;<span class="ident" id="6559608">headerWriteTests</span>&nbsp;<span class="op" id="6559625">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559629">test</span><span class="op" id="6559633">.</span><span class="ident" id="6559634">h</span><span class="op" id="6559635">.</span><span class="ident" id="6559636">WriteSubset</span><span class="op" id="6559647">(</span><span class="op" id="6559648">&amp;</span><span class="ident" id="6559649">buf</span><span class="op" id="6559652">,</span>&nbsp;<span class="ident" id="6559654">test</span><span class="op" id="6559658">.</span><span class="ident" id="6559659">exclude</span><span class="op" id="6559666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6559670">if</span>&nbsp;<span class="ident" id="6559673">buf</span><span class="op" id="6559676">.</span><span class="ident" id="6559677">String</span><span class="op" id="6559683">(</span><span class="op" id="6559684">)</span>&nbsp;<span class="op" id="6559686">!=</span>&nbsp;<span class="ident" id="6559689">test</span><span class="op" id="6559693">.</span><span class="ident" id="6559694">expected</span>&nbsp;<span class="op" id="6559703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559708">t</span><span class="op" id="6559709">.</span><span class="ident" id="6559710">Errorf</span><span class="op" id="6559716">(</span><span class="string" id="6559717">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="6559743">,</span>&nbsp;<span class="ident" id="6559745">i</span><span class="op" id="6559746">,</span>&nbsp;<span class="ident" id="6559748">buf</span><span class="op" id="6559751">.</span><span class="ident" id="6559752">String</span><span class="op" id="6559758">(</span><span class="op" id="6559759">)</span><span class="op" id="6559760">,</span>&nbsp;<span class="ident" id="6559762">test</span><span class="op" id="6559766">.</span><span class="ident" id="6559767">expected</span><span class="op" id="6559775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559783">buf</span><span class="op" id="6559786">.</span><span class="ident" id="6559787">Reset</span><span class="op" id="6559792">(</span><span class="op" id="6559793">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559796">}</span><br>
<span class="lineno"></span><span class="op" id="6559798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6559801">var</span>&nbsp;<span class="ident" id="6559805">parseTimeTests</span>&nbsp;<span class="op" id="6559820">=</span>&nbsp;<span class="op" id="6559822">[</span><span class="op" id="6559823">]</span><span class="keyword" id="6559824">struct</span>&nbsp;<span class="op" id="6559831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559834">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6559838">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6559846">err</span>&nbsp;<span class="builtintype" id="6559850">bool</span><br>
<span class="lineno"></span><span class="op" id="6559855">}</span><span class="op" id="6559856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559859">{</span><span class="ident" id="6559860">Header</span><span class="op" id="6559866">{</span><span class="string" id="6559867">&#34;Date&#34;</span><span class="op" id="6559873">:</span>&nbsp;<span class="op" id="6559875">{</span><span class="string" id="6559876">&#34;&#34;</span><span class="op" id="6559878">}</span><span class="op" id="6559879">}</span><span class="op" id="6559880">,</span>&nbsp;<span class="builtintype" id="6559882">true</span><span class="op" id="6559886">}</span><span class="op" id="6559887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559890">{</span><span class="ident" id="6559891">Header</span><span class="op" id="6559897">{</span><span class="string" id="6559898">&#34;Date&#34;</span><span class="op" id="6559904">:</span>&nbsp;<span class="op" id="6559906">{</span><span class="string" id="6559907">&#34;invalid&#34;</span><span class="op" id="6559916">}</span><span class="op" id="6559917">}</span><span class="op" id="6559918">,</span>&nbsp;<span class="builtintype" id="6559920">true</span><span class="op" id="6559924">}</span><span class="op" id="6559925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559928">{</span><span class="ident" id="6559929">Header</span><span class="op" id="6559935">{</span><span class="string" id="6559936">&#34;Date&#34;</span><span class="op" id="6559942">:</span>&nbsp;<span class="op" id="6559944">{</span><span class="string" id="6559945">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="6559972">}</span><span class="op" id="6559973">}</span><span class="op" id="6559974">,</span>&nbsp;<span class="builtintype" id="6559976">true</span><span class="op" id="6559980">}</span><span class="op" id="6559981">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6559984">{</span><span class="ident" id="6559985">Header</span><span class="op" id="6559991">{</span><span class="string" id="6559992">&#34;Date&#34;</span><span class="op" id="6559998">:</span>&nbsp;<span class="op" id="6560000">{</span><span class="string" id="6560001">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="6560032">}</span><span class="op" id="6560033">}</span><span class="op" id="6560034">,</span>&nbsp;<span class="builtintype" id="6560036">false</span><span class="op" id="6560041">}</span><span class="op" id="6560042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560045">{</span><span class="ident" id="6560046">Header</span><span class="op" id="6560052">{</span><span class="string" id="6560053">&#34;Date&#34;</span><span class="op" id="6560059">:</span>&nbsp;<span class="op" id="6560061">{</span><span class="string" id="6560062">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="6560094">}</span><span class="op" id="6560095">}</span><span class="op" id="6560096">,</span>&nbsp;<span class="builtintype" id="6560098">false</span><span class="op" id="6560103">}</span><span class="op" id="6560104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560107">{</span><span class="ident" id="6560108">Header</span><span class="op" id="6560114">{</span><span class="string" id="6560115">&#34;Date&#34;</span><span class="op" id="6560121">:</span>&nbsp;<span class="op" id="6560123">{</span><span class="string" id="6560124">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="6560150">}</span><span class="op" id="6560151">}</span><span class="op" id="6560152">,</span>&nbsp;<span class="builtintype" id="6560154">false</span><span class="op" id="6560159">}</span><span class="op" id="6560160">,</span><br>
<span class="lineno"></span><span class="op" id="6560162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="6560165">func</span>&nbsp;<span class="ident" id="6560170">TestParseTime</span><span class="op" id="6560183">(</span><span class="ident" id="6560184">t</span>&nbsp;<span class="op" id="6560186">*</span><span class="ident" id="6560187">testing</span><span class="op" id="6560194">.</span><span class="ident" id="6560195">T</span><span class="op" id="6560196">)</span>&nbsp;<span class="op" id="6560198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560201">expect</span>&nbsp;<span class="op" id="6560208">:=</span>&nbsp;<span class="ident" id="6560211">time</span><span class="op" id="6560215">.</span><span class="ident" id="6560216">Date</span><span class="op" id="6560220">(</span><span class="num" id="6560221">1994</span><span class="op" id="6560225">,</span>&nbsp;<span class="num" id="6560227">11</span><span class="op" id="6560229">,</span>&nbsp;<span class="num" id="6560231">6</span><span class="op" id="6560232">,</span>&nbsp;<span class="num" id="6560234">8</span><span class="op" id="6560235">,</span>&nbsp;<span class="num" id="6560237">49</span><span class="op" id="6560239">,</span>&nbsp;<span class="num" id="6560241">37</span><span class="op" id="6560243">,</span>&nbsp;<span class="num" id="6560245">0</span><span class="op" id="6560246">,</span>&nbsp;<span class="ident" id="6560248">time</span><span class="op" id="6560252">.</span><span class="ident" id="6560253">UTC</span><span class="op" id="6560256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560259">for</span>&nbsp;<span class="ident" id="6560263">i</span><span class="op" id="6560264">,</span>&nbsp;<span class="ident" id="6560266">test</span>&nbsp;<span class="op" id="6560271">:=</span>&nbsp;<span class="keyword" id="6560274">range</span>&nbsp;<span class="ident" id="6560280">parseTimeTests</span>&nbsp;<span class="op" id="6560295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560299">d</span><span class="op" id="6560300">,</span>&nbsp;<span class="ident" id="6560302">err</span>&nbsp;<span class="op" id="6560306">:=</span>&nbsp;<span class="ident" id="6560309">ParseTime</span><span class="op" id="6560318">(</span><span class="ident" id="6560319">test</span><span class="op" id="6560323">.</span><span class="ident" id="6560324">h</span><span class="op" id="6560325">.</span><span class="ident" id="6560326">Get</span><span class="op" id="6560329">(</span><span class="string" id="6560330">&#34;Date&#34;</span><span class="op" id="6560336">)</span><span class="op" id="6560337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560341">if</span>&nbsp;<span class="ident" id="6560344">err</span>&nbsp;<span class="op" id="6560348">!=</span>&nbsp;<span class="ident" id="6560351">nil</span>&nbsp;<span class="op" id="6560355">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560360">if</span>&nbsp;<span class="op" id="6560363">!</span><span class="ident" id="6560364">test</span><span class="op" id="6560368">.</span><span class="ident" id="6560369">err</span>&nbsp;<span class="op" id="6560373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560379">t</span><span class="op" id="6560380">.</span><span class="ident" id="6560381">Errorf</span><span class="op" id="6560387">(</span><span class="string" id="6560388">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="6560408">,</span>&nbsp;<span class="ident" id="6560410">i</span><span class="op" id="6560411">,</span>&nbsp;<span class="ident" id="6560413">err</span><span class="op" id="6560416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560426">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560437">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560441">if</span>&nbsp;<span class="ident" id="6560444">test</span><span class="op" id="6560448">.</span><span class="ident" id="6560449">err</span>&nbsp;<span class="op" id="6560453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560458">t</span><span class="op" id="6560459">.</span><span class="ident" id="6560460">Errorf</span><span class="op" id="6560466">(</span><span class="string" id="6560467">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="6560487">,</span>&nbsp;<span class="ident" id="6560489">i</span><span class="op" id="6560490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560495">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6560510">if</span>&nbsp;<span class="op" id="6560513">!</span><span class="ident" id="6560514">expect</span><span class="op" id="6560520">.</span><span class="ident" id="6560521">Equal</span><span class="op" id="6560526">(</span><span class="ident" id="6560527">d</span><span class="op" id="6560528">)</span>&nbsp;<span class="op" id="6560530">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560535">t</span><span class="op" id="6560536">.</span><span class="ident" id="6560537">Errorf</span><span class="op" id="6560543">(</span><span class="string" id="6560544">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6560570">,</span>&nbsp;<span class="ident" id="6560572">i</span><span class="op" id="6560573">,</span>&nbsp;<span class="ident" id="6560575">d</span><span class="op" id="6560576">,</span>&nbsp;<span class="ident" id="6560578">expect</span><span class="op" id="6560584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560591">}</span><br>
<span class="lineno"></span><span class="op" id="6560593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6560596">type</span>&nbsp;<span class="ident" id="6560601">hasTokenTest</span>&nbsp;<span class="keyword" id="6560614">struct</span>&nbsp;<span class="op" id="6560621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560624">header</span>&nbsp;<span class="builtintype" id="6560631">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560639">token</span>&nbsp;&nbsp;<span class="builtintype" id="6560646">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6560654">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6560661">bool</span><br>
<span class="lineno"></span><span class="op" id="6560666">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6560669">var</span>&nbsp;<span class="ident" id="6560673">hasTokenTests</span>&nbsp;<span class="op" id="6560687">=</span>&nbsp;<span class="op" id="6560689">[</span><span class="op" id="6560690">]</span><span class="ident" id="6560691">hasTokenTest</span><span class="op" id="6560703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560706">{</span><span class="string" id="6560707">&#34;&#34;</span><span class="op" id="6560709">,</span>&nbsp;<span class="string" id="6560711">&#34;&#34;</span><span class="op" id="6560713">,</span>&nbsp;<span class="builtintype" id="6560715">false</span><span class="op" id="6560720">}</span><span class="op" id="6560721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560724">{</span><span class="string" id="6560725">&#34;&#34;</span><span class="op" id="6560727">,</span>&nbsp;<span class="string" id="6560729">&#34;foo&#34;</span><span class="op" id="6560734">,</span>&nbsp;<span class="builtintype" id="6560736">false</span><span class="op" id="6560741">}</span><span class="op" id="6560742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560745">{</span><span class="string" id="6560746">&#34;foo&#34;</span><span class="op" id="6560751">,</span>&nbsp;<span class="string" id="6560753">&#34;foo&#34;</span><span class="op" id="6560758">,</span>&nbsp;<span class="builtintype" id="6560760">true</span><span class="op" id="6560764">}</span><span class="op" id="6560765">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560768">{</span><span class="string" id="6560769">&#34;foo&nbsp;&#34;</span><span class="op" id="6560775">,</span>&nbsp;<span class="string" id="6560777">&#34;foo&#34;</span><span class="op" id="6560782">,</span>&nbsp;<span class="builtintype" id="6560784">true</span><span class="op" id="6560788">}</span><span class="op" id="6560789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560792">{</span><span class="string" id="6560793">&#34;&nbsp;foo&#34;</span><span class="op" id="6560799">,</span>&nbsp;<span class="string" id="6560801">&#34;foo&#34;</span><span class="op" id="6560806">,</span>&nbsp;<span class="builtintype" id="6560808">true</span><span class="op" id="6560812">}</span><span class="op" id="6560813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560816">{</span><span class="string" id="6560817">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="6560824">,</span>&nbsp;<span class="string" id="6560826">&#34;foo&#34;</span><span class="op" id="6560831">,</span>&nbsp;<span class="builtintype" id="6560833">true</span><span class="op" id="6560837">}</span><span class="op" id="6560838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560841">{</span><span class="string" id="6560842">&#34;foo,bar&#34;</span><span class="op" id="6560851">,</span>&nbsp;<span class="string" id="6560853">&#34;foo&#34;</span><span class="op" id="6560858">,</span>&nbsp;<span class="builtintype" id="6560860">true</span><span class="op" id="6560864">}</span><span class="op" id="6560865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560868">{</span><span class="string" id="6560869">&#34;bar,foo&#34;</span><span class="op" id="6560878">,</span>&nbsp;<span class="string" id="6560880">&#34;foo&#34;</span><span class="op" id="6560885">,</span>&nbsp;<span class="builtintype" id="6560887">true</span><span class="op" id="6560891">}</span><span class="op" id="6560892">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560895">{</span><span class="string" id="6560896">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="6560906">,</span>&nbsp;<span class="string" id="6560908">&#34;foo&#34;</span><span class="op" id="6560913">,</span>&nbsp;<span class="builtintype" id="6560915">true</span><span class="op" id="6560919">}</span><span class="op" id="6560920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560923">{</span><span class="string" id="6560924">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="6560938">,</span>&nbsp;<span class="string" id="6560940">&#34;foo&#34;</span><span class="op" id="6560945">,</span>&nbsp;<span class="builtintype" id="6560947">true</span><span class="op" id="6560951">}</span><span class="op" id="6560952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560955">{</span><span class="string" id="6560956">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="6560970">,</span>&nbsp;<span class="string" id="6560972">&#34;foo&#34;</span><span class="op" id="6560977">,</span>&nbsp;<span class="builtintype" id="6560979">true</span><span class="op" id="6560983">}</span><span class="op" id="6560984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6560987">{</span><span class="string" id="6560988">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="6561002">,</span>&nbsp;<span class="string" id="6561004">&#34;foo&#34;</span><span class="op" id="6561009">,</span>&nbsp;<span class="builtintype" id="6561011">true</span><span class="op" id="6561015">}</span><span class="op" id="6561016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561019">{</span><span class="string" id="6561020">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="6561035">,</span>&nbsp;<span class="string" id="6561037">&#34;foo&#34;</span><span class="op" id="6561042">,</span>&nbsp;<span class="builtintype" id="6561044">true</span><span class="op" id="6561048">}</span><span class="op" id="6561049">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561052">{</span><span class="string" id="6561053">&#34;FOO&#34;</span><span class="op" id="6561058">,</span>&nbsp;<span class="string" id="6561060">&#34;foo&#34;</span><span class="op" id="6561065">,</span>&nbsp;<span class="builtintype" id="6561067">true</span><span class="op" id="6561071">}</span><span class="op" id="6561072">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561075">{</span><span class="string" id="6561076">&#34;FOO&nbsp;&#34;</span><span class="op" id="6561082">,</span>&nbsp;<span class="string" id="6561084">&#34;foo&#34;</span><span class="op" id="6561089">,</span>&nbsp;<span class="builtintype" id="6561091">true</span><span class="op" id="6561095">}</span><span class="op" id="6561096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561099">{</span><span class="string" id="6561100">&#34;&nbsp;FOO&#34;</span><span class="op" id="6561106">,</span>&nbsp;<span class="string" id="6561108">&#34;foo&#34;</span><span class="op" id="6561113">,</span>&nbsp;<span class="builtintype" id="6561115">true</span><span class="op" id="6561119">}</span><span class="op" id="6561120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561123">{</span><span class="string" id="6561124">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="6561131">,</span>&nbsp;<span class="string" id="6561133">&#34;foo&#34;</span><span class="op" id="6561138">,</span>&nbsp;<span class="builtintype" id="6561140">true</span><span class="op" id="6561144">}</span><span class="op" id="6561145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561148">{</span><span class="string" id="6561149">&#34;FOO,BAR&#34;</span><span class="op" id="6561158">,</span>&nbsp;<span class="string" id="6561160">&#34;foo&#34;</span><span class="op" id="6561165">,</span>&nbsp;<span class="builtintype" id="6561167">true</span><span class="op" id="6561171">}</span><span class="op" id="6561172">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561175">{</span><span class="string" id="6561176">&#34;BAR,FOO&#34;</span><span class="op" id="6561185">,</span>&nbsp;<span class="string" id="6561187">&#34;foo&#34;</span><span class="op" id="6561192">,</span>&nbsp;<span class="builtintype" id="6561194">true</span><span class="op" id="6561198">}</span><span class="op" id="6561199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561202">{</span><span class="string" id="6561203">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="6561213">,</span>&nbsp;<span class="string" id="6561215">&#34;foo&#34;</span><span class="op" id="6561220">,</span>&nbsp;<span class="builtintype" id="6561222">true</span><span class="op" id="6561226">}</span><span class="op" id="6561227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561230">{</span><span class="string" id="6561231">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="6561245">,</span>&nbsp;<span class="string" id="6561247">&#34;foo&#34;</span><span class="op" id="6561252">,</span>&nbsp;<span class="builtintype" id="6561254">true</span><span class="op" id="6561258">}</span><span class="op" id="6561259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561262">{</span><span class="string" id="6561263">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="6561277">,</span>&nbsp;<span class="string" id="6561279">&#34;foo&#34;</span><span class="op" id="6561284">,</span>&nbsp;<span class="builtintype" id="6561286">true</span><span class="op" id="6561290">}</span><span class="op" id="6561291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561294">{</span><span class="string" id="6561295">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="6561309">,</span>&nbsp;<span class="string" id="6561311">&#34;foo&#34;</span><span class="op" id="6561316">,</span>&nbsp;<span class="builtintype" id="6561318">true</span><span class="op" id="6561322">}</span><span class="op" id="6561323">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561326">{</span><span class="string" id="6561327">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="6561342">,</span>&nbsp;<span class="string" id="6561344">&#34;foo&#34;</span><span class="op" id="6561349">,</span>&nbsp;<span class="builtintype" id="6561351">true</span><span class="op" id="6561355">}</span><span class="op" id="6561356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561359">{</span><span class="string" id="6561360">&#34;foobar&#34;</span><span class="op" id="6561368">,</span>&nbsp;<span class="string" id="6561370">&#34;foo&#34;</span><span class="op" id="6561375">,</span>&nbsp;<span class="builtintype" id="6561377">false</span><span class="op" id="6561382">}</span><span class="op" id="6561383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561386">{</span><span class="string" id="6561387">&#34;barfoo&nbsp;&#34;</span><span class="op" id="6561396">,</span>&nbsp;<span class="string" id="6561398">&#34;foo&#34;</span><span class="op" id="6561403">,</span>&nbsp;<span class="builtintype" id="6561405">false</span><span class="op" id="6561410">}</span><span class="op" id="6561411">,</span><br>
<span class="lineno"></span><span class="op" id="6561413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="6561416">func</span>&nbsp;<span class="ident" id="6561421">TestHasToken</span><span class="op" id="6561433">(</span><span class="ident" id="6561434">t</span>&nbsp;<span class="op" id="6561436">*</span><span class="ident" id="6561437">testing</span><span class="op" id="6561444">.</span><span class="ident" id="6561445">T</span><span class="op" id="6561446">)</span>&nbsp;<span class="op" id="6561448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6561451">for</span>&nbsp;<span class="ident" id="6561455">_</span><span class="op" id="6561456">,</span>&nbsp;<span class="ident" id="6561458">tt</span>&nbsp;<span class="op" id="6561461">:=</span>&nbsp;<span class="keyword" id="6561464">range</span>&nbsp;<span class="ident" id="6561470">hasTokenTests</span>&nbsp;<span class="op" id="6561484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6561488">if</span>&nbsp;<span class="ident" id="6561491">hasToken</span><span class="op" id="6561499">(</span><span class="ident" id="6561500">tt</span><span class="op" id="6561502">.</span><span class="ident" id="6561503">header</span><span class="op" id="6561509">,</span>&nbsp;<span class="ident" id="6561511">tt</span><span class="op" id="6561513">.</span><span class="ident" id="6561514">token</span><span class="op" id="6561519">)</span>&nbsp;<span class="op" id="6561521">!=</span>&nbsp;<span class="ident" id="6561524">tt</span><span class="op" id="6561526">.</span><span class="ident" id="6561527">want</span>&nbsp;<span class="op" id="6561532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6561537">t</span><span class="op" id="6561538">.</span><span class="ident" id="6561539">Errorf</span><span class="op" id="6561545">(</span><span class="string" id="6561546">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6561578">,</span>&nbsp;<span class="ident" id="6561580">tt</span><span class="op" id="6561582">.</span><span class="ident" id="6561583">header</span><span class="op" id="6561589">,</span>&nbsp;<span class="ident" id="6561591">tt</span><span class="op" id="6561593">.</span><span class="ident" id="6561594">token</span><span class="op" id="6561599">,</span>&nbsp;<span class="op" id="6561601">!</span><span class="ident" id="6561602">tt</span><span class="op" id="6561604">.</span><span class="ident" id="6561605">want</span><span class="op" id="6561609">,</span>&nbsp;<span class="ident" id="6561611">tt</span><span class="op" id="6561613">.</span><span class="ident" id="6561614">want</span><span class="op" id="6561618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561622">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561625">}</span><br>
<span class="lineno"></span><span class="op" id="6561627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6561630">var</span>&nbsp;<span class="ident" id="6561634">testHeader</span>&nbsp;<span class="op" id="6561645">=</span>&nbsp;<span class="ident" id="6561647">Header</span><span class="op" id="6561653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6561656">&#34;Content-Length&#34;</span><span class="op" id="6561672">:</span>&nbsp;<span class="op" id="6561674">{</span><span class="string" id="6561675">&#34;123&#34;</span><span class="op" id="6561680">}</span><span class="op" id="6561681">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6561684">&#34;Content-Type&#34;</span><span class="op" id="6561698">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6561702">{</span><span class="string" id="6561703">&#34;text/plain&#34;</span><span class="op" id="6561715">}</span><span class="op" id="6561716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6561719">&#34;Date&#34;</span><span class="op" id="6561725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6561737">{</span><span class="string" id="6561738">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="6561764">}</span><span class="op" id="6561765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6561768">&#34;Server&#34;</span><span class="op" id="6561776">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6561786">{</span><span class="ident" id="6561787">DefaultUserAgent</span><span class="op" id="6561803">}</span><span class="op" id="6561804">,</span><br>
<span class="lineno"></span><span class="op" id="6561806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="6561809">var</span>&nbsp;<span class="ident" id="6561813">buf</span>&nbsp;<span class="ident" id="6561817">bytes</span><span class="op" id="6561822">.</span><span class="ident" id="6561823">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6561831">func</span>&nbsp;<span class="ident" id="6561836">BenchmarkHeaderWriteSubset</span><span class="op" id="6561862">(</span><span class="ident" id="6561863">b</span>&nbsp;<span class="op" id="6561865">*</span><span class="ident" id="6561866">testing</span><span class="op" id="6561873">.</span><span class="ident" id="6561874">B</span><span class="op" id="6561875">)</span>&nbsp;<span class="op" id="6561877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6561880">b</span><span class="op" id="6561881">.</span><span class="ident" id="6561882">ReportAllocs</span><span class="op" id="6561894">(</span><span class="op" id="6561895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6561898">for</span>&nbsp;<span class="ident" id="6561902">i</span>&nbsp;<span class="op" id="6561904">:=</span>&nbsp;<span class="num" id="6561907">0</span><span class="op" id="6561908">;</span>&nbsp;<span class="ident" id="6561910">i</span>&nbsp;<span class="op" id="6561912">&lt;</span>&nbsp;<span class="ident" id="6561914">b</span><span class="op" id="6561915">.</span><span class="ident" id="6561916">N</span><span class="op" id="6561917">;</span>&nbsp;<span class="ident" id="6561919">i</span><span class="op" id="6561920">++</span>&nbsp;<span class="op" id="6561923">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6561927">buf</span><span class="op" id="6561930">.</span><span class="ident" id="6561931">Reset</span><span class="op" id="6561936">(</span><span class="op" id="6561937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6561941">testHeader</span><span class="op" id="6561951">.</span><span class="ident" id="6561952">WriteSubset</span><span class="op" id="6561963">(</span><span class="op" id="6561964">&amp;</span><span class="ident" id="6561965">buf</span><span class="op" id="6561968">,</span>&nbsp;<span class="ident" id="6561970">nil</span><span class="op" id="6561973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6561976">}</span><br>
<span class="lineno"></span><span class="op" id="6561978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="6561981">func</span>&nbsp;<span class="ident" id="6561986">TestHeaderWriteSubsetAllocs</span><span class="op" id="6562013">(</span><span class="ident" id="6562014">t</span>&nbsp;<span class="op" id="6562016">*</span><span class="ident" id="6562017">testing</span><span class="op" id="6562024">.</span><span class="ident" id="6562025">T</span><span class="op" id="6562026">)</span>&nbsp;<span class="op" id="6562028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6562031">if</span>&nbsp;<span class="ident" id="6562034">testing</span><span class="op" id="6562041">.</span><span class="ident" id="6562042">Short</span><span class="op" id="6562047">(</span><span class="op" id="6562048">)</span>&nbsp;<span class="op" id="6562050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562054">t</span><span class="op" id="6562055">.</span><span class="ident" id="6562056">Skip</span><span class="op" id="6562060">(</span><span class="string" id="6562061">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6562096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6562099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6562102">if</span>&nbsp;<span class="ident" id="6562105">raceEnabled</span>&nbsp;<span class="op" id="6562117">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562121">t</span><span class="op" id="6562122">.</span><span class="ident" id="6562123">Skip</span><span class="op" id="6562127">(</span><span class="string" id="6562128">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="6562163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6562166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6562169">if</span>&nbsp;<span class="ident" id="6562172">runtime</span><span class="op" id="6562179">.</span><span class="ident" id="6562180">GOMAXPROCS</span><span class="op" id="6562190">(</span><span class="num" id="6562191">0</span><span class="op" id="6562192">)</span>&nbsp;<span class="op" id="6562194">&gt;</span>&nbsp;<span class="num" id="6562196">1</span>&nbsp;<span class="op" id="6562198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562202">t</span><span class="op" id="6562203">.</span><span class="ident" id="6562204">Skip</span><span class="op" id="6562208">(</span><span class="string" id="6562209">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6562233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6562236">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562239">n</span>&nbsp;<span class="op" id="6562241">:=</span>&nbsp;<span class="ident" id="6562244">testing</span><span class="op" id="6562251">.</span><span class="ident" id="6562252">AllocsPerRun</span><span class="op" id="6562264">(</span><span class="num" id="6562265">100</span><span class="op" id="6562268">,</span>&nbsp;<span class="keyword" id="6562270">func</span><span class="op" id="6562274">(</span><span class="op" id="6562275">)</span>&nbsp;<span class="op" id="6562277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562281">buf</span><span class="op" id="6562284">.</span><span class="ident" id="6562285">Reset</span><span class="op" id="6562290">(</span><span class="op" id="6562291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562295">testHeader</span><span class="op" id="6562305">.</span><span class="ident" id="6562306">WriteSubset</span><span class="op" id="6562317">(</span><span class="op" id="6562318">&amp;</span><span class="ident" id="6562319">buf</span><span class="op" id="6562322">,</span>&nbsp;<span class="ident" id="6562324">nil</span><span class="op" id="6562327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6562330">}</span><span class="op" id="6562331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6562334">if</span>&nbsp;<span class="ident" id="6562337">n</span>&nbsp;<span class="op" id="6562339">&gt;</span>&nbsp;<span class="num" id="6562341">0</span>&nbsp;<span class="op" id="6562343">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6562347">t</span><span class="op" id="6562348">.</span><span class="ident" id="6562349">Errorf</span><span class="op" id="6562355">(</span><span class="string" id="6562356">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="6562377">,</span>&nbsp;<span class="ident" id="6562379">n</span><span class="op" id="6562380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6562383">}</span><br>
<span class="lineno"></span><span class="op" id="6562385">}</span>
</div>
</body>
</html>
