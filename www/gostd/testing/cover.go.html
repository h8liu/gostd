<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html" class="current">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5462348">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5462403">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5462457">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5462508">//&nbsp;Support&nbsp;for&nbsp;test&nbsp;coverage.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5462539">package</span>&nbsp;<span class="ident" id="5462547">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5462556">import</span>&nbsp;<span class="op" id="5462563">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462566">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462573">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5462579">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span><span class="op" id="5462593">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5462596">//&nbsp;CoverBlock&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;for&nbsp;a&nbsp;single&nbsp;basic&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="5462662">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="5462741">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5462806">type</span>&nbsp;<span class="ident" id="5462811">CoverBlock</span>&nbsp;<span class="keyword" id="5462822">struct</span>&nbsp;<span class="op" id="5462829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462832">Line0</span>&nbsp;<span class="builtintype" id="5462838">uint32</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462846">Col0</span>&nbsp;&nbsp;<span class="builtintype" id="5462852">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462860">Line1</span>&nbsp;<span class="builtintype" id="5462866">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462874">Col1</span>&nbsp;&nbsp;<span class="builtintype" id="5462880">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5462888">Stmts</span>&nbsp;<span class="builtintype" id="5462894">uint16</span><br>
<span class="lineno"></span><span class="op" id="5462901">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5462904">var</span>&nbsp;<span class="ident" id="5462908">cover</span>&nbsp;<span class="ident" id="5462914"><a href="/gostd/testing/cover.go.html#5463129">Cover</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5462921">//&nbsp;Cover&nbsp;records&nbsp;information&nbsp;about&nbsp;test&nbsp;coverage&nbsp;checking.</span><br>
<span class="lineno"></span><span class="comment" id="5462980">//&nbsp;NOTE:&nbsp;This&nbsp;struct&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno">30</span><span class="comment" id="5463059">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5463124">type</span>&nbsp;<span class="ident" id="5463129">Cover</span>&nbsp;<span class="keyword" id="5463135">struct</span>&nbsp;<span class="op" id="5463142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463145">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5463161">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463169">Counters</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463185">map</span><span class="op" id="5463188">[</span><span class="builtintype" id="5463189">string</span><span class="op" id="5463195">]</span><span class="op" id="5463196">[</span><span class="op" id="5463197">]</span><span class="builtintype" id="5463198">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463206">Blocks</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463222">map</span><span class="op" id="5463225">[</span><span class="builtintype" id="5463226">string</span><span class="op" id="5463232">]</span><span class="op" id="5463233">[</span><span class="op" id="5463234">]</span><span class="ident" id="5463235"><a href="/gostd/testing/cover.go.html#5462811">CoverBlock</a></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463247">CoveredPackages</span>&nbsp;<span class="builtintype" id="5463263">string</span><br>
<span class="lineno"></span><span class="op" id="5463270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5463273">//&nbsp;Coverage&nbsp;reports&nbsp;the&nbsp;current&nbsp;code&nbsp;coverage&nbsp;as&nbsp;a&nbsp;fraction&nbsp;in&nbsp;the&nbsp;range&nbsp;[0,&nbsp;1].</span><br>
<span class="lineno"></span><span class="comment" id="5463354">//&nbsp;If&nbsp;coverage&nbsp;is&nbsp;not&nbsp;enabled,&nbsp;Coverage&nbsp;returns&nbsp;0.</span><br>
<span class="lineno">40</span><span class="comment" id="5463405">//</span><br>
<span class="lineno"></span><span class="comment" id="5463408">//&nbsp;When&nbsp;running&nbsp;a&nbsp;large&nbsp;set&nbsp;of&nbsp;sequential&nbsp;test&nbsp;cases,&nbsp;checking&nbsp;Coverage&nbsp;after&nbsp;each&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5463495">//&nbsp;can&nbsp;be&nbsp;useful&nbsp;for&nbsp;identifying&nbsp;which&nbsp;test&nbsp;cases&nbsp;exercise&nbsp;new&nbsp;code&nbsp;paths.</span><br>
<span class="lineno"></span><span class="comment" id="5463570">//&nbsp;It&nbsp;is&nbsp;not&nbsp;a&nbsp;replacement&nbsp;for&nbsp;the&nbsp;reports&nbsp;generated&nbsp;by&nbsp;&#39;go&nbsp;test&nbsp;-cover&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5463647">//&nbsp;&#39;go&nbsp;tool&nbsp;cover&#39;.</span><br>
<span class="lineno">45</span><span class="keyword" id="5463667">func</span>&nbsp;<span class="ident" id="5463672">Coverage</span><span class="op" id="5463680">(</span><span class="op" id="5463681">)</span>&nbsp;<span class="builtintype" id="5463683">float64</span>&nbsp;<span class="op" id="5463691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463694">var</span>&nbsp;<span class="ident" id="5463698">n</span><span class="op" id="5463699">,</span>&nbsp;<span class="ident" id="5463701">d</span>&nbsp;<span class="builtintype" id="5463703">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463710">for</span>&nbsp;<span class="ident" id="5463714">_</span><span class="op" id="5463715">,</span>&nbsp;<span class="ident" id="5463717">counters</span>&nbsp;<span class="op" id="5463726">:=</span>&nbsp;<span class="keyword" id="5463729">range</span>&nbsp;<span class="ident" id="5463735"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5463740">.</span><span class="ident" id="5463741"><a href="/gostd/testing/cover.go.html#5463169">Counters</a></span>&nbsp;<span class="op" id="5463750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463754">for</span>&nbsp;<span class="ident" id="5463758">i</span>&nbsp;<span class="op" id="5463760">:=</span>&nbsp;<span class="keyword" id="5463763">range</span>&nbsp;<span class="ident" id="5463769"><a href="/gostd/testing/cover.go.html#5463717">counters</a></span>&nbsp;<span class="op" id="5463778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463783">if</span>&nbsp;<span class="ident" id="5463786"><a href="/gostd/testing/cover.go.html#5462579">atomic</a></span><span class="op" id="5463792">.</span><span class="ident" id="5463793"><a href="/gostd/sync/atomic/doc.go.html#1468003">LoadUint32</a></span><span class="op" id="5463803">(</span><span class="op" id="5463804">&amp;</span><span class="ident" id="5463805"><a href="/gostd/testing/cover.go.html#5463717">counters</a></span><span class="op" id="5463813">[</span><span class="ident" id="5463814"><a href="/gostd/testing/cover.go.html#5463758">i</a></span><span class="op" id="5463815">]</span><span class="op" id="5463816">)</span>&nbsp;<span class="op" id="5463818">&gt;</span>&nbsp;<span class="num" id="5463820">0</span>&nbsp;<span class="op" id="5463822">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463828"><a href="/gostd/testing/cover.go.html#5463698">n</a></span><span class="op" id="5463829">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5463835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5463840"><a href="/gostd/testing/cover.go.html#5463701">d</a></span><span class="op" id="5463841">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5463846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5463849">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463852">if</span>&nbsp;<span class="ident" id="5463855"><a href="/gostd/testing/cover.go.html#5463701">d</a></span>&nbsp;<span class="op" id="5463857">==</span>&nbsp;<span class="num" id="5463860">0</span>&nbsp;<span class="op" id="5463862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463866">return</span>&nbsp;<span class="num" id="5463873">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5463876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5463879">return</span>&nbsp;<span class="builtintype" id="5463886">float64</span><span class="op" id="5463893">(</span><span class="ident" id="5463894"><a href="/gostd/testing/cover.go.html#5463698">n</a></span><span class="op" id="5463895">)</span>&nbsp;<span class="op" id="5463897">/</span>&nbsp;<span class="builtintype" id="5463899">float64</span><span class="op" id="5463906">(</span><span class="ident" id="5463907"><a href="/gostd/testing/cover.go.html#5463701">d</a></span><span class="op" id="5463908">)</span><br>
<span class="lineno"></span><span class="op" id="5463910">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5463913">//&nbsp;RegisterCover&nbsp;records&nbsp;the&nbsp;coverage&nbsp;data&nbsp;accumulators&nbsp;for&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="comment" id="5463984">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;is&nbsp;internal&nbsp;to&nbsp;the&nbsp;testing&nbsp;infrastructure&nbsp;and&nbsp;may&nbsp;change.</span><br>
<span class="lineno"></span><span class="comment" id="5464065">//&nbsp;It&nbsp;is&nbsp;not&nbsp;covered&nbsp;(yet)&nbsp;by&nbsp;the&nbsp;Go&nbsp;1&nbsp;compatibility&nbsp;guidelines.</span><br>
<span class="lineno"></span><span class="keyword" id="5464130">func</span>&nbsp;<span class="ident" id="5464135">RegisterCover</span><span class="op" id="5464148">(</span><span class="ident" id="5464149">c</span>&nbsp;<span class="ident" id="5464151"><a href="/gostd/testing/cover.go.html#5463129">Cover</a></span><span class="op" id="5464156">)</span>&nbsp;<span class="op" id="5464158">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464161"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span>&nbsp;<span class="op" id="5464167">=</span>&nbsp;<span class="ident" id="5464169"><a href="/gostd/testing/cover.go.html#5464149">c</a></span><br>
<span class="lineno"></span><span class="op" id="5464171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5464174">//&nbsp;mustBeNil&nbsp;checks&nbsp;the&nbsp;error&nbsp;and,&nbsp;if&nbsp;present,&nbsp;reports&nbsp;it&nbsp;and&nbsp;exits.</span><br>
<span class="lineno"></span><span class="keyword" id="5464243">func</span>&nbsp;<span class="ident" id="5464248">mustBeNil</span><span class="op" id="5464257">(</span><span class="ident" id="5464258">err</span>&nbsp;<span class="builtintype" id="5464262">error</span><span class="op" id="5464267">)</span>&nbsp;<span class="op" id="5464269">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464272">if</span>&nbsp;<span class="ident" id="5464275"><a href="/gostd/testing/cover.go.html#5464258">err</a></span>&nbsp;<span class="op" id="5464279">!=</span>&nbsp;<span class="builtintype" id="5464282">nil</span>&nbsp;<span class="op" id="5464286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464290"><a href="/gostd/testing/cover.go.html#5462566">fmt</a></span><span class="op" id="5464293">.</span><span class="ident" id="5464294"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5464301">(</span><span class="ident" id="5464302"><a href="/gostd/testing/cover.go.html#5462573">os</a></span><span class="op" id="5464304">.</span><span class="ident" id="5464305"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5464311">,</span>&nbsp;<span class="string" id="5464313">&#34;testing:&nbsp;%s\n&#34;</span><span class="op" id="5464328">,</span>&nbsp;<span class="ident" id="5464330"><a href="/gostd/testing/cover.go.html#5464258">err</a></span><span class="op" id="5464333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464337"><a href="/gostd/testing/cover.go.html#5462573">os</a></span><span class="op" id="5464339">.</span><span class="ident" id="5464340"><a href="/gostd/os/proc.go.html#2469766">Exit</a></span><span class="op" id="5464344">(</span><span class="num" id="5464345">2</span><span class="op" id="5464346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464349">}</span><br>
<span class="lineno"></span><span class="op" id="5464351">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="5464354">//&nbsp;coverReport&nbsp;reports&nbsp;the&nbsp;coverage&nbsp;percentage&nbsp;and&nbsp;writes&nbsp;a&nbsp;coverage&nbsp;profile&nbsp;if&nbsp;requested.</span><br>
<span class="lineno"></span><span class="keyword" id="5464445">func</span>&nbsp;<span class="ident" id="5464450">coverReport</span><span class="op" id="5464461">(</span><span class="op" id="5464462">)</span>&nbsp;<span class="op" id="5464464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464467">var</span>&nbsp;<span class="ident" id="5464471">f</span>&nbsp;<span class="op" id="5464473">*</span><span class="ident" id="5464474"><a href="/gostd/testing/cover.go.html#5462573">os</a></span><span class="op" id="5464476">.</span><span class="ident" id="5464477"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464483">var</span>&nbsp;<span class="ident" id="5464487">err</span>&nbsp;<span class="builtintype" id="5464491">error</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464498">if</span>&nbsp;<span class="op" id="5464501">*</span><span class="ident" id="5464502"><a href="/gostd/testing/testing.go.html#5473562">coverProfile</a></span>&nbsp;<span class="op" id="5464515">!=</span>&nbsp;<span class="string" id="5464518">&#34;&#34;</span>&nbsp;<span class="op" id="5464521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464525"><a href="/gostd/testing/cover.go.html#5464471">f</a></span><span class="op" id="5464526">,</span>&nbsp;<span class="ident" id="5464528"><a href="/gostd/testing/cover.go.html#5464487">err</a></span>&nbsp;<span class="op" id="5464532">=</span>&nbsp;<span class="ident" id="5464534"><a href="/gostd/testing/cover.go.html#5462573">os</a></span><span class="op" id="5464536">.</span><span class="ident" id="5464537"><a href="/gostd/os/file.go.html#2447225">Create</a></span><span class="op" id="5464543">(</span><span class="ident" id="5464544"><a href="/gostd/testing/testing.go.html#5488099">toOutputDir</a></span><span class="op" id="5464555">(</span><span class="op" id="5464556">*</span><span class="ident" id="5464557"><a href="/gostd/testing/testing.go.html#5473562">coverProfile</a></span><span class="op" id="5464569">)</span><span class="op" id="5464570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464574"><a href="/gostd/testing/cover.go.html#5464248">mustBeNil</a></span><span class="op" id="5464583">(</span><span class="ident" id="5464584"><a href="/gostd/testing/cover.go.html#5464487">err</a></span><span class="op" id="5464587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464591"><a href="/gostd/testing/cover.go.html#5462566">fmt</a></span><span class="op" id="5464594">.</span><span class="ident" id="5464595"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5464602">(</span><span class="ident" id="5464603"><a href="/gostd/testing/cover.go.html#5464471">f</a></span><span class="op" id="5464604">,</span>&nbsp;<span class="string" id="5464606">&#34;mode:&nbsp;%s\n&#34;</span><span class="op" id="5464618">,</span>&nbsp;<span class="ident" id="5464620"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5464625">.</span><span class="ident" id="5464626"><a href="/gostd/testing/cover.go.html#5463145">Mode</a></span><span class="op" id="5464630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464634">defer</span>&nbsp;<span class="keyword" id="5464640">func</span><span class="op" id="5464644">(</span><span class="op" id="5464645">)</span>&nbsp;<span class="op" id="5464647">{</span>&nbsp;<span class="ident" id="5464649"><a href="/gostd/testing/cover.go.html#5464248">mustBeNil</a></span><span class="op" id="5464658">(</span><span class="ident" id="5464659"><a href="/gostd/testing/cover.go.html#5464471">f</a></span><span class="op" id="5464660">.</span><span class="ident" id="5464661"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5464666">(</span><span class="op" id="5464667">)</span><span class="op" id="5464668">)</span>&nbsp;<span class="op" id="5464670">}</span><span class="op" id="5464671">(</span><span class="op" id="5464672">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464679">var</span>&nbsp;<span class="ident" id="5464683">active</span><span class="op" id="5464689">,</span>&nbsp;<span class="ident" id="5464691">total</span>&nbsp;<span class="builtintype" id="5464697">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464704">var</span>&nbsp;<span class="ident" id="5464708">count</span>&nbsp;<span class="builtintype" id="5464714">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464722">for</span>&nbsp;<span class="ident" id="5464726">name</span><span class="op" id="5464730">,</span>&nbsp;<span class="ident" id="5464732">counts</span>&nbsp;<span class="op" id="5464739">:=</span>&nbsp;<span class="keyword" id="5464742">range</span>&nbsp;<span class="ident" id="5464748"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5464753">.</span><span class="ident" id="5464754"><a href="/gostd/testing/cover.go.html#5463169">Counters</a></span>&nbsp;<span class="op" id="5464763">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464767">blocks</span>&nbsp;<span class="op" id="5464774">:=</span>&nbsp;<span class="ident" id="5464777"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5464782">.</span><span class="ident" id="5464783"><a href="/gostd/testing/cover.go.html#5463206">Blocks</a></span><span class="op" id="5464789">[</span><span class="ident" id="5464790"><a href="/gostd/testing/cover.go.html#5464726">name</a></span><span class="op" id="5464794">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464798">for</span>&nbsp;<span class="ident" id="5464802">i</span>&nbsp;<span class="op" id="5464804">:=</span>&nbsp;<span class="keyword" id="5464807">range</span>&nbsp;<span class="ident" id="5464813"><a href="/gostd/testing/cover.go.html#5464732">counts</a></span>&nbsp;<span class="op" id="5464820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464825">stmts</span>&nbsp;<span class="op" id="5464831">:=</span>&nbsp;<span class="builtintype" id="5464834">int64</span><span class="op" id="5464839">(</span><span class="ident" id="5464840"><a href="/gostd/testing/cover.go.html#5464767">blocks</a></span><span class="op" id="5464846">[</span><span class="ident" id="5464847"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5464848">]</span><span class="op" id="5464849">.</span><span class="ident" id="5464850"><a href="/gostd/testing/cover.go.html#5462888">Stmts</a></span><span class="op" id="5464855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464860"><a href="/gostd/testing/cover.go.html#5464691">total</a></span>&nbsp;<span class="op" id="5464866">+=</span>&nbsp;<span class="ident" id="5464869"><a href="/gostd/testing/cover.go.html#5464825">stmts</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464878"><a href="/gostd/testing/cover.go.html#5464708">count</a></span>&nbsp;<span class="op" id="5464884">=</span>&nbsp;<span class="ident" id="5464886"><a href="/gostd/testing/cover.go.html#5462579">atomic</a></span><span class="op" id="5464892">.</span><span class="ident" id="5464893"><a href="/gostd/sync/atomic/doc.go.html#1468003">LoadUint32</a></span><span class="op" id="5464903">(</span><span class="op" id="5464904">&amp;</span><span class="ident" id="5464905"><a href="/gostd/testing/cover.go.html#5464732">counts</a></span><span class="op" id="5464911">[</span><span class="ident" id="5464912"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5464913">]</span><span class="op" id="5464914">)</span>&nbsp;<span class="comment" id="5464916">//&nbsp;For&nbsp;-mode=atomic.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464940">if</span>&nbsp;<span class="ident" id="5464943"><a href="/gostd/testing/cover.go.html#5464708">count</a></span>&nbsp;<span class="op" id="5464949">&gt;</span>&nbsp;<span class="num" id="5464951">0</span>&nbsp;<span class="op" id="5464953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5464959"><a href="/gostd/testing/cover.go.html#5464683">active</a></span>&nbsp;<span class="op" id="5464966">+=</span>&nbsp;<span class="ident" id="5464969"><a href="/gostd/testing/cover.go.html#5464825">stmts</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5464978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5464983">if</span>&nbsp;<span class="ident" id="5464986"><a href="/gostd/testing/cover.go.html#5464471">f</a></span>&nbsp;<span class="op" id="5464988">!=</span>&nbsp;<span class="builtintype" id="5464991">nil</span>&nbsp;<span class="op" id="5464995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465001">_</span><span class="op" id="5465002">,</span>&nbsp;<span class="ident" id="5465004">err</span>&nbsp;<span class="op" id="5465008">:=</span>&nbsp;<span class="ident" id="5465011"><a href="/gostd/testing/cover.go.html#5462566">fmt</a></span><span class="op" id="5465014">.</span><span class="ident" id="5465015"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5465022">(</span><span class="ident" id="5465023"><a href="/gostd/testing/cover.go.html#5464471">f</a></span><span class="op" id="5465024">,</span>&nbsp;<span class="string" id="5465026">&#34;%s:%d.%d,%d.%d&nbsp;%d&nbsp;%d\n&#34;</span><span class="op" id="5465050">,</span>&nbsp;<span class="ident" id="5465052"><a href="/gostd/testing/cover.go.html#5464726">name</a></span><span class="op" id="5465056">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465063"><a href="/gostd/testing/cover.go.html#5464767">blocks</a></span><span class="op" id="5465069">[</span><span class="ident" id="5465070"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5465071">]</span><span class="op" id="5465072">.</span><span class="ident" id="5465073"><a href="/gostd/testing/cover.go.html#5462832">Line0</a></span><span class="op" id="5465078">,</span>&nbsp;<span class="ident" id="5465080"><a href="/gostd/testing/cover.go.html#5464767">blocks</a></span><span class="op" id="5465086">[</span><span class="ident" id="5465087"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5465088">]</span><span class="op" id="5465089">.</span><span class="ident" id="5465090"><a href="/gostd/testing/cover.go.html#5462846">Col0</a></span><span class="op" id="5465094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465101"><a href="/gostd/testing/cover.go.html#5464767">blocks</a></span><span class="op" id="5465107">[</span><span class="ident" id="5465108"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5465109">]</span><span class="op" id="5465110">.</span><span class="ident" id="5465111"><a href="/gostd/testing/cover.go.html#5462860">Line1</a></span><span class="op" id="5465116">,</span>&nbsp;<span class="ident" id="5465118"><a href="/gostd/testing/cover.go.html#5464767">blocks</a></span><span class="op" id="5465124">[</span><span class="ident" id="5465125"><a href="/gostd/testing/cover.go.html#5464802">i</a></span><span class="op" id="5465126">]</span><span class="op" id="5465127">.</span><span class="ident" id="5465128"><a href="/gostd/testing/cover.go.html#5462874">Col1</a></span><span class="op" id="5465132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465139"><a href="/gostd/testing/cover.go.html#5464825">stmts</a></span><span class="op" id="5465144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465151"><a href="/gostd/testing/cover.go.html#5464708">count</a></span><span class="op" id="5465156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465162"><a href="/gostd/testing/cover.go.html#5464248">mustBeNil</a></span><span class="op" id="5465171">(</span><span class="ident" id="5465172"><a href="/gostd/testing/cover.go.html#5465004">err</a></span><span class="op" id="5465175">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5465190">if</span>&nbsp;<span class="ident" id="5465193"><a href="/gostd/testing/cover.go.html#5464691">total</a></span>&nbsp;<span class="op" id="5465199">==</span>&nbsp;<span class="num" id="5465202">0</span>&nbsp;<span class="op" id="5465204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465208"><a href="/gostd/testing/cover.go.html#5464691">total</a></span>&nbsp;<span class="op" id="5465214">=</span>&nbsp;<span class="num" id="5465216">1</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5465219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5465222"><a href="/gostd/testing/cover.go.html#5462566">fmt</a></span><span class="op" id="5465225">.</span><span class="ident" id="5465226"><a href="/gostd/fmt/print.go.html#2143442">Printf</a></span><span class="op" id="5465232">(</span><span class="string" id="5465233">&#34;coverage:&nbsp;%.1f%%&nbsp;of&nbsp;statements%s\n&#34;</span><span class="op" id="5465269">,</span>&nbsp;<span class="num" id="5465271">100</span><span class="op" id="5465274">*</span><span class="builtintype" id="5465275">float64</span><span class="op" id="5465282">(</span><span class="ident" id="5465283"><a href="/gostd/testing/cover.go.html#5464683">active</a></span><span class="op" id="5465289">)</span><span class="op" id="5465290">/</span><span class="builtintype" id="5465291">float64</span><span class="op" id="5465298">(</span><span class="ident" id="5465299"><a href="/gostd/testing/cover.go.html#5464691">total</a></span><span class="op" id="5465304">)</span><span class="op" id="5465305">,</span>&nbsp;<span class="ident" id="5465307"><a href="/gostd/testing/cover.go.html#5462908">cover</a></span><span class="op" id="5465312">.</span><span class="ident" id="5465313"><a href="/gostd/testing/cover.go.html#5463247">CoveredPackages</a></span><span class="op" id="5465328">)</span><br>
<span class="lineno"></span><span class="op" id="5465330">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
