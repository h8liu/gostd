<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3433399">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3433454">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3433508">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3433559">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;sysSocket&nbsp;and&nbsp;accept&nbsp;for&nbsp;platforms&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3433623">//&nbsp;provide&nbsp;a&nbsp;fast&nbsp;path&nbsp;for&nbsp;setting&nbsp;SetNonblock&nbsp;and&nbsp;CloseOnExec.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3433688">//&nbsp;+build&nbsp;freebsd&nbsp;linux</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3433713">package</span>&nbsp;<span class="ident" id="3433721">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3433726">import</span>&nbsp;<span class="string" id="3433733">&#34;syscall&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3433744">//&nbsp;Wrapper&nbsp;around&nbsp;the&nbsp;socket&nbsp;system&nbsp;call&nbsp;that&nbsp;marks&nbsp;the&nbsp;returned&nbsp;file</span><br>
<span class="lineno">15</span><span class="comment" id="3433814">//&nbsp;descriptor&nbsp;as&nbsp;nonblocking&nbsp;and&nbsp;close-on-exec.</span><br>
<span class="lineno"></span><span class="keyword" id="3433862">func</span>&nbsp;<span class="ident" id="3433867">sysSocket</span><span class="op" id="3433876">(</span><span class="ident" id="3433877">family</span><span class="op" id="3433883">,</span>&nbsp;<span class="ident" id="3433885">sotype</span><span class="op" id="3433891">,</span>&nbsp;<span class="ident" id="3433893">proto</span>&nbsp;<span class="builtintype" id="3433899">int</span><span class="op" id="3433902">)</span>&nbsp;<span class="op" id="3433904">(</span><span class="builtintype" id="3433905">int</span><span class="op" id="3433908">,</span>&nbsp;<span class="builtintype" id="3433910">error</span><span class="op" id="3433915">)</span>&nbsp;<span class="op" id="3433917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3433920">s</span><span class="op" id="3433921">,</span>&nbsp;<span class="ident" id="3433923">err</span>&nbsp;<span class="op" id="3433927">:=</span>&nbsp;<span class="ident" id="3433930">syscall</span><span class="op" id="3433937">.</span><span class="ident" id="3433938">Socket</span><span class="op" id="3433944">(</span><span class="ident" id="3433945">family</span><span class="op" id="3433951">,</span>&nbsp;<span class="ident" id="3433953">sotype</span><span class="op" id="3433959">|</span><span class="ident" id="3433960">syscall</span><span class="op" id="3433967">.</span><span class="ident" id="3433968">SOCK_NONBLOCK</span><span class="op" id="3433981">|</span><span class="ident" id="3433982">syscall</span><span class="op" id="3433989">.</span><span class="ident" id="3433990">SOCK_CLOEXEC</span><span class="op" id="3434002">,</span>&nbsp;<span class="ident" id="3434004">proto</span><span class="op" id="3434009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434012">//&nbsp;On&nbsp;Linux&nbsp;the&nbsp;SOCK_NONBLOCK&nbsp;and&nbsp;SOCK_CLOEXEC&nbsp;flags&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434071">//&nbsp;introduced&nbsp;in&nbsp;2.6.27&nbsp;kernel&nbsp;and&nbsp;on&nbsp;FreeBSD&nbsp;both&nbsp;flags&nbsp;were</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434134">//&nbsp;introduced&nbsp;in&nbsp;10&nbsp;kernel.&nbsp;If&nbsp;we&nbsp;get&nbsp;an&nbsp;EINVAL&nbsp;error&nbsp;on&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434198">//&nbsp;or&nbsp;EPROTONOSUPPORT&nbsp;error&nbsp;on&nbsp;FreeBSD,&nbsp;fall&nbsp;back&nbsp;to&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434258">//&nbsp;socket&nbsp;without&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434283">if</span>&nbsp;<span class="ident" id="3434286">err</span>&nbsp;<span class="op" id="3434290">==</span>&nbsp;<span class="ident" id="3434293">nil</span>&nbsp;<span class="op" id="3434297">||</span>&nbsp;<span class="op" id="3434300">(</span><span class="ident" id="3434301">err</span>&nbsp;<span class="op" id="3434305">!=</span>&nbsp;<span class="ident" id="3434308">syscall</span><span class="op" id="3434315">.</span><span class="ident" id="3434316">EPROTONOSUPPORT</span>&nbsp;<span class="op" id="3434332">&amp;&amp;</span>&nbsp;<span class="ident" id="3434335">err</span>&nbsp;<span class="op" id="3434339">!=</span>&nbsp;<span class="ident" id="3434342">syscall</span><span class="op" id="3434349">.</span><span class="ident" id="3434350">EINVAL</span><span class="op" id="3434356">)</span>&nbsp;<span class="op" id="3434358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434362">return</span>&nbsp;<span class="ident" id="3434369">s</span><span class="op" id="3434370">,</span>&nbsp;<span class="ident" id="3434372">err</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3434377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434381">//&nbsp;See&nbsp;../syscall/exec_unix.go&nbsp;for&nbsp;description&nbsp;of&nbsp;ForkLock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434442">syscall</span><span class="op" id="3434449">.</span><span class="ident" id="3434450">ForkLock</span><span class="op" id="3434458">.</span><span class="ident" id="3434459">RLock</span><span class="op" id="3434464">(</span><span class="op" id="3434465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434468">s</span><span class="op" id="3434469">,</span>&nbsp;<span class="ident" id="3434471">err</span>&nbsp;<span class="op" id="3434475">=</span>&nbsp;<span class="ident" id="3434477">syscall</span><span class="op" id="3434484">.</span><span class="ident" id="3434485">Socket</span><span class="op" id="3434491">(</span><span class="ident" id="3434492">family</span><span class="op" id="3434498">,</span>&nbsp;<span class="ident" id="3434500">sotype</span><span class="op" id="3434506">,</span>&nbsp;<span class="ident" id="3434508">proto</span><span class="op" id="3434513">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434516">if</span>&nbsp;<span class="ident" id="3434519">err</span>&nbsp;<span class="op" id="3434523">==</span>&nbsp;<span class="ident" id="3434526">nil</span>&nbsp;<span class="op" id="3434530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434534">syscall</span><span class="op" id="3434541">.</span><span class="ident" id="3434542">CloseOnExec</span><span class="op" id="3434553">(</span><span class="ident" id="3434554">s</span><span class="op" id="3434555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3434558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434561">syscall</span><span class="op" id="3434568">.</span><span class="ident" id="3434569">ForkLock</span><span class="op" id="3434577">.</span><span class="ident" id="3434578">RUnlock</span><span class="op" id="3434585">(</span><span class="op" id="3434586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434589">if</span>&nbsp;<span class="ident" id="3434592">err</span>&nbsp;<span class="op" id="3434596">!=</span>&nbsp;<span class="ident" id="3434599">nil</span>&nbsp;<span class="op" id="3434603">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434607">return</span>&nbsp;<span class="op" id="3434614">-</span><span class="num" id="3434615">1</span><span class="op" id="3434616">,</span>&nbsp;<span class="ident" id="3434618">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3434623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434626">if</span>&nbsp;<span class="ident" id="3434629">err</span>&nbsp;<span class="op" id="3434633">=</span>&nbsp;<span class="ident" id="3434635">syscall</span><span class="op" id="3434642">.</span><span class="ident" id="3434643">SetNonblock</span><span class="op" id="3434654">(</span><span class="ident" id="3434655">s</span><span class="op" id="3434656">,</span>&nbsp;<span class="ident" id="3434658">true</span><span class="op" id="3434662">)</span><span class="op" id="3434663">;</span>&nbsp;<span class="ident" id="3434665">err</span>&nbsp;<span class="op" id="3434669">!=</span>&nbsp;<span class="ident" id="3434672">nil</span>&nbsp;<span class="op" id="3434676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434680">syscall</span><span class="op" id="3434687">.</span><span class="ident" id="3434688">Close</span><span class="op" id="3434693">(</span><span class="ident" id="3434694">s</span><span class="op" id="3434695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434699">return</span>&nbsp;<span class="op" id="3434706">-</span><span class="num" id="3434707">1</span><span class="op" id="3434708">,</span>&nbsp;<span class="ident" id="3434710">err</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3434715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3434718">return</span>&nbsp;<span class="ident" id="3434725">s</span><span class="op" id="3434726">,</span>&nbsp;<span class="ident" id="3434728">nil</span><br>
<span class="lineno"></span><span class="op" id="3434732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3434735">//&nbsp;Wrapper&nbsp;around&nbsp;the&nbsp;accept&nbsp;system&nbsp;call&nbsp;that&nbsp;marks&nbsp;the&nbsp;returned&nbsp;file</span><br>
<span class="lineno">45</span><span class="comment" id="3434805">//&nbsp;descriptor&nbsp;as&nbsp;nonblocking&nbsp;and&nbsp;close-on-exec.</span><br>
<span class="lineno"></span><span class="keyword" id="3434853">func</span>&nbsp;<span class="ident" id="3434858">accept</span><span class="op" id="3434864">(</span><span class="ident" id="3434865">s</span>&nbsp;<span class="builtintype" id="3434867">int</span><span class="op" id="3434870">)</span>&nbsp;<span class="op" id="3434872">(</span><span class="builtintype" id="3434873">int</span><span class="op" id="3434876">,</span>&nbsp;<span class="ident" id="3434878">syscall</span><span class="op" id="3434885">.</span><span class="ident" id="3434886">Sockaddr</span><span class="op" id="3434894">,</span>&nbsp;<span class="builtintype" id="3434896">error</span><span class="op" id="3434901">)</span>&nbsp;<span class="op" id="3434903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3434906">ns</span><span class="op" id="3434908">,</span>&nbsp;<span class="ident" id="3434910">sa</span><span class="op" id="3434912">,</span>&nbsp;<span class="ident" id="3434914">err</span>&nbsp;<span class="op" id="3434918">:=</span>&nbsp;<span class="ident" id="3434921">syscall</span><span class="op" id="3434928">.</span><span class="ident" id="3434929">Accept4</span><span class="op" id="3434936">(</span><span class="ident" id="3434937">s</span><span class="op" id="3434938">,</span>&nbsp;<span class="ident" id="3434940">syscall</span><span class="op" id="3434947">.</span><span class="ident" id="3434948">SOCK_NONBLOCK</span><span class="op" id="3434961">|</span><span class="ident" id="3434962">syscall</span><span class="op" id="3434969">.</span><span class="ident" id="3434970">SOCK_CLOEXEC</span><span class="op" id="3434982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3434985">//&nbsp;On&nbsp;Linux&nbsp;the&nbsp;accept4&nbsp;system&nbsp;call&nbsp;was&nbsp;introduced&nbsp;in&nbsp;2.6.28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435047">//&nbsp;kernel&nbsp;and&nbsp;on&nbsp;FreeBSD&nbsp;it&nbsp;was&nbsp;introduced&nbsp;in&nbsp;10&nbsp;kernel.&nbsp;If&nbsp;we</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435111">//&nbsp;get&nbsp;an&nbsp;ENOSYS&nbsp;error&nbsp;on&nbsp;both&nbsp;Linux&nbsp;and&nbsp;FreeBSD,&nbsp;or&nbsp;EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435172">//&nbsp;error&nbsp;on&nbsp;Linux,&nbsp;fall&nbsp;back&nbsp;to&nbsp;using&nbsp;accept.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435219">switch</span>&nbsp;<span class="ident" id="3435226">err</span>&nbsp;<span class="op" id="3435230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435233">default</span><span class="op" id="3435240">:</span>&nbsp;<span class="comment" id="3435242">//&nbsp;nil&nbsp;and&nbsp;errors&nbsp;other&nbsp;than&nbsp;the&nbsp;ones&nbsp;listed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435289">return</span>&nbsp;<span class="ident" id="3435296">ns</span><span class="op" id="3435298">,</span>&nbsp;<span class="ident" id="3435300">sa</span><span class="op" id="3435302">,</span>&nbsp;<span class="ident" id="3435304">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435309">case</span>&nbsp;<span class="ident" id="3435314">syscall</span><span class="op" id="3435321">.</span><span class="ident" id="3435322">ENOSYS</span><span class="op" id="3435328">:</span>&nbsp;<span class="comment" id="3435330">//&nbsp;syscall&nbsp;missing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435350">case</span>&nbsp;<span class="ident" id="3435355">syscall</span><span class="op" id="3435362">.</span><span class="ident" id="3435363">EINVAL</span><span class="op" id="3435369">:</span>&nbsp;<span class="comment" id="3435371">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435413">case</span>&nbsp;<span class="ident" id="3435418">syscall</span><span class="op" id="3435425">.</span><span class="ident" id="3435426">EACCES</span><span class="op" id="3435432">:</span>&nbsp;<span class="comment" id="3435434">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435476">case</span>&nbsp;<span class="ident" id="3435481">syscall</span><span class="op" id="3435488">.</span><span class="ident" id="3435489">EFAULT</span><span class="op" id="3435495">:</span>&nbsp;<span class="comment" id="3435497">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3435539">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435543">//&nbsp;See&nbsp;../syscall/exec_unix.go&nbsp;for&nbsp;description&nbsp;of&nbsp;ForkLock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435604">//&nbsp;It&nbsp;is&nbsp;probably&nbsp;okay&nbsp;to&nbsp;hold&nbsp;the&nbsp;lock&nbsp;across&nbsp;syscall.Accept</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435667">//&nbsp;because&nbsp;we&nbsp;have&nbsp;put&nbsp;fd.sysfd&nbsp;into&nbsp;non-blocking&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435724">//&nbsp;However,&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;File&nbsp;method&nbsp;will&nbsp;put&nbsp;it&nbsp;back&nbsp;into</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3435785">//&nbsp;blocking&nbsp;mode.&nbsp;We&nbsp;can&#39;t&nbsp;take&nbsp;that&nbsp;risk,&nbsp;so&nbsp;no&nbsp;use&nbsp;of&nbsp;ForkLock&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3435857">ns</span><span class="op" id="3435859">,</span>&nbsp;<span class="ident" id="3435861">sa</span><span class="op" id="3435863">,</span>&nbsp;<span class="ident" id="3435865">err</span>&nbsp;<span class="op" id="3435869">=</span>&nbsp;<span class="ident" id="3435871">syscall</span><span class="op" id="3435878">.</span><span class="ident" id="3435879">Accept</span><span class="op" id="3435885">(</span><span class="ident" id="3435886">s</span><span class="op" id="3435887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435890">if</span>&nbsp;<span class="ident" id="3435893">err</span>&nbsp;<span class="op" id="3435897">==</span>&nbsp;<span class="ident" id="3435900">nil</span>&nbsp;<span class="op" id="3435904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3435908">syscall</span><span class="op" id="3435915">.</span><span class="ident" id="3435916">CloseOnExec</span><span class="op" id="3435927">(</span><span class="ident" id="3435928">ns</span><span class="op" id="3435930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3435933">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435936">if</span>&nbsp;<span class="ident" id="3435939">err</span>&nbsp;<span class="op" id="3435943">!=</span>&nbsp;<span class="ident" id="3435946">nil</span>&nbsp;<span class="op" id="3435950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435954">return</span>&nbsp;<span class="op" id="3435961">-</span><span class="num" id="3435962">1</span><span class="op" id="3435963">,</span>&nbsp;<span class="ident" id="3435965">nil</span><span class="op" id="3435968">,</span>&nbsp;<span class="ident" id="3435970">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3435975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3435978">if</span>&nbsp;<span class="ident" id="3435981">err</span>&nbsp;<span class="op" id="3435985">=</span>&nbsp;<span class="ident" id="3435987">syscall</span><span class="op" id="3435994">.</span><span class="ident" id="3435995">SetNonblock</span><span class="op" id="3436006">(</span><span class="ident" id="3436007">ns</span><span class="op" id="3436009">,</span>&nbsp;<span class="ident" id="3436011">true</span><span class="op" id="3436015">)</span><span class="op" id="3436016">;</span>&nbsp;<span class="ident" id="3436018">err</span>&nbsp;<span class="op" id="3436022">!=</span>&nbsp;<span class="ident" id="3436025">nil</span>&nbsp;<span class="op" id="3436029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3436033">syscall</span><span class="op" id="3436040">.</span><span class="ident" id="3436041">Close</span><span class="op" id="3436046">(</span><span class="ident" id="3436047">ns</span><span class="op" id="3436049">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3436053">return</span>&nbsp;<span class="op" id="3436060">-</span><span class="num" id="3436061">1</span><span class="op" id="3436062">,</span>&nbsp;<span class="ident" id="3436064">nil</span><span class="op" id="3436067">,</span>&nbsp;<span class="ident" id="3436069">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3436074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3436077">return</span>&nbsp;<span class="ident" id="3436084">ns</span><span class="op" id="3436086">,</span>&nbsp;<span class="ident" id="3436088">sa</span><span class="op" id="3436090">,</span>&nbsp;<span class="ident" id="3436092">nil</span><br>
<span class="lineno"></span><span class="op" id="3436096">}</span>
</div>
</body>
</html>
