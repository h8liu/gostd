<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5625284">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5625339">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5625393">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5625444">package</span>&nbsp;<span class="ident" id="5625452">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5625459">import</span>&nbsp;<span class="op" id="5625466">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5625469">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5625478">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5625488">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5625493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625496">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5625564">var</span>&nbsp;<span class="ident" id="5625568">ErrFormat</span>&nbsp;<span class="op" id="5625578">=</span>&nbsp;<span class="ident" id="5625580">errors</span><span class="op" id="5625586">.</span><span class="ident" id="5625587">New</span><span class="op" id="5625590">(</span><span class="string" id="5625591">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5625614">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5625617">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5625694">type</span>&nbsp;<span class="ident" id="5625699">format</span>&nbsp;<span class="keyword" id="5625706">struct</span>&nbsp;<span class="op" id="5625713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625716">name</span><span class="op" id="5625720">,</span>&nbsp;<span class="ident" id="5625722">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5625729">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625737">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5625750">func</span><span class="op" id="5625754">(</span><span class="ident" id="5625755">io</span><span class="op" id="5625757">.</span><span class="ident" id="5625758">Reader</span><span class="op" id="5625764">)</span>&nbsp;<span class="op" id="5625766">(</span><span class="ident" id="5625767">Image</span><span class="op" id="5625772">,</span>&nbsp;<span class="builtintype" id="5625774">error</span><span class="op" id="5625779">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5625782">decodeConfig</span>&nbsp;<span class="keyword" id="5625795">func</span><span class="op" id="5625799">(</span><span class="ident" id="5625800">io</span><span class="op" id="5625802">.</span><span class="ident" id="5625803">Reader</span><span class="op" id="5625809">)</span>&nbsp;<span class="op" id="5625811">(</span><span class="ident" id="5625812">Config</span><span class="op" id="5625818">,</span>&nbsp;<span class="builtintype" id="5625820">error</span><span class="op" id="5625825">)</span><br>
<span class="lineno"></span><span class="op" id="5625827">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5625830">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5625876">var</span>&nbsp;<span class="ident" id="5625880">formats</span>&nbsp;<span class="op" id="5625888">[</span><span class="op" id="5625889">]</span><span class="ident" id="5625890">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5625898">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5625961">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5626018">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5626096">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5626162">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5626220">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5626289">func</span>&nbsp;<span class="ident" id="5626294">RegisterFormat</span><span class="op" id="5626308">(</span><span class="ident" id="5626309">name</span><span class="op" id="5626313">,</span>&nbsp;<span class="ident" id="5626315">magic</span>&nbsp;<span class="builtintype" id="5626321">string</span><span class="op" id="5626327">,</span>&nbsp;<span class="ident" id="5626329">decode</span>&nbsp;<span class="keyword" id="5626336">func</span><span class="op" id="5626340">(</span><span class="ident" id="5626341">io</span><span class="op" id="5626343">.</span><span class="ident" id="5626344">Reader</span><span class="op" id="5626350">)</span>&nbsp;<span class="op" id="5626352">(</span><span class="ident" id="5626353">Image</span><span class="op" id="5626358">,</span>&nbsp;<span class="builtintype" id="5626360">error</span><span class="op" id="5626365">)</span><span class="op" id="5626366">,</span>&nbsp;<span class="ident" id="5626368">decodeConfig</span>&nbsp;<span class="keyword" id="5626381">func</span><span class="op" id="5626385">(</span><span class="ident" id="5626386">io</span><span class="op" id="5626388">.</span><span class="ident" id="5626389">Reader</span><span class="op" id="5626395">)</span>&nbsp;<span class="op" id="5626397">(</span><span class="ident" id="5626398">Config</span><span class="op" id="5626404">,</span>&nbsp;<span class="builtintype" id="5626406">error</span><span class="op" id="5626411">)</span><span class="op" id="5626412">)</span>&nbsp;<span class="op" id="5626414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626417">formats</span>&nbsp;<span class="op" id="5626425">=</span>&nbsp;<span class="builtinfunc" id="5626427">append</span><span class="op" id="5626433">(</span><span class="ident" id="5626434">formats</span><span class="op" id="5626441">,</span>&nbsp;<span class="ident" id="5626443">format</span><span class="op" id="5626449">{</span><span class="ident" id="5626450">name</span><span class="op" id="5626454">,</span>&nbsp;<span class="ident" id="5626456">magic</span><span class="op" id="5626461">,</span>&nbsp;<span class="ident" id="5626463">decode</span><span class="op" id="5626469">,</span>&nbsp;<span class="ident" id="5626471">decodeConfig</span><span class="op" id="5626483">}</span><span class="op" id="5626484">)</span><br>
<span class="lineno"></span><span class="op" id="5626486">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5626489">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5626543">type</span>&nbsp;<span class="ident" id="5626548">reader</span>&nbsp;<span class="keyword" id="5626555">interface</span>&nbsp;<span class="op" id="5626565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626568">io</span><span class="op" id="5626570">.</span><span class="ident" id="5626571">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5626579">Peek</span><span class="op" id="5626583">(</span><span class="builtintype" id="5626584">int</span><span class="op" id="5626587">)</span>&nbsp;<span class="op" id="5626589">(</span><span class="op" id="5626590">[</span><span class="op" id="5626591">]</span><span class="builtintype" id="5626592">byte</span><span class="op" id="5626596">,</span>&nbsp;<span class="builtintype" id="5626598">error</span><span class="op" id="5626603">)</span><br>
<span class="lineno">40</span><span class="op" id="5626605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5626608">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5626655">func</span>&nbsp;<span class="ident" id="5626660">asReader</span><span class="op" id="5626668">(</span><span class="ident" id="5626669">r</span>&nbsp;<span class="ident" id="5626671">io</span><span class="op" id="5626673">.</span><span class="ident" id="5626674">Reader</span><span class="op" id="5626680">)</span>&nbsp;<span class="ident" id="5626682">reader</span>&nbsp;<span class="op" id="5626689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626692">if</span>&nbsp;<span class="ident" id="5626695">rr</span><span class="op" id="5626697">,</span>&nbsp;<span class="ident" id="5626699">ok</span>&nbsp;<span class="op" id="5626702">:=</span>&nbsp;<span class="ident" id="5626705">r</span><span class="op" id="5626706">.</span><span class="op" id="5626707">(</span><span class="ident" id="5626708">reader</span><span class="op" id="5626714">)</span><span class="op" id="5626715">;</span>&nbsp;<span class="ident" id="5626717">ok</span>&nbsp;<span class="op" id="5626720">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626724">return</span>&nbsp;<span class="ident" id="5626731">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626738">return</span>&nbsp;<span class="ident" id="5626745">bufio</span><span class="op" id="5626750">.</span><span class="ident" id="5626751">NewReader</span><span class="op" id="5626760">(</span><span class="ident" id="5626761">r</span><span class="op" id="5626762">)</span><br>
<span class="lineno"></span><span class="op" id="5626764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5626767">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5626842">func</span>&nbsp;<span class="ident" id="5626847">match</span><span class="op" id="5626852">(</span><span class="ident" id="5626853">magic</span>&nbsp;<span class="builtintype" id="5626859">string</span><span class="op" id="5626865">,</span>&nbsp;<span class="ident" id="5626867">b</span>&nbsp;<span class="op" id="5626869">[</span><span class="op" id="5626870">]</span><span class="builtintype" id="5626871">byte</span><span class="op" id="5626875">)</span>&nbsp;<span class="builtintype" id="5626877">bool</span>&nbsp;<span class="op" id="5626882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626885">if</span>&nbsp;<span class="builtinfunc" id="5626888">len</span><span class="op" id="5626891">(</span><span class="ident" id="5626892">magic</span><span class="op" id="5626897">)</span>&nbsp;<span class="op" id="5626899">!=</span>&nbsp;<span class="builtinfunc" id="5626902">len</span><span class="op" id="5626905">(</span><span class="ident" id="5626906">b</span><span class="op" id="5626907">)</span>&nbsp;<span class="op" id="5626909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626913">return</span>&nbsp;<span class="builtintype" id="5626920">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5626927">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626930">for</span>&nbsp;<span class="ident" id="5626934">i</span><span class="op" id="5626935">,</span>&nbsp;<span class="ident" id="5626937">c</span>&nbsp;<span class="op" id="5626939">:=</span>&nbsp;<span class="keyword" id="5626942">range</span>&nbsp;<span class="ident" id="5626948">b</span>&nbsp;<span class="op" id="5626950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626954">if</span>&nbsp;<span class="ident" id="5626957">magic</span><span class="op" id="5626962">[</span><span class="ident" id="5626963">i</span><span class="op" id="5626964">]</span>&nbsp;<span class="op" id="5626966">!=</span>&nbsp;<span class="ident" id="5626969">c</span>&nbsp;<span class="op" id="5626971">&amp;&amp;</span>&nbsp;<span class="ident" id="5626974">magic</span><span class="op" id="5626979">[</span><span class="ident" id="5626980">i</span><span class="op" id="5626981">]</span>&nbsp;<span class="op" id="5626983">!=</span>&nbsp;<span class="string" id="5626986">&#39;?&#39;</span>&nbsp;<span class="op" id="5626990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5626995">return</span>&nbsp;<span class="builtintype" id="5627002">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627013">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627016">return</span>&nbsp;<span class="builtintype" id="5627023">true</span><br>
<span class="lineno"></span><span class="op" id="5627028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627031">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5627075">func</span>&nbsp;<span class="ident" id="5627080">sniff</span><span class="op" id="5627085">(</span><span class="ident" id="5627086">r</span>&nbsp;<span class="ident" id="5627088">reader</span><span class="op" id="5627094">)</span>&nbsp;<span class="ident" id="5627096">format</span>&nbsp;<span class="op" id="5627103">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627106">for</span>&nbsp;<span class="ident" id="5627110">_</span><span class="op" id="5627111">,</span>&nbsp;<span class="ident" id="5627113">f</span>&nbsp;<span class="op" id="5627115">:=</span>&nbsp;<span class="keyword" id="5627118">range</span>&nbsp;<span class="ident" id="5627124">formats</span>&nbsp;<span class="op" id="5627132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627136">b</span><span class="op" id="5627137">,</span>&nbsp;<span class="ident" id="5627139">err</span>&nbsp;<span class="op" id="5627143">:=</span>&nbsp;<span class="ident" id="5627146">r</span><span class="op" id="5627147">.</span><span class="ident" id="5627148">Peek</span><span class="op" id="5627152">(</span><span class="builtinfunc" id="5627153">len</span><span class="op" id="5627156">(</span><span class="ident" id="5627157">f</span><span class="op" id="5627158">.</span><span class="ident" id="5627159">magic</span><span class="op" id="5627164">)</span><span class="op" id="5627165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627169">if</span>&nbsp;<span class="ident" id="5627172">err</span>&nbsp;<span class="op" id="5627176">==</span>&nbsp;<span class="builtintype" id="5627179">nil</span>&nbsp;<span class="op" id="5627183">&amp;&amp;</span>&nbsp;<span class="ident" id="5627186">match</span><span class="op" id="5627191">(</span><span class="ident" id="5627192">f</span><span class="op" id="5627193">.</span><span class="ident" id="5627194">magic</span><span class="op" id="5627199">,</span>&nbsp;<span class="ident" id="5627201">b</span><span class="op" id="5627202">)</span>&nbsp;<span class="op" id="5627204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627209">return</span>&nbsp;<span class="ident" id="5627216">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627220">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627226">return</span>&nbsp;<span class="ident" id="5627233">format</span><span class="op" id="5627239">{</span><span class="op" id="5627240">}</span><br>
<span class="lineno"></span><span class="op" id="5627242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627245">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5627318">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5627393">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5627468">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5627489">func</span>&nbsp;<span class="ident" id="5627494">Decode</span><span class="op" id="5627500">(</span><span class="ident" id="5627501">r</span>&nbsp;<span class="ident" id="5627503">io</span><span class="op" id="5627505">.</span><span class="ident" id="5627506">Reader</span><span class="op" id="5627512">)</span>&nbsp;<span class="op" id="5627514">(</span><span class="ident" id="5627515">Image</span><span class="op" id="5627520">,</span>&nbsp;<span class="builtintype" id="5627522">string</span><span class="op" id="5627528">,</span>&nbsp;<span class="builtintype" id="5627530">error</span><span class="op" id="5627535">)</span>&nbsp;<span class="op" id="5627537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627540">rr</span>&nbsp;<span class="op" id="5627543">:=</span>&nbsp;<span class="ident" id="5627546">asReader</span><span class="op" id="5627554">(</span><span class="ident" id="5627555">r</span><span class="op" id="5627556">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627559">f</span>&nbsp;<span class="op" id="5627561">:=</span>&nbsp;<span class="ident" id="5627564">sniff</span><span class="op" id="5627569">(</span><span class="ident" id="5627570">rr</span><span class="op" id="5627572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627575">if</span>&nbsp;<span class="ident" id="5627578">f</span><span class="op" id="5627579">.</span><span class="ident" id="5627580">decode</span>&nbsp;<span class="op" id="5627587">==</span>&nbsp;<span class="builtintype" id="5627590">nil</span>&nbsp;<span class="op" id="5627594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627598">return</span>&nbsp;<span class="builtintype" id="5627605">nil</span><span class="op" id="5627608">,</span>&nbsp;<span class="string" id="5627610">&#34;&#34;</span><span class="op" id="5627612">,</span>&nbsp;<span class="ident" id="5627614">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5627625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5627628">m</span><span class="op" id="5627629">,</span>&nbsp;<span class="ident" id="5627631">err</span>&nbsp;<span class="op" id="5627635">:=</span>&nbsp;<span class="ident" id="5627638">f</span><span class="op" id="5627639">.</span><span class="ident" id="5627640">decode</span><span class="op" id="5627646">(</span><span class="ident" id="5627647">rr</span><span class="op" id="5627649">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5627652">return</span>&nbsp;<span class="ident" id="5627659">m</span><span class="op" id="5627660">,</span>&nbsp;<span class="ident" id="5627662">f</span><span class="op" id="5627663">.</span><span class="ident" id="5627664">name</span><span class="op" id="5627668">,</span>&nbsp;<span class="ident" id="5627670">err</span><br>
<span class="lineno"></span><span class="op" id="5627674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5627677">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5627753">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5627832">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5627909">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5627960">func</span>&nbsp;<span class="ident" id="5627965">DecodeConfig</span><span class="op" id="5627977">(</span><span class="ident" id="5627978">r</span>&nbsp;<span class="ident" id="5627980">io</span><span class="op" id="5627982">.</span><span class="ident" id="5627983">Reader</span><span class="op" id="5627989">)</span>&nbsp;<span class="op" id="5627991">(</span><span class="ident" id="5627992">Config</span><span class="op" id="5627998">,</span>&nbsp;<span class="builtintype" id="5628000">string</span><span class="op" id="5628006">,</span>&nbsp;<span class="builtintype" id="5628008">error</span><span class="op" id="5628013">)</span>&nbsp;<span class="op" id="5628015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628018">rr</span>&nbsp;<span class="op" id="5628021">:=</span>&nbsp;<span class="ident" id="5628024">asReader</span><span class="op" id="5628032">(</span><span class="ident" id="5628033">r</span><span class="op" id="5628034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628037">f</span>&nbsp;<span class="op" id="5628039">:=</span>&nbsp;<span class="ident" id="5628042">sniff</span><span class="op" id="5628047">(</span><span class="ident" id="5628048">rr</span><span class="op" id="5628050">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628053">if</span>&nbsp;<span class="ident" id="5628056">f</span><span class="op" id="5628057">.</span><span class="ident" id="5628058">decodeConfig</span>&nbsp;<span class="op" id="5628071">==</span>&nbsp;<span class="builtintype" id="5628074">nil</span>&nbsp;<span class="op" id="5628078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628082">return</span>&nbsp;<span class="ident" id="5628089">Config</span><span class="op" id="5628095">{</span><span class="op" id="5628096">}</span><span class="op" id="5628097">,</span>&nbsp;<span class="string" id="5628099">&#34;&#34;</span><span class="op" id="5628101">,</span>&nbsp;<span class="ident" id="5628103">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5628114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5628117">c</span><span class="op" id="5628118">,</span>&nbsp;<span class="ident" id="5628120">err</span>&nbsp;<span class="op" id="5628124">:=</span>&nbsp;<span class="ident" id="5628127">f</span><span class="op" id="5628128">.</span><span class="ident" id="5628129">decodeConfig</span><span class="op" id="5628141">(</span><span class="ident" id="5628142">rr</span><span class="op" id="5628144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5628147">return</span>&nbsp;<span class="ident" id="5628154">c</span><span class="op" id="5628155">,</span>&nbsp;<span class="ident" id="5628157">f</span><span class="op" id="5628158">.</span><span class="ident" id="5628159">name</span><span class="op" id="5628163">,</span>&nbsp;<span class="ident" id="5628165">err</span><br>
<span class="lineno">100</span><span class="op" id="5628169">}</span>
</div>
</body>
</html>
