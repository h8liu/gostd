<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4544715">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4544770">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4544824">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4544875">package</span>&nbsp;<span class="ident" id="4544883">gzip</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4544889">import</span>&nbsp;<span class="op" id="4544896">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544899">&#34;compress/flate&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544917">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544927">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544934">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544942">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4544956">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4544961">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4544964">//&nbsp;These&nbsp;constants&nbsp;are&nbsp;copied&nbsp;from&nbsp;the&nbsp;flate&nbsp;package,&nbsp;so&nbsp;that&nbsp;code&nbsp;that&nbsp;imports</span><br>
<span class="lineno"></span><span class="comment" id="4545044">//&nbsp;&#34;compress/gzip&#34;&nbsp;does&nbsp;not&nbsp;also&nbsp;have&nbsp;to&nbsp;import&nbsp;&#34;compress/flate&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4545110">const</span>&nbsp;<span class="op" id="4545116">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545119">NoCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4545138">=</span>&nbsp;<span class="ident" id="4545140"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4545145">.</span><span class="ident" id="4545146">NoCompression</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545161">BestSpeed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4545180">=</span>&nbsp;<span class="ident" id="4545182"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4545187">.</span><span class="ident" id="4545188">BestSpeed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545199">BestCompression</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4545218">=</span>&nbsp;<span class="ident" id="4545220"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4545225">.</span><span class="ident" id="4545226">BestCompression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545243">DefaultCompression</span>&nbsp;<span class="op" id="4545262">=</span>&nbsp;<span class="ident" id="4545264"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4545269">.</span><span class="ident" id="4545270">DefaultCompression</span><br>
<span class="lineno"></span><span class="op" id="4545289">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="4545292">//&nbsp;A&nbsp;Writer&nbsp;is&nbsp;an&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="4545326">//&nbsp;Writes&nbsp;to&nbsp;a&nbsp;Writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="4545381">type</span>&nbsp;<span class="ident" id="4545386">Writer</span>&nbsp;<span class="keyword" id="4545393">struct</span>&nbsp;<span class="op" id="4545400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545403"><a href="/compress/gzip/gunzip.go.html#4538582">Header</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545411">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4545423"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4545425">.</span><span class="ident" id="4545426">Writer</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545434">level</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4545446">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545451">wroteHeader</span>&nbsp;<span class="builtintype" id="4545463">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545469">compressor</span>&nbsp;&nbsp;<span class="op" id="4545481">*</span><span class="ident" id="4545482"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4545487">.</span><span class="ident" id="4545488">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545496">digest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4545508"><a href="/compress/gzip/gzip.go.html#4544934">hash</a></span><span class="op" id="4545512">.</span><span class="ident" id="4545513">Hash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545521">size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4545533">uint32</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545541">closed</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4545553">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545559">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4545571">[</span><span class="num" id="4545572">10</span><span class="op" id="4545574">]</span><span class="builtintype" id="4545575">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4545581">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4545593">error</span><br>
<span class="lineno"></span><span class="op" id="4545599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="4545602">//&nbsp;NewWriter&nbsp;returns&nbsp;a&nbsp;new&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="comment" id="4545637">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;writer&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="comment" id="4545703">//</span><br>
<span class="lineno"></span><span class="comment" id="4545706">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when&nbsp;done.</span><br>
<span class="lineno"></span><span class="comment" id="4545787">//&nbsp;Writes&nbsp;may&nbsp;be&nbsp;buffered&nbsp;and&nbsp;not&nbsp;flushed&nbsp;until&nbsp;Close.</span><br>
<span class="lineno">45</span><span class="comment" id="4545842">//</span><br>
<span class="lineno"></span><span class="comment" id="4545845">//&nbsp;Callers&nbsp;that&nbsp;wish&nbsp;to&nbsp;set&nbsp;the&nbsp;fields&nbsp;in&nbsp;Writer.Header&nbsp;must&nbsp;do&nbsp;so&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="4545919">//&nbsp;the&nbsp;first&nbsp;call&nbsp;to&nbsp;Write&nbsp;or&nbsp;Close.&nbsp;The&nbsp;Comment&nbsp;and&nbsp;Name&nbsp;header&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="4545995">//&nbsp;UTF-8&nbsp;strings&nbsp;in&nbsp;Go,&nbsp;but&nbsp;the&nbsp;underlying&nbsp;format&nbsp;requires&nbsp;NUL-terminated&nbsp;ISO</span><br>
<span class="lineno"></span><span class="comment" id="4546073">//&nbsp;8859-1&nbsp;(Latin-1).&nbsp;NUL&nbsp;or&nbsp;non-Latin-1&nbsp;runes&nbsp;in&nbsp;those&nbsp;strings&nbsp;will&nbsp;lead&nbsp;to&nbsp;an</span><br>
<span class="lineno">50</span><span class="comment" id="4546152">//&nbsp;error&nbsp;on&nbsp;Write.</span><br>
<span class="lineno"></span><span class="keyword" id="4546171">func</span>&nbsp;<span class="ident" id="4546176">NewWriter</span><span class="op" id="4546185">(</span><span class="ident" id="4546186">w</span>&nbsp;<span class="ident" id="4546188"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4546190">.</span><span class="ident" id="4546191">Writer</span><span class="op" id="4546197">)</span>&nbsp;<span class="op" id="4546199">*</span><span class="ident" id="4546200"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span>&nbsp;<span class="op" id="4546207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546210">z</span><span class="op" id="4546211">,</span>&nbsp;<span class="ident" id="4546213">_</span>&nbsp;<span class="op" id="4546215">:=</span>&nbsp;<span class="ident" id="4546218"><a href="/compress/gzip/gzip.go.html#4546589">NewWriterLevel</a></span><span class="op" id="4546232">(</span><span class="ident" id="4546233"><a href="/compress/gzip/gzip.go.html#4546186">w</a></span><span class="op" id="4546234">,</span>&nbsp;<span class="ident" id="4546236"><a href="/compress/gzip/gzip.go.html#4545243">DefaultCompression</a></span><span class="op" id="4546254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546257">return</span>&nbsp;<span class="ident" id="4546264"><a href="/compress/gzip/gzip.go.html#4546210">z</a></span><br>
<span class="lineno"></span><span class="op" id="4546266">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4546269">//&nbsp;NewWriterLevel&nbsp;is&nbsp;like&nbsp;NewWriter&nbsp;but&nbsp;specifies&nbsp;the&nbsp;compression&nbsp;level&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="4546349">//&nbsp;of&nbsp;assuming&nbsp;DefaultCompression.</span><br>
<span class="lineno"></span><span class="comment" id="4546384">//</span><br>
<span class="lineno"></span><span class="comment" id="4546387">//&nbsp;The&nbsp;compression&nbsp;level&nbsp;can&nbsp;be&nbsp;DefaultCompression,&nbsp;NoCompression,&nbsp;or&nbsp;any</span><br>
<span class="lineno">60</span><span class="comment" id="4546461">//&nbsp;integer&nbsp;value&nbsp;between&nbsp;BestSpeed&nbsp;and&nbsp;BestCompression&nbsp;inclusive.&nbsp;The&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="4546537">//&nbsp;returned&nbsp;will&nbsp;be&nbsp;nil&nbsp;if&nbsp;the&nbsp;level&nbsp;is&nbsp;valid.</span><br>
<span class="lineno"></span><span class="keyword" id="4546584">func</span>&nbsp;<span class="ident" id="4546589">NewWriterLevel</span><span class="op" id="4546603">(</span><span class="ident" id="4546604">w</span>&nbsp;<span class="ident" id="4546606"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4546608">.</span><span class="ident" id="4546609">Writer</span><span class="op" id="4546615">,</span>&nbsp;<span class="ident" id="4546617">level</span>&nbsp;<span class="builtintype" id="4546623">int</span><span class="op" id="4546626">)</span>&nbsp;<span class="op" id="4546628">(</span><span class="op" id="4546629">*</span><span class="ident" id="4546630"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4546636">,</span>&nbsp;<span class="builtintype" id="4546638">error</span><span class="op" id="4546643">)</span>&nbsp;<span class="op" id="4546645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546648">if</span>&nbsp;<span class="ident" id="4546651"><a href="/compress/gzip/gzip.go.html#4546617">level</a></span>&nbsp;<span class="op" id="4546657">&lt;</span>&nbsp;<span class="ident" id="4546659"><a href="/compress/gzip/gzip.go.html#4545243">DefaultCompression</a></span>&nbsp;<span class="op" id="4546678">||</span>&nbsp;<span class="ident" id="4546681"><a href="/compress/gzip/gzip.go.html#4546617">level</a></span>&nbsp;<span class="op" id="4546687">&gt;</span>&nbsp;<span class="ident" id="4546689"><a href="/compress/gzip/gzip.go.html#4545199">BestCompression</a></span>&nbsp;<span class="op" id="4546705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546709">return</span>&nbsp;<span class="ident" id="4546716">nil</span><span class="op" id="4546719">,</span>&nbsp;<span class="ident" id="4546721"><a href="/compress/gzip/gzip.go.html#4544927">fmt</a></span><span class="op" id="4546724">.</span><span class="ident" id="4546725">Errorf</span><span class="op" id="4546731">(</span><span class="string" id="4546732">&#34;gzip:&nbsp;invalid&nbsp;compression&nbsp;level:&nbsp;%d&#34;</span><span class="op" id="4546769">,</span>&nbsp;<span class="ident" id="4546771"><a href="/compress/gzip/gzip.go.html#4546617">level</a></span><span class="op" id="4546776">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4546779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546782">z</span>&nbsp;<span class="op" id="4546784">:=</span>&nbsp;<span class="builtinfunc" id="4546787">new</span><span class="op" id="4546790">(</span><span class="ident" id="4546791"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4546797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546800"><a href="/compress/gzip/gzip.go.html#4546782">z</a></span><span class="op" id="4546801">.</span><span class="ident" id="4546802">init</span><span class="op" id="4546806">(</span><span class="ident" id="4546807"><a href="/compress/gzip/gzip.go.html#4546604">w</a></span><span class="op" id="4546808">,</span>&nbsp;<span class="ident" id="4546810"><a href="/compress/gzip/gzip.go.html#4546617">level</a></span><span class="op" id="4546815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546818">return</span>&nbsp;<span class="ident" id="4546825"><a href="/compress/gzip/gzip.go.html#4546782">z</a></span><span class="op" id="4546826">,</span>&nbsp;<span class="ident" id="4546828">nil</span><br>
<span class="lineno"></span><span class="op" id="4546832">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="4546835">func</span>&nbsp;<span class="op" id="4546840">(</span><span class="ident" id="4546841">z</span>&nbsp;<span class="op" id="4546843">*</span><span class="ident" id="4546844"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4546850">)</span>&nbsp;<span class="ident" id="4546852">init</span><span class="op" id="4546856">(</span><span class="ident" id="4546857">w</span>&nbsp;<span class="ident" id="4546859"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4546861">.</span><span class="ident" id="4546862">Writer</span><span class="op" id="4546868">,</span>&nbsp;<span class="ident" id="4546870">level</span>&nbsp;<span class="builtintype" id="4546876">int</span><span class="op" id="4546879">)</span>&nbsp;<span class="op" id="4546881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546884">digest</span>&nbsp;<span class="op" id="4546891">:=</span>&nbsp;<span class="ident" id="4546894"><a href="/compress/gzip/gzip.go.html#4546841">z</a></span><span class="op" id="4546895">.</span><span class="ident" id="4546896">digest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4546904">if</span>&nbsp;<span class="ident" id="4546907"><a href="/compress/gzip/gzip.go.html#4546884">digest</a></span>&nbsp;<span class="op" id="4546914">!=</span>&nbsp;<span class="ident" id="4546917">nil</span>&nbsp;<span class="op" id="4546921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546925"><a href="/compress/gzip/gzip.go.html#4546884">digest</a></span><span class="op" id="4546931">.</span><span class="ident" id="4546932">Reset</span><span class="op" id="4546937">(</span><span class="op" id="4546938">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4546941">}</span>&nbsp;<span class="keyword" id="4546943">else</span>&nbsp;<span class="op" id="4546948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546952"><a href="/compress/gzip/gzip.go.html#4546884">digest</a></span>&nbsp;<span class="op" id="4546959">=</span>&nbsp;<span class="ident" id="4546961"><a href="/compress/gzip/gzip.go.html#4544942">crc32</a></span><span class="op" id="4546966">.</span><span class="ident" id="4546967">NewIEEE</span><span class="op" id="4546974">(</span><span class="op" id="4546975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4546978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4546981">compressor</span>&nbsp;<span class="op" id="4546992">:=</span>&nbsp;<span class="ident" id="4546995"><a href="/compress/gzip/gzip.go.html#4546841">z</a></span><span class="op" id="4546996">.</span><span class="ident" id="4546997">compressor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4547009">if</span>&nbsp;<span class="ident" id="4547012"><a href="/compress/gzip/gzip.go.html#4546981">compressor</a></span>&nbsp;<span class="op" id="4547023">!=</span>&nbsp;<span class="ident" id="4547026">nil</span>&nbsp;<span class="op" id="4547030">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547034"><a href="/compress/gzip/gzip.go.html#4546981">compressor</a></span><span class="op" id="4547044">.</span><span class="ident" id="4547045">Reset</span><span class="op" id="4547050">(</span><span class="ident" id="4547051"><a href="/compress/gzip/gzip.go.html#4546857">w</a></span><span class="op" id="4547052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4547055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4547058">*</span><span class="ident" id="4547059"><a href="/compress/gzip/gzip.go.html#4546841">z</a></span>&nbsp;<span class="op" id="4547061">=</span>&nbsp;<span class="ident" id="4547063"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4547069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547073">Header</span><span class="op" id="4547079">:</span>&nbsp;<span class="ident" id="4547081"><a href="/compress/gzip/gunzip.go.html#4538582">Header</a></span><span class="op" id="4547087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547092">OS</span><span class="op" id="4547094">:</span>&nbsp;<span class="num" id="4547096">255</span><span class="op" id="4547099">,</span>&nbsp;<span class="comment" id="4547101">//&nbsp;unknown</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4547114">}</span><span class="op" id="4547115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547119">w</span><span class="op" id="4547120">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4547131"><a href="/compress/gzip/gzip.go.html#4546857">w</a></span><span class="op" id="4547132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547136">level</span><span class="op" id="4547141">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4547148"><a href="/compress/gzip/gzip.go.html#4546870">level</a></span><span class="op" id="4547153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547157">digest</span><span class="op" id="4547163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4547169"><a href="/compress/gzip/gzip.go.html#4546884">digest</a></span><span class="op" id="4547175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547179">compressor</span><span class="op" id="4547189">:</span>&nbsp;<span class="ident" id="4547191"><a href="/compress/gzip/gzip.go.html#4546981">compressor</a></span><span class="op" id="4547201">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4547204">}</span><br>
<span class="lineno"></span><span class="op" id="4547206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4547209">//&nbsp;Reset&nbsp;discards&nbsp;the&nbsp;Writer&nbsp;z&#39;s&nbsp;state&nbsp;and&nbsp;makes&nbsp;it&nbsp;equivalent&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4547279">//&nbsp;result&nbsp;of&nbsp;its&nbsp;original&nbsp;state&nbsp;from&nbsp;NewWriter&nbsp;or&nbsp;NewWriterLevel,&nbsp;but</span><br>
<span class="lineno">95</span><span class="comment" id="4547349">//&nbsp;writing&nbsp;to&nbsp;w&nbsp;instead.&nbsp;This&nbsp;permits&nbsp;reusing&nbsp;a&nbsp;Writer&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="4547416">//&nbsp;allocating&nbsp;a&nbsp;new&nbsp;one.</span><br>
<span class="lineno"></span><span class="keyword" id="4547441">func</span>&nbsp;<span class="op" id="4547446">(</span><span class="ident" id="4547447">z</span>&nbsp;<span class="op" id="4547449">*</span><span class="ident" id="4547450"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4547456">)</span>&nbsp;<span class="ident" id="4547458">Reset</span><span class="op" id="4547463">(</span><span class="ident" id="4547464">w</span>&nbsp;<span class="ident" id="4547466"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4547468">.</span><span class="ident" id="4547469">Writer</span><span class="op" id="4547475">)</span>&nbsp;<span class="op" id="4547477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547480"><a href="/compress/gzip/gzip.go.html#4547447">z</a></span><span class="op" id="4547481">.</span><span class="ident" id="4547482">init</span><span class="op" id="4547486">(</span><span class="ident" id="4547487"><a href="/compress/gzip/gzip.go.html#4547464">w</a></span><span class="op" id="4547488">,</span>&nbsp;<span class="ident" id="4547490"><a href="/compress/gzip/gzip.go.html#4547447">z</a></span><span class="op" id="4547491">.</span><span class="ident" id="4547492">level</span><span class="op" id="4547497">)</span><br>
<span class="lineno"></span><span class="op" id="4547499">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4547502">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;is&nbsp;little-endian,&nbsp;unlike&nbsp;ZLIB&nbsp;(RFC&nbsp;1950).</span><br>
<span class="lineno"></span><span class="keyword" id="4547563">func</span>&nbsp;<span class="ident" id="4547568">put2</span><span class="op" id="4547572">(</span><span class="ident" id="4547573">p</span>&nbsp;<span class="op" id="4547575">[</span><span class="op" id="4547576">]</span><span class="builtintype" id="4547577">byte</span><span class="op" id="4547581">,</span>&nbsp;<span class="ident" id="4547583">v</span>&nbsp;<span class="builtintype" id="4547585">uint16</span><span class="op" id="4547591">)</span>&nbsp;<span class="op" id="4547593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547596"><a href="/compress/gzip/gzip.go.html#4547573">p</a></span><span class="op" id="4547597">[</span><span class="num" id="4547598">0</span><span class="op" id="4547599">]</span>&nbsp;<span class="op" id="4547601">=</span>&nbsp;<span class="builtintype" id="4547603">uint8</span><span class="op" id="4547608">(</span><span class="ident" id="4547609"><a href="/compress/gzip/gzip.go.html#4547583">v</a></span>&nbsp;<span class="op" id="4547611">&gt;&gt;</span>&nbsp;<span class="num" id="4547614">0</span><span class="op" id="4547615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547618"><a href="/compress/gzip/gzip.go.html#4547573">p</a></span><span class="op" id="4547619">[</span><span class="num" id="4547620">1</span><span class="op" id="4547621">]</span>&nbsp;<span class="op" id="4547623">=</span>&nbsp;<span class="builtintype" id="4547625">uint8</span><span class="op" id="4547630">(</span><span class="ident" id="4547631"><a href="/compress/gzip/gzip.go.html#4547583">v</a></span>&nbsp;<span class="op" id="4547633">&gt;&gt;</span>&nbsp;<span class="num" id="4547636">8</span><span class="op" id="4547637">)</span><br>
<span class="lineno">105</span><span class="op" id="4547639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4547642">func</span>&nbsp;<span class="ident" id="4547647">put4</span><span class="op" id="4547651">(</span><span class="ident" id="4547652">p</span>&nbsp;<span class="op" id="4547654">[</span><span class="op" id="4547655">]</span><span class="builtintype" id="4547656">byte</span><span class="op" id="4547660">,</span>&nbsp;<span class="ident" id="4547662">v</span>&nbsp;<span class="builtintype" id="4547664">uint32</span><span class="op" id="4547670">)</span>&nbsp;<span class="op" id="4547672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547675"><a href="/compress/gzip/gzip.go.html#4547652">p</a></span><span class="op" id="4547676">[</span><span class="num" id="4547677">0</span><span class="op" id="4547678">]</span>&nbsp;<span class="op" id="4547680">=</span>&nbsp;<span class="builtintype" id="4547682">uint8</span><span class="op" id="4547687">(</span><span class="ident" id="4547688"><a href="/compress/gzip/gzip.go.html#4547662">v</a></span>&nbsp;<span class="op" id="4547690">&gt;&gt;</span>&nbsp;<span class="num" id="4547693">0</span><span class="op" id="4547694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547697"><a href="/compress/gzip/gzip.go.html#4547652">p</a></span><span class="op" id="4547698">[</span><span class="num" id="4547699">1</span><span class="op" id="4547700">]</span>&nbsp;<span class="op" id="4547702">=</span>&nbsp;<span class="builtintype" id="4547704">uint8</span><span class="op" id="4547709">(</span><span class="ident" id="4547710"><a href="/compress/gzip/gzip.go.html#4547662">v</a></span>&nbsp;<span class="op" id="4547712">&gt;&gt;</span>&nbsp;<span class="num" id="4547715">8</span><span class="op" id="4547716">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547719"><a href="/compress/gzip/gzip.go.html#4547652">p</a></span><span class="op" id="4547720">[</span><span class="num" id="4547721">2</span><span class="op" id="4547722">]</span>&nbsp;<span class="op" id="4547724">=</span>&nbsp;<span class="builtintype" id="4547726">uint8</span><span class="op" id="4547731">(</span><span class="ident" id="4547732"><a href="/compress/gzip/gzip.go.html#4547662">v</a></span>&nbsp;<span class="op" id="4547734">&gt;&gt;</span>&nbsp;<span class="num" id="4547737">16</span><span class="op" id="4547739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547742"><a href="/compress/gzip/gzip.go.html#4547652">p</a></span><span class="op" id="4547743">[</span><span class="num" id="4547744">3</span><span class="op" id="4547745">]</span>&nbsp;<span class="op" id="4547747">=</span>&nbsp;<span class="builtintype" id="4547749">uint8</span><span class="op" id="4547754">(</span><span class="ident" id="4547755"><a href="/compress/gzip/gzip.go.html#4547662">v</a></span>&nbsp;<span class="op" id="4547757">&gt;&gt;</span>&nbsp;<span class="num" id="4547760">24</span><span class="op" id="4547762">)</span><br>
<span class="lineno"></span><span class="op" id="4547764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4547767">//&nbsp;writeBytes&nbsp;writes&nbsp;a&nbsp;length-prefixed&nbsp;byte&nbsp;slice&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno">115</span><span class="keyword" id="4547825">func</span>&nbsp;<span class="op" id="4547830">(</span><span class="ident" id="4547831">z</span>&nbsp;<span class="op" id="4547833">*</span><span class="ident" id="4547834"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4547840">)</span>&nbsp;<span class="ident" id="4547842">writeBytes</span><span class="op" id="4547852">(</span><span class="ident" id="4547853">b</span>&nbsp;<span class="op" id="4547855">[</span><span class="op" id="4547856">]</span><span class="builtintype" id="4547857">byte</span><span class="op" id="4547861">)</span>&nbsp;<span class="builtintype" id="4547863">error</span>&nbsp;<span class="op" id="4547869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4547872">if</span>&nbsp;<span class="builtinfunc" id="4547875">len</span><span class="op" id="4547878">(</span><span class="ident" id="4547879"><a href="/compress/gzip/gzip.go.html#4547853">b</a></span><span class="op" id="4547880">)</span>&nbsp;<span class="op" id="4547882">&gt;</span>&nbsp;<span class="num" id="4547884">0xffff</span>&nbsp;<span class="op" id="4547891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4547895">return</span>&nbsp;<span class="ident" id="4547902"><a href="/compress/gzip/gzip.go.html#4544917">errors</a></span><span class="op" id="4547908">.</span><span class="ident" id="4547909">New</span><span class="op" id="4547912">(</span><span class="string" id="4547913">&#34;gzip.Write:&nbsp;Extra&nbsp;data&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="4547950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4547953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547956"><a href="/compress/gzip/gzip.go.html#4547568">put2</a></span><span class="op" id="4547960">(</span><span class="ident" id="4547961"><a href="/compress/gzip/gzip.go.html#4547831">z</a></span><span class="op" id="4547962">.</span><span class="ident" id="4547963">buf</span><span class="op" id="4547966">[</span><span class="num" id="4547967">0</span><span class="op" id="4547968">:</span><span class="num" id="4547969">2</span><span class="op" id="4547970">]</span><span class="op" id="4547971">,</span>&nbsp;<span class="builtintype" id="4547973">uint16</span><span class="op" id="4547979">(</span><span class="builtinfunc" id="4547980">len</span><span class="op" id="4547983">(</span><span class="ident" id="4547984"><a href="/compress/gzip/gzip.go.html#4547853">b</a></span><span class="op" id="4547985">)</span><span class="op" id="4547986">)</span><span class="op" id="4547987">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4547990">_</span><span class="op" id="4547991">,</span>&nbsp;<span class="ident" id="4547993">err</span>&nbsp;<span class="op" id="4547997">:=</span>&nbsp;<span class="ident" id="4548000"><a href="/compress/gzip/gzip.go.html#4547831">z</a></span><span class="op" id="4548001">.</span><span class="ident" id="4548002">w</span><span class="op" id="4548003">.</span><span class="ident" id="4548004">Write</span><span class="op" id="4548009">(</span><span class="ident" id="4548010"><a href="/compress/gzip/gzip.go.html#4547831">z</a></span><span class="op" id="4548011">.</span><span class="ident" id="4548012">buf</span><span class="op" id="4548015">[</span><span class="num" id="4548016">0</span><span class="op" id="4548017">:</span><span class="num" id="4548018">2</span><span class="op" id="4548019">]</span><span class="op" id="4548020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548023">if</span>&nbsp;<span class="ident" id="4548026"><a href="/compress/gzip/gzip.go.html#4547993">err</a></span>&nbsp;<span class="op" id="4548030">!=</span>&nbsp;<span class="ident" id="4548033">nil</span>&nbsp;<span class="op" id="4548037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548041">return</span>&nbsp;<span class="ident" id="4548048"><a href="/compress/gzip/gzip.go.html#4547993">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548056">_</span><span class="op" id="4548057">,</span>&nbsp;<span class="ident" id="4548059"><a href="/compress/gzip/gzip.go.html#4547993">err</a></span>&nbsp;<span class="op" id="4548063">=</span>&nbsp;<span class="ident" id="4548065"><a href="/compress/gzip/gzip.go.html#4547831">z</a></span><span class="op" id="4548066">.</span><span class="ident" id="4548067">w</span><span class="op" id="4548068">.</span><span class="ident" id="4548069">Write</span><span class="op" id="4548074">(</span><span class="ident" id="4548075"><a href="/compress/gzip/gzip.go.html#4547853">b</a></span><span class="op" id="4548076">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548079">return</span>&nbsp;<span class="ident" id="4548086"><a href="/compress/gzip/gzip.go.html#4547993">err</a></span><br>
<span class="lineno"></span><span class="op" id="4548090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4548093">//&nbsp;writeString&nbsp;writes&nbsp;a&nbsp;UTF-8&nbsp;string&nbsp;s&nbsp;in&nbsp;GZIP&#39;s&nbsp;format&nbsp;to&nbsp;z.w.</span><br>
<span class="lineno"></span><span class="comment" id="4548157">//&nbsp;GZIP&nbsp;(RFC&nbsp;1952)&nbsp;specifies&nbsp;that&nbsp;strings&nbsp;are&nbsp;NUL-terminated&nbsp;ISO&nbsp;8859-1&nbsp;(Latin-1).</span><br>
<span class="lineno">130</span><span class="keyword" id="4548240">func</span>&nbsp;<span class="op" id="4548245">(</span><span class="ident" id="4548246">z</span>&nbsp;<span class="op" id="4548248">*</span><span class="ident" id="4548249"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4548255">)</span>&nbsp;<span class="ident" id="4548257">writeString</span><span class="op" id="4548268">(</span><span class="ident" id="4548269">s</span>&nbsp;<span class="builtintype" id="4548271">string</span><span class="op" id="4548277">)</span>&nbsp;<span class="op" id="4548279">(</span><span class="ident" id="4548280">err</span>&nbsp;<span class="builtintype" id="4548284">error</span><span class="op" id="4548289">)</span>&nbsp;<span class="op" id="4548291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4548294">//&nbsp;GZIP&nbsp;stores&nbsp;Latin-1&nbsp;strings;&nbsp;error&nbsp;if&nbsp;non-Latin-1;&nbsp;convert&nbsp;if&nbsp;non-ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548371">needconv</span>&nbsp;<span class="op" id="4548380">:=</span>&nbsp;<span class="ident" id="4548383">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548390">for</span>&nbsp;<span class="ident" id="4548394">_</span><span class="op" id="4548395">,</span>&nbsp;<span class="ident" id="4548397">v</span>&nbsp;<span class="op" id="4548399">:=</span>&nbsp;<span class="keyword" id="4548402">range</span>&nbsp;<span class="ident" id="4548408"><a href="/compress/gzip/gzip.go.html#4548269">s</a></span>&nbsp;<span class="op" id="4548410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548414">if</span>&nbsp;<span class="ident" id="4548417"><a href="/compress/gzip/gzip.go.html#4548397">v</a></span>&nbsp;<span class="op" id="4548419">==</span>&nbsp;<span class="num" id="4548422">0</span>&nbsp;<span class="op" id="4548424">||</span>&nbsp;<span class="ident" id="4548427"><a href="/compress/gzip/gzip.go.html#4548397">v</a></span>&nbsp;<span class="op" id="4548429">&gt;</span>&nbsp;<span class="num" id="4548431">0xff</span>&nbsp;<span class="op" id="4548436">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548441">return</span>&nbsp;<span class="ident" id="4548448"><a href="/compress/gzip/gzip.go.html#4544917">errors</a></span><span class="op" id="4548454">.</span><span class="ident" id="4548455">New</span><span class="op" id="4548458">(</span><span class="string" id="4548459">&#34;gzip.Write:&nbsp;non-Latin-1&nbsp;header&nbsp;string&#34;</span><span class="op" id="4548498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548506">if</span>&nbsp;<span class="ident" id="4548509"><a href="/compress/gzip/gzip.go.html#4548397">v</a></span>&nbsp;<span class="op" id="4548511">&gt;</span>&nbsp;<span class="num" id="4548513">0x7f</span>&nbsp;<span class="op" id="4548518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548523"><a href="/compress/gzip/gzip.go.html#4548371">needconv</a></span>&nbsp;<span class="op" id="4548532">=</span>&nbsp;<span class="ident" id="4548534">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548541">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548547">if</span>&nbsp;<span class="ident" id="4548550"><a href="/compress/gzip/gzip.go.html#4548371">needconv</a></span>&nbsp;<span class="op" id="4548559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548563">b</span>&nbsp;<span class="op" id="4548565">:=</span>&nbsp;<span class="builtinfunc" id="4548568">make</span><span class="op" id="4548572">(</span><span class="op" id="4548573">[</span><span class="op" id="4548574">]</span><span class="builtintype" id="4548575">byte</span><span class="op" id="4548579">,</span>&nbsp;<span class="num" id="4548581">0</span><span class="op" id="4548582">,</span>&nbsp;<span class="builtinfunc" id="4548584">len</span><span class="op" id="4548587">(</span><span class="ident" id="4548588"><a href="/compress/gzip/gzip.go.html#4548269">s</a></span><span class="op" id="4548589">)</span><span class="op" id="4548590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548594">for</span>&nbsp;<span class="ident" id="4548598">_</span><span class="op" id="4548599">,</span>&nbsp;<span class="ident" id="4548601">v</span>&nbsp;<span class="op" id="4548603">:=</span>&nbsp;<span class="keyword" id="4548606">range</span>&nbsp;<span class="ident" id="4548612"><a href="/compress/gzip/gzip.go.html#4548269">s</a></span>&nbsp;<span class="op" id="4548614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548619"><a href="/compress/gzip/gzip.go.html#4548563">b</a></span>&nbsp;<span class="op" id="4548621">=</span>&nbsp;<span class="builtinfunc" id="4548623">append</span><span class="op" id="4548629">(</span><span class="ident" id="4548630"><a href="/compress/gzip/gzip.go.html#4548563">b</a></span><span class="op" id="4548631">,</span>&nbsp;<span class="builtintype" id="4548633">byte</span><span class="op" id="4548637">(</span><span class="ident" id="4548638"><a href="/compress/gzip/gzip.go.html#4548601">v</a></span><span class="op" id="4548639">)</span><span class="op" id="4548640">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548648">_</span><span class="op" id="4548649">,</span>&nbsp;<span class="ident" id="4548651"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span>&nbsp;<span class="op" id="4548655">=</span>&nbsp;<span class="ident" id="4548657"><a href="/compress/gzip/gzip.go.html#4548246">z</a></span><span class="op" id="4548658">.</span><span class="ident" id="4548659">w</span><span class="op" id="4548660">.</span><span class="ident" id="4548661">Write</span><span class="op" id="4548666">(</span><span class="ident" id="4548667"><a href="/compress/gzip/gzip.go.html#4548563">b</a></span><span class="op" id="4548668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548671">}</span>&nbsp;<span class="keyword" id="4548673">else</span>&nbsp;<span class="op" id="4548678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548682">_</span><span class="op" id="4548683">,</span>&nbsp;<span class="ident" id="4548685"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span>&nbsp;<span class="op" id="4548689">=</span>&nbsp;<span class="ident" id="4548691"><a href="/compress/gzip/gzip.go.html#4544956">io</a></span><span class="op" id="4548693">.</span><span class="ident" id="4548694">WriteString</span><span class="op" id="4548705">(</span><span class="ident" id="4548706"><a href="/compress/gzip/gzip.go.html#4548246">z</a></span><span class="op" id="4548707">.</span><span class="ident" id="4548708">w</span><span class="op" id="4548709">,</span>&nbsp;<span class="ident" id="4548711"><a href="/compress/gzip/gzip.go.html#4548269">s</a></span><span class="op" id="4548712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548715">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548718">if</span>&nbsp;<span class="ident" id="4548721"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span>&nbsp;<span class="op" id="4548725">!=</span>&nbsp;<span class="ident" id="4548728">nil</span>&nbsp;<span class="op" id="4548732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548736">return</span>&nbsp;<span class="ident" id="4548743"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4548748">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4548751">//&nbsp;GZIP&nbsp;strings&nbsp;are&nbsp;NUL-terminated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548788"><a href="/compress/gzip/gzip.go.html#4548246">z</a></span><span class="op" id="4548789">.</span><span class="ident" id="4548790">buf</span><span class="op" id="4548793">[</span><span class="num" id="4548794">0</span><span class="op" id="4548795">]</span>&nbsp;<span class="op" id="4548797">=</span>&nbsp;<span class="num" id="4548799">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4548802">_</span><span class="op" id="4548803">,</span>&nbsp;<span class="ident" id="4548805"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span>&nbsp;<span class="op" id="4548809">=</span>&nbsp;<span class="ident" id="4548811"><a href="/compress/gzip/gzip.go.html#4548246">z</a></span><span class="op" id="4548812">.</span><span class="ident" id="4548813">w</span><span class="op" id="4548814">.</span><span class="ident" id="4548815">Write</span><span class="op" id="4548820">(</span><span class="ident" id="4548821"><a href="/compress/gzip/gzip.go.html#4548246">z</a></span><span class="op" id="4548822">.</span><span class="ident" id="4548823">buf</span><span class="op" id="4548826">[</span><span class="num" id="4548827">0</span><span class="op" id="4548828">:</span><span class="num" id="4548829">1</span><span class="op" id="4548830">]</span><span class="op" id="4548831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4548834">return</span>&nbsp;<span class="ident" id="4548841"><a href="/compress/gzip/gzip.go.html#4548280">err</a></span><br>
<span class="lineno"></span><span class="op" id="4548845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4548848">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;form&nbsp;of&nbsp;p&nbsp;to&nbsp;the&nbsp;underlying&nbsp;io.Writer.&nbsp;The</span><br>
<span class="lineno">160</span><span class="comment" id="4548920">//&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;not&nbsp;necessarily&nbsp;flushed&nbsp;until&nbsp;the&nbsp;Writer&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="4548996">func</span>&nbsp;<span class="op" id="4549001">(</span><span class="ident" id="4549002">z</span>&nbsp;<span class="op" id="4549004">*</span><span class="ident" id="4549005"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4549011">)</span>&nbsp;<span class="ident" id="4549013">Write</span><span class="op" id="4549018">(</span><span class="ident" id="4549019">p</span>&nbsp;<span class="op" id="4549021">[</span><span class="op" id="4549022">]</span><span class="builtintype" id="4549023">byte</span><span class="op" id="4549027">)</span>&nbsp;<span class="op" id="4549029">(</span><span class="builtintype" id="4549030">int</span><span class="op" id="4549033">,</span>&nbsp;<span class="builtintype" id="4549035">error</span><span class="op" id="4549040">)</span>&nbsp;<span class="op" id="4549042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549045">if</span>&nbsp;<span class="ident" id="4549048"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549049">.</span><span class="ident" id="4549050">err</span>&nbsp;<span class="op" id="4549054">!=</span>&nbsp;<span class="ident" id="4549057">nil</span>&nbsp;<span class="op" id="4549061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549065">return</span>&nbsp;<span class="num" id="4549072">0</span><span class="op" id="4549073">,</span>&nbsp;<span class="ident" id="4549075"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549076">.</span><span class="ident" id="4549077">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549082">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549085">var</span>&nbsp;<span class="ident" id="4549089">n</span>&nbsp;<span class="builtintype" id="4549091">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4549096">//&nbsp;Write&nbsp;the&nbsp;GZIP&nbsp;header&nbsp;lazily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549130">if</span>&nbsp;<span class="op" id="4549133">!</span><span class="ident" id="4549134"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549135">.</span><span class="ident" id="4549136">wroteHeader</span>&nbsp;<span class="op" id="4549148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549152"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549153">.</span><span class="ident" id="4549154">wroteHeader</span>&nbsp;<span class="op" id="4549166">=</span>&nbsp;<span class="ident" id="4549168">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549175"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549176">.</span><span class="ident" id="4549177">buf</span><span class="op" id="4549180">[</span><span class="num" id="4549181">0</span><span class="op" id="4549182">]</span>&nbsp;<span class="op" id="4549184">=</span>&nbsp;<span class="ident" id="4549186"><a href="/compress/gzip/gunzip.go.html#4537865">gzipID1</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549196"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549197">.</span><span class="ident" id="4549198">buf</span><span class="op" id="4549201">[</span><span class="num" id="4549202">1</span><span class="op" id="4549203">]</span>&nbsp;<span class="op" id="4549205">=</span>&nbsp;<span class="ident" id="4549207"><a href="/compress/gzip/gunzip.go.html#4537885">gzipID2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549217"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549218">.</span><span class="ident" id="4549219">buf</span><span class="op" id="4549222">[</span><span class="num" id="4549223">2</span><span class="op" id="4549224">]</span>&nbsp;<span class="op" id="4549226">=</span>&nbsp;<span class="ident" id="4549228"><a href="/compress/gzip/gunzip.go.html#4537905">gzipDeflate</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549242"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549243">.</span><span class="ident" id="4549244">buf</span><span class="op" id="4549247">[</span><span class="num" id="4549248">3</span><span class="op" id="4549249">]</span>&nbsp;<span class="op" id="4549251">=</span>&nbsp;<span class="num" id="4549253">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549257">if</span>&nbsp;<span class="ident" id="4549260"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549261">.</span><span class="ident" id="4549262">Extra</span>&nbsp;<span class="op" id="4549268">!=</span>&nbsp;<span class="ident" id="4549271">nil</span>&nbsp;<span class="op" id="4549275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549280"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549281">.</span><span class="ident" id="4549282">buf</span><span class="op" id="4549285">[</span><span class="num" id="4549286">3</span><span class="op" id="4549287">]</span>&nbsp;<span class="op" id="4549289">|=</span>&nbsp;<span class="num" id="4549292">0x04</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549303">if</span>&nbsp;<span class="ident" id="4549306"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549307">.</span><span class="ident" id="4549308">Name</span>&nbsp;<span class="op" id="4549313">!=</span>&nbsp;<span class="string" id="4549316">&#34;&#34;</span>&nbsp;<span class="op" id="4549319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549324"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549325">.</span><span class="ident" id="4549326">buf</span><span class="op" id="4549329">[</span><span class="num" id="4549330">3</span><span class="op" id="4549331">]</span>&nbsp;<span class="op" id="4549333">|=</span>&nbsp;<span class="num" id="4549336">0x08</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549347">if</span>&nbsp;<span class="ident" id="4549350"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549351">.</span><span class="ident" id="4549352">Comment</span>&nbsp;<span class="op" id="4549360">!=</span>&nbsp;<span class="string" id="4549363">&#34;&#34;</span>&nbsp;<span class="op" id="4549366">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549371"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549372">.</span><span class="ident" id="4549373">buf</span><span class="op" id="4549376">[</span><span class="num" id="4549377">3</span><span class="op" id="4549378">]</span>&nbsp;<span class="op" id="4549380">|=</span>&nbsp;<span class="num" id="4549383">0x10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549394"><a href="/compress/gzip/gzip.go.html#4547647">put4</a></span><span class="op" id="4549398">(</span><span class="ident" id="4549399"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549400">.</span><span class="ident" id="4549401">buf</span><span class="op" id="4549404">[</span><span class="num" id="4549405">4</span><span class="op" id="4549406">:</span><span class="num" id="4549407">8</span><span class="op" id="4549408">]</span><span class="op" id="4549409">,</span>&nbsp;<span class="builtintype" id="4549411">uint32</span><span class="op" id="4549417">(</span><span class="ident" id="4549418"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549419">.</span><span class="ident" id="4549420">ModTime</span><span class="op" id="4549427">.</span><span class="ident" id="4549428">Unix</span><span class="op" id="4549432">(</span><span class="op" id="4549433">)</span><span class="op" id="4549434">)</span><span class="op" id="4549435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549439">if</span>&nbsp;<span class="ident" id="4549442"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549443">.</span><span class="ident" id="4549444">level</span>&nbsp;<span class="op" id="4549450">==</span>&nbsp;<span class="ident" id="4549453"><a href="/compress/gzip/gzip.go.html#4545199">BestCompression</a></span>&nbsp;<span class="op" id="4549469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549474"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549475">.</span><span class="ident" id="4549476">buf</span><span class="op" id="4549479">[</span><span class="num" id="4549480">8</span><span class="op" id="4549481">]</span>&nbsp;<span class="op" id="4549483">=</span>&nbsp;<span class="num" id="4549485">2</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549489">}</span>&nbsp;<span class="keyword" id="4549491">else</span>&nbsp;<span class="keyword" id="4549496">if</span>&nbsp;<span class="ident" id="4549499"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549500">.</span><span class="ident" id="4549501">level</span>&nbsp;<span class="op" id="4549507">==</span>&nbsp;<span class="ident" id="4549510"><a href="/compress/gzip/gzip.go.html#4545161">BestSpeed</a></span>&nbsp;<span class="op" id="4549520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549525"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549526">.</span><span class="ident" id="4549527">buf</span><span class="op" id="4549530">[</span><span class="num" id="4549531">8</span><span class="op" id="4549532">]</span>&nbsp;<span class="op" id="4549534">=</span>&nbsp;<span class="num" id="4549536">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549540">}</span>&nbsp;<span class="keyword" id="4549542">else</span>&nbsp;<span class="op" id="4549547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549552"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549553">.</span><span class="ident" id="4549554">buf</span><span class="op" id="4549557">[</span><span class="num" id="4549558">8</span><span class="op" id="4549559">]</span>&nbsp;<span class="op" id="4549561">=</span>&nbsp;<span class="num" id="4549563">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549567">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549571"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549572">.</span><span class="ident" id="4549573">buf</span><span class="op" id="4549576">[</span><span class="num" id="4549577">9</span><span class="op" id="4549578">]</span>&nbsp;<span class="op" id="4549580">=</span>&nbsp;<span class="ident" id="4549582"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549583">.</span><span class="ident" id="4549584">OS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549589"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4549590">,</span>&nbsp;<span class="ident" id="4549592"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549593">.</span><span class="ident" id="4549594">err</span>&nbsp;<span class="op" id="4549598">=</span>&nbsp;<span class="ident" id="4549600"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549601">.</span><span class="ident" id="4549602">w</span><span class="op" id="4549603">.</span><span class="ident" id="4549604">Write</span><span class="op" id="4549609">(</span><span class="ident" id="4549610"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549611">.</span><span class="ident" id="4549612">buf</span><span class="op" id="4549615">[</span><span class="num" id="4549616">0</span><span class="op" id="4549617">:</span><span class="num" id="4549618">10</span><span class="op" id="4549620">]</span><span class="op" id="4549621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549625">if</span>&nbsp;<span class="ident" id="4549628"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549629">.</span><span class="ident" id="4549630">err</span>&nbsp;<span class="op" id="4549634">!=</span>&nbsp;<span class="ident" id="4549637">nil</span>&nbsp;<span class="op" id="4549641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549646">return</span>&nbsp;<span class="ident" id="4549653"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4549654">,</span>&nbsp;<span class="ident" id="4549656"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549657">.</span><span class="ident" id="4549658">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549664">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549668">if</span>&nbsp;<span class="ident" id="4549671"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549672">.</span><span class="ident" id="4549673">Extra</span>&nbsp;<span class="op" id="4549679">!=</span>&nbsp;<span class="ident" id="4549682">nil</span>&nbsp;<span class="op" id="4549686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549691"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549692">.</span><span class="ident" id="4549693">err</span>&nbsp;<span class="op" id="4549697">=</span>&nbsp;<span class="ident" id="4549699"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549700">.</span><span class="ident" id="4549701">writeBytes</span><span class="op" id="4549711">(</span><span class="ident" id="4549712"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549713">.</span><span class="ident" id="4549714">Extra</span><span class="op" id="4549719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549724">if</span>&nbsp;<span class="ident" id="4549727"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549728">.</span><span class="ident" id="4549729">err</span>&nbsp;<span class="op" id="4549733">!=</span>&nbsp;<span class="ident" id="4549736">nil</span>&nbsp;<span class="op" id="4549740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549746">return</span>&nbsp;<span class="ident" id="4549753"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4549754">,</span>&nbsp;<span class="ident" id="4549756"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549757">.</span><span class="ident" id="4549758">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549765">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549773">if</span>&nbsp;<span class="ident" id="4549776"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549777">.</span><span class="ident" id="4549778">Name</span>&nbsp;<span class="op" id="4549783">!=</span>&nbsp;<span class="string" id="4549786">&#34;&#34;</span>&nbsp;<span class="op" id="4549789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549794"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549795">.</span><span class="ident" id="4549796">err</span>&nbsp;<span class="op" id="4549800">=</span>&nbsp;<span class="ident" id="4549802"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549803">.</span><span class="ident" id="4549804">writeString</span><span class="op" id="4549815">(</span><span class="ident" id="4549816"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549817">.</span><span class="ident" id="4549818">Name</span><span class="op" id="4549822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549827">if</span>&nbsp;<span class="ident" id="4549830"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549831">.</span><span class="ident" id="4549832">err</span>&nbsp;<span class="op" id="4549836">!=</span>&nbsp;<span class="ident" id="4549839">nil</span>&nbsp;<span class="op" id="4549843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549849">return</span>&nbsp;<span class="ident" id="4549856"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4549857">,</span>&nbsp;<span class="ident" id="4549859"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549860">.</span><span class="ident" id="4549861">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549876">if</span>&nbsp;<span class="ident" id="4549879"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549880">.</span><span class="ident" id="4549881">Comment</span>&nbsp;<span class="op" id="4549889">!=</span>&nbsp;<span class="string" id="4549892">&#34;&#34;</span>&nbsp;<span class="op" id="4549895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4549900"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549901">.</span><span class="ident" id="4549902">err</span>&nbsp;<span class="op" id="4549906">=</span>&nbsp;<span class="ident" id="4549908"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549909">.</span><span class="ident" id="4549910">writeString</span><span class="op" id="4549921">(</span><span class="ident" id="4549922"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549923">.</span><span class="ident" id="4549924">Comment</span><span class="op" id="4549931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549936">if</span>&nbsp;<span class="ident" id="4549939"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549940">.</span><span class="ident" id="4549941">err</span>&nbsp;<span class="op" id="4549945">!=</span>&nbsp;<span class="ident" id="4549948">nil</span>&nbsp;<span class="op" id="4549952">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549958">return</span>&nbsp;<span class="ident" id="4549965"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4549966">,</span>&nbsp;<span class="ident" id="4549968"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549969">.</span><span class="ident" id="4549970">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4549981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4549985">if</span>&nbsp;<span class="ident" id="4549988"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4549989">.</span><span class="ident" id="4549990">compressor</span>&nbsp;<span class="op" id="4550001">==</span>&nbsp;<span class="ident" id="4550004">nil</span>&nbsp;<span class="op" id="4550008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550013"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550014">.</span><span class="ident" id="4550015">compressor</span><span class="op" id="4550025">,</span>&nbsp;<span class="ident" id="4550027">_</span>&nbsp;<span class="op" id="4550029">=</span>&nbsp;<span class="ident" id="4550031"><a href="/compress/gzip/gzip.go.html#4544899">flate</a></span><span class="op" id="4550036">.</span><span class="ident" id="4550037">NewWriter</span><span class="op" id="4550046">(</span><span class="ident" id="4550047"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550048">.</span><span class="ident" id="4550049">w</span><span class="op" id="4550050">,</span>&nbsp;<span class="ident" id="4550052"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550053">.</span><span class="ident" id="4550054">level</span><span class="op" id="4550059">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550069"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550070">.</span><span class="ident" id="4550071">size</span>&nbsp;<span class="op" id="4550076">+=</span>&nbsp;<span class="builtintype" id="4550079">uint32</span><span class="op" id="4550085">(</span><span class="builtinfunc" id="4550086">len</span><span class="op" id="4550089">(</span><span class="ident" id="4550090"><a href="/compress/gzip/gzip.go.html#4549019">p</a></span><span class="op" id="4550091">)</span><span class="op" id="4550092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550095"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550096">.</span><span class="ident" id="4550097">digest</span><span class="op" id="4550103">.</span><span class="ident" id="4550104">Write</span><span class="op" id="4550109">(</span><span class="ident" id="4550110"><a href="/compress/gzip/gzip.go.html#4549019">p</a></span><span class="op" id="4550111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550114"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4550115">,</span>&nbsp;<span class="ident" id="4550117"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550118">.</span><span class="ident" id="4550119">err</span>&nbsp;<span class="op" id="4550123">=</span>&nbsp;<span class="ident" id="4550125"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550126">.</span><span class="ident" id="4550127">compressor</span><span class="op" id="4550137">.</span><span class="ident" id="4550138">Write</span><span class="op" id="4550143">(</span><span class="ident" id="4550144"><a href="/compress/gzip/gzip.go.html#4549019">p</a></span><span class="op" id="4550145">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550148">return</span>&nbsp;<span class="ident" id="4550155"><a href="/compress/gzip/gzip.go.html#4549089">n</a></span><span class="op" id="4550156">,</span>&nbsp;<span class="ident" id="4550158"><a href="/compress/gzip/gzip.go.html#4549002">z</a></span><span class="op" id="4550159">.</span><span class="ident" id="4550160">err</span><br>
<span class="lineno"></span><span class="op" id="4550164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4550167">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;pending&nbsp;compressed&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4550238">//</span><br>
<span class="lineno">225</span><span class="comment" id="4550241">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;mainly&nbsp;in&nbsp;compressed&nbsp;network&nbsp;protocols,&nbsp;to&nbsp;ensure&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4550312">//&nbsp;a&nbsp;remote&nbsp;reader&nbsp;has&nbsp;enough&nbsp;data&nbsp;to&nbsp;reconstruct&nbsp;a&nbsp;packet.&nbsp;Flush&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="4550383">//&nbsp;not&nbsp;return&nbsp;until&nbsp;the&nbsp;data&nbsp;has&nbsp;been&nbsp;written.&nbsp;If&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4550448">//&nbsp;writer&nbsp;returns&nbsp;an&nbsp;error,&nbsp;Flush&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="4550502">//</span><br>
<span class="lineno">230</span><span class="comment" id="4550505">//&nbsp;In&nbsp;the&nbsp;terminology&nbsp;of&nbsp;the&nbsp;zlib&nbsp;library,&nbsp;Flush&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;Z_SYNC_FLUSH.</span><br>
<span class="lineno"></span><span class="keyword" id="4550585">func</span>&nbsp;<span class="op" id="4550590">(</span><span class="ident" id="4550591">z</span>&nbsp;<span class="op" id="4550593">*</span><span class="ident" id="4550594"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4550600">)</span>&nbsp;<span class="ident" id="4550602">Flush</span><span class="op" id="4550607">(</span><span class="op" id="4550608">)</span>&nbsp;<span class="builtintype" id="4550610">error</span>&nbsp;<span class="op" id="4550616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550619">if</span>&nbsp;<span class="ident" id="4550622"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550623">.</span><span class="ident" id="4550624">err</span>&nbsp;<span class="op" id="4550628">!=</span>&nbsp;<span class="ident" id="4550631">nil</span>&nbsp;<span class="op" id="4550635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550639">return</span>&nbsp;<span class="ident" id="4550646"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550647">.</span><span class="ident" id="4550648">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550653">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550656">if</span>&nbsp;<span class="ident" id="4550659"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550660">.</span><span class="ident" id="4550661">closed</span>&nbsp;<span class="op" id="4550668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550672">return</span>&nbsp;<span class="ident" id="4550679">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550687">if</span>&nbsp;<span class="op" id="4550690">!</span><span class="ident" id="4550691"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550692">.</span><span class="ident" id="4550693">wroteHeader</span>&nbsp;<span class="op" id="4550705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550709"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550710">.</span><span class="ident" id="4550711">Write</span><span class="op" id="4550716">(</span><span class="ident" id="4550717">nil</span><span class="op" id="4550720">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550724">if</span>&nbsp;<span class="ident" id="4550727"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550728">.</span><span class="ident" id="4550729">err</span>&nbsp;<span class="op" id="4550733">!=</span>&nbsp;<span class="ident" id="4550736">nil</span>&nbsp;<span class="op" id="4550740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550745">return</span>&nbsp;<span class="ident" id="4550752"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550753">.</span><span class="ident" id="4550754">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4550763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4550766"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550767">.</span><span class="ident" id="4550768">err</span>&nbsp;<span class="op" id="4550772">=</span>&nbsp;<span class="ident" id="4550774"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550775">.</span><span class="ident" id="4550776">compressor</span><span class="op" id="4550786">.</span><span class="ident" id="4550787">Flush</span><span class="op" id="4550792">(</span><span class="op" id="4550793">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550796">return</span>&nbsp;<span class="ident" id="4550803"><a href="/compress/gzip/gzip.go.html#4550591">z</a></span><span class="op" id="4550804">.</span><span class="ident" id="4550805">err</span><br>
<span class="lineno"></span><span class="op" id="4550809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4550812">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;Writer,&nbsp;flushing&nbsp;any&nbsp;unwritten&nbsp;data&nbsp;to&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="4550886">//&nbsp;io.Writer,&nbsp;but&nbsp;does&nbsp;not&nbsp;close&nbsp;the&nbsp;underlying&nbsp;io.Writer.</span><br>
<span class="lineno">250</span><span class="keyword" id="4550945">func</span>&nbsp;<span class="op" id="4550950">(</span><span class="ident" id="4550951">z</span>&nbsp;<span class="op" id="4550953">*</span><span class="ident" id="4550954"><a href="/compress/gzip/gzip.go.html#4545386">Writer</a></span><span class="op" id="4550960">)</span>&nbsp;<span class="ident" id="4550962">Close</span><span class="op" id="4550967">(</span><span class="op" id="4550968">)</span>&nbsp;<span class="builtintype" id="4550970">error</span>&nbsp;<span class="op" id="4550976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550979">if</span>&nbsp;<span class="ident" id="4550982"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4550983">.</span><span class="ident" id="4550984">err</span>&nbsp;<span class="op" id="4550988">!=</span>&nbsp;<span class="ident" id="4550991">nil</span>&nbsp;<span class="op" id="4550995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4550999">return</span>&nbsp;<span class="ident" id="4551006"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551007">.</span><span class="ident" id="4551008">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4551013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551016">if</span>&nbsp;<span class="ident" id="4551019"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551020">.</span><span class="ident" id="4551021">closed</span>&nbsp;<span class="op" id="4551028">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551032">return</span>&nbsp;<span class="ident" id="4551039">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4551044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551047"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551048">.</span><span class="ident" id="4551049">closed</span>&nbsp;<span class="op" id="4551056">=</span>&nbsp;<span class="ident" id="4551058">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551064">if</span>&nbsp;<span class="op" id="4551067">!</span><span class="ident" id="4551068"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551069">.</span><span class="ident" id="4551070">wroteHeader</span>&nbsp;<span class="op" id="4551082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551086"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551087">.</span><span class="ident" id="4551088">Write</span><span class="op" id="4551093">(</span><span class="ident" id="4551094">nil</span><span class="op" id="4551097">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551101">if</span>&nbsp;<span class="ident" id="4551104"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551105">.</span><span class="ident" id="4551106">err</span>&nbsp;<span class="op" id="4551110">!=</span>&nbsp;<span class="ident" id="4551113">nil</span>&nbsp;<span class="op" id="4551117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551122">return</span>&nbsp;<span class="ident" id="4551129"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551130">.</span><span class="ident" id="4551131">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4551137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4551140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551143"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551144">.</span><span class="ident" id="4551145">err</span>&nbsp;<span class="op" id="4551149">=</span>&nbsp;<span class="ident" id="4551151"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551152">.</span><span class="ident" id="4551153">compressor</span><span class="op" id="4551163">.</span><span class="ident" id="4551164">Close</span><span class="op" id="4551169">(</span><span class="op" id="4551170">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551173">if</span>&nbsp;<span class="ident" id="4551176"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551177">.</span><span class="ident" id="4551178">err</span>&nbsp;<span class="op" id="4551182">!=</span>&nbsp;<span class="ident" id="4551185">nil</span>&nbsp;<span class="op" id="4551189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551193">return</span>&nbsp;<span class="ident" id="4551200"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551201">.</span><span class="ident" id="4551202">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4551207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551210"><a href="/compress/gzip/gzip.go.html#4547647">put4</a></span><span class="op" id="4551214">(</span><span class="ident" id="4551215"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551216">.</span><span class="ident" id="4551217">buf</span><span class="op" id="4551220">[</span><span class="num" id="4551221">0</span><span class="op" id="4551222">:</span><span class="num" id="4551223">4</span><span class="op" id="4551224">]</span><span class="op" id="4551225">,</span>&nbsp;<span class="ident" id="4551227"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551228">.</span><span class="ident" id="4551229">digest</span><span class="op" id="4551235">.</span><span class="ident" id="4551236">Sum32</span><span class="op" id="4551241">(</span><span class="op" id="4551242">)</span><span class="op" id="4551243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551246"><a href="/compress/gzip/gzip.go.html#4547647">put4</a></span><span class="op" id="4551250">(</span><span class="ident" id="4551251"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551252">.</span><span class="ident" id="4551253">buf</span><span class="op" id="4551256">[</span><span class="num" id="4551257">4</span><span class="op" id="4551258">:</span><span class="num" id="4551259">8</span><span class="op" id="4551260">]</span><span class="op" id="4551261">,</span>&nbsp;<span class="ident" id="4551263"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551264">.</span><span class="ident" id="4551265">size</span><span class="op" id="4551269">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4551272">_</span><span class="op" id="4551273">,</span>&nbsp;<span class="ident" id="4551275"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551276">.</span><span class="ident" id="4551277">err</span>&nbsp;<span class="op" id="4551281">=</span>&nbsp;<span class="ident" id="4551283"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551284">.</span><span class="ident" id="4551285">w</span><span class="op" id="4551286">.</span><span class="ident" id="4551287">Write</span><span class="op" id="4551292">(</span><span class="ident" id="4551293"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551294">.</span><span class="ident" id="4551295">buf</span><span class="op" id="4551298">[</span><span class="num" id="4551299">0</span><span class="op" id="4551300">:</span><span class="num" id="4551301">8</span><span class="op" id="4551302">]</span><span class="op" id="4551303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4551306">return</span>&nbsp;<span class="ident" id="4551313"><a href="/compress/gzip/gzip.go.html#4550951">z</a></span><span class="op" id="4551314">.</span><span class="ident" id="4551315">err</span><br>
<span class="lineno"></span><span class="op" id="4551319">}</span>
</div>
</body>
</html>
