<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html" class="current">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6677991">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6678046">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6678100">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6678151">package</span>&nbsp;<span class="ident" id="6678159">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6678164">import</span>&nbsp;<span class="op" id="6678171">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6678174">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6678182">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6678192">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6678195">type</span>&nbsp;<span class="ident" id="6678200">hostTest</span>&nbsp;<span class="keyword" id="6678209">struct</span>&nbsp;<span class="op" id="6678216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678219">host</span>&nbsp;<span class="builtintype" id="6678224">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678232">ips</span>&nbsp;&nbsp;<span class="op" id="6678237">[</span><span class="op" id="6678238">]</span><span class="ident" id="6678239">IP</span><br>
<span class="lineno">15</span><span class="op" id="6678242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6678245">var</span>&nbsp;<span class="ident" id="6678249">hosttests</span>&nbsp;<span class="op" id="6678259">=</span>&nbsp;<span class="op" id="6678261">[</span><span class="op" id="6678262">]</span><span class="ident" id="6678263">hostTest</span><span class="op" id="6678271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678274">{</span><span class="string" id="6678275">&#34;odin&#34;</span><span class="op" id="6678281">,</span>&nbsp;<span class="op" id="6678283">[</span><span class="op" id="6678284">]</span><span class="ident" id="6678285">IP</span><span class="op" id="6678287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678291">IPv4</span><span class="op" id="6678295">(</span><span class="num" id="6678296">127</span><span class="op" id="6678299">,</span>&nbsp;<span class="num" id="6678301">0</span><span class="op" id="6678302">,</span>&nbsp;<span class="num" id="6678304">0</span><span class="op" id="6678305">,</span>&nbsp;<span class="num" id="6678307">2</span><span class="op" id="6678308">)</span><span class="op" id="6678309">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678313">IPv4</span><span class="op" id="6678317">(</span><span class="num" id="6678318">127</span><span class="op" id="6678321">,</span>&nbsp;<span class="num" id="6678323">0</span><span class="op" id="6678324">,</span>&nbsp;<span class="num" id="6678326">0</span><span class="op" id="6678327">,</span>&nbsp;<span class="num" id="6678329">3</span><span class="op" id="6678330">)</span><span class="op" id="6678331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678335">ParseIP</span><span class="op" id="6678342">(</span><span class="string" id="6678343">&#34;::2&#34;</span><span class="op" id="6678348">)</span><span class="op" id="6678349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678352">}</span><span class="op" id="6678353">}</span><span class="op" id="6678354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678357">{</span><span class="string" id="6678358">&#34;thor&#34;</span><span class="op" id="6678364">,</span>&nbsp;<span class="op" id="6678366">[</span><span class="op" id="6678367">]</span><span class="ident" id="6678368">IP</span><span class="op" id="6678370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678374">IPv4</span><span class="op" id="6678378">(</span><span class="num" id="6678379">127</span><span class="op" id="6678382">,</span>&nbsp;<span class="num" id="6678384">1</span><span class="op" id="6678385">,</span>&nbsp;<span class="num" id="6678387">1</span><span class="op" id="6678388">,</span>&nbsp;<span class="num" id="6678390">1</span><span class="op" id="6678391">)</span><span class="op" id="6678392">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678395">}</span><span class="op" id="6678396">}</span><span class="op" id="6678397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678400">{</span><span class="string" id="6678401">&#34;loki&#34;</span><span class="op" id="6678407">,</span>&nbsp;<span class="op" id="6678409">[</span><span class="op" id="6678410">]</span><span class="ident" id="6678411">IP</span><span class="op" id="6678413">{</span><span class="op" id="6678414">}</span><span class="op" id="6678415">}</span><span class="op" id="6678416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678419">{</span><span class="string" id="6678420">&#34;ullr&#34;</span><span class="op" id="6678426">,</span>&nbsp;<span class="op" id="6678428">[</span><span class="op" id="6678429">]</span><span class="ident" id="6678430">IP</span><span class="op" id="6678432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678436">IPv4</span><span class="op" id="6678440">(</span><span class="num" id="6678441">127</span><span class="op" id="6678444">,</span>&nbsp;<span class="num" id="6678446">1</span><span class="op" id="6678447">,</span>&nbsp;<span class="num" id="6678449">1</span><span class="op" id="6678450">,</span>&nbsp;<span class="num" id="6678452">2</span><span class="op" id="6678453">)</span><span class="op" id="6678454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678457">}</span><span class="op" id="6678458">}</span><span class="op" id="6678459">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678462">{</span><span class="string" id="6678463">&#34;ullrhost&#34;</span><span class="op" id="6678473">,</span>&nbsp;<span class="op" id="6678475">[</span><span class="op" id="6678476">]</span><span class="ident" id="6678477">IP</span><span class="op" id="6678479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678483">IPv4</span><span class="op" id="6678487">(</span><span class="num" id="6678488">127</span><span class="op" id="6678491">,</span>&nbsp;<span class="num" id="6678493">1</span><span class="op" id="6678494">,</span>&nbsp;<span class="num" id="6678496">1</span><span class="op" id="6678497">,</span>&nbsp;<span class="num" id="6678499">2</span><span class="op" id="6678500">)</span><span class="op" id="6678501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678504">}</span><span class="op" id="6678505">}</span><span class="op" id="6678506">,</span><br>
<span class="lineno"></span><span class="op" id="6678508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6678511">func</span>&nbsp;<span class="ident" id="6678516">TestLookupStaticHost</span><span class="op" id="6678536">(</span><span class="ident" id="6678537">t</span>&nbsp;<span class="op" id="6678539">*</span><span class="ident" id="6678540">testing</span><span class="op" id="6678547">.</span><span class="ident" id="6678548">T</span><span class="op" id="6678549">)</span>&nbsp;<span class="op" id="6678551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678554">p</span>&nbsp;<span class="op" id="6678556">:=</span>&nbsp;<span class="ident" id="6678559">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678570">hostsPath</span>&nbsp;<span class="op" id="6678580">=</span>&nbsp;<span class="string" id="6678582">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6678600">for</span>&nbsp;<span class="ident" id="6678604">i</span>&nbsp;<span class="op" id="6678606">:=</span>&nbsp;<span class="num" id="6678609">0</span><span class="op" id="6678610">;</span>&nbsp;<span class="ident" id="6678612">i</span>&nbsp;<span class="op" id="6678614">&lt;</span>&nbsp;<span class="builtinfunc" id="6678616">len</span><span class="op" id="6678619">(</span><span class="ident" id="6678620">hosttests</span><span class="op" id="6678629">)</span><span class="op" id="6678630">;</span>&nbsp;<span class="ident" id="6678632">i</span><span class="op" id="6678633">++</span>&nbsp;<span class="op" id="6678636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678640">tt</span>&nbsp;<span class="op" id="6678643">:=</span>&nbsp;<span class="ident" id="6678646">hosttests</span><span class="op" id="6678655">[</span><span class="ident" id="6678656">i</span><span class="op" id="6678657">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678661">ips</span>&nbsp;<span class="op" id="6678665">:=</span>&nbsp;<span class="ident" id="6678668">lookupStaticHost</span><span class="op" id="6678684">(</span><span class="ident" id="6678685">tt</span><span class="op" id="6678687">.</span><span class="ident" id="6678688">host</span><span class="op" id="6678692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6678696">if</span>&nbsp;<span class="builtinfunc" id="6678699">len</span><span class="op" id="6678702">(</span><span class="ident" id="6678703">ips</span><span class="op" id="6678706">)</span>&nbsp;<span class="op" id="6678708">!=</span>&nbsp;<span class="builtinfunc" id="6678711">len</span><span class="op" id="6678714">(</span><span class="ident" id="6678715">tt</span><span class="op" id="6678717">.</span><span class="ident" id="6678718">ips</span><span class="op" id="6678721">)</span>&nbsp;<span class="op" id="6678723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678728">t</span><span class="op" id="6678729">.</span><span class="ident" id="6678730">Errorf</span><span class="op" id="6678736">(</span><span class="string" id="6678737">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6678763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6678769">len</span><span class="op" id="6678772">(</span><span class="ident" id="6678773">ips</span><span class="op" id="6678776">)</span><span class="op" id="6678777">,</span>&nbsp;<span class="builtinfunc" id="6678779">len</span><span class="op" id="6678782">(</span><span class="ident" id="6678783">tt</span><span class="op" id="6678785">.</span><span class="ident" id="6678786">ips</span><span class="op" id="6678789">)</span><span class="op" id="6678790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6678795">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6678810">for</span>&nbsp;<span class="ident" id="6678814">k</span><span class="op" id="6678815">,</span>&nbsp;<span class="ident" id="6678817">v</span>&nbsp;<span class="op" id="6678819">:=</span>&nbsp;<span class="keyword" id="6678822">range</span>&nbsp;<span class="ident" id="6678828">ips</span>&nbsp;<span class="op" id="6678832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6678837">if</span>&nbsp;<span class="ident" id="6678840">tt</span><span class="op" id="6678842">.</span><span class="ident" id="6678843">ips</span><span class="op" id="6678846">[</span><span class="ident" id="6678847">k</span><span class="op" id="6678848">]</span><span class="op" id="6678849">.</span><span class="ident" id="6678850">String</span><span class="op" id="6678856">(</span><span class="op" id="6678857">)</span>&nbsp;<span class="op" id="6678859">!=</span>&nbsp;<span class="ident" id="6678862">v</span>&nbsp;<span class="op" id="6678864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678870">t</span><span class="op" id="6678871">.</span><span class="ident" id="6678872">Errorf</span><span class="op" id="6678878">(</span><span class="string" id="6678879">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6678915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678922">tt</span><span class="op" id="6678924">.</span><span class="ident" id="6678925">host</span><span class="op" id="6678929">,</span>&nbsp;<span class="ident" id="6678931">v</span><span class="op" id="6678932">,</span>&nbsp;<span class="ident" id="6678934">tt</span><span class="op" id="6678936">.</span><span class="ident" id="6678937">ips</span><span class="op" id="6678940">[</span><span class="ident" id="6678941">k</span><span class="op" id="6678942">]</span><span class="op" id="6678943">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6678955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6678958">hostsPath</span>&nbsp;<span class="op" id="6678968">=</span>&nbsp;<span class="ident" id="6678970">p</span><br>
<span class="lineno"></span><span class="op" id="6678972">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6678975">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6679029">func</span>&nbsp;<span class="ident" id="6679034">TestSingleLineHostsFile</span><span class="op" id="6679057">(</span><span class="ident" id="6679058">t</span>&nbsp;<span class="op" id="6679060">*</span><span class="ident" id="6679061">testing</span><span class="op" id="6679068">.</span><span class="ident" id="6679069">T</span><span class="op" id="6679070">)</span>&nbsp;<span class="op" id="6679072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679075">p</span>&nbsp;<span class="op" id="6679077">:=</span>&nbsp;<span class="ident" id="6679080">hostsPath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679091">hostsPath</span>&nbsp;<span class="op" id="6679101">=</span>&nbsp;<span class="string" id="6679103">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679133">ips</span>&nbsp;<span class="op" id="6679137">:=</span>&nbsp;<span class="ident" id="6679140">lookupStaticHost</span><span class="op" id="6679156">(</span><span class="string" id="6679157">&#34;odin&#34;</span><span class="op" id="6679163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6679166">if</span>&nbsp;<span class="builtinfunc" id="6679169">len</span><span class="op" id="6679172">(</span><span class="ident" id="6679173">ips</span><span class="op" id="6679176">)</span>&nbsp;<span class="op" id="6679178">!=</span>&nbsp;<span class="num" id="6679181">1</span>&nbsp;<span class="op" id="6679183">||</span>&nbsp;<span class="ident" id="6679186">ips</span><span class="op" id="6679189">[</span><span class="num" id="6679190">0</span><span class="op" id="6679191">]</span>&nbsp;<span class="op" id="6679193">!=</span>&nbsp;<span class="string" id="6679196">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6679208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679212">t</span><span class="op" id="6679213">.</span><span class="ident" id="6679214">Errorf</span><span class="op" id="6679220">(</span><span class="string" id="6679221">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6679253">,</span>&nbsp;<span class="ident" id="6679255">ips</span><span class="op" id="6679258">,</span>&nbsp;<span class="op" id="6679260">[</span><span class="op" id="6679261">]</span><span class="builtintype" id="6679262">string</span><span class="op" id="6679268">{</span><span class="string" id="6679269">&#34;127.0.0.2&#34;</span><span class="op" id="6679280">}</span><span class="op" id="6679281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6679284">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679288">hostsPath</span>&nbsp;<span class="op" id="6679298">=</span>&nbsp;<span class="ident" id="6679300">p</span><br>
<span class="lineno"></span><span class="op" id="6679302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6679305">func</span>&nbsp;<span class="ident" id="6679310">TestLookupHost</span><span class="op" id="6679324">(</span><span class="ident" id="6679325">t</span>&nbsp;<span class="op" id="6679327">*</span><span class="ident" id="6679328">testing</span><span class="op" id="6679335">.</span><span class="ident" id="6679336">T</span><span class="op" id="6679337">)</span>&nbsp;<span class="op" id="6679339">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6679342">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6679401">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6679459">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6679512">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679536">addrs</span><span class="op" id="6679541">,</span>&nbsp;<span class="ident" id="6679543">_</span>&nbsp;<span class="op" id="6679545">:=</span>&nbsp;<span class="ident" id="6679548">LookupHost</span><span class="op" id="6679558">(</span><span class="string" id="6679559">&#34;localhost&#34;</span><span class="op" id="6679570">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679573">sort</span><span class="op" id="6679577">.</span><span class="ident" id="6679578">Strings</span><span class="op" id="6679585">(</span><span class="ident" id="6679586">addrs</span><span class="op" id="6679591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6679594">for</span>&nbsp;<span class="ident" id="6679598">i</span>&nbsp;<span class="op" id="6679600">:=</span>&nbsp;<span class="num" id="6679603">0</span><span class="op" id="6679604">;</span>&nbsp;<span class="ident" id="6679606">i</span><span class="op" id="6679607">+</span><span class="num" id="6679608">1</span>&nbsp;<span class="op" id="6679610">&lt;</span>&nbsp;<span class="builtinfunc" id="6679612">len</span><span class="op" id="6679615">(</span><span class="ident" id="6679616">addrs</span><span class="op" id="6679621">)</span><span class="op" id="6679622">;</span>&nbsp;<span class="ident" id="6679624">i</span><span class="op" id="6679625">++</span>&nbsp;<span class="op" id="6679628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6679632">if</span>&nbsp;<span class="ident" id="6679635">addrs</span><span class="op" id="6679640">[</span><span class="ident" id="6679641">i</span><span class="op" id="6679642">]</span>&nbsp;<span class="op" id="6679644">==</span>&nbsp;<span class="ident" id="6679647">addrs</span><span class="op" id="6679652">[</span><span class="ident" id="6679653">i</span><span class="op" id="6679654">+</span><span class="num" id="6679655">1</span><span class="op" id="6679656">]</span>&nbsp;<span class="op" id="6679658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6679663">t</span><span class="op" id="6679664">.</span><span class="ident" id="6679665">Fatalf</span><span class="op" id="6679671">(</span><span class="string" id="6679672">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6679729">,</span>&nbsp;<span class="ident" id="6679731">addrs</span><span class="op" id="6679736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6679740">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6679743">}</span><br>
<span class="lineno"></span><span class="op" id="6679745">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
