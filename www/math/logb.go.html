<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2070281">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2070336">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2070390">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2070441">package</span>&nbsp;<span class="ident" id="2070449">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2070455">//&nbsp;Logb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2070497">//</span><br>
<span class="lineno"></span><span class="comment" id="2070500">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno">10</span><span class="comment" id="2070522">//&nbsp;&nbsp;&nbsp;&nbspLogb(±Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno"></span><span class="comment" id="2070544">//&nbsp;&nbsp;&nbsp;&nbspLogb(0)&nbsp;=&nbsp;-Inf</span><br>
<span class="lineno"></span><span class="comment" id="2070562">//&nbsp;&nbsp;&nbsp;&nbspLogb(NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="keyword" id="2070581">func</span>&nbsp;<span class="ident" id="2070586">Logb</span><span class="op" id="2070590">(</span><span class="ident" id="2070591">x</span>&nbsp;<span class="builtintype" id="2070593">float64</span><span class="op" id="2070600">)</span>&nbsp;<span class="builtintype" id="2070602">float64</span>&nbsp;<span class="op" id="2070610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2070613">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070631">switch</span>&nbsp;<span class="op" id="2070638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070641">case</span>&nbsp;<span class="ident" id="2070646">x</span>&nbsp;<span class="op" id="2070648">==</span>&nbsp;<span class="num" id="2070651">0</span><span class="op" id="2070652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070656">return</span>&nbsp;<span class="ident" id="2070663">Inf</span><span class="op" id="2070666">(</span><span class="op" id="2070667">-</span><span class="num" id="2070668">1</span><span class="op" id="2070669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070672">case</span>&nbsp;<span class="ident" id="2070677">IsInf</span><span class="op" id="2070682">(</span><span class="ident" id="2070683">x</span><span class="op" id="2070684">,</span>&nbsp;<span class="num" id="2070686">0</span><span class="op" id="2070687">)</span><span class="op" id="2070688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070692">return</span>&nbsp;<span class="ident" id="2070699">Inf</span><span class="op" id="2070702">(</span><span class="num" id="2070703">1</span><span class="op" id="2070704">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070707">case</span>&nbsp;<span class="ident" id="2070712">IsNaN</span><span class="op" id="2070717">(</span><span class="ident" id="2070718">x</span><span class="op" id="2070719">)</span><span class="op" id="2070720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070724">return</span>&nbsp;<span class="ident" id="2070731">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2070734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070737">return</span>&nbsp;<span class="builtintype" id="2070744">float64</span><span class="op" id="2070751">(</span><span class="ident" id="2070752">ilogb</span><span class="op" id="2070757">(</span><span class="ident" id="2070758">x</span><span class="op" id="2070759">)</span><span class="op" id="2070760">)</span><br>
<span class="lineno"></span><span class="op" id="2070762">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="2070765">//&nbsp;Ilogb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x&nbsp;as&nbsp;an&nbsp;integer.</span><br>
<span class="lineno"></span><span class="comment" id="2070822">//</span><br>
<span class="lineno"></span><span class="comment" id="2070825">//&nbsp;Special&nbsp;cases&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="2070847">//&nbsp;&nbsp;&nbsp;&nbspIlogb(±Inf)&nbsp;=&nbsp;MaxInt32</span><br>
<span class="lineno">30</span><span class="comment" id="2070874">//&nbsp;&nbsp;&nbsp;&nbspIlogb(0)&nbsp;=&nbsp;MinInt32</span><br>
<span class="lineno"></span><span class="comment" id="2070897">//&nbsp;&nbsp;&nbsp;&nbspIlogb(NaN)&nbsp;=&nbsp;MaxInt32</span><br>
<span class="lineno"></span><span class="keyword" id="2070922">func</span>&nbsp;<span class="ident" id="2070927">Ilogb</span><span class="op" id="2070932">(</span><span class="ident" id="2070933">x</span>&nbsp;<span class="builtintype" id="2070935">float64</span><span class="op" id="2070942">)</span>&nbsp;<span class="builtintype" id="2070944">int</span>&nbsp;<span class="op" id="2070948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2070951">//&nbsp;special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070969">switch</span>&nbsp;<span class="op" id="2070976">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070979">case</span>&nbsp;<span class="ident" id="2070984">x</span>&nbsp;<span class="op" id="2070986">==</span>&nbsp;<span class="num" id="2070989">0</span><span class="op" id="2070990">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2070994">return</span>&nbsp;<span class="ident" id="2071001">MinInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071011">case</span>&nbsp;<span class="ident" id="2071016">IsNaN</span><span class="op" id="2071021">(</span><span class="ident" id="2071022">x</span><span class="op" id="2071023">)</span><span class="op" id="2071024">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071028">return</span>&nbsp;<span class="ident" id="2071035">MaxInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071045">case</span>&nbsp;<span class="ident" id="2071050">IsInf</span><span class="op" id="2071055">(</span><span class="ident" id="2071056">x</span><span class="op" id="2071057">,</span>&nbsp;<span class="num" id="2071059">0</span><span class="op" id="2071060">)</span><span class="op" id="2071061">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071065">return</span>&nbsp;<span class="ident" id="2071072">MaxInt32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2071082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071085">return</span>&nbsp;<span class="ident" id="2071092">ilogb</span><span class="op" id="2071097">(</span><span class="ident" id="2071098">x</span><span class="op" id="2071099">)</span><br>
<span class="lineno"></span><span class="op" id="2071101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="2071104">//&nbsp;logb&nbsp;returns&nbsp;the&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;x.&nbsp;It&nbsp;assumes&nbsp;x&nbsp;is&nbsp;finite&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2071173">//&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="keyword" id="2071186">func</span>&nbsp;<span class="ident" id="2071191">ilogb</span><span class="op" id="2071196">(</span><span class="ident" id="2071197">x</span>&nbsp;<span class="builtintype" id="2071199">float64</span><span class="op" id="2071206">)</span>&nbsp;<span class="builtintype" id="2071208">int</span>&nbsp;<span class="op" id="2071212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2071215">x</span><span class="op" id="2071216">,</span>&nbsp;<span class="ident" id="2071218">exp</span>&nbsp;<span class="op" id="2071222">:=</span>&nbsp;<span class="ident" id="2071225">normalize</span><span class="op" id="2071234">(</span><span class="ident" id="2071235">x</span><span class="op" id="2071236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2071239">return</span>&nbsp;<span class="builtintype" id="2071246">int</span><span class="op" id="2071249">(</span><span class="op" id="2071250">(</span><span class="ident" id="2071251">Float64bits</span><span class="op" id="2071262">(</span><span class="ident" id="2071263">x</span><span class="op" id="2071264">)</span><span class="op" id="2071265">&gt;&gt;</span><span class="ident" id="2071267">shift</span><span class="op" id="2071272">)</span><span class="op" id="2071273">&amp;</span><span class="ident" id="2071274">mask</span><span class="op" id="2071278">)</span>&nbsp;<span class="op" id="2071280">-</span>&nbsp;<span class="ident" id="2071282">bias</span>&nbsp;<span class="op" id="2071287">+</span>&nbsp;<span class="ident" id="2071289">exp</span><br>
<span class="lineno">50</span><span class="op" id="2071293">}</span>
</div>
</body>
</html>
