<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2952823">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2952878">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2952932">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2952983">package</span>&nbsp;<span class="ident" id="2952991">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2952996">import</span>&nbsp;<span class="op" id="2953003">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2953006">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2953019">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2953026">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953029">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="2953072">type</span>&nbsp;<span class="ident" id="2953077">DNSError</span>&nbsp;<span class="keyword" id="2953086">struct</span>&nbsp;<span class="op" id="2953093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953096">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2953106">string</span>&nbsp;<span class="comment" id="2953113">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953142">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2953152">string</span>&nbsp;<span class="comment" id="2953159">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953179">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2953189">string</span>&nbsp;<span class="comment" id="2953196">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953212">IsTimeout</span>&nbsp;<span class="builtintype" id="2953222">bool</span><br>
<span class="lineno"></span><span class="op" id="2953227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="2953230">func</span>&nbsp;<span class="op" id="2953235">(</span><span class="ident" id="2953236">e</span>&nbsp;<span class="op" id="2953238">*</span><span class="ident" id="2953239">DNSError</span><span class="op" id="2953247">)</span>&nbsp;<span class="ident" id="2953249">Error</span><span class="op" id="2953254">(</span><span class="op" id="2953255">)</span>&nbsp;<span class="builtintype" id="2953257">string</span>&nbsp;<span class="op" id="2953264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953267">if</span>&nbsp;<span class="ident" id="2953270">e</span>&nbsp;<span class="op" id="2953272">==</span>&nbsp;<span class="ident" id="2953275">nil</span>&nbsp;<span class="op" id="2953279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953283">return</span>&nbsp;<span class="string" id="2953290">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953302">s</span>&nbsp;<span class="op" id="2953304">:=</span>&nbsp;<span class="string" id="2953307">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="2953317">+</span>&nbsp;<span class="ident" id="2953319">e</span><span class="op" id="2953320">.</span><span class="ident" id="2953321">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953327">if</span>&nbsp;<span class="ident" id="2953330">e</span><span class="op" id="2953331">.</span><span class="ident" id="2953332">Server</span>&nbsp;<span class="op" id="2953339">!=</span>&nbsp;<span class="string" id="2953342">&#34;&#34;</span>&nbsp;<span class="op" id="2953345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953349">s</span>&nbsp;<span class="op" id="2953351">+=</span>&nbsp;<span class="string" id="2953354">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2953361">+</span>&nbsp;<span class="ident" id="2953363">e</span><span class="op" id="2953364">.</span><span class="ident" id="2953365">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953376">s</span>&nbsp;<span class="op" id="2953378">+=</span>&nbsp;<span class="string" id="2953381">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2953386">+</span>&nbsp;<span class="ident" id="2953388">e</span><span class="op" id="2953389">.</span><span class="ident" id="2953390">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953395">return</span>&nbsp;<span class="ident" id="2953402">s</span><br>
<span class="lineno">30</span><span class="op" id="2953404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2953407">func</span>&nbsp;<span class="op" id="2953412">(</span><span class="ident" id="2953413">e</span>&nbsp;<span class="op" id="2953415">*</span><span class="ident" id="2953416">DNSError</span><span class="op" id="2953424">)</span>&nbsp;<span class="ident" id="2953426">Timeout</span><span class="op" id="2953433">(</span><span class="op" id="2953434">)</span>&nbsp;<span class="builtintype" id="2953436">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2953443">{</span>&nbsp;<span class="keyword" id="2953445">return</span>&nbsp;<span class="ident" id="2953452">e</span><span class="op" id="2953453">.</span><span class="ident" id="2953454">IsTimeout</span>&nbsp;<span class="op" id="2953464">}</span><br>
<span class="lineno"></span><span class="keyword" id="2953466">func</span>&nbsp;<span class="op" id="2953471">(</span><span class="ident" id="2953472">e</span>&nbsp;<span class="op" id="2953474">*</span><span class="ident" id="2953475">DNSError</span><span class="op" id="2953483">)</span>&nbsp;<span class="ident" id="2953485">Temporary</span><span class="op" id="2953494">(</span><span class="op" id="2953495">)</span>&nbsp;<span class="builtintype" id="2953497">bool</span>&nbsp;<span class="op" id="2953502">{</span>&nbsp;<span class="keyword" id="2953504">return</span>&nbsp;<span class="ident" id="2953511">e</span><span class="op" id="2953512">.</span><span class="ident" id="2953513">IsTimeout</span>&nbsp;<span class="op" id="2953523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="2953526">const</span>&nbsp;<span class="ident" id="2953532">noSuchHost</span>&nbsp;<span class="op" id="2953543">=</span>&nbsp;<span class="string" id="2953545">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2953561">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="2953634">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="2953712">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="2953740">func</span>&nbsp;<span class="ident" id="2953745">reverseaddr</span><span class="op" id="2953756">(</span><span class="ident" id="2953757">addr</span>&nbsp;<span class="builtintype" id="2953762">string</span><span class="op" id="2953768">)</span>&nbsp;<span class="op" id="2953770">(</span><span class="ident" id="2953771">arpa</span>&nbsp;<span class="builtintype" id="2953776">string</span><span class="op" id="2953782">,</span>&nbsp;<span class="ident" id="2953784">err</span>&nbsp;<span class="builtintype" id="2953788">error</span><span class="op" id="2953793">)</span>&nbsp;<span class="op" id="2953795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2953798">ip</span>&nbsp;<span class="op" id="2953801">:=</span>&nbsp;<span class="ident" id="2953804">ParseIP</span><span class="op" id="2953811">(</span><span class="ident" id="2953812">addr</span><span class="op" id="2953816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953819">if</span>&nbsp;<span class="ident" id="2953822">ip</span>&nbsp;<span class="op" id="2953825">==</span>&nbsp;<span class="ident" id="2953828">nil</span>&nbsp;<span class="op" id="2953832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953836">return</span>&nbsp;<span class="string" id="2953843">&#34;&#34;</span><span class="op" id="2953845">,</span>&nbsp;<span class="op" id="2953847">&amp;</span><span class="ident" id="2953848">DNSError</span><span class="op" id="2953856">{</span><span class="ident" id="2953857">Err</span><span class="op" id="2953860">:</span>&nbsp;<span class="string" id="2953862">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="2953884">,</span>&nbsp;<span class="ident" id="2953886">Name</span><span class="op" id="2953890">:</span>&nbsp;<span class="ident" id="2953892">addr</span><span class="op" id="2953896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2953899">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953902">if</span>&nbsp;<span class="ident" id="2953905">ip</span><span class="op" id="2953907">.</span><span class="ident" id="2953908">To4</span><span class="op" id="2953911">(</span><span class="op" id="2953912">)</span>&nbsp;<span class="op" id="2953914">!=</span>&nbsp;<span class="ident" id="2953917">nil</span>&nbsp;<span class="op" id="2953921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2953925">return</span>&nbsp;<span class="ident" id="2953932">itoa</span><span class="op" id="2953936">(</span><span class="builtintype" id="2953937">int</span><span class="op" id="2953940">(</span><span class="ident" id="2953941">ip</span><span class="op" id="2953943">[</span><span class="num" id="2953944">15</span><span class="op" id="2953946">]</span><span class="op" id="2953947">)</span><span class="op" id="2953948">)</span>&nbsp;<span class="op" id="2953950">+</span>&nbsp;<span class="string" id="2953952">&#34;.&#34;</span>&nbsp;<span class="op" id="2953956">+</span>&nbsp;<span class="ident" id="2953958">itoa</span><span class="op" id="2953962">(</span><span class="builtintype" id="2953963">int</span><span class="op" id="2953966">(</span><span class="ident" id="2953967">ip</span><span class="op" id="2953969">[</span><span class="num" id="2953970">14</span><span class="op" id="2953972">]</span><span class="op" id="2953973">)</span><span class="op" id="2953974">)</span>&nbsp;<span class="op" id="2953976">+</span>&nbsp;<span class="string" id="2953978">&#34;.&#34;</span>&nbsp;<span class="op" id="2953982">+</span>&nbsp;<span class="ident" id="2953984">itoa</span><span class="op" id="2953988">(</span><span class="builtintype" id="2953989">int</span><span class="op" id="2953992">(</span><span class="ident" id="2953993">ip</span><span class="op" id="2953995">[</span><span class="num" id="2953996">13</span><span class="op" id="2953998">]</span><span class="op" id="2953999">)</span><span class="op" id="2954000">)</span>&nbsp;<span class="op" id="2954002">+</span>&nbsp;<span class="string" id="2954004">&#34;.&#34;</span>&nbsp;<span class="op" id="2954008">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954013">itoa</span><span class="op" id="2954017">(</span><span class="builtintype" id="2954018">int</span><span class="op" id="2954021">(</span><span class="ident" id="2954022">ip</span><span class="op" id="2954024">[</span><span class="num" id="2954025">12</span><span class="op" id="2954027">]</span><span class="op" id="2954028">)</span><span class="op" id="2954029">)</span>&nbsp;<span class="op" id="2954031">+</span>&nbsp;<span class="string" id="2954033">&#34;.in-addr.arpa.&#34;</span><span class="op" id="2954049">,</span>&nbsp;<span class="ident" id="2954051">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954059">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954076">buf</span>&nbsp;<span class="op" id="2954080">:=</span>&nbsp;<span class="builtinfunc" id="2954083">make</span><span class="op" id="2954087">(</span><span class="op" id="2954088">[</span><span class="op" id="2954089">]</span><span class="builtintype" id="2954090">byte</span><span class="op" id="2954094">,</span>&nbsp;<span class="num" id="2954096">0</span><span class="op" id="2954097">,</span>&nbsp;<span class="builtinfunc" id="2954099">len</span><span class="op" id="2954102">(</span><span class="ident" id="2954103">ip</span><span class="op" id="2954105">)</span><span class="op" id="2954106">*</span><span class="num" id="2954107">4</span><span class="op" id="2954108">+</span><span class="builtinfunc" id="2954109">len</span><span class="op" id="2954112">(</span><span class="string" id="2954113">&#34;ip6.arpa.&#34;</span><span class="op" id="2954124">)</span><span class="op" id="2954125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954128">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954166">for</span>&nbsp;<span class="ident" id="2954170">i</span>&nbsp;<span class="op" id="2954172">:=</span>&nbsp;<span class="builtinfunc" id="2954175">len</span><span class="op" id="2954178">(</span><span class="ident" id="2954179">ip</span><span class="op" id="2954181">)</span>&nbsp;<span class="op" id="2954183">-</span>&nbsp;<span class="num" id="2954185">1</span><span class="op" id="2954186">;</span>&nbsp;<span class="ident" id="2954188">i</span>&nbsp;<span class="op" id="2954190">&gt;=</span>&nbsp;<span class="num" id="2954193">0</span><span class="op" id="2954194">;</span>&nbsp;<span class="ident" id="2954196">i</span><span class="op" id="2954197">--</span>&nbsp;<span class="op" id="2954200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954204">v</span>&nbsp;<span class="op" id="2954206">:=</span>&nbsp;<span class="ident" id="2954209">ip</span><span class="op" id="2954211">[</span><span class="ident" id="2954212">i</span><span class="op" id="2954213">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954217">buf</span>&nbsp;<span class="op" id="2954221">=</span>&nbsp;<span class="builtinfunc" id="2954223">append</span><span class="op" id="2954229">(</span><span class="ident" id="2954230">buf</span><span class="op" id="2954233">,</span>&nbsp;<span class="ident" id="2954235">hexDigit</span><span class="op" id="2954243">[</span><span class="ident" id="2954244">v</span><span class="op" id="2954245">&amp;</span><span class="num" id="2954246">0xF</span><span class="op" id="2954249">]</span><span class="op" id="2954250">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954254">buf</span>&nbsp;<span class="op" id="2954258">=</span>&nbsp;<span class="builtinfunc" id="2954260">append</span><span class="op" id="2954266">(</span><span class="ident" id="2954267">buf</span><span class="op" id="2954270">,</span>&nbsp;<span class="string" id="2954272">&#39;.&#39;</span><span class="op" id="2954275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954279">buf</span>&nbsp;<span class="op" id="2954283">=</span>&nbsp;<span class="builtinfunc" id="2954285">append</span><span class="op" id="2954291">(</span><span class="ident" id="2954292">buf</span><span class="op" id="2954295">,</span>&nbsp;<span class="ident" id="2954297">hexDigit</span><span class="op" id="2954305">[</span><span class="ident" id="2954306">v</span><span class="op" id="2954307">&gt;&gt;</span><span class="num" id="2954309">4</span><span class="op" id="2954310">]</span><span class="op" id="2954311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954315">buf</span>&nbsp;<span class="op" id="2954319">=</span>&nbsp;<span class="builtinfunc" id="2954321">append</span><span class="op" id="2954327">(</span><span class="ident" id="2954328">buf</span><span class="op" id="2954331">,</span>&nbsp;<span class="string" id="2954333">&#39;.&#39;</span><span class="op" id="2954336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954342">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954406">buf</span>&nbsp;<span class="op" id="2954410">=</span>&nbsp;<span class="builtinfunc" id="2954412">append</span><span class="op" id="2954418">(</span><span class="ident" id="2954419">buf</span><span class="op" id="2954422">,</span>&nbsp;<span class="string" id="2954424">&#34;ip6.arpa.&#34;</span><span class="op" id="2954435">...</span><span class="op" id="2954438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954441">return</span>&nbsp;<span class="builtintype" id="2954448">string</span><span class="op" id="2954454">(</span><span class="ident" id="2954455">buf</span><span class="op" id="2954458">)</span><span class="op" id="2954459">,</span>&nbsp;<span class="ident" id="2954461">nil</span><br>
<span class="lineno"></span><span class="op" id="2954465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2954468">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="2954508">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2954551">func</span>&nbsp;<span class="ident" id="2954556">answer</span><span class="op" id="2954562">(</span><span class="ident" id="2954563">name</span><span class="op" id="2954567">,</span>&nbsp;<span class="ident" id="2954569">server</span>&nbsp;<span class="builtintype" id="2954576">string</span><span class="op" id="2954582">,</span>&nbsp;<span class="ident" id="2954584">dns</span>&nbsp;<span class="op" id="2954588">*</span><span class="ident" id="2954589">dnsMsg</span><span class="op" id="2954595">,</span>&nbsp;<span class="ident" id="2954597">qtype</span>&nbsp;<span class="builtintype" id="2954603">uint16</span><span class="op" id="2954609">)</span>&nbsp;<span class="op" id="2954611">(</span><span class="ident" id="2954612">cname</span>&nbsp;<span class="builtintype" id="2954618">string</span><span class="op" id="2954624">,</span>&nbsp;<span class="ident" id="2954626">addrs</span>&nbsp;<span class="op" id="2954632">[</span><span class="op" id="2954633">]</span><span class="ident" id="2954634">dnsRR</span><span class="op" id="2954639">,</span>&nbsp;<span class="ident" id="2954641">err</span>&nbsp;<span class="builtintype" id="2954645">error</span><span class="op" id="2954650">)</span>&nbsp;<span class="op" id="2954652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2954655">addrs</span>&nbsp;<span class="op" id="2954661">=</span>&nbsp;<span class="builtinfunc" id="2954663">make</span><span class="op" id="2954667">(</span><span class="op" id="2954668">[</span><span class="op" id="2954669">]</span><span class="ident" id="2954670">dnsRR</span><span class="op" id="2954675">,</span>&nbsp;<span class="num" id="2954677">0</span><span class="op" id="2954678">,</span>&nbsp;<span class="builtinfunc" id="2954680">len</span><span class="op" id="2954683">(</span><span class="ident" id="2954684">dns</span><span class="op" id="2954687">.</span><span class="ident" id="2954688">answer</span><span class="op" id="2954694">)</span><span class="op" id="2954695">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954699">if</span>&nbsp;<span class="ident" id="2954702">dns</span><span class="op" id="2954705">.</span><span class="ident" id="2954706">rcode</span>&nbsp;<span class="op" id="2954712">==</span>&nbsp;<span class="ident" id="2954715">dnsRcodeNameError</span>&nbsp;<span class="op" id="2954733">&amp;&amp;</span>&nbsp;<span class="ident" id="2954736">dns</span><span class="op" id="2954739">.</span><span class="ident" id="2954740">recursion_available</span>&nbsp;<span class="op" id="2954760">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954764">return</span>&nbsp;<span class="string" id="2954771">&#34;&#34;</span><span class="op" id="2954773">,</span>&nbsp;<span class="ident" id="2954775">nil</span><span class="op" id="2954778">,</span>&nbsp;<span class="op" id="2954780">&amp;</span><span class="ident" id="2954781">DNSError</span><span class="op" id="2954789">{</span><span class="ident" id="2954790">Err</span><span class="op" id="2954793">:</span>&nbsp;<span class="ident" id="2954795">noSuchHost</span><span class="op" id="2954805">,</span>&nbsp;<span class="ident" id="2954807">Name</span><span class="op" id="2954811">:</span>&nbsp;<span class="ident" id="2954813">name</span><span class="op" id="2954817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2954820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2954823">if</span>&nbsp;<span class="ident" id="2954826">dns</span><span class="op" id="2954829">.</span><span class="ident" id="2954830">rcode</span>&nbsp;<span class="op" id="2954836">!=</span>&nbsp;<span class="ident" id="2954839">dnsRcodeSuccess</span>&nbsp;<span class="op" id="2954855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954859">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954899">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954945">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2954990">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955031">return</span>&nbsp;<span class="string" id="2955038">&#34;&#34;</span><span class="op" id="2955040">,</span>&nbsp;<span class="ident" id="2955042">nil</span><span class="op" id="2955045">,</span>&nbsp;<span class="op" id="2955047">&amp;</span><span class="ident" id="2955048">DNSError</span><span class="op" id="2955056">{</span><span class="ident" id="2955057">Err</span><span class="op" id="2955060">:</span>&nbsp;<span class="string" id="2955062">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="2955082">,</span>&nbsp;<span class="ident" id="2955084">Name</span><span class="op" id="2955088">:</span>&nbsp;<span class="ident" id="2955090">name</span><span class="op" id="2955094">,</span>&nbsp;<span class="ident" id="2955096">Server</span><span class="op" id="2955102">:</span>&nbsp;<span class="ident" id="2955104">server</span><span class="op" id="2955110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955117">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955140">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955201">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955247">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955302">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="2955349">Cname</span><span class="op" id="2955354">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955357">for</span>&nbsp;<span class="ident" id="2955361">cnameloop</span>&nbsp;<span class="op" id="2955371">:=</span>&nbsp;<span class="num" id="2955374">0</span><span class="op" id="2955375">;</span>&nbsp;<span class="ident" id="2955377">cnameloop</span>&nbsp;<span class="op" id="2955387">&lt;</span>&nbsp;<span class="num" id="2955389">10</span><span class="op" id="2955391">;</span>&nbsp;<span class="ident" id="2955393">cnameloop</span><span class="op" id="2955402">++</span>&nbsp;<span class="op" id="2955405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955409">addrs</span>&nbsp;<span class="op" id="2955415">=</span>&nbsp;<span class="ident" id="2955417">addrs</span><span class="op" id="2955422">[</span><span class="num" id="2955423">0</span><span class="op" id="2955424">:</span><span class="num" id="2955425">0</span><span class="op" id="2955426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955430">for</span>&nbsp;<span class="ident" id="2955434">_</span><span class="op" id="2955435">,</span>&nbsp;<span class="ident" id="2955437">rr</span>&nbsp;<span class="op" id="2955440">:=</span>&nbsp;<span class="keyword" id="2955443">range</span>&nbsp;<span class="ident" id="2955449">dns</span><span class="op" id="2955452">.</span><span class="ident" id="2955453">answer</span>&nbsp;<span class="op" id="2955460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955465">if</span>&nbsp;<span class="ident" id="2955468">_</span><span class="op" id="2955469">,</span>&nbsp;<span class="ident" id="2955471">justHeader</span>&nbsp;<span class="op" id="2955482">:=</span>&nbsp;<span class="ident" id="2955485">rr</span><span class="op" id="2955487">.</span><span class="op" id="2955488">(</span><span class="op" id="2955489">*</span><span class="ident" id="2955490">dnsRR_Header</span><span class="op" id="2955502">)</span><span class="op" id="2955503">;</span>&nbsp;<span class="ident" id="2955505">justHeader</span>&nbsp;<span class="op" id="2955516">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955522">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955560">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955602">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955637">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955668">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955685">h</span>&nbsp;<span class="op" id="2955687">:=</span>&nbsp;<span class="ident" id="2955690">rr</span><span class="op" id="2955692">.</span><span class="ident" id="2955693">Header</span><span class="op" id="2955699">(</span><span class="op" id="2955700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955705">if</span>&nbsp;<span class="ident" id="2955708">h</span><span class="op" id="2955709">.</span><span class="ident" id="2955710">Class</span>&nbsp;<span class="op" id="2955716">==</span>&nbsp;<span class="ident" id="2955719">dnsClassINET</span>&nbsp;<span class="op" id="2955732">&amp;&amp;</span>&nbsp;<span class="ident" id="2955735">h</span><span class="op" id="2955736">.</span><span class="ident" id="2955737">Name</span>&nbsp;<span class="op" id="2955742">==</span>&nbsp;<span class="ident" id="2955745">name</span>&nbsp;<span class="op" id="2955750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955756">switch</span>&nbsp;<span class="ident" id="2955763">h</span><span class="op" id="2955764">.</span><span class="ident" id="2955765">Rrtype</span>&nbsp;<span class="op" id="2955772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955778">case</span>&nbsp;<span class="ident" id="2955783">qtype</span><span class="op" id="2955788">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955795">addrs</span>&nbsp;<span class="op" id="2955801">=</span>&nbsp;<span class="builtinfunc" id="2955803">append</span><span class="op" id="2955809">(</span><span class="ident" id="2955810">addrs</span><span class="op" id="2955815">,</span>&nbsp;<span class="ident" id="2955817">rr</span><span class="op" id="2955819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955825">case</span>&nbsp;<span class="ident" id="2955830">dnsTypeCNAME</span><span class="op" id="2955842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2955849">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2955875">name</span>&nbsp;<span class="op" id="2955880">=</span>&nbsp;<span class="ident" id="2955882">rr</span><span class="op" id="2955884">.</span><span class="op" id="2955885">(</span><span class="op" id="2955886">*</span><span class="ident" id="2955887">dnsRR_CNAME</span><span class="op" id="2955898">)</span><span class="op" id="2955899">.</span><span class="ident" id="2955900">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955911">continue</span>&nbsp;<span class="ident" id="2955920">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2955939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955943">if</span>&nbsp;<span class="builtinfunc" id="2955946">len</span><span class="op" id="2955949">(</span><span class="ident" id="2955950">addrs</span><span class="op" id="2955955">)</span>&nbsp;<span class="op" id="2955957">==</span>&nbsp;<span class="num" id="2955960">0</span>&nbsp;<span class="op" id="2955962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2955967">return</span>&nbsp;<span class="string" id="2955974">&#34;&#34;</span><span class="op" id="2955976">,</span>&nbsp;<span class="ident" id="2955978">nil</span><span class="op" id="2955981">,</span>&nbsp;<span class="op" id="2955983">&amp;</span><span class="ident" id="2955984">DNSError</span><span class="op" id="2955992">{</span><span class="ident" id="2955993">Err</span><span class="op" id="2955996">:</span>&nbsp;<span class="ident" id="2955998">noSuchHost</span><span class="op" id="2956008">,</span>&nbsp;<span class="ident" id="2956010">Name</span><span class="op" id="2956014">:</span>&nbsp;<span class="ident" id="2956016">name</span><span class="op" id="2956020">,</span>&nbsp;<span class="ident" id="2956022">Server</span><span class="op" id="2956028">:</span>&nbsp;<span class="ident" id="2956030">server</span><span class="op" id="2956036">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956044">return</span>&nbsp;<span class="ident" id="2956051">name</span><span class="op" id="2956055">,</span>&nbsp;<span class="ident" id="2956057">addrs</span><span class="op" id="2956062">,</span>&nbsp;<span class="ident" id="2956064">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956073">return</span>&nbsp;<span class="string" id="2956080">&#34;&#34;</span><span class="op" id="2956082">,</span>&nbsp;<span class="ident" id="2956084">nil</span><span class="op" id="2956087">,</span>&nbsp;<span class="op" id="2956089">&amp;</span><span class="ident" id="2956090">DNSError</span><span class="op" id="2956098">{</span><span class="ident" id="2956099">Err</span><span class="op" id="2956102">:</span>&nbsp;<span class="string" id="2956104">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="2956124">,</span>&nbsp;<span class="ident" id="2956126">Name</span><span class="op" id="2956130">:</span>&nbsp;<span class="ident" id="2956132">name</span><span class="op" id="2956136">,</span>&nbsp;<span class="ident" id="2956138">Server</span><span class="op" id="2956144">:</span>&nbsp;<span class="ident" id="2956146">server</span><span class="op" id="2956152">}</span><br>
<span class="lineno">115</span><span class="op" id="2956154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2956157">func</span>&nbsp;<span class="ident" id="2956162">isDomainName</span><span class="op" id="2956174">(</span><span class="ident" id="2956175">s</span>&nbsp;<span class="builtintype" id="2956177">string</span><span class="op" id="2956183">)</span>&nbsp;<span class="builtintype" id="2956185">bool</span>&nbsp;<span class="op" id="2956190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956193">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956221">if</span>&nbsp;<span class="builtinfunc" id="2956224">len</span><span class="op" id="2956227">(</span><span class="ident" id="2956228">s</span><span class="op" id="2956229">)</span>&nbsp;<span class="op" id="2956231">==</span>&nbsp;<span class="num" id="2956234">0</span>&nbsp;<span class="op" id="2956236">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956240">return</span>&nbsp;<span class="builtintype" id="2956247">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956257">if</span>&nbsp;<span class="builtinfunc" id="2956260">len</span><span class="op" id="2956263">(</span><span class="ident" id="2956264">s</span><span class="op" id="2956265">)</span>&nbsp;<span class="op" id="2956267">&gt;</span>&nbsp;<span class="num" id="2956269">255</span>&nbsp;<span class="op" id="2956273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956277">return</span>&nbsp;<span class="builtintype" id="2956284">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956291">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956295">last</span>&nbsp;<span class="op" id="2956300">:=</span>&nbsp;<span class="builtintype" id="2956303">byte</span><span class="op" id="2956307">(</span><span class="string" id="2956308">&#39;.&#39;</span><span class="op" id="2956311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956314">ok</span>&nbsp;<span class="op" id="2956317">:=</span>&nbsp;<span class="builtintype" id="2956320">false</span>&nbsp;<span class="comment" id="2956326">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956359">partlen</span>&nbsp;<span class="op" id="2956367">:=</span>&nbsp;<span class="num" id="2956370">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956373">for</span>&nbsp;<span class="ident" id="2956377">i</span>&nbsp;<span class="op" id="2956379">:=</span>&nbsp;<span class="num" id="2956382">0</span><span class="op" id="2956383">;</span>&nbsp;<span class="ident" id="2956385">i</span>&nbsp;<span class="op" id="2956387">&lt;</span>&nbsp;<span class="builtinfunc" id="2956389">len</span><span class="op" id="2956392">(</span><span class="ident" id="2956393">s</span><span class="op" id="2956394">)</span><span class="op" id="2956395">;</span>&nbsp;<span class="ident" id="2956397">i</span><span class="op" id="2956398">++</span>&nbsp;<span class="op" id="2956401">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956405">c</span>&nbsp;<span class="op" id="2956407">:=</span>&nbsp;<span class="ident" id="2956410">s</span><span class="op" id="2956411">[</span><span class="ident" id="2956412">i</span><span class="op" id="2956413">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956417">switch</span>&nbsp;<span class="op" id="2956424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956428">default</span><span class="op" id="2956435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956440">return</span>&nbsp;<span class="builtintype" id="2956447">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956455">case</span>&nbsp;<span class="string" id="2956460">&#39;a&#39;</span>&nbsp;<span class="op" id="2956464">&lt;=</span>&nbsp;<span class="ident" id="2956467">c</span>&nbsp;<span class="op" id="2956469">&amp;&amp;</span>&nbsp;<span class="ident" id="2956472">c</span>&nbsp;<span class="op" id="2956474">&lt;=</span>&nbsp;<span class="string" id="2956477">&#39;z&#39;</span>&nbsp;<span class="op" id="2956481">||</span>&nbsp;<span class="string" id="2956484">&#39;A&#39;</span>&nbsp;<span class="op" id="2956488">&lt;=</span>&nbsp;<span class="ident" id="2956491">c</span>&nbsp;<span class="op" id="2956493">&amp;&amp;</span>&nbsp;<span class="ident" id="2956496">c</span>&nbsp;<span class="op" id="2956498">&lt;=</span>&nbsp;<span class="string" id="2956501">&#39;Z&#39;</span>&nbsp;<span class="op" id="2956505">||</span>&nbsp;<span class="ident" id="2956508">c</span>&nbsp;<span class="op" id="2956510">==</span>&nbsp;<span class="string" id="2956513">&#39;_&#39;</span><span class="op" id="2956516">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956521">ok</span>&nbsp;<span class="op" id="2956524">=</span>&nbsp;<span class="builtintype" id="2956526">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956534">partlen</span><span class="op" id="2956541">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956546">case</span>&nbsp;<span class="string" id="2956551">&#39;0&#39;</span>&nbsp;<span class="op" id="2956555">&lt;=</span>&nbsp;<span class="ident" id="2956558">c</span>&nbsp;<span class="op" id="2956560">&amp;&amp;</span>&nbsp;<span class="ident" id="2956563">c</span>&nbsp;<span class="op" id="2956565">&lt;=</span>&nbsp;<span class="string" id="2956568">&#39;9&#39;</span><span class="op" id="2956571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956576">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956587">partlen</span><span class="op" id="2956594">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956599">case</span>&nbsp;<span class="ident" id="2956604">c</span>&nbsp;<span class="op" id="2956606">==</span>&nbsp;<span class="string" id="2956609">&#39;-&#39;</span><span class="op" id="2956612">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956617">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956655">if</span>&nbsp;<span class="ident" id="2956658">last</span>&nbsp;<span class="op" id="2956663">==</span>&nbsp;<span class="string" id="2956666">&#39;.&#39;</span>&nbsp;<span class="op" id="2956670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956676">return</span>&nbsp;<span class="builtintype" id="2956683">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956692">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956697">partlen</span><span class="op" id="2956704">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956709">case</span>&nbsp;<span class="ident" id="2956714">c</span>&nbsp;<span class="op" id="2956716">==</span>&nbsp;<span class="string" id="2956719">&#39;.&#39;</span><span class="op" id="2956722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2956727">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956770">if</span>&nbsp;<span class="ident" id="2956773">last</span>&nbsp;<span class="op" id="2956778">==</span>&nbsp;<span class="string" id="2956781">&#39;.&#39;</span>&nbsp;<span class="op" id="2956785">||</span>&nbsp;<span class="ident" id="2956788">last</span>&nbsp;<span class="op" id="2956793">==</span>&nbsp;<span class="string" id="2956796">&#39;-&#39;</span>&nbsp;<span class="op" id="2956800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956806">return</span>&nbsp;<span class="builtintype" id="2956813">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956827">if</span>&nbsp;<span class="ident" id="2956830">partlen</span>&nbsp;<span class="op" id="2956838">&gt;</span>&nbsp;<span class="num" id="2956840">63</span>&nbsp;<span class="op" id="2956843">||</span>&nbsp;<span class="ident" id="2956846">partlen</span>&nbsp;<span class="op" id="2956854">==</span>&nbsp;<span class="num" id="2956857">0</span>&nbsp;<span class="op" id="2956859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956865">return</span>&nbsp;<span class="builtintype" id="2956872">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956886">partlen</span>&nbsp;<span class="op" id="2956894">=</span>&nbsp;<span class="num" id="2956896">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2956904">last</span>&nbsp;<span class="op" id="2956909">=</span>&nbsp;<span class="ident" id="2956911">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956917">if</span>&nbsp;<span class="ident" id="2956920">last</span>&nbsp;<span class="op" id="2956925">==</span>&nbsp;<span class="string" id="2956928">&#39;-&#39;</span>&nbsp;<span class="op" id="2956932">||</span>&nbsp;<span class="ident" id="2956935">partlen</span>&nbsp;<span class="op" id="2956943">&gt;</span>&nbsp;<span class="num" id="2956945">63</span>&nbsp;<span class="op" id="2956948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956952">return</span>&nbsp;<span class="builtintype" id="2956959">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2956966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2956970">return</span>&nbsp;<span class="ident" id="2956977">ok</span><br>
<span class="lineno"></span><span class="op" id="2956980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="2956983">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="2957029">type</span>&nbsp;<span class="ident" id="2957034">SRV</span>&nbsp;<span class="keyword" id="2957038">struct</span>&nbsp;<span class="op" id="2957045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957048">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2957057">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957065">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2957074">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957082">Priority</span>&nbsp;<span class="builtintype" id="2957091">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957099">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2957108">uint16</span><br>
<span class="lineno"></span><span class="op" id="2957115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2957118">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="2957190">type</span>&nbsp;<span class="ident" id="2957195">byPriorityWeight</span>&nbsp;<span class="op" id="2957212">[</span><span class="op" id="2957213">]</span><span class="op" id="2957214">*</span><span class="ident" id="2957215">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="2957220">func</span>&nbsp;<span class="op" id="2957225">(</span><span class="ident" id="2957226">s</span>&nbsp;<span class="ident" id="2957228">byPriorityWeight</span><span class="op" id="2957244">)</span>&nbsp;<span class="ident" id="2957246">Len</span><span class="op" id="2957249">(</span><span class="op" id="2957250">)</span>&nbsp;<span class="builtintype" id="2957252">int</span>&nbsp;<span class="op" id="2957256">{</span>&nbsp;<span class="keyword" id="2957258">return</span>&nbsp;<span class="builtinfunc" id="2957265">len</span><span class="op" id="2957268">(</span><span class="ident" id="2957269">s</span><span class="op" id="2957270">)</span>&nbsp;<span class="op" id="2957272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2957275">func</span>&nbsp;<span class="op" id="2957280">(</span><span class="ident" id="2957281">s</span>&nbsp;<span class="ident" id="2957283">byPriorityWeight</span><span class="op" id="2957299">)</span>&nbsp;<span class="ident" id="2957301">Swap</span><span class="op" id="2957305">(</span><span class="ident" id="2957306">i</span><span class="op" id="2957307">,</span>&nbsp;<span class="ident" id="2957309">j</span>&nbsp;<span class="builtintype" id="2957311">int</span><span class="op" id="2957314">)</span>&nbsp;<span class="op" id="2957316">{</span>&nbsp;<span class="ident" id="2957318">s</span><span class="op" id="2957319">[</span><span class="ident" id="2957320">i</span><span class="op" id="2957321">]</span><span class="op" id="2957322">,</span>&nbsp;<span class="ident" id="2957324">s</span><span class="op" id="2957325">[</span><span class="ident" id="2957326">j</span><span class="op" id="2957327">]</span>&nbsp;<span class="op" id="2957329">=</span>&nbsp;<span class="ident" id="2957331">s</span><span class="op" id="2957332">[</span><span class="ident" id="2957333">j</span><span class="op" id="2957334">]</span><span class="op" id="2957335">,</span>&nbsp;<span class="ident" id="2957337">s</span><span class="op" id="2957338">[</span><span class="ident" id="2957339">i</span><span class="op" id="2957340">]</span>&nbsp;<span class="op" id="2957342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="2957345">func</span>&nbsp;<span class="op" id="2957350">(</span><span class="ident" id="2957351">s</span>&nbsp;<span class="ident" id="2957353">byPriorityWeight</span><span class="op" id="2957369">)</span>&nbsp;<span class="ident" id="2957371">Less</span><span class="op" id="2957375">(</span><span class="ident" id="2957376">i</span><span class="op" id="2957377">,</span>&nbsp;<span class="ident" id="2957379">j</span>&nbsp;<span class="builtintype" id="2957381">int</span><span class="op" id="2957384">)</span>&nbsp;<span class="builtintype" id="2957386">bool</span>&nbsp;<span class="op" id="2957391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957394">return</span>&nbsp;<span class="ident" id="2957401">s</span><span class="op" id="2957402">[</span><span class="ident" id="2957403">i</span><span class="op" id="2957404">]</span><span class="op" id="2957405">.</span><span class="ident" id="2957406">Priority</span>&nbsp;<span class="op" id="2957415">&lt;</span>&nbsp;<span class="ident" id="2957417">s</span><span class="op" id="2957418">[</span><span class="ident" id="2957419">j</span><span class="op" id="2957420">]</span><span class="op" id="2957421">.</span><span class="ident" id="2957422">Priority</span>&nbsp;<span class="op" id="2957431">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957436">(</span><span class="ident" id="2957437">s</span><span class="op" id="2957438">[</span><span class="ident" id="2957439">i</span><span class="op" id="2957440">]</span><span class="op" id="2957441">.</span><span class="ident" id="2957442">Priority</span>&nbsp;<span class="op" id="2957451">==</span>&nbsp;<span class="ident" id="2957454">s</span><span class="op" id="2957455">[</span><span class="ident" id="2957456">j</span><span class="op" id="2957457">]</span><span class="op" id="2957458">.</span><span class="ident" id="2957459">Priority</span>&nbsp;<span class="op" id="2957468">&amp;&amp;</span>&nbsp;<span class="ident" id="2957471">s</span><span class="op" id="2957472">[</span><span class="ident" id="2957473">i</span><span class="op" id="2957474">]</span><span class="op" id="2957475">.</span><span class="ident" id="2957476">Weight</span>&nbsp;<span class="op" id="2957483">&lt;</span>&nbsp;<span class="ident" id="2957485">s</span><span class="op" id="2957486">[</span><span class="ident" id="2957487">j</span><span class="op" id="2957488">]</span><span class="op" id="2957489">.</span><span class="ident" id="2957490">Weight</span><span class="op" id="2957496">)</span><br>
<span class="lineno"></span><span class="op" id="2957498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="2957501">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="2957571">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="2957597">func</span>&nbsp;<span class="op" id="2957602">(</span><span class="ident" id="2957603">addrs</span>&nbsp;<span class="ident" id="2957609">byPriorityWeight</span><span class="op" id="2957625">)</span>&nbsp;<span class="ident" id="2957627">shuffleByWeight</span><span class="op" id="2957642">(</span><span class="op" id="2957643">)</span>&nbsp;<span class="op" id="2957645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957648">sum</span>&nbsp;<span class="op" id="2957652">:=</span>&nbsp;<span class="num" id="2957655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957658">for</span>&nbsp;<span class="ident" id="2957662">_</span><span class="op" id="2957663">,</span>&nbsp;<span class="ident" id="2957665">addr</span>&nbsp;<span class="op" id="2957670">:=</span>&nbsp;<span class="keyword" id="2957673">range</span>&nbsp;<span class="ident" id="2957679">addrs</span>&nbsp;<span class="op" id="2957685">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957689">sum</span>&nbsp;<span class="op" id="2957693">+=</span>&nbsp;<span class="builtintype" id="2957696">int</span><span class="op" id="2957699">(</span><span class="ident" id="2957700">addr</span><span class="op" id="2957704">.</span><span class="ident" id="2957705">Weight</span><span class="op" id="2957711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957714">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957717">for</span>&nbsp;<span class="ident" id="2957721">sum</span>&nbsp;<span class="op" id="2957725">&gt;</span>&nbsp;<span class="num" id="2957727">0</span>&nbsp;<span class="op" id="2957729">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2957732">len</span><span class="op" id="2957735">(</span><span class="ident" id="2957736">addrs</span><span class="op" id="2957741">)</span>&nbsp;<span class="op" id="2957743">&gt;</span>&nbsp;<span class="num" id="2957745">1</span>&nbsp;<span class="op" id="2957747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957751">s</span>&nbsp;<span class="op" id="2957753">:=</span>&nbsp;<span class="num" id="2957756">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957760">n</span>&nbsp;<span class="op" id="2957762">:=</span>&nbsp;<span class="ident" id="2957765">rand</span><span class="op" id="2957769">.</span><span class="ident" id="2957770">Intn</span><span class="op" id="2957774">(</span><span class="ident" id="2957775">sum</span><span class="op" id="2957778">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957782">for</span>&nbsp;<span class="ident" id="2957786">i</span>&nbsp;<span class="op" id="2957788">:=</span>&nbsp;<span class="keyword" id="2957791">range</span>&nbsp;<span class="ident" id="2957797">addrs</span>&nbsp;<span class="op" id="2957803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957808">s</span>&nbsp;<span class="op" id="2957810">+=</span>&nbsp;<span class="builtintype" id="2957813">int</span><span class="op" id="2957816">(</span><span class="ident" id="2957817">addrs</span><span class="op" id="2957822">[</span><span class="ident" id="2957823">i</span><span class="op" id="2957824">]</span><span class="op" id="2957825">.</span><span class="ident" id="2957826">Weight</span><span class="op" id="2957832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957837">if</span>&nbsp;<span class="ident" id="2957840">s</span>&nbsp;<span class="op" id="2957842">&gt;</span>&nbsp;<span class="ident" id="2957844">n</span>&nbsp;<span class="op" id="2957846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957852">if</span>&nbsp;<span class="ident" id="2957855">i</span>&nbsp;<span class="op" id="2957857">&gt;</span>&nbsp;<span class="num" id="2957859">0</span>&nbsp;<span class="op" id="2957861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957868">addrs</span><span class="op" id="2957873">[</span><span class="num" id="2957874">0</span><span class="op" id="2957875">]</span><span class="op" id="2957876">,</span>&nbsp;<span class="ident" id="2957878">addrs</span><span class="op" id="2957883">[</span><span class="ident" id="2957884">i</span><span class="op" id="2957885">]</span>&nbsp;<span class="op" id="2957887">=</span>&nbsp;<span class="ident" id="2957889">addrs</span><span class="op" id="2957894">[</span><span class="ident" id="2957895">i</span><span class="op" id="2957896">]</span><span class="op" id="2957897">,</span>&nbsp;<span class="ident" id="2957899">addrs</span><span class="op" id="2957904">[</span><span class="num" id="2957905">0</span><span class="op" id="2957906">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2957918">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957935">sum</span>&nbsp;<span class="op" id="2957939">-=</span>&nbsp;<span class="builtintype" id="2957942">int</span><span class="op" id="2957945">(</span><span class="ident" id="2957946">addrs</span><span class="op" id="2957951">[</span><span class="num" id="2957952">0</span><span class="op" id="2957953">]</span><span class="op" id="2957954">.</span><span class="ident" id="2957955">Weight</span><span class="op" id="2957961">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2957965">addrs</span>&nbsp;<span class="op" id="2957971">=</span>&nbsp;<span class="ident" id="2957973">addrs</span><span class="op" id="2957978">[</span><span class="num" id="2957979">1</span><span class="op" id="2957980">:</span><span class="op" id="2957981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2957984">}</span><br>
<span class="lineno"></span><span class="op" id="2957986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2957989">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="2958044">func</span>&nbsp;<span class="op" id="2958049">(</span><span class="ident" id="2958050">addrs</span>&nbsp;<span class="ident" id="2958056">byPriorityWeight</span><span class="op" id="2958072">)</span>&nbsp;<span class="ident" id="2958074">sort</span><span class="op" id="2958078">(</span><span class="op" id="2958079">)</span>&nbsp;<span class="op" id="2958081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958084">sort</span><span class="op" id="2958088">.</span><span class="ident" id="2958089">Sort</span><span class="op" id="2958093">(</span><span class="ident" id="2958094">addrs</span><span class="op" id="2958099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958102">i</span>&nbsp;<span class="op" id="2958104">:=</span>&nbsp;<span class="num" id="2958107">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958110">for</span>&nbsp;<span class="ident" id="2958114">j</span>&nbsp;<span class="op" id="2958116">:=</span>&nbsp;<span class="num" id="2958119">1</span><span class="op" id="2958120">;</span>&nbsp;<span class="ident" id="2958122">j</span>&nbsp;<span class="op" id="2958124">&lt;</span>&nbsp;<span class="builtinfunc" id="2958126">len</span><span class="op" id="2958129">(</span><span class="ident" id="2958130">addrs</span><span class="op" id="2958135">)</span><span class="op" id="2958136">;</span>&nbsp;<span class="ident" id="2958138">j</span><span class="op" id="2958139">++</span>&nbsp;<span class="op" id="2958142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958146">if</span>&nbsp;<span class="ident" id="2958149">addrs</span><span class="op" id="2958154">[</span><span class="ident" id="2958155">i</span><span class="op" id="2958156">]</span><span class="op" id="2958157">.</span><span class="ident" id="2958158">Priority</span>&nbsp;<span class="op" id="2958167">!=</span>&nbsp;<span class="ident" id="2958170">addrs</span><span class="op" id="2958175">[</span><span class="ident" id="2958176">j</span><span class="op" id="2958177">]</span><span class="op" id="2958178">.</span><span class="ident" id="2958179">Priority</span>&nbsp;<span class="op" id="2958188">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958193">addrs</span><span class="op" id="2958198">[</span><span class="ident" id="2958199">i</span><span class="op" id="2958200">:</span><span class="ident" id="2958201">j</span><span class="op" id="2958202">]</span><span class="op" id="2958203">.</span><span class="ident" id="2958204">shuffleByWeight</span><span class="op" id="2958219">(</span><span class="op" id="2958220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958225">i</span>&nbsp;<span class="op" id="2958227">=</span>&nbsp;<span class="ident" id="2958229">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958239">addrs</span><span class="op" id="2958244">[</span><span class="ident" id="2958245">i</span><span class="op" id="2958246">:</span><span class="op" id="2958247">]</span><span class="op" id="2958248">.</span><span class="ident" id="2958249">shuffleByWeight</span><span class="op" id="2958264">(</span><span class="op" id="2958265">)</span><br>
<span class="lineno">220</span><span class="op" id="2958267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2958270">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="2958314">type</span>&nbsp;<span class="ident" id="2958319">MX</span>&nbsp;<span class="keyword" id="2958322">struct</span>&nbsp;<span class="op" id="2958329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958332">Host</span>&nbsp;<span class="builtintype" id="2958337">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958345">Pref</span>&nbsp;<span class="builtintype" id="2958350">uint16</span><br>
<span class="lineno"></span><span class="op" id="2958357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2958360">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="2958429">type</span>&nbsp;<span class="ident" id="2958434">byPref</span>&nbsp;<span class="op" id="2958441">[</span><span class="op" id="2958442">]</span><span class="op" id="2958443">*</span><span class="ident" id="2958444">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="2958448">func</span>&nbsp;<span class="op" id="2958453">(</span><span class="ident" id="2958454">s</span>&nbsp;<span class="ident" id="2958456">byPref</span><span class="op" id="2958462">)</span>&nbsp;<span class="ident" id="2958464">Len</span><span class="op" id="2958467">(</span><span class="op" id="2958468">)</span>&nbsp;<span class="builtintype" id="2958470">int</span>&nbsp;<span class="op" id="2958474">{</span>&nbsp;<span class="keyword" id="2958476">return</span>&nbsp;<span class="builtinfunc" id="2958483">len</span><span class="op" id="2958486">(</span><span class="ident" id="2958487">s</span><span class="op" id="2958488">)</span>&nbsp;<span class="op" id="2958490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2958493">func</span>&nbsp;<span class="op" id="2958498">(</span><span class="ident" id="2958499">s</span>&nbsp;<span class="ident" id="2958501">byPref</span><span class="op" id="2958507">)</span>&nbsp;<span class="ident" id="2958509">Less</span><span class="op" id="2958513">(</span><span class="ident" id="2958514">i</span><span class="op" id="2958515">,</span>&nbsp;<span class="ident" id="2958517">j</span>&nbsp;<span class="builtintype" id="2958519">int</span><span class="op" id="2958522">)</span>&nbsp;<span class="builtintype" id="2958524">bool</span>&nbsp;<span class="op" id="2958529">{</span>&nbsp;<span class="keyword" id="2958531">return</span>&nbsp;<span class="ident" id="2958538">s</span><span class="op" id="2958539">[</span><span class="ident" id="2958540">i</span><span class="op" id="2958541">]</span><span class="op" id="2958542">.</span><span class="ident" id="2958543">Pref</span>&nbsp;<span class="op" id="2958548">&lt;</span>&nbsp;<span class="ident" id="2958550">s</span><span class="op" id="2958551">[</span><span class="ident" id="2958552">j</span><span class="op" id="2958553">]</span><span class="op" id="2958554">.</span><span class="ident" id="2958555">Pref</span>&nbsp;<span class="op" id="2958560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2958563">func</span>&nbsp;<span class="op" id="2958568">(</span><span class="ident" id="2958569">s</span>&nbsp;<span class="ident" id="2958571">byPref</span><span class="op" id="2958577">)</span>&nbsp;<span class="ident" id="2958579">Swap</span><span class="op" id="2958583">(</span><span class="ident" id="2958584">i</span><span class="op" id="2958585">,</span>&nbsp;<span class="ident" id="2958587">j</span>&nbsp;<span class="builtintype" id="2958589">int</span><span class="op" id="2958592">)</span>&nbsp;<span class="op" id="2958594">{</span>&nbsp;<span class="ident" id="2958596">s</span><span class="op" id="2958597">[</span><span class="ident" id="2958598">i</span><span class="op" id="2958599">]</span><span class="op" id="2958600">,</span>&nbsp;<span class="ident" id="2958602">s</span><span class="op" id="2958603">[</span><span class="ident" id="2958604">j</span><span class="op" id="2958605">]</span>&nbsp;<span class="op" id="2958607">=</span>&nbsp;<span class="ident" id="2958609">s</span><span class="op" id="2958610">[</span><span class="ident" id="2958611">j</span><span class="op" id="2958612">]</span><span class="op" id="2958613">,</span>&nbsp;<span class="ident" id="2958615">s</span><span class="op" id="2958616">[</span><span class="ident" id="2958617">i</span><span class="op" id="2958618">]</span>&nbsp;<span class="op" id="2958620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2958623">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="2958677">func</span>&nbsp;<span class="op" id="2958682">(</span><span class="ident" id="2958683">s</span>&nbsp;<span class="ident" id="2958685">byPref</span><span class="op" id="2958691">)</span>&nbsp;<span class="ident" id="2958693">sort</span><span class="op" id="2958697">(</span><span class="op" id="2958698">)</span>&nbsp;<span class="op" id="2958700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2958703">for</span>&nbsp;<span class="ident" id="2958707">i</span>&nbsp;<span class="op" id="2958709">:=</span>&nbsp;<span class="keyword" id="2958712">range</span>&nbsp;<span class="ident" id="2958718">s</span>&nbsp;<span class="op" id="2958720">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958724">j</span>&nbsp;<span class="op" id="2958726">:=</span>&nbsp;<span class="ident" id="2958729">rand</span><span class="op" id="2958733">.</span><span class="ident" id="2958734">Intn</span><span class="op" id="2958738">(</span><span class="ident" id="2958739">i</span>&nbsp;<span class="op" id="2958741">+</span>&nbsp;<span class="num" id="2958743">1</span><span class="op" id="2958744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958748">s</span><span class="op" id="2958749">[</span><span class="ident" id="2958750">i</span><span class="op" id="2958751">]</span><span class="op" id="2958752">,</span>&nbsp;<span class="ident" id="2958754">s</span><span class="op" id="2958755">[</span><span class="ident" id="2958756">j</span><span class="op" id="2958757">]</span>&nbsp;<span class="op" id="2958759">=</span>&nbsp;<span class="ident" id="2958761">s</span><span class="op" id="2958762">[</span><span class="ident" id="2958763">j</span><span class="op" id="2958764">]</span><span class="op" id="2958765">,</span>&nbsp;<span class="ident" id="2958767">s</span><span class="op" id="2958768">[</span><span class="ident" id="2958769">i</span><span class="op" id="2958770">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2958773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958776">sort</span><span class="op" id="2958780">.</span><span class="ident" id="2958781">Sort</span><span class="op" id="2958785">(</span><span class="ident" id="2958786">s</span><span class="op" id="2958787">)</span><br>
<span class="lineno"></span><span class="op" id="2958789">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="2958792">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="2958836">type</span>&nbsp;<span class="ident" id="2958841">NS</span>&nbsp;<span class="keyword" id="2958844">struct</span>&nbsp;<span class="op" id="2958851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2958854">Host</span>&nbsp;<span class="builtintype" id="2958859">string</span><br>
<span class="lineno"></span><span class="op" id="2958866">}</span>
</div>
</body>
</html>
