<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/internal</h2>
<ul>
<li><a href="/gostd/net/http/internal/chunked.go.html">chunked.go</a></li>
<li><a href="/gostd/net/http/internal/chunked_test.go.html" class="current">chunked_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7832641">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7832696">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7832750">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7832801">package</span>&nbsp;<span class="ident" id="7832809">internal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7832819">import</span>&nbsp;<span class="op" id="7832826">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832829">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832838">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832847">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832854">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832860">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832873">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7832884">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7832894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7832897">func</span>&nbsp;<span class="ident" id="7832902">TestChunk</span><span class="op" id="7832911">(</span><span class="ident" id="7832912">t</span>&nbsp;<span class="op" id="7832914">*</span><span class="ident" id="7832915"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7832922">.</span><span class="ident" id="7832923"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7832924">)</span>&nbsp;<span class="op" id="7832926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7832929">var</span>&nbsp;<span class="ident" id="7832933">b</span>&nbsp;<span class="ident" id="7832935"><a href="/gostd/net/http/internal/chunked_test.go.html#7832838">bytes</a></span><span class="op" id="7832940">.</span><span class="ident" id="7832941"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7832950">w</span>&nbsp;<span class="op" id="7832952">:=</span>&nbsp;<span class="ident" id="7832955"><a href="/gostd/net/http/internal/chunked.go.html#4775998">NewChunkedWriter</a></span><span class="op" id="7832971">(</span><span class="op" id="7832972">&amp;</span><span class="ident" id="7832973"><a href="/gostd/net/http/internal/chunked_test.go.html#7832933">b</a></span><span class="op" id="7832974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7832977">const</span>&nbsp;<span class="ident" id="7832983">chunk1</span>&nbsp;<span class="op" id="7832990">=</span>&nbsp;<span class="string" id="7832992">&#34;hello,&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833003">const</span>&nbsp;<span class="ident" id="7833009">chunk2</span>&nbsp;<span class="op" id="7833016">=</span>&nbsp;<span class="string" id="7833018">&#34;world!&nbsp;0123456789abcdef&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833045"><a href="/gostd/net/http/internal/chunked_test.go.html#7832950">w</a></span><span class="op" id="7833046">.</span><span class="ident" id="7833047"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7833052">(</span><span class="op" id="7833053">[</span><span class="op" id="7833054">]</span><span class="builtintype" id="7833055">byte</span><span class="op" id="7833059">(</span><span class="ident" id="7833060"><a href="/gostd/net/http/internal/chunked_test.go.html#7832983">chunk1</a></span><span class="op" id="7833066">)</span><span class="op" id="7833067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833070"><a href="/gostd/net/http/internal/chunked_test.go.html#7832950">w</a></span><span class="op" id="7833071">.</span><span class="ident" id="7833072"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7833077">(</span><span class="op" id="7833078">[</span><span class="op" id="7833079">]</span><span class="builtintype" id="7833080">byte</span><span class="op" id="7833084">(</span><span class="ident" id="7833085"><a href="/gostd/net/http/internal/chunked_test.go.html#7833009">chunk2</a></span><span class="op" id="7833091">)</span><span class="op" id="7833092">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833095"><a href="/gostd/net/http/internal/chunked_test.go.html#7832950">w</a></span><span class="op" id="7833096">.</span><span class="ident" id="7833097"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7833102">(</span><span class="op" id="7833103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833107">if</span>&nbsp;<span class="ident" id="7833110">g</span><span class="op" id="7833111">,</span>&nbsp;<span class="ident" id="7833113">e</span>&nbsp;<span class="op" id="7833115">:=</span>&nbsp;<span class="ident" id="7833118"><a href="/gostd/net/http/internal/chunked_test.go.html#7832933">b</a></span><span class="op" id="7833119">.</span><span class="ident" id="7833120"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="7833126">(</span><span class="op" id="7833127">)</span><span class="op" id="7833128">,</span>&nbsp;<span class="string" id="7833130">&#34;7\r\nhello,&nbsp;\r\n17\r\nworld!&nbsp;0123456789abcdef\r\n0\r\n&#34;</span><span class="op" id="7833186">;</span>&nbsp;<span class="ident" id="7833188"><a href="/gostd/net/http/internal/chunked_test.go.html#7833110">g</a></span>&nbsp;<span class="op" id="7833190">!=</span>&nbsp;<span class="ident" id="7833193"><a href="/gostd/net/http/internal/chunked_test.go.html#7833113">e</a></span>&nbsp;<span class="op" id="7833195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833199"><a href="/gostd/net/http/internal/chunked_test.go.html#7832912">t</a></span><span class="op" id="7833200">.</span><span class="ident" id="7833201"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7833207">(</span><span class="string" id="7833208">&#34;chunk&nbsp;writer&nbsp;wrote&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7833240">,</span>&nbsp;<span class="ident" id="7833242"><a href="/gostd/net/http/internal/chunked_test.go.html#7833110">g</a></span><span class="op" id="7833243">,</span>&nbsp;<span class="ident" id="7833245"><a href="/gostd/net/http/internal/chunked_test.go.html#7833113">e</a></span><span class="op" id="7833246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833249">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833253">r</span>&nbsp;<span class="op" id="7833255">:=</span>&nbsp;<span class="ident" id="7833258"><a href="/gostd/net/http/internal/chunked.go.html#4773107">NewChunkedReader</a></span><span class="op" id="7833274">(</span><span class="op" id="7833275">&amp;</span><span class="ident" id="7833276"><a href="/gostd/net/http/internal/chunked_test.go.html#7832933">b</a></span><span class="op" id="7833277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833280">data</span><span class="op" id="7833284">,</span>&nbsp;<span class="ident" id="7833286">err</span>&nbsp;<span class="op" id="7833290">:=</span>&nbsp;<span class="ident" id="7833293"><a href="/gostd/net/http/internal/chunked_test.go.html#7832860">ioutil</a></span><span class="op" id="7833299">.</span><span class="ident" id="7833300"><a href="/gostd/io/ioutil/ioutil.go.html#3765117">ReadAll</a></span><span class="op" id="7833307">(</span><span class="ident" id="7833308"><a href="/gostd/net/http/internal/chunked_test.go.html#7833253">r</a></span><span class="op" id="7833309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833312">if</span>&nbsp;<span class="ident" id="7833315"><a href="/gostd/net/http/internal/chunked_test.go.html#7833286">err</a></span>&nbsp;<span class="op" id="7833319">!=</span>&nbsp;<span class="builtintype" id="7833322">nil</span>&nbsp;<span class="op" id="7833326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833330"><a href="/gostd/net/http/internal/chunked_test.go.html#7832912">t</a></span><span class="op" id="7833331">.</span><span class="ident" id="7833332"><a href="/gostd/testing/testing.go.html#5479816">Logf</a></span><span class="op" id="7833336">(</span><span class="string" id="7833337">`data:&nbsp;&#34;%s&#34;`</span><span class="op" id="7833349">,</span>&nbsp;<span class="ident" id="7833351"><a href="/gostd/net/http/internal/chunked_test.go.html#7833280">data</a></span><span class="op" id="7833355">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833359"><a href="/gostd/net/http/internal/chunked_test.go.html#7832912">t</a></span><span class="op" id="7833360">.</span><span class="ident" id="7833361"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7833367">(</span><span class="string" id="7833368">&#34;ReadAll&nbsp;from&nbsp;reader:&nbsp;%v&#34;</span><span class="op" id="7833393">,</span>&nbsp;<span class="ident" id="7833395"><a href="/gostd/net/http/internal/chunked_test.go.html#7833286">err</a></span><span class="op" id="7833398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833404">if</span>&nbsp;<span class="ident" id="7833407">g</span><span class="op" id="7833408">,</span>&nbsp;<span class="ident" id="7833410">e</span>&nbsp;<span class="op" id="7833412">:=</span>&nbsp;<span class="builtintype" id="7833415">string</span><span class="op" id="7833421">(</span><span class="ident" id="7833422"><a href="/gostd/net/http/internal/chunked_test.go.html#7833280">data</a></span><span class="op" id="7833426">)</span><span class="op" id="7833427">,</span>&nbsp;<span class="ident" id="7833429"><a href="/gostd/net/http/internal/chunked_test.go.html#7832983">chunk1</a></span><span class="op" id="7833435">+</span><span class="ident" id="7833436"><a href="/gostd/net/http/internal/chunked_test.go.html#7833009">chunk2</a></span><span class="op" id="7833442">;</span>&nbsp;<span class="ident" id="7833444"><a href="/gostd/net/http/internal/chunked_test.go.html#7833407">g</a></span>&nbsp;<span class="op" id="7833446">!=</span>&nbsp;<span class="ident" id="7833449"><a href="/gostd/net/http/internal/chunked_test.go.html#7833410">e</a></span>&nbsp;<span class="op" id="7833451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833455"><a href="/gostd/net/http/internal/chunked_test.go.html#7832912">t</a></span><span class="op" id="7833456">.</span><span class="ident" id="7833457"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7833463">(</span><span class="string" id="7833464">&#34;chunk&nbsp;reader&nbsp;read&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7833495">,</span>&nbsp;<span class="ident" id="7833497"><a href="/gostd/net/http/internal/chunked_test.go.html#7833407">g</a></span><span class="op" id="7833498">,</span>&nbsp;<span class="ident" id="7833500"><a href="/gostd/net/http/internal/chunked_test.go.html#7833410">e</a></span><span class="op" id="7833501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833504">}</span><br>
<span class="lineno">40</span><span class="op" id="7833506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7833509">func</span>&nbsp;<span class="ident" id="7833514">TestChunkReadMultiple</span><span class="op" id="7833535">(</span><span class="ident" id="7833536">t</span>&nbsp;<span class="op" id="7833538">*</span><span class="ident" id="7833539"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7833546">.</span><span class="ident" id="7833547"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7833548">)</span>&nbsp;<span class="op" id="7833550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7833553">//&nbsp;Bunch&nbsp;of&nbsp;small&nbsp;chunks,&nbsp;all&nbsp;read&nbsp;together.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833599">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833603">var</span>&nbsp;<span class="ident" id="7833607">b</span>&nbsp;<span class="ident" id="7833609"><a href="/gostd/net/http/internal/chunked_test.go.html#7832838">bytes</a></span><span class="op" id="7833614">.</span><span class="ident" id="7833615"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833624">w</span>&nbsp;<span class="op" id="7833626">:=</span>&nbsp;<span class="ident" id="7833629"><a href="/gostd/net/http/internal/chunked.go.html#4775998">NewChunkedWriter</a></span><span class="op" id="7833645">(</span><span class="op" id="7833646">&amp;</span><span class="ident" id="7833647"><a href="/gostd/net/http/internal/chunked_test.go.html#7833607">b</a></span><span class="op" id="7833648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833652"><a href="/gostd/net/http/internal/chunked_test.go.html#7833624">w</a></span><span class="op" id="7833653">.</span><span class="ident" id="7833654"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7833659">(</span><span class="op" id="7833660">[</span><span class="op" id="7833661">]</span><span class="builtintype" id="7833662">byte</span><span class="op" id="7833666">(</span><span class="string" id="7833667">&#34;foo&#34;</span><span class="op" id="7833672">)</span><span class="op" id="7833673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833677"><a href="/gostd/net/http/internal/chunked_test.go.html#7833624">w</a></span><span class="op" id="7833678">.</span><span class="ident" id="7833679"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7833684">(</span><span class="op" id="7833685">[</span><span class="op" id="7833686">]</span><span class="builtintype" id="7833687">byte</span><span class="op" id="7833691">(</span><span class="string" id="7833692">&#34;bar&#34;</span><span class="op" id="7833697">)</span><span class="op" id="7833698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833702"><a href="/gostd/net/http/internal/chunked_test.go.html#7833624">w</a></span><span class="op" id="7833703">.</span><span class="ident" id="7833704"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7833709">(</span><span class="op" id="7833710">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833715">r</span>&nbsp;<span class="op" id="7833717">:=</span>&nbsp;<span class="ident" id="7833720"><a href="/gostd/net/http/internal/chunked.go.html#4773107">NewChunkedReader</a></span><span class="op" id="7833736">(</span><span class="op" id="7833737">&amp;</span><span class="ident" id="7833738"><a href="/gostd/net/http/internal/chunked_test.go.html#7833607">b</a></span><span class="op" id="7833739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833743">buf</span>&nbsp;<span class="op" id="7833747">:=</span>&nbsp;<span class="builtinfunc" id="7833750">make</span><span class="op" id="7833754">(</span><span class="op" id="7833755">[</span><span class="op" id="7833756">]</span><span class="builtintype" id="7833757">byte</span><span class="op" id="7833761">,</span>&nbsp;<span class="num" id="7833763">10</span><span class="op" id="7833765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833769">n</span><span class="op" id="7833770">,</span>&nbsp;<span class="ident" id="7833772">err</span>&nbsp;<span class="op" id="7833776">:=</span>&nbsp;<span class="ident" id="7833779"><a href="/gostd/net/http/internal/chunked_test.go.html#7833715">r</a></span><span class="op" id="7833780">.</span><span class="ident" id="7833781"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7833785">(</span><span class="ident" id="7833786"><a href="/gostd/net/http/internal/chunked_test.go.html#7833743">buf</a></span><span class="op" id="7833789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833793">if</span>&nbsp;<span class="ident" id="7833796"><a href="/gostd/net/http/internal/chunked_test.go.html#7833769">n</a></span>&nbsp;<span class="op" id="7833798">!=</span>&nbsp;<span class="num" id="7833801">6</span>&nbsp;<span class="op" id="7833803">||</span>&nbsp;<span class="ident" id="7833806"><a href="/gostd/net/http/internal/chunked_test.go.html#7833772">err</a></span>&nbsp;<span class="op" id="7833810">!=</span>&nbsp;<span class="ident" id="7833813"><a href="/gostd/net/http/internal/chunked_test.go.html#7832854">io</a></span><span class="op" id="7833815">.</span><span class="ident" id="7833816"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7833820">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833825"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7833826">.</span><span class="ident" id="7833827"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7833833">(</span><span class="string" id="7833834">&#34;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;6,&nbsp;EOF&#34;</span><span class="op" id="7833862">,</span>&nbsp;<span class="ident" id="7833864"><a href="/gostd/net/http/internal/chunked_test.go.html#7833769">n</a></span><span class="op" id="7833865">,</span>&nbsp;<span class="ident" id="7833867"><a href="/gostd/net/http/internal/chunked_test.go.html#7833772">err</a></span><span class="op" id="7833870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833878"><a href="/gostd/net/http/internal/chunked_test.go.html#7833743">buf</a></span>&nbsp;<span class="op" id="7833882">=</span>&nbsp;<span class="ident" id="7833884"><a href="/gostd/net/http/internal/chunked_test.go.html#7833743">buf</a></span><span class="op" id="7833887">[</span><span class="op" id="7833888">:</span><span class="ident" id="7833889"><a href="/gostd/net/http/internal/chunked_test.go.html#7833769">n</a></span><span class="op" id="7833890">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7833894">if</span>&nbsp;<span class="builtintype" id="7833897">string</span><span class="op" id="7833903">(</span><span class="ident" id="7833904"><a href="/gostd/net/http/internal/chunked_test.go.html#7833743">buf</a></span><span class="op" id="7833907">)</span>&nbsp;<span class="op" id="7833909">!=</span>&nbsp;<span class="string" id="7833912">&#34;foobar&#34;</span>&nbsp;<span class="op" id="7833921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7833926"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7833927">.</span><span class="ident" id="7833928"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7833934">(</span><span class="string" id="7833935">&#34;Read&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7833955">,</span>&nbsp;<span class="ident" id="7833957"><a href="/gostd/net/http/internal/chunked_test.go.html#7833743">buf</a></span><span class="op" id="7833960">,</span>&nbsp;<span class="string" id="7833962">&#34;foobar&#34;</span><span class="op" id="7833970">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7833977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7833981">//&nbsp;One&nbsp;big&nbsp;chunk&nbsp;followed&nbsp;by&nbsp;a&nbsp;little&nbsp;chunk,&nbsp;but&nbsp;the&nbsp;small&nbsp;bufio.Reader&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7834059">//&nbsp;should&nbsp;prevent&nbsp;the&nbsp;second&nbsp;chunk&nbsp;header&nbsp;from&nbsp;being&nbsp;read.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7834119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834123">var</span>&nbsp;<span class="ident" id="7834127">b</span>&nbsp;<span class="ident" id="7834129"><a href="/gostd/net/http/internal/chunked_test.go.html#7832838">bytes</a></span><span class="op" id="7834134">.</span><span class="ident" id="7834135"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834144">w</span>&nbsp;<span class="op" id="7834146">:=</span>&nbsp;<span class="ident" id="7834149"><a href="/gostd/net/http/internal/chunked.go.html#4775998">NewChunkedWriter</a></span><span class="op" id="7834165">(</span><span class="op" id="7834166">&amp;</span><span class="ident" id="7834167"><a href="/gostd/net/http/internal/chunked_test.go.html#7834127">b</a></span><span class="op" id="7834168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7834172">//&nbsp;fillBufChunk&nbsp;is&nbsp;11&nbsp;bytes&nbsp;+&nbsp;3&nbsp;bytes&nbsp;header&nbsp;+&nbsp;2&nbsp;bytes&nbsp;footer&nbsp;=&nbsp;16&nbsp;bytes,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7834248">//&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;bufio&nbsp;ReaderSize&nbsp;below&nbsp;(the&nbsp;minimum),&nbsp;so&nbsp;even</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7834315">//&nbsp;though&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;try&nbsp;to&nbsp;Read&nbsp;with&nbsp;a&nbsp;buffer&nbsp;larger&nbsp;enough&nbsp;to&nbsp;also</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7834390">//&nbsp;receive&nbsp;&#34;foo&#34;,&nbsp;the&nbsp;second&nbsp;chunk&nbsp;header&nbsp;won&#39;t&nbsp;be&nbsp;read&nbsp;yet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834453">const</span>&nbsp;<span class="ident" id="7834459">fillBufChunk</span>&nbsp;<span class="op" id="7834472">=</span>&nbsp;<span class="string" id="7834474">&#34;0123456789a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834490">const</span>&nbsp;<span class="ident" id="7834496">shortChunk</span>&nbsp;<span class="op" id="7834507">=</span>&nbsp;<span class="string" id="7834509">&#34;foo&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834517"><a href="/gostd/net/http/internal/chunked_test.go.html#7834144">w</a></span><span class="op" id="7834518">.</span><span class="ident" id="7834519"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7834524">(</span><span class="op" id="7834525">[</span><span class="op" id="7834526">]</span><span class="builtintype" id="7834527">byte</span><span class="op" id="7834531">(</span><span class="ident" id="7834532"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span><span class="op" id="7834544">)</span><span class="op" id="7834545">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834549"><a href="/gostd/net/http/internal/chunked_test.go.html#7834144">w</a></span><span class="op" id="7834550">.</span><span class="ident" id="7834551"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7834556">(</span><span class="op" id="7834557">[</span><span class="op" id="7834558">]</span><span class="builtintype" id="7834559">byte</span><span class="op" id="7834563">(</span><span class="ident" id="7834564"><a href="/gostd/net/http/internal/chunked_test.go.html#7834496">shortChunk</a></span><span class="op" id="7834574">)</span><span class="op" id="7834575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834579"><a href="/gostd/net/http/internal/chunked_test.go.html#7834144">w</a></span><span class="op" id="7834580">.</span><span class="ident" id="7834581"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7834586">(</span><span class="op" id="7834587">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834592">r</span>&nbsp;<span class="op" id="7834594">:=</span>&nbsp;<span class="ident" id="7834597"><a href="/gostd/net/http/internal/chunked.go.html#4773107">NewChunkedReader</a></span><span class="op" id="7834613">(</span><span class="ident" id="7834614"><a href="/gostd/net/http/internal/chunked_test.go.html#7832829">bufio</a></span><span class="op" id="7834619">.</span><span class="ident" id="7834620"><a href="/gostd/bufio/bufio.go.html#1355449">NewReaderSize</a></span><span class="op" id="7834633">(</span><span class="op" id="7834634">&amp;</span><span class="ident" id="7834635"><a href="/gostd/net/http/internal/chunked_test.go.html#7834127">b</a></span><span class="op" id="7834636">,</span>&nbsp;<span class="num" id="7834638">16</span><span class="op" id="7834640">)</span><span class="op" id="7834641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834645">buf</span>&nbsp;<span class="op" id="7834649">:=</span>&nbsp;<span class="builtinfunc" id="7834652">make</span><span class="op" id="7834656">(</span><span class="op" id="7834657">[</span><span class="op" id="7834658">]</span><span class="builtintype" id="7834659">byte</span><span class="op" id="7834663">,</span>&nbsp;<span class="builtinfunc" id="7834665">len</span><span class="op" id="7834668">(</span><span class="ident" id="7834669"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span><span class="op" id="7834681">)</span><span class="op" id="7834682">+</span><span class="builtinfunc" id="7834683">len</span><span class="op" id="7834686">(</span><span class="ident" id="7834687"><a href="/gostd/net/http/internal/chunked_test.go.html#7834496">shortChunk</a></span><span class="op" id="7834697">)</span><span class="op" id="7834698">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834702">n</span><span class="op" id="7834703">,</span>&nbsp;<span class="ident" id="7834705">err</span>&nbsp;<span class="op" id="7834709">:=</span>&nbsp;<span class="ident" id="7834712"><a href="/gostd/net/http/internal/chunked_test.go.html#7834592">r</a></span><span class="op" id="7834713">.</span><span class="ident" id="7834714"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7834718">(</span><span class="ident" id="7834719"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span><span class="op" id="7834722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834726">if</span>&nbsp;<span class="ident" id="7834729"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span>&nbsp;<span class="op" id="7834731">!=</span>&nbsp;<span class="builtinfunc" id="7834734">len</span><span class="op" id="7834737">(</span><span class="ident" id="7834738"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span><span class="op" id="7834750">)</span>&nbsp;<span class="op" id="7834752">||</span>&nbsp;<span class="ident" id="7834755"><a href="/gostd/net/http/internal/chunked_test.go.html#7834705">err</a></span>&nbsp;<span class="op" id="7834759">!=</span>&nbsp;<span class="builtintype" id="7834762">nil</span>&nbsp;<span class="op" id="7834766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834771"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7834772">.</span><span class="ident" id="7834773"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7834779">(</span><span class="string" id="7834780">&#34;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="7834809">,</span>&nbsp;<span class="ident" id="7834811"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span><span class="op" id="7834812">,</span>&nbsp;<span class="ident" id="7834814"><a href="/gostd/net/http/internal/chunked_test.go.html#7834705">err</a></span><span class="op" id="7834817">,</span>&nbsp;<span class="builtinfunc" id="7834819">len</span><span class="op" id="7834822">(</span><span class="ident" id="7834823"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span><span class="op" id="7834835">)</span><span class="op" id="7834836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7834840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834844"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span>&nbsp;<span class="op" id="7834848">=</span>&nbsp;<span class="ident" id="7834850"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span><span class="op" id="7834853">[</span><span class="op" id="7834854">:</span><span class="ident" id="7834855"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span><span class="op" id="7834856">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834860">if</span>&nbsp;<span class="builtintype" id="7834863">string</span><span class="op" id="7834869">(</span><span class="ident" id="7834870"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span><span class="op" id="7834873">)</span>&nbsp;<span class="op" id="7834875">!=</span>&nbsp;<span class="ident" id="7834878"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span>&nbsp;<span class="op" id="7834891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834896"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7834897">.</span><span class="ident" id="7834898"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7834904">(</span><span class="string" id="7834905">&#34;Read&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7834925">,</span>&nbsp;<span class="ident" id="7834927"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span><span class="op" id="7834930">,</span>&nbsp;<span class="ident" id="7834932"><a href="/gostd/net/http/internal/chunked_test.go.html#7834459">fillBufChunk</a></span><span class="op" id="7834944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7834948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7834953"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span><span class="op" id="7834954">,</span>&nbsp;<span class="ident" id="7834956"><a href="/gostd/net/http/internal/chunked_test.go.html#7834705">err</a></span>&nbsp;<span class="op" id="7834960">=</span>&nbsp;<span class="ident" id="7834962"><a href="/gostd/net/http/internal/chunked_test.go.html#7834592">r</a></span><span class="op" id="7834963">.</span><span class="ident" id="7834964"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7834968">(</span><span class="ident" id="7834969"><a href="/gostd/net/http/internal/chunked_test.go.html#7834645">buf</a></span><span class="op" id="7834972">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7834976">if</span>&nbsp;<span class="ident" id="7834979"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span>&nbsp;<span class="op" id="7834981">!=</span>&nbsp;<span class="builtinfunc" id="7834984">len</span><span class="op" id="7834987">(</span><span class="ident" id="7834988"><a href="/gostd/net/http/internal/chunked_test.go.html#7834496">shortChunk</a></span><span class="op" id="7834998">)</span>&nbsp;<span class="op" id="7835000">||</span>&nbsp;<span class="ident" id="7835003"><a href="/gostd/net/http/internal/chunked_test.go.html#7834705">err</a></span>&nbsp;<span class="op" id="7835007">!=</span>&nbsp;<span class="ident" id="7835010"><a href="/gostd/net/http/internal/chunked_test.go.html#7832854">io</a></span><span class="op" id="7835012">.</span><span class="ident" id="7835013"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7835017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835022"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7835023">.</span><span class="ident" id="7835024"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7835030">(</span><span class="string" id="7835031">&#34;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;%d,&nbsp;EOF&#34;</span><span class="op" id="7835060">,</span>&nbsp;<span class="ident" id="7835062"><a href="/gostd/net/http/internal/chunked_test.go.html#7834702">n</a></span><span class="op" id="7835063">,</span>&nbsp;<span class="ident" id="7835065"><a href="/gostd/net/http/internal/chunked_test.go.html#7834705">err</a></span><span class="op" id="7835068">,</span>&nbsp;<span class="builtinfunc" id="7835070">len</span><span class="op" id="7835073">(</span><span class="ident" id="7835074"><a href="/gostd/net/http/internal/chunked_test.go.html#7834496">shortChunk</a></span><span class="op" id="7835084">)</span><span class="op" id="7835085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7835096">//&nbsp;And&nbsp;test&nbsp;that&nbsp;we&nbsp;see&nbsp;an&nbsp;EOF&nbsp;chunk,&nbsp;even&nbsp;though&nbsp;our&nbsp;buffer&nbsp;is&nbsp;already&nbsp;full:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835179">r</span>&nbsp;<span class="op" id="7835181">:=</span>&nbsp;<span class="ident" id="7835184"><a href="/gostd/net/http/internal/chunked.go.html#4773107">NewChunkedReader</a></span><span class="op" id="7835200">(</span><span class="ident" id="7835201"><a href="/gostd/net/http/internal/chunked_test.go.html#7832829">bufio</a></span><span class="op" id="7835206">.</span><span class="ident" id="7835207"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="7835216">(</span><span class="ident" id="7835217"><a href="/gostd/net/http/internal/chunked_test.go.html#7832873">strings</a></span><span class="op" id="7835224">.</span><span class="ident" id="7835225"><a href="/gostd/strings/reader.go.html#2948317">NewReader</a></span><span class="op" id="7835234">(</span><span class="string" id="7835235">&#34;3\r\nfoo\r\n0\r\n&#34;</span><span class="op" id="7835254">)</span><span class="op" id="7835255">)</span><span class="op" id="7835256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835260">buf</span>&nbsp;<span class="op" id="7835264">:=</span>&nbsp;<span class="builtinfunc" id="7835267">make</span><span class="op" id="7835271">(</span><span class="op" id="7835272">[</span><span class="op" id="7835273">]</span><span class="builtintype" id="7835274">byte</span><span class="op" id="7835278">,</span>&nbsp;<span class="num" id="7835280">3</span><span class="op" id="7835281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835285">n</span><span class="op" id="7835286">,</span>&nbsp;<span class="ident" id="7835288">err</span>&nbsp;<span class="op" id="7835292">:=</span>&nbsp;<span class="ident" id="7835295"><a href="/gostd/net/http/internal/chunked_test.go.html#7835179">r</a></span><span class="op" id="7835296">.</span><span class="ident" id="7835297"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="7835301">(</span><span class="ident" id="7835302"><a href="/gostd/net/http/internal/chunked_test.go.html#7835260">buf</a></span><span class="op" id="7835305">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7835309">if</span>&nbsp;<span class="ident" id="7835312"><a href="/gostd/net/http/internal/chunked_test.go.html#7835285">n</a></span>&nbsp;<span class="op" id="7835314">!=</span>&nbsp;<span class="num" id="7835317">3</span>&nbsp;<span class="op" id="7835319">||</span>&nbsp;<span class="ident" id="7835322"><a href="/gostd/net/http/internal/chunked_test.go.html#7835288">err</a></span>&nbsp;<span class="op" id="7835326">!=</span>&nbsp;<span class="ident" id="7835329"><a href="/gostd/net/http/internal/chunked_test.go.html#7832854">io</a></span><span class="op" id="7835331">.</span><span class="ident" id="7835332"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="7835336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835341"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7835342">.</span><span class="ident" id="7835343"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7835349">(</span><span class="string" id="7835350">&#34;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;3,&nbsp;EOF&#34;</span><span class="op" id="7835378">,</span>&nbsp;<span class="ident" id="7835380"><a href="/gostd/net/http/internal/chunked_test.go.html#7835285">n</a></span><span class="op" id="7835381">,</span>&nbsp;<span class="ident" id="7835383"><a href="/gostd/net/http/internal/chunked_test.go.html#7835288">err</a></span><span class="op" id="7835386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7835394">if</span>&nbsp;<span class="builtintype" id="7835397">string</span><span class="op" id="7835403">(</span><span class="ident" id="7835404"><a href="/gostd/net/http/internal/chunked_test.go.html#7835260">buf</a></span><span class="op" id="7835407">)</span>&nbsp;<span class="op" id="7835409">!=</span>&nbsp;<span class="string" id="7835412">&#34;foo&#34;</span>&nbsp;<span class="op" id="7835418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835423"><a href="/gostd/net/http/internal/chunked_test.go.html#7833536">t</a></span><span class="op" id="7835424">.</span><span class="ident" id="7835425"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7835431">(</span><span class="string" id="7835432">&#34;buf&nbsp;=&nbsp;%q;&nbsp;want&nbsp;foo&#34;</span><span class="op" id="7835452">,</span>&nbsp;<span class="ident" id="7835454"><a href="/gostd/net/http/internal/chunked_test.go.html#7835260">buf</a></span><span class="op" id="7835457">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835464">}</span><br>
<span class="lineno"></span><span class="op" id="7835466">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7835469">func</span>&nbsp;<span class="ident" id="7835474">TestChunkReaderAllocs</span><span class="op" id="7835495">(</span><span class="ident" id="7835496">t</span>&nbsp;<span class="op" id="7835498">*</span><span class="ident" id="7835499"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7835506">.</span><span class="ident" id="7835507"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7835508">)</span>&nbsp;<span class="op" id="7835510">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7835513">if</span>&nbsp;<span class="ident" id="7835516"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7835523">.</span><span class="ident" id="7835524"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7835529">(</span><span class="op" id="7835530">)</span>&nbsp;<span class="op" id="7835532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835536"><a href="/gostd/net/http/internal/chunked_test.go.html#7835496">t</a></span><span class="op" id="7835537">.</span><span class="ident" id="7835538"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7835542">(</span><span class="string" id="7835543">&#34;skipping&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="7835567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7835570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7835573">var</span>&nbsp;<span class="ident" id="7835577">buf</span>&nbsp;<span class="ident" id="7835581"><a href="/gostd/net/http/internal/chunked_test.go.html#7832838">bytes</a></span><span class="op" id="7835586">.</span><span class="ident" id="7835587"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835595">w</span>&nbsp;<span class="op" id="7835597">:=</span>&nbsp;<span class="ident" id="7835600"><a href="/gostd/net/http/internal/chunked.go.html#4775998">NewChunkedWriter</a></span><span class="op" id="7835616">(</span><span class="op" id="7835617">&amp;</span><span class="ident" id="7835618"><a href="/gostd/net/http/internal/chunked_test.go.html#7835577">buf</a></span><span class="op" id="7835621">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835624">a</span><span class="op" id="7835625">,</span>&nbsp;<span class="ident" id="7835627">b</span><span class="op" id="7835628">,</span>&nbsp;<span class="ident" id="7835630">c</span>&nbsp;<span class="op" id="7835632">:=</span>&nbsp;<span class="op" id="7835635">[</span><span class="op" id="7835636">]</span><span class="builtintype" id="7835637">byte</span><span class="op" id="7835641">(</span><span class="string" id="7835642">&#34;aaaaaa&#34;</span><span class="op" id="7835650">)</span><span class="op" id="7835651">,</span>&nbsp;<span class="op" id="7835653">[</span><span class="op" id="7835654">]</span><span class="builtintype" id="7835655">byte</span><span class="op" id="7835659">(</span><span class="string" id="7835660">&#34;bbbbbbbbbbbb&#34;</span><span class="op" id="7835674">)</span><span class="op" id="7835675">,</span>&nbsp;<span class="op" id="7835677">[</span><span class="op" id="7835678">]</span><span class="builtintype" id="7835679">byte</span><span class="op" id="7835683">(</span><span class="string" id="7835684">&#34;cccccccccccccccccccccccc&#34;</span><span class="op" id="7835710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835713"><a href="/gostd/net/http/internal/chunked_test.go.html#7835595">w</a></span><span class="op" id="7835714">.</span><span class="ident" id="7835715"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7835720">(</span><span class="ident" id="7835721"><a href="/gostd/net/http/internal/chunked_test.go.html#7835624">a</a></span><span class="op" id="7835722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835725"><a href="/gostd/net/http/internal/chunked_test.go.html#7835595">w</a></span><span class="op" id="7835726">.</span><span class="ident" id="7835727"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7835732">(</span><span class="ident" id="7835733"><a href="/gostd/net/http/internal/chunked_test.go.html#7835627">b</a></span><span class="op" id="7835734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835737"><a href="/gostd/net/http/internal/chunked_test.go.html#7835595">w</a></span><span class="op" id="7835738">.</span><span class="ident" id="7835739"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="7835744">(</span><span class="ident" id="7835745"><a href="/gostd/net/http/internal/chunked_test.go.html#7835630">c</a></span><span class="op" id="7835746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835749"><a href="/gostd/net/http/internal/chunked_test.go.html#7835595">w</a></span><span class="op" id="7835750">.</span><span class="ident" id="7835751"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7835756">(</span><span class="op" id="7835757">)</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835761">readBuf</span>&nbsp;<span class="op" id="7835769">:=</span>&nbsp;<span class="builtinfunc" id="7835772">make</span><span class="op" id="7835776">(</span><span class="op" id="7835777">[</span><span class="op" id="7835778">]</span><span class="builtintype" id="7835779">byte</span><span class="op" id="7835783">,</span>&nbsp;<span class="builtinfunc" id="7835785">len</span><span class="op" id="7835788">(</span><span class="ident" id="7835789"><a href="/gostd/net/http/internal/chunked_test.go.html#7835624">a</a></span><span class="op" id="7835790">)</span><span class="op" id="7835791">+</span><span class="builtinfunc" id="7835792">len</span><span class="op" id="7835795">(</span><span class="ident" id="7835796"><a href="/gostd/net/http/internal/chunked_test.go.html#7835627">b</a></span><span class="op" id="7835797">)</span><span class="op" id="7835798">+</span><span class="builtinfunc" id="7835799">len</span><span class="op" id="7835802">(</span><span class="ident" id="7835803"><a href="/gostd/net/http/internal/chunked_test.go.html#7835630">c</a></span><span class="op" id="7835804">)</span><span class="op" id="7835805">+</span><span class="num" id="7835806">1</span><span class="op" id="7835807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835810">byter</span>&nbsp;<span class="op" id="7835816">:=</span>&nbsp;<span class="ident" id="7835819"><a href="/gostd/net/http/internal/chunked_test.go.html#7832838">bytes</a></span><span class="op" id="7835824">.</span><span class="ident" id="7835825"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="7835834">(</span><span class="ident" id="7835835"><a href="/gostd/net/http/internal/chunked_test.go.html#7835577">buf</a></span><span class="op" id="7835838">.</span><span class="ident" id="7835839"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="7835844">(</span><span class="op" id="7835845">)</span><span class="op" id="7835846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835849">bufr</span>&nbsp;<span class="op" id="7835854">:=</span>&nbsp;<span class="ident" id="7835857"><a href="/gostd/net/http/internal/chunked_test.go.html#7832829">bufio</a></span><span class="op" id="7835862">.</span><span class="ident" id="7835863"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="7835872">(</span><span class="ident" id="7835873"><a href="/gostd/net/http/internal/chunked_test.go.html#7835810">byter</a></span><span class="op" id="7835878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835881">mallocs</span>&nbsp;<span class="op" id="7835889">:=</span>&nbsp;<span class="ident" id="7835892"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7835899">.</span><span class="ident" id="7835900"><a href="/gostd/testing/allocs.go.html#5449197">AllocsPerRun</a></span><span class="op" id="7835912">(</span><span class="num" id="7835913">100</span><span class="op" id="7835916">,</span>&nbsp;<span class="keyword" id="7835918">func</span><span class="op" id="7835922">(</span><span class="op" id="7835923">)</span>&nbsp;<span class="op" id="7835925">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835929"><a href="/gostd/net/http/internal/chunked_test.go.html#7835810">byter</a></span><span class="op" id="7835934">.</span><span class="ident" id="7835935"><a href="/gostd/bytes/reader.go.html#1417309">Seek</a></span><span class="op" id="7835939">(</span><span class="num" id="7835940">0</span><span class="op" id="7835941">,</span>&nbsp;<span class="num" id="7835943">0</span><span class="op" id="7835944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835948"><a href="/gostd/net/http/internal/chunked_test.go.html#7835849">bufr</a></span><span class="op" id="7835952">.</span><span class="ident" id="7835953"><a href="/gostd/bufio/bufio.go.html#1355995">Reset</a></span><span class="op" id="7835958">(</span><span class="ident" id="7835959"><a href="/gostd/net/http/internal/chunked_test.go.html#7835810">byter</a></span><span class="op" id="7835964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835968">r</span>&nbsp;<span class="op" id="7835970">:=</span>&nbsp;<span class="ident" id="7835973"><a href="/gostd/net/http/internal/chunked.go.html#4773107">NewChunkedReader</a></span><span class="op" id="7835989">(</span><span class="ident" id="7835990"><a href="/gostd/net/http/internal/chunked_test.go.html#7835849">bufr</a></span><span class="op" id="7835994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7835998">n</span><span class="op" id="7835999">,</span>&nbsp;<span class="ident" id="7836001">err</span>&nbsp;<span class="op" id="7836005">:=</span>&nbsp;<span class="ident" id="7836008"><a href="/gostd/net/http/internal/chunked_test.go.html#7832854">io</a></span><span class="op" id="7836010">.</span><span class="ident" id="7836011"><a href="/gostd/io/io.go.html#1429706">ReadFull</a></span><span class="op" id="7836019">(</span><span class="ident" id="7836020"><a href="/gostd/net/http/internal/chunked_test.go.html#7835968">r</a></span><span class="op" id="7836021">,</span>&nbsp;<span class="ident" id="7836023"><a href="/gostd/net/http/internal/chunked_test.go.html#7835761">readBuf</a></span><span class="op" id="7836030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836034">if</span>&nbsp;<span class="ident" id="7836037"><a href="/gostd/net/http/internal/chunked_test.go.html#7835998">n</a></span>&nbsp;<span class="op" id="7836039">!=</span>&nbsp;<span class="builtinfunc" id="7836042">len</span><span class="op" id="7836045">(</span><span class="ident" id="7836046"><a href="/gostd/net/http/internal/chunked_test.go.html#7835761">readBuf</a></span><span class="op" id="7836053">)</span><span class="op" id="7836054">-</span><span class="num" id="7836055">1</span>&nbsp;<span class="op" id="7836057">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836062"><a href="/gostd/net/http/internal/chunked_test.go.html#7835496">t</a></span><span class="op" id="7836063">.</span><span class="ident" id="7836064"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7836070">(</span><span class="string" id="7836071">&#34;read&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7836095">,</span>&nbsp;<span class="ident" id="7836097"><a href="/gostd/net/http/internal/chunked_test.go.html#7835998">n</a></span><span class="op" id="7836098">,</span>&nbsp;<span class="builtinfunc" id="7836100">len</span><span class="op" id="7836103">(</span><span class="ident" id="7836104"><a href="/gostd/net/http/internal/chunked_test.go.html#7835761">readBuf</a></span><span class="op" id="7836111">)</span><span class="op" id="7836112">-</span><span class="num" id="7836113">1</span><span class="op" id="7836114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836122">if</span>&nbsp;<span class="ident" id="7836125"><a href="/gostd/net/http/internal/chunked_test.go.html#7836001">err</a></span>&nbsp;<span class="op" id="7836129">!=</span>&nbsp;<span class="ident" id="7836132"><a href="/gostd/net/http/internal/chunked_test.go.html#7832854">io</a></span><span class="op" id="7836134">.</span><span class="ident" id="7836135"><a href="/gostd/io/io.go.html#1420096">ErrUnexpectedEOF</a></span>&nbsp;<span class="op" id="7836152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836157"><a href="/gostd/net/http/internal/chunked_test.go.html#7835496">t</a></span><span class="op" id="7836158">.</span><span class="ident" id="7836159"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7836165">(</span><span class="string" id="7836166">&#34;read&nbsp;error&nbsp;=&nbsp;%v;&nbsp;want&nbsp;ErrUnexpectedEOF&#34;</span><span class="op" id="7836206">,</span>&nbsp;<span class="ident" id="7836208"><a href="/gostd/net/http/internal/chunked_test.go.html#7836001">err</a></span><span class="op" id="7836211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836215">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836218">}</span><span class="op" id="7836219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836222">if</span>&nbsp;<span class="ident" id="7836225"><a href="/gostd/net/http/internal/chunked_test.go.html#7835881">mallocs</a></span>&nbsp;<span class="op" id="7836233">&gt;</span>&nbsp;<span class="num" id="7836235">1.5</span>&nbsp;<span class="op" id="7836239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836243"><a href="/gostd/net/http/internal/chunked_test.go.html#7835496">t</a></span><span class="op" id="7836244">.</span><span class="ident" id="7836245"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7836251">(</span><span class="string" id="7836252">&#34;mallocs&nbsp;=&nbsp;%v;&nbsp;want&nbsp;1&#34;</span><span class="op" id="7836274">,</span>&nbsp;<span class="ident" id="7836276"><a href="/gostd/net/http/internal/chunked_test.go.html#7835881">mallocs</a></span><span class="op" id="7836283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836286">}</span><br>
<span class="lineno"></span><span class="op" id="7836288">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7836291">func</span>&nbsp;<span class="ident" id="7836296">TestParseHexUint</span><span class="op" id="7836312">(</span><span class="ident" id="7836313">t</span>&nbsp;<span class="op" id="7836315">*</span><span class="ident" id="7836316"><a href="/gostd/net/http/internal/chunked_test.go.html#7832884">testing</a></span><span class="op" id="7836323">.</span><span class="ident" id="7836324"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7836325">)</span>&nbsp;<span class="op" id="7836327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836330">for</span>&nbsp;<span class="ident" id="7836334">i</span>&nbsp;<span class="op" id="7836336">:=</span>&nbsp;<span class="builtintype" id="7836339">uint64</span><span class="op" id="7836345">(</span><span class="num" id="7836346">0</span><span class="op" id="7836347">)</span><span class="op" id="7836348">;</span>&nbsp;<span class="ident" id="7836350"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span>&nbsp;<span class="op" id="7836352">&lt;=</span>&nbsp;<span class="num" id="7836355">1234</span><span class="op" id="7836359">;</span>&nbsp;<span class="ident" id="7836361"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span><span class="op" id="7836362">++</span>&nbsp;<span class="op" id="7836365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836369">line</span>&nbsp;<span class="op" id="7836374">:=</span>&nbsp;<span class="op" id="7836377">[</span><span class="op" id="7836378">]</span><span class="builtintype" id="7836379">byte</span><span class="op" id="7836383">(</span><span class="ident" id="7836384"><a href="/gostd/net/http/internal/chunked_test.go.html#7832847">fmt</a></span><span class="op" id="7836387">.</span><span class="ident" id="7836388"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7836395">(</span><span class="string" id="7836396">&#34;%x&#34;</span><span class="op" id="7836400">,</span>&nbsp;<span class="ident" id="7836402"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span><span class="op" id="7836403">)</span><span class="op" id="7836404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836408">got</span><span class="op" id="7836411">,</span>&nbsp;<span class="ident" id="7836413">err</span>&nbsp;<span class="op" id="7836417">:=</span>&nbsp;<span class="ident" id="7836420"><a href="/gostd/net/http/internal/chunked.go.html#4776993">parseHexUint</a></span><span class="op" id="7836432">(</span><span class="ident" id="7836433"><a href="/gostd/net/http/internal/chunked_test.go.html#7836369">line</a></span><span class="op" id="7836437">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836441">if</span>&nbsp;<span class="ident" id="7836444"><a href="/gostd/net/http/internal/chunked_test.go.html#7836413">err</a></span>&nbsp;<span class="op" id="7836448">!=</span>&nbsp;<span class="builtintype" id="7836451">nil</span>&nbsp;<span class="op" id="7836455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836460"><a href="/gostd/net/http/internal/chunked_test.go.html#7836313">t</a></span><span class="op" id="7836461">.</span><span class="ident" id="7836462"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7836468">(</span><span class="string" id="7836469">&#34;on&nbsp;%d:&nbsp;%v&#34;</span><span class="op" id="7836480">,</span>&nbsp;<span class="ident" id="7836482"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span><span class="op" id="7836483">,</span>&nbsp;<span class="ident" id="7836485"><a href="/gostd/net/http/internal/chunked_test.go.html#7836413">err</a></span><span class="op" id="7836488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836496">if</span>&nbsp;<span class="ident" id="7836499"><a href="/gostd/net/http/internal/chunked_test.go.html#7836408">got</a></span>&nbsp;<span class="op" id="7836503">!=</span>&nbsp;<span class="ident" id="7836506"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span>&nbsp;<span class="op" id="7836508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836513"><a href="/gostd/net/http/internal/chunked_test.go.html#7836313">t</a></span><span class="op" id="7836514">.</span><span class="ident" id="7836515"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7836521">(</span><span class="string" id="7836522">&#34;for&nbsp;input&nbsp;%q&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7836550">,</span>&nbsp;<span class="ident" id="7836552"><a href="/gostd/net/http/internal/chunked_test.go.html#7836369">line</a></span><span class="op" id="7836556">,</span>&nbsp;<span class="ident" id="7836558"><a href="/gostd/net/http/internal/chunked_test.go.html#7836408">got</a></span><span class="op" id="7836561">,</span>&nbsp;<span class="ident" id="7836563"><a href="/gostd/net/http/internal/chunked_test.go.html#7836334">i</a></span><span class="op" id="7836564">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836574">_</span><span class="op" id="7836575">,</span>&nbsp;<span class="ident" id="7836577">err</span>&nbsp;<span class="op" id="7836581">:=</span>&nbsp;<span class="ident" id="7836584"><a href="/gostd/net/http/internal/chunked.go.html#4776993">parseHexUint</a></span><span class="op" id="7836596">(</span><span class="op" id="7836597">[</span><span class="op" id="7836598">]</span><span class="builtintype" id="7836599">byte</span><span class="op" id="7836603">(</span><span class="string" id="7836604">&#34;bogus&#34;</span><span class="op" id="7836611">)</span><span class="op" id="7836612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7836615">if</span>&nbsp;<span class="ident" id="7836618"><a href="/gostd/net/http/internal/chunked_test.go.html#7836577">err</a></span>&nbsp;<span class="op" id="7836622">==</span>&nbsp;<span class="builtintype" id="7836625">nil</span>&nbsp;<span class="op" id="7836629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7836633"><a href="/gostd/net/http/internal/chunked_test.go.html#7836313">t</a></span><span class="op" id="7836634">.</span><span class="ident" id="7836635"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7836640">(</span><span class="string" id="7836641">&#34;expected&nbsp;error&nbsp;on&nbsp;bogus&nbsp;input&#34;</span><span class="op" id="7836672">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7836675">}</span><br>
<span class="lineno"></span><span class="op" id="7836677">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
