<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4617367">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4617422">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4617476">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4617527">//&nbsp;Package&nbsp;crc32&nbsp;implements&nbsp;the&nbsp;32-bit&nbsp;cyclic&nbsp;redundancy&nbsp;check,&nbsp;or&nbsp;CRC-32,</span><br>
<span class="lineno"></span><span class="comment" id="4617602">//&nbsp;checksum.&nbsp;See&nbsp;http://en.wikipedia.org/wiki/Cyclic_redundancy_check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="4617676">//&nbsp;information.</span><br>
<span class="lineno"></span><span class="keyword" id="4617692">package</span>&nbsp;<span class="ident" id="4617700">crc32</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4617707">import</span>&nbsp;<span class="op" id="4617714">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4617717">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4617725">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4617732">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4617735">//&nbsp;The&nbsp;size&nbsp;of&nbsp;a&nbsp;CRC-32&nbsp;checksum&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="4617778">const</span>&nbsp;<span class="ident" id="4617784">Size</span>&nbsp;<span class="op" id="4617789">=</span>&nbsp;<span class="num" id="4617791">4</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4617794">//&nbsp;Predefined&nbsp;polynomials.</span><br>
<span class="lineno"></span><span class="keyword" id="4617821">const</span>&nbsp;<span class="op" id="4617827">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4617830">//&nbsp;IEEE&nbsp;is&nbsp;by&nbsp;far&nbsp;and&nbsp;away&nbsp;the&nbsp;most&nbsp;common&nbsp;CRC-32&nbsp;polynomial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4617893">//&nbsp;Used&nbsp;by&nbsp;ethernet&nbsp;(IEEE&nbsp;802.3),&nbsp;v.42,&nbsp;fddi,&nbsp;gzip,&nbsp;zip,&nbsp;png,&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4617960">IEEE</span>&nbsp;<span class="op" id="4617965">=</span>&nbsp;<span class="num" id="4617967">0xedb88320</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4617980">//&nbsp;Castagnoli&#39;s&nbsp;polynomial,&nbsp;used&nbsp;in&nbsp;iSCSI.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4618024">//&nbsp;Has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4618082">//&nbsp;http://dx.doi.org/10.1109/26.231911</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4618122">Castagnoli</span>&nbsp;<span class="op" id="4618133">=</span>&nbsp;<span class="num" id="4618135">0x82f63b78</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4618148">//&nbsp;Koopman&#39;s&nbsp;polynomial.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4618174">//&nbsp;Also&nbsp;has&nbsp;better&nbsp;error&nbsp;detection&nbsp;characteristics&nbsp;than&nbsp;IEEE.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4618237">//&nbsp;http://dx.doi.org/10.1109/DSN.2002.1028931</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4618284">Koopman</span>&nbsp;<span class="op" id="4618292">=</span>&nbsp;<span class="num" id="4618294">0xeb31d82e</span><br>
<span class="lineno"></span><span class="op" id="4618305">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4618308">//&nbsp;Table&nbsp;is&nbsp;a&nbsp;256-word&nbsp;table&nbsp;representing&nbsp;the&nbsp;polynomial&nbsp;for&nbsp;efficient&nbsp;processing.</span><br>
<span class="lineno"></span><span class="keyword" id="4618391">type</span>&nbsp;<span class="ident" id="4618396">Table</span>&nbsp;<span class="op" id="4618402">[</span><span class="num" id="4618403">256</span><span class="op" id="4618406">]</span><span class="builtintype" id="4618407">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4618415">//&nbsp;castagnoliTable&nbsp;points&nbsp;to&nbsp;a&nbsp;lazily&nbsp;initialized&nbsp;Table&nbsp;for&nbsp;the&nbsp;Castagnoli</span><br>
<span class="lineno"></span><span class="comment" id="4618490">//&nbsp;polynomial.&nbsp;MakeTable&nbsp;will&nbsp;always&nbsp;return&nbsp;this&nbsp;value&nbsp;when&nbsp;asked&nbsp;to&nbsp;make&nbsp;a</span><br>
<span class="lineno">40</span><span class="comment" id="4618566">//&nbsp;Castagnoli&nbsp;table&nbsp;so&nbsp;we&nbsp;can&nbsp;compare&nbsp;against&nbsp;it&nbsp;to&nbsp;find&nbsp;when&nbsp;the&nbsp;caller&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4618642">//&nbsp;using&nbsp;this&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4618668">var</span>&nbsp;<span class="ident" id="4618672">castagnoliTable</span>&nbsp;<span class="op" id="4618688">*</span><span class="ident" id="4618689"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><br>
<span class="lineno"></span><span class="keyword" id="4618695">var</span>&nbsp;<span class="ident" id="4618699">castagnoliOnce</span>&nbsp;<span class="ident" id="4618714"><a href="/hash/crc32/crc32.go.html#4617725">sync</a></span><span class="op" id="4618718">.</span><span class="ident" id="4618719">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="4618725">func</span>&nbsp;<span class="ident" id="4618730">castagnoliInit</span><span class="op" id="4618744">(</span><span class="op" id="4618745">)</span>&nbsp;<span class="op" id="4618747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4618750"><a href="/hash/crc32/crc32.go.html#4618672">castagnoliTable</a></span>&nbsp;<span class="op" id="4618766">=</span>&nbsp;<span class="ident" id="4618768"><a href="/hash/crc32/crc32.go.html#4619222">makeTable</a></span><span class="op" id="4618777">(</span><span class="ident" id="4618778"><a href="/hash/crc32/crc32.go.html#4618122">Castagnoli</a></span><span class="op" id="4618788">)</span><br>
<span class="lineno"></span><span class="op" id="4618790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4618793">//&nbsp;IEEETable&nbsp;is&nbsp;the&nbsp;table&nbsp;for&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">50</span><span class="keyword" id="4618844">var</span>&nbsp;<span class="ident" id="4618848">IEEETable</span>&nbsp;<span class="op" id="4618858">=</span>&nbsp;<span class="ident" id="4618860"><a href="/hash/crc32/crc32.go.html#4619222">makeTable</a></span><span class="op" id="4618869">(</span><span class="ident" id="4618870"><a href="/hash/crc32/crc32.go.html#4617960">IEEE</a></span><span class="op" id="4618874">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4618877">//&nbsp;MakeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4618951">func</span>&nbsp;<span class="ident" id="4618956">MakeTable</span><span class="op" id="4618965">(</span><span class="ident" id="4618966">poly</span>&nbsp;<span class="builtintype" id="4618971">uint32</span><span class="op" id="4618977">)</span>&nbsp;<span class="op" id="4618979">*</span><span class="ident" id="4618980"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span>&nbsp;<span class="op" id="4618986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4618989">switch</span>&nbsp;<span class="ident" id="4618996"><a href="/hash/crc32/crc32.go.html#4618966">poly</a></span>&nbsp;<span class="op" id="4619001">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619004">case</span>&nbsp;<span class="ident" id="4619009"><a href="/hash/crc32/crc32.go.html#4617960">IEEE</a></span><span class="op" id="4619013">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619017">return</span>&nbsp;<span class="ident" id="4619024"><a href="/hash/crc32/crc32.go.html#4618848">IEEETable</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619035">case</span>&nbsp;<span class="ident" id="4619040"><a href="/hash/crc32/crc32.go.html#4618122">Castagnoli</a></span><span class="op" id="4619050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619054"><a href="/hash/crc32/crc32.go.html#4618699">castagnoliOnce</a></span><span class="op" id="4619068">.</span><span class="ident" id="4619069">Do</span><span class="op" id="4619071">(</span><span class="ident" id="4619072"><a href="/hash/crc32/crc32.go.html#4618730">castagnoliInit</a></span><span class="op" id="4619086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619090">return</span>&nbsp;<span class="ident" id="4619097"><a href="/hash/crc32/crc32.go.html#4618672">castagnoliTable</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4619114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619117">return</span>&nbsp;<span class="ident" id="4619124"><a href="/hash/crc32/crc32.go.html#4619222">makeTable</a></span><span class="op" id="4619133">(</span><span class="ident" id="4619134"><a href="/hash/crc32/crc32.go.html#4618966">poly</a></span><span class="op" id="4619138">)</span><br>
<span class="lineno"></span><span class="op" id="4619140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4619143">//&nbsp;makeTable&nbsp;returns&nbsp;the&nbsp;Table&nbsp;constructed&nbsp;from&nbsp;the&nbsp;specified&nbsp;polynomial.</span><br>
<span class="lineno">65</span><span class="keyword" id="4619217">func</span>&nbsp;<span class="ident" id="4619222">makeTable</span><span class="op" id="4619231">(</span><span class="ident" id="4619232">poly</span>&nbsp;<span class="builtintype" id="4619237">uint32</span><span class="op" id="4619243">)</span>&nbsp;<span class="op" id="4619245">*</span><span class="ident" id="4619246"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span>&nbsp;<span class="op" id="4619252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619255">t</span>&nbsp;<span class="op" id="4619257">:=</span>&nbsp;<span class="builtinfunc" id="4619260">new</span><span class="op" id="4619263">(</span><span class="ident" id="4619264"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><span class="op" id="4619269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619272">for</span>&nbsp;<span class="ident" id="4619276">i</span>&nbsp;<span class="op" id="4619278">:=</span>&nbsp;<span class="num" id="4619281">0</span><span class="op" id="4619282">;</span>&nbsp;<span class="ident" id="4619284"><a href="/hash/crc32/crc32.go.html#4619276">i</a></span>&nbsp;<span class="op" id="4619286">&lt;</span>&nbsp;<span class="num" id="4619288">256</span><span class="op" id="4619291">;</span>&nbsp;<span class="ident" id="4619293"><a href="/hash/crc32/crc32.go.html#4619276">i</a></span><span class="op" id="4619294">++</span>&nbsp;<span class="op" id="4619297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619301">crc</span>&nbsp;<span class="op" id="4619305">:=</span>&nbsp;<span class="builtintype" id="4619308">uint32</span><span class="op" id="4619314">(</span><span class="ident" id="4619315"><a href="/hash/crc32/crc32.go.html#4619276">i</a></span><span class="op" id="4619316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619320">for</span>&nbsp;<span class="ident" id="4619324">j</span>&nbsp;<span class="op" id="4619326">:=</span>&nbsp;<span class="num" id="4619329">0</span><span class="op" id="4619330">;</span>&nbsp;<span class="ident" id="4619332"><a href="/hash/crc32/crc32.go.html#4619324">j</a></span>&nbsp;<span class="op" id="4619334">&lt;</span>&nbsp;<span class="num" id="4619336">8</span><span class="op" id="4619337">;</span>&nbsp;<span class="ident" id="4619339"><a href="/hash/crc32/crc32.go.html#4619324">j</a></span><span class="op" id="4619340">++</span>&nbsp;<span class="op" id="4619343">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619348">if</span>&nbsp;<span class="ident" id="4619351"><a href="/hash/crc32/crc32.go.html#4619301">crc</a></span><span class="op" id="4619354">&amp;</span><span class="num" id="4619355">1</span>&nbsp;<span class="op" id="4619357">==</span>&nbsp;<span class="num" id="4619360">1</span>&nbsp;<span class="op" id="4619362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619368"><a href="/hash/crc32/crc32.go.html#4619301">crc</a></span>&nbsp;<span class="op" id="4619372">=</span>&nbsp;<span class="op" id="4619374">(</span><span class="ident" id="4619375"><a href="/hash/crc32/crc32.go.html#4619301">crc</a></span>&nbsp;<span class="op" id="4619379">&gt;&gt;</span>&nbsp;<span class="num" id="4619382">1</span><span class="op" id="4619383">)</span>&nbsp;<span class="op" id="4619385">^</span>&nbsp;<span class="ident" id="4619387"><a href="/hash/crc32/crc32.go.html#4619232">poly</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4619395">}</span>&nbsp;<span class="keyword" id="4619397">else</span>&nbsp;<span class="op" id="4619402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619408"><a href="/hash/crc32/crc32.go.html#4619301">crc</a></span>&nbsp;<span class="op" id="4619412">&gt;&gt;=</span>&nbsp;<span class="num" id="4619416">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4619421">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4619425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619429"><a href="/hash/crc32/crc32.go.html#4619255">t</a></span><span class="op" id="4619430">[</span><span class="ident" id="4619431"><a href="/hash/crc32/crc32.go.html#4619276">i</a></span><span class="op" id="4619432">]</span>&nbsp;<span class="op" id="4619434">=</span>&nbsp;<span class="ident" id="4619436"><a href="/hash/crc32/crc32.go.html#4619301">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4619441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4619444">return</span>&nbsp;<span class="ident" id="4619451"><a href="/hash/crc32/crc32.go.html#4619255">t</a></span><br>
<span class="lineno"></span><span class="op" id="4619453">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4619456">//&nbsp;digest&nbsp;represents&nbsp;the&nbsp;partial&nbsp;evaluation&nbsp;of&nbsp;a&nbsp;checksum.</span><br>
<span class="lineno"></span><span class="keyword" id="4619515">type</span>&nbsp;<span class="ident" id="4619520">digest</span>&nbsp;<span class="keyword" id="4619527">struct</span>&nbsp;<span class="op" id="4619534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619537">crc</span>&nbsp;<span class="builtintype" id="4619541">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4619549">tab</span>&nbsp;<span class="op" id="4619553">*</span><span class="ident" id="4619554"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><br>
<span class="lineno">85</span><span class="op" id="4619560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4619563">//&nbsp;New&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="4619626">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="4619676">func</span>&nbsp;<span class="ident" id="4619681">New</span><span class="op" id="4619684">(</span><span class="ident" id="4619685">tab</span>&nbsp;<span class="op" id="4619689">*</span><span class="ident" id="4619690"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><span class="op" id="4619695">)</span>&nbsp;<span class="ident" id="4619697"><a href="/hash/crc32/crc32.go.html#4617717">hash</a></span><span class="op" id="4619701">.</span><span class="ident" id="4619702">Hash32</span>&nbsp;<span class="op" id="4619709">{</span>&nbsp;<span class="keyword" id="4619711">return</span>&nbsp;<span class="op" id="4619718">&amp;</span><span class="ident" id="4619719"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4619725">{</span><span class="num" id="4619726">0</span><span class="op" id="4619727">,</span>&nbsp;<span class="ident" id="4619729"><a href="/hash/crc32/crc32.go.html#4619685">tab</a></span><span class="op" id="4619732">}</span>&nbsp;<span class="op" id="4619734">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4619737">//&nbsp;NewIEEE&nbsp;creates&nbsp;a&nbsp;new&nbsp;hash.Hash32&nbsp;computing&nbsp;the&nbsp;CRC-32&nbsp;checksum</span><br>
<span class="lineno"></span><span class="comment" id="4619804">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno"></span><span class="keyword" id="4619834">func</span>&nbsp;<span class="ident" id="4619839">NewIEEE</span><span class="op" id="4619846">(</span><span class="op" id="4619847">)</span>&nbsp;<span class="ident" id="4619849"><a href="/hash/crc32/crc32.go.html#4617717">hash</a></span><span class="op" id="4619853">.</span><span class="ident" id="4619854">Hash32</span>&nbsp;<span class="op" id="4619861">{</span>&nbsp;<span class="keyword" id="4619863">return</span>&nbsp;<span class="ident" id="4619870"><a href="/hash/crc32/crc32.go.html#4619681">New</a></span><span class="op" id="4619873">(</span><span class="ident" id="4619874"><a href="/hash/crc32/crc32.go.html#4618848">IEEETable</a></span><span class="op" id="4619883">)</span>&nbsp;<span class="op" id="4619885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="4619888">func</span>&nbsp;<span class="op" id="4619893">(</span><span class="ident" id="4619894">d</span>&nbsp;<span class="op" id="4619896">*</span><span class="ident" id="4619897"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4619903">)</span>&nbsp;<span class="ident" id="4619905">Size</span><span class="op" id="4619909">(</span><span class="op" id="4619910">)</span>&nbsp;<span class="builtintype" id="4619912">int</span>&nbsp;<span class="op" id="4619916">{</span>&nbsp;<span class="keyword" id="4619918">return</span>&nbsp;<span class="ident" id="4619925"><a href="/hash/crc32/crc32.go.html#4617784">Size</a></span>&nbsp;<span class="op" id="4619930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4619933">func</span>&nbsp;<span class="op" id="4619938">(</span><span class="ident" id="4619939">d</span>&nbsp;<span class="op" id="4619941">*</span><span class="ident" id="4619942"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4619948">)</span>&nbsp;<span class="ident" id="4619950">BlockSize</span><span class="op" id="4619959">(</span><span class="op" id="4619960">)</span>&nbsp;<span class="builtintype" id="4619962">int</span>&nbsp;<span class="op" id="4619966">{</span>&nbsp;<span class="keyword" id="4619968">return</span>&nbsp;<span class="num" id="4619975">1</span>&nbsp;<span class="op" id="4619977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4619980">func</span>&nbsp;<span class="op" id="4619985">(</span><span class="ident" id="4619986">d</span>&nbsp;<span class="op" id="4619988">*</span><span class="ident" id="4619989"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4619995">)</span>&nbsp;<span class="ident" id="4619997">Reset</span><span class="op" id="4620002">(</span><span class="op" id="4620003">)</span>&nbsp;<span class="op" id="4620005">{</span>&nbsp;<span class="ident" id="4620007"><a href="/hash/crc32/crc32.go.html#4619986">d</a></span><span class="op" id="4620008">.</span><span class="ident" id="4620009">crc</span>&nbsp;<span class="op" id="4620013">=</span>&nbsp;<span class="num" id="4620015">0</span>&nbsp;<span class="op" id="4620017">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4620020">func</span>&nbsp;<span class="ident" id="4620025">update</span><span class="op" id="4620031">(</span><span class="ident" id="4620032">crc</span>&nbsp;<span class="builtintype" id="4620036">uint32</span><span class="op" id="4620042">,</span>&nbsp;<span class="ident" id="4620044">tab</span>&nbsp;<span class="op" id="4620048">*</span><span class="ident" id="4620049"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><span class="op" id="4620054">,</span>&nbsp;<span class="ident" id="4620056">p</span>&nbsp;<span class="op" id="4620058">[</span><span class="op" id="4620059">]</span><span class="builtintype" id="4620060">byte</span><span class="op" id="4620064">)</span>&nbsp;<span class="builtintype" id="4620066">uint32</span>&nbsp;<span class="op" id="4620073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4620076"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span>&nbsp;<span class="op" id="4620080">=</span>&nbsp;<span class="op" id="4620082">^</span><span class="ident" id="4620083"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620088">for</span>&nbsp;<span class="ident" id="4620092">_</span><span class="op" id="4620093">,</span>&nbsp;<span class="ident" id="4620095">v</span>&nbsp;<span class="op" id="4620097">:=</span>&nbsp;<span class="keyword" id="4620100">range</span>&nbsp;<span class="ident" id="4620106"><a href="/hash/crc32/crc32.go.html#4620056">p</a></span>&nbsp;<span class="op" id="4620108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4620112"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span>&nbsp;<span class="op" id="4620116">=</span>&nbsp;<span class="ident" id="4620118"><a href="/hash/crc32/crc32.go.html#4620044">tab</a></span><span class="op" id="4620121">[</span><span class="builtintype" id="4620122">byte</span><span class="op" id="4620126">(</span><span class="ident" id="4620127"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span><span class="op" id="4620130">)</span><span class="op" id="4620131">^</span><span class="ident" id="4620132"><a href="/hash/crc32/crc32.go.html#4620095">v</a></span><span class="op" id="4620133">]</span>&nbsp;<span class="op" id="4620135">^</span>&nbsp;<span class="op" id="4620137">(</span><span class="ident" id="4620138"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span>&nbsp;<span class="op" id="4620142">&gt;&gt;</span>&nbsp;<span class="num" id="4620145">8</span><span class="op" id="4620146">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4620149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620152">return</span>&nbsp;<span class="op" id="4620159">^</span><span class="ident" id="4620160"><a href="/hash/crc32/crc32.go.html#4620032">crc</a></span><br>
<span class="lineno"></span><span class="op" id="4620164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4620167">//&nbsp;Update&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;adding&nbsp;the&nbsp;bytes&nbsp;in&nbsp;p&nbsp;to&nbsp;the&nbsp;crc.</span><br>
<span class="lineno">110</span><span class="keyword" id="4620233">func</span>&nbsp;<span class="ident" id="4620238">Update</span><span class="op" id="4620244">(</span><span class="ident" id="4620245">crc</span>&nbsp;<span class="builtintype" id="4620249">uint32</span><span class="op" id="4620255">,</span>&nbsp;<span class="ident" id="4620257">tab</span>&nbsp;<span class="op" id="4620261">*</span><span class="ident" id="4620262"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><span class="op" id="4620267">,</span>&nbsp;<span class="ident" id="4620269">p</span>&nbsp;<span class="op" id="4620271">[</span><span class="op" id="4620272">]</span><span class="builtintype" id="4620273">byte</span><span class="op" id="4620277">)</span>&nbsp;<span class="builtintype" id="4620279">uint32</span>&nbsp;<span class="op" id="4620286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620289">if</span>&nbsp;<span class="ident" id="4620292"><a href="/hash/crc32/crc32.go.html#4620257">tab</a></span>&nbsp;<span class="op" id="4620296">==</span>&nbsp;<span class="ident" id="4620299"><a href="/hash/crc32/crc32.go.html#4618672">castagnoliTable</a></span>&nbsp;<span class="op" id="4620315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620319">return</span>&nbsp;<span class="ident" id="4620326"><a href="/hash/crc32/crc32_amd64x.go.html#4621571">updateCastagnoli</a></span><span class="op" id="4620342">(</span><span class="ident" id="4620343"><a href="/hash/crc32/crc32.go.html#4620245">crc</a></span><span class="op" id="4620346">,</span>&nbsp;<span class="ident" id="4620348"><a href="/hash/crc32/crc32.go.html#4620269">p</a></span><span class="op" id="4620349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4620352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620355">return</span>&nbsp;<span class="ident" id="4620362"><a href="/hash/crc32/crc32.go.html#4620025">update</a></span><span class="op" id="4620368">(</span><span class="ident" id="4620369"><a href="/hash/crc32/crc32.go.html#4620245">crc</a></span><span class="op" id="4620372">,</span>&nbsp;<span class="ident" id="4620374"><a href="/hash/crc32/crc32.go.html#4620257">tab</a></span><span class="op" id="4620377">,</span>&nbsp;<span class="ident" id="4620379"><a href="/hash/crc32/crc32.go.html#4620269">p</a></span><span class="op" id="4620380">)</span><br>
<span class="lineno">115</span><span class="op" id="4620382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4620385">func</span>&nbsp;<span class="op" id="4620390">(</span><span class="ident" id="4620391">d</span>&nbsp;<span class="op" id="4620393">*</span><span class="ident" id="4620394"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4620400">)</span>&nbsp;<span class="ident" id="4620402">Write</span><span class="op" id="4620407">(</span><span class="ident" id="4620408">p</span>&nbsp;<span class="op" id="4620410">[</span><span class="op" id="4620411">]</span><span class="builtintype" id="4620412">byte</span><span class="op" id="4620416">)</span>&nbsp;<span class="op" id="4620418">(</span><span class="ident" id="4620419">n</span>&nbsp;<span class="builtintype" id="4620421">int</span><span class="op" id="4620424">,</span>&nbsp;<span class="ident" id="4620426">err</span>&nbsp;<span class="builtintype" id="4620430">error</span><span class="op" id="4620435">)</span>&nbsp;<span class="op" id="4620437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4620440"><a href="/hash/crc32/crc32.go.html#4620391">d</a></span><span class="op" id="4620441">.</span><span class="ident" id="4620442">crc</span>&nbsp;<span class="op" id="4620446">=</span>&nbsp;<span class="ident" id="4620448"><a href="/hash/crc32/crc32.go.html#4620238">Update</a></span><span class="op" id="4620454">(</span><span class="ident" id="4620455"><a href="/hash/crc32/crc32.go.html#4620391">d</a></span><span class="op" id="4620456">.</span><span class="ident" id="4620457">crc</span><span class="op" id="4620460">,</span>&nbsp;<span class="ident" id="4620462"><a href="/hash/crc32/crc32.go.html#4620391">d</a></span><span class="op" id="4620463">.</span><span class="ident" id="4620464">tab</span><span class="op" id="4620467">,</span>&nbsp;<span class="ident" id="4620469"><a href="/hash/crc32/crc32.go.html#4620408">p</a></span><span class="op" id="4620470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620473">return</span>&nbsp;<span class="builtinfunc" id="4620480">len</span><span class="op" id="4620483">(</span><span class="ident" id="4620484"><a href="/hash/crc32/crc32.go.html#4620408">p</a></span><span class="op" id="4620485">)</span><span class="op" id="4620486">,</span>&nbsp;<span class="ident" id="4620488">nil</span><br>
<span class="lineno">120</span><span class="op" id="4620492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4620495">func</span>&nbsp;<span class="op" id="4620500">(</span><span class="ident" id="4620501">d</span>&nbsp;<span class="op" id="4620503">*</span><span class="ident" id="4620504"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4620510">)</span>&nbsp;<span class="ident" id="4620512">Sum32</span><span class="op" id="4620517">(</span><span class="op" id="4620518">)</span>&nbsp;<span class="builtintype" id="4620520">uint32</span>&nbsp;<span class="op" id="4620527">{</span>&nbsp;<span class="keyword" id="4620529">return</span>&nbsp;<span class="ident" id="4620536"><a href="/hash/crc32/crc32.go.html#4620501">d</a></span><span class="op" id="4620537">.</span><span class="ident" id="4620538">crc</span>&nbsp;<span class="op" id="4620542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4620545">func</span>&nbsp;<span class="op" id="4620550">(</span><span class="ident" id="4620551">d</span>&nbsp;<span class="op" id="4620553">*</span><span class="ident" id="4620554"><a href="/hash/crc32/crc32.go.html#4619520">digest</a></span><span class="op" id="4620560">)</span>&nbsp;<span class="ident" id="4620562">Sum</span><span class="op" id="4620565">(</span><span class="ident" id="4620566">in</span>&nbsp;<span class="op" id="4620569">[</span><span class="op" id="4620570">]</span><span class="builtintype" id="4620571">byte</span><span class="op" id="4620575">)</span>&nbsp;<span class="op" id="4620577">[</span><span class="op" id="4620578">]</span><span class="builtintype" id="4620579">byte</span>&nbsp;<span class="op" id="4620584">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4620587">s</span>&nbsp;<span class="op" id="4620589">:=</span>&nbsp;<span class="ident" id="4620592"><a href="/hash/crc32/crc32.go.html#4620551">d</a></span><span class="op" id="4620593">.</span><span class="ident" id="4620594">Sum32</span><span class="op" id="4620599">(</span><span class="op" id="4620600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4620603">return</span>&nbsp;<span class="builtinfunc" id="4620610">append</span><span class="op" id="4620616">(</span><span class="ident" id="4620617"><a href="/hash/crc32/crc32.go.html#4620566">in</a></span><span class="op" id="4620619">,</span>&nbsp;<span class="builtintype" id="4620621">byte</span><span class="op" id="4620625">(</span><span class="ident" id="4620626"><a href="/hash/crc32/crc32.go.html#4620587">s</a></span><span class="op" id="4620627">&gt;&gt;</span><span class="num" id="4620629">24</span><span class="op" id="4620631">)</span><span class="op" id="4620632">,</span>&nbsp;<span class="builtintype" id="4620634">byte</span><span class="op" id="4620638">(</span><span class="ident" id="4620639"><a href="/hash/crc32/crc32.go.html#4620587">s</a></span><span class="op" id="4620640">&gt;&gt;</span><span class="num" id="4620642">16</span><span class="op" id="4620644">)</span><span class="op" id="4620645">,</span>&nbsp;<span class="builtintype" id="4620647">byte</span><span class="op" id="4620651">(</span><span class="ident" id="4620652"><a href="/hash/crc32/crc32.go.html#4620587">s</a></span><span class="op" id="4620653">&gt;&gt;</span><span class="num" id="4620655">8</span><span class="op" id="4620656">)</span><span class="op" id="4620657">,</span>&nbsp;<span class="builtintype" id="4620659">byte</span><span class="op" id="4620663">(</span><span class="ident" id="4620664"><a href="/hash/crc32/crc32.go.html#4620587">s</a></span><span class="op" id="4620665">)</span><span class="op" id="4620666">)</span><br>
<span class="lineno"></span><span class="op" id="4620668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4620671">//&nbsp;Checksum&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno">130</span><span class="comment" id="4620719">//&nbsp;using&nbsp;the&nbsp;polynomial&nbsp;represented&nbsp;by&nbsp;the&nbsp;Table.</span><br>
<span class="lineno"></span><span class="keyword" id="4620769">func</span>&nbsp;<span class="ident" id="4620774">Checksum</span><span class="op" id="4620782">(</span><span class="ident" id="4620783">data</span>&nbsp;<span class="op" id="4620788">[</span><span class="op" id="4620789">]</span><span class="builtintype" id="4620790">byte</span><span class="op" id="4620794">,</span>&nbsp;<span class="ident" id="4620796">tab</span>&nbsp;<span class="op" id="4620800">*</span><span class="ident" id="4620801"><a href="/hash/crc32/crc32.go.html#4618396">Table</a></span><span class="op" id="4620806">)</span>&nbsp;<span class="builtintype" id="4620808">uint32</span>&nbsp;<span class="op" id="4620815">{</span>&nbsp;<span class="keyword" id="4620817">return</span>&nbsp;<span class="ident" id="4620824"><a href="/hash/crc32/crc32.go.html#4620238">Update</a></span><span class="op" id="4620830">(</span><span class="num" id="4620831">0</span><span class="op" id="4620832">,</span>&nbsp;<span class="ident" id="4620834"><a href="/hash/crc32/crc32.go.html#4620796">tab</a></span><span class="op" id="4620837">,</span>&nbsp;<span class="ident" id="4620839"><a href="/hash/crc32/crc32.go.html#4620783">data</a></span><span class="op" id="4620843">)</span>&nbsp;<span class="op" id="4620845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4620848">//&nbsp;ChecksumIEEE&nbsp;returns&nbsp;the&nbsp;CRC-32&nbsp;checksum&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="4620900">//&nbsp;using&nbsp;the&nbsp;IEEE&nbsp;polynomial.</span><br>
<span class="lineno">135</span><span class="keyword" id="4620930">func</span>&nbsp;<span class="ident" id="4620935">ChecksumIEEE</span><span class="op" id="4620947">(</span><span class="ident" id="4620948">data</span>&nbsp;<span class="op" id="4620953">[</span><span class="op" id="4620954">]</span><span class="builtintype" id="4620955">byte</span><span class="op" id="4620959">)</span>&nbsp;<span class="builtintype" id="4620961">uint32</span>&nbsp;<span class="op" id="4620968">{</span>&nbsp;<span class="keyword" id="4620970">return</span>&nbsp;<span class="ident" id="4620977"><a href="/hash/crc32/crc32.go.html#4620025">update</a></span><span class="op" id="4620983">(</span><span class="num" id="4620984">0</span><span class="op" id="4620985">,</span>&nbsp;<span class="ident" id="4620987"><a href="/hash/crc32/crc32.go.html#4618848">IEEETable</a></span><span class="op" id="4620996">,</span>&nbsp;<span class="ident" id="4620998"><a href="/hash/crc32/crc32.go.html#4620948">data</a></span><span class="op" id="4621002">)</span>&nbsp;<span class="op" id="4621004">}</span>
</div>
</body>
</html>
