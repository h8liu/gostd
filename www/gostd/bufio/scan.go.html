<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>bufio</h2>
<ul>
<li><a href="/gostd/bufio/bufio.go.html">bufio.go</a></li>
<li><a href="/gostd/bufio/bufio_test.go.html">bufio_test.go</a></li>
<li><a href="/gostd/bufio/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/bufio/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/bufio/scan.go.html" class="current">scan.go</a></li>
<li><a href="/gostd/bufio/scan_test.go.html">scan_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1371122">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1371177">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1371231">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1371282">package</span>&nbsp;<span class="ident" id="1371290">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1371297">import</span>&nbsp;<span class="op" id="1371304">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1371307">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1371316">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1371326">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1371332">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="1371347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1371350">//&nbsp;Scanner&nbsp;provides&nbsp;a&nbsp;convenient&nbsp;interface&nbsp;for&nbsp;reading&nbsp;data&nbsp;such&nbsp;as</span><br>
<span class="lineno">15</span><span class="comment" id="1371418">//&nbsp;a&nbsp;file&nbsp;of&nbsp;newline-delimited&nbsp;lines&nbsp;of&nbsp;text.&nbsp;Successive&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1371484">//&nbsp;the&nbsp;Scan&nbsp;method&nbsp;will&nbsp;step&nbsp;through&nbsp;the&nbsp;&#39;tokens&#39;&nbsp;of&nbsp;a&nbsp;file,&nbsp;skipping</span><br>
<span class="lineno"></span><span class="comment" id="1371554">//&nbsp;the&nbsp;bytes&nbsp;between&nbsp;the&nbsp;tokens.&nbsp;The&nbsp;specification&nbsp;of&nbsp;a&nbsp;token&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1371619">//&nbsp;defined&nbsp;by&nbsp;a&nbsp;split&nbsp;function&nbsp;of&nbsp;type&nbsp;SplitFunc;&nbsp;the&nbsp;default&nbsp;split</span><br>
<span class="lineno"></span><span class="comment" id="1371687">//&nbsp;function&nbsp;breaks&nbsp;the&nbsp;input&nbsp;into&nbsp;lines&nbsp;with&nbsp;line&nbsp;termination&nbsp;stripped.&nbsp;Split</span><br>
<span class="lineno">20</span><span class="comment" id="1371765">//&nbsp;functions&nbsp;are&nbsp;defined&nbsp;in&nbsp;this&nbsp;package&nbsp;for&nbsp;scanning&nbsp;a&nbsp;file&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="1371831">//&nbsp;lines,&nbsp;bytes,&nbsp;UTF-8-encoded&nbsp;runes,&nbsp;and&nbsp;space-delimited&nbsp;words.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="1371900">//&nbsp;client&nbsp;may&nbsp;instead&nbsp;provide&nbsp;a&nbsp;custom&nbsp;split&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="1371955">//</span><br>
<span class="lineno"></span><span class="comment" id="1371958">//&nbsp;Scanning&nbsp;stops&nbsp;unrecoverably&nbsp;at&nbsp;EOF,&nbsp;the&nbsp;first&nbsp;I/O&nbsp;error,&nbsp;or&nbsp;a&nbsp;token&nbsp;too</span><br>
<span class="lineno">25</span><span class="comment" id="1372034">//&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;When&nbsp;a&nbsp;scan&nbsp;stops,&nbsp;the&nbsp;reader&nbsp;may&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="1372104">//&nbsp;advanced&nbsp;arbitrarily&nbsp;far&nbsp;past&nbsp;the&nbsp;last&nbsp;token.&nbsp;Programs&nbsp;that&nbsp;need&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="1372177">//&nbsp;control&nbsp;over&nbsp;error&nbsp;handling&nbsp;or&nbsp;large&nbsp;tokens,&nbsp;or&nbsp;must&nbsp;run&nbsp;sequential&nbsp;scans</span><br>
<span class="lineno"></span><span class="comment" id="1372254">//&nbsp;on&nbsp;a&nbsp;reader,&nbsp;should&nbsp;use&nbsp;bufio.Reader&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="1372303">//</span><br>
<span class="lineno">30</span><span class="keyword" id="1372306">type</span>&nbsp;<span class="ident" id="1372311">Scanner</span>&nbsp;<span class="keyword" id="1372319">struct</span>&nbsp;<span class="op" id="1372326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372329">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372342"><a href="/gostd/bufio/scan.go.html#1371326">io</a></span><span class="op" id="1372344">.</span><span class="ident" id="1372345"><a href="/gostd/io/io.go.html#1421823">Reader</a></span>&nbsp;<span class="comment" id="1372352">//&nbsp;The&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372391">split</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372404"><a href="/gostd/bufio/scan.go.html#1373784">SplitFunc</a></span>&nbsp;<span class="comment" id="1372414">//&nbsp;The&nbsp;function&nbsp;to&nbsp;split&nbsp;the&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372452">maxTokenSize</span>&nbsp;<span class="builtintype" id="1372465">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372475">//&nbsp;Maximum&nbsp;size&nbsp;of&nbsp;a&nbsp;token;&nbsp;modified&nbsp;by&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372523">token</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372536">[</span><span class="op" id="1372537">]</span><span class="builtintype" id="1372538">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372546">//&nbsp;Last&nbsp;token&nbsp;returned&nbsp;by&nbsp;split.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372580">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1372593">[</span><span class="op" id="1372594">]</span><span class="builtintype" id="1372595">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372603">//&nbsp;Buffer&nbsp;used&nbsp;as&nbsp;argument&nbsp;to&nbsp;split.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372641">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1372654">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372664">//&nbsp;First&nbsp;non-processed&nbsp;byte&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372701">end</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1372714">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372724">//&nbsp;End&nbsp;of&nbsp;data&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372748">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1372761">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372771">//&nbsp;Sticky&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1372789">empties</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1372802">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1372812">//&nbsp;Count&nbsp;of&nbsp;successive&nbsp;empty&nbsp;tokens.</span><br>
<span class="lineno">40</span><span class="op" id="1372849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1372852">//&nbsp;SplitFunc&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;the&nbsp;split&nbsp;function&nbsp;used&nbsp;to&nbsp;tokenize&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1372925">//&nbsp;input.&nbsp;The&nbsp;arguments&nbsp;are&nbsp;an&nbsp;initial&nbsp;substring&nbsp;of&nbsp;the&nbsp;remaining&nbsp;unprocessed</span><br>
<span class="lineno"></span><span class="comment" id="1373003">//&nbsp;data&nbsp;and&nbsp;a&nbsp;flag,&nbsp;atEOF,&nbsp;that&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Reader&nbsp;has&nbsp;no&nbsp;more&nbsp;data</span><br>
<span class="lineno">45</span><span class="comment" id="1373079">//&nbsp;to&nbsp;give.&nbsp;The&nbsp;return&nbsp;values&nbsp;are&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;advance&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="1373154">//&nbsp;and&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;return&nbsp;to&nbsp;the&nbsp;user,&nbsp;plus&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1373229">//&nbsp;data&nbsp;does&nbsp;not&nbsp;yet&nbsp;hold&nbsp;a&nbsp;complete&nbsp;token,&nbsp;for&nbsp;instance&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="1373307">//&nbsp;while&nbsp;scanning&nbsp;lines,&nbsp;SplitFunc&nbsp;can&nbsp;return&nbsp;(0,&nbsp;nil,&nbsp;nil)&nbsp;to&nbsp;signal&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1373381">//&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;more&nbsp;data&nbsp;into&nbsp;the&nbsp;slice&nbsp;and&nbsp;try&nbsp;again&nbsp;with&nbsp;a&nbsp;longer&nbsp;slice</span><br>
<span class="lineno">50</span><span class="comment" id="1373459">//&nbsp;starting&nbsp;at&nbsp;the&nbsp;same&nbsp;point&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="1373503">//</span><br>
<span class="lineno"></span><span class="comment" id="1373506">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;error&nbsp;is&nbsp;non-nil,&nbsp;scanning&nbsp;stops&nbsp;and&nbsp;the&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="1373572">//&nbsp;is&nbsp;returned&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="comment" id="1373602">//</span><br>
<span class="lineno">55</span><span class="comment" id="1373605">//&nbsp;The&nbsp;function&nbsp;is&nbsp;never&nbsp;called&nbsp;with&nbsp;an&nbsp;empty&nbsp;data&nbsp;slice&nbsp;unless&nbsp;atEOF</span><br>
<span class="lineno"></span><span class="comment" id="1373675">//&nbsp;is&nbsp;true.&nbsp;If&nbsp;atEOF&nbsp;is&nbsp;true,&nbsp;however,&nbsp;data&nbsp;may&nbsp;be&nbsp;non-empty&nbsp;and,</span><br>
<span class="lineno"></span><span class="comment" id="1373741">//&nbsp;as&nbsp;always,&nbsp;holds&nbsp;unprocessed&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="1373779">type</span>&nbsp;<span class="ident" id="1373784">SplitFunc</span>&nbsp;<span class="keyword" id="1373794">func</span><span class="op" id="1373798">(</span><span class="ident" id="1373799">data</span>&nbsp;<span class="op" id="1373804">[</span><span class="op" id="1373805">]</span><span class="builtintype" id="1373806">byte</span><span class="op" id="1373810">,</span>&nbsp;<span class="ident" id="1373812">atEOF</span>&nbsp;<span class="builtintype" id="1373818">bool</span><span class="op" id="1373822">)</span>&nbsp;<span class="op" id="1373824">(</span><span class="ident" id="1373825">advance</span>&nbsp;<span class="builtintype" id="1373833">int</span><span class="op" id="1373836">,</span>&nbsp;<span class="ident" id="1373838">token</span>&nbsp;<span class="op" id="1373844">[</span><span class="op" id="1373845">]</span><span class="builtintype" id="1373846">byte</span><span class="op" id="1373850">,</span>&nbsp;<span class="ident" id="1373852">err</span>&nbsp;<span class="builtintype" id="1373856">error</span><span class="op" id="1373861">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="1373864">//&nbsp;Errors&nbsp;returned&nbsp;by&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="1373895">var</span>&nbsp;<span class="op" id="1373899">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1373902">ErrTooLong</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1373921">=</span>&nbsp;<span class="ident" id="1373923"><a href="/gostd/bufio/scan.go.html#1371316">errors</a></span><span class="op" id="1373929">.</span><span class="ident" id="1373930"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1373933">(</span><span class="string" id="1373934">&#34;bufio.Scanner:&nbsp;token&nbsp;too&nbsp;long&#34;</span><span class="op" id="1373965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1373968">ErrNegativeAdvance</span>&nbsp;<span class="op" id="1373987">=</span>&nbsp;<span class="ident" id="1373989"><a href="/gostd/bufio/scan.go.html#1371316">errors</a></span><span class="op" id="1373995">.</span><span class="ident" id="1373996"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1373999">(</span><span class="string" id="1374000">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;negative&nbsp;advance&nbsp;count&#34;</span><span class="op" id="1374057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374060">ErrAdvanceTooFar</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1374079">=</span>&nbsp;<span class="ident" id="1374081"><a href="/gostd/bufio/scan.go.html#1371316">errors</a></span><span class="op" id="1374087">.</span><span class="ident" id="1374088"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="1374091">(</span><span class="string" id="1374092">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;advance&nbsp;count&nbsp;beyond&nbsp;input&#34;</span><span class="op" id="1374153">)</span><br>
<span class="lineno">65</span><span class="op" id="1374155">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1374158">const</span>&nbsp;<span class="op" id="1374164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1374167">//&nbsp;MaxScanTokenSize&nbsp;is&nbsp;the&nbsp;maximum&nbsp;size&nbsp;used&nbsp;to&nbsp;buffer&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1374232">//&nbsp;The&nbsp;actual&nbsp;maximum&nbsp;token&nbsp;size&nbsp;may&nbsp;be&nbsp;smaller&nbsp;as&nbsp;the&nbsp;buffer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1374295">//&nbsp;may&nbsp;need&nbsp;to&nbsp;include,&nbsp;for&nbsp;instance,&nbsp;a&nbsp;newline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374345">MaxScanTokenSize</span>&nbsp;<span class="op" id="1374362">=</span>&nbsp;<span class="num" id="1374364">64</span>&nbsp;<span class="op" id="1374367">*</span>&nbsp;<span class="num" id="1374369">1024</span><br>
<span class="lineno"></span><span class="op" id="1374374">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1374377">//&nbsp;NewScanner&nbsp;returns&nbsp;a&nbsp;new&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno">75</span><span class="comment" id="1374429">//&nbsp;The&nbsp;split&nbsp;function&nbsp;defaults&nbsp;to&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="1374474">func</span>&nbsp;<span class="ident" id="1374479">NewScanner</span><span class="op" id="1374489">(</span><span class="ident" id="1374490">r</span>&nbsp;<span class="ident" id="1374492"><a href="/gostd/bufio/scan.go.html#1371326">io</a></span><span class="op" id="1374494">.</span><span class="ident" id="1374495"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="1374501">)</span>&nbsp;<span class="op" id="1374503">*</span><span class="ident" id="1374504"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span>&nbsp;<span class="op" id="1374512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374515">return</span>&nbsp;<span class="op" id="1374522">&amp;</span><span class="ident" id="1374523"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1374530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374534"><a href="/gostd/bufio/scan.go.html#1372329">r</a></span><span class="op" id="1374535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374548"><a href="/gostd/bufio/scan.go.html#1374490">r</a></span><span class="op" id="1374549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374553"><a href="/gostd/bufio/scan.go.html#1372391">split</a></span><span class="op" id="1374558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374567"><a href="/gostd/bufio/scan.go.html#1380873">ScanLines</a></span><span class="op" id="1374576">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374580"><a href="/gostd/bufio/scan.go.html#1372452">maxTokenSize</a></span><span class="op" id="1374592">:</span>&nbsp;<span class="ident" id="1374594"><a href="/gostd/bufio/scan.go.html#1374345">MaxScanTokenSize</a></span><span class="op" id="1374610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1374614"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1374617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1374628">make</span><span class="op" id="1374632">(</span><span class="op" id="1374633">[</span><span class="op" id="1374634">]</span><span class="builtintype" id="1374635">byte</span><span class="op" id="1374639">,</span>&nbsp;<span class="num" id="1374641">4096</span><span class="op" id="1374645">)</span><span class="op" id="1374646">,</span>&nbsp;<span class="comment" id="1374648">//&nbsp;Plausible&nbsp;starting&nbsp;size;&nbsp;needn&#39;t&nbsp;be&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374695">}</span><br>
<span class="lineno"></span><span class="op" id="1374697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="1374700">//&nbsp;Err&nbsp;returns&nbsp;the&nbsp;first&nbsp;non-EOF&nbsp;error&nbsp;that&nbsp;was&nbsp;encountered&nbsp;by&nbsp;the&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="1374776">func</span>&nbsp;<span class="op" id="1374781">(</span><span class="ident" id="1374782">s</span>&nbsp;<span class="op" id="1374784">*</span><span class="ident" id="1374785"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1374792">)</span>&nbsp;<span class="ident" id="1374794">Err</span><span class="op" id="1374797">(</span><span class="op" id="1374798">)</span>&nbsp;<span class="builtintype" id="1374800">error</span>&nbsp;<span class="op" id="1374806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374809">if</span>&nbsp;<span class="ident" id="1374812"><a href="/gostd/bufio/scan.go.html#1374782">s</a></span><span class="op" id="1374813">.</span><span class="ident" id="1374814"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1374818">==</span>&nbsp;<span class="ident" id="1374821"><a href="/gostd/bufio/scan.go.html#1371326">io</a></span><span class="op" id="1374823">.</span><span class="ident" id="1374824"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="1374828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374832">return</span>&nbsp;<span class="builtintype" id="1374839">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1374844">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1374847">return</span>&nbsp;<span class="ident" id="1374854"><a href="/gostd/bufio/scan.go.html#1374782">s</a></span><span class="op" id="1374855">.</span><span class="ident" id="1374856"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span><br>
<span class="lineno"></span><span class="op" id="1374860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1374863">//&nbsp;Bytes&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan.</span><br>
<span class="lineno"></span><span class="comment" id="1374931">//&nbsp;The&nbsp;underlying&nbsp;array&nbsp;may&nbsp;point&nbsp;to&nbsp;data&nbsp;that&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno">95</span><span class="comment" id="1374998">//&nbsp;by&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;Scan.&nbsp;It&nbsp;does&nbsp;no&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="1375054">func</span>&nbsp;<span class="op" id="1375059">(</span><span class="ident" id="1375060">s</span>&nbsp;<span class="op" id="1375062">*</span><span class="ident" id="1375063"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1375070">)</span>&nbsp;<span class="ident" id="1375072">Bytes</span><span class="op" id="1375077">(</span><span class="op" id="1375078">)</span>&nbsp;<span class="op" id="1375080">[</span><span class="op" id="1375081">]</span><span class="builtintype" id="1375082">byte</span>&nbsp;<span class="op" id="1375087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1375090">return</span>&nbsp;<span class="ident" id="1375097"><a href="/gostd/bufio/scan.go.html#1375060">s</a></span><span class="op" id="1375098">.</span><span class="ident" id="1375099"><a href="/gostd/bufio/scan.go.html#1372523">token</a></span><br>
<span class="lineno"></span><span class="op" id="1375105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="1375108">//&nbsp;Text&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan</span><br>
<span class="lineno"></span><span class="comment" id="1375174">//&nbsp;as&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;string&nbsp;holding&nbsp;its&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="1375224">func</span>&nbsp;<span class="op" id="1375229">(</span><span class="ident" id="1375230">s</span>&nbsp;<span class="op" id="1375232">*</span><span class="ident" id="1375233"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1375240">)</span>&nbsp;<span class="ident" id="1375242">Text</span><span class="op" id="1375246">(</span><span class="op" id="1375247">)</span>&nbsp;<span class="builtintype" id="1375249">string</span>&nbsp;<span class="op" id="1375256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1375259">return</span>&nbsp;<span class="builtintype" id="1375266">string</span><span class="op" id="1375272">(</span><span class="ident" id="1375273"><a href="/gostd/bufio/scan.go.html#1375230">s</a></span><span class="op" id="1375274">.</span><span class="ident" id="1375275"><a href="/gostd/bufio/scan.go.html#1372523">token</a></span><span class="op" id="1375280">)</span><br>
<span class="lineno"></span><span class="op" id="1375282">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span><span class="comment" id="1375285">//&nbsp;Scan&nbsp;advances&nbsp;the&nbsp;Scanner&nbsp;to&nbsp;the&nbsp;next&nbsp;token,&nbsp;which&nbsp;will&nbsp;then&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="1375352">//&nbsp;available&nbsp;through&nbsp;the&nbsp;Bytes&nbsp;or&nbsp;Text&nbsp;method.&nbsp;It&nbsp;returns&nbsp;false&nbsp;when&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1375425">//&nbsp;scan&nbsp;stops,&nbsp;either&nbsp;by&nbsp;reaching&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;or&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="1375493">//&nbsp;After&nbsp;Scan&nbsp;returns&nbsp;false,&nbsp;the&nbsp;Err&nbsp;method&nbsp;will&nbsp;return&nbsp;any&nbsp;error&nbsp;that</span><br>
<span class="lineno">110</span><span class="comment" id="1375564">//&nbsp;occurred&nbsp;during&nbsp;scanning,&nbsp;except&nbsp;that&nbsp;if&nbsp;it&nbsp;was&nbsp;io.EOF,&nbsp;Err</span><br>
<span class="lineno"></span><span class="comment" id="1375627">//&nbsp;will&nbsp;return&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="1375647">//&nbsp;Split&nbsp;panics&nbsp;if&nbsp;the&nbsp;split&nbsp;function&nbsp;returns&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="1375718">//&nbsp;advancing&nbsp;the&nbsp;input.&nbsp;This&nbsp;is&nbsp;a&nbsp;common&nbsp;error&nbsp;mode&nbsp;for&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="1375784">func</span>&nbsp;<span class="op" id="1375789">(</span><span class="ident" id="1375790">s</span>&nbsp;<span class="op" id="1375792">*</span><span class="ident" id="1375793"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1375800">)</span>&nbsp;<span class="ident" id="1375802">Scan</span><span class="op" id="1375806">(</span><span class="op" id="1375807">)</span>&nbsp;<span class="builtintype" id="1375809">bool</span>&nbsp;<span class="op" id="1375814">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1375817">//&nbsp;Loop&nbsp;until&nbsp;we&nbsp;have&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1375849">for</span>&nbsp;<span class="op" id="1375853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1375857">//&nbsp;See&nbsp;if&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;already&nbsp;have.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1375915">//&nbsp;If&nbsp;we&#39;ve&nbsp;run&nbsp;out&nbsp;of&nbsp;data&nbsp;but&nbsp;have&nbsp;an&nbsp;error,&nbsp;give&nbsp;the&nbsp;split&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1375988">//&nbsp;a&nbsp;chance&nbsp;to&nbsp;recover&nbsp;any&nbsp;remaining,&nbsp;possibly&nbsp;empty&nbsp;token.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376050">if</span>&nbsp;<span class="ident" id="1376053"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376054">.</span><span class="ident" id="1376055"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1376059">&gt;</span>&nbsp;<span class="ident" id="1376061"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376062">.</span><span class="ident" id="1376063"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1376069">||</span>&nbsp;<span class="ident" id="1376072"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376073">.</span><span class="ident" id="1376074"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1376078">!=</span>&nbsp;<span class="builtintype" id="1376081">nil</span>&nbsp;<span class="op" id="1376085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376090">advance</span><span class="op" id="1376097">,</span>&nbsp;<span class="ident" id="1376099">token</span><span class="op" id="1376104">,</span>&nbsp;<span class="ident" id="1376106">err</span>&nbsp;<span class="op" id="1376110">:=</span>&nbsp;<span class="ident" id="1376113"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376114">.</span><span class="ident" id="1376115"><a href="/gostd/bufio/scan.go.html#1372391">split</a></span><span class="op" id="1376120">(</span><span class="ident" id="1376121"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376122">.</span><span class="ident" id="1376123"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1376126">[</span><span class="ident" id="1376127"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376128">.</span><span class="ident" id="1376129"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span><span class="op" id="1376134">:</span><span class="ident" id="1376135"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376136">.</span><span class="ident" id="1376137"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span><span class="op" id="1376140">]</span><span class="op" id="1376141">,</span>&nbsp;<span class="ident" id="1376143"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376144">.</span><span class="ident" id="1376145"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1376149">!=</span>&nbsp;<span class="builtintype" id="1376152">nil</span><span class="op" id="1376155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376160">if</span>&nbsp;<span class="ident" id="1376163"><a href="/gostd/bufio/scan.go.html#1376106">err</a></span>&nbsp;<span class="op" id="1376167">!=</span>&nbsp;<span class="builtintype" id="1376170">nil</span>&nbsp;<span class="op" id="1376174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376180"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376181">.</span><span class="ident" id="1376182"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1376188">(</span><span class="ident" id="1376189"><a href="/gostd/bufio/scan.go.html#1376106">err</a></span><span class="op" id="1376192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376198">return</span>&nbsp;<span class="builtintype" id="1376205">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376219">if</span>&nbsp;<span class="op" id="1376222">!</span><span class="ident" id="1376223"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376224">.</span><span class="ident" id="1376225"><a href="/gostd/bufio/scan.go.html#1378034">advance</a></span><span class="op" id="1376232">(</span><span class="ident" id="1376233"><a href="/gostd/bufio/scan.go.html#1376090">advance</a></span><span class="op" id="1376240">)</span>&nbsp;<span class="op" id="1376242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376248">return</span>&nbsp;<span class="builtintype" id="1376255">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376269"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376270">.</span><span class="ident" id="1376271"><a href="/gostd/bufio/scan.go.html#1372523">token</a></span>&nbsp;<span class="op" id="1376277">=</span>&nbsp;<span class="ident" id="1376279"><a href="/gostd/bufio/scan.go.html#1376099">token</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376288">if</span>&nbsp;<span class="ident" id="1376291"><a href="/gostd/bufio/scan.go.html#1376099">token</a></span>&nbsp;<span class="op" id="1376297">!=</span>&nbsp;<span class="builtintype" id="1376300">nil</span>&nbsp;<span class="op" id="1376304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376310">if</span>&nbsp;<span class="ident" id="1376313"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376314">.</span><span class="ident" id="1376315"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1376319">==</span>&nbsp;<span class="builtintype" id="1376322">nil</span>&nbsp;<span class="op" id="1376326">||</span>&nbsp;<span class="ident" id="1376329"><a href="/gostd/bufio/scan.go.html#1376090">advance</a></span>&nbsp;<span class="op" id="1376337">&gt;</span>&nbsp;<span class="num" id="1376339">0</span>&nbsp;<span class="op" id="1376341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376348"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376349">.</span><span class="ident" id="1376350"><a href="/gostd/bufio/scan.go.html#1372789">empties</a></span>&nbsp;<span class="op" id="1376358">=</span>&nbsp;<span class="num" id="1376360">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376366">}</span>&nbsp;<span class="keyword" id="1376368">else</span>&nbsp;<span class="op" id="1376373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376380">//&nbsp;Returning&nbsp;tokens&nbsp;not&nbsp;advancing&nbsp;input&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376433"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376434">.</span><span class="ident" id="1376435"><a href="/gostd/bufio/scan.go.html#1372789">empties</a></span><span class="op" id="1376442">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376450">if</span>&nbsp;<span class="ident" id="1376453"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376454">.</span><span class="ident" id="1376455"><a href="/gostd/bufio/scan.go.html#1372789">empties</a></span>&nbsp;<span class="op" id="1376463">&gt;</span>&nbsp;<span class="num" id="1376465">100</span>&nbsp;<span class="op" id="1376469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1376477">panic</span><span class="op" id="1376482">(</span><span class="string" id="1376483">&#34;bufio.Scan:&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without&nbsp;progressing&#34;</span><span class="op" id="1376533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376546">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376552">return</span>&nbsp;<span class="builtintype" id="1376559">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376575">//&nbsp;We&nbsp;cannot&nbsp;generate&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;are&nbsp;holding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376633">//&nbsp;If&nbsp;we&#39;ve&nbsp;already&nbsp;hit&nbsp;EOF&nbsp;or&nbsp;an&nbsp;I/O&nbsp;error,&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376693">if</span>&nbsp;<span class="ident" id="1376696"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376697">.</span><span class="ident" id="1376698"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1376702">!=</span>&nbsp;<span class="builtintype" id="1376705">nil</span>&nbsp;<span class="op" id="1376709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376714">//&nbsp;Shut&nbsp;it&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376734"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376735">.</span><span class="ident" id="1376736"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1376742">=</span>&nbsp;<span class="num" id="1376744">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1376749"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376750">.</span><span class="ident" id="1376751"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1376755">=</span>&nbsp;<span class="num" id="1376757">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376762">return</span>&nbsp;<span class="builtintype" id="1376769">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1376777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376781">//&nbsp;Must&nbsp;read&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376807">//&nbsp;First,&nbsp;shift&nbsp;data&nbsp;to&nbsp;beginning&nbsp;of&nbsp;buffer&nbsp;if&nbsp;there&#39;s&nbsp;lots&nbsp;of&nbsp;empty&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1376884">//&nbsp;or&nbsp;space&nbsp;is&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1376909">if</span>&nbsp;<span class="ident" id="1376912"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376913">.</span><span class="ident" id="1376914"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1376920">&gt;</span>&nbsp;<span class="num" id="1376922">0</span>&nbsp;<span class="op" id="1376924">&amp;&amp;</span>&nbsp;<span class="op" id="1376927">(</span><span class="ident" id="1376928"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376929">.</span><span class="ident" id="1376930"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1376934">==</span>&nbsp;<span class="builtinfunc" id="1376937">len</span><span class="op" id="1376940">(</span><span class="ident" id="1376941"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376942">.</span><span class="ident" id="1376943"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1376946">)</span>&nbsp;<span class="op" id="1376948">||</span>&nbsp;<span class="ident" id="1376951"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376952">.</span><span class="ident" id="1376953"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1376959">&gt;</span>&nbsp;<span class="builtinfunc" id="1376961">len</span><span class="op" id="1376964">(</span><span class="ident" id="1376965"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376966">.</span><span class="ident" id="1376967"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1376970">)</span><span class="op" id="1376971">/</span><span class="num" id="1376972">2</span><span class="op" id="1376973">)</span>&nbsp;<span class="op" id="1376975">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1376980">copy</span><span class="op" id="1376984">(</span><span class="ident" id="1376985"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376986">.</span><span class="ident" id="1376987"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1376990">,</span>&nbsp;<span class="ident" id="1376992"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376993">.</span><span class="ident" id="1376994"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1376997">[</span><span class="ident" id="1376998"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1376999">.</span><span class="ident" id="1377000"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span><span class="op" id="1377005">:</span><span class="ident" id="1377006"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377007">.</span><span class="ident" id="1377008"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span><span class="op" id="1377011">]</span><span class="op" id="1377012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377017"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377018">.</span><span class="ident" id="1377019"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1377023">-=</span>&nbsp;<span class="ident" id="1377026"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377027">.</span><span class="ident" id="1377028"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377037"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377038">.</span><span class="ident" id="1377039"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1377045">=</span>&nbsp;<span class="num" id="1377047">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377055">//&nbsp;Is&nbsp;the&nbsp;buffer&nbsp;full?&nbsp;If&nbsp;so,&nbsp;resize.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377095">if</span>&nbsp;<span class="ident" id="1377098"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377099">.</span><span class="ident" id="1377100"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1377104">==</span>&nbsp;<span class="builtinfunc" id="1377107">len</span><span class="op" id="1377110">(</span><span class="ident" id="1377111"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377112">.</span><span class="ident" id="1377113"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377116">)</span>&nbsp;<span class="op" id="1377118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377123">if</span>&nbsp;<span class="builtinfunc" id="1377126">len</span><span class="op" id="1377129">(</span><span class="ident" id="1377130"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377131">.</span><span class="ident" id="1377132"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377135">)</span>&nbsp;<span class="op" id="1377137">&gt;=</span>&nbsp;<span class="ident" id="1377140"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377141">.</span><span class="ident" id="1377142"><a href="/gostd/bufio/scan.go.html#1372452">maxTokenSize</a></span>&nbsp;<span class="op" id="1377155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377161"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377162">.</span><span class="ident" id="1377163"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1377169">(</span><span class="ident" id="1377170"><a href="/gostd/bufio/scan.go.html#1373902">ErrTooLong</a></span><span class="op" id="1377180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377186">return</span>&nbsp;<span class="builtintype" id="1377193">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377202">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377207">newSize</span>&nbsp;<span class="op" id="1377215">:=</span>&nbsp;<span class="builtinfunc" id="1377218">len</span><span class="op" id="1377221">(</span><span class="ident" id="1377222"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377223">.</span><span class="ident" id="1377224"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377227">)</span>&nbsp;<span class="op" id="1377229">*</span>&nbsp;<span class="num" id="1377231">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377236">if</span>&nbsp;<span class="ident" id="1377239"><a href="/gostd/bufio/scan.go.html#1377207">newSize</a></span>&nbsp;<span class="op" id="1377247">&gt;</span>&nbsp;<span class="ident" id="1377249"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377250">.</span><span class="ident" id="1377251"><a href="/gostd/bufio/scan.go.html#1372452">maxTokenSize</a></span>&nbsp;<span class="op" id="1377264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377270"><a href="/gostd/bufio/scan.go.html#1377207">newSize</a></span>&nbsp;<span class="op" id="1377278">=</span>&nbsp;<span class="ident" id="1377280"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377281">.</span><span class="ident" id="1377282"><a href="/gostd/bufio/scan.go.html#1372452">maxTokenSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377303">newBuf</span>&nbsp;<span class="op" id="1377310">:=</span>&nbsp;<span class="builtinfunc" id="1377313">make</span><span class="op" id="1377317">(</span><span class="op" id="1377318">[</span><span class="op" id="1377319">]</span><span class="builtintype" id="1377320">byte</span><span class="op" id="1377324">,</span>&nbsp;<span class="ident" id="1377326"><a href="/gostd/bufio/scan.go.html#1377207">newSize</a></span><span class="op" id="1377333">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1377338">copy</span><span class="op" id="1377342">(</span><span class="ident" id="1377343"><a href="/gostd/bufio/scan.go.html#1377303">newBuf</a></span><span class="op" id="1377349">,</span>&nbsp;<span class="ident" id="1377351"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377352">.</span><span class="ident" id="1377353"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377356">[</span><span class="ident" id="1377357"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377358">.</span><span class="ident" id="1377359"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span><span class="op" id="1377364">:</span><span class="ident" id="1377365"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377366">.</span><span class="ident" id="1377367"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span><span class="op" id="1377370">]</span><span class="op" id="1377371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377376"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377377">.</span><span class="ident" id="1377378"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span>&nbsp;<span class="op" id="1377382">=</span>&nbsp;<span class="ident" id="1377384"><a href="/gostd/bufio/scan.go.html#1377303">newBuf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377394"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377395">.</span><span class="ident" id="1377396"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1377400">-=</span>&nbsp;<span class="ident" id="1377403"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377404">.</span><span class="ident" id="1377405"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377414"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377415">.</span><span class="ident" id="1377416"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1377422">=</span>&nbsp;<span class="num" id="1377424">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377429">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377444">//&nbsp;Finally&nbsp;we&nbsp;can&nbsp;read&nbsp;some&nbsp;input.&nbsp;Make&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;stuck&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377515">//&nbsp;a&nbsp;misbehaving&nbsp;Reader.&nbsp;Officially&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;do&nbsp;this,&nbsp;but&nbsp;let&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1377589">//&nbsp;be&nbsp;extra&nbsp;careful:&nbsp;Scanner&nbsp;is&nbsp;for&nbsp;safe,&nbsp;simple&nbsp;jobs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377646">for</span>&nbsp;<span class="ident" id="1377650">loop</span>&nbsp;<span class="op" id="1377655">:=</span>&nbsp;<span class="num" id="1377658">0</span><span class="op" id="1377659">;</span>&nbsp;<span class="op" id="1377661">;</span>&nbsp;<span class="op" id="1377663">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377668">n</span><span class="op" id="1377669">,</span>&nbsp;<span class="ident" id="1377671">err</span>&nbsp;<span class="op" id="1377675">:=</span>&nbsp;<span class="ident" id="1377678"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377679">.</span><span class="ident" id="1377680"><a href="/gostd/bufio/scan.go.html#1372329">r</a></span><span class="op" id="1377681">.</span><span class="ident" id="1377682"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="1377686">(</span><span class="ident" id="1377687"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377688">.</span><span class="ident" id="1377689"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377692">[</span><span class="ident" id="1377693"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377694">.</span><span class="ident" id="1377695"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span><span class="op" id="1377698">:</span><span class="builtinfunc" id="1377699">len</span><span class="op" id="1377702">(</span><span class="ident" id="1377703"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377704">.</span><span class="ident" id="1377705"><a href="/gostd/bufio/scan.go.html#1372580">buf</a></span><span class="op" id="1377708">)</span><span class="op" id="1377709">]</span><span class="op" id="1377710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377715"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377716">.</span><span class="ident" id="1377717"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span>&nbsp;<span class="op" id="1377721">+=</span>&nbsp;<span class="ident" id="1377724"><a href="/gostd/bufio/scan.go.html#1377668">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377729">if</span>&nbsp;<span class="ident" id="1377732"><a href="/gostd/bufio/scan.go.html#1377671">err</a></span>&nbsp;<span class="op" id="1377736">!=</span>&nbsp;<span class="builtintype" id="1377739">nil</span>&nbsp;<span class="op" id="1377743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377749"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377750">.</span><span class="ident" id="1377751"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1377757">(</span><span class="ident" id="1377758"><a href="/gostd/bufio/scan.go.html#1377671">err</a></span><span class="op" id="1377761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377767">break</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377781">if</span>&nbsp;<span class="ident" id="1377784"><a href="/gostd/bufio/scan.go.html#1377668">n</a></span>&nbsp;<span class="op" id="1377786">&gt;</span>&nbsp;<span class="num" id="1377788">0</span>&nbsp;<span class="op" id="1377790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377796"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377797">.</span><span class="ident" id="1377798"><a href="/gostd/bufio/scan.go.html#1372789">empties</a></span>&nbsp;<span class="op" id="1377806">=</span>&nbsp;<span class="num" id="1377808">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377814">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377823">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377828"><a href="/gostd/bufio/scan.go.html#1377650">loop</a></span><span class="op" id="1377832">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377838">if</span>&nbsp;<span class="ident" id="1377841"><a href="/gostd/bufio/scan.go.html#1377650">loop</a></span>&nbsp;<span class="op" id="1377846">&gt;</span>&nbsp;<span class="ident" id="1377848"><a href="/gostd/bufio/bufio.go.html#1355218">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="1377873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1377879"><a href="/gostd/bufio/scan.go.html#1375790">s</a></span><span class="op" id="1377880">.</span><span class="ident" id="1377881"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1377887">(</span><span class="ident" id="1377888"><a href="/gostd/bufio/scan.go.html#1371326">io</a></span><span class="op" id="1377890">.</span><span class="ident" id="1377891"><a href="/gostd/io/io.go.html#1420336">ErrNoProgress</a></span><span class="op" id="1377904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1377910">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377919">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1377926">}</span><br>
<span class="lineno"></span><span class="op" id="1377928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1377931">//&nbsp;advance&nbsp;consumes&nbsp;n&nbsp;bytes&nbsp;of&nbsp;the&nbsp;buffer.&nbsp;It&nbsp;reports&nbsp;whether&nbsp;the&nbsp;advance&nbsp;was&nbsp;legal.</span><br>
<span class="lineno">200</span><span class="keyword" id="1378016">func</span>&nbsp;<span class="op" id="1378021">(</span><span class="ident" id="1378022">s</span>&nbsp;<span class="op" id="1378024">*</span><span class="ident" id="1378025"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1378032">)</span>&nbsp;<span class="ident" id="1378034">advance</span><span class="op" id="1378041">(</span><span class="ident" id="1378042">n</span>&nbsp;<span class="builtintype" id="1378044">int</span><span class="op" id="1378047">)</span>&nbsp;<span class="builtintype" id="1378049">bool</span>&nbsp;<span class="op" id="1378054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378057">if</span>&nbsp;<span class="ident" id="1378060"><a href="/gostd/bufio/scan.go.html#1378042">n</a></span>&nbsp;<span class="op" id="1378062">&lt;</span>&nbsp;<span class="num" id="1378064">0</span>&nbsp;<span class="op" id="1378066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378070"><a href="/gostd/bufio/scan.go.html#1378022">s</a></span><span class="op" id="1378071">.</span><span class="ident" id="1378072"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1378078">(</span><span class="ident" id="1378079"><a href="/gostd/bufio/scan.go.html#1373968">ErrNegativeAdvance</a></span><span class="op" id="1378097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378101">return</span>&nbsp;<span class="builtintype" id="1378108">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378115">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378118">if</span>&nbsp;<span class="ident" id="1378121"><a href="/gostd/bufio/scan.go.html#1378042">n</a></span>&nbsp;<span class="op" id="1378123">&gt;</span>&nbsp;<span class="ident" id="1378125"><a href="/gostd/bufio/scan.go.html#1378022">s</a></span><span class="op" id="1378126">.</span><span class="ident" id="1378127"><a href="/gostd/bufio/scan.go.html#1372701">end</a></span><span class="op" id="1378130">-</span><span class="ident" id="1378131"><a href="/gostd/bufio/scan.go.html#1378022">s</a></span><span class="op" id="1378132">.</span><span class="ident" id="1378133"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1378139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378143"><a href="/gostd/bufio/scan.go.html#1378022">s</a></span><span class="op" id="1378144">.</span><span class="ident" id="1378145"><a href="/gostd/bufio/scan.go.html#1378283">setErr</a></span><span class="op" id="1378151">(</span><span class="ident" id="1378152"><a href="/gostd/bufio/scan.go.html#1374060">ErrAdvanceTooFar</a></span><span class="op" id="1378168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378172">return</span>&nbsp;<span class="builtintype" id="1378179">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378189"><a href="/gostd/bufio/scan.go.html#1378022">s</a></span><span class="op" id="1378190">.</span><span class="ident" id="1378191"><a href="/gostd/bufio/scan.go.html#1372641">start</a></span>&nbsp;<span class="op" id="1378197">+=</span>&nbsp;<span class="ident" id="1378200"><a href="/gostd/bufio/scan.go.html#1378042">n</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378203">return</span>&nbsp;<span class="builtintype" id="1378210">true</span><br>
<span class="lineno"></span><span class="op" id="1378215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1378218">//&nbsp;setErr&nbsp;records&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="keyword" id="1378265">func</span>&nbsp;<span class="op" id="1378270">(</span><span class="ident" id="1378271">s</span>&nbsp;<span class="op" id="1378273">*</span><span class="ident" id="1378274"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1378281">)</span>&nbsp;<span class="ident" id="1378283">setErr</span><span class="op" id="1378289">(</span><span class="ident" id="1378290">err</span>&nbsp;<span class="builtintype" id="1378294">error</span><span class="op" id="1378299">)</span>&nbsp;<span class="op" id="1378301">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378304">if</span>&nbsp;<span class="ident" id="1378307"><a href="/gostd/bufio/scan.go.html#1378271">s</a></span><span class="op" id="1378308">.</span><span class="ident" id="1378309"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1378313">==</span>&nbsp;<span class="builtintype" id="1378316">nil</span>&nbsp;<span class="op" id="1378320">||</span>&nbsp;<span class="ident" id="1378323"><a href="/gostd/bufio/scan.go.html#1378271">s</a></span><span class="op" id="1378324">.</span><span class="ident" id="1378325"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1378329">==</span>&nbsp;<span class="ident" id="1378332"><a href="/gostd/bufio/scan.go.html#1371326">io</a></span><span class="op" id="1378334">.</span><span class="ident" id="1378335"><a href="/gostd/io/io.go.html#1419950">EOF</a></span>&nbsp;<span class="op" id="1378339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378343"><a href="/gostd/bufio/scan.go.html#1378271">s</a></span><span class="op" id="1378344">.</span><span class="ident" id="1378345"><a href="/gostd/bufio/scan.go.html#1372748">err</a></span>&nbsp;<span class="op" id="1378349">=</span>&nbsp;<span class="ident" id="1378351"><a href="/gostd/bufio/scan.go.html#1378290">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378356">}</span><br>
<span class="lineno"></span><span class="op" id="1378358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="1378361">//&nbsp;Split&nbsp;sets&nbsp;the&nbsp;split&nbsp;function&nbsp;for&nbsp;the&nbsp;Scanner.&nbsp;If&nbsp;called,&nbsp;it&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="1378433">//&nbsp;called&nbsp;before&nbsp;Scan.&nbsp;The&nbsp;default&nbsp;split&nbsp;function&nbsp;is&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="1378497">func</span>&nbsp;<span class="op" id="1378502">(</span><span class="ident" id="1378503">s</span>&nbsp;<span class="op" id="1378505">*</span><span class="ident" id="1378506"><a href="/gostd/bufio/scan.go.html#1372311">Scanner</a></span><span class="op" id="1378513">)</span>&nbsp;<span class="ident" id="1378515">Split</span><span class="op" id="1378520">(</span><span class="ident" id="1378521">split</span>&nbsp;<span class="ident" id="1378527"><a href="/gostd/bufio/scan.go.html#1373784">SplitFunc</a></span><span class="op" id="1378536">)</span>&nbsp;<span class="op" id="1378538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1378541"><a href="/gostd/bufio/scan.go.html#1378503">s</a></span><span class="op" id="1378542">.</span><span class="ident" id="1378543"><a href="/gostd/bufio/scan.go.html#1372391">split</a></span>&nbsp;<span class="op" id="1378549">=</span>&nbsp;<span class="ident" id="1378551"><a href="/gostd/bufio/scan.go.html#1378521">split</a></span><br>
<span class="lineno"></span><span class="op" id="1378557">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="1378560">//&nbsp;Split&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1378580">//&nbsp;ScanBytes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;byte&nbsp;as&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="1378662">func</span>&nbsp;<span class="ident" id="1378667">ScanBytes</span><span class="op" id="1378676">(</span><span class="ident" id="1378677">data</span>&nbsp;<span class="op" id="1378682">[</span><span class="op" id="1378683">]</span><span class="builtintype" id="1378684">byte</span><span class="op" id="1378688">,</span>&nbsp;<span class="ident" id="1378690">atEOF</span>&nbsp;<span class="builtintype" id="1378696">bool</span><span class="op" id="1378700">)</span>&nbsp;<span class="op" id="1378702">(</span><span class="ident" id="1378703">advance</span>&nbsp;<span class="builtintype" id="1378711">int</span><span class="op" id="1378714">,</span>&nbsp;<span class="ident" id="1378716">token</span>&nbsp;<span class="op" id="1378722">[</span><span class="op" id="1378723">]</span><span class="builtintype" id="1378724">byte</span><span class="op" id="1378728">,</span>&nbsp;<span class="ident" id="1378730">err</span>&nbsp;<span class="builtintype" id="1378734">error</span><span class="op" id="1378739">)</span>&nbsp;<span class="op" id="1378741">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378744">if</span>&nbsp;<span class="ident" id="1378747"><a href="/gostd/bufio/scan.go.html#1378690">atEOF</a></span>&nbsp;<span class="op" id="1378753">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1378756">len</span><span class="op" id="1378759">(</span><span class="ident" id="1378760"><a href="/gostd/bufio/scan.go.html#1378677">data</a></span><span class="op" id="1378764">)</span>&nbsp;<span class="op" id="1378766">==</span>&nbsp;<span class="num" id="1378769">0</span>&nbsp;<span class="op" id="1378771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378775">return</span>&nbsp;<span class="num" id="1378782">0</span><span class="op" id="1378783">,</span>&nbsp;<span class="builtintype" id="1378785">nil</span><span class="op" id="1378788">,</span>&nbsp;<span class="builtintype" id="1378790">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1378795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1378798">return</span>&nbsp;<span class="num" id="1378805">1</span><span class="op" id="1378806">,</span>&nbsp;<span class="ident" id="1378808"><a href="/gostd/bufio/scan.go.html#1378677">data</a></span><span class="op" id="1378812">[</span><span class="num" id="1378813">0</span><span class="op" id="1378814">:</span><span class="num" id="1378815">1</span><span class="op" id="1378816">]</span><span class="op" id="1378817">,</span>&nbsp;<span class="builtintype" id="1378819">nil</span><br>
<span class="lineno"></span><span class="op" id="1378823">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="1378826">var</span>&nbsp;<span class="ident" id="1378830">errorRune</span>&nbsp;<span class="op" id="1378840">=</span>&nbsp;<span class="op" id="1378842">[</span><span class="op" id="1378843">]</span><span class="builtintype" id="1378844">byte</span><span class="op" id="1378848">(</span><span class="builtintype" id="1378849">string</span><span class="op" id="1378855">(</span><span class="ident" id="1378856"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1378860">.</span><span class="ident" id="1378861"><a href="/gostd/unicode/utf8/utf8.go.html#1805370">RuneError</a></span><span class="op" id="1378870">)</span><span class="op" id="1378871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1378874">//&nbsp;ScanRunes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="1378939">//&nbsp;UTF-8-encoded&nbsp;rune&nbsp;as&nbsp;a&nbsp;token.&nbsp;The&nbsp;sequence&nbsp;of&nbsp;runes&nbsp;returned&nbsp;is</span><br>
<span class="lineno">240</span><span class="comment" id="1379007">//&nbsp;equivalent&nbsp;to&nbsp;that&nbsp;from&nbsp;a&nbsp;range&nbsp;loop&nbsp;over&nbsp;the&nbsp;input&nbsp;as&nbsp;a&nbsp;string,&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="1379081">//&nbsp;means&nbsp;that&nbsp;erroneous&nbsp;UTF-8&nbsp;encodings&nbsp;translate&nbsp;to&nbsp;U+FFFD&nbsp;=&nbsp;&#34;\xef\xbf\xbd&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="1379159">//&nbsp;Because&nbsp;of&nbsp;the&nbsp;Scan&nbsp;interface,&nbsp;this&nbsp;makes&nbsp;it&nbsp;impossible&nbsp;for&nbsp;the&nbsp;client&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1379236">//&nbsp;distinguish&nbsp;correctly&nbsp;encoded&nbsp;replacement&nbsp;runes&nbsp;from&nbsp;encoding&nbsp;errors.</span><br>
<span class="lineno"></span><span class="keyword" id="1379309">func</span>&nbsp;<span class="ident" id="1379314">ScanRunes</span><span class="op" id="1379323">(</span><span class="ident" id="1379324">data</span>&nbsp;<span class="op" id="1379329">[</span><span class="op" id="1379330">]</span><span class="builtintype" id="1379331">byte</span><span class="op" id="1379335">,</span>&nbsp;<span class="ident" id="1379337">atEOF</span>&nbsp;<span class="builtintype" id="1379343">bool</span><span class="op" id="1379347">)</span>&nbsp;<span class="op" id="1379349">(</span><span class="ident" id="1379350">advance</span>&nbsp;<span class="builtintype" id="1379358">int</span><span class="op" id="1379361">,</span>&nbsp;<span class="ident" id="1379363">token</span>&nbsp;<span class="op" id="1379369">[</span><span class="op" id="1379370">]</span><span class="builtintype" id="1379371">byte</span><span class="op" id="1379375">,</span>&nbsp;<span class="ident" id="1379377">err</span>&nbsp;<span class="builtintype" id="1379381">error</span><span class="op" id="1379386">)</span>&nbsp;<span class="op" id="1379388">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379391">if</span>&nbsp;<span class="ident" id="1379394"><a href="/gostd/bufio/scan.go.html#1379337">atEOF</a></span>&nbsp;<span class="op" id="1379400">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1379403">len</span><span class="op" id="1379406">(</span><span class="ident" id="1379407"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1379411">)</span>&nbsp;<span class="op" id="1379413">==</span>&nbsp;<span class="num" id="1379416">0</span>&nbsp;<span class="op" id="1379418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379422">return</span>&nbsp;<span class="num" id="1379429">0</span><span class="op" id="1379430">,</span>&nbsp;<span class="builtintype" id="1379432">nil</span><span class="op" id="1379435">,</span>&nbsp;<span class="builtintype" id="1379437">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379446">//&nbsp;Fast&nbsp;path&nbsp;1:&nbsp;ASCII.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379470">if</span>&nbsp;<span class="ident" id="1379473"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1379477">[</span><span class="num" id="1379478">0</span><span class="op" id="1379479">]</span>&nbsp;<span class="op" id="1379481">&lt;</span>&nbsp;<span class="ident" id="1379483"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1379487">.</span><span class="ident" id="1379488"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="1379497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379501">return</span>&nbsp;<span class="num" id="1379508">1</span><span class="op" id="1379509">,</span>&nbsp;<span class="ident" id="1379511"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1379515">[</span><span class="num" id="1379516">0</span><span class="op" id="1379517">:</span><span class="num" id="1379518">1</span><span class="op" id="1379519">]</span><span class="op" id="1379520">,</span>&nbsp;<span class="builtintype" id="1379522">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379531">//&nbsp;Fast&nbsp;path&nbsp;2:&nbsp;Correct&nbsp;UTF-8&nbsp;decode&nbsp;without&nbsp;error.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1379584">_</span><span class="op" id="1379585">,</span>&nbsp;<span class="ident" id="1379587">width</span>&nbsp;<span class="op" id="1379593">:=</span>&nbsp;<span class="ident" id="1379596"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1379600">.</span><span class="ident" id="1379601"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="1379611">(</span><span class="ident" id="1379612"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1379616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379619">if</span>&nbsp;<span class="ident" id="1379622"><a href="/gostd/bufio/scan.go.html#1379587">width</a></span>&nbsp;<span class="op" id="1379628">&gt;</span>&nbsp;<span class="num" id="1379630">1</span>&nbsp;<span class="op" id="1379632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379636">//&nbsp;It&#39;s&nbsp;a&nbsp;valid&nbsp;encoding.&nbsp;Width&nbsp;cannot&nbsp;be&nbsp;one&nbsp;for&nbsp;a&nbsp;correctly&nbsp;encoded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379708">//&nbsp;non-ASCII&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379729">return</span>&nbsp;<span class="ident" id="1379736"><a href="/gostd/bufio/scan.go.html#1379587">width</a></span><span class="op" id="1379741">,</span>&nbsp;<span class="ident" id="1379743"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1379747">[</span><span class="num" id="1379748">0</span><span class="op" id="1379749">:</span><span class="ident" id="1379750"><a href="/gostd/bufio/scan.go.html#1379587">width</a></span><span class="op" id="1379755">]</span><span class="op" id="1379756">,</span>&nbsp;<span class="builtintype" id="1379758">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1379763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379767">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;an&nbsp;error:&nbsp;we&nbsp;have&nbsp;width==1&nbsp;and&nbsp;implicitly&nbsp;r==utf8.RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379845">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;because&nbsp;there&nbsp;wasn&#39;t&nbsp;a&nbsp;full&nbsp;rune&nbsp;to&nbsp;be&nbsp;decoded?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1379910">//&nbsp;FullRune&nbsp;distinguishes&nbsp;correctly&nbsp;between&nbsp;erroneous&nbsp;and&nbsp;incomplete&nbsp;encodings.</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1379991">if</span>&nbsp;<span class="op" id="1379994">!</span><span class="ident" id="1379995"><a href="/gostd/bufio/scan.go.html#1379337">atEOF</a></span>&nbsp;<span class="op" id="1380001">&amp;&amp;</span>&nbsp;<span class="op" id="1380004">!</span><span class="ident" id="1380005"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1380009">.</span><span class="ident" id="1380010"><a href="/gostd/unicode/utf8/utf8.go.html#1809204">FullRune</a></span><span class="op" id="1380018">(</span><span class="ident" id="1380019"><a href="/gostd/bufio/scan.go.html#1379324">data</a></span><span class="op" id="1380023">)</span>&nbsp;<span class="op" id="1380025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1380029">//&nbsp;Incomplete;&nbsp;get&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380062">return</span>&nbsp;<span class="num" id="1380069">0</span><span class="op" id="1380070">,</span>&nbsp;<span class="builtintype" id="1380072">nil</span><span class="op" id="1380075">,</span>&nbsp;<span class="builtintype" id="1380077">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1380082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1380086">//&nbsp;We&nbsp;have&nbsp;a&nbsp;real&nbsp;UTF-8&nbsp;encoding&nbsp;error.&nbsp;Return&nbsp;a&nbsp;properly&nbsp;encoded&nbsp;error&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1380164">//&nbsp;but&nbsp;advance&nbsp;only&nbsp;one&nbsp;byte.&nbsp;This&nbsp;matches&nbsp;the&nbsp;behavior&nbsp;of&nbsp;a&nbsp;range&nbsp;loop&nbsp;over</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1380242">//&nbsp;an&nbsp;incorrectly&nbsp;encoded&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380277">return</span>&nbsp;<span class="num" id="1380284">1</span><span class="op" id="1380285">,</span>&nbsp;<span class="ident" id="1380287"><a href="/gostd/bufio/scan.go.html#1378830">errorRune</a></span><span class="op" id="1380296">,</span>&nbsp;<span class="builtintype" id="1380298">nil</span><br>
<span class="lineno"></span><span class="op" id="1380302">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="1380305">//&nbsp;dropCR&nbsp;drops&nbsp;a&nbsp;terminal&nbsp;\r&nbsp;from&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="1380350">func</span>&nbsp;<span class="ident" id="1380355">dropCR</span><span class="op" id="1380361">(</span><span class="ident" id="1380362">data</span>&nbsp;<span class="op" id="1380367">[</span><span class="op" id="1380368">]</span><span class="builtintype" id="1380369">byte</span><span class="op" id="1380373">)</span>&nbsp;<span class="op" id="1380375">[</span><span class="op" id="1380376">]</span><span class="builtintype" id="1380377">byte</span>&nbsp;<span class="op" id="1380382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380385">if</span>&nbsp;<span class="builtinfunc" id="1380388">len</span><span class="op" id="1380391">(</span><span class="ident" id="1380392"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><span class="op" id="1380396">)</span>&nbsp;<span class="op" id="1380398">&gt;</span>&nbsp;<span class="num" id="1380400">0</span>&nbsp;<span class="op" id="1380402">&amp;&amp;</span>&nbsp;<span class="ident" id="1380405"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><span class="op" id="1380409">[</span><span class="builtinfunc" id="1380410">len</span><span class="op" id="1380413">(</span><span class="ident" id="1380414"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><span class="op" id="1380418">)</span><span class="op" id="1380419">-</span><span class="num" id="1380420">1</span><span class="op" id="1380421">]</span>&nbsp;<span class="op" id="1380423">==</span>&nbsp;<span class="string" id="1380426">&#39;\r&#39;</span>&nbsp;<span class="op" id="1380431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380435">return</span>&nbsp;<span class="ident" id="1380442"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><span class="op" id="1380446">[</span><span class="num" id="1380447">0</span>&nbsp;<span class="op" id="1380449">:</span>&nbsp;<span class="builtinfunc" id="1380451">len</span><span class="op" id="1380454">(</span><span class="ident" id="1380455"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><span class="op" id="1380459">)</span><span class="op" id="1380460">-</span><span class="num" id="1380461">1</span><span class="op" id="1380462">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1380465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380468">return</span>&nbsp;<span class="ident" id="1380475"><a href="/gostd/bufio/scan.go.html#1380362">data</a></span><br>
<span class="lineno"></span><span class="op" id="1380480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1380483">//&nbsp;ScanLines&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;line&nbsp;of</span><br>
<span class="lineno">285</span><span class="comment" id="1380556">//&nbsp;text,&nbsp;stripped&nbsp;of&nbsp;any&nbsp;trailing&nbsp;end-of-line&nbsp;marker.&nbsp;The&nbsp;returned&nbsp;line&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="1380632">//&nbsp;be&nbsp;empty.&nbsp;The&nbsp;end-of-line&nbsp;marker&nbsp;is&nbsp;one&nbsp;optional&nbsp;carriage&nbsp;return&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="1380709">//&nbsp;by&nbsp;one&nbsp;mandatory&nbsp;newline.&nbsp;In&nbsp;regular&nbsp;expression&nbsp;notation,&nbsp;it&nbsp;is&nbsp;`\r?\n`.</span><br>
<span class="lineno"></span><span class="comment" id="1380785">//&nbsp;The&nbsp;last&nbsp;non-empty&nbsp;line&nbsp;of&nbsp;input&nbsp;will&nbsp;be&nbsp;returned&nbsp;even&nbsp;if&nbsp;it&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="1380856">//&nbsp;newline.</span><br>
<span class="lineno">290</span><span class="keyword" id="1380868">func</span>&nbsp;<span class="ident" id="1380873">ScanLines</span><span class="op" id="1380882">(</span><span class="ident" id="1380883">data</span>&nbsp;<span class="op" id="1380888">[</span><span class="op" id="1380889">]</span><span class="builtintype" id="1380890">byte</span><span class="op" id="1380894">,</span>&nbsp;<span class="ident" id="1380896">atEOF</span>&nbsp;<span class="builtintype" id="1380902">bool</span><span class="op" id="1380906">)</span>&nbsp;<span class="op" id="1380908">(</span><span class="ident" id="1380909">advance</span>&nbsp;<span class="builtintype" id="1380917">int</span><span class="op" id="1380920">,</span>&nbsp;<span class="ident" id="1380922">token</span>&nbsp;<span class="op" id="1380928">[</span><span class="op" id="1380929">]</span><span class="builtintype" id="1380930">byte</span><span class="op" id="1380934">,</span>&nbsp;<span class="ident" id="1380936">err</span>&nbsp;<span class="builtintype" id="1380940">error</span><span class="op" id="1380945">)</span>&nbsp;<span class="op" id="1380947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380950">if</span>&nbsp;<span class="ident" id="1380953"><a href="/gostd/bufio/scan.go.html#1380896">atEOF</a></span>&nbsp;<span class="op" id="1380959">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1380962">len</span><span class="op" id="1380965">(</span><span class="ident" id="1380966"><a href="/gostd/bufio/scan.go.html#1380883">data</a></span><span class="op" id="1380970">)</span>&nbsp;<span class="op" id="1380972">==</span>&nbsp;<span class="num" id="1380975">0</span>&nbsp;<span class="op" id="1380977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1380981">return</span>&nbsp;<span class="num" id="1380988">0</span><span class="op" id="1380989">,</span>&nbsp;<span class="builtintype" id="1380991">nil</span><span class="op" id="1380994">,</span>&nbsp;<span class="builtintype" id="1380996">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381004">if</span>&nbsp;<span class="ident" id="1381007">i</span>&nbsp;<span class="op" id="1381009">:=</span>&nbsp;<span class="ident" id="1381012"><a href="/gostd/bufio/scan.go.html#1371307">bytes</a></span><span class="op" id="1381017">.</span><span class="ident" id="1381018"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="1381027">(</span><span class="ident" id="1381028"><a href="/gostd/bufio/scan.go.html#1380883">data</a></span><span class="op" id="1381032">,</span>&nbsp;<span class="string" id="1381034">&#39;\n&#39;</span><span class="op" id="1381038">)</span><span class="op" id="1381039">;</span>&nbsp;<span class="ident" id="1381041"><a href="/gostd/bufio/scan.go.html#1381007">i</a></span>&nbsp;<span class="op" id="1381043">&gt;=</span>&nbsp;<span class="num" id="1381046">0</span>&nbsp;<span class="op" id="1381048">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381052">//&nbsp;We&nbsp;have&nbsp;a&nbsp;full&nbsp;newline-terminated&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381097">return</span>&nbsp;<span class="ident" id="1381104"><a href="/gostd/bufio/scan.go.html#1381007">i</a></span>&nbsp;<span class="op" id="1381106">+</span>&nbsp;<span class="num" id="1381108">1</span><span class="op" id="1381109">,</span>&nbsp;<span class="ident" id="1381111"><a href="/gostd/bufio/scan.go.html#1380355">dropCR</a></span><span class="op" id="1381117">(</span><span class="ident" id="1381118"><a href="/gostd/bufio/scan.go.html#1380883">data</a></span><span class="op" id="1381122">[</span><span class="num" id="1381123">0</span><span class="op" id="1381124">:</span><span class="ident" id="1381125"><a href="/gostd/bufio/scan.go.html#1381007">i</a></span><span class="op" id="1381126">]</span><span class="op" id="1381127">)</span><span class="op" id="1381128">,</span>&nbsp;<span class="builtintype" id="1381130">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381138">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-terminated&nbsp;line.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381208">if</span>&nbsp;<span class="ident" id="1381211"><a href="/gostd/bufio/scan.go.html#1380896">atEOF</a></span>&nbsp;<span class="op" id="1381217">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381221">return</span>&nbsp;<span class="builtinfunc" id="1381228">len</span><span class="op" id="1381231">(</span><span class="ident" id="1381232"><a href="/gostd/bufio/scan.go.html#1380883">data</a></span><span class="op" id="1381236">)</span><span class="op" id="1381237">,</span>&nbsp;<span class="ident" id="1381239"><a href="/gostd/bufio/scan.go.html#1380355">dropCR</a></span><span class="op" id="1381245">(</span><span class="ident" id="1381246"><a href="/gostd/bufio/scan.go.html#1380883">data</a></span><span class="op" id="1381250">)</span><span class="op" id="1381251">,</span>&nbsp;<span class="builtintype" id="1381253">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381261">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381284">return</span>&nbsp;<span class="num" id="1381291">0</span><span class="op" id="1381292">,</span>&nbsp;<span class="builtintype" id="1381294">nil</span><span class="op" id="1381297">,</span>&nbsp;<span class="builtintype" id="1381299">nil</span><br>
<span class="lineno"></span><span class="op" id="1381303">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="comment" id="1381306">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;is&nbsp;a&nbsp;Unicode&nbsp;white&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="1381383">//&nbsp;We&nbsp;avoid&nbsp;dependency&nbsp;on&nbsp;the&nbsp;unicode&nbsp;package,&nbsp;but&nbsp;check&nbsp;validity&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="1381471">//&nbsp;in&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="1381488">func</span>&nbsp;<span class="ident" id="1381493">isSpace</span><span class="op" id="1381500">(</span><span class="ident" id="1381501">r</span>&nbsp;<span class="builtintype" id="1381503">rune</span><span class="op" id="1381507">)</span>&nbsp;<span class="builtintype" id="1381509">bool</span>&nbsp;<span class="op" id="1381514">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381517">if</span>&nbsp;<span class="ident" id="1381520"><a href="/gostd/bufio/scan.go.html#1381501">r</a></span>&nbsp;<span class="op" id="1381522">&lt;=</span>&nbsp;<span class="string" id="1381525">&#39;\u00FF&#39;</span>&nbsp;<span class="op" id="1381534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381538">//&nbsp;Obvious&nbsp;ASCII&nbsp;ones:&nbsp;\t&nbsp;through&nbsp;\r&nbsp;plus&nbsp;space.&nbsp;Plus&nbsp;two&nbsp;Latin-1&nbsp;oddballs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381616">switch</span>&nbsp;<span class="ident" id="1381623"><a href="/gostd/bufio/scan.go.html#1381501">r</a></span>&nbsp;<span class="op" id="1381625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381629">case</span>&nbsp;<span class="string" id="1381634">&#39;&nbsp;&#39;</span><span class="op" id="1381637">,</span>&nbsp;<span class="string" id="1381639">&#39;\t&#39;</span><span class="op" id="1381643">,</span>&nbsp;<span class="string" id="1381645">&#39;\n&#39;</span><span class="op" id="1381649">,</span>&nbsp;<span class="string" id="1381651">&#39;\v&#39;</span><span class="op" id="1381655">,</span>&nbsp;<span class="string" id="1381657">&#39;\f&#39;</span><span class="op" id="1381661">,</span>&nbsp;<span class="string" id="1381663">&#39;\r&#39;</span><span class="op" id="1381667">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381672">return</span>&nbsp;<span class="builtintype" id="1381679">true</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381686">case</span>&nbsp;<span class="string" id="1381691">&#39;\u0085&#39;</span><span class="op" id="1381699">,</span>&nbsp;<span class="string" id="1381701">&#39;\u00A0&#39;</span><span class="op" id="1381709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381714">return</span>&nbsp;<span class="builtintype" id="1381721">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381732">return</span>&nbsp;<span class="builtintype" id="1381739">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381746">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1381749">//&nbsp;High-valued&nbsp;ones.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381771">if</span>&nbsp;<span class="string" id="1381774">&#39;\u2000&#39;</span>&nbsp;<span class="op" id="1381783">&lt;=</span>&nbsp;<span class="ident" id="1381786"><a href="/gostd/bufio/scan.go.html#1381501">r</a></span>&nbsp;<span class="op" id="1381788">&amp;&amp;</span>&nbsp;<span class="ident" id="1381791"><a href="/gostd/bufio/scan.go.html#1381501">r</a></span>&nbsp;<span class="op" id="1381793">&lt;=</span>&nbsp;<span class="string" id="1381796">&#39;\u200a&#39;</span>&nbsp;<span class="op" id="1381805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381809">return</span>&nbsp;<span class="builtintype" id="1381816">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381825">switch</span>&nbsp;<span class="ident" id="1381832"><a href="/gostd/bufio/scan.go.html#1381501">r</a></span>&nbsp;<span class="op" id="1381834">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381837">case</span>&nbsp;<span class="string" id="1381842">&#39;\u1680&#39;</span><span class="op" id="1381850">,</span>&nbsp;<span class="string" id="1381852">&#39;\u2028&#39;</span><span class="op" id="1381860">,</span>&nbsp;<span class="string" id="1381862">&#39;\u2029&#39;</span><span class="op" id="1381870">,</span>&nbsp;<span class="string" id="1381872">&#39;\u202f&#39;</span><span class="op" id="1381880">,</span>&nbsp;<span class="string" id="1381882">&#39;\u205f&#39;</span><span class="op" id="1381890">,</span>&nbsp;<span class="string" id="1381892">&#39;\u3000&#39;</span><span class="op" id="1381900">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381904">return</span>&nbsp;<span class="builtintype" id="1381911">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1381917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1381920">return</span>&nbsp;<span class="builtintype" id="1381927">false</span><br>
<span class="lineno"></span><span class="op" id="1381933">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="1381936">//&nbsp;ScanWords&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="1382001">//&nbsp;space-separated&nbsp;word&nbsp;of&nbsp;text,&nbsp;with&nbsp;surrounding&nbsp;spaces&nbsp;deleted.&nbsp;It&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="1382075">//&nbsp;never&nbsp;return&nbsp;an&nbsp;empty&nbsp;string.&nbsp;The&nbsp;definition&nbsp;of&nbsp;space&nbsp;is&nbsp;set&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="1382142">//&nbsp;unicode.IsSpace.</span><br>
<span class="lineno">335</span><span class="keyword" id="1382162">func</span>&nbsp;<span class="ident" id="1382167">ScanWords</span><span class="op" id="1382176">(</span><span class="ident" id="1382177">data</span>&nbsp;<span class="op" id="1382182">[</span><span class="op" id="1382183">]</span><span class="builtintype" id="1382184">byte</span><span class="op" id="1382188">,</span>&nbsp;<span class="ident" id="1382190">atEOF</span>&nbsp;<span class="builtintype" id="1382196">bool</span><span class="op" id="1382200">)</span>&nbsp;<span class="op" id="1382202">(</span><span class="ident" id="1382203">advance</span>&nbsp;<span class="builtintype" id="1382211">int</span><span class="op" id="1382214">,</span>&nbsp;<span class="ident" id="1382216">token</span>&nbsp;<span class="op" id="1382222">[</span><span class="op" id="1382223">]</span><span class="builtintype" id="1382224">byte</span><span class="op" id="1382228">,</span>&nbsp;<span class="ident" id="1382230">err</span>&nbsp;<span class="builtintype" id="1382234">error</span><span class="op" id="1382239">)</span>&nbsp;<span class="op" id="1382241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382244">//&nbsp;Skip&nbsp;leading&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382269">start</span>&nbsp;<span class="op" id="1382275">:=</span>&nbsp;<span class="num" id="1382278">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382281">for</span>&nbsp;<span class="ident" id="1382285">width</span>&nbsp;<span class="op" id="1382291">:=</span>&nbsp;<span class="num" id="1382294">0</span><span class="op" id="1382295">;</span>&nbsp;<span class="ident" id="1382297"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span>&nbsp;<span class="op" id="1382303">&lt;</span>&nbsp;<span class="builtinfunc" id="1382305">len</span><span class="op" id="1382308">(</span><span class="ident" id="1382309"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382313">)</span><span class="op" id="1382314">;</span>&nbsp;<span class="ident" id="1382316"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span>&nbsp;<span class="op" id="1382322">+=</span>&nbsp;<span class="ident" id="1382325"><a href="/gostd/bufio/scan.go.html#1382285">width</a></span>&nbsp;<span class="op" id="1382331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382335">var</span>&nbsp;<span class="ident" id="1382339">r</span>&nbsp;<span class="builtintype" id="1382341">rune</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382348"><a href="/gostd/bufio/scan.go.html#1382339">r</a></span><span class="op" id="1382349">,</span>&nbsp;<span class="ident" id="1382351"><a href="/gostd/bufio/scan.go.html#1382285">width</a></span>&nbsp;<span class="op" id="1382357">=</span>&nbsp;<span class="ident" id="1382359"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1382363">.</span><span class="ident" id="1382364"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="1382374">(</span><span class="ident" id="1382375"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382379">[</span><span class="ident" id="1382380"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span><span class="op" id="1382385">:</span><span class="op" id="1382386">]</span><span class="op" id="1382387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382391">if</span>&nbsp;<span class="op" id="1382394">!</span><span class="ident" id="1382395"><a href="/gostd/bufio/scan.go.html#1381493">isSpace</a></span><span class="op" id="1382402">(</span><span class="ident" id="1382403"><a href="/gostd/bufio/scan.go.html#1382339">r</a></span><span class="op" id="1382404">)</span>&nbsp;<span class="op" id="1382406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382411">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382422">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382425">//&nbsp;Scan&nbsp;until&nbsp;space,&nbsp;marking&nbsp;end&nbsp;of&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382468">for</span>&nbsp;<span class="ident" id="1382472">width</span><span class="op" id="1382477">,</span>&nbsp;<span class="ident" id="1382479">i</span>&nbsp;<span class="op" id="1382481">:=</span>&nbsp;<span class="num" id="1382484">0</span><span class="op" id="1382485">,</span>&nbsp;<span class="ident" id="1382487"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span><span class="op" id="1382492">;</span>&nbsp;<span class="ident" id="1382494"><a href="/gostd/bufio/scan.go.html#1382479">i</a></span>&nbsp;<span class="op" id="1382496">&lt;</span>&nbsp;<span class="builtinfunc" id="1382498">len</span><span class="op" id="1382501">(</span><span class="ident" id="1382502"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382506">)</span><span class="op" id="1382507">;</span>&nbsp;<span class="ident" id="1382509"><a href="/gostd/bufio/scan.go.html#1382479">i</a></span>&nbsp;<span class="op" id="1382511">+=</span>&nbsp;<span class="ident" id="1382514"><a href="/gostd/bufio/scan.go.html#1382472">width</a></span>&nbsp;<span class="op" id="1382520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382524">var</span>&nbsp;<span class="ident" id="1382528">r</span>&nbsp;<span class="builtintype" id="1382530">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1382537"><a href="/gostd/bufio/scan.go.html#1382528">r</a></span><span class="op" id="1382538">,</span>&nbsp;<span class="ident" id="1382540"><a href="/gostd/bufio/scan.go.html#1382472">width</a></span>&nbsp;<span class="op" id="1382546">=</span>&nbsp;<span class="ident" id="1382548"><a href="/gostd/bufio/scan.go.html#1371332">utf8</a></span><span class="op" id="1382552">.</span><span class="ident" id="1382553"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="1382563">(</span><span class="ident" id="1382564"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382568">[</span><span class="ident" id="1382569"><a href="/gostd/bufio/scan.go.html#1382479">i</a></span><span class="op" id="1382570">:</span><span class="op" id="1382571">]</span><span class="op" id="1382572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382576">if</span>&nbsp;<span class="ident" id="1382579"><a href="/gostd/bufio/scan.go.html#1381493">isSpace</a></span><span class="op" id="1382586">(</span><span class="ident" id="1382587"><a href="/gostd/bufio/scan.go.html#1382528">r</a></span><span class="op" id="1382588">)</span>&nbsp;<span class="op" id="1382590">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382595">return</span>&nbsp;<span class="ident" id="1382602"><a href="/gostd/bufio/scan.go.html#1382479">i</a></span>&nbsp;<span class="op" id="1382604">+</span>&nbsp;<span class="ident" id="1382606"><a href="/gostd/bufio/scan.go.html#1382472">width</a></span><span class="op" id="1382611">,</span>&nbsp;<span class="ident" id="1382613"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382617">[</span><span class="ident" id="1382618"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span><span class="op" id="1382623">:</span><span class="ident" id="1382624"><a href="/gostd/bufio/scan.go.html#1382479">i</a></span><span class="op" id="1382625">]</span><span class="op" id="1382626">,</span>&nbsp;<span class="builtintype" id="1382628">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382640">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-empty,&nbsp;non-terminated&nbsp;word.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382721">if</span>&nbsp;<span class="ident" id="1382724"><a href="/gostd/bufio/scan.go.html#1382190">atEOF</a></span>&nbsp;<span class="op" id="1382730">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="1382733">len</span><span class="op" id="1382736">(</span><span class="ident" id="1382737"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382741">)</span>&nbsp;<span class="op" id="1382743">&gt;</span>&nbsp;<span class="ident" id="1382745"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span>&nbsp;<span class="op" id="1382751">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382755">return</span>&nbsp;<span class="builtinfunc" id="1382762">len</span><span class="op" id="1382765">(</span><span class="ident" id="1382766"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382770">)</span><span class="op" id="1382771">,</span>&nbsp;<span class="ident" id="1382773"><a href="/gostd/bufio/scan.go.html#1382177">data</a></span><span class="op" id="1382777">[</span><span class="ident" id="1382778"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span><span class="op" id="1382783">:</span><span class="op" id="1382784">]</span><span class="op" id="1382785">,</span>&nbsp;<span class="builtintype" id="1382787">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1382792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1382795">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1382818">return</span>&nbsp;<span class="ident" id="1382825"><a href="/gostd/bufio/scan.go.html#1382269">start</a></span><span class="op" id="1382830">,</span>&nbsp;<span class="builtintype" id="1382832">nil</span><span class="op" id="1382835">,</span>&nbsp;<span class="builtintype" id="1382837">nil</span><br>
<span class="lineno"></span><span class="op" id="1382841">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
