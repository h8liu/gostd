<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2538825">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2538880">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2538934">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2538985">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2539063">package</span>&nbsp;<span class="ident" id="2539071">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2539075">import</span>&nbsp;<span class="op" id="2539082">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2539085">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2539095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2539098">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2539164">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2539229">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2539254">var</span>&nbsp;<span class="op" id="2539258">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539261">Interrupt</span>&nbsp;<span class="ident" id="2539271">Signal</span>&nbsp;<span class="op" id="2539278">=</span>&nbsp;<span class="ident" id="2539280">syscall</span><span class="op" id="2539287">.</span><span class="ident" id="2539288">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539296">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2539306">Signal</span>&nbsp;<span class="op" id="2539313">=</span>&nbsp;<span class="ident" id="2539315">syscall</span><span class="op" id="2539322">.</span><span class="ident" id="2539323">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2539331">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2539334">func</span>&nbsp;<span class="ident" id="2539339">startProcess</span><span class="op" id="2539351">(</span><span class="ident" id="2539352">name</span>&nbsp;<span class="builtintype" id="2539357">string</span><span class="op" id="2539363">,</span>&nbsp;<span class="ident" id="2539365">argv</span>&nbsp;<span class="op" id="2539370">[</span><span class="op" id="2539371">]</span><span class="builtintype" id="2539372">string</span><span class="op" id="2539378">,</span>&nbsp;<span class="ident" id="2539380">attr</span>&nbsp;<span class="op" id="2539385">*</span><span class="ident" id="2539386">ProcAttr</span><span class="op" id="2539394">)</span>&nbsp;<span class="op" id="2539396">(</span><span class="ident" id="2539397">p</span>&nbsp;<span class="op" id="2539399">*</span><span class="ident" id="2539400">Process</span><span class="op" id="2539407">,</span>&nbsp;<span class="ident" id="2539409">err</span>&nbsp;<span class="builtintype" id="2539413">error</span><span class="op" id="2539418">)</span>&nbsp;<span class="op" id="2539420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2539423">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2539480">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2539542">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539602">if</span>&nbsp;<span class="ident" id="2539605">attr</span>&nbsp;<span class="op" id="2539610">!=</span>&nbsp;<span class="ident" id="2539613">nil</span>&nbsp;<span class="op" id="2539617">&amp;&amp;</span>&nbsp;<span class="ident" id="2539620">attr</span><span class="op" id="2539624">.</span><span class="ident" id="2539625">Sys</span>&nbsp;<span class="op" id="2539629">==</span>&nbsp;<span class="ident" id="2539632">nil</span>&nbsp;<span class="op" id="2539636">&amp;&amp;</span>&nbsp;<span class="ident" id="2539639">attr</span><span class="op" id="2539643">.</span><span class="ident" id="2539644">Dir</span>&nbsp;<span class="op" id="2539648">!=</span>&nbsp;<span class="string" id="2539651">&#34;&#34;</span>&nbsp;<span class="op" id="2539654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539658">if</span>&nbsp;<span class="ident" id="2539661">_</span><span class="op" id="2539662">,</span>&nbsp;<span class="ident" id="2539664">err</span>&nbsp;<span class="op" id="2539668">:=</span>&nbsp;<span class="ident" id="2539671">Stat</span><span class="op" id="2539675">(</span><span class="ident" id="2539676">attr</span><span class="op" id="2539680">.</span><span class="ident" id="2539681">Dir</span><span class="op" id="2539684">)</span><span class="op" id="2539685">;</span>&nbsp;<span class="ident" id="2539687">err</span>&nbsp;<span class="op" id="2539691">!=</span>&nbsp;<span class="ident" id="2539694">nil</span>&nbsp;<span class="op" id="2539698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539703">pe</span>&nbsp;<span class="op" id="2539706">:=</span>&nbsp;<span class="ident" id="2539709">err</span><span class="op" id="2539712">.</span><span class="op" id="2539713">(</span><span class="op" id="2539714">*</span><span class="ident" id="2539715">PathError</span><span class="op" id="2539724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539729">pe</span><span class="op" id="2539731">.</span><span class="ident" id="2539732">Op</span>&nbsp;<span class="op" id="2539735">=</span>&nbsp;<span class="string" id="2539737">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539748">return</span>&nbsp;<span class="ident" id="2539755">nil</span><span class="op" id="2539758">,</span>&nbsp;<span class="ident" id="2539760">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539772">sysattr</span>&nbsp;<span class="op" id="2539780">:=</span>&nbsp;<span class="op" id="2539783">&amp;</span><span class="ident" id="2539784">syscall</span><span class="op" id="2539791">.</span><span class="ident" id="2539792">ProcAttr</span><span class="op" id="2539800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539804">Dir</span><span class="op" id="2539807">:</span>&nbsp;<span class="ident" id="2539809">attr</span><span class="op" id="2539813">.</span><span class="ident" id="2539814">Dir</span><span class="op" id="2539817">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539821">Env</span><span class="op" id="2539824">:</span>&nbsp;<span class="ident" id="2539826">attr</span><span class="op" id="2539830">.</span><span class="ident" id="2539831">Env</span><span class="op" id="2539834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539838">Sys</span><span class="op" id="2539841">:</span>&nbsp;<span class="ident" id="2539843">attr</span><span class="op" id="2539847">.</span><span class="ident" id="2539848">Sys</span><span class="op" id="2539851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539857">if</span>&nbsp;<span class="ident" id="2539860">sysattr</span><span class="op" id="2539867">.</span><span class="ident" id="2539868">Env</span>&nbsp;<span class="op" id="2539872">==</span>&nbsp;<span class="ident" id="2539875">nil</span>&nbsp;<span class="op" id="2539879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539883">sysattr</span><span class="op" id="2539890">.</span><span class="ident" id="2539891">Env</span>&nbsp;<span class="op" id="2539895">=</span>&nbsp;<span class="ident" id="2539897">Environ</span><span class="op" id="2539904">(</span><span class="op" id="2539905">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2539911">for</span>&nbsp;<span class="ident" id="2539915">_</span><span class="op" id="2539916">,</span>&nbsp;<span class="ident" id="2539918">f</span>&nbsp;<span class="op" id="2539920">:=</span>&nbsp;<span class="keyword" id="2539923">range</span>&nbsp;<span class="ident" id="2539929">attr</span><span class="op" id="2539933">.</span><span class="ident" id="2539934">Files</span>&nbsp;<span class="op" id="2539940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539944">sysattr</span><span class="op" id="2539951">.</span><span class="ident" id="2539952">Files</span>&nbsp;<span class="op" id="2539958">=</span>&nbsp;<span class="builtinfunc" id="2539960">append</span><span class="op" id="2539966">(</span><span class="ident" id="2539967">sysattr</span><span class="op" id="2539974">.</span><span class="ident" id="2539975">Files</span><span class="op" id="2539980">,</span>&nbsp;<span class="ident" id="2539982">f</span><span class="op" id="2539983">.</span><span class="ident" id="2539984">Fd</span><span class="op" id="2539986">(</span><span class="op" id="2539987">)</span><span class="op" id="2539988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2539991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2539995">pid</span><span class="op" id="2539998">,</span>&nbsp;<span class="ident" id="2540000">h</span><span class="op" id="2540001">,</span>&nbsp;<span class="ident" id="2540003">e</span>&nbsp;<span class="op" id="2540005">:=</span>&nbsp;<span class="ident" id="2540008">syscall</span><span class="op" id="2540015">.</span><span class="ident" id="2540016">StartProcess</span><span class="op" id="2540028">(</span><span class="ident" id="2540029">name</span><span class="op" id="2540033">,</span>&nbsp;<span class="ident" id="2540035">argv</span><span class="op" id="2540039">,</span>&nbsp;<span class="ident" id="2540041">sysattr</span><span class="op" id="2540048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540051">if</span>&nbsp;<span class="ident" id="2540054">e</span>&nbsp;<span class="op" id="2540056">!=</span>&nbsp;<span class="ident" id="2540059">nil</span>&nbsp;<span class="op" id="2540063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540067">return</span>&nbsp;<span class="ident" id="2540074">nil</span><span class="op" id="2540077">,</span>&nbsp;<span class="op" id="2540079">&amp;</span><span class="ident" id="2540080">PathError</span><span class="op" id="2540089">{</span><span class="string" id="2540090">&#34;fork/exec&#34;</span><span class="op" id="2540101">,</span>&nbsp;<span class="ident" id="2540103">name</span><span class="op" id="2540107">,</span>&nbsp;<span class="ident" id="2540109">e</span><span class="op" id="2540110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540116">return</span>&nbsp;<span class="ident" id="2540123">newProcess</span><span class="op" id="2540133">(</span><span class="ident" id="2540134">pid</span><span class="op" id="2540137">,</span>&nbsp;<span class="ident" id="2540139">h</span><span class="op" id="2540140">)</span><span class="op" id="2540141">,</span>&nbsp;<span class="ident" id="2540143">nil</span><br>
<span class="lineno">50</span><span class="op" id="2540147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2540150">func</span>&nbsp;<span class="op" id="2540155">(</span><span class="ident" id="2540156">p</span>&nbsp;<span class="op" id="2540158">*</span><span class="ident" id="2540159">Process</span><span class="op" id="2540166">)</span>&nbsp;<span class="ident" id="2540168">kill</span><span class="op" id="2540172">(</span><span class="op" id="2540173">)</span>&nbsp;<span class="builtintype" id="2540175">error</span>&nbsp;<span class="op" id="2540181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540184">return</span>&nbsp;<span class="ident" id="2540191">p</span><span class="op" id="2540192">.</span><span class="ident" id="2540193">Signal</span><span class="op" id="2540199">(</span><span class="ident" id="2540200">Kill</span><span class="op" id="2540204">)</span><br>
<span class="lineno"></span><span class="op" id="2540206">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2540209">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2540282">type</span>&nbsp;<span class="ident" id="2540287">ProcessState</span>&nbsp;<span class="keyword" id="2540300">struct</span>&nbsp;<span class="op" id="2540307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540310">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2540317">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2540336">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540358">status</span>&nbsp;<span class="ident" id="2540365">syscall</span><span class="op" id="2540372">.</span><span class="ident" id="2540373">WaitStatus</span>&nbsp;<span class="comment" id="2540384">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540418">rusage</span>&nbsp;<span class="op" id="2540425">*</span><span class="ident" id="2540426">syscall</span><span class="op" id="2540433">.</span><span class="ident" id="2540434">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2540441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2540444">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2540497">func</span>&nbsp;<span class="op" id="2540502">(</span><span class="ident" id="2540503">p</span>&nbsp;<span class="op" id="2540505">*</span><span class="ident" id="2540506">ProcessState</span><span class="op" id="2540518">)</span>&nbsp;<span class="ident" id="2540520">Pid</span><span class="op" id="2540523">(</span><span class="op" id="2540524">)</span>&nbsp;<span class="builtintype" id="2540526">int</span>&nbsp;<span class="op" id="2540530">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540533">return</span>&nbsp;<span class="ident" id="2540540">p</span><span class="op" id="2540541">.</span><span class="ident" id="2540542">pid</span><br>
<span class="lineno"></span><span class="op" id="2540546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2540549">func</span>&nbsp;<span class="op" id="2540554">(</span><span class="ident" id="2540555">p</span>&nbsp;<span class="op" id="2540557">*</span><span class="ident" id="2540558">ProcessState</span><span class="op" id="2540570">)</span>&nbsp;<span class="ident" id="2540572">exited</span><span class="op" id="2540578">(</span><span class="op" id="2540579">)</span>&nbsp;<span class="builtintype" id="2540581">bool</span>&nbsp;<span class="op" id="2540586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540589">return</span>&nbsp;<span class="ident" id="2540596">p</span><span class="op" id="2540597">.</span><span class="ident" id="2540598">status</span><span class="op" id="2540604">.</span><span class="ident" id="2540605">Exited</span><span class="op" id="2540611">(</span><span class="op" id="2540612">)</span><br>
<span class="lineno">70</span><span class="op" id="2540614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2540617">func</span>&nbsp;<span class="op" id="2540622">(</span><span class="ident" id="2540623">p</span>&nbsp;<span class="op" id="2540625">*</span><span class="ident" id="2540626">ProcessState</span><span class="op" id="2540638">)</span>&nbsp;<span class="ident" id="2540640">success</span><span class="op" id="2540647">(</span><span class="op" id="2540648">)</span>&nbsp;<span class="builtintype" id="2540650">bool</span>&nbsp;<span class="op" id="2540655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540658">return</span>&nbsp;<span class="ident" id="2540665">p</span><span class="op" id="2540666">.</span><span class="ident" id="2540667">status</span><span class="op" id="2540673">.</span><span class="ident" id="2540674">ExitStatus</span><span class="op" id="2540684">(</span><span class="op" id="2540685">)</span>&nbsp;<span class="op" id="2540687">==</span>&nbsp;<span class="num" id="2540690">0</span><br>
<span class="lineno"></span><span class="op" id="2540692">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2540695">func</span>&nbsp;<span class="op" id="2540700">(</span><span class="ident" id="2540701">p</span>&nbsp;<span class="op" id="2540703">*</span><span class="ident" id="2540704">ProcessState</span><span class="op" id="2540716">)</span>&nbsp;<span class="ident" id="2540718">sys</span><span class="op" id="2540721">(</span><span class="op" id="2540722">)</span>&nbsp;<span class="keyword" id="2540724">interface</span><span class="op" id="2540733">{</span><span class="op" id="2540734">}</span>&nbsp;<span class="op" id="2540736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540739">return</span>&nbsp;<span class="ident" id="2540746">p</span><span class="op" id="2540747">.</span><span class="ident" id="2540748">status</span><br>
<span class="lineno"></span><span class="op" id="2540755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2540758">func</span>&nbsp;<span class="op" id="2540763">(</span><span class="ident" id="2540764">p</span>&nbsp;<span class="op" id="2540766">*</span><span class="ident" id="2540767">ProcessState</span><span class="op" id="2540779">)</span>&nbsp;<span class="ident" id="2540781">sysUsage</span><span class="op" id="2540789">(</span><span class="op" id="2540790">)</span>&nbsp;<span class="keyword" id="2540792">interface</span><span class="op" id="2540801">{</span><span class="op" id="2540802">}</span>&nbsp;<span class="op" id="2540804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540807">return</span>&nbsp;<span class="ident" id="2540814">p</span><span class="op" id="2540815">.</span><span class="ident" id="2540816">rusage</span><br>
<span class="lineno"></span><span class="op" id="2540823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2540826">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2540858">func</span>&nbsp;<span class="ident" id="2540863">itod</span><span class="op" id="2540867">(</span><span class="ident" id="2540868">i</span>&nbsp;<span class="builtintype" id="2540870">int</span><span class="op" id="2540873">)</span>&nbsp;<span class="builtintype" id="2540875">string</span>&nbsp;<span class="op" id="2540882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540885">if</span>&nbsp;<span class="ident" id="2540888">i</span>&nbsp;<span class="op" id="2540890">==</span>&nbsp;<span class="num" id="2540893">0</span>&nbsp;<span class="op" id="2540895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540899">return</span>&nbsp;<span class="string" id="2540906">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540915">u</span>&nbsp;<span class="op" id="2540917">:=</span>&nbsp;<span class="ident" id="2540920">uint64</span><span class="op" id="2540926">(</span><span class="ident" id="2540927">i</span><span class="op" id="2540928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540931">if</span>&nbsp;<span class="ident" id="2540934">i</span>&nbsp;<span class="op" id="2540936">&lt;</span>&nbsp;<span class="num" id="2540938">0</span>&nbsp;<span class="op" id="2540940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2540944">u</span>&nbsp;<span class="op" id="2540946">=</span>&nbsp;<span class="op" id="2540948">-</span><span class="ident" id="2540949">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2540952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2540956">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2540995">var</span>&nbsp;<span class="ident" id="2540999">b</span>&nbsp;<span class="op" id="2541001">[</span><span class="num" id="2541002">32</span><span class="op" id="2541004">]</span><span class="builtintype" id="2541005">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541011">bp</span>&nbsp;<span class="op" id="2541014">:=</span>&nbsp;<span class="builtinfunc" id="2541017">len</span><span class="op" id="2541020">(</span><span class="ident" id="2541021">b</span><span class="op" id="2541022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541025">for</span>&nbsp;<span class="op" id="2541029">;</span>&nbsp;<span class="ident" id="2541031">u</span>&nbsp;<span class="op" id="2541033">&gt;</span>&nbsp;<span class="num" id="2541035">0</span><span class="op" id="2541036">;</span>&nbsp;<span class="ident" id="2541038">u</span>&nbsp;<span class="op" id="2541040">/=</span>&nbsp;<span class="num" id="2541043">10</span>&nbsp;<span class="op" id="2541046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541050">bp</span><span class="op" id="2541052">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541057">b</span><span class="op" id="2541058">[</span><span class="ident" id="2541059">bp</span><span class="op" id="2541061">]</span>&nbsp;<span class="op" id="2541063">=</span>&nbsp;<span class="builtintype" id="2541065">byte</span><span class="op" id="2541069">(</span><span class="ident" id="2541070">u</span><span class="op" id="2541071">%</span><span class="num" id="2541072">10</span><span class="op" id="2541074">)</span>&nbsp;<span class="op" id="2541076">+</span>&nbsp;<span class="string" id="2541078">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541087">if</span>&nbsp;<span class="ident" id="2541090">i</span>&nbsp;<span class="op" id="2541092">&lt;</span>&nbsp;<span class="num" id="2541094">0</span>&nbsp;<span class="op" id="2541096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541100">bp</span><span class="op" id="2541102">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541107">b</span><span class="op" id="2541108">[</span><span class="ident" id="2541109">bp</span><span class="op" id="2541111">]</span>&nbsp;<span class="op" id="2541113">=</span>&nbsp;<span class="string" id="2541115">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541124">return</span>&nbsp;<span class="builtintype" id="2541131">string</span><span class="op" id="2541137">(</span><span class="ident" id="2541138">b</span><span class="op" id="2541139">[</span><span class="ident" id="2541140">bp</span><span class="op" id="2541142">:</span><span class="op" id="2541143">]</span><span class="op" id="2541144">)</span><br>
<span class="lineno"></span><span class="op" id="2541146">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2541149">func</span>&nbsp;<span class="op" id="2541154">(</span><span class="ident" id="2541155">p</span>&nbsp;<span class="op" id="2541157">*</span><span class="ident" id="2541158">ProcessState</span><span class="op" id="2541170">)</span>&nbsp;<span class="ident" id="2541172">String</span><span class="op" id="2541178">(</span><span class="op" id="2541179">)</span>&nbsp;<span class="builtintype" id="2541181">string</span>&nbsp;<span class="op" id="2541188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541191">if</span>&nbsp;<span class="ident" id="2541194">p</span>&nbsp;<span class="op" id="2541196">==</span>&nbsp;<span class="ident" id="2541199">nil</span>&nbsp;<span class="op" id="2541203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541207">return</span>&nbsp;<span class="string" id="2541214">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541223">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541226">status</span>&nbsp;<span class="op" id="2541233">:=</span>&nbsp;<span class="ident" id="2541236">p</span><span class="op" id="2541237">.</span><span class="ident" id="2541238">Sys</span><span class="op" id="2541241">(</span><span class="op" id="2541242">)</span><span class="op" id="2541243">.</span><span class="op" id="2541244">(</span><span class="ident" id="2541245">syscall</span><span class="op" id="2541252">.</span><span class="ident" id="2541253">WaitStatus</span><span class="op" id="2541263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541266">res</span>&nbsp;<span class="op" id="2541270">:=</span>&nbsp;<span class="string" id="2541273">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541277">switch</span>&nbsp;<span class="op" id="2541284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541287">case</span>&nbsp;<span class="ident" id="2541292">status</span><span class="op" id="2541298">.</span><span class="ident" id="2541299">Exited</span><span class="op" id="2541305">(</span><span class="op" id="2541306">)</span><span class="op" id="2541307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541311">res</span>&nbsp;<span class="op" id="2541315">=</span>&nbsp;<span class="string" id="2541317">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2541332">+</span>&nbsp;<span class="ident" id="2541334">itod</span><span class="op" id="2541338">(</span><span class="ident" id="2541339">status</span><span class="op" id="2541345">.</span><span class="ident" id="2541346">ExitStatus</span><span class="op" id="2541356">(</span><span class="op" id="2541357">)</span><span class="op" id="2541358">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541361">case</span>&nbsp;<span class="ident" id="2541366">status</span><span class="op" id="2541372">.</span><span class="ident" id="2541373">Signaled</span><span class="op" id="2541381">(</span><span class="op" id="2541382">)</span><span class="op" id="2541383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541387">res</span>&nbsp;<span class="op" id="2541391">=</span>&nbsp;<span class="string" id="2541393">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2541404">+</span>&nbsp;<span class="ident" id="2541406">status</span><span class="op" id="2541412">.</span><span class="ident" id="2541413">Signal</span><span class="op" id="2541419">(</span><span class="op" id="2541420">)</span><span class="op" id="2541421">.</span><span class="ident" id="2541422">String</span><span class="op" id="2541428">(</span><span class="op" id="2541429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541432">case</span>&nbsp;<span class="ident" id="2541437">status</span><span class="op" id="2541443">.</span><span class="ident" id="2541444">Stopped</span><span class="op" id="2541451">(</span><span class="op" id="2541452">)</span><span class="op" id="2541453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541457">res</span>&nbsp;<span class="op" id="2541461">=</span>&nbsp;<span class="string" id="2541463">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2541479">+</span>&nbsp;<span class="ident" id="2541481">status</span><span class="op" id="2541487">.</span><span class="ident" id="2541488">StopSignal</span><span class="op" id="2541498">(</span><span class="op" id="2541499">)</span><span class="op" id="2541500">.</span><span class="ident" id="2541501">String</span><span class="op" id="2541507">(</span><span class="op" id="2541508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541512">if</span>&nbsp;<span class="ident" id="2541515">status</span><span class="op" id="2541521">.</span><span class="ident" id="2541522">StopSignal</span><span class="op" id="2541532">(</span><span class="op" id="2541533">)</span>&nbsp;<span class="op" id="2541535">==</span>&nbsp;<span class="ident" id="2541538">syscall</span><span class="op" id="2541545">.</span><span class="ident" id="2541546">SIGTRAP</span>&nbsp;<span class="op" id="2541554">&amp;&amp;</span>&nbsp;<span class="ident" id="2541557">status</span><span class="op" id="2541563">.</span><span class="ident" id="2541564">TrapCause</span><span class="op" id="2541573">(</span><span class="op" id="2541574">)</span>&nbsp;<span class="op" id="2541576">!=</span>&nbsp;<span class="num" id="2541579">0</span>&nbsp;<span class="op" id="2541581">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541586">res</span>&nbsp;<span class="op" id="2541590">+=</span>&nbsp;<span class="string" id="2541593">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2541603">+</span>&nbsp;<span class="ident" id="2541605">itod</span><span class="op" id="2541609">(</span><span class="ident" id="2541610">status</span><span class="op" id="2541616">.</span><span class="ident" id="2541617">TrapCause</span><span class="op" id="2541626">(</span><span class="op" id="2541627">)</span><span class="op" id="2541628">)</span>&nbsp;<span class="op" id="2541630">+</span>&nbsp;<span class="string" id="2541632">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541641">case</span>&nbsp;<span class="ident" id="2541646">status</span><span class="op" id="2541652">.</span><span class="ident" id="2541653">Continued</span><span class="op" id="2541662">(</span><span class="op" id="2541663">)</span><span class="op" id="2541664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541668">res</span>&nbsp;<span class="op" id="2541672">=</span>&nbsp;<span class="string" id="2541674">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541687">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541690">if</span>&nbsp;<span class="ident" id="2541693">status</span><span class="op" id="2541699">.</span><span class="ident" id="2541700">CoreDump</span><span class="op" id="2541708">(</span><span class="op" id="2541709">)</span>&nbsp;<span class="op" id="2541711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2541715">res</span>&nbsp;<span class="op" id="2541719">+=</span>&nbsp;<span class="string" id="2541722">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2541740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2541743">return</span>&nbsp;<span class="ident" id="2541750">res</span><br>
<span class="lineno"></span><span class="op" id="2541754">}</span>
</div>
</body>
</html>
