<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7655198">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7655253">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7655307">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7655358">package</span>&nbsp;<span class="ident" id="7655366">expvar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7655374">import</span>&nbsp;<span class="op" id="7655381">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655384">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655393">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655410">&#34;net/http/httptest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655431">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7655442">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7655452">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7655455">//&nbsp;RemoveAll&nbsp;removes&nbsp;all&nbsp;exported&nbsp;variables.</span><br>
<span class="lineno"></span><span class="comment" id="7655500">//&nbsp;This&nbsp;is&nbsp;for&nbsp;tests&nbsp;only.</span><br>
<span class="lineno"></span><span class="keyword" id="7655527">func</span>&nbsp;<span class="ident" id="7655532">RemoveAll</span><span class="op" id="7655541">(</span><span class="op" id="7655542">)</span>&nbsp;<span class="op" id="7655544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655547"><a href="/expvar/expvar.go.html#5574107">mutex</a></span><span class="op" id="7655552">.</span><span class="ident" id="7655553">Lock</span><span class="op" id="7655557">(</span><span class="op" id="7655558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655561">defer</span>&nbsp;<span class="ident" id="7655567"><a href="/expvar/expvar.go.html#5574107">mutex</a></span><span class="op" id="7655572">.</span><span class="ident" id="7655573">Unlock</span><span class="op" id="7655579">(</span><span class="op" id="7655580">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655583"><a href="/expvar/expvar.go.html#5574129">vars</a></span>&nbsp;<span class="op" id="7655588">=</span>&nbsp;<span class="builtinfunc" id="7655590">make</span><span class="op" id="7655594">(</span><span class="keyword" id="7655595">map</span><span class="op" id="7655598">[</span><span class="builtintype" id="7655599">string</span><span class="op" id="7655605">]</span><span class="ident" id="7655606"><a href="/expvar/expvar.go.html#5570357">Var</a></span><span class="op" id="7655609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655612"><a href="/expvar/expvar.go.html#5574161">varKeys</a></span>&nbsp;<span class="op" id="7655620">=</span>&nbsp;<span class="ident" id="7655622">nil</span><br>
<span class="lineno"></span><span class="op" id="7655626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7655629">func</span>&nbsp;<span class="ident" id="7655634">TestInt</span><span class="op" id="7655641">(</span><span class="ident" id="7655642">t</span>&nbsp;<span class="op" id="7655644">*</span><span class="ident" id="7655645"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7655652">.</span><span class="ident" id="7655653">T</span><span class="op" id="7655654">)</span>&nbsp;<span class="op" id="7655656">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655659"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7655668">(</span><span class="op" id="7655669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655672">reqs</span>&nbsp;<span class="op" id="7655677">:=</span>&nbsp;<span class="ident" id="7655680"><a href="/expvar/expvar.go.html#5574825">NewInt</a></span><span class="op" id="7655686">(</span><span class="string" id="7655687">&#34;requests&#34;</span><span class="op" id="7655697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655700">if</span>&nbsp;<span class="ident" id="7655703"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655707">.</span><span class="ident" id="7655708">i</span>&nbsp;<span class="op" id="7655710">!=</span>&nbsp;<span class="num" id="7655713">0</span>&nbsp;<span class="op" id="7655715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655719"><a href="/expvar/expvar_test.go.html#7655642">t</a></span><span class="op" id="7655720">.</span><span class="ident" id="7655721">Errorf</span><span class="op" id="7655727">(</span><span class="string" id="7655728">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7655749">,</span>&nbsp;<span class="ident" id="7655751"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655755">.</span><span class="ident" id="7655756">i</span><span class="op" id="7655757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655760">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655763">if</span>&nbsp;<span class="ident" id="7655766"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span>&nbsp;<span class="op" id="7655771">!=</span>&nbsp;<span class="ident" id="7655774"><a href="/expvar/expvar.go.html#5574674">Get</a></span><span class="op" id="7655777">(</span><span class="string" id="7655778">&#34;requests&#34;</span><span class="op" id="7655788">)</span><span class="op" id="7655789">.</span><span class="op" id="7655790">(</span><span class="op" id="7655791">*</span><span class="ident" id="7655792"><a href="/expvar/expvar.go.html#5570468">Int</a></span><span class="op" id="7655795">)</span>&nbsp;<span class="op" id="7655797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655801"><a href="/expvar/expvar_test.go.html#7655642">t</a></span><span class="op" id="7655802">.</span><span class="ident" id="7655803">Errorf</span><span class="op" id="7655809">(</span><span class="string" id="7655810">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7655825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655832"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655836">.</span><span class="ident" id="7655837">Add</span><span class="op" id="7655840">(</span><span class="num" id="7655841">1</span><span class="op" id="7655842">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655845"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655849">.</span><span class="ident" id="7655850">Add</span><span class="op" id="7655853">(</span><span class="num" id="7655854">3</span><span class="op" id="7655855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655858">if</span>&nbsp;<span class="ident" id="7655861"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655865">.</span><span class="ident" id="7655866">i</span>&nbsp;<span class="op" id="7655868">!=</span>&nbsp;<span class="num" id="7655871">4</span>&nbsp;<span class="op" id="7655873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655877"><a href="/expvar/expvar_test.go.html#7655642">t</a></span><span class="op" id="7655878">.</span><span class="ident" id="7655879">Errorf</span><span class="op" id="7655885">(</span><span class="string" id="7655886">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7655907">,</span>&nbsp;<span class="ident" id="7655909"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655913">.</span><span class="ident" id="7655914">i</span><span class="op" id="7655915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7655918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7655922">if</span>&nbsp;<span class="ident" id="7655925">s</span>&nbsp;<span class="op" id="7655927">:=</span>&nbsp;<span class="ident" id="7655930"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7655934">.</span><span class="ident" id="7655935">String</span><span class="op" id="7655941">(</span><span class="op" id="7655942">)</span><span class="op" id="7655943">;</span>&nbsp;<span class="ident" id="7655945"><a href="/expvar/expvar_test.go.html#7655925">s</a></span>&nbsp;<span class="op" id="7655947">!=</span>&nbsp;<span class="string" id="7655950">&#34;4&#34;</span>&nbsp;<span class="op" id="7655954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7655958"><a href="/expvar/expvar_test.go.html#7655642">t</a></span><span class="op" id="7655959">.</span><span class="ident" id="7655960">Errorf</span><span class="op" id="7655966">(</span><span class="string" id="7655967">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4\&#34;&#34;</span><span class="op" id="7655999">,</span>&nbsp;<span class="ident" id="7656001"><a href="/expvar/expvar_test.go.html#7655925">s</a></span><span class="op" id="7656002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656009"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7656013">.</span><span class="ident" id="7656014">Set</span><span class="op" id="7656017">(</span><span class="op" id="7656018">-</span><span class="num" id="7656019">2</span><span class="op" id="7656020">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656023">if</span>&nbsp;<span class="ident" id="7656026"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7656030">.</span><span class="ident" id="7656031">i</span>&nbsp;<span class="op" id="7656033">!=</span>&nbsp;<span class="op" id="7656036">-</span><span class="num" id="7656037">2</span>&nbsp;<span class="op" id="7656039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656043"><a href="/expvar/expvar_test.go.html#7655642">t</a></span><span class="op" id="7656044">.</span><span class="ident" id="7656045">Errorf</span><span class="op" id="7656051">(</span><span class="string" id="7656052">&#34;reqs.i&nbsp;=&nbsp;%v,&nbsp;want&nbsp;-2&#34;</span><span class="op" id="7656074">,</span>&nbsp;<span class="ident" id="7656076"><a href="/expvar/expvar_test.go.html#7655672">reqs</a></span><span class="op" id="7656080">.</span><span class="ident" id="7656081">i</span><span class="op" id="7656082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656085">}</span><br>
<span class="lineno"></span><span class="op" id="7656087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="7656090">func</span>&nbsp;<span class="ident" id="7656095">TestFloat</span><span class="op" id="7656104">(</span><span class="ident" id="7656105">t</span>&nbsp;<span class="op" id="7656107">*</span><span class="ident" id="7656108"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7656115">.</span><span class="ident" id="7656116">T</span><span class="op" id="7656117">)</span>&nbsp;<span class="op" id="7656119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656122"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7656131">(</span><span class="op" id="7656132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656135">reqs</span>&nbsp;<span class="op" id="7656140">:=</span>&nbsp;<span class="ident" id="7656143"><a href="/expvar/expvar.go.html#5574903">NewFloat</a></span><span class="op" id="7656151">(</span><span class="string" id="7656152">&#34;requests-float&#34;</span><span class="op" id="7656168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656171">if</span>&nbsp;<span class="ident" id="7656174"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656178">.</span><span class="ident" id="7656179">f</span>&nbsp;<span class="op" id="7656181">!=</span>&nbsp;<span class="num" id="7656184">0.0</span>&nbsp;<span class="op" id="7656188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656192"><a href="/expvar/expvar_test.go.html#7656105">t</a></span><span class="op" id="7656193">.</span><span class="ident" id="7656194">Errorf</span><span class="op" id="7656200">(</span><span class="string" id="7656201">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7656222">,</span>&nbsp;<span class="ident" id="7656224"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656228">.</span><span class="ident" id="7656229">f</span><span class="op" id="7656230">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656236">if</span>&nbsp;<span class="ident" id="7656239"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span>&nbsp;<span class="op" id="7656244">!=</span>&nbsp;<span class="ident" id="7656247"><a href="/expvar/expvar.go.html#5574674">Get</a></span><span class="op" id="7656250">(</span><span class="string" id="7656251">&#34;requests-float&#34;</span><span class="op" id="7656267">)</span><span class="op" id="7656268">.</span><span class="op" id="7656269">(</span><span class="op" id="7656270">*</span><span class="ident" id="7656271"><a href="/expvar/expvar.go.html#5570859">Float</a></span><span class="op" id="7656276">)</span>&nbsp;<span class="op" id="7656278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656282"><a href="/expvar/expvar_test.go.html#7656105">t</a></span><span class="op" id="7656283">.</span><span class="ident" id="7656284">Errorf</span><span class="op" id="7656290">(</span><span class="string" id="7656291">&#34;Get()&nbsp;failed.&#34;</span><span class="op" id="7656306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656313"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656317">.</span><span class="ident" id="7656318">Add</span><span class="op" id="7656321">(</span><span class="num" id="7656322">1.5</span><span class="op" id="7656325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656328"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656332">.</span><span class="ident" id="7656333">Add</span><span class="op" id="7656336">(</span><span class="num" id="7656337">1.25</span><span class="op" id="7656341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656344">if</span>&nbsp;<span class="ident" id="7656347"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656351">.</span><span class="ident" id="7656352">f</span>&nbsp;<span class="op" id="7656354">!=</span>&nbsp;<span class="num" id="7656357">2.75</span>&nbsp;<span class="op" id="7656362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656366"><a href="/expvar/expvar_test.go.html#7656105">t</a></span><span class="op" id="7656367">.</span><span class="ident" id="7656368">Errorf</span><span class="op" id="7656374">(</span><span class="string" id="7656375">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;2.75&#34;</span><span class="op" id="7656399">,</span>&nbsp;<span class="ident" id="7656401"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656405">.</span><span class="ident" id="7656406">f</span><span class="op" id="7656407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656410">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656414">if</span>&nbsp;<span class="ident" id="7656417">s</span>&nbsp;<span class="op" id="7656419">:=</span>&nbsp;<span class="ident" id="7656422"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656426">.</span><span class="ident" id="7656427">String</span><span class="op" id="7656433">(</span><span class="op" id="7656434">)</span><span class="op" id="7656435">;</span>&nbsp;<span class="ident" id="7656437"><a href="/expvar/expvar_test.go.html#7656417">s</a></span>&nbsp;<span class="op" id="7656439">!=</span>&nbsp;<span class="string" id="7656442">&#34;2.75&#34;</span>&nbsp;<span class="op" id="7656449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656453"><a href="/expvar/expvar_test.go.html#7656105">t</a></span><span class="op" id="7656454">.</span><span class="ident" id="7656455">Errorf</span><span class="op" id="7656461">(</span><span class="string" id="7656462">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;4.64\&#34;&#34;</span><span class="op" id="7656497">,</span>&nbsp;<span class="ident" id="7656499"><a href="/expvar/expvar_test.go.html#7656417">s</a></span><span class="op" id="7656500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656507"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656511">.</span><span class="ident" id="7656512">Add</span><span class="op" id="7656515">(</span><span class="op" id="7656516">-</span><span class="num" id="7656517">2</span><span class="op" id="7656518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656521">if</span>&nbsp;<span class="ident" id="7656524"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656528">.</span><span class="ident" id="7656529">f</span>&nbsp;<span class="op" id="7656531">!=</span>&nbsp;<span class="num" id="7656534">0.75</span>&nbsp;<span class="op" id="7656539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656543"><a href="/expvar/expvar_test.go.html#7656105">t</a></span><span class="op" id="7656544">.</span><span class="ident" id="7656545">Errorf</span><span class="op" id="7656551">(</span><span class="string" id="7656552">&#34;reqs.f&nbsp;=&nbsp;%v,&nbsp;want&nbsp;0.75&#34;</span><span class="op" id="7656576">,</span>&nbsp;<span class="ident" id="7656578"><a href="/expvar/expvar_test.go.html#7656135">reqs</a></span><span class="op" id="7656582">.</span><span class="ident" id="7656583">f</span><span class="op" id="7656584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656587">}</span><br>
<span class="lineno"></span><span class="op" id="7656589">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7656592">func</span>&nbsp;<span class="ident" id="7656597">TestString</span><span class="op" id="7656607">(</span><span class="ident" id="7656608">t</span>&nbsp;<span class="op" id="7656610">*</span><span class="ident" id="7656611"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7656618">.</span><span class="ident" id="7656619">T</span><span class="op" id="7656620">)</span>&nbsp;<span class="op" id="7656622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656625"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7656634">(</span><span class="op" id="7656635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656638">name</span>&nbsp;<span class="op" id="7656643">:=</span>&nbsp;<span class="ident" id="7656646"><a href="/expvar/expvar.go.html#5575072">NewString</a></span><span class="op" id="7656655">(</span><span class="string" id="7656656">&#34;my-name&#34;</span><span class="op" id="7656665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656668">if</span>&nbsp;<span class="ident" id="7656671"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656675">.</span><span class="ident" id="7656676">s</span>&nbsp;<span class="op" id="7656678">!=</span>&nbsp;<span class="string" id="7656681">&#34;&#34;</span>&nbsp;<span class="op" id="7656684">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656688"><a href="/expvar/expvar_test.go.html#7656608">t</a></span><span class="op" id="7656689">.</span><span class="ident" id="7656690">Errorf</span><span class="op" id="7656696">(</span><span class="string" id="7656697">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;&#34;</span><span class="op" id="7656721">,</span>&nbsp;<span class="ident" id="7656723"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656727">.</span><span class="ident" id="7656728">s</span><span class="op" id="7656729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656736"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656740">.</span><span class="ident" id="7656741">Set</span><span class="op" id="7656744">(</span><span class="string" id="7656745">&#34;Mike&#34;</span><span class="op" id="7656751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656754">if</span>&nbsp;<span class="ident" id="7656757"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656761">.</span><span class="ident" id="7656762">s</span>&nbsp;<span class="op" id="7656764">!=</span>&nbsp;<span class="string" id="7656767">&#34;Mike&#34;</span>&nbsp;<span class="op" id="7656774">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656778"><a href="/expvar/expvar_test.go.html#7656608">t</a></span><span class="op" id="7656779">.</span><span class="ident" id="7656780">Errorf</span><span class="op" id="7656786">(</span><span class="string" id="7656787">&#34;name.s&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;Mike\&#34;&#34;</span><span class="op" id="7656815">,</span>&nbsp;<span class="ident" id="7656817"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656821">.</span><span class="ident" id="7656822">s</span><span class="op" id="7656823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7656830">if</span>&nbsp;<span class="ident" id="7656833">s</span>&nbsp;<span class="op" id="7656835">:=</span>&nbsp;<span class="ident" id="7656838"><a href="/expvar/expvar_test.go.html#7656638">name</a></span><span class="op" id="7656842">.</span><span class="ident" id="7656843">String</span><span class="op" id="7656849">(</span><span class="op" id="7656850">)</span><span class="op" id="7656851">;</span>&nbsp;<span class="ident" id="7656853"><a href="/expvar/expvar_test.go.html#7656833">s</a></span>&nbsp;<span class="op" id="7656855">!=</span>&nbsp;<span class="string" id="7656858">&#34;\&#34;Mike\&#34;&#34;</span>&nbsp;<span class="op" id="7656869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656873"><a href="/expvar/expvar_test.go.html#7656608">t</a></span><span class="op" id="7656874">.</span><span class="ident" id="7656875">Errorf</span><span class="op" id="7656881">(</span><span class="string" id="7656882">&#34;reqs.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;\&#34;Mike\&#34;\&#34;&#34;</span><span class="op" id="7656921">,</span>&nbsp;<span class="ident" id="7656923"><a href="/expvar/expvar_test.go.html#7656833">s</a></span><span class="op" id="7656924">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7656927">}</span><br>
<span class="lineno"></span><span class="op" id="7656929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7656932">func</span>&nbsp;<span class="ident" id="7656937">TestMapCounter</span><span class="op" id="7656951">(</span><span class="ident" id="7656952">t</span>&nbsp;<span class="op" id="7656954">*</span><span class="ident" id="7656955"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7656962">.</span><span class="ident" id="7656963">T</span><span class="op" id="7656964">)</span>&nbsp;<span class="op" id="7656966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656969"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7656978">(</span><span class="op" id="7656979">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7656982">colors</span>&nbsp;<span class="op" id="7656989">:=</span>&nbsp;<span class="ident" id="7656992"><a href="/expvar/expvar.go.html#5574987">NewMap</a></span><span class="op" id="7656998">(</span><span class="string" id="7656999">&#34;bike-shed-colors&#34;</span><span class="op" id="7657017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657021"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657027">.</span><span class="ident" id="7657028">Add</span><span class="op" id="7657031">(</span><span class="string" id="7657032">&#34;red&#34;</span><span class="op" id="7657037">,</span>&nbsp;<span class="num" id="7657039">1</span><span class="op" id="7657040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657043"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657049">.</span><span class="ident" id="7657050">Add</span><span class="op" id="7657053">(</span><span class="string" id="7657054">&#34;red&#34;</span><span class="op" id="7657059">,</span>&nbsp;<span class="num" id="7657061">2</span><span class="op" id="7657062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657065"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657071">.</span><span class="ident" id="7657072">Add</span><span class="op" id="7657075">(</span><span class="string" id="7657076">&#34;blue&#34;</span><span class="op" id="7657082">,</span>&nbsp;<span class="num" id="7657084">4</span><span class="op" id="7657085">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657088"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657094">.</span><span class="ident" id="7657095">AddFloat</span><span class="op" id="7657103">(</span><span class="string" id="7657104">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7657120">,</span>&nbsp;<span class="num" id="7657122">4.125</span><span class="op" id="7657127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657130">if</span>&nbsp;<span class="ident" id="7657133">x</span>&nbsp;<span class="op" id="7657135">:=</span>&nbsp;<span class="ident" id="7657138"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657144">.</span><span class="ident" id="7657145">m</span><span class="op" id="7657146">[</span><span class="string" id="7657147">&#34;red&#34;</span><span class="op" id="7657152">]</span><span class="op" id="7657153">.</span><span class="op" id="7657154">(</span><span class="op" id="7657155">*</span><span class="ident" id="7657156"><a href="/expvar/expvar.go.html#5570468">Int</a></span><span class="op" id="7657159">)</span><span class="op" id="7657160">.</span><span class="ident" id="7657161">i</span><span class="op" id="7657162">;</span>&nbsp;<span class="ident" id="7657164"><a href="/expvar/expvar_test.go.html#7657133">x</a></span>&nbsp;<span class="op" id="7657166">!=</span>&nbsp;<span class="num" id="7657169">3</span>&nbsp;<span class="op" id="7657171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657175"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657176">.</span><span class="ident" id="7657177">Errorf</span><span class="op" id="7657183">(</span><span class="string" id="7657184">&#34;colors.m[\&#34;red\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7657216">,</span>&nbsp;<span class="ident" id="7657218"><a href="/expvar/expvar_test.go.html#7657133">x</a></span><span class="op" id="7657219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657225">if</span>&nbsp;<span class="ident" id="7657228">x</span>&nbsp;<span class="op" id="7657230">:=</span>&nbsp;<span class="ident" id="7657233"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657239">.</span><span class="ident" id="7657240">m</span><span class="op" id="7657241">[</span><span class="string" id="7657242">&#34;blue&#34;</span><span class="op" id="7657248">]</span><span class="op" id="7657249">.</span><span class="op" id="7657250">(</span><span class="op" id="7657251">*</span><span class="ident" id="7657252"><a href="/expvar/expvar.go.html#5570468">Int</a></span><span class="op" id="7657255">)</span><span class="op" id="7657256">.</span><span class="ident" id="7657257">i</span><span class="op" id="7657258">;</span>&nbsp;<span class="ident" id="7657260"><a href="/expvar/expvar_test.go.html#7657228">x</a></span>&nbsp;<span class="op" id="7657262">!=</span>&nbsp;<span class="num" id="7657265">4</span>&nbsp;<span class="op" id="7657267">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657271"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657272">.</span><span class="ident" id="7657273">Errorf</span><span class="op" id="7657279">(</span><span class="string" id="7657280">&#34;colors.m[\&#34;blue\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;4&#34;</span><span class="op" id="7657313">,</span>&nbsp;<span class="ident" id="7657315"><a href="/expvar/expvar_test.go.html#7657228">x</a></span><span class="op" id="7657316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657322">if</span>&nbsp;<span class="ident" id="7657325">x</span>&nbsp;<span class="op" id="7657327">:=</span>&nbsp;<span class="ident" id="7657330"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657336">.</span><span class="ident" id="7657337">m</span><span class="op" id="7657338">[</span><span class="string" id="7657339">`green&nbsp;&#34;midori&#34;`</span><span class="op" id="7657355">]</span><span class="op" id="7657356">.</span><span class="op" id="7657357">(</span><span class="op" id="7657358">*</span><span class="ident" id="7657359"><a href="/expvar/expvar.go.html#5570859">Float</a></span><span class="op" id="7657364">)</span><span class="op" id="7657365">.</span><span class="ident" id="7657366">f</span><span class="op" id="7657367">;</span>&nbsp;<span class="ident" id="7657369"><a href="/expvar/expvar_test.go.html#7657325">x</a></span>&nbsp;<span class="op" id="7657371">!=</span>&nbsp;<span class="num" id="7657374">4.125</span>&nbsp;<span class="op" id="7657380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657384"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657385">.</span><span class="ident" id="7657386">Errorf</span><span class="op" id="7657392">(</span><span class="string" id="7657393">&#34;colors.m[`green&nbsp;\&#34;midori\&#34;]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3.14&#34;</span><span class="op" id="7657438">,</span>&nbsp;<span class="ident" id="7657440"><a href="/expvar/expvar_test.go.html#7657325">x</a></span><span class="op" id="7657441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657444">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7657448">//&nbsp;colors.String()&nbsp;should&nbsp;be&nbsp;&#39;{&#34;red&#34;:3,&nbsp;&#34;blue&#34;:4}&#39;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7657501">//&nbsp;though&nbsp;the&nbsp;order&nbsp;of&nbsp;red&nbsp;and&nbsp;blue&nbsp;could&nbsp;vary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657550">s</span>&nbsp;<span class="op" id="7657552">:=</span>&nbsp;<span class="ident" id="7657555"><a href="/expvar/expvar_test.go.html#7656982">colors</a></span><span class="op" id="7657561">.</span><span class="ident" id="7657562">String</span><span class="op" id="7657568">(</span><span class="op" id="7657569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657572">var</span>&nbsp;<span class="ident" id="7657576">j</span>&nbsp;<span class="keyword" id="7657578">interface</span><span class="op" id="7657587">{</span><span class="op" id="7657588">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657591">err</span>&nbsp;<span class="op" id="7657595">:=</span>&nbsp;<span class="ident" id="7657598"><a href="/expvar/expvar_test.go.html#7655393">json</a></span><span class="op" id="7657602">.</span><span class="ident" id="7657603">Unmarshal</span><span class="op" id="7657612">(</span><span class="op" id="7657613">[</span><span class="op" id="7657614">]</span><span class="builtintype" id="7657615">byte</span><span class="op" id="7657619">(</span><span class="ident" id="7657620"><a href="/expvar/expvar_test.go.html#7657550">s</a></span><span class="op" id="7657621">)</span><span class="op" id="7657622">,</span>&nbsp;<span class="op" id="7657624">&amp;</span><span class="ident" id="7657625"><a href="/expvar/expvar_test.go.html#7657576">j</a></span><span class="op" id="7657626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657629">if</span>&nbsp;<span class="ident" id="7657632"><a href="/expvar/expvar_test.go.html#7657591">err</a></span>&nbsp;<span class="op" id="7657636">!=</span>&nbsp;<span class="ident" id="7657639">nil</span>&nbsp;<span class="op" id="7657643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657647"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657648">.</span><span class="ident" id="7657649">Errorf</span><span class="op" id="7657655">(</span><span class="string" id="7657656">&#34;colors.String()&nbsp;isn&#39;t&nbsp;valid&nbsp;JSON:&nbsp;%v&#34;</span><span class="op" id="7657694">,</span>&nbsp;<span class="ident" id="7657696"><a href="/expvar/expvar_test.go.html#7657591">err</a></span><span class="op" id="7657699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657705">m</span><span class="op" id="7657706">,</span>&nbsp;<span class="ident" id="7657708">ok</span>&nbsp;<span class="op" id="7657711">:=</span>&nbsp;<span class="ident" id="7657714"><a href="/expvar/expvar_test.go.html#7657576">j</a></span><span class="op" id="7657715">.</span><span class="op" id="7657716">(</span><span class="keyword" id="7657717">map</span><span class="op" id="7657720">[</span><span class="builtintype" id="7657721">string</span><span class="op" id="7657727">]</span><span class="keyword" id="7657728">interface</span><span class="op" id="7657737">{</span><span class="op" id="7657738">}</span><span class="op" id="7657739">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657742">if</span>&nbsp;<span class="op" id="7657745">!</span><span class="ident" id="7657746"><a href="/expvar/expvar_test.go.html#7657708">ok</a></span>&nbsp;<span class="op" id="7657749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657753"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657754">.</span><span class="ident" id="7657755">Error</span><span class="op" id="7657760">(</span><span class="string" id="7657761">&#34;colors.String()&nbsp;didn&#39;t&nbsp;produce&nbsp;a&nbsp;map.&#34;</span><span class="op" id="7657800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657806">red</span>&nbsp;<span class="op" id="7657810">:=</span>&nbsp;<span class="ident" id="7657813"><a href="/expvar/expvar_test.go.html#7657705">m</a></span><span class="op" id="7657814">[</span><span class="string" id="7657815">&#34;red&#34;</span><span class="op" id="7657820">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657823">x</span><span class="op" id="7657824">,</span>&nbsp;<span class="ident" id="7657826"><a href="/expvar/expvar_test.go.html#7657708">ok</a></span>&nbsp;<span class="op" id="7657829">:=</span>&nbsp;<span class="ident" id="7657832"><a href="/expvar/expvar_test.go.html#7657806">red</a></span><span class="op" id="7657835">.</span><span class="op" id="7657836">(</span><span class="builtintype" id="7657837">float64</span><span class="op" id="7657844">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657847">if</span>&nbsp;<span class="op" id="7657850">!</span><span class="ident" id="7657851"><a href="/expvar/expvar_test.go.html#7657708">ok</a></span>&nbsp;<span class="op" id="7657854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657858"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657859">.</span><span class="ident" id="7657860">Error</span><span class="op" id="7657865">(</span><span class="string" id="7657866">&#34;red.Kind()&nbsp;is&nbsp;not&nbsp;a&nbsp;number.&#34;</span><span class="op" id="7657895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657901">if</span>&nbsp;<span class="ident" id="7657904"><a href="/expvar/expvar_test.go.html#7657823">x</a></span>&nbsp;<span class="op" id="7657906">!=</span>&nbsp;<span class="num" id="7657909">3</span>&nbsp;<span class="op" id="7657911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657915"><a href="/expvar/expvar_test.go.html#7656952">t</a></span><span class="op" id="7657916">.</span><span class="ident" id="7657917">Errorf</span><span class="op" id="7657923">(</span><span class="string" id="7657924">&#34;red&nbsp;=&nbsp;%v,&nbsp;want&nbsp;3&#34;</span><span class="op" id="7657942">,</span>&nbsp;<span class="ident" id="7657944"><a href="/expvar/expvar_test.go.html#7657823">x</a></span><span class="op" id="7657945">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7657948">}</span><br>
<span class="lineno"></span><span class="op" id="7657950">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7657953">func</span>&nbsp;<span class="ident" id="7657958">TestFunc</span><span class="op" id="7657966">(</span><span class="ident" id="7657967">t</span>&nbsp;<span class="op" id="7657969">*</span><span class="ident" id="7657970"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7657977">.</span><span class="ident" id="7657978">T</span><span class="op" id="7657979">)</span>&nbsp;<span class="op" id="7657981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7657984"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7657993">(</span><span class="op" id="7657994">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7657997">var</span>&nbsp;<span class="ident" id="7658001">x</span>&nbsp;<span class="keyword" id="7658003">interface</span><span class="op" id="7658012">{</span><span class="op" id="7658013">}</span>&nbsp;<span class="op" id="7658015">=</span>&nbsp;<span class="op" id="7658017">[</span><span class="op" id="7658018">]</span><span class="builtintype" id="7658019">string</span><span class="op" id="7658025">{</span><span class="string" id="7658026">&#34;a&#34;</span><span class="op" id="7658029">,</span>&nbsp;<span class="string" id="7658031">&#34;b&#34;</span><span class="op" id="7658034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658037">f</span>&nbsp;<span class="op" id="7658039">:=</span>&nbsp;<span class="ident" id="7658042"><a href="/expvar/expvar.go.html#5573967">Func</a></span><span class="op" id="7658046">(</span><span class="keyword" id="7658047">func</span><span class="op" id="7658051">(</span><span class="op" id="7658052">)</span>&nbsp;<span class="keyword" id="7658054">interface</span><span class="op" id="7658063">{</span><span class="op" id="7658064">}</span>&nbsp;<span class="op" id="7658066">{</span>&nbsp;<span class="keyword" id="7658068">return</span>&nbsp;<span class="ident" id="7658075"><a href="/expvar/expvar_test.go.html#7658001">x</a></span>&nbsp;<span class="op" id="7658077">}</span><span class="op" id="7658078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7658081">if</span>&nbsp;<span class="ident" id="7658084">s</span><span class="op" id="7658085">,</span>&nbsp;<span class="ident" id="7658087">exp</span>&nbsp;<span class="op" id="7658091">:=</span>&nbsp;<span class="ident" id="7658094"><a href="/expvar/expvar_test.go.html#7658037">f</a></span><span class="op" id="7658095">.</span><span class="ident" id="7658096">String</span><span class="op" id="7658102">(</span><span class="op" id="7658103">)</span><span class="op" id="7658104">,</span>&nbsp;<span class="string" id="7658106">`[&#34;a&#34;,&#34;b&#34;]`</span><span class="op" id="7658117">;</span>&nbsp;<span class="ident" id="7658119"><a href="/expvar/expvar_test.go.html#7658084">s</a></span>&nbsp;<span class="op" id="7658121">!=</span>&nbsp;<span class="ident" id="7658124"><a href="/expvar/expvar_test.go.html#7658087">exp</a></span>&nbsp;<span class="op" id="7658128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658132"><a href="/expvar/expvar_test.go.html#7657967">t</a></span><span class="op" id="7658133">.</span><span class="ident" id="7658134">Errorf</span><span class="op" id="7658140">(</span><span class="string" id="7658141">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7658167">,</span>&nbsp;<span class="ident" id="7658169"><a href="/expvar/expvar_test.go.html#7658084">s</a></span><span class="op" id="7658170">,</span>&nbsp;<span class="ident" id="7658172"><a href="/expvar/expvar_test.go.html#7658087">exp</a></span><span class="op" id="7658175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7658178">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658182"><a href="/expvar/expvar_test.go.html#7658001">x</a></span>&nbsp;<span class="op" id="7658184">=</span>&nbsp;<span class="num" id="7658186">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7658190">if</span>&nbsp;<span class="ident" id="7658193">s</span><span class="op" id="7658194">,</span>&nbsp;<span class="ident" id="7658196">exp</span>&nbsp;<span class="op" id="7658200">:=</span>&nbsp;<span class="ident" id="7658203"><a href="/expvar/expvar_test.go.html#7658037">f</a></span><span class="op" id="7658204">.</span><span class="ident" id="7658205">String</span><span class="op" id="7658211">(</span><span class="op" id="7658212">)</span><span class="op" id="7658213">,</span>&nbsp;<span class="string" id="7658215">`17`</span><span class="op" id="7658219">;</span>&nbsp;<span class="ident" id="7658221"><a href="/expvar/expvar_test.go.html#7658193">s</a></span>&nbsp;<span class="op" id="7658223">!=</span>&nbsp;<span class="ident" id="7658226"><a href="/expvar/expvar_test.go.html#7658196">exp</a></span>&nbsp;<span class="op" id="7658230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658234"><a href="/expvar/expvar_test.go.html#7657967">t</a></span><span class="op" id="7658235">.</span><span class="ident" id="7658236">Errorf</span><span class="op" id="7658242">(</span><span class="string" id="7658243">`f.String()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7658269">,</span>&nbsp;<span class="ident" id="7658271"><a href="/expvar/expvar_test.go.html#7658193">s</a></span><span class="op" id="7658272">,</span>&nbsp;<span class="ident" id="7658274"><a href="/expvar/expvar_test.go.html#7658196">exp</a></span><span class="op" id="7658277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7658280">}</span><br>
<span class="lineno">145</span><span class="op" id="7658282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7658285">func</span>&nbsp;<span class="ident" id="7658290">TestHandler</span><span class="op" id="7658301">(</span><span class="ident" id="7658302">t</span>&nbsp;<span class="op" id="7658304">*</span><span class="ident" id="7658305"><a href="/expvar/expvar_test.go.html#7655442">testing</a></span><span class="op" id="7658312">.</span><span class="ident" id="7658313">T</span><span class="op" id="7658314">)</span>&nbsp;<span class="op" id="7658316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658319"><a href="/expvar/expvar_test.go.html#7655532">RemoveAll</a></span><span class="op" id="7658328">(</span><span class="op" id="7658329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658332">m</span>&nbsp;<span class="op" id="7658334">:=</span>&nbsp;<span class="ident" id="7658337"><a href="/expvar/expvar.go.html#5574987">NewMap</a></span><span class="op" id="7658343">(</span><span class="string" id="7658344">&#34;map1&#34;</span><span class="op" id="7658350">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658353"><a href="/expvar/expvar_test.go.html#7658332">m</a></span><span class="op" id="7658354">.</span><span class="ident" id="7658355">Add</span><span class="op" id="7658358">(</span><span class="string" id="7658359">&#34;a&#34;</span><span class="op" id="7658362">,</span>&nbsp;<span class="num" id="7658364">1</span><span class="op" id="7658365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658368"><a href="/expvar/expvar_test.go.html#7658332">m</a></span><span class="op" id="7658369">.</span><span class="ident" id="7658370">Add</span><span class="op" id="7658373">(</span><span class="string" id="7658374">&#34;z&#34;</span><span class="op" id="7658377">,</span>&nbsp;<span class="num" id="7658379">2</span><span class="op" id="7658380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658383">m2</span>&nbsp;<span class="op" id="7658386">:=</span>&nbsp;<span class="ident" id="7658389"><a href="/expvar/expvar.go.html#5574987">NewMap</a></span><span class="op" id="7658395">(</span><span class="string" id="7658396">&#34;map2&#34;</span><span class="op" id="7658402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7658405">for</span>&nbsp;<span class="ident" id="7658409">i</span>&nbsp;<span class="op" id="7658411">:=</span>&nbsp;<span class="num" id="7658414">0</span><span class="op" id="7658415">;</span>&nbsp;<span class="ident" id="7658417"><a href="/expvar/expvar_test.go.html#7658409">i</a></span>&nbsp;<span class="op" id="7658419">&lt;</span>&nbsp;<span class="num" id="7658421">9</span><span class="op" id="7658422">;</span>&nbsp;<span class="ident" id="7658424"><a href="/expvar/expvar_test.go.html#7658409">i</a></span><span class="op" id="7658425">++</span>&nbsp;<span class="op" id="7658428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658432"><a href="/expvar/expvar_test.go.html#7658383">m2</a></span><span class="op" id="7658434">.</span><span class="ident" id="7658435">Add</span><span class="op" id="7658438">(</span><span class="ident" id="7658439"><a href="/expvar/expvar_test.go.html#7655431">strconv</a></span><span class="op" id="7658446">.</span><span class="ident" id="7658447">Itoa</span><span class="op" id="7658451">(</span><span class="ident" id="7658452"><a href="/expvar/expvar_test.go.html#7658409">i</a></span><span class="op" id="7658453">)</span><span class="op" id="7658454">,</span>&nbsp;<span class="ident" id="7658456">int64</span><span class="op" id="7658461">(</span><span class="ident" id="7658462"><a href="/expvar/expvar_test.go.html#7658409">i</a></span><span class="op" id="7658463">)</span><span class="op" id="7658464">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7658467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658470">rr</span>&nbsp;<span class="op" id="7658473">:=</span>&nbsp;<span class="ident" id="7658476"><a href="/expvar/expvar_test.go.html#7655410">httptest</a></span><span class="op" id="7658484">.</span><span class="ident" id="7658485">NewRecorder</span><span class="op" id="7658496">(</span><span class="op" id="7658497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658500"><a href="/expvar/expvar_test.go.html#7658470">rr</a></span><span class="op" id="7658502">.</span><span class="ident" id="7658503">Body</span>&nbsp;<span class="op" id="7658508">=</span>&nbsp;<span class="builtinfunc" id="7658510">new</span><span class="op" id="7658513">(</span><span class="ident" id="7658514"><a href="/expvar/expvar_test.go.html#7655384">bytes</a></span><span class="op" id="7658519">.</span><span class="ident" id="7658520">Buffer</span><span class="op" id="7658526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658529"><a href="/expvar/expvar.go.html#5575440">expvarHandler</a></span><span class="op" id="7658542">(</span><span class="ident" id="7658543"><a href="/expvar/expvar_test.go.html#7658470">rr</a></span><span class="op" id="7658545">,</span>&nbsp;<span class="ident" id="7658547">nil</span><span class="op" id="7658550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658553">want</span>&nbsp;<span class="op" id="7658558">:=</span>&nbsp;<span class="string" id="7658561">`{<br>
<span class="lineno">160</span>&#34;map1&#34;:&nbsp;{&#34;a&#34;:&nbsp;1,&nbsp;&#34;z&#34;:&nbsp;2},<br>
<span class="lineno"></span>&#34;map2&#34;:&nbsp;{&#34;0&#34;:&nbsp;0,&nbsp;&#34;1&#34;:&nbsp;1,&nbsp;&#34;2&#34;:&nbsp;2,&nbsp;&#34;3&#34;:&nbsp;3,&nbsp;&#34;4&#34;:&nbsp;4,&nbsp;&#34;5&#34;:&nbsp;5,&nbsp;&#34;6&#34;:&nbsp;6,&nbsp;&#34;7&#34;:&nbsp;7,&nbsp;&#34;8&#34;:&nbsp;8}<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7658676">if</span>&nbsp;<span class="ident" id="7658679">got</span>&nbsp;<span class="op" id="7658683">:=</span>&nbsp;<span class="ident" id="7658686"><a href="/expvar/expvar_test.go.html#7658470">rr</a></span><span class="op" id="7658688">.</span><span class="ident" id="7658689">Body</span><span class="op" id="7658693">.</span><span class="ident" id="7658694">String</span><span class="op" id="7658700">(</span><span class="op" id="7658701">)</span><span class="op" id="7658702">;</span>&nbsp;<span class="ident" id="7658704"><a href="/expvar/expvar_test.go.html#7658679">got</a></span>&nbsp;<span class="op" id="7658708">!=</span>&nbsp;<span class="ident" id="7658711"><a href="/expvar/expvar_test.go.html#7658553">want</a></span>&nbsp;<span class="op" id="7658716">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7658720"><a href="/expvar/expvar_test.go.html#7658302">t</a></span><span class="op" id="7658721">.</span><span class="ident" id="7658722">Errorf</span><span class="op" id="7658728">(</span><span class="string" id="7658729">&#34;HTTP&nbsp;handler&nbsp;wrote:\n%s\nWant:\n%s&#34;</span><span class="op" id="7658765">,</span>&nbsp;<span class="ident" id="7658767"><a href="/expvar/expvar_test.go.html#7658679">got</a></span><span class="op" id="7658770">,</span>&nbsp;<span class="ident" id="7658772"><a href="/expvar/expvar_test.go.html#7658553">want</a></span><span class="op" id="7658776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7658779">}</span><br>
<span class="lineno"></span><span class="op" id="7658781">}</span>
</div>
</body>
</html>
