<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7849146">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7849201">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7849255">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7849306">package</span>&nbsp;<span class="ident" id="7849314">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7849319">import</span>&nbsp;<span class="op" id="7849326">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849329">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849335">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849348">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849354">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849365">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7849376">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7849383">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7849386">func</span>&nbsp;<span class="ident" id="7849391">TestShutdown</span><span class="op" id="7849403">(</span><span class="ident" id="7849404">t</span>&nbsp;<span class="op" id="7849406">*</span><span class="ident" id="7849407">testing</span><span class="op" id="7849414">.</span><span class="ident" id="7849415">T</span><span class="op" id="7849416">)</span>&nbsp;<span class="op" id="7849418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849421">if</span>&nbsp;<span class="ident" id="7849424">runtime</span><span class="op" id="7849431">.</span><span class="ident" id="7849432">GOOS</span>&nbsp;<span class="op" id="7849437">==</span>&nbsp;<span class="string" id="7849440">&#34;plan9&#34;</span>&nbsp;<span class="op" id="7849448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849452">t</span><span class="op" id="7849453">.</span><span class="ident" id="7849454">Skipf</span><span class="op" id="7849459">(</span><span class="string" id="7849460">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7849481">,</span>&nbsp;<span class="ident" id="7849483">runtime</span><span class="op" id="7849490">.</span><span class="ident" id="7849491">GOOS</span><span class="op" id="7849495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849498">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849501">ln</span><span class="op" id="7849503">,</span>&nbsp;<span class="ident" id="7849505">err</span>&nbsp;<span class="op" id="7849509">:=</span>&nbsp;<span class="ident" id="7849512">Listen</span><span class="op" id="7849518">(</span><span class="string" id="7849519">&#34;tcp&#34;</span><span class="op" id="7849524">,</span>&nbsp;<span class="string" id="7849526">&#34;127.0.0.1:0&#34;</span><span class="op" id="7849539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849542">if</span>&nbsp;<span class="ident" id="7849545">err</span>&nbsp;<span class="op" id="7849549">!=</span>&nbsp;<span class="ident" id="7849552">nil</span>&nbsp;<span class="op" id="7849556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849560">if</span>&nbsp;<span class="ident" id="7849563">ln</span><span class="op" id="7849565">,</span>&nbsp;<span class="ident" id="7849567">err</span>&nbsp;<span class="op" id="7849571">=</span>&nbsp;<span class="ident" id="7849573">Listen</span><span class="op" id="7849579">(</span><span class="string" id="7849580">&#34;tcp6&#34;</span><span class="op" id="7849586">,</span>&nbsp;<span class="string" id="7849588">&#34;[::1]:0&#34;</span><span class="op" id="7849597">)</span><span class="op" id="7849598">;</span>&nbsp;<span class="ident" id="7849600">err</span>&nbsp;<span class="op" id="7849604">!=</span>&nbsp;<span class="ident" id="7849607">nil</span>&nbsp;<span class="op" id="7849611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849616">t</span><span class="op" id="7849617">.</span><span class="ident" id="7849618">Fatalf</span><span class="op" id="7849624">(</span><span class="string" id="7849625">&#34;ListenTCP&nbsp;on&nbsp;:0:&nbsp;%v&#34;</span><span class="op" id="7849646">,</span>&nbsp;<span class="ident" id="7849648">err</span><span class="op" id="7849651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849655">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849662">go</span>&nbsp;<span class="keyword" id="7849665">func</span><span class="op" id="7849669">(</span><span class="op" id="7849670">)</span>&nbsp;<span class="op" id="7849672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849676">defer</span>&nbsp;<span class="ident" id="7849682">ln</span><span class="op" id="7849684">.</span><span class="ident" id="7849685">Close</span><span class="op" id="7849690">(</span><span class="op" id="7849691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849695">c</span><span class="op" id="7849696">,</span>&nbsp;<span class="ident" id="7849698">err</span>&nbsp;<span class="op" id="7849702">:=</span>&nbsp;<span class="ident" id="7849705">ln</span><span class="op" id="7849707">.</span><span class="ident" id="7849708">Accept</span><span class="op" id="7849714">(</span><span class="op" id="7849715">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849719">if</span>&nbsp;<span class="ident" id="7849722">err</span>&nbsp;<span class="op" id="7849726">!=</span>&nbsp;<span class="ident" id="7849729">nil</span>&nbsp;<span class="op" id="7849733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849738">t</span><span class="op" id="7849739">.</span><span class="ident" id="7849740">Errorf</span><span class="op" id="7849746">(</span><span class="string" id="7849747">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="7849759">,</span>&nbsp;<span class="ident" id="7849761">err</span><span class="op" id="7849764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849769">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849782">var</span>&nbsp;<span class="ident" id="7849786">buf</span>&nbsp;<span class="op" id="7849790">[</span><span class="num" id="7849791">10</span><span class="op" id="7849793">]</span><span class="builtintype" id="7849794">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849801">n</span><span class="op" id="7849802">,</span>&nbsp;<span class="ident" id="7849804">err</span>&nbsp;<span class="op" id="7849808">:=</span>&nbsp;<span class="ident" id="7849811">c</span><span class="op" id="7849812">.</span><span class="ident" id="7849813">Read</span><span class="op" id="7849817">(</span><span class="ident" id="7849818">buf</span><span class="op" id="7849821">[</span><span class="op" id="7849822">:</span><span class="op" id="7849823">]</span><span class="op" id="7849824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849828">if</span>&nbsp;<span class="ident" id="7849831">n</span>&nbsp;<span class="op" id="7849833">!=</span>&nbsp;<span class="num" id="7849836">0</span>&nbsp;<span class="op" id="7849838">||</span>&nbsp;<span class="ident" id="7849841">err</span>&nbsp;<span class="op" id="7849845">!=</span>&nbsp;<span class="ident" id="7849848">io</span><span class="op" id="7849850">.</span><span class="ident" id="7849851">EOF</span>&nbsp;<span class="op" id="7849855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849860">t</span><span class="op" id="7849861">.</span><span class="ident" id="7849862">Errorf</span><span class="op" id="7849868">(</span><span class="string" id="7849869">&#34;server&nbsp;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;0,&nbsp;io.EOF&#34;</span><span class="op" id="7849907">,</span>&nbsp;<span class="ident" id="7849909">n</span><span class="op" id="7849910">,</span>&nbsp;<span class="ident" id="7849912">err</span><span class="op" id="7849915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7849920">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849929">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849933">c</span><span class="op" id="7849934">.</span><span class="ident" id="7849935">Write</span><span class="op" id="7849940">(</span><span class="op" id="7849941">[</span><span class="op" id="7849942">]</span><span class="builtintype" id="7849943">byte</span><span class="op" id="7849947">(</span><span class="string" id="7849948">&#34;response&#34;</span><span class="op" id="7849958">)</span><span class="op" id="7849959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849963">c</span><span class="op" id="7849964">.</span><span class="ident" id="7849965">Close</span><span class="op" id="7849970">(</span><span class="op" id="7849971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7849974">}</span><span class="op" id="7849975">(</span><span class="op" id="7849976">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7849980">c</span><span class="op" id="7849981">,</span>&nbsp;<span class="ident" id="7849983">err</span>&nbsp;<span class="op" id="7849987">:=</span>&nbsp;<span class="ident" id="7849990">Dial</span><span class="op" id="7849994">(</span><span class="string" id="7849995">&#34;tcp&#34;</span><span class="op" id="7850000">,</span>&nbsp;<span class="ident" id="7850002">ln</span><span class="op" id="7850004">.</span><span class="ident" id="7850005">Addr</span><span class="op" id="7850009">(</span><span class="op" id="7850010">)</span><span class="op" id="7850011">.</span><span class="ident" id="7850012">String</span><span class="op" id="7850018">(</span><span class="op" id="7850019">)</span><span class="op" id="7850020">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850023">if</span>&nbsp;<span class="ident" id="7850026">err</span>&nbsp;<span class="op" id="7850030">!=</span>&nbsp;<span class="ident" id="7850033">nil</span>&nbsp;<span class="op" id="7850037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850041">t</span><span class="op" id="7850042">.</span><span class="ident" id="7850043">Fatalf</span><span class="op" id="7850049">(</span><span class="string" id="7850050">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="7850060">,</span>&nbsp;<span class="ident" id="7850062">err</span><span class="op" id="7850065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850071">defer</span>&nbsp;<span class="ident" id="7850077">c</span><span class="op" id="7850078">.</span><span class="ident" id="7850079">Close</span><span class="op" id="7850084">(</span><span class="op" id="7850085">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850089">err</span>&nbsp;<span class="op" id="7850093">=</span>&nbsp;<span class="ident" id="7850095">c</span><span class="op" id="7850096">.</span><span class="op" id="7850097">(</span><span class="op" id="7850098">*</span><span class="ident" id="7850099">TCPConn</span><span class="op" id="7850106">)</span><span class="op" id="7850107">.</span><span class="ident" id="7850108">CloseWrite</span><span class="op" id="7850118">(</span><span class="op" id="7850119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850122">if</span>&nbsp;<span class="ident" id="7850125">err</span>&nbsp;<span class="op" id="7850129">!=</span>&nbsp;<span class="ident" id="7850132">nil</span>&nbsp;<span class="op" id="7850136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850140">t</span><span class="op" id="7850141">.</span><span class="ident" id="7850142">Fatalf</span><span class="op" id="7850148">(</span><span class="string" id="7850149">&#34;CloseWrite:&nbsp;%v&#34;</span><span class="op" id="7850165">,</span>&nbsp;<span class="ident" id="7850167">err</span><span class="op" id="7850170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850176">var</span>&nbsp;<span class="ident" id="7850180">buf</span>&nbsp;<span class="op" id="7850184">[</span><span class="num" id="7850185">10</span><span class="op" id="7850187">]</span><span class="builtintype" id="7850188">byte</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850194">n</span><span class="op" id="7850195">,</span>&nbsp;<span class="ident" id="7850197">err</span>&nbsp;<span class="op" id="7850201">:=</span>&nbsp;<span class="ident" id="7850204">c</span><span class="op" id="7850205">.</span><span class="ident" id="7850206">Read</span><span class="op" id="7850210">(</span><span class="ident" id="7850211">buf</span><span class="op" id="7850214">[</span><span class="op" id="7850215">:</span><span class="op" id="7850216">]</span><span class="op" id="7850217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850220">if</span>&nbsp;<span class="ident" id="7850223">err</span>&nbsp;<span class="op" id="7850227">!=</span>&nbsp;<span class="ident" id="7850230">nil</span>&nbsp;<span class="op" id="7850234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850238">t</span><span class="op" id="7850239">.</span><span class="ident" id="7850240">Fatalf</span><span class="op" id="7850246">(</span><span class="string" id="7850247">&#34;client&nbsp;Read:&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7850268">,</span>&nbsp;<span class="ident" id="7850270">n</span><span class="op" id="7850271">,</span>&nbsp;<span class="ident" id="7850273">err</span><span class="op" id="7850276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850282">got</span>&nbsp;<span class="op" id="7850286">:=</span>&nbsp;<span class="builtintype" id="7850289">string</span><span class="op" id="7850295">(</span><span class="ident" id="7850296">buf</span><span class="op" id="7850299">[</span><span class="op" id="7850300">:</span><span class="ident" id="7850301">n</span><span class="op" id="7850302">]</span><span class="op" id="7850303">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850306">if</span>&nbsp;<span class="ident" id="7850309">got</span>&nbsp;<span class="op" id="7850313">!=</span>&nbsp;<span class="string" id="7850316">&#34;response&#34;</span>&nbsp;<span class="op" id="7850327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850331">t</span><span class="op" id="7850332">.</span><span class="ident" id="7850333">Errorf</span><span class="op" id="7850339">(</span><span class="string" id="7850340">&#34;read&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;response\&#34;&#34;</span><span class="op" id="7850370">,</span>&nbsp;<span class="ident" id="7850372">got</span><span class="op" id="7850375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850378">}</span><br>
<span class="lineno"></span><span class="op" id="7850380">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7850383">func</span>&nbsp;<span class="ident" id="7850388">TestShutdownUnix</span><span class="op" id="7850404">(</span><span class="ident" id="7850405">t</span>&nbsp;<span class="op" id="7850407">*</span><span class="ident" id="7850408">testing</span><span class="op" id="7850415">.</span><span class="ident" id="7850416">T</span><span class="op" id="7850417">)</span>&nbsp;<span class="op" id="7850419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850422">switch</span>&nbsp;<span class="ident" id="7850429">runtime</span><span class="op" id="7850436">.</span><span class="ident" id="7850437">GOOS</span>&nbsp;<span class="op" id="7850442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850445">case</span>&nbsp;<span class="string" id="7850450">&#34;nacl&#34;</span><span class="op" id="7850456">,</span>&nbsp;<span class="string" id="7850458">&#34;plan9&#34;</span><span class="op" id="7850465">,</span>&nbsp;<span class="string" id="7850467">&#34;windows&#34;</span><span class="op" id="7850476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850480">t</span><span class="op" id="7850481">.</span><span class="ident" id="7850482">Skipf</span><span class="op" id="7850487">(</span><span class="string" id="7850488">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7850509">,</span>&nbsp;<span class="ident" id="7850511">runtime</span><span class="op" id="7850518">.</span><span class="ident" id="7850519">GOOS</span><span class="op" id="7850523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850526">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850529">f</span><span class="op" id="7850530">,</span>&nbsp;<span class="ident" id="7850532">err</span>&nbsp;<span class="op" id="7850536">:=</span>&nbsp;<span class="ident" id="7850539">ioutil</span><span class="op" id="7850545">.</span><span class="ident" id="7850546">TempFile</span><span class="op" id="7850554">(</span><span class="string" id="7850555">&#34;&#34;</span><span class="op" id="7850557">,</span>&nbsp;<span class="string" id="7850559">&#34;go_net_unixtest&#34;</span><span class="op" id="7850576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850579">if</span>&nbsp;<span class="ident" id="7850582">err</span>&nbsp;<span class="op" id="7850586">!=</span>&nbsp;<span class="ident" id="7850589">nil</span>&nbsp;<span class="op" id="7850593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850597">t</span><span class="op" id="7850598">.</span><span class="ident" id="7850599">Fatalf</span><span class="op" id="7850605">(</span><span class="string" id="7850606">&#34;TempFile:&nbsp;%s&#34;</span><span class="op" id="7850620">,</span>&nbsp;<span class="ident" id="7850622">err</span><span class="op" id="7850625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850631">f</span><span class="op" id="7850632">.</span><span class="ident" id="7850633">Close</span><span class="op" id="7850638">(</span><span class="op" id="7850639">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850642">tmpname</span>&nbsp;<span class="op" id="7850650">:=</span>&nbsp;<span class="ident" id="7850653">f</span><span class="op" id="7850654">.</span><span class="ident" id="7850655">Name</span><span class="op" id="7850659">(</span><span class="op" id="7850660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850663">os</span><span class="op" id="7850665">.</span><span class="ident" id="7850666">Remove</span><span class="op" id="7850672">(</span><span class="ident" id="7850673">tmpname</span><span class="op" id="7850680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850683">ln</span><span class="op" id="7850685">,</span>&nbsp;<span class="ident" id="7850687">err</span>&nbsp;<span class="op" id="7850691">:=</span>&nbsp;<span class="ident" id="7850694">Listen</span><span class="op" id="7850700">(</span><span class="string" id="7850701">&#34;unix&#34;</span><span class="op" id="7850707">,</span>&nbsp;<span class="ident" id="7850709">tmpname</span><span class="op" id="7850716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850719">if</span>&nbsp;<span class="ident" id="7850722">err</span>&nbsp;<span class="op" id="7850726">!=</span>&nbsp;<span class="ident" id="7850729">nil</span>&nbsp;<span class="op" id="7850733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850737">t</span><span class="op" id="7850738">.</span><span class="ident" id="7850739">Fatalf</span><span class="op" id="7850745">(</span><span class="string" id="7850746">&#34;ListenUnix&nbsp;on&nbsp;%s:&nbsp;%s&#34;</span><span class="op" id="7850768">,</span>&nbsp;<span class="ident" id="7850770">tmpname</span><span class="op" id="7850777">,</span>&nbsp;<span class="ident" id="7850779">err</span><span class="op" id="7850782">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850788">defer</span>&nbsp;<span class="keyword" id="7850794">func</span><span class="op" id="7850798">(</span><span class="op" id="7850799">)</span>&nbsp;<span class="op" id="7850801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850805">ln</span><span class="op" id="7850807">.</span><span class="ident" id="7850808">Close</span><span class="op" id="7850813">(</span><span class="op" id="7850814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850818">os</span><span class="op" id="7850820">.</span><span class="ident" id="7850821">Remove</span><span class="op" id="7850827">(</span><span class="ident" id="7850828">tmpname</span><span class="op" id="7850835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850838">}</span><span class="op" id="7850839">(</span><span class="op" id="7850840">)</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850844">go</span>&nbsp;<span class="keyword" id="7850847">func</span><span class="op" id="7850851">(</span><span class="op" id="7850852">)</span>&nbsp;<span class="op" id="7850854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850858">c</span><span class="op" id="7850859">,</span>&nbsp;<span class="ident" id="7850861">err</span>&nbsp;<span class="op" id="7850865">:=</span>&nbsp;<span class="ident" id="7850868">ln</span><span class="op" id="7850870">.</span><span class="ident" id="7850871">Accept</span><span class="op" id="7850877">(</span><span class="op" id="7850878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850882">if</span>&nbsp;<span class="ident" id="7850885">err</span>&nbsp;<span class="op" id="7850889">!=</span>&nbsp;<span class="ident" id="7850892">nil</span>&nbsp;<span class="op" id="7850896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850901">t</span><span class="op" id="7850902">.</span><span class="ident" id="7850903">Errorf</span><span class="op" id="7850909">(</span><span class="string" id="7850910">&#34;Accept:&nbsp;%v&#34;</span><span class="op" id="7850922">,</span>&nbsp;<span class="ident" id="7850924">err</span><span class="op" id="7850927">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850932">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7850941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850945">var</span>&nbsp;<span class="ident" id="7850949">buf</span>&nbsp;<span class="op" id="7850953">[</span><span class="num" id="7850954">10</span><span class="op" id="7850956">]</span><span class="builtintype" id="7850957">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7850964">n</span><span class="op" id="7850965">,</span>&nbsp;<span class="ident" id="7850967">err</span>&nbsp;<span class="op" id="7850971">:=</span>&nbsp;<span class="ident" id="7850974">c</span><span class="op" id="7850975">.</span><span class="ident" id="7850976">Read</span><span class="op" id="7850980">(</span><span class="ident" id="7850981">buf</span><span class="op" id="7850984">[</span><span class="op" id="7850985">:</span><span class="op" id="7850986">]</span><span class="op" id="7850987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7850991">if</span>&nbsp;<span class="ident" id="7850994">n</span>&nbsp;<span class="op" id="7850996">!=</span>&nbsp;<span class="num" id="7850999">0</span>&nbsp;<span class="op" id="7851001">||</span>&nbsp;<span class="ident" id="7851004">err</span>&nbsp;<span class="op" id="7851008">!=</span>&nbsp;<span class="ident" id="7851011">io</span><span class="op" id="7851013">.</span><span class="ident" id="7851014">EOF</span>&nbsp;<span class="op" id="7851018">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851023">t</span><span class="op" id="7851024">.</span><span class="ident" id="7851025">Errorf</span><span class="op" id="7851031">(</span><span class="string" id="7851032">&#34;server&nbsp;Read&nbsp;=&nbsp;%d,&nbsp;%v;&nbsp;want&nbsp;0,&nbsp;io.EOF&#34;</span><span class="op" id="7851070">,</span>&nbsp;<span class="ident" id="7851072">n</span><span class="op" id="7851073">,</span>&nbsp;<span class="ident" id="7851075">err</span><span class="op" id="7851078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851083">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851096">c</span><span class="op" id="7851097">.</span><span class="ident" id="7851098">Write</span><span class="op" id="7851103">(</span><span class="op" id="7851104">[</span><span class="op" id="7851105">]</span><span class="builtintype" id="7851106">byte</span><span class="op" id="7851110">(</span><span class="string" id="7851111">&#34;response&#34;</span><span class="op" id="7851121">)</span><span class="op" id="7851122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851126">c</span><span class="op" id="7851127">.</span><span class="ident" id="7851128">Close</span><span class="op" id="7851133">(</span><span class="op" id="7851134">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851137">}</span><span class="op" id="7851138">(</span><span class="op" id="7851139">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851143">c</span><span class="op" id="7851144">,</span>&nbsp;<span class="ident" id="7851146">err</span>&nbsp;<span class="op" id="7851150">:=</span>&nbsp;<span class="ident" id="7851153">Dial</span><span class="op" id="7851157">(</span><span class="string" id="7851158">&#34;unix&#34;</span><span class="op" id="7851164">,</span>&nbsp;<span class="ident" id="7851166">tmpname</span><span class="op" id="7851173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851176">if</span>&nbsp;<span class="ident" id="7851179">err</span>&nbsp;<span class="op" id="7851183">!=</span>&nbsp;<span class="ident" id="7851186">nil</span>&nbsp;<span class="op" id="7851190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851194">t</span><span class="op" id="7851195">.</span><span class="ident" id="7851196">Fatalf</span><span class="op" id="7851202">(</span><span class="string" id="7851203">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="7851213">,</span>&nbsp;<span class="ident" id="7851215">err</span><span class="op" id="7851218">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851224">defer</span>&nbsp;<span class="ident" id="7851230">c</span><span class="op" id="7851231">.</span><span class="ident" id="7851232">Close</span><span class="op" id="7851237">(</span><span class="op" id="7851238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851242">err</span>&nbsp;<span class="op" id="7851246">=</span>&nbsp;<span class="ident" id="7851248">c</span><span class="op" id="7851249">.</span><span class="op" id="7851250">(</span><span class="op" id="7851251">*</span><span class="ident" id="7851252">UnixConn</span><span class="op" id="7851260">)</span><span class="op" id="7851261">.</span><span class="ident" id="7851262">CloseWrite</span><span class="op" id="7851272">(</span><span class="op" id="7851273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851276">if</span>&nbsp;<span class="ident" id="7851279">err</span>&nbsp;<span class="op" id="7851283">!=</span>&nbsp;<span class="ident" id="7851286">nil</span>&nbsp;<span class="op" id="7851290">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851294">t</span><span class="op" id="7851295">.</span><span class="ident" id="7851296">Fatalf</span><span class="op" id="7851302">(</span><span class="string" id="7851303">&#34;CloseWrite:&nbsp;%v&#34;</span><span class="op" id="7851319">,</span>&nbsp;<span class="ident" id="7851321">err</span><span class="op" id="7851324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851330">var</span>&nbsp;<span class="ident" id="7851334">buf</span>&nbsp;<span class="op" id="7851338">[</span><span class="num" id="7851339">10</span><span class="op" id="7851341">]</span><span class="builtintype" id="7851342">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851348">n</span><span class="op" id="7851349">,</span>&nbsp;<span class="ident" id="7851351">err</span>&nbsp;<span class="op" id="7851355">:=</span>&nbsp;<span class="ident" id="7851358">c</span><span class="op" id="7851359">.</span><span class="ident" id="7851360">Read</span><span class="op" id="7851364">(</span><span class="ident" id="7851365">buf</span><span class="op" id="7851368">[</span><span class="op" id="7851369">:</span><span class="op" id="7851370">]</span><span class="op" id="7851371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851374">if</span>&nbsp;<span class="ident" id="7851377">err</span>&nbsp;<span class="op" id="7851381">!=</span>&nbsp;<span class="ident" id="7851384">nil</span>&nbsp;<span class="op" id="7851388">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851392">t</span><span class="op" id="7851393">.</span><span class="ident" id="7851394">Fatalf</span><span class="op" id="7851400">(</span><span class="string" id="7851401">&#34;client&nbsp;Read:&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="7851422">,</span>&nbsp;<span class="ident" id="7851424">n</span><span class="op" id="7851425">,</span>&nbsp;<span class="ident" id="7851427">err</span><span class="op" id="7851430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851436">got</span>&nbsp;<span class="op" id="7851440">:=</span>&nbsp;<span class="builtintype" id="7851443">string</span><span class="op" id="7851449">(</span><span class="ident" id="7851450">buf</span><span class="op" id="7851453">[</span><span class="op" id="7851454">:</span><span class="ident" id="7851455">n</span><span class="op" id="7851456">]</span><span class="op" id="7851457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851460">if</span>&nbsp;<span class="ident" id="7851463">got</span>&nbsp;<span class="op" id="7851467">!=</span>&nbsp;<span class="string" id="7851470">&#34;response&#34;</span>&nbsp;<span class="op" id="7851481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851485">t</span><span class="op" id="7851486">.</span><span class="ident" id="7851487">Errorf</span><span class="op" id="7851493">(</span><span class="string" id="7851494">&#34;read&nbsp;=&nbsp;%q,&nbsp;want&nbsp;\&#34;response\&#34;&#34;</span><span class="op" id="7851524">,</span>&nbsp;<span class="ident" id="7851526">got</span><span class="op" id="7851529">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851532">}</span><br>
<span class="lineno"></span><span class="op" id="7851534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7851537">func</span>&nbsp;<span class="ident" id="7851542">TestTCPListenClose</span><span class="op" id="7851560">(</span><span class="ident" id="7851561">t</span>&nbsp;<span class="op" id="7851563">*</span><span class="ident" id="7851564">testing</span><span class="op" id="7851571">.</span><span class="ident" id="7851572">T</span><span class="op" id="7851573">)</span>&nbsp;<span class="op" id="7851575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851578">ln</span><span class="op" id="7851580">,</span>&nbsp;<span class="ident" id="7851582">err</span>&nbsp;<span class="op" id="7851586">:=</span>&nbsp;<span class="ident" id="7851589">Listen</span><span class="op" id="7851595">(</span><span class="string" id="7851596">&#34;tcp&#34;</span><span class="op" id="7851601">,</span>&nbsp;<span class="string" id="7851603">&#34;127.0.0.1:0&#34;</span><span class="op" id="7851616">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851619">if</span>&nbsp;<span class="ident" id="7851622">err</span>&nbsp;<span class="op" id="7851626">!=</span>&nbsp;<span class="ident" id="7851629">nil</span>&nbsp;<span class="op" id="7851633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851637">t</span><span class="op" id="7851638">.</span><span class="ident" id="7851639">Fatalf</span><span class="op" id="7851645">(</span><span class="string" id="7851646">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7851665">,</span>&nbsp;<span class="ident" id="7851667">err</span><span class="op" id="7851670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851677">done</span>&nbsp;<span class="op" id="7851682">:=</span>&nbsp;<span class="builtinfunc" id="7851685">make</span><span class="op" id="7851689">(</span><span class="keyword" id="7851690">chan</span>&nbsp;<span class="builtintype" id="7851695">bool</span><span class="op" id="7851699">,</span>&nbsp;<span class="num" id="7851701">1</span><span class="op" id="7851702">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851705">go</span>&nbsp;<span class="keyword" id="7851708">func</span><span class="op" id="7851712">(</span><span class="op" id="7851713">)</span>&nbsp;<span class="op" id="7851715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851719">time</span><span class="op" id="7851723">.</span><span class="ident" id="7851724">Sleep</span><span class="op" id="7851729">(</span><span class="num" id="7851730">100</span>&nbsp;<span class="op" id="7851734">*</span>&nbsp;<span class="ident" id="7851736">time</span><span class="op" id="7851740">.</span><span class="ident" id="7851741">Millisecond</span><span class="op" id="7851752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851756">ln</span><span class="op" id="7851758">.</span><span class="ident" id="7851759">Close</span><span class="op" id="7851764">(</span><span class="op" id="7851765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851768">}</span><span class="op" id="7851769">(</span><span class="op" id="7851770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851773">go</span>&nbsp;<span class="keyword" id="7851776">func</span><span class="op" id="7851780">(</span><span class="op" id="7851781">)</span>&nbsp;<span class="op" id="7851783">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851787">c</span><span class="op" id="7851788">,</span>&nbsp;<span class="ident" id="7851790">err</span>&nbsp;<span class="op" id="7851794">:=</span>&nbsp;<span class="ident" id="7851797">ln</span><span class="op" id="7851799">.</span><span class="ident" id="7851800">Accept</span><span class="op" id="7851806">(</span><span class="op" id="7851807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851811">if</span>&nbsp;<span class="ident" id="7851814">err</span>&nbsp;<span class="op" id="7851818">==</span>&nbsp;<span class="ident" id="7851821">nil</span>&nbsp;<span class="op" id="7851825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851830">c</span><span class="op" id="7851831">.</span><span class="ident" id="7851832">Close</span><span class="op" id="7851837">(</span><span class="op" id="7851838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851843">t</span><span class="op" id="7851844">.</span><span class="ident" id="7851845">Error</span><span class="op" id="7851850">(</span><span class="string" id="7851851">&#34;Accept&nbsp;succeeded&#34;</span><span class="op" id="7851869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851873">}</span>&nbsp;<span class="keyword" id="7851875">else</span>&nbsp;<span class="op" id="7851880">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851885">t</span><span class="op" id="7851886">.</span><span class="ident" id="7851887">Logf</span><span class="op" id="7851891">(</span><span class="string" id="7851892">&#34;Accept&nbsp;timeout&nbsp;error:&nbsp;%s&nbsp;(any&nbsp;error&nbsp;is&nbsp;fine)&#34;</span><span class="op" id="7851938">,</span>&nbsp;<span class="ident" id="7851940">err</span><span class="op" id="7851943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7851951">done</span>&nbsp;<span class="op" id="7851956">&lt;-</span>&nbsp;<span class="builtintype" id="7851959">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7851965">}</span><span class="op" id="7851966">(</span><span class="op" id="7851967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851970">select</span>&nbsp;<span class="op" id="7851977">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851980">case</span>&nbsp;<span class="op" id="7851985">&lt;-</span><span class="ident" id="7851987">done</span><span class="op" id="7851991">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7851994">case</span>&nbsp;<span class="op" id="7851999">&lt;-</span><span class="ident" id="7852001">time</span><span class="op" id="7852005">.</span><span class="ident" id="7852006">After</span><span class="op" id="7852011">(</span><span class="num" id="7852012">2</span>&nbsp;<span class="op" id="7852014">*</span>&nbsp;<span class="ident" id="7852016">time</span><span class="op" id="7852020">.</span><span class="ident" id="7852021">Second</span><span class="op" id="7852027">)</span><span class="op" id="7852028">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852032">t</span><span class="op" id="7852033">.</span><span class="ident" id="7852034">Fatal</span><span class="op" id="7852039">(</span><span class="string" id="7852040">&#34;timeout&nbsp;waiting&nbsp;for&nbsp;TCP&nbsp;close&#34;</span><span class="op" id="7852071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852074">}</span><br>
<span class="lineno"></span><span class="op" id="7852076">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="7852079">func</span>&nbsp;<span class="ident" id="7852084">TestUDPListenClose</span><span class="op" id="7852102">(</span><span class="ident" id="7852103">t</span>&nbsp;<span class="op" id="7852105">*</span><span class="ident" id="7852106">testing</span><span class="op" id="7852113">.</span><span class="ident" id="7852114">T</span><span class="op" id="7852115">)</span>&nbsp;<span class="op" id="7852117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852120">switch</span>&nbsp;<span class="ident" id="7852127">runtime</span><span class="op" id="7852134">.</span><span class="ident" id="7852135">GOOS</span>&nbsp;<span class="op" id="7852140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852143">case</span>&nbsp;<span class="string" id="7852148">&#34;plan9&#34;</span><span class="op" id="7852155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852159">t</span><span class="op" id="7852160">.</span><span class="ident" id="7852161">Skipf</span><span class="op" id="7852166">(</span><span class="string" id="7852167">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7852188">,</span>&nbsp;<span class="ident" id="7852190">runtime</span><span class="op" id="7852197">.</span><span class="ident" id="7852198">GOOS</span><span class="op" id="7852202">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852208">ln</span><span class="op" id="7852210">,</span>&nbsp;<span class="ident" id="7852212">err</span>&nbsp;<span class="op" id="7852216">:=</span>&nbsp;<span class="ident" id="7852219">ListenPacket</span><span class="op" id="7852231">(</span><span class="string" id="7852232">&#34;udp&#34;</span><span class="op" id="7852237">,</span>&nbsp;<span class="string" id="7852239">&#34;127.0.0.1:0&#34;</span><span class="op" id="7852252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852255">if</span>&nbsp;<span class="ident" id="7852258">err</span>&nbsp;<span class="op" id="7852262">!=</span>&nbsp;<span class="ident" id="7852265">nil</span>&nbsp;<span class="op" id="7852269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852273">t</span><span class="op" id="7852274">.</span><span class="ident" id="7852275">Fatalf</span><span class="op" id="7852281">(</span><span class="string" id="7852282">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7852301">,</span>&nbsp;<span class="ident" id="7852303">err</span><span class="op" id="7852306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852309">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852313">buf</span>&nbsp;<span class="op" id="7852317">:=</span>&nbsp;<span class="builtinfunc" id="7852320">make</span><span class="op" id="7852324">(</span><span class="op" id="7852325">[</span><span class="op" id="7852326">]</span><span class="builtintype" id="7852327">byte</span><span class="op" id="7852331">,</span>&nbsp;<span class="num" id="7852333">1000</span><span class="op" id="7852337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852340">done</span>&nbsp;<span class="op" id="7852345">:=</span>&nbsp;<span class="builtinfunc" id="7852348">make</span><span class="op" id="7852352">(</span><span class="keyword" id="7852353">chan</span>&nbsp;<span class="builtintype" id="7852358">bool</span><span class="op" id="7852362">,</span>&nbsp;<span class="num" id="7852364">1</span><span class="op" id="7852365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852368">go</span>&nbsp;<span class="keyword" id="7852371">func</span><span class="op" id="7852375">(</span><span class="op" id="7852376">)</span>&nbsp;<span class="op" id="7852378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852382">time</span><span class="op" id="7852386">.</span><span class="ident" id="7852387">Sleep</span><span class="op" id="7852392">(</span><span class="num" id="7852393">100</span>&nbsp;<span class="op" id="7852397">*</span>&nbsp;<span class="ident" id="7852399">time</span><span class="op" id="7852403">.</span><span class="ident" id="7852404">Millisecond</span><span class="op" id="7852415">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852419">ln</span><span class="op" id="7852421">.</span><span class="ident" id="7852422">Close</span><span class="op" id="7852427">(</span><span class="op" id="7852428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852431">}</span><span class="op" id="7852432">(</span><span class="op" id="7852433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852436">go</span>&nbsp;<span class="keyword" id="7852439">func</span><span class="op" id="7852443">(</span><span class="op" id="7852444">)</span>&nbsp;<span class="op" id="7852446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852450">_</span><span class="op" id="7852451">,</span>&nbsp;<span class="ident" id="7852453">_</span><span class="op" id="7852454">,</span>&nbsp;<span class="ident" id="7852456">err</span>&nbsp;<span class="op" id="7852460">=</span>&nbsp;<span class="ident" id="7852462">ln</span><span class="op" id="7852464">.</span><span class="ident" id="7852465">ReadFrom</span><span class="op" id="7852473">(</span><span class="ident" id="7852474">buf</span><span class="op" id="7852477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852481">if</span>&nbsp;<span class="ident" id="7852484">err</span>&nbsp;<span class="op" id="7852488">==</span>&nbsp;<span class="ident" id="7852491">nil</span>&nbsp;<span class="op" id="7852495">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852500">t</span><span class="op" id="7852501">.</span><span class="ident" id="7852502">Error</span><span class="op" id="7852507">(</span><span class="string" id="7852508">&#34;ReadFrom&nbsp;succeeded&#34;</span><span class="op" id="7852528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852532">}</span>&nbsp;<span class="keyword" id="7852534">else</span>&nbsp;<span class="op" id="7852539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852544">t</span><span class="op" id="7852545">.</span><span class="ident" id="7852546">Logf</span><span class="op" id="7852550">(</span><span class="string" id="7852551">&#34;ReadFrom&nbsp;timeout&nbsp;error:&nbsp;%s&nbsp;(any&nbsp;error&nbsp;is&nbsp;fine)&#34;</span><span class="op" id="7852599">,</span>&nbsp;<span class="ident" id="7852601">err</span><span class="op" id="7852604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852612">done</span>&nbsp;<span class="op" id="7852617">&lt;-</span>&nbsp;<span class="builtintype" id="7852620">true</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852626">}</span><span class="op" id="7852627">(</span><span class="op" id="7852628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852631">select</span>&nbsp;<span class="op" id="7852638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852641">case</span>&nbsp;<span class="op" id="7852646">&lt;-</span><span class="ident" id="7852648">done</span><span class="op" id="7852652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852655">case</span>&nbsp;<span class="op" id="7852660">&lt;-</span><span class="ident" id="7852662">time</span><span class="op" id="7852666">.</span><span class="ident" id="7852667">After</span><span class="op" id="7852672">(</span><span class="num" id="7852673">2</span>&nbsp;<span class="op" id="7852675">*</span>&nbsp;<span class="ident" id="7852677">time</span><span class="op" id="7852681">.</span><span class="ident" id="7852682">Second</span><span class="op" id="7852688">)</span><span class="op" id="7852689">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852693">t</span><span class="op" id="7852694">.</span><span class="ident" id="7852695">Fatal</span><span class="op" id="7852700">(</span><span class="string" id="7852701">&#34;timeout&nbsp;waiting&nbsp;for&nbsp;UDP&nbsp;close&#34;</span><span class="op" id="7852732">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852735">}</span><br>
<span class="lineno"></span><span class="op" id="7852737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7852740">func</span>&nbsp;<span class="ident" id="7852745">TestTCPClose</span><span class="op" id="7852757">(</span><span class="ident" id="7852758">t</span>&nbsp;<span class="op" id="7852760">*</span><span class="ident" id="7852761">testing</span><span class="op" id="7852768">.</span><span class="ident" id="7852769">T</span><span class="op" id="7852770">)</span>&nbsp;<span class="op" id="7852772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852775">switch</span>&nbsp;<span class="ident" id="7852782">runtime</span><span class="op" id="7852789">.</span><span class="ident" id="7852790">GOOS</span>&nbsp;<span class="op" id="7852795">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852798">case</span>&nbsp;<span class="string" id="7852803">&#34;plan9&#34;</span><span class="op" id="7852810">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852814">t</span><span class="op" id="7852815">.</span><span class="ident" id="7852816">Skipf</span><span class="op" id="7852821">(</span><span class="string" id="7852822">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="7852843">,</span>&nbsp;<span class="ident" id="7852845">runtime</span><span class="op" id="7852852">.</span><span class="ident" id="7852853">GOOS</span><span class="op" id="7852857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852863">l</span><span class="op" id="7852864">,</span>&nbsp;<span class="ident" id="7852866">err</span>&nbsp;<span class="op" id="7852870">:=</span>&nbsp;<span class="ident" id="7852873">Listen</span><span class="op" id="7852879">(</span><span class="string" id="7852880">&#34;tcp&#34;</span><span class="op" id="7852885">,</span>&nbsp;<span class="string" id="7852887">&#34;127.0.0.1:0&#34;</span><span class="op" id="7852900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852903">if</span>&nbsp;<span class="ident" id="7852906">err</span>&nbsp;<span class="op" id="7852910">!=</span>&nbsp;<span class="ident" id="7852913">nil</span>&nbsp;<span class="op" id="7852917">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852921">t</span><span class="op" id="7852922">.</span><span class="ident" id="7852923">Fatal</span><span class="op" id="7852928">(</span><span class="ident" id="7852929">err</span><span class="op" id="7852932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7852935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852938">defer</span>&nbsp;<span class="ident" id="7852944">l</span><span class="op" id="7852945">.</span><span class="ident" id="7852946">Close</span><span class="op" id="7852951">(</span><span class="op" id="7852952">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7852956">read</span>&nbsp;<span class="op" id="7852961">:=</span>&nbsp;<span class="keyword" id="7852964">func</span><span class="op" id="7852968">(</span><span class="ident" id="7852969">r</span>&nbsp;<span class="ident" id="7852971">io</span><span class="op" id="7852973">.</span><span class="ident" id="7852974">Reader</span><span class="op" id="7852980">)</span>&nbsp;<span class="builtintype" id="7852982">error</span>&nbsp;<span class="op" id="7852988">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7852992">var</span>&nbsp;<span class="ident" id="7852996">m</span>&nbsp;<span class="op" id="7852998">[</span><span class="num" id="7852999">1</span><span class="op" id="7853000">]</span><span class="builtintype" id="7853001">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853008">_</span><span class="op" id="7853009">,</span>&nbsp;<span class="ident" id="7853011">err</span>&nbsp;<span class="op" id="7853015">:=</span>&nbsp;<span class="ident" id="7853018">r</span><span class="op" id="7853019">.</span><span class="ident" id="7853020">Read</span><span class="op" id="7853024">(</span><span class="ident" id="7853025">m</span><span class="op" id="7853026">[</span><span class="op" id="7853027">:</span><span class="op" id="7853028">]</span><span class="op" id="7853029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853033">return</span>&nbsp;<span class="ident" id="7853040">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853049">go</span>&nbsp;<span class="keyword" id="7853052">func</span><span class="op" id="7853056">(</span><span class="op" id="7853057">)</span>&nbsp;<span class="op" id="7853059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853063">c</span><span class="op" id="7853064">,</span>&nbsp;<span class="ident" id="7853066">err</span>&nbsp;<span class="op" id="7853070">:=</span>&nbsp;<span class="ident" id="7853073">Dial</span><span class="op" id="7853077">(</span><span class="string" id="7853078">&#34;tcp&#34;</span><span class="op" id="7853083">,</span>&nbsp;<span class="ident" id="7853085">l</span><span class="op" id="7853086">.</span><span class="ident" id="7853087">Addr</span><span class="op" id="7853091">(</span><span class="op" id="7853092">)</span><span class="op" id="7853093">.</span><span class="ident" id="7853094">String</span><span class="op" id="7853100">(</span><span class="op" id="7853101">)</span><span class="op" id="7853102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853106">if</span>&nbsp;<span class="ident" id="7853109">err</span>&nbsp;<span class="op" id="7853113">!=</span>&nbsp;<span class="ident" id="7853116">nil</span>&nbsp;<span class="op" id="7853120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853125">t</span><span class="op" id="7853126">.</span><span class="ident" id="7853127">Errorf</span><span class="op" id="7853133">(</span><span class="string" id="7853134">&#34;Dial:&nbsp;%v&#34;</span><span class="op" id="7853144">,</span>&nbsp;<span class="ident" id="7853146">err</span><span class="op" id="7853149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853154">return</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853168">go</span>&nbsp;<span class="ident" id="7853171">read</span><span class="op" id="7853175">(</span><span class="ident" id="7853176">c</span><span class="op" id="7853177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853182">time</span><span class="op" id="7853186">.</span><span class="ident" id="7853187">Sleep</span><span class="op" id="7853192">(</span><span class="num" id="7853193">10</span>&nbsp;<span class="op" id="7853196">*</span>&nbsp;<span class="ident" id="7853198">time</span><span class="op" id="7853202">.</span><span class="ident" id="7853203">Millisecond</span><span class="op" id="7853214">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853218">c</span><span class="op" id="7853219">.</span><span class="ident" id="7853220">Close</span><span class="op" id="7853225">(</span><span class="op" id="7853226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853229">}</span><span class="op" id="7853230">(</span><span class="op" id="7853231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853235">c</span><span class="op" id="7853236">,</span>&nbsp;<span class="ident" id="7853238">err</span>&nbsp;<span class="op" id="7853242">:=</span>&nbsp;<span class="ident" id="7853245">l</span><span class="op" id="7853246">.</span><span class="ident" id="7853247">Accept</span><span class="op" id="7853253">(</span><span class="op" id="7853254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853257">if</span>&nbsp;<span class="ident" id="7853260">err</span>&nbsp;<span class="op" id="7853264">!=</span>&nbsp;<span class="ident" id="7853267">nil</span>&nbsp;<span class="op" id="7853271">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853275">t</span><span class="op" id="7853276">.</span><span class="ident" id="7853277">Fatal</span><span class="op" id="7853282">(</span><span class="ident" id="7853283">err</span><span class="op" id="7853286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853292">defer</span>&nbsp;<span class="ident" id="7853298">c</span><span class="op" id="7853299">.</span><span class="ident" id="7853300">Close</span><span class="op" id="7853305">(</span><span class="op" id="7853306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853310">for</span>&nbsp;<span class="ident" id="7853314">err</span>&nbsp;<span class="op" id="7853318">==</span>&nbsp;<span class="ident" id="7853321">nil</span>&nbsp;<span class="op" id="7853325">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853329">err</span>&nbsp;<span class="op" id="7853333">=</span>&nbsp;<span class="ident" id="7853335">read</span><span class="op" id="7853339">(</span><span class="ident" id="7853340">c</span><span class="op" id="7853341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853347">if</span>&nbsp;<span class="ident" id="7853350">err</span>&nbsp;<span class="op" id="7853354">!=</span>&nbsp;<span class="ident" id="7853357">nil</span>&nbsp;<span class="op" id="7853361">&amp;&amp;</span>&nbsp;<span class="ident" id="7853364">err</span>&nbsp;<span class="op" id="7853368">!=</span>&nbsp;<span class="ident" id="7853371">io</span><span class="op" id="7853373">.</span><span class="ident" id="7853374">EOF</span>&nbsp;<span class="op" id="7853378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853382">t</span><span class="op" id="7853383">.</span><span class="ident" id="7853384">Fatal</span><span class="op" id="7853389">(</span><span class="ident" id="7853390">err</span><span class="op" id="7853393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853396">}</span><br>
<span class="lineno">225</span><span class="op" id="7853398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7853401">func</span>&nbsp;<span class="ident" id="7853406">TestErrorNil</span><span class="op" id="7853418">(</span><span class="ident" id="7853419">t</span>&nbsp;<span class="op" id="7853421">*</span><span class="ident" id="7853422">testing</span><span class="op" id="7853429">.</span><span class="ident" id="7853430">T</span><span class="op" id="7853431">)</span>&nbsp;<span class="op" id="7853433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853436">c</span><span class="op" id="7853437">,</span>&nbsp;<span class="ident" id="7853439">err</span>&nbsp;<span class="op" id="7853443">:=</span>&nbsp;<span class="ident" id="7853446">Dial</span><span class="op" id="7853450">(</span><span class="string" id="7853451">&#34;tcp&#34;</span><span class="op" id="7853456">,</span>&nbsp;<span class="string" id="7853458">&#34;127.0.0.1:65535&#34;</span><span class="op" id="7853475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853478">if</span>&nbsp;<span class="ident" id="7853481">err</span>&nbsp;<span class="op" id="7853485">==</span>&nbsp;<span class="ident" id="7853488">nil</span>&nbsp;<span class="op" id="7853492">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853496">t</span><span class="op" id="7853497">.</span><span class="ident" id="7853498">Fatal</span><span class="op" id="7853503">(</span><span class="string" id="7853504">&#34;Dial&nbsp;127.0.0.1:65535&nbsp;succeeded&#34;</span><span class="op" id="7853536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853542">if</span>&nbsp;<span class="ident" id="7853545">c</span>&nbsp;<span class="op" id="7853547">!=</span>&nbsp;<span class="ident" id="7853550">nil</span>&nbsp;<span class="op" id="7853554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853558">t</span><span class="op" id="7853559">.</span><span class="ident" id="7853560">Fatalf</span><span class="op" id="7853566">(</span><span class="string" id="7853567">&#34;Dial&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="7853623">,</span>&nbsp;<span class="ident" id="7853625">c</span><span class="op" id="7853626">,</span>&nbsp;<span class="ident" id="7853628">c</span><span class="op" id="7853629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853632">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7853636">//&nbsp;Make&nbsp;Listen&nbsp;fail&nbsp;by&nbsp;relistening&nbsp;on&nbsp;the&nbsp;same&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853693">l</span><span class="op" id="7853694">,</span>&nbsp;<span class="ident" id="7853696">err</span>&nbsp;<span class="op" id="7853700">:=</span>&nbsp;<span class="ident" id="7853703">Listen</span><span class="op" id="7853709">(</span><span class="string" id="7853710">&#34;tcp&#34;</span><span class="op" id="7853715">,</span>&nbsp;<span class="string" id="7853717">&#34;127.0.0.1:0&#34;</span><span class="op" id="7853730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853733">if</span>&nbsp;<span class="ident" id="7853736">err</span>&nbsp;<span class="op" id="7853740">!=</span>&nbsp;<span class="ident" id="7853743">nil</span>&nbsp;<span class="op" id="7853747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853751">t</span><span class="op" id="7853752">.</span><span class="ident" id="7853753">Fatalf</span><span class="op" id="7853759">(</span><span class="string" id="7853760">&#34;Listen&nbsp;127.0.0.1:0:&nbsp;%v&#34;</span><span class="op" id="7853784">,</span>&nbsp;<span class="ident" id="7853786">err</span><span class="op" id="7853789">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853795">defer</span>&nbsp;<span class="ident" id="7853801">l</span><span class="op" id="7853802">.</span><span class="ident" id="7853803">Close</span><span class="op" id="7853808">(</span><span class="op" id="7853809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853812">l1</span><span class="op" id="7853814">,</span>&nbsp;<span class="ident" id="7853816">err</span>&nbsp;<span class="op" id="7853820">:=</span>&nbsp;<span class="ident" id="7853823">Listen</span><span class="op" id="7853829">(</span><span class="string" id="7853830">&#34;tcp&#34;</span><span class="op" id="7853835">,</span>&nbsp;<span class="ident" id="7853837">l</span><span class="op" id="7853838">.</span><span class="ident" id="7853839">Addr</span><span class="op" id="7853843">(</span><span class="op" id="7853844">)</span><span class="op" id="7853845">.</span><span class="ident" id="7853846">String</span><span class="op" id="7853852">(</span><span class="op" id="7853853">)</span><span class="op" id="7853854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853857">if</span>&nbsp;<span class="ident" id="7853860">err</span>&nbsp;<span class="op" id="7853864">==</span>&nbsp;<span class="ident" id="7853867">nil</span>&nbsp;<span class="op" id="7853871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853875">t</span><span class="op" id="7853876">.</span><span class="ident" id="7853877">Fatalf</span><span class="op" id="7853883">(</span><span class="string" id="7853884">&#34;second&nbsp;Listen&nbsp;%v:&nbsp;%v&#34;</span><span class="op" id="7853906">,</span>&nbsp;<span class="ident" id="7853908">l</span><span class="op" id="7853909">.</span><span class="ident" id="7853910">Addr</span><span class="op" id="7853914">(</span><span class="op" id="7853915">)</span><span class="op" id="7853916">,</span>&nbsp;<span class="ident" id="7853918">err</span><span class="op" id="7853921">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7853924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7853927">if</span>&nbsp;<span class="ident" id="7853930">l1</span>&nbsp;<span class="op" id="7853933">!=</span>&nbsp;<span class="ident" id="7853936">nil</span>&nbsp;<span class="op" id="7853940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7853944">t</span><span class="op" id="7853945">.</span><span class="ident" id="7853946">Fatalf</span><span class="op" id="7853952">(</span><span class="string" id="7853953">&#34;Listen&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="7854011">,</span>&nbsp;<span class="ident" id="7854013">l1</span><span class="op" id="7854015">,</span>&nbsp;<span class="ident" id="7854017">l1</span><span class="op" id="7854019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7854026">//&nbsp;Make&nbsp;ListenPacket&nbsp;fail&nbsp;by&nbsp;relistening&nbsp;on&nbsp;the&nbsp;same&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854089">lp</span><span class="op" id="7854091">,</span>&nbsp;<span class="ident" id="7854093">err</span>&nbsp;<span class="op" id="7854097">:=</span>&nbsp;<span class="ident" id="7854100">ListenPacket</span><span class="op" id="7854112">(</span><span class="string" id="7854113">&#34;udp&#34;</span><span class="op" id="7854118">,</span>&nbsp;<span class="string" id="7854120">&#34;127.0.0.1:0&#34;</span><span class="op" id="7854133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854136">if</span>&nbsp;<span class="ident" id="7854139">err</span>&nbsp;<span class="op" id="7854143">!=</span>&nbsp;<span class="ident" id="7854146">nil</span>&nbsp;<span class="op" id="7854150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854154">t</span><span class="op" id="7854155">.</span><span class="ident" id="7854156">Fatalf</span><span class="op" id="7854162">(</span><span class="string" id="7854163">&#34;Listen&nbsp;127.0.0.1:0:&nbsp;%v&#34;</span><span class="op" id="7854187">,</span>&nbsp;<span class="ident" id="7854189">err</span><span class="op" id="7854192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854195">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854198">defer</span>&nbsp;<span class="ident" id="7854204">lp</span><span class="op" id="7854206">.</span><span class="ident" id="7854207">Close</span><span class="op" id="7854212">(</span><span class="op" id="7854213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854216">lp1</span><span class="op" id="7854219">,</span>&nbsp;<span class="ident" id="7854221">err</span>&nbsp;<span class="op" id="7854225">:=</span>&nbsp;<span class="ident" id="7854228">ListenPacket</span><span class="op" id="7854240">(</span><span class="string" id="7854241">&#34;udp&#34;</span><span class="op" id="7854246">,</span>&nbsp;<span class="ident" id="7854248">lp</span><span class="op" id="7854250">.</span><span class="ident" id="7854251">LocalAddr</span><span class="op" id="7854260">(</span><span class="op" id="7854261">)</span><span class="op" id="7854262">.</span><span class="ident" id="7854263">String</span><span class="op" id="7854269">(</span><span class="op" id="7854270">)</span><span class="op" id="7854271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854274">if</span>&nbsp;<span class="ident" id="7854277">err</span>&nbsp;<span class="op" id="7854281">==</span>&nbsp;<span class="ident" id="7854284">nil</span>&nbsp;<span class="op" id="7854288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854292">t</span><span class="op" id="7854293">.</span><span class="ident" id="7854294">Fatalf</span><span class="op" id="7854300">(</span><span class="string" id="7854301">&#34;second&nbsp;Listen&nbsp;%v:&nbsp;%v&#34;</span><span class="op" id="7854323">,</span>&nbsp;<span class="ident" id="7854325">lp</span><span class="op" id="7854327">.</span><span class="ident" id="7854328">LocalAddr</span><span class="op" id="7854337">(</span><span class="op" id="7854338">)</span><span class="op" id="7854339">,</span>&nbsp;<span class="ident" id="7854341">err</span><span class="op" id="7854344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854347">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7854350">if</span>&nbsp;<span class="ident" id="7854353">lp1</span>&nbsp;<span class="op" id="7854357">!=</span>&nbsp;<span class="ident" id="7854360">nil</span>&nbsp;<span class="op" id="7854364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7854368">t</span><span class="op" id="7854369">.</span><span class="ident" id="7854370">Fatalf</span><span class="op" id="7854376">(</span><span class="string" id="7854377">&#34;ListenPacket&nbsp;returned&nbsp;non-nil&nbsp;interface&nbsp;%T(%v)&nbsp;with&nbsp;err&nbsp;!=&nbsp;nil&#34;</span><span class="op" id="7854441">,</span>&nbsp;<span class="ident" id="7854443">lp1</span><span class="op" id="7854446">,</span>&nbsp;<span class="ident" id="7854448">lp1</span><span class="op" id="7854451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7854454">}</span><br>
<span class="lineno"></span><span class="op" id="7854456">}</span>
</div>
</body>
</html>
