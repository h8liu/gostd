<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html" class="current">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7870202">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7870257">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7870311">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7870362">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870395">package</span>&nbsp;<span class="ident" id="7870403">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870411">import</span>&nbsp;<span class="op" id="7870418">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870421">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870430">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870437">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870443">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870456">&#34;log&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870463">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870470">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870476">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870484">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7870495">&#34;time&#34;</span><br>
<span class="lineno">20</span><span class="op" id="7870502">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870505">func</span>&nbsp;<span class="ident" id="7870510">runPktSyslog</span><span class="op" id="7870522">(</span><span class="ident" id="7870523">c</span>&nbsp;<span class="ident" id="7870525"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7870528">.</span><span class="ident" id="7870529"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><span class="op" id="7870539">,</span>&nbsp;<span class="ident" id="7870541">done</span>&nbsp;<span class="keyword" id="7870546">chan</span><span class="op" id="7870550">&lt;-</span>&nbsp;<span class="builtintype" id="7870553">string</span><span class="op" id="7870559">)</span>&nbsp;<span class="op" id="7870561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870564">var</span>&nbsp;<span class="ident" id="7870568">buf</span>&nbsp;<span class="op" id="7870572">[</span><span class="num" id="7870573">4096</span><span class="op" id="7870577">]</span><span class="builtintype" id="7870578">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870584">var</span>&nbsp;<span class="ident" id="7870588">rcvd</span>&nbsp;<span class="builtintype" id="7870593">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870601">ct</span>&nbsp;<span class="op" id="7870604">:=</span>&nbsp;<span class="num" id="7870607">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870610">for</span>&nbsp;<span class="op" id="7870614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870618">var</span>&nbsp;<span class="ident" id="7870622">n</span>&nbsp;<span class="builtintype" id="7870624">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870630">var</span>&nbsp;<span class="ident" id="7870634">err</span>&nbsp;<span class="builtintype" id="7870638">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870647"><a href="/gostd/log/syslog/syslog_test.go.html#7870523">c</a></span><span class="op" id="7870648">.</span><span class="ident" id="7870649"><a href="/gostd/net/net.go.html#3340093">SetReadDeadline</a></span><span class="op" id="7870664">(</span><span class="ident" id="7870665"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7870669">.</span><span class="ident" id="7870670"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="7870673">(</span><span class="op" id="7870674">)</span><span class="op" id="7870675">.</span><span class="ident" id="7870676"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="7870679">(</span><span class="num" id="7870680">100</span>&nbsp;<span class="op" id="7870684">*</span>&nbsp;<span class="ident" id="7870686"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7870690">.</span><span class="ident" id="7870691"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="7870702">)</span><span class="op" id="7870703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870707"><a href="/gostd/log/syslog/syslog_test.go.html#7870622">n</a></span><span class="op" id="7870708">,</span>&nbsp;<span class="ident" id="7870710">_</span><span class="op" id="7870711">,</span>&nbsp;<span class="ident" id="7870713"><a href="/gostd/log/syslog/syslog_test.go.html#7870634">err</a></span>&nbsp;<span class="op" id="7870717">=</span>&nbsp;<span class="ident" id="7870719"><a href="/gostd/log/syslog/syslog_test.go.html#7870523">c</a></span><span class="op" id="7870720">.</span><span class="ident" id="7870721"><a href="/gostd/net/net.go.html#3339190">ReadFrom</a></span><span class="op" id="7870729">(</span><span class="ident" id="7870730"><a href="/gostd/log/syslog/syslog_test.go.html#7870568">buf</a></span><span class="op" id="7870733">[</span><span class="op" id="7870734">:</span><span class="op" id="7870735">]</span><span class="op" id="7870736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870740"><a href="/gostd/log/syslog/syslog_test.go.html#7870588">rcvd</a></span>&nbsp;<span class="op" id="7870745">+=</span>&nbsp;<span class="builtintype" id="7870748">string</span><span class="op" id="7870754">(</span><span class="ident" id="7870755"><a href="/gostd/log/syslog/syslog_test.go.html#7870568">buf</a></span><span class="op" id="7870758">[</span><span class="op" id="7870759">:</span><span class="ident" id="7870760"><a href="/gostd/log/syslog/syslog_test.go.html#7870622">n</a></span><span class="op" id="7870761">]</span><span class="op" id="7870762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870766">if</span>&nbsp;<span class="ident" id="7870769"><a href="/gostd/log/syslog/syslog_test.go.html#7870634">err</a></span>&nbsp;<span class="op" id="7870773">!=</span>&nbsp;<span class="builtintype" id="7870776">nil</span>&nbsp;<span class="op" id="7870780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870785">if</span>&nbsp;<span class="ident" id="7870788">oe</span><span class="op" id="7870790">,</span>&nbsp;<span class="ident" id="7870792">ok</span>&nbsp;<span class="op" id="7870795">:=</span>&nbsp;<span class="ident" id="7870798"><a href="/gostd/log/syslog/syslog_test.go.html#7870634">err</a></span><span class="op" id="7870801">.</span><span class="op" id="7870802">(</span><span class="op" id="7870803">*</span><span class="ident" id="7870804"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7870807">.</span><span class="ident" id="7870808"><a href="/gostd/net/net.go.html#3341562">OpError</a></span><span class="op" id="7870815">)</span><span class="op" id="7870816">;</span>&nbsp;<span class="ident" id="7870818"><a href="/gostd/log/syslog/syslog_test.go.html#7870792">ok</a></span>&nbsp;<span class="op" id="7870821">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870827">if</span>&nbsp;<span class="ident" id="7870830"><a href="/gostd/log/syslog/syslog_test.go.html#7870601">ct</a></span>&nbsp;<span class="op" id="7870833">&lt;</span>&nbsp;<span class="num" id="7870835">3</span>&nbsp;<span class="op" id="7870837">&amp;&amp;</span>&nbsp;<span class="ident" id="7870840"><a href="/gostd/log/syslog/syslog_test.go.html#7870788">oe</a></span><span class="op" id="7870842">.</span><span class="ident" id="7870843"><a href="/gostd/net/net.go.html#3342194">Temporary</a></span><span class="op" id="7870852">(</span><span class="op" id="7870853">)</span>&nbsp;<span class="op" id="7870855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870862"><a href="/gostd/log/syslog/syslog_test.go.html#7870601">ct</a></span><span class="op" id="7870864">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870872">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7870885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7870890">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7870895">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7870903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7870906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870909"><a href="/gostd/log/syslog/syslog_test.go.html#7870523">c</a></span><span class="op" id="7870910">.</span><span class="ident" id="7870911"><a href="/gostd/net/net.go.html#3339672">Close</a></span><span class="op" id="7870916">(</span><span class="op" id="7870917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7870920"><a href="/gostd/log/syslog/syslog_test.go.html#7870541">done</a></span>&nbsp;<span class="op" id="7870925">&lt;-</span>&nbsp;<span class="ident" id="7870928"><a href="/gostd/log/syslog/syslog_test.go.html#7870588">rcvd</a></span><br>
<span class="lineno">45</span><span class="op" id="7870933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870936">var</span>&nbsp;<span class="ident" id="7870940">crashy</span>&nbsp;<span class="op" id="7870947">=</span>&nbsp;<span class="builtintype" id="7870949">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7870956">func</span>&nbsp;<span class="ident" id="7870961">runStreamSyslog</span><span class="op" id="7870976">(</span><span class="ident" id="7870977">l</span>&nbsp;<span class="ident" id="7870979"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7870982">.</span><span class="ident" id="7870983"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="7870991">,</span>&nbsp;<span class="ident" id="7870993">done</span>&nbsp;<span class="keyword" id="7870998">chan</span><span class="op" id="7871002">&lt;-</span>&nbsp;<span class="builtintype" id="7871005">string</span><span class="op" id="7871011">,</span>&nbsp;<span class="ident" id="7871013">wg</span>&nbsp;<span class="op" id="7871016">*</span><span class="ident" id="7871017"><a href="/gostd/log/syslog/syslog_test.go.html#7870476">sync</a></span><span class="op" id="7871021">.</span><span class="ident" id="7871022"><a href="/gostd/sync/waitgroup.go.html#1459933">WaitGroup</a></span><span class="op" id="7871031">)</span>&nbsp;<span class="op" id="7871033">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871036">for</span>&nbsp;<span class="op" id="7871040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871044">var</span>&nbsp;<span class="ident" id="7871048">c</span>&nbsp;<span class="ident" id="7871050"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7871053">.</span><span class="ident" id="7871054"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871061">var</span>&nbsp;<span class="ident" id="7871065">err</span>&nbsp;<span class="builtintype" id="7871069">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871077">if</span>&nbsp;<span class="ident" id="7871080"><a href="/gostd/log/syslog/syslog_test.go.html#7871048">c</a></span><span class="op" id="7871081">,</span>&nbsp;<span class="ident" id="7871083"><a href="/gostd/log/syslog/syslog_test.go.html#7871065">err</a></span>&nbsp;<span class="op" id="7871087">=</span>&nbsp;<span class="ident" id="7871089"><a href="/gostd/log/syslog/syslog_test.go.html#7870977">l</a></span><span class="op" id="7871090">.</span><span class="ident" id="7871091"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="7871097">(</span><span class="op" id="7871098">)</span><span class="op" id="7871099">;</span>&nbsp;<span class="ident" id="7871101"><a href="/gostd/log/syslog/syslog_test.go.html#7871065">err</a></span>&nbsp;<span class="op" id="7871105">!=</span>&nbsp;<span class="builtintype" id="7871108">nil</span>&nbsp;<span class="op" id="7871112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871117">return</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871130"><a href="/gostd/log/syslog/syslog_test.go.html#7871013">wg</a></span><span class="op" id="7871132">.</span><span class="ident" id="7871133"><a href="/gostd/sync/waitgroup.go.html#1461154">Add</a></span><span class="op" id="7871136">(</span><span class="num" id="7871137">1</span><span class="op" id="7871138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871142">go</span>&nbsp;<span class="keyword" id="7871145">func</span><span class="op" id="7871149">(</span><span class="ident" id="7871150">c</span>&nbsp;<span class="ident" id="7871152"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7871155">.</span><span class="ident" id="7871156"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="7871160">)</span>&nbsp;<span class="op" id="7871162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871167">defer</span>&nbsp;<span class="ident" id="7871173"><a href="/gostd/log/syslog/syslog_test.go.html#7871013">wg</a></span><span class="op" id="7871175">.</span><span class="ident" id="7871176"><a href="/gostd/sync/waitgroup.go.html#1462065">Done</a></span><span class="op" id="7871180">(</span><span class="op" id="7871181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871186"><a href="/gostd/log/syslog/syslog_test.go.html#7871150">c</a></span><span class="op" id="7871187">.</span><span class="ident" id="7871188"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="7871203">(</span><span class="ident" id="7871204"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7871208">.</span><span class="ident" id="7871209"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="7871212">(</span><span class="op" id="7871213">)</span><span class="op" id="7871214">.</span><span class="ident" id="7871215"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="7871218">(</span><span class="num" id="7871219">5</span>&nbsp;<span class="op" id="7871221">*</span>&nbsp;<span class="ident" id="7871223"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7871227">.</span><span class="ident" id="7871228"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="7871234">)</span><span class="op" id="7871235">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871240">b</span>&nbsp;<span class="op" id="7871242">:=</span>&nbsp;<span class="ident" id="7871245"><a href="/gostd/log/syslog/syslog_test.go.html#7870421">bufio</a></span><span class="op" id="7871250">.</span><span class="ident" id="7871251"><a href="/gostd/bufio/bufio.go.html#1355792">NewReader</a></span><span class="op" id="7871260">(</span><span class="ident" id="7871261"><a href="/gostd/log/syslog/syslog_test.go.html#7871150">c</a></span><span class="op" id="7871262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871267">for</span>&nbsp;<span class="ident" id="7871271">ct</span>&nbsp;<span class="op" id="7871274">:=</span>&nbsp;<span class="num" id="7871277">1</span><span class="op" id="7871278">;</span>&nbsp;<span class="op" id="7871280">!</span><span class="ident" id="7871281"><a href="/gostd/log/syslog/syslog_test.go.html#7870940">crashy</a></span>&nbsp;<span class="op" id="7871288">||</span>&nbsp;<span class="ident" id="7871291"><a href="/gostd/log/syslog/syslog_test.go.html#7871271">ct</a></span><span class="op" id="7871293">&amp;</span><span class="num" id="7871294">7</span>&nbsp;<span class="op" id="7871296">!=</span>&nbsp;<span class="num" id="7871299">0</span><span class="op" id="7871300">;</span>&nbsp;<span class="ident" id="7871302"><a href="/gostd/log/syslog/syslog_test.go.html#7871271">ct</a></span><span class="op" id="7871304">++</span>&nbsp;<span class="op" id="7871307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871313">s</span><span class="op" id="7871314">,</span>&nbsp;<span class="ident" id="7871316">err</span>&nbsp;<span class="op" id="7871320">:=</span>&nbsp;<span class="ident" id="7871323"><a href="/gostd/log/syslog/syslog_test.go.html#7871240">b</a></span><span class="op" id="7871324">.</span><span class="ident" id="7871325"><a href="/gostd/bufio/bufio.go.html#1365145">ReadString</a></span><span class="op" id="7871335">(</span><span class="string" id="7871336">&#39;\n&#39;</span><span class="op" id="7871340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871346">if</span>&nbsp;<span class="ident" id="7871349"><a href="/gostd/log/syslog/syslog_test.go.html#7871316">err</a></span>&nbsp;<span class="op" id="7871353">!=</span>&nbsp;<span class="builtintype" id="7871356">nil</span>&nbsp;<span class="op" id="7871360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871367">break</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871383"><a href="/gostd/log/syslog/syslog_test.go.html#7870993">done</a></span>&nbsp;<span class="op" id="7871388">&lt;-</span>&nbsp;<span class="ident" id="7871391"><a href="/gostd/log/syslog/syslog_test.go.html#7871313">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871401"><a href="/gostd/log/syslog/syslog_test.go.html#7871150">c</a></span><span class="op" id="7871402">.</span><span class="ident" id="7871403"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="7871408">(</span><span class="op" id="7871409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871413">}</span><span class="op" id="7871414">(</span><span class="ident" id="7871415"><a href="/gostd/log/syslog/syslog_test.go.html#7871048">c</a></span><span class="op" id="7871416">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871419">}</span><br>
<span class="lineno"></span><span class="op" id="7871421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7871424">func</span>&nbsp;<span class="ident" id="7871429">startServer</span><span class="op" id="7871440">(</span><span class="ident" id="7871441">n</span><span class="op" id="7871442">,</span>&nbsp;<span class="ident" id="7871444">la</span>&nbsp;<span class="builtintype" id="7871447">string</span><span class="op" id="7871453">,</span>&nbsp;<span class="ident" id="7871455">done</span>&nbsp;<span class="keyword" id="7871460">chan</span><span class="op" id="7871464">&lt;-</span>&nbsp;<span class="builtintype" id="7871467">string</span><span class="op" id="7871473">)</span>&nbsp;<span class="op" id="7871475">(</span><span class="ident" id="7871476">addr</span>&nbsp;<span class="builtintype" id="7871481">string</span><span class="op" id="7871487">,</span>&nbsp;<span class="ident" id="7871489">sock</span>&nbsp;<span class="ident" id="7871494"><a href="/gostd/log/syslog/syslog_test.go.html#7870437">io</a></span><span class="op" id="7871496">.</span><span class="ident" id="7871497"><a href="/gostd/io/io.go.html#1422563">Closer</a></span><span class="op" id="7871503">,</span>&nbsp;<span class="ident" id="7871505">wg</span>&nbsp;<span class="op" id="7871508">*</span><span class="ident" id="7871509"><a href="/gostd/log/syslog/syslog_test.go.html#7870476">sync</a></span><span class="op" id="7871513">.</span><span class="ident" id="7871514"><a href="/gostd/sync/waitgroup.go.html#1459933">WaitGroup</a></span><span class="op" id="7871523">)</span>&nbsp;<span class="op" id="7871525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871528">if</span>&nbsp;<span class="ident" id="7871531"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span>&nbsp;<span class="op" id="7871533">==</span>&nbsp;<span class="string" id="7871536">&#34;udp&#34;</span>&nbsp;<span class="op" id="7871542">||</span>&nbsp;<span class="ident" id="7871545"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span>&nbsp;<span class="op" id="7871547">==</span>&nbsp;<span class="string" id="7871550">&#34;tcp&#34;</span>&nbsp;<span class="op" id="7871556">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871560"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span>&nbsp;<span class="op" id="7871563">=</span>&nbsp;<span class="string" id="7871565">&#34;127.0.0.1:0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871580">}</span>&nbsp;<span class="keyword" id="7871582">else</span>&nbsp;<span class="op" id="7871587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7871591">//&nbsp;unix&nbsp;and&nbsp;unixgram:&nbsp;choose&nbsp;an&nbsp;address&nbsp;if&nbsp;none&nbsp;given</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871647">if</span>&nbsp;<span class="ident" id="7871650"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span>&nbsp;<span class="op" id="7871653">==</span>&nbsp;<span class="string" id="7871656">&#34;&#34;</span>&nbsp;<span class="op" id="7871659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7871664">//&nbsp;use&nbsp;ioutil.TempFile&nbsp;to&nbsp;get&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;unique</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871719">f</span><span class="op" id="7871720">,</span>&nbsp;<span class="ident" id="7871722">err</span>&nbsp;<span class="op" id="7871726">:=</span>&nbsp;<span class="ident" id="7871729"><a href="/gostd/log/syslog/syslog_test.go.html#7870443">ioutil</a></span><span class="op" id="7871735">.</span><span class="ident" id="7871736"><a href="/gostd/io/ioutil/tempfile.go.html#3769783">TempFile</a></span><span class="op" id="7871744">(</span><span class="string" id="7871745">&#34;&#34;</span><span class="op" id="7871747">,</span>&nbsp;<span class="string" id="7871749">&#34;syslogtest&#34;</span><span class="op" id="7871761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871766">if</span>&nbsp;<span class="ident" id="7871769"><a href="/gostd/log/syslog/syslog_test.go.html#7871722">err</a></span>&nbsp;<span class="op" id="7871773">!=</span>&nbsp;<span class="builtintype" id="7871776">nil</span>&nbsp;<span class="op" id="7871780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871786"><a href="/gostd/log/syslog/syslog_test.go.html#7870456">log</a></span><span class="op" id="7871789">.</span><span class="ident" id="7871790"><a href="/gostd/log/log.go.html#4079007">Fatal</a></span><span class="op" id="7871795">(</span><span class="string" id="7871796">&#34;TempFile:&nbsp;&#34;</span><span class="op" id="7871808">,</span>&nbsp;<span class="ident" id="7871810"><a href="/gostd/log/syslog/syslog_test.go.html#7871722">err</a></span><span class="op" id="7871813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871823"><a href="/gostd/log/syslog/syslog_test.go.html#7871719">f</a></span><span class="op" id="7871824">.</span><span class="ident" id="7871825"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="7871830">(</span><span class="op" id="7871831">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871836"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span>&nbsp;<span class="op" id="7871839">=</span>&nbsp;<span class="ident" id="7871841"><a href="/gostd/log/syslog/syslog_test.go.html#7871719">f</a></span><span class="op" id="7871842">.</span><span class="ident" id="7871843"><a href="/gostd/os/file.go.html#2441585">Name</a></span><span class="op" id="7871847">(</span><span class="op" id="7871848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871856"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7871858">.</span><span class="ident" id="7871859"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7871865">(</span><span class="ident" id="7871866"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span><span class="op" id="7871868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7871871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871875"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span>&nbsp;<span class="op" id="7871878">=</span>&nbsp;<span class="builtinfunc" id="7871880">new</span><span class="op" id="7871883">(</span><span class="ident" id="7871884"><a href="/gostd/log/syslog/syslog_test.go.html#7870476">sync</a></span><span class="op" id="7871888">.</span><span class="ident" id="7871889"><a href="/gostd/sync/waitgroup.go.html#1459933">WaitGroup</a></span><span class="op" id="7871898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871901">if</span>&nbsp;<span class="ident" id="7871904"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span>&nbsp;<span class="op" id="7871906">==</span>&nbsp;<span class="string" id="7871909">&#34;udp&#34;</span>&nbsp;<span class="op" id="7871915">||</span>&nbsp;<span class="ident" id="7871918"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span>&nbsp;<span class="op" id="7871920">==</span>&nbsp;<span class="string" id="7871923">&#34;unixgram&#34;</span>&nbsp;<span class="op" id="7871934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871938">l</span><span class="op" id="7871939">,</span>&nbsp;<span class="ident" id="7871941">e</span>&nbsp;<span class="op" id="7871943">:=</span>&nbsp;<span class="ident" id="7871946"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7871949">.</span><span class="ident" id="7871950"><a href="/gostd/net/dial.go.html#3207909">ListenPacket</a></span><span class="op" id="7871962">(</span><span class="ident" id="7871963"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span><span class="op" id="7871964">,</span>&nbsp;<span class="ident" id="7871966"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span><span class="op" id="7871968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7871972">if</span>&nbsp;<span class="ident" id="7871975"><a href="/gostd/log/syslog/syslog_test.go.html#7871941">e</a></span>&nbsp;<span class="op" id="7871977">!=</span>&nbsp;<span class="builtintype" id="7871980">nil</span>&nbsp;<span class="op" id="7871984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7871989"><a href="/gostd/log/syslog/syslog_test.go.html#7870456">log</a></span><span class="op" id="7871992">.</span><span class="ident" id="7871993"><a href="/gostd/log/log.go.html#4079156">Fatalf</a></span><span class="op" id="7871999">(</span><span class="string" id="7872000">&#34;startServer&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7872024">,</span>&nbsp;<span class="ident" id="7872026"><a href="/gostd/log/syslog/syslog_test.go.html#7871941">e</a></span><span class="op" id="7872027">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872035"><a href="/gostd/log/syslog/syslog_test.go.html#7871476">addr</a></span>&nbsp;<span class="op" id="7872040">=</span>&nbsp;<span class="ident" id="7872042"><a href="/gostd/log/syslog/syslog_test.go.html#7871938">l</a></span><span class="op" id="7872043">.</span><span class="ident" id="7872044"><a href="/gostd/net/net.go.html#3339737">LocalAddr</a></span><span class="op" id="7872053">(</span><span class="op" id="7872054">)</span><span class="op" id="7872055">.</span><span class="ident" id="7872056"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="7872062">(</span><span class="op" id="7872063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872067"><a href="/gostd/log/syslog/syslog_test.go.html#7871489">sock</a></span>&nbsp;<span class="op" id="7872072">=</span>&nbsp;<span class="ident" id="7872074"><a href="/gostd/log/syslog/syslog_test.go.html#7871938">l</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872078"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span><span class="op" id="7872080">.</span><span class="ident" id="7872081"><a href="/gostd/sync/waitgroup.go.html#1461154">Add</a></span><span class="op" id="7872084">(</span><span class="num" id="7872085">1</span><span class="op" id="7872086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872090">go</span>&nbsp;<span class="keyword" id="7872093">func</span><span class="op" id="7872097">(</span><span class="op" id="7872098">)</span>&nbsp;<span class="op" id="7872100">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872105">defer</span>&nbsp;<span class="ident" id="7872111"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span><span class="op" id="7872113">.</span><span class="ident" id="7872114"><a href="/gostd/sync/waitgroup.go.html#1462065">Done</a></span><span class="op" id="7872118">(</span><span class="op" id="7872119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872124"><a href="/gostd/log/syslog/syslog_test.go.html#7870510">runPktSyslog</a></span><span class="op" id="7872136">(</span><span class="ident" id="7872137"><a href="/gostd/log/syslog/syslog_test.go.html#7871938">l</a></span><span class="op" id="7872138">,</span>&nbsp;<span class="ident" id="7872140"><a href="/gostd/log/syslog/syslog_test.go.html#7871455">done</a></span><span class="op" id="7872144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872148">}</span><span class="op" id="7872149">(</span><span class="op" id="7872150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872153">}</span>&nbsp;<span class="keyword" id="7872155">else</span>&nbsp;<span class="op" id="7872160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872164">l</span><span class="op" id="7872165">,</span>&nbsp;<span class="ident" id="7872167">e</span>&nbsp;<span class="op" id="7872169">:=</span>&nbsp;<span class="ident" id="7872172"><a href="/gostd/log/syslog/syslog_test.go.html#7870463">net</a></span><span class="op" id="7872175">.</span><span class="ident" id="7872176"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="7872182">(</span><span class="ident" id="7872183"><a href="/gostd/log/syslog/syslog_test.go.html#7871441">n</a></span><span class="op" id="7872184">,</span>&nbsp;<span class="ident" id="7872186"><a href="/gostd/log/syslog/syslog_test.go.html#7871444">la</a></span><span class="op" id="7872188">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872192">if</span>&nbsp;<span class="ident" id="7872195"><a href="/gostd/log/syslog/syslog_test.go.html#7872167">e</a></span>&nbsp;<span class="op" id="7872197">!=</span>&nbsp;<span class="builtintype" id="7872200">nil</span>&nbsp;<span class="op" id="7872204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872209"><a href="/gostd/log/syslog/syslog_test.go.html#7870456">log</a></span><span class="op" id="7872212">.</span><span class="ident" id="7872213"><a href="/gostd/log/log.go.html#4079156">Fatalf</a></span><span class="op" id="7872219">(</span><span class="string" id="7872220">&#34;startServer&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7872244">,</span>&nbsp;<span class="ident" id="7872246"><a href="/gostd/log/syslog/syslog_test.go.html#7872167">e</a></span><span class="op" id="7872247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872255"><a href="/gostd/log/syslog/syslog_test.go.html#7871476">addr</a></span>&nbsp;<span class="op" id="7872260">=</span>&nbsp;<span class="ident" id="7872262"><a href="/gostd/log/syslog/syslog_test.go.html#7872164">l</a></span><span class="op" id="7872263">.</span><span class="ident" id="7872264"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="7872268">(</span><span class="op" id="7872269">)</span><span class="op" id="7872270">.</span><span class="ident" id="7872271"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="7872277">(</span><span class="op" id="7872278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872282"><a href="/gostd/log/syslog/syslog_test.go.html#7871489">sock</a></span>&nbsp;<span class="op" id="7872287">=</span>&nbsp;<span class="ident" id="7872289"><a href="/gostd/log/syslog/syslog_test.go.html#7872164">l</a></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872293"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span><span class="op" id="7872295">.</span><span class="ident" id="7872296"><a href="/gostd/sync/waitgroup.go.html#1461154">Add</a></span><span class="op" id="7872299">(</span><span class="num" id="7872300">1</span><span class="op" id="7872301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872305">go</span>&nbsp;<span class="keyword" id="7872308">func</span><span class="op" id="7872312">(</span><span class="op" id="7872313">)</span>&nbsp;<span class="op" id="7872315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872320">defer</span>&nbsp;<span class="ident" id="7872326"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span><span class="op" id="7872328">.</span><span class="ident" id="7872329"><a href="/gostd/sync/waitgroup.go.html#1462065">Done</a></span><span class="op" id="7872333">(</span><span class="op" id="7872334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872339"><a href="/gostd/log/syslog/syslog_test.go.html#7870961">runStreamSyslog</a></span><span class="op" id="7872354">(</span><span class="ident" id="7872355"><a href="/gostd/log/syslog/syslog_test.go.html#7872164">l</a></span><span class="op" id="7872356">,</span>&nbsp;<span class="ident" id="7872358"><a href="/gostd/log/syslog/syslog_test.go.html#7871455">done</a></span><span class="op" id="7872362">,</span>&nbsp;<span class="ident" id="7872364"><a href="/gostd/log/syslog/syslog_test.go.html#7871505">wg</a></span><span class="op" id="7872366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872370">}</span><span class="op" id="7872371">(</span><span class="op" id="7872372">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872378">return</span><br>
<span class="lineno"></span><span class="op" id="7872385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7872388">func</span>&nbsp;<span class="ident" id="7872393">TestWithSimulated</span><span class="op" id="7872410">(</span><span class="ident" id="7872411">t</span>&nbsp;<span class="op" id="7872413">*</span><span class="ident" id="7872414"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7872421">.</span><span class="ident" id="7872422"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7872423">)</span>&nbsp;<span class="op" id="7872425">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872428">msg</span>&nbsp;<span class="op" id="7872432">:=</span>&nbsp;<span class="string" id="7872435">&#34;Test&nbsp;123&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872447">transport</span>&nbsp;<span class="op" id="7872457">:=</span>&nbsp;<span class="op" id="7872460">[</span><span class="op" id="7872461">]</span><span class="builtintype" id="7872462">string</span><span class="op" id="7872468">{</span><span class="string" id="7872469">&#34;unix&#34;</span><span class="op" id="7872475">,</span>&nbsp;<span class="string" id="7872477">&#34;unixgram&#34;</span><span class="op" id="7872487">,</span>&nbsp;<span class="string" id="7872489">&#34;udp&#34;</span><span class="op" id="7872494">,</span>&nbsp;<span class="string" id="7872496">&#34;tcp&#34;</span><span class="op" id="7872501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872505">for</span>&nbsp;<span class="ident" id="7872509">_</span><span class="op" id="7872510">,</span>&nbsp;<span class="ident" id="7872512">tr</span>&nbsp;<span class="op" id="7872515">:=</span>&nbsp;<span class="keyword" id="7872518">range</span>&nbsp;<span class="ident" id="7872524"><a href="/gostd/log/syslog/syslog_test.go.html#7872447">transport</a></span>&nbsp;<span class="op" id="7872534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872538">done</span>&nbsp;<span class="op" id="7872543">:=</span>&nbsp;<span class="builtinfunc" id="7872546">make</span><span class="op" id="7872550">(</span><span class="keyword" id="7872551">chan</span>&nbsp;<span class="builtintype" id="7872556">string</span><span class="op" id="7872562">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872566">addr</span><span class="op" id="7872570">,</span>&nbsp;<span class="ident" id="7872572">sock</span><span class="op" id="7872576">,</span>&nbsp;<span class="ident" id="7872578">srvWG</span>&nbsp;<span class="op" id="7872584">:=</span>&nbsp;<span class="ident" id="7872587"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7872598">(</span><span class="ident" id="7872599"><a href="/gostd/log/syslog/syslog_test.go.html#7872512">tr</a></span><span class="op" id="7872601">,</span>&nbsp;<span class="string" id="7872603">&#34;&#34;</span><span class="op" id="7872605">,</span>&nbsp;<span class="ident" id="7872607"><a href="/gostd/log/syslog/syslog_test.go.html#7872538">done</a></span><span class="op" id="7872611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872615">defer</span>&nbsp;<span class="ident" id="7872621"><a href="/gostd/log/syslog/syslog_test.go.html#7872578">srvWG</a></span><span class="op" id="7872626">.</span><span class="ident" id="7872627"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7872631">(</span><span class="op" id="7872632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872636">defer</span>&nbsp;<span class="ident" id="7872642"><a href="/gostd/log/syslog/syslog_test.go.html#7872572">sock</a></span><span class="op" id="7872646">.</span><span class="ident" id="7872647"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7872652">(</span><span class="op" id="7872653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872657">if</span>&nbsp;<span class="ident" id="7872660"><a href="/gostd/log/syslog/syslog_test.go.html#7872512">tr</a></span>&nbsp;<span class="op" id="7872663">==</span>&nbsp;<span class="string" id="7872666">&#34;unix&#34;</span>&nbsp;<span class="op" id="7872673">||</span>&nbsp;<span class="ident" id="7872676"><a href="/gostd/log/syslog/syslog_test.go.html#7872512">tr</a></span>&nbsp;<span class="op" id="7872679">==</span>&nbsp;<span class="string" id="7872682">&#34;unixgram&#34;</span>&nbsp;<span class="op" id="7872693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872698">defer</span>&nbsp;<span class="ident" id="7872704"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7872706">.</span><span class="ident" id="7872707"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7872713">(</span><span class="ident" id="7872714"><a href="/gostd/log/syslog/syslog_test.go.html#7872566">addr</a></span><span class="op" id="7872718">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872726">s</span><span class="op" id="7872727">,</span>&nbsp;<span class="ident" id="7872729">err</span>&nbsp;<span class="op" id="7872733">:=</span>&nbsp;<span class="ident" id="7872736"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7872740">(</span><span class="ident" id="7872741"><a href="/gostd/log/syslog/syslog_test.go.html#7872512">tr</a></span><span class="op" id="7872743">,</span>&nbsp;<span class="ident" id="7872745"><a href="/gostd/log/syslog/syslog_test.go.html#7872566">addr</a></span><span class="op" id="7872749">,</span>&nbsp;<span class="ident" id="7872751"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="7872759">|</span><span class="ident" id="7872760"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7872768">,</span>&nbsp;<span class="string" id="7872770">&#34;syslog_test&#34;</span><span class="op" id="7872783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872787">if</span>&nbsp;<span class="ident" id="7872790"><a href="/gostd/log/syslog/syslog_test.go.html#7872729">err</a></span>&nbsp;<span class="op" id="7872794">!=</span>&nbsp;<span class="builtintype" id="7872797">nil</span>&nbsp;<span class="op" id="7872801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872806"><a href="/gostd/log/syslog/syslog_test.go.html#7872411">t</a></span><span class="op" id="7872807">.</span><span class="ident" id="7872808"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7872814">(</span><span class="string" id="7872815">&#34;Dial()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7872834">,</span>&nbsp;<span class="ident" id="7872836"><a href="/gostd/log/syslog/syslog_test.go.html#7872729">err</a></span><span class="op" id="7872839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872843">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872847"><a href="/gostd/log/syslog/syslog_test.go.html#7872729">err</a></span>&nbsp;<span class="op" id="7872851">=</span>&nbsp;<span class="ident" id="7872853"><a href="/gostd/log/syslog/syslog_test.go.html#7872726">s</a></span><span class="op" id="7872854">.</span><span class="ident" id="7872855"><a href="/gostd/log/syslog/syslog.go.html#6030988">Info</a></span><span class="op" id="7872859">(</span><span class="ident" id="7872860"><a href="/gostd/log/syslog/syslog_test.go.html#7872428">msg</a></span><span class="op" id="7872863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7872867">if</span>&nbsp;<span class="ident" id="7872870"><a href="/gostd/log/syslog/syslog_test.go.html#7872729">err</a></span>&nbsp;<span class="op" id="7872874">!=</span>&nbsp;<span class="builtintype" id="7872877">nil</span>&nbsp;<span class="op" id="7872881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872886"><a href="/gostd/log/syslog/syslog_test.go.html#7872411">t</a></span><span class="op" id="7872887">.</span><span class="ident" id="7872888"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7872894">(</span><span class="string" id="7872895">&#34;log&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7872911">,</span>&nbsp;<span class="ident" id="7872913"><a href="/gostd/log/syslog/syslog_test.go.html#7872729">err</a></span><span class="op" id="7872916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872924"><a href="/gostd/log/syslog/syslog_test.go.html#7874686">check</a></span><span class="op" id="7872929">(</span><span class="ident" id="7872930"><a href="/gostd/log/syslog/syslog_test.go.html#7872411">t</a></span><span class="op" id="7872931">,</span>&nbsp;<span class="ident" id="7872933"><a href="/gostd/log/syslog/syslog_test.go.html#7872428">msg</a></span><span class="op" id="7872936">,</span>&nbsp;<span class="op" id="7872938">&lt;-</span><span class="ident" id="7872940"><a href="/gostd/log/syslog/syslog_test.go.html#7872538">done</a></span><span class="op" id="7872944">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872948"><a href="/gostd/log/syslog/syslog_test.go.html#7872726">s</a></span><span class="op" id="7872949">.</span><span class="ident" id="7872950"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7872955">(</span><span class="op" id="7872956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7872959">}</span><br>
<span class="lineno"></span><span class="op" id="7872961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7872964">func</span>&nbsp;<span class="ident" id="7872969">TestFlap</span><span class="op" id="7872977">(</span><span class="ident" id="7872978">t</span>&nbsp;<span class="op" id="7872980">*</span><span class="ident" id="7872981"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7872988">.</span><span class="ident" id="7872989"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7872990">)</span>&nbsp;<span class="op" id="7872992">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7872995">net</span>&nbsp;<span class="op" id="7872999">:=</span>&nbsp;<span class="string" id="7873002">&#34;unix&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873010">done</span>&nbsp;<span class="op" id="7873015">:=</span>&nbsp;<span class="builtinfunc" id="7873018">make</span><span class="op" id="7873022">(</span><span class="keyword" id="7873023">chan</span>&nbsp;<span class="builtintype" id="7873028">string</span><span class="op" id="7873034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873037">addr</span><span class="op" id="7873041">,</span>&nbsp;<span class="ident" id="7873043">sock</span><span class="op" id="7873047">,</span>&nbsp;<span class="ident" id="7873049">srvWG</span>&nbsp;<span class="op" id="7873055">:=</span>&nbsp;<span class="ident" id="7873058"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7873069">(</span><span class="ident" id="7873070"><a href="/gostd/log/syslog/syslog_test.go.html#7872995">net</a></span><span class="op" id="7873073">,</span>&nbsp;<span class="string" id="7873075">&#34;&#34;</span><span class="op" id="7873077">,</span>&nbsp;<span class="ident" id="7873079"><a href="/gostd/log/syslog/syslog_test.go.html#7873010">done</a></span><span class="op" id="7873083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873086">defer</span>&nbsp;<span class="ident" id="7873092"><a href="/gostd/log/syslog/syslog_test.go.html#7873049">srvWG</a></span><span class="op" id="7873097">.</span><span class="ident" id="7873098"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7873102">(</span><span class="op" id="7873103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873106">defer</span>&nbsp;<span class="ident" id="7873112"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7873114">.</span><span class="ident" id="7873115"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7873121">(</span><span class="ident" id="7873122"><a href="/gostd/log/syslog/syslog_test.go.html#7873037">addr</a></span><span class="op" id="7873126">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873129">defer</span>&nbsp;<span class="ident" id="7873135"><a href="/gostd/log/syslog/syslog_test.go.html#7873043">sock</a></span><span class="op" id="7873139">.</span><span class="ident" id="7873140"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7873145">(</span><span class="op" id="7873146">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873150">s</span><span class="op" id="7873151">,</span>&nbsp;<span class="ident" id="7873153">err</span>&nbsp;<span class="op" id="7873157">:=</span>&nbsp;<span class="ident" id="7873160"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7873164">(</span><span class="ident" id="7873165"><a href="/gostd/log/syslog/syslog_test.go.html#7872995">net</a></span><span class="op" id="7873168">,</span>&nbsp;<span class="ident" id="7873170"><a href="/gostd/log/syslog/syslog_test.go.html#7873037">addr</a></span><span class="op" id="7873174">,</span>&nbsp;<span class="ident" id="7873176"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="7873184">|</span><span class="ident" id="7873185"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7873193">,</span>&nbsp;<span class="string" id="7873195">&#34;syslog_test&#34;</span><span class="op" id="7873208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873211">if</span>&nbsp;<span class="ident" id="7873214"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span>&nbsp;<span class="op" id="7873218">!=</span>&nbsp;<span class="builtintype" id="7873221">nil</span>&nbsp;<span class="op" id="7873225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873229"><a href="/gostd/log/syslog/syslog_test.go.html#7872978">t</a></span><span class="op" id="7873230">.</span><span class="ident" id="7873231"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7873237">(</span><span class="string" id="7873238">&#34;Dial()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7873257">,</span>&nbsp;<span class="ident" id="7873259"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span><span class="op" id="7873262">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873268">msg</span>&nbsp;<span class="op" id="7873272">:=</span>&nbsp;<span class="string" id="7873275">&#34;Moo&nbsp;2&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873284"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span>&nbsp;<span class="op" id="7873288">=</span>&nbsp;<span class="ident" id="7873290"><a href="/gostd/log/syslog/syslog_test.go.html#7873150">s</a></span><span class="op" id="7873291">.</span><span class="ident" id="7873292"><a href="/gostd/log/syslog/syslog.go.html#6030988">Info</a></span><span class="op" id="7873296">(</span><span class="ident" id="7873297"><a href="/gostd/log/syslog/syslog_test.go.html#7873268">msg</a></span><span class="op" id="7873300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873303">if</span>&nbsp;<span class="ident" id="7873306"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span>&nbsp;<span class="op" id="7873310">!=</span>&nbsp;<span class="builtintype" id="7873313">nil</span>&nbsp;<span class="op" id="7873317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873321"><a href="/gostd/log/syslog/syslog_test.go.html#7872978">t</a></span><span class="op" id="7873322">.</span><span class="ident" id="7873323"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7873329">(</span><span class="string" id="7873330">&#34;log&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7873346">,</span>&nbsp;<span class="ident" id="7873348"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span><span class="op" id="7873351">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873357"><a href="/gostd/log/syslog/syslog_test.go.html#7874686">check</a></span><span class="op" id="7873362">(</span><span class="ident" id="7873363"><a href="/gostd/log/syslog/syslog_test.go.html#7872978">t</a></span><span class="op" id="7873364">,</span>&nbsp;<span class="ident" id="7873366"><a href="/gostd/log/syslog/syslog_test.go.html#7873268">msg</a></span><span class="op" id="7873369">,</span>&nbsp;<span class="op" id="7873371">&lt;-</span><span class="ident" id="7873373"><a href="/gostd/log/syslog/syslog_test.go.html#7873010">done</a></span><span class="op" id="7873377">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7873381">//&nbsp;restart&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873404">_</span><span class="op" id="7873405">,</span>&nbsp;<span class="ident" id="7873407">sock2</span><span class="op" id="7873412">,</span>&nbsp;<span class="ident" id="7873414">srvWG2</span>&nbsp;<span class="op" id="7873421">:=</span>&nbsp;<span class="ident" id="7873424"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7873435">(</span><span class="ident" id="7873436"><a href="/gostd/log/syslog/syslog_test.go.html#7872995">net</a></span><span class="op" id="7873439">,</span>&nbsp;<span class="ident" id="7873441"><a href="/gostd/log/syslog/syslog_test.go.html#7873037">addr</a></span><span class="op" id="7873445">,</span>&nbsp;<span class="ident" id="7873447"><a href="/gostd/log/syslog/syslog_test.go.html#7873010">done</a></span><span class="op" id="7873451">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873454">defer</span>&nbsp;<span class="ident" id="7873460"><a href="/gostd/log/syslog/syslog_test.go.html#7873414">srvWG2</a></span><span class="op" id="7873466">.</span><span class="ident" id="7873467"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7873471">(</span><span class="op" id="7873472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873475">defer</span>&nbsp;<span class="ident" id="7873481"><a href="/gostd/log/syslog/syslog_test.go.html#7873407">sock2</a></span><span class="op" id="7873486">.</span><span class="ident" id="7873487"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7873492">(</span><span class="op" id="7873493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7873497">//&nbsp;and&nbsp;try&nbsp;retransmitting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873524"><a href="/gostd/log/syslog/syslog_test.go.html#7873268">msg</a></span>&nbsp;<span class="op" id="7873528">=</span>&nbsp;<span class="string" id="7873530">&#34;Moo&nbsp;3&#34;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873539"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span>&nbsp;<span class="op" id="7873543">=</span>&nbsp;<span class="ident" id="7873545"><a href="/gostd/log/syslog/syslog_test.go.html#7873150">s</a></span><span class="op" id="7873546">.</span><span class="ident" id="7873547"><a href="/gostd/log/syslog/syslog.go.html#6030988">Info</a></span><span class="op" id="7873551">(</span><span class="ident" id="7873552"><a href="/gostd/log/syslog/syslog_test.go.html#7873268">msg</a></span><span class="op" id="7873555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873558">if</span>&nbsp;<span class="ident" id="7873561"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span>&nbsp;<span class="op" id="7873565">!=</span>&nbsp;<span class="builtintype" id="7873568">nil</span>&nbsp;<span class="op" id="7873572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873576"><a href="/gostd/log/syslog/syslog_test.go.html#7872978">t</a></span><span class="op" id="7873577">.</span><span class="ident" id="7873578"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7873584">(</span><span class="string" id="7873585">&#34;log&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7873601">,</span>&nbsp;<span class="ident" id="7873603"><a href="/gostd/log/syslog/syslog_test.go.html#7873153">err</a></span><span class="op" id="7873606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873612"><a href="/gostd/log/syslog/syslog_test.go.html#7874686">check</a></span><span class="op" id="7873617">(</span><span class="ident" id="7873618"><a href="/gostd/log/syslog/syslog_test.go.html#7872978">t</a></span><span class="op" id="7873619">,</span>&nbsp;<span class="ident" id="7873621"><a href="/gostd/log/syslog/syslog_test.go.html#7873268">msg</a></span><span class="op" id="7873624">,</span>&nbsp;<span class="op" id="7873626">&lt;-</span><span class="ident" id="7873628"><a href="/gostd/log/syslog/syslog_test.go.html#7873010">done</a></span><span class="op" id="7873632">)</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873636"><a href="/gostd/log/syslog/syslog_test.go.html#7873150">s</a></span><span class="op" id="7873637">.</span><span class="ident" id="7873638"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7873643">(</span><span class="op" id="7873644">)</span><br>
<span class="lineno"></span><span class="op" id="7873646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7873649">func</span>&nbsp;<span class="ident" id="7873654">TestNew</span><span class="op" id="7873661">(</span><span class="ident" id="7873662">t</span>&nbsp;<span class="op" id="7873664">*</span><span class="ident" id="7873665"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7873672">.</span><span class="ident" id="7873673"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7873674">)</span>&nbsp;<span class="op" id="7873676">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873679">if</span>&nbsp;<span class="ident" id="7873682"><a href="/gostd/log/syslog/syslog.go.html#6027029">LOG_LOCAL7</a></span>&nbsp;<span class="op" id="7873693">!=</span>&nbsp;<span class="num" id="7873696">23</span><span class="op" id="7873698">&lt;&lt;</span><span class="num" id="7873700">3</span>&nbsp;<span class="op" id="7873702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873706"><a href="/gostd/log/syslog/syslog_test.go.html#7873662">t</a></span><span class="op" id="7873707">.</span><span class="ident" id="7873708"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7873714">(</span><span class="string" id="7873715">&#34;LOG_LOCAL7&nbsp;has&nbsp;wrong&nbsp;value&#34;</span><span class="op" id="7873743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873749">if</span>&nbsp;<span class="ident" id="7873752"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7873759">.</span><span class="ident" id="7873760"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7873765">(</span><span class="op" id="7873766">)</span>&nbsp;<span class="op" id="7873768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7873772">//&nbsp;Depends&nbsp;on&nbsp;syslog&nbsp;daemon&nbsp;running,&nbsp;and&nbsp;sometimes&nbsp;it&#39;s&nbsp;not.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873835"><a href="/gostd/log/syslog/syslog_test.go.html#7873662">t</a></span><span class="op" id="7873836">.</span><span class="ident" id="7873837"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7873841">(</span><span class="string" id="7873842">&#34;skipping&nbsp;syslog&nbsp;test&nbsp;during&nbsp;-short&#34;</span><span class="op" id="7873878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873885">s</span><span class="op" id="7873886">,</span>&nbsp;<span class="ident" id="7873888">err</span>&nbsp;<span class="op" id="7873892">:=</span>&nbsp;<span class="ident" id="7873895"><a href="/gostd/log/syslog/syslog.go.html#6027942">New</a></span><span class="op" id="7873898">(</span><span class="ident" id="7873899"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="7873907">|</span><span class="ident" id="7873908"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7873916">,</span>&nbsp;<span class="string" id="7873918">&#34;the_tag&#34;</span><span class="op" id="7873927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7873930">if</span>&nbsp;<span class="ident" id="7873933"><a href="/gostd/log/syslog/syslog_test.go.html#7873888">err</a></span>&nbsp;<span class="op" id="7873937">!=</span>&nbsp;<span class="builtintype" id="7873940">nil</span>&nbsp;<span class="op" id="7873944">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7873948"><a href="/gostd/log/syslog/syslog_test.go.html#7873662">t</a></span><span class="op" id="7873949">.</span><span class="ident" id="7873950"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7873956">(</span><span class="string" id="7873957">&#34;New()&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7873975">,</span>&nbsp;<span class="ident" id="7873977"><a href="/gostd/log/syslog/syslog_test.go.html#7873888">err</a></span><span class="op" id="7873980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7873983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7873986">//&nbsp;Don&#39;t&nbsp;send&nbsp;any&nbsp;messages.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874015"><a href="/gostd/log/syslog/syslog_test.go.html#7873885">s</a></span><span class="op" id="7874016">.</span><span class="ident" id="7874017"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7874022">(</span><span class="op" id="7874023">)</span><br>
<span class="lineno"></span><span class="op" id="7874025">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7874028">func</span>&nbsp;<span class="ident" id="7874033">TestNewLogger</span><span class="op" id="7874046">(</span><span class="ident" id="7874047">t</span>&nbsp;<span class="op" id="7874049">*</span><span class="ident" id="7874050"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7874057">.</span><span class="ident" id="7874058"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7874059">)</span>&nbsp;<span class="op" id="7874061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874064">if</span>&nbsp;<span class="ident" id="7874067"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7874074">.</span><span class="ident" id="7874075"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7874080">(</span><span class="op" id="7874081">)</span>&nbsp;<span class="op" id="7874083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874087"><a href="/gostd/log/syslog/syslog_test.go.html#7874047">t</a></span><span class="op" id="7874088">.</span><span class="ident" id="7874089"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7874093">(</span><span class="string" id="7874094">&#34;skipping&nbsp;syslog&nbsp;test&nbsp;during&nbsp;-short&#34;</span><span class="op" id="7874130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874133">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874136">f</span><span class="op" id="7874137">,</span>&nbsp;<span class="ident" id="7874139">err</span>&nbsp;<span class="op" id="7874143">:=</span>&nbsp;<span class="ident" id="7874146"><a href="/gostd/log/syslog/syslog.go.html#6032983">NewLogger</a></span><span class="op" id="7874155">(</span><span class="ident" id="7874156"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7874164">|</span><span class="ident" id="7874165"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="7874173">,</span>&nbsp;<span class="num" id="7874175">0</span><span class="op" id="7874176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874179">if</span>&nbsp;<span class="ident" id="7874182"><a href="/gostd/log/syslog/syslog_test.go.html#7874136">f</a></span>&nbsp;<span class="op" id="7874184">==</span>&nbsp;<span class="builtintype" id="7874187">nil</span>&nbsp;<span class="op" id="7874191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874195"><a href="/gostd/log/syslog/syslog_test.go.html#7874047">t</a></span><span class="op" id="7874196">.</span><span class="ident" id="7874197"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7874202">(</span><span class="ident" id="7874203"><a href="/gostd/log/syslog/syslog_test.go.html#7874139">err</a></span><span class="op" id="7874206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874209">}</span><br>
<span class="lineno"></span><span class="op" id="7874211">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7874214">func</span>&nbsp;<span class="ident" id="7874219">TestDial</span><span class="op" id="7874227">(</span><span class="ident" id="7874228">t</span>&nbsp;<span class="op" id="7874230">*</span><span class="ident" id="7874231"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7874238">.</span><span class="ident" id="7874239"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7874240">)</span>&nbsp;<span class="op" id="7874242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874245">if</span>&nbsp;<span class="ident" id="7874248"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7874255">.</span><span class="ident" id="7874256"><a href="/gostd/testing/testing.go.html#5475359">Short</a></span><span class="op" id="7874261">(</span><span class="op" id="7874262">)</span>&nbsp;<span class="op" id="7874264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874268"><a href="/gostd/log/syslog/syslog_test.go.html#7874228">t</a></span><span class="op" id="7874269">.</span><span class="ident" id="7874270"><a href="/gostd/testing/testing.go.html#5480575">Skip</a></span><span class="op" id="7874274">(</span><span class="string" id="7874275">&#34;skipping&nbsp;syslog&nbsp;test&nbsp;during&nbsp;-short&#34;</span><span class="op" id="7874311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874314">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874317">f</span><span class="op" id="7874318">,</span>&nbsp;<span class="ident" id="7874320">err</span>&nbsp;<span class="op" id="7874324">:=</span>&nbsp;<span class="ident" id="7874327"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7874331">(</span><span class="string" id="7874332">&#34;&#34;</span><span class="op" id="7874334">,</span>&nbsp;<span class="string" id="7874336">&#34;&#34;</span><span class="op" id="7874338">,</span>&nbsp;<span class="op" id="7874340">(</span><span class="ident" id="7874341"><a href="/gostd/log/syslog/syslog.go.html#6027029">LOG_LOCAL7</a></span><span class="op" id="7874351">|</span><span class="ident" id="7874352"><a href="/gostd/log/syslog/syslog.go.html#6026611">LOG_DEBUG</a></span><span class="op" id="7874361">)</span><span class="op" id="7874362">+</span><span class="num" id="7874363">1</span><span class="op" id="7874364">,</span>&nbsp;<span class="string" id="7874366">&#34;syslog_test&#34;</span><span class="op" id="7874379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874382">if</span>&nbsp;<span class="ident" id="7874385"><a href="/gostd/log/syslog/syslog_test.go.html#7874317">f</a></span>&nbsp;<span class="op" id="7874387">!=</span>&nbsp;<span class="builtintype" id="7874390">nil</span>&nbsp;<span class="op" id="7874394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874398"><a href="/gostd/log/syslog/syslog_test.go.html#7874228">t</a></span><span class="op" id="7874399">.</span><span class="ident" id="7874400"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7874406">(</span><span class="string" id="7874407">&#34;Should&nbsp;have&nbsp;trapped&nbsp;bad&nbsp;priority&#34;</span><span class="op" id="7874441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874447"><a href="/gostd/log/syslog/syslog_test.go.html#7874317">f</a></span><span class="op" id="7874448">,</span>&nbsp;<span class="ident" id="7874450"><a href="/gostd/log/syslog/syslog_test.go.html#7874320">err</a></span>&nbsp;<span class="op" id="7874454">=</span>&nbsp;<span class="ident" id="7874456"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7874460">(</span><span class="string" id="7874461">&#34;&#34;</span><span class="op" id="7874463">,</span>&nbsp;<span class="string" id="7874465">&#34;&#34;</span><span class="op" id="7874467">,</span>&nbsp;<span class="op" id="7874469">-</span><span class="num" id="7874470">1</span><span class="op" id="7874471">,</span>&nbsp;<span class="string" id="7874473">&#34;syslog_test&#34;</span><span class="op" id="7874486">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874489">if</span>&nbsp;<span class="ident" id="7874492"><a href="/gostd/log/syslog/syslog_test.go.html#7874317">f</a></span>&nbsp;<span class="op" id="7874494">!=</span>&nbsp;<span class="builtintype" id="7874497">nil</span>&nbsp;<span class="op" id="7874501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874505"><a href="/gostd/log/syslog/syslog_test.go.html#7874228">t</a></span><span class="op" id="7874506">.</span><span class="ident" id="7874507"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7874513">(</span><span class="string" id="7874514">&#34;Should&nbsp;have&nbsp;trapped&nbsp;bad&nbsp;priority&#34;</span><span class="op" id="7874548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874554">l</span><span class="op" id="7874555">,</span>&nbsp;<span class="ident" id="7874557"><a href="/gostd/log/syslog/syslog_test.go.html#7874320">err</a></span>&nbsp;<span class="op" id="7874561">:=</span>&nbsp;<span class="ident" id="7874564"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7874568">(</span><span class="string" id="7874569">&#34;&#34;</span><span class="op" id="7874571">,</span>&nbsp;<span class="string" id="7874573">&#34;&#34;</span><span class="op" id="7874575">,</span>&nbsp;<span class="ident" id="7874577"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7874585">|</span><span class="ident" id="7874586"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7874593">,</span>&nbsp;<span class="string" id="7874595">&#34;syslog_test&#34;</span><span class="op" id="7874608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874611">if</span>&nbsp;<span class="ident" id="7874614"><a href="/gostd/log/syslog/syslog_test.go.html#7874320">err</a></span>&nbsp;<span class="op" id="7874618">!=</span>&nbsp;<span class="builtintype" id="7874621">nil</span>&nbsp;<span class="op" id="7874625">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874629"><a href="/gostd/log/syslog/syslog_test.go.html#7874228">t</a></span><span class="op" id="7874630">.</span><span class="ident" id="7874631"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7874637">(</span><span class="string" id="7874638">&#34;Dial()&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7874657">,</span>&nbsp;<span class="ident" id="7874659"><a href="/gostd/log/syslog/syslog_test.go.html#7874320">err</a></span><span class="op" id="7874662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874668"><a href="/gostd/log/syslog/syslog_test.go.html#7874554">l</a></span><span class="op" id="7874669">.</span><span class="ident" id="7874670"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7874675">(</span><span class="op" id="7874676">)</span><br>
<span class="lineno"></span><span class="op" id="7874678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7874681">func</span>&nbsp;<span class="ident" id="7874686">check</span><span class="op" id="7874691">(</span><span class="ident" id="7874692">t</span>&nbsp;<span class="op" id="7874694">*</span><span class="ident" id="7874695"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7874702">.</span><span class="ident" id="7874703"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7874704">,</span>&nbsp;<span class="ident" id="7874706">in</span><span class="op" id="7874708">,</span>&nbsp;<span class="ident" id="7874710">out</span>&nbsp;<span class="builtintype" id="7874714">string</span><span class="op" id="7874720">)</span>&nbsp;<span class="op" id="7874722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874725">tmpl</span>&nbsp;<span class="op" id="7874730">:=</span>&nbsp;<span class="ident" id="7874733"><a href="/gostd/log/syslog/syslog_test.go.html#7870430">fmt</a></span><span class="op" id="7874736">.</span><span class="ident" id="7874737"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7874744">(</span><span class="string" id="7874745">&#34;&lt;%d&gt;%%s&nbsp;%%s&nbsp;syslog_test[%%d]:&nbsp;%s\n&#34;</span><span class="op" id="7874781">,</span>&nbsp;<span class="ident" id="7874783"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7874791">+</span><span class="ident" id="7874792"><a href="/gostd/log/syslog/syslog.go.html#6026601">LOG_INFO</a></span><span class="op" id="7874800">,</span>&nbsp;<span class="ident" id="7874802"><a href="/gostd/log/syslog/syslog_test.go.html#7874706">in</a></span><span class="op" id="7874804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874807">if</span>&nbsp;<span class="ident" id="7874810">hostname</span><span class="op" id="7874818">,</span>&nbsp;<span class="ident" id="7874820">err</span>&nbsp;<span class="op" id="7874824">:=</span>&nbsp;<span class="ident" id="7874827"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7874829">.</span><span class="ident" id="7874830"><a href="/gostd/os/doc.go.html#2425570">Hostname</a></span><span class="op" id="7874838">(</span><span class="op" id="7874839">)</span><span class="op" id="7874840">;</span>&nbsp;<span class="ident" id="7874842"><a href="/gostd/log/syslog/syslog_test.go.html#7874820">err</a></span>&nbsp;<span class="op" id="7874846">!=</span>&nbsp;<span class="builtintype" id="7874849">nil</span>&nbsp;<span class="op" id="7874853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7874857"><a href="/gostd/log/syslog/syslog_test.go.html#7874692">t</a></span><span class="op" id="7874858">.</span><span class="ident" id="7874859"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7874864">(</span><span class="string" id="7874865">&#34;Error&nbsp;retrieving&nbsp;hostname&#34;</span><span class="op" id="7874892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7874895">}</span>&nbsp;<span class="keyword" id="7874897">else</span>&nbsp;<span class="op" id="7874902">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874906">var</span>&nbsp;<span class="ident" id="7874910">parsedHostname</span><span class="op" id="7874924">,</span>&nbsp;<span class="ident" id="7874926">timestamp</span>&nbsp;<span class="builtintype" id="7874936">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874945">var</span>&nbsp;<span class="ident" id="7874949">pid</span>&nbsp;<span class="builtintype" id="7874953">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7874959">if</span>&nbsp;<span class="ident" id="7874962">n</span><span class="op" id="7874963">,</span>&nbsp;<span class="ident" id="7874965">err</span>&nbsp;<span class="op" id="7874969">:=</span>&nbsp;<span class="ident" id="7874972"><a href="/gostd/log/syslog/syslog_test.go.html#7870430">fmt</a></span><span class="op" id="7874975">.</span><span class="ident" id="7874976"><a href="/gostd/fmt/scan.go.html#2173087">Sscanf</a></span><span class="op" id="7874982">(</span><span class="ident" id="7874983"><a href="/gostd/log/syslog/syslog_test.go.html#7874710">out</a></span><span class="op" id="7874986">,</span>&nbsp;<span class="ident" id="7874988"><a href="/gostd/log/syslog/syslog_test.go.html#7874725">tmpl</a></span><span class="op" id="7874992">,</span>&nbsp;<span class="op" id="7874994">&amp;</span><span class="ident" id="7874995"><a href="/gostd/log/syslog/syslog_test.go.html#7874926">timestamp</a></span><span class="op" id="7875004">,</span>&nbsp;<span class="op" id="7875006">&amp;</span><span class="ident" id="7875007"><a href="/gostd/log/syslog/syslog_test.go.html#7874910">parsedHostname</a></span><span class="op" id="7875021">,</span>&nbsp;<span class="op" id="7875023">&amp;</span><span class="ident" id="7875024"><a href="/gostd/log/syslog/syslog_test.go.html#7874949">pid</a></span><span class="op" id="7875027">)</span><span class="op" id="7875028">;</span>&nbsp;<span class="ident" id="7875030"><a href="/gostd/log/syslog/syslog_test.go.html#7874962">n</a></span>&nbsp;<span class="op" id="7875032">!=</span>&nbsp;<span class="num" id="7875035">3</span>&nbsp;<span class="op" id="7875037">||</span>&nbsp;<span class="ident" id="7875040"><a href="/gostd/log/syslog/syslog_test.go.html#7874965">err</a></span>&nbsp;<span class="op" id="7875044">!=</span>&nbsp;<span class="builtintype" id="7875047">nil</span>&nbsp;<span class="op" id="7875051">||</span>&nbsp;<span class="ident" id="7875054"><a href="/gostd/log/syslog/syslog_test.go.html#7874810">hostname</a></span>&nbsp;<span class="op" id="7875063">!=</span>&nbsp;<span class="ident" id="7875066"><a href="/gostd/log/syslog/syslog_test.go.html#7874910">parsedHostname</a></span>&nbsp;<span class="op" id="7875081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875086"><a href="/gostd/log/syslog/syslog_test.go.html#7874692">t</a></span><span class="op" id="7875087">.</span><span class="ident" id="7875088"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7875094">(</span><span class="string" id="7875095">&#34;Got&nbsp;%q,&nbsp;does&nbsp;not&nbsp;match&nbsp;template&nbsp;%q&nbsp;(%d&nbsp;%s)&#34;</span><span class="op" id="7875139">,</span>&nbsp;<span class="ident" id="7875141"><a href="/gostd/log/syslog/syslog_test.go.html#7874710">out</a></span><span class="op" id="7875144">,</span>&nbsp;<span class="ident" id="7875146"><a href="/gostd/log/syslog/syslog_test.go.html#7874725">tmpl</a></span><span class="op" id="7875150">,</span>&nbsp;<span class="ident" id="7875152"><a href="/gostd/log/syslog/syslog_test.go.html#7874962">n</a></span><span class="op" id="7875153">,</span>&nbsp;<span class="ident" id="7875155"><a href="/gostd/log/syslog/syslog_test.go.html#7874965">err</a></span><span class="op" id="7875158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875162">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875165">}</span><br>
<span class="lineno"></span><span class="op" id="7875167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7875170">func</span>&nbsp;<span class="ident" id="7875175">TestWrite</span><span class="op" id="7875184">(</span><span class="ident" id="7875185">t</span>&nbsp;<span class="op" id="7875187">*</span><span class="ident" id="7875188"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7875195">.</span><span class="ident" id="7875196"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7875197">)</span>&nbsp;<span class="op" id="7875199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875202">tests</span>&nbsp;<span class="op" id="7875208">:=</span>&nbsp;<span class="op" id="7875211">[</span><span class="op" id="7875212">]</span><span class="keyword" id="7875213">struct</span>&nbsp;<span class="op" id="7875220">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875224">pri</span>&nbsp;<span class="ident" id="7875228"><a href="/gostd/log/syslog/syslog.go.html#6026344">Priority</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875239">pre</span>&nbsp;<span class="builtintype" id="7875243">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875252">msg</span>&nbsp;<span class="builtintype" id="7875256">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875265">exp</span>&nbsp;<span class="builtintype" id="7875269">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875277">}</span><span class="op" id="7875278">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875282">{</span><span class="ident" id="7875283"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span>&nbsp;<span class="op" id="7875292">|</span>&nbsp;<span class="ident" id="7875294"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7875301">,</span>&nbsp;<span class="string" id="7875303">&#34;syslog_test&#34;</span><span class="op" id="7875316">,</span>&nbsp;<span class="string" id="7875318">&#34;&#34;</span><span class="op" id="7875320">,</span>&nbsp;<span class="string" id="7875322">&#34;%s&nbsp;%s&nbsp;syslog_test[%d]:&nbsp;\n&#34;</span><span class="op" id="7875349">}</span><span class="op" id="7875350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875354">{</span><span class="ident" id="7875355"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span>&nbsp;<span class="op" id="7875364">|</span>&nbsp;<span class="ident" id="7875366"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7875373">,</span>&nbsp;<span class="string" id="7875375">&#34;syslog_test&#34;</span><span class="op" id="7875388">,</span>&nbsp;<span class="string" id="7875390">&#34;write&nbsp;test&#34;</span><span class="op" id="7875402">,</span>&nbsp;<span class="string" id="7875404">&#34;%s&nbsp;%s&nbsp;syslog_test[%d]:&nbsp;write&nbsp;test\n&#34;</span><span class="op" id="7875441">}</span><span class="op" id="7875442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7875446">//&nbsp;Write&nbsp;should&nbsp;not&nbsp;add&nbsp;\n&nbsp;if&nbsp;there&nbsp;already&nbsp;is&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875499">{</span><span class="ident" id="7875500"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span>&nbsp;<span class="op" id="7875509">|</span>&nbsp;<span class="ident" id="7875511"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7875518">,</span>&nbsp;<span class="string" id="7875520">&#34;syslog_test&#34;</span><span class="op" id="7875533">,</span>&nbsp;<span class="string" id="7875535">&#34;write&nbsp;test&nbsp;2\n&#34;</span><span class="op" id="7875551">,</span>&nbsp;<span class="string" id="7875553">&#34;%s&nbsp;%s&nbsp;syslog_test[%d]:&nbsp;write&nbsp;test&nbsp;2\n&#34;</span><span class="op" id="7875592">}</span><span class="op" id="7875593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875596">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875600">if</span>&nbsp;<span class="ident" id="7875603">hostname</span><span class="op" id="7875611">,</span>&nbsp;<span class="ident" id="7875613">err</span>&nbsp;<span class="op" id="7875617">:=</span>&nbsp;<span class="ident" id="7875620"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7875622">.</span><span class="ident" id="7875623"><a href="/gostd/os/doc.go.html#2425570">Hostname</a></span><span class="op" id="7875631">(</span><span class="op" id="7875632">)</span><span class="op" id="7875633">;</span>&nbsp;<span class="ident" id="7875635"><a href="/gostd/log/syslog/syslog_test.go.html#7875613">err</a></span>&nbsp;<span class="op" id="7875639">!=</span>&nbsp;<span class="builtintype" id="7875642">nil</span>&nbsp;<span class="op" id="7875646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875650"><a href="/gostd/log/syslog/syslog_test.go.html#7875185">t</a></span><span class="op" id="7875651">.</span><span class="ident" id="7875652"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7875658">(</span><span class="string" id="7875659">&#34;Error&nbsp;retrieving&nbsp;hostname&#34;</span><span class="op" id="7875686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875689">}</span>&nbsp;<span class="keyword" id="7875691">else</span>&nbsp;<span class="op" id="7875696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875700">for</span>&nbsp;<span class="ident" id="7875704">_</span><span class="op" id="7875705">,</span>&nbsp;<span class="ident" id="7875707">test</span>&nbsp;<span class="op" id="7875712">:=</span>&nbsp;<span class="keyword" id="7875715">range</span>&nbsp;<span class="ident" id="7875721"><a href="/gostd/log/syslog/syslog_test.go.html#7875202">tests</a></span>&nbsp;<span class="op" id="7875727">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875732">done</span>&nbsp;<span class="op" id="7875737">:=</span>&nbsp;<span class="builtinfunc" id="7875740">make</span><span class="op" id="7875744">(</span><span class="keyword" id="7875745">chan</span>&nbsp;<span class="builtintype" id="7875750">string</span><span class="op" id="7875756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875761">addr</span><span class="op" id="7875765">,</span>&nbsp;<span class="ident" id="7875767">sock</span><span class="op" id="7875771">,</span>&nbsp;<span class="ident" id="7875773">srvWG</span>&nbsp;<span class="op" id="7875779">:=</span>&nbsp;<span class="ident" id="7875782"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7875793">(</span><span class="string" id="7875794">&#34;udp&#34;</span><span class="op" id="7875799">,</span>&nbsp;<span class="string" id="7875801">&#34;&#34;</span><span class="op" id="7875803">,</span>&nbsp;<span class="ident" id="7875805"><a href="/gostd/log/syslog/syslog_test.go.html#7875732">done</a></span><span class="op" id="7875809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875814">defer</span>&nbsp;<span class="ident" id="7875820"><a href="/gostd/log/syslog/syslog_test.go.html#7875773">srvWG</a></span><span class="op" id="7875825">.</span><span class="ident" id="7875826"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7875830">(</span><span class="op" id="7875831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875836">defer</span>&nbsp;<span class="ident" id="7875842"><a href="/gostd/log/syslog/syslog_test.go.html#7875767">sock</a></span><span class="op" id="7875846">.</span><span class="ident" id="7875847"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7875852">(</span><span class="op" id="7875853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875858">l</span><span class="op" id="7875859">,</span>&nbsp;<span class="ident" id="7875861">err</span>&nbsp;<span class="op" id="7875865">:=</span>&nbsp;<span class="ident" id="7875868"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7875872">(</span><span class="string" id="7875873">&#34;udp&#34;</span><span class="op" id="7875878">,</span>&nbsp;<span class="ident" id="7875880"><a href="/gostd/log/syslog/syslog_test.go.html#7875761">addr</a></span><span class="op" id="7875884">,</span>&nbsp;<span class="ident" id="7875886"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7875890">.</span><span class="ident" id="7875891"><a href="/gostd/log/syslog/syslog_test.go.html#7875224">pri</a></span><span class="op" id="7875894">,</span>&nbsp;<span class="ident" id="7875896"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7875900">.</span><span class="ident" id="7875901"><a href="/gostd/log/syslog/syslog_test.go.html#7875239">pre</a></span><span class="op" id="7875904">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875909">if</span>&nbsp;<span class="ident" id="7875912"><a href="/gostd/log/syslog/syslog_test.go.html#7875861">err</a></span>&nbsp;<span class="op" id="7875916">!=</span>&nbsp;<span class="builtintype" id="7875919">nil</span>&nbsp;<span class="op" id="7875923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875929"><a href="/gostd/log/syslog/syslog_test.go.html#7875185">t</a></span><span class="op" id="7875930">.</span><span class="ident" id="7875931"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7875937">(</span><span class="string" id="7875938">&#34;syslog.Dial()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7875964">,</span>&nbsp;<span class="ident" id="7875966"><a href="/gostd/log/syslog/syslog_test.go.html#7875861">err</a></span><span class="op" id="7875969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7875974">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7875979">defer</span>&nbsp;<span class="ident" id="7875985"><a href="/gostd/log/syslog/syslog_test.go.html#7875858">l</a></span><span class="op" id="7875986">.</span><span class="ident" id="7875987"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7875992">(</span><span class="op" id="7875993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7875998">_</span><span class="op" id="7875999">,</span>&nbsp;<span class="ident" id="7876001"><a href="/gostd/log/syslog/syslog_test.go.html#7875861">err</a></span>&nbsp;<span class="op" id="7876005">=</span>&nbsp;<span class="ident" id="7876007"><a href="/gostd/log/syslog/syslog_test.go.html#7870437">io</a></span><span class="op" id="7876009">.</span><span class="ident" id="7876010"><a href="/gostd/io/io.go.html#1428475">WriteString</a></span><span class="op" id="7876021">(</span><span class="ident" id="7876022"><a href="/gostd/log/syslog/syslog_test.go.html#7875858">l</a></span><span class="op" id="7876023">,</span>&nbsp;<span class="ident" id="7876025"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876029">.</span><span class="ident" id="7876030"><a href="/gostd/log/syslog/syslog_test.go.html#7875252">msg</a></span><span class="op" id="7876033">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876038">if</span>&nbsp;<span class="ident" id="7876041"><a href="/gostd/log/syslog/syslog_test.go.html#7875861">err</a></span>&nbsp;<span class="op" id="7876045">!=</span>&nbsp;<span class="builtintype" id="7876048">nil</span>&nbsp;<span class="op" id="7876052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876058"><a href="/gostd/log/syslog/syslog_test.go.html#7875185">t</a></span><span class="op" id="7876059">.</span><span class="ident" id="7876060"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7876066">(</span><span class="string" id="7876067">&#34;WriteString()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7876093">,</span>&nbsp;<span class="ident" id="7876095"><a href="/gostd/log/syslog/syslog_test.go.html#7875861">err</a></span><span class="op" id="7876098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876108">rcvd</span>&nbsp;<span class="op" id="7876113">:=</span>&nbsp;<span class="op" id="7876116">&lt;-</span><span class="ident" id="7876118"><a href="/gostd/log/syslog/syslog_test.go.html#7875732">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876126"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876130">.</span><span class="ident" id="7876131"><a href="/gostd/log/syslog/syslog_test.go.html#7875265">exp</a></span>&nbsp;<span class="op" id="7876135">=</span>&nbsp;<span class="ident" id="7876137"><a href="/gostd/log/syslog/syslog_test.go.html#7870430">fmt</a></span><span class="op" id="7876140">.</span><span class="ident" id="7876141"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="7876148">(</span><span class="string" id="7876149">&#34;&lt;%d&gt;&#34;</span><span class="op" id="7876155">,</span>&nbsp;<span class="ident" id="7876157"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876161">.</span><span class="ident" id="7876162"><a href="/gostd/log/syslog/syslog_test.go.html#7875224">pri</a></span><span class="op" id="7876165">)</span>&nbsp;<span class="op" id="7876167">+</span>&nbsp;<span class="ident" id="7876169"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876173">.</span><span class="ident" id="7876174"><a href="/gostd/log/syslog/syslog_test.go.html#7875265">exp</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876181">var</span>&nbsp;<span class="ident" id="7876185">parsedHostname</span><span class="op" id="7876199">,</span>&nbsp;<span class="ident" id="7876201">timestamp</span>&nbsp;<span class="builtintype" id="7876211">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876221">var</span>&nbsp;<span class="ident" id="7876225">pid</span>&nbsp;<span class="builtintype" id="7876229">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876236">if</span>&nbsp;<span class="ident" id="7876239">n</span><span class="op" id="7876240">,</span>&nbsp;<span class="ident" id="7876242">err</span>&nbsp;<span class="op" id="7876246">:=</span>&nbsp;<span class="ident" id="7876249"><a href="/gostd/log/syslog/syslog_test.go.html#7870430">fmt</a></span><span class="op" id="7876252">.</span><span class="ident" id="7876253"><a href="/gostd/fmt/scan.go.html#2173087">Sscanf</a></span><span class="op" id="7876259">(</span><span class="ident" id="7876260"><a href="/gostd/log/syslog/syslog_test.go.html#7876108">rcvd</a></span><span class="op" id="7876264">,</span>&nbsp;<span class="ident" id="7876266"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876270">.</span><span class="ident" id="7876271"><a href="/gostd/log/syslog/syslog_test.go.html#7875265">exp</a></span><span class="op" id="7876274">,</span>&nbsp;<span class="op" id="7876276">&amp;</span><span class="ident" id="7876277"><a href="/gostd/log/syslog/syslog_test.go.html#7876201">timestamp</a></span><span class="op" id="7876286">,</span>&nbsp;<span class="op" id="7876288">&amp;</span><span class="ident" id="7876289"><a href="/gostd/log/syslog/syslog_test.go.html#7876185">parsedHostname</a></span><span class="op" id="7876303">,</span>&nbsp;<span class="op" id="7876305">&amp;</span><span class="ident" id="7876306"><a href="/gostd/log/syslog/syslog_test.go.html#7876225">pid</a></span><span class="op" id="7876309">)</span><span class="op" id="7876310">;</span>&nbsp;<span class="ident" id="7876312"><a href="/gostd/log/syslog/syslog_test.go.html#7876239">n</a></span>&nbsp;<span class="op" id="7876314">!=</span>&nbsp;<span class="num" id="7876317">3</span>&nbsp;<span class="op" id="7876319">||</span>&nbsp;<span class="ident" id="7876322"><a href="/gostd/log/syslog/syslog_test.go.html#7876242">err</a></span>&nbsp;<span class="op" id="7876326">!=</span>&nbsp;<span class="builtintype" id="7876329">nil</span>&nbsp;<span class="op" id="7876333">||</span>&nbsp;<span class="ident" id="7876336"><a href="/gostd/log/syslog/syslog_test.go.html#7875603">hostname</a></span>&nbsp;<span class="op" id="7876345">!=</span>&nbsp;<span class="ident" id="7876348"><a href="/gostd/log/syslog/syslog_test.go.html#7876185">parsedHostname</a></span>&nbsp;<span class="op" id="7876363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876369"><a href="/gostd/log/syslog/syslog_test.go.html#7875185">t</a></span><span class="op" id="7876370">.</span><span class="ident" id="7876371"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7876377">(</span><span class="string" id="7876378">&#34;s.Info()&nbsp;=&nbsp;&#39;%q&#39;,&nbsp;didn&#39;t&nbsp;match&nbsp;&#39;%q&#39;&nbsp;(%d&nbsp;%s)&#34;</span><span class="op" id="7876422">,</span>&nbsp;<span class="ident" id="7876424"><a href="/gostd/log/syslog/syslog_test.go.html#7876108">rcvd</a></span><span class="op" id="7876428">,</span>&nbsp;<span class="ident" id="7876430"><a href="/gostd/log/syslog/syslog_test.go.html#7875707">test</a></span><span class="op" id="7876434">.</span><span class="ident" id="7876435"><a href="/gostd/log/syslog/syslog_test.go.html#7875265">exp</a></span><span class="op" id="7876438">,</span>&nbsp;<span class="ident" id="7876440"><a href="/gostd/log/syslog/syslog_test.go.html#7876239">n</a></span><span class="op" id="7876441">,</span>&nbsp;<span class="ident" id="7876443"><a href="/gostd/log/syslog/syslog_test.go.html#7876242">err</a></span><span class="op" id="7876446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876451">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876458">}</span><br>
<span class="lineno"></span><span class="op" id="7876460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7876463">func</span>&nbsp;<span class="ident" id="7876468">TestConcurrentWrite</span><span class="op" id="7876487">(</span><span class="ident" id="7876488">t</span>&nbsp;<span class="op" id="7876490">*</span><span class="ident" id="7876491"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7876498">.</span><span class="ident" id="7876499"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7876500">)</span>&nbsp;<span class="op" id="7876502">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876505">addr</span><span class="op" id="7876509">,</span>&nbsp;<span class="ident" id="7876511">sock</span><span class="op" id="7876515">,</span>&nbsp;<span class="ident" id="7876517">srvWG</span>&nbsp;<span class="op" id="7876523">:=</span>&nbsp;<span class="ident" id="7876526"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7876537">(</span><span class="string" id="7876538">&#34;udp&#34;</span><span class="op" id="7876543">,</span>&nbsp;<span class="string" id="7876545">&#34;&#34;</span><span class="op" id="7876547">,</span>&nbsp;<span class="builtinfunc" id="7876549">make</span><span class="op" id="7876553">(</span><span class="keyword" id="7876554">chan</span>&nbsp;<span class="builtintype" id="7876559">string</span><span class="op" id="7876565">,</span>&nbsp;<span class="num" id="7876567">1</span><span class="op" id="7876568">)</span><span class="op" id="7876569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876572">defer</span>&nbsp;<span class="ident" id="7876578"><a href="/gostd/log/syslog/syslog_test.go.html#7876517">srvWG</a></span><span class="op" id="7876583">.</span><span class="ident" id="7876584"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7876588">(</span><span class="op" id="7876589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876592">defer</span>&nbsp;<span class="ident" id="7876598"><a href="/gostd/log/syslog/syslog_test.go.html#7876511">sock</a></span><span class="op" id="7876602">.</span><span class="ident" id="7876603"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7876608">(</span><span class="op" id="7876609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876612">w</span><span class="op" id="7876613">,</span>&nbsp;<span class="ident" id="7876615">err</span>&nbsp;<span class="op" id="7876619">:=</span>&nbsp;<span class="ident" id="7876622"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7876626">(</span><span class="string" id="7876627">&#34;udp&#34;</span><span class="op" id="7876632">,</span>&nbsp;<span class="ident" id="7876634"><a href="/gostd/log/syslog/syslog_test.go.html#7876505">addr</a></span><span class="op" id="7876638">,</span>&nbsp;<span class="ident" id="7876640"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7876648">|</span><span class="ident" id="7876649"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7876656">,</span>&nbsp;<span class="string" id="7876658">&#34;how&#39;s&nbsp;it&nbsp;going?&#34;</span><span class="op" id="7876675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876678">if</span>&nbsp;<span class="ident" id="7876681"><a href="/gostd/log/syslog/syslog_test.go.html#7876615">err</a></span>&nbsp;<span class="op" id="7876685">!=</span>&nbsp;<span class="builtintype" id="7876688">nil</span>&nbsp;<span class="op" id="7876692">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876696"><a href="/gostd/log/syslog/syslog_test.go.html#7876488">t</a></span><span class="op" id="7876697">.</span><span class="ident" id="7876698"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7876704">(</span><span class="string" id="7876705">&#34;syslog.Dial()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7876731">,</span>&nbsp;<span class="ident" id="7876733"><a href="/gostd/log/syslog/syslog_test.go.html#7876615">err</a></span><span class="op" id="7876736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876742">var</span>&nbsp;<span class="ident" id="7876746">wg</span>&nbsp;<span class="ident" id="7876749"><a href="/gostd/log/syslog/syslog_test.go.html#7870476">sync</a></span><span class="op" id="7876753">.</span><span class="ident" id="7876754"><a href="/gostd/sync/waitgroup.go.html#1459933">WaitGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876765">for</span>&nbsp;<span class="ident" id="7876769">i</span>&nbsp;<span class="op" id="7876771">:=</span>&nbsp;<span class="num" id="7876774">0</span><span class="op" id="7876775">;</span>&nbsp;<span class="ident" id="7876777"><a href="/gostd/log/syslog/syslog_test.go.html#7876769">i</a></span>&nbsp;<span class="op" id="7876779">&lt;</span>&nbsp;<span class="num" id="7876781">10</span><span class="op" id="7876783">;</span>&nbsp;<span class="ident" id="7876785"><a href="/gostd/log/syslog/syslog_test.go.html#7876769">i</a></span><span class="op" id="7876786">++</span>&nbsp;<span class="op" id="7876789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876793"><a href="/gostd/log/syslog/syslog_test.go.html#7876746">wg</a></span><span class="op" id="7876795">.</span><span class="ident" id="7876796"><a href="/gostd/sync/waitgroup.go.html#1461154">Add</a></span><span class="op" id="7876799">(</span><span class="num" id="7876800">1</span><span class="op" id="7876801">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876805">go</span>&nbsp;<span class="keyword" id="7876808">func</span><span class="op" id="7876812">(</span><span class="op" id="7876813">)</span>&nbsp;<span class="op" id="7876815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876820">defer</span>&nbsp;<span class="ident" id="7876826"><a href="/gostd/log/syslog/syslog_test.go.html#7876746">wg</a></span><span class="op" id="7876828">.</span><span class="ident" id="7876829"><a href="/gostd/sync/waitgroup.go.html#1462065">Done</a></span><span class="op" id="7876833">(</span><span class="op" id="7876834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876839">err</span>&nbsp;<span class="op" id="7876843">:=</span>&nbsp;<span class="ident" id="7876846"><a href="/gostd/log/syslog/syslog_test.go.html#7876612">w</a></span><span class="op" id="7876847">.</span><span class="ident" id="7876848"><a href="/gostd/log/syslog/syslog.go.html#6030988">Info</a></span><span class="op" id="7876852">(</span><span class="string" id="7876853">&#34;test&#34;</span><span class="op" id="7876859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876864">if</span>&nbsp;<span class="ident" id="7876867"><a href="/gostd/log/syslog/syslog_test.go.html#7876839">err</a></span>&nbsp;<span class="op" id="7876871">!=</span>&nbsp;<span class="builtintype" id="7876874">nil</span>&nbsp;<span class="op" id="7876878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876884"><a href="/gostd/log/syslog/syslog_test.go.html#7876488">t</a></span><span class="op" id="7876885">.</span><span class="ident" id="7876886"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7876892">(</span><span class="string" id="7876893">&#34;Info()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7876912">,</span>&nbsp;<span class="ident" id="7876914"><a href="/gostd/log/syslog/syslog_test.go.html#7876839">err</a></span><span class="op" id="7876917">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7876923">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876937">}</span><span class="op" id="7876938">(</span><span class="op" id="7876939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7876942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7876945"><a href="/gostd/log/syslog/syslog_test.go.html#7876746">wg</a></span><span class="op" id="7876947">.</span><span class="ident" id="7876948"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7876952">(</span><span class="op" id="7876953">)</span><br>
<span class="lineno">300</span><span class="op" id="7876955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7876958">func</span>&nbsp;<span class="ident" id="7876963">TestConcurrentReconnect</span><span class="op" id="7876986">(</span><span class="ident" id="7876987">t</span>&nbsp;<span class="op" id="7876989">*</span><span class="ident" id="7876990"><a href="/gostd/log/syslog/syslog_test.go.html#7870484">testing</a></span><span class="op" id="7876997">.</span><span class="ident" id="7876998"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="7876999">)</span>&nbsp;<span class="op" id="7877001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877004"><a href="/gostd/log/syslog/syslog_test.go.html#7870940">crashy</a></span>&nbsp;<span class="op" id="7877011">=</span>&nbsp;<span class="builtintype" id="7877013">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877019">defer</span>&nbsp;<span class="keyword" id="7877025">func</span><span class="op" id="7877029">(</span><span class="op" id="7877030">)</span>&nbsp;<span class="op" id="7877032">{</span>&nbsp;<span class="ident" id="7877034"><a href="/gostd/log/syslog/syslog_test.go.html#7870940">crashy</a></span>&nbsp;<span class="op" id="7877041">=</span>&nbsp;<span class="builtintype" id="7877043">false</span>&nbsp;<span class="op" id="7877049">}</span><span class="op" id="7877050">(</span><span class="op" id="7877051">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877055">const</span>&nbsp;<span class="ident" id="7877061">N</span>&nbsp;<span class="op" id="7877063">=</span>&nbsp;<span class="num" id="7877065">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877069">const</span>&nbsp;<span class="ident" id="7877075">M</span>&nbsp;<span class="op" id="7877077">=</span>&nbsp;<span class="num" id="7877079">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877084">net</span>&nbsp;<span class="op" id="7877088">:=</span>&nbsp;<span class="string" id="7877091">&#34;unix&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877099">done</span>&nbsp;<span class="op" id="7877104">:=</span>&nbsp;<span class="builtinfunc" id="7877107">make</span><span class="op" id="7877111">(</span><span class="keyword" id="7877112">chan</span>&nbsp;<span class="builtintype" id="7877117">string</span><span class="op" id="7877123">,</span>&nbsp;<span class="ident" id="7877125"><a href="/gostd/log/syslog/syslog_test.go.html#7877061">N</a></span><span class="op" id="7877126">*</span><span class="ident" id="7877127"><a href="/gostd/log/syslog/syslog_test.go.html#7877075">M</a></span><span class="op" id="7877128">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877131">addr</span><span class="op" id="7877135">,</span>&nbsp;<span class="ident" id="7877137">sock</span><span class="op" id="7877141">,</span>&nbsp;<span class="ident" id="7877143">srvWG</span>&nbsp;<span class="op" id="7877149">:=</span>&nbsp;<span class="ident" id="7877152"><a href="/gostd/log/syslog/syslog_test.go.html#7871429">startServer</a></span><span class="op" id="7877163">(</span><span class="ident" id="7877164"><a href="/gostd/log/syslog/syslog_test.go.html#7877084">net</a></span><span class="op" id="7877167">,</span>&nbsp;<span class="string" id="7877169">&#34;&#34;</span><span class="op" id="7877171">,</span>&nbsp;<span class="ident" id="7877173"><a href="/gostd/log/syslog/syslog_test.go.html#7877099">done</a></span><span class="op" id="7877177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877180">defer</span>&nbsp;<span class="ident" id="7877186"><a href="/gostd/log/syslog/syslog_test.go.html#7870470">os</a></span><span class="op" id="7877188">.</span><span class="ident" id="7877189"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="7877195">(</span><span class="ident" id="7877196"><a href="/gostd/log/syslog/syslog_test.go.html#7877131">addr</a></span><span class="op" id="7877200">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877204">//&nbsp;count&nbsp;all&nbsp;the&nbsp;messages&nbsp;arriving</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877240">count</span>&nbsp;<span class="op" id="7877246">:=</span>&nbsp;<span class="builtinfunc" id="7877249">make</span><span class="op" id="7877253">(</span><span class="keyword" id="7877254">chan</span>&nbsp;<span class="builtintype" id="7877259">int</span><span class="op" id="7877262">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877265">go</span>&nbsp;<span class="keyword" id="7877268">func</span><span class="op" id="7877272">(</span><span class="op" id="7877273">)</span>&nbsp;<span class="op" id="7877275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877279">ct</span>&nbsp;<span class="op" id="7877282">:=</span>&nbsp;<span class="num" id="7877285">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877289">for</span>&nbsp;<span class="keyword" id="7877293">range</span>&nbsp;<span class="ident" id="7877299"><a href="/gostd/log/syslog/syslog_test.go.html#7877099">done</a></span>&nbsp;<span class="op" id="7877304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877309"><a href="/gostd/log/syslog/syslog_test.go.html#7877279">ct</a></span><span class="op" id="7877311">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877317">//&nbsp;we&nbsp;are&nbsp;looking&nbsp;for&nbsp;500&nbsp;out&nbsp;of&nbsp;1000&nbsp;events</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877365">//&nbsp;here&nbsp;because&nbsp;lots&nbsp;of&nbsp;log&nbsp;messages&nbsp;are&nbsp;lost</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7877414">//&nbsp;in&nbsp;buffers&nbsp;(kernel&nbsp;and/or&nbsp;bufio)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877453">if</span>&nbsp;<span class="ident" id="7877456"><a href="/gostd/log/syslog/syslog_test.go.html#7877279">ct</a></span>&nbsp;<span class="op" id="7877459">&gt;</span>&nbsp;<span class="ident" id="7877461"><a href="/gostd/log/syslog/syslog_test.go.html#7877061">N</a></span><span class="op" id="7877462">*</span><span class="ident" id="7877463"><a href="/gostd/log/syslog/syslog_test.go.html#7877075">M</a></span><span class="op" id="7877464">/</span><span class="num" id="7877465">2</span>&nbsp;<span class="op" id="7877467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877473">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877482">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877490"><a href="/gostd/log/syslog/syslog_test.go.html#7877240">count</a></span>&nbsp;<span class="op" id="7877496">&lt;-</span>&nbsp;<span class="ident" id="7877499"><a href="/gostd/log/syslog/syslog_test.go.html#7877279">ct</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877503">}</span><span class="op" id="7877504">(</span><span class="op" id="7877505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877509">var</span>&nbsp;<span class="ident" id="7877513">wg</span>&nbsp;<span class="ident" id="7877516"><a href="/gostd/log/syslog/syslog_test.go.html#7870476">sync</a></span><span class="op" id="7877520">.</span><span class="ident" id="7877521"><a href="/gostd/sync/waitgroup.go.html#1459933">WaitGroup</a></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877532"><a href="/gostd/log/syslog/syslog_test.go.html#7877513">wg</a></span><span class="op" id="7877534">.</span><span class="ident" id="7877535"><a href="/gostd/sync/waitgroup.go.html#1461154">Add</a></span><span class="op" id="7877538">(</span><span class="ident" id="7877539"><a href="/gostd/log/syslog/syslog_test.go.html#7877061">N</a></span><span class="op" id="7877540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877543">for</span>&nbsp;<span class="ident" id="7877547">i</span>&nbsp;<span class="op" id="7877549">:=</span>&nbsp;<span class="num" id="7877552">0</span><span class="op" id="7877553">;</span>&nbsp;<span class="ident" id="7877555"><a href="/gostd/log/syslog/syslog_test.go.html#7877547">i</a></span>&nbsp;<span class="op" id="7877557">&lt;</span>&nbsp;<span class="ident" id="7877559"><a href="/gostd/log/syslog/syslog_test.go.html#7877061">N</a></span><span class="op" id="7877560">;</span>&nbsp;<span class="ident" id="7877562"><a href="/gostd/log/syslog/syslog_test.go.html#7877547">i</a></span><span class="op" id="7877563">++</span>&nbsp;<span class="op" id="7877566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877570">go</span>&nbsp;<span class="keyword" id="7877573">func</span><span class="op" id="7877577">(</span><span class="op" id="7877578">)</span>&nbsp;<span class="op" id="7877580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877585">defer</span>&nbsp;<span class="ident" id="7877591"><a href="/gostd/log/syslog/syslog_test.go.html#7877513">wg</a></span><span class="op" id="7877593">.</span><span class="ident" id="7877594"><a href="/gostd/sync/waitgroup.go.html#1462065">Done</a></span><span class="op" id="7877598">(</span><span class="op" id="7877599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877604">w</span><span class="op" id="7877605">,</span>&nbsp;<span class="ident" id="7877607">err</span>&nbsp;<span class="op" id="7877611">:=</span>&nbsp;<span class="ident" id="7877614"><a href="/gostd/log/syslog/syslog.go.html#6028329">Dial</a></span><span class="op" id="7877618">(</span><span class="ident" id="7877619"><a href="/gostd/log/syslog/syslog_test.go.html#7877084">net</a></span><span class="op" id="7877622">,</span>&nbsp;<span class="ident" id="7877624"><a href="/gostd/log/syslog/syslog_test.go.html#7877131">addr</a></span><span class="op" id="7877628">,</span>&nbsp;<span class="ident" id="7877630"><a href="/gostd/log/syslog/syslog.go.html#6026777">LOG_USER</a></span><span class="op" id="7877638">|</span><span class="ident" id="7877639"><a href="/gostd/log/syslog/syslog.go.html#6026567">LOG_ERR</a></span><span class="op" id="7877646">,</span>&nbsp;<span class="string" id="7877648">&#34;tag&#34;</span><span class="op" id="7877653">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877658">if</span>&nbsp;<span class="ident" id="7877661"><a href="/gostd/log/syslog/syslog_test.go.html#7877607">err</a></span>&nbsp;<span class="op" id="7877665">!=</span>&nbsp;<span class="builtintype" id="7877668">nil</span>&nbsp;<span class="op" id="7877672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877678"><a href="/gostd/log/syslog/syslog_test.go.html#7876987">t</a></span><span class="op" id="7877679">.</span><span class="ident" id="7877680"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="7877686">(</span><span class="string" id="7877687">&#34;syslog.Dial()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7877713">,</span>&nbsp;<span class="ident" id="7877715"><a href="/gostd/log/syslog/syslog_test.go.html#7877607">err</a></span><span class="op" id="7877718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877728">defer</span>&nbsp;<span class="ident" id="7877734"><a href="/gostd/log/syslog/syslog_test.go.html#7877604">w</a></span><span class="op" id="7877735">.</span><span class="ident" id="7877736"><a href="/gostd/log/syslog/syslog.go.html#6029597">Close</a></span><span class="op" id="7877741">(</span><span class="op" id="7877742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877747">for</span>&nbsp;<span class="ident" id="7877751">i</span>&nbsp;<span class="op" id="7877753">:=</span>&nbsp;<span class="num" id="7877756">0</span><span class="op" id="7877757">;</span>&nbsp;<span class="ident" id="7877759"><a href="/gostd/log/syslog/syslog_test.go.html#7877751">i</a></span>&nbsp;<span class="op" id="7877761">&lt;</span>&nbsp;<span class="ident" id="7877763"><a href="/gostd/log/syslog/syslog_test.go.html#7877075">M</a></span><span class="op" id="7877764">;</span>&nbsp;<span class="ident" id="7877766"><a href="/gostd/log/syslog/syslog_test.go.html#7877751">i</a></span><span class="op" id="7877767">++</span>&nbsp;<span class="op" id="7877770">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877776">err</span>&nbsp;<span class="op" id="7877780">:=</span>&nbsp;<span class="ident" id="7877783"><a href="/gostd/log/syslog/syslog_test.go.html#7877604">w</a></span><span class="op" id="7877784">.</span><span class="ident" id="7877785"><a href="/gostd/log/syslog/syslog.go.html#6030988">Info</a></span><span class="op" id="7877789">(</span><span class="string" id="7877790">&#34;test&#34;</span><span class="op" id="7877796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877802">if</span>&nbsp;<span class="ident" id="7877805"><a href="/gostd/log/syslog/syslog_test.go.html#7877776">err</a></span>&nbsp;<span class="op" id="7877809">!=</span>&nbsp;<span class="builtintype" id="7877812">nil</span>&nbsp;<span class="op" id="7877816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877823"><a href="/gostd/log/syslog/syslog_test.go.html#7876987">t</a></span><span class="op" id="7877824">.</span><span class="ident" id="7877825"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="7877831">(</span><span class="string" id="7877832">&#34;Info()&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7877851">,</span>&nbsp;<span class="ident" id="7877853"><a href="/gostd/log/syslog/syslog_test.go.html#7877776">err</a></span><span class="op" id="7877856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877863">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877874">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877883">}</span><span class="op" id="7877884">(</span><span class="op" id="7877885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7877888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877891"><a href="/gostd/log/syslog/syslog_test.go.html#7877513">wg</a></span><span class="op" id="7877893">.</span><span class="ident" id="7877894"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7877898">(</span><span class="op" id="7877899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877902"><a href="/gostd/log/syslog/syslog_test.go.html#7877137">sock</a></span><span class="op" id="7877906">.</span><span class="ident" id="7877907"><a href="/gostd/io/io.go.html#1422583">Close</a></span><span class="op" id="7877912">(</span><span class="op" id="7877913">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7877916"><a href="/gostd/log/syslog/syslog_test.go.html#7877143">srvWG</a></span><span class="op" id="7877921">.</span><span class="ident" id="7877922"><a href="/gostd/sync/waitgroup.go.html#1462162">Wait</a></span><span class="op" id="7877926">(</span><span class="op" id="7877927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7877930">close</span><span class="op" id="7877935">(</span><span class="ident" id="7877936"><a href="/gostd/log/syslog/syslog_test.go.html#7877099">done</a></span><span class="op" id="7877940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877944">select</span>&nbsp;<span class="op" id="7877951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877954">case</span>&nbsp;<span class="op" id="7877959">&lt;-</span><span class="ident" id="7877961"><a href="/gostd/log/syslog/syslog_test.go.html#7877240">count</a></span><span class="op" id="7877966">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7877969">case</span>&nbsp;<span class="op" id="7877974">&lt;-</span><span class="ident" id="7877976"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7877980">.</span><span class="ident" id="7877981"><a href="/gostd/time/sleep.go.html#2716644">After</a></span><span class="op" id="7877986">(</span><span class="num" id="7877987">100</span>&nbsp;<span class="op" id="7877991">*</span>&nbsp;<span class="ident" id="7877993"><a href="/gostd/log/syslog/syslog_test.go.html#7870495">time</a></span><span class="op" id="7877997">.</span><span class="ident" id="7877998"><a href="/gostd/time/time.go.html#2734819">Millisecond</a></span><span class="op" id="7878009">)</span><span class="op" id="7878010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7878014"><a href="/gostd/log/syslog/syslog_test.go.html#7876987">t</a></span><span class="op" id="7878015">.</span><span class="ident" id="7878016"><a href="/gostd/testing/testing.go.html#5479963">Error</a></span><span class="op" id="7878021">(</span><span class="string" id="7878022">&#34;timeout&nbsp;in&nbsp;concurrent&nbsp;reconnect&#34;</span><span class="op" id="7878055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7878058">}</span><br>
<span class="lineno"></span><span class="op" id="7878060">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
