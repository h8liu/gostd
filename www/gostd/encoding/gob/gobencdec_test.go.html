<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8118142">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8118197">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8118251">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8118302">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118369">package</span>&nbsp;<span class="ident" id="8118377">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118382">import</span>&nbsp;<span class="op" id="8118389">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118392">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118401">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118411">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118418">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118424">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118431">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118442">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8118453">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8118460">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8118463">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118523">type</span>&nbsp;<span class="ident" id="8118528">ByteStruct</span>&nbsp;<span class="keyword" id="8118539">struct</span>&nbsp;<span class="op" id="8118546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8118549">a</span>&nbsp;<span class="builtintype" id="8118551">byte</span>&nbsp;<span class="comment" id="8118556">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8118581">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8118584">type</span>&nbsp;<span class="ident" id="8118589">StringStruct</span>&nbsp;<span class="keyword" id="8118602">struct</span>&nbsp;<span class="op" id="8118609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8118612">s</span>&nbsp;<span class="builtintype" id="8118614">string</span>&nbsp;<span class="comment" id="8118621">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8118646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8118649">type</span>&nbsp;<span class="ident" id="8118654">ArrayStruct</span>&nbsp;<span class="keyword" id="8118666">struct</span>&nbsp;<span class="op" id="8118673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8118676">a</span>&nbsp;<span class="op" id="8118678">[</span><span class="num" id="8118679">8192</span><span class="op" id="8118683">]</span><span class="builtintype" id="8118684">byte</span>&nbsp;<span class="comment" id="8118689">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8118714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118717">type</span>&nbsp;<span class="ident" id="8118722">Gobber</span>&nbsp;<span class="builtintype" id="8118729">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8118734">type</span>&nbsp;<span class="ident" id="8118739">ValueGobber</span>&nbsp;<span class="builtintype" id="8118751">string</span>&nbsp;<span class="comment" id="8118758">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118808">type</span>&nbsp;<span class="ident" id="8118813">BinaryGobber</span>&nbsp;<span class="builtintype" id="8118826">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8118831">type</span>&nbsp;<span class="ident" id="8118836">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8118854">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118862">type</span>&nbsp;<span class="ident" id="8118867">TextGobber</span>&nbsp;<span class="builtintype" id="8118878">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118883">type</span>&nbsp;<span class="ident" id="8118888">TextValueGobber</span>&nbsp;<span class="builtintype" id="8118904">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8118912">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8118937">func</span>&nbsp;<span class="op" id="8118942">(</span><span class="ident" id="8118943">g</span>&nbsp;<span class="op" id="8118945">*</span><span class="ident" id="8118946">ByteStruct</span><span class="op" id="8118956">)</span>&nbsp;<span class="ident" id="8118958">GobEncode</span><span class="op" id="8118967">(</span><span class="op" id="8118968">)</span>&nbsp;<span class="op" id="8118970">(</span><span class="op" id="8118971">[</span><span class="op" id="8118972">]</span><span class="builtintype" id="8118973">byte</span><span class="op" id="8118977">,</span>&nbsp;<span class="builtintype" id="8118979">error</span><span class="op" id="8118984">)</span>&nbsp;<span class="op" id="8118986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8118989">b</span>&nbsp;<span class="op" id="8118991">:=</span>&nbsp;<span class="builtinfunc" id="8118994">make</span><span class="op" id="8118998">(</span><span class="op" id="8118999">[</span><span class="op" id="8119000">]</span><span class="builtintype" id="8119001">byte</span><span class="op" id="8119005">,</span>&nbsp;<span class="num" id="8119007">3</span><span class="op" id="8119008">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119011">b</span><span class="op" id="8119012">[</span><span class="num" id="8119013">0</span><span class="op" id="8119014">]</span>&nbsp;<span class="op" id="8119016">=</span>&nbsp;<span class="ident" id="8119018">g</span><span class="op" id="8119019">.</span><span class="ident" id="8119020">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119023">b</span><span class="op" id="8119024">[</span><span class="num" id="8119025">1</span><span class="op" id="8119026">]</span>&nbsp;<span class="op" id="8119028">=</span>&nbsp;<span class="ident" id="8119030">g</span><span class="op" id="8119031">.</span><span class="ident" id="8119032">a</span>&nbsp;<span class="op" id="8119034">+</span>&nbsp;<span class="num" id="8119036">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119039">b</span><span class="op" id="8119040">[</span><span class="num" id="8119041">2</span><span class="op" id="8119042">]</span>&nbsp;<span class="op" id="8119044">=</span>&nbsp;<span class="ident" id="8119046">g</span><span class="op" id="8119047">.</span><span class="ident" id="8119048">a</span>&nbsp;<span class="op" id="8119050">+</span>&nbsp;<span class="num" id="8119052">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119055">return</span>&nbsp;<span class="ident" id="8119062">b</span><span class="op" id="8119063">,</span>&nbsp;<span class="ident" id="8119065">nil</span><br>
<span class="lineno"></span><span class="op" id="8119069">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8119072">func</span>&nbsp;<span class="op" id="8119077">(</span><span class="ident" id="8119078">g</span>&nbsp;<span class="op" id="8119080">*</span><span class="ident" id="8119081">ByteStruct</span><span class="op" id="8119091">)</span>&nbsp;<span class="ident" id="8119093">GobDecode</span><span class="op" id="8119102">(</span><span class="ident" id="8119103">data</span>&nbsp;<span class="op" id="8119108">[</span><span class="op" id="8119109">]</span><span class="builtintype" id="8119110">byte</span><span class="op" id="8119114">)</span>&nbsp;<span class="builtintype" id="8119116">error</span>&nbsp;<span class="op" id="8119122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119125">if</span>&nbsp;<span class="ident" id="8119128">g</span>&nbsp;<span class="op" id="8119130">==</span>&nbsp;<span class="ident" id="8119133">nil</span>&nbsp;<span class="op" id="8119137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119141">return</span>&nbsp;<span class="ident" id="8119148">errors</span><span class="op" id="8119154">.</span><span class="ident" id="8119155">New</span><span class="op" id="8119158">(</span><span class="string" id="8119159">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8119173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119176">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8119179">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119217">if</span>&nbsp;<span class="builtinfunc" id="8119220">len</span><span class="op" id="8119223">(</span><span class="ident" id="8119224">data</span><span class="op" id="8119228">)</span>&nbsp;<span class="op" id="8119230">==</span>&nbsp;<span class="num" id="8119233">0</span>&nbsp;<span class="op" id="8119235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119239">return</span>&nbsp;<span class="ident" id="8119246">io</span><span class="op" id="8119248">.</span><span class="ident" id="8119249">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119257">g</span><span class="op" id="8119258">.</span><span class="ident" id="8119259">a</span>&nbsp;<span class="op" id="8119261">=</span>&nbsp;<span class="ident" id="8119263">data</span><span class="op" id="8119267">[</span><span class="num" id="8119268">0</span><span class="op" id="8119269">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119272">for</span>&nbsp;<span class="ident" id="8119276">i</span><span class="op" id="8119277">,</span>&nbsp;<span class="ident" id="8119279">c</span>&nbsp;<span class="op" id="8119281">:=</span>&nbsp;<span class="keyword" id="8119284">range</span>&nbsp;<span class="ident" id="8119290">data</span>&nbsp;<span class="op" id="8119295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119299">if</span>&nbsp;<span class="ident" id="8119302">c</span>&nbsp;<span class="op" id="8119304">!=</span>&nbsp;<span class="ident" id="8119307">g</span><span class="op" id="8119308">.</span><span class="ident" id="8119309">a</span><span class="op" id="8119310">+</span><span class="builtintype" id="8119311">byte</span><span class="op" id="8119315">(</span><span class="ident" id="8119316">i</span><span class="op" id="8119317">)</span>&nbsp;<span class="op" id="8119319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119324">return</span>&nbsp;<span class="ident" id="8119331">errors</span><span class="op" id="8119337">.</span><span class="ident" id="8119338">New</span><span class="op" id="8119341">(</span><span class="string" id="8119342">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8119365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119372">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119375">return</span>&nbsp;<span class="ident" id="8119382">nil</span><br>
<span class="lineno"></span><span class="op" id="8119386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8119389">func</span>&nbsp;<span class="op" id="8119394">(</span><span class="ident" id="8119395">g</span>&nbsp;<span class="op" id="8119397">*</span><span class="ident" id="8119398">StringStruct</span><span class="op" id="8119410">)</span>&nbsp;<span class="ident" id="8119412">GobEncode</span><span class="op" id="8119421">(</span><span class="op" id="8119422">)</span>&nbsp;<span class="op" id="8119424">(</span><span class="op" id="8119425">[</span><span class="op" id="8119426">]</span><span class="builtintype" id="8119427">byte</span><span class="op" id="8119431">,</span>&nbsp;<span class="builtintype" id="8119433">error</span><span class="op" id="8119438">)</span>&nbsp;<span class="op" id="8119440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119443">return</span>&nbsp;<span class="op" id="8119450">[</span><span class="op" id="8119451">]</span><span class="builtintype" id="8119452">byte</span><span class="op" id="8119456">(</span><span class="ident" id="8119457">g</span><span class="op" id="8119458">.</span><span class="ident" id="8119459">s</span><span class="op" id="8119460">)</span><span class="op" id="8119461">,</span>&nbsp;<span class="ident" id="8119463">nil</span><br>
<span class="lineno">75</span><span class="op" id="8119467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8119470">func</span>&nbsp;<span class="op" id="8119475">(</span><span class="ident" id="8119476">g</span>&nbsp;<span class="op" id="8119478">*</span><span class="ident" id="8119479">StringStruct</span><span class="op" id="8119491">)</span>&nbsp;<span class="ident" id="8119493">GobDecode</span><span class="op" id="8119502">(</span><span class="ident" id="8119503">data</span>&nbsp;<span class="op" id="8119508">[</span><span class="op" id="8119509">]</span><span class="builtintype" id="8119510">byte</span><span class="op" id="8119514">)</span>&nbsp;<span class="builtintype" id="8119516">error</span>&nbsp;<span class="op" id="8119522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8119525">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119563">if</span>&nbsp;<span class="builtinfunc" id="8119566">len</span><span class="op" id="8119569">(</span><span class="ident" id="8119570">data</span><span class="op" id="8119574">)</span>&nbsp;<span class="op" id="8119576">==</span>&nbsp;<span class="num" id="8119579">0</span>&nbsp;<span class="op" id="8119581">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119585">return</span>&nbsp;<span class="ident" id="8119592">io</span><span class="op" id="8119594">.</span><span class="ident" id="8119595">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119603">a</span>&nbsp;<span class="op" id="8119605">:=</span>&nbsp;<span class="ident" id="8119608">data</span><span class="op" id="8119612">[</span><span class="num" id="8119613">0</span><span class="op" id="8119614">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119617">for</span>&nbsp;<span class="ident" id="8119621">i</span><span class="op" id="8119622">,</span>&nbsp;<span class="ident" id="8119624">c</span>&nbsp;<span class="op" id="8119626">:=</span>&nbsp;<span class="keyword" id="8119629">range</span>&nbsp;<span class="ident" id="8119635">data</span>&nbsp;<span class="op" id="8119640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119644">if</span>&nbsp;<span class="ident" id="8119647">c</span>&nbsp;<span class="op" id="8119649">!=</span>&nbsp;<span class="ident" id="8119652">a</span><span class="op" id="8119653">+</span><span class="builtintype" id="8119654">byte</span><span class="op" id="8119658">(</span><span class="ident" id="8119659">i</span><span class="op" id="8119660">)</span>&nbsp;<span class="op" id="8119662">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119667">return</span>&nbsp;<span class="ident" id="8119674">errors</span><span class="op" id="8119680">.</span><span class="ident" id="8119681">New</span><span class="op" id="8119684">(</span><span class="string" id="8119685">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8119708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119718">g</span><span class="op" id="8119719">.</span><span class="ident" id="8119720">s</span>&nbsp;<span class="op" id="8119722">=</span>&nbsp;<span class="builtintype" id="8119724">string</span><span class="op" id="8119730">(</span><span class="ident" id="8119731">data</span><span class="op" id="8119735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119738">return</span>&nbsp;<span class="ident" id="8119745">nil</span><br>
<span class="lineno">90</span><span class="op" id="8119749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8119752">func</span>&nbsp;<span class="op" id="8119757">(</span><span class="ident" id="8119758">a</span>&nbsp;<span class="op" id="8119760">*</span><span class="ident" id="8119761">ArrayStruct</span><span class="op" id="8119772">)</span>&nbsp;<span class="ident" id="8119774">GobEncode</span><span class="op" id="8119783">(</span><span class="op" id="8119784">)</span>&nbsp;<span class="op" id="8119786">(</span><span class="op" id="8119787">[</span><span class="op" id="8119788">]</span><span class="builtintype" id="8119789">byte</span><span class="op" id="8119793">,</span>&nbsp;<span class="builtintype" id="8119795">error</span><span class="op" id="8119800">)</span>&nbsp;<span class="op" id="8119802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119805">return</span>&nbsp;<span class="ident" id="8119812">a</span><span class="op" id="8119813">.</span><span class="ident" id="8119814">a</span><span class="op" id="8119815">[</span><span class="op" id="8119816">:</span><span class="op" id="8119817">]</span><span class="op" id="8119818">,</span>&nbsp;<span class="ident" id="8119820">nil</span><br>
<span class="lineno"></span><span class="op" id="8119824">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8119827">func</span>&nbsp;<span class="op" id="8119832">(</span><span class="ident" id="8119833">a</span>&nbsp;<span class="op" id="8119835">*</span><span class="ident" id="8119836">ArrayStruct</span><span class="op" id="8119847">)</span>&nbsp;<span class="ident" id="8119849">GobDecode</span><span class="op" id="8119858">(</span><span class="ident" id="8119859">data</span>&nbsp;<span class="op" id="8119864">[</span><span class="op" id="8119865">]</span><span class="builtintype" id="8119866">byte</span><span class="op" id="8119870">)</span>&nbsp;<span class="builtintype" id="8119872">error</span>&nbsp;<span class="op" id="8119878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119881">if</span>&nbsp;<span class="builtinfunc" id="8119884">len</span><span class="op" id="8119887">(</span><span class="ident" id="8119888">data</span><span class="op" id="8119892">)</span>&nbsp;<span class="op" id="8119894">!=</span>&nbsp;<span class="builtinfunc" id="8119897">len</span><span class="op" id="8119900">(</span><span class="ident" id="8119901">a</span><span class="op" id="8119902">.</span><span class="ident" id="8119903">a</span><span class="op" id="8119904">)</span>&nbsp;<span class="op" id="8119906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119910">return</span>&nbsp;<span class="ident" id="8119917">errors</span><span class="op" id="8119923">.</span><span class="ident" id="8119924">New</span><span class="op" id="8119927">(</span><span class="string" id="8119928">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8119958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119961">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8119964">copy</span><span class="op" id="8119968">(</span><span class="ident" id="8119969">a</span><span class="op" id="8119970">.</span><span class="ident" id="8119971">a</span><span class="op" id="8119972">[</span><span class="op" id="8119973">:</span><span class="op" id="8119974">]</span><span class="op" id="8119975">,</span>&nbsp;<span class="ident" id="8119977">data</span><span class="op" id="8119981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119984">return</span>&nbsp;<span class="ident" id="8119991">nil</span><br>
<span class="lineno"></span><span class="op" id="8119995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8119998">func</span>&nbsp;<span class="op" id="8120003">(</span><span class="ident" id="8120004">g</span>&nbsp;<span class="op" id="8120006">*</span><span class="ident" id="8120007">Gobber</span><span class="op" id="8120013">)</span>&nbsp;<span class="ident" id="8120015">GobEncode</span><span class="op" id="8120024">(</span><span class="op" id="8120025">)</span>&nbsp;<span class="op" id="8120027">(</span><span class="op" id="8120028">[</span><span class="op" id="8120029">]</span><span class="builtintype" id="8120030">byte</span><span class="op" id="8120034">,</span>&nbsp;<span class="builtintype" id="8120036">error</span><span class="op" id="8120041">)</span>&nbsp;<span class="op" id="8120043">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120046">return</span>&nbsp;<span class="op" id="8120053">[</span><span class="op" id="8120054">]</span><span class="builtintype" id="8120055">byte</span><span class="op" id="8120059">(</span><span class="ident" id="8120060">fmt</span><span class="op" id="8120063">.</span><span class="ident" id="8120064">Sprintf</span><span class="op" id="8120071">(</span><span class="string" id="8120072">&#34;VALUE=%d&#34;</span><span class="op" id="8120082">,</span>&nbsp;<span class="op" id="8120084">*</span><span class="ident" id="8120085">g</span><span class="op" id="8120086">)</span><span class="op" id="8120087">)</span><span class="op" id="8120088">,</span>&nbsp;<span class="ident" id="8120090">nil</span><br>
<span class="lineno"></span><span class="op" id="8120094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8120097">func</span>&nbsp;<span class="op" id="8120102">(</span><span class="ident" id="8120103">g</span>&nbsp;<span class="op" id="8120105">*</span><span class="ident" id="8120106">Gobber</span><span class="op" id="8120112">)</span>&nbsp;<span class="ident" id="8120114">GobDecode</span><span class="op" id="8120123">(</span><span class="ident" id="8120124">data</span>&nbsp;<span class="op" id="8120129">[</span><span class="op" id="8120130">]</span><span class="builtintype" id="8120131">byte</span><span class="op" id="8120135">)</span>&nbsp;<span class="builtintype" id="8120137">error</span>&nbsp;<span class="op" id="8120143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120146">_</span><span class="op" id="8120147">,</span>&nbsp;<span class="ident" id="8120149">err</span>&nbsp;<span class="op" id="8120153">:=</span>&nbsp;<span class="ident" id="8120156">fmt</span><span class="op" id="8120159">.</span><span class="ident" id="8120160">Sscanf</span><span class="op" id="8120166">(</span><span class="builtintype" id="8120167">string</span><span class="op" id="8120173">(</span><span class="ident" id="8120174">data</span><span class="op" id="8120178">)</span><span class="op" id="8120179">,</span>&nbsp;<span class="string" id="8120181">&#34;VALUE=%d&#34;</span><span class="op" id="8120191">,</span>&nbsp;<span class="op" id="8120193">(</span><span class="op" id="8120194">*</span><span class="builtintype" id="8120195">int</span><span class="op" id="8120198">)</span><span class="op" id="8120199">(</span><span class="ident" id="8120200">g</span><span class="op" id="8120201">)</span><span class="op" id="8120202">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120205">return</span>&nbsp;<span class="ident" id="8120212">err</span><br>
<span class="lineno"></span><span class="op" id="8120216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8120219">func</span>&nbsp;<span class="op" id="8120224">(</span><span class="ident" id="8120225">g</span>&nbsp;<span class="op" id="8120227">*</span><span class="ident" id="8120228">BinaryGobber</span><span class="op" id="8120240">)</span>&nbsp;<span class="ident" id="8120242">MarshalBinary</span><span class="op" id="8120255">(</span><span class="op" id="8120256">)</span>&nbsp;<span class="op" id="8120258">(</span><span class="op" id="8120259">[</span><span class="op" id="8120260">]</span><span class="builtintype" id="8120261">byte</span><span class="op" id="8120265">,</span>&nbsp;<span class="builtintype" id="8120267">error</span><span class="op" id="8120272">)</span>&nbsp;<span class="op" id="8120274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120277">return</span>&nbsp;<span class="op" id="8120284">[</span><span class="op" id="8120285">]</span><span class="builtintype" id="8120286">byte</span><span class="op" id="8120290">(</span><span class="ident" id="8120291">fmt</span><span class="op" id="8120294">.</span><span class="ident" id="8120295">Sprintf</span><span class="op" id="8120302">(</span><span class="string" id="8120303">&#34;VALUE=%d&#34;</span><span class="op" id="8120313">,</span>&nbsp;<span class="op" id="8120315">*</span><span class="ident" id="8120316">g</span><span class="op" id="8120317">)</span><span class="op" id="8120318">)</span><span class="op" id="8120319">,</span>&nbsp;<span class="ident" id="8120321">nil</span><br>
<span class="lineno">115</span><span class="op" id="8120325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8120328">func</span>&nbsp;<span class="op" id="8120333">(</span><span class="ident" id="8120334">g</span>&nbsp;<span class="op" id="8120336">*</span><span class="ident" id="8120337">BinaryGobber</span><span class="op" id="8120349">)</span>&nbsp;<span class="ident" id="8120351">UnmarshalBinary</span><span class="op" id="8120366">(</span><span class="ident" id="8120367">data</span>&nbsp;<span class="op" id="8120372">[</span><span class="op" id="8120373">]</span><span class="builtintype" id="8120374">byte</span><span class="op" id="8120378">)</span>&nbsp;<span class="builtintype" id="8120380">error</span>&nbsp;<span class="op" id="8120386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120389">_</span><span class="op" id="8120390">,</span>&nbsp;<span class="ident" id="8120392">err</span>&nbsp;<span class="op" id="8120396">:=</span>&nbsp;<span class="ident" id="8120399">fmt</span><span class="op" id="8120402">.</span><span class="ident" id="8120403">Sscanf</span><span class="op" id="8120409">(</span><span class="builtintype" id="8120410">string</span><span class="op" id="8120416">(</span><span class="ident" id="8120417">data</span><span class="op" id="8120421">)</span><span class="op" id="8120422">,</span>&nbsp;<span class="string" id="8120424">&#34;VALUE=%d&#34;</span><span class="op" id="8120434">,</span>&nbsp;<span class="op" id="8120436">(</span><span class="op" id="8120437">*</span><span class="builtintype" id="8120438">int</span><span class="op" id="8120441">)</span><span class="op" id="8120442">(</span><span class="ident" id="8120443">g</span><span class="op" id="8120444">)</span><span class="op" id="8120445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120448">return</span>&nbsp;<span class="ident" id="8120455">err</span><br>
<span class="lineno">120</span><span class="op" id="8120459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8120462">func</span>&nbsp;<span class="op" id="8120467">(</span><span class="ident" id="8120468">g</span>&nbsp;<span class="op" id="8120470">*</span><span class="ident" id="8120471">TextGobber</span><span class="op" id="8120481">)</span>&nbsp;<span class="ident" id="8120483">MarshalText</span><span class="op" id="8120494">(</span><span class="op" id="8120495">)</span>&nbsp;<span class="op" id="8120497">(</span><span class="op" id="8120498">[</span><span class="op" id="8120499">]</span><span class="builtintype" id="8120500">byte</span><span class="op" id="8120504">,</span>&nbsp;<span class="builtintype" id="8120506">error</span><span class="op" id="8120511">)</span>&nbsp;<span class="op" id="8120513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120516">return</span>&nbsp;<span class="op" id="8120523">[</span><span class="op" id="8120524">]</span><span class="builtintype" id="8120525">byte</span><span class="op" id="8120529">(</span><span class="ident" id="8120530">fmt</span><span class="op" id="8120533">.</span><span class="ident" id="8120534">Sprintf</span><span class="op" id="8120541">(</span><span class="string" id="8120542">&#34;VALUE=%d&#34;</span><span class="op" id="8120552">,</span>&nbsp;<span class="op" id="8120554">*</span><span class="ident" id="8120555">g</span><span class="op" id="8120556">)</span><span class="op" id="8120557">)</span><span class="op" id="8120558">,</span>&nbsp;<span class="ident" id="8120560">nil</span><br>
<span class="lineno"></span><span class="op" id="8120564">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8120567">func</span>&nbsp;<span class="op" id="8120572">(</span><span class="ident" id="8120573">g</span>&nbsp;<span class="op" id="8120575">*</span><span class="ident" id="8120576">TextGobber</span><span class="op" id="8120586">)</span>&nbsp;<span class="ident" id="8120588">UnmarshalText</span><span class="op" id="8120601">(</span><span class="ident" id="8120602">data</span>&nbsp;<span class="op" id="8120607">[</span><span class="op" id="8120608">]</span><span class="builtintype" id="8120609">byte</span><span class="op" id="8120613">)</span>&nbsp;<span class="builtintype" id="8120615">error</span>&nbsp;<span class="op" id="8120621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120624">_</span><span class="op" id="8120625">,</span>&nbsp;<span class="ident" id="8120627">err</span>&nbsp;<span class="op" id="8120631">:=</span>&nbsp;<span class="ident" id="8120634">fmt</span><span class="op" id="8120637">.</span><span class="ident" id="8120638">Sscanf</span><span class="op" id="8120644">(</span><span class="builtintype" id="8120645">string</span><span class="op" id="8120651">(</span><span class="ident" id="8120652">data</span><span class="op" id="8120656">)</span><span class="op" id="8120657">,</span>&nbsp;<span class="string" id="8120659">&#34;VALUE=%d&#34;</span><span class="op" id="8120669">,</span>&nbsp;<span class="op" id="8120671">(</span><span class="op" id="8120672">*</span><span class="builtintype" id="8120673">int</span><span class="op" id="8120676">)</span><span class="op" id="8120677">(</span><span class="ident" id="8120678">g</span><span class="op" id="8120679">)</span><span class="op" id="8120680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120683">return</span>&nbsp;<span class="ident" id="8120690">err</span><br>
<span class="lineno"></span><span class="op" id="8120694">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8120697">func</span>&nbsp;<span class="op" id="8120702">(</span><span class="ident" id="8120703">v</span>&nbsp;<span class="ident" id="8120705">ValueGobber</span><span class="op" id="8120716">)</span>&nbsp;<span class="ident" id="8120718">GobEncode</span><span class="op" id="8120727">(</span><span class="op" id="8120728">)</span>&nbsp;<span class="op" id="8120730">(</span><span class="op" id="8120731">[</span><span class="op" id="8120732">]</span><span class="builtintype" id="8120733">byte</span><span class="op" id="8120737">,</span>&nbsp;<span class="builtintype" id="8120739">error</span><span class="op" id="8120744">)</span>&nbsp;<span class="op" id="8120746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120749">return</span>&nbsp;<span class="op" id="8120756">[</span><span class="op" id="8120757">]</span><span class="builtintype" id="8120758">byte</span><span class="op" id="8120762">(</span><span class="ident" id="8120763">fmt</span><span class="op" id="8120766">.</span><span class="ident" id="8120767">Sprintf</span><span class="op" id="8120774">(</span><span class="string" id="8120775">&#34;VALUE=%s&#34;</span><span class="op" id="8120785">,</span>&nbsp;<span class="ident" id="8120787">v</span><span class="op" id="8120788">)</span><span class="op" id="8120789">)</span><span class="op" id="8120790">,</span>&nbsp;<span class="ident" id="8120792">nil</span><br>
<span class="lineno"></span><span class="op" id="8120796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8120799">func</span>&nbsp;<span class="op" id="8120804">(</span><span class="ident" id="8120805">v</span>&nbsp;<span class="op" id="8120807">*</span><span class="ident" id="8120808">ValueGobber</span><span class="op" id="8120819">)</span>&nbsp;<span class="ident" id="8120821">GobDecode</span><span class="op" id="8120830">(</span><span class="ident" id="8120831">data</span>&nbsp;<span class="op" id="8120836">[</span><span class="op" id="8120837">]</span><span class="builtintype" id="8120838">byte</span><span class="op" id="8120842">)</span>&nbsp;<span class="builtintype" id="8120844">error</span>&nbsp;<span class="op" id="8120850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120853">_</span><span class="op" id="8120854">,</span>&nbsp;<span class="ident" id="8120856">err</span>&nbsp;<span class="op" id="8120860">:=</span>&nbsp;<span class="ident" id="8120863">fmt</span><span class="op" id="8120866">.</span><span class="ident" id="8120867">Sscanf</span><span class="op" id="8120873">(</span><span class="builtintype" id="8120874">string</span><span class="op" id="8120880">(</span><span class="ident" id="8120881">data</span><span class="op" id="8120885">)</span><span class="op" id="8120886">,</span>&nbsp;<span class="string" id="8120888">&#34;VALUE=%s&#34;</span><span class="op" id="8120898">,</span>&nbsp;<span class="op" id="8120900">(</span><span class="op" id="8120901">*</span><span class="builtintype" id="8120902">string</span><span class="op" id="8120908">)</span><span class="op" id="8120909">(</span><span class="ident" id="8120910">v</span><span class="op" id="8120911">)</span><span class="op" id="8120912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120915">return</span>&nbsp;<span class="ident" id="8120922">err</span><br>
<span class="lineno"></span><span class="op" id="8120926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8120929">func</span>&nbsp;<span class="op" id="8120934">(</span><span class="ident" id="8120935">v</span>&nbsp;<span class="ident" id="8120937">BinaryValueGobber</span><span class="op" id="8120954">)</span>&nbsp;<span class="ident" id="8120956">MarshalBinary</span><span class="op" id="8120969">(</span><span class="op" id="8120970">)</span>&nbsp;<span class="op" id="8120972">(</span><span class="op" id="8120973">[</span><span class="op" id="8120974">]</span><span class="builtintype" id="8120975">byte</span><span class="op" id="8120979">,</span>&nbsp;<span class="builtintype" id="8120981">error</span><span class="op" id="8120986">)</span>&nbsp;<span class="op" id="8120988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120991">return</span>&nbsp;<span class="op" id="8120998">[</span><span class="op" id="8120999">]</span><span class="builtintype" id="8121000">byte</span><span class="op" id="8121004">(</span><span class="ident" id="8121005">fmt</span><span class="op" id="8121008">.</span><span class="ident" id="8121009">Sprintf</span><span class="op" id="8121016">(</span><span class="string" id="8121017">&#34;VALUE=%s&#34;</span><span class="op" id="8121027">,</span>&nbsp;<span class="ident" id="8121029">v</span><span class="op" id="8121030">)</span><span class="op" id="8121031">)</span><span class="op" id="8121032">,</span>&nbsp;<span class="ident" id="8121034">nil</span><br>
<span class="lineno"></span><span class="op" id="8121038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121041">func</span>&nbsp;<span class="op" id="8121046">(</span><span class="ident" id="8121047">v</span>&nbsp;<span class="op" id="8121049">*</span><span class="ident" id="8121050">BinaryValueGobber</span><span class="op" id="8121067">)</span>&nbsp;<span class="ident" id="8121069">UnmarshalBinary</span><span class="op" id="8121084">(</span><span class="ident" id="8121085">data</span>&nbsp;<span class="op" id="8121090">[</span><span class="op" id="8121091">]</span><span class="builtintype" id="8121092">byte</span><span class="op" id="8121096">)</span>&nbsp;<span class="builtintype" id="8121098">error</span>&nbsp;<span class="op" id="8121104">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121107">_</span><span class="op" id="8121108">,</span>&nbsp;<span class="ident" id="8121110">err</span>&nbsp;<span class="op" id="8121114">:=</span>&nbsp;<span class="ident" id="8121117">fmt</span><span class="op" id="8121120">.</span><span class="ident" id="8121121">Sscanf</span><span class="op" id="8121127">(</span><span class="builtintype" id="8121128">string</span><span class="op" id="8121134">(</span><span class="ident" id="8121135">data</span><span class="op" id="8121139">)</span><span class="op" id="8121140">,</span>&nbsp;<span class="string" id="8121142">&#34;VALUE=%s&#34;</span><span class="op" id="8121152">,</span>&nbsp;<span class="op" id="8121154">(</span><span class="op" id="8121155">*</span><span class="builtintype" id="8121156">string</span><span class="op" id="8121162">)</span><span class="op" id="8121163">(</span><span class="ident" id="8121164">v</span><span class="op" id="8121165">)</span><span class="op" id="8121166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121169">return</span>&nbsp;<span class="ident" id="8121176">err</span><br>
<span class="lineno"></span><span class="op" id="8121180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121183">func</span>&nbsp;<span class="op" id="8121188">(</span><span class="ident" id="8121189">v</span>&nbsp;<span class="ident" id="8121191">TextValueGobber</span><span class="op" id="8121206">)</span>&nbsp;<span class="ident" id="8121208">MarshalText</span><span class="op" id="8121219">(</span><span class="op" id="8121220">)</span>&nbsp;<span class="op" id="8121222">(</span><span class="op" id="8121223">[</span><span class="op" id="8121224">]</span><span class="builtintype" id="8121225">byte</span><span class="op" id="8121229">,</span>&nbsp;<span class="builtintype" id="8121231">error</span><span class="op" id="8121236">)</span>&nbsp;<span class="op" id="8121238">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121241">return</span>&nbsp;<span class="op" id="8121248">[</span><span class="op" id="8121249">]</span><span class="builtintype" id="8121250">byte</span><span class="op" id="8121254">(</span><span class="ident" id="8121255">fmt</span><span class="op" id="8121258">.</span><span class="ident" id="8121259">Sprintf</span><span class="op" id="8121266">(</span><span class="string" id="8121267">&#34;VALUE=%s&#34;</span><span class="op" id="8121277">,</span>&nbsp;<span class="ident" id="8121279">v</span><span class="op" id="8121280">)</span><span class="op" id="8121281">)</span><span class="op" id="8121282">,</span>&nbsp;<span class="ident" id="8121284">nil</span><br>
<span class="lineno"></span><span class="op" id="8121288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121291">func</span>&nbsp;<span class="op" id="8121296">(</span><span class="ident" id="8121297">v</span>&nbsp;<span class="op" id="8121299">*</span><span class="ident" id="8121300">TextValueGobber</span><span class="op" id="8121315">)</span>&nbsp;<span class="ident" id="8121317">UnmarshalText</span><span class="op" id="8121330">(</span><span class="ident" id="8121331">data</span>&nbsp;<span class="op" id="8121336">[</span><span class="op" id="8121337">]</span><span class="builtintype" id="8121338">byte</span><span class="op" id="8121342">)</span>&nbsp;<span class="builtintype" id="8121344">error</span>&nbsp;<span class="op" id="8121350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121353">_</span><span class="op" id="8121354">,</span>&nbsp;<span class="ident" id="8121356">err</span>&nbsp;<span class="op" id="8121360">:=</span>&nbsp;<span class="ident" id="8121363">fmt</span><span class="op" id="8121366">.</span><span class="ident" id="8121367">Sscanf</span><span class="op" id="8121373">(</span><span class="builtintype" id="8121374">string</span><span class="op" id="8121380">(</span><span class="ident" id="8121381">data</span><span class="op" id="8121385">)</span><span class="op" id="8121386">,</span>&nbsp;<span class="string" id="8121388">&#34;VALUE=%s&#34;</span><span class="op" id="8121398">,</span>&nbsp;<span class="op" id="8121400">(</span><span class="op" id="8121401">*</span><span class="builtintype" id="8121402">string</span><span class="op" id="8121408">)</span><span class="op" id="8121409">(</span><span class="ident" id="8121410">v</span><span class="op" id="8121411">)</span><span class="op" id="8121412">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121415">return</span>&nbsp;<span class="ident" id="8121422">err</span><br>
<span class="lineno"></span><span class="op" id="8121426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8121429">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8121475">type</span>&nbsp;<span class="ident" id="8121480">GobTest0</span>&nbsp;<span class="keyword" id="8121489">struct</span>&nbsp;<span class="op" id="8121496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121499">X</span>&nbsp;<span class="builtintype" id="8121501">int</span>&nbsp;<span class="comment" id="8121505">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121562">G</span>&nbsp;<span class="op" id="8121564">*</span><span class="ident" id="8121565">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8121576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8121579">type</span>&nbsp;<span class="ident" id="8121584">GobTest1</span>&nbsp;<span class="keyword" id="8121593">struct</span>&nbsp;<span class="op" id="8121600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121603">X</span>&nbsp;<span class="builtintype" id="8121605">int</span>&nbsp;<span class="comment" id="8121609">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121666">G</span>&nbsp;<span class="op" id="8121668">*</span><span class="ident" id="8121669">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8121682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8121685">type</span>&nbsp;<span class="ident" id="8121690">GobTest2</span>&nbsp;<span class="keyword" id="8121699">struct</span>&nbsp;<span class="op" id="8121706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121709">X</span>&nbsp;<span class="builtintype" id="8121711">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8121718">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121775">G</span>&nbsp;<span class="builtintype" id="8121777">string</span>&nbsp;<span class="comment" id="8121784">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8121828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8121831">type</span>&nbsp;<span class="ident" id="8121836">GobTest3</span>&nbsp;<span class="keyword" id="8121845">struct</span>&nbsp;<span class="op" id="8121852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121855">X</span>&nbsp;<span class="builtintype" id="8121857">int</span>&nbsp;<span class="comment" id="8121861">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121918">G</span>&nbsp;<span class="op" id="8121920">*</span><span class="ident" id="8121921">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121929">B</span>&nbsp;<span class="op" id="8121931">*</span><span class="ident" id="8121932">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121946">T</span>&nbsp;<span class="op" id="8121948">*</span><span class="ident" id="8121949">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8121960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121963">type</span>&nbsp;<span class="ident" id="8121968">GobTest4</span>&nbsp;<span class="keyword" id="8121977">struct</span>&nbsp;<span class="op" id="8121984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121987">X</span>&nbsp;&nbsp;<span class="builtintype" id="8121990">int</span>&nbsp;<span class="comment" id="8121994">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122051">V</span>&nbsp;&nbsp;<span class="ident" id="8122054">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122067">BV</span>&nbsp;<span class="ident" id="8122070">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122089">TV</span>&nbsp;<span class="ident" id="8122092">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8122108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8122111">type</span>&nbsp;<span class="ident" id="8122116">GobTest5</span>&nbsp;<span class="keyword" id="8122125">struct</span>&nbsp;<span class="op" id="8122132">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122135">X</span>&nbsp;&nbsp;<span class="builtintype" id="8122138">int</span>&nbsp;<span class="comment" id="8122142">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122199">V</span>&nbsp;&nbsp;<span class="op" id="8122202">*</span><span class="ident" id="8122203">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122216">BV</span>&nbsp;<span class="op" id="8122219">*</span><span class="ident" id="8122220">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122239">TV</span>&nbsp;<span class="op" id="8122242">*</span><span class="ident" id="8122243">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8122259">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8122262">type</span>&nbsp;<span class="ident" id="8122267">GobTest6</span>&nbsp;<span class="keyword" id="8122276">struct</span>&nbsp;<span class="op" id="8122283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122286">X</span>&nbsp;&nbsp;<span class="builtintype" id="8122289">int</span>&nbsp;<span class="comment" id="8122293">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122350">V</span>&nbsp;&nbsp;<span class="ident" id="8122353">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122366">W</span>&nbsp;&nbsp;<span class="op" id="8122369">*</span><span class="ident" id="8122370">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122383">BV</span>&nbsp;<span class="ident" id="8122386">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122405">BW</span>&nbsp;<span class="op" id="8122408">*</span><span class="ident" id="8122409">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122428">TV</span>&nbsp;<span class="ident" id="8122431">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122448">TW</span>&nbsp;<span class="op" id="8122451">*</span><span class="ident" id="8122452">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8122468">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8122471">type</span>&nbsp;<span class="ident" id="8122476">GobTest7</span>&nbsp;<span class="keyword" id="8122485">struct</span>&nbsp;<span class="op" id="8122492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122495">X</span>&nbsp;&nbsp;<span class="builtintype" id="8122498">int</span>&nbsp;<span class="comment" id="8122502">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122559">V</span>&nbsp;&nbsp;<span class="op" id="8122562">*</span><span class="ident" id="8122563">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122576">W</span>&nbsp;&nbsp;<span class="ident" id="8122579">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122592">BV</span>&nbsp;<span class="op" id="8122595">*</span><span class="ident" id="8122596">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122615">BW</span>&nbsp;<span class="ident" id="8122618">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122637">TV</span>&nbsp;<span class="op" id="8122640">*</span><span class="ident" id="8122641">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122658">TW</span>&nbsp;<span class="ident" id="8122661">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8122677">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8122680">type</span>&nbsp;<span class="ident" id="8122685">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8122706">struct</span>&nbsp;<span class="op" id="8122713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122716">X</span>&nbsp;<span class="builtintype" id="8122718">int</span>&nbsp;<span class="comment" id="8122722">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8122778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8122781">type</span>&nbsp;<span class="ident" id="8122786">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8122805">struct</span>&nbsp;<span class="op" id="8122812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122815">X</span>&nbsp;<span class="builtintype" id="8122817">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8122830">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122887">G</span>&nbsp;<span class="ident" id="8122889">StringStruct</span>&nbsp;<span class="comment" id="8122902">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8122920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8122923">type</span>&nbsp;<span class="ident" id="8122928">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8122950">struct</span>&nbsp;<span class="op" id="8122957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122960">X</span>&nbsp;<span class="builtintype" id="8122962">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8122978">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123035">G</span>&nbsp;<span class="op" id="8123037">*</span><span class="op" id="8123038">*</span><span class="op" id="8123039">*</span><span class="ident" id="8123040">StringStruct</span>&nbsp;<span class="comment" id="8123053">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8123086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8123089">type</span>&nbsp;<span class="ident" id="8123094">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8123113">struct</span>&nbsp;<span class="op" id="8123120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123123">X</span>&nbsp;<span class="builtintype" id="8123125">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8123137">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123194">A</span>&nbsp;<span class="ident" id="8123196">ArrayStruct</span>&nbsp;<span class="comment" id="8123208">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8123226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8123229">type</span>&nbsp;<span class="ident" id="8123234">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8123261">struct</span>&nbsp;<span class="op" id="8123268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123271">X</span>&nbsp;<span class="builtintype" id="8123273">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8123288">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123345">A</span>&nbsp;<span class="op" id="8123347">*</span><span class="op" id="8123348">*</span><span class="op" id="8123349">*</span><span class="ident" id="8123350">ArrayStruct</span>&nbsp;<span class="comment" id="8123362">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8123399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8123402">func</span>&nbsp;<span class="ident" id="8123407">TestGobEncoderField</span><span class="op" id="8123426">(</span><span class="ident" id="8123427">t</span>&nbsp;<span class="op" id="8123429">*</span><span class="ident" id="8123430">testing</span><span class="op" id="8123437">.</span><span class="ident" id="8123438">T</span><span class="op" id="8123439">)</span>&nbsp;<span class="op" id="8123441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123444">b</span>&nbsp;<span class="op" id="8123446">:=</span>&nbsp;<span class="builtinfunc" id="8123449">new</span><span class="op" id="8123452">(</span><span class="ident" id="8123453">bytes</span><span class="op" id="8123458">.</span><span class="ident" id="8123459">Buffer</span><span class="op" id="8123465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8123468">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123506">enc</span>&nbsp;<span class="op" id="8123510">:=</span>&nbsp;<span class="ident" id="8123513">NewEncoder</span><span class="op" id="8123523">(</span><span class="ident" id="8123524">b</span><span class="op" id="8123525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123528">err</span>&nbsp;<span class="op" id="8123532">:=</span>&nbsp;<span class="ident" id="8123535">enc</span><span class="op" id="8123538">.</span><span class="ident" id="8123539">Encode</span><span class="op" id="8123545">(</span><span class="ident" id="8123546">GobTest0</span><span class="op" id="8123554">{</span><span class="num" id="8123555">17</span><span class="op" id="8123557">,</span>&nbsp;<span class="op" id="8123559">&amp;</span><span class="ident" id="8123560">ByteStruct</span><span class="op" id="8123570">{</span><span class="string" id="8123571">&#39;A&#39;</span><span class="op" id="8123574">}</span><span class="op" id="8123575">}</span><span class="op" id="8123576">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8123579">if</span>&nbsp;<span class="ident" id="8123582">err</span>&nbsp;<span class="op" id="8123586">!=</span>&nbsp;<span class="ident" id="8123589">nil</span>&nbsp;<span class="op" id="8123593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123597">t</span><span class="op" id="8123598">.</span><span class="ident" id="8123599">Fatal</span><span class="op" id="8123604">(</span><span class="string" id="8123605">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8123620">,</span>&nbsp;<span class="ident" id="8123622">err</span><span class="op" id="8123625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8123628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123631">dec</span>&nbsp;<span class="op" id="8123635">:=</span>&nbsp;<span class="ident" id="8123638">NewDecoder</span><span class="op" id="8123648">(</span><span class="ident" id="8123649">b</span><span class="op" id="8123650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123653">x</span>&nbsp;<span class="op" id="8123655">:=</span>&nbsp;<span class="builtinfunc" id="8123658">new</span><span class="op" id="8123661">(</span><span class="ident" id="8123662">GobTest0</span><span class="op" id="8123670">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123673">err</span>&nbsp;<span class="op" id="8123677">=</span>&nbsp;<span class="ident" id="8123679">dec</span><span class="op" id="8123682">.</span><span class="ident" id="8123683">Decode</span><span class="op" id="8123689">(</span><span class="ident" id="8123690">x</span><span class="op" id="8123691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8123694">if</span>&nbsp;<span class="ident" id="8123697">err</span>&nbsp;<span class="op" id="8123701">!=</span>&nbsp;<span class="ident" id="8123704">nil</span>&nbsp;<span class="op" id="8123708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123712">t</span><span class="op" id="8123713">.</span><span class="ident" id="8123714">Fatal</span><span class="op" id="8123719">(</span><span class="string" id="8123720">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8123735">,</span>&nbsp;<span class="ident" id="8123737">err</span><span class="op" id="8123740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8123743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8123746">if</span>&nbsp;<span class="ident" id="8123749">x</span><span class="op" id="8123750">.</span><span class="ident" id="8123751">G</span><span class="op" id="8123752">.</span><span class="ident" id="8123753">a</span>&nbsp;<span class="op" id="8123755">!=</span>&nbsp;<span class="string" id="8123758">&#39;A&#39;</span>&nbsp;<span class="op" id="8123762">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123766">t</span><span class="op" id="8123767">.</span><span class="ident" id="8123768">Errorf</span><span class="op" id="8123774">(</span><span class="string" id="8123775">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8123796">,</span>&nbsp;<span class="ident" id="8123798">x</span><span class="op" id="8123799">.</span><span class="ident" id="8123800">G</span><span class="op" id="8123801">.</span><span class="ident" id="8123802">a</span><span class="op" id="8123803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8123806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8123809">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123849">b</span><span class="op" id="8123850">.</span><span class="ident" id="8123851">Reset</span><span class="op" id="8123856">(</span><span class="op" id="8123857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123860">gobber</span>&nbsp;<span class="op" id="8123867">:=</span>&nbsp;<span class="ident" id="8123870">Gobber</span><span class="op" id="8123876">(</span><span class="num" id="8123877">23</span><span class="op" id="8123879">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123882">bgobber</span>&nbsp;<span class="op" id="8123890">:=</span>&nbsp;<span class="ident" id="8123893">BinaryGobber</span><span class="op" id="8123905">(</span><span class="num" id="8123906">24</span><span class="op" id="8123908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123911">tgobber</span>&nbsp;<span class="op" id="8123919">:=</span>&nbsp;<span class="ident" id="8123922">TextGobber</span><span class="op" id="8123932">(</span><span class="num" id="8123933">25</span><span class="op" id="8123935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8123938">err</span>&nbsp;<span class="op" id="8123942">=</span>&nbsp;<span class="ident" id="8123944">enc</span><span class="op" id="8123947">.</span><span class="ident" id="8123948">Encode</span><span class="op" id="8123954">(</span><span class="ident" id="8123955">GobTest3</span><span class="op" id="8123963">{</span><span class="num" id="8123964">17</span><span class="op" id="8123966">,</span>&nbsp;<span class="op" id="8123968">&amp;</span><span class="ident" id="8123969">gobber</span><span class="op" id="8123975">,</span>&nbsp;<span class="op" id="8123977">&amp;</span><span class="ident" id="8123978">bgobber</span><span class="op" id="8123985">,</span>&nbsp;<span class="op" id="8123987">&amp;</span><span class="ident" id="8123988">tgobber</span><span class="op" id="8123995">}</span><span class="op" id="8123996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8123999">if</span>&nbsp;<span class="ident" id="8124002">err</span>&nbsp;<span class="op" id="8124006">!=</span>&nbsp;<span class="ident" id="8124009">nil</span>&nbsp;<span class="op" id="8124013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124017">t</span><span class="op" id="8124018">.</span><span class="ident" id="8124019">Fatal</span><span class="op" id="8124024">(</span><span class="string" id="8124025">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8124040">,</span>&nbsp;<span class="ident" id="8124042">err</span><span class="op" id="8124045">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124051">y</span>&nbsp;<span class="op" id="8124053">:=</span>&nbsp;<span class="builtinfunc" id="8124056">new</span><span class="op" id="8124059">(</span><span class="ident" id="8124060">GobTest3</span><span class="op" id="8124068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124071">err</span>&nbsp;<span class="op" id="8124075">=</span>&nbsp;<span class="ident" id="8124077">dec</span><span class="op" id="8124080">.</span><span class="ident" id="8124081">Decode</span><span class="op" id="8124087">(</span><span class="ident" id="8124088">y</span><span class="op" id="8124089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8124092">if</span>&nbsp;<span class="ident" id="8124095">err</span>&nbsp;<span class="op" id="8124099">!=</span>&nbsp;<span class="ident" id="8124102">nil</span>&nbsp;<span class="op" id="8124106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124110">t</span><span class="op" id="8124111">.</span><span class="ident" id="8124112">Fatal</span><span class="op" id="8124117">(</span><span class="string" id="8124118">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8124133">,</span>&nbsp;<span class="ident" id="8124135">err</span><span class="op" id="8124138">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8124144">if</span>&nbsp;<span class="op" id="8124147">*</span><span class="ident" id="8124148">y</span><span class="op" id="8124149">.</span><span class="ident" id="8124150">G</span>&nbsp;<span class="op" id="8124152">!=</span>&nbsp;<span class="num" id="8124155">23</span>&nbsp;<span class="op" id="8124158">||</span>&nbsp;<span class="op" id="8124161">*</span><span class="ident" id="8124162">y</span><span class="op" id="8124163">.</span><span class="ident" id="8124164">B</span>&nbsp;<span class="op" id="8124166">!=</span>&nbsp;<span class="num" id="8124169">24</span>&nbsp;<span class="op" id="8124172">||</span>&nbsp;<span class="op" id="8124175">*</span><span class="ident" id="8124176">y</span><span class="op" id="8124177">.</span><span class="ident" id="8124178">T</span>&nbsp;<span class="op" id="8124180">!=</span>&nbsp;<span class="num" id="8124183">25</span>&nbsp;<span class="op" id="8124186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124190">t</span><span class="op" id="8124191">.</span><span class="ident" id="8124192">Errorf</span><span class="op" id="8124198">(</span><span class="string" id="8124199">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8124220">,</span>&nbsp;<span class="op" id="8124222">*</span><span class="ident" id="8124223">y</span><span class="op" id="8124224">.</span><span class="ident" id="8124225">G</span><span class="op" id="8124226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124229">}</span><br>
<span class="lineno"></span><span class="op" id="8124231">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8124234">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8124301">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8124344">func</span>&nbsp;<span class="ident" id="8124349">TestGobEncoderValueField</span><span class="op" id="8124373">(</span><span class="ident" id="8124374">t</span>&nbsp;<span class="op" id="8124376">*</span><span class="ident" id="8124377">testing</span><span class="op" id="8124384">.</span><span class="ident" id="8124385">T</span><span class="op" id="8124386">)</span>&nbsp;<span class="op" id="8124388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124391">b</span>&nbsp;<span class="op" id="8124393">:=</span>&nbsp;<span class="builtinfunc" id="8124396">new</span><span class="op" id="8124399">(</span><span class="ident" id="8124400">bytes</span><span class="op" id="8124405">.</span><span class="ident" id="8124406">Buffer</span><span class="op" id="8124412">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8124415">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124453">enc</span>&nbsp;<span class="op" id="8124457">:=</span>&nbsp;<span class="ident" id="8124460">NewEncoder</span><span class="op" id="8124470">(</span><span class="ident" id="8124471">b</span><span class="op" id="8124472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124475">err</span>&nbsp;<span class="op" id="8124479">:=</span>&nbsp;<span class="ident" id="8124482">enc</span><span class="op" id="8124485">.</span><span class="ident" id="8124486">Encode</span><span class="op" id="8124492">(</span><span class="op" id="8124493">&amp;</span><span class="ident" id="8124494">GobTestValueEncDec</span><span class="op" id="8124512">{</span><span class="num" id="8124513">17</span><span class="op" id="8124515">,</span>&nbsp;<span class="ident" id="8124517">StringStruct</span><span class="op" id="8124529">{</span><span class="string" id="8124530">&#34;HIJKL&#34;</span><span class="op" id="8124537">}</span><span class="op" id="8124538">}</span><span class="op" id="8124539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8124542">if</span>&nbsp;<span class="ident" id="8124545">err</span>&nbsp;<span class="op" id="8124549">!=</span>&nbsp;<span class="ident" id="8124552">nil</span>&nbsp;<span class="op" id="8124556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124560">t</span><span class="op" id="8124561">.</span><span class="ident" id="8124562">Fatal</span><span class="op" id="8124567">(</span><span class="string" id="8124568">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8124583">,</span>&nbsp;<span class="ident" id="8124585">err</span><span class="op" id="8124588">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124594">dec</span>&nbsp;<span class="op" id="8124598">:=</span>&nbsp;<span class="ident" id="8124601">NewDecoder</span><span class="op" id="8124611">(</span><span class="ident" id="8124612">b</span><span class="op" id="8124613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124616">x</span>&nbsp;<span class="op" id="8124618">:=</span>&nbsp;<span class="builtinfunc" id="8124621">new</span><span class="op" id="8124624">(</span><span class="ident" id="8124625">GobTestValueEncDec</span><span class="op" id="8124643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124646">err</span>&nbsp;<span class="op" id="8124650">=</span>&nbsp;<span class="ident" id="8124652">dec</span><span class="op" id="8124655">.</span><span class="ident" id="8124656">Decode</span><span class="op" id="8124662">(</span><span class="ident" id="8124663">x</span><span class="op" id="8124664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8124667">if</span>&nbsp;<span class="ident" id="8124670">err</span>&nbsp;<span class="op" id="8124674">!=</span>&nbsp;<span class="ident" id="8124677">nil</span>&nbsp;<span class="op" id="8124681">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124685">t</span><span class="op" id="8124686">.</span><span class="ident" id="8124687">Fatal</span><span class="op" id="8124692">(</span><span class="string" id="8124693">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8124708">,</span>&nbsp;<span class="ident" id="8124710">err</span><span class="op" id="8124713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8124719">if</span>&nbsp;<span class="ident" id="8124722">x</span><span class="op" id="8124723">.</span><span class="ident" id="8124724">G</span><span class="op" id="8124725">.</span><span class="ident" id="8124726">s</span>&nbsp;<span class="op" id="8124728">!=</span>&nbsp;<span class="string" id="8124731">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8124739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124743">t</span><span class="op" id="8124744">.</span><span class="ident" id="8124745">Errorf</span><span class="op" id="8124751">(</span><span class="string" id="8124752">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8124777">,</span>&nbsp;<span class="ident" id="8124779">x</span><span class="op" id="8124780">.</span><span class="ident" id="8124781">G</span><span class="op" id="8124782">.</span><span class="ident" id="8124783">s</span><span class="op" id="8124784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8124787">}</span><br>
<span class="lineno">295</span><span class="op" id="8124789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8124792">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8124845">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8124881">func</span>&nbsp;<span class="ident" id="8124886">TestGobEncoderIndirectField</span><span class="op" id="8124913">(</span><span class="ident" id="8124914">t</span>&nbsp;<span class="op" id="8124916">*</span><span class="ident" id="8124917">testing</span><span class="op" id="8124924">.</span><span class="ident" id="8124925">T</span><span class="op" id="8124926">)</span>&nbsp;<span class="op" id="8124928">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124931">b</span>&nbsp;<span class="op" id="8124933">:=</span>&nbsp;<span class="builtinfunc" id="8124936">new</span><span class="op" id="8124939">(</span><span class="ident" id="8124940">bytes</span><span class="op" id="8124945">.</span><span class="ident" id="8124946">Buffer</span><span class="op" id="8124952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8124955">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8124993">enc</span>&nbsp;<span class="op" id="8124997">:=</span>&nbsp;<span class="ident" id="8125000">NewEncoder</span><span class="op" id="8125010">(</span><span class="ident" id="8125011">b</span><span class="op" id="8125012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125015">s</span>&nbsp;<span class="op" id="8125017">:=</span>&nbsp;<span class="op" id="8125020">&amp;</span><span class="ident" id="8125021">StringStruct</span><span class="op" id="8125033">{</span><span class="string" id="8125034">&#34;HIJKL&#34;</span><span class="op" id="8125041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125044">sp</span>&nbsp;<span class="op" id="8125047">:=</span>&nbsp;<span class="op" id="8125050">&amp;</span><span class="ident" id="8125051">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125054">err</span>&nbsp;<span class="op" id="8125058">:=</span>&nbsp;<span class="ident" id="8125061">enc</span><span class="op" id="8125064">.</span><span class="ident" id="8125065">Encode</span><span class="op" id="8125071">(</span><span class="ident" id="8125072">GobTestIndirectEncDec</span><span class="op" id="8125093">{</span><span class="num" id="8125094">17</span><span class="op" id="8125096">,</span>&nbsp;<span class="op" id="8125098">&amp;</span><span class="ident" id="8125099">sp</span><span class="op" id="8125101">}</span><span class="op" id="8125102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125105">if</span>&nbsp;<span class="ident" id="8125108">err</span>&nbsp;<span class="op" id="8125112">!=</span>&nbsp;<span class="ident" id="8125115">nil</span>&nbsp;<span class="op" id="8125119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125123">t</span><span class="op" id="8125124">.</span><span class="ident" id="8125125">Fatal</span><span class="op" id="8125130">(</span><span class="string" id="8125131">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8125146">,</span>&nbsp;<span class="ident" id="8125148">err</span><span class="op" id="8125151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125157">dec</span>&nbsp;<span class="op" id="8125161">:=</span>&nbsp;<span class="ident" id="8125164">NewDecoder</span><span class="op" id="8125174">(</span><span class="ident" id="8125175">b</span><span class="op" id="8125176">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125179">x</span>&nbsp;<span class="op" id="8125181">:=</span>&nbsp;<span class="builtinfunc" id="8125184">new</span><span class="op" id="8125187">(</span><span class="ident" id="8125188">GobTestIndirectEncDec</span><span class="op" id="8125209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125212">err</span>&nbsp;<span class="op" id="8125216">=</span>&nbsp;<span class="ident" id="8125218">dec</span><span class="op" id="8125221">.</span><span class="ident" id="8125222">Decode</span><span class="op" id="8125228">(</span><span class="ident" id="8125229">x</span><span class="op" id="8125230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125233">if</span>&nbsp;<span class="ident" id="8125236">err</span>&nbsp;<span class="op" id="8125240">!=</span>&nbsp;<span class="ident" id="8125243">nil</span>&nbsp;<span class="op" id="8125247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125251">t</span><span class="op" id="8125252">.</span><span class="ident" id="8125253">Fatal</span><span class="op" id="8125258">(</span><span class="string" id="8125259">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8125274">,</span>&nbsp;<span class="ident" id="8125276">err</span><span class="op" id="8125279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125282">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125285">if</span>&nbsp;<span class="op" id="8125288">(</span><span class="op" id="8125289">*</span><span class="op" id="8125290">*</span><span class="op" id="8125291">*</span><span class="ident" id="8125292">x</span><span class="op" id="8125293">.</span><span class="ident" id="8125294">G</span><span class="op" id="8125295">)</span><span class="op" id="8125296">.</span><span class="ident" id="8125297">s</span>&nbsp;<span class="op" id="8125299">!=</span>&nbsp;<span class="string" id="8125302">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8125310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125314">t</span><span class="op" id="8125315">.</span><span class="ident" id="8125316">Errorf</span><span class="op" id="8125322">(</span><span class="string" id="8125323">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8125348">,</span>&nbsp;<span class="op" id="8125350">(</span><span class="op" id="8125351">*</span><span class="op" id="8125352">*</span><span class="op" id="8125353">*</span><span class="ident" id="8125354">x</span><span class="op" id="8125355">.</span><span class="ident" id="8125356">G</span><span class="op" id="8125357">)</span><span class="op" id="8125358">.</span><span class="ident" id="8125359">s</span><span class="op" id="8125360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125363">}</span><br>
<span class="lineno"></span><span class="op" id="8125365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8125368">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8125409">func</span>&nbsp;<span class="ident" id="8125414">TestGobEncoderArrayField</span><span class="op" id="8125438">(</span><span class="ident" id="8125439">t</span>&nbsp;<span class="op" id="8125441">*</span><span class="ident" id="8125442">testing</span><span class="op" id="8125449">.</span><span class="ident" id="8125450">T</span><span class="op" id="8125451">)</span>&nbsp;<span class="op" id="8125453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125456">b</span>&nbsp;<span class="op" id="8125458">:=</span>&nbsp;<span class="builtinfunc" id="8125461">new</span><span class="op" id="8125464">(</span><span class="ident" id="8125465">bytes</span><span class="op" id="8125470">.</span><span class="ident" id="8125471">Buffer</span><span class="op" id="8125477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125480">enc</span>&nbsp;<span class="op" id="8125484">:=</span>&nbsp;<span class="ident" id="8125487">NewEncoder</span><span class="op" id="8125497">(</span><span class="ident" id="8125498">b</span><span class="op" id="8125499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125502">var</span>&nbsp;<span class="ident" id="8125506">a</span>&nbsp;<span class="ident" id="8125508">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125528">a</span><span class="op" id="8125529">.</span><span class="ident" id="8125530">X</span>&nbsp;<span class="op" id="8125532">=</span>&nbsp;<span class="num" id="8125534">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125538">for</span>&nbsp;<span class="ident" id="8125542">i</span>&nbsp;<span class="op" id="8125544">:=</span>&nbsp;<span class="keyword" id="8125547">range</span>&nbsp;<span class="ident" id="8125553">a</span><span class="op" id="8125554">.</span><span class="ident" id="8125555">A</span><span class="op" id="8125556">.</span><span class="ident" id="8125557">a</span>&nbsp;<span class="op" id="8125559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125563">a</span><span class="op" id="8125564">.</span><span class="ident" id="8125565">A</span><span class="op" id="8125566">.</span><span class="ident" id="8125567">a</span><span class="op" id="8125568">[</span><span class="ident" id="8125569">i</span><span class="op" id="8125570">]</span>&nbsp;<span class="op" id="8125572">=</span>&nbsp;<span class="builtintype" id="8125574">byte</span><span class="op" id="8125578">(</span><span class="ident" id="8125579">i</span><span class="op" id="8125580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125586">err</span>&nbsp;<span class="op" id="8125590">:=</span>&nbsp;<span class="ident" id="8125593">enc</span><span class="op" id="8125596">.</span><span class="ident" id="8125597">Encode</span><span class="op" id="8125603">(</span><span class="op" id="8125604">&amp;</span><span class="ident" id="8125605">a</span><span class="op" id="8125606">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125609">if</span>&nbsp;<span class="ident" id="8125612">err</span>&nbsp;<span class="op" id="8125616">!=</span>&nbsp;<span class="ident" id="8125619">nil</span>&nbsp;<span class="op" id="8125623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125627">t</span><span class="op" id="8125628">.</span><span class="ident" id="8125629">Fatal</span><span class="op" id="8125634">(</span><span class="string" id="8125635">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8125650">,</span>&nbsp;<span class="ident" id="8125652">err</span><span class="op" id="8125655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125661">dec</span>&nbsp;<span class="op" id="8125665">:=</span>&nbsp;<span class="ident" id="8125668">NewDecoder</span><span class="op" id="8125678">(</span><span class="ident" id="8125679">b</span><span class="op" id="8125680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125683">x</span>&nbsp;<span class="op" id="8125685">:=</span>&nbsp;<span class="builtinfunc" id="8125688">new</span><span class="op" id="8125691">(</span><span class="ident" id="8125692">GobTestArrayEncDec</span><span class="op" id="8125710">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125713">err</span>&nbsp;<span class="op" id="8125717">=</span>&nbsp;<span class="ident" id="8125719">dec</span><span class="op" id="8125722">.</span><span class="ident" id="8125723">Decode</span><span class="op" id="8125729">(</span><span class="ident" id="8125730">x</span><span class="op" id="8125731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125734">if</span>&nbsp;<span class="ident" id="8125737">err</span>&nbsp;<span class="op" id="8125741">!=</span>&nbsp;<span class="ident" id="8125744">nil</span>&nbsp;<span class="op" id="8125748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125752">t</span><span class="op" id="8125753">.</span><span class="ident" id="8125754">Fatal</span><span class="op" id="8125759">(</span><span class="string" id="8125760">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8125775">,</span>&nbsp;<span class="ident" id="8125777">err</span><span class="op" id="8125780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125786">for</span>&nbsp;<span class="ident" id="8125790">i</span><span class="op" id="8125791">,</span>&nbsp;<span class="ident" id="8125793">v</span>&nbsp;<span class="op" id="8125795">:=</span>&nbsp;<span class="keyword" id="8125798">range</span>&nbsp;<span class="ident" id="8125804">x</span><span class="op" id="8125805">.</span><span class="ident" id="8125806">A</span><span class="op" id="8125807">.</span><span class="ident" id="8125808">a</span>&nbsp;<span class="op" id="8125810">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125814">if</span>&nbsp;<span class="ident" id="8125817">v</span>&nbsp;<span class="op" id="8125819">!=</span>&nbsp;<span class="builtintype" id="8125822">byte</span><span class="op" id="8125826">(</span><span class="ident" id="8125827">i</span><span class="op" id="8125828">)</span>&nbsp;<span class="op" id="8125830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8125835">t</span><span class="op" id="8125836">.</span><span class="ident" id="8125837">Errorf</span><span class="op" id="8125843">(</span><span class="string" id="8125844">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8125864">,</span>&nbsp;<span class="builtintype" id="8125866">byte</span><span class="op" id="8125870">(</span><span class="ident" id="8125871">i</span><span class="op" id="8125872">)</span><span class="op" id="8125873">,</span>&nbsp;<span class="ident" id="8125875">v</span><span class="op" id="8125876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8125881">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8125892">}</span><br>
<span class="lineno">345</span><span class="op" id="8125894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8125897">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8125951">func</span>&nbsp;<span class="ident" id="8125956">TestGobEncoderIndirectArrayField</span><span class="op" id="8125988">(</span><span class="ident" id="8125989">t</span>&nbsp;<span class="op" id="8125991">*</span><span class="ident" id="8125992">testing</span><span class="op" id="8125999">.</span><span class="ident" id="8126000">T</span><span class="op" id="8126001">)</span>&nbsp;<span class="op" id="8126003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126006">b</span>&nbsp;<span class="op" id="8126008">:=</span>&nbsp;<span class="builtinfunc" id="8126011">new</span><span class="op" id="8126014">(</span><span class="ident" id="8126015">bytes</span><span class="op" id="8126020">.</span><span class="ident" id="8126021">Buffer</span><span class="op" id="8126027">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126030">enc</span>&nbsp;<span class="op" id="8126034">:=</span>&nbsp;<span class="ident" id="8126037">NewEncoder</span><span class="op" id="8126047">(</span><span class="ident" id="8126048">b</span><span class="op" id="8126049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126052">var</span>&nbsp;<span class="ident" id="8126056">a</span>&nbsp;<span class="ident" id="8126058">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126086">a</span><span class="op" id="8126087">.</span><span class="ident" id="8126088">X</span>&nbsp;<span class="op" id="8126090">=</span>&nbsp;<span class="num" id="8126092">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126096">var</span>&nbsp;<span class="ident" id="8126100">array</span>&nbsp;<span class="ident" id="8126106">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126119">ap</span>&nbsp;<span class="op" id="8126122">:=</span>&nbsp;<span class="op" id="8126125">&amp;</span><span class="ident" id="8126126">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126133">app</span>&nbsp;<span class="op" id="8126137">:=</span>&nbsp;<span class="op" id="8126140">&amp;</span><span class="ident" id="8126141">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126145">a</span><span class="op" id="8126146">.</span><span class="ident" id="8126147">A</span>&nbsp;<span class="op" id="8126149">=</span>&nbsp;<span class="op" id="8126151">&amp;</span><span class="ident" id="8126152">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126157">for</span>&nbsp;<span class="ident" id="8126161">i</span>&nbsp;<span class="op" id="8126163">:=</span>&nbsp;<span class="keyword" id="8126166">range</span>&nbsp;<span class="ident" id="8126172">array</span><span class="op" id="8126177">.</span><span class="ident" id="8126178">a</span>&nbsp;<span class="op" id="8126180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126184">array</span><span class="op" id="8126189">.</span><span class="ident" id="8126190">a</span><span class="op" id="8126191">[</span><span class="ident" id="8126192">i</span><span class="op" id="8126193">]</span>&nbsp;<span class="op" id="8126195">=</span>&nbsp;<span class="builtintype" id="8126197">byte</span><span class="op" id="8126201">(</span><span class="ident" id="8126202">i</span><span class="op" id="8126203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8126206">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126209">err</span>&nbsp;<span class="op" id="8126213">:=</span>&nbsp;<span class="ident" id="8126216">enc</span><span class="op" id="8126219">.</span><span class="ident" id="8126220">Encode</span><span class="op" id="8126226">(</span><span class="ident" id="8126227">a</span><span class="op" id="8126228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126231">if</span>&nbsp;<span class="ident" id="8126234">err</span>&nbsp;<span class="op" id="8126238">!=</span>&nbsp;<span class="ident" id="8126241">nil</span>&nbsp;<span class="op" id="8126245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126249">t</span><span class="op" id="8126250">.</span><span class="ident" id="8126251">Fatal</span><span class="op" id="8126256">(</span><span class="string" id="8126257">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8126272">,</span>&nbsp;<span class="ident" id="8126274">err</span><span class="op" id="8126277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8126280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126283">dec</span>&nbsp;<span class="op" id="8126287">:=</span>&nbsp;<span class="ident" id="8126290">NewDecoder</span><span class="op" id="8126300">(</span><span class="ident" id="8126301">b</span><span class="op" id="8126302">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126305">x</span>&nbsp;<span class="op" id="8126307">:=</span>&nbsp;<span class="builtinfunc" id="8126310">new</span><span class="op" id="8126313">(</span><span class="ident" id="8126314">GobTestIndirectArrayEncDec</span><span class="op" id="8126340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126343">err</span>&nbsp;<span class="op" id="8126347">=</span>&nbsp;<span class="ident" id="8126349">dec</span><span class="op" id="8126352">.</span><span class="ident" id="8126353">Decode</span><span class="op" id="8126359">(</span><span class="ident" id="8126360">x</span><span class="op" id="8126361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126364">if</span>&nbsp;<span class="ident" id="8126367">err</span>&nbsp;<span class="op" id="8126371">!=</span>&nbsp;<span class="ident" id="8126374">nil</span>&nbsp;<span class="op" id="8126378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126382">t</span><span class="op" id="8126383">.</span><span class="ident" id="8126384">Fatal</span><span class="op" id="8126389">(</span><span class="string" id="8126390">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8126405">,</span>&nbsp;<span class="ident" id="8126407">err</span><span class="op" id="8126410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8126413">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126416">for</span>&nbsp;<span class="ident" id="8126420">i</span><span class="op" id="8126421">,</span>&nbsp;<span class="ident" id="8126423">v</span>&nbsp;<span class="op" id="8126425">:=</span>&nbsp;<span class="keyword" id="8126428">range</span>&nbsp;<span class="op" id="8126434">(</span><span class="op" id="8126435">*</span><span class="op" id="8126436">*</span><span class="op" id="8126437">*</span><span class="ident" id="8126438">x</span><span class="op" id="8126439">.</span><span class="ident" id="8126440">A</span><span class="op" id="8126441">)</span><span class="op" id="8126442">.</span><span class="ident" id="8126443">a</span>&nbsp;<span class="op" id="8126445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126449">if</span>&nbsp;<span class="ident" id="8126452">v</span>&nbsp;<span class="op" id="8126454">!=</span>&nbsp;<span class="builtintype" id="8126457">byte</span><span class="op" id="8126461">(</span><span class="ident" id="8126462">i</span><span class="op" id="8126463">)</span>&nbsp;<span class="op" id="8126465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126470">t</span><span class="op" id="8126471">.</span><span class="ident" id="8126472">Errorf</span><span class="op" id="8126478">(</span><span class="string" id="8126479">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8126499">,</span>&nbsp;<span class="builtintype" id="8126501">byte</span><span class="op" id="8126505">(</span><span class="ident" id="8126506">i</span><span class="op" id="8126507">)</span><span class="op" id="8126508">,</span>&nbsp;<span class="ident" id="8126510">v</span><span class="op" id="8126511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8126516">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8126524">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8126527">}</span><br>
<span class="lineno"></span><span class="op" id="8126529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8126532">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8126594">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8126657">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8126718">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8126778">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8126801">func</span>&nbsp;<span class="ident" id="8126806">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8126841">(</span><span class="ident" id="8126842">t</span>&nbsp;<span class="op" id="8126844">*</span><span class="ident" id="8126845">testing</span><span class="op" id="8126852">.</span><span class="ident" id="8126853">T</span><span class="op" id="8126854">)</span>&nbsp;<span class="op" id="8126856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8126859">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126903">b</span>&nbsp;<span class="op" id="8126905">:=</span>&nbsp;<span class="builtinfunc" id="8126908">new</span><span class="op" id="8126911">(</span><span class="ident" id="8126912">bytes</span><span class="op" id="8126917">.</span><span class="ident" id="8126918">Buffer</span><span class="op" id="8126924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126927">enc</span>&nbsp;<span class="op" id="8126931">:=</span>&nbsp;<span class="ident" id="8126934">NewEncoder</span><span class="op" id="8126944">(</span><span class="ident" id="8126945">b</span><span class="op" id="8126946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8126949">err</span>&nbsp;<span class="op" id="8126953">:=</span>&nbsp;<span class="ident" id="8126956">enc</span><span class="op" id="8126959">.</span><span class="ident" id="8126960">Encode</span><span class="op" id="8126966">(</span><span class="ident" id="8126967">GobTest1</span><span class="op" id="8126975">{</span><span class="num" id="8126976">17</span><span class="op" id="8126978">,</span>&nbsp;<span class="op" id="8126980">&amp;</span><span class="ident" id="8126981">StringStruct</span><span class="op" id="8126993">{</span><span class="string" id="8126994">&#34;ABC&#34;</span><span class="op" id="8126999">}</span><span class="op" id="8127000">}</span><span class="op" id="8127001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127004">if</span>&nbsp;<span class="ident" id="8127007">err</span>&nbsp;<span class="op" id="8127011">!=</span>&nbsp;<span class="ident" id="8127014">nil</span>&nbsp;<span class="op" id="8127018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127022">t</span><span class="op" id="8127023">.</span><span class="ident" id="8127024">Fatal</span><span class="op" id="8127029">(</span><span class="string" id="8127030">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8127045">,</span>&nbsp;<span class="ident" id="8127047">err</span><span class="op" id="8127050">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127056">dec</span>&nbsp;<span class="op" id="8127060">:=</span>&nbsp;<span class="ident" id="8127063">NewDecoder</span><span class="op" id="8127073">(</span><span class="ident" id="8127074">b</span><span class="op" id="8127075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127078">x</span>&nbsp;<span class="op" id="8127080">:=</span>&nbsp;<span class="builtinfunc" id="8127083">new</span><span class="op" id="8127086">(</span><span class="ident" id="8127087">GobTest0</span><span class="op" id="8127095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127098">err</span>&nbsp;<span class="op" id="8127102">=</span>&nbsp;<span class="ident" id="8127104">dec</span><span class="op" id="8127107">.</span><span class="ident" id="8127108">Decode</span><span class="op" id="8127114">(</span><span class="ident" id="8127115">x</span><span class="op" id="8127116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127119">if</span>&nbsp;<span class="ident" id="8127122">err</span>&nbsp;<span class="op" id="8127126">!=</span>&nbsp;<span class="ident" id="8127129">nil</span>&nbsp;<span class="op" id="8127133">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127137">t</span><span class="op" id="8127138">.</span><span class="ident" id="8127139">Fatal</span><span class="op" id="8127144">(</span><span class="string" id="8127145">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8127160">,</span>&nbsp;<span class="ident" id="8127162">err</span><span class="op" id="8127165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127171">if</span>&nbsp;<span class="ident" id="8127174">x</span><span class="op" id="8127175">.</span><span class="ident" id="8127176">G</span><span class="op" id="8127177">.</span><span class="ident" id="8127178">a</span>&nbsp;<span class="op" id="8127180">!=</span>&nbsp;<span class="string" id="8127183">&#39;A&#39;</span>&nbsp;<span class="op" id="8127187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127191">t</span><span class="op" id="8127192">.</span><span class="ident" id="8127193">Errorf</span><span class="op" id="8127199">(</span><span class="string" id="8127200">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8127221">,</span>&nbsp;<span class="ident" id="8127223">x</span><span class="op" id="8127224">.</span><span class="ident" id="8127225">G</span><span class="op" id="8127226">.</span><span class="ident" id="8127227">a</span><span class="op" id="8127228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127231">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8127234">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127296">b</span><span class="op" id="8127297">.</span><span class="ident" id="8127298">Reset</span><span class="op" id="8127303">(</span><span class="op" id="8127304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127307">err</span>&nbsp;<span class="op" id="8127311">=</span>&nbsp;<span class="ident" id="8127313">enc</span><span class="op" id="8127316">.</span><span class="ident" id="8127317">Encode</span><span class="op" id="8127323">(</span><span class="ident" id="8127324">GobTest0</span><span class="op" id="8127332">{</span><span class="num" id="8127333">17</span><span class="op" id="8127335">,</span>&nbsp;<span class="op" id="8127337">&amp;</span><span class="ident" id="8127338">ByteStruct</span><span class="op" id="8127348">{</span><span class="string" id="8127349">&#39;X&#39;</span><span class="op" id="8127352">}</span><span class="op" id="8127353">}</span><span class="op" id="8127354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127357">if</span>&nbsp;<span class="ident" id="8127360">err</span>&nbsp;<span class="op" id="8127364">!=</span>&nbsp;<span class="ident" id="8127367">nil</span>&nbsp;<span class="op" id="8127371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127375">t</span><span class="op" id="8127376">.</span><span class="ident" id="8127377">Fatal</span><span class="op" id="8127382">(</span><span class="string" id="8127383">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8127398">,</span>&nbsp;<span class="ident" id="8127400">err</span><span class="op" id="8127403">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127409">y</span>&nbsp;<span class="op" id="8127411">:=</span>&nbsp;<span class="builtinfunc" id="8127414">new</span><span class="op" id="8127417">(</span><span class="ident" id="8127418">GobTest1</span><span class="op" id="8127426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127429">err</span>&nbsp;<span class="op" id="8127433">=</span>&nbsp;<span class="ident" id="8127435">dec</span><span class="op" id="8127438">.</span><span class="ident" id="8127439">Decode</span><span class="op" id="8127445">(</span><span class="ident" id="8127446">y</span><span class="op" id="8127447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127450">if</span>&nbsp;<span class="ident" id="8127453">err</span>&nbsp;<span class="op" id="8127457">!=</span>&nbsp;<span class="ident" id="8127460">nil</span>&nbsp;<span class="op" id="8127464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127468">t</span><span class="op" id="8127469">.</span><span class="ident" id="8127470">Fatal</span><span class="op" id="8127475">(</span><span class="string" id="8127476">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8127491">,</span>&nbsp;<span class="ident" id="8127493">err</span><span class="op" id="8127496">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127502">if</span>&nbsp;<span class="ident" id="8127505">y</span><span class="op" id="8127506">.</span><span class="ident" id="8127507">G</span><span class="op" id="8127508">.</span><span class="ident" id="8127509">s</span>&nbsp;<span class="op" id="8127511">!=</span>&nbsp;<span class="string" id="8127514">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8127520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127524">t</span><span class="op" id="8127525">.</span><span class="ident" id="8127526">Fatalf</span><span class="op" id="8127532">(</span><span class="string" id="8127533">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8127556">,</span>&nbsp;<span class="ident" id="8127558">y</span><span class="op" id="8127559">.</span><span class="ident" id="8127560">G</span><span class="op" id="8127561">.</span><span class="ident" id="8127562">s</span><span class="op" id="8127563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127566">}</span><br>
<span class="lineno"></span><span class="op" id="8127568">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8127571">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8127633">func</span>&nbsp;<span class="ident" id="8127638">TestGobEncoderValueEncoder</span><span class="op" id="8127664">(</span><span class="ident" id="8127665">t</span>&nbsp;<span class="op" id="8127667">*</span><span class="ident" id="8127668">testing</span><span class="op" id="8127675">.</span><span class="ident" id="8127676">T</span><span class="op" id="8127677">)</span>&nbsp;<span class="op" id="8127679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8127682">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127726">b</span>&nbsp;<span class="op" id="8127728">:=</span>&nbsp;<span class="builtinfunc" id="8127731">new</span><span class="op" id="8127734">(</span><span class="ident" id="8127735">bytes</span><span class="op" id="8127740">.</span><span class="ident" id="8127741">Buffer</span><span class="op" id="8127747">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127750">enc</span>&nbsp;<span class="op" id="8127754">:=</span>&nbsp;<span class="ident" id="8127757">NewEncoder</span><span class="op" id="8127767">(</span><span class="ident" id="8127768">b</span><span class="op" id="8127769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127772">err</span>&nbsp;<span class="op" id="8127776">:=</span>&nbsp;<span class="ident" id="8127779">enc</span><span class="op" id="8127782">.</span><span class="ident" id="8127783">Encode</span><span class="op" id="8127789">(</span><span class="ident" id="8127790">GobTest4</span><span class="op" id="8127798">{</span><span class="num" id="8127799">17</span><span class="op" id="8127801">,</span>&nbsp;<span class="ident" id="8127803">ValueGobber</span><span class="op" id="8127814">(</span><span class="string" id="8127815">&#34;hello&#34;</span><span class="op" id="8127822">)</span><span class="op" id="8127823">,</span>&nbsp;<span class="ident" id="8127825">BinaryValueGobber</span><span class="op" id="8127842">(</span><span class="string" id="8127843">&#34;Καλημέρα&#34;</span><span class="op" id="8127861">)</span><span class="op" id="8127862">,</span>&nbsp;<span class="ident" id="8127864">TextValueGobber</span><span class="op" id="8127879">(</span><span class="string" id="8127880">&#34;こんにちは&#34;</span><span class="op" id="8127897">)</span><span class="op" id="8127898">}</span><span class="op" id="8127899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8127902">if</span>&nbsp;<span class="ident" id="8127905">err</span>&nbsp;<span class="op" id="8127909">!=</span>&nbsp;<span class="ident" id="8127912">nil</span>&nbsp;<span class="op" id="8127916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127920">t</span><span class="op" id="8127921">.</span><span class="ident" id="8127922">Fatal</span><span class="op" id="8127927">(</span><span class="string" id="8127928">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8127943">,</span>&nbsp;<span class="ident" id="8127945">err</span><span class="op" id="8127948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8127951">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127954">dec</span>&nbsp;<span class="op" id="8127958">:=</span>&nbsp;<span class="ident" id="8127961">NewDecoder</span><span class="op" id="8127971">(</span><span class="ident" id="8127972">b</span><span class="op" id="8127973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127976">x</span>&nbsp;<span class="op" id="8127978">:=</span>&nbsp;<span class="builtinfunc" id="8127981">new</span><span class="op" id="8127984">(</span><span class="ident" id="8127985">GobTest5</span><span class="op" id="8127993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8127996">err</span>&nbsp;<span class="op" id="8128000">=</span>&nbsp;<span class="ident" id="8128002">dec</span><span class="op" id="8128005">.</span><span class="ident" id="8128006">Decode</span><span class="op" id="8128012">(</span><span class="ident" id="8128013">x</span><span class="op" id="8128014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8128017">if</span>&nbsp;<span class="ident" id="8128020">err</span>&nbsp;<span class="op" id="8128024">!=</span>&nbsp;<span class="ident" id="8128027">nil</span>&nbsp;<span class="op" id="8128031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128035">t</span><span class="op" id="8128036">.</span><span class="ident" id="8128037">Fatal</span><span class="op" id="8128042">(</span><span class="string" id="8128043">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8128058">,</span>&nbsp;<span class="ident" id="8128060">err</span><span class="op" id="8128063">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8128066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8128069">if</span>&nbsp;<span class="op" id="8128072">*</span><span class="ident" id="8128073">x</span><span class="op" id="8128074">.</span><span class="ident" id="8128075">V</span>&nbsp;<span class="op" id="8128077">!=</span>&nbsp;<span class="string" id="8128080">&#34;hello&#34;</span>&nbsp;<span class="op" id="8128088">||</span>&nbsp;<span class="op" id="8128091">*</span><span class="ident" id="8128092">x</span><span class="op" id="8128093">.</span><span class="ident" id="8128094">BV</span>&nbsp;<span class="op" id="8128097">!=</span>&nbsp;<span class="string" id="8128100">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="8128119">||</span>&nbsp;<span class="op" id="8128122">*</span><span class="ident" id="8128123">x</span><span class="op" id="8128124">.</span><span class="ident" id="8128125">TV</span>&nbsp;<span class="op" id="8128128">!=</span>&nbsp;<span class="string" id="8128131">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="8128149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128153">t</span><span class="op" id="8128154">.</span><span class="ident" id="8128155">Errorf</span><span class="op" id="8128161">(</span><span class="string" id="8128162">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8128187">,</span>&nbsp;<span class="op" id="8128189">*</span><span class="ident" id="8128190">x</span><span class="op" id="8128191">.</span><span class="ident" id="8128192">V</span><span class="op" id="8128193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8128196">}</span><br>
<span class="lineno"></span><span class="op" id="8128198">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8128201">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8128269">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8128310">func</span>&nbsp;<span class="ident" id="8128315">TestGobEncoderValueThenPointer</span><span class="op" id="8128345">(</span><span class="ident" id="8128346">t</span>&nbsp;<span class="op" id="8128348">*</span><span class="ident" id="8128349">testing</span><span class="op" id="8128356">.</span><span class="ident" id="8128357">T</span><span class="op" id="8128358">)</span>&nbsp;<span class="op" id="8128360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128363">v</span>&nbsp;<span class="op" id="8128365">:=</span>&nbsp;<span class="ident" id="8128368">ValueGobber</span><span class="op" id="8128379">(</span><span class="string" id="8128380">&#34;forty-two&#34;</span><span class="op" id="8128391">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128394">w</span>&nbsp;<span class="op" id="8128396">:=</span>&nbsp;<span class="ident" id="8128399">ValueGobber</span><span class="op" id="8128410">(</span><span class="string" id="8128411">&#34;six-by-nine&#34;</span><span class="op" id="8128424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128427">bv</span>&nbsp;<span class="op" id="8128430">:=</span>&nbsp;<span class="ident" id="8128433">BinaryValueGobber</span><span class="op" id="8128450">(</span><span class="string" id="8128451">&#34;1nanocentury&#34;</span><span class="op" id="8128465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128468">bw</span>&nbsp;<span class="op" id="8128471">:=</span>&nbsp;<span class="ident" id="8128474">BinaryValueGobber</span><span class="op" id="8128491">(</span><span class="string" id="8128492">&#34;πseconds&#34;</span><span class="op" id="8128503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128506">tv</span>&nbsp;<span class="op" id="8128509">:=</span>&nbsp;<span class="ident" id="8128512">TextValueGobber</span><span class="op" id="8128527">(</span><span class="string" id="8128528">&#34;gravitationalacceleration&#34;</span><span class="op" id="8128555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128558">tw</span>&nbsp;<span class="op" id="8128561">:=</span>&nbsp;<span class="ident" id="8128564">TextValueGobber</span><span class="op" id="8128579">(</span><span class="string" id="8128580">&#34;π²ft/s²&#34;</span><span class="op" id="8128592">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8128596">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8128667">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128731">b</span>&nbsp;<span class="op" id="8128733">:=</span>&nbsp;<span class="builtinfunc" id="8128736">new</span><span class="op" id="8128739">(</span><span class="ident" id="8128740">bytes</span><span class="op" id="8128745">.</span><span class="ident" id="8128746">Buffer</span><span class="op" id="8128752">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128755">enc</span>&nbsp;<span class="op" id="8128759">:=</span>&nbsp;<span class="ident" id="8128762">NewEncoder</span><span class="op" id="8128772">(</span><span class="ident" id="8128773">b</span><span class="op" id="8128774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8128777">if</span>&nbsp;<span class="ident" id="8128780">err</span>&nbsp;<span class="op" id="8128784">:=</span>&nbsp;<span class="ident" id="8128787">enc</span><span class="op" id="8128790">.</span><span class="ident" id="8128791">Encode</span><span class="op" id="8128797">(</span><span class="ident" id="8128798">GobTest6</span><span class="op" id="8128806">{</span><span class="num" id="8128807">42</span><span class="op" id="8128809">,</span>&nbsp;<span class="ident" id="8128811">v</span><span class="op" id="8128812">,</span>&nbsp;<span class="op" id="8128814">&amp;</span><span class="ident" id="8128815">w</span><span class="op" id="8128816">,</span>&nbsp;<span class="ident" id="8128818">bv</span><span class="op" id="8128820">,</span>&nbsp;<span class="op" id="8128822">&amp;</span><span class="ident" id="8128823">bw</span><span class="op" id="8128825">,</span>&nbsp;<span class="ident" id="8128827">tv</span><span class="op" id="8128829">,</span>&nbsp;<span class="op" id="8128831">&amp;</span><span class="ident" id="8128832">tw</span><span class="op" id="8128834">}</span><span class="op" id="8128835">)</span><span class="op" id="8128836">;</span>&nbsp;<span class="ident" id="8128838">err</span>&nbsp;<span class="op" id="8128842">!=</span>&nbsp;<span class="ident" id="8128845">nil</span>&nbsp;<span class="op" id="8128849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128853">t</span><span class="op" id="8128854">.</span><span class="ident" id="8128855">Fatal</span><span class="op" id="8128860">(</span><span class="string" id="8128861">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8128876">,</span>&nbsp;<span class="ident" id="8128878">err</span><span class="op" id="8128881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8128884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128887">dec</span>&nbsp;<span class="op" id="8128891">:=</span>&nbsp;<span class="ident" id="8128894">NewDecoder</span><span class="op" id="8128904">(</span><span class="ident" id="8128905">b</span><span class="op" id="8128906">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128909">x</span>&nbsp;<span class="op" id="8128911">:=</span>&nbsp;<span class="builtinfunc" id="8128914">new</span><span class="op" id="8128917">(</span><span class="ident" id="8128918">GobTest6</span><span class="op" id="8128926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8128929">if</span>&nbsp;<span class="ident" id="8128932">err</span>&nbsp;<span class="op" id="8128936">:=</span>&nbsp;<span class="ident" id="8128939">dec</span><span class="op" id="8128942">.</span><span class="ident" id="8128943">Decode</span><span class="op" id="8128949">(</span><span class="ident" id="8128950">x</span><span class="op" id="8128951">)</span><span class="op" id="8128952">;</span>&nbsp;<span class="ident" id="8128954">err</span>&nbsp;<span class="op" id="8128958">!=</span>&nbsp;<span class="ident" id="8128961">nil</span>&nbsp;<span class="op" id="8128965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8128969">t</span><span class="op" id="8128970">.</span><span class="ident" id="8128971">Fatal</span><span class="op" id="8128976">(</span><span class="string" id="8128977">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8128992">,</span>&nbsp;<span class="ident" id="8128994">err</span><span class="op" id="8128997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129004">if</span>&nbsp;<span class="ident" id="8129007">got</span><span class="op" id="8129010">,</span>&nbsp;<span class="ident" id="8129012">want</span>&nbsp;<span class="op" id="8129017">:=</span>&nbsp;<span class="ident" id="8129020">x</span><span class="op" id="8129021">.</span><span class="ident" id="8129022">V</span><span class="op" id="8129023">,</span>&nbsp;<span class="ident" id="8129025">v</span><span class="op" id="8129026">;</span>&nbsp;<span class="ident" id="8129028">got</span>&nbsp;<span class="op" id="8129032">!=</span>&nbsp;<span class="ident" id="8129035">want</span>&nbsp;<span class="op" id="8129040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129044">t</span><span class="op" id="8129045">.</span><span class="ident" id="8129046">Errorf</span><span class="op" id="8129052">(</span><span class="string" id="8129053">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129070">,</span>&nbsp;<span class="ident" id="8129072">got</span><span class="op" id="8129075">,</span>&nbsp;<span class="ident" id="8129077">want</span><span class="op" id="8129081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129087">if</span>&nbsp;<span class="ident" id="8129090">got</span><span class="op" id="8129093">,</span>&nbsp;<span class="ident" id="8129095">want</span>&nbsp;<span class="op" id="8129100">:=</span>&nbsp;<span class="ident" id="8129103">x</span><span class="op" id="8129104">.</span><span class="ident" id="8129105">W</span><span class="op" id="8129106">,</span>&nbsp;<span class="ident" id="8129108">w</span><span class="op" id="8129109">;</span>&nbsp;<span class="ident" id="8129111">got</span>&nbsp;<span class="op" id="8129115">==</span>&nbsp;<span class="ident" id="8129118">nil</span>&nbsp;<span class="op" id="8129122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129126">t</span><span class="op" id="8129127">.</span><span class="ident" id="8129128">Errorf</span><span class="op" id="8129134">(</span><span class="string" id="8129135">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129153">,</span>&nbsp;<span class="ident" id="8129155">want</span><span class="op" id="8129159">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129162">}</span>&nbsp;<span class="keyword" id="8129164">else</span>&nbsp;<span class="keyword" id="8129169">if</span>&nbsp;<span class="op" id="8129172">*</span><span class="ident" id="8129173">got</span>&nbsp;<span class="op" id="8129177">!=</span>&nbsp;<span class="ident" id="8129180">want</span>&nbsp;<span class="op" id="8129185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129189">t</span><span class="op" id="8129190">.</span><span class="ident" id="8129191">Errorf</span><span class="op" id="8129197">(</span><span class="string" id="8129198">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129215">,</span>&nbsp;<span class="op" id="8129217">*</span><span class="ident" id="8129218">got</span><span class="op" id="8129221">,</span>&nbsp;<span class="ident" id="8129223">want</span><span class="op" id="8129227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129234">if</span>&nbsp;<span class="ident" id="8129237">got</span><span class="op" id="8129240">,</span>&nbsp;<span class="ident" id="8129242">want</span>&nbsp;<span class="op" id="8129247">:=</span>&nbsp;<span class="ident" id="8129250">x</span><span class="op" id="8129251">.</span><span class="ident" id="8129252">BV</span><span class="op" id="8129254">,</span>&nbsp;<span class="ident" id="8129256">bv</span><span class="op" id="8129258">;</span>&nbsp;<span class="ident" id="8129260">got</span>&nbsp;<span class="op" id="8129264">!=</span>&nbsp;<span class="ident" id="8129267">want</span>&nbsp;<span class="op" id="8129272">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129276">t</span><span class="op" id="8129277">.</span><span class="ident" id="8129278">Errorf</span><span class="op" id="8129284">(</span><span class="string" id="8129285">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129303">,</span>&nbsp;<span class="ident" id="8129305">got</span><span class="op" id="8129308">,</span>&nbsp;<span class="ident" id="8129310">want</span><span class="op" id="8129314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129320">if</span>&nbsp;<span class="ident" id="8129323">got</span><span class="op" id="8129326">,</span>&nbsp;<span class="ident" id="8129328">want</span>&nbsp;<span class="op" id="8129333">:=</span>&nbsp;<span class="ident" id="8129336">x</span><span class="op" id="8129337">.</span><span class="ident" id="8129338">BW</span><span class="op" id="8129340">,</span>&nbsp;<span class="ident" id="8129342">bw</span><span class="op" id="8129344">;</span>&nbsp;<span class="ident" id="8129346">got</span>&nbsp;<span class="op" id="8129350">==</span>&nbsp;<span class="ident" id="8129353">nil</span>&nbsp;<span class="op" id="8129357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129361">t</span><span class="op" id="8129362">.</span><span class="ident" id="8129363">Errorf</span><span class="op" id="8129369">(</span><span class="string" id="8129370">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129389">,</span>&nbsp;<span class="ident" id="8129391">want</span><span class="op" id="8129395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129398">}</span>&nbsp;<span class="keyword" id="8129400">else</span>&nbsp;<span class="keyword" id="8129405">if</span>&nbsp;<span class="op" id="8129408">*</span><span class="ident" id="8129409">got</span>&nbsp;<span class="op" id="8129413">!=</span>&nbsp;<span class="ident" id="8129416">want</span>&nbsp;<span class="op" id="8129421">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129425">t</span><span class="op" id="8129426">.</span><span class="ident" id="8129427">Errorf</span><span class="op" id="8129433">(</span><span class="string" id="8129434">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129452">,</span>&nbsp;<span class="op" id="8129454">*</span><span class="ident" id="8129455">got</span><span class="op" id="8129458">,</span>&nbsp;<span class="ident" id="8129460">want</span><span class="op" id="8129464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129471">if</span>&nbsp;<span class="ident" id="8129474">got</span><span class="op" id="8129477">,</span>&nbsp;<span class="ident" id="8129479">want</span>&nbsp;<span class="op" id="8129484">:=</span>&nbsp;<span class="ident" id="8129487">x</span><span class="op" id="8129488">.</span><span class="ident" id="8129489">TV</span><span class="op" id="8129491">,</span>&nbsp;<span class="ident" id="8129493">tv</span><span class="op" id="8129495">;</span>&nbsp;<span class="ident" id="8129497">got</span>&nbsp;<span class="op" id="8129501">!=</span>&nbsp;<span class="ident" id="8129504">want</span>&nbsp;<span class="op" id="8129509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129513">t</span><span class="op" id="8129514">.</span><span class="ident" id="8129515">Errorf</span><span class="op" id="8129521">(</span><span class="string" id="8129522">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129540">,</span>&nbsp;<span class="ident" id="8129542">got</span><span class="op" id="8129545">,</span>&nbsp;<span class="ident" id="8129547">want</span><span class="op" id="8129551">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8129557">if</span>&nbsp;<span class="ident" id="8129560">got</span><span class="op" id="8129563">,</span>&nbsp;<span class="ident" id="8129565">want</span>&nbsp;<span class="op" id="8129570">:=</span>&nbsp;<span class="ident" id="8129573">x</span><span class="op" id="8129574">.</span><span class="ident" id="8129575">TW</span><span class="op" id="8129577">,</span>&nbsp;<span class="ident" id="8129579">tw</span><span class="op" id="8129581">;</span>&nbsp;<span class="ident" id="8129583">got</span>&nbsp;<span class="op" id="8129587">==</span>&nbsp;<span class="ident" id="8129590">nil</span>&nbsp;<span class="op" id="8129594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129598">t</span><span class="op" id="8129599">.</span><span class="ident" id="8129600">Errorf</span><span class="op" id="8129606">(</span><span class="string" id="8129607">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129626">,</span>&nbsp;<span class="ident" id="8129628">want</span><span class="op" id="8129632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129635">}</span>&nbsp;<span class="keyword" id="8129637">else</span>&nbsp;<span class="keyword" id="8129642">if</span>&nbsp;<span class="op" id="8129645">*</span><span class="ident" id="8129646">got</span>&nbsp;<span class="op" id="8129650">!=</span>&nbsp;<span class="ident" id="8129653">want</span>&nbsp;<span class="op" id="8129658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129662">t</span><span class="op" id="8129663">.</span><span class="ident" id="8129664">Errorf</span><span class="op" id="8129670">(</span><span class="string" id="8129671">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8129689">,</span>&nbsp;<span class="op" id="8129691">*</span><span class="ident" id="8129692">got</span><span class="op" id="8129695">,</span>&nbsp;<span class="ident" id="8129697">want</span><span class="op" id="8129701">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8129704">}</span><br>
<span class="lineno"></span><span class="op" id="8129706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8129709">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8129777">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8129807">func</span>&nbsp;<span class="ident" id="8129812">TestGobEncoderPointerThenValue</span><span class="op" id="8129842">(</span><span class="ident" id="8129843">t</span>&nbsp;<span class="op" id="8129845">*</span><span class="ident" id="8129846">testing</span><span class="op" id="8129853">.</span><span class="ident" id="8129854">T</span><span class="op" id="8129855">)</span>&nbsp;<span class="op" id="8129857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129860">v</span>&nbsp;<span class="op" id="8129862">:=</span>&nbsp;<span class="ident" id="8129865">ValueGobber</span><span class="op" id="8129876">(</span><span class="string" id="8129877">&#34;forty-two&#34;</span><span class="op" id="8129888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129891">w</span>&nbsp;<span class="op" id="8129893">:=</span>&nbsp;<span class="ident" id="8129896">ValueGobber</span><span class="op" id="8129907">(</span><span class="string" id="8129908">&#34;six-by-nine&#34;</span><span class="op" id="8129921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129924">bv</span>&nbsp;<span class="op" id="8129927">:=</span>&nbsp;<span class="ident" id="8129930">BinaryValueGobber</span><span class="op" id="8129947">(</span><span class="string" id="8129948">&#34;1nanocentury&#34;</span><span class="op" id="8129962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8129965">bw</span>&nbsp;<span class="op" id="8129968">:=</span>&nbsp;<span class="ident" id="8129971">BinaryValueGobber</span><span class="op" id="8129988">(</span><span class="string" id="8129989">&#34;πseconds&#34;</span><span class="op" id="8130000">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130003">tv</span>&nbsp;<span class="op" id="8130006">:=</span>&nbsp;<span class="ident" id="8130009">TextValueGobber</span><span class="op" id="8130024">(</span><span class="string" id="8130025">&#34;gravitationalacceleration&#34;</span><span class="op" id="8130052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130055">tw</span>&nbsp;<span class="op" id="8130058">:=</span>&nbsp;<span class="ident" id="8130061">TextValueGobber</span><span class="op" id="8130076">(</span><span class="string" id="8130077">&#34;π²ft/s²&#34;</span><span class="op" id="8130089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130093">b</span>&nbsp;<span class="op" id="8130095">:=</span>&nbsp;<span class="builtinfunc" id="8130098">new</span><span class="op" id="8130101">(</span><span class="ident" id="8130102">bytes</span><span class="op" id="8130107">.</span><span class="ident" id="8130108">Buffer</span><span class="op" id="8130114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130117">enc</span>&nbsp;<span class="op" id="8130121">:=</span>&nbsp;<span class="ident" id="8130124">NewEncoder</span><span class="op" id="8130134">(</span><span class="ident" id="8130135">b</span><span class="op" id="8130136">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130139">if</span>&nbsp;<span class="ident" id="8130142">err</span>&nbsp;<span class="op" id="8130146">:=</span>&nbsp;<span class="ident" id="8130149">enc</span><span class="op" id="8130152">.</span><span class="ident" id="8130153">Encode</span><span class="op" id="8130159">(</span><span class="ident" id="8130160">GobTest7</span><span class="op" id="8130168">{</span><span class="num" id="8130169">42</span><span class="op" id="8130171">,</span>&nbsp;<span class="op" id="8130173">&amp;</span><span class="ident" id="8130174">v</span><span class="op" id="8130175">,</span>&nbsp;<span class="ident" id="8130177">w</span><span class="op" id="8130178">,</span>&nbsp;<span class="op" id="8130180">&amp;</span><span class="ident" id="8130181">bv</span><span class="op" id="8130183">,</span>&nbsp;<span class="ident" id="8130185">bw</span><span class="op" id="8130187">,</span>&nbsp;<span class="op" id="8130189">&amp;</span><span class="ident" id="8130190">tv</span><span class="op" id="8130192">,</span>&nbsp;<span class="ident" id="8130194">tw</span><span class="op" id="8130196">}</span><span class="op" id="8130197">)</span><span class="op" id="8130198">;</span>&nbsp;<span class="ident" id="8130200">err</span>&nbsp;<span class="op" id="8130204">!=</span>&nbsp;<span class="ident" id="8130207">nil</span>&nbsp;<span class="op" id="8130211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130215">t</span><span class="op" id="8130216">.</span><span class="ident" id="8130217">Fatal</span><span class="op" id="8130222">(</span><span class="string" id="8130223">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8130238">,</span>&nbsp;<span class="ident" id="8130240">err</span><span class="op" id="8130243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130249">dec</span>&nbsp;<span class="op" id="8130253">:=</span>&nbsp;<span class="ident" id="8130256">NewDecoder</span><span class="op" id="8130266">(</span><span class="ident" id="8130267">b</span><span class="op" id="8130268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130271">x</span>&nbsp;<span class="op" id="8130273">:=</span>&nbsp;<span class="builtinfunc" id="8130276">new</span><span class="op" id="8130279">(</span><span class="ident" id="8130280">GobTest7</span><span class="op" id="8130288">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130291">if</span>&nbsp;<span class="ident" id="8130294">err</span>&nbsp;<span class="op" id="8130298">:=</span>&nbsp;<span class="ident" id="8130301">dec</span><span class="op" id="8130304">.</span><span class="ident" id="8130305">Decode</span><span class="op" id="8130311">(</span><span class="ident" id="8130312">x</span><span class="op" id="8130313">)</span><span class="op" id="8130314">;</span>&nbsp;<span class="ident" id="8130316">err</span>&nbsp;<span class="op" id="8130320">!=</span>&nbsp;<span class="ident" id="8130323">nil</span>&nbsp;<span class="op" id="8130327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130331">t</span><span class="op" id="8130332">.</span><span class="ident" id="8130333">Fatal</span><span class="op" id="8130338">(</span><span class="string" id="8130339">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8130354">,</span>&nbsp;<span class="ident" id="8130356">err</span><span class="op" id="8130359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130362">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130366">if</span>&nbsp;<span class="ident" id="8130369">got</span><span class="op" id="8130372">,</span>&nbsp;<span class="ident" id="8130374">want</span>&nbsp;<span class="op" id="8130379">:=</span>&nbsp;<span class="ident" id="8130382">x</span><span class="op" id="8130383">.</span><span class="ident" id="8130384">V</span><span class="op" id="8130385">,</span>&nbsp;<span class="ident" id="8130387">v</span><span class="op" id="8130388">;</span>&nbsp;<span class="ident" id="8130390">got</span>&nbsp;<span class="op" id="8130394">==</span>&nbsp;<span class="ident" id="8130397">nil</span>&nbsp;<span class="op" id="8130401">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130405">t</span><span class="op" id="8130406">.</span><span class="ident" id="8130407">Errorf</span><span class="op" id="8130413">(</span><span class="string" id="8130414">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130432">,</span>&nbsp;<span class="ident" id="8130434">want</span><span class="op" id="8130438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130441">}</span>&nbsp;<span class="keyword" id="8130443">else</span>&nbsp;<span class="keyword" id="8130448">if</span>&nbsp;<span class="op" id="8130451">*</span><span class="ident" id="8130452">got</span>&nbsp;<span class="op" id="8130456">!=</span>&nbsp;<span class="ident" id="8130459">want</span>&nbsp;<span class="op" id="8130464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130468">t</span><span class="op" id="8130469">.</span><span class="ident" id="8130470">Errorf</span><span class="op" id="8130476">(</span><span class="string" id="8130477">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130494">,</span>&nbsp;<span class="op" id="8130496">*</span><span class="ident" id="8130497">got</span><span class="op" id="8130500">,</span>&nbsp;<span class="ident" id="8130502">want</span><span class="op" id="8130506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130512">if</span>&nbsp;<span class="ident" id="8130515">got</span><span class="op" id="8130518">,</span>&nbsp;<span class="ident" id="8130520">want</span>&nbsp;<span class="op" id="8130525">:=</span>&nbsp;<span class="ident" id="8130528">x</span><span class="op" id="8130529">.</span><span class="ident" id="8130530">W</span><span class="op" id="8130531">,</span>&nbsp;<span class="ident" id="8130533">w</span><span class="op" id="8130534">;</span>&nbsp;<span class="ident" id="8130536">got</span>&nbsp;<span class="op" id="8130540">!=</span>&nbsp;<span class="ident" id="8130543">want</span>&nbsp;<span class="op" id="8130548">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130552">t</span><span class="op" id="8130553">.</span><span class="ident" id="8130554">Errorf</span><span class="op" id="8130560">(</span><span class="string" id="8130561">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130578">,</span>&nbsp;<span class="ident" id="8130580">got</span><span class="op" id="8130583">,</span>&nbsp;<span class="ident" id="8130585">want</span><span class="op" id="8130589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130596">if</span>&nbsp;<span class="ident" id="8130599">got</span><span class="op" id="8130602">,</span>&nbsp;<span class="ident" id="8130604">want</span>&nbsp;<span class="op" id="8130609">:=</span>&nbsp;<span class="ident" id="8130612">x</span><span class="op" id="8130613">.</span><span class="ident" id="8130614">BV</span><span class="op" id="8130616">,</span>&nbsp;<span class="ident" id="8130618">bv</span><span class="op" id="8130620">;</span>&nbsp;<span class="ident" id="8130622">got</span>&nbsp;<span class="op" id="8130626">==</span>&nbsp;<span class="ident" id="8130629">nil</span>&nbsp;<span class="op" id="8130633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130637">t</span><span class="op" id="8130638">.</span><span class="ident" id="8130639">Errorf</span><span class="op" id="8130645">(</span><span class="string" id="8130646">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130665">,</span>&nbsp;<span class="ident" id="8130667">want</span><span class="op" id="8130671">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130674">}</span>&nbsp;<span class="keyword" id="8130676">else</span>&nbsp;<span class="keyword" id="8130681">if</span>&nbsp;<span class="op" id="8130684">*</span><span class="ident" id="8130685">got</span>&nbsp;<span class="op" id="8130689">!=</span>&nbsp;<span class="ident" id="8130692">want</span>&nbsp;<span class="op" id="8130697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130701">t</span><span class="op" id="8130702">.</span><span class="ident" id="8130703">Errorf</span><span class="op" id="8130709">(</span><span class="string" id="8130710">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130728">,</span>&nbsp;<span class="op" id="8130730">*</span><span class="ident" id="8130731">got</span><span class="op" id="8130734">,</span>&nbsp;<span class="ident" id="8130736">want</span><span class="op" id="8130740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130746">if</span>&nbsp;<span class="ident" id="8130749">got</span><span class="op" id="8130752">,</span>&nbsp;<span class="ident" id="8130754">want</span>&nbsp;<span class="op" id="8130759">:=</span>&nbsp;<span class="ident" id="8130762">x</span><span class="op" id="8130763">.</span><span class="ident" id="8130764">BW</span><span class="op" id="8130766">,</span>&nbsp;<span class="ident" id="8130768">bw</span><span class="op" id="8130770">;</span>&nbsp;<span class="ident" id="8130772">got</span>&nbsp;<span class="op" id="8130776">!=</span>&nbsp;<span class="ident" id="8130779">want</span>&nbsp;<span class="op" id="8130784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130788">t</span><span class="op" id="8130789">.</span><span class="ident" id="8130790">Errorf</span><span class="op" id="8130796">(</span><span class="string" id="8130797">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130815">,</span>&nbsp;<span class="ident" id="8130817">got</span><span class="op" id="8130820">,</span>&nbsp;<span class="ident" id="8130822">want</span><span class="op" id="8130826">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130833">if</span>&nbsp;<span class="ident" id="8130836">got</span><span class="op" id="8130839">,</span>&nbsp;<span class="ident" id="8130841">want</span>&nbsp;<span class="op" id="8130846">:=</span>&nbsp;<span class="ident" id="8130849">x</span><span class="op" id="8130850">.</span><span class="ident" id="8130851">TV</span><span class="op" id="8130853">,</span>&nbsp;<span class="ident" id="8130855">tv</span><span class="op" id="8130857">;</span>&nbsp;<span class="ident" id="8130859">got</span>&nbsp;<span class="op" id="8130863">==</span>&nbsp;<span class="ident" id="8130866">nil</span>&nbsp;<span class="op" id="8130870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130874">t</span><span class="op" id="8130875">.</span><span class="ident" id="8130876">Errorf</span><span class="op" id="8130882">(</span><span class="string" id="8130883">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130902">,</span>&nbsp;<span class="ident" id="8130904">want</span><span class="op" id="8130908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130911">}</span>&nbsp;<span class="keyword" id="8130913">else</span>&nbsp;<span class="keyword" id="8130918">if</span>&nbsp;<span class="op" id="8130921">*</span><span class="ident" id="8130922">got</span>&nbsp;<span class="op" id="8130926">!=</span>&nbsp;<span class="ident" id="8130929">want</span>&nbsp;<span class="op" id="8130934">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8130938">t</span><span class="op" id="8130939">.</span><span class="ident" id="8130940">Errorf</span><span class="op" id="8130946">(</span><span class="string" id="8130947">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8130965">,</span>&nbsp;<span class="op" id="8130967">*</span><span class="ident" id="8130968">got</span><span class="op" id="8130971">,</span>&nbsp;<span class="ident" id="8130973">want</span><span class="op" id="8130977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8130980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8130983">if</span>&nbsp;<span class="ident" id="8130986">got</span><span class="op" id="8130989">,</span>&nbsp;<span class="ident" id="8130991">want</span>&nbsp;<span class="op" id="8130996">:=</span>&nbsp;<span class="ident" id="8130999">x</span><span class="op" id="8131000">.</span><span class="ident" id="8131001">TW</span><span class="op" id="8131003">,</span>&nbsp;<span class="ident" id="8131005">tw</span><span class="op" id="8131007">;</span>&nbsp;<span class="ident" id="8131009">got</span>&nbsp;<span class="op" id="8131013">!=</span>&nbsp;<span class="ident" id="8131016">want</span>&nbsp;<span class="op" id="8131021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131025">t</span><span class="op" id="8131026">.</span><span class="ident" id="8131027">Errorf</span><span class="op" id="8131033">(</span><span class="string" id="8131034">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8131052">,</span>&nbsp;<span class="ident" id="8131054">got</span><span class="op" id="8131057">,</span>&nbsp;<span class="ident" id="8131059">want</span><span class="op" id="8131063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131066">}</span><br>
<span class="lineno">535</span><span class="op" id="8131068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8131071">func</span>&nbsp;<span class="ident" id="8131076">TestGobEncoderFieldTypeError</span><span class="op" id="8131104">(</span><span class="ident" id="8131105">t</span>&nbsp;<span class="op" id="8131107">*</span><span class="ident" id="8131108">testing</span><span class="op" id="8131115">.</span><span class="ident" id="8131116">T</span><span class="op" id="8131117">)</span>&nbsp;<span class="op" id="8131119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8131122">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131159">b</span>&nbsp;<span class="op" id="8131161">:=</span>&nbsp;<span class="builtinfunc" id="8131164">new</span><span class="op" id="8131167">(</span><span class="ident" id="8131168">bytes</span><span class="op" id="8131173">.</span><span class="ident" id="8131174">Buffer</span><span class="op" id="8131180">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131183">enc</span>&nbsp;<span class="op" id="8131187">:=</span>&nbsp;<span class="ident" id="8131190">NewEncoder</span><span class="op" id="8131200">(</span><span class="ident" id="8131201">b</span><span class="op" id="8131202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131205">err</span>&nbsp;<span class="op" id="8131209">:=</span>&nbsp;<span class="ident" id="8131212">enc</span><span class="op" id="8131215">.</span><span class="ident" id="8131216">Encode</span><span class="op" id="8131222">(</span><span class="ident" id="8131223">GobTest1</span><span class="op" id="8131231">{</span><span class="num" id="8131232">17</span><span class="op" id="8131234">,</span>&nbsp;<span class="op" id="8131236">&amp;</span><span class="ident" id="8131237">StringStruct</span><span class="op" id="8131249">{</span><span class="string" id="8131250">&#34;ABC&#34;</span><span class="op" id="8131255">}</span><span class="op" id="8131256">}</span><span class="op" id="8131257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131260">if</span>&nbsp;<span class="ident" id="8131263">err</span>&nbsp;<span class="op" id="8131267">!=</span>&nbsp;<span class="ident" id="8131270">nil</span>&nbsp;<span class="op" id="8131274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131278">t</span><span class="op" id="8131279">.</span><span class="ident" id="8131280">Fatal</span><span class="op" id="8131285">(</span><span class="string" id="8131286">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8131301">,</span>&nbsp;<span class="ident" id="8131303">err</span><span class="op" id="8131306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131309">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131312">dec</span>&nbsp;<span class="op" id="8131316">:=</span>&nbsp;<span class="ident" id="8131319">NewDecoder</span><span class="op" id="8131329">(</span><span class="ident" id="8131330">b</span><span class="op" id="8131331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131334">x</span>&nbsp;<span class="op" id="8131336">:=</span>&nbsp;<span class="op" id="8131339">&amp;</span><span class="ident" id="8131340">GobTest2</span><span class="op" id="8131348">{</span><span class="op" id="8131349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131352">err</span>&nbsp;<span class="op" id="8131356">=</span>&nbsp;<span class="ident" id="8131358">dec</span><span class="op" id="8131361">.</span><span class="ident" id="8131362">Decode</span><span class="op" id="8131368">(</span><span class="ident" id="8131369">x</span><span class="op" id="8131370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131373">if</span>&nbsp;<span class="ident" id="8131376">err</span>&nbsp;<span class="op" id="8131380">==</span>&nbsp;<span class="ident" id="8131383">nil</span>&nbsp;<span class="op" id="8131387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131391">t</span><span class="op" id="8131392">.</span><span class="ident" id="8131393">Fatal</span><span class="op" id="8131398">(</span><span class="string" id="8131399">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8131469">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131475">if</span>&nbsp;<span class="ident" id="8131478">strings</span><span class="op" id="8131485">.</span><span class="ident" id="8131486">Index</span><span class="op" id="8131491">(</span><span class="ident" id="8131492">err</span><span class="op" id="8131495">.</span><span class="ident" id="8131496">Error</span><span class="op" id="8131501">(</span><span class="op" id="8131502">)</span><span class="op" id="8131503">,</span>&nbsp;<span class="string" id="8131505">&#34;type&#34;</span><span class="op" id="8131511">)</span>&nbsp;<span class="op" id="8131513">&lt;</span>&nbsp;<span class="num" id="8131515">0</span>&nbsp;<span class="op" id="8131517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131521">t</span><span class="op" id="8131522">.</span><span class="ident" id="8131523">Fatal</span><span class="op" id="8131528">(</span><span class="string" id="8131529">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8131555">,</span>&nbsp;<span class="ident" id="8131557">err</span><span class="op" id="8131560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8131566">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131603">b</span><span class="op" id="8131604">.</span><span class="ident" id="8131605">Reset</span><span class="op" id="8131610">(</span><span class="op" id="8131611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131614">err</span>&nbsp;<span class="op" id="8131618">=</span>&nbsp;<span class="ident" id="8131620">enc</span><span class="op" id="8131623">.</span><span class="ident" id="8131624">Encode</span><span class="op" id="8131630">(</span><span class="ident" id="8131631">GobTest2</span><span class="op" id="8131639">{</span><span class="num" id="8131640">17</span><span class="op" id="8131642">,</span>&nbsp;<span class="string" id="8131644">&#34;ABC&#34;</span><span class="op" id="8131649">}</span><span class="op" id="8131650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131653">if</span>&nbsp;<span class="ident" id="8131656">err</span>&nbsp;<span class="op" id="8131660">!=</span>&nbsp;<span class="ident" id="8131663">nil</span>&nbsp;<span class="op" id="8131667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131671">t</span><span class="op" id="8131672">.</span><span class="ident" id="8131673">Fatal</span><span class="op" id="8131678">(</span><span class="string" id="8131679">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8131694">,</span>&nbsp;<span class="ident" id="8131696">err</span><span class="op" id="8131699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131702">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131705">y</span>&nbsp;<span class="op" id="8131707">:=</span>&nbsp;<span class="op" id="8131710">&amp;</span><span class="ident" id="8131711">GobTest1</span><span class="op" id="8131719">{</span><span class="op" id="8131720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131723">err</span>&nbsp;<span class="op" id="8131727">=</span>&nbsp;<span class="ident" id="8131729">dec</span><span class="op" id="8131732">.</span><span class="ident" id="8131733">Decode</span><span class="op" id="8131739">(</span><span class="ident" id="8131740">y</span><span class="op" id="8131741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131744">if</span>&nbsp;<span class="ident" id="8131747">err</span>&nbsp;<span class="op" id="8131751">==</span>&nbsp;<span class="ident" id="8131754">nil</span>&nbsp;<span class="op" id="8131758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131762">t</span><span class="op" id="8131763">.</span><span class="ident" id="8131764">Fatal</span><span class="op" id="8131769">(</span><span class="string" id="8131770">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8131840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131843">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8131846">if</span>&nbsp;<span class="ident" id="8131849">strings</span><span class="op" id="8131856">.</span><span class="ident" id="8131857">Index</span><span class="op" id="8131862">(</span><span class="ident" id="8131863">err</span><span class="op" id="8131866">.</span><span class="ident" id="8131867">Error</span><span class="op" id="8131872">(</span><span class="op" id="8131873">)</span><span class="op" id="8131874">,</span>&nbsp;<span class="string" id="8131876">&#34;type&#34;</span><span class="op" id="8131882">)</span>&nbsp;<span class="op" id="8131884">&lt;</span>&nbsp;<span class="num" id="8131886">0</span>&nbsp;<span class="op" id="8131888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8131892">t</span><span class="op" id="8131893">.</span><span class="ident" id="8131894">Fatal</span><span class="op" id="8131899">(</span><span class="string" id="8131900">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8131926">,</span>&nbsp;<span class="ident" id="8131928">err</span><span class="op" id="8131931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8131934">}</span><br>
<span class="lineno"></span><span class="op" id="8131936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8131939">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8132024">func</span>&nbsp;<span class="ident" id="8132029">TestGobEncoderStructSingleton</span><span class="op" id="8132058">(</span><span class="ident" id="8132059">t</span>&nbsp;<span class="op" id="8132061">*</span><span class="ident" id="8132062">testing</span><span class="op" id="8132069">.</span><span class="ident" id="8132070">T</span><span class="op" id="8132071">)</span>&nbsp;<span class="op" id="8132073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132076">b</span>&nbsp;<span class="op" id="8132078">:=</span>&nbsp;<span class="builtinfunc" id="8132081">new</span><span class="op" id="8132084">(</span><span class="ident" id="8132085">bytes</span><span class="op" id="8132090">.</span><span class="ident" id="8132091">Buffer</span><span class="op" id="8132097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132100">enc</span>&nbsp;<span class="op" id="8132104">:=</span>&nbsp;<span class="ident" id="8132107">NewEncoder</span><span class="op" id="8132117">(</span><span class="ident" id="8132118">b</span><span class="op" id="8132119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132122">err</span>&nbsp;<span class="op" id="8132126">:=</span>&nbsp;<span class="ident" id="8132129">enc</span><span class="op" id="8132132">.</span><span class="ident" id="8132133">Encode</span><span class="op" id="8132139">(</span><span class="op" id="8132140">&amp;</span><span class="ident" id="8132141">ByteStruct</span><span class="op" id="8132151">{</span><span class="string" id="8132152">&#39;A&#39;</span><span class="op" id="8132155">}</span><span class="op" id="8132156">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132159">if</span>&nbsp;<span class="ident" id="8132162">err</span>&nbsp;<span class="op" id="8132166">!=</span>&nbsp;<span class="ident" id="8132169">nil</span>&nbsp;<span class="op" id="8132173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132177">t</span><span class="op" id="8132178">.</span><span class="ident" id="8132179">Fatal</span><span class="op" id="8132184">(</span><span class="string" id="8132185">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8132200">,</span>&nbsp;<span class="ident" id="8132202">err</span><span class="op" id="8132205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132208">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132211">dec</span>&nbsp;<span class="op" id="8132215">:=</span>&nbsp;<span class="ident" id="8132218">NewDecoder</span><span class="op" id="8132228">(</span><span class="ident" id="8132229">b</span><span class="op" id="8132230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132233">x</span>&nbsp;<span class="op" id="8132235">:=</span>&nbsp;<span class="builtinfunc" id="8132238">new</span><span class="op" id="8132241">(</span><span class="ident" id="8132242">ByteStruct</span><span class="op" id="8132252">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132255">err</span>&nbsp;<span class="op" id="8132259">=</span>&nbsp;<span class="ident" id="8132261">dec</span><span class="op" id="8132264">.</span><span class="ident" id="8132265">Decode</span><span class="op" id="8132271">(</span><span class="ident" id="8132272">x</span><span class="op" id="8132273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132276">if</span>&nbsp;<span class="ident" id="8132279">err</span>&nbsp;<span class="op" id="8132283">!=</span>&nbsp;<span class="ident" id="8132286">nil</span>&nbsp;<span class="op" id="8132290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132294">t</span><span class="op" id="8132295">.</span><span class="ident" id="8132296">Fatal</span><span class="op" id="8132301">(</span><span class="string" id="8132302">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8132317">,</span>&nbsp;<span class="ident" id="8132319">err</span><span class="op" id="8132322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132328">if</span>&nbsp;<span class="ident" id="8132331">x</span><span class="op" id="8132332">.</span><span class="ident" id="8132333">a</span>&nbsp;<span class="op" id="8132335">!=</span>&nbsp;<span class="string" id="8132338">&#39;A&#39;</span>&nbsp;<span class="op" id="8132342">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132346">t</span><span class="op" id="8132347">.</span><span class="ident" id="8132348">Errorf</span><span class="op" id="8132354">(</span><span class="string" id="8132355">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8132376">,</span>&nbsp;<span class="ident" id="8132378">x</span><span class="op" id="8132379">.</span><span class="ident" id="8132380">a</span><span class="op" id="8132381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132384">}</span><br>
<span class="lineno"></span><span class="op" id="8132386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8132389">func</span>&nbsp;<span class="ident" id="8132394">TestGobEncoderNonStructSingleton</span><span class="op" id="8132426">(</span><span class="ident" id="8132427">t</span>&nbsp;<span class="op" id="8132429">*</span><span class="ident" id="8132430">testing</span><span class="op" id="8132437">.</span><span class="ident" id="8132438">T</span><span class="op" id="8132439">)</span>&nbsp;<span class="op" id="8132441">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132444">b</span>&nbsp;<span class="op" id="8132446">:=</span>&nbsp;<span class="builtinfunc" id="8132449">new</span><span class="op" id="8132452">(</span><span class="ident" id="8132453">bytes</span><span class="op" id="8132458">.</span><span class="ident" id="8132459">Buffer</span><span class="op" id="8132465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132468">enc</span>&nbsp;<span class="op" id="8132472">:=</span>&nbsp;<span class="ident" id="8132475">NewEncoder</span><span class="op" id="8132485">(</span><span class="ident" id="8132486">b</span><span class="op" id="8132487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132490">var</span>&nbsp;<span class="ident" id="8132494">g</span>&nbsp;<span class="ident" id="8132496">Gobber</span>&nbsp;<span class="op" id="8132503">=</span>&nbsp;<span class="num" id="8132505">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132511">err</span>&nbsp;<span class="op" id="8132515">:=</span>&nbsp;<span class="ident" id="8132518">enc</span><span class="op" id="8132521">.</span><span class="ident" id="8132522">Encode</span><span class="op" id="8132528">(</span><span class="op" id="8132529">&amp;</span><span class="ident" id="8132530">g</span><span class="op" id="8132531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132534">if</span>&nbsp;<span class="ident" id="8132537">err</span>&nbsp;<span class="op" id="8132541">!=</span>&nbsp;<span class="ident" id="8132544">nil</span>&nbsp;<span class="op" id="8132548">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132552">t</span><span class="op" id="8132553">.</span><span class="ident" id="8132554">Fatal</span><span class="op" id="8132559">(</span><span class="string" id="8132560">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8132575">,</span>&nbsp;<span class="ident" id="8132577">err</span><span class="op" id="8132580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132586">dec</span>&nbsp;<span class="op" id="8132590">:=</span>&nbsp;<span class="ident" id="8132593">NewDecoder</span><span class="op" id="8132603">(</span><span class="ident" id="8132604">b</span><span class="op" id="8132605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132608">var</span>&nbsp;<span class="ident" id="8132612">x</span>&nbsp;<span class="ident" id="8132614">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132622">err</span>&nbsp;<span class="op" id="8132626">=</span>&nbsp;<span class="ident" id="8132628">dec</span><span class="op" id="8132631">.</span><span class="ident" id="8132632">Decode</span><span class="op" id="8132638">(</span><span class="op" id="8132639">&amp;</span><span class="ident" id="8132640">x</span><span class="op" id="8132641">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132644">if</span>&nbsp;<span class="ident" id="8132647">err</span>&nbsp;<span class="op" id="8132651">!=</span>&nbsp;<span class="ident" id="8132654">nil</span>&nbsp;<span class="op" id="8132658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132662">t</span><span class="op" id="8132663">.</span><span class="ident" id="8132664">Fatal</span><span class="op" id="8132669">(</span><span class="string" id="8132670">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8132685">,</span>&nbsp;<span class="ident" id="8132687">err</span><span class="op" id="8132690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132696">if</span>&nbsp;<span class="ident" id="8132699">x</span>&nbsp;<span class="op" id="8132701">!=</span>&nbsp;<span class="num" id="8132704">1234</span>&nbsp;<span class="op" id="8132709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132713">t</span><span class="op" id="8132714">.</span><span class="ident" id="8132715">Errorf</span><span class="op" id="8132721">(</span><span class="string" id="8132722">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8132744">,</span>&nbsp;<span class="ident" id="8132746">x</span><span class="op" id="8132747">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132750">}</span><br>
<span class="lineno"></span><span class="op" id="8132752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8132755">func</span>&nbsp;<span class="ident" id="8132760">TestGobEncoderIgnoreStructField</span><span class="op" id="8132791">(</span><span class="ident" id="8132792">t</span>&nbsp;<span class="op" id="8132794">*</span><span class="ident" id="8132795">testing</span><span class="op" id="8132802">.</span><span class="ident" id="8132803">T</span><span class="op" id="8132804">)</span>&nbsp;<span class="op" id="8132806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132809">b</span>&nbsp;<span class="op" id="8132811">:=</span>&nbsp;<span class="builtinfunc" id="8132814">new</span><span class="op" id="8132817">(</span><span class="ident" id="8132818">bytes</span><span class="op" id="8132823">.</span><span class="ident" id="8132824">Buffer</span><span class="op" id="8132830">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8132833">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132871">enc</span>&nbsp;<span class="op" id="8132875">:=</span>&nbsp;<span class="ident" id="8132878">NewEncoder</span><span class="op" id="8132888">(</span><span class="ident" id="8132889">b</span><span class="op" id="8132890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132893">err</span>&nbsp;<span class="op" id="8132897">:=</span>&nbsp;<span class="ident" id="8132900">enc</span><span class="op" id="8132903">.</span><span class="ident" id="8132904">Encode</span><span class="op" id="8132910">(</span><span class="ident" id="8132911">GobTest0</span><span class="op" id="8132919">{</span><span class="num" id="8132920">17</span><span class="op" id="8132922">,</span>&nbsp;<span class="op" id="8132924">&amp;</span><span class="ident" id="8132925">ByteStruct</span><span class="op" id="8132935">{</span><span class="string" id="8132936">&#39;A&#39;</span><span class="op" id="8132939">}</span><span class="op" id="8132940">}</span><span class="op" id="8132941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8132944">if</span>&nbsp;<span class="ident" id="8132947">err</span>&nbsp;<span class="op" id="8132951">!=</span>&nbsp;<span class="ident" id="8132954">nil</span>&nbsp;<span class="op" id="8132958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132962">t</span><span class="op" id="8132963">.</span><span class="ident" id="8132964">Fatal</span><span class="op" id="8132969">(</span><span class="string" id="8132970">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8132985">,</span>&nbsp;<span class="ident" id="8132987">err</span><span class="op" id="8132990">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8132993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8132996">dec</span>&nbsp;<span class="op" id="8133000">:=</span>&nbsp;<span class="ident" id="8133003">NewDecoder</span><span class="op" id="8133013">(</span><span class="ident" id="8133014">b</span><span class="op" id="8133015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133018">x</span>&nbsp;<span class="op" id="8133020">:=</span>&nbsp;<span class="builtinfunc" id="8133023">new</span><span class="op" id="8133026">(</span><span class="ident" id="8133027">GobTestIgnoreEncoder</span><span class="op" id="8133047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133050">err</span>&nbsp;<span class="op" id="8133054">=</span>&nbsp;<span class="ident" id="8133056">dec</span><span class="op" id="8133059">.</span><span class="ident" id="8133060">Decode</span><span class="op" id="8133066">(</span><span class="ident" id="8133067">x</span><span class="op" id="8133068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133071">if</span>&nbsp;<span class="ident" id="8133074">err</span>&nbsp;<span class="op" id="8133078">!=</span>&nbsp;<span class="ident" id="8133081">nil</span>&nbsp;<span class="op" id="8133085">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133089">t</span><span class="op" id="8133090">.</span><span class="ident" id="8133091">Fatal</span><span class="op" id="8133096">(</span><span class="string" id="8133097">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8133112">,</span>&nbsp;<span class="ident" id="8133114">err</span><span class="op" id="8133117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133123">if</span>&nbsp;<span class="ident" id="8133126">x</span><span class="op" id="8133127">.</span><span class="ident" id="8133128">X</span>&nbsp;<span class="op" id="8133130">!=</span>&nbsp;<span class="num" id="8133133">17</span>&nbsp;<span class="op" id="8133136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133140">t</span><span class="op" id="8133141">.</span><span class="ident" id="8133142">Errorf</span><span class="op" id="8133148">(</span><span class="string" id="8133149">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8133169">,</span>&nbsp;<span class="ident" id="8133171">x</span><span class="op" id="8133172">.</span><span class="ident" id="8133173">X</span><span class="op" id="8133174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133177">}</span><br>
<span class="lineno">625</span><span class="op" id="8133179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133182">func</span>&nbsp;<span class="ident" id="8133187">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8133221">(</span><span class="ident" id="8133222">t</span>&nbsp;<span class="op" id="8133224">*</span><span class="ident" id="8133225">testing</span><span class="op" id="8133232">.</span><span class="ident" id="8133233">T</span><span class="op" id="8133234">)</span>&nbsp;<span class="op" id="8133236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133239">b</span>&nbsp;<span class="op" id="8133241">:=</span>&nbsp;<span class="builtinfunc" id="8133244">new</span><span class="op" id="8133247">(</span><span class="ident" id="8133248">bytes</span><span class="op" id="8133253">.</span><span class="ident" id="8133254">Buffer</span><span class="op" id="8133260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8133263">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133301">enc</span>&nbsp;<span class="op" id="8133305">:=</span>&nbsp;<span class="ident" id="8133308">NewEncoder</span><span class="op" id="8133318">(</span><span class="ident" id="8133319">b</span><span class="op" id="8133320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133323">gobber</span>&nbsp;<span class="op" id="8133330">:=</span>&nbsp;<span class="ident" id="8133333">Gobber</span><span class="op" id="8133339">(</span><span class="num" id="8133340">23</span><span class="op" id="8133342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133345">bgobber</span>&nbsp;<span class="op" id="8133353">:=</span>&nbsp;<span class="ident" id="8133356">BinaryGobber</span><span class="op" id="8133368">(</span><span class="num" id="8133369">24</span><span class="op" id="8133371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133374">tgobber</span>&nbsp;<span class="op" id="8133382">:=</span>&nbsp;<span class="ident" id="8133385">TextGobber</span><span class="op" id="8133395">(</span><span class="num" id="8133396">25</span><span class="op" id="8133398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133401">err</span>&nbsp;<span class="op" id="8133405">:=</span>&nbsp;<span class="ident" id="8133408">enc</span><span class="op" id="8133411">.</span><span class="ident" id="8133412">Encode</span><span class="op" id="8133418">(</span><span class="ident" id="8133419">GobTest3</span><span class="op" id="8133427">{</span><span class="num" id="8133428">17</span><span class="op" id="8133430">,</span>&nbsp;<span class="op" id="8133432">&amp;</span><span class="ident" id="8133433">gobber</span><span class="op" id="8133439">,</span>&nbsp;<span class="op" id="8133441">&amp;</span><span class="ident" id="8133442">bgobber</span><span class="op" id="8133449">,</span>&nbsp;<span class="op" id="8133451">&amp;</span><span class="ident" id="8133452">tgobber</span><span class="op" id="8133459">}</span><span class="op" id="8133460">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133463">if</span>&nbsp;<span class="ident" id="8133466">err</span>&nbsp;<span class="op" id="8133470">!=</span>&nbsp;<span class="ident" id="8133473">nil</span>&nbsp;<span class="op" id="8133477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133481">t</span><span class="op" id="8133482">.</span><span class="ident" id="8133483">Fatal</span><span class="op" id="8133488">(</span><span class="string" id="8133489">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8133504">,</span>&nbsp;<span class="ident" id="8133506">err</span><span class="op" id="8133509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133515">dec</span>&nbsp;<span class="op" id="8133519">:=</span>&nbsp;<span class="ident" id="8133522">NewDecoder</span><span class="op" id="8133532">(</span><span class="ident" id="8133533">b</span><span class="op" id="8133534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133537">x</span>&nbsp;<span class="op" id="8133539">:=</span>&nbsp;<span class="builtinfunc" id="8133542">new</span><span class="op" id="8133545">(</span><span class="ident" id="8133546">GobTestIgnoreEncoder</span><span class="op" id="8133566">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133569">err</span>&nbsp;<span class="op" id="8133573">=</span>&nbsp;<span class="ident" id="8133575">dec</span><span class="op" id="8133578">.</span><span class="ident" id="8133579">Decode</span><span class="op" id="8133585">(</span><span class="ident" id="8133586">x</span><span class="op" id="8133587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133590">if</span>&nbsp;<span class="ident" id="8133593">err</span>&nbsp;<span class="op" id="8133597">!=</span>&nbsp;<span class="ident" id="8133600">nil</span>&nbsp;<span class="op" id="8133604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133608">t</span><span class="op" id="8133609">.</span><span class="ident" id="8133610">Fatal</span><span class="op" id="8133615">(</span><span class="string" id="8133616">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8133631">,</span>&nbsp;<span class="ident" id="8133633">err</span><span class="op" id="8133636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133642">if</span>&nbsp;<span class="ident" id="8133645">x</span><span class="op" id="8133646">.</span><span class="ident" id="8133647">X</span>&nbsp;<span class="op" id="8133649">!=</span>&nbsp;<span class="num" id="8133652">17</span>&nbsp;<span class="op" id="8133655">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133659">t</span><span class="op" id="8133660">.</span><span class="ident" id="8133661">Errorf</span><span class="op" id="8133667">(</span><span class="string" id="8133668">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8133688">,</span>&nbsp;<span class="ident" id="8133690">x</span><span class="op" id="8133691">.</span><span class="ident" id="8133692">X</span><span class="op" id="8133693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133696">}</span><br>
<span class="lineno"></span><span class="op" id="8133698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8133701">func</span>&nbsp;<span class="ident" id="8133706">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8133736">(</span><span class="ident" id="8133737">t</span>&nbsp;<span class="op" id="8133739">*</span><span class="ident" id="8133740">testing</span><span class="op" id="8133747">.</span><span class="ident" id="8133748">T</span><span class="op" id="8133749">)</span>&nbsp;<span class="op" id="8133751">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133754">b</span>&nbsp;<span class="op" id="8133756">:=</span>&nbsp;<span class="builtinfunc" id="8133759">new</span><span class="op" id="8133762">(</span><span class="ident" id="8133763">bytes</span><span class="op" id="8133768">.</span><span class="ident" id="8133769">Buffer</span><span class="op" id="8133775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8133778">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133816">enc</span>&nbsp;<span class="op" id="8133820">:=</span>&nbsp;<span class="ident" id="8133823">NewEncoder</span><span class="op" id="8133833">(</span><span class="ident" id="8133834">b</span><span class="op" id="8133835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133838">err</span>&nbsp;<span class="op" id="8133842">:=</span>&nbsp;<span class="ident" id="8133845">enc</span><span class="op" id="8133848">.</span><span class="ident" id="8133849">Encode</span><span class="op" id="8133855">(</span><span class="ident" id="8133856">GobTest0</span><span class="op" id="8133864">{</span><span class="ident" id="8133865">X</span><span class="op" id="8133866">:</span>&nbsp;<span class="num" id="8133868">18</span><span class="op" id="8133870">}</span><span class="op" id="8133871">)</span>&nbsp;<span class="comment" id="8133873">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8133886">if</span>&nbsp;<span class="ident" id="8133889">err</span>&nbsp;<span class="op" id="8133893">!=</span>&nbsp;<span class="ident" id="8133896">nil</span>&nbsp;<span class="op" id="8133900">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133904">t</span><span class="op" id="8133905">.</span><span class="ident" id="8133906">Fatal</span><span class="op" id="8133911">(</span><span class="string" id="8133912">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8133927">,</span>&nbsp;<span class="ident" id="8133929">err</span><span class="op" id="8133932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8133935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133938">dec</span>&nbsp;<span class="op" id="8133942">:=</span>&nbsp;<span class="ident" id="8133945">NewDecoder</span><span class="op" id="8133955">(</span><span class="ident" id="8133956">b</span><span class="op" id="8133957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133960">x</span>&nbsp;<span class="op" id="8133962">:=</span>&nbsp;<span class="builtinfunc" id="8133965">new</span><span class="op" id="8133968">(</span><span class="ident" id="8133969">GobTest0</span><span class="op" id="8133977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8133980">err</span>&nbsp;<span class="op" id="8133984">=</span>&nbsp;<span class="ident" id="8133986">dec</span><span class="op" id="8133989">.</span><span class="ident" id="8133990">Decode</span><span class="op" id="8133996">(</span><span class="ident" id="8133997">x</span><span class="op" id="8133998">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134001">if</span>&nbsp;<span class="ident" id="8134004">err</span>&nbsp;<span class="op" id="8134008">!=</span>&nbsp;<span class="ident" id="8134011">nil</span>&nbsp;<span class="op" id="8134015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134019">t</span><span class="op" id="8134020">.</span><span class="ident" id="8134021">Fatal</span><span class="op" id="8134026">(</span><span class="string" id="8134027">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8134042">,</span>&nbsp;<span class="ident" id="8134044">err</span><span class="op" id="8134047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134053">if</span>&nbsp;<span class="ident" id="8134056">x</span><span class="op" id="8134057">.</span><span class="ident" id="8134058">X</span>&nbsp;<span class="op" id="8134060">!=</span>&nbsp;<span class="num" id="8134063">18</span>&nbsp;<span class="op" id="8134066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134070">t</span><span class="op" id="8134071">.</span><span class="ident" id="8134072">Errorf</span><span class="op" id="8134078">(</span><span class="string" id="8134079">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8134106">,</span>&nbsp;<span class="ident" id="8134108">x</span><span class="op" id="8134109">.</span><span class="ident" id="8134110">X</span><span class="op" id="8134111">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134117">if</span>&nbsp;<span class="ident" id="8134120">x</span><span class="op" id="8134121">.</span><span class="ident" id="8134122">G</span>&nbsp;<span class="op" id="8134124">!=</span>&nbsp;<span class="ident" id="8134127">nil</span>&nbsp;<span class="op" id="8134131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134135">t</span><span class="op" id="8134136">.</span><span class="ident" id="8134137">Errorf</span><span class="op" id="8134143">(</span><span class="string" id="8134144">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8134172">,</span>&nbsp;<span class="ident" id="8134174">x</span><span class="op" id="8134175">.</span><span class="ident" id="8134176">G</span><span class="op" id="8134177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134180">}</span><br>
<span class="lineno"></span><span class="op" id="8134182">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8134185">type</span>&nbsp;<span class="ident" id="8134190">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8134205">struct</span>&nbsp;<span class="op" id="8134212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134215">foo</span><span class="op" id="8134218">,</span>&nbsp;<span class="ident" id="8134220">bar</span>&nbsp;<span class="builtintype" id="8134224">string</span><br>
<span class="lineno"></span><span class="op" id="8134231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8134234">func</span>&nbsp;<span class="op" id="8134239">(</span><span class="ident" id="8134240">br</span>&nbsp;<span class="op" id="8134243">*</span><span class="ident" id="8134244">gobDecoderBug0</span><span class="op" id="8134258">)</span>&nbsp;<span class="ident" id="8134260">String</span><span class="op" id="8134266">(</span><span class="op" id="8134267">)</span>&nbsp;<span class="builtintype" id="8134269">string</span>&nbsp;<span class="op" id="8134276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134279">return</span>&nbsp;<span class="ident" id="8134286">br</span><span class="op" id="8134288">.</span><span class="ident" id="8134289">foo</span>&nbsp;<span class="op" id="8134293">+</span>&nbsp;<span class="string" id="8134295">&#34;-&#34;</span>&nbsp;<span class="op" id="8134299">+</span>&nbsp;<span class="ident" id="8134301">br</span><span class="op" id="8134303">.</span><span class="ident" id="8134304">bar</span><br>
<span class="lineno"></span><span class="op" id="8134308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8134311">func</span>&nbsp;<span class="op" id="8134316">(</span><span class="ident" id="8134317">br</span>&nbsp;<span class="op" id="8134320">*</span><span class="ident" id="8134321">gobDecoderBug0</span><span class="op" id="8134335">)</span>&nbsp;<span class="ident" id="8134337">GobEncode</span><span class="op" id="8134346">(</span><span class="op" id="8134347">)</span>&nbsp;<span class="op" id="8134349">(</span><span class="op" id="8134350">[</span><span class="op" id="8134351">]</span><span class="builtintype" id="8134352">byte</span><span class="op" id="8134356">,</span>&nbsp;<span class="builtintype" id="8134358">error</span><span class="op" id="8134363">)</span>&nbsp;<span class="op" id="8134365">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134368">return</span>&nbsp;<span class="op" id="8134375">[</span><span class="op" id="8134376">]</span><span class="builtintype" id="8134377">byte</span><span class="op" id="8134381">(</span><span class="ident" id="8134382">br</span><span class="op" id="8134384">.</span><span class="ident" id="8134385">String</span><span class="op" id="8134391">(</span><span class="op" id="8134392">)</span><span class="op" id="8134393">)</span><span class="op" id="8134394">,</span>&nbsp;<span class="ident" id="8134396">nil</span><br>
<span class="lineno"></span><span class="op" id="8134400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8134403">func</span>&nbsp;<span class="op" id="8134408">(</span><span class="ident" id="8134409">br</span>&nbsp;<span class="op" id="8134412">*</span><span class="ident" id="8134413">gobDecoderBug0</span><span class="op" id="8134427">)</span>&nbsp;<span class="ident" id="8134429">GobDecode</span><span class="op" id="8134438">(</span><span class="ident" id="8134439">b</span>&nbsp;<span class="op" id="8134441">[</span><span class="op" id="8134442">]</span><span class="builtintype" id="8134443">byte</span><span class="op" id="8134447">)</span>&nbsp;<span class="builtintype" id="8134449">error</span>&nbsp;<span class="op" id="8134455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134458">br</span><span class="op" id="8134460">.</span><span class="ident" id="8134461">foo</span>&nbsp;<span class="op" id="8134465">=</span>&nbsp;<span class="string" id="8134467">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134474">br</span><span class="op" id="8134476">.</span><span class="ident" id="8134477">bar</span>&nbsp;<span class="op" id="8134481">=</span>&nbsp;<span class="string" id="8134483">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134490">return</span>&nbsp;<span class="ident" id="8134497">nil</span><br>
<span class="lineno"></span><span class="op" id="8134501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8134504">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8134570">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8134592">func</span>&nbsp;<span class="ident" id="8134597">TestGobEncoderExtraIndirect</span><span class="op" id="8134624">(</span><span class="ident" id="8134625">t</span>&nbsp;<span class="op" id="8134627">*</span><span class="ident" id="8134628">testing</span><span class="op" id="8134635">.</span><span class="ident" id="8134636">T</span><span class="op" id="8134637">)</span>&nbsp;<span class="op" id="8134639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134642">gdb</span>&nbsp;<span class="op" id="8134646">:=</span>&nbsp;<span class="op" id="8134649">&amp;</span><span class="ident" id="8134650">gobDecoderBug0</span><span class="op" id="8134664">{</span><span class="string" id="8134665">&#34;foo&#34;</span><span class="op" id="8134670">,</span>&nbsp;<span class="string" id="8134672">&#34;bar&#34;</span><span class="op" id="8134677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134680">buf</span>&nbsp;<span class="op" id="8134684">:=</span>&nbsp;<span class="builtinfunc" id="8134687">new</span><span class="op" id="8134690">(</span><span class="ident" id="8134691">bytes</span><span class="op" id="8134696">.</span><span class="ident" id="8134697">Buffer</span><span class="op" id="8134703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134706">e</span>&nbsp;<span class="op" id="8134708">:=</span>&nbsp;<span class="ident" id="8134711">NewEncoder</span><span class="op" id="8134721">(</span><span class="ident" id="8134722">buf</span><span class="op" id="8134725">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134728">if</span>&nbsp;<span class="ident" id="8134731">err</span>&nbsp;<span class="op" id="8134735">:=</span>&nbsp;<span class="ident" id="8134738">e</span><span class="op" id="8134739">.</span><span class="ident" id="8134740">Encode</span><span class="op" id="8134746">(</span><span class="ident" id="8134747">gdb</span><span class="op" id="8134750">)</span><span class="op" id="8134751">;</span>&nbsp;<span class="ident" id="8134753">err</span>&nbsp;<span class="op" id="8134757">!=</span>&nbsp;<span class="ident" id="8134760">nil</span>&nbsp;<span class="op" id="8134764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134768">t</span><span class="op" id="8134769">.</span><span class="ident" id="8134770">Fatalf</span><span class="op" id="8134776">(</span><span class="string" id="8134777">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8134789">,</span>&nbsp;<span class="ident" id="8134791">err</span><span class="op" id="8134794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134800">d</span>&nbsp;<span class="op" id="8134802">:=</span>&nbsp;<span class="ident" id="8134805">NewDecoder</span><span class="op" id="8134815">(</span><span class="ident" id="8134816">buf</span><span class="op" id="8134819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134822">var</span>&nbsp;<span class="ident" id="8134826">got</span>&nbsp;<span class="op" id="8134830">*</span><span class="ident" id="8134831">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134847">if</span>&nbsp;<span class="ident" id="8134850">err</span>&nbsp;<span class="op" id="8134854">:=</span>&nbsp;<span class="ident" id="8134857">d</span><span class="op" id="8134858">.</span><span class="ident" id="8134859">Decode</span><span class="op" id="8134865">(</span><span class="op" id="8134866">&amp;</span><span class="ident" id="8134867">got</span><span class="op" id="8134870">)</span><span class="op" id="8134871">;</span>&nbsp;<span class="ident" id="8134873">err</span>&nbsp;<span class="op" id="8134877">!=</span>&nbsp;<span class="ident" id="8134880">nil</span>&nbsp;<span class="op" id="8134884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134888">t</span><span class="op" id="8134889">.</span><span class="ident" id="8134890">Fatalf</span><span class="op" id="8134896">(</span><span class="string" id="8134897">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8134909">,</span>&nbsp;<span class="ident" id="8134911">err</span><span class="op" id="8134914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8134917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8134920">if</span>&nbsp;<span class="ident" id="8134923">got</span><span class="op" id="8134926">.</span><span class="ident" id="8134927">foo</span>&nbsp;<span class="op" id="8134931">!=</span>&nbsp;<span class="ident" id="8134934">gdb</span><span class="op" id="8134937">.</span><span class="ident" id="8134938">foo</span>&nbsp;<span class="op" id="8134942">||</span>&nbsp;<span class="ident" id="8134945">got</span><span class="op" id="8134948">.</span><span class="ident" id="8134949">bar</span>&nbsp;<span class="op" id="8134953">!=</span>&nbsp;<span class="ident" id="8134956">gdb</span><span class="op" id="8134959">.</span><span class="ident" id="8134960">bar</span>&nbsp;<span class="op" id="8134964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8134968">t</span><span class="op" id="8134969">.</span><span class="ident" id="8134970">Errorf</span><span class="op" id="8134976">(</span><span class="string" id="8134977">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8134996">,</span>&nbsp;<span class="ident" id="8134998">got</span><span class="op" id="8135001">,</span>&nbsp;<span class="ident" id="8135003">gdb</span><span class="op" id="8135006">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135009">}</span><br>
<span class="lineno"></span><span class="op" id="8135011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8135014">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8135078">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8135147">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8135209">type</span>&nbsp;<span class="ident" id="8135214">isZeroBug</span>&nbsp;<span class="keyword" id="8135224">struct</span>&nbsp;<span class="op" id="8135231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135234">T</span>&nbsp;<span class="ident" id="8135236">time</span><span class="op" id="8135240">.</span><span class="ident" id="8135241">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135247">S</span>&nbsp;<span class="builtintype" id="8135249">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135257">I</span>&nbsp;<span class="builtintype" id="8135259">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135264">A</span>&nbsp;<span class="ident" id="8135266">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135282">F</span>&nbsp;<span class="ident" id="8135284">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8135303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135306">type</span>&nbsp;<span class="ident" id="8135311">isZeroBugArray</span>&nbsp;<span class="op" id="8135326">[</span><span class="num" id="8135327">2</span><span class="op" id="8135328">]</span><span class="builtintype" id="8135329">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8135336">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8135396">func</span>&nbsp;<span class="op" id="8135401">(</span><span class="ident" id="8135402">a</span>&nbsp;<span class="ident" id="8135404">isZeroBugArray</span><span class="op" id="8135418">)</span>&nbsp;<span class="ident" id="8135420">GobEncode</span><span class="op" id="8135429">(</span><span class="op" id="8135430">)</span>&nbsp;<span class="op" id="8135432">(</span><span class="ident" id="8135433">b</span>&nbsp;<span class="op" id="8135435">[</span><span class="op" id="8135436">]</span><span class="builtintype" id="8135437">byte</span><span class="op" id="8135441">,</span>&nbsp;<span class="ident" id="8135443">e</span>&nbsp;<span class="builtintype" id="8135445">error</span><span class="op" id="8135450">)</span>&nbsp;<span class="op" id="8135452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135455">b</span>&nbsp;<span class="op" id="8135457">=</span>&nbsp;<span class="builtinfunc" id="8135459">append</span><span class="op" id="8135465">(</span><span class="ident" id="8135466">b</span><span class="op" id="8135467">,</span>&nbsp;<span class="ident" id="8135469">a</span><span class="op" id="8135470">[</span><span class="op" id="8135471">:</span><span class="op" id="8135472">]</span><span class="op" id="8135473">...</span><span class="op" id="8135476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135479">return</span>&nbsp;<span class="ident" id="8135486">b</span><span class="op" id="8135487">,</span>&nbsp;<span class="ident" id="8135489">nil</span><br>
<span class="lineno">725</span><span class="op" id="8135493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135496">func</span>&nbsp;<span class="op" id="8135501">(</span><span class="ident" id="8135502">a</span>&nbsp;<span class="op" id="8135504">*</span><span class="ident" id="8135505">isZeroBugArray</span><span class="op" id="8135519">)</span>&nbsp;<span class="ident" id="8135521">GobDecode</span><span class="op" id="8135530">(</span><span class="ident" id="8135531">data</span>&nbsp;<span class="op" id="8135536">[</span><span class="op" id="8135537">]</span><span class="builtintype" id="8135538">byte</span><span class="op" id="8135542">)</span>&nbsp;<span class="builtintype" id="8135544">error</span>&nbsp;<span class="op" id="8135550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135553">if</span>&nbsp;<span class="builtinfunc" id="8135556">len</span><span class="op" id="8135559">(</span><span class="ident" id="8135560">data</span><span class="op" id="8135564">)</span>&nbsp;<span class="op" id="8135566">!=</span>&nbsp;<span class="builtinfunc" id="8135569">len</span><span class="op" id="8135572">(</span><span class="ident" id="8135573">a</span><span class="op" id="8135574">)</span>&nbsp;<span class="op" id="8135576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135580">return</span>&nbsp;<span class="ident" id="8135587">io</span><span class="op" id="8135589">.</span><span class="ident" id="8135590">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8135595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135598">a</span><span class="op" id="8135599">[</span><span class="num" id="8135600">0</span><span class="op" id="8135601">]</span>&nbsp;<span class="op" id="8135603">=</span>&nbsp;<span class="ident" id="8135605">data</span><span class="op" id="8135609">[</span><span class="num" id="8135610">0</span><span class="op" id="8135611">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135614">a</span><span class="op" id="8135615">[</span><span class="num" id="8135616">1</span><span class="op" id="8135617">]</span>&nbsp;<span class="op" id="8135619">=</span>&nbsp;<span class="ident" id="8135621">data</span><span class="op" id="8135625">[</span><span class="num" id="8135626">1</span><span class="op" id="8135627">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135630">return</span>&nbsp;<span class="ident" id="8135637">nil</span><br>
<span class="lineno"></span><span class="op" id="8135641">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8135644">type</span>&nbsp;<span class="ident" id="8135649">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8135668">struct</span>&nbsp;<span class="op" id="8135675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135678">I</span>&nbsp;<span class="keyword" id="8135680">interface</span><span class="op" id="8135689">{</span><span class="op" id="8135690">}</span><br>
<span class="lineno"></span><span class="op" id="8135692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8135695">func</span>&nbsp;<span class="op" id="8135700">(</span><span class="ident" id="8135701">i</span>&nbsp;<span class="ident" id="8135703">isZeroBugInterface</span><span class="op" id="8135721">)</span>&nbsp;<span class="ident" id="8135723">GobEncode</span><span class="op" id="8135732">(</span><span class="op" id="8135733">)</span>&nbsp;<span class="op" id="8135735">(</span><span class="ident" id="8135736">b</span>&nbsp;<span class="op" id="8135738">[</span><span class="op" id="8135739">]</span><span class="builtintype" id="8135740">byte</span><span class="op" id="8135744">,</span>&nbsp;<span class="ident" id="8135746">e</span>&nbsp;<span class="builtintype" id="8135748">error</span><span class="op" id="8135753">)</span>&nbsp;<span class="op" id="8135755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135758">return</span>&nbsp;<span class="op" id="8135765">[</span><span class="op" id="8135766">]</span><span class="builtintype" id="8135767">byte</span><span class="op" id="8135771">{</span><span class="op" id="8135772">}</span><span class="op" id="8135773">,</span>&nbsp;<span class="ident" id="8135775">nil</span><br>
<span class="lineno"></span><span class="op" id="8135779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135782">func</span>&nbsp;<span class="op" id="8135787">(</span><span class="ident" id="8135788">i</span>&nbsp;<span class="op" id="8135790">*</span><span class="ident" id="8135791">isZeroBugInterface</span><span class="op" id="8135809">)</span>&nbsp;<span class="ident" id="8135811">GobDecode</span><span class="op" id="8135820">(</span><span class="ident" id="8135821">data</span>&nbsp;<span class="op" id="8135826">[</span><span class="op" id="8135827">]</span><span class="builtintype" id="8135828">byte</span><span class="op" id="8135832">)</span>&nbsp;<span class="builtintype" id="8135834">error</span>&nbsp;<span class="op" id="8135840">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8135843">return</span>&nbsp;<span class="ident" id="8135850">nil</span><br>
<span class="lineno"></span><span class="op" id="8135854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8135857">func</span>&nbsp;<span class="ident" id="8135862">TestGobEncodeIsZero</span><span class="op" id="8135881">(</span><span class="ident" id="8135882">t</span>&nbsp;<span class="op" id="8135884">*</span><span class="ident" id="8135885">testing</span><span class="op" id="8135892">.</span><span class="ident" id="8135893">T</span><span class="op" id="8135894">)</span>&nbsp;<span class="op" id="8135896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135899">x</span>&nbsp;<span class="op" id="8135901">:=</span>&nbsp;<span class="ident" id="8135904">isZeroBug</span><span class="op" id="8135913">{</span><span class="ident" id="8135914">time</span><span class="op" id="8135918">.</span><span class="ident" id="8135919">Now</span><span class="op" id="8135922">(</span><span class="op" id="8135923">)</span><span class="op" id="8135924">,</span>&nbsp;<span class="string" id="8135926">&#34;hello&#34;</span><span class="op" id="8135933">,</span>&nbsp;<span class="op" id="8135935">-</span><span class="num" id="8135936">55</span><span class="op" id="8135938">,</span>&nbsp;<span class="ident" id="8135940">isZeroBugArray</span><span class="op" id="8135954">{</span><span class="num" id="8135955">1</span><span class="op" id="8135956">,</span>&nbsp;<span class="num" id="8135958">2</span><span class="op" id="8135959">}</span><span class="op" id="8135960">,</span>&nbsp;<span class="ident" id="8135962">isZeroBugInterface</span><span class="op" id="8135980">{</span><span class="op" id="8135981">}</span><span class="op" id="8135982">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8135985">b</span>&nbsp;<span class="op" id="8135987">:=</span>&nbsp;<span class="builtinfunc" id="8135990">new</span><span class="op" id="8135993">(</span><span class="ident" id="8135994">bytes</span><span class="op" id="8135999">.</span><span class="ident" id="8136000">Buffer</span><span class="op" id="8136006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136009">enc</span>&nbsp;<span class="op" id="8136013">:=</span>&nbsp;<span class="ident" id="8136016">NewEncoder</span><span class="op" id="8136026">(</span><span class="ident" id="8136027">b</span><span class="op" id="8136028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136031">err</span>&nbsp;<span class="op" id="8136035">:=</span>&nbsp;<span class="ident" id="8136038">enc</span><span class="op" id="8136041">.</span><span class="ident" id="8136042">Encode</span><span class="op" id="8136048">(</span><span class="ident" id="8136049">x</span><span class="op" id="8136050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136053">if</span>&nbsp;<span class="ident" id="8136056">err</span>&nbsp;<span class="op" id="8136060">!=</span>&nbsp;<span class="ident" id="8136063">nil</span>&nbsp;<span class="op" id="8136067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136071">t</span><span class="op" id="8136072">.</span><span class="ident" id="8136073">Fatal</span><span class="op" id="8136078">(</span><span class="string" id="8136079">&#34;encode:&#34;</span><span class="op" id="8136088">,</span>&nbsp;<span class="ident" id="8136090">err</span><span class="op" id="8136093">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136099">var</span>&nbsp;<span class="ident" id="8136103">y</span>&nbsp;<span class="ident" id="8136105">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136116">dec</span>&nbsp;<span class="op" id="8136120">:=</span>&nbsp;<span class="ident" id="8136123">NewDecoder</span><span class="op" id="8136133">(</span><span class="ident" id="8136134">b</span><span class="op" id="8136135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136138">err</span>&nbsp;<span class="op" id="8136142">=</span>&nbsp;<span class="ident" id="8136144">dec</span><span class="op" id="8136147">.</span><span class="ident" id="8136148">Decode</span><span class="op" id="8136154">(</span><span class="op" id="8136155">&amp;</span><span class="ident" id="8136156">y</span><span class="op" id="8136157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136160">if</span>&nbsp;<span class="ident" id="8136163">err</span>&nbsp;<span class="op" id="8136167">!=</span>&nbsp;<span class="ident" id="8136170">nil</span>&nbsp;<span class="op" id="8136174">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136178">t</span><span class="op" id="8136179">.</span><span class="ident" id="8136180">Fatal</span><span class="op" id="8136185">(</span><span class="string" id="8136186">&#34;decode:&#34;</span><span class="op" id="8136195">,</span>&nbsp;<span class="ident" id="8136197">err</span><span class="op" id="8136200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136206">if</span>&nbsp;<span class="ident" id="8136209">x</span>&nbsp;<span class="op" id="8136211">!=</span>&nbsp;<span class="ident" id="8136214">y</span>&nbsp;<span class="op" id="8136216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136220">t</span><span class="op" id="8136221">.</span><span class="ident" id="8136222">Fatalf</span><span class="op" id="8136228">(</span><span class="string" id="8136229">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8136239">,</span>&nbsp;<span class="ident" id="8136241">x</span><span class="op" id="8136242">,</span>&nbsp;<span class="ident" id="8136244">y</span><span class="op" id="8136245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136248">}</span><br>
<span class="lineno">765</span><span class="op" id="8136250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8136253">func</span>&nbsp;<span class="ident" id="8136258">TestGobEncodePtrError</span><span class="op" id="8136279">(</span><span class="ident" id="8136280">t</span>&nbsp;<span class="op" id="8136282">*</span><span class="ident" id="8136283">testing</span><span class="op" id="8136290">.</span><span class="ident" id="8136291">T</span><span class="op" id="8136292">)</span>&nbsp;<span class="op" id="8136294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136297">var</span>&nbsp;<span class="ident" id="8136301">err</span>&nbsp;<span class="builtintype" id="8136305">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136312">b</span>&nbsp;<span class="op" id="8136314">:=</span>&nbsp;<span class="builtinfunc" id="8136317">new</span><span class="op" id="8136320">(</span><span class="ident" id="8136321">bytes</span><span class="op" id="8136326">.</span><span class="ident" id="8136327">Buffer</span><span class="op" id="8136333">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136336">enc</span>&nbsp;<span class="op" id="8136340">:=</span>&nbsp;<span class="ident" id="8136343">NewEncoder</span><span class="op" id="8136353">(</span><span class="ident" id="8136354">b</span><span class="op" id="8136355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136358">err</span>&nbsp;<span class="op" id="8136362">=</span>&nbsp;<span class="ident" id="8136364">enc</span><span class="op" id="8136367">.</span><span class="ident" id="8136368">Encode</span><span class="op" id="8136374">(</span><span class="op" id="8136375">&amp;</span><span class="ident" id="8136376">err</span><span class="op" id="8136379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136382">if</span>&nbsp;<span class="ident" id="8136385">err</span>&nbsp;<span class="op" id="8136389">!=</span>&nbsp;<span class="ident" id="8136392">nil</span>&nbsp;<span class="op" id="8136396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136400">t</span><span class="op" id="8136401">.</span><span class="ident" id="8136402">Fatal</span><span class="op" id="8136407">(</span><span class="string" id="8136408">&#34;encode:&#34;</span><span class="op" id="8136417">,</span>&nbsp;<span class="ident" id="8136419">err</span><span class="op" id="8136422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136425">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136428">dec</span>&nbsp;<span class="op" id="8136432">:=</span>&nbsp;<span class="ident" id="8136435">NewDecoder</span><span class="op" id="8136445">(</span><span class="ident" id="8136446">b</span><span class="op" id="8136447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136450">err2</span>&nbsp;<span class="op" id="8136455">:=</span>&nbsp;<span class="ident" id="8136458">fmt</span><span class="op" id="8136461">.</span><span class="ident" id="8136462">Errorf</span><span class="op" id="8136468">(</span><span class="string" id="8136469">&#34;foo&#34;</span><span class="op" id="8136474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136477">err</span>&nbsp;<span class="op" id="8136481">=</span>&nbsp;<span class="ident" id="8136483">dec</span><span class="op" id="8136486">.</span><span class="ident" id="8136487">Decode</span><span class="op" id="8136493">(</span><span class="op" id="8136494">&amp;</span><span class="ident" id="8136495">err2</span><span class="op" id="8136499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136502">if</span>&nbsp;<span class="ident" id="8136505">err</span>&nbsp;<span class="op" id="8136509">!=</span>&nbsp;<span class="ident" id="8136512">nil</span>&nbsp;<span class="op" id="8136516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136520">t</span><span class="op" id="8136521">.</span><span class="ident" id="8136522">Fatal</span><span class="op" id="8136527">(</span><span class="string" id="8136528">&#34;decode:&#34;</span><span class="op" id="8136537">,</span>&nbsp;<span class="ident" id="8136539">err</span><span class="op" id="8136542">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136548">if</span>&nbsp;<span class="ident" id="8136551">err2</span>&nbsp;<span class="op" id="8136556">!=</span>&nbsp;<span class="ident" id="8136559">nil</span>&nbsp;<span class="op" id="8136563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136567">t</span><span class="op" id="8136568">.</span><span class="ident" id="8136569">Fatalf</span><span class="op" id="8136575">(</span><span class="string" id="8136576">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8136598">,</span>&nbsp;<span class="ident" id="8136600">err2</span><span class="op" id="8136604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136607">}</span><br>
<span class="lineno"></span><span class="op" id="8136609">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8136612">func</span>&nbsp;<span class="ident" id="8136617">TestNetIP</span><span class="op" id="8136626">(</span><span class="ident" id="8136627">t</span>&nbsp;<span class="op" id="8136629">*</span><span class="ident" id="8136630">testing</span><span class="op" id="8136637">.</span><span class="ident" id="8136638">T</span><span class="op" id="8136639">)</span>&nbsp;<span class="op" id="8136641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8136644">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136687">enc</span>&nbsp;<span class="op" id="8136691">:=</span>&nbsp;<span class="op" id="8136694">[</span><span class="op" id="8136695">]</span><span class="builtintype" id="8136696">byte</span><span class="op" id="8136700">{</span><span class="num" id="8136701">0x07</span><span class="op" id="8136705">,</span>&nbsp;<span class="num" id="8136707">0x0a</span><span class="op" id="8136711">,</span>&nbsp;<span class="num" id="8136713">0x00</span><span class="op" id="8136717">,</span>&nbsp;<span class="num" id="8136719">0x04</span><span class="op" id="8136723">,</span>&nbsp;<span class="num" id="8136725">0x01</span><span class="op" id="8136729">,</span>&nbsp;<span class="num" id="8136731">0x02</span><span class="op" id="8136735">,</span>&nbsp;<span class="num" id="8136737">0x03</span><span class="op" id="8136741">,</span>&nbsp;<span class="num" id="8136743">0x04</span><span class="op" id="8136747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136751">var</span>&nbsp;<span class="ident" id="8136755">ip</span>&nbsp;<span class="ident" id="8136758">net</span><span class="op" id="8136761">.</span><span class="ident" id="8136762">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136766">err</span>&nbsp;<span class="op" id="8136770">:=</span>&nbsp;<span class="ident" id="8136773">NewDecoder</span><span class="op" id="8136783">(</span><span class="ident" id="8136784">bytes</span><span class="op" id="8136789">.</span><span class="ident" id="8136790">NewReader</span><span class="op" id="8136799">(</span><span class="ident" id="8136800">enc</span><span class="op" id="8136803">)</span><span class="op" id="8136804">)</span><span class="op" id="8136805">.</span><span class="ident" id="8136806">Decode</span><span class="op" id="8136812">(</span><span class="op" id="8136813">&amp;</span><span class="ident" id="8136814">ip</span><span class="op" id="8136816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136819">if</span>&nbsp;<span class="ident" id="8136822">err</span>&nbsp;<span class="op" id="8136826">!=</span>&nbsp;<span class="ident" id="8136829">nil</span>&nbsp;<span class="op" id="8136833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136837">t</span><span class="op" id="8136838">.</span><span class="ident" id="8136839">Fatalf</span><span class="op" id="8136845">(</span><span class="string" id="8136846">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8136858">,</span>&nbsp;<span class="ident" id="8136860">err</span><span class="op" id="8136863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136866">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8136869">if</span>&nbsp;<span class="ident" id="8136872">ip</span><span class="op" id="8136874">.</span><span class="ident" id="8136875">String</span><span class="op" id="8136881">(</span><span class="op" id="8136882">)</span>&nbsp;<span class="op" id="8136884">!=</span>&nbsp;<span class="string" id="8136887">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8136897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8136901">t</span><span class="op" id="8136902">.</span><span class="ident" id="8136903">Errorf</span><span class="op" id="8136909">(</span><span class="string" id="8136910">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8136939">,</span>&nbsp;<span class="ident" id="8136941">ip</span><span class="op" id="8136943">.</span><span class="ident" id="8136944">String</span><span class="op" id="8136950">(</span><span class="op" id="8136951">)</span><span class="op" id="8136952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8136955">}</span><br>
<span class="lineno"></span><span class="op" id="8136957">}</span>
</div>
</body>
</html>
