<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6524920">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6524975">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6525029">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6525080">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525147">package</span>&nbsp;<span class="ident" id="6525155">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525160">import</span>&nbsp;<span class="op" id="6525167">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525170">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525179">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525189">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525196">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525202">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525209">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525220">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6525231">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6525238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6525241">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525301">type</span>&nbsp;<span class="ident" id="6525306">ByteStruct</span>&nbsp;<span class="keyword" id="6525317">struct</span>&nbsp;<span class="op" id="6525324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525327">a</span>&nbsp;<span class="builtintype" id="6525329">byte</span>&nbsp;<span class="comment" id="6525334">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6525359">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6525362">type</span>&nbsp;<span class="ident" id="6525367">StringStruct</span>&nbsp;<span class="keyword" id="6525380">struct</span>&nbsp;<span class="op" id="6525387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525390">s</span>&nbsp;<span class="builtintype" id="6525392">string</span>&nbsp;<span class="comment" id="6525399">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6525424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6525427">type</span>&nbsp;<span class="ident" id="6525432">ArrayStruct</span>&nbsp;<span class="keyword" id="6525444">struct</span>&nbsp;<span class="op" id="6525451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525454">a</span>&nbsp;<span class="op" id="6525456">[</span><span class="num" id="6525457">8192</span><span class="op" id="6525461">]</span><span class="builtintype" id="6525462">byte</span>&nbsp;<span class="comment" id="6525467">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="6525492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525495">type</span>&nbsp;<span class="ident" id="6525500">Gobber</span>&nbsp;<span class="builtintype" id="6525507">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6525512">type</span>&nbsp;<span class="ident" id="6525517">ValueGobber</span>&nbsp;<span class="builtintype" id="6525529">string</span>&nbsp;<span class="comment" id="6525536">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525586">type</span>&nbsp;<span class="ident" id="6525591">BinaryGobber</span>&nbsp;<span class="builtintype" id="6525604">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6525609">type</span>&nbsp;<span class="ident" id="6525614">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="6525632">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525640">type</span>&nbsp;<span class="ident" id="6525645">TextGobber</span>&nbsp;<span class="builtintype" id="6525656">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525661">type</span>&nbsp;<span class="ident" id="6525666">TextValueGobber</span>&nbsp;<span class="builtintype" id="6525682">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="6525690">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6525715">func</span>&nbsp;<span class="op" id="6525720">(</span><span class="ident" id="6525721">g</span>&nbsp;<span class="op" id="6525723">*</span><span class="ident" id="6525724">ByteStruct</span><span class="op" id="6525734">)</span>&nbsp;<span class="ident" id="6525736">GobEncode</span><span class="op" id="6525745">(</span><span class="op" id="6525746">)</span>&nbsp;<span class="op" id="6525748">(</span><span class="op" id="6525749">[</span><span class="op" id="6525750">]</span><span class="builtintype" id="6525751">byte</span><span class="op" id="6525755">,</span>&nbsp;<span class="builtintype" id="6525757">error</span><span class="op" id="6525762">)</span>&nbsp;<span class="op" id="6525764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525767">b</span>&nbsp;<span class="op" id="6525769">:=</span>&nbsp;<span class="builtinfunc" id="6525772">make</span><span class="op" id="6525776">(</span><span class="op" id="6525777">[</span><span class="op" id="6525778">]</span><span class="builtintype" id="6525779">byte</span><span class="op" id="6525783">,</span>&nbsp;<span class="num" id="6525785">3</span><span class="op" id="6525786">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525789">b</span><span class="op" id="6525790">[</span><span class="num" id="6525791">0</span><span class="op" id="6525792">]</span>&nbsp;<span class="op" id="6525794">=</span>&nbsp;<span class="ident" id="6525796">g</span><span class="op" id="6525797">.</span><span class="ident" id="6525798">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525801">b</span><span class="op" id="6525802">[</span><span class="num" id="6525803">1</span><span class="op" id="6525804">]</span>&nbsp;<span class="op" id="6525806">=</span>&nbsp;<span class="ident" id="6525808">g</span><span class="op" id="6525809">.</span><span class="ident" id="6525810">a</span>&nbsp;<span class="op" id="6525812">+</span>&nbsp;<span class="num" id="6525814">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6525817">b</span><span class="op" id="6525818">[</span><span class="num" id="6525819">2</span><span class="op" id="6525820">]</span>&nbsp;<span class="op" id="6525822">=</span>&nbsp;<span class="ident" id="6525824">g</span><span class="op" id="6525825">.</span><span class="ident" id="6525826">a</span>&nbsp;<span class="op" id="6525828">+</span>&nbsp;<span class="num" id="6525830">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6525833">return</span>&nbsp;<span class="ident" id="6525840">b</span><span class="op" id="6525841">,</span>&nbsp;<span class="builtintype" id="6525843">nil</span><br>
<span class="lineno"></span><span class="op" id="6525847">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="6525850">func</span>&nbsp;<span class="op" id="6525855">(</span><span class="ident" id="6525856">g</span>&nbsp;<span class="op" id="6525858">*</span><span class="ident" id="6525859">ByteStruct</span><span class="op" id="6525869">)</span>&nbsp;<span class="ident" id="6525871">GobDecode</span><span class="op" id="6525880">(</span><span class="ident" id="6525881">data</span>&nbsp;<span class="op" id="6525886">[</span><span class="op" id="6525887">]</span><span class="builtintype" id="6525888">byte</span><span class="op" id="6525892">)</span>&nbsp;<span class="builtintype" id="6525894">error</span>&nbsp;<span class="op" id="6525900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6525903">if</span>&nbsp;<span class="ident" id="6525906">g</span>&nbsp;<span class="op" id="6525908">==</span>&nbsp;<span class="builtintype" id="6525911">nil</span>&nbsp;<span class="op" id="6525915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6525919">return</span>&nbsp;<span class="ident" id="6525926">errors</span><span class="op" id="6525932">.</span><span class="ident" id="6525933">New</span><span class="op" id="6525936">(</span><span class="string" id="6525937">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="6525951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6525954">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6525957">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6525995">if</span>&nbsp;<span class="builtinfunc" id="6525998">len</span><span class="op" id="6526001">(</span><span class="ident" id="6526002">data</span><span class="op" id="6526006">)</span>&nbsp;<span class="op" id="6526008">==</span>&nbsp;<span class="num" id="6526011">0</span>&nbsp;<span class="op" id="6526013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526017">return</span>&nbsp;<span class="ident" id="6526024">io</span><span class="op" id="6526026">.</span><span class="ident" id="6526027">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6526035">g</span><span class="op" id="6526036">.</span><span class="ident" id="6526037">a</span>&nbsp;<span class="op" id="6526039">=</span>&nbsp;<span class="ident" id="6526041">data</span><span class="op" id="6526045">[</span><span class="num" id="6526046">0</span><span class="op" id="6526047">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526050">for</span>&nbsp;<span class="ident" id="6526054">i</span><span class="op" id="6526055">,</span>&nbsp;<span class="ident" id="6526057">c</span>&nbsp;<span class="op" id="6526059">:=</span>&nbsp;<span class="keyword" id="6526062">range</span>&nbsp;<span class="ident" id="6526068">data</span>&nbsp;<span class="op" id="6526073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526077">if</span>&nbsp;<span class="ident" id="6526080">c</span>&nbsp;<span class="op" id="6526082">!=</span>&nbsp;<span class="ident" id="6526085">g</span><span class="op" id="6526086">.</span><span class="ident" id="6526087">a</span><span class="op" id="6526088">+</span><span class="builtintype" id="6526089">byte</span><span class="op" id="6526093">(</span><span class="ident" id="6526094">i</span><span class="op" id="6526095">)</span>&nbsp;<span class="op" id="6526097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526102">return</span>&nbsp;<span class="ident" id="6526109">errors</span><span class="op" id="6526115">.</span><span class="ident" id="6526116">New</span><span class="op" id="6526119">(</span><span class="string" id="6526120">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="6526143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526150">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526153">return</span>&nbsp;<span class="builtintype" id="6526160">nil</span><br>
<span class="lineno"></span><span class="op" id="6526164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526167">func</span>&nbsp;<span class="op" id="6526172">(</span><span class="ident" id="6526173">g</span>&nbsp;<span class="op" id="6526175">*</span><span class="ident" id="6526176">StringStruct</span><span class="op" id="6526188">)</span>&nbsp;<span class="ident" id="6526190">GobEncode</span><span class="op" id="6526199">(</span><span class="op" id="6526200">)</span>&nbsp;<span class="op" id="6526202">(</span><span class="op" id="6526203">[</span><span class="op" id="6526204">]</span><span class="builtintype" id="6526205">byte</span><span class="op" id="6526209">,</span>&nbsp;<span class="builtintype" id="6526211">error</span><span class="op" id="6526216">)</span>&nbsp;<span class="op" id="6526218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526221">return</span>&nbsp;<span class="op" id="6526228">[</span><span class="op" id="6526229">]</span><span class="builtintype" id="6526230">byte</span><span class="op" id="6526234">(</span><span class="ident" id="6526235">g</span><span class="op" id="6526236">.</span><span class="ident" id="6526237">s</span><span class="op" id="6526238">)</span><span class="op" id="6526239">,</span>&nbsp;<span class="builtintype" id="6526241">nil</span><br>
<span class="lineno">75</span><span class="op" id="6526245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526248">func</span>&nbsp;<span class="op" id="6526253">(</span><span class="ident" id="6526254">g</span>&nbsp;<span class="op" id="6526256">*</span><span class="ident" id="6526257">StringStruct</span><span class="op" id="6526269">)</span>&nbsp;<span class="ident" id="6526271">GobDecode</span><span class="op" id="6526280">(</span><span class="ident" id="6526281">data</span>&nbsp;<span class="op" id="6526286">[</span><span class="op" id="6526287">]</span><span class="builtintype" id="6526288">byte</span><span class="op" id="6526292">)</span>&nbsp;<span class="builtintype" id="6526294">error</span>&nbsp;<span class="op" id="6526300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6526303">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526341">if</span>&nbsp;<span class="builtinfunc" id="6526344">len</span><span class="op" id="6526347">(</span><span class="ident" id="6526348">data</span><span class="op" id="6526352">)</span>&nbsp;<span class="op" id="6526354">==</span>&nbsp;<span class="num" id="6526357">0</span>&nbsp;<span class="op" id="6526359">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526363">return</span>&nbsp;<span class="ident" id="6526370">io</span><span class="op" id="6526372">.</span><span class="ident" id="6526373">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6526381">a</span>&nbsp;<span class="op" id="6526383">:=</span>&nbsp;<span class="ident" id="6526386">data</span><span class="op" id="6526390">[</span><span class="num" id="6526391">0</span><span class="op" id="6526392">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526395">for</span>&nbsp;<span class="ident" id="6526399">i</span><span class="op" id="6526400">,</span>&nbsp;<span class="ident" id="6526402">c</span>&nbsp;<span class="op" id="6526404">:=</span>&nbsp;<span class="keyword" id="6526407">range</span>&nbsp;<span class="ident" id="6526413">data</span>&nbsp;<span class="op" id="6526418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526422">if</span>&nbsp;<span class="ident" id="6526425">c</span>&nbsp;<span class="op" id="6526427">!=</span>&nbsp;<span class="ident" id="6526430">a</span><span class="op" id="6526431">+</span><span class="builtintype" id="6526432">byte</span><span class="op" id="6526436">(</span><span class="ident" id="6526437">i</span><span class="op" id="6526438">)</span>&nbsp;<span class="op" id="6526440">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526445">return</span>&nbsp;<span class="ident" id="6526452">errors</span><span class="op" id="6526458">.</span><span class="ident" id="6526459">New</span><span class="op" id="6526462">(</span><span class="string" id="6526463">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="6526486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6526496">g</span><span class="op" id="6526497">.</span><span class="ident" id="6526498">s</span>&nbsp;<span class="op" id="6526500">=</span>&nbsp;<span class="builtintype" id="6526502">string</span><span class="op" id="6526508">(</span><span class="ident" id="6526509">data</span><span class="op" id="6526513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526516">return</span>&nbsp;<span class="builtintype" id="6526523">nil</span><br>
<span class="lineno">90</span><span class="op" id="6526527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526530">func</span>&nbsp;<span class="op" id="6526535">(</span><span class="ident" id="6526536">a</span>&nbsp;<span class="op" id="6526538">*</span><span class="ident" id="6526539">ArrayStruct</span><span class="op" id="6526550">)</span>&nbsp;<span class="ident" id="6526552">GobEncode</span><span class="op" id="6526561">(</span><span class="op" id="6526562">)</span>&nbsp;<span class="op" id="6526564">(</span><span class="op" id="6526565">[</span><span class="op" id="6526566">]</span><span class="builtintype" id="6526567">byte</span><span class="op" id="6526571">,</span>&nbsp;<span class="builtintype" id="6526573">error</span><span class="op" id="6526578">)</span>&nbsp;<span class="op" id="6526580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526583">return</span>&nbsp;<span class="ident" id="6526590">a</span><span class="op" id="6526591">.</span><span class="ident" id="6526592">a</span><span class="op" id="6526593">[</span><span class="op" id="6526594">:</span><span class="op" id="6526595">]</span><span class="op" id="6526596">,</span>&nbsp;<span class="builtintype" id="6526598">nil</span><br>
<span class="lineno"></span><span class="op" id="6526602">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="6526605">func</span>&nbsp;<span class="op" id="6526610">(</span><span class="ident" id="6526611">a</span>&nbsp;<span class="op" id="6526613">*</span><span class="ident" id="6526614">ArrayStruct</span><span class="op" id="6526625">)</span>&nbsp;<span class="ident" id="6526627">GobDecode</span><span class="op" id="6526636">(</span><span class="ident" id="6526637">data</span>&nbsp;<span class="op" id="6526642">[</span><span class="op" id="6526643">]</span><span class="builtintype" id="6526644">byte</span><span class="op" id="6526648">)</span>&nbsp;<span class="builtintype" id="6526650">error</span>&nbsp;<span class="op" id="6526656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526659">if</span>&nbsp;<span class="builtinfunc" id="6526662">len</span><span class="op" id="6526665">(</span><span class="ident" id="6526666">data</span><span class="op" id="6526670">)</span>&nbsp;<span class="op" id="6526672">!=</span>&nbsp;<span class="builtinfunc" id="6526675">len</span><span class="op" id="6526678">(</span><span class="ident" id="6526679">a</span><span class="op" id="6526680">.</span><span class="ident" id="6526681">a</span><span class="op" id="6526682">)</span>&nbsp;<span class="op" id="6526684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526688">return</span>&nbsp;<span class="ident" id="6526695">errors</span><span class="op" id="6526701">.</span><span class="ident" id="6526702">New</span><span class="op" id="6526705">(</span><span class="string" id="6526706">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="6526736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6526739">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6526742">copy</span><span class="op" id="6526746">(</span><span class="ident" id="6526747">a</span><span class="op" id="6526748">.</span><span class="ident" id="6526749">a</span><span class="op" id="6526750">[</span><span class="op" id="6526751">:</span><span class="op" id="6526752">]</span><span class="op" id="6526753">,</span>&nbsp;<span class="ident" id="6526755">data</span><span class="op" id="6526759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526762">return</span>&nbsp;<span class="builtintype" id="6526769">nil</span><br>
<span class="lineno"></span><span class="op" id="6526773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526776">func</span>&nbsp;<span class="op" id="6526781">(</span><span class="ident" id="6526782">g</span>&nbsp;<span class="op" id="6526784">*</span><span class="ident" id="6526785">Gobber</span><span class="op" id="6526791">)</span>&nbsp;<span class="ident" id="6526793">GobEncode</span><span class="op" id="6526802">(</span><span class="op" id="6526803">)</span>&nbsp;<span class="op" id="6526805">(</span><span class="op" id="6526806">[</span><span class="op" id="6526807">]</span><span class="builtintype" id="6526808">byte</span><span class="op" id="6526812">,</span>&nbsp;<span class="builtintype" id="6526814">error</span><span class="op" id="6526819">)</span>&nbsp;<span class="op" id="6526821">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526824">return</span>&nbsp;<span class="op" id="6526831">[</span><span class="op" id="6526832">]</span><span class="builtintype" id="6526833">byte</span><span class="op" id="6526837">(</span><span class="ident" id="6526838">fmt</span><span class="op" id="6526841">.</span><span class="ident" id="6526842">Sprintf</span><span class="op" id="6526849">(</span><span class="string" id="6526850">&#34;VALUE=%d&#34;</span><span class="op" id="6526860">,</span>&nbsp;<span class="op" id="6526862">*</span><span class="ident" id="6526863">g</span><span class="op" id="6526864">)</span><span class="op" id="6526865">)</span><span class="op" id="6526866">,</span>&nbsp;<span class="builtintype" id="6526868">nil</span><br>
<span class="lineno"></span><span class="op" id="6526872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526875">func</span>&nbsp;<span class="op" id="6526880">(</span><span class="ident" id="6526881">g</span>&nbsp;<span class="op" id="6526883">*</span><span class="ident" id="6526884">Gobber</span><span class="op" id="6526890">)</span>&nbsp;<span class="ident" id="6526892">GobDecode</span><span class="op" id="6526901">(</span><span class="ident" id="6526902">data</span>&nbsp;<span class="op" id="6526907">[</span><span class="op" id="6526908">]</span><span class="builtintype" id="6526909">byte</span><span class="op" id="6526913">)</span>&nbsp;<span class="builtintype" id="6526915">error</span>&nbsp;<span class="op" id="6526921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6526924">_</span><span class="op" id="6526925">,</span>&nbsp;<span class="ident" id="6526927">err</span>&nbsp;<span class="op" id="6526931">:=</span>&nbsp;<span class="ident" id="6526934">fmt</span><span class="op" id="6526937">.</span><span class="ident" id="6526938">Sscanf</span><span class="op" id="6526944">(</span><span class="builtintype" id="6526945">string</span><span class="op" id="6526951">(</span><span class="ident" id="6526952">data</span><span class="op" id="6526956">)</span><span class="op" id="6526957">,</span>&nbsp;<span class="string" id="6526959">&#34;VALUE=%d&#34;</span><span class="op" id="6526969">,</span>&nbsp;<span class="op" id="6526971">(</span><span class="op" id="6526972">*</span><span class="builtintype" id="6526973">int</span><span class="op" id="6526976">)</span><span class="op" id="6526977">(</span><span class="ident" id="6526978">g</span><span class="op" id="6526979">)</span><span class="op" id="6526980">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6526983">return</span>&nbsp;<span class="ident" id="6526990">err</span><br>
<span class="lineno"></span><span class="op" id="6526994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6526997">func</span>&nbsp;<span class="op" id="6527002">(</span><span class="ident" id="6527003">g</span>&nbsp;<span class="op" id="6527005">*</span><span class="ident" id="6527006">BinaryGobber</span><span class="op" id="6527018">)</span>&nbsp;<span class="ident" id="6527020">MarshalBinary</span><span class="op" id="6527033">(</span><span class="op" id="6527034">)</span>&nbsp;<span class="op" id="6527036">(</span><span class="op" id="6527037">[</span><span class="op" id="6527038">]</span><span class="builtintype" id="6527039">byte</span><span class="op" id="6527043">,</span>&nbsp;<span class="builtintype" id="6527045">error</span><span class="op" id="6527050">)</span>&nbsp;<span class="op" id="6527052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527055">return</span>&nbsp;<span class="op" id="6527062">[</span><span class="op" id="6527063">]</span><span class="builtintype" id="6527064">byte</span><span class="op" id="6527068">(</span><span class="ident" id="6527069">fmt</span><span class="op" id="6527072">.</span><span class="ident" id="6527073">Sprintf</span><span class="op" id="6527080">(</span><span class="string" id="6527081">&#34;VALUE=%d&#34;</span><span class="op" id="6527091">,</span>&nbsp;<span class="op" id="6527093">*</span><span class="ident" id="6527094">g</span><span class="op" id="6527095">)</span><span class="op" id="6527096">)</span><span class="op" id="6527097">,</span>&nbsp;<span class="builtintype" id="6527099">nil</span><br>
<span class="lineno">115</span><span class="op" id="6527103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527106">func</span>&nbsp;<span class="op" id="6527111">(</span><span class="ident" id="6527112">g</span>&nbsp;<span class="op" id="6527114">*</span><span class="ident" id="6527115">BinaryGobber</span><span class="op" id="6527127">)</span>&nbsp;<span class="ident" id="6527129">UnmarshalBinary</span><span class="op" id="6527144">(</span><span class="ident" id="6527145">data</span>&nbsp;<span class="op" id="6527150">[</span><span class="op" id="6527151">]</span><span class="builtintype" id="6527152">byte</span><span class="op" id="6527156">)</span>&nbsp;<span class="builtintype" id="6527158">error</span>&nbsp;<span class="op" id="6527164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6527167">_</span><span class="op" id="6527168">,</span>&nbsp;<span class="ident" id="6527170">err</span>&nbsp;<span class="op" id="6527174">:=</span>&nbsp;<span class="ident" id="6527177">fmt</span><span class="op" id="6527180">.</span><span class="ident" id="6527181">Sscanf</span><span class="op" id="6527187">(</span><span class="builtintype" id="6527188">string</span><span class="op" id="6527194">(</span><span class="ident" id="6527195">data</span><span class="op" id="6527199">)</span><span class="op" id="6527200">,</span>&nbsp;<span class="string" id="6527202">&#34;VALUE=%d&#34;</span><span class="op" id="6527212">,</span>&nbsp;<span class="op" id="6527214">(</span><span class="op" id="6527215">*</span><span class="builtintype" id="6527216">int</span><span class="op" id="6527219">)</span><span class="op" id="6527220">(</span><span class="ident" id="6527221">g</span><span class="op" id="6527222">)</span><span class="op" id="6527223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527226">return</span>&nbsp;<span class="ident" id="6527233">err</span><br>
<span class="lineno">120</span><span class="op" id="6527237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527240">func</span>&nbsp;<span class="op" id="6527245">(</span><span class="ident" id="6527246">g</span>&nbsp;<span class="op" id="6527248">*</span><span class="ident" id="6527249">TextGobber</span><span class="op" id="6527259">)</span>&nbsp;<span class="ident" id="6527261">MarshalText</span><span class="op" id="6527272">(</span><span class="op" id="6527273">)</span>&nbsp;<span class="op" id="6527275">(</span><span class="op" id="6527276">[</span><span class="op" id="6527277">]</span><span class="builtintype" id="6527278">byte</span><span class="op" id="6527282">,</span>&nbsp;<span class="builtintype" id="6527284">error</span><span class="op" id="6527289">)</span>&nbsp;<span class="op" id="6527291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527294">return</span>&nbsp;<span class="op" id="6527301">[</span><span class="op" id="6527302">]</span><span class="builtintype" id="6527303">byte</span><span class="op" id="6527307">(</span><span class="ident" id="6527308">fmt</span><span class="op" id="6527311">.</span><span class="ident" id="6527312">Sprintf</span><span class="op" id="6527319">(</span><span class="string" id="6527320">&#34;VALUE=%d&#34;</span><span class="op" id="6527330">,</span>&nbsp;<span class="op" id="6527332">*</span><span class="ident" id="6527333">g</span><span class="op" id="6527334">)</span><span class="op" id="6527335">)</span><span class="op" id="6527336">,</span>&nbsp;<span class="builtintype" id="6527338">nil</span><br>
<span class="lineno"></span><span class="op" id="6527342">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="6527345">func</span>&nbsp;<span class="op" id="6527350">(</span><span class="ident" id="6527351">g</span>&nbsp;<span class="op" id="6527353">*</span><span class="ident" id="6527354">TextGobber</span><span class="op" id="6527364">)</span>&nbsp;<span class="ident" id="6527366">UnmarshalText</span><span class="op" id="6527379">(</span><span class="ident" id="6527380">data</span>&nbsp;<span class="op" id="6527385">[</span><span class="op" id="6527386">]</span><span class="builtintype" id="6527387">byte</span><span class="op" id="6527391">)</span>&nbsp;<span class="builtintype" id="6527393">error</span>&nbsp;<span class="op" id="6527399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6527402">_</span><span class="op" id="6527403">,</span>&nbsp;<span class="ident" id="6527405">err</span>&nbsp;<span class="op" id="6527409">:=</span>&nbsp;<span class="ident" id="6527412">fmt</span><span class="op" id="6527415">.</span><span class="ident" id="6527416">Sscanf</span><span class="op" id="6527422">(</span><span class="builtintype" id="6527423">string</span><span class="op" id="6527429">(</span><span class="ident" id="6527430">data</span><span class="op" id="6527434">)</span><span class="op" id="6527435">,</span>&nbsp;<span class="string" id="6527437">&#34;VALUE=%d&#34;</span><span class="op" id="6527447">,</span>&nbsp;<span class="op" id="6527449">(</span><span class="op" id="6527450">*</span><span class="builtintype" id="6527451">int</span><span class="op" id="6527454">)</span><span class="op" id="6527455">(</span><span class="ident" id="6527456">g</span><span class="op" id="6527457">)</span><span class="op" id="6527458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527461">return</span>&nbsp;<span class="ident" id="6527468">err</span><br>
<span class="lineno"></span><span class="op" id="6527472">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="6527475">func</span>&nbsp;<span class="op" id="6527480">(</span><span class="ident" id="6527481">v</span>&nbsp;<span class="ident" id="6527483">ValueGobber</span><span class="op" id="6527494">)</span>&nbsp;<span class="ident" id="6527496">GobEncode</span><span class="op" id="6527505">(</span><span class="op" id="6527506">)</span>&nbsp;<span class="op" id="6527508">(</span><span class="op" id="6527509">[</span><span class="op" id="6527510">]</span><span class="builtintype" id="6527511">byte</span><span class="op" id="6527515">,</span>&nbsp;<span class="builtintype" id="6527517">error</span><span class="op" id="6527522">)</span>&nbsp;<span class="op" id="6527524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527527">return</span>&nbsp;<span class="op" id="6527534">[</span><span class="op" id="6527535">]</span><span class="builtintype" id="6527536">byte</span><span class="op" id="6527540">(</span><span class="ident" id="6527541">fmt</span><span class="op" id="6527544">.</span><span class="ident" id="6527545">Sprintf</span><span class="op" id="6527552">(</span><span class="string" id="6527553">&#34;VALUE=%s&#34;</span><span class="op" id="6527563">,</span>&nbsp;<span class="ident" id="6527565">v</span><span class="op" id="6527566">)</span><span class="op" id="6527567">)</span><span class="op" id="6527568">,</span>&nbsp;<span class="builtintype" id="6527570">nil</span><br>
<span class="lineno"></span><span class="op" id="6527574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6527577">func</span>&nbsp;<span class="op" id="6527582">(</span><span class="ident" id="6527583">v</span>&nbsp;<span class="op" id="6527585">*</span><span class="ident" id="6527586">ValueGobber</span><span class="op" id="6527597">)</span>&nbsp;<span class="ident" id="6527599">GobDecode</span><span class="op" id="6527608">(</span><span class="ident" id="6527609">data</span>&nbsp;<span class="op" id="6527614">[</span><span class="op" id="6527615">]</span><span class="builtintype" id="6527616">byte</span><span class="op" id="6527620">)</span>&nbsp;<span class="builtintype" id="6527622">error</span>&nbsp;<span class="op" id="6527628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6527631">_</span><span class="op" id="6527632">,</span>&nbsp;<span class="ident" id="6527634">err</span>&nbsp;<span class="op" id="6527638">:=</span>&nbsp;<span class="ident" id="6527641">fmt</span><span class="op" id="6527644">.</span><span class="ident" id="6527645">Sscanf</span><span class="op" id="6527651">(</span><span class="builtintype" id="6527652">string</span><span class="op" id="6527658">(</span><span class="ident" id="6527659">data</span><span class="op" id="6527663">)</span><span class="op" id="6527664">,</span>&nbsp;<span class="string" id="6527666">&#34;VALUE=%s&#34;</span><span class="op" id="6527676">,</span>&nbsp;<span class="op" id="6527678">(</span><span class="op" id="6527679">*</span><span class="builtintype" id="6527680">string</span><span class="op" id="6527686">)</span><span class="op" id="6527687">(</span><span class="ident" id="6527688">v</span><span class="op" id="6527689">)</span><span class="op" id="6527690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527693">return</span>&nbsp;<span class="ident" id="6527700">err</span><br>
<span class="lineno"></span><span class="op" id="6527704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="6527707">func</span>&nbsp;<span class="op" id="6527712">(</span><span class="ident" id="6527713">v</span>&nbsp;<span class="ident" id="6527715">BinaryValueGobber</span><span class="op" id="6527732">)</span>&nbsp;<span class="ident" id="6527734">MarshalBinary</span><span class="op" id="6527747">(</span><span class="op" id="6527748">)</span>&nbsp;<span class="op" id="6527750">(</span><span class="op" id="6527751">[</span><span class="op" id="6527752">]</span><span class="builtintype" id="6527753">byte</span><span class="op" id="6527757">,</span>&nbsp;<span class="builtintype" id="6527759">error</span><span class="op" id="6527764">)</span>&nbsp;<span class="op" id="6527766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527769">return</span>&nbsp;<span class="op" id="6527776">[</span><span class="op" id="6527777">]</span><span class="builtintype" id="6527778">byte</span><span class="op" id="6527782">(</span><span class="ident" id="6527783">fmt</span><span class="op" id="6527786">.</span><span class="ident" id="6527787">Sprintf</span><span class="op" id="6527794">(</span><span class="string" id="6527795">&#34;VALUE=%s&#34;</span><span class="op" id="6527805">,</span>&nbsp;<span class="ident" id="6527807">v</span><span class="op" id="6527808">)</span><span class="op" id="6527809">)</span><span class="op" id="6527810">,</span>&nbsp;<span class="builtintype" id="6527812">nil</span><br>
<span class="lineno"></span><span class="op" id="6527816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527819">func</span>&nbsp;<span class="op" id="6527824">(</span><span class="ident" id="6527825">v</span>&nbsp;<span class="op" id="6527827">*</span><span class="ident" id="6527828">BinaryValueGobber</span><span class="op" id="6527845">)</span>&nbsp;<span class="ident" id="6527847">UnmarshalBinary</span><span class="op" id="6527862">(</span><span class="ident" id="6527863">data</span>&nbsp;<span class="op" id="6527868">[</span><span class="op" id="6527869">]</span><span class="builtintype" id="6527870">byte</span><span class="op" id="6527874">)</span>&nbsp;<span class="builtintype" id="6527876">error</span>&nbsp;<span class="op" id="6527882">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6527885">_</span><span class="op" id="6527886">,</span>&nbsp;<span class="ident" id="6527888">err</span>&nbsp;<span class="op" id="6527892">:=</span>&nbsp;<span class="ident" id="6527895">fmt</span><span class="op" id="6527898">.</span><span class="ident" id="6527899">Sscanf</span><span class="op" id="6527905">(</span><span class="builtintype" id="6527906">string</span><span class="op" id="6527912">(</span><span class="ident" id="6527913">data</span><span class="op" id="6527917">)</span><span class="op" id="6527918">,</span>&nbsp;<span class="string" id="6527920">&#34;VALUE=%s&#34;</span><span class="op" id="6527930">,</span>&nbsp;<span class="op" id="6527932">(</span><span class="op" id="6527933">*</span><span class="builtintype" id="6527934">string</span><span class="op" id="6527940">)</span><span class="op" id="6527941">(</span><span class="ident" id="6527942">v</span><span class="op" id="6527943">)</span><span class="op" id="6527944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6527947">return</span>&nbsp;<span class="ident" id="6527954">err</span><br>
<span class="lineno"></span><span class="op" id="6527958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6527961">func</span>&nbsp;<span class="op" id="6527966">(</span><span class="ident" id="6527967">v</span>&nbsp;<span class="ident" id="6527969">TextValueGobber</span><span class="op" id="6527984">)</span>&nbsp;<span class="ident" id="6527986">MarshalText</span><span class="op" id="6527997">(</span><span class="op" id="6527998">)</span>&nbsp;<span class="op" id="6528000">(</span><span class="op" id="6528001">[</span><span class="op" id="6528002">]</span><span class="builtintype" id="6528003">byte</span><span class="op" id="6528007">,</span>&nbsp;<span class="builtintype" id="6528009">error</span><span class="op" id="6528014">)</span>&nbsp;<span class="op" id="6528016">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6528019">return</span>&nbsp;<span class="op" id="6528026">[</span><span class="op" id="6528027">]</span><span class="builtintype" id="6528028">byte</span><span class="op" id="6528032">(</span><span class="ident" id="6528033">fmt</span><span class="op" id="6528036">.</span><span class="ident" id="6528037">Sprintf</span><span class="op" id="6528044">(</span><span class="string" id="6528045">&#34;VALUE=%s&#34;</span><span class="op" id="6528055">,</span>&nbsp;<span class="ident" id="6528057">v</span><span class="op" id="6528058">)</span><span class="op" id="6528059">)</span><span class="op" id="6528060">,</span>&nbsp;<span class="builtintype" id="6528062">nil</span><br>
<span class="lineno"></span><span class="op" id="6528066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6528069">func</span>&nbsp;<span class="op" id="6528074">(</span><span class="ident" id="6528075">v</span>&nbsp;<span class="op" id="6528077">*</span><span class="ident" id="6528078">TextValueGobber</span><span class="op" id="6528093">)</span>&nbsp;<span class="ident" id="6528095">UnmarshalText</span><span class="op" id="6528108">(</span><span class="ident" id="6528109">data</span>&nbsp;<span class="op" id="6528114">[</span><span class="op" id="6528115">]</span><span class="builtintype" id="6528116">byte</span><span class="op" id="6528120">)</span>&nbsp;<span class="builtintype" id="6528122">error</span>&nbsp;<span class="op" id="6528128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528131">_</span><span class="op" id="6528132">,</span>&nbsp;<span class="ident" id="6528134">err</span>&nbsp;<span class="op" id="6528138">:=</span>&nbsp;<span class="ident" id="6528141">fmt</span><span class="op" id="6528144">.</span><span class="ident" id="6528145">Sscanf</span><span class="op" id="6528151">(</span><span class="builtintype" id="6528152">string</span><span class="op" id="6528158">(</span><span class="ident" id="6528159">data</span><span class="op" id="6528163">)</span><span class="op" id="6528164">,</span>&nbsp;<span class="string" id="6528166">&#34;VALUE=%s&#34;</span><span class="op" id="6528176">,</span>&nbsp;<span class="op" id="6528178">(</span><span class="op" id="6528179">*</span><span class="builtintype" id="6528180">string</span><span class="op" id="6528186">)</span><span class="op" id="6528187">(</span><span class="ident" id="6528188">v</span><span class="op" id="6528189">)</span><span class="op" id="6528190">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6528193">return</span>&nbsp;<span class="ident" id="6528200">err</span><br>
<span class="lineno"></span><span class="op" id="6528204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6528207">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="6528253">type</span>&nbsp;<span class="ident" id="6528258">GobTest0</span>&nbsp;<span class="keyword" id="6528267">struct</span>&nbsp;<span class="op" id="6528274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528277">X</span>&nbsp;<span class="builtintype" id="6528279">int</span>&nbsp;<span class="comment" id="6528283">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528340">G</span>&nbsp;<span class="op" id="6528342">*</span><span class="ident" id="6528343">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="6528354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="6528357">type</span>&nbsp;<span class="ident" id="6528362">GobTest1</span>&nbsp;<span class="keyword" id="6528371">struct</span>&nbsp;<span class="op" id="6528378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528381">X</span>&nbsp;<span class="builtintype" id="6528383">int</span>&nbsp;<span class="comment" id="6528387">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528444">G</span>&nbsp;<span class="op" id="6528446">*</span><span class="ident" id="6528447">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="6528460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="6528463">type</span>&nbsp;<span class="ident" id="6528468">GobTest2</span>&nbsp;<span class="keyword" id="6528477">struct</span>&nbsp;<span class="op" id="6528484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528487">X</span>&nbsp;<span class="builtintype" id="6528489">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6528496">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528553">G</span>&nbsp;<span class="builtintype" id="6528555">string</span>&nbsp;<span class="comment" id="6528562">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="6528606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6528609">type</span>&nbsp;<span class="ident" id="6528614">GobTest3</span>&nbsp;<span class="keyword" id="6528623">struct</span>&nbsp;<span class="op" id="6528630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528633">X</span>&nbsp;<span class="builtintype" id="6528635">int</span>&nbsp;<span class="comment" id="6528639">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528696">G</span>&nbsp;<span class="op" id="6528698">*</span><span class="ident" id="6528699">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528707">B</span>&nbsp;<span class="op" id="6528709">*</span><span class="ident" id="6528710">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528724">T</span>&nbsp;<span class="op" id="6528726">*</span><span class="ident" id="6528727">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="6528738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6528741">type</span>&nbsp;<span class="ident" id="6528746">GobTest4</span>&nbsp;<span class="keyword" id="6528755">struct</span>&nbsp;<span class="op" id="6528762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528765">X</span>&nbsp;&nbsp;<span class="builtintype" id="6528768">int</span>&nbsp;<span class="comment" id="6528772">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528829">V</span>&nbsp;&nbsp;<span class="ident" id="6528832">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528845">BV</span>&nbsp;<span class="ident" id="6528848">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528867">TV</span>&nbsp;<span class="ident" id="6528870">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6528886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6528889">type</span>&nbsp;<span class="ident" id="6528894">GobTest5</span>&nbsp;<span class="keyword" id="6528903">struct</span>&nbsp;<span class="op" id="6528910">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528913">X</span>&nbsp;&nbsp;<span class="builtintype" id="6528916">int</span>&nbsp;<span class="comment" id="6528920">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528977">V</span>&nbsp;&nbsp;<span class="op" id="6528980">*</span><span class="ident" id="6528981">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6528994">BV</span>&nbsp;<span class="op" id="6528997">*</span><span class="ident" id="6528998">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529017">TV</span>&nbsp;<span class="op" id="6529020">*</span><span class="ident" id="6529021">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6529037">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="6529040">type</span>&nbsp;<span class="ident" id="6529045">GobTest6</span>&nbsp;<span class="keyword" id="6529054">struct</span>&nbsp;<span class="op" id="6529061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529064">X</span>&nbsp;&nbsp;<span class="builtintype" id="6529067">int</span>&nbsp;<span class="comment" id="6529071">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529128">V</span>&nbsp;&nbsp;<span class="ident" id="6529131">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529144">W</span>&nbsp;&nbsp;<span class="op" id="6529147">*</span><span class="ident" id="6529148">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529161">BV</span>&nbsp;<span class="ident" id="6529164">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529183">BW</span>&nbsp;<span class="op" id="6529186">*</span><span class="ident" id="6529187">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529206">TV</span>&nbsp;<span class="ident" id="6529209">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529226">TW</span>&nbsp;<span class="op" id="6529229">*</span><span class="ident" id="6529230">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6529246">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="6529249">type</span>&nbsp;<span class="ident" id="6529254">GobTest7</span>&nbsp;<span class="keyword" id="6529263">struct</span>&nbsp;<span class="op" id="6529270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529273">X</span>&nbsp;&nbsp;<span class="builtintype" id="6529276">int</span>&nbsp;<span class="comment" id="6529280">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529337">V</span>&nbsp;&nbsp;<span class="op" id="6529340">*</span><span class="ident" id="6529341">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529354">W</span>&nbsp;&nbsp;<span class="ident" id="6529357">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529370">BV</span>&nbsp;<span class="op" id="6529373">*</span><span class="ident" id="6529374">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529393">BW</span>&nbsp;<span class="ident" id="6529396">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529415">TV</span>&nbsp;<span class="op" id="6529418">*</span><span class="ident" id="6529419">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529436">TW</span>&nbsp;<span class="ident" id="6529439">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="6529455">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="6529458">type</span>&nbsp;<span class="ident" id="6529463">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="6529484">struct</span>&nbsp;<span class="op" id="6529491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529494">X</span>&nbsp;<span class="builtintype" id="6529496">int</span>&nbsp;<span class="comment" id="6529500">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="6529556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6529559">type</span>&nbsp;<span class="ident" id="6529564">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="6529583">struct</span>&nbsp;<span class="op" id="6529590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529593">X</span>&nbsp;<span class="builtintype" id="6529595">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6529608">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529665">G</span>&nbsp;<span class="ident" id="6529667">StringStruct</span>&nbsp;<span class="comment" id="6529680">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="6529698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="6529701">type</span>&nbsp;<span class="ident" id="6529706">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="6529728">struct</span>&nbsp;<span class="op" id="6529735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529738">X</span>&nbsp;<span class="builtintype" id="6529740">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6529756">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529813">G</span>&nbsp;<span class="op" id="6529815">*</span><span class="op" id="6529816">*</span><span class="op" id="6529817">*</span><span class="ident" id="6529818">StringStruct</span>&nbsp;<span class="comment" id="6529831">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="6529864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="6529867">type</span>&nbsp;<span class="ident" id="6529872">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="6529891">struct</span>&nbsp;<span class="op" id="6529898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529901">X</span>&nbsp;<span class="builtintype" id="6529903">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6529915">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6529972">A</span>&nbsp;<span class="ident" id="6529974">ArrayStruct</span>&nbsp;<span class="comment" id="6529986">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="6530004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="6530007">type</span>&nbsp;<span class="ident" id="6530012">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="6530039">struct</span>&nbsp;<span class="op" id="6530046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530049">X</span>&nbsp;<span class="builtintype" id="6530051">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6530066">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530123">A</span>&nbsp;<span class="op" id="6530125">*</span><span class="op" id="6530126">*</span><span class="op" id="6530127">*</span><span class="ident" id="6530128">ArrayStruct</span>&nbsp;<span class="comment" id="6530140">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="6530177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="6530180">func</span>&nbsp;<span class="ident" id="6530185">TestGobEncoderField</span><span class="op" id="6530204">(</span><span class="ident" id="6530205">t</span>&nbsp;<span class="op" id="6530207">*</span><span class="ident" id="6530208">testing</span><span class="op" id="6530215">.</span><span class="ident" id="6530216">T</span><span class="op" id="6530217">)</span>&nbsp;<span class="op" id="6530219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530222">b</span>&nbsp;<span class="op" id="6530224">:=</span>&nbsp;<span class="builtinfunc" id="6530227">new</span><span class="op" id="6530230">(</span><span class="ident" id="6530231">bytes</span><span class="op" id="6530236">.</span><span class="ident" id="6530237">Buffer</span><span class="op" id="6530243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6530246">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530284">enc</span>&nbsp;<span class="op" id="6530288">:=</span>&nbsp;<span class="ident" id="6530291">NewEncoder</span><span class="op" id="6530301">(</span><span class="ident" id="6530302">b</span><span class="op" id="6530303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530306">err</span>&nbsp;<span class="op" id="6530310">:=</span>&nbsp;<span class="ident" id="6530313">enc</span><span class="op" id="6530316">.</span><span class="ident" id="6530317">Encode</span><span class="op" id="6530323">(</span><span class="ident" id="6530324">GobTest0</span><span class="op" id="6530332">{</span><span class="num" id="6530333">17</span><span class="op" id="6530335">,</span>&nbsp;<span class="op" id="6530337">&amp;</span><span class="ident" id="6530338">ByteStruct</span><span class="op" id="6530348">{</span><span class="string" id="6530349">&#39;A&#39;</span><span class="op" id="6530352">}</span><span class="op" id="6530353">}</span><span class="op" id="6530354">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530357">if</span>&nbsp;<span class="ident" id="6530360">err</span>&nbsp;<span class="op" id="6530364">!=</span>&nbsp;<span class="builtintype" id="6530367">nil</span>&nbsp;<span class="op" id="6530371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530375">t</span><span class="op" id="6530376">.</span><span class="ident" id="6530377">Fatal</span><span class="op" id="6530382">(</span><span class="string" id="6530383">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6530398">,</span>&nbsp;<span class="ident" id="6530400">err</span><span class="op" id="6530403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6530406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530409">dec</span>&nbsp;<span class="op" id="6530413">:=</span>&nbsp;<span class="ident" id="6530416">NewDecoder</span><span class="op" id="6530426">(</span><span class="ident" id="6530427">b</span><span class="op" id="6530428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530431">x</span>&nbsp;<span class="op" id="6530433">:=</span>&nbsp;<span class="builtinfunc" id="6530436">new</span><span class="op" id="6530439">(</span><span class="ident" id="6530440">GobTest0</span><span class="op" id="6530448">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530451">err</span>&nbsp;<span class="op" id="6530455">=</span>&nbsp;<span class="ident" id="6530457">dec</span><span class="op" id="6530460">.</span><span class="ident" id="6530461">Decode</span><span class="op" id="6530467">(</span><span class="ident" id="6530468">x</span><span class="op" id="6530469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530472">if</span>&nbsp;<span class="ident" id="6530475">err</span>&nbsp;<span class="op" id="6530479">!=</span>&nbsp;<span class="builtintype" id="6530482">nil</span>&nbsp;<span class="op" id="6530486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530490">t</span><span class="op" id="6530491">.</span><span class="ident" id="6530492">Fatal</span><span class="op" id="6530497">(</span><span class="string" id="6530498">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6530513">,</span>&nbsp;<span class="ident" id="6530515">err</span><span class="op" id="6530518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6530521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530524">if</span>&nbsp;<span class="ident" id="6530527">x</span><span class="op" id="6530528">.</span><span class="ident" id="6530529">G</span><span class="op" id="6530530">.</span><span class="ident" id="6530531">a</span>&nbsp;<span class="op" id="6530533">!=</span>&nbsp;<span class="string" id="6530536">&#39;A&#39;</span>&nbsp;<span class="op" id="6530540">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530544">t</span><span class="op" id="6530545">.</span><span class="ident" id="6530546">Errorf</span><span class="op" id="6530552">(</span><span class="string" id="6530553">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6530574">,</span>&nbsp;<span class="ident" id="6530576">x</span><span class="op" id="6530577">.</span><span class="ident" id="6530578">G</span><span class="op" id="6530579">.</span><span class="ident" id="6530580">a</span><span class="op" id="6530581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6530584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6530587">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530627">b</span><span class="op" id="6530628">.</span><span class="ident" id="6530629">Reset</span><span class="op" id="6530634">(</span><span class="op" id="6530635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530638">gobber</span>&nbsp;<span class="op" id="6530645">:=</span>&nbsp;<span class="ident" id="6530648">Gobber</span><span class="op" id="6530654">(</span><span class="num" id="6530655">23</span><span class="op" id="6530657">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530660">bgobber</span>&nbsp;<span class="op" id="6530668">:=</span>&nbsp;<span class="ident" id="6530671">BinaryGobber</span><span class="op" id="6530683">(</span><span class="num" id="6530684">24</span><span class="op" id="6530686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530689">tgobber</span>&nbsp;<span class="op" id="6530697">:=</span>&nbsp;<span class="ident" id="6530700">TextGobber</span><span class="op" id="6530710">(</span><span class="num" id="6530711">25</span><span class="op" id="6530713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530716">err</span>&nbsp;<span class="op" id="6530720">=</span>&nbsp;<span class="ident" id="6530722">enc</span><span class="op" id="6530725">.</span><span class="ident" id="6530726">Encode</span><span class="op" id="6530732">(</span><span class="ident" id="6530733">GobTest3</span><span class="op" id="6530741">{</span><span class="num" id="6530742">17</span><span class="op" id="6530744">,</span>&nbsp;<span class="op" id="6530746">&amp;</span><span class="ident" id="6530747">gobber</span><span class="op" id="6530753">,</span>&nbsp;<span class="op" id="6530755">&amp;</span><span class="ident" id="6530756">bgobber</span><span class="op" id="6530763">,</span>&nbsp;<span class="op" id="6530765">&amp;</span><span class="ident" id="6530766">tgobber</span><span class="op" id="6530773">}</span><span class="op" id="6530774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530777">if</span>&nbsp;<span class="ident" id="6530780">err</span>&nbsp;<span class="op" id="6530784">!=</span>&nbsp;<span class="builtintype" id="6530787">nil</span>&nbsp;<span class="op" id="6530791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530795">t</span><span class="op" id="6530796">.</span><span class="ident" id="6530797">Fatal</span><span class="op" id="6530802">(</span><span class="string" id="6530803">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6530818">,</span>&nbsp;<span class="ident" id="6530820">err</span><span class="op" id="6530823">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6530826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530829">y</span>&nbsp;<span class="op" id="6530831">:=</span>&nbsp;<span class="builtinfunc" id="6530834">new</span><span class="op" id="6530837">(</span><span class="ident" id="6530838">GobTest3</span><span class="op" id="6530846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530849">err</span>&nbsp;<span class="op" id="6530853">=</span>&nbsp;<span class="ident" id="6530855">dec</span><span class="op" id="6530858">.</span><span class="ident" id="6530859">Decode</span><span class="op" id="6530865">(</span><span class="ident" id="6530866">y</span><span class="op" id="6530867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530870">if</span>&nbsp;<span class="ident" id="6530873">err</span>&nbsp;<span class="op" id="6530877">!=</span>&nbsp;<span class="builtintype" id="6530880">nil</span>&nbsp;<span class="op" id="6530884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530888">t</span><span class="op" id="6530889">.</span><span class="ident" id="6530890">Fatal</span><span class="op" id="6530895">(</span><span class="string" id="6530896">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6530911">,</span>&nbsp;<span class="ident" id="6530913">err</span><span class="op" id="6530916">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6530919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6530922">if</span>&nbsp;<span class="op" id="6530925">*</span><span class="ident" id="6530926">y</span><span class="op" id="6530927">.</span><span class="ident" id="6530928">G</span>&nbsp;<span class="op" id="6530930">!=</span>&nbsp;<span class="num" id="6530933">23</span>&nbsp;<span class="op" id="6530936">||</span>&nbsp;<span class="op" id="6530939">*</span><span class="ident" id="6530940">y</span><span class="op" id="6530941">.</span><span class="ident" id="6530942">B</span>&nbsp;<span class="op" id="6530944">!=</span>&nbsp;<span class="num" id="6530947">24</span>&nbsp;<span class="op" id="6530950">||</span>&nbsp;<span class="op" id="6530953">*</span><span class="ident" id="6530954">y</span><span class="op" id="6530955">.</span><span class="ident" id="6530956">T</span>&nbsp;<span class="op" id="6530958">!=</span>&nbsp;<span class="num" id="6530961">25</span>&nbsp;<span class="op" id="6530964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6530968">t</span><span class="op" id="6530969">.</span><span class="ident" id="6530970">Errorf</span><span class="op" id="6530976">(</span><span class="string" id="6530977">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6530998">,</span>&nbsp;<span class="op" id="6531000">*</span><span class="ident" id="6531001">y</span><span class="op" id="6531002">.</span><span class="ident" id="6531003">G</span><span class="op" id="6531004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6531007">}</span><br>
<span class="lineno"></span><span class="op" id="6531009">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6531012">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="6531079">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6531122">func</span>&nbsp;<span class="ident" id="6531127">TestGobEncoderValueField</span><span class="op" id="6531151">(</span><span class="ident" id="6531152">t</span>&nbsp;<span class="op" id="6531154">*</span><span class="ident" id="6531155">testing</span><span class="op" id="6531162">.</span><span class="ident" id="6531163">T</span><span class="op" id="6531164">)</span>&nbsp;<span class="op" id="6531166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531169">b</span>&nbsp;<span class="op" id="6531171">:=</span>&nbsp;<span class="builtinfunc" id="6531174">new</span><span class="op" id="6531177">(</span><span class="ident" id="6531178">bytes</span><span class="op" id="6531183">.</span><span class="ident" id="6531184">Buffer</span><span class="op" id="6531190">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6531193">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531231">enc</span>&nbsp;<span class="op" id="6531235">:=</span>&nbsp;<span class="ident" id="6531238">NewEncoder</span><span class="op" id="6531248">(</span><span class="ident" id="6531249">b</span><span class="op" id="6531250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531253">err</span>&nbsp;<span class="op" id="6531257">:=</span>&nbsp;<span class="ident" id="6531260">enc</span><span class="op" id="6531263">.</span><span class="ident" id="6531264">Encode</span><span class="op" id="6531270">(</span><span class="op" id="6531271">&amp;</span><span class="ident" id="6531272">GobTestValueEncDec</span><span class="op" id="6531290">{</span><span class="num" id="6531291">17</span><span class="op" id="6531293">,</span>&nbsp;<span class="ident" id="6531295">StringStruct</span><span class="op" id="6531307">{</span><span class="string" id="6531308">&#34;HIJKL&#34;</span><span class="op" id="6531315">}</span><span class="op" id="6531316">}</span><span class="op" id="6531317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6531320">if</span>&nbsp;<span class="ident" id="6531323">err</span>&nbsp;<span class="op" id="6531327">!=</span>&nbsp;<span class="builtintype" id="6531330">nil</span>&nbsp;<span class="op" id="6531334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531338">t</span><span class="op" id="6531339">.</span><span class="ident" id="6531340">Fatal</span><span class="op" id="6531345">(</span><span class="string" id="6531346">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6531361">,</span>&nbsp;<span class="ident" id="6531363">err</span><span class="op" id="6531366">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6531369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531372">dec</span>&nbsp;<span class="op" id="6531376">:=</span>&nbsp;<span class="ident" id="6531379">NewDecoder</span><span class="op" id="6531389">(</span><span class="ident" id="6531390">b</span><span class="op" id="6531391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531394">x</span>&nbsp;<span class="op" id="6531396">:=</span>&nbsp;<span class="builtinfunc" id="6531399">new</span><span class="op" id="6531402">(</span><span class="ident" id="6531403">GobTestValueEncDec</span><span class="op" id="6531421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531424">err</span>&nbsp;<span class="op" id="6531428">=</span>&nbsp;<span class="ident" id="6531430">dec</span><span class="op" id="6531433">.</span><span class="ident" id="6531434">Decode</span><span class="op" id="6531440">(</span><span class="ident" id="6531441">x</span><span class="op" id="6531442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6531445">if</span>&nbsp;<span class="ident" id="6531448">err</span>&nbsp;<span class="op" id="6531452">!=</span>&nbsp;<span class="builtintype" id="6531455">nil</span>&nbsp;<span class="op" id="6531459">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531463">t</span><span class="op" id="6531464">.</span><span class="ident" id="6531465">Fatal</span><span class="op" id="6531470">(</span><span class="string" id="6531471">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6531486">,</span>&nbsp;<span class="ident" id="6531488">err</span><span class="op" id="6531491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6531494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6531497">if</span>&nbsp;<span class="ident" id="6531500">x</span><span class="op" id="6531501">.</span><span class="ident" id="6531502">G</span><span class="op" id="6531503">.</span><span class="ident" id="6531504">s</span>&nbsp;<span class="op" id="6531506">!=</span>&nbsp;<span class="string" id="6531509">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="6531517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531521">t</span><span class="op" id="6531522">.</span><span class="ident" id="6531523">Errorf</span><span class="op" id="6531529">(</span><span class="string" id="6531530">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6531555">,</span>&nbsp;<span class="ident" id="6531557">x</span><span class="op" id="6531558">.</span><span class="ident" id="6531559">G</span><span class="op" id="6531560">.</span><span class="ident" id="6531561">s</span><span class="op" id="6531562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6531565">}</span><br>
<span class="lineno">295</span><span class="op" id="6531567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6531570">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6531623">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="6531659">func</span>&nbsp;<span class="ident" id="6531664">TestGobEncoderIndirectField</span><span class="op" id="6531691">(</span><span class="ident" id="6531692">t</span>&nbsp;<span class="op" id="6531694">*</span><span class="ident" id="6531695">testing</span><span class="op" id="6531702">.</span><span class="ident" id="6531703">T</span><span class="op" id="6531704">)</span>&nbsp;<span class="op" id="6531706">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531709">b</span>&nbsp;<span class="op" id="6531711">:=</span>&nbsp;<span class="builtinfunc" id="6531714">new</span><span class="op" id="6531717">(</span><span class="ident" id="6531718">bytes</span><span class="op" id="6531723">.</span><span class="ident" id="6531724">Buffer</span><span class="op" id="6531730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6531733">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531771">enc</span>&nbsp;<span class="op" id="6531775">:=</span>&nbsp;<span class="ident" id="6531778">NewEncoder</span><span class="op" id="6531788">(</span><span class="ident" id="6531789">b</span><span class="op" id="6531790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531793">s</span>&nbsp;<span class="op" id="6531795">:=</span>&nbsp;<span class="op" id="6531798">&amp;</span><span class="ident" id="6531799">StringStruct</span><span class="op" id="6531811">{</span><span class="string" id="6531812">&#34;HIJKL&#34;</span><span class="op" id="6531819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531822">sp</span>&nbsp;<span class="op" id="6531825">:=</span>&nbsp;<span class="op" id="6531828">&amp;</span><span class="ident" id="6531829">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531832">err</span>&nbsp;<span class="op" id="6531836">:=</span>&nbsp;<span class="ident" id="6531839">enc</span><span class="op" id="6531842">.</span><span class="ident" id="6531843">Encode</span><span class="op" id="6531849">(</span><span class="ident" id="6531850">GobTestIndirectEncDec</span><span class="op" id="6531871">{</span><span class="num" id="6531872">17</span><span class="op" id="6531874">,</span>&nbsp;<span class="op" id="6531876">&amp;</span><span class="ident" id="6531877">sp</span><span class="op" id="6531879">}</span><span class="op" id="6531880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6531883">if</span>&nbsp;<span class="ident" id="6531886">err</span>&nbsp;<span class="op" id="6531890">!=</span>&nbsp;<span class="builtintype" id="6531893">nil</span>&nbsp;<span class="op" id="6531897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531901">t</span><span class="op" id="6531902">.</span><span class="ident" id="6531903">Fatal</span><span class="op" id="6531908">(</span><span class="string" id="6531909">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6531924">,</span>&nbsp;<span class="ident" id="6531926">err</span><span class="op" id="6531929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6531932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531935">dec</span>&nbsp;<span class="op" id="6531939">:=</span>&nbsp;<span class="ident" id="6531942">NewDecoder</span><span class="op" id="6531952">(</span><span class="ident" id="6531953">b</span><span class="op" id="6531954">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531957">x</span>&nbsp;<span class="op" id="6531959">:=</span>&nbsp;<span class="builtinfunc" id="6531962">new</span><span class="op" id="6531965">(</span><span class="ident" id="6531966">GobTestIndirectEncDec</span><span class="op" id="6531987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6531990">err</span>&nbsp;<span class="op" id="6531994">=</span>&nbsp;<span class="ident" id="6531996">dec</span><span class="op" id="6531999">.</span><span class="ident" id="6532000">Decode</span><span class="op" id="6532006">(</span><span class="ident" id="6532007">x</span><span class="op" id="6532008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532011">if</span>&nbsp;<span class="ident" id="6532014">err</span>&nbsp;<span class="op" id="6532018">!=</span>&nbsp;<span class="builtintype" id="6532021">nil</span>&nbsp;<span class="op" id="6532025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532029">t</span><span class="op" id="6532030">.</span><span class="ident" id="6532031">Fatal</span><span class="op" id="6532036">(</span><span class="string" id="6532037">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6532052">,</span>&nbsp;<span class="ident" id="6532054">err</span><span class="op" id="6532057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532060">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532063">if</span>&nbsp;<span class="op" id="6532066">(</span><span class="op" id="6532067">*</span><span class="op" id="6532068">*</span><span class="op" id="6532069">*</span><span class="ident" id="6532070">x</span><span class="op" id="6532071">.</span><span class="ident" id="6532072">G</span><span class="op" id="6532073">)</span><span class="op" id="6532074">.</span><span class="ident" id="6532075">s</span>&nbsp;<span class="op" id="6532077">!=</span>&nbsp;<span class="string" id="6532080">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="6532088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532092">t</span><span class="op" id="6532093">.</span><span class="ident" id="6532094">Errorf</span><span class="op" id="6532100">(</span><span class="string" id="6532101">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6532126">,</span>&nbsp;<span class="op" id="6532128">(</span><span class="op" id="6532129">*</span><span class="op" id="6532130">*</span><span class="op" id="6532131">*</span><span class="ident" id="6532132">x</span><span class="op" id="6532133">.</span><span class="ident" id="6532134">G</span><span class="op" id="6532135">)</span><span class="op" id="6532136">.</span><span class="ident" id="6532137">s</span><span class="op" id="6532138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532141">}</span><br>
<span class="lineno"></span><span class="op" id="6532143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="6532146">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6532187">func</span>&nbsp;<span class="ident" id="6532192">TestGobEncoderArrayField</span><span class="op" id="6532216">(</span><span class="ident" id="6532217">t</span>&nbsp;<span class="op" id="6532219">*</span><span class="ident" id="6532220">testing</span><span class="op" id="6532227">.</span><span class="ident" id="6532228">T</span><span class="op" id="6532229">)</span>&nbsp;<span class="op" id="6532231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532234">b</span>&nbsp;<span class="op" id="6532236">:=</span>&nbsp;<span class="builtinfunc" id="6532239">new</span><span class="op" id="6532242">(</span><span class="ident" id="6532243">bytes</span><span class="op" id="6532248">.</span><span class="ident" id="6532249">Buffer</span><span class="op" id="6532255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532258">enc</span>&nbsp;<span class="op" id="6532262">:=</span>&nbsp;<span class="ident" id="6532265">NewEncoder</span><span class="op" id="6532275">(</span><span class="ident" id="6532276">b</span><span class="op" id="6532277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532280">var</span>&nbsp;<span class="ident" id="6532284">a</span>&nbsp;<span class="ident" id="6532286">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532306">a</span><span class="op" id="6532307">.</span><span class="ident" id="6532308">X</span>&nbsp;<span class="op" id="6532310">=</span>&nbsp;<span class="num" id="6532312">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532316">for</span>&nbsp;<span class="ident" id="6532320">i</span>&nbsp;<span class="op" id="6532322">:=</span>&nbsp;<span class="keyword" id="6532325">range</span>&nbsp;<span class="ident" id="6532331">a</span><span class="op" id="6532332">.</span><span class="ident" id="6532333">A</span><span class="op" id="6532334">.</span><span class="ident" id="6532335">a</span>&nbsp;<span class="op" id="6532337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532341">a</span><span class="op" id="6532342">.</span><span class="ident" id="6532343">A</span><span class="op" id="6532344">.</span><span class="ident" id="6532345">a</span><span class="op" id="6532346">[</span><span class="ident" id="6532347">i</span><span class="op" id="6532348">]</span>&nbsp;<span class="op" id="6532350">=</span>&nbsp;<span class="builtintype" id="6532352">byte</span><span class="op" id="6532356">(</span><span class="ident" id="6532357">i</span><span class="op" id="6532358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532364">err</span>&nbsp;<span class="op" id="6532368">:=</span>&nbsp;<span class="ident" id="6532371">enc</span><span class="op" id="6532374">.</span><span class="ident" id="6532375">Encode</span><span class="op" id="6532381">(</span><span class="op" id="6532382">&amp;</span><span class="ident" id="6532383">a</span><span class="op" id="6532384">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532387">if</span>&nbsp;<span class="ident" id="6532390">err</span>&nbsp;<span class="op" id="6532394">!=</span>&nbsp;<span class="builtintype" id="6532397">nil</span>&nbsp;<span class="op" id="6532401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532405">t</span><span class="op" id="6532406">.</span><span class="ident" id="6532407">Fatal</span><span class="op" id="6532412">(</span><span class="string" id="6532413">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6532428">,</span>&nbsp;<span class="ident" id="6532430">err</span><span class="op" id="6532433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532439">dec</span>&nbsp;<span class="op" id="6532443">:=</span>&nbsp;<span class="ident" id="6532446">NewDecoder</span><span class="op" id="6532456">(</span><span class="ident" id="6532457">b</span><span class="op" id="6532458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532461">x</span>&nbsp;<span class="op" id="6532463">:=</span>&nbsp;<span class="builtinfunc" id="6532466">new</span><span class="op" id="6532469">(</span><span class="ident" id="6532470">GobTestArrayEncDec</span><span class="op" id="6532488">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532491">err</span>&nbsp;<span class="op" id="6532495">=</span>&nbsp;<span class="ident" id="6532497">dec</span><span class="op" id="6532500">.</span><span class="ident" id="6532501">Decode</span><span class="op" id="6532507">(</span><span class="ident" id="6532508">x</span><span class="op" id="6532509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532512">if</span>&nbsp;<span class="ident" id="6532515">err</span>&nbsp;<span class="op" id="6532519">!=</span>&nbsp;<span class="builtintype" id="6532522">nil</span>&nbsp;<span class="op" id="6532526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532530">t</span><span class="op" id="6532531">.</span><span class="ident" id="6532532">Fatal</span><span class="op" id="6532537">(</span><span class="string" id="6532538">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6532553">,</span>&nbsp;<span class="ident" id="6532555">err</span><span class="op" id="6532558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532564">for</span>&nbsp;<span class="ident" id="6532568">i</span><span class="op" id="6532569">,</span>&nbsp;<span class="ident" id="6532571">v</span>&nbsp;<span class="op" id="6532573">:=</span>&nbsp;<span class="keyword" id="6532576">range</span>&nbsp;<span class="ident" id="6532582">x</span><span class="op" id="6532583">.</span><span class="ident" id="6532584">A</span><span class="op" id="6532585">.</span><span class="ident" id="6532586">a</span>&nbsp;<span class="op" id="6532588">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532592">if</span>&nbsp;<span class="ident" id="6532595">v</span>&nbsp;<span class="op" id="6532597">!=</span>&nbsp;<span class="builtintype" id="6532600">byte</span><span class="op" id="6532604">(</span><span class="ident" id="6532605">i</span><span class="op" id="6532606">)</span>&nbsp;<span class="op" id="6532608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532613">t</span><span class="op" id="6532614">.</span><span class="ident" id="6532615">Errorf</span><span class="op" id="6532621">(</span><span class="string" id="6532622">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="6532642">,</span>&nbsp;<span class="builtintype" id="6532644">byte</span><span class="op" id="6532648">(</span><span class="ident" id="6532649">i</span><span class="op" id="6532650">)</span><span class="op" id="6532651">,</span>&nbsp;<span class="ident" id="6532653">v</span><span class="op" id="6532654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532659">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532670">}</span><br>
<span class="lineno">345</span><span class="op" id="6532672">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6532675">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="6532729">func</span>&nbsp;<span class="ident" id="6532734">TestGobEncoderIndirectArrayField</span><span class="op" id="6532766">(</span><span class="ident" id="6532767">t</span>&nbsp;<span class="op" id="6532769">*</span><span class="ident" id="6532770">testing</span><span class="op" id="6532777">.</span><span class="ident" id="6532778">T</span><span class="op" id="6532779">)</span>&nbsp;<span class="op" id="6532781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532784">b</span>&nbsp;<span class="op" id="6532786">:=</span>&nbsp;<span class="builtinfunc" id="6532789">new</span><span class="op" id="6532792">(</span><span class="ident" id="6532793">bytes</span><span class="op" id="6532798">.</span><span class="ident" id="6532799">Buffer</span><span class="op" id="6532805">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532808">enc</span>&nbsp;<span class="op" id="6532812">:=</span>&nbsp;<span class="ident" id="6532815">NewEncoder</span><span class="op" id="6532825">(</span><span class="ident" id="6532826">b</span><span class="op" id="6532827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532830">var</span>&nbsp;<span class="ident" id="6532834">a</span>&nbsp;<span class="ident" id="6532836">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532864">a</span><span class="op" id="6532865">.</span><span class="ident" id="6532866">X</span>&nbsp;<span class="op" id="6532868">=</span>&nbsp;<span class="num" id="6532870">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532874">var</span>&nbsp;<span class="ident" id="6532878">array</span>&nbsp;<span class="ident" id="6532884">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532897">ap</span>&nbsp;<span class="op" id="6532900">:=</span>&nbsp;<span class="op" id="6532903">&amp;</span><span class="ident" id="6532904">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532911">app</span>&nbsp;<span class="op" id="6532915">:=</span>&nbsp;<span class="op" id="6532918">&amp;</span><span class="ident" id="6532919">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532923">a</span><span class="op" id="6532924">.</span><span class="ident" id="6532925">A</span>&nbsp;<span class="op" id="6532927">=</span>&nbsp;<span class="op" id="6532929">&amp;</span><span class="ident" id="6532930">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6532935">for</span>&nbsp;<span class="ident" id="6532939">i</span>&nbsp;<span class="op" id="6532941">:=</span>&nbsp;<span class="keyword" id="6532944">range</span>&nbsp;<span class="ident" id="6532950">array</span><span class="op" id="6532955">.</span><span class="ident" id="6532956">a</span>&nbsp;<span class="op" id="6532958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532962">array</span><span class="op" id="6532967">.</span><span class="ident" id="6532968">a</span><span class="op" id="6532969">[</span><span class="ident" id="6532970">i</span><span class="op" id="6532971">]</span>&nbsp;<span class="op" id="6532973">=</span>&nbsp;<span class="builtintype" id="6532975">byte</span><span class="op" id="6532979">(</span><span class="ident" id="6532980">i</span><span class="op" id="6532981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6532984">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6532987">err</span>&nbsp;<span class="op" id="6532991">:=</span>&nbsp;<span class="ident" id="6532994">enc</span><span class="op" id="6532997">.</span><span class="ident" id="6532998">Encode</span><span class="op" id="6533004">(</span><span class="ident" id="6533005">a</span><span class="op" id="6533006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533009">if</span>&nbsp;<span class="ident" id="6533012">err</span>&nbsp;<span class="op" id="6533016">!=</span>&nbsp;<span class="builtintype" id="6533019">nil</span>&nbsp;<span class="op" id="6533023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533027">t</span><span class="op" id="6533028">.</span><span class="ident" id="6533029">Fatal</span><span class="op" id="6533034">(</span><span class="string" id="6533035">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6533050">,</span>&nbsp;<span class="ident" id="6533052">err</span><span class="op" id="6533055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533061">dec</span>&nbsp;<span class="op" id="6533065">:=</span>&nbsp;<span class="ident" id="6533068">NewDecoder</span><span class="op" id="6533078">(</span><span class="ident" id="6533079">b</span><span class="op" id="6533080">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533083">x</span>&nbsp;<span class="op" id="6533085">:=</span>&nbsp;<span class="builtinfunc" id="6533088">new</span><span class="op" id="6533091">(</span><span class="ident" id="6533092">GobTestIndirectArrayEncDec</span><span class="op" id="6533118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533121">err</span>&nbsp;<span class="op" id="6533125">=</span>&nbsp;<span class="ident" id="6533127">dec</span><span class="op" id="6533130">.</span><span class="ident" id="6533131">Decode</span><span class="op" id="6533137">(</span><span class="ident" id="6533138">x</span><span class="op" id="6533139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533142">if</span>&nbsp;<span class="ident" id="6533145">err</span>&nbsp;<span class="op" id="6533149">!=</span>&nbsp;<span class="builtintype" id="6533152">nil</span>&nbsp;<span class="op" id="6533156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533160">t</span><span class="op" id="6533161">.</span><span class="ident" id="6533162">Fatal</span><span class="op" id="6533167">(</span><span class="string" id="6533168">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6533183">,</span>&nbsp;<span class="ident" id="6533185">err</span><span class="op" id="6533188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533191">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533194">for</span>&nbsp;<span class="ident" id="6533198">i</span><span class="op" id="6533199">,</span>&nbsp;<span class="ident" id="6533201">v</span>&nbsp;<span class="op" id="6533203">:=</span>&nbsp;<span class="keyword" id="6533206">range</span>&nbsp;<span class="op" id="6533212">(</span><span class="op" id="6533213">*</span><span class="op" id="6533214">*</span><span class="op" id="6533215">*</span><span class="ident" id="6533216">x</span><span class="op" id="6533217">.</span><span class="ident" id="6533218">A</span><span class="op" id="6533219">)</span><span class="op" id="6533220">.</span><span class="ident" id="6533221">a</span>&nbsp;<span class="op" id="6533223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533227">if</span>&nbsp;<span class="ident" id="6533230">v</span>&nbsp;<span class="op" id="6533232">!=</span>&nbsp;<span class="builtintype" id="6533235">byte</span><span class="op" id="6533239">(</span><span class="ident" id="6533240">i</span><span class="op" id="6533241">)</span>&nbsp;<span class="op" id="6533243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533248">t</span><span class="op" id="6533249">.</span><span class="ident" id="6533250">Errorf</span><span class="op" id="6533256">(</span><span class="string" id="6533257">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="6533277">,</span>&nbsp;<span class="builtintype" id="6533279">byte</span><span class="op" id="6533283">(</span><span class="ident" id="6533284">i</span><span class="op" id="6533285">)</span><span class="op" id="6533286">,</span>&nbsp;<span class="ident" id="6533288">v</span><span class="op" id="6533289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533294">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533302">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533305">}</span><br>
<span class="lineno"></span><span class="op" id="6533307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6533310">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6533372">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="6533435">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="6533496">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="6533556">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="6533579">func</span>&nbsp;<span class="ident" id="6533584">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="6533619">(</span><span class="ident" id="6533620">t</span>&nbsp;<span class="op" id="6533622">*</span><span class="ident" id="6533623">testing</span><span class="op" id="6533630">.</span><span class="ident" id="6533631">T</span><span class="op" id="6533632">)</span>&nbsp;<span class="op" id="6533634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6533637">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533681">b</span>&nbsp;<span class="op" id="6533683">:=</span>&nbsp;<span class="builtinfunc" id="6533686">new</span><span class="op" id="6533689">(</span><span class="ident" id="6533690">bytes</span><span class="op" id="6533695">.</span><span class="ident" id="6533696">Buffer</span><span class="op" id="6533702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533705">enc</span>&nbsp;<span class="op" id="6533709">:=</span>&nbsp;<span class="ident" id="6533712">NewEncoder</span><span class="op" id="6533722">(</span><span class="ident" id="6533723">b</span><span class="op" id="6533724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533727">err</span>&nbsp;<span class="op" id="6533731">:=</span>&nbsp;<span class="ident" id="6533734">enc</span><span class="op" id="6533737">.</span><span class="ident" id="6533738">Encode</span><span class="op" id="6533744">(</span><span class="ident" id="6533745">GobTest1</span><span class="op" id="6533753">{</span><span class="num" id="6533754">17</span><span class="op" id="6533756">,</span>&nbsp;<span class="op" id="6533758">&amp;</span><span class="ident" id="6533759">StringStruct</span><span class="op" id="6533771">{</span><span class="string" id="6533772">&#34;ABC&#34;</span><span class="op" id="6533777">}</span><span class="op" id="6533778">}</span><span class="op" id="6533779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533782">if</span>&nbsp;<span class="ident" id="6533785">err</span>&nbsp;<span class="op" id="6533789">!=</span>&nbsp;<span class="builtintype" id="6533792">nil</span>&nbsp;<span class="op" id="6533796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533800">t</span><span class="op" id="6533801">.</span><span class="ident" id="6533802">Fatal</span><span class="op" id="6533807">(</span><span class="string" id="6533808">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6533823">,</span>&nbsp;<span class="ident" id="6533825">err</span><span class="op" id="6533828">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533834">dec</span>&nbsp;<span class="op" id="6533838">:=</span>&nbsp;<span class="ident" id="6533841">NewDecoder</span><span class="op" id="6533851">(</span><span class="ident" id="6533852">b</span><span class="op" id="6533853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533856">x</span>&nbsp;<span class="op" id="6533858">:=</span>&nbsp;<span class="builtinfunc" id="6533861">new</span><span class="op" id="6533864">(</span><span class="ident" id="6533865">GobTest0</span><span class="op" id="6533873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533876">err</span>&nbsp;<span class="op" id="6533880">=</span>&nbsp;<span class="ident" id="6533882">dec</span><span class="op" id="6533885">.</span><span class="ident" id="6533886">Decode</span><span class="op" id="6533892">(</span><span class="ident" id="6533893">x</span><span class="op" id="6533894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533897">if</span>&nbsp;<span class="ident" id="6533900">err</span>&nbsp;<span class="op" id="6533904">!=</span>&nbsp;<span class="builtintype" id="6533907">nil</span>&nbsp;<span class="op" id="6533911">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533915">t</span><span class="op" id="6533916">.</span><span class="ident" id="6533917">Fatal</span><span class="op" id="6533922">(</span><span class="string" id="6533923">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6533938">,</span>&nbsp;<span class="ident" id="6533940">err</span><span class="op" id="6533943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6533946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6533949">if</span>&nbsp;<span class="ident" id="6533952">x</span><span class="op" id="6533953">.</span><span class="ident" id="6533954">G</span><span class="op" id="6533955">.</span><span class="ident" id="6533956">a</span>&nbsp;<span class="op" id="6533958">!=</span>&nbsp;<span class="string" id="6533961">&#39;A&#39;</span>&nbsp;<span class="op" id="6533965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6533969">t</span><span class="op" id="6533970">.</span><span class="ident" id="6533971">Errorf</span><span class="op" id="6533977">(</span><span class="string" id="6533978">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6533999">,</span>&nbsp;<span class="ident" id="6534001">x</span><span class="op" id="6534002">.</span><span class="ident" id="6534003">G</span><span class="op" id="6534004">.</span><span class="ident" id="6534005">a</span><span class="op" id="6534006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534009">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6534012">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534074">b</span><span class="op" id="6534075">.</span><span class="ident" id="6534076">Reset</span><span class="op" id="6534081">(</span><span class="op" id="6534082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534085">err</span>&nbsp;<span class="op" id="6534089">=</span>&nbsp;<span class="ident" id="6534091">enc</span><span class="op" id="6534094">.</span><span class="ident" id="6534095">Encode</span><span class="op" id="6534101">(</span><span class="ident" id="6534102">GobTest0</span><span class="op" id="6534110">{</span><span class="num" id="6534111">17</span><span class="op" id="6534113">,</span>&nbsp;<span class="op" id="6534115">&amp;</span><span class="ident" id="6534116">ByteStruct</span><span class="op" id="6534126">{</span><span class="string" id="6534127">&#39;X&#39;</span><span class="op" id="6534130">}</span><span class="op" id="6534131">}</span><span class="op" id="6534132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534135">if</span>&nbsp;<span class="ident" id="6534138">err</span>&nbsp;<span class="op" id="6534142">!=</span>&nbsp;<span class="builtintype" id="6534145">nil</span>&nbsp;<span class="op" id="6534149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534153">t</span><span class="op" id="6534154">.</span><span class="ident" id="6534155">Fatal</span><span class="op" id="6534160">(</span><span class="string" id="6534161">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6534176">,</span>&nbsp;<span class="ident" id="6534178">err</span><span class="op" id="6534181">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534187">y</span>&nbsp;<span class="op" id="6534189">:=</span>&nbsp;<span class="builtinfunc" id="6534192">new</span><span class="op" id="6534195">(</span><span class="ident" id="6534196">GobTest1</span><span class="op" id="6534204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534207">err</span>&nbsp;<span class="op" id="6534211">=</span>&nbsp;<span class="ident" id="6534213">dec</span><span class="op" id="6534216">.</span><span class="ident" id="6534217">Decode</span><span class="op" id="6534223">(</span><span class="ident" id="6534224">y</span><span class="op" id="6534225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534228">if</span>&nbsp;<span class="ident" id="6534231">err</span>&nbsp;<span class="op" id="6534235">!=</span>&nbsp;<span class="builtintype" id="6534238">nil</span>&nbsp;<span class="op" id="6534242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534246">t</span><span class="op" id="6534247">.</span><span class="ident" id="6534248">Fatal</span><span class="op" id="6534253">(</span><span class="string" id="6534254">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6534269">,</span>&nbsp;<span class="ident" id="6534271">err</span><span class="op" id="6534274">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534280">if</span>&nbsp;<span class="ident" id="6534283">y</span><span class="op" id="6534284">.</span><span class="ident" id="6534285">G</span><span class="op" id="6534286">.</span><span class="ident" id="6534287">s</span>&nbsp;<span class="op" id="6534289">!=</span>&nbsp;<span class="string" id="6534292">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="6534298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534302">t</span><span class="op" id="6534303">.</span><span class="ident" id="6534304">Fatalf</span><span class="op" id="6534310">(</span><span class="string" id="6534311">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="6534334">,</span>&nbsp;<span class="ident" id="6534336">y</span><span class="op" id="6534337">.</span><span class="ident" id="6534338">G</span><span class="op" id="6534339">.</span><span class="ident" id="6534340">s</span><span class="op" id="6534341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534344">}</span><br>
<span class="lineno"></span><span class="op" id="6534346">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="6534349">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="6534411">func</span>&nbsp;<span class="ident" id="6534416">TestGobEncoderValueEncoder</span><span class="op" id="6534442">(</span><span class="ident" id="6534443">t</span>&nbsp;<span class="op" id="6534445">*</span><span class="ident" id="6534446">testing</span><span class="op" id="6534453">.</span><span class="ident" id="6534454">T</span><span class="op" id="6534455">)</span>&nbsp;<span class="op" id="6534457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6534460">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534504">b</span>&nbsp;<span class="op" id="6534506">:=</span>&nbsp;<span class="builtinfunc" id="6534509">new</span><span class="op" id="6534512">(</span><span class="ident" id="6534513">bytes</span><span class="op" id="6534518">.</span><span class="ident" id="6534519">Buffer</span><span class="op" id="6534525">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534528">enc</span>&nbsp;<span class="op" id="6534532">:=</span>&nbsp;<span class="ident" id="6534535">NewEncoder</span><span class="op" id="6534545">(</span><span class="ident" id="6534546">b</span><span class="op" id="6534547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534550">err</span>&nbsp;<span class="op" id="6534554">:=</span>&nbsp;<span class="ident" id="6534557">enc</span><span class="op" id="6534560">.</span><span class="ident" id="6534561">Encode</span><span class="op" id="6534567">(</span><span class="ident" id="6534568">GobTest4</span><span class="op" id="6534576">{</span><span class="num" id="6534577">17</span><span class="op" id="6534579">,</span>&nbsp;<span class="ident" id="6534581">ValueGobber</span><span class="op" id="6534592">(</span><span class="string" id="6534593">&#34;hello&#34;</span><span class="op" id="6534600">)</span><span class="op" id="6534601">,</span>&nbsp;<span class="ident" id="6534603">BinaryValueGobber</span><span class="op" id="6534620">(</span><span class="string" id="6534621">&#34;&#34;</span><span class="op" id="6534639">)</span><span class="op" id="6534640">,</span>&nbsp;<span class="ident" id="6534642">TextValueGobber</span><span class="op" id="6534657">(</span><span class="string" id="6534658">&#34;&#34;</span><span class="op" id="6534675">)</span><span class="op" id="6534676">}</span><span class="op" id="6534677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534680">if</span>&nbsp;<span class="ident" id="6534683">err</span>&nbsp;<span class="op" id="6534687">!=</span>&nbsp;<span class="builtintype" id="6534690">nil</span>&nbsp;<span class="op" id="6534694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534698">t</span><span class="op" id="6534699">.</span><span class="ident" id="6534700">Fatal</span><span class="op" id="6534705">(</span><span class="string" id="6534706">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6534721">,</span>&nbsp;<span class="ident" id="6534723">err</span><span class="op" id="6534726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534729">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534732">dec</span>&nbsp;<span class="op" id="6534736">:=</span>&nbsp;<span class="ident" id="6534739">NewDecoder</span><span class="op" id="6534749">(</span><span class="ident" id="6534750">b</span><span class="op" id="6534751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534754">x</span>&nbsp;<span class="op" id="6534756">:=</span>&nbsp;<span class="builtinfunc" id="6534759">new</span><span class="op" id="6534762">(</span><span class="ident" id="6534763">GobTest5</span><span class="op" id="6534771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534774">err</span>&nbsp;<span class="op" id="6534778">=</span>&nbsp;<span class="ident" id="6534780">dec</span><span class="op" id="6534783">.</span><span class="ident" id="6534784">Decode</span><span class="op" id="6534790">(</span><span class="ident" id="6534791">x</span><span class="op" id="6534792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534795">if</span>&nbsp;<span class="ident" id="6534798">err</span>&nbsp;<span class="op" id="6534802">!=</span>&nbsp;<span class="builtintype" id="6534805">nil</span>&nbsp;<span class="op" id="6534809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534813">t</span><span class="op" id="6534814">.</span><span class="ident" id="6534815">Fatal</span><span class="op" id="6534820">(</span><span class="string" id="6534821">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6534836">,</span>&nbsp;<span class="ident" id="6534838">err</span><span class="op" id="6534841">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6534847">if</span>&nbsp;<span class="op" id="6534850">*</span><span class="ident" id="6534851">x</span><span class="op" id="6534852">.</span><span class="ident" id="6534853">V</span>&nbsp;<span class="op" id="6534855">!=</span>&nbsp;<span class="string" id="6534858">&#34;hello&#34;</span>&nbsp;<span class="op" id="6534866">||</span>&nbsp;<span class="op" id="6534869">*</span><span class="ident" id="6534870">x</span><span class="op" id="6534871">.</span><span class="ident" id="6534872">BV</span>&nbsp;<span class="op" id="6534875">!=</span>&nbsp;<span class="string" id="6534878">&#34;&#34;</span>&nbsp;<span class="op" id="6534897">||</span>&nbsp;<span class="op" id="6534900">*</span><span class="ident" id="6534901">x</span><span class="op" id="6534902">.</span><span class="ident" id="6534903">TV</span>&nbsp;<span class="op" id="6534906">!=</span>&nbsp;<span class="string" id="6534909">&#34;&#34;</span>&nbsp;<span class="op" id="6534927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6534931">t</span><span class="op" id="6534932">.</span><span class="ident" id="6534933">Errorf</span><span class="op" id="6534939">(</span><span class="string" id="6534940">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6534965">,</span>&nbsp;<span class="op" id="6534967">*</span><span class="ident" id="6534968">x</span><span class="op" id="6534969">.</span><span class="ident" id="6534970">V</span><span class="op" id="6534971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6534974">}</span><br>
<span class="lineno"></span><span class="op" id="6534976">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="6534979">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="6535047">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="6535088">func</span>&nbsp;<span class="ident" id="6535093">TestGobEncoderValueThenPointer</span><span class="op" id="6535123">(</span><span class="ident" id="6535124">t</span>&nbsp;<span class="op" id="6535126">*</span><span class="ident" id="6535127">testing</span><span class="op" id="6535134">.</span><span class="ident" id="6535135">T</span><span class="op" id="6535136">)</span>&nbsp;<span class="op" id="6535138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535141">v</span>&nbsp;<span class="op" id="6535143">:=</span>&nbsp;<span class="ident" id="6535146">ValueGobber</span><span class="op" id="6535157">(</span><span class="string" id="6535158">&#34;forty-two&#34;</span><span class="op" id="6535169">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535172">w</span>&nbsp;<span class="op" id="6535174">:=</span>&nbsp;<span class="ident" id="6535177">ValueGobber</span><span class="op" id="6535188">(</span><span class="string" id="6535189">&#34;six-by-nine&#34;</span><span class="op" id="6535202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535205">bv</span>&nbsp;<span class="op" id="6535208">:=</span>&nbsp;<span class="ident" id="6535211">BinaryValueGobber</span><span class="op" id="6535228">(</span><span class="string" id="6535229">&#34;1nanocentury&#34;</span><span class="op" id="6535243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535246">bw</span>&nbsp;<span class="op" id="6535249">:=</span>&nbsp;<span class="ident" id="6535252">BinaryValueGobber</span><span class="op" id="6535269">(</span><span class="string" id="6535270">&#34;seconds&#34;</span><span class="op" id="6535281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535284">tv</span>&nbsp;<span class="op" id="6535287">:=</span>&nbsp;<span class="ident" id="6535290">TextValueGobber</span><span class="op" id="6535305">(</span><span class="string" id="6535306">&#34;gravitationalacceleration&#34;</span><span class="op" id="6535333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535336">tw</span>&nbsp;<span class="op" id="6535339">:=</span>&nbsp;<span class="ident" id="6535342">TextValueGobber</span><span class="op" id="6535357">(</span><span class="string" id="6535358">&#34;ft/s&#34;</span><span class="op" id="6535370">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6535374">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6535445">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535509">b</span>&nbsp;<span class="op" id="6535511">:=</span>&nbsp;<span class="builtinfunc" id="6535514">new</span><span class="op" id="6535517">(</span><span class="ident" id="6535518">bytes</span><span class="op" id="6535523">.</span><span class="ident" id="6535524">Buffer</span><span class="op" id="6535530">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535533">enc</span>&nbsp;<span class="op" id="6535537">:=</span>&nbsp;<span class="ident" id="6535540">NewEncoder</span><span class="op" id="6535550">(</span><span class="ident" id="6535551">b</span><span class="op" id="6535552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6535555">if</span>&nbsp;<span class="ident" id="6535558">err</span>&nbsp;<span class="op" id="6535562">:=</span>&nbsp;<span class="ident" id="6535565">enc</span><span class="op" id="6535568">.</span><span class="ident" id="6535569">Encode</span><span class="op" id="6535575">(</span><span class="ident" id="6535576">GobTest6</span><span class="op" id="6535584">{</span><span class="num" id="6535585">42</span><span class="op" id="6535587">,</span>&nbsp;<span class="ident" id="6535589">v</span><span class="op" id="6535590">,</span>&nbsp;<span class="op" id="6535592">&amp;</span><span class="ident" id="6535593">w</span><span class="op" id="6535594">,</span>&nbsp;<span class="ident" id="6535596">bv</span><span class="op" id="6535598">,</span>&nbsp;<span class="op" id="6535600">&amp;</span><span class="ident" id="6535601">bw</span><span class="op" id="6535603">,</span>&nbsp;<span class="ident" id="6535605">tv</span><span class="op" id="6535607">,</span>&nbsp;<span class="op" id="6535609">&amp;</span><span class="ident" id="6535610">tw</span><span class="op" id="6535612">}</span><span class="op" id="6535613">)</span><span class="op" id="6535614">;</span>&nbsp;<span class="ident" id="6535616">err</span>&nbsp;<span class="op" id="6535620">!=</span>&nbsp;<span class="builtintype" id="6535623">nil</span>&nbsp;<span class="op" id="6535627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535631">t</span><span class="op" id="6535632">.</span><span class="ident" id="6535633">Fatal</span><span class="op" id="6535638">(</span><span class="string" id="6535639">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6535654">,</span>&nbsp;<span class="ident" id="6535656">err</span><span class="op" id="6535659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6535662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535665">dec</span>&nbsp;<span class="op" id="6535669">:=</span>&nbsp;<span class="ident" id="6535672">NewDecoder</span><span class="op" id="6535682">(</span><span class="ident" id="6535683">b</span><span class="op" id="6535684">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535687">x</span>&nbsp;<span class="op" id="6535689">:=</span>&nbsp;<span class="builtinfunc" id="6535692">new</span><span class="op" id="6535695">(</span><span class="ident" id="6535696">GobTest6</span><span class="op" id="6535704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6535707">if</span>&nbsp;<span class="ident" id="6535710">err</span>&nbsp;<span class="op" id="6535714">:=</span>&nbsp;<span class="ident" id="6535717">dec</span><span class="op" id="6535720">.</span><span class="ident" id="6535721">Decode</span><span class="op" id="6535727">(</span><span class="ident" id="6535728">x</span><span class="op" id="6535729">)</span><span class="op" id="6535730">;</span>&nbsp;<span class="ident" id="6535732">err</span>&nbsp;<span class="op" id="6535736">!=</span>&nbsp;<span class="builtintype" id="6535739">nil</span>&nbsp;<span class="op" id="6535743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535747">t</span><span class="op" id="6535748">.</span><span class="ident" id="6535749">Fatal</span><span class="op" id="6535754">(</span><span class="string" id="6535755">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6535770">,</span>&nbsp;<span class="ident" id="6535772">err</span><span class="op" id="6535775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6535778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6535782">if</span>&nbsp;<span class="ident" id="6535785">got</span><span class="op" id="6535788">,</span>&nbsp;<span class="ident" id="6535790">want</span>&nbsp;<span class="op" id="6535795">:=</span>&nbsp;<span class="ident" id="6535798">x</span><span class="op" id="6535799">.</span><span class="ident" id="6535800">V</span><span class="op" id="6535801">,</span>&nbsp;<span class="ident" id="6535803">v</span><span class="op" id="6535804">;</span>&nbsp;<span class="ident" id="6535806">got</span>&nbsp;<span class="op" id="6535810">!=</span>&nbsp;<span class="ident" id="6535813">want</span>&nbsp;<span class="op" id="6535818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535822">t</span><span class="op" id="6535823">.</span><span class="ident" id="6535824">Errorf</span><span class="op" id="6535830">(</span><span class="string" id="6535831">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6535848">,</span>&nbsp;<span class="ident" id="6535850">got</span><span class="op" id="6535853">,</span>&nbsp;<span class="ident" id="6535855">want</span><span class="op" id="6535859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6535862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6535865">if</span>&nbsp;<span class="ident" id="6535868">got</span><span class="op" id="6535871">,</span>&nbsp;<span class="ident" id="6535873">want</span>&nbsp;<span class="op" id="6535878">:=</span>&nbsp;<span class="ident" id="6535881">x</span><span class="op" id="6535882">.</span><span class="ident" id="6535883">W</span><span class="op" id="6535884">,</span>&nbsp;<span class="ident" id="6535886">w</span><span class="op" id="6535887">;</span>&nbsp;<span class="ident" id="6535889">got</span>&nbsp;<span class="op" id="6535893">==</span>&nbsp;<span class="builtintype" id="6535896">nil</span>&nbsp;<span class="op" id="6535900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535904">t</span><span class="op" id="6535905">.</span><span class="ident" id="6535906">Errorf</span><span class="op" id="6535912">(</span><span class="string" id="6535913">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6535931">,</span>&nbsp;<span class="ident" id="6535933">want</span><span class="op" id="6535937">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6535940">}</span>&nbsp;<span class="keyword" id="6535942">else</span>&nbsp;<span class="keyword" id="6535947">if</span>&nbsp;<span class="op" id="6535950">*</span><span class="ident" id="6535951">got</span>&nbsp;<span class="op" id="6535955">!=</span>&nbsp;<span class="ident" id="6535958">want</span>&nbsp;<span class="op" id="6535963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6535967">t</span><span class="op" id="6535968">.</span><span class="ident" id="6535969">Errorf</span><span class="op" id="6535975">(</span><span class="string" id="6535976">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6535993">,</span>&nbsp;<span class="op" id="6535995">*</span><span class="ident" id="6535996">got</span><span class="op" id="6535999">,</span>&nbsp;<span class="ident" id="6536001">want</span><span class="op" id="6536005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536012">if</span>&nbsp;<span class="ident" id="6536015">got</span><span class="op" id="6536018">,</span>&nbsp;<span class="ident" id="6536020">want</span>&nbsp;<span class="op" id="6536025">:=</span>&nbsp;<span class="ident" id="6536028">x</span><span class="op" id="6536029">.</span><span class="ident" id="6536030">BV</span><span class="op" id="6536032">,</span>&nbsp;<span class="ident" id="6536034">bv</span><span class="op" id="6536036">;</span>&nbsp;<span class="ident" id="6536038">got</span>&nbsp;<span class="op" id="6536042">!=</span>&nbsp;<span class="ident" id="6536045">want</span>&nbsp;<span class="op" id="6536050">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536054">t</span><span class="op" id="6536055">.</span><span class="ident" id="6536056">Errorf</span><span class="op" id="6536062">(</span><span class="string" id="6536063">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536081">,</span>&nbsp;<span class="ident" id="6536083">got</span><span class="op" id="6536086">,</span>&nbsp;<span class="ident" id="6536088">want</span><span class="op" id="6536092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536098">if</span>&nbsp;<span class="ident" id="6536101">got</span><span class="op" id="6536104">,</span>&nbsp;<span class="ident" id="6536106">want</span>&nbsp;<span class="op" id="6536111">:=</span>&nbsp;<span class="ident" id="6536114">x</span><span class="op" id="6536115">.</span><span class="ident" id="6536116">BW</span><span class="op" id="6536118">,</span>&nbsp;<span class="ident" id="6536120">bw</span><span class="op" id="6536122">;</span>&nbsp;<span class="ident" id="6536124">got</span>&nbsp;<span class="op" id="6536128">==</span>&nbsp;<span class="builtintype" id="6536131">nil</span>&nbsp;<span class="op" id="6536135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536139">t</span><span class="op" id="6536140">.</span><span class="ident" id="6536141">Errorf</span><span class="op" id="6536147">(</span><span class="string" id="6536148">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536167">,</span>&nbsp;<span class="ident" id="6536169">want</span><span class="op" id="6536173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536176">}</span>&nbsp;<span class="keyword" id="6536178">else</span>&nbsp;<span class="keyword" id="6536183">if</span>&nbsp;<span class="op" id="6536186">*</span><span class="ident" id="6536187">got</span>&nbsp;<span class="op" id="6536191">!=</span>&nbsp;<span class="ident" id="6536194">want</span>&nbsp;<span class="op" id="6536199">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536203">t</span><span class="op" id="6536204">.</span><span class="ident" id="6536205">Errorf</span><span class="op" id="6536211">(</span><span class="string" id="6536212">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536230">,</span>&nbsp;<span class="op" id="6536232">*</span><span class="ident" id="6536233">got</span><span class="op" id="6536236">,</span>&nbsp;<span class="ident" id="6536238">want</span><span class="op" id="6536242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536249">if</span>&nbsp;<span class="ident" id="6536252">got</span><span class="op" id="6536255">,</span>&nbsp;<span class="ident" id="6536257">want</span>&nbsp;<span class="op" id="6536262">:=</span>&nbsp;<span class="ident" id="6536265">x</span><span class="op" id="6536266">.</span><span class="ident" id="6536267">TV</span><span class="op" id="6536269">,</span>&nbsp;<span class="ident" id="6536271">tv</span><span class="op" id="6536273">;</span>&nbsp;<span class="ident" id="6536275">got</span>&nbsp;<span class="op" id="6536279">!=</span>&nbsp;<span class="ident" id="6536282">want</span>&nbsp;<span class="op" id="6536287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536291">t</span><span class="op" id="6536292">.</span><span class="ident" id="6536293">Errorf</span><span class="op" id="6536299">(</span><span class="string" id="6536300">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536318">,</span>&nbsp;<span class="ident" id="6536320">got</span><span class="op" id="6536323">,</span>&nbsp;<span class="ident" id="6536325">want</span><span class="op" id="6536329">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536335">if</span>&nbsp;<span class="ident" id="6536338">got</span><span class="op" id="6536341">,</span>&nbsp;<span class="ident" id="6536343">want</span>&nbsp;<span class="op" id="6536348">:=</span>&nbsp;<span class="ident" id="6536351">x</span><span class="op" id="6536352">.</span><span class="ident" id="6536353">TW</span><span class="op" id="6536355">,</span>&nbsp;<span class="ident" id="6536357">tw</span><span class="op" id="6536359">;</span>&nbsp;<span class="ident" id="6536361">got</span>&nbsp;<span class="op" id="6536365">==</span>&nbsp;<span class="builtintype" id="6536368">nil</span>&nbsp;<span class="op" id="6536372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536376">t</span><span class="op" id="6536377">.</span><span class="ident" id="6536378">Errorf</span><span class="op" id="6536384">(</span><span class="string" id="6536385">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536404">,</span>&nbsp;<span class="ident" id="6536406">want</span><span class="op" id="6536410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536413">}</span>&nbsp;<span class="keyword" id="6536415">else</span>&nbsp;<span class="keyword" id="6536420">if</span>&nbsp;<span class="op" id="6536423">*</span><span class="ident" id="6536424">got</span>&nbsp;<span class="op" id="6536428">!=</span>&nbsp;<span class="ident" id="6536431">want</span>&nbsp;<span class="op" id="6536436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536440">t</span><span class="op" id="6536441">.</span><span class="ident" id="6536442">Errorf</span><span class="op" id="6536448">(</span><span class="string" id="6536449">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6536467">,</span>&nbsp;<span class="op" id="6536469">*</span><span class="ident" id="6536470">got</span><span class="op" id="6536473">,</span>&nbsp;<span class="ident" id="6536475">want</span><span class="op" id="6536479">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6536482">}</span><br>
<span class="lineno"></span><span class="op" id="6536484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6536487">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="6536555">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="6536585">func</span>&nbsp;<span class="ident" id="6536590">TestGobEncoderPointerThenValue</span><span class="op" id="6536620">(</span><span class="ident" id="6536621">t</span>&nbsp;<span class="op" id="6536623">*</span><span class="ident" id="6536624">testing</span><span class="op" id="6536631">.</span><span class="ident" id="6536632">T</span><span class="op" id="6536633">)</span>&nbsp;<span class="op" id="6536635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536638">v</span>&nbsp;<span class="op" id="6536640">:=</span>&nbsp;<span class="ident" id="6536643">ValueGobber</span><span class="op" id="6536654">(</span><span class="string" id="6536655">&#34;forty-two&#34;</span><span class="op" id="6536666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536669">w</span>&nbsp;<span class="op" id="6536671">:=</span>&nbsp;<span class="ident" id="6536674">ValueGobber</span><span class="op" id="6536685">(</span><span class="string" id="6536686">&#34;six-by-nine&#34;</span><span class="op" id="6536699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536702">bv</span>&nbsp;<span class="op" id="6536705">:=</span>&nbsp;<span class="ident" id="6536708">BinaryValueGobber</span><span class="op" id="6536725">(</span><span class="string" id="6536726">&#34;1nanocentury&#34;</span><span class="op" id="6536740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536743">bw</span>&nbsp;<span class="op" id="6536746">:=</span>&nbsp;<span class="ident" id="6536749">BinaryValueGobber</span><span class="op" id="6536766">(</span><span class="string" id="6536767">&#34;seconds&#34;</span><span class="op" id="6536778">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536781">tv</span>&nbsp;<span class="op" id="6536784">:=</span>&nbsp;<span class="ident" id="6536787">TextValueGobber</span><span class="op" id="6536802">(</span><span class="string" id="6536803">&#34;gravitationalacceleration&#34;</span><span class="op" id="6536830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536833">tw</span>&nbsp;<span class="op" id="6536836">:=</span>&nbsp;<span class="ident" id="6536839">TextValueGobber</span><span class="op" id="6536854">(</span><span class="string" id="6536855">&#34;ft/s&#34;</span><span class="op" id="6536867">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536871">b</span>&nbsp;<span class="op" id="6536873">:=</span>&nbsp;<span class="builtinfunc" id="6536876">new</span><span class="op" id="6536879">(</span><span class="ident" id="6536880">bytes</span><span class="op" id="6536885">.</span><span class="ident" id="6536886">Buffer</span><span class="op" id="6536892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536895">enc</span>&nbsp;<span class="op" id="6536899">:=</span>&nbsp;<span class="ident" id="6536902">NewEncoder</span><span class="op" id="6536912">(</span><span class="ident" id="6536913">b</span><span class="op" id="6536914">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6536917">if</span>&nbsp;<span class="ident" id="6536920">err</span>&nbsp;<span class="op" id="6536924">:=</span>&nbsp;<span class="ident" id="6536927">enc</span><span class="op" id="6536930">.</span><span class="ident" id="6536931">Encode</span><span class="op" id="6536937">(</span><span class="ident" id="6536938">GobTest7</span><span class="op" id="6536946">{</span><span class="num" id="6536947">42</span><span class="op" id="6536949">,</span>&nbsp;<span class="op" id="6536951">&amp;</span><span class="ident" id="6536952">v</span><span class="op" id="6536953">,</span>&nbsp;<span class="ident" id="6536955">w</span><span class="op" id="6536956">,</span>&nbsp;<span class="op" id="6536958">&amp;</span><span class="ident" id="6536959">bv</span><span class="op" id="6536961">,</span>&nbsp;<span class="ident" id="6536963">bw</span><span class="op" id="6536965">,</span>&nbsp;<span class="op" id="6536967">&amp;</span><span class="ident" id="6536968">tv</span><span class="op" id="6536970">,</span>&nbsp;<span class="ident" id="6536972">tw</span><span class="op" id="6536974">}</span><span class="op" id="6536975">)</span><span class="op" id="6536976">;</span>&nbsp;<span class="ident" id="6536978">err</span>&nbsp;<span class="op" id="6536982">!=</span>&nbsp;<span class="builtintype" id="6536985">nil</span>&nbsp;<span class="op" id="6536989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6536993">t</span><span class="op" id="6536994">.</span><span class="ident" id="6536995">Fatal</span><span class="op" id="6537000">(</span><span class="string" id="6537001">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6537016">,</span>&nbsp;<span class="ident" id="6537018">err</span><span class="op" id="6537021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537027">dec</span>&nbsp;<span class="op" id="6537031">:=</span>&nbsp;<span class="ident" id="6537034">NewDecoder</span><span class="op" id="6537044">(</span><span class="ident" id="6537045">b</span><span class="op" id="6537046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537049">x</span>&nbsp;<span class="op" id="6537051">:=</span>&nbsp;<span class="builtinfunc" id="6537054">new</span><span class="op" id="6537057">(</span><span class="ident" id="6537058">GobTest7</span><span class="op" id="6537066">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537069">if</span>&nbsp;<span class="ident" id="6537072">err</span>&nbsp;<span class="op" id="6537076">:=</span>&nbsp;<span class="ident" id="6537079">dec</span><span class="op" id="6537082">.</span><span class="ident" id="6537083">Decode</span><span class="op" id="6537089">(</span><span class="ident" id="6537090">x</span><span class="op" id="6537091">)</span><span class="op" id="6537092">;</span>&nbsp;<span class="ident" id="6537094">err</span>&nbsp;<span class="op" id="6537098">!=</span>&nbsp;<span class="builtintype" id="6537101">nil</span>&nbsp;<span class="op" id="6537105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537109">t</span><span class="op" id="6537110">.</span><span class="ident" id="6537111">Fatal</span><span class="op" id="6537116">(</span><span class="string" id="6537117">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6537132">,</span>&nbsp;<span class="ident" id="6537134">err</span><span class="op" id="6537137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537144">if</span>&nbsp;<span class="ident" id="6537147">got</span><span class="op" id="6537150">,</span>&nbsp;<span class="ident" id="6537152">want</span>&nbsp;<span class="op" id="6537157">:=</span>&nbsp;<span class="ident" id="6537160">x</span><span class="op" id="6537161">.</span><span class="ident" id="6537162">V</span><span class="op" id="6537163">,</span>&nbsp;<span class="ident" id="6537165">v</span><span class="op" id="6537166">;</span>&nbsp;<span class="ident" id="6537168">got</span>&nbsp;<span class="op" id="6537172">==</span>&nbsp;<span class="builtintype" id="6537175">nil</span>&nbsp;<span class="op" id="6537179">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537183">t</span><span class="op" id="6537184">.</span><span class="ident" id="6537185">Errorf</span><span class="op" id="6537191">(</span><span class="string" id="6537192">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537210">,</span>&nbsp;<span class="ident" id="6537212">want</span><span class="op" id="6537216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537219">}</span>&nbsp;<span class="keyword" id="6537221">else</span>&nbsp;<span class="keyword" id="6537226">if</span>&nbsp;<span class="op" id="6537229">*</span><span class="ident" id="6537230">got</span>&nbsp;<span class="op" id="6537234">!=</span>&nbsp;<span class="ident" id="6537237">want</span>&nbsp;<span class="op" id="6537242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537246">t</span><span class="op" id="6537247">.</span><span class="ident" id="6537248">Errorf</span><span class="op" id="6537254">(</span><span class="string" id="6537255">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537272">,</span>&nbsp;<span class="op" id="6537274">*</span><span class="ident" id="6537275">got</span><span class="op" id="6537278">,</span>&nbsp;<span class="ident" id="6537280">want</span><span class="op" id="6537284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537290">if</span>&nbsp;<span class="ident" id="6537293">got</span><span class="op" id="6537296">,</span>&nbsp;<span class="ident" id="6537298">want</span>&nbsp;<span class="op" id="6537303">:=</span>&nbsp;<span class="ident" id="6537306">x</span><span class="op" id="6537307">.</span><span class="ident" id="6537308">W</span><span class="op" id="6537309">,</span>&nbsp;<span class="ident" id="6537311">w</span><span class="op" id="6537312">;</span>&nbsp;<span class="ident" id="6537314">got</span>&nbsp;<span class="op" id="6537318">!=</span>&nbsp;<span class="ident" id="6537321">want</span>&nbsp;<span class="op" id="6537326">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537330">t</span><span class="op" id="6537331">.</span><span class="ident" id="6537332">Errorf</span><span class="op" id="6537338">(</span><span class="string" id="6537339">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537356">,</span>&nbsp;<span class="ident" id="6537358">got</span><span class="op" id="6537361">,</span>&nbsp;<span class="ident" id="6537363">want</span><span class="op" id="6537367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537374">if</span>&nbsp;<span class="ident" id="6537377">got</span><span class="op" id="6537380">,</span>&nbsp;<span class="ident" id="6537382">want</span>&nbsp;<span class="op" id="6537387">:=</span>&nbsp;<span class="ident" id="6537390">x</span><span class="op" id="6537391">.</span><span class="ident" id="6537392">BV</span><span class="op" id="6537394">,</span>&nbsp;<span class="ident" id="6537396">bv</span><span class="op" id="6537398">;</span>&nbsp;<span class="ident" id="6537400">got</span>&nbsp;<span class="op" id="6537404">==</span>&nbsp;<span class="builtintype" id="6537407">nil</span>&nbsp;<span class="op" id="6537411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537415">t</span><span class="op" id="6537416">.</span><span class="ident" id="6537417">Errorf</span><span class="op" id="6537423">(</span><span class="string" id="6537424">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537443">,</span>&nbsp;<span class="ident" id="6537445">want</span><span class="op" id="6537449">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537452">}</span>&nbsp;<span class="keyword" id="6537454">else</span>&nbsp;<span class="keyword" id="6537459">if</span>&nbsp;<span class="op" id="6537462">*</span><span class="ident" id="6537463">got</span>&nbsp;<span class="op" id="6537467">!=</span>&nbsp;<span class="ident" id="6537470">want</span>&nbsp;<span class="op" id="6537475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537479">t</span><span class="op" id="6537480">.</span><span class="ident" id="6537481">Errorf</span><span class="op" id="6537487">(</span><span class="string" id="6537488">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537506">,</span>&nbsp;<span class="op" id="6537508">*</span><span class="ident" id="6537509">got</span><span class="op" id="6537512">,</span>&nbsp;<span class="ident" id="6537514">want</span><span class="op" id="6537518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537524">if</span>&nbsp;<span class="ident" id="6537527">got</span><span class="op" id="6537530">,</span>&nbsp;<span class="ident" id="6537532">want</span>&nbsp;<span class="op" id="6537537">:=</span>&nbsp;<span class="ident" id="6537540">x</span><span class="op" id="6537541">.</span><span class="ident" id="6537542">BW</span><span class="op" id="6537544">,</span>&nbsp;<span class="ident" id="6537546">bw</span><span class="op" id="6537548">;</span>&nbsp;<span class="ident" id="6537550">got</span>&nbsp;<span class="op" id="6537554">!=</span>&nbsp;<span class="ident" id="6537557">want</span>&nbsp;<span class="op" id="6537562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537566">t</span><span class="op" id="6537567">.</span><span class="ident" id="6537568">Errorf</span><span class="op" id="6537574">(</span><span class="string" id="6537575">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537593">,</span>&nbsp;<span class="ident" id="6537595">got</span><span class="op" id="6537598">,</span>&nbsp;<span class="ident" id="6537600">want</span><span class="op" id="6537604">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537611">if</span>&nbsp;<span class="ident" id="6537614">got</span><span class="op" id="6537617">,</span>&nbsp;<span class="ident" id="6537619">want</span>&nbsp;<span class="op" id="6537624">:=</span>&nbsp;<span class="ident" id="6537627">x</span><span class="op" id="6537628">.</span><span class="ident" id="6537629">TV</span><span class="op" id="6537631">,</span>&nbsp;<span class="ident" id="6537633">tv</span><span class="op" id="6537635">;</span>&nbsp;<span class="ident" id="6537637">got</span>&nbsp;<span class="op" id="6537641">==</span>&nbsp;<span class="builtintype" id="6537644">nil</span>&nbsp;<span class="op" id="6537648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537652">t</span><span class="op" id="6537653">.</span><span class="ident" id="6537654">Errorf</span><span class="op" id="6537660">(</span><span class="string" id="6537661">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537680">,</span>&nbsp;<span class="ident" id="6537682">want</span><span class="op" id="6537686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537689">}</span>&nbsp;<span class="keyword" id="6537691">else</span>&nbsp;<span class="keyword" id="6537696">if</span>&nbsp;<span class="op" id="6537699">*</span><span class="ident" id="6537700">got</span>&nbsp;<span class="op" id="6537704">!=</span>&nbsp;<span class="ident" id="6537707">want</span>&nbsp;<span class="op" id="6537712">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537716">t</span><span class="op" id="6537717">.</span><span class="ident" id="6537718">Errorf</span><span class="op" id="6537724">(</span><span class="string" id="6537725">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537743">,</span>&nbsp;<span class="op" id="6537745">*</span><span class="ident" id="6537746">got</span><span class="op" id="6537749">,</span>&nbsp;<span class="ident" id="6537751">want</span><span class="op" id="6537755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6537761">if</span>&nbsp;<span class="ident" id="6537764">got</span><span class="op" id="6537767">,</span>&nbsp;<span class="ident" id="6537769">want</span>&nbsp;<span class="op" id="6537774">:=</span>&nbsp;<span class="ident" id="6537777">x</span><span class="op" id="6537778">.</span><span class="ident" id="6537779">TW</span><span class="op" id="6537781">,</span>&nbsp;<span class="ident" id="6537783">tw</span><span class="op" id="6537785">;</span>&nbsp;<span class="ident" id="6537787">got</span>&nbsp;<span class="op" id="6537791">!=</span>&nbsp;<span class="ident" id="6537794">want</span>&nbsp;<span class="op" id="6537799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537803">t</span><span class="op" id="6537804">.</span><span class="ident" id="6537805">Errorf</span><span class="op" id="6537811">(</span><span class="string" id="6537812">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6537830">,</span>&nbsp;<span class="ident" id="6537832">got</span><span class="op" id="6537835">,</span>&nbsp;<span class="ident" id="6537837">want</span><span class="op" id="6537841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6537844">}</span><br>
<span class="lineno">535</span><span class="op" id="6537846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6537849">func</span>&nbsp;<span class="ident" id="6537854">TestGobEncoderFieldTypeError</span><span class="op" id="6537882">(</span><span class="ident" id="6537883">t</span>&nbsp;<span class="op" id="6537885">*</span><span class="ident" id="6537886">testing</span><span class="op" id="6537893">.</span><span class="ident" id="6537894">T</span><span class="op" id="6537895">)</span>&nbsp;<span class="op" id="6537897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6537900">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537937">b</span>&nbsp;<span class="op" id="6537939">:=</span>&nbsp;<span class="builtinfunc" id="6537942">new</span><span class="op" id="6537945">(</span><span class="ident" id="6537946">bytes</span><span class="op" id="6537951">.</span><span class="ident" id="6537952">Buffer</span><span class="op" id="6537958">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537961">enc</span>&nbsp;<span class="op" id="6537965">:=</span>&nbsp;<span class="ident" id="6537968">NewEncoder</span><span class="op" id="6537978">(</span><span class="ident" id="6537979">b</span><span class="op" id="6537980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6537983">err</span>&nbsp;<span class="op" id="6537987">:=</span>&nbsp;<span class="ident" id="6537990">enc</span><span class="op" id="6537993">.</span><span class="ident" id="6537994">Encode</span><span class="op" id="6538000">(</span><span class="ident" id="6538001">GobTest1</span><span class="op" id="6538009">{</span><span class="num" id="6538010">17</span><span class="op" id="6538012">,</span>&nbsp;<span class="op" id="6538014">&amp;</span><span class="ident" id="6538015">StringStruct</span><span class="op" id="6538027">{</span><span class="string" id="6538028">&#34;ABC&#34;</span><span class="op" id="6538033">}</span><span class="op" id="6538034">}</span><span class="op" id="6538035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538038">if</span>&nbsp;<span class="ident" id="6538041">err</span>&nbsp;<span class="op" id="6538045">!=</span>&nbsp;<span class="builtintype" id="6538048">nil</span>&nbsp;<span class="op" id="6538052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538056">t</span><span class="op" id="6538057">.</span><span class="ident" id="6538058">Fatal</span><span class="op" id="6538063">(</span><span class="string" id="6538064">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6538079">,</span>&nbsp;<span class="ident" id="6538081">err</span><span class="op" id="6538084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538087">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538090">dec</span>&nbsp;<span class="op" id="6538094">:=</span>&nbsp;<span class="ident" id="6538097">NewDecoder</span><span class="op" id="6538107">(</span><span class="ident" id="6538108">b</span><span class="op" id="6538109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538112">x</span>&nbsp;<span class="op" id="6538114">:=</span>&nbsp;<span class="op" id="6538117">&amp;</span><span class="ident" id="6538118">GobTest2</span><span class="op" id="6538126">{</span><span class="op" id="6538127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538130">err</span>&nbsp;<span class="op" id="6538134">=</span>&nbsp;<span class="ident" id="6538136">dec</span><span class="op" id="6538139">.</span><span class="ident" id="6538140">Decode</span><span class="op" id="6538146">(</span><span class="ident" id="6538147">x</span><span class="op" id="6538148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538151">if</span>&nbsp;<span class="ident" id="6538154">err</span>&nbsp;<span class="op" id="6538158">==</span>&nbsp;<span class="builtintype" id="6538161">nil</span>&nbsp;<span class="op" id="6538165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538169">t</span><span class="op" id="6538170">.</span><span class="ident" id="6538171">Fatal</span><span class="op" id="6538176">(</span><span class="string" id="6538177">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="6538247">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538253">if</span>&nbsp;<span class="ident" id="6538256">strings</span><span class="op" id="6538263">.</span><span class="ident" id="6538264">Index</span><span class="op" id="6538269">(</span><span class="ident" id="6538270">err</span><span class="op" id="6538273">.</span><span class="ident" id="6538274">Error</span><span class="op" id="6538279">(</span><span class="op" id="6538280">)</span><span class="op" id="6538281">,</span>&nbsp;<span class="string" id="6538283">&#34;type&#34;</span><span class="op" id="6538289">)</span>&nbsp;<span class="op" id="6538291">&lt;</span>&nbsp;<span class="num" id="6538293">0</span>&nbsp;<span class="op" id="6538295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538299">t</span><span class="op" id="6538300">.</span><span class="ident" id="6538301">Fatal</span><span class="op" id="6538306">(</span><span class="string" id="6538307">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6538333">,</span>&nbsp;<span class="ident" id="6538335">err</span><span class="op" id="6538338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6538344">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538381">b</span><span class="op" id="6538382">.</span><span class="ident" id="6538383">Reset</span><span class="op" id="6538388">(</span><span class="op" id="6538389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538392">err</span>&nbsp;<span class="op" id="6538396">=</span>&nbsp;<span class="ident" id="6538398">enc</span><span class="op" id="6538401">.</span><span class="ident" id="6538402">Encode</span><span class="op" id="6538408">(</span><span class="ident" id="6538409">GobTest2</span><span class="op" id="6538417">{</span><span class="num" id="6538418">17</span><span class="op" id="6538420">,</span>&nbsp;<span class="string" id="6538422">&#34;ABC&#34;</span><span class="op" id="6538427">}</span><span class="op" id="6538428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538431">if</span>&nbsp;<span class="ident" id="6538434">err</span>&nbsp;<span class="op" id="6538438">!=</span>&nbsp;<span class="builtintype" id="6538441">nil</span>&nbsp;<span class="op" id="6538445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538449">t</span><span class="op" id="6538450">.</span><span class="ident" id="6538451">Fatal</span><span class="op" id="6538456">(</span><span class="string" id="6538457">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6538472">,</span>&nbsp;<span class="ident" id="6538474">err</span><span class="op" id="6538477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538480">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538483">y</span>&nbsp;<span class="op" id="6538485">:=</span>&nbsp;<span class="op" id="6538488">&amp;</span><span class="ident" id="6538489">GobTest1</span><span class="op" id="6538497">{</span><span class="op" id="6538498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538501">err</span>&nbsp;<span class="op" id="6538505">=</span>&nbsp;<span class="ident" id="6538507">dec</span><span class="op" id="6538510">.</span><span class="ident" id="6538511">Decode</span><span class="op" id="6538517">(</span><span class="ident" id="6538518">y</span><span class="op" id="6538519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538522">if</span>&nbsp;<span class="ident" id="6538525">err</span>&nbsp;<span class="op" id="6538529">==</span>&nbsp;<span class="builtintype" id="6538532">nil</span>&nbsp;<span class="op" id="6538536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538540">t</span><span class="op" id="6538541">.</span><span class="ident" id="6538542">Fatal</span><span class="op" id="6538547">(</span><span class="string" id="6538548">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="6538618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538621">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538624">if</span>&nbsp;<span class="ident" id="6538627">strings</span><span class="op" id="6538634">.</span><span class="ident" id="6538635">Index</span><span class="op" id="6538640">(</span><span class="ident" id="6538641">err</span><span class="op" id="6538644">.</span><span class="ident" id="6538645">Error</span><span class="op" id="6538650">(</span><span class="op" id="6538651">)</span><span class="op" id="6538652">,</span>&nbsp;<span class="string" id="6538654">&#34;type&#34;</span><span class="op" id="6538660">)</span>&nbsp;<span class="op" id="6538662">&lt;</span>&nbsp;<span class="num" id="6538664">0</span>&nbsp;<span class="op" id="6538666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538670">t</span><span class="op" id="6538671">.</span><span class="ident" id="6538672">Fatal</span><span class="op" id="6538677">(</span><span class="string" id="6538678">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="6538704">,</span>&nbsp;<span class="ident" id="6538706">err</span><span class="op" id="6538709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538712">}</span><br>
<span class="lineno"></span><span class="op" id="6538714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="6538717">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="6538802">func</span>&nbsp;<span class="ident" id="6538807">TestGobEncoderStructSingleton</span><span class="op" id="6538836">(</span><span class="ident" id="6538837">t</span>&nbsp;<span class="op" id="6538839">*</span><span class="ident" id="6538840">testing</span><span class="op" id="6538847">.</span><span class="ident" id="6538848">T</span><span class="op" id="6538849">)</span>&nbsp;<span class="op" id="6538851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538854">b</span>&nbsp;<span class="op" id="6538856">:=</span>&nbsp;<span class="builtinfunc" id="6538859">new</span><span class="op" id="6538862">(</span><span class="ident" id="6538863">bytes</span><span class="op" id="6538868">.</span><span class="ident" id="6538869">Buffer</span><span class="op" id="6538875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538878">enc</span>&nbsp;<span class="op" id="6538882">:=</span>&nbsp;<span class="ident" id="6538885">NewEncoder</span><span class="op" id="6538895">(</span><span class="ident" id="6538896">b</span><span class="op" id="6538897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538900">err</span>&nbsp;<span class="op" id="6538904">:=</span>&nbsp;<span class="ident" id="6538907">enc</span><span class="op" id="6538910">.</span><span class="ident" id="6538911">Encode</span><span class="op" id="6538917">(</span><span class="op" id="6538918">&amp;</span><span class="ident" id="6538919">ByteStruct</span><span class="op" id="6538929">{</span><span class="string" id="6538930">&#39;A&#39;</span><span class="op" id="6538933">}</span><span class="op" id="6538934">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6538937">if</span>&nbsp;<span class="ident" id="6538940">err</span>&nbsp;<span class="op" id="6538944">!=</span>&nbsp;<span class="builtintype" id="6538947">nil</span>&nbsp;<span class="op" id="6538951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538955">t</span><span class="op" id="6538956">.</span><span class="ident" id="6538957">Fatal</span><span class="op" id="6538962">(</span><span class="string" id="6538963">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6538978">,</span>&nbsp;<span class="ident" id="6538980">err</span><span class="op" id="6538983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6538986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6538989">dec</span>&nbsp;<span class="op" id="6538993">:=</span>&nbsp;<span class="ident" id="6538996">NewDecoder</span><span class="op" id="6539006">(</span><span class="ident" id="6539007">b</span><span class="op" id="6539008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539011">x</span>&nbsp;<span class="op" id="6539013">:=</span>&nbsp;<span class="builtinfunc" id="6539016">new</span><span class="op" id="6539019">(</span><span class="ident" id="6539020">ByteStruct</span><span class="op" id="6539030">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539033">err</span>&nbsp;<span class="op" id="6539037">=</span>&nbsp;<span class="ident" id="6539039">dec</span><span class="op" id="6539042">.</span><span class="ident" id="6539043">Decode</span><span class="op" id="6539049">(</span><span class="ident" id="6539050">x</span><span class="op" id="6539051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539054">if</span>&nbsp;<span class="ident" id="6539057">err</span>&nbsp;<span class="op" id="6539061">!=</span>&nbsp;<span class="builtintype" id="6539064">nil</span>&nbsp;<span class="op" id="6539068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539072">t</span><span class="op" id="6539073">.</span><span class="ident" id="6539074">Fatal</span><span class="op" id="6539079">(</span><span class="string" id="6539080">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6539095">,</span>&nbsp;<span class="ident" id="6539097">err</span><span class="op" id="6539100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539106">if</span>&nbsp;<span class="ident" id="6539109">x</span><span class="op" id="6539110">.</span><span class="ident" id="6539111">a</span>&nbsp;<span class="op" id="6539113">!=</span>&nbsp;<span class="string" id="6539116">&#39;A&#39;</span>&nbsp;<span class="op" id="6539120">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539124">t</span><span class="op" id="6539125">.</span><span class="ident" id="6539126">Errorf</span><span class="op" id="6539132">(</span><span class="string" id="6539133">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6539154">,</span>&nbsp;<span class="ident" id="6539156">x</span><span class="op" id="6539157">.</span><span class="ident" id="6539158">a</span><span class="op" id="6539159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539162">}</span><br>
<span class="lineno"></span><span class="op" id="6539164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539167">func</span>&nbsp;<span class="ident" id="6539172">TestGobEncoderNonStructSingleton</span><span class="op" id="6539204">(</span><span class="ident" id="6539205">t</span>&nbsp;<span class="op" id="6539207">*</span><span class="ident" id="6539208">testing</span><span class="op" id="6539215">.</span><span class="ident" id="6539216">T</span><span class="op" id="6539217">)</span>&nbsp;<span class="op" id="6539219">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539222">b</span>&nbsp;<span class="op" id="6539224">:=</span>&nbsp;<span class="builtinfunc" id="6539227">new</span><span class="op" id="6539230">(</span><span class="ident" id="6539231">bytes</span><span class="op" id="6539236">.</span><span class="ident" id="6539237">Buffer</span><span class="op" id="6539243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539246">enc</span>&nbsp;<span class="op" id="6539250">:=</span>&nbsp;<span class="ident" id="6539253">NewEncoder</span><span class="op" id="6539263">(</span><span class="ident" id="6539264">b</span><span class="op" id="6539265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539268">var</span>&nbsp;<span class="ident" id="6539272">g</span>&nbsp;<span class="ident" id="6539274">Gobber</span>&nbsp;<span class="op" id="6539281">=</span>&nbsp;<span class="num" id="6539283">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539289">err</span>&nbsp;<span class="op" id="6539293">:=</span>&nbsp;<span class="ident" id="6539296">enc</span><span class="op" id="6539299">.</span><span class="ident" id="6539300">Encode</span><span class="op" id="6539306">(</span><span class="op" id="6539307">&amp;</span><span class="ident" id="6539308">g</span><span class="op" id="6539309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539312">if</span>&nbsp;<span class="ident" id="6539315">err</span>&nbsp;<span class="op" id="6539319">!=</span>&nbsp;<span class="builtintype" id="6539322">nil</span>&nbsp;<span class="op" id="6539326">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539330">t</span><span class="op" id="6539331">.</span><span class="ident" id="6539332">Fatal</span><span class="op" id="6539337">(</span><span class="string" id="6539338">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6539353">,</span>&nbsp;<span class="ident" id="6539355">err</span><span class="op" id="6539358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539364">dec</span>&nbsp;<span class="op" id="6539368">:=</span>&nbsp;<span class="ident" id="6539371">NewDecoder</span><span class="op" id="6539381">(</span><span class="ident" id="6539382">b</span><span class="op" id="6539383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539386">var</span>&nbsp;<span class="ident" id="6539390">x</span>&nbsp;<span class="ident" id="6539392">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539400">err</span>&nbsp;<span class="op" id="6539404">=</span>&nbsp;<span class="ident" id="6539406">dec</span><span class="op" id="6539409">.</span><span class="ident" id="6539410">Decode</span><span class="op" id="6539416">(</span><span class="op" id="6539417">&amp;</span><span class="ident" id="6539418">x</span><span class="op" id="6539419">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539422">if</span>&nbsp;<span class="ident" id="6539425">err</span>&nbsp;<span class="op" id="6539429">!=</span>&nbsp;<span class="builtintype" id="6539432">nil</span>&nbsp;<span class="op" id="6539436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539440">t</span><span class="op" id="6539441">.</span><span class="ident" id="6539442">Fatal</span><span class="op" id="6539447">(</span><span class="string" id="6539448">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6539463">,</span>&nbsp;<span class="ident" id="6539465">err</span><span class="op" id="6539468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539474">if</span>&nbsp;<span class="ident" id="6539477">x</span>&nbsp;<span class="op" id="6539479">!=</span>&nbsp;<span class="num" id="6539482">1234</span>&nbsp;<span class="op" id="6539487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539491">t</span><span class="op" id="6539492">.</span><span class="ident" id="6539493">Errorf</span><span class="op" id="6539499">(</span><span class="string" id="6539500">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="6539522">,</span>&nbsp;<span class="ident" id="6539524">x</span><span class="op" id="6539525">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539528">}</span><br>
<span class="lineno"></span><span class="op" id="6539530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539533">func</span>&nbsp;<span class="ident" id="6539538">TestGobEncoderIgnoreStructField</span><span class="op" id="6539569">(</span><span class="ident" id="6539570">t</span>&nbsp;<span class="op" id="6539572">*</span><span class="ident" id="6539573">testing</span><span class="op" id="6539580">.</span><span class="ident" id="6539581">T</span><span class="op" id="6539582">)</span>&nbsp;<span class="op" id="6539584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539587">b</span>&nbsp;<span class="op" id="6539589">:=</span>&nbsp;<span class="builtinfunc" id="6539592">new</span><span class="op" id="6539595">(</span><span class="ident" id="6539596">bytes</span><span class="op" id="6539601">.</span><span class="ident" id="6539602">Buffer</span><span class="op" id="6539608">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6539611">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539649">enc</span>&nbsp;<span class="op" id="6539653">:=</span>&nbsp;<span class="ident" id="6539656">NewEncoder</span><span class="op" id="6539666">(</span><span class="ident" id="6539667">b</span><span class="op" id="6539668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539671">err</span>&nbsp;<span class="op" id="6539675">:=</span>&nbsp;<span class="ident" id="6539678">enc</span><span class="op" id="6539681">.</span><span class="ident" id="6539682">Encode</span><span class="op" id="6539688">(</span><span class="ident" id="6539689">GobTest0</span><span class="op" id="6539697">{</span><span class="num" id="6539698">17</span><span class="op" id="6539700">,</span>&nbsp;<span class="op" id="6539702">&amp;</span><span class="ident" id="6539703">ByteStruct</span><span class="op" id="6539713">{</span><span class="string" id="6539714">&#39;A&#39;</span><span class="op" id="6539717">}</span><span class="op" id="6539718">}</span><span class="op" id="6539719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539722">if</span>&nbsp;<span class="ident" id="6539725">err</span>&nbsp;<span class="op" id="6539729">!=</span>&nbsp;<span class="builtintype" id="6539732">nil</span>&nbsp;<span class="op" id="6539736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539740">t</span><span class="op" id="6539741">.</span><span class="ident" id="6539742">Fatal</span><span class="op" id="6539747">(</span><span class="string" id="6539748">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6539763">,</span>&nbsp;<span class="ident" id="6539765">err</span><span class="op" id="6539768">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539774">dec</span>&nbsp;<span class="op" id="6539778">:=</span>&nbsp;<span class="ident" id="6539781">NewDecoder</span><span class="op" id="6539791">(</span><span class="ident" id="6539792">b</span><span class="op" id="6539793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539796">x</span>&nbsp;<span class="op" id="6539798">:=</span>&nbsp;<span class="builtinfunc" id="6539801">new</span><span class="op" id="6539804">(</span><span class="ident" id="6539805">GobTestIgnoreEncoder</span><span class="op" id="6539825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539828">err</span>&nbsp;<span class="op" id="6539832">=</span>&nbsp;<span class="ident" id="6539834">dec</span><span class="op" id="6539837">.</span><span class="ident" id="6539838">Decode</span><span class="op" id="6539844">(</span><span class="ident" id="6539845">x</span><span class="op" id="6539846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539849">if</span>&nbsp;<span class="ident" id="6539852">err</span>&nbsp;<span class="op" id="6539856">!=</span>&nbsp;<span class="builtintype" id="6539859">nil</span>&nbsp;<span class="op" id="6539863">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539867">t</span><span class="op" id="6539868">.</span><span class="ident" id="6539869">Fatal</span><span class="op" id="6539874">(</span><span class="string" id="6539875">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6539890">,</span>&nbsp;<span class="ident" id="6539892">err</span><span class="op" id="6539895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6539901">if</span>&nbsp;<span class="ident" id="6539904">x</span><span class="op" id="6539905">.</span><span class="ident" id="6539906">X</span>&nbsp;<span class="op" id="6539908">!=</span>&nbsp;<span class="num" id="6539911">17</span>&nbsp;<span class="op" id="6539914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6539918">t</span><span class="op" id="6539919">.</span><span class="ident" id="6539920">Errorf</span><span class="op" id="6539926">(</span><span class="string" id="6539927">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6539947">,</span>&nbsp;<span class="ident" id="6539949">x</span><span class="op" id="6539950">.</span><span class="ident" id="6539951">X</span><span class="op" id="6539952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6539955">}</span><br>
<span class="lineno">625</span><span class="op" id="6539957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6539960">func</span>&nbsp;<span class="ident" id="6539965">TestGobEncoderIgnoreNonStructField</span><span class="op" id="6539999">(</span><span class="ident" id="6540000">t</span>&nbsp;<span class="op" id="6540002">*</span><span class="ident" id="6540003">testing</span><span class="op" id="6540010">.</span><span class="ident" id="6540011">T</span><span class="op" id="6540012">)</span>&nbsp;<span class="op" id="6540014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540017">b</span>&nbsp;<span class="op" id="6540019">:=</span>&nbsp;<span class="builtinfunc" id="6540022">new</span><span class="op" id="6540025">(</span><span class="ident" id="6540026">bytes</span><span class="op" id="6540031">.</span><span class="ident" id="6540032">Buffer</span><span class="op" id="6540038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6540041">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540079">enc</span>&nbsp;<span class="op" id="6540083">:=</span>&nbsp;<span class="ident" id="6540086">NewEncoder</span><span class="op" id="6540096">(</span><span class="ident" id="6540097">b</span><span class="op" id="6540098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540101">gobber</span>&nbsp;<span class="op" id="6540108">:=</span>&nbsp;<span class="ident" id="6540111">Gobber</span><span class="op" id="6540117">(</span><span class="num" id="6540118">23</span><span class="op" id="6540120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540123">bgobber</span>&nbsp;<span class="op" id="6540131">:=</span>&nbsp;<span class="ident" id="6540134">BinaryGobber</span><span class="op" id="6540146">(</span><span class="num" id="6540147">24</span><span class="op" id="6540149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540152">tgobber</span>&nbsp;<span class="op" id="6540160">:=</span>&nbsp;<span class="ident" id="6540163">TextGobber</span><span class="op" id="6540173">(</span><span class="num" id="6540174">25</span><span class="op" id="6540176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540179">err</span>&nbsp;<span class="op" id="6540183">:=</span>&nbsp;<span class="ident" id="6540186">enc</span><span class="op" id="6540189">.</span><span class="ident" id="6540190">Encode</span><span class="op" id="6540196">(</span><span class="ident" id="6540197">GobTest3</span><span class="op" id="6540205">{</span><span class="num" id="6540206">17</span><span class="op" id="6540208">,</span>&nbsp;<span class="op" id="6540210">&amp;</span><span class="ident" id="6540211">gobber</span><span class="op" id="6540217">,</span>&nbsp;<span class="op" id="6540219">&amp;</span><span class="ident" id="6540220">bgobber</span><span class="op" id="6540227">,</span>&nbsp;<span class="op" id="6540229">&amp;</span><span class="ident" id="6540230">tgobber</span><span class="op" id="6540237">}</span><span class="op" id="6540238">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540241">if</span>&nbsp;<span class="ident" id="6540244">err</span>&nbsp;<span class="op" id="6540248">!=</span>&nbsp;<span class="builtintype" id="6540251">nil</span>&nbsp;<span class="op" id="6540255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540259">t</span><span class="op" id="6540260">.</span><span class="ident" id="6540261">Fatal</span><span class="op" id="6540266">(</span><span class="string" id="6540267">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6540282">,</span>&nbsp;<span class="ident" id="6540284">err</span><span class="op" id="6540287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540293">dec</span>&nbsp;<span class="op" id="6540297">:=</span>&nbsp;<span class="ident" id="6540300">NewDecoder</span><span class="op" id="6540310">(</span><span class="ident" id="6540311">b</span><span class="op" id="6540312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540315">x</span>&nbsp;<span class="op" id="6540317">:=</span>&nbsp;<span class="builtinfunc" id="6540320">new</span><span class="op" id="6540323">(</span><span class="ident" id="6540324">GobTestIgnoreEncoder</span><span class="op" id="6540344">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540347">err</span>&nbsp;<span class="op" id="6540351">=</span>&nbsp;<span class="ident" id="6540353">dec</span><span class="op" id="6540356">.</span><span class="ident" id="6540357">Decode</span><span class="op" id="6540363">(</span><span class="ident" id="6540364">x</span><span class="op" id="6540365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540368">if</span>&nbsp;<span class="ident" id="6540371">err</span>&nbsp;<span class="op" id="6540375">!=</span>&nbsp;<span class="builtintype" id="6540378">nil</span>&nbsp;<span class="op" id="6540382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540386">t</span><span class="op" id="6540387">.</span><span class="ident" id="6540388">Fatal</span><span class="op" id="6540393">(</span><span class="string" id="6540394">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6540409">,</span>&nbsp;<span class="ident" id="6540411">err</span><span class="op" id="6540414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540420">if</span>&nbsp;<span class="ident" id="6540423">x</span><span class="op" id="6540424">.</span><span class="ident" id="6540425">X</span>&nbsp;<span class="op" id="6540427">!=</span>&nbsp;<span class="num" id="6540430">17</span>&nbsp;<span class="op" id="6540433">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540437">t</span><span class="op" id="6540438">.</span><span class="ident" id="6540439">Errorf</span><span class="op" id="6540445">(</span><span class="string" id="6540446">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="6540466">,</span>&nbsp;<span class="ident" id="6540468">x</span><span class="op" id="6540469">.</span><span class="ident" id="6540470">X</span><span class="op" id="6540471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540474">}</span><br>
<span class="lineno"></span><span class="op" id="6540476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6540479">func</span>&nbsp;<span class="ident" id="6540484">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="6540514">(</span><span class="ident" id="6540515">t</span>&nbsp;<span class="op" id="6540517">*</span><span class="ident" id="6540518">testing</span><span class="op" id="6540525">.</span><span class="ident" id="6540526">T</span><span class="op" id="6540527">)</span>&nbsp;<span class="op" id="6540529">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540532">b</span>&nbsp;<span class="op" id="6540534">:=</span>&nbsp;<span class="builtinfunc" id="6540537">new</span><span class="op" id="6540540">(</span><span class="ident" id="6540541">bytes</span><span class="op" id="6540546">.</span><span class="ident" id="6540547">Buffer</span><span class="op" id="6540553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6540556">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540594">enc</span>&nbsp;<span class="op" id="6540598">:=</span>&nbsp;<span class="ident" id="6540601">NewEncoder</span><span class="op" id="6540611">(</span><span class="ident" id="6540612">b</span><span class="op" id="6540613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540616">err</span>&nbsp;<span class="op" id="6540620">:=</span>&nbsp;<span class="ident" id="6540623">enc</span><span class="op" id="6540626">.</span><span class="ident" id="6540627">Encode</span><span class="op" id="6540633">(</span><span class="ident" id="6540634">GobTest0</span><span class="op" id="6540642">{</span><span class="ident" id="6540643">X</span><span class="op" id="6540644">:</span>&nbsp;<span class="num" id="6540646">18</span><span class="op" id="6540648">}</span><span class="op" id="6540649">)</span>&nbsp;<span class="comment" id="6540651">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540664">if</span>&nbsp;<span class="ident" id="6540667">err</span>&nbsp;<span class="op" id="6540671">!=</span>&nbsp;<span class="builtintype" id="6540674">nil</span>&nbsp;<span class="op" id="6540678">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540682">t</span><span class="op" id="6540683">.</span><span class="ident" id="6540684">Fatal</span><span class="op" id="6540689">(</span><span class="string" id="6540690">&#34;encode&nbsp;error:&#34;</span><span class="op" id="6540705">,</span>&nbsp;<span class="ident" id="6540707">err</span><span class="op" id="6540710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540716">dec</span>&nbsp;<span class="op" id="6540720">:=</span>&nbsp;<span class="ident" id="6540723">NewDecoder</span><span class="op" id="6540733">(</span><span class="ident" id="6540734">b</span><span class="op" id="6540735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540738">x</span>&nbsp;<span class="op" id="6540740">:=</span>&nbsp;<span class="builtinfunc" id="6540743">new</span><span class="op" id="6540746">(</span><span class="ident" id="6540747">GobTest0</span><span class="op" id="6540755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540758">err</span>&nbsp;<span class="op" id="6540762">=</span>&nbsp;<span class="ident" id="6540764">dec</span><span class="op" id="6540767">.</span><span class="ident" id="6540768">Decode</span><span class="op" id="6540774">(</span><span class="ident" id="6540775">x</span><span class="op" id="6540776">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540779">if</span>&nbsp;<span class="ident" id="6540782">err</span>&nbsp;<span class="op" id="6540786">!=</span>&nbsp;<span class="builtintype" id="6540789">nil</span>&nbsp;<span class="op" id="6540793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540797">t</span><span class="op" id="6540798">.</span><span class="ident" id="6540799">Fatal</span><span class="op" id="6540804">(</span><span class="string" id="6540805">&#34;decode&nbsp;error:&#34;</span><span class="op" id="6540820">,</span>&nbsp;<span class="ident" id="6540822">err</span><span class="op" id="6540825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540831">if</span>&nbsp;<span class="ident" id="6540834">x</span><span class="op" id="6540835">.</span><span class="ident" id="6540836">X</span>&nbsp;<span class="op" id="6540838">!=</span>&nbsp;<span class="num" id="6540841">18</span>&nbsp;<span class="op" id="6540844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540848">t</span><span class="op" id="6540849">.</span><span class="ident" id="6540850">Errorf</span><span class="op" id="6540856">(</span><span class="string" id="6540857">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6540884">,</span>&nbsp;<span class="ident" id="6540886">x</span><span class="op" id="6540887">.</span><span class="ident" id="6540888">X</span><span class="op" id="6540889">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6540895">if</span>&nbsp;<span class="ident" id="6540898">x</span><span class="op" id="6540899">.</span><span class="ident" id="6540900">G</span>&nbsp;<span class="op" id="6540902">!=</span>&nbsp;<span class="builtintype" id="6540905">nil</span>&nbsp;<span class="op" id="6540909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540913">t</span><span class="op" id="6540914">.</span><span class="ident" id="6540915">Errorf</span><span class="op" id="6540921">(</span><span class="string" id="6540922">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6540950">,</span>&nbsp;<span class="ident" id="6540952">x</span><span class="op" id="6540953">.</span><span class="ident" id="6540954">G</span><span class="op" id="6540955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6540958">}</span><br>
<span class="lineno"></span><span class="op" id="6540960">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="6540963">type</span>&nbsp;<span class="ident" id="6540968">gobDecoderBug0</span>&nbsp;<span class="keyword" id="6540983">struct</span>&nbsp;<span class="op" id="6540990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6540993">foo</span><span class="op" id="6540996">,</span>&nbsp;<span class="ident" id="6540998">bar</span>&nbsp;<span class="builtintype" id="6541002">string</span><br>
<span class="lineno"></span><span class="op" id="6541009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="6541012">func</span>&nbsp;<span class="op" id="6541017">(</span><span class="ident" id="6541018">br</span>&nbsp;<span class="op" id="6541021">*</span><span class="ident" id="6541022">gobDecoderBug0</span><span class="op" id="6541036">)</span>&nbsp;<span class="ident" id="6541038">String</span><span class="op" id="6541044">(</span><span class="op" id="6541045">)</span>&nbsp;<span class="builtintype" id="6541047">string</span>&nbsp;<span class="op" id="6541054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541057">return</span>&nbsp;<span class="ident" id="6541064">br</span><span class="op" id="6541066">.</span><span class="ident" id="6541067">foo</span>&nbsp;<span class="op" id="6541071">+</span>&nbsp;<span class="string" id="6541073">&#34;-&#34;</span>&nbsp;<span class="op" id="6541077">+</span>&nbsp;<span class="ident" id="6541079">br</span><span class="op" id="6541081">.</span><span class="ident" id="6541082">bar</span><br>
<span class="lineno"></span><span class="op" id="6541086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541089">func</span>&nbsp;<span class="op" id="6541094">(</span><span class="ident" id="6541095">br</span>&nbsp;<span class="op" id="6541098">*</span><span class="ident" id="6541099">gobDecoderBug0</span><span class="op" id="6541113">)</span>&nbsp;<span class="ident" id="6541115">GobEncode</span><span class="op" id="6541124">(</span><span class="op" id="6541125">)</span>&nbsp;<span class="op" id="6541127">(</span><span class="op" id="6541128">[</span><span class="op" id="6541129">]</span><span class="builtintype" id="6541130">byte</span><span class="op" id="6541134">,</span>&nbsp;<span class="builtintype" id="6541136">error</span><span class="op" id="6541141">)</span>&nbsp;<span class="op" id="6541143">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541146">return</span>&nbsp;<span class="op" id="6541153">[</span><span class="op" id="6541154">]</span><span class="builtintype" id="6541155">byte</span><span class="op" id="6541159">(</span><span class="ident" id="6541160">br</span><span class="op" id="6541162">.</span><span class="ident" id="6541163">String</span><span class="op" id="6541169">(</span><span class="op" id="6541170">)</span><span class="op" id="6541171">)</span><span class="op" id="6541172">,</span>&nbsp;<span class="builtintype" id="6541174">nil</span><br>
<span class="lineno"></span><span class="op" id="6541178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6541181">func</span>&nbsp;<span class="op" id="6541186">(</span><span class="ident" id="6541187">br</span>&nbsp;<span class="op" id="6541190">*</span><span class="ident" id="6541191">gobDecoderBug0</span><span class="op" id="6541205">)</span>&nbsp;<span class="ident" id="6541207">GobDecode</span><span class="op" id="6541216">(</span><span class="ident" id="6541217">b</span>&nbsp;<span class="op" id="6541219">[</span><span class="op" id="6541220">]</span><span class="builtintype" id="6541221">byte</span><span class="op" id="6541225">)</span>&nbsp;<span class="builtintype" id="6541227">error</span>&nbsp;<span class="op" id="6541233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541236">br</span><span class="op" id="6541238">.</span><span class="ident" id="6541239">foo</span>&nbsp;<span class="op" id="6541243">=</span>&nbsp;<span class="string" id="6541245">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541252">br</span><span class="op" id="6541254">.</span><span class="ident" id="6541255">bar</span>&nbsp;<span class="op" id="6541259">=</span>&nbsp;<span class="string" id="6541261">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541268">return</span>&nbsp;<span class="builtintype" id="6541275">nil</span><br>
<span class="lineno"></span><span class="op" id="6541279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6541282">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="6541348">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="6541370">func</span>&nbsp;<span class="ident" id="6541375">TestGobEncoderExtraIndirect</span><span class="op" id="6541402">(</span><span class="ident" id="6541403">t</span>&nbsp;<span class="op" id="6541405">*</span><span class="ident" id="6541406">testing</span><span class="op" id="6541413">.</span><span class="ident" id="6541414">T</span><span class="op" id="6541415">)</span>&nbsp;<span class="op" id="6541417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541420">gdb</span>&nbsp;<span class="op" id="6541424">:=</span>&nbsp;<span class="op" id="6541427">&amp;</span><span class="ident" id="6541428">gobDecoderBug0</span><span class="op" id="6541442">{</span><span class="string" id="6541443">&#34;foo&#34;</span><span class="op" id="6541448">,</span>&nbsp;<span class="string" id="6541450">&#34;bar&#34;</span><span class="op" id="6541455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541458">buf</span>&nbsp;<span class="op" id="6541462">:=</span>&nbsp;<span class="builtinfunc" id="6541465">new</span><span class="op" id="6541468">(</span><span class="ident" id="6541469">bytes</span><span class="op" id="6541474">.</span><span class="ident" id="6541475">Buffer</span><span class="op" id="6541481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541484">e</span>&nbsp;<span class="op" id="6541486">:=</span>&nbsp;<span class="ident" id="6541489">NewEncoder</span><span class="op" id="6541499">(</span><span class="ident" id="6541500">buf</span><span class="op" id="6541503">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541506">if</span>&nbsp;<span class="ident" id="6541509">err</span>&nbsp;<span class="op" id="6541513">:=</span>&nbsp;<span class="ident" id="6541516">e</span><span class="op" id="6541517">.</span><span class="ident" id="6541518">Encode</span><span class="op" id="6541524">(</span><span class="ident" id="6541525">gdb</span><span class="op" id="6541528">)</span><span class="op" id="6541529">;</span>&nbsp;<span class="ident" id="6541531">err</span>&nbsp;<span class="op" id="6541535">!=</span>&nbsp;<span class="builtintype" id="6541538">nil</span>&nbsp;<span class="op" id="6541542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541546">t</span><span class="op" id="6541547">.</span><span class="ident" id="6541548">Fatalf</span><span class="op" id="6541554">(</span><span class="string" id="6541555">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="6541567">,</span>&nbsp;<span class="ident" id="6541569">err</span><span class="op" id="6541572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541578">d</span>&nbsp;<span class="op" id="6541580">:=</span>&nbsp;<span class="ident" id="6541583">NewDecoder</span><span class="op" id="6541593">(</span><span class="ident" id="6541594">buf</span><span class="op" id="6541597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541600">var</span>&nbsp;<span class="ident" id="6541604">got</span>&nbsp;<span class="op" id="6541608">*</span><span class="ident" id="6541609">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541625">if</span>&nbsp;<span class="ident" id="6541628">err</span>&nbsp;<span class="op" id="6541632">:=</span>&nbsp;<span class="ident" id="6541635">d</span><span class="op" id="6541636">.</span><span class="ident" id="6541637">Decode</span><span class="op" id="6541643">(</span><span class="op" id="6541644">&amp;</span><span class="ident" id="6541645">got</span><span class="op" id="6541648">)</span><span class="op" id="6541649">;</span>&nbsp;<span class="ident" id="6541651">err</span>&nbsp;<span class="op" id="6541655">!=</span>&nbsp;<span class="builtintype" id="6541658">nil</span>&nbsp;<span class="op" id="6541662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541666">t</span><span class="op" id="6541667">.</span><span class="ident" id="6541668">Fatalf</span><span class="op" id="6541674">(</span><span class="string" id="6541675">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6541687">,</span>&nbsp;<span class="ident" id="6541689">err</span><span class="op" id="6541692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6541698">if</span>&nbsp;<span class="ident" id="6541701">got</span><span class="op" id="6541704">.</span><span class="ident" id="6541705">foo</span>&nbsp;<span class="op" id="6541709">!=</span>&nbsp;<span class="ident" id="6541712">gdb</span><span class="op" id="6541715">.</span><span class="ident" id="6541716">foo</span>&nbsp;<span class="op" id="6541720">||</span>&nbsp;<span class="ident" id="6541723">got</span><span class="op" id="6541726">.</span><span class="ident" id="6541727">bar</span>&nbsp;<span class="op" id="6541731">!=</span>&nbsp;<span class="ident" id="6541734">gdb</span><span class="op" id="6541737">.</span><span class="ident" id="6541738">bar</span>&nbsp;<span class="op" id="6541742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6541746">t</span><span class="op" id="6541747">.</span><span class="ident" id="6541748">Errorf</span><span class="op" id="6541754">(</span><span class="string" id="6541755">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6541774">,</span>&nbsp;<span class="ident" id="6541776">got</span><span class="op" id="6541779">,</span>&nbsp;<span class="ident" id="6541781">gdb</span><span class="op" id="6541784">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6541787">}</span><br>
<span class="lineno"></span><span class="op" id="6541789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6541792">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="6541856">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="6541925">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="6541987">type</span>&nbsp;<span class="ident" id="6541992">isZeroBug</span>&nbsp;<span class="keyword" id="6542002">struct</span>&nbsp;<span class="op" id="6542009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542012">T</span>&nbsp;<span class="ident" id="6542014">time</span><span class="op" id="6542018">.</span><span class="ident" id="6542019">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542025">S</span>&nbsp;<span class="builtintype" id="6542027">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542035">I</span>&nbsp;<span class="builtintype" id="6542037">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542042">A</span>&nbsp;<span class="ident" id="6542044">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542060">F</span>&nbsp;<span class="ident" id="6542062">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="6542081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542084">type</span>&nbsp;<span class="ident" id="6542089">isZeroBugArray</span>&nbsp;<span class="op" id="6542104">[</span><span class="num" id="6542105">2</span><span class="op" id="6542106">]</span><span class="builtintype" id="6542107">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="6542114">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="6542174">func</span>&nbsp;<span class="op" id="6542179">(</span><span class="ident" id="6542180">a</span>&nbsp;<span class="ident" id="6542182">isZeroBugArray</span><span class="op" id="6542196">)</span>&nbsp;<span class="ident" id="6542198">GobEncode</span><span class="op" id="6542207">(</span><span class="op" id="6542208">)</span>&nbsp;<span class="op" id="6542210">(</span><span class="ident" id="6542211">b</span>&nbsp;<span class="op" id="6542213">[</span><span class="op" id="6542214">]</span><span class="builtintype" id="6542215">byte</span><span class="op" id="6542219">,</span>&nbsp;<span class="ident" id="6542221">e</span>&nbsp;<span class="builtintype" id="6542223">error</span><span class="op" id="6542228">)</span>&nbsp;<span class="op" id="6542230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542233">b</span>&nbsp;<span class="op" id="6542235">=</span>&nbsp;<span class="builtinfunc" id="6542237">append</span><span class="op" id="6542243">(</span><span class="ident" id="6542244">b</span><span class="op" id="6542245">,</span>&nbsp;<span class="ident" id="6542247">a</span><span class="op" id="6542248">[</span><span class="op" id="6542249">:</span><span class="op" id="6542250">]</span><span class="op" id="6542251">...</span><span class="op" id="6542254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542257">return</span>&nbsp;<span class="ident" id="6542264">b</span><span class="op" id="6542265">,</span>&nbsp;<span class="builtintype" id="6542267">nil</span><br>
<span class="lineno">725</span><span class="op" id="6542271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542274">func</span>&nbsp;<span class="op" id="6542279">(</span><span class="ident" id="6542280">a</span>&nbsp;<span class="op" id="6542282">*</span><span class="ident" id="6542283">isZeroBugArray</span><span class="op" id="6542297">)</span>&nbsp;<span class="ident" id="6542299">GobDecode</span><span class="op" id="6542308">(</span><span class="ident" id="6542309">data</span>&nbsp;<span class="op" id="6542314">[</span><span class="op" id="6542315">]</span><span class="builtintype" id="6542316">byte</span><span class="op" id="6542320">)</span>&nbsp;<span class="builtintype" id="6542322">error</span>&nbsp;<span class="op" id="6542328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542331">if</span>&nbsp;<span class="builtinfunc" id="6542334">len</span><span class="op" id="6542337">(</span><span class="ident" id="6542338">data</span><span class="op" id="6542342">)</span>&nbsp;<span class="op" id="6542344">!=</span>&nbsp;<span class="builtinfunc" id="6542347">len</span><span class="op" id="6542350">(</span><span class="ident" id="6542351">a</span><span class="op" id="6542352">)</span>&nbsp;<span class="op" id="6542354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542358">return</span>&nbsp;<span class="ident" id="6542365">io</span><span class="op" id="6542367">.</span><span class="ident" id="6542368">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542376">a</span><span class="op" id="6542377">[</span><span class="num" id="6542378">0</span><span class="op" id="6542379">]</span>&nbsp;<span class="op" id="6542381">=</span>&nbsp;<span class="ident" id="6542383">data</span><span class="op" id="6542387">[</span><span class="num" id="6542388">0</span><span class="op" id="6542389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542392">a</span><span class="op" id="6542393">[</span><span class="num" id="6542394">1</span><span class="op" id="6542395">]</span>&nbsp;<span class="op" id="6542397">=</span>&nbsp;<span class="ident" id="6542399">data</span><span class="op" id="6542403">[</span><span class="num" id="6542404">1</span><span class="op" id="6542405">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542408">return</span>&nbsp;<span class="builtintype" id="6542415">nil</span><br>
<span class="lineno"></span><span class="op" id="6542419">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="6542422">type</span>&nbsp;<span class="ident" id="6542427">isZeroBugInterface</span>&nbsp;<span class="keyword" id="6542446">struct</span>&nbsp;<span class="op" id="6542453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542456">I</span>&nbsp;<span class="keyword" id="6542458">interface</span><span class="op" id="6542467">{</span><span class="op" id="6542468">}</span><br>
<span class="lineno"></span><span class="op" id="6542470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="6542473">func</span>&nbsp;<span class="op" id="6542478">(</span><span class="ident" id="6542479">i</span>&nbsp;<span class="ident" id="6542481">isZeroBugInterface</span><span class="op" id="6542499">)</span>&nbsp;<span class="ident" id="6542501">GobEncode</span><span class="op" id="6542510">(</span><span class="op" id="6542511">)</span>&nbsp;<span class="op" id="6542513">(</span><span class="ident" id="6542514">b</span>&nbsp;<span class="op" id="6542516">[</span><span class="op" id="6542517">]</span><span class="builtintype" id="6542518">byte</span><span class="op" id="6542522">,</span>&nbsp;<span class="ident" id="6542524">e</span>&nbsp;<span class="builtintype" id="6542526">error</span><span class="op" id="6542531">)</span>&nbsp;<span class="op" id="6542533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542536">return</span>&nbsp;<span class="op" id="6542543">[</span><span class="op" id="6542544">]</span><span class="builtintype" id="6542545">byte</span><span class="op" id="6542549">{</span><span class="op" id="6542550">}</span><span class="op" id="6542551">,</span>&nbsp;<span class="builtintype" id="6542553">nil</span><br>
<span class="lineno"></span><span class="op" id="6542557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542560">func</span>&nbsp;<span class="op" id="6542565">(</span><span class="ident" id="6542566">i</span>&nbsp;<span class="op" id="6542568">*</span><span class="ident" id="6542569">isZeroBugInterface</span><span class="op" id="6542587">)</span>&nbsp;<span class="ident" id="6542589">GobDecode</span><span class="op" id="6542598">(</span><span class="ident" id="6542599">data</span>&nbsp;<span class="op" id="6542604">[</span><span class="op" id="6542605">]</span><span class="builtintype" id="6542606">byte</span><span class="op" id="6542610">)</span>&nbsp;<span class="builtintype" id="6542612">error</span>&nbsp;<span class="op" id="6542618">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542621">return</span>&nbsp;<span class="builtintype" id="6542628">nil</span><br>
<span class="lineno"></span><span class="op" id="6542632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6542635">func</span>&nbsp;<span class="ident" id="6542640">TestGobEncodeIsZero</span><span class="op" id="6542659">(</span><span class="ident" id="6542660">t</span>&nbsp;<span class="op" id="6542662">*</span><span class="ident" id="6542663">testing</span><span class="op" id="6542670">.</span><span class="ident" id="6542671">T</span><span class="op" id="6542672">)</span>&nbsp;<span class="op" id="6542674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542677">x</span>&nbsp;<span class="op" id="6542679">:=</span>&nbsp;<span class="ident" id="6542682">isZeroBug</span><span class="op" id="6542691">{</span><span class="ident" id="6542692">time</span><span class="op" id="6542696">.</span><span class="ident" id="6542697">Now</span><span class="op" id="6542700">(</span><span class="op" id="6542701">)</span><span class="op" id="6542702">,</span>&nbsp;<span class="string" id="6542704">&#34;hello&#34;</span><span class="op" id="6542711">,</span>&nbsp;<span class="op" id="6542713">-</span><span class="num" id="6542714">55</span><span class="op" id="6542716">,</span>&nbsp;<span class="ident" id="6542718">isZeroBugArray</span><span class="op" id="6542732">{</span><span class="num" id="6542733">1</span><span class="op" id="6542734">,</span>&nbsp;<span class="num" id="6542736">2</span><span class="op" id="6542737">}</span><span class="op" id="6542738">,</span>&nbsp;<span class="ident" id="6542740">isZeroBugInterface</span><span class="op" id="6542758">{</span><span class="op" id="6542759">}</span><span class="op" id="6542760">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542763">b</span>&nbsp;<span class="op" id="6542765">:=</span>&nbsp;<span class="builtinfunc" id="6542768">new</span><span class="op" id="6542771">(</span><span class="ident" id="6542772">bytes</span><span class="op" id="6542777">.</span><span class="ident" id="6542778">Buffer</span><span class="op" id="6542784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542787">enc</span>&nbsp;<span class="op" id="6542791">:=</span>&nbsp;<span class="ident" id="6542794">NewEncoder</span><span class="op" id="6542804">(</span><span class="ident" id="6542805">b</span><span class="op" id="6542806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542809">err</span>&nbsp;<span class="op" id="6542813">:=</span>&nbsp;<span class="ident" id="6542816">enc</span><span class="op" id="6542819">.</span><span class="ident" id="6542820">Encode</span><span class="op" id="6542826">(</span><span class="ident" id="6542827">x</span><span class="op" id="6542828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542831">if</span>&nbsp;<span class="ident" id="6542834">err</span>&nbsp;<span class="op" id="6542838">!=</span>&nbsp;<span class="builtintype" id="6542841">nil</span>&nbsp;<span class="op" id="6542845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542849">t</span><span class="op" id="6542850">.</span><span class="ident" id="6542851">Fatal</span><span class="op" id="6542856">(</span><span class="string" id="6542857">&#34;encode:&#34;</span><span class="op" id="6542866">,</span>&nbsp;<span class="ident" id="6542868">err</span><span class="op" id="6542871">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542877">var</span>&nbsp;<span class="ident" id="6542881">y</span>&nbsp;<span class="ident" id="6542883">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542894">dec</span>&nbsp;<span class="op" id="6542898">:=</span>&nbsp;<span class="ident" id="6542901">NewDecoder</span><span class="op" id="6542911">(</span><span class="ident" id="6542912">b</span><span class="op" id="6542913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542916">err</span>&nbsp;<span class="op" id="6542920">=</span>&nbsp;<span class="ident" id="6542922">dec</span><span class="op" id="6542925">.</span><span class="ident" id="6542926">Decode</span><span class="op" id="6542932">(</span><span class="op" id="6542933">&amp;</span><span class="ident" id="6542934">y</span><span class="op" id="6542935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542938">if</span>&nbsp;<span class="ident" id="6542941">err</span>&nbsp;<span class="op" id="6542945">!=</span>&nbsp;<span class="builtintype" id="6542948">nil</span>&nbsp;<span class="op" id="6542952">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542956">t</span><span class="op" id="6542957">.</span><span class="ident" id="6542958">Fatal</span><span class="op" id="6542963">(</span><span class="string" id="6542964">&#34;decode:&#34;</span><span class="op" id="6542973">,</span>&nbsp;<span class="ident" id="6542975">err</span><span class="op" id="6542978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6542981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6542984">if</span>&nbsp;<span class="ident" id="6542987">x</span>&nbsp;<span class="op" id="6542989">!=</span>&nbsp;<span class="ident" id="6542992">y</span>&nbsp;<span class="op" id="6542994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6542998">t</span><span class="op" id="6542999">.</span><span class="ident" id="6543000">Fatalf</span><span class="op" id="6543006">(</span><span class="string" id="6543007">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="6543017">,</span>&nbsp;<span class="ident" id="6543019">x</span><span class="op" id="6543020">,</span>&nbsp;<span class="ident" id="6543022">y</span><span class="op" id="6543023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543026">}</span><br>
<span class="lineno">765</span><span class="op" id="6543028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6543031">func</span>&nbsp;<span class="ident" id="6543036">TestGobEncodePtrError</span><span class="op" id="6543057">(</span><span class="ident" id="6543058">t</span>&nbsp;<span class="op" id="6543060">*</span><span class="ident" id="6543061">testing</span><span class="op" id="6543068">.</span><span class="ident" id="6543069">T</span><span class="op" id="6543070">)</span>&nbsp;<span class="op" id="6543072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543075">var</span>&nbsp;<span class="ident" id="6543079">err</span>&nbsp;<span class="builtintype" id="6543083">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543090">b</span>&nbsp;<span class="op" id="6543092">:=</span>&nbsp;<span class="builtinfunc" id="6543095">new</span><span class="op" id="6543098">(</span><span class="ident" id="6543099">bytes</span><span class="op" id="6543104">.</span><span class="ident" id="6543105">Buffer</span><span class="op" id="6543111">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543114">enc</span>&nbsp;<span class="op" id="6543118">:=</span>&nbsp;<span class="ident" id="6543121">NewEncoder</span><span class="op" id="6543131">(</span><span class="ident" id="6543132">b</span><span class="op" id="6543133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543136">err</span>&nbsp;<span class="op" id="6543140">=</span>&nbsp;<span class="ident" id="6543142">enc</span><span class="op" id="6543145">.</span><span class="ident" id="6543146">Encode</span><span class="op" id="6543152">(</span><span class="op" id="6543153">&amp;</span><span class="ident" id="6543154">err</span><span class="op" id="6543157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543160">if</span>&nbsp;<span class="ident" id="6543163">err</span>&nbsp;<span class="op" id="6543167">!=</span>&nbsp;<span class="builtintype" id="6543170">nil</span>&nbsp;<span class="op" id="6543174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543178">t</span><span class="op" id="6543179">.</span><span class="ident" id="6543180">Fatal</span><span class="op" id="6543185">(</span><span class="string" id="6543186">&#34;encode:&#34;</span><span class="op" id="6543195">,</span>&nbsp;<span class="ident" id="6543197">err</span><span class="op" id="6543200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543203">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543206">dec</span>&nbsp;<span class="op" id="6543210">:=</span>&nbsp;<span class="ident" id="6543213">NewDecoder</span><span class="op" id="6543223">(</span><span class="ident" id="6543224">b</span><span class="op" id="6543225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543228">err2</span>&nbsp;<span class="op" id="6543233">:=</span>&nbsp;<span class="ident" id="6543236">fmt</span><span class="op" id="6543239">.</span><span class="ident" id="6543240">Errorf</span><span class="op" id="6543246">(</span><span class="string" id="6543247">&#34;foo&#34;</span><span class="op" id="6543252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543255">err</span>&nbsp;<span class="op" id="6543259">=</span>&nbsp;<span class="ident" id="6543261">dec</span><span class="op" id="6543264">.</span><span class="ident" id="6543265">Decode</span><span class="op" id="6543271">(</span><span class="op" id="6543272">&amp;</span><span class="ident" id="6543273">err2</span><span class="op" id="6543277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543280">if</span>&nbsp;<span class="ident" id="6543283">err</span>&nbsp;<span class="op" id="6543287">!=</span>&nbsp;<span class="builtintype" id="6543290">nil</span>&nbsp;<span class="op" id="6543294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543298">t</span><span class="op" id="6543299">.</span><span class="ident" id="6543300">Fatal</span><span class="op" id="6543305">(</span><span class="string" id="6543306">&#34;decode:&#34;</span><span class="op" id="6543315">,</span>&nbsp;<span class="ident" id="6543317">err</span><span class="op" id="6543320">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543326">if</span>&nbsp;<span class="ident" id="6543329">err2</span>&nbsp;<span class="op" id="6543334">!=</span>&nbsp;<span class="builtintype" id="6543337">nil</span>&nbsp;<span class="op" id="6543341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543345">t</span><span class="op" id="6543346">.</span><span class="ident" id="6543347">Fatalf</span><span class="op" id="6543353">(</span><span class="string" id="6543354">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="6543376">,</span>&nbsp;<span class="ident" id="6543378">err2</span><span class="op" id="6543382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543385">}</span><br>
<span class="lineno"></span><span class="op" id="6543387">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="6543390">func</span>&nbsp;<span class="ident" id="6543395">TestNetIP</span><span class="op" id="6543404">(</span><span class="ident" id="6543405">t</span>&nbsp;<span class="op" id="6543407">*</span><span class="ident" id="6543408">testing</span><span class="op" id="6543415">.</span><span class="ident" id="6543416">T</span><span class="op" id="6543417">)</span>&nbsp;<span class="op" id="6543419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6543422">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543465">enc</span>&nbsp;<span class="op" id="6543469">:=</span>&nbsp;<span class="op" id="6543472">[</span><span class="op" id="6543473">]</span><span class="builtintype" id="6543474">byte</span><span class="op" id="6543478">{</span><span class="num" id="6543479">0x07</span><span class="op" id="6543483">,</span>&nbsp;<span class="num" id="6543485">0x0a</span><span class="op" id="6543489">,</span>&nbsp;<span class="num" id="6543491">0x00</span><span class="op" id="6543495">,</span>&nbsp;<span class="num" id="6543497">0x04</span><span class="op" id="6543501">,</span>&nbsp;<span class="num" id="6543503">0x01</span><span class="op" id="6543507">,</span>&nbsp;<span class="num" id="6543509">0x02</span><span class="op" id="6543513">,</span>&nbsp;<span class="num" id="6543515">0x03</span><span class="op" id="6543519">,</span>&nbsp;<span class="num" id="6543521">0x04</span><span class="op" id="6543525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543529">var</span>&nbsp;<span class="ident" id="6543533">ip</span>&nbsp;<span class="ident" id="6543536">net</span><span class="op" id="6543539">.</span><span class="ident" id="6543540">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543544">err</span>&nbsp;<span class="op" id="6543548">:=</span>&nbsp;<span class="ident" id="6543551">NewDecoder</span><span class="op" id="6543561">(</span><span class="ident" id="6543562">bytes</span><span class="op" id="6543567">.</span><span class="ident" id="6543568">NewReader</span><span class="op" id="6543577">(</span><span class="ident" id="6543578">enc</span><span class="op" id="6543581">)</span><span class="op" id="6543582">)</span><span class="op" id="6543583">.</span><span class="ident" id="6543584">Decode</span><span class="op" id="6543590">(</span><span class="op" id="6543591">&amp;</span><span class="ident" id="6543592">ip</span><span class="op" id="6543594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543597">if</span>&nbsp;<span class="ident" id="6543600">err</span>&nbsp;<span class="op" id="6543604">!=</span>&nbsp;<span class="builtintype" id="6543607">nil</span>&nbsp;<span class="op" id="6543611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543615">t</span><span class="op" id="6543616">.</span><span class="ident" id="6543617">Fatalf</span><span class="op" id="6543623">(</span><span class="string" id="6543624">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="6543636">,</span>&nbsp;<span class="ident" id="6543638">err</span><span class="op" id="6543641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543644">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6543647">if</span>&nbsp;<span class="ident" id="6543650">ip</span><span class="op" id="6543652">.</span><span class="ident" id="6543653">String</span><span class="op" id="6543659">(</span><span class="op" id="6543660">)</span>&nbsp;<span class="op" id="6543662">!=</span>&nbsp;<span class="string" id="6543665">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="6543675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6543679">t</span><span class="op" id="6543680">.</span><span class="ident" id="6543681">Errorf</span><span class="op" id="6543687">(</span><span class="string" id="6543688">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="6543717">,</span>&nbsp;<span class="ident" id="6543719">ip</span><span class="op" id="6543721">.</span><span class="ident" id="6543722">String</span><span class="op" id="6543728">(</span><span class="op" id="6543729">)</span><span class="op" id="6543730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6543733">}</span><br>
<span class="lineno"></span><span class="op" id="6543735">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
