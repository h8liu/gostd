<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6552371">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6552427">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6552481">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6552532">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6552611">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6552620">package</span>&nbsp;<span class="ident" id="6552628">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6552633">import</span>&nbsp;<span class="op" id="6552640">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6552643">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6552649">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6552660">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6552671">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6552678">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6552681">var</span>&nbsp;<span class="ident" id="6552685">connTests</span>&nbsp;<span class="op" id="6552695">=</span>&nbsp;<span class="op" id="6552697">[</span><span class="op" id="6552698">]</span><span class="keyword" id="6552699">struct</span>&nbsp;<span class="op" id="6552706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6552709">net</span>&nbsp;&nbsp;<span class="builtintype" id="6552714">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6552722">addr</span>&nbsp;<span class="builtintype" id="6552727">string</span><br>
<span class="lineno">20</span><span class="op" id="6552734">}</span><span class="op" id="6552735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6552738">{</span><span class="string" id="6552739">&#34;tcp&#34;</span><span class="op" id="6552744">,</span>&nbsp;<span class="string" id="6552746">&#34;127.0.0.1:0&#34;</span><span class="op" id="6552759">}</span><span class="op" id="6552760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6552763">{</span><span class="string" id="6552764">&#34;unix&#34;</span><span class="op" id="6552770">,</span>&nbsp;<span class="ident" id="6552772">testUnixAddr</span><span class="op" id="6552784">(</span><span class="op" id="6552785">)</span><span class="op" id="6552786">}</span><span class="op" id="6552787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6552790">{</span><span class="string" id="6552791">&#34;unixpacket&#34;</span><span class="op" id="6552803">,</span>&nbsp;<span class="ident" id="6552805">testUnixAddr</span><span class="op" id="6552817">(</span><span class="op" id="6552818">)</span><span class="op" id="6552819">}</span><span class="op" id="6552820">,</span><br>
<span class="lineno"></span><span class="op" id="6552822">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6552825">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6552891">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6552954">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6553002">const</span>&nbsp;<span class="ident" id="6553008">someTimeout</span>&nbsp;<span class="op" id="6553020">=</span>&nbsp;<span class="num" id="6553022">10</span>&nbsp;<span class="op" id="6553025">*</span>&nbsp;<span class="ident" id="6553027">time</span><span class="op" id="6553031">.</span><span class="ident" id="6553032">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6553040">func</span>&nbsp;<span class="ident" id="6553045">TestConnAndListener</span><span class="op" id="6553064">(</span><span class="ident" id="6553065">t</span>&nbsp;<span class="op" id="6553067">*</span><span class="ident" id="6553068">testing</span><span class="op" id="6553075">.</span><span class="ident" id="6553076">T</span><span class="op" id="6553077">)</span>&nbsp;<span class="op" id="6553079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553082">for</span>&nbsp;<span class="ident" id="6553086">_</span><span class="op" id="6553087">,</span>&nbsp;<span class="ident" id="6553089">tt</span>&nbsp;<span class="op" id="6553092">:=</span>&nbsp;<span class="keyword" id="6553095">range</span>&nbsp;<span class="ident" id="6553101">connTests</span>&nbsp;<span class="op" id="6553111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553115">switch</span>&nbsp;<span class="ident" id="6553122">tt</span><span class="op" id="6553124">.</span><span class="ident" id="6553125">net</span>&nbsp;<span class="op" id="6553129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553133">case</span>&nbsp;<span class="string" id="6553138">&#34;unix&#34;</span><span class="op" id="6553144">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553149">switch</span>&nbsp;<span class="ident" id="6553156">runtime</span><span class="op" id="6553163">.</span><span class="ident" id="6553164">GOOS</span>&nbsp;<span class="op" id="6553169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553174">case</span>&nbsp;<span class="string" id="6553179">&#34;nacl&#34;</span><span class="op" id="6553185">,</span>&nbsp;<span class="string" id="6553187">&#34;plan9&#34;</span><span class="op" id="6553194">,</span>&nbsp;<span class="string" id="6553196">&#34;windows&#34;</span><span class="op" id="6553205">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553211">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553227">case</span>&nbsp;<span class="string" id="6553232">&#34;unixpacket&#34;</span><span class="op" id="6553244">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553249">switch</span>&nbsp;<span class="ident" id="6553256">runtime</span><span class="op" id="6553263">.</span><span class="ident" id="6553264">GOOS</span>&nbsp;<span class="op" id="6553269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553274">case</span>&nbsp;<span class="string" id="6553279">&#34;android&#34;</span><span class="op" id="6553288">,</span>&nbsp;<span class="string" id="6553290">&#34;darwin&#34;</span><span class="op" id="6553298">,</span>&nbsp;<span class="string" id="6553300">&#34;nacl&#34;</span><span class="op" id="6553306">,</span>&nbsp;<span class="string" id="6553308">&#34;openbsd&#34;</span><span class="op" id="6553317">,</span>&nbsp;<span class="string" id="6553319">&#34;plan9&#34;</span><span class="op" id="6553326">,</span>&nbsp;<span class="string" id="6553328">&#34;windows&#34;</span><span class="op" id="6553337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553343">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553355">case</span>&nbsp;<span class="string" id="6553360">&#34;freebsd&#34;</span><span class="op" id="6553369">:</span>&nbsp;<span class="comment" id="6553371">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553415">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553436">ln</span><span class="op" id="6553438">,</span>&nbsp;<span class="ident" id="6553440">err</span>&nbsp;<span class="op" id="6553444">:=</span>&nbsp;<span class="ident" id="6553447">Listen</span><span class="op" id="6553453">(</span><span class="ident" id="6553454">tt</span><span class="op" id="6553456">.</span><span class="ident" id="6553457">net</span><span class="op" id="6553460">,</span>&nbsp;<span class="ident" id="6553462">tt</span><span class="op" id="6553464">.</span><span class="ident" id="6553465">addr</span><span class="op" id="6553469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553473">if</span>&nbsp;<span class="ident" id="6553476">err</span>&nbsp;<span class="op" id="6553480">!=</span>&nbsp;<span class="ident" id="6553483">nil</span>&nbsp;<span class="op" id="6553487">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553492">t</span><span class="op" id="6553493">.</span><span class="ident" id="6553494">Fatalf</span><span class="op" id="6553500">(</span><span class="string" id="6553501">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6553520">,</span>&nbsp;<span class="ident" id="6553522">err</span><span class="op" id="6553525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553533">defer</span>&nbsp;<span class="keyword" id="6553539">func</span><span class="op" id="6553543">(</span><span class="ident" id="6553544">ln</span>&nbsp;<span class="ident" id="6553547">Listener</span><span class="op" id="6553555">,</span>&nbsp;<span class="ident" id="6553557">net</span><span class="op" id="6553560">,</span>&nbsp;<span class="ident" id="6553562">addr</span>&nbsp;<span class="builtintype" id="6553567">string</span><span class="op" id="6553573">)</span>&nbsp;<span class="op" id="6553575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553580">ln</span><span class="op" id="6553582">.</span><span class="ident" id="6553583">Close</span><span class="op" id="6553588">(</span><span class="op" id="6553589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553594">switch</span>&nbsp;<span class="ident" id="6553601">net</span>&nbsp;<span class="op" id="6553605">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553610">case</span>&nbsp;<span class="string" id="6553615">&#34;unix&#34;</span><span class="op" id="6553621">,</span>&nbsp;<span class="string" id="6553623">&#34;unixpacket&#34;</span><span class="op" id="6553635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553641">os</span><span class="op" id="6553643">.</span><span class="ident" id="6553644">Remove</span><span class="op" id="6553650">(</span><span class="ident" id="6553651">addr</span><span class="op" id="6553655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553664">}</span><span class="op" id="6553665">(</span><span class="ident" id="6553666">ln</span><span class="op" id="6553668">,</span>&nbsp;<span class="ident" id="6553670">tt</span><span class="op" id="6553672">.</span><span class="ident" id="6553673">net</span><span class="op" id="6553676">,</span>&nbsp;<span class="ident" id="6553678">tt</span><span class="op" id="6553680">.</span><span class="ident" id="6553681">addr</span><span class="op" id="6553685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553689">if</span>&nbsp;<span class="ident" id="6553692">ln</span><span class="op" id="6553694">.</span><span class="ident" id="6553695">Addr</span><span class="op" id="6553699">(</span><span class="op" id="6553700">)</span><span class="op" id="6553701">.</span><span class="ident" id="6553702">Network</span><span class="op" id="6553709">(</span><span class="op" id="6553710">)</span>&nbsp;<span class="op" id="6553712">!=</span>&nbsp;<span class="ident" id="6553715">tt</span><span class="op" id="6553717">.</span><span class="ident" id="6553718">net</span>&nbsp;<span class="op" id="6553722">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553727">t</span><span class="op" id="6553728">.</span><span class="ident" id="6553729">Fatalf</span><span class="op" id="6553735">(</span><span class="string" id="6553736">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6553757">,</span>&nbsp;<span class="ident" id="6553759">ln</span><span class="op" id="6553761">.</span><span class="ident" id="6553762">Addr</span><span class="op" id="6553766">(</span><span class="op" id="6553767">)</span><span class="op" id="6553768">.</span><span class="ident" id="6553769">Network</span><span class="op" id="6553776">(</span><span class="op" id="6553777">)</span><span class="op" id="6553778">,</span>&nbsp;<span class="ident" id="6553780">tt</span><span class="op" id="6553782">.</span><span class="ident" id="6553783">net</span><span class="op" id="6553786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553795">done</span>&nbsp;<span class="op" id="6553800">:=</span>&nbsp;<span class="builtinfunc" id="6553803">make</span><span class="op" id="6553807">(</span><span class="keyword" id="6553808">chan</span>&nbsp;<span class="builtintype" id="6553813">int</span><span class="op" id="6553816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553820">go</span>&nbsp;<span class="ident" id="6553823">transponder</span><span class="op" id="6553834">(</span><span class="ident" id="6553835">t</span><span class="op" id="6553836">,</span>&nbsp;<span class="ident" id="6553838">ln</span><span class="op" id="6553840">,</span>&nbsp;<span class="ident" id="6553842">done</span><span class="op" id="6553846">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553851">c</span><span class="op" id="6553852">,</span>&nbsp;<span class="ident" id="6553854">err</span>&nbsp;<span class="op" id="6553858">:=</span>&nbsp;<span class="ident" id="6553861">Dial</span><span class="op" id="6553865">(</span><span class="ident" id="6553866">tt</span><span class="op" id="6553868">.</span><span class="ident" id="6553869">net</span><span class="op" id="6553872">,</span>&nbsp;<span class="ident" id="6553874">ln</span><span class="op" id="6553876">.</span><span class="ident" id="6553877">Addr</span><span class="op" id="6553881">(</span><span class="op" id="6553882">)</span><span class="op" id="6553883">.</span><span class="ident" id="6553884">String</span><span class="op" id="6553890">(</span><span class="op" id="6553891">)</span><span class="op" id="6553892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553896">if</span>&nbsp;<span class="ident" id="6553899">err</span>&nbsp;<span class="op" id="6553903">!=</span>&nbsp;<span class="ident" id="6553906">nil</span>&nbsp;<span class="op" id="6553910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6553915">t</span><span class="op" id="6553916">.</span><span class="ident" id="6553917">Fatalf</span><span class="op" id="6553923">(</span><span class="string" id="6553924">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6553941">,</span>&nbsp;<span class="ident" id="6553943">err</span><span class="op" id="6553946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6553950">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553954">defer</span>&nbsp;<span class="ident" id="6553960">c</span><span class="op" id="6553961">.</span><span class="ident" id="6553962">Close</span><span class="op" id="6553967">(</span><span class="op" id="6553968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6553972">if</span>&nbsp;<span class="ident" id="6553975">c</span><span class="op" id="6553976">.</span><span class="ident" id="6553977">LocalAddr</span><span class="op" id="6553986">(</span><span class="op" id="6553987">)</span><span class="op" id="6553988">.</span><span class="ident" id="6553989">Network</span><span class="op" id="6553996">(</span><span class="op" id="6553997">)</span>&nbsp;<span class="op" id="6553999">!=</span>&nbsp;<span class="ident" id="6554002">tt</span><span class="op" id="6554004">.</span><span class="ident" id="6554005">net</span>&nbsp;<span class="op" id="6554009">||</span>&nbsp;<span class="ident" id="6554012">c</span><span class="op" id="6554013">.</span><span class="ident" id="6554014">LocalAddr</span><span class="op" id="6554023">(</span><span class="op" id="6554024">)</span><span class="op" id="6554025">.</span><span class="ident" id="6554026">Network</span><span class="op" id="6554033">(</span><span class="op" id="6554034">)</span>&nbsp;<span class="op" id="6554036">!=</span>&nbsp;<span class="ident" id="6554039">tt</span><span class="op" id="6554041">.</span><span class="ident" id="6554042">net</span>&nbsp;<span class="op" id="6554046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554051">t</span><span class="op" id="6554052">.</span><span class="ident" id="6554053">Fatalf</span><span class="op" id="6554059">(</span><span class="string" id="6554060">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6554089">,</span>&nbsp;<span class="ident" id="6554091">c</span><span class="op" id="6554092">.</span><span class="ident" id="6554093">LocalAddr</span><span class="op" id="6554102">(</span><span class="op" id="6554103">)</span><span class="op" id="6554104">.</span><span class="ident" id="6554105">Network</span><span class="op" id="6554112">(</span><span class="op" id="6554113">)</span><span class="op" id="6554114">,</span>&nbsp;<span class="ident" id="6554116">c</span><span class="op" id="6554117">.</span><span class="ident" id="6554118">RemoteAddr</span><span class="op" id="6554128">(</span><span class="op" id="6554129">)</span><span class="op" id="6554130">.</span><span class="ident" id="6554131">Network</span><span class="op" id="6554138">(</span><span class="op" id="6554139">)</span><span class="op" id="6554140">,</span>&nbsp;<span class="ident" id="6554142">tt</span><span class="op" id="6554144">.</span><span class="ident" id="6554145">net</span><span class="op" id="6554148">,</span>&nbsp;<span class="ident" id="6554150">tt</span><span class="op" id="6554152">.</span><span class="ident" id="6554153">net</span><span class="op" id="6554156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554164">c</span><span class="op" id="6554165">.</span><span class="ident" id="6554166">SetDeadline</span><span class="op" id="6554177">(</span><span class="ident" id="6554178">time</span><span class="op" id="6554182">.</span><span class="ident" id="6554183">Now</span><span class="op" id="6554186">(</span><span class="op" id="6554187">)</span><span class="op" id="6554188">.</span><span class="ident" id="6554189">Add</span><span class="op" id="6554192">(</span><span class="ident" id="6554193">someTimeout</span><span class="op" id="6554204">)</span><span class="op" id="6554205">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554209">c</span><span class="op" id="6554210">.</span><span class="ident" id="6554211">SetReadDeadline</span><span class="op" id="6554226">(</span><span class="ident" id="6554227">time</span><span class="op" id="6554231">.</span><span class="ident" id="6554232">Now</span><span class="op" id="6554235">(</span><span class="op" id="6554236">)</span><span class="op" id="6554237">.</span><span class="ident" id="6554238">Add</span><span class="op" id="6554241">(</span><span class="ident" id="6554242">someTimeout</span><span class="op" id="6554253">)</span><span class="op" id="6554254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554258">c</span><span class="op" id="6554259">.</span><span class="ident" id="6554260">SetWriteDeadline</span><span class="op" id="6554276">(</span><span class="ident" id="6554277">time</span><span class="op" id="6554281">.</span><span class="ident" id="6554282">Now</span><span class="op" id="6554285">(</span><span class="op" id="6554286">)</span><span class="op" id="6554287">.</span><span class="ident" id="6554288">Add</span><span class="op" id="6554291">(</span><span class="ident" id="6554292">someTimeout</span><span class="op" id="6554303">)</span><span class="op" id="6554304">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554309">if</span>&nbsp;<span class="ident" id="6554312">_</span><span class="op" id="6554313">,</span>&nbsp;<span class="ident" id="6554315">err</span>&nbsp;<span class="op" id="6554319">:=</span>&nbsp;<span class="ident" id="6554322">c</span><span class="op" id="6554323">.</span><span class="ident" id="6554324">Write</span><span class="op" id="6554329">(</span><span class="op" id="6554330">[</span><span class="op" id="6554331">]</span><span class="builtintype" id="6554332">byte</span><span class="op" id="6554336">(</span><span class="string" id="6554337">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6554348">)</span><span class="op" id="6554349">)</span><span class="op" id="6554350">;</span>&nbsp;<span class="ident" id="6554352">err</span>&nbsp;<span class="op" id="6554356">!=</span>&nbsp;<span class="ident" id="6554359">nil</span>&nbsp;<span class="op" id="6554363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554368">t</span><span class="op" id="6554369">.</span><span class="ident" id="6554370">Fatalf</span><span class="op" id="6554376">(</span><span class="string" id="6554377">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6554400">,</span>&nbsp;<span class="ident" id="6554402">err</span><span class="op" id="6554405">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554413">rb</span>&nbsp;<span class="op" id="6554416">:=</span>&nbsp;<span class="builtinfunc" id="6554419">make</span><span class="op" id="6554423">(</span><span class="op" id="6554424">[</span><span class="op" id="6554425">]</span><span class="builtintype" id="6554426">byte</span><span class="op" id="6554430">,</span>&nbsp;<span class="num" id="6554432">128</span><span class="op" id="6554435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554439">if</span>&nbsp;<span class="ident" id="6554442">_</span><span class="op" id="6554443">,</span>&nbsp;<span class="ident" id="6554445">err</span>&nbsp;<span class="op" id="6554449">:=</span>&nbsp;<span class="ident" id="6554452">c</span><span class="op" id="6554453">.</span><span class="ident" id="6554454">Read</span><span class="op" id="6554458">(</span><span class="ident" id="6554459">rb</span><span class="op" id="6554461">)</span><span class="op" id="6554462">;</span>&nbsp;<span class="ident" id="6554464">err</span>&nbsp;<span class="op" id="6554468">!=</span>&nbsp;<span class="ident" id="6554471">nil</span>&nbsp;<span class="op" id="6554475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554480">t</span><span class="op" id="6554481">.</span><span class="ident" id="6554482">Fatalf</span><span class="op" id="6554488">(</span><span class="string" id="6554489">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6554511">,</span>&nbsp;<span class="ident" id="6554513">err</span><span class="op" id="6554516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554520">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554525">&lt;-</span><span class="ident" id="6554527">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554533">}</span><br>
<span class="lineno"></span><span class="op" id="6554535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6554538">func</span>&nbsp;<span class="ident" id="6554543">transponder</span><span class="op" id="6554554">(</span><span class="ident" id="6554555">t</span>&nbsp;<span class="op" id="6554557">*</span><span class="ident" id="6554558">testing</span><span class="op" id="6554565">.</span><span class="ident" id="6554566">T</span><span class="op" id="6554567">,</span>&nbsp;<span class="ident" id="6554569">ln</span>&nbsp;<span class="ident" id="6554572">Listener</span><span class="op" id="6554580">,</span>&nbsp;<span class="ident" id="6554582">done</span>&nbsp;<span class="keyword" id="6554587">chan</span><span class="op" id="6554591">&lt;-</span>&nbsp;<span class="builtintype" id="6554594">int</span><span class="op" id="6554597">)</span>&nbsp;<span class="op" id="6554599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554602">defer</span>&nbsp;<span class="keyword" id="6554608">func</span><span class="op" id="6554612">(</span><span class="op" id="6554613">)</span>&nbsp;<span class="op" id="6554615">{</span>&nbsp;<span class="ident" id="6554617">done</span>&nbsp;<span class="op" id="6554622">&lt;-</span>&nbsp;<span class="num" id="6554625">1</span>&nbsp;<span class="op" id="6554627">}</span><span class="op" id="6554628">(</span><span class="op" id="6554629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554633">switch</span>&nbsp;<span class="ident" id="6554640">ln</span>&nbsp;<span class="op" id="6554643">:=</span>&nbsp;<span class="ident" id="6554646">ln</span><span class="op" id="6554648">.</span><span class="op" id="6554649">(</span><span class="keyword" id="6554650">type</span><span class="op" id="6554654">)</span>&nbsp;<span class="op" id="6554656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554659">case</span>&nbsp;<span class="op" id="6554664">*</span><span class="ident" id="6554665">TCPListener</span><span class="op" id="6554676">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554680">ln</span><span class="op" id="6554682">.</span><span class="ident" id="6554683">SetDeadline</span><span class="op" id="6554694">(</span><span class="ident" id="6554695">time</span><span class="op" id="6554699">.</span><span class="ident" id="6554700">Now</span><span class="op" id="6554703">(</span><span class="op" id="6554704">)</span><span class="op" id="6554705">.</span><span class="ident" id="6554706">Add</span><span class="op" id="6554709">(</span><span class="ident" id="6554710">someTimeout</span><span class="op" id="6554721">)</span><span class="op" id="6554722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554725">case</span>&nbsp;<span class="op" id="6554730">*</span><span class="ident" id="6554731">UnixListener</span><span class="op" id="6554743">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554747">ln</span><span class="op" id="6554749">.</span><span class="ident" id="6554750">SetDeadline</span><span class="op" id="6554761">(</span><span class="ident" id="6554762">time</span><span class="op" id="6554766">.</span><span class="ident" id="6554767">Now</span><span class="op" id="6554770">(</span><span class="op" id="6554771">)</span><span class="op" id="6554772">.</span><span class="ident" id="6554773">Add</span><span class="op" id="6554776">(</span><span class="ident" id="6554777">someTimeout</span><span class="op" id="6554788">)</span><span class="op" id="6554789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554795">c</span><span class="op" id="6554796">,</span>&nbsp;<span class="ident" id="6554798">err</span>&nbsp;<span class="op" id="6554802">:=</span>&nbsp;<span class="ident" id="6554805">ln</span><span class="op" id="6554807">.</span><span class="ident" id="6554808">Accept</span><span class="op" id="6554814">(</span><span class="op" id="6554815">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554818">if</span>&nbsp;<span class="ident" id="6554821">err</span>&nbsp;<span class="op" id="6554825">!=</span>&nbsp;<span class="ident" id="6554828">nil</span>&nbsp;<span class="op" id="6554832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554836">t</span><span class="op" id="6554837">.</span><span class="ident" id="6554838">Errorf</span><span class="op" id="6554844">(</span><span class="string" id="6554845">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6554873">,</span>&nbsp;<span class="ident" id="6554875">err</span><span class="op" id="6554878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554882">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6554890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554893">defer</span>&nbsp;<span class="ident" id="6554899">c</span><span class="op" id="6554900">.</span><span class="ident" id="6554901">Close</span><span class="op" id="6554906">(</span><span class="op" id="6554907">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6554910">network</span>&nbsp;<span class="op" id="6554918">:=</span>&nbsp;<span class="ident" id="6554921">ln</span><span class="op" id="6554923">.</span><span class="ident" id="6554924">Addr</span><span class="op" id="6554928">(</span><span class="op" id="6554929">)</span><span class="op" id="6554930">.</span><span class="ident" id="6554931">Network</span><span class="op" id="6554938">(</span><span class="op" id="6554939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6554942">if</span>&nbsp;<span class="ident" id="6554945">c</span><span class="op" id="6554946">.</span><span class="ident" id="6554947">LocalAddr</span><span class="op" id="6554956">(</span><span class="op" id="6554957">)</span><span class="op" id="6554958">.</span><span class="ident" id="6554959">Network</span><span class="op" id="6554966">(</span><span class="op" id="6554967">)</span>&nbsp;<span class="op" id="6554969">!=</span>&nbsp;<span class="ident" id="6554972">network</span>&nbsp;<span class="op" id="6554980">||</span>&nbsp;<span class="ident" id="6554983">c</span><span class="op" id="6554984">.</span><span class="ident" id="6554985">LocalAddr</span><span class="op" id="6554994">(</span><span class="op" id="6554995">)</span><span class="op" id="6554996">.</span><span class="ident" id="6554997">Network</span><span class="op" id="6555004">(</span><span class="op" id="6555005">)</span>&nbsp;<span class="op" id="6555007">!=</span>&nbsp;<span class="ident" id="6555010">network</span>&nbsp;<span class="op" id="6555018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555022">t</span><span class="op" id="6555023">.</span><span class="ident" id="6555024">Errorf</span><span class="op" id="6555030">(</span><span class="string" id="6555031">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6555060">,</span>&nbsp;<span class="ident" id="6555062">c</span><span class="op" id="6555063">.</span><span class="ident" id="6555064">LocalAddr</span><span class="op" id="6555073">(</span><span class="op" id="6555074">)</span><span class="op" id="6555075">.</span><span class="ident" id="6555076">Network</span><span class="op" id="6555083">(</span><span class="op" id="6555084">)</span><span class="op" id="6555085">,</span>&nbsp;<span class="ident" id="6555087">c</span><span class="op" id="6555088">.</span><span class="ident" id="6555089">RemoteAddr</span><span class="op" id="6555099">(</span><span class="op" id="6555100">)</span><span class="op" id="6555101">.</span><span class="ident" id="6555102">Network</span><span class="op" id="6555109">(</span><span class="op" id="6555110">)</span><span class="op" id="6555111">,</span>&nbsp;<span class="ident" id="6555113">network</span><span class="op" id="6555120">,</span>&nbsp;<span class="ident" id="6555122">network</span><span class="op" id="6555129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6555133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6555141">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555144">c</span><span class="op" id="6555145">.</span><span class="ident" id="6555146">SetDeadline</span><span class="op" id="6555157">(</span><span class="ident" id="6555158">time</span><span class="op" id="6555162">.</span><span class="ident" id="6555163">Now</span><span class="op" id="6555166">(</span><span class="op" id="6555167">)</span><span class="op" id="6555168">.</span><span class="ident" id="6555169">Add</span><span class="op" id="6555172">(</span><span class="ident" id="6555173">someTimeout</span><span class="op" id="6555184">)</span><span class="op" id="6555185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555188">c</span><span class="op" id="6555189">.</span><span class="ident" id="6555190">SetReadDeadline</span><span class="op" id="6555205">(</span><span class="ident" id="6555206">time</span><span class="op" id="6555210">.</span><span class="ident" id="6555211">Now</span><span class="op" id="6555214">(</span><span class="op" id="6555215">)</span><span class="op" id="6555216">.</span><span class="ident" id="6555217">Add</span><span class="op" id="6555220">(</span><span class="ident" id="6555221">someTimeout</span><span class="op" id="6555232">)</span><span class="op" id="6555233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555236">c</span><span class="op" id="6555237">.</span><span class="ident" id="6555238">SetWriteDeadline</span><span class="op" id="6555254">(</span><span class="ident" id="6555255">time</span><span class="op" id="6555259">.</span><span class="ident" id="6555260">Now</span><span class="op" id="6555263">(</span><span class="op" id="6555264">)</span><span class="op" id="6555265">.</span><span class="ident" id="6555266">Add</span><span class="op" id="6555269">(</span><span class="ident" id="6555270">someTimeout</span><span class="op" id="6555281">)</span><span class="op" id="6555282">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555286">b</span>&nbsp;<span class="op" id="6555288">:=</span>&nbsp;<span class="builtinfunc" id="6555291">make</span><span class="op" id="6555295">(</span><span class="op" id="6555296">[</span><span class="op" id="6555297">]</span><span class="builtintype" id="6555298">byte</span><span class="op" id="6555302">,</span>&nbsp;<span class="num" id="6555304">128</span><span class="op" id="6555307">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555310">n</span><span class="op" id="6555311">,</span>&nbsp;<span class="ident" id="6555313">err</span>&nbsp;<span class="op" id="6555317">:=</span>&nbsp;<span class="ident" id="6555320">c</span><span class="op" id="6555321">.</span><span class="ident" id="6555322">Read</span><span class="op" id="6555326">(</span><span class="ident" id="6555327">b</span><span class="op" id="6555328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6555331">if</span>&nbsp;<span class="ident" id="6555334">err</span>&nbsp;<span class="op" id="6555338">!=</span>&nbsp;<span class="ident" id="6555341">nil</span>&nbsp;<span class="op" id="6555345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555349">t</span><span class="op" id="6555350">.</span><span class="ident" id="6555351">Errorf</span><span class="op" id="6555357">(</span><span class="string" id="6555358">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6555380">,</span>&nbsp;<span class="ident" id="6555382">err</span><span class="op" id="6555385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6555389">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6555397">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6555400">if</span>&nbsp;<span class="ident" id="6555403">_</span><span class="op" id="6555404">,</span>&nbsp;<span class="ident" id="6555406">err</span>&nbsp;<span class="op" id="6555410">:=</span>&nbsp;<span class="ident" id="6555413">c</span><span class="op" id="6555414">.</span><span class="ident" id="6555415">Write</span><span class="op" id="6555420">(</span><span class="ident" id="6555421">b</span><span class="op" id="6555422">[</span><span class="op" id="6555423">:</span><span class="ident" id="6555424">n</span><span class="op" id="6555425">]</span><span class="op" id="6555426">)</span><span class="op" id="6555427">;</span>&nbsp;<span class="ident" id="6555429">err</span>&nbsp;<span class="op" id="6555433">!=</span>&nbsp;<span class="ident" id="6555436">nil</span>&nbsp;<span class="op" id="6555440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6555444">t</span><span class="op" id="6555445">.</span><span class="ident" id="6555446">Errorf</span><span class="op" id="6555452">(</span><span class="string" id="6555453">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6555476">,</span>&nbsp;<span class="ident" id="6555478">err</span><span class="op" id="6555481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6555485">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6555493">}</span><br>
<span class="lineno"></span><span class="op" id="6555495">}</span>
</div>
</body>
</html>
