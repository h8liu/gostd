<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html" class="current">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3142383">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3142439">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3142493">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3142544">package</span>&nbsp;<span class="ident" id="3142552">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3142560">import</span>&nbsp;<span class="op" id="3142567">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3142570">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3142576">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3142593">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3142604">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3142612">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3142619">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3142622">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="3142646">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="3142712">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3142780">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="3142806">var</span>&nbsp;<span class="ident" id="3142810">rand</span>&nbsp;<span class="builtintype" id="3142815">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="3142822">var</span>&nbsp;<span class="ident" id="3142826">randmu</span>&nbsp;<span class="ident" id="3142833">sync</span><span class="op" id="3142837">.</span><span class="ident" id="3142838">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3142845">func</span>&nbsp;<span class="ident" id="3142850">reseed</span><span class="op" id="3142856">(</span><span class="op" id="3142857">)</span>&nbsp;<span class="builtintype" id="3142859">uint32</span>&nbsp;<span class="op" id="3142866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3142869">return</span>&nbsp;<span class="builtintype" id="3142876">uint32</span><span class="op" id="3142882">(</span><span class="ident" id="3142883">time</span><span class="op" id="3142887">.</span><span class="ident" id="3142888">Now</span><span class="op" id="3142891">(</span><span class="op" id="3142892">)</span><span class="op" id="3142893">.</span><span class="ident" id="3142894">UnixNano</span><span class="op" id="3142902">(</span><span class="op" id="3142903">)</span>&nbsp;<span class="op" id="3142905">+</span>&nbsp;<span class="ident" id="3142907">int64</span><span class="op" id="3142912">(</span><span class="ident" id="3142913">os</span><span class="op" id="3142915">.</span><span class="ident" id="3142916">Getpid</span><span class="op" id="3142922">(</span><span class="op" id="3142923">)</span><span class="op" id="3142924">)</span><span class="op" id="3142925">)</span><br>
<span class="lineno"></span><span class="op" id="3142927">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3142930">func</span>&nbsp;<span class="ident" id="3142935">nextSuffix</span><span class="op" id="3142945">(</span><span class="op" id="3142946">)</span>&nbsp;<span class="builtintype" id="3142948">string</span>&nbsp;<span class="op" id="3142955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3142958">randmu</span><span class="op" id="3142964">.</span><span class="ident" id="3142965">Lock</span><span class="op" id="3142969">(</span><span class="op" id="3142970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3142973">r</span>&nbsp;<span class="op" id="3142975">:=</span>&nbsp;<span class="ident" id="3142978">rand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3142984">if</span>&nbsp;<span class="ident" id="3142987">r</span>&nbsp;<span class="op" id="3142989">==</span>&nbsp;<span class="num" id="3142992">0</span>&nbsp;<span class="op" id="3142994">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3142998">r</span>&nbsp;<span class="op" id="3143000">=</span>&nbsp;<span class="ident" id="3143002">reseed</span><span class="op" id="3143008">(</span><span class="op" id="3143009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3143012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143015">r</span>&nbsp;<span class="op" id="3143017">=</span>&nbsp;<span class="ident" id="3143019">r</span><span class="op" id="3143020">*</span><span class="num" id="3143021">1664525</span>&nbsp;<span class="op" id="3143029">+</span>&nbsp;<span class="num" id="3143031">1013904223</span>&nbsp;<span class="comment" id="3143042">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143079">rand</span>&nbsp;<span class="op" id="3143084">=</span>&nbsp;<span class="ident" id="3143086">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143089">randmu</span><span class="op" id="3143095">.</span><span class="ident" id="3143096">Unlock</span><span class="op" id="3143102">(</span><span class="op" id="3143103">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3143106">return</span>&nbsp;<span class="ident" id="3143113">strconv</span><span class="op" id="3143120">.</span><span class="ident" id="3143121">Itoa</span><span class="op" id="3143125">(</span><span class="builtintype" id="3143126">int</span><span class="op" id="3143129">(</span><span class="num" id="3143130">1e9</span>&nbsp;<span class="op" id="3143134">+</span>&nbsp;<span class="ident" id="3143136">r</span><span class="op" id="3143137">%</span><span class="num" id="3143138">1e9</span><span class="op" id="3143141">)</span><span class="op" id="3143142">)</span><span class="op" id="3143143">[</span><span class="num" id="3143144">1</span><span class="op" id="3143145">:</span><span class="op" id="3143146">]</span><br>
<span class="lineno"></span><span class="op" id="3143148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3143151">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3143213">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="3143278">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="3143330">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="3143397">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3143438">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3143491">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="3143554">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3143626">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3143671">func</span>&nbsp;<span class="ident" id="3143676">TempFile</span><span class="op" id="3143684">(</span><span class="ident" id="3143685">dir</span><span class="op" id="3143688">,</span>&nbsp;<span class="ident" id="3143690">prefix</span>&nbsp;<span class="builtintype" id="3143697">string</span><span class="op" id="3143703">)</span>&nbsp;<span class="op" id="3143705">(</span><span class="ident" id="3143706">f</span>&nbsp;<span class="op" id="3143708">*</span><span class="ident" id="3143709">os</span><span class="op" id="3143711">.</span><span class="ident" id="3143712">File</span><span class="op" id="3143716">,</span>&nbsp;<span class="ident" id="3143718">err</span>&nbsp;<span class="builtintype" id="3143722">error</span><span class="op" id="3143727">)</span>&nbsp;<span class="op" id="3143729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3143732">if</span>&nbsp;<span class="ident" id="3143735">dir</span>&nbsp;<span class="op" id="3143739">==</span>&nbsp;<span class="string" id="3143742">&#34;&#34;</span>&nbsp;<span class="op" id="3143745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143749">dir</span>&nbsp;<span class="op" id="3143753">=</span>&nbsp;<span class="ident" id="3143755">os</span><span class="op" id="3143757">.</span><span class="ident" id="3143758">TempDir</span><span class="op" id="3143765">(</span><span class="op" id="3143766">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3143769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143773">nconflict</span>&nbsp;<span class="op" id="3143783">:=</span>&nbsp;<span class="num" id="3143786">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3143789">for</span>&nbsp;<span class="ident" id="3143793">i</span>&nbsp;<span class="op" id="3143795">:=</span>&nbsp;<span class="num" id="3143798">0</span><span class="op" id="3143799">;</span>&nbsp;<span class="ident" id="3143801">i</span>&nbsp;<span class="op" id="3143803">&lt;</span>&nbsp;<span class="num" id="3143805">10000</span><span class="op" id="3143810">;</span>&nbsp;<span class="ident" id="3143812">i</span><span class="op" id="3143813">++</span>&nbsp;<span class="op" id="3143816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143820">name</span>&nbsp;<span class="op" id="3143825">:=</span>&nbsp;<span class="ident" id="3143828">filepath</span><span class="op" id="3143836">.</span><span class="ident" id="3143837">Join</span><span class="op" id="3143841">(</span><span class="ident" id="3143842">dir</span><span class="op" id="3143845">,</span>&nbsp;<span class="ident" id="3143847">prefix</span><span class="op" id="3143853">+</span><span class="ident" id="3143854">nextSuffix</span><span class="op" id="3143864">(</span><span class="op" id="3143865">)</span><span class="op" id="3143866">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143870">f</span><span class="op" id="3143871">,</span>&nbsp;<span class="ident" id="3143873">err</span>&nbsp;<span class="op" id="3143877">=</span>&nbsp;<span class="ident" id="3143879">os</span><span class="op" id="3143881">.</span><span class="ident" id="3143882">OpenFile</span><span class="op" id="3143890">(</span><span class="ident" id="3143891">name</span><span class="op" id="3143895">,</span>&nbsp;<span class="ident" id="3143897">os</span><span class="op" id="3143899">.</span><span class="ident" id="3143900">O_RDWR</span><span class="op" id="3143906">|</span><span class="ident" id="3143907">os</span><span class="op" id="3143909">.</span><span class="ident" id="3143910">O_CREATE</span><span class="op" id="3143918">|</span><span class="ident" id="3143919">os</span><span class="op" id="3143921">.</span><span class="ident" id="3143922">O_EXCL</span><span class="op" id="3143928">,</span>&nbsp;<span class="num" id="3143930">0600</span><span class="op" id="3143934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3143938">if</span>&nbsp;<span class="ident" id="3143941">os</span><span class="op" id="3143943">.</span><span class="ident" id="3143944">IsExist</span><span class="op" id="3143951">(</span><span class="ident" id="3143952">err</span><span class="op" id="3143955">)</span>&nbsp;<span class="op" id="3143957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3143962">if</span>&nbsp;<span class="ident" id="3143965">nconflict</span><span class="op" id="3143974">++</span><span class="op" id="3143976">;</span>&nbsp;<span class="ident" id="3143978">nconflict</span>&nbsp;<span class="op" id="3143988">&gt;</span>&nbsp;<span class="num" id="3143990">10</span>&nbsp;<span class="op" id="3143993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3143999">rand</span>&nbsp;<span class="op" id="3144004">=</span>&nbsp;<span class="ident" id="3144006">reseed</span><span class="op" id="3144012">(</span><span class="op" id="3144013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144018">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144023">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144038">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144048">return</span><br>
<span class="lineno">65</span><span class="op" id="3144055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3144058">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3144124">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3144189">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3144253">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="3144312">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="3144364">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="3144438">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3144488">func</span>&nbsp;<span class="ident" id="3144493">TempDir</span><span class="op" id="3144500">(</span><span class="ident" id="3144501">dir</span><span class="op" id="3144504">,</span>&nbsp;<span class="ident" id="3144506">prefix</span>&nbsp;<span class="builtintype" id="3144513">string</span><span class="op" id="3144519">)</span>&nbsp;<span class="op" id="3144521">(</span><span class="ident" id="3144522">name</span>&nbsp;<span class="builtintype" id="3144527">string</span><span class="op" id="3144533">,</span>&nbsp;<span class="ident" id="3144535">err</span>&nbsp;<span class="builtintype" id="3144539">error</span><span class="op" id="3144544">)</span>&nbsp;<span class="op" id="3144546">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144549">if</span>&nbsp;<span class="ident" id="3144552">dir</span>&nbsp;<span class="op" id="3144556">==</span>&nbsp;<span class="string" id="3144559">&#34;&#34;</span>&nbsp;<span class="op" id="3144562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144566">dir</span>&nbsp;<span class="op" id="3144570">=</span>&nbsp;<span class="ident" id="3144572">os</span><span class="op" id="3144574">.</span><span class="ident" id="3144575">TempDir</span><span class="op" id="3144582">(</span><span class="op" id="3144583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144590">nconflict</span>&nbsp;<span class="op" id="3144600">:=</span>&nbsp;<span class="num" id="3144603">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144606">for</span>&nbsp;<span class="ident" id="3144610">i</span>&nbsp;<span class="op" id="3144612">:=</span>&nbsp;<span class="num" id="3144615">0</span><span class="op" id="3144616">;</span>&nbsp;<span class="ident" id="3144618">i</span>&nbsp;<span class="op" id="3144620">&lt;</span>&nbsp;<span class="num" id="3144622">10000</span><span class="op" id="3144627">;</span>&nbsp;<span class="ident" id="3144629">i</span><span class="op" id="3144630">++</span>&nbsp;<span class="op" id="3144633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144637">try</span>&nbsp;<span class="op" id="3144641">:=</span>&nbsp;<span class="ident" id="3144644">filepath</span><span class="op" id="3144652">.</span><span class="ident" id="3144653">Join</span><span class="op" id="3144657">(</span><span class="ident" id="3144658">dir</span><span class="op" id="3144661">,</span>&nbsp;<span class="ident" id="3144663">prefix</span><span class="op" id="3144669">+</span><span class="ident" id="3144670">nextSuffix</span><span class="op" id="3144680">(</span><span class="op" id="3144681">)</span><span class="op" id="3144682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144686">err</span>&nbsp;<span class="op" id="3144690">=</span>&nbsp;<span class="ident" id="3144692">os</span><span class="op" id="3144694">.</span><span class="ident" id="3144695">Mkdir</span><span class="op" id="3144700">(</span><span class="ident" id="3144701">try</span><span class="op" id="3144704">,</span>&nbsp;<span class="num" id="3144706">0700</span><span class="op" id="3144710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144714">if</span>&nbsp;<span class="ident" id="3144717">os</span><span class="op" id="3144719">.</span><span class="ident" id="3144720">IsExist</span><span class="op" id="3144727">(</span><span class="ident" id="3144728">err</span><span class="op" id="3144731">)</span>&nbsp;<span class="op" id="3144733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144738">if</span>&nbsp;<span class="ident" id="3144741">nconflict</span><span class="op" id="3144750">++</span><span class="op" id="3144752">;</span>&nbsp;<span class="ident" id="3144754">nconflict</span>&nbsp;<span class="op" id="3144764">&gt;</span>&nbsp;<span class="num" id="3144766">10</span>&nbsp;<span class="op" id="3144769">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144775">rand</span>&nbsp;<span class="op" id="3144780">=</span>&nbsp;<span class="ident" id="3144782">reseed</span><span class="op" id="3144788">(</span><span class="op" id="3144789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144799">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144814">if</span>&nbsp;<span class="ident" id="3144817">err</span>&nbsp;<span class="op" id="3144821">==</span>&nbsp;<span class="builtintype" id="3144824">nil</span>&nbsp;<span class="op" id="3144828">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3144833">name</span>&nbsp;<span class="op" id="3144838">=</span>&nbsp;<span class="ident" id="3144840">try</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144850">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3144857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3144860">return</span><br>
<span class="lineno">95</span><span class="op" id="3144867">}</span>
</div>
</body>
</html>
