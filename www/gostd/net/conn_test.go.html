<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html" class="current">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6630367">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6630423">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6630477">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6630528">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6630607">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6630616">package</span>&nbsp;<span class="ident" id="6630624">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6630629">import</span>&nbsp;<span class="op" id="6630636">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630639">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630645">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630656">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6630667">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6630674">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6630677">var</span>&nbsp;<span class="ident" id="6630681">connTests</span>&nbsp;<span class="op" id="6630691">=</span>&nbsp;<span class="op" id="6630693">[</span><span class="op" id="6630694">]</span><span class="keyword" id="6630695">struct</span>&nbsp;<span class="op" id="6630702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6630705">net</span>&nbsp;&nbsp;<span class="builtintype" id="6630710">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6630718">addr</span>&nbsp;<span class="builtintype" id="6630723">string</span><br>
<span class="lineno">20</span><span class="op" id="6630730">}</span><span class="op" id="6630731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630734">{</span><span class="string" id="6630735">&#34;tcp&#34;</span><span class="op" id="6630740">,</span>&nbsp;<span class="string" id="6630742">&#34;127.0.0.1:0&#34;</span><span class="op" id="6630755">}</span><span class="op" id="6630756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630759">{</span><span class="string" id="6630760">&#34;unix&#34;</span><span class="op" id="6630766">,</span>&nbsp;<span class="ident" id="6630768">testUnixAddr</span><span class="op" id="6630780">(</span><span class="op" id="6630781">)</span><span class="op" id="6630782">}</span><span class="op" id="6630783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6630786">{</span><span class="string" id="6630787">&#34;unixpacket&#34;</span><span class="op" id="6630799">,</span>&nbsp;<span class="ident" id="6630801">testUnixAddr</span><span class="op" id="6630813">(</span><span class="op" id="6630814">)</span><span class="op" id="6630815">}</span><span class="op" id="6630816">,</span><br>
<span class="lineno"></span><span class="op" id="6630818">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6630821">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6630887">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6630950">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6630998">const</span>&nbsp;<span class="ident" id="6631004">someTimeout</span>&nbsp;<span class="op" id="6631016">=</span>&nbsp;<span class="num" id="6631018">10</span>&nbsp;<span class="op" id="6631021">*</span>&nbsp;<span class="ident" id="6631023">time</span><span class="op" id="6631027">.</span><span class="ident" id="6631028">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6631036">func</span>&nbsp;<span class="ident" id="6631041">TestConnAndListener</span><span class="op" id="6631060">(</span><span class="ident" id="6631061">t</span>&nbsp;<span class="op" id="6631063">*</span><span class="ident" id="6631064">testing</span><span class="op" id="6631071">.</span><span class="ident" id="6631072">T</span><span class="op" id="6631073">)</span>&nbsp;<span class="op" id="6631075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631078">for</span>&nbsp;<span class="ident" id="6631082">_</span><span class="op" id="6631083">,</span>&nbsp;<span class="ident" id="6631085">tt</span>&nbsp;<span class="op" id="6631088">:=</span>&nbsp;<span class="keyword" id="6631091">range</span>&nbsp;<span class="ident" id="6631097">connTests</span>&nbsp;<span class="op" id="6631107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631111">switch</span>&nbsp;<span class="ident" id="6631118">tt</span><span class="op" id="6631120">.</span><span class="ident" id="6631121">net</span>&nbsp;<span class="op" id="6631125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631129">case</span>&nbsp;<span class="string" id="6631134">&#34;unix&#34;</span><span class="op" id="6631140">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631145">switch</span>&nbsp;<span class="ident" id="6631152">runtime</span><span class="op" id="6631159">.</span><span class="ident" id="6631160">GOOS</span>&nbsp;<span class="op" id="6631165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631170">case</span>&nbsp;<span class="string" id="6631175">&#34;nacl&#34;</span><span class="op" id="6631181">,</span>&nbsp;<span class="string" id="6631183">&#34;plan9&#34;</span><span class="op" id="6631190">,</span>&nbsp;<span class="string" id="6631192">&#34;windows&#34;</span><span class="op" id="6631201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631207">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631223">case</span>&nbsp;<span class="string" id="6631228">&#34;unixpacket&#34;</span><span class="op" id="6631240">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631245">switch</span>&nbsp;<span class="ident" id="6631252">runtime</span><span class="op" id="6631259">.</span><span class="ident" id="6631260">GOOS</span>&nbsp;<span class="op" id="6631265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631270">case</span>&nbsp;<span class="string" id="6631275">&#34;android&#34;</span><span class="op" id="6631284">,</span>&nbsp;<span class="string" id="6631286">&#34;darwin&#34;</span><span class="op" id="6631294">,</span>&nbsp;<span class="string" id="6631296">&#34;nacl&#34;</span><span class="op" id="6631302">,</span>&nbsp;<span class="string" id="6631304">&#34;openbsd&#34;</span><span class="op" id="6631313">,</span>&nbsp;<span class="string" id="6631315">&#34;plan9&#34;</span><span class="op" id="6631322">,</span>&nbsp;<span class="string" id="6631324">&#34;windows&#34;</span><span class="op" id="6631333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631339">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631351">case</span>&nbsp;<span class="string" id="6631356">&#34;freebsd&#34;</span><span class="op" id="6631365">:</span>&nbsp;<span class="comment" id="6631367">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631411">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631432">ln</span><span class="op" id="6631434">,</span>&nbsp;<span class="ident" id="6631436">err</span>&nbsp;<span class="op" id="6631440">:=</span>&nbsp;<span class="ident" id="6631443">Listen</span><span class="op" id="6631449">(</span><span class="ident" id="6631450">tt</span><span class="op" id="6631452">.</span><span class="ident" id="6631453">net</span><span class="op" id="6631456">,</span>&nbsp;<span class="ident" id="6631458">tt</span><span class="op" id="6631460">.</span><span class="ident" id="6631461">addr</span><span class="op" id="6631465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631469">if</span>&nbsp;<span class="ident" id="6631472">err</span>&nbsp;<span class="op" id="6631476">!=</span>&nbsp;<span class="builtintype" id="6631479">nil</span>&nbsp;<span class="op" id="6631483">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631488">t</span><span class="op" id="6631489">.</span><span class="ident" id="6631490">Fatalf</span><span class="op" id="6631496">(</span><span class="string" id="6631497">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6631516">,</span>&nbsp;<span class="ident" id="6631518">err</span><span class="op" id="6631521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631529">defer</span>&nbsp;<span class="keyword" id="6631535">func</span><span class="op" id="6631539">(</span><span class="ident" id="6631540">ln</span>&nbsp;<span class="ident" id="6631543">Listener</span><span class="op" id="6631551">,</span>&nbsp;<span class="ident" id="6631553">net</span><span class="op" id="6631556">,</span>&nbsp;<span class="ident" id="6631558">addr</span>&nbsp;<span class="builtintype" id="6631563">string</span><span class="op" id="6631569">)</span>&nbsp;<span class="op" id="6631571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631576">ln</span><span class="op" id="6631578">.</span><span class="ident" id="6631579">Close</span><span class="op" id="6631584">(</span><span class="op" id="6631585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631590">switch</span>&nbsp;<span class="ident" id="6631597">net</span>&nbsp;<span class="op" id="6631601">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631606">case</span>&nbsp;<span class="string" id="6631611">&#34;unix&#34;</span><span class="op" id="6631617">,</span>&nbsp;<span class="string" id="6631619">&#34;unixpacket&#34;</span><span class="op" id="6631631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631637">os</span><span class="op" id="6631639">.</span><span class="ident" id="6631640">Remove</span><span class="op" id="6631646">(</span><span class="ident" id="6631647">addr</span><span class="op" id="6631651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631660">}</span><span class="op" id="6631661">(</span><span class="ident" id="6631662">ln</span><span class="op" id="6631664">,</span>&nbsp;<span class="ident" id="6631666">tt</span><span class="op" id="6631668">.</span><span class="ident" id="6631669">net</span><span class="op" id="6631672">,</span>&nbsp;<span class="ident" id="6631674">tt</span><span class="op" id="6631676">.</span><span class="ident" id="6631677">addr</span><span class="op" id="6631681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631685">if</span>&nbsp;<span class="ident" id="6631688">ln</span><span class="op" id="6631690">.</span><span class="ident" id="6631691">Addr</span><span class="op" id="6631695">(</span><span class="op" id="6631696">)</span><span class="op" id="6631697">.</span><span class="ident" id="6631698">Network</span><span class="op" id="6631705">(</span><span class="op" id="6631706">)</span>&nbsp;<span class="op" id="6631708">!=</span>&nbsp;<span class="ident" id="6631711">tt</span><span class="op" id="6631713">.</span><span class="ident" id="6631714">net</span>&nbsp;<span class="op" id="6631718">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631723">t</span><span class="op" id="6631724">.</span><span class="ident" id="6631725">Fatalf</span><span class="op" id="6631731">(</span><span class="string" id="6631732">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6631753">,</span>&nbsp;<span class="ident" id="6631755">ln</span><span class="op" id="6631757">.</span><span class="ident" id="6631758">Addr</span><span class="op" id="6631762">(</span><span class="op" id="6631763">)</span><span class="op" id="6631764">.</span><span class="ident" id="6631765">Network</span><span class="op" id="6631772">(</span><span class="op" id="6631773">)</span><span class="op" id="6631774">,</span>&nbsp;<span class="ident" id="6631776">tt</span><span class="op" id="6631778">.</span><span class="ident" id="6631779">net</span><span class="op" id="6631782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631786">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631791">done</span>&nbsp;<span class="op" id="6631796">:=</span>&nbsp;<span class="builtinfunc" id="6631799">make</span><span class="op" id="6631803">(</span><span class="keyword" id="6631804">chan</span>&nbsp;<span class="builtintype" id="6631809">int</span><span class="op" id="6631812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631816">go</span>&nbsp;<span class="ident" id="6631819">transponder</span><span class="op" id="6631830">(</span><span class="ident" id="6631831">t</span><span class="op" id="6631832">,</span>&nbsp;<span class="ident" id="6631834">ln</span><span class="op" id="6631836">,</span>&nbsp;<span class="ident" id="6631838">done</span><span class="op" id="6631842">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631847">c</span><span class="op" id="6631848">,</span>&nbsp;<span class="ident" id="6631850">err</span>&nbsp;<span class="op" id="6631854">:=</span>&nbsp;<span class="ident" id="6631857">Dial</span><span class="op" id="6631861">(</span><span class="ident" id="6631862">tt</span><span class="op" id="6631864">.</span><span class="ident" id="6631865">net</span><span class="op" id="6631868">,</span>&nbsp;<span class="ident" id="6631870">ln</span><span class="op" id="6631872">.</span><span class="ident" id="6631873">Addr</span><span class="op" id="6631877">(</span><span class="op" id="6631878">)</span><span class="op" id="6631879">.</span><span class="ident" id="6631880">String</span><span class="op" id="6631886">(</span><span class="op" id="6631887">)</span><span class="op" id="6631888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631892">if</span>&nbsp;<span class="ident" id="6631895">err</span>&nbsp;<span class="op" id="6631899">!=</span>&nbsp;<span class="builtintype" id="6631902">nil</span>&nbsp;<span class="op" id="6631906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6631911">t</span><span class="op" id="6631912">.</span><span class="ident" id="6631913">Fatalf</span><span class="op" id="6631919">(</span><span class="string" id="6631920">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6631937">,</span>&nbsp;<span class="ident" id="6631939">err</span><span class="op" id="6631942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6631946">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631950">defer</span>&nbsp;<span class="ident" id="6631956">c</span><span class="op" id="6631957">.</span><span class="ident" id="6631958">Close</span><span class="op" id="6631963">(</span><span class="op" id="6631964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6631968">if</span>&nbsp;<span class="ident" id="6631971">c</span><span class="op" id="6631972">.</span><span class="ident" id="6631973">LocalAddr</span><span class="op" id="6631982">(</span><span class="op" id="6631983">)</span><span class="op" id="6631984">.</span><span class="ident" id="6631985">Network</span><span class="op" id="6631992">(</span><span class="op" id="6631993">)</span>&nbsp;<span class="op" id="6631995">!=</span>&nbsp;<span class="ident" id="6631998">tt</span><span class="op" id="6632000">.</span><span class="ident" id="6632001">net</span>&nbsp;<span class="op" id="6632005">||</span>&nbsp;<span class="ident" id="6632008">c</span><span class="op" id="6632009">.</span><span class="ident" id="6632010">LocalAddr</span><span class="op" id="6632019">(</span><span class="op" id="6632020">)</span><span class="op" id="6632021">.</span><span class="ident" id="6632022">Network</span><span class="op" id="6632029">(</span><span class="op" id="6632030">)</span>&nbsp;<span class="op" id="6632032">!=</span>&nbsp;<span class="ident" id="6632035">tt</span><span class="op" id="6632037">.</span><span class="ident" id="6632038">net</span>&nbsp;<span class="op" id="6632042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632047">t</span><span class="op" id="6632048">.</span><span class="ident" id="6632049">Fatalf</span><span class="op" id="6632055">(</span><span class="string" id="6632056">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6632085">,</span>&nbsp;<span class="ident" id="6632087">c</span><span class="op" id="6632088">.</span><span class="ident" id="6632089">LocalAddr</span><span class="op" id="6632098">(</span><span class="op" id="6632099">)</span><span class="op" id="6632100">.</span><span class="ident" id="6632101">Network</span><span class="op" id="6632108">(</span><span class="op" id="6632109">)</span><span class="op" id="6632110">,</span>&nbsp;<span class="ident" id="6632112">c</span><span class="op" id="6632113">.</span><span class="ident" id="6632114">RemoteAddr</span><span class="op" id="6632124">(</span><span class="op" id="6632125">)</span><span class="op" id="6632126">.</span><span class="ident" id="6632127">Network</span><span class="op" id="6632134">(</span><span class="op" id="6632135">)</span><span class="op" id="6632136">,</span>&nbsp;<span class="ident" id="6632138">tt</span><span class="op" id="6632140">.</span><span class="ident" id="6632141">net</span><span class="op" id="6632144">,</span>&nbsp;<span class="ident" id="6632146">tt</span><span class="op" id="6632148">.</span><span class="ident" id="6632149">net</span><span class="op" id="6632152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632160">c</span><span class="op" id="6632161">.</span><span class="ident" id="6632162">SetDeadline</span><span class="op" id="6632173">(</span><span class="ident" id="6632174">time</span><span class="op" id="6632178">.</span><span class="ident" id="6632179">Now</span><span class="op" id="6632182">(</span><span class="op" id="6632183">)</span><span class="op" id="6632184">.</span><span class="ident" id="6632185">Add</span><span class="op" id="6632188">(</span><span class="ident" id="6632189">someTimeout</span><span class="op" id="6632200">)</span><span class="op" id="6632201">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632205">c</span><span class="op" id="6632206">.</span><span class="ident" id="6632207">SetReadDeadline</span><span class="op" id="6632222">(</span><span class="ident" id="6632223">time</span><span class="op" id="6632227">.</span><span class="ident" id="6632228">Now</span><span class="op" id="6632231">(</span><span class="op" id="6632232">)</span><span class="op" id="6632233">.</span><span class="ident" id="6632234">Add</span><span class="op" id="6632237">(</span><span class="ident" id="6632238">someTimeout</span><span class="op" id="6632249">)</span><span class="op" id="6632250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632254">c</span><span class="op" id="6632255">.</span><span class="ident" id="6632256">SetWriteDeadline</span><span class="op" id="6632272">(</span><span class="ident" id="6632273">time</span><span class="op" id="6632277">.</span><span class="ident" id="6632278">Now</span><span class="op" id="6632281">(</span><span class="op" id="6632282">)</span><span class="op" id="6632283">.</span><span class="ident" id="6632284">Add</span><span class="op" id="6632287">(</span><span class="ident" id="6632288">someTimeout</span><span class="op" id="6632299">)</span><span class="op" id="6632300">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632305">if</span>&nbsp;<span class="ident" id="6632308">_</span><span class="op" id="6632309">,</span>&nbsp;<span class="ident" id="6632311">err</span>&nbsp;<span class="op" id="6632315">:=</span>&nbsp;<span class="ident" id="6632318">c</span><span class="op" id="6632319">.</span><span class="ident" id="6632320">Write</span><span class="op" id="6632325">(</span><span class="op" id="6632326">[</span><span class="op" id="6632327">]</span><span class="builtintype" id="6632328">byte</span><span class="op" id="6632332">(</span><span class="string" id="6632333">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6632344">)</span><span class="op" id="6632345">)</span><span class="op" id="6632346">;</span>&nbsp;<span class="ident" id="6632348">err</span>&nbsp;<span class="op" id="6632352">!=</span>&nbsp;<span class="builtintype" id="6632355">nil</span>&nbsp;<span class="op" id="6632359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632364">t</span><span class="op" id="6632365">.</span><span class="ident" id="6632366">Fatalf</span><span class="op" id="6632372">(</span><span class="string" id="6632373">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6632396">,</span>&nbsp;<span class="ident" id="6632398">err</span><span class="op" id="6632401">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632409">rb</span>&nbsp;<span class="op" id="6632412">:=</span>&nbsp;<span class="builtinfunc" id="6632415">make</span><span class="op" id="6632419">(</span><span class="op" id="6632420">[</span><span class="op" id="6632421">]</span><span class="builtintype" id="6632422">byte</span><span class="op" id="6632426">,</span>&nbsp;<span class="num" id="6632428">128</span><span class="op" id="6632431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632435">if</span>&nbsp;<span class="ident" id="6632438">_</span><span class="op" id="6632439">,</span>&nbsp;<span class="ident" id="6632441">err</span>&nbsp;<span class="op" id="6632445">:=</span>&nbsp;<span class="ident" id="6632448">c</span><span class="op" id="6632449">.</span><span class="ident" id="6632450">Read</span><span class="op" id="6632454">(</span><span class="ident" id="6632455">rb</span><span class="op" id="6632457">)</span><span class="op" id="6632458">;</span>&nbsp;<span class="ident" id="6632460">err</span>&nbsp;<span class="op" id="6632464">!=</span>&nbsp;<span class="builtintype" id="6632467">nil</span>&nbsp;<span class="op" id="6632471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632476">t</span><span class="op" id="6632477">.</span><span class="ident" id="6632478">Fatalf</span><span class="op" id="6632484">(</span><span class="string" id="6632485">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6632507">,</span>&nbsp;<span class="ident" id="6632509">err</span><span class="op" id="6632512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632516">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632521">&lt;-</span><span class="ident" id="6632523">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632529">}</span><br>
<span class="lineno"></span><span class="op" id="6632531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6632534">func</span>&nbsp;<span class="ident" id="6632539">transponder</span><span class="op" id="6632550">(</span><span class="ident" id="6632551">t</span>&nbsp;<span class="op" id="6632553">*</span><span class="ident" id="6632554">testing</span><span class="op" id="6632561">.</span><span class="ident" id="6632562">T</span><span class="op" id="6632563">,</span>&nbsp;<span class="ident" id="6632565">ln</span>&nbsp;<span class="ident" id="6632568">Listener</span><span class="op" id="6632576">,</span>&nbsp;<span class="ident" id="6632578">done</span>&nbsp;<span class="keyword" id="6632583">chan</span><span class="op" id="6632587">&lt;-</span>&nbsp;<span class="builtintype" id="6632590">int</span><span class="op" id="6632593">)</span>&nbsp;<span class="op" id="6632595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632598">defer</span>&nbsp;<span class="keyword" id="6632604">func</span><span class="op" id="6632608">(</span><span class="op" id="6632609">)</span>&nbsp;<span class="op" id="6632611">{</span>&nbsp;<span class="ident" id="6632613">done</span>&nbsp;<span class="op" id="6632618">&lt;-</span>&nbsp;<span class="num" id="6632621">1</span>&nbsp;<span class="op" id="6632623">}</span><span class="op" id="6632624">(</span><span class="op" id="6632625">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632629">switch</span>&nbsp;<span class="ident" id="6632636">ln</span>&nbsp;<span class="op" id="6632639">:=</span>&nbsp;<span class="ident" id="6632642">ln</span><span class="op" id="6632644">.</span><span class="op" id="6632645">(</span><span class="keyword" id="6632646">type</span><span class="op" id="6632650">)</span>&nbsp;<span class="op" id="6632652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632655">case</span>&nbsp;<span class="op" id="6632660">*</span><span class="ident" id="6632661">TCPListener</span><span class="op" id="6632672">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632676">ln</span><span class="op" id="6632678">.</span><span class="ident" id="6632679">SetDeadline</span><span class="op" id="6632690">(</span><span class="ident" id="6632691">time</span><span class="op" id="6632695">.</span><span class="ident" id="6632696">Now</span><span class="op" id="6632699">(</span><span class="op" id="6632700">)</span><span class="op" id="6632701">.</span><span class="ident" id="6632702">Add</span><span class="op" id="6632705">(</span><span class="ident" id="6632706">someTimeout</span><span class="op" id="6632717">)</span><span class="op" id="6632718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632721">case</span>&nbsp;<span class="op" id="6632726">*</span><span class="ident" id="6632727">UnixListener</span><span class="op" id="6632739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632743">ln</span><span class="op" id="6632745">.</span><span class="ident" id="6632746">SetDeadline</span><span class="op" id="6632757">(</span><span class="ident" id="6632758">time</span><span class="op" id="6632762">.</span><span class="ident" id="6632763">Now</span><span class="op" id="6632766">(</span><span class="op" id="6632767">)</span><span class="op" id="6632768">.</span><span class="ident" id="6632769">Add</span><span class="op" id="6632772">(</span><span class="ident" id="6632773">someTimeout</span><span class="op" id="6632784">)</span><span class="op" id="6632785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632791">c</span><span class="op" id="6632792">,</span>&nbsp;<span class="ident" id="6632794">err</span>&nbsp;<span class="op" id="6632798">:=</span>&nbsp;<span class="ident" id="6632801">ln</span><span class="op" id="6632803">.</span><span class="ident" id="6632804">Accept</span><span class="op" id="6632810">(</span><span class="op" id="6632811">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632814">if</span>&nbsp;<span class="ident" id="6632817">err</span>&nbsp;<span class="op" id="6632821">!=</span>&nbsp;<span class="builtintype" id="6632824">nil</span>&nbsp;<span class="op" id="6632828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632832">t</span><span class="op" id="6632833">.</span><span class="ident" id="6632834">Errorf</span><span class="op" id="6632840">(</span><span class="string" id="6632841">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6632869">,</span>&nbsp;<span class="ident" id="6632871">err</span><span class="op" id="6632874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632878">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6632886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632889">defer</span>&nbsp;<span class="ident" id="6632895">c</span><span class="op" id="6632896">.</span><span class="ident" id="6632897">Close</span><span class="op" id="6632902">(</span><span class="op" id="6632903">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6632906">network</span>&nbsp;<span class="op" id="6632914">:=</span>&nbsp;<span class="ident" id="6632917">ln</span><span class="op" id="6632919">.</span><span class="ident" id="6632920">Addr</span><span class="op" id="6632924">(</span><span class="op" id="6632925">)</span><span class="op" id="6632926">.</span><span class="ident" id="6632927">Network</span><span class="op" id="6632934">(</span><span class="op" id="6632935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6632938">if</span>&nbsp;<span class="ident" id="6632941">c</span><span class="op" id="6632942">.</span><span class="ident" id="6632943">LocalAddr</span><span class="op" id="6632952">(</span><span class="op" id="6632953">)</span><span class="op" id="6632954">.</span><span class="ident" id="6632955">Network</span><span class="op" id="6632962">(</span><span class="op" id="6632963">)</span>&nbsp;<span class="op" id="6632965">!=</span>&nbsp;<span class="ident" id="6632968">network</span>&nbsp;<span class="op" id="6632976">||</span>&nbsp;<span class="ident" id="6632979">c</span><span class="op" id="6632980">.</span><span class="ident" id="6632981">LocalAddr</span><span class="op" id="6632990">(</span><span class="op" id="6632991">)</span><span class="op" id="6632992">.</span><span class="ident" id="6632993">Network</span><span class="op" id="6633000">(</span><span class="op" id="6633001">)</span>&nbsp;<span class="op" id="6633003">!=</span>&nbsp;<span class="ident" id="6633006">network</span>&nbsp;<span class="op" id="6633014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633018">t</span><span class="op" id="6633019">.</span><span class="ident" id="6633020">Errorf</span><span class="op" id="6633026">(</span><span class="string" id="6633027">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6633056">,</span>&nbsp;<span class="ident" id="6633058">c</span><span class="op" id="6633059">.</span><span class="ident" id="6633060">LocalAddr</span><span class="op" id="6633069">(</span><span class="op" id="6633070">)</span><span class="op" id="6633071">.</span><span class="ident" id="6633072">Network</span><span class="op" id="6633079">(</span><span class="op" id="6633080">)</span><span class="op" id="6633081">,</span>&nbsp;<span class="ident" id="6633083">c</span><span class="op" id="6633084">.</span><span class="ident" id="6633085">RemoteAddr</span><span class="op" id="6633095">(</span><span class="op" id="6633096">)</span><span class="op" id="6633097">.</span><span class="ident" id="6633098">Network</span><span class="op" id="6633105">(</span><span class="op" id="6633106">)</span><span class="op" id="6633107">,</span>&nbsp;<span class="ident" id="6633109">network</span><span class="op" id="6633116">,</span>&nbsp;<span class="ident" id="6633118">network</span><span class="op" id="6633125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633129">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633137">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633140">c</span><span class="op" id="6633141">.</span><span class="ident" id="6633142">SetDeadline</span><span class="op" id="6633153">(</span><span class="ident" id="6633154">time</span><span class="op" id="6633158">.</span><span class="ident" id="6633159">Now</span><span class="op" id="6633162">(</span><span class="op" id="6633163">)</span><span class="op" id="6633164">.</span><span class="ident" id="6633165">Add</span><span class="op" id="6633168">(</span><span class="ident" id="6633169">someTimeout</span><span class="op" id="6633180">)</span><span class="op" id="6633181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633184">c</span><span class="op" id="6633185">.</span><span class="ident" id="6633186">SetReadDeadline</span><span class="op" id="6633201">(</span><span class="ident" id="6633202">time</span><span class="op" id="6633206">.</span><span class="ident" id="6633207">Now</span><span class="op" id="6633210">(</span><span class="op" id="6633211">)</span><span class="op" id="6633212">.</span><span class="ident" id="6633213">Add</span><span class="op" id="6633216">(</span><span class="ident" id="6633217">someTimeout</span><span class="op" id="6633228">)</span><span class="op" id="6633229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633232">c</span><span class="op" id="6633233">.</span><span class="ident" id="6633234">SetWriteDeadline</span><span class="op" id="6633250">(</span><span class="ident" id="6633251">time</span><span class="op" id="6633255">.</span><span class="ident" id="6633256">Now</span><span class="op" id="6633259">(</span><span class="op" id="6633260">)</span><span class="op" id="6633261">.</span><span class="ident" id="6633262">Add</span><span class="op" id="6633265">(</span><span class="ident" id="6633266">someTimeout</span><span class="op" id="6633277">)</span><span class="op" id="6633278">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633282">b</span>&nbsp;<span class="op" id="6633284">:=</span>&nbsp;<span class="builtinfunc" id="6633287">make</span><span class="op" id="6633291">(</span><span class="op" id="6633292">[</span><span class="op" id="6633293">]</span><span class="builtintype" id="6633294">byte</span><span class="op" id="6633298">,</span>&nbsp;<span class="num" id="6633300">128</span><span class="op" id="6633303">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633306">n</span><span class="op" id="6633307">,</span>&nbsp;<span class="ident" id="6633309">err</span>&nbsp;<span class="op" id="6633313">:=</span>&nbsp;<span class="ident" id="6633316">c</span><span class="op" id="6633317">.</span><span class="ident" id="6633318">Read</span><span class="op" id="6633322">(</span><span class="ident" id="6633323">b</span><span class="op" id="6633324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633327">if</span>&nbsp;<span class="ident" id="6633330">err</span>&nbsp;<span class="op" id="6633334">!=</span>&nbsp;<span class="builtintype" id="6633337">nil</span>&nbsp;<span class="op" id="6633341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633345">t</span><span class="op" id="6633346">.</span><span class="ident" id="6633347">Errorf</span><span class="op" id="6633353">(</span><span class="string" id="6633354">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6633376">,</span>&nbsp;<span class="ident" id="6633378">err</span><span class="op" id="6633381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633385">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633393">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633396">if</span>&nbsp;<span class="ident" id="6633399">_</span><span class="op" id="6633400">,</span>&nbsp;<span class="ident" id="6633402">err</span>&nbsp;<span class="op" id="6633406">:=</span>&nbsp;<span class="ident" id="6633409">c</span><span class="op" id="6633410">.</span><span class="ident" id="6633411">Write</span><span class="op" id="6633416">(</span><span class="ident" id="6633417">b</span><span class="op" id="6633418">[</span><span class="op" id="6633419">:</span><span class="ident" id="6633420">n</span><span class="op" id="6633421">]</span><span class="op" id="6633422">)</span><span class="op" id="6633423">;</span>&nbsp;<span class="ident" id="6633425">err</span>&nbsp;<span class="op" id="6633429">!=</span>&nbsp;<span class="builtintype" id="6633432">nil</span>&nbsp;<span class="op" id="6633436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6633440">t</span><span class="op" id="6633441">.</span><span class="ident" id="6633442">Errorf</span><span class="op" id="6633448">(</span><span class="string" id="6633449">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6633472">,</span>&nbsp;<span class="ident" id="6633474">err</span><span class="op" id="6633477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6633481">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6633489">}</span><br>
<span class="lineno"></span><span class="op" id="6633491">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
