<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7669760">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7669815">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7669869">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7669920">package</span>&nbsp;<span class="ident" id="7669928">binary</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7669936">import</span>&nbsp;<span class="op" id="7669943">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669946">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669955">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7669961">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7669971">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7669974">func</span>&nbsp;<span class="ident" id="7669979">testConstant</span><span class="op" id="7669991">(</span><span class="ident" id="7669992">t</span>&nbsp;<span class="op" id="7669994">*</span><span class="ident" id="7669995">testing</span><span class="op" id="7670002">.</span><span class="ident" id="7670003">T</span><span class="op" id="7670004">,</span>&nbsp;<span class="ident" id="7670006">w</span>&nbsp;<span class="builtintype" id="7670008">uint</span><span class="op" id="7670012">,</span>&nbsp;<span class="ident" id="7670014">max</span>&nbsp;<span class="builtintype" id="7670018">int</span><span class="op" id="7670021">)</span>&nbsp;<span class="op" id="7670023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670026">buf</span>&nbsp;<span class="op" id="7670030">:=</span>&nbsp;<span class="builtinfunc" id="7670033">make</span><span class="op" id="7670037">(</span><span class="op" id="7670038">[</span><span class="op" id="7670039">]</span><span class="builtintype" id="7670040">byte</span><span class="op" id="7670044">,</span>&nbsp;<span class="ident" id="7670046">MaxVarintLen64</span><span class="op" id="7670060">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670063">n</span>&nbsp;<span class="op" id="7670065">:=</span>&nbsp;<span class="ident" id="7670068">PutUvarint</span><span class="op" id="7670078">(</span><span class="ident" id="7670079">buf</span><span class="op" id="7670082">,</span>&nbsp;<span class="num" id="7670084">1</span><span class="op" id="7670085">&lt;&lt;</span><span class="ident" id="7670087">w</span><span class="op" id="7670088">-</span><span class="num" id="7670089">1</span><span class="op" id="7670090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670093">if</span>&nbsp;<span class="ident" id="7670096">n</span>&nbsp;<span class="op" id="7670098">!=</span>&nbsp;<span class="ident" id="7670101">max</span>&nbsp;<span class="op" id="7670105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670109">t</span><span class="op" id="7670110">.</span><span class="ident" id="7670111">Errorf</span><span class="op" id="7670117">(</span><span class="string" id="7670118">&#34;MaxVarintLen%d&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7670148">,</span>&nbsp;<span class="ident" id="7670150">w</span><span class="op" id="7670151">,</span>&nbsp;<span class="ident" id="7670153">max</span><span class="op" id="7670156">,</span>&nbsp;<span class="ident" id="7670158">n</span><span class="op" id="7670159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670162">}</span><br>
<span class="lineno"></span><span class="op" id="7670164">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7670167">func</span>&nbsp;<span class="ident" id="7670172">TestConstants</span><span class="op" id="7670185">(</span><span class="ident" id="7670186">t</span>&nbsp;<span class="op" id="7670188">*</span><span class="ident" id="7670189">testing</span><span class="op" id="7670196">.</span><span class="ident" id="7670197">T</span><span class="op" id="7670198">)</span>&nbsp;<span class="op" id="7670200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670203">testConstant</span><span class="op" id="7670215">(</span><span class="ident" id="7670216">t</span><span class="op" id="7670217">,</span>&nbsp;<span class="num" id="7670219">16</span><span class="op" id="7670221">,</span>&nbsp;<span class="ident" id="7670223">MaxVarintLen16</span><span class="op" id="7670237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670240">testConstant</span><span class="op" id="7670252">(</span><span class="ident" id="7670253">t</span><span class="op" id="7670254">,</span>&nbsp;<span class="num" id="7670256">32</span><span class="op" id="7670258">,</span>&nbsp;<span class="ident" id="7670260">MaxVarintLen32</span><span class="op" id="7670274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670277">testConstant</span><span class="op" id="7670289">(</span><span class="ident" id="7670290">t</span><span class="op" id="7670291">,</span>&nbsp;<span class="num" id="7670293">64</span><span class="op" id="7670295">,</span>&nbsp;<span class="ident" id="7670297">MaxVarintLen64</span><span class="op" id="7670311">)</span><br>
<span class="lineno">25</span><span class="op" id="7670313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7670316">func</span>&nbsp;<span class="ident" id="7670321">testVarint</span><span class="op" id="7670331">(</span><span class="ident" id="7670332">t</span>&nbsp;<span class="op" id="7670334">*</span><span class="ident" id="7670335">testing</span><span class="op" id="7670342">.</span><span class="ident" id="7670343">T</span><span class="op" id="7670344">,</span>&nbsp;<span class="ident" id="7670346">x</span>&nbsp;<span class="ident" id="7670348">int64</span><span class="op" id="7670353">)</span>&nbsp;<span class="op" id="7670355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670358">buf</span>&nbsp;<span class="op" id="7670362">:=</span>&nbsp;<span class="builtinfunc" id="7670365">make</span><span class="op" id="7670369">(</span><span class="op" id="7670370">[</span><span class="op" id="7670371">]</span><span class="builtintype" id="7670372">byte</span><span class="op" id="7670376">,</span>&nbsp;<span class="ident" id="7670378">MaxVarintLen64</span><span class="op" id="7670392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670395">n</span>&nbsp;<span class="op" id="7670397">:=</span>&nbsp;<span class="ident" id="7670400">PutVarint</span><span class="op" id="7670409">(</span><span class="ident" id="7670410">buf</span><span class="op" id="7670413">,</span>&nbsp;<span class="ident" id="7670415">x</span><span class="op" id="7670416">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670419">y</span><span class="op" id="7670420">,</span>&nbsp;<span class="ident" id="7670422">m</span>&nbsp;<span class="op" id="7670424">:=</span>&nbsp;<span class="ident" id="7670427">Varint</span><span class="op" id="7670433">(</span><span class="ident" id="7670434">buf</span><span class="op" id="7670437">[</span><span class="num" id="7670438">0</span><span class="op" id="7670439">:</span><span class="ident" id="7670440">n</span><span class="op" id="7670441">]</span><span class="op" id="7670442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670445">if</span>&nbsp;<span class="ident" id="7670448">x</span>&nbsp;<span class="op" id="7670450">!=</span>&nbsp;<span class="ident" id="7670453">y</span>&nbsp;<span class="op" id="7670455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670459">t</span><span class="op" id="7670460">.</span><span class="ident" id="7670461">Errorf</span><span class="op" id="7670467">(</span><span class="string" id="7670468">&#34;Varint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7670488">,</span>&nbsp;<span class="ident" id="7670490">x</span><span class="op" id="7670491">,</span>&nbsp;<span class="ident" id="7670493">y</span><span class="op" id="7670494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670500">if</span>&nbsp;<span class="ident" id="7670503">n</span>&nbsp;<span class="op" id="7670505">!=</span>&nbsp;<span class="ident" id="7670508">m</span>&nbsp;<span class="op" id="7670510">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670514">t</span><span class="op" id="7670515">.</span><span class="ident" id="7670516">Errorf</span><span class="op" id="7670522">(</span><span class="string" id="7670523">&#34;Varint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7670556">,</span>&nbsp;<span class="ident" id="7670558">x</span><span class="op" id="7670559">,</span>&nbsp;<span class="ident" id="7670561">m</span><span class="op" id="7670562">,</span>&nbsp;<span class="ident" id="7670564">n</span><span class="op" id="7670565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670572">y</span><span class="op" id="7670573">,</span>&nbsp;<span class="ident" id="7670575">err</span>&nbsp;<span class="op" id="7670579">:=</span>&nbsp;<span class="ident" id="7670582">ReadVarint</span><span class="op" id="7670592">(</span><span class="ident" id="7670593">bytes</span><span class="op" id="7670598">.</span><span class="ident" id="7670599">NewReader</span><span class="op" id="7670608">(</span><span class="ident" id="7670609">buf</span><span class="op" id="7670612">)</span><span class="op" id="7670613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670616">if</span>&nbsp;<span class="ident" id="7670619">err</span>&nbsp;<span class="op" id="7670623">!=</span>&nbsp;<span class="ident" id="7670626">nil</span>&nbsp;<span class="op" id="7670630">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670634">t</span><span class="op" id="7670635">.</span><span class="ident" id="7670636">Errorf</span><span class="op" id="7670642">(</span><span class="string" id="7670643">&#34;ReadVarint(%d):&nbsp;%s&#34;</span><span class="op" id="7670663">,</span>&nbsp;<span class="ident" id="7670665">x</span><span class="op" id="7670666">,</span>&nbsp;<span class="ident" id="7670668">err</span><span class="op" id="7670671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670677">if</span>&nbsp;<span class="ident" id="7670680">x</span>&nbsp;<span class="op" id="7670682">!=</span>&nbsp;<span class="ident" id="7670685">y</span>&nbsp;<span class="op" id="7670687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670691">t</span><span class="op" id="7670692">.</span><span class="ident" id="7670693">Errorf</span><span class="op" id="7670699">(</span><span class="string" id="7670700">&#34;ReadVarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7670724">,</span>&nbsp;<span class="ident" id="7670726">x</span><span class="op" id="7670727">,</span>&nbsp;<span class="ident" id="7670729">y</span><span class="op" id="7670730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670733">}</span><br>
<span class="lineno">45</span><span class="op" id="7670735">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7670738">func</span>&nbsp;<span class="ident" id="7670743">testUvarint</span><span class="op" id="7670754">(</span><span class="ident" id="7670755">t</span>&nbsp;<span class="op" id="7670757">*</span><span class="ident" id="7670758">testing</span><span class="op" id="7670765">.</span><span class="ident" id="7670766">T</span><span class="op" id="7670767">,</span>&nbsp;<span class="ident" id="7670769">x</span>&nbsp;<span class="ident" id="7670771">uint64</span><span class="op" id="7670777">)</span>&nbsp;<span class="op" id="7670779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670782">buf</span>&nbsp;<span class="op" id="7670786">:=</span>&nbsp;<span class="builtinfunc" id="7670789">make</span><span class="op" id="7670793">(</span><span class="op" id="7670794">[</span><span class="op" id="7670795">]</span><span class="builtintype" id="7670796">byte</span><span class="op" id="7670800">,</span>&nbsp;<span class="ident" id="7670802">MaxVarintLen64</span><span class="op" id="7670816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670819">n</span>&nbsp;<span class="op" id="7670821">:=</span>&nbsp;<span class="ident" id="7670824">PutUvarint</span><span class="op" id="7670834">(</span><span class="ident" id="7670835">buf</span><span class="op" id="7670838">,</span>&nbsp;<span class="ident" id="7670840">x</span><span class="op" id="7670841">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670844">y</span><span class="op" id="7670845">,</span>&nbsp;<span class="ident" id="7670847">m</span>&nbsp;<span class="op" id="7670849">:=</span>&nbsp;<span class="ident" id="7670852">Uvarint</span><span class="op" id="7670859">(</span><span class="ident" id="7670860">buf</span><span class="op" id="7670863">[</span><span class="num" id="7670864">0</span><span class="op" id="7670865">:</span><span class="ident" id="7670866">n</span><span class="op" id="7670867">]</span><span class="op" id="7670868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670871">if</span>&nbsp;<span class="ident" id="7670874">x</span>&nbsp;<span class="op" id="7670876">!=</span>&nbsp;<span class="ident" id="7670879">y</span>&nbsp;<span class="op" id="7670881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670885">t</span><span class="op" id="7670886">.</span><span class="ident" id="7670887">Errorf</span><span class="op" id="7670893">(</span><span class="string" id="7670894">&#34;Uvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7670915">,</span>&nbsp;<span class="ident" id="7670917">x</span><span class="op" id="7670918">,</span>&nbsp;<span class="ident" id="7670920">y</span><span class="op" id="7670921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7670927">if</span>&nbsp;<span class="ident" id="7670930">n</span>&nbsp;<span class="op" id="7670932">!=</span>&nbsp;<span class="ident" id="7670935">m</span>&nbsp;<span class="op" id="7670937">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7670941">t</span><span class="op" id="7670942">.</span><span class="ident" id="7670943">Errorf</span><span class="op" id="7670949">(</span><span class="string" id="7670950">&#34;Uvarint(%d):&nbsp;got&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7670984">,</span>&nbsp;<span class="ident" id="7670986">x</span><span class="op" id="7670987">,</span>&nbsp;<span class="ident" id="7670989">m</span><span class="op" id="7670990">,</span>&nbsp;<span class="ident" id="7670992">n</span><span class="op" id="7670993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7670996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671000">y</span><span class="op" id="7671001">,</span>&nbsp;<span class="ident" id="7671003">err</span>&nbsp;<span class="op" id="7671007">:=</span>&nbsp;<span class="ident" id="7671010">ReadUvarint</span><span class="op" id="7671021">(</span><span class="ident" id="7671022">bytes</span><span class="op" id="7671027">.</span><span class="ident" id="7671028">NewReader</span><span class="op" id="7671037">(</span><span class="ident" id="7671038">buf</span><span class="op" id="7671041">)</span><span class="op" id="7671042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671045">if</span>&nbsp;<span class="ident" id="7671048">err</span>&nbsp;<span class="op" id="7671052">!=</span>&nbsp;<span class="ident" id="7671055">nil</span>&nbsp;<span class="op" id="7671059">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671063">t</span><span class="op" id="7671064">.</span><span class="ident" id="7671065">Errorf</span><span class="op" id="7671071">(</span><span class="string" id="7671072">&#34;ReadUvarint(%d):&nbsp;%s&#34;</span><span class="op" id="7671093">,</span>&nbsp;<span class="ident" id="7671095">x</span><span class="op" id="7671096">,</span>&nbsp;<span class="ident" id="7671098">err</span><span class="op" id="7671101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671107">if</span>&nbsp;<span class="ident" id="7671110">x</span>&nbsp;<span class="op" id="7671112">!=</span>&nbsp;<span class="ident" id="7671115">y</span>&nbsp;<span class="op" id="7671117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671121">t</span><span class="op" id="7671122">.</span><span class="ident" id="7671123">Errorf</span><span class="op" id="7671129">(</span><span class="string" id="7671130">&#34;ReadUvarint(%d):&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7671155">,</span>&nbsp;<span class="ident" id="7671157">x</span><span class="op" id="7671158">,</span>&nbsp;<span class="ident" id="7671160">y</span><span class="op" id="7671161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671164">}</span><br>
<span class="lineno">65</span><span class="op" id="7671166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671169">var</span>&nbsp;<span class="ident" id="7671173">tests</span>&nbsp;<span class="op" id="7671179">=</span>&nbsp;<span class="op" id="7671181">[</span><span class="op" id="7671182">]</span><span class="ident" id="7671183">int64</span><span class="op" id="7671188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671191">-</span><span class="num" id="7671192">1</span>&nbsp;<span class="op" id="7671194">&lt;&lt;</span>&nbsp;<span class="num" id="7671197">63</span><span class="op" id="7671199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671202">-</span><span class="num" id="7671203">1</span><span class="op" id="7671204">&lt;&lt;</span><span class="num" id="7671206">63</span>&nbsp;<span class="op" id="7671209">+</span>&nbsp;<span class="num" id="7671211">1</span><span class="op" id="7671212">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671215">-</span><span class="num" id="7671216">1</span><span class="op" id="7671217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671220">0</span><span class="op" id="7671221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671224">1</span><span class="op" id="7671225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671228">2</span><span class="op" id="7671229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671232">10</span><span class="op" id="7671234">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671237">20</span><span class="op" id="7671239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671242">63</span><span class="op" id="7671244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671247">64</span><span class="op" id="7671249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671252">65</span><span class="op" id="7671254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671257">127</span><span class="op" id="7671260">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671263">128</span><span class="op" id="7671266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671269">129</span><span class="op" id="7671272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671275">255</span><span class="op" id="7671278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671281">256</span><span class="op" id="7671284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671287">257</span><span class="op" id="7671290">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7671293">1</span><span class="op" id="7671294">&lt;&lt;</span><span class="num" id="7671296">63</span>&nbsp;<span class="op" id="7671299">-</span>&nbsp;<span class="num" id="7671301">1</span><span class="op" id="7671302">,</span><br>
<span class="lineno"></span><span class="op" id="7671304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671307">func</span>&nbsp;<span class="ident" id="7671312">TestVarint</span><span class="op" id="7671322">(</span><span class="ident" id="7671323">t</span>&nbsp;<span class="op" id="7671325">*</span><span class="ident" id="7671326">testing</span><span class="op" id="7671333">.</span><span class="ident" id="7671334">T</span><span class="op" id="7671335">)</span>&nbsp;<span class="op" id="7671337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671340">for</span>&nbsp;<span class="ident" id="7671344">_</span><span class="op" id="7671345">,</span>&nbsp;<span class="ident" id="7671347">x</span>&nbsp;<span class="op" id="7671349">:=</span>&nbsp;<span class="keyword" id="7671352">range</span>&nbsp;<span class="ident" id="7671358">tests</span>&nbsp;<span class="op" id="7671364">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671368">testVarint</span><span class="op" id="7671378">(</span><span class="ident" id="7671379">t</span><span class="op" id="7671380">,</span>&nbsp;<span class="ident" id="7671382">x</span><span class="op" id="7671383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671387">testVarint</span><span class="op" id="7671397">(</span><span class="ident" id="7671398">t</span><span class="op" id="7671399">,</span>&nbsp;<span class="op" id="7671401">-</span><span class="ident" id="7671402">x</span><span class="op" id="7671403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671409">for</span>&nbsp;<span class="ident" id="7671413">x</span>&nbsp;<span class="op" id="7671415">:=</span>&nbsp;<span class="ident" id="7671418">int64</span><span class="op" id="7671423">(</span><span class="num" id="7671424">0x7</span><span class="op" id="7671427">)</span><span class="op" id="7671428">;</span>&nbsp;<span class="ident" id="7671430">x</span>&nbsp;<span class="op" id="7671432">!=</span>&nbsp;<span class="num" id="7671435">0</span><span class="op" id="7671436">;</span>&nbsp;<span class="ident" id="7671438">x</span>&nbsp;<span class="op" id="7671440">&lt;&lt;=</span>&nbsp;<span class="num" id="7671444">1</span>&nbsp;<span class="op" id="7671446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671450">testVarint</span><span class="op" id="7671460">(</span><span class="ident" id="7671461">t</span><span class="op" id="7671462">,</span>&nbsp;<span class="ident" id="7671464">x</span><span class="op" id="7671465">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671469">testVarint</span><span class="op" id="7671479">(</span><span class="ident" id="7671480">t</span><span class="op" id="7671481">,</span>&nbsp;<span class="op" id="7671483">-</span><span class="ident" id="7671484">x</span><span class="op" id="7671485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671488">}</span><br>
<span class="lineno"></span><span class="op" id="7671490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671493">func</span>&nbsp;<span class="ident" id="7671498">TestUvarint</span><span class="op" id="7671509">(</span><span class="ident" id="7671510">t</span>&nbsp;<span class="op" id="7671512">*</span><span class="ident" id="7671513">testing</span><span class="op" id="7671520">.</span><span class="ident" id="7671521">T</span><span class="op" id="7671522">)</span>&nbsp;<span class="op" id="7671524">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671527">for</span>&nbsp;<span class="ident" id="7671531">_</span><span class="op" id="7671532">,</span>&nbsp;<span class="ident" id="7671534">x</span>&nbsp;<span class="op" id="7671536">:=</span>&nbsp;<span class="keyword" id="7671539">range</span>&nbsp;<span class="ident" id="7671545">tests</span>&nbsp;<span class="op" id="7671551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671555">testUvarint</span><span class="op" id="7671566">(</span><span class="ident" id="7671567">t</span><span class="op" id="7671568">,</span>&nbsp;<span class="ident" id="7671570">uint64</span><span class="op" id="7671576">(</span><span class="ident" id="7671577">x</span><span class="op" id="7671578">)</span><span class="op" id="7671579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671585">for</span>&nbsp;<span class="ident" id="7671589">x</span>&nbsp;<span class="op" id="7671591">:=</span>&nbsp;<span class="ident" id="7671594">uint64</span><span class="op" id="7671600">(</span><span class="num" id="7671601">0x7</span><span class="op" id="7671604">)</span><span class="op" id="7671605">;</span>&nbsp;<span class="ident" id="7671607">x</span>&nbsp;<span class="op" id="7671609">!=</span>&nbsp;<span class="num" id="7671612">0</span><span class="op" id="7671613">;</span>&nbsp;<span class="ident" id="7671615">x</span>&nbsp;<span class="op" id="7671617">&lt;&lt;=</span>&nbsp;<span class="num" id="7671621">1</span>&nbsp;<span class="op" id="7671623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671627">testUvarint</span><span class="op" id="7671638">(</span><span class="ident" id="7671639">t</span><span class="op" id="7671640">,</span>&nbsp;<span class="ident" id="7671642">x</span><span class="op" id="7671643">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671646">}</span><br>
<span class="lineno"></span><span class="op" id="7671648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7671651">func</span>&nbsp;<span class="ident" id="7671656">TestBufferTooSmall</span><span class="op" id="7671674">(</span><span class="ident" id="7671675">t</span>&nbsp;<span class="op" id="7671677">*</span><span class="ident" id="7671678">testing</span><span class="op" id="7671685">.</span><span class="ident" id="7671686">T</span><span class="op" id="7671687">)</span>&nbsp;<span class="op" id="7671689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671692">buf</span>&nbsp;<span class="op" id="7671696">:=</span>&nbsp;<span class="op" id="7671699">[</span><span class="op" id="7671700">]</span><span class="builtintype" id="7671701">byte</span><span class="op" id="7671705">{</span><span class="num" id="7671706">0x80</span><span class="op" id="7671710">,</span>&nbsp;<span class="num" id="7671712">0x80</span><span class="op" id="7671716">,</span>&nbsp;<span class="num" id="7671718">0x80</span><span class="op" id="7671722">,</span>&nbsp;<span class="num" id="7671724">0x80</span><span class="op" id="7671728">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671731">for</span>&nbsp;<span class="ident" id="7671735">i</span>&nbsp;<span class="op" id="7671737">:=</span>&nbsp;<span class="num" id="7671740">0</span><span class="op" id="7671741">;</span>&nbsp;<span class="ident" id="7671743">i</span>&nbsp;<span class="op" id="7671745">&lt;=</span>&nbsp;<span class="builtinfunc" id="7671748">len</span><span class="op" id="7671751">(</span><span class="ident" id="7671752">buf</span><span class="op" id="7671755">)</span><span class="op" id="7671756">;</span>&nbsp;<span class="ident" id="7671758">i</span><span class="op" id="7671759">++</span>&nbsp;<span class="op" id="7671762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671766">buf</span>&nbsp;<span class="op" id="7671770">:=</span>&nbsp;<span class="ident" id="7671773">buf</span><span class="op" id="7671776">[</span><span class="num" id="7671777">0</span><span class="op" id="7671778">:</span><span class="ident" id="7671779">i</span><span class="op" id="7671780">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671784">x</span><span class="op" id="7671785">,</span>&nbsp;<span class="ident" id="7671787">n</span>&nbsp;<span class="op" id="7671789">:=</span>&nbsp;<span class="ident" id="7671792">Uvarint</span><span class="op" id="7671799">(</span><span class="ident" id="7671800">buf</span><span class="op" id="7671803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671807">if</span>&nbsp;<span class="ident" id="7671810">x</span>&nbsp;<span class="op" id="7671812">!=</span>&nbsp;<span class="num" id="7671815">0</span>&nbsp;<span class="op" id="7671817">||</span>&nbsp;<span class="ident" id="7671820">n</span>&nbsp;<span class="op" id="7671822">!=</span>&nbsp;<span class="num" id="7671825">0</span>&nbsp;<span class="op" id="7671827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671832">t</span><span class="op" id="7671833">.</span><span class="ident" id="7671834">Errorf</span><span class="op" id="7671840">(</span><span class="string" id="7671841">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7671874">,</span>&nbsp;<span class="ident" id="7671876">buf</span><span class="op" id="7671879">,</span>&nbsp;<span class="ident" id="7671881">x</span><span class="op" id="7671882">,</span>&nbsp;<span class="ident" id="7671884">n</span><span class="op" id="7671885">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7671889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671894">x</span><span class="op" id="7671895">,</span>&nbsp;<span class="ident" id="7671897">err</span>&nbsp;<span class="op" id="7671901">:=</span>&nbsp;<span class="ident" id="7671904">ReadUvarint</span><span class="op" id="7671915">(</span><span class="ident" id="7671916">bytes</span><span class="op" id="7671921">.</span><span class="ident" id="7671922">NewReader</span><span class="op" id="7671931">(</span><span class="ident" id="7671932">buf</span><span class="op" id="7671935">)</span><span class="op" id="7671936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7671940">if</span>&nbsp;<span class="ident" id="7671943">x</span>&nbsp;<span class="op" id="7671945">!=</span>&nbsp;<span class="num" id="7671948">0</span>&nbsp;<span class="op" id="7671950">||</span>&nbsp;<span class="ident" id="7671953">err</span>&nbsp;<span class="op" id="7671957">!=</span>&nbsp;<span class="ident" id="7671960">io</span><span class="op" id="7671962">.</span><span class="ident" id="7671963">EOF</span>&nbsp;<span class="op" id="7671967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7671972">t</span><span class="op" id="7671973">.</span><span class="ident" id="7671974">Errorf</span><span class="op" id="7671980">(</span><span class="string" id="7671981">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s&#34;</span><span class="op" id="7672020">,</span>&nbsp;<span class="ident" id="7672022">buf</span><span class="op" id="7672025">,</span>&nbsp;<span class="ident" id="7672027">x</span><span class="op" id="7672028">,</span>&nbsp;<span class="ident" id="7672030">err</span><span class="op" id="7672033">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672040">}</span><br>
<span class="lineno"></span><span class="op" id="7672042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7672045">func</span>&nbsp;<span class="ident" id="7672050">testOverflow</span><span class="op" id="7672062">(</span><span class="ident" id="7672063">t</span>&nbsp;<span class="op" id="7672065">*</span><span class="ident" id="7672066">testing</span><span class="op" id="7672073">.</span><span class="ident" id="7672074">T</span><span class="op" id="7672075">,</span>&nbsp;<span class="ident" id="7672077">buf</span>&nbsp;<span class="op" id="7672081">[</span><span class="op" id="7672082">]</span><span class="builtintype" id="7672083">byte</span><span class="op" id="7672087">,</span>&nbsp;<span class="ident" id="7672089">n0</span>&nbsp;<span class="builtintype" id="7672092">int</span><span class="op" id="7672095">,</span>&nbsp;<span class="ident" id="7672097">err0</span>&nbsp;<span class="builtintype" id="7672102">error</span><span class="op" id="7672107">)</span>&nbsp;<span class="op" id="7672109">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672112">x</span><span class="op" id="7672113">,</span>&nbsp;<span class="ident" id="7672115">n</span>&nbsp;<span class="op" id="7672117">:=</span>&nbsp;<span class="ident" id="7672120">Uvarint</span><span class="op" id="7672127">(</span><span class="ident" id="7672128">buf</span><span class="op" id="7672131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672134">if</span>&nbsp;<span class="ident" id="7672137">x</span>&nbsp;<span class="op" id="7672139">!=</span>&nbsp;<span class="num" id="7672142">0</span>&nbsp;<span class="op" id="7672144">||</span>&nbsp;<span class="ident" id="7672147">n</span>&nbsp;<span class="op" id="7672149">!=</span>&nbsp;<span class="ident" id="7672152">n0</span>&nbsp;<span class="op" id="7672155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672159">t</span><span class="op" id="7672160">.</span><span class="ident" id="7672161">Errorf</span><span class="op" id="7672167">(</span><span class="string" id="7672168">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;%d&#34;</span><span class="op" id="7672213">,</span>&nbsp;<span class="ident" id="7672215">buf</span><span class="op" id="7672218">,</span>&nbsp;<span class="ident" id="7672220">x</span><span class="op" id="7672221">,</span>&nbsp;<span class="ident" id="7672223">n</span><span class="op" id="7672224">,</span>&nbsp;<span class="ident" id="7672226">n0</span><span class="op" id="7672228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672235">x</span><span class="op" id="7672236">,</span>&nbsp;<span class="ident" id="7672238">err</span>&nbsp;<span class="op" id="7672242">:=</span>&nbsp;<span class="ident" id="7672245">ReadUvarint</span><span class="op" id="7672256">(</span><span class="ident" id="7672257">bytes</span><span class="op" id="7672262">.</span><span class="ident" id="7672263">NewReader</span><span class="op" id="7672272">(</span><span class="ident" id="7672273">buf</span><span class="op" id="7672276">)</span><span class="op" id="7672277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672280">if</span>&nbsp;<span class="ident" id="7672283">x</span>&nbsp;<span class="op" id="7672285">!=</span>&nbsp;<span class="num" id="7672288">0</span>&nbsp;<span class="op" id="7672290">||</span>&nbsp;<span class="ident" id="7672293">err</span>&nbsp;<span class="op" id="7672297">!=</span>&nbsp;<span class="ident" id="7672300">err0</span>&nbsp;<span class="op" id="7672305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672309">t</span><span class="op" id="7672310">.</span><span class="ident" id="7672311">Errorf</span><span class="op" id="7672317">(</span><span class="string" id="7672318">&#34;ReadUvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;err&nbsp;=&nbsp;%s;&nbsp;want&nbsp;0,&nbsp;%s&#34;</span><span class="op" id="7672369">,</span>&nbsp;<span class="ident" id="7672371">buf</span><span class="op" id="7672374">,</span>&nbsp;<span class="ident" id="7672376">x</span><span class="op" id="7672377">,</span>&nbsp;<span class="ident" id="7672379">err</span><span class="op" id="7672382">,</span>&nbsp;<span class="ident" id="7672384">err0</span><span class="op" id="7672388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672391">}</span><br>
<span class="lineno"></span><span class="op" id="7672393">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="7672396">func</span>&nbsp;<span class="ident" id="7672401">TestOverflow</span><span class="op" id="7672413">(</span><span class="ident" id="7672414">t</span>&nbsp;<span class="op" id="7672416">*</span><span class="ident" id="7672417">testing</span><span class="op" id="7672424">.</span><span class="ident" id="7672425">T</span><span class="op" id="7672426">)</span>&nbsp;<span class="op" id="7672428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672431">testOverflow</span><span class="op" id="7672443">(</span><span class="ident" id="7672444">t</span><span class="op" id="7672445">,</span>&nbsp;<span class="op" id="7672447">[</span><span class="op" id="7672448">]</span><span class="builtintype" id="7672449">byte</span><span class="op" id="7672453">{</span><span class="num" id="7672454">0x80</span><span class="op" id="7672458">,</span>&nbsp;<span class="num" id="7672460">0x80</span><span class="op" id="7672464">,</span>&nbsp;<span class="num" id="7672466">0x80</span><span class="op" id="7672470">,</span>&nbsp;<span class="num" id="7672472">0x80</span><span class="op" id="7672476">,</span>&nbsp;<span class="num" id="7672478">0x80</span><span class="op" id="7672482">,</span>&nbsp;<span class="num" id="7672484">0x80</span><span class="op" id="7672488">,</span>&nbsp;<span class="num" id="7672490">0x80</span><span class="op" id="7672494">,</span>&nbsp;<span class="num" id="7672496">0x80</span><span class="op" id="7672500">,</span>&nbsp;<span class="num" id="7672502">0x80</span><span class="op" id="7672506">,</span>&nbsp;<span class="num" id="7672508">0x2</span><span class="op" id="7672511">}</span><span class="op" id="7672512">,</span>&nbsp;<span class="op" id="7672514">-</span><span class="num" id="7672515">10</span><span class="op" id="7672517">,</span>&nbsp;<span class="ident" id="7672519">overflow</span><span class="op" id="7672527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672530">testOverflow</span><span class="op" id="7672542">(</span><span class="ident" id="7672543">t</span><span class="op" id="7672544">,</span>&nbsp;<span class="op" id="7672546">[</span><span class="op" id="7672547">]</span><span class="builtintype" id="7672548">byte</span><span class="op" id="7672552">{</span><span class="num" id="7672553">0x80</span><span class="op" id="7672557">,</span>&nbsp;<span class="num" id="7672559">0x80</span><span class="op" id="7672563">,</span>&nbsp;<span class="num" id="7672565">0x80</span><span class="op" id="7672569">,</span>&nbsp;<span class="num" id="7672571">0x80</span><span class="op" id="7672575">,</span>&nbsp;<span class="num" id="7672577">0x80</span><span class="op" id="7672581">,</span>&nbsp;<span class="num" id="7672583">0x80</span><span class="op" id="7672587">,</span>&nbsp;<span class="num" id="7672589">0x80</span><span class="op" id="7672593">,</span>&nbsp;<span class="num" id="7672595">0x80</span><span class="op" id="7672599">,</span>&nbsp;<span class="num" id="7672601">0x80</span><span class="op" id="7672605">,</span>&nbsp;<span class="num" id="7672607">0x80</span><span class="op" id="7672611">,</span>&nbsp;<span class="num" id="7672613">0x80</span><span class="op" id="7672617">,</span>&nbsp;<span class="num" id="7672619">0x80</span><span class="op" id="7672623">,</span>&nbsp;<span class="num" id="7672625">0x1</span><span class="op" id="7672628">,</span>&nbsp;<span class="num" id="7672630">0</span><span class="op" id="7672631">,</span>&nbsp;<span class="num" id="7672633">0</span><span class="op" id="7672634">}</span><span class="op" id="7672635">,</span>&nbsp;<span class="op" id="7672637">-</span><span class="num" id="7672638">13</span><span class="op" id="7672640">,</span>&nbsp;<span class="ident" id="7672642">overflow</span><span class="op" id="7672650">)</span><br>
<span class="lineno"></span><span class="op" id="7672652">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7672655">func</span>&nbsp;<span class="ident" id="7672660">TestNonCanonicalZero</span><span class="op" id="7672680">(</span><span class="ident" id="7672681">t</span>&nbsp;<span class="op" id="7672683">*</span><span class="ident" id="7672684">testing</span><span class="op" id="7672691">.</span><span class="ident" id="7672692">T</span><span class="op" id="7672693">)</span>&nbsp;<span class="op" id="7672695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672698">buf</span>&nbsp;<span class="op" id="7672702">:=</span>&nbsp;<span class="op" id="7672705">[</span><span class="op" id="7672706">]</span><span class="builtintype" id="7672707">byte</span><span class="op" id="7672711">{</span><span class="num" id="7672712">0x80</span><span class="op" id="7672716">,</span>&nbsp;<span class="num" id="7672718">0x80</span><span class="op" id="7672722">,</span>&nbsp;<span class="num" id="7672724">0x80</span><span class="op" id="7672728">,</span>&nbsp;<span class="num" id="7672730">0</span><span class="op" id="7672731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672734">x</span><span class="op" id="7672735">,</span>&nbsp;<span class="ident" id="7672737">n</span>&nbsp;<span class="op" id="7672739">:=</span>&nbsp;<span class="ident" id="7672742">Uvarint</span><span class="op" id="7672749">(</span><span class="ident" id="7672750">buf</span><span class="op" id="7672753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672756">if</span>&nbsp;<span class="ident" id="7672759">x</span>&nbsp;<span class="op" id="7672761">!=</span>&nbsp;<span class="num" id="7672764">0</span>&nbsp;<span class="op" id="7672766">||</span>&nbsp;<span class="ident" id="7672769">n</span>&nbsp;<span class="op" id="7672771">!=</span>&nbsp;<span class="num" id="7672774">4</span>&nbsp;<span class="op" id="7672776">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672780">t</span><span class="op" id="7672781">.</span><span class="ident" id="7672782">Errorf</span><span class="op" id="7672788">(</span><span class="string" id="7672789">&#34;Uvarint(%v):&nbsp;got&nbsp;x&nbsp;=&nbsp;%d,&nbsp;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;0,&nbsp;4&#34;</span><span class="op" id="7672833">,</span>&nbsp;<span class="ident" id="7672835">buf</span><span class="op" id="7672838">,</span>&nbsp;<span class="ident" id="7672840">x</span><span class="op" id="7672841">,</span>&nbsp;<span class="ident" id="7672843">n</span><span class="op" id="7672844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7672848">}</span><br>
<span class="lineno"></span><span class="op" id="7672850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="7672853">func</span>&nbsp;<span class="ident" id="7672858">BenchmarkPutUvarint32</span><span class="op" id="7672879">(</span><span class="ident" id="7672880">b</span>&nbsp;<span class="op" id="7672882">*</span><span class="ident" id="7672883">testing</span><span class="op" id="7672890">.</span><span class="ident" id="7672891">B</span><span class="op" id="7672892">)</span>&nbsp;<span class="op" id="7672894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672897">buf</span>&nbsp;<span class="op" id="7672901">:=</span>&nbsp;<span class="builtinfunc" id="7672904">make</span><span class="op" id="7672908">(</span><span class="op" id="7672909">[</span><span class="op" id="7672910">]</span><span class="builtintype" id="7672911">byte</span><span class="op" id="7672915">,</span>&nbsp;<span class="ident" id="7672917">MaxVarintLen32</span><span class="op" id="7672931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7672934">b</span><span class="op" id="7672935">.</span><span class="ident" id="7672936">SetBytes</span><span class="op" id="7672944">(</span><span class="num" id="7672945">4</span><span class="op" id="7672946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672949">for</span>&nbsp;<span class="ident" id="7672953">i</span>&nbsp;<span class="op" id="7672955">:=</span>&nbsp;<span class="num" id="7672958">0</span><span class="op" id="7672959">;</span>&nbsp;<span class="ident" id="7672961">i</span>&nbsp;<span class="op" id="7672963">&lt;</span>&nbsp;<span class="ident" id="7672965">b</span><span class="op" id="7672966">.</span><span class="ident" id="7672967">N</span><span class="op" id="7672968">;</span>&nbsp;<span class="ident" id="7672970">i</span><span class="op" id="7672971">++</span>&nbsp;<span class="op" id="7672974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7672978">for</span>&nbsp;<span class="ident" id="7672982">j</span>&nbsp;<span class="op" id="7672984">:=</span>&nbsp;<span class="builtintype" id="7672987">uint</span><span class="op" id="7672991">(</span><span class="num" id="7672992">0</span><span class="op" id="7672993">)</span><span class="op" id="7672994">;</span>&nbsp;<span class="ident" id="7672996">j</span>&nbsp;<span class="op" id="7672998">&lt;</span>&nbsp;<span class="ident" id="7673000">MaxVarintLen32</span><span class="op" id="7673014">;</span>&nbsp;<span class="ident" id="7673016">j</span><span class="op" id="7673017">++</span>&nbsp;<span class="op" id="7673020">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673025">PutUvarint</span><span class="op" id="7673035">(</span><span class="ident" id="7673036">buf</span><span class="op" id="7673039">,</span>&nbsp;<span class="num" id="7673041">1</span><span class="op" id="7673042">&lt;&lt;</span><span class="op" id="7673044">(</span><span class="ident" id="7673045">j</span><span class="op" id="7673046">*</span><span class="num" id="7673047">7</span><span class="op" id="7673048">)</span><span class="op" id="7673049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673056">}</span><br>
<span class="lineno"></span><span class="op" id="7673058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7673061">func</span>&nbsp;<span class="ident" id="7673066">BenchmarkPutUvarint64</span><span class="op" id="7673087">(</span><span class="ident" id="7673088">b</span>&nbsp;<span class="op" id="7673090">*</span><span class="ident" id="7673091">testing</span><span class="op" id="7673098">.</span><span class="ident" id="7673099">B</span><span class="op" id="7673100">)</span>&nbsp;<span class="op" id="7673102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673105">buf</span>&nbsp;<span class="op" id="7673109">:=</span>&nbsp;<span class="builtinfunc" id="7673112">make</span><span class="op" id="7673116">(</span><span class="op" id="7673117">[</span><span class="op" id="7673118">]</span><span class="builtintype" id="7673119">byte</span><span class="op" id="7673123">,</span>&nbsp;<span class="ident" id="7673125">MaxVarintLen64</span><span class="op" id="7673139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673142">b</span><span class="op" id="7673143">.</span><span class="ident" id="7673144">SetBytes</span><span class="op" id="7673152">(</span><span class="num" id="7673153">8</span><span class="op" id="7673154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673157">for</span>&nbsp;<span class="ident" id="7673161">i</span>&nbsp;<span class="op" id="7673163">:=</span>&nbsp;<span class="num" id="7673166">0</span><span class="op" id="7673167">;</span>&nbsp;<span class="ident" id="7673169">i</span>&nbsp;<span class="op" id="7673171">&lt;</span>&nbsp;<span class="ident" id="7673173">b</span><span class="op" id="7673174">.</span><span class="ident" id="7673175">N</span><span class="op" id="7673176">;</span>&nbsp;<span class="ident" id="7673178">i</span><span class="op" id="7673179">++</span>&nbsp;<span class="op" id="7673182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7673186">for</span>&nbsp;<span class="ident" id="7673190">j</span>&nbsp;<span class="op" id="7673192">:=</span>&nbsp;<span class="builtintype" id="7673195">uint</span><span class="op" id="7673199">(</span><span class="num" id="7673200">0</span><span class="op" id="7673201">)</span><span class="op" id="7673202">;</span>&nbsp;<span class="ident" id="7673204">j</span>&nbsp;<span class="op" id="7673206">&lt;</span>&nbsp;<span class="ident" id="7673208">MaxVarintLen64</span><span class="op" id="7673222">;</span>&nbsp;<span class="ident" id="7673224">j</span><span class="op" id="7673225">++</span>&nbsp;<span class="op" id="7673228">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7673233">PutUvarint</span><span class="op" id="7673243">(</span><span class="ident" id="7673244">buf</span><span class="op" id="7673247">,</span>&nbsp;<span class="num" id="7673249">1</span><span class="op" id="7673250">&lt;&lt;</span><span class="op" id="7673252">(</span><span class="ident" id="7673253">j</span><span class="op" id="7673254">*</span><span class="num" id="7673255">7</span><span class="op" id="7673256">)</span><span class="op" id="7673257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7673264">}</span><br>
<span class="lineno"></span><span class="op" id="7673266">}</span>
</div>
</body>
</html>
