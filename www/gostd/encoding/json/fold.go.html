<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3292132">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3292187">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3292241">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3292292">package</span>&nbsp;<span class="ident" id="3292300">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3292306">import</span>&nbsp;<span class="op" id="3292313">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3292316">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3292325">&#34;unicode/utf8&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3292340">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3292343">const</span>&nbsp;<span class="op" id="3292349">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292352">caseMask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292365">=</span>&nbsp;<span class="op" id="3292367">^</span><span class="builtintype" id="3292368">byte</span><span class="op" id="3292372">(</span><span class="num" id="3292373">0x20</span><span class="op" id="3292377">)</span>&nbsp;<span class="comment" id="3292379">//&nbsp;Mask&nbsp;to&nbsp;ignore&nbsp;case&nbsp;in&nbsp;ASCII.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292413">kelvin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3292426">=</span>&nbsp;<span class="string" id="3292428">&#39;\u212a&#39;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3292438">smallLongEss</span>&nbsp;<span class="op" id="3292451">=</span>&nbsp;<span class="string" id="3292453">&#39;\u017f&#39;</span><br>
<span class="lineno"></span><span class="op" id="3292462">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3292465">//&nbsp;foldFunc&nbsp;returns&nbsp;one&nbsp;of&nbsp;four&nbsp;different&nbsp;case&nbsp;folding&nbsp;equivalence</span><br>
<span class="lineno"></span><span class="comment" id="3292532">//&nbsp;functions,&nbsp;from&nbsp;most&nbsp;general&nbsp;(and&nbsp;slow)&nbsp;to&nbsp;fastest:</span><br>
<span class="lineno">20</span><span class="comment" id="3292587">//</span><br>
<span class="lineno"></span><span class="comment" id="3292590">//&nbsp;1)&nbsp;bytes.EqualFold,&nbsp;if&nbsp;the&nbsp;key&nbsp;s&nbsp;contains&nbsp;any&nbsp;non-ASCII&nbsp;UTF-8</span><br>
<span class="lineno"></span><span class="comment" id="3292655">//&nbsp;2)&nbsp;equalFoldRight,&nbsp;if&nbsp;s&nbsp;contains&nbsp;special&nbsp;folding&nbsp;ASCII&nbsp;(&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;&#39;S&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3292734">//&nbsp;3)&nbsp;asciiEqualFold,&nbsp;no&nbsp;special,&nbsp;but&nbsp;includes&nbsp;non-letters&nbsp;(including&nbsp;_)</span><br>
<span class="lineno"></span><span class="comment" id="3292807">//&nbsp;4)&nbsp;simpleLetterEqualFold,&nbsp;no&nbsp;specials,&nbsp;no&nbsp;non-letters.</span><br>
<span class="lineno">25</span><span class="comment" id="3292865">//</span><br>
<span class="lineno"></span><span class="comment" id="3292868">//&nbsp;The&nbsp;letters&nbsp;S&nbsp;and&nbsp;K&nbsp;are&nbsp;special&nbsp;because&nbsp;they&nbsp;map&nbsp;to&nbsp;3&nbsp;runes,&nbsp;not&nbsp;just&nbsp;2:</span><br>
<span class="lineno"></span><span class="comment" id="3292944">//&nbsp;&nbsp;*&nbsp;S&nbsp;maps&nbsp;to&nbsp;s&nbsp;and&nbsp;to&nbsp;U+017F&nbsp;&#39;ſ&#39;&nbsp;Latin&nbsp;small&nbsp;letter&nbsp;long&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="3293007">//&nbsp;&nbsp;*&nbsp;k&nbsp;maps&nbsp;to&nbsp;K&nbsp;and&nbsp;to&nbsp;U+212A&nbsp;&#39;K&#39;&nbsp;Kelvin&nbsp;sign</span><br>
<span class="lineno"></span><span class="comment" id="3293057">//&nbsp;See&nbsp;http://play.golang.org/p/tTxjOc0OGo</span><br>
<span class="lineno">30</span><span class="comment" id="3293100">//</span><br>
<span class="lineno"></span><span class="comment" id="3293103">//&nbsp;The&nbsp;returned&nbsp;function&nbsp;is&nbsp;specialized&nbsp;for&nbsp;matching&nbsp;against&nbsp;s&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3293170">//&nbsp;should&nbsp;only&nbsp;be&nbsp;given&nbsp;s.&nbsp;It&#39;s&nbsp;not&nbsp;curried&nbsp;for&nbsp;performance&nbsp;reasons.</span><br>
<span class="lineno"></span><span class="keyword" id="3293239">func</span>&nbsp;<span class="ident" id="3293244">foldFunc</span><span class="op" id="3293252">(</span><span class="ident" id="3293253">s</span>&nbsp;<span class="op" id="3293255">[</span><span class="op" id="3293256">]</span><span class="builtintype" id="3293257">byte</span><span class="op" id="3293261">)</span>&nbsp;<span class="keyword" id="3293263">func</span><span class="op" id="3293267">(</span><span class="ident" id="3293268">s</span><span class="op" id="3293269">,</span>&nbsp;<span class="ident" id="3293271">t</span>&nbsp;<span class="op" id="3293273">[</span><span class="op" id="3293274">]</span><span class="builtintype" id="3293275">byte</span><span class="op" id="3293279">)</span>&nbsp;<span class="builtintype" id="3293281">bool</span>&nbsp;<span class="op" id="3293286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293289">nonLetter</span>&nbsp;<span class="op" id="3293299">:=</span>&nbsp;<span class="builtintype" id="3293302">false</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293309">special</span>&nbsp;<span class="op" id="3293317">:=</span>&nbsp;<span class="builtintype" id="3293320">false</span>&nbsp;<span class="comment" id="3293326">//&nbsp;special&nbsp;letter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293345">for</span>&nbsp;<span class="ident" id="3293349">_</span><span class="op" id="3293350">,</span>&nbsp;<span class="ident" id="3293352">b</span>&nbsp;<span class="op" id="3293354">:=</span>&nbsp;<span class="keyword" id="3293357">range</span>&nbsp;<span class="ident" id="3293363">s</span>&nbsp;<span class="op" id="3293365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293369">if</span>&nbsp;<span class="ident" id="3293372">b</span>&nbsp;<span class="op" id="3293374">&gt;=</span>&nbsp;<span class="ident" id="3293377">utf8</span><span class="op" id="3293381">.</span><span class="ident" id="3293382">RuneSelf</span>&nbsp;<span class="op" id="3293391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293396">return</span>&nbsp;<span class="ident" id="3293403">bytes</span><span class="op" id="3293408">.</span><span class="ident" id="3293409">EqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293421">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293425">upper</span>&nbsp;<span class="op" id="3293431">:=</span>&nbsp;<span class="ident" id="3293434">b</span>&nbsp;<span class="op" id="3293436">&amp;</span>&nbsp;<span class="ident" id="3293438">caseMask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293449">if</span>&nbsp;<span class="ident" id="3293452">upper</span>&nbsp;<span class="op" id="3293458">&lt;</span>&nbsp;<span class="string" id="3293460">&#39;A&#39;</span>&nbsp;<span class="op" id="3293464">||</span>&nbsp;<span class="ident" id="3293467">upper</span>&nbsp;<span class="op" id="3293473">&gt;</span>&nbsp;<span class="string" id="3293475">&#39;Z&#39;</span>&nbsp;<span class="op" id="3293479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293484">nonLetter</span>&nbsp;<span class="op" id="3293494">=</span>&nbsp;<span class="builtintype" id="3293496">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293503">}</span>&nbsp;<span class="keyword" id="3293505">else</span>&nbsp;<span class="keyword" id="3293510">if</span>&nbsp;<span class="ident" id="3293513">upper</span>&nbsp;<span class="op" id="3293519">==</span>&nbsp;<span class="string" id="3293522">&#39;K&#39;</span>&nbsp;<span class="op" id="3293526">||</span>&nbsp;<span class="ident" id="3293529">upper</span>&nbsp;<span class="op" id="3293535">==</span>&nbsp;<span class="string" id="3293538">&#39;S&#39;</span>&nbsp;<span class="op" id="3293542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3293547">//&nbsp;See&nbsp;above&nbsp;for&nbsp;why&nbsp;these&nbsp;letters&nbsp;are&nbsp;special.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3293598">special</span>&nbsp;<span class="op" id="3293606">=</span>&nbsp;<span class="builtintype" id="3293608">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293621">if</span>&nbsp;<span class="ident" id="3293624">special</span>&nbsp;<span class="op" id="3293632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293636">return</span>&nbsp;<span class="ident" id="3293643">equalFoldRight</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293662">if</span>&nbsp;<span class="ident" id="3293665">nonLetter</span>&nbsp;<span class="op" id="3293675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293679">return</span>&nbsp;<span class="ident" id="3293686">asciiEqualFold</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3293702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3293705">return</span>&nbsp;<span class="ident" id="3293712">simpleLetterEqualFold</span><br>
<span class="lineno">55</span><span class="op" id="3293734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3293737">//&nbsp;equalFoldRight&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;when&nbsp;s&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3293804">//&nbsp;known&nbsp;to&nbsp;be&nbsp;all&nbsp;ASCII&nbsp;(including&nbsp;punctuation),&nbsp;but&nbsp;contains&nbsp;an&nbsp;&#39;s&#39;,</span><br>
<span class="lineno"></span><span class="comment" id="3293875">//&nbsp;&#39;S&#39;,&nbsp;&#39;k&#39;,&nbsp;or&nbsp;&#39;K&#39;,&nbsp;requiring&nbsp;a&nbsp;Unicode&nbsp;fold&nbsp;on&nbsp;the&nbsp;bytes&nbsp;in&nbsp;t.</span><br>
<span class="lineno">60</span><span class="comment" id="3293940">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3293969">func</span>&nbsp;<span class="ident" id="3293974">equalFoldRight</span><span class="op" id="3293988">(</span><span class="ident" id="3293989">s</span><span class="op" id="3293990">,</span>&nbsp;<span class="ident" id="3293992">t</span>&nbsp;<span class="op" id="3293994">[</span><span class="op" id="3293995">]</span><span class="builtintype" id="3293996">byte</span><span class="op" id="3294000">)</span>&nbsp;<span class="builtintype" id="3294002">bool</span>&nbsp;<span class="op" id="3294007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294010">for</span>&nbsp;<span class="ident" id="3294014">_</span><span class="op" id="3294015">,</span>&nbsp;<span class="ident" id="3294017">sb</span>&nbsp;<span class="op" id="3294020">:=</span>&nbsp;<span class="keyword" id="3294023">range</span>&nbsp;<span class="ident" id="3294029">s</span>&nbsp;<span class="op" id="3294031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294035">if</span>&nbsp;<span class="builtinfunc" id="3294038">len</span><span class="op" id="3294041">(</span><span class="ident" id="3294042">t</span><span class="op" id="3294043">)</span>&nbsp;<span class="op" id="3294045">==</span>&nbsp;<span class="num" id="3294048">0</span>&nbsp;<span class="op" id="3294050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294055">return</span>&nbsp;<span class="builtintype" id="3294062">false</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3294074">tb</span>&nbsp;<span class="op" id="3294077">:=</span>&nbsp;<span class="ident" id="3294080">t</span><span class="op" id="3294081">[</span><span class="num" id="3294082">0</span><span class="op" id="3294083">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294087">if</span>&nbsp;<span class="ident" id="3294090">tb</span>&nbsp;<span class="op" id="3294093">&lt;</span>&nbsp;<span class="ident" id="3294095">utf8</span><span class="op" id="3294099">.</span><span class="ident" id="3294100">RuneSelf</span>&nbsp;<span class="op" id="3294109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294114">if</span>&nbsp;<span class="ident" id="3294117">sb</span>&nbsp;<span class="op" id="3294120">!=</span>&nbsp;<span class="ident" id="3294123">tb</span>&nbsp;<span class="op" id="3294126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3294132">sbUpper</span>&nbsp;<span class="op" id="3294140">:=</span>&nbsp;<span class="ident" id="3294143">sb</span>&nbsp;<span class="op" id="3294146">&amp;</span>&nbsp;<span class="ident" id="3294148">caseMask</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294161">if</span>&nbsp;<span class="string" id="3294164">&#39;A&#39;</span>&nbsp;<span class="op" id="3294168">&lt;=</span>&nbsp;<span class="ident" id="3294171">sbUpper</span>&nbsp;<span class="op" id="3294179">&amp;&amp;</span>&nbsp;<span class="ident" id="3294182">sbUpper</span>&nbsp;<span class="op" id="3294190">&lt;=</span>&nbsp;<span class="string" id="3294193">&#39;Z&#39;</span>&nbsp;<span class="op" id="3294197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294204">if</span>&nbsp;<span class="ident" id="3294207">sbUpper</span>&nbsp;<span class="op" id="3294215">!=</span>&nbsp;<span class="ident" id="3294218">tb</span><span class="op" id="3294220">&amp;</span><span class="ident" id="3294221">caseMask</span>&nbsp;<span class="op" id="3294230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294238">return</span>&nbsp;<span class="builtintype" id="3294245">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294262">}</span>&nbsp;<span class="keyword" id="3294264">else</span>&nbsp;<span class="op" id="3294269">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294276">return</span>&nbsp;<span class="builtintype" id="3294283">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3294303">t</span>&nbsp;<span class="op" id="3294305">=</span>&nbsp;<span class="ident" id="3294307">t</span><span class="op" id="3294308">[</span><span class="num" id="3294309">1</span><span class="op" id="3294310">:</span><span class="op" id="3294311">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294316">continue</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3294331">//&nbsp;sb&nbsp;is&nbsp;ASCII&nbsp;and&nbsp;t&nbsp;is&nbsp;not.&nbsp;t&nbsp;must&nbsp;be&nbsp;either&nbsp;kelvin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3294386">//&nbsp;sign&nbsp;or&nbsp;long&nbsp;s;&nbsp;sb&nbsp;must&nbsp;be&nbsp;s,&nbsp;S,&nbsp;k,&nbsp;or&nbsp;K.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3294433">tr</span><span class="op" id="3294435">,</span>&nbsp;<span class="ident" id="3294437">size</span>&nbsp;<span class="op" id="3294442">:=</span>&nbsp;<span class="ident" id="3294445">utf8</span><span class="op" id="3294449">.</span><span class="ident" id="3294450">DecodeRune</span><span class="op" id="3294460">(</span><span class="ident" id="3294461">t</span><span class="op" id="3294462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294466">switch</span>&nbsp;<span class="ident" id="3294473">sb</span>&nbsp;<span class="op" id="3294476">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294480">case</span>&nbsp;<span class="string" id="3294485">&#39;s&#39;</span><span class="op" id="3294488">,</span>&nbsp;<span class="string" id="3294490">&#39;S&#39;</span><span class="op" id="3294493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294498">if</span>&nbsp;<span class="ident" id="3294501">tr</span>&nbsp;<span class="op" id="3294504">!=</span>&nbsp;<span class="ident" id="3294507">smallLongEss</span>&nbsp;<span class="op" id="3294520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294526">return</span>&nbsp;<span class="builtintype" id="3294533">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294546">case</span>&nbsp;<span class="string" id="3294551">&#39;k&#39;</span><span class="op" id="3294554">,</span>&nbsp;<span class="string" id="3294556">&#39;K&#39;</span><span class="op" id="3294559">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294564">if</span>&nbsp;<span class="ident" id="3294567">tr</span>&nbsp;<span class="op" id="3294570">!=</span>&nbsp;<span class="ident" id="3294573">kelvin</span>&nbsp;<span class="op" id="3294580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294586">return</span>&nbsp;<span class="builtintype" id="3294593">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294606">default</span><span class="op" id="3294613">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294618">return</span>&nbsp;<span class="builtintype" id="3294625">false</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3294637">t</span>&nbsp;<span class="op" id="3294639">=</span>&nbsp;<span class="ident" id="3294641">t</span><span class="op" id="3294642">[</span><span class="ident" id="3294643">size</span><span class="op" id="3294647">:</span><span class="op" id="3294648">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294655">if</span>&nbsp;<span class="builtinfunc" id="3294658">len</span><span class="op" id="3294661">(</span><span class="ident" id="3294662">t</span><span class="op" id="3294663">)</span>&nbsp;<span class="op" id="3294665">&gt;</span>&nbsp;<span class="num" id="3294667">0</span>&nbsp;<span class="op" id="3294669">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294673">return</span>&nbsp;<span class="builtintype" id="3294680">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294690">return</span>&nbsp;<span class="builtintype" id="3294697">true</span><br>
<span class="lineno"></span><span class="op" id="3294702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3294705">//&nbsp;asciiEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for&nbsp;use&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3294775">//&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;(but&nbsp;may&nbsp;contain&nbsp;non-letters)&nbsp;and&nbsp;contains&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="3294839">//&nbsp;special-folding&nbsp;letters.</span><br>
<span class="lineno"></span><span class="comment" id="3294867">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3294896">func</span>&nbsp;<span class="ident" id="3294901">asciiEqualFold</span><span class="op" id="3294915">(</span><span class="ident" id="3294916">s</span><span class="op" id="3294917">,</span>&nbsp;<span class="ident" id="3294919">t</span>&nbsp;<span class="op" id="3294921">[</span><span class="op" id="3294922">]</span><span class="builtintype" id="3294923">byte</span><span class="op" id="3294927">)</span>&nbsp;<span class="builtintype" id="3294929">bool</span>&nbsp;<span class="op" id="3294934">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294937">if</span>&nbsp;<span class="builtinfunc" id="3294940">len</span><span class="op" id="3294943">(</span><span class="ident" id="3294944">s</span><span class="op" id="3294945">)</span>&nbsp;<span class="op" id="3294947">!=</span>&nbsp;<span class="builtinfunc" id="3294950">len</span><span class="op" id="3294953">(</span><span class="ident" id="3294954">t</span><span class="op" id="3294955">)</span>&nbsp;<span class="op" id="3294957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294961">return</span>&nbsp;<span class="builtintype" id="3294968">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3294975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3294978">for</span>&nbsp;<span class="ident" id="3294982">i</span><span class="op" id="3294983">,</span>&nbsp;<span class="ident" id="3294985">sb</span>&nbsp;<span class="op" id="3294988">:=</span>&nbsp;<span class="keyword" id="3294991">range</span>&nbsp;<span class="ident" id="3294997">s</span>&nbsp;<span class="op" id="3294999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3295003">tb</span>&nbsp;<span class="op" id="3295006">:=</span>&nbsp;<span class="ident" id="3295009">t</span><span class="op" id="3295010">[</span><span class="ident" id="3295011">i</span><span class="op" id="3295012">]</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295016">if</span>&nbsp;<span class="ident" id="3295019">sb</span>&nbsp;<span class="op" id="3295022">==</span>&nbsp;<span class="ident" id="3295025">tb</span>&nbsp;<span class="op" id="3295028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295033">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295048">if</span>&nbsp;<span class="op" id="3295051">(</span><span class="string" id="3295052">&#39;a&#39;</span>&nbsp;<span class="op" id="3295056">&lt;=</span>&nbsp;<span class="ident" id="3295059">sb</span>&nbsp;<span class="op" id="3295062">&amp;&amp;</span>&nbsp;<span class="ident" id="3295065">sb</span>&nbsp;<span class="op" id="3295068">&lt;=</span>&nbsp;<span class="string" id="3295071">&#39;z&#39;</span><span class="op" id="3295074">)</span>&nbsp;<span class="op" id="3295076">||</span>&nbsp;<span class="op" id="3295079">(</span><span class="string" id="3295080">&#39;A&#39;</span>&nbsp;<span class="op" id="3295084">&lt;=</span>&nbsp;<span class="ident" id="3295087">sb</span>&nbsp;<span class="op" id="3295090">&amp;&amp;</span>&nbsp;<span class="ident" id="3295093">sb</span>&nbsp;<span class="op" id="3295096">&lt;=</span>&nbsp;<span class="string" id="3295099">&#39;Z&#39;</span><span class="op" id="3295102">)</span>&nbsp;<span class="op" id="3295104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295109">if</span>&nbsp;<span class="ident" id="3295112">sb</span><span class="op" id="3295114">&amp;</span><span class="ident" id="3295115">caseMask</span>&nbsp;<span class="op" id="3295124">!=</span>&nbsp;<span class="ident" id="3295127">tb</span><span class="op" id="3295129">&amp;</span><span class="ident" id="3295130">caseMask</span>&nbsp;<span class="op" id="3295139">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295145">return</span>&nbsp;<span class="builtintype" id="3295152">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295165">}</span>&nbsp;<span class="keyword" id="3295167">else</span>&nbsp;<span class="op" id="3295172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295177">return</span>&nbsp;<span class="builtintype" id="3295184">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295192">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295198">return</span>&nbsp;<span class="builtintype" id="3295205">true</span><br>
<span class="lineno"></span><span class="op" id="3295210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3295213">//&nbsp;simpleLetterEqualFold&nbsp;is&nbsp;a&nbsp;specialization&nbsp;of&nbsp;bytes.EqualFold&nbsp;for</span><br>
<span class="lineno">130</span><span class="comment" id="3295281">//&nbsp;use&nbsp;when&nbsp;s&nbsp;is&nbsp;all&nbsp;ASCII&nbsp;letters&nbsp;(no&nbsp;underscores,&nbsp;etc)&nbsp;and&nbsp;also</span><br>
<span class="lineno"></span><span class="comment" id="3295347">//&nbsp;doesn&#39;t&nbsp;contain&nbsp;&#39;k&#39;,&nbsp;&#39;K&#39;,&nbsp;&#39;s&#39;,&nbsp;or&nbsp;&#39;S&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="3295389">//&nbsp;See&nbsp;comments&nbsp;on&nbsp;foldFunc.</span><br>
<span class="lineno"></span><span class="keyword" id="3295418">func</span>&nbsp;<span class="ident" id="3295423">simpleLetterEqualFold</span><span class="op" id="3295444">(</span><span class="ident" id="3295445">s</span><span class="op" id="3295446">,</span>&nbsp;<span class="ident" id="3295448">t</span>&nbsp;<span class="op" id="3295450">[</span><span class="op" id="3295451">]</span><span class="builtintype" id="3295452">byte</span><span class="op" id="3295456">)</span>&nbsp;<span class="builtintype" id="3295458">bool</span>&nbsp;<span class="op" id="3295463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295466">if</span>&nbsp;<span class="builtinfunc" id="3295469">len</span><span class="op" id="3295472">(</span><span class="ident" id="3295473">s</span><span class="op" id="3295474">)</span>&nbsp;<span class="op" id="3295476">!=</span>&nbsp;<span class="builtinfunc" id="3295479">len</span><span class="op" id="3295482">(</span><span class="ident" id="3295483">t</span><span class="op" id="3295484">)</span>&nbsp;<span class="op" id="3295486">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295490">return</span>&nbsp;<span class="builtintype" id="3295497">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295507">for</span>&nbsp;<span class="ident" id="3295511">i</span><span class="op" id="3295512">,</span>&nbsp;<span class="ident" id="3295514">b</span>&nbsp;<span class="op" id="3295516">:=</span>&nbsp;<span class="keyword" id="3295519">range</span>&nbsp;<span class="ident" id="3295525">s</span>&nbsp;<span class="op" id="3295527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295531">if</span>&nbsp;<span class="ident" id="3295534">b</span><span class="op" id="3295535">&amp;</span><span class="ident" id="3295536">caseMask</span>&nbsp;<span class="op" id="3295545">!=</span>&nbsp;<span class="ident" id="3295548">t</span><span class="op" id="3295549">[</span><span class="ident" id="3295550">i</span><span class="op" id="3295551">]</span><span class="op" id="3295552">&amp;</span><span class="ident" id="3295553">caseMask</span>&nbsp;<span class="op" id="3295562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295567">return</span>&nbsp;<span class="builtintype" id="3295574">false</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3295585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3295588">return</span>&nbsp;<span class="builtintype" id="3295595">true</span><br>
<span class="lineno"></span><span class="op" id="3295600">}</span>
</div>
</body>
</html>
