<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html" class="current">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2726042">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2726097">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2726151">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2726202">package</span>&nbsp;<span class="ident" id="2726210">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2726219">import</span>&nbsp;<span class="op" id="2726226">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2726229">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2726237">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2726248">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2726257">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2726260">const</span>&nbsp;<span class="ident" id="2726266">ptrSize</span>&nbsp;<span class="op" id="2726274">=</span>&nbsp;<span class="ident" id="2726276">unsafe</span><span class="op" id="2726282">.</span><span class="ident" id="2726283">Sizeof</span><span class="op" id="2726289">(</span><span class="op" id="2726290">(</span><span class="op" id="2726291">*</span><span class="builtintype" id="2726292">byte</span><span class="op" id="2726296">)</span><span class="op" id="2726297">(</span><span class="builtintype" id="2726298">nil</span><span class="op" id="2726301">)</span><span class="op" id="2726302">)</span><br>
<span class="lineno"></span><span class="keyword" id="2726304">const</span>&nbsp;<span class="ident" id="2726310">cannotSet</span>&nbsp;<span class="op" id="2726320">=</span>&nbsp;<span class="string" id="2726322">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2726380">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2726432">//</span><br>
<span class="lineno"></span><span class="comment" id="2726435">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2726499">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2726558">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2726618">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2726670">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2726732">//</span><br>
<span class="lineno"></span><span class="comment" id="2726735">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2726774">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2726844">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2726921">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2726982">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2727050">//</span><br>
<span class="lineno">30</span><span class="comment" id="2727053">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2727126">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2727197">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2727219">type</span>&nbsp;<span class="ident" id="2727224">Value</span>&nbsp;<span class="keyword" id="2727230">struct</span>&nbsp;<span class="op" id="2727237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727240">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2727300">typ</span>&nbsp;<span class="op" id="2727304">*</span><span class="ident" id="2727305">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727313">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727379">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2727445">ptr</span>&nbsp;<span class="ident" id="2727449">unsafe</span><span class="op" id="2727455">.</span><span class="ident" id="2727456">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727466">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727507">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727542">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727600">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727649">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727703">//&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727742">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727793">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727847">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727914">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2727984">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728047">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2728054">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2728112">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2728181">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2728248">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2728316">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2728347">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2728350">type</span>&nbsp;<span class="ident" id="2728355">flag</span>&nbsp;<span class="builtintype" id="2728360">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2728369">const</span>&nbsp;<span class="op" id="2728375">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728378">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2728399">=</span>&nbsp;<span class="num" id="2728401">5</span>&nbsp;<span class="comment" id="2728403">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728426">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728442">flag</span>&nbsp;<span class="op" id="2728447">=</span>&nbsp;<span class="num" id="2728449">1</span><span class="op" id="2728450">&lt;&lt;</span><span class="ident" id="2728452">flagKindWidth</span>&nbsp;<span class="op" id="2728466">-</span>&nbsp;<span class="num" id="2728468">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728471">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728487">flag</span>&nbsp;<span class="op" id="2728492">=</span>&nbsp;<span class="num" id="2728494">1</span>&nbsp;<span class="op" id="2728496">&lt;&lt;</span>&nbsp;<span class="num" id="2728499">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728502">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728518">flag</span>&nbsp;<span class="op" id="2728523">=</span>&nbsp;<span class="num" id="2728525">1</span>&nbsp;<span class="op" id="2728527">&lt;&lt;</span>&nbsp;<span class="num" id="2728530">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728533">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728549">flag</span>&nbsp;<span class="op" id="2728554">=</span>&nbsp;<span class="num" id="2728556">1</span>&nbsp;<span class="op" id="2728558">&lt;&lt;</span>&nbsp;<span class="num" id="2728561">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728564">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728580">flag</span>&nbsp;<span class="op" id="2728585">=</span>&nbsp;<span class="num" id="2728587">1</span>&nbsp;<span class="op" id="2728589">&lt;&lt;</span>&nbsp;<span class="num" id="2728592">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2728595">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2728616">=</span>&nbsp;<span class="num" id="2728618">9</span><br>
<span class="lineno"></span><span class="op" id="2728620">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2728623">func</span>&nbsp;<span class="op" id="2728628">(</span><span class="ident" id="2728629">f</span>&nbsp;<span class="ident" id="2728631">flag</span><span class="op" id="2728635">)</span>&nbsp;<span class="ident" id="2728637">kind</span><span class="op" id="2728641">(</span><span class="op" id="2728642">)</span>&nbsp;<span class="ident" id="2728644">Kind</span>&nbsp;<span class="op" id="2728649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2728652">return</span>&nbsp;<span class="ident" id="2728659">Kind</span><span class="op" id="2728663">(</span><span class="ident" id="2728664">f</span>&nbsp;<span class="op" id="2728666">&amp;</span>&nbsp;<span class="ident" id="2728668">flagKindMask</span><span class="op" id="2728680">)</span><br>
<span class="lineno">75</span><span class="op" id="2728682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2728685">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2728745">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2728804">func</span>&nbsp;<span class="op" id="2728809">(</span><span class="ident" id="2728810">v</span>&nbsp;<span class="ident" id="2728812">Value</span><span class="op" id="2728817">)</span>&nbsp;<span class="ident" id="2728819">pointer</span><span class="op" id="2728826">(</span><span class="op" id="2728827">)</span>&nbsp;<span class="ident" id="2728829">unsafe</span><span class="op" id="2728835">.</span><span class="ident" id="2728836">Pointer</span>&nbsp;<span class="op" id="2728844">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2728847">if</span>&nbsp;<span class="ident" id="2728850">v</span><span class="op" id="2728851">.</span><span class="ident" id="2728852">typ</span><span class="op" id="2728855">.</span><span class="ident" id="2728856">size</span>&nbsp;<span class="op" id="2728861">!=</span>&nbsp;<span class="ident" id="2728864">ptrSize</span>&nbsp;<span class="op" id="2728872">||</span>&nbsp;<span class="op" id="2728875">!</span><span class="ident" id="2728876">v</span><span class="op" id="2728877">.</span><span class="ident" id="2728878">typ</span><span class="op" id="2728881">.</span><span class="ident" id="2728882">pointers</span><span class="op" id="2728890">(</span><span class="op" id="2728891">)</span>&nbsp;<span class="op" id="2728893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2728897">panic</span><span class="op" id="2728902">(</span><span class="string" id="2728903">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2728946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2728949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2728952">if</span>&nbsp;<span class="ident" id="2728955">v</span><span class="op" id="2728956">.</span><span class="ident" id="2728957">flag</span><span class="op" id="2728961">&amp;</span><span class="ident" id="2728962">flagIndir</span>&nbsp;<span class="op" id="2728972">!=</span>&nbsp;<span class="num" id="2728975">0</span>&nbsp;<span class="op" id="2728977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2728981">return</span>&nbsp;<span class="op" id="2728988">*</span><span class="op" id="2728989">(</span><span class="op" id="2728990">*</span><span class="ident" id="2728991">unsafe</span><span class="op" id="2728997">.</span><span class="ident" id="2728998">Pointer</span><span class="op" id="2729005">)</span><span class="op" id="2729006">(</span><span class="ident" id="2729007">v</span><span class="op" id="2729008">.</span><span class="ident" id="2729009">ptr</span><span class="op" id="2729012">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2729015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729018">return</span>&nbsp;<span class="ident" id="2729025">v</span><span class="op" id="2729026">.</span><span class="ident" id="2729027">ptr</span><br>
<span class="lineno"></span><span class="op" id="2729031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2729034">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2729082">func</span>&nbsp;<span class="ident" id="2729087">packEface</span><span class="op" id="2729096">(</span><span class="ident" id="2729097">v</span>&nbsp;<span class="ident" id="2729099">Value</span><span class="op" id="2729104">)</span>&nbsp;<span class="keyword" id="2729106">interface</span><span class="op" id="2729115">{</span><span class="op" id="2729116">}</span>&nbsp;<span class="op" id="2729118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729121">t</span>&nbsp;<span class="op" id="2729123">:=</span>&nbsp;<span class="ident" id="2729126">v</span><span class="op" id="2729127">.</span><span class="ident" id="2729128">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729133">var</span>&nbsp;<span class="ident" id="2729137">i</span>&nbsp;<span class="keyword" id="2729139">interface</span><span class="op" id="2729148">{</span><span class="op" id="2729149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729152">e</span>&nbsp;<span class="op" id="2729154">:=</span>&nbsp;<span class="op" id="2729157">(</span><span class="op" id="2729158">*</span><span class="ident" id="2729159">emptyInterface</span><span class="op" id="2729173">)</span><span class="op" id="2729174">(</span><span class="ident" id="2729175">unsafe</span><span class="op" id="2729181">.</span><span class="ident" id="2729182">Pointer</span><span class="op" id="2729189">(</span><span class="op" id="2729190">&amp;</span><span class="ident" id="2729191">i</span><span class="op" id="2729192">)</span><span class="op" id="2729193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729196">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729250">switch</span>&nbsp;<span class="op" id="2729257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729260">case</span>&nbsp;<span class="ident" id="2729265">ifaceIndir</span><span class="op" id="2729275">(</span><span class="ident" id="2729276">t</span><span class="op" id="2729277">)</span><span class="op" id="2729278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729282">if</span>&nbsp;<span class="ident" id="2729285">v</span><span class="op" id="2729286">.</span><span class="ident" id="2729287">flag</span><span class="op" id="2729291">&amp;</span><span class="ident" id="2729292">flagIndir</span>&nbsp;<span class="op" id="2729302">==</span>&nbsp;<span class="num" id="2729305">0</span>&nbsp;<span class="op" id="2729307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2729312">panic</span><span class="op" id="2729317">(</span><span class="string" id="2729318">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2729329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2729333">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729337">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729399">ptr</span>&nbsp;<span class="op" id="2729403">:=</span>&nbsp;<span class="ident" id="2729406">v</span><span class="op" id="2729407">.</span><span class="ident" id="2729408">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729414">if</span>&nbsp;<span class="ident" id="2729417">v</span><span class="op" id="2729418">.</span><span class="ident" id="2729419">flag</span><span class="op" id="2729423">&amp;</span><span class="ident" id="2729424">flagAddr</span>&nbsp;<span class="op" id="2729433">!=</span>&nbsp;<span class="num" id="2729436">0</span>&nbsp;<span class="op" id="2729438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729443">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729496">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729539">c</span>&nbsp;<span class="op" id="2729541">:=</span>&nbsp;<span class="ident" id="2729544">unsafe_New</span><span class="op" id="2729554">(</span><span class="ident" id="2729555">t</span><span class="op" id="2729556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729561">memmove</span><span class="op" id="2729568">(</span><span class="ident" id="2729569">c</span><span class="op" id="2729570">,</span>&nbsp;<span class="ident" id="2729572">ptr</span><span class="op" id="2729575">,</span>&nbsp;<span class="ident" id="2729577">t</span><span class="op" id="2729578">.</span><span class="ident" id="2729579">size</span><span class="op" id="2729583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729588">ptr</span>&nbsp;<span class="op" id="2729592">=</span>&nbsp;<span class="ident" id="2729594">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2729598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729602">e</span><span class="op" id="2729603">.</span><span class="ident" id="2729604">word</span>&nbsp;<span class="op" id="2729609">=</span>&nbsp;<span class="ident" id="2729611">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729616">case</span>&nbsp;<span class="ident" id="2729621">v</span><span class="op" id="2729622">.</span><span class="ident" id="2729623">flag</span><span class="op" id="2729627">&amp;</span><span class="ident" id="2729628">flagIndir</span>&nbsp;<span class="op" id="2729638">!=</span>&nbsp;<span class="num" id="2729641">0</span><span class="op" id="2729642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729646">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729704">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729765">e</span><span class="op" id="2729766">.</span><span class="ident" id="2729767">word</span>&nbsp;<span class="op" id="2729772">=</span>&nbsp;<span class="op" id="2729774">*</span><span class="op" id="2729775">(</span><span class="op" id="2729776">*</span><span class="ident" id="2729777">unsafe</span><span class="op" id="2729783">.</span><span class="ident" id="2729784">Pointer</span><span class="op" id="2729791">)</span><span class="op" id="2729792">(</span><span class="ident" id="2729793">v</span><span class="op" id="2729794">.</span><span class="ident" id="2729795">ptr</span><span class="op" id="2729798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2729801">default</span><span class="op" id="2729808">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729812">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2729859">e</span><span class="op" id="2729860">.</span><span class="ident" id="2729861">word</span>&nbsp;<span class="op" id="2729866">=</span>&nbsp;<span class="ident" id="2729868">v</span><span class="op" id="2729869">.</span><span class="ident" id="2729870">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2729875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729878">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2729942">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2730009">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2730078">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730099">e</span><span class="op" id="2730100">.</span><span class="ident" id="2730101">typ</span>&nbsp;<span class="op" id="2730105">=</span>&nbsp;<span class="ident" id="2730107">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730110">return</span>&nbsp;<span class="ident" id="2730117">i</span><br>
<span class="lineno"></span><span class="op" id="2730119">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2730122">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2730180">func</span>&nbsp;<span class="ident" id="2730185">unpackEface</span><span class="op" id="2730196">(</span><span class="ident" id="2730197">i</span>&nbsp;<span class="keyword" id="2730199">interface</span><span class="op" id="2730208">{</span><span class="op" id="2730209">}</span><span class="op" id="2730210">)</span>&nbsp;<span class="ident" id="2730212">Value</span>&nbsp;<span class="op" id="2730218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730221">e</span>&nbsp;<span class="op" id="2730223">:=</span>&nbsp;<span class="op" id="2730226">(</span><span class="op" id="2730227">*</span><span class="ident" id="2730228">emptyInterface</span><span class="op" id="2730242">)</span><span class="op" id="2730243">(</span><span class="ident" id="2730244">unsafe</span><span class="op" id="2730250">.</span><span class="ident" id="2730251">Pointer</span><span class="op" id="2730258">(</span><span class="op" id="2730259">&amp;</span><span class="ident" id="2730260">i</span><span class="op" id="2730261">)</span><span class="op" id="2730262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2730265">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730346">t</span>&nbsp;<span class="op" id="2730348">:=</span>&nbsp;<span class="ident" id="2730351">e</span><span class="op" id="2730352">.</span><span class="ident" id="2730353">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730358">if</span>&nbsp;<span class="ident" id="2730361">t</span>&nbsp;<span class="op" id="2730363">==</span>&nbsp;<span class="builtintype" id="2730366">nil</span>&nbsp;<span class="op" id="2730370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730374">return</span>&nbsp;<span class="ident" id="2730381">Value</span><span class="op" id="2730386">{</span><span class="op" id="2730387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2730390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730393">f</span>&nbsp;<span class="op" id="2730395">:=</span>&nbsp;<span class="ident" id="2730398">flag</span><span class="op" id="2730402">(</span><span class="ident" id="2730403">t</span><span class="op" id="2730404">.</span><span class="ident" id="2730405">Kind</span><span class="op" id="2730409">(</span><span class="op" id="2730410">)</span><span class="op" id="2730411">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730414">if</span>&nbsp;<span class="ident" id="2730417">ifaceIndir</span><span class="op" id="2730427">(</span><span class="ident" id="2730428">t</span><span class="op" id="2730429">)</span>&nbsp;<span class="op" id="2730431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730435">f</span>&nbsp;<span class="op" id="2730437">|=</span>&nbsp;<span class="ident" id="2730440">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2730451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730454">return</span>&nbsp;<span class="ident" id="2730461">Value</span><span class="op" id="2730466">{</span><span class="ident" id="2730467">t</span><span class="op" id="2730468">,</span>&nbsp;<span class="ident" id="2730470">unsafe</span><span class="op" id="2730476">.</span><span class="ident" id="2730477">Pointer</span><span class="op" id="2730484">(</span><span class="ident" id="2730485">e</span><span class="op" id="2730486">.</span><span class="ident" id="2730487">word</span><span class="op" id="2730491">)</span><span class="op" id="2730492">,</span>&nbsp;<span class="ident" id="2730494">f</span><span class="op" id="2730495">}</span><br>
<span class="lineno"></span><span class="op" id="2730497">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2730500">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2730557">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2730621">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2730659">type</span>&nbsp;<span class="ident" id="2730664">ValueError</span>&nbsp;<span class="keyword" id="2730675">struct</span>&nbsp;<span class="op" id="2730682">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730685">Method</span>&nbsp;<span class="builtintype" id="2730692">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2730700">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2730707">Kind</span><br>
<span class="lineno"></span><span class="op" id="2730712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2730715">func</span>&nbsp;<span class="op" id="2730720">(</span><span class="ident" id="2730721">e</span>&nbsp;<span class="op" id="2730723">*</span><span class="ident" id="2730724">ValueError</span><span class="op" id="2730734">)</span>&nbsp;<span class="ident" id="2730736">Error</span><span class="op" id="2730741">(</span><span class="op" id="2730742">)</span>&nbsp;<span class="builtintype" id="2730744">string</span>&nbsp;<span class="op" id="2730751">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730754">if</span>&nbsp;<span class="ident" id="2730757">e</span><span class="op" id="2730758">.</span><span class="ident" id="2730759">Kind</span>&nbsp;<span class="op" id="2730764">==</span>&nbsp;<span class="num" id="2730767">0</span>&nbsp;<span class="op" id="2730769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730773">return</span>&nbsp;<span class="string" id="2730780">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2730800">+</span>&nbsp;<span class="ident" id="2730802">e</span><span class="op" id="2730803">.</span><span class="ident" id="2730804">Method</span>&nbsp;<span class="op" id="2730811">+</span>&nbsp;<span class="string" id="2730813">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2730831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2730834">return</span>&nbsp;<span class="string" id="2730841">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2730861">+</span>&nbsp;<span class="ident" id="2730863">e</span><span class="op" id="2730864">.</span><span class="ident" id="2730865">Method</span>&nbsp;<span class="op" id="2730872">+</span>&nbsp;<span class="string" id="2730874">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2730881">+</span>&nbsp;<span class="ident" id="2730883">e</span><span class="op" id="2730884">.</span><span class="ident" id="2730885">Kind</span><span class="op" id="2730889">.</span><span class="ident" id="2730890">String</span><span class="op" id="2730896">(</span><span class="op" id="2730897">)</span>&nbsp;<span class="op" id="2730899">+</span>&nbsp;<span class="string" id="2730901">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2730910">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2730913">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2730967">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2731008">func</span>&nbsp;<span class="ident" id="2731013">methodName</span><span class="op" id="2731023">(</span><span class="op" id="2731024">)</span>&nbsp;<span class="builtintype" id="2731026">string</span>&nbsp;<span class="op" id="2731033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731036">pc</span><span class="op" id="2731038">,</span>&nbsp;<span class="ident" id="2731040">_</span><span class="op" id="2731041">,</span>&nbsp;<span class="ident" id="2731043">_</span><span class="op" id="2731044">,</span>&nbsp;<span class="ident" id="2731046">_</span>&nbsp;<span class="op" id="2731048">:=</span>&nbsp;<span class="ident" id="2731051">runtime</span><span class="op" id="2731058">.</span><span class="ident" id="2731059">Caller</span><span class="op" id="2731065">(</span><span class="num" id="2731066">2</span><span class="op" id="2731067">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731070">f</span>&nbsp;<span class="op" id="2731072">:=</span>&nbsp;<span class="ident" id="2731075">runtime</span><span class="op" id="2731082">.</span><span class="ident" id="2731083">FuncForPC</span><span class="op" id="2731092">(</span><span class="ident" id="2731093">pc</span><span class="op" id="2731095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2731098">if</span>&nbsp;<span class="ident" id="2731101">f</span>&nbsp;<span class="op" id="2731103">==</span>&nbsp;<span class="builtintype" id="2731106">nil</span>&nbsp;<span class="op" id="2731110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2731114">return</span>&nbsp;<span class="string" id="2731121">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2731139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2731142">return</span>&nbsp;<span class="ident" id="2731149">f</span><span class="op" id="2731150">.</span><span class="ident" id="2731151">Name</span><span class="op" id="2731155">(</span><span class="op" id="2731156">)</span><br>
<span class="lineno">165</span><span class="op" id="2731158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2731161">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2731219">type</span>&nbsp;<span class="ident" id="2731224">emptyInterface</span>&nbsp;<span class="keyword" id="2731239">struct</span>&nbsp;<span class="op" id="2731246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731249">typ</span>&nbsp;&nbsp;<span class="op" id="2731254">*</span><span class="ident" id="2731255">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731262">word</span>&nbsp;<span class="ident" id="2731267">unsafe</span><span class="op" id="2731273">.</span><span class="ident" id="2731274">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2731282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2731285">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2731356">type</span>&nbsp;<span class="ident" id="2731361">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2731379">struct</span>&nbsp;<span class="op" id="2731386">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2731389">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731422">itab</span>&nbsp;<span class="op" id="2731427">*</span><span class="keyword" id="2731428">struct</span>&nbsp;<span class="op" id="2731435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731439">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2731446">*</span><span class="ident" id="2731447">rtype</span>&nbsp;<span class="comment" id="2731453">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731480">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2731487">*</span><span class="ident" id="2731488">rtype</span>&nbsp;<span class="comment" id="2731494">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731521">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2731528">unsafe</span><span class="op" id="2731534">.</span><span class="ident" id="2731535">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731545">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2731552">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731560">unused</span>&nbsp;<span class="builtintype" id="2731567">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731575">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2731582">[</span><span class="num" id="2731583">100000</span><span class="op" id="2731589">]</span><span class="ident" id="2731590">unsafe</span><span class="op" id="2731596">.</span><span class="ident" id="2731597">Pointer</span>&nbsp;<span class="comment" id="2731605">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2731622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2731625">word</span>&nbsp;<span class="ident" id="2731630">unsafe</span><span class="op" id="2731636">.</span><span class="ident" id="2731637">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2731645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2731648">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2731694">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2731746">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2731803">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2731861">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2731920">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2731963">func</span>&nbsp;<span class="op" id="2731968">(</span><span class="ident" id="2731969">f</span>&nbsp;<span class="ident" id="2731971">flag</span><span class="op" id="2731975">)</span>&nbsp;<span class="ident" id="2731977">mustBe</span><span class="op" id="2731983">(</span><span class="ident" id="2731984">expected</span>&nbsp;<span class="ident" id="2731993">Kind</span><span class="op" id="2731997">)</span>&nbsp;<span class="op" id="2731999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732002">if</span>&nbsp;<span class="ident" id="2732005">f</span><span class="op" id="2732006">.</span><span class="ident" id="2732007">kind</span><span class="op" id="2732011">(</span><span class="op" id="2732012">)</span>&nbsp;<span class="op" id="2732014">!=</span>&nbsp;<span class="ident" id="2732017">expected</span>&nbsp;<span class="op" id="2732026">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732030">panic</span><span class="op" id="2732035">(</span><span class="op" id="2732036">&amp;</span><span class="ident" id="2732037">ValueError</span><span class="op" id="2732047">{</span><span class="ident" id="2732048">methodName</span><span class="op" id="2732058">(</span><span class="op" id="2732059">)</span><span class="op" id="2732060">,</span>&nbsp;<span class="ident" id="2732062">f</span><span class="op" id="2732063">.</span><span class="ident" id="2732064">kind</span><span class="op" id="2732068">(</span><span class="op" id="2732069">)</span><span class="op" id="2732070">}</span><span class="op" id="2732071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732074">}</span><br>
<span class="lineno"></span><span class="op" id="2732076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2732079">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2732151">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2732175">func</span>&nbsp;<span class="op" id="2732180">(</span><span class="ident" id="2732181">f</span>&nbsp;<span class="ident" id="2732183">flag</span><span class="op" id="2732187">)</span>&nbsp;<span class="ident" id="2732189">mustBeExported</span><span class="op" id="2732203">(</span><span class="op" id="2732204">)</span>&nbsp;<span class="op" id="2732206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732209">if</span>&nbsp;<span class="ident" id="2732212">f</span>&nbsp;<span class="op" id="2732214">==</span>&nbsp;<span class="num" id="2732217">0</span>&nbsp;<span class="op" id="2732219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732223">panic</span><span class="op" id="2732228">(</span><span class="op" id="2732229">&amp;</span><span class="ident" id="2732230">ValueError</span><span class="op" id="2732240">{</span><span class="ident" id="2732241">methodName</span><span class="op" id="2732251">(</span><span class="op" id="2732252">)</span><span class="op" id="2732253">,</span>&nbsp;<span class="num" id="2732255">0</span><span class="op" id="2732256">}</span><span class="op" id="2732257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732260">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732263">if</span>&nbsp;<span class="ident" id="2732266">f</span><span class="op" id="2732267">&amp;</span><span class="ident" id="2732268">flagRO</span>&nbsp;<span class="op" id="2732275">!=</span>&nbsp;<span class="num" id="2732278">0</span>&nbsp;<span class="op" id="2732280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732284">panic</span><span class="op" id="2732289">(</span><span class="string" id="2732290">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2732302">+</span>&nbsp;<span class="ident" id="2732304">methodName</span><span class="op" id="2732314">(</span><span class="op" id="2732315">)</span>&nbsp;<span class="op" id="2732317">+</span>&nbsp;<span class="string" id="2732319">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2732365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732368">}</span><br>
<span class="lineno"></span><span class="op" id="2732370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2732373">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2732447">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2732520">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2732549">func</span>&nbsp;<span class="op" id="2732554">(</span><span class="ident" id="2732555">f</span>&nbsp;<span class="ident" id="2732557">flag</span><span class="op" id="2732561">)</span>&nbsp;<span class="ident" id="2732563">mustBeAssignable</span><span class="op" id="2732579">(</span><span class="op" id="2732580">)</span>&nbsp;<span class="op" id="2732582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732585">if</span>&nbsp;<span class="ident" id="2732588">f</span>&nbsp;<span class="op" id="2732590">==</span>&nbsp;<span class="num" id="2732593">0</span>&nbsp;<span class="op" id="2732595">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732599">panic</span><span class="op" id="2732604">(</span><span class="op" id="2732605">&amp;</span><span class="ident" id="2732606">ValueError</span><span class="op" id="2732616">{</span><span class="ident" id="2732617">methodName</span><span class="op" id="2732627">(</span><span class="op" id="2732628">)</span><span class="op" id="2732629">,</span>&nbsp;<span class="ident" id="2732631">Invalid</span><span class="op" id="2732638">}</span><span class="op" id="2732639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2732645">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732694">if</span>&nbsp;<span class="ident" id="2732697">f</span><span class="op" id="2732698">&amp;</span><span class="ident" id="2732699">flagRO</span>&nbsp;<span class="op" id="2732706">!=</span>&nbsp;<span class="num" id="2732709">0</span>&nbsp;<span class="op" id="2732711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732715">panic</span><span class="op" id="2732720">(</span><span class="string" id="2732721">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2732733">+</span>&nbsp;<span class="ident" id="2732735">methodName</span><span class="op" id="2732745">(</span><span class="op" id="2732746">)</span>&nbsp;<span class="op" id="2732748">+</span>&nbsp;<span class="string" id="2732750">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2732796">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2732802">if</span>&nbsp;<span class="ident" id="2732805">f</span><span class="op" id="2732806">&amp;</span><span class="ident" id="2732807">flagAddr</span>&nbsp;<span class="op" id="2732816">==</span>&nbsp;<span class="num" id="2732819">0</span>&nbsp;<span class="op" id="2732821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2732825">panic</span><span class="op" id="2732830">(</span><span class="string" id="2732831">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2732843">+</span>&nbsp;<span class="ident" id="2732845">methodName</span><span class="op" id="2732855">(</span><span class="op" id="2732856">)</span>&nbsp;<span class="op" id="2732858">+</span>&nbsp;<span class="string" id="2732860">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2732888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2732891">}</span><br>
<span class="lineno"></span><span class="op" id="2732893">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2732896">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2732959">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2733000">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2733064">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2733126">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2733147">func</span>&nbsp;<span class="op" id="2733152">(</span><span class="ident" id="2733153">v</span>&nbsp;<span class="ident" id="2733155">Value</span><span class="op" id="2733160">)</span>&nbsp;<span class="ident" id="2733162">Addr</span><span class="op" id="2733166">(</span><span class="op" id="2733167">)</span>&nbsp;<span class="ident" id="2733169">Value</span>&nbsp;<span class="op" id="2733175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733178">if</span>&nbsp;<span class="ident" id="2733181">v</span><span class="op" id="2733182">.</span><span class="ident" id="2733183">flag</span><span class="op" id="2733187">&amp;</span><span class="ident" id="2733188">flagAddr</span>&nbsp;<span class="op" id="2733197">==</span>&nbsp;<span class="num" id="2733200">0</span>&nbsp;<span class="op" id="2733202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2733206">panic</span><span class="op" id="2733211">(</span><span class="string" id="2733212">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2733255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2733258">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733261">return</span>&nbsp;<span class="ident" id="2733268">Value</span><span class="op" id="2733273">{</span><span class="ident" id="2733274">v</span><span class="op" id="2733275">.</span><span class="ident" id="2733276">typ</span><span class="op" id="2733279">.</span><span class="ident" id="2733280">ptrTo</span><span class="op" id="2733285">(</span><span class="op" id="2733286">)</span><span class="op" id="2733287">,</span>&nbsp;<span class="ident" id="2733289">v</span><span class="op" id="2733290">.</span><span class="ident" id="2733291">ptr</span><span class="op" id="2733294">,</span>&nbsp;<span class="op" id="2733296">(</span><span class="ident" id="2733297">v</span><span class="op" id="2733298">.</span><span class="ident" id="2733299">flag</span>&nbsp;<span class="op" id="2733304">&amp;</span>&nbsp;<span class="ident" id="2733306">flagRO</span><span class="op" id="2733312">)</span>&nbsp;<span class="op" id="2733314">|</span>&nbsp;<span class="ident" id="2733316">flag</span><span class="op" id="2733320">(</span><span class="ident" id="2733321">Ptr</span><span class="op" id="2733324">)</span><span class="op" id="2733325">}</span><br>
<span class="lineno"></span><span class="op" id="2733327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2733330">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2733368">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2733406">func</span>&nbsp;<span class="op" id="2733411">(</span><span class="ident" id="2733412">v</span>&nbsp;<span class="ident" id="2733414">Value</span><span class="op" id="2733419">)</span>&nbsp;<span class="ident" id="2733421">Bool</span><span class="op" id="2733425">(</span><span class="op" id="2733426">)</span>&nbsp;<span class="builtintype" id="2733428">bool</span>&nbsp;<span class="op" id="2733433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2733436">v</span><span class="op" id="2733437">.</span><span class="ident" id="2733438">mustBe</span><span class="op" id="2733444">(</span><span class="ident" id="2733445">Bool</span><span class="op" id="2733449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733452">return</span>&nbsp;<span class="op" id="2733459">*</span><span class="op" id="2733460">(</span><span class="op" id="2733461">*</span><span class="builtintype" id="2733462">bool</span><span class="op" id="2733466">)</span><span class="op" id="2733467">(</span><span class="ident" id="2733468">v</span><span class="op" id="2733469">.</span><span class="ident" id="2733470">ptr</span><span class="op" id="2733473">)</span><br>
<span class="lineno"></span><span class="op" id="2733475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2733478">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2733517">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2733579">func</span>&nbsp;<span class="op" id="2733584">(</span><span class="ident" id="2733585">v</span>&nbsp;<span class="ident" id="2733587">Value</span><span class="op" id="2733592">)</span>&nbsp;<span class="ident" id="2733594">Bytes</span><span class="op" id="2733599">(</span><span class="op" id="2733600">)</span>&nbsp;<span class="op" id="2733602">[</span><span class="op" id="2733603">]</span><span class="builtintype" id="2733604">byte</span>&nbsp;<span class="op" id="2733609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2733612">v</span><span class="op" id="2733613">.</span><span class="ident" id="2733614">mustBe</span><span class="op" id="2733620">(</span><span class="ident" id="2733621">Slice</span><span class="op" id="2733626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733629">if</span>&nbsp;<span class="ident" id="2733632">v</span><span class="op" id="2733633">.</span><span class="ident" id="2733634">typ</span><span class="op" id="2733637">.</span><span class="ident" id="2733638">Elem</span><span class="op" id="2733642">(</span><span class="op" id="2733643">)</span><span class="op" id="2733644">.</span><span class="ident" id="2733645">Kind</span><span class="op" id="2733649">(</span><span class="op" id="2733650">)</span>&nbsp;<span class="op" id="2733652">!=</span>&nbsp;<span class="ident" id="2733655">Uint8</span>&nbsp;<span class="op" id="2733661">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2733665">panic</span><span class="op" id="2733670">(</span><span class="string" id="2733671">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2733710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2733713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2733716">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733774">return</span>&nbsp;<span class="op" id="2733781">*</span><span class="op" id="2733782">(</span><span class="op" id="2733783">*</span><span class="op" id="2733784">[</span><span class="op" id="2733785">]</span><span class="builtintype" id="2733786">byte</span><span class="op" id="2733790">)</span><span class="op" id="2733791">(</span><span class="ident" id="2733792">v</span><span class="op" id="2733793">.</span><span class="ident" id="2733794">ptr</span><span class="op" id="2733797">)</span><br>
<span class="lineno"></span><span class="op" id="2733799">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2733802">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2733841">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2733912">func</span>&nbsp;<span class="op" id="2733917">(</span><span class="ident" id="2733918">v</span>&nbsp;<span class="ident" id="2733920">Value</span><span class="op" id="2733925">)</span>&nbsp;<span class="ident" id="2733927">runes</span><span class="op" id="2733932">(</span><span class="op" id="2733933">)</span>&nbsp;<span class="op" id="2733935">[</span><span class="op" id="2733936">]</span><span class="builtintype" id="2733937">rune</span>&nbsp;<span class="op" id="2733942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2733945">v</span><span class="op" id="2733946">.</span><span class="ident" id="2733947">mustBe</span><span class="op" id="2733953">(</span><span class="ident" id="2733954">Slice</span><span class="op" id="2733959">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2733962">if</span>&nbsp;<span class="ident" id="2733965">v</span><span class="op" id="2733966">.</span><span class="ident" id="2733967">typ</span><span class="op" id="2733970">.</span><span class="ident" id="2733971">Elem</span><span class="op" id="2733975">(</span><span class="op" id="2733976">)</span><span class="op" id="2733977">.</span><span class="ident" id="2733978">Kind</span><span class="op" id="2733982">(</span><span class="op" id="2733983">)</span>&nbsp;<span class="op" id="2733985">!=</span>&nbsp;<span class="ident" id="2733988">Int32</span>&nbsp;<span class="op" id="2733994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2733998">panic</span><span class="op" id="2734003">(</span><span class="string" id="2734004">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2734043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2734046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2734049">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2734107">return</span>&nbsp;<span class="op" id="2734114">*</span><span class="op" id="2734115">(</span><span class="op" id="2734116">*</span><span class="op" id="2734117">[</span><span class="op" id="2734118">]</span><span class="builtintype" id="2734119">rune</span><span class="op" id="2734123">)</span><span class="op" id="2734124">(</span><span class="ident" id="2734125">v</span><span class="op" id="2734126">.</span><span class="ident" id="2734127">ptr</span><span class="op" id="2734130">)</span><br>
<span class="lineno">265</span><span class="op" id="2734132">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2734135">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2734209">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2734281">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2734343">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2734422">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2734476">func</span>&nbsp;<span class="op" id="2734481">(</span><span class="ident" id="2734482">v</span>&nbsp;<span class="ident" id="2734484">Value</span><span class="op" id="2734489">)</span>&nbsp;<span class="ident" id="2734491">CanAddr</span><span class="op" id="2734498">(</span><span class="op" id="2734499">)</span>&nbsp;<span class="builtintype" id="2734501">bool</span>&nbsp;<span class="op" id="2734506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2734509">return</span>&nbsp;<span class="ident" id="2734516">v</span><span class="op" id="2734517">.</span><span class="ident" id="2734518">flag</span><span class="op" id="2734522">&amp;</span><span class="ident" id="2734523">flagAddr</span>&nbsp;<span class="op" id="2734532">!=</span>&nbsp;<span class="num" id="2734535">0</span><br>
<span class="lineno"></span><span class="op" id="2734537">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2734540">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2734597">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2734661">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2734713">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2734774">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2734822">func</span>&nbsp;<span class="op" id="2734827">(</span><span class="ident" id="2734828">v</span>&nbsp;<span class="ident" id="2734830">Value</span><span class="op" id="2734835">)</span>&nbsp;<span class="ident" id="2734837">CanSet</span><span class="op" id="2734843">(</span><span class="op" id="2734844">)</span>&nbsp;<span class="builtintype" id="2734846">bool</span>&nbsp;<span class="op" id="2734851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2734854">return</span>&nbsp;<span class="ident" id="2734861">v</span><span class="op" id="2734862">.</span><span class="ident" id="2734863">flag</span><span class="op" id="2734867">&amp;</span><span class="op" id="2734868">(</span><span class="ident" id="2734869">flagAddr</span><span class="op" id="2734877">|</span><span class="ident" id="2734878">flagRO</span><span class="op" id="2734884">)</span>&nbsp;<span class="op" id="2734886">==</span>&nbsp;<span class="ident" id="2734889">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2734898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2734901">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2734959">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2735050">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2735090">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2735134">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2735193">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2735250">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2735324">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2735372">func</span>&nbsp;<span class="op" id="2735377">(</span><span class="ident" id="2735378">v</span>&nbsp;<span class="ident" id="2735380">Value</span><span class="op" id="2735385">)</span>&nbsp;<span class="ident" id="2735387">Call</span><span class="op" id="2735391">(</span><span class="ident" id="2735392">in</span>&nbsp;<span class="op" id="2735395">[</span><span class="op" id="2735396">]</span><span class="ident" id="2735397">Value</span><span class="op" id="2735402">)</span>&nbsp;<span class="op" id="2735404">[</span><span class="op" id="2735405">]</span><span class="ident" id="2735406">Value</span>&nbsp;<span class="op" id="2735412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2735415">v</span><span class="op" id="2735416">.</span><span class="ident" id="2735417">mustBe</span><span class="op" id="2735423">(</span><span class="ident" id="2735424">Func</span><span class="op" id="2735428">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2735431">v</span><span class="op" id="2735432">.</span><span class="ident" id="2735433">mustBeExported</span><span class="op" id="2735447">(</span><span class="op" id="2735448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2735451">return</span>&nbsp;<span class="ident" id="2735458">v</span><span class="op" id="2735459">.</span><span class="ident" id="2735460">call</span><span class="op" id="2735464">(</span><span class="string" id="2735465">&#34;Call&#34;</span><span class="op" id="2735471">,</span>&nbsp;<span class="ident" id="2735473">in</span><span class="op" id="2735475">)</span><br>
<span class="lineno"></span><span class="op" id="2735477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2735480">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2735552">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2735621">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2735715">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2735779">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2735823">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2735882">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2735939">func</span>&nbsp;<span class="op" id="2735944">(</span><span class="ident" id="2735945">v</span>&nbsp;<span class="ident" id="2735947">Value</span><span class="op" id="2735952">)</span>&nbsp;<span class="ident" id="2735954">CallSlice</span><span class="op" id="2735963">(</span><span class="ident" id="2735964">in</span>&nbsp;<span class="op" id="2735967">[</span><span class="op" id="2735968">]</span><span class="ident" id="2735969">Value</span><span class="op" id="2735974">)</span>&nbsp;<span class="op" id="2735976">[</span><span class="op" id="2735977">]</span><span class="ident" id="2735978">Value</span>&nbsp;<span class="op" id="2735984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2735987">v</span><span class="op" id="2735988">.</span><span class="ident" id="2735989">mustBe</span><span class="op" id="2735995">(</span><span class="ident" id="2735996">Func</span><span class="op" id="2736000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736003">v</span><span class="op" id="2736004">.</span><span class="ident" id="2736005">mustBeExported</span><span class="op" id="2736019">(</span><span class="op" id="2736020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736023">return</span>&nbsp;<span class="ident" id="2736030">v</span><span class="op" id="2736031">.</span><span class="ident" id="2736032">call</span><span class="op" id="2736036">(</span><span class="string" id="2736037">&#34;CallSlice&#34;</span><span class="op" id="2736048">,</span>&nbsp;<span class="ident" id="2736050">in</span><span class="op" id="2736052">)</span><br>
<span class="lineno">310</span><span class="op" id="2736054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2736057">var</span>&nbsp;<span class="ident" id="2736061">callGC</span>&nbsp;<span class="builtintype" id="2736068">bool</span>&nbsp;<span class="comment" id="2736073">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2736113">func</span>&nbsp;<span class="op" id="2736118">(</span><span class="ident" id="2736119">v</span>&nbsp;<span class="ident" id="2736121">Value</span><span class="op" id="2736126">)</span>&nbsp;<span class="ident" id="2736128">call</span><span class="op" id="2736132">(</span><span class="ident" id="2736133">op</span>&nbsp;<span class="builtintype" id="2736136">string</span><span class="op" id="2736142">,</span>&nbsp;<span class="ident" id="2736144">in</span>&nbsp;<span class="op" id="2736147">[</span><span class="op" id="2736148">]</span><span class="ident" id="2736149">Value</span><span class="op" id="2736154">)</span>&nbsp;<span class="op" id="2736156">[</span><span class="op" id="2736157">]</span><span class="ident" id="2736158">Value</span>&nbsp;<span class="op" id="2736164">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2736167">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736199">t</span>&nbsp;<span class="op" id="2736201">:=</span>&nbsp;<span class="ident" id="2736204">v</span><span class="op" id="2736205">.</span><span class="ident" id="2736206">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736211">var</span>&nbsp;<span class="op" id="2736215">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736219">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736228">unsafe</span><span class="op" id="2736234">.</span><span class="ident" id="2736235">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736245">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736254">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736262">rcvrtype</span>&nbsp;<span class="op" id="2736271">*</span><span class="ident" id="2736272">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736282">if</span>&nbsp;<span class="ident" id="2736285">v</span><span class="op" id="2736286">.</span><span class="ident" id="2736287">flag</span><span class="op" id="2736291">&amp;</span><span class="ident" id="2736292">flagMethod</span>&nbsp;<span class="op" id="2736303">!=</span>&nbsp;<span class="num" id="2736306">0</span>&nbsp;<span class="op" id="2736308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736312">rcvr</span>&nbsp;<span class="op" id="2736317">=</span>&nbsp;<span class="ident" id="2736319">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736323">rcvrtype</span><span class="op" id="2736331">,</span>&nbsp;<span class="ident" id="2736333">t</span><span class="op" id="2736334">,</span>&nbsp;<span class="ident" id="2736336">fn</span>&nbsp;<span class="op" id="2736339">=</span>&nbsp;<span class="ident" id="2736341">methodReceiver</span><span class="op" id="2736355">(</span><span class="ident" id="2736356">op</span><span class="op" id="2736358">,</span>&nbsp;<span class="ident" id="2736360">v</span><span class="op" id="2736361">,</span>&nbsp;<span class="builtintype" id="2736363">int</span><span class="op" id="2736366">(</span><span class="ident" id="2736367">v</span><span class="op" id="2736368">.</span><span class="ident" id="2736369">flag</span><span class="op" id="2736373">)</span><span class="op" id="2736374">&gt;&gt;</span><span class="ident" id="2736376">flagMethodShift</span><span class="op" id="2736391">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736394">}</span>&nbsp;<span class="keyword" id="2736396">else</span>&nbsp;<span class="keyword" id="2736401">if</span>&nbsp;<span class="ident" id="2736404">v</span><span class="op" id="2736405">.</span><span class="ident" id="2736406">flag</span><span class="op" id="2736410">&amp;</span><span class="ident" id="2736411">flagIndir</span>&nbsp;<span class="op" id="2736421">!=</span>&nbsp;<span class="num" id="2736424">0</span>&nbsp;<span class="op" id="2736426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736430">fn</span>&nbsp;<span class="op" id="2736433">=</span>&nbsp;<span class="op" id="2736435">*</span><span class="op" id="2736436">(</span><span class="op" id="2736437">*</span><span class="ident" id="2736438">unsafe</span><span class="op" id="2736444">.</span><span class="ident" id="2736445">Pointer</span><span class="op" id="2736452">)</span><span class="op" id="2736453">(</span><span class="ident" id="2736454">v</span><span class="op" id="2736455">.</span><span class="ident" id="2736456">ptr</span><span class="op" id="2736459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736462">}</span>&nbsp;<span class="keyword" id="2736464">else</span>&nbsp;<span class="op" id="2736469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736473">fn</span>&nbsp;<span class="op" id="2736476">=</span>&nbsp;<span class="ident" id="2736478">v</span><span class="op" id="2736479">.</span><span class="ident" id="2736480">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736485">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736489">if</span>&nbsp;<span class="ident" id="2736492">fn</span>&nbsp;<span class="op" id="2736495">==</span>&nbsp;<span class="builtintype" id="2736498">nil</span>&nbsp;<span class="op" id="2736502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2736506">panic</span><span class="op" id="2736511">(</span><span class="string" id="2736512">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2736554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736561">isSlice</span>&nbsp;<span class="op" id="2736569">:=</span>&nbsp;<span class="ident" id="2736572">op</span>&nbsp;<span class="op" id="2736575">==</span>&nbsp;<span class="string" id="2736578">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736591">n</span>&nbsp;<span class="op" id="2736593">:=</span>&nbsp;<span class="ident" id="2736596">t</span><span class="op" id="2736597">.</span><span class="ident" id="2736598">NumIn</span><span class="op" id="2736603">(</span><span class="op" id="2736604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736607">if</span>&nbsp;<span class="ident" id="2736610">isSlice</span>&nbsp;<span class="op" id="2736618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736622">if</span>&nbsp;<span class="op" id="2736625">!</span><span class="ident" id="2736626">t</span><span class="op" id="2736627">.</span><span class="ident" id="2736628">IsVariadic</span><span class="op" id="2736638">(</span><span class="op" id="2736639">)</span>&nbsp;<span class="op" id="2736641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2736646">panic</span><span class="op" id="2736651">(</span><span class="string" id="2736652">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2736697">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736705">if</span>&nbsp;<span class="builtinfunc" id="2736708">len</span><span class="op" id="2736711">(</span><span class="ident" id="2736712">in</span><span class="op" id="2736714">)</span>&nbsp;<span class="op" id="2736716">&lt;</span>&nbsp;<span class="ident" id="2736718">n</span>&nbsp;<span class="op" id="2736720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2736725">panic</span><span class="op" id="2736730">(</span><span class="string" id="2736731">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2736780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736788">if</span>&nbsp;<span class="builtinfunc" id="2736791">len</span><span class="op" id="2736794">(</span><span class="ident" id="2736795">in</span><span class="op" id="2736797">)</span>&nbsp;<span class="op" id="2736799">&gt;</span>&nbsp;<span class="ident" id="2736801">n</span>&nbsp;<span class="op" id="2736803">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2736808">panic</span><span class="op" id="2736813">(</span><span class="string" id="2736814">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2736864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736871">}</span>&nbsp;<span class="keyword" id="2736873">else</span>&nbsp;<span class="op" id="2736878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736882">if</span>&nbsp;<span class="ident" id="2736885">t</span><span class="op" id="2736886">.</span><span class="ident" id="2736887">IsVariadic</span><span class="op" id="2736897">(</span><span class="op" id="2736898">)</span>&nbsp;<span class="op" id="2736900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2736905">n</span><span class="op" id="2736906">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736915">if</span>&nbsp;<span class="builtinfunc" id="2736918">len</span><span class="op" id="2736921">(</span><span class="ident" id="2736922">in</span><span class="op" id="2736924">)</span>&nbsp;<span class="op" id="2736926">&lt;</span>&nbsp;<span class="ident" id="2736928">n</span>&nbsp;<span class="op" id="2736930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2736935">panic</span><span class="op" id="2736940">(</span><span class="string" id="2736941">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2736985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2736989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2736993">if</span>&nbsp;<span class="op" id="2736996">!</span><span class="ident" id="2736997">t</span><span class="op" id="2736998">.</span><span class="ident" id="2736999">IsVariadic</span><span class="op" id="2737009">(</span><span class="op" id="2737010">)</span>&nbsp;<span class="op" id="2737012">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2737015">len</span><span class="op" id="2737018">(</span><span class="ident" id="2737019">in</span><span class="op" id="2737021">)</span>&nbsp;<span class="op" id="2737023">&gt;</span>&nbsp;<span class="ident" id="2737025">n</span>&nbsp;<span class="op" id="2737027">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737032">panic</span><span class="op" id="2737037">(</span><span class="string" id="2737038">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2737083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737093">for</span>&nbsp;<span class="ident" id="2737097">_</span><span class="op" id="2737098">,</span>&nbsp;<span class="ident" id="2737100">x</span>&nbsp;<span class="op" id="2737102">:=</span>&nbsp;<span class="keyword" id="2737105">range</span>&nbsp;<span class="ident" id="2737111">in</span>&nbsp;<span class="op" id="2737114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737118">if</span>&nbsp;<span class="ident" id="2737121">x</span><span class="op" id="2737122">.</span><span class="ident" id="2737123">Kind</span><span class="op" id="2737127">(</span><span class="op" id="2737128">)</span>&nbsp;<span class="op" id="2737130">==</span>&nbsp;<span class="ident" id="2737133">Invalid</span>&nbsp;<span class="op" id="2737141">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737146">panic</span><span class="op" id="2737151">(</span><span class="string" id="2737152">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2737164">+</span>&nbsp;<span class="ident" id="2737166">op</span>&nbsp;<span class="op" id="2737169">+</span>&nbsp;<span class="string" id="2737171">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2737199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737209">for</span>&nbsp;<span class="ident" id="2737213">i</span>&nbsp;<span class="op" id="2737215">:=</span>&nbsp;<span class="num" id="2737218">0</span><span class="op" id="2737219">;</span>&nbsp;<span class="ident" id="2737221">i</span>&nbsp;<span class="op" id="2737223">&lt;</span>&nbsp;<span class="ident" id="2737225">n</span><span class="op" id="2737226">;</span>&nbsp;<span class="ident" id="2737228">i</span><span class="op" id="2737229">++</span>&nbsp;<span class="op" id="2737232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737236">if</span>&nbsp;<span class="ident" id="2737239">xt</span><span class="op" id="2737241">,</span>&nbsp;<span class="ident" id="2737243">targ</span>&nbsp;<span class="op" id="2737248">:=</span>&nbsp;<span class="ident" id="2737251">in</span><span class="op" id="2737253">[</span><span class="ident" id="2737254">i</span><span class="op" id="2737255">]</span><span class="op" id="2737256">.</span><span class="ident" id="2737257">Type</span><span class="op" id="2737261">(</span><span class="op" id="2737262">)</span><span class="op" id="2737263">,</span>&nbsp;<span class="ident" id="2737265">t</span><span class="op" id="2737266">.</span><span class="ident" id="2737267">In</span><span class="op" id="2737269">(</span><span class="ident" id="2737270">i</span><span class="op" id="2737271">)</span><span class="op" id="2737272">;</span>&nbsp;<span class="op" id="2737274">!</span><span class="ident" id="2737275">xt</span><span class="op" id="2737277">.</span><span class="ident" id="2737278">AssignableTo</span><span class="op" id="2737290">(</span><span class="ident" id="2737291">targ</span><span class="op" id="2737295">)</span>&nbsp;<span class="op" id="2737297">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737302">panic</span><span class="op" id="2737307">(</span><span class="string" id="2737308">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2737320">+</span>&nbsp;<span class="ident" id="2737322">op</span>&nbsp;<span class="op" id="2737325">+</span>&nbsp;<span class="string" id="2737327">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2737337">+</span>&nbsp;<span class="ident" id="2737339">xt</span><span class="op" id="2737341">.</span><span class="ident" id="2737342">String</span><span class="op" id="2737348">(</span><span class="op" id="2737349">)</span>&nbsp;<span class="op" id="2737351">+</span>&nbsp;<span class="string" id="2737353">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2737365">+</span>&nbsp;<span class="ident" id="2737367">targ</span><span class="op" id="2737371">.</span><span class="ident" id="2737372">String</span><span class="op" id="2737378">(</span><span class="op" id="2737379">)</span><span class="op" id="2737380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737390">if</span>&nbsp;<span class="op" id="2737393">!</span><span class="ident" id="2737394">isSlice</span>&nbsp;<span class="op" id="2737402">&amp;&amp;</span>&nbsp;<span class="ident" id="2737405">t</span><span class="op" id="2737406">.</span><span class="ident" id="2737407">IsVariadic</span><span class="op" id="2737417">(</span><span class="op" id="2737418">)</span>&nbsp;<span class="op" id="2737420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2737424">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737464">m</span>&nbsp;<span class="op" id="2737466">:=</span>&nbsp;<span class="builtinfunc" id="2737469">len</span><span class="op" id="2737472">(</span><span class="ident" id="2737473">in</span><span class="op" id="2737475">)</span>&nbsp;<span class="op" id="2737477">-</span>&nbsp;<span class="ident" id="2737479">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737483">slice</span>&nbsp;<span class="op" id="2737489">:=</span>&nbsp;<span class="ident" id="2737492">MakeSlice</span><span class="op" id="2737501">(</span><span class="ident" id="2737502">t</span><span class="op" id="2737503">.</span><span class="ident" id="2737504">In</span><span class="op" id="2737506">(</span><span class="ident" id="2737507">n</span><span class="op" id="2737508">)</span><span class="op" id="2737509">,</span>&nbsp;<span class="ident" id="2737511">m</span><span class="op" id="2737512">,</span>&nbsp;<span class="ident" id="2737514">m</span><span class="op" id="2737515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737519">elem</span>&nbsp;<span class="op" id="2737524">:=</span>&nbsp;<span class="ident" id="2737527">t</span><span class="op" id="2737528">.</span><span class="ident" id="2737529">In</span><span class="op" id="2737531">(</span><span class="ident" id="2737532">n</span><span class="op" id="2737533">)</span><span class="op" id="2737534">.</span><span class="ident" id="2737535">Elem</span><span class="op" id="2737539">(</span><span class="op" id="2737540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737544">for</span>&nbsp;<span class="ident" id="2737548">i</span>&nbsp;<span class="op" id="2737550">:=</span>&nbsp;<span class="num" id="2737553">0</span><span class="op" id="2737554">;</span>&nbsp;<span class="ident" id="2737556">i</span>&nbsp;<span class="op" id="2737558">&lt;</span>&nbsp;<span class="ident" id="2737560">m</span><span class="op" id="2737561">;</span>&nbsp;<span class="ident" id="2737563">i</span><span class="op" id="2737564">++</span>&nbsp;<span class="op" id="2737567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737572">x</span>&nbsp;<span class="op" id="2737574">:=</span>&nbsp;<span class="ident" id="2737577">in</span><span class="op" id="2737579">[</span><span class="ident" id="2737580">n</span><span class="op" id="2737581">+</span><span class="ident" id="2737582">i</span><span class="op" id="2737583">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737588">if</span>&nbsp;<span class="ident" id="2737591">xt</span>&nbsp;<span class="op" id="2737594">:=</span>&nbsp;<span class="ident" id="2737597">x</span><span class="op" id="2737598">.</span><span class="ident" id="2737599">Type</span><span class="op" id="2737603">(</span><span class="op" id="2737604">)</span><span class="op" id="2737605">;</span>&nbsp;<span class="op" id="2737607">!</span><span class="ident" id="2737608">xt</span><span class="op" id="2737610">.</span><span class="ident" id="2737611">AssignableTo</span><span class="op" id="2737623">(</span><span class="ident" id="2737624">elem</span><span class="op" id="2737628">)</span>&nbsp;<span class="op" id="2737630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737636">panic</span><span class="op" id="2737641">(</span><span class="string" id="2737642">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2737665">+</span>&nbsp;<span class="ident" id="2737667">xt</span><span class="op" id="2737669">.</span><span class="ident" id="2737670">String</span><span class="op" id="2737676">(</span><span class="op" id="2737677">)</span>&nbsp;<span class="op" id="2737679">+</span>&nbsp;<span class="string" id="2737681">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2737693">+</span>&nbsp;<span class="ident" id="2737695">elem</span><span class="op" id="2737699">.</span><span class="ident" id="2737700">String</span><span class="op" id="2737706">(</span><span class="op" id="2737707">)</span>&nbsp;<span class="op" id="2737709">+</span>&nbsp;<span class="string" id="2737711">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2737718">+</span>&nbsp;<span class="ident" id="2737720">op</span><span class="op" id="2737722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737732">slice</span><span class="op" id="2737737">.</span><span class="ident" id="2737738">Index</span><span class="op" id="2737743">(</span><span class="ident" id="2737744">i</span><span class="op" id="2737745">)</span><span class="op" id="2737746">.</span><span class="ident" id="2737747">Set</span><span class="op" id="2737750">(</span><span class="ident" id="2737751">x</span><span class="op" id="2737752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737756">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737760">origIn</span>&nbsp;<span class="op" id="2737767">:=</span>&nbsp;<span class="ident" id="2737770">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737775">in</span>&nbsp;<span class="op" id="2737778">=</span>&nbsp;<span class="builtinfunc" id="2737780">make</span><span class="op" id="2737784">(</span><span class="op" id="2737785">[</span><span class="op" id="2737786">]</span><span class="ident" id="2737787">Value</span><span class="op" id="2737792">,</span>&nbsp;<span class="ident" id="2737794">n</span><span class="op" id="2737795">+</span><span class="num" id="2737796">1</span><span class="op" id="2737797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737801">copy</span><span class="op" id="2737805">(</span><span class="ident" id="2737806">in</span><span class="op" id="2737808">[</span><span class="op" id="2737809">:</span><span class="ident" id="2737810">n</span><span class="op" id="2737811">]</span><span class="op" id="2737812">,</span>&nbsp;<span class="ident" id="2737814">origIn</span><span class="op" id="2737820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737824">in</span><span class="op" id="2737826">[</span><span class="ident" id="2737827">n</span><span class="op" id="2737828">]</span>&nbsp;<span class="op" id="2737830">=</span>&nbsp;<span class="ident" id="2737832">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737839">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737843">nin</span>&nbsp;<span class="op" id="2737847">:=</span>&nbsp;<span class="builtinfunc" id="2737850">len</span><span class="op" id="2737853">(</span><span class="ident" id="2737854">in</span><span class="op" id="2737856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2737859">if</span>&nbsp;<span class="ident" id="2737862">nin</span>&nbsp;<span class="op" id="2737866">!=</span>&nbsp;<span class="ident" id="2737869">t</span><span class="op" id="2737870">.</span><span class="ident" id="2737871">NumIn</span><span class="op" id="2737876">(</span><span class="op" id="2737877">)</span>&nbsp;<span class="op" id="2737879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2737883">panic</span><span class="op" id="2737888">(</span><span class="string" id="2737889">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2737931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2737934">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2737937">nout</span>&nbsp;<span class="op" id="2737942">:=</span>&nbsp;<span class="ident" id="2737945">t</span><span class="op" id="2737946">.</span><span class="ident" id="2737947">NumOut</span><span class="op" id="2737953">(</span><span class="op" id="2737954">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2737958">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738019">frametype</span><span class="op" id="2738028">,</span>&nbsp;<span class="ident" id="2738030">_</span><span class="op" id="2738031">,</span>&nbsp;<span class="ident" id="2738033">retOffset</span><span class="op" id="2738042">,</span>&nbsp;<span class="ident" id="2738044">_</span>&nbsp;<span class="op" id="2738046">:=</span>&nbsp;<span class="ident" id="2738049">funcLayout</span><span class="op" id="2738059">(</span><span class="ident" id="2738060">t</span><span class="op" id="2738061">,</span>&nbsp;<span class="ident" id="2738063">rcvrtype</span><span class="op" id="2738071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738074">args</span>&nbsp;<span class="op" id="2738079">:=</span>&nbsp;<span class="ident" id="2738082">unsafe_New</span><span class="op" id="2738092">(</span><span class="ident" id="2738093">frametype</span><span class="op" id="2738102">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738105">off</span>&nbsp;<span class="op" id="2738109">:=</span>&nbsp;<span class="builtintype" id="2738112">uintptr</span><span class="op" id="2738119">(</span><span class="num" id="2738120">0</span><span class="op" id="2738121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2738125">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2738152">if</span>&nbsp;<span class="ident" id="2738155">rcvrtype</span>&nbsp;<span class="op" id="2738164">!=</span>&nbsp;<span class="builtintype" id="2738167">nil</span>&nbsp;<span class="op" id="2738171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738175">storeRcvr</span><span class="op" id="2738184">(</span><span class="ident" id="2738185">rcvr</span><span class="op" id="2738189">,</span>&nbsp;<span class="ident" id="2738191">args</span><span class="op" id="2738195">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738199">off</span>&nbsp;<span class="op" id="2738203">=</span>&nbsp;<span class="ident" id="2738205">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2738217">for</span>&nbsp;<span class="ident" id="2738221">i</span><span class="op" id="2738222">,</span>&nbsp;<span class="ident" id="2738224">v</span>&nbsp;<span class="op" id="2738226">:=</span>&nbsp;<span class="keyword" id="2738229">range</span>&nbsp;<span class="ident" id="2738235">in</span>&nbsp;<span class="op" id="2738238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738242">v</span><span class="op" id="2738243">.</span><span class="ident" id="2738244">mustBeExported</span><span class="op" id="2738258">(</span><span class="op" id="2738259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738263">targ</span>&nbsp;<span class="op" id="2738268">:=</span>&nbsp;<span class="ident" id="2738271">t</span><span class="op" id="2738272">.</span><span class="ident" id="2738273">In</span><span class="op" id="2738275">(</span><span class="ident" id="2738276">i</span><span class="op" id="2738277">)</span><span class="op" id="2738278">.</span><span class="op" id="2738279">(</span><span class="op" id="2738280">*</span><span class="ident" id="2738281">rtype</span><span class="op" id="2738286">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738290">a</span>&nbsp;<span class="op" id="2738292">:=</span>&nbsp;<span class="builtintype" id="2738295">uintptr</span><span class="op" id="2738302">(</span><span class="ident" id="2738303">targ</span><span class="op" id="2738307">.</span><span class="ident" id="2738308">align</span><span class="op" id="2738313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738317">off</span>&nbsp;<span class="op" id="2738321">=</span>&nbsp;<span class="op" id="2738323">(</span><span class="ident" id="2738324">off</span>&nbsp;<span class="op" id="2738328">+</span>&nbsp;<span class="ident" id="2738330">a</span>&nbsp;<span class="op" id="2738332">-</span>&nbsp;<span class="num" id="2738334">1</span><span class="op" id="2738335">)</span>&nbsp;<span class="op" id="2738337">&amp;^</span>&nbsp;<span class="op" id="2738340">(</span><span class="ident" id="2738341">a</span>&nbsp;<span class="op" id="2738343">-</span>&nbsp;<span class="num" id="2738345">1</span><span class="op" id="2738346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738350">n</span>&nbsp;<span class="op" id="2738352">:=</span>&nbsp;<span class="ident" id="2738355">targ</span><span class="op" id="2738359">.</span><span class="ident" id="2738360">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738367">addr</span>&nbsp;<span class="op" id="2738372">:=</span>&nbsp;<span class="ident" id="2738375">unsafe</span><span class="op" id="2738381">.</span><span class="ident" id="2738382">Pointer</span><span class="op" id="2738389">(</span><span class="builtintype" id="2738390">uintptr</span><span class="op" id="2738397">(</span><span class="ident" id="2738398">args</span><span class="op" id="2738402">)</span>&nbsp;<span class="op" id="2738404">+</span>&nbsp;<span class="ident" id="2738406">off</span><span class="op" id="2738409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738413">v</span>&nbsp;<span class="op" id="2738415">=</span>&nbsp;<span class="ident" id="2738417">v</span><span class="op" id="2738418">.</span><span class="ident" id="2738419">assignTo</span><span class="op" id="2738427">(</span><span class="string" id="2738428">&#34;reflect.Value.Call&#34;</span><span class="op" id="2738448">,</span>&nbsp;<span class="ident" id="2738450">targ</span><span class="op" id="2738454">,</span>&nbsp;<span class="ident" id="2738456">addr</span><span class="op" id="2738460">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2738464">if</span>&nbsp;<span class="ident" id="2738467">v</span><span class="op" id="2738468">.</span><span class="ident" id="2738469">flag</span><span class="op" id="2738473">&amp;</span><span class="ident" id="2738474">flagIndir</span>&nbsp;<span class="op" id="2738484">!=</span>&nbsp;<span class="num" id="2738487">0</span>&nbsp;<span class="op" id="2738489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738494">memmove</span><span class="op" id="2738501">(</span><span class="ident" id="2738502">addr</span><span class="op" id="2738506">,</span>&nbsp;<span class="ident" id="2738508">v</span><span class="op" id="2738509">.</span><span class="ident" id="2738510">ptr</span><span class="op" id="2738513">,</span>&nbsp;<span class="ident" id="2738515">n</span><span class="op" id="2738516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738520">}</span>&nbsp;<span class="keyword" id="2738522">else</span>&nbsp;<span class="op" id="2738527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738532">*</span><span class="op" id="2738533">(</span><span class="op" id="2738534">*</span><span class="ident" id="2738535">unsafe</span><span class="op" id="2738541">.</span><span class="ident" id="2738542">Pointer</span><span class="op" id="2738549">)</span><span class="op" id="2738550">(</span><span class="ident" id="2738551">addr</span><span class="op" id="2738555">)</span>&nbsp;<span class="op" id="2738557">=</span>&nbsp;<span class="ident" id="2738559">v</span><span class="op" id="2738560">.</span><span class="ident" id="2738561">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738567">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738571">off</span>&nbsp;<span class="op" id="2738575">+=</span>&nbsp;<span class="ident" id="2738578">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2738585">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738595">call</span><span class="op" id="2738599">(</span><span class="ident" id="2738600">fn</span><span class="op" id="2738602">,</span>&nbsp;<span class="ident" id="2738604">args</span><span class="op" id="2738608">,</span>&nbsp;<span class="builtintype" id="2738610">uint32</span><span class="op" id="2738616">(</span><span class="ident" id="2738617">frametype</span><span class="op" id="2738626">.</span><span class="ident" id="2738627">size</span><span class="op" id="2738631">)</span><span class="op" id="2738632">,</span>&nbsp;<span class="builtintype" id="2738634">uint32</span><span class="op" id="2738640">(</span><span class="ident" id="2738641">retOffset</span><span class="op" id="2738650">)</span><span class="op" id="2738651">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2738655">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2738696">if</span>&nbsp;<span class="ident" id="2738699">callGC</span>&nbsp;<span class="op" id="2738706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738710">runtime</span><span class="op" id="2738717">.</span><span class="ident" id="2738718">GC</span><span class="op" id="2738720">(</span><span class="op" id="2738721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2738724">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2738728">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738764">ret</span>&nbsp;<span class="op" id="2738768">:=</span>&nbsp;<span class="builtinfunc" id="2738771">make</span><span class="op" id="2738775">(</span><span class="op" id="2738776">[</span><span class="op" id="2738777">]</span><span class="ident" id="2738778">Value</span><span class="op" id="2738783">,</span>&nbsp;<span class="ident" id="2738785">nout</span><span class="op" id="2738789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738792">off</span>&nbsp;<span class="op" id="2738796">=</span>&nbsp;<span class="ident" id="2738798">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2738809">for</span>&nbsp;<span class="ident" id="2738813">i</span>&nbsp;<span class="op" id="2738815">:=</span>&nbsp;<span class="num" id="2738818">0</span><span class="op" id="2738819">;</span>&nbsp;<span class="ident" id="2738821">i</span>&nbsp;<span class="op" id="2738823">&lt;</span>&nbsp;<span class="ident" id="2738825">nout</span><span class="op" id="2738829">;</span>&nbsp;<span class="ident" id="2738831">i</span><span class="op" id="2738832">++</span>&nbsp;<span class="op" id="2738835">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738839">tv</span>&nbsp;<span class="op" id="2738842">:=</span>&nbsp;<span class="ident" id="2738845">t</span><span class="op" id="2738846">.</span><span class="ident" id="2738847">Out</span><span class="op" id="2738850">(</span><span class="ident" id="2738851">i</span><span class="op" id="2738852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738856">a</span>&nbsp;<span class="op" id="2738858">:=</span>&nbsp;<span class="builtintype" id="2738861">uintptr</span><span class="op" id="2738868">(</span><span class="ident" id="2738869">tv</span><span class="op" id="2738871">.</span><span class="ident" id="2738872">Align</span><span class="op" id="2738877">(</span><span class="op" id="2738878">)</span><span class="op" id="2738879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738883">off</span>&nbsp;<span class="op" id="2738887">=</span>&nbsp;<span class="op" id="2738889">(</span><span class="ident" id="2738890">off</span>&nbsp;<span class="op" id="2738894">+</span>&nbsp;<span class="ident" id="2738896">a</span>&nbsp;<span class="op" id="2738898">-</span>&nbsp;<span class="num" id="2738900">1</span><span class="op" id="2738901">)</span>&nbsp;<span class="op" id="2738903">&amp;^</span>&nbsp;<span class="op" id="2738906">(</span><span class="ident" id="2738907">a</span>&nbsp;<span class="op" id="2738909">-</span>&nbsp;<span class="num" id="2738911">1</span><span class="op" id="2738912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738916">fl</span>&nbsp;<span class="op" id="2738919">:=</span>&nbsp;<span class="ident" id="2738922">flagIndir</span>&nbsp;<span class="op" id="2738932">|</span>&nbsp;<span class="ident" id="2738934">flag</span><span class="op" id="2738938">(</span><span class="ident" id="2738939">tv</span><span class="op" id="2738941">.</span><span class="ident" id="2738942">Kind</span><span class="op" id="2738946">(</span><span class="op" id="2738947">)</span><span class="op" id="2738948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2738952">ret</span><span class="op" id="2738955">[</span><span class="ident" id="2738956">i</span><span class="op" id="2738957">]</span>&nbsp;<span class="op" id="2738959">=</span>&nbsp;<span class="ident" id="2738961">Value</span><span class="op" id="2738966">{</span><span class="ident" id="2738967">tv</span><span class="op" id="2738969">.</span><span class="ident" id="2738970">common</span><span class="op" id="2738976">(</span><span class="op" id="2738977">)</span><span class="op" id="2738978">,</span>&nbsp;<span class="ident" id="2738980">unsafe</span><span class="op" id="2738986">.</span><span class="ident" id="2738987">Pointer</span><span class="op" id="2738994">(</span><span class="builtintype" id="2738995">uintptr</span><span class="op" id="2739002">(</span><span class="ident" id="2739003">args</span><span class="op" id="2739007">)</span>&nbsp;<span class="op" id="2739009">+</span>&nbsp;<span class="ident" id="2739011">off</span><span class="op" id="2739014">)</span><span class="op" id="2739015">,</span>&nbsp;<span class="ident" id="2739017">fl</span><span class="op" id="2739019">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739023">off</span>&nbsp;<span class="op" id="2739027">+=</span>&nbsp;<span class="ident" id="2739030">tv</span><span class="op" id="2739032">.</span><span class="ident" id="2739033">Size</span><span class="op" id="2739037">(</span><span class="op" id="2739038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2739041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2739045">return</span>&nbsp;<span class="ident" id="2739052">ret</span><br>
<span class="lineno"></span><span class="op" id="2739056">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2739059">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2739120">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2739184">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2739258">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2739325">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2739395">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2739430">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2739501">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2739568">//</span><br>
<span class="lineno">450</span><span class="comment" id="2739571">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2739647">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2739719">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2739791">func</span>&nbsp;<span class="ident" id="2739796">callReflect</span><span class="op" id="2739807">(</span><span class="ident" id="2739808">ctxt</span>&nbsp;<span class="op" id="2739813">*</span><span class="ident" id="2739814">makeFuncImpl</span><span class="op" id="2739826">,</span>&nbsp;<span class="ident" id="2739828">frame</span>&nbsp;<span class="ident" id="2739834">unsafe</span><span class="op" id="2739840">.</span><span class="ident" id="2739841">Pointer</span><span class="op" id="2739848">)</span>&nbsp;<span class="op" id="2739850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739853">ftyp</span>&nbsp;<span class="op" id="2739858">:=</span>&nbsp;<span class="ident" id="2739861">ctxt</span><span class="op" id="2739865">.</span><span class="ident" id="2739866">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739871">f</span>&nbsp;<span class="op" id="2739873">:=</span>&nbsp;<span class="ident" id="2739876">ctxt</span><span class="op" id="2739880">.</span><span class="ident" id="2739881">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2739886">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739923">ptr</span>&nbsp;<span class="op" id="2739927">:=</span>&nbsp;<span class="ident" id="2739930">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739937">off</span>&nbsp;<span class="op" id="2739941">:=</span>&nbsp;<span class="builtintype" id="2739944">uintptr</span><span class="op" id="2739951">(</span><span class="num" id="2739952">0</span><span class="op" id="2739953">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2739956">in</span>&nbsp;<span class="op" id="2739959">:=</span>&nbsp;<span class="builtinfunc" id="2739962">make</span><span class="op" id="2739966">(</span><span class="op" id="2739967">[</span><span class="op" id="2739968">]</span><span class="ident" id="2739969">Value</span><span class="op" id="2739974">,</span>&nbsp;<span class="num" id="2739976">0</span><span class="op" id="2739977">,</span>&nbsp;<span class="builtinfunc" id="2739979">len</span><span class="op" id="2739982">(</span><span class="ident" id="2739983">ftyp</span><span class="op" id="2739987">.</span><span class="ident" id="2739988">in</span><span class="op" id="2739990">)</span><span class="op" id="2739991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2739994">for</span>&nbsp;<span class="ident" id="2739998">_</span><span class="op" id="2739999">,</span>&nbsp;<span class="ident" id="2740001">arg</span>&nbsp;<span class="op" id="2740005">:=</span>&nbsp;<span class="keyword" id="2740008">range</span>&nbsp;<span class="ident" id="2740014">ftyp</span><span class="op" id="2740018">.</span><span class="ident" id="2740019">in</span>&nbsp;<span class="op" id="2740022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740026">typ</span>&nbsp;<span class="op" id="2740030">:=</span>&nbsp;<span class="ident" id="2740033">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740039">off</span>&nbsp;<span class="op" id="2740043">+=</span>&nbsp;<span class="op" id="2740046">-</span><span class="ident" id="2740047">off</span>&nbsp;<span class="op" id="2740051">&amp;</span>&nbsp;<span class="builtintype" id="2740053">uintptr</span><span class="op" id="2740060">(</span><span class="ident" id="2740061">typ</span><span class="op" id="2740064">.</span><span class="ident" id="2740065">align</span><span class="op" id="2740070">-</span><span class="num" id="2740071">1</span><span class="op" id="2740072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740076">addr</span>&nbsp;<span class="op" id="2740081">:=</span>&nbsp;<span class="ident" id="2740084">unsafe</span><span class="op" id="2740090">.</span><span class="ident" id="2740091">Pointer</span><span class="op" id="2740098">(</span><span class="builtintype" id="2740099">uintptr</span><span class="op" id="2740106">(</span><span class="ident" id="2740107">ptr</span><span class="op" id="2740110">)</span>&nbsp;<span class="op" id="2740112">+</span>&nbsp;<span class="ident" id="2740114">off</span><span class="op" id="2740117">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740121">v</span>&nbsp;<span class="op" id="2740123">:=</span>&nbsp;<span class="ident" id="2740126">Value</span><span class="op" id="2740131">{</span><span class="ident" id="2740132">typ</span><span class="op" id="2740135">,</span>&nbsp;<span class="builtintype" id="2740137">nil</span><span class="op" id="2740140">,</span>&nbsp;<span class="ident" id="2740142">flag</span><span class="op" id="2740146">(</span><span class="ident" id="2740147">typ</span><span class="op" id="2740150">.</span><span class="ident" id="2740151">Kind</span><span class="op" id="2740155">(</span><span class="op" id="2740156">)</span><span class="op" id="2740157">)</span><span class="op" id="2740158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740162">if</span>&nbsp;<span class="ident" id="2740165">ifaceIndir</span><span class="op" id="2740175">(</span><span class="ident" id="2740176">typ</span><span class="op" id="2740179">)</span>&nbsp;<span class="op" id="2740181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740186">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740235">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740299">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740361">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740428">v</span><span class="op" id="2740429">.</span><span class="ident" id="2740430">ptr</span>&nbsp;<span class="op" id="2740434">=</span>&nbsp;<span class="ident" id="2740436">unsafe_New</span><span class="op" id="2740446">(</span><span class="ident" id="2740447">typ</span><span class="op" id="2740450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740455">memmove</span><span class="op" id="2740462">(</span><span class="ident" id="2740463">v</span><span class="op" id="2740464">.</span><span class="ident" id="2740465">ptr</span><span class="op" id="2740468">,</span>&nbsp;<span class="ident" id="2740470">addr</span><span class="op" id="2740474">,</span>&nbsp;<span class="ident" id="2740476">typ</span><span class="op" id="2740479">.</span><span class="ident" id="2740480">size</span><span class="op" id="2740484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740489">v</span><span class="op" id="2740490">.</span><span class="ident" id="2740491">flag</span>&nbsp;<span class="op" id="2740496">|=</span>&nbsp;<span class="ident" id="2740499">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2740511">}</span>&nbsp;<span class="keyword" id="2740513">else</span>&nbsp;<span class="op" id="2740518">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740523">v</span><span class="op" id="2740524">.</span><span class="ident" id="2740525">ptr</span>&nbsp;<span class="op" id="2740529">=</span>&nbsp;<span class="op" id="2740531">*</span><span class="op" id="2740532">(</span><span class="op" id="2740533">*</span><span class="ident" id="2740534">unsafe</span><span class="op" id="2740540">.</span><span class="ident" id="2740541">Pointer</span><span class="op" id="2740548">)</span><span class="op" id="2740549">(</span><span class="ident" id="2740550">addr</span><span class="op" id="2740554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2740558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740562">in</span>&nbsp;<span class="op" id="2740565">=</span>&nbsp;<span class="builtinfunc" id="2740567">append</span><span class="op" id="2740573">(</span><span class="ident" id="2740574">in</span><span class="op" id="2740576">,</span>&nbsp;<span class="ident" id="2740578">v</span><span class="op" id="2740579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740583">off</span>&nbsp;<span class="op" id="2740587">+=</span>&nbsp;<span class="ident" id="2740590">typ</span><span class="op" id="2740593">.</span><span class="ident" id="2740594">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2740600">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740604">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740634">out</span>&nbsp;<span class="op" id="2740638">:=</span>&nbsp;<span class="ident" id="2740641">f</span><span class="op" id="2740642">(</span><span class="ident" id="2740643">in</span><span class="op" id="2740645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740648">if</span>&nbsp;<span class="builtinfunc" id="2740651">len</span><span class="op" id="2740654">(</span><span class="ident" id="2740655">out</span><span class="op" id="2740658">)</span>&nbsp;<span class="op" id="2740660">!=</span>&nbsp;<span class="builtinfunc" id="2740663">len</span><span class="op" id="2740666">(</span><span class="ident" id="2740667">ftyp</span><span class="op" id="2740671">.</span><span class="ident" id="2740672">out</span><span class="op" id="2740675">)</span>&nbsp;<span class="op" id="2740677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2740681">panic</span><span class="op" id="2740686">(</span><span class="string" id="2740687">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2740750">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2740753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2740757">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740800">if</span>&nbsp;<span class="builtinfunc" id="2740803">len</span><span class="op" id="2740806">(</span><span class="ident" id="2740807">ftyp</span><span class="op" id="2740811">.</span><span class="ident" id="2740812">out</span><span class="op" id="2740815">)</span>&nbsp;<span class="op" id="2740817">&gt;</span>&nbsp;<span class="num" id="2740819">0</span>&nbsp;<span class="op" id="2740821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740825">off</span>&nbsp;<span class="op" id="2740829">+=</span>&nbsp;<span class="op" id="2740832">-</span><span class="ident" id="2740833">off</span>&nbsp;<span class="op" id="2740837">&amp;</span>&nbsp;<span class="op" id="2740839">(</span><span class="ident" id="2740840">ptrSize</span>&nbsp;<span class="op" id="2740848">-</span>&nbsp;<span class="num" id="2740850">1</span><span class="op" id="2740851">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740855">if</span>&nbsp;<span class="ident" id="2740858">runtime</span><span class="op" id="2740865">.</span><span class="ident" id="2740866">GOARCH</span>&nbsp;<span class="op" id="2740873">==</span>&nbsp;<span class="string" id="2740876">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2740887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740892">off</span>&nbsp;<span class="op" id="2740896">=</span>&nbsp;<span class="ident" id="2740898">align</span><span class="op" id="2740903">(</span><span class="ident" id="2740904">off</span><span class="op" id="2740907">,</span>&nbsp;<span class="num" id="2740909">8</span><span class="op" id="2740910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2740914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740918">for</span>&nbsp;<span class="ident" id="2740922">i</span><span class="op" id="2740923">,</span>&nbsp;<span class="ident" id="2740925">arg</span>&nbsp;<span class="op" id="2740929">:=</span>&nbsp;<span class="keyword" id="2740932">range</span>&nbsp;<span class="ident" id="2740938">ftyp</span><span class="op" id="2740942">.</span><span class="ident" id="2740943">out</span>&nbsp;<span class="op" id="2740947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740952">typ</span>&nbsp;<span class="op" id="2740956">:=</span>&nbsp;<span class="ident" id="2740959">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2740966">v</span>&nbsp;<span class="op" id="2740968">:=</span>&nbsp;<span class="ident" id="2740971">out</span><span class="op" id="2740974">[</span><span class="ident" id="2740975">i</span><span class="op" id="2740976">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2740981">if</span>&nbsp;<span class="ident" id="2740984">v</span><span class="op" id="2740985">.</span><span class="ident" id="2740986">typ</span>&nbsp;<span class="op" id="2740990">!=</span>&nbsp;<span class="ident" id="2740993">typ</span>&nbsp;<span class="op" id="2740997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2741003">panic</span><span class="op" id="2741008">(</span><span class="string" id="2741009">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2741056">+</span>&nbsp;<span class="ident" id="2741058">funcName</span><span class="op" id="2741066">(</span><span class="ident" id="2741067">f</span><span class="op" id="2741068">)</span>&nbsp;<span class="op" id="2741070">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2741077">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2741107">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2741114">out</span><span class="op" id="2741117">[</span><span class="ident" id="2741118">i</span><span class="op" id="2741119">]</span><span class="op" id="2741120">.</span><span class="ident" id="2741121">typ</span><span class="op" id="2741124">.</span><span class="ident" id="2741125">String</span><span class="op" id="2741131">(</span><span class="op" id="2741132">)</span>&nbsp;<span class="op" id="2741134">+</span>&nbsp;<span class="string" id="2741136">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2741144">+</span>&nbsp;<span class="ident" id="2741146">typ</span><span class="op" id="2741149">.</span><span class="ident" id="2741150">String</span><span class="op" id="2741156">(</span><span class="op" id="2741157">)</span><span class="op" id="2741158">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2741168">if</span>&nbsp;<span class="ident" id="2741171">v</span><span class="op" id="2741172">.</span><span class="ident" id="2741173">flag</span><span class="op" id="2741177">&amp;</span><span class="ident" id="2741178">flagRO</span>&nbsp;<span class="op" id="2741185">!=</span>&nbsp;<span class="num" id="2741188">0</span>&nbsp;<span class="op" id="2741190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2741196">panic</span><span class="op" id="2741201">(</span><span class="string" id="2741202">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2741249">+</span>&nbsp;<span class="ident" id="2741251">funcName</span><span class="op" id="2741259">(</span><span class="ident" id="2741260">f</span><span class="op" id="2741261">)</span>&nbsp;<span class="op" id="2741263">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2741270">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2741318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741323">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2741328">off</span>&nbsp;<span class="op" id="2741332">+=</span>&nbsp;<span class="op" id="2741335">-</span><span class="ident" id="2741336">off</span>&nbsp;<span class="op" id="2741340">&amp;</span>&nbsp;<span class="builtintype" id="2741342">uintptr</span><span class="op" id="2741349">(</span><span class="ident" id="2741350">typ</span><span class="op" id="2741353">.</span><span class="ident" id="2741354">align</span><span class="op" id="2741359">-</span><span class="num" id="2741360">1</span><span class="op" id="2741361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2741366">addr</span>&nbsp;<span class="op" id="2741371">:=</span>&nbsp;<span class="ident" id="2741374">unsafe</span><span class="op" id="2741380">.</span><span class="ident" id="2741381">Pointer</span><span class="op" id="2741388">(</span><span class="builtintype" id="2741389">uintptr</span><span class="op" id="2741396">(</span><span class="ident" id="2741397">ptr</span><span class="op" id="2741400">)</span>&nbsp;<span class="op" id="2741402">+</span>&nbsp;<span class="ident" id="2741404">off</span><span class="op" id="2741407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2741412">if</span>&nbsp;<span class="ident" id="2741415">v</span><span class="op" id="2741416">.</span><span class="ident" id="2741417">flag</span><span class="op" id="2741421">&amp;</span><span class="ident" id="2741422">flagIndir</span>&nbsp;<span class="op" id="2741432">!=</span>&nbsp;<span class="num" id="2741435">0</span>&nbsp;<span class="op" id="2741437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2741443">memmove</span><span class="op" id="2741450">(</span><span class="ident" id="2741451">addr</span><span class="op" id="2741455">,</span>&nbsp;<span class="ident" id="2741457">v</span><span class="op" id="2741458">.</span><span class="ident" id="2741459">ptr</span><span class="op" id="2741462">,</span>&nbsp;<span class="ident" id="2741464">typ</span><span class="op" id="2741467">.</span><span class="ident" id="2741468">size</span><span class="op" id="2741472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741477">}</span>&nbsp;<span class="keyword" id="2741479">else</span>&nbsp;<span class="op" id="2741484">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741490">*</span><span class="op" id="2741491">(</span><span class="op" id="2741492">*</span><span class="ident" id="2741493">unsafe</span><span class="op" id="2741499">.</span><span class="ident" id="2741500">Pointer</span><span class="op" id="2741507">)</span><span class="op" id="2741508">(</span><span class="ident" id="2741509">addr</span><span class="op" id="2741513">)</span>&nbsp;<span class="op" id="2741515">=</span>&nbsp;<span class="ident" id="2741517">v</span><span class="op" id="2741518">.</span><span class="ident" id="2741519">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2741531">off</span>&nbsp;<span class="op" id="2741535">+=</span>&nbsp;<span class="ident" id="2741538">typ</span><span class="op" id="2741541">.</span><span class="ident" id="2741542">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2741552">}</span><br>
<span class="lineno">515</span><span class="op" id="2741554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2741557">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2741614">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2741669">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2741728">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2741744">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2741814">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2741892">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2741948">func</span>&nbsp;<span class="ident" id="2741953">methodReceiver</span><span class="op" id="2741967">(</span><span class="ident" id="2741968">op</span>&nbsp;<span class="builtintype" id="2741971">string</span><span class="op" id="2741977">,</span>&nbsp;<span class="ident" id="2741979">v</span>&nbsp;<span class="ident" id="2741981">Value</span><span class="op" id="2741986">,</span>&nbsp;<span class="ident" id="2741988">methodIndex</span>&nbsp;<span class="builtintype" id="2742000">int</span><span class="op" id="2742003">)</span>&nbsp;<span class="op" id="2742005">(</span><span class="ident" id="2742006">rcvrtype</span><span class="op" id="2742014">,</span>&nbsp;<span class="ident" id="2742016">t</span>&nbsp;<span class="op" id="2742018">*</span><span class="ident" id="2742019">rtype</span><span class="op" id="2742024">,</span>&nbsp;<span class="ident" id="2742026">fn</span>&nbsp;<span class="ident" id="2742029">unsafe</span><span class="op" id="2742035">.</span><span class="ident" id="2742036">Pointer</span><span class="op" id="2742043">)</span>&nbsp;<span class="op" id="2742045">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742048">i</span>&nbsp;<span class="op" id="2742050">:=</span>&nbsp;<span class="ident" id="2742053">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742066">if</span>&nbsp;<span class="ident" id="2742069">v</span><span class="op" id="2742070">.</span><span class="ident" id="2742071">typ</span><span class="op" id="2742074">.</span><span class="ident" id="2742075">Kind</span><span class="op" id="2742079">(</span><span class="op" id="2742080">)</span>&nbsp;<span class="op" id="2742082">==</span>&nbsp;<span class="ident" id="2742085">Interface</span>&nbsp;<span class="op" id="2742095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742099">tt</span>&nbsp;<span class="op" id="2742102">:=</span>&nbsp;<span class="op" id="2742105">(</span><span class="op" id="2742106">*</span><span class="ident" id="2742107">interfaceType</span><span class="op" id="2742120">)</span><span class="op" id="2742121">(</span><span class="ident" id="2742122">unsafe</span><span class="op" id="2742128">.</span><span class="ident" id="2742129">Pointer</span><span class="op" id="2742136">(</span><span class="ident" id="2742137">v</span><span class="op" id="2742138">.</span><span class="ident" id="2742139">typ</span><span class="op" id="2742142">)</span><span class="op" id="2742143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742147">if</span>&nbsp;<span class="builtintype" id="2742150">uint</span><span class="op" id="2742154">(</span><span class="ident" id="2742155">i</span><span class="op" id="2742156">)</span>&nbsp;<span class="op" id="2742158">&gt;=</span>&nbsp;<span class="builtintype" id="2742161">uint</span><span class="op" id="2742165">(</span><span class="builtinfunc" id="2742166">len</span><span class="op" id="2742169">(</span><span class="ident" id="2742170">tt</span><span class="op" id="2742172">.</span><span class="ident" id="2742173">methods</span><span class="op" id="2742180">)</span><span class="op" id="2742181">)</span>&nbsp;<span class="op" id="2742183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2742188">panic</span><span class="op" id="2742193">(</span><span class="string" id="2742194">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2742241">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742249">m</span>&nbsp;<span class="op" id="2742251">:=</span>&nbsp;<span class="op" id="2742254">&amp;</span><span class="ident" id="2742255">tt</span><span class="op" id="2742257">.</span><span class="ident" id="2742258">methods</span><span class="op" id="2742265">[</span><span class="ident" id="2742266">i</span><span class="op" id="2742267">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742271">if</span>&nbsp;<span class="ident" id="2742274">m</span><span class="op" id="2742275">.</span><span class="ident" id="2742276">pkgPath</span>&nbsp;<span class="op" id="2742284">!=</span>&nbsp;<span class="builtintype" id="2742287">nil</span>&nbsp;<span class="op" id="2742291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2742296">panic</span><span class="op" id="2742301">(</span><span class="string" id="2742302">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2742314">+</span>&nbsp;<span class="ident" id="2742316">op</span>&nbsp;<span class="op" id="2742319">+</span>&nbsp;<span class="string" id="2742321">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2742344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742348">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742352">iface</span>&nbsp;<span class="op" id="2742358">:=</span>&nbsp;<span class="op" id="2742361">(</span><span class="op" id="2742362">*</span><span class="ident" id="2742363">nonEmptyInterface</span><span class="op" id="2742380">)</span><span class="op" id="2742381">(</span><span class="ident" id="2742382">v</span><span class="op" id="2742383">.</span><span class="ident" id="2742384">ptr</span><span class="op" id="2742387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742391">if</span>&nbsp;<span class="ident" id="2742394">iface</span><span class="op" id="2742399">.</span><span class="ident" id="2742400">itab</span>&nbsp;<span class="op" id="2742405">==</span>&nbsp;<span class="builtintype" id="2742408">nil</span>&nbsp;<span class="op" id="2742412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2742417">panic</span><span class="op" id="2742422">(</span><span class="string" id="2742423">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2742435">+</span>&nbsp;<span class="ident" id="2742437">op</span>&nbsp;<span class="op" id="2742440">+</span>&nbsp;<span class="string" id="2742442">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2742477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742485">rcvrtype</span>&nbsp;<span class="op" id="2742494">=</span>&nbsp;<span class="ident" id="2742496">iface</span><span class="op" id="2742501">.</span><span class="ident" id="2742502">itab</span><span class="op" id="2742506">.</span><span class="ident" id="2742507">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742513">fn</span>&nbsp;<span class="op" id="2742516">=</span>&nbsp;<span class="ident" id="2742518">unsafe</span><span class="op" id="2742524">.</span><span class="ident" id="2742525">Pointer</span><span class="op" id="2742532">(</span><span class="op" id="2742533">&amp;</span><span class="ident" id="2742534">iface</span><span class="op" id="2742539">.</span><span class="ident" id="2742540">itab</span><span class="op" id="2742544">.</span><span class="ident" id="2742545">fun</span><span class="op" id="2742548">[</span><span class="ident" id="2742549">i</span><span class="op" id="2742550">]</span><span class="op" id="2742551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742555">t</span>&nbsp;<span class="op" id="2742557">=</span>&nbsp;<span class="ident" id="2742559">m</span><span class="op" id="2742560">.</span><span class="ident" id="2742561">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742566">}</span>&nbsp;<span class="keyword" id="2742568">else</span>&nbsp;<span class="op" id="2742573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742577">rcvrtype</span>&nbsp;<span class="op" id="2742586">=</span>&nbsp;<span class="ident" id="2742588">v</span><span class="op" id="2742589">.</span><span class="ident" id="2742590">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742596">ut</span>&nbsp;<span class="op" id="2742599">:=</span>&nbsp;<span class="ident" id="2742602">v</span><span class="op" id="2742603">.</span><span class="ident" id="2742604">typ</span><span class="op" id="2742607">.</span><span class="ident" id="2742608">uncommon</span><span class="op" id="2742616">(</span><span class="op" id="2742617">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742621">if</span>&nbsp;<span class="ident" id="2742624">ut</span>&nbsp;<span class="op" id="2742627">==</span>&nbsp;<span class="builtintype" id="2742630">nil</span>&nbsp;<span class="op" id="2742634">||</span>&nbsp;<span class="builtintype" id="2742637">uint</span><span class="op" id="2742641">(</span><span class="ident" id="2742642">i</span><span class="op" id="2742643">)</span>&nbsp;<span class="op" id="2742645">&gt;=</span>&nbsp;<span class="builtintype" id="2742648">uint</span><span class="op" id="2742652">(</span><span class="builtinfunc" id="2742653">len</span><span class="op" id="2742656">(</span><span class="ident" id="2742657">ut</span><span class="op" id="2742659">.</span><span class="ident" id="2742660">methods</span><span class="op" id="2742667">)</span><span class="op" id="2742668">)</span>&nbsp;<span class="op" id="2742670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2742675">panic</span><span class="op" id="2742680">(</span><span class="string" id="2742681">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2742728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742736">m</span>&nbsp;<span class="op" id="2742738">:=</span>&nbsp;<span class="op" id="2742741">&amp;</span><span class="ident" id="2742742">ut</span><span class="op" id="2742744">.</span><span class="ident" id="2742745">methods</span><span class="op" id="2742752">[</span><span class="ident" id="2742753">i</span><span class="op" id="2742754">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742758">if</span>&nbsp;<span class="ident" id="2742761">m</span><span class="op" id="2742762">.</span><span class="ident" id="2742763">pkgPath</span>&nbsp;<span class="op" id="2742771">!=</span>&nbsp;<span class="builtintype" id="2742774">nil</span>&nbsp;<span class="op" id="2742778">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2742783">panic</span><span class="op" id="2742788">(</span><span class="string" id="2742789">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2742801">+</span>&nbsp;<span class="ident" id="2742803">op</span>&nbsp;<span class="op" id="2742806">+</span>&nbsp;<span class="string" id="2742808">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2742831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742839">fn</span>&nbsp;<span class="op" id="2742842">=</span>&nbsp;<span class="ident" id="2742844">unsafe</span><span class="op" id="2742850">.</span><span class="ident" id="2742851">Pointer</span><span class="op" id="2742858">(</span><span class="op" id="2742859">&amp;</span><span class="ident" id="2742860">m</span><span class="op" id="2742861">.</span><span class="ident" id="2742862">ifn</span><span class="op" id="2742865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2742869">t</span>&nbsp;<span class="op" id="2742871">=</span>&nbsp;<span class="ident" id="2742873">m</span><span class="op" id="2742874">.</span><span class="ident" id="2742875">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2742881">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2742884">return</span><br>
<span class="lineno"></span><span class="op" id="2742891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742894">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2742959">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2743018">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2743073">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2743136">func</span>&nbsp;<span class="ident" id="2743141">storeRcvr</span><span class="op" id="2743150">(</span><span class="ident" id="2743151">v</span>&nbsp;<span class="ident" id="2743153">Value</span><span class="op" id="2743158">,</span>&nbsp;<span class="ident" id="2743160">p</span>&nbsp;<span class="ident" id="2743162">unsafe</span><span class="op" id="2743168">.</span><span class="ident" id="2743169">Pointer</span><span class="op" id="2743176">)</span>&nbsp;<span class="op" id="2743178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2743181">t</span>&nbsp;<span class="op" id="2743183">:=</span>&nbsp;<span class="ident" id="2743186">v</span><span class="op" id="2743187">.</span><span class="ident" id="2743188">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2743193">if</span>&nbsp;<span class="ident" id="2743196">t</span><span class="op" id="2743197">.</span><span class="ident" id="2743198">Kind</span><span class="op" id="2743202">(</span><span class="op" id="2743203">)</span>&nbsp;<span class="op" id="2743205">==</span>&nbsp;<span class="ident" id="2743208">Interface</span>&nbsp;<span class="op" id="2743218">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2743222">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2743277">iface</span>&nbsp;<span class="op" id="2743283">:=</span>&nbsp;<span class="op" id="2743286">(</span><span class="op" id="2743287">*</span><span class="ident" id="2743288">nonEmptyInterface</span><span class="op" id="2743305">)</span><span class="op" id="2743306">(</span><span class="ident" id="2743307">v</span><span class="op" id="2743308">.</span><span class="ident" id="2743309">ptr</span><span class="op" id="2743312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743316">*</span><span class="op" id="2743317">(</span><span class="op" id="2743318">*</span><span class="ident" id="2743319">unsafe</span><span class="op" id="2743325">.</span><span class="ident" id="2743326">Pointer</span><span class="op" id="2743333">)</span><span class="op" id="2743334">(</span><span class="ident" id="2743335">p</span><span class="op" id="2743336">)</span>&nbsp;<span class="op" id="2743338">=</span>&nbsp;<span class="ident" id="2743340">unsafe</span><span class="op" id="2743346">.</span><span class="ident" id="2743347">Pointer</span><span class="op" id="2743354">(</span><span class="ident" id="2743355">iface</span><span class="op" id="2743360">.</span><span class="ident" id="2743361">word</span><span class="op" id="2743365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743368">}</span>&nbsp;<span class="keyword" id="2743370">else</span>&nbsp;<span class="keyword" id="2743375">if</span>&nbsp;<span class="ident" id="2743378">v</span><span class="op" id="2743379">.</span><span class="ident" id="2743380">flag</span><span class="op" id="2743384">&amp;</span><span class="ident" id="2743385">flagIndir</span>&nbsp;<span class="op" id="2743395">!=</span>&nbsp;<span class="num" id="2743398">0</span>&nbsp;<span class="op" id="2743400">&amp;&amp;</span>&nbsp;<span class="op" id="2743403">!</span><span class="ident" id="2743404">ifaceIndir</span><span class="op" id="2743414">(</span><span class="ident" id="2743415">t</span><span class="op" id="2743416">)</span>&nbsp;<span class="op" id="2743418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743422">*</span><span class="op" id="2743423">(</span><span class="op" id="2743424">*</span><span class="ident" id="2743425">unsafe</span><span class="op" id="2743431">.</span><span class="ident" id="2743432">Pointer</span><span class="op" id="2743439">)</span><span class="op" id="2743440">(</span><span class="ident" id="2743441">p</span><span class="op" id="2743442">)</span>&nbsp;<span class="op" id="2743444">=</span>&nbsp;<span class="op" id="2743446">*</span><span class="op" id="2743447">(</span><span class="op" id="2743448">*</span><span class="ident" id="2743449">unsafe</span><span class="op" id="2743455">.</span><span class="ident" id="2743456">Pointer</span><span class="op" id="2743463">)</span><span class="op" id="2743464">(</span><span class="ident" id="2743465">v</span><span class="op" id="2743466">.</span><span class="ident" id="2743467">ptr</span><span class="op" id="2743470">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743473">}</span>&nbsp;<span class="keyword" id="2743475">else</span>&nbsp;<span class="op" id="2743480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743484">*</span><span class="op" id="2743485">(</span><span class="op" id="2743486">*</span><span class="ident" id="2743487">unsafe</span><span class="op" id="2743493">.</span><span class="ident" id="2743494">Pointer</span><span class="op" id="2743501">)</span><span class="op" id="2743502">(</span><span class="ident" id="2743503">p</span><span class="op" id="2743504">)</span>&nbsp;<span class="op" id="2743506">=</span>&nbsp;<span class="ident" id="2743508">v</span><span class="op" id="2743509">.</span><span class="ident" id="2743510">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2743515">}</span><br>
<span class="lineno"></span><span class="op" id="2743517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2743520">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2743585">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2743614">func</span>&nbsp;<span class="ident" id="2743619">align</span><span class="op" id="2743624">(</span><span class="ident" id="2743625">x</span><span class="op" id="2743626">,</span>&nbsp;<span class="ident" id="2743628">n</span>&nbsp;<span class="builtintype" id="2743630">uintptr</span><span class="op" id="2743637">)</span>&nbsp;<span class="builtintype" id="2743639">uintptr</span>&nbsp;<span class="op" id="2743647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2743650">return</span>&nbsp;<span class="op" id="2743657">(</span><span class="ident" id="2743658">x</span>&nbsp;<span class="op" id="2743660">+</span>&nbsp;<span class="ident" id="2743662">n</span>&nbsp;<span class="op" id="2743664">-</span>&nbsp;<span class="num" id="2743666">1</span><span class="op" id="2743667">)</span>&nbsp;<span class="op" id="2743669">&amp;^</span>&nbsp;<span class="op" id="2743672">(</span><span class="ident" id="2743673">n</span>&nbsp;<span class="op" id="2743675">-</span>&nbsp;<span class="num" id="2743677">1</span><span class="op" id="2743678">)</span><br>
<span class="lineno"></span><span class="op" id="2743680">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2743683">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2743752">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2743809">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2743882">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2743946">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2743999">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2744080">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2744154">//</span><br>
<span class="lineno"></span><span class="comment" id="2744157">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2744233">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2744305">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2744376">func</span>&nbsp;<span class="ident" id="2744381">callMethod</span><span class="op" id="2744391">(</span><span class="ident" id="2744392">ctxt</span>&nbsp;<span class="op" id="2744397">*</span><span class="ident" id="2744398">methodValue</span><span class="op" id="2744409">,</span>&nbsp;<span class="ident" id="2744411">frame</span>&nbsp;<span class="ident" id="2744417">unsafe</span><span class="op" id="2744423">.</span><span class="ident" id="2744424">Pointer</span><span class="op" id="2744431">)</span>&nbsp;<span class="op" id="2744433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744436">rcvr</span>&nbsp;<span class="op" id="2744441">:=</span>&nbsp;<span class="ident" id="2744444">ctxt</span><span class="op" id="2744448">.</span><span class="ident" id="2744449">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744455">rcvrtype</span><span class="op" id="2744463">,</span>&nbsp;<span class="ident" id="2744465">t</span><span class="op" id="2744466">,</span>&nbsp;<span class="ident" id="2744468">fn</span>&nbsp;<span class="op" id="2744471">:=</span>&nbsp;<span class="ident" id="2744474">methodReceiver</span><span class="op" id="2744488">(</span><span class="string" id="2744489">&#34;call&#34;</span><span class="op" id="2744495">,</span>&nbsp;<span class="ident" id="2744497">rcvr</span><span class="op" id="2744501">,</span>&nbsp;<span class="ident" id="2744503">ctxt</span><span class="op" id="2744507">.</span><span class="ident" id="2744508">method</span><span class="op" id="2744514">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744517">frametype</span><span class="op" id="2744526">,</span>&nbsp;<span class="ident" id="2744528">argSize</span><span class="op" id="2744535">,</span>&nbsp;<span class="ident" id="2744537">retOffset</span><span class="op" id="2744546">,</span>&nbsp;<span class="ident" id="2744548">_</span>&nbsp;<span class="op" id="2744550">:=</span>&nbsp;<span class="ident" id="2744553">funcLayout</span><span class="op" id="2744563">(</span><span class="ident" id="2744564">t</span><span class="op" id="2744565">,</span>&nbsp;<span class="ident" id="2744567">rcvrtype</span><span class="op" id="2744575">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2744579">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744654">args</span>&nbsp;<span class="op" id="2744659">:=</span>&nbsp;<span class="ident" id="2744662">unsafe_New</span><span class="op" id="2744672">(</span><span class="ident" id="2744673">frametype</span><span class="op" id="2744682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2744686">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744725">storeRcvr</span><span class="op" id="2744734">(</span><span class="ident" id="2744735">rcvr</span><span class="op" id="2744739">,</span>&nbsp;<span class="ident" id="2744741">args</span><span class="op" id="2744745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744748">memmove</span><span class="op" id="2744755">(</span><span class="ident" id="2744756">unsafe</span><span class="op" id="2744762">.</span><span class="ident" id="2744763">Pointer</span><span class="op" id="2744770">(</span><span class="builtintype" id="2744771">uintptr</span><span class="op" id="2744778">(</span><span class="ident" id="2744779">args</span><span class="op" id="2744783">)</span><span class="op" id="2744784">+</span><span class="ident" id="2744785">ptrSize</span><span class="op" id="2744792">)</span><span class="op" id="2744793">,</span>&nbsp;<span class="ident" id="2744795">frame</span><span class="op" id="2744800">,</span>&nbsp;<span class="ident" id="2744802">argSize</span><span class="op" id="2744809">-</span><span class="ident" id="2744810">ptrSize</span><span class="op" id="2744817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2744821">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2744831">call</span><span class="op" id="2744835">(</span><span class="ident" id="2744836">fn</span><span class="op" id="2744838">,</span>&nbsp;<span class="ident" id="2744840">args</span><span class="op" id="2744844">,</span>&nbsp;<span class="builtintype" id="2744846">uint32</span><span class="op" id="2744852">(</span><span class="ident" id="2744853">frametype</span><span class="op" id="2744862">.</span><span class="ident" id="2744863">size</span><span class="op" id="2744867">)</span><span class="op" id="2744868">,</span>&nbsp;<span class="builtintype" id="2744870">uint32</span><span class="op" id="2744876">(</span><span class="ident" id="2744877">retOffset</span><span class="op" id="2744886">)</span><span class="op" id="2744887">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2744891">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2744959">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2745031">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2745102">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2745118">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745178">callerRetOffset</span>&nbsp;<span class="op" id="2745194">:=</span>&nbsp;<span class="ident" id="2745197">retOffset</span>&nbsp;<span class="op" id="2745207">-</span>&nbsp;<span class="ident" id="2745209">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745218">if</span>&nbsp;<span class="ident" id="2745221">runtime</span><span class="op" id="2745228">.</span><span class="ident" id="2745229">GOARCH</span>&nbsp;<span class="op" id="2745236">==</span>&nbsp;<span class="string" id="2745239">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2745250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745254">callerRetOffset</span>&nbsp;<span class="op" id="2745270">=</span>&nbsp;<span class="ident" id="2745272">align</span><span class="op" id="2745277">(</span><span class="ident" id="2745278">argSize</span><span class="op" id="2745285">-</span><span class="ident" id="2745286">ptrSize</span><span class="op" id="2745293">,</span>&nbsp;<span class="num" id="2745295">8</span><span class="op" id="2745296">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2745299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745302">memmove</span><span class="op" id="2745309">(</span><span class="ident" id="2745310">unsafe</span><span class="op" id="2745316">.</span><span class="ident" id="2745317">Pointer</span><span class="op" id="2745324">(</span><span class="builtintype" id="2745325">uintptr</span><span class="op" id="2745332">(</span><span class="ident" id="2745333">frame</span><span class="op" id="2745338">)</span><span class="op" id="2745339">+</span><span class="ident" id="2745340">callerRetOffset</span><span class="op" id="2745355">)</span><span class="op" id="2745356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745360">unsafe</span><span class="op" id="2745366">.</span><span class="ident" id="2745367">Pointer</span><span class="op" id="2745374">(</span><span class="builtintype" id="2745375">uintptr</span><span class="op" id="2745382">(</span><span class="ident" id="2745383">args</span><span class="op" id="2745387">)</span><span class="op" id="2745388">+</span><span class="ident" id="2745389">retOffset</span><span class="op" id="2745398">)</span><span class="op" id="2745399">,</span>&nbsp;<span class="ident" id="2745401">frametype</span><span class="op" id="2745410">.</span><span class="ident" id="2745411">size</span><span class="op" id="2745415">-</span><span class="ident" id="2745416">retOffset</span><span class="op" id="2745425">)</span><br>
<span class="lineno"></span><span class="op" id="2745427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2745430">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2745492">func</span>&nbsp;<span class="ident" id="2745497">funcName</span><span class="op" id="2745505">(</span><span class="ident" id="2745506">f</span>&nbsp;<span class="keyword" id="2745508">func</span><span class="op" id="2745512">(</span><span class="op" id="2745513">[</span><span class="op" id="2745514">]</span><span class="ident" id="2745515">Value</span><span class="op" id="2745520">)</span>&nbsp;<span class="op" id="2745522">[</span><span class="op" id="2745523">]</span><span class="ident" id="2745524">Value</span><span class="op" id="2745529">)</span>&nbsp;<span class="builtintype" id="2745531">string</span>&nbsp;<span class="op" id="2745538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745541">pc</span>&nbsp;<span class="op" id="2745544">:=</span>&nbsp;<span class="op" id="2745547">*</span><span class="op" id="2745548">(</span><span class="op" id="2745549">*</span><span class="builtintype" id="2745550">uintptr</span><span class="op" id="2745557">)</span><span class="op" id="2745558">(</span><span class="ident" id="2745559">unsafe</span><span class="op" id="2745565">.</span><span class="ident" id="2745566">Pointer</span><span class="op" id="2745573">(</span><span class="op" id="2745574">&amp;</span><span class="ident" id="2745575">f</span><span class="op" id="2745576">)</span><span class="op" id="2745577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745580">rf</span>&nbsp;<span class="op" id="2745583">:=</span>&nbsp;<span class="ident" id="2745586">runtime</span><span class="op" id="2745593">.</span><span class="ident" id="2745594">FuncForPC</span><span class="op" id="2745603">(</span><span class="ident" id="2745604">pc</span><span class="op" id="2745606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745609">if</span>&nbsp;<span class="ident" id="2745612">rf</span>&nbsp;<span class="op" id="2745615">!=</span>&nbsp;<span class="builtintype" id="2745618">nil</span>&nbsp;<span class="op" id="2745622">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745626">return</span>&nbsp;<span class="ident" id="2745633">rf</span><span class="op" id="2745635">.</span><span class="ident" id="2745636">Name</span><span class="op" id="2745640">(</span><span class="op" id="2745641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2745644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745647">return</span>&nbsp;<span class="string" id="2745654">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2745664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2745667">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2745696">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2745751">func</span>&nbsp;<span class="op" id="2745756">(</span><span class="ident" id="2745757">v</span>&nbsp;<span class="ident" id="2745759">Value</span><span class="op" id="2745764">)</span>&nbsp;<span class="ident" id="2745766">Cap</span><span class="op" id="2745769">(</span><span class="op" id="2745770">)</span>&nbsp;<span class="builtintype" id="2745772">int</span>&nbsp;<span class="op" id="2745776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2745779">k</span>&nbsp;<span class="op" id="2745781">:=</span>&nbsp;<span class="ident" id="2745784">v</span><span class="op" id="2745785">.</span><span class="ident" id="2745786">kind</span><span class="op" id="2745790">(</span><span class="op" id="2745791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745794">switch</span>&nbsp;<span class="ident" id="2745801">k</span>&nbsp;<span class="op" id="2745803">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745806">case</span>&nbsp;<span class="ident" id="2745811">Array</span><span class="op" id="2745816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745820">return</span>&nbsp;<span class="ident" id="2745827">v</span><span class="op" id="2745828">.</span><span class="ident" id="2745829">typ</span><span class="op" id="2745832">.</span><span class="ident" id="2745833">Len</span><span class="op" id="2745836">(</span><span class="op" id="2745837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745840">case</span>&nbsp;<span class="ident" id="2745845">Chan</span><span class="op" id="2745849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745853">return</span>&nbsp;<span class="builtintype" id="2745860">int</span><span class="op" id="2745863">(</span><span class="ident" id="2745864">chancap</span><span class="op" id="2745871">(</span><span class="ident" id="2745872">v</span><span class="op" id="2745873">.</span><span class="ident" id="2745874">pointer</span><span class="op" id="2745881">(</span><span class="op" id="2745882">)</span><span class="op" id="2745883">)</span><span class="op" id="2745884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745887">case</span>&nbsp;<span class="ident" id="2745892">Slice</span><span class="op" id="2745897">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2745901">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2745960">return</span>&nbsp;<span class="op" id="2745967">(</span><span class="op" id="2745968">*</span><span class="ident" id="2745969">sliceHeader</span><span class="op" id="2745980">)</span><span class="op" id="2745981">(</span><span class="ident" id="2745982">v</span><span class="op" id="2745983">.</span><span class="ident" id="2745984">ptr</span><span class="op" id="2745987">)</span><span class="op" id="2745988">.</span><span class="ident" id="2745989">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2745994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2745997">panic</span><span class="op" id="2746002">(</span><span class="op" id="2746003">&amp;</span><span class="ident" id="2746004">ValueError</span><span class="op" id="2746014">{</span><span class="string" id="2746015">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2746034">,</span>&nbsp;<span class="ident" id="2746036">v</span><span class="op" id="2746037">.</span><span class="ident" id="2746038">kind</span><span class="op" id="2746042">(</span><span class="op" id="2746043">)</span><span class="op" id="2746044">}</span><span class="op" id="2746045">)</span><br>
<span class="lineno"></span><span class="op" id="2746047">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2746050">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2746081">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2746119">func</span>&nbsp;<span class="op" id="2746124">(</span><span class="ident" id="2746125">v</span>&nbsp;<span class="ident" id="2746127">Value</span><span class="op" id="2746132">)</span>&nbsp;<span class="ident" id="2746134">Close</span><span class="op" id="2746139">(</span><span class="op" id="2746140">)</span>&nbsp;<span class="op" id="2746142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746145">v</span><span class="op" id="2746146">.</span><span class="ident" id="2746147">mustBe</span><span class="op" id="2746153">(</span><span class="ident" id="2746154">Chan</span><span class="op" id="2746158">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746161">v</span><span class="op" id="2746162">.</span><span class="ident" id="2746163">mustBeExported</span><span class="op" id="2746177">(</span><span class="op" id="2746178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746181">chanclose</span><span class="op" id="2746190">(</span><span class="ident" id="2746191">v</span><span class="op" id="2746192">.</span><span class="ident" id="2746193">pointer</span><span class="op" id="2746200">(</span><span class="op" id="2746201">)</span><span class="op" id="2746202">)</span><br>
<span class="lineno"></span><span class="op" id="2746204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746207">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2746265">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2746321">func</span>&nbsp;<span class="op" id="2746326">(</span><span class="ident" id="2746327">v</span>&nbsp;<span class="ident" id="2746329">Value</span><span class="op" id="2746334">)</span>&nbsp;<span class="ident" id="2746336">Complex</span><span class="op" id="2746343">(</span><span class="op" id="2746344">)</span>&nbsp;<span class="builtintype" id="2746346">complex128</span>&nbsp;<span class="op" id="2746357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746360">k</span>&nbsp;<span class="op" id="2746362">:=</span>&nbsp;<span class="ident" id="2746365">v</span><span class="op" id="2746366">.</span><span class="ident" id="2746367">kind</span><span class="op" id="2746371">(</span><span class="op" id="2746372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746375">switch</span>&nbsp;<span class="ident" id="2746382">k</span>&nbsp;<span class="op" id="2746384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746387">case</span>&nbsp;<span class="ident" id="2746392">Complex64</span><span class="op" id="2746401">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746405">return</span>&nbsp;<span class="builtintype" id="2746412">complex128</span><span class="op" id="2746422">(</span><span class="op" id="2746423">*</span><span class="op" id="2746424">(</span><span class="op" id="2746425">*</span><span class="builtintype" id="2746426">complex64</span><span class="op" id="2746435">)</span><span class="op" id="2746436">(</span><span class="ident" id="2746437">v</span><span class="op" id="2746438">.</span><span class="ident" id="2746439">ptr</span><span class="op" id="2746442">)</span><span class="op" id="2746443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746446">case</span>&nbsp;<span class="ident" id="2746451">Complex128</span><span class="op" id="2746461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746465">return</span>&nbsp;<span class="op" id="2746472">*</span><span class="op" id="2746473">(</span><span class="op" id="2746474">*</span><span class="builtintype" id="2746475">complex128</span><span class="op" id="2746485">)</span><span class="op" id="2746486">(</span><span class="ident" id="2746487">v</span><span class="op" id="2746488">.</span><span class="ident" id="2746489">ptr</span><span class="op" id="2746492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2746495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2746498">panic</span><span class="op" id="2746503">(</span><span class="op" id="2746504">&amp;</span><span class="ident" id="2746505">ValueError</span><span class="op" id="2746515">{</span><span class="string" id="2746516">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2746539">,</span>&nbsp;<span class="ident" id="2746541">v</span><span class="op" id="2746542">.</span><span class="ident" id="2746543">kind</span><span class="op" id="2746547">(</span><span class="op" id="2746548">)</span><span class="op" id="2746549">}</span><span class="op" id="2746550">)</span><br>
<span class="lineno">665</span><span class="op" id="2746552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746555">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2746611">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2746647">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2746697">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2746739">func</span>&nbsp;<span class="op" id="2746744">(</span><span class="ident" id="2746745">v</span>&nbsp;<span class="ident" id="2746747">Value</span><span class="op" id="2746752">)</span>&nbsp;<span class="ident" id="2746754">Elem</span><span class="op" id="2746758">(</span><span class="op" id="2746759">)</span>&nbsp;<span class="ident" id="2746761">Value</span>&nbsp;<span class="op" id="2746767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746770">k</span>&nbsp;<span class="op" id="2746772">:=</span>&nbsp;<span class="ident" id="2746775">v</span><span class="op" id="2746776">.</span><span class="ident" id="2746777">kind</span><span class="op" id="2746781">(</span><span class="op" id="2746782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746785">switch</span>&nbsp;<span class="ident" id="2746792">k</span>&nbsp;<span class="op" id="2746794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746797">case</span>&nbsp;<span class="ident" id="2746802">Interface</span><span class="op" id="2746811">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746815">var</span>&nbsp;<span class="ident" id="2746819">eface</span>&nbsp;<span class="keyword" id="2746825">interface</span><span class="op" id="2746834">{</span><span class="op" id="2746835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2746839">if</span>&nbsp;<span class="ident" id="2746842">v</span><span class="op" id="2746843">.</span><span class="ident" id="2746844">typ</span><span class="op" id="2746847">.</span><span class="ident" id="2746848">NumMethod</span><span class="op" id="2746857">(</span><span class="op" id="2746858">)</span>&nbsp;<span class="op" id="2746860">==</span>&nbsp;<span class="num" id="2746863">0</span>&nbsp;<span class="op" id="2746865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746870">eface</span>&nbsp;<span class="op" id="2746876">=</span>&nbsp;<span class="op" id="2746878">*</span><span class="op" id="2746879">(</span><span class="op" id="2746880">*</span><span class="keyword" id="2746881">interface</span><span class="op" id="2746890">{</span><span class="op" id="2746891">}</span><span class="op" id="2746892">)</span><span class="op" id="2746893">(</span><span class="ident" id="2746894">v</span><span class="op" id="2746895">.</span><span class="ident" id="2746896">ptr</span><span class="op" id="2746899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2746903">}</span>&nbsp;<span class="keyword" id="2746905">else</span>&nbsp;<span class="op" id="2746910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746915">eface</span>&nbsp;<span class="op" id="2746921">=</span>&nbsp;<span class="op" id="2746923">(</span><span class="keyword" id="2746924">interface</span><span class="op" id="2746933">{</span><span class="op" id="2746934">}</span><span class="op" id="2746935">)</span><span class="op" id="2746936">(</span><span class="op" id="2746937">*</span><span class="op" id="2746938">(</span><span class="op" id="2746939">*</span><span class="keyword" id="2746940">interface</span>&nbsp;<span class="op" id="2746950">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746956">M</span><span class="op" id="2746957">(</span><span class="op" id="2746958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2746963">}</span><span class="op" id="2746964">)</span><span class="op" id="2746965">(</span><span class="ident" id="2746966">v</span><span class="op" id="2746967">.</span><span class="ident" id="2746968">ptr</span><span class="op" id="2746971">)</span><span class="op" id="2746972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2746976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2746980">x</span>&nbsp;<span class="op" id="2746982">:=</span>&nbsp;<span class="ident" id="2746985">unpackEface</span><span class="op" id="2746996">(</span><span class="ident" id="2746997">eface</span><span class="op" id="2747002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747006">if</span>&nbsp;<span class="ident" id="2747009">x</span><span class="op" id="2747010">.</span><span class="ident" id="2747011">flag</span>&nbsp;<span class="op" id="2747016">!=</span>&nbsp;<span class="num" id="2747019">0</span>&nbsp;<span class="op" id="2747021">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747026">x</span><span class="op" id="2747027">.</span><span class="ident" id="2747028">flag</span>&nbsp;<span class="op" id="2747033">|=</span>&nbsp;<span class="ident" id="2747036">v</span><span class="op" id="2747037">.</span><span class="ident" id="2747038">flag</span>&nbsp;<span class="op" id="2747043">&amp;</span>&nbsp;<span class="ident" id="2747045">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747058">return</span>&nbsp;<span class="ident" id="2747065">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747068">case</span>&nbsp;<span class="ident" id="2747073">Ptr</span><span class="op" id="2747076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747080">ptr</span>&nbsp;<span class="op" id="2747084">:=</span>&nbsp;<span class="ident" id="2747087">v</span><span class="op" id="2747088">.</span><span class="ident" id="2747089">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747095">if</span>&nbsp;<span class="ident" id="2747098">v</span><span class="op" id="2747099">.</span><span class="ident" id="2747100">flag</span><span class="op" id="2747104">&amp;</span><span class="ident" id="2747105">flagIndir</span>&nbsp;<span class="op" id="2747115">!=</span>&nbsp;<span class="num" id="2747118">0</span>&nbsp;<span class="op" id="2747120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747125">ptr</span>&nbsp;<span class="op" id="2747129">=</span>&nbsp;<span class="op" id="2747131">*</span><span class="op" id="2747132">(</span><span class="op" id="2747133">*</span><span class="ident" id="2747134">unsafe</span><span class="op" id="2747140">.</span><span class="ident" id="2747141">Pointer</span><span class="op" id="2747148">)</span><span class="op" id="2747149">(</span><span class="ident" id="2747150">ptr</span><span class="op" id="2747153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2747161">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747209">if</span>&nbsp;<span class="ident" id="2747212">ptr</span>&nbsp;<span class="op" id="2747216">==</span>&nbsp;<span class="builtintype" id="2747219">nil</span>&nbsp;<span class="op" id="2747223">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747228">return</span>&nbsp;<span class="ident" id="2747235">Value</span><span class="op" id="2747240">{</span><span class="op" id="2747241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747249">tt</span>&nbsp;<span class="op" id="2747252">:=</span>&nbsp;<span class="op" id="2747255">(</span><span class="op" id="2747256">*</span><span class="ident" id="2747257">ptrType</span><span class="op" id="2747264">)</span><span class="op" id="2747265">(</span><span class="ident" id="2747266">unsafe</span><span class="op" id="2747272">.</span><span class="ident" id="2747273">Pointer</span><span class="op" id="2747280">(</span><span class="ident" id="2747281">v</span><span class="op" id="2747282">.</span><span class="ident" id="2747283">typ</span><span class="op" id="2747286">)</span><span class="op" id="2747287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747291">typ</span>&nbsp;<span class="op" id="2747295">:=</span>&nbsp;<span class="ident" id="2747298">tt</span><span class="op" id="2747300">.</span><span class="ident" id="2747301">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747308">fl</span>&nbsp;<span class="op" id="2747311">:=</span>&nbsp;<span class="ident" id="2747314">v</span><span class="op" id="2747315">.</span><span class="ident" id="2747316">flag</span><span class="op" id="2747320">&amp;</span><span class="ident" id="2747321">flagRO</span>&nbsp;<span class="op" id="2747328">|</span>&nbsp;<span class="ident" id="2747330">flagIndir</span>&nbsp;<span class="op" id="2747340">|</span>&nbsp;<span class="ident" id="2747342">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747353">fl</span>&nbsp;<span class="op" id="2747356">|=</span>&nbsp;<span class="ident" id="2747359">flag</span><span class="op" id="2747363">(</span><span class="ident" id="2747364">typ</span><span class="op" id="2747367">.</span><span class="ident" id="2747368">Kind</span><span class="op" id="2747372">(</span><span class="op" id="2747373">)</span><span class="op" id="2747374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747378">return</span>&nbsp;<span class="ident" id="2747385">Value</span><span class="op" id="2747390">{</span><span class="ident" id="2747391">typ</span><span class="op" id="2747394">,</span>&nbsp;<span class="ident" id="2747396">ptr</span><span class="op" id="2747399">,</span>&nbsp;<span class="ident" id="2747401">fl</span><span class="op" id="2747403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2747409">panic</span><span class="op" id="2747414">(</span><span class="op" id="2747415">&amp;</span><span class="ident" id="2747416">ValueError</span><span class="op" id="2747426">{</span><span class="string" id="2747427">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2747447">,</span>&nbsp;<span class="ident" id="2747449">v</span><span class="op" id="2747450">.</span><span class="ident" id="2747451">kind</span><span class="op" id="2747455">(</span><span class="op" id="2747456">)</span><span class="op" id="2747457">}</span><span class="op" id="2747458">)</span><br>
<span class="lineno"></span><span class="op" id="2747460">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2747463">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2747512">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2747573">func</span>&nbsp;<span class="op" id="2747578">(</span><span class="ident" id="2747579">v</span>&nbsp;<span class="ident" id="2747581">Value</span><span class="op" id="2747586">)</span>&nbsp;<span class="ident" id="2747588">Field</span><span class="op" id="2747593">(</span><span class="ident" id="2747594">i</span>&nbsp;<span class="builtintype" id="2747596">int</span><span class="op" id="2747599">)</span>&nbsp;<span class="ident" id="2747601">Value</span>&nbsp;<span class="op" id="2747607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747610">if</span>&nbsp;<span class="ident" id="2747613">v</span><span class="op" id="2747614">.</span><span class="ident" id="2747615">kind</span><span class="op" id="2747619">(</span><span class="op" id="2747620">)</span>&nbsp;<span class="op" id="2747622">!=</span>&nbsp;<span class="ident" id="2747625">Struct</span>&nbsp;<span class="op" id="2747632">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2747636">panic</span><span class="op" id="2747641">(</span><span class="op" id="2747642">&amp;</span><span class="ident" id="2747643">ValueError</span><span class="op" id="2747653">{</span><span class="string" id="2747654">&#34;reflect.Value.Field&#34;</span><span class="op" id="2747675">,</span>&nbsp;<span class="ident" id="2747677">v</span><span class="op" id="2747678">.</span><span class="ident" id="2747679">kind</span><span class="op" id="2747683">(</span><span class="op" id="2747684">)</span><span class="op" id="2747685">}</span><span class="op" id="2747686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747692">tt</span>&nbsp;<span class="op" id="2747695">:=</span>&nbsp;<span class="op" id="2747698">(</span><span class="op" id="2747699">*</span><span class="ident" id="2747700">structType</span><span class="op" id="2747710">)</span><span class="op" id="2747711">(</span><span class="ident" id="2747712">unsafe</span><span class="op" id="2747718">.</span><span class="ident" id="2747719">Pointer</span><span class="op" id="2747726">(</span><span class="ident" id="2747727">v</span><span class="op" id="2747728">.</span><span class="ident" id="2747729">typ</span><span class="op" id="2747732">)</span><span class="op" id="2747733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2747736">if</span>&nbsp;<span class="builtintype" id="2747739">uint</span><span class="op" id="2747743">(</span><span class="ident" id="2747744">i</span><span class="op" id="2747745">)</span>&nbsp;<span class="op" id="2747747">&gt;=</span>&nbsp;<span class="builtintype" id="2747750">uint</span><span class="op" id="2747754">(</span><span class="builtinfunc" id="2747755">len</span><span class="op" id="2747758">(</span><span class="ident" id="2747759">tt</span><span class="op" id="2747761">.</span><span class="ident" id="2747762">fields</span><span class="op" id="2747768">)</span><span class="op" id="2747769">)</span>&nbsp;<span class="op" id="2747771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2747775">panic</span><span class="op" id="2747780">(</span><span class="string" id="2747781">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2747816">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2747819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747822">field</span>&nbsp;<span class="op" id="2747828">:=</span>&nbsp;<span class="op" id="2747831">&amp;</span><span class="ident" id="2747832">tt</span><span class="op" id="2747834">.</span><span class="ident" id="2747835">fields</span><span class="op" id="2747841">[</span><span class="ident" id="2747842">i</span><span class="op" id="2747843">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747846">typ</span>&nbsp;<span class="op" id="2747850">:=</span>&nbsp;<span class="ident" id="2747853">field</span><span class="op" id="2747858">.</span><span class="ident" id="2747859">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2747865">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2747901">fl</span>&nbsp;<span class="op" id="2747904">:=</span>&nbsp;<span class="ident" id="2747907">v</span><span class="op" id="2747908">.</span><span class="ident" id="2747909">flag</span><span class="op" id="2747913">&amp;</span><span class="op" id="2747914">(</span><span class="ident" id="2747915">flagRO</span><span class="op" id="2747921">|</span><span class="ident" id="2747922">flagIndir</span><span class="op" id="2747931">|</span><span class="ident" id="2747932">flagAddr</span><span class="op" id="2747940">)</span>&nbsp;<span class="op" id="2747942">|</span>&nbsp;<span class="ident" id="2747944">flag</span><span class="op" id="2747948">(</span><span class="ident" id="2747949">typ</span><span class="op" id="2747952">.</span><span class="ident" id="2747953">Kind</span><span class="op" id="2747957">(</span><span class="op" id="2747958">)</span><span class="op" id="2747959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2747962">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748007">if</span>&nbsp;<span class="ident" id="2748010">field</span><span class="op" id="2748015">.</span><span class="ident" id="2748016">pkgPath</span>&nbsp;<span class="op" id="2748024">!=</span>&nbsp;<span class="builtintype" id="2748027">nil</span>&nbsp;<span class="op" id="2748031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2748035">fl</span>&nbsp;<span class="op" id="2748038">|=</span>&nbsp;<span class="ident" id="2748041">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748049">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2748052">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2748108">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2748173">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2748221">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2748279">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2748322">ptr</span>&nbsp;<span class="op" id="2748326">:=</span>&nbsp;<span class="ident" id="2748329">unsafe</span><span class="op" id="2748335">.</span><span class="ident" id="2748336">Pointer</span><span class="op" id="2748343">(</span><span class="builtintype" id="2748344">uintptr</span><span class="op" id="2748351">(</span><span class="ident" id="2748352">v</span><span class="op" id="2748353">.</span><span class="ident" id="2748354">ptr</span><span class="op" id="2748357">)</span>&nbsp;<span class="op" id="2748359">+</span>&nbsp;<span class="ident" id="2748361">field</span><span class="op" id="2748366">.</span><span class="ident" id="2748367">offset</span><span class="op" id="2748373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748376">return</span>&nbsp;<span class="ident" id="2748383">Value</span><span class="op" id="2748388">{</span><span class="ident" id="2748389">typ</span><span class="op" id="2748392">,</span>&nbsp;<span class="ident" id="2748394">ptr</span><span class="op" id="2748397">,</span>&nbsp;<span class="ident" id="2748399">fl</span><span class="op" id="2748401">}</span><br>
<span class="lineno"></span><span class="op" id="2748403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748406">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2748471">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2748511">func</span>&nbsp;<span class="op" id="2748516">(</span><span class="ident" id="2748517">v</span>&nbsp;<span class="ident" id="2748519">Value</span><span class="op" id="2748524">)</span>&nbsp;<span class="ident" id="2748526">FieldByIndex</span><span class="op" id="2748538">(</span><span class="ident" id="2748539">index</span>&nbsp;<span class="op" id="2748545">[</span><span class="op" id="2748546">]</span><span class="builtintype" id="2748547">int</span><span class="op" id="2748550">)</span>&nbsp;<span class="ident" id="2748552">Value</span>&nbsp;<span class="op" id="2748558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748561">if</span>&nbsp;<span class="builtinfunc" id="2748564">len</span><span class="op" id="2748567">(</span><span class="ident" id="2748568">index</span><span class="op" id="2748573">)</span>&nbsp;<span class="op" id="2748575">==</span>&nbsp;<span class="num" id="2748578">1</span>&nbsp;<span class="op" id="2748580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748584">return</span>&nbsp;<span class="ident" id="2748591">v</span><span class="op" id="2748592">.</span><span class="ident" id="2748593">Field</span><span class="op" id="2748598">(</span><span class="ident" id="2748599">index</span><span class="op" id="2748604">[</span><span class="num" id="2748605">0</span><span class="op" id="2748606">]</span><span class="op" id="2748607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748610">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2748613">v</span><span class="op" id="2748614">.</span><span class="ident" id="2748615">mustBe</span><span class="op" id="2748621">(</span><span class="ident" id="2748622">Struct</span><span class="op" id="2748628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748631">for</span>&nbsp;<span class="ident" id="2748635">i</span><span class="op" id="2748636">,</span>&nbsp;<span class="ident" id="2748638">x</span>&nbsp;<span class="op" id="2748640">:=</span>&nbsp;<span class="keyword" id="2748643">range</span>&nbsp;<span class="ident" id="2748649">index</span>&nbsp;<span class="op" id="2748655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748659">if</span>&nbsp;<span class="ident" id="2748662">i</span>&nbsp;<span class="op" id="2748664">&gt;</span>&nbsp;<span class="num" id="2748666">0</span>&nbsp;<span class="op" id="2748668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748673">if</span>&nbsp;<span class="ident" id="2748676">v</span><span class="op" id="2748677">.</span><span class="ident" id="2748678">Kind</span><span class="op" id="2748682">(</span><span class="op" id="2748683">)</span>&nbsp;<span class="op" id="2748685">==</span>&nbsp;<span class="ident" id="2748688">Ptr</span>&nbsp;<span class="op" id="2748692">&amp;&amp;</span>&nbsp;<span class="ident" id="2748695">v</span><span class="op" id="2748696">.</span><span class="ident" id="2748697">typ</span><span class="op" id="2748700">.</span><span class="ident" id="2748701">Elem</span><span class="op" id="2748705">(</span><span class="op" id="2748706">)</span><span class="op" id="2748707">.</span><span class="ident" id="2748708">Kind</span><span class="op" id="2748712">(</span><span class="op" id="2748713">)</span>&nbsp;<span class="op" id="2748715">==</span>&nbsp;<span class="ident" id="2748718">Struct</span>&nbsp;<span class="op" id="2748725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748731">if</span>&nbsp;<span class="ident" id="2748734">v</span><span class="op" id="2748735">.</span><span class="ident" id="2748736">IsNil</span><span class="op" id="2748741">(</span><span class="op" id="2748742">)</span>&nbsp;<span class="op" id="2748744">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2748751">panic</span><span class="op" id="2748756">(</span><span class="string" id="2748757">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2748818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2748830">v</span>&nbsp;<span class="op" id="2748832">=</span>&nbsp;<span class="ident" id="2748834">v</span><span class="op" id="2748835">.</span><span class="ident" id="2748836">Elem</span><span class="op" id="2748840">(</span><span class="op" id="2748841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748850">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2748854">v</span>&nbsp;<span class="op" id="2748856">=</span>&nbsp;<span class="ident" id="2748858">v</span><span class="op" id="2748859">.</span><span class="ident" id="2748860">Field</span><span class="op" id="2748865">(</span><span class="ident" id="2748866">x</span><span class="op" id="2748867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2748870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2748873">return</span>&nbsp;<span class="ident" id="2748880">v</span><br>
<span class="lineno"></span><span class="op" id="2748882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2748885">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2748946">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2748998">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2749038">func</span>&nbsp;<span class="op" id="2749043">(</span><span class="ident" id="2749044">v</span>&nbsp;<span class="ident" id="2749046">Value</span><span class="op" id="2749051">)</span>&nbsp;<span class="ident" id="2749053">FieldByName</span><span class="op" id="2749064">(</span><span class="ident" id="2749065">name</span>&nbsp;<span class="builtintype" id="2749070">string</span><span class="op" id="2749076">)</span>&nbsp;<span class="ident" id="2749078">Value</span>&nbsp;<span class="op" id="2749084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2749087">v</span><span class="op" id="2749088">.</span><span class="ident" id="2749089">mustBe</span><span class="op" id="2749095">(</span><span class="ident" id="2749096">Struct</span><span class="op" id="2749102">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749105">if</span>&nbsp;<span class="ident" id="2749108">f</span><span class="op" id="2749109">,</span>&nbsp;<span class="ident" id="2749111">ok</span>&nbsp;<span class="op" id="2749114">:=</span>&nbsp;<span class="ident" id="2749117">v</span><span class="op" id="2749118">.</span><span class="ident" id="2749119">typ</span><span class="op" id="2749122">.</span><span class="ident" id="2749123">FieldByName</span><span class="op" id="2749134">(</span><span class="ident" id="2749135">name</span><span class="op" id="2749139">)</span><span class="op" id="2749140">;</span>&nbsp;<span class="ident" id="2749142">ok</span>&nbsp;<span class="op" id="2749145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749149">return</span>&nbsp;<span class="ident" id="2749156">v</span><span class="op" id="2749157">.</span><span class="ident" id="2749158">FieldByIndex</span><span class="op" id="2749170">(</span><span class="ident" id="2749171">f</span><span class="op" id="2749172">.</span><span class="ident" id="2749173">Index</span><span class="op" id="2749178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2749181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749184">return</span>&nbsp;<span class="ident" id="2749191">Value</span><span class="op" id="2749196">{</span><span class="op" id="2749197">}</span><br>
<span class="lineno"></span><span class="op" id="2749199">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2749202">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2749258">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2749296">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2749336">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2749388">func</span>&nbsp;<span class="op" id="2749393">(</span><span class="ident" id="2749394">v</span>&nbsp;<span class="ident" id="2749396">Value</span><span class="op" id="2749401">)</span>&nbsp;<span class="ident" id="2749403">FieldByNameFunc</span><span class="op" id="2749418">(</span><span class="ident" id="2749419">match</span>&nbsp;<span class="keyword" id="2749425">func</span><span class="op" id="2749429">(</span><span class="builtintype" id="2749430">string</span><span class="op" id="2749436">)</span>&nbsp;<span class="builtintype" id="2749438">bool</span><span class="op" id="2749442">)</span>&nbsp;<span class="ident" id="2749444">Value</span>&nbsp;<span class="op" id="2749450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749453">if</span>&nbsp;<span class="ident" id="2749456">f</span><span class="op" id="2749457">,</span>&nbsp;<span class="ident" id="2749459">ok</span>&nbsp;<span class="op" id="2749462">:=</span>&nbsp;<span class="ident" id="2749465">v</span><span class="op" id="2749466">.</span><span class="ident" id="2749467">typ</span><span class="op" id="2749470">.</span><span class="ident" id="2749471">FieldByNameFunc</span><span class="op" id="2749486">(</span><span class="ident" id="2749487">match</span><span class="op" id="2749492">)</span><span class="op" id="2749493">;</span>&nbsp;<span class="ident" id="2749495">ok</span>&nbsp;<span class="op" id="2749498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749502">return</span>&nbsp;<span class="ident" id="2749509">v</span><span class="op" id="2749510">.</span><span class="ident" id="2749511">FieldByIndex</span><span class="op" id="2749523">(</span><span class="ident" id="2749524">f</span><span class="op" id="2749525">.</span><span class="ident" id="2749526">Index</span><span class="op" id="2749531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2749534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749537">return</span>&nbsp;<span class="ident" id="2749544">Value</span><span class="op" id="2749549">{</span><span class="op" id="2749550">}</span><br>
<span class="lineno">775</span><span class="op" id="2749552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2749555">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2749608">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2749659">func</span>&nbsp;<span class="op" id="2749664">(</span><span class="ident" id="2749665">v</span>&nbsp;<span class="ident" id="2749667">Value</span><span class="op" id="2749672">)</span>&nbsp;<span class="ident" id="2749674">Float</span><span class="op" id="2749679">(</span><span class="op" id="2749680">)</span>&nbsp;<span class="builtintype" id="2749682">float64</span>&nbsp;<span class="op" id="2749690">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2749693">k</span>&nbsp;<span class="op" id="2749695">:=</span>&nbsp;<span class="ident" id="2749698">v</span><span class="op" id="2749699">.</span><span class="ident" id="2749700">kind</span><span class="op" id="2749704">(</span><span class="op" id="2749705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749708">switch</span>&nbsp;<span class="ident" id="2749715">k</span>&nbsp;<span class="op" id="2749717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749720">case</span>&nbsp;<span class="ident" id="2749725">Float32</span><span class="op" id="2749732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749736">return</span>&nbsp;<span class="builtintype" id="2749743">float64</span><span class="op" id="2749750">(</span><span class="op" id="2749751">*</span><span class="op" id="2749752">(</span><span class="op" id="2749753">*</span><span class="builtintype" id="2749754">float32</span><span class="op" id="2749761">)</span><span class="op" id="2749762">(</span><span class="ident" id="2749763">v</span><span class="op" id="2749764">.</span><span class="ident" id="2749765">ptr</span><span class="op" id="2749768">)</span><span class="op" id="2749769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749772">case</span>&nbsp;<span class="ident" id="2749777">Float64</span><span class="op" id="2749784">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2749788">return</span>&nbsp;<span class="op" id="2749795">*</span><span class="op" id="2749796">(</span><span class="op" id="2749797">*</span><span class="builtintype" id="2749798">float64</span><span class="op" id="2749805">)</span><span class="op" id="2749806">(</span><span class="ident" id="2749807">v</span><span class="op" id="2749808">.</span><span class="ident" id="2749809">ptr</span><span class="op" id="2749812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2749815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2749818">panic</span><span class="op" id="2749823">(</span><span class="op" id="2749824">&amp;</span><span class="ident" id="2749825">ValueError</span><span class="op" id="2749835">{</span><span class="string" id="2749836">&#34;reflect.Value.Float&#34;</span><span class="op" id="2749857">,</span>&nbsp;<span class="ident" id="2749859">v</span><span class="op" id="2749860">.</span><span class="ident" id="2749861">kind</span><span class="op" id="2749865">(</span><span class="op" id="2749866">)</span><span class="op" id="2749867">}</span><span class="op" id="2749868">)</span><br>
<span class="lineno"></span><span class="op" id="2749870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2749873">var</span>&nbsp;<span class="ident" id="2749877">uint8Type</span>&nbsp;<span class="op" id="2749887">=</span>&nbsp;<span class="ident" id="2749889">TypeOf</span><span class="op" id="2749895">(</span><span class="builtintype" id="2749896">uint8</span><span class="op" id="2749901">(</span><span class="num" id="2749902">0</span><span class="op" id="2749903">)</span><span class="op" id="2749904">)</span><span class="op" id="2749905">.</span><span class="op" id="2749906">(</span><span class="op" id="2749907">*</span><span class="ident" id="2749908">rtype</span><span class="op" id="2749913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2749916">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2749951">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2750029">func</span>&nbsp;<span class="op" id="2750034">(</span><span class="ident" id="2750035">v</span>&nbsp;<span class="ident" id="2750037">Value</span><span class="op" id="2750042">)</span>&nbsp;<span class="ident" id="2750044">Index</span><span class="op" id="2750049">(</span><span class="ident" id="2750050">i</span>&nbsp;<span class="builtintype" id="2750052">int</span><span class="op" id="2750055">)</span>&nbsp;<span class="ident" id="2750057">Value</span>&nbsp;<span class="op" id="2750063">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750066">switch</span>&nbsp;<span class="ident" id="2750073">v</span><span class="op" id="2750074">.</span><span class="ident" id="2750075">kind</span><span class="op" id="2750079">(</span><span class="op" id="2750080">)</span>&nbsp;<span class="op" id="2750082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750085">case</span>&nbsp;<span class="ident" id="2750090">Array</span><span class="op" id="2750095">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750099">tt</span>&nbsp;<span class="op" id="2750102">:=</span>&nbsp;<span class="op" id="2750105">(</span><span class="op" id="2750106">*</span><span class="ident" id="2750107">arrayType</span><span class="op" id="2750116">)</span><span class="op" id="2750117">(</span><span class="ident" id="2750118">unsafe</span><span class="op" id="2750124">.</span><span class="ident" id="2750125">Pointer</span><span class="op" id="2750132">(</span><span class="ident" id="2750133">v</span><span class="op" id="2750134">.</span><span class="ident" id="2750135">typ</span><span class="op" id="2750138">)</span><span class="op" id="2750139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750143">if</span>&nbsp;<span class="builtintype" id="2750146">uint</span><span class="op" id="2750150">(</span><span class="ident" id="2750151">i</span><span class="op" id="2750152">)</span>&nbsp;<span class="op" id="2750154">&gt;=</span>&nbsp;<span class="builtintype" id="2750157">uint</span><span class="op" id="2750161">(</span><span class="ident" id="2750162">tt</span><span class="op" id="2750164">.</span><span class="builtinfunc" id="2750165">len</span><span class="op" id="2750168">)</span>&nbsp;<span class="op" id="2750170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2750175">panic</span><span class="op" id="2750180">(</span><span class="string" id="2750181">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2750216">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2750220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750224">typ</span>&nbsp;<span class="op" id="2750228">:=</span>&nbsp;<span class="ident" id="2750231">tt</span><span class="op" id="2750233">.</span><span class="ident" id="2750234">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750241">offset</span>&nbsp;<span class="op" id="2750248">:=</span>&nbsp;<span class="builtintype" id="2750251">uintptr</span><span class="op" id="2750258">(</span><span class="ident" id="2750259">i</span><span class="op" id="2750260">)</span>&nbsp;<span class="op" id="2750262">*</span>&nbsp;<span class="ident" id="2750264">typ</span><span class="op" id="2750267">.</span><span class="ident" id="2750268">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750276">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750332">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750397">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750446">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750513">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750551">val</span>&nbsp;<span class="op" id="2750555">:=</span>&nbsp;<span class="ident" id="2750558">unsafe</span><span class="op" id="2750564">.</span><span class="ident" id="2750565">Pointer</span><span class="op" id="2750572">(</span><span class="builtintype" id="2750573">uintptr</span><span class="op" id="2750580">(</span><span class="ident" id="2750581">v</span><span class="op" id="2750582">.</span><span class="ident" id="2750583">ptr</span><span class="op" id="2750586">)</span>&nbsp;<span class="op" id="2750588">+</span>&nbsp;<span class="ident" id="2750590">offset</span><span class="op" id="2750596">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750600">fl</span>&nbsp;<span class="op" id="2750603">:=</span>&nbsp;<span class="ident" id="2750606">v</span><span class="op" id="2750607">.</span><span class="ident" id="2750608">flag</span><span class="op" id="2750612">&amp;</span><span class="op" id="2750613">(</span><span class="ident" id="2750614">flagRO</span><span class="op" id="2750620">|</span><span class="ident" id="2750621">flagIndir</span><span class="op" id="2750630">|</span><span class="ident" id="2750631">flagAddr</span><span class="op" id="2750639">)</span>&nbsp;<span class="op" id="2750641">|</span>&nbsp;<span class="ident" id="2750643">flag</span><span class="op" id="2750647">(</span><span class="ident" id="2750648">typ</span><span class="op" id="2750651">.</span><span class="ident" id="2750652">Kind</span><span class="op" id="2750656">(</span><span class="op" id="2750657">)</span><span class="op" id="2750658">)</span>&nbsp;<span class="comment" id="2750660">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750692">return</span>&nbsp;<span class="ident" id="2750699">Value</span><span class="op" id="2750704">{</span><span class="ident" id="2750705">typ</span><span class="op" id="2750708">,</span>&nbsp;<span class="ident" id="2750710">val</span><span class="op" id="2750713">,</span>&nbsp;<span class="ident" id="2750715">fl</span><span class="op" id="2750717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750721">case</span>&nbsp;<span class="ident" id="2750726">Slice</span><span class="op" id="2750731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750735">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2750774">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750822">s</span>&nbsp;<span class="op" id="2750824">:=</span>&nbsp;<span class="op" id="2750827">(</span><span class="op" id="2750828">*</span><span class="ident" id="2750829">sliceHeader</span><span class="op" id="2750840">)</span><span class="op" id="2750841">(</span><span class="ident" id="2750842">v</span><span class="op" id="2750843">.</span><span class="ident" id="2750844">ptr</span><span class="op" id="2750847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2750851">if</span>&nbsp;<span class="builtintype" id="2750854">uint</span><span class="op" id="2750858">(</span><span class="ident" id="2750859">i</span><span class="op" id="2750860">)</span>&nbsp;<span class="op" id="2750862">&gt;=</span>&nbsp;<span class="builtintype" id="2750865">uint</span><span class="op" id="2750869">(</span><span class="ident" id="2750870">s</span><span class="op" id="2750871">.</span><span class="ident" id="2750872">Len</span><span class="op" id="2750875">)</span>&nbsp;<span class="op" id="2750877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2750882">panic</span><span class="op" id="2750887">(</span><span class="string" id="2750888">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2750923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2750927">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750931">tt</span>&nbsp;<span class="op" id="2750934">:=</span>&nbsp;<span class="op" id="2750937">(</span><span class="op" id="2750938">*</span><span class="ident" id="2750939">sliceType</span><span class="op" id="2750948">)</span><span class="op" id="2750949">(</span><span class="ident" id="2750950">unsafe</span><span class="op" id="2750956">.</span><span class="ident" id="2750957">Pointer</span><span class="op" id="2750964">(</span><span class="ident" id="2750965">v</span><span class="op" id="2750966">.</span><span class="ident" id="2750967">typ</span><span class="op" id="2750970">)</span><span class="op" id="2750971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750975">typ</span>&nbsp;<span class="op" id="2750979">:=</span>&nbsp;<span class="ident" id="2750982">tt</span><span class="op" id="2750984">.</span><span class="ident" id="2750985">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2750992">val</span>&nbsp;<span class="op" id="2750996">:=</span>&nbsp;<span class="ident" id="2750999">unsafe</span><span class="op" id="2751005">.</span><span class="ident" id="2751006">Pointer</span><span class="op" id="2751013">(</span><span class="builtintype" id="2751014">uintptr</span><span class="op" id="2751021">(</span><span class="ident" id="2751022">s</span><span class="op" id="2751023">.</span><span class="ident" id="2751024">Data</span><span class="op" id="2751028">)</span>&nbsp;<span class="op" id="2751030">+</span>&nbsp;<span class="builtintype" id="2751032">uintptr</span><span class="op" id="2751039">(</span><span class="ident" id="2751040">i</span><span class="op" id="2751041">)</span><span class="op" id="2751042">*</span><span class="ident" id="2751043">typ</span><span class="op" id="2751046">.</span><span class="ident" id="2751047">size</span><span class="op" id="2751051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751055">fl</span>&nbsp;<span class="op" id="2751058">:=</span>&nbsp;<span class="ident" id="2751061">flagAddr</span>&nbsp;<span class="op" id="2751070">|</span>&nbsp;<span class="ident" id="2751072">flagIndir</span>&nbsp;<span class="op" id="2751082">|</span>&nbsp;<span class="ident" id="2751084">v</span><span class="op" id="2751085">.</span><span class="ident" id="2751086">flag</span><span class="op" id="2751090">&amp;</span><span class="ident" id="2751091">flagRO</span>&nbsp;<span class="op" id="2751098">|</span>&nbsp;<span class="ident" id="2751100">flag</span><span class="op" id="2751104">(</span><span class="ident" id="2751105">typ</span><span class="op" id="2751108">.</span><span class="ident" id="2751109">Kind</span><span class="op" id="2751113">(</span><span class="op" id="2751114">)</span><span class="op" id="2751115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751119">return</span>&nbsp;<span class="ident" id="2751126">Value</span><span class="op" id="2751131">{</span><span class="ident" id="2751132">typ</span><span class="op" id="2751135">,</span>&nbsp;<span class="ident" id="2751137">val</span><span class="op" id="2751140">,</span>&nbsp;<span class="ident" id="2751142">fl</span><span class="op" id="2751144">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751148">case</span>&nbsp;<span class="ident" id="2751153">String</span><span class="op" id="2751159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751163">s</span>&nbsp;<span class="op" id="2751165">:=</span>&nbsp;<span class="op" id="2751168">(</span><span class="op" id="2751169">*</span><span class="ident" id="2751170">stringHeader</span><span class="op" id="2751182">)</span><span class="op" id="2751183">(</span><span class="ident" id="2751184">v</span><span class="op" id="2751185">.</span><span class="ident" id="2751186">ptr</span><span class="op" id="2751189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751193">if</span>&nbsp;<span class="builtintype" id="2751196">uint</span><span class="op" id="2751200">(</span><span class="ident" id="2751201">i</span><span class="op" id="2751202">)</span>&nbsp;<span class="op" id="2751204">&gt;=</span>&nbsp;<span class="builtintype" id="2751207">uint</span><span class="op" id="2751211">(</span><span class="ident" id="2751212">s</span><span class="op" id="2751213">.</span><span class="ident" id="2751214">Len</span><span class="op" id="2751217">)</span>&nbsp;<span class="op" id="2751219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2751224">panic</span><span class="op" id="2751229">(</span><span class="string" id="2751230">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2751266">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2751270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751274">p</span>&nbsp;<span class="op" id="2751276">:=</span>&nbsp;<span class="ident" id="2751279">unsafe</span><span class="op" id="2751285">.</span><span class="ident" id="2751286">Pointer</span><span class="op" id="2751293">(</span><span class="builtintype" id="2751294">uintptr</span><span class="op" id="2751301">(</span><span class="ident" id="2751302">s</span><span class="op" id="2751303">.</span><span class="ident" id="2751304">Data</span><span class="op" id="2751308">)</span>&nbsp;<span class="op" id="2751310">+</span>&nbsp;<span class="builtintype" id="2751312">uintptr</span><span class="op" id="2751319">(</span><span class="ident" id="2751320">i</span><span class="op" id="2751321">)</span><span class="op" id="2751322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751326">fl</span>&nbsp;<span class="op" id="2751329">:=</span>&nbsp;<span class="ident" id="2751332">v</span><span class="op" id="2751333">.</span><span class="ident" id="2751334">flag</span><span class="op" id="2751338">&amp;</span><span class="ident" id="2751339">flagRO</span>&nbsp;<span class="op" id="2751346">|</span>&nbsp;<span class="ident" id="2751348">flag</span><span class="op" id="2751352">(</span><span class="ident" id="2751353">Uint8</span><span class="op" id="2751358">)</span>&nbsp;<span class="op" id="2751360">|</span>&nbsp;<span class="ident" id="2751362">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751374">return</span>&nbsp;<span class="ident" id="2751381">Value</span><span class="op" id="2751386">{</span><span class="ident" id="2751387">uint8Type</span><span class="op" id="2751396">,</span>&nbsp;<span class="ident" id="2751398">p</span><span class="op" id="2751399">,</span>&nbsp;<span class="ident" id="2751401">fl</span><span class="op" id="2751403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2751406">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2751409">panic</span><span class="op" id="2751414">(</span><span class="op" id="2751415">&amp;</span><span class="ident" id="2751416">ValueError</span><span class="op" id="2751426">{</span><span class="string" id="2751427">&#34;reflect.Value.Index&#34;</span><span class="op" id="2751448">,</span>&nbsp;<span class="ident" id="2751450">v</span><span class="op" id="2751451">.</span><span class="ident" id="2751452">kind</span><span class="op" id="2751456">(</span><span class="op" id="2751457">)</span><span class="op" id="2751458">}</span><span class="op" id="2751459">)</span><br>
<span class="lineno"></span><span class="op" id="2751461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751464">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2751514">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2751581">func</span>&nbsp;<span class="op" id="2751586">(</span><span class="ident" id="2751587">v</span>&nbsp;<span class="ident" id="2751589">Value</span><span class="op" id="2751594">)</span>&nbsp;<span class="ident" id="2751596">Int</span><span class="op" id="2751599">(</span><span class="op" id="2751600">)</span>&nbsp;<span class="ident" id="2751602">int64</span>&nbsp;<span class="op" id="2751608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751611">k</span>&nbsp;<span class="op" id="2751613">:=</span>&nbsp;<span class="ident" id="2751616">v</span><span class="op" id="2751617">.</span><span class="ident" id="2751618">kind</span><span class="op" id="2751622">(</span><span class="op" id="2751623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2751626">p</span>&nbsp;<span class="op" id="2751628">:=</span>&nbsp;<span class="ident" id="2751631">v</span><span class="op" id="2751632">.</span><span class="ident" id="2751633">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751638">switch</span>&nbsp;<span class="ident" id="2751645">k</span>&nbsp;<span class="op" id="2751647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751650">case</span>&nbsp;<span class="ident" id="2751655">Int</span><span class="op" id="2751658">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751662">return</span>&nbsp;<span class="ident" id="2751669">int64</span><span class="op" id="2751674">(</span><span class="op" id="2751675">*</span><span class="op" id="2751676">(</span><span class="op" id="2751677">*</span><span class="builtintype" id="2751678">int</span><span class="op" id="2751681">)</span><span class="op" id="2751682">(</span><span class="ident" id="2751683">p</span><span class="op" id="2751684">)</span><span class="op" id="2751685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751688">case</span>&nbsp;<span class="ident" id="2751693">Int8</span><span class="op" id="2751697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751701">return</span>&nbsp;<span class="ident" id="2751708">int64</span><span class="op" id="2751713">(</span><span class="op" id="2751714">*</span><span class="op" id="2751715">(</span><span class="op" id="2751716">*</span><span class="builtintype" id="2751717">int8</span><span class="op" id="2751721">)</span><span class="op" id="2751722">(</span><span class="ident" id="2751723">p</span><span class="op" id="2751724">)</span><span class="op" id="2751725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751728">case</span>&nbsp;<span class="ident" id="2751733">Int16</span><span class="op" id="2751738">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751742">return</span>&nbsp;<span class="ident" id="2751749">int64</span><span class="op" id="2751754">(</span><span class="op" id="2751755">*</span><span class="op" id="2751756">(</span><span class="op" id="2751757">*</span><span class="builtintype" id="2751758">int16</span><span class="op" id="2751763">)</span><span class="op" id="2751764">(</span><span class="ident" id="2751765">p</span><span class="op" id="2751766">)</span><span class="op" id="2751767">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751770">case</span>&nbsp;<span class="ident" id="2751775">Int32</span><span class="op" id="2751780">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751784">return</span>&nbsp;<span class="ident" id="2751791">int64</span><span class="op" id="2751796">(</span><span class="op" id="2751797">*</span><span class="op" id="2751798">(</span><span class="op" id="2751799">*</span><span class="builtintype" id="2751800">int32</span><span class="op" id="2751805">)</span><span class="op" id="2751806">(</span><span class="ident" id="2751807">p</span><span class="op" id="2751808">)</span><span class="op" id="2751809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751812">case</span>&nbsp;<span class="ident" id="2751817">Int64</span><span class="op" id="2751822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2751826">return</span>&nbsp;<span class="ident" id="2751833">int64</span><span class="op" id="2751838">(</span><span class="op" id="2751839">*</span><span class="op" id="2751840">(</span><span class="op" id="2751841">*</span><span class="ident" id="2751842">int64</span><span class="op" id="2751847">)</span><span class="op" id="2751848">(</span><span class="ident" id="2751849">p</span><span class="op" id="2751850">)</span><span class="op" id="2751851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2751854">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2751857">panic</span><span class="op" id="2751862">(</span><span class="op" id="2751863">&amp;</span><span class="ident" id="2751864">ValueError</span><span class="op" id="2751874">{</span><span class="string" id="2751875">&#34;reflect.Value.Int&#34;</span><span class="op" id="2751894">,</span>&nbsp;<span class="ident" id="2751896">v</span><span class="op" id="2751897">.</span><span class="ident" id="2751898">kind</span><span class="op" id="2751902">(</span><span class="op" id="2751903">)</span><span class="op" id="2751904">}</span><span class="op" id="2751905">)</span><br>
<span class="lineno"></span><span class="op" id="2751907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2751910">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2751983">func</span>&nbsp;<span class="op" id="2751988">(</span><span class="ident" id="2751989">v</span>&nbsp;<span class="ident" id="2751991">Value</span><span class="op" id="2751996">)</span>&nbsp;<span class="ident" id="2751998">CanInterface</span><span class="op" id="2752010">(</span><span class="op" id="2752011">)</span>&nbsp;<span class="builtintype" id="2752013">bool</span>&nbsp;<span class="op" id="2752018">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752021">if</span>&nbsp;<span class="ident" id="2752024">v</span><span class="op" id="2752025">.</span><span class="ident" id="2752026">flag</span>&nbsp;<span class="op" id="2752031">==</span>&nbsp;<span class="num" id="2752034">0</span>&nbsp;<span class="op" id="2752036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2752040">panic</span><span class="op" id="2752045">(</span><span class="op" id="2752046">&amp;</span><span class="ident" id="2752047">ValueError</span><span class="op" id="2752057">{</span><span class="string" id="2752058">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2752086">,</span>&nbsp;<span class="ident" id="2752088">Invalid</span><span class="op" id="2752095">}</span><span class="op" id="2752096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2752099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752102">return</span>&nbsp;<span class="ident" id="2752109">v</span><span class="op" id="2752110">.</span><span class="ident" id="2752111">flag</span><span class="op" id="2752115">&amp;</span><span class="ident" id="2752116">flagRO</span>&nbsp;<span class="op" id="2752123">==</span>&nbsp;<span class="num" id="2752126">0</span><br>
<span class="lineno"></span><span class="op" id="2752128">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2752131">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2752189">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2752213">//&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2752259">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2752311">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2752340">func</span>&nbsp;<span class="op" id="2752345">(</span><span class="ident" id="2752346">v</span>&nbsp;<span class="ident" id="2752348">Value</span><span class="op" id="2752353">)</span>&nbsp;<span class="ident" id="2752355">Interface</span><span class="op" id="2752364">(</span><span class="op" id="2752365">)</span>&nbsp;<span class="op" id="2752367">(</span><span class="ident" id="2752368">i</span>&nbsp;<span class="keyword" id="2752370">interface</span><span class="op" id="2752379">{</span><span class="op" id="2752380">}</span><span class="op" id="2752381">)</span>&nbsp;<span class="op" id="2752383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752386">return</span>&nbsp;<span class="ident" id="2752393">valueInterface</span><span class="op" id="2752407">(</span><span class="ident" id="2752408">v</span><span class="op" id="2752409">,</span>&nbsp;<span class="builtintype" id="2752411">true</span><span class="op" id="2752415">)</span><br>
<span class="lineno"></span><span class="op" id="2752417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2752420">func</span>&nbsp;<span class="ident" id="2752425">valueInterface</span><span class="op" id="2752439">(</span><span class="ident" id="2752440">v</span>&nbsp;<span class="ident" id="2752442">Value</span><span class="op" id="2752447">,</span>&nbsp;<span class="ident" id="2752449">safe</span>&nbsp;<span class="builtintype" id="2752454">bool</span><span class="op" id="2752458">)</span>&nbsp;<span class="keyword" id="2752460">interface</span><span class="op" id="2752469">{</span><span class="op" id="2752470">}</span>&nbsp;<span class="op" id="2752472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752475">if</span>&nbsp;<span class="ident" id="2752478">v</span><span class="op" id="2752479">.</span><span class="ident" id="2752480">flag</span>&nbsp;<span class="op" id="2752485">==</span>&nbsp;<span class="num" id="2752488">0</span>&nbsp;<span class="op" id="2752490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2752494">panic</span><span class="op" id="2752499">(</span><span class="op" id="2752500">&amp;</span><span class="ident" id="2752501">ValueError</span><span class="op" id="2752511">{</span><span class="string" id="2752512">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2752537">,</span>&nbsp;<span class="num" id="2752539">0</span><span class="op" id="2752540">}</span><span class="op" id="2752541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2752544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752547">if</span>&nbsp;<span class="ident" id="2752550">safe</span>&nbsp;<span class="op" id="2752555">&amp;&amp;</span>&nbsp;<span class="ident" id="2752558">v</span><span class="op" id="2752559">.</span><span class="ident" id="2752560">flag</span><span class="op" id="2752564">&amp;</span><span class="ident" id="2752565">flagRO</span>&nbsp;<span class="op" id="2752572">!=</span>&nbsp;<span class="num" id="2752575">0</span>&nbsp;<span class="op" id="2752577">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2752581">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2752642">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2752697">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2752763">panic</span><span class="op" id="2752768">(</span><span class="string" id="2752769">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2752856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2752859">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752862">if</span>&nbsp;<span class="ident" id="2752865">v</span><span class="op" id="2752866">.</span><span class="ident" id="2752867">flag</span><span class="op" id="2752871">&amp;</span><span class="ident" id="2752872">flagMethod</span>&nbsp;<span class="op" id="2752883">!=</span>&nbsp;<span class="num" id="2752886">0</span>&nbsp;<span class="op" id="2752888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2752892">v</span>&nbsp;<span class="op" id="2752894">=</span>&nbsp;<span class="ident" id="2752896">makeMethodValue</span><span class="op" id="2752911">(</span><span class="string" id="2752912">&#34;Interface&#34;</span><span class="op" id="2752923">,</span>&nbsp;<span class="ident" id="2752925">v</span><span class="op" id="2752926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2752929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2752933">if</span>&nbsp;<span class="ident" id="2752936">v</span><span class="op" id="2752937">.</span><span class="ident" id="2752938">kind</span><span class="op" id="2752942">(</span><span class="op" id="2752943">)</span>&nbsp;<span class="op" id="2752945">==</span>&nbsp;<span class="ident" id="2752948">Interface</span>&nbsp;<span class="op" id="2752958">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2752962">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753022">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753079">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2753114">if</span>&nbsp;<span class="ident" id="2753117">v</span><span class="op" id="2753118">.</span><span class="ident" id="2753119">NumMethod</span><span class="op" id="2753128">(</span><span class="op" id="2753129">)</span>&nbsp;<span class="op" id="2753131">==</span>&nbsp;<span class="num" id="2753134">0</span>&nbsp;<span class="op" id="2753136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2753141">return</span>&nbsp;<span class="op" id="2753148">*</span><span class="op" id="2753149">(</span><span class="op" id="2753150">*</span><span class="keyword" id="2753151">interface</span><span class="op" id="2753160">{</span><span class="op" id="2753161">}</span><span class="op" id="2753162">)</span><span class="op" id="2753163">(</span><span class="ident" id="2753164">v</span><span class="op" id="2753165">.</span><span class="ident" id="2753166">ptr</span><span class="op" id="2753169">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2753173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2753177">return</span>&nbsp;<span class="op" id="2753184">*</span><span class="op" id="2753185">(</span><span class="op" id="2753186">*</span><span class="keyword" id="2753187">interface</span>&nbsp;<span class="op" id="2753197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2753202">M</span><span class="op" id="2753203">(</span><span class="op" id="2753204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2753208">}</span><span class="op" id="2753209">)</span><span class="op" id="2753210">(</span><span class="ident" id="2753211">v</span><span class="op" id="2753212">.</span><span class="ident" id="2753213">ptr</span><span class="op" id="2753216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2753219">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753223">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2753296">return</span>&nbsp;<span class="ident" id="2753303">packEface</span><span class="op" id="2753312">(</span><span class="ident" id="2753313">v</span><span class="op" id="2753314">)</span><br>
<span class="lineno"></span><span class="op" id="2753316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2753319">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2753387">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2753430">func</span>&nbsp;<span class="op" id="2753435">(</span><span class="ident" id="2753436">v</span>&nbsp;<span class="ident" id="2753438">Value</span><span class="op" id="2753443">)</span>&nbsp;<span class="ident" id="2753445">InterfaceData</span><span class="op" id="2753458">(</span><span class="op" id="2753459">)</span>&nbsp;<span class="op" id="2753461">[</span><span class="num" id="2753462">2</span><span class="op" id="2753463">]</span><span class="builtintype" id="2753464">uintptr</span>&nbsp;<span class="op" id="2753472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753475">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2753500">v</span><span class="op" id="2753501">.</span><span class="ident" id="2753502">mustBe</span><span class="op" id="2753508">(</span><span class="ident" id="2753509">Interface</span><span class="op" id="2753518">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753521">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753572">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753624">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753677">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2753701">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2753769">return</span>&nbsp;<span class="op" id="2753776">*</span><span class="op" id="2753777">(</span><span class="op" id="2753778">*</span><span class="op" id="2753779">[</span><span class="num" id="2753780">2</span><span class="op" id="2753781">]</span><span class="builtintype" id="2753782">uintptr</span><span class="op" id="2753789">)</span><span class="op" id="2753790">(</span><span class="ident" id="2753791">v</span><span class="op" id="2753792">.</span><span class="ident" id="2753793">ptr</span><span class="op" id="2753796">)</span><br>
<span class="lineno"></span><span class="op" id="2753798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2753801">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2753870">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2753937">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2754005">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2754073">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2754139">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2754207">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2754217">func</span>&nbsp;<span class="op" id="2754222">(</span><span class="ident" id="2754223">v</span>&nbsp;<span class="ident" id="2754225">Value</span><span class="op" id="2754230">)</span>&nbsp;<span class="ident" id="2754232">IsNil</span><span class="op" id="2754237">(</span><span class="op" id="2754238">)</span>&nbsp;<span class="builtintype" id="2754240">bool</span>&nbsp;<span class="op" id="2754245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2754248">k</span>&nbsp;<span class="op" id="2754250">:=</span>&nbsp;<span class="ident" id="2754253">v</span><span class="op" id="2754254">.</span><span class="ident" id="2754255">kind</span><span class="op" id="2754259">(</span><span class="op" id="2754260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754263">switch</span>&nbsp;<span class="ident" id="2754270">k</span>&nbsp;<span class="op" id="2754272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754275">case</span>&nbsp;<span class="ident" id="2754280">Chan</span><span class="op" id="2754284">,</span>&nbsp;<span class="ident" id="2754286">Func</span><span class="op" id="2754290">,</span>&nbsp;<span class="ident" id="2754292">Map</span><span class="op" id="2754295">,</span>&nbsp;<span class="ident" id="2754297">Ptr</span><span class="op" id="2754300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754304">if</span>&nbsp;<span class="ident" id="2754307">v</span><span class="op" id="2754308">.</span><span class="ident" id="2754309">flag</span><span class="op" id="2754313">&amp;</span><span class="ident" id="2754314">flagMethod</span>&nbsp;<span class="op" id="2754325">!=</span>&nbsp;<span class="num" id="2754328">0</span>&nbsp;<span class="op" id="2754330">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754335">return</span>&nbsp;<span class="builtintype" id="2754342">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2754350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2754354">ptr</span>&nbsp;<span class="op" id="2754358">:=</span>&nbsp;<span class="ident" id="2754361">v</span><span class="op" id="2754362">.</span><span class="ident" id="2754363">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754369">if</span>&nbsp;<span class="ident" id="2754372">v</span><span class="op" id="2754373">.</span><span class="ident" id="2754374">flag</span><span class="op" id="2754378">&amp;</span><span class="ident" id="2754379">flagIndir</span>&nbsp;<span class="op" id="2754389">!=</span>&nbsp;<span class="num" id="2754392">0</span>&nbsp;<span class="op" id="2754394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2754399">ptr</span>&nbsp;<span class="op" id="2754403">=</span>&nbsp;<span class="op" id="2754405">*</span><span class="op" id="2754406">(</span><span class="op" id="2754407">*</span><span class="ident" id="2754408">unsafe</span><span class="op" id="2754414">.</span><span class="ident" id="2754415">Pointer</span><span class="op" id="2754422">)</span><span class="op" id="2754423">(</span><span class="ident" id="2754424">ptr</span><span class="op" id="2754427">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2754431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754435">return</span>&nbsp;<span class="ident" id="2754442">ptr</span>&nbsp;<span class="op" id="2754446">==</span>&nbsp;<span class="builtintype" id="2754449">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754454">case</span>&nbsp;<span class="ident" id="2754459">Interface</span><span class="op" id="2754468">,</span>&nbsp;<span class="ident" id="2754470">Slice</span><span class="op" id="2754475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2754479">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2754537">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2754596">return</span>&nbsp;<span class="op" id="2754603">*</span><span class="op" id="2754604">(</span><span class="op" id="2754605">*</span><span class="ident" id="2754606">unsafe</span><span class="op" id="2754612">.</span><span class="ident" id="2754613">Pointer</span><span class="op" id="2754620">)</span><span class="op" id="2754621">(</span><span class="ident" id="2754622">v</span><span class="op" id="2754623">.</span><span class="ident" id="2754624">ptr</span><span class="op" id="2754627">)</span>&nbsp;<span class="op" id="2754629">==</span>&nbsp;<span class="builtintype" id="2754632">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2754637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2754640">panic</span><span class="op" id="2754645">(</span><span class="op" id="2754646">&amp;</span><span class="ident" id="2754647">ValueError</span><span class="op" id="2754657">{</span><span class="string" id="2754658">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2754679">,</span>&nbsp;<span class="ident" id="2754681">v</span><span class="op" id="2754682">.</span><span class="ident" id="2754683">kind</span><span class="op" id="2754687">(</span><span class="op" id="2754688">)</span><span class="op" id="2754689">}</span><span class="op" id="2754690">)</span><br>
<span class="lineno"></span><span class="op" id="2754692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2754695">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2754744">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2754788">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2754856">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2754917">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2754985">func</span>&nbsp;<span class="op" id="2754990">(</span><span class="ident" id="2754991">v</span>&nbsp;<span class="ident" id="2754993">Value</span><span class="op" id="2754998">)</span>&nbsp;<span class="ident" id="2755000">IsValid</span><span class="op" id="2755007">(</span><span class="op" id="2755008">)</span>&nbsp;<span class="builtintype" id="2755010">bool</span>&nbsp;<span class="op" id="2755015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755018">return</span>&nbsp;<span class="ident" id="2755025">v</span><span class="op" id="2755026">.</span><span class="ident" id="2755027">flag</span>&nbsp;<span class="op" id="2755032">!=</span>&nbsp;<span class="num" id="2755035">0</span><br>
<span class="lineno"></span><span class="op" id="2755037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755040">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2755066">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2755139">func</span>&nbsp;<span class="op" id="2755144">(</span><span class="ident" id="2755145">v</span>&nbsp;<span class="ident" id="2755147">Value</span><span class="op" id="2755152">)</span>&nbsp;<span class="ident" id="2755154">Kind</span><span class="op" id="2755158">(</span><span class="op" id="2755159">)</span>&nbsp;<span class="ident" id="2755161">Kind</span>&nbsp;<span class="op" id="2755166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755169">return</span>&nbsp;<span class="ident" id="2755176">v</span><span class="op" id="2755177">.</span><span class="ident" id="2755178">kind</span><span class="op" id="2755182">(</span><span class="op" id="2755183">)</span><br>
<span class="lineno"></span><span class="op" id="2755185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2755188">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2755215">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2755283">func</span>&nbsp;<span class="op" id="2755288">(</span><span class="ident" id="2755289">v</span>&nbsp;<span class="ident" id="2755291">Value</span><span class="op" id="2755296">)</span>&nbsp;<span class="ident" id="2755298">Len</span><span class="op" id="2755301">(</span><span class="op" id="2755302">)</span>&nbsp;<span class="builtintype" id="2755304">int</span>&nbsp;<span class="op" id="2755308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2755311">k</span>&nbsp;<span class="op" id="2755313">:=</span>&nbsp;<span class="ident" id="2755316">v</span><span class="op" id="2755317">.</span><span class="ident" id="2755318">kind</span><span class="op" id="2755322">(</span><span class="op" id="2755323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755326">switch</span>&nbsp;<span class="ident" id="2755333">k</span>&nbsp;<span class="op" id="2755335">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755338">case</span>&nbsp;<span class="ident" id="2755343">Array</span><span class="op" id="2755348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2755352">tt</span>&nbsp;<span class="op" id="2755355">:=</span>&nbsp;<span class="op" id="2755358">(</span><span class="op" id="2755359">*</span><span class="ident" id="2755360">arrayType</span><span class="op" id="2755369">)</span><span class="op" id="2755370">(</span><span class="ident" id="2755371">unsafe</span><span class="op" id="2755377">.</span><span class="ident" id="2755378">Pointer</span><span class="op" id="2755385">(</span><span class="ident" id="2755386">v</span><span class="op" id="2755387">.</span><span class="ident" id="2755388">typ</span><span class="op" id="2755391">)</span><span class="op" id="2755392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755396">return</span>&nbsp;<span class="builtintype" id="2755403">int</span><span class="op" id="2755406">(</span><span class="ident" id="2755407">tt</span><span class="op" id="2755409">.</span><span class="builtinfunc" id="2755410">len</span><span class="op" id="2755413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755416">case</span>&nbsp;<span class="ident" id="2755421">Chan</span><span class="op" id="2755425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755429">return</span>&nbsp;<span class="ident" id="2755436">chanlen</span><span class="op" id="2755443">(</span><span class="ident" id="2755444">v</span><span class="op" id="2755445">.</span><span class="ident" id="2755446">pointer</span><span class="op" id="2755453">(</span><span class="op" id="2755454">)</span><span class="op" id="2755455">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755458">case</span>&nbsp;<span class="ident" id="2755463">Map</span><span class="op" id="2755466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755470">return</span>&nbsp;<span class="ident" id="2755477">maplen</span><span class="op" id="2755483">(</span><span class="ident" id="2755484">v</span><span class="op" id="2755485">.</span><span class="ident" id="2755486">pointer</span><span class="op" id="2755493">(</span><span class="op" id="2755494">)</span><span class="op" id="2755495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755498">case</span>&nbsp;<span class="ident" id="2755503">Slice</span><span class="op" id="2755508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2755512">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755564">return</span>&nbsp;<span class="op" id="2755571">(</span><span class="op" id="2755572">*</span><span class="ident" id="2755573">sliceHeader</span><span class="op" id="2755584">)</span><span class="op" id="2755585">(</span><span class="ident" id="2755586">v</span><span class="op" id="2755587">.</span><span class="ident" id="2755588">ptr</span><span class="op" id="2755591">)</span><span class="op" id="2755592">.</span><span class="ident" id="2755593">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755598">case</span>&nbsp;<span class="ident" id="2755603">String</span><span class="op" id="2755609">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2755613">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2755666">return</span>&nbsp;<span class="op" id="2755673">(</span><span class="op" id="2755674">*</span><span class="ident" id="2755675">stringHeader</span><span class="op" id="2755687">)</span><span class="op" id="2755688">(</span><span class="ident" id="2755689">v</span><span class="op" id="2755690">.</span><span class="ident" id="2755691">ptr</span><span class="op" id="2755694">)</span><span class="op" id="2755695">.</span><span class="ident" id="2755696">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2755701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2755704">panic</span><span class="op" id="2755709">(</span><span class="op" id="2755710">&amp;</span><span class="ident" id="2755711">ValueError</span><span class="op" id="2755721">{</span><span class="string" id="2755722">&#34;reflect.Value.Len&#34;</span><span class="op" id="2755741">,</span>&nbsp;<span class="ident" id="2755743">v</span><span class="op" id="2755744">.</span><span class="ident" id="2755745">kind</span><span class="op" id="2755749">(</span><span class="op" id="2755750">)</span><span class="op" id="2755751">}</span><span class="op" id="2755752">)</span><br>
<span class="lineno">980</span><span class="op" id="2755754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2755757">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2755821">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2755858">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2755948">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2756019">func</span>&nbsp;<span class="op" id="2756024">(</span><span class="ident" id="2756025">v</span>&nbsp;<span class="ident" id="2756027">Value</span><span class="op" id="2756032">)</span>&nbsp;<span class="ident" id="2756034">MapIndex</span><span class="op" id="2756042">(</span><span class="ident" id="2756043">key</span>&nbsp;<span class="ident" id="2756047">Value</span><span class="op" id="2756052">)</span>&nbsp;<span class="ident" id="2756054">Value</span>&nbsp;<span class="op" id="2756060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756063">v</span><span class="op" id="2756064">.</span><span class="ident" id="2756065">mustBe</span><span class="op" id="2756071">(</span><span class="ident" id="2756072">Map</span><span class="op" id="2756075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756078">tt</span>&nbsp;<span class="op" id="2756081">:=</span>&nbsp;<span class="op" id="2756084">(</span><span class="op" id="2756085">*</span><span class="ident" id="2756086">mapType</span><span class="op" id="2756093">)</span><span class="op" id="2756094">(</span><span class="ident" id="2756095">unsafe</span><span class="op" id="2756101">.</span><span class="ident" id="2756102">Pointer</span><span class="op" id="2756109">(</span><span class="ident" id="2756110">v</span><span class="op" id="2756111">.</span><span class="ident" id="2756112">typ</span><span class="op" id="2756115">)</span><span class="op" id="2756116">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756120">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756177">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756233">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756290">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756347">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756403">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756460">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756486">key</span>&nbsp;<span class="op" id="2756490">=</span>&nbsp;<span class="ident" id="2756492">key</span><span class="op" id="2756495">.</span><span class="ident" id="2756496">assignTo</span><span class="op" id="2756504">(</span><span class="string" id="2756505">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2756529">,</span>&nbsp;<span class="ident" id="2756531">tt</span><span class="op" id="2756533">.</span><span class="ident" id="2756534">key</span><span class="op" id="2756537">,</span>&nbsp;<span class="builtintype" id="2756539">nil</span><span class="op" id="2756542">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756546">var</span>&nbsp;<span class="ident" id="2756550">k</span>&nbsp;<span class="ident" id="2756552">unsafe</span><span class="op" id="2756558">.</span><span class="ident" id="2756559">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756568">if</span>&nbsp;<span class="ident" id="2756571">key</span><span class="op" id="2756574">.</span><span class="ident" id="2756575">flag</span><span class="op" id="2756579">&amp;</span><span class="ident" id="2756580">flagIndir</span>&nbsp;<span class="op" id="2756590">!=</span>&nbsp;<span class="num" id="2756593">0</span>&nbsp;<span class="op" id="2756595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756599">k</span>&nbsp;<span class="op" id="2756601">=</span>&nbsp;<span class="ident" id="2756603">key</span><span class="op" id="2756606">.</span><span class="ident" id="2756607">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756612">}</span>&nbsp;<span class="keyword" id="2756614">else</span>&nbsp;<span class="op" id="2756619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756623">k</span>&nbsp;<span class="op" id="2756625">=</span>&nbsp;<span class="ident" id="2756627">unsafe</span><span class="op" id="2756633">.</span><span class="ident" id="2756634">Pointer</span><span class="op" id="2756641">(</span><span class="op" id="2756642">&amp;</span><span class="ident" id="2756643">key</span><span class="op" id="2756646">.</span><span class="ident" id="2756647">ptr</span><span class="op" id="2756650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756653">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756656">e</span>&nbsp;<span class="op" id="2756658">:=</span>&nbsp;<span class="ident" id="2756661">mapaccess</span><span class="op" id="2756670">(</span><span class="ident" id="2756671">v</span><span class="op" id="2756672">.</span><span class="ident" id="2756673">typ</span><span class="op" id="2756676">,</span>&nbsp;<span class="ident" id="2756678">v</span><span class="op" id="2756679">.</span><span class="ident" id="2756680">pointer</span><span class="op" id="2756687">(</span><span class="op" id="2756688">)</span><span class="op" id="2756689">,</span>&nbsp;<span class="ident" id="2756691">k</span><span class="op" id="2756692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756695">if</span>&nbsp;<span class="ident" id="2756698">e</span>&nbsp;<span class="op" id="2756700">==</span>&nbsp;<span class="builtintype" id="2756703">nil</span>&nbsp;<span class="op" id="2756707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756711">return</span>&nbsp;<span class="ident" id="2756718">Value</span><span class="op" id="2756723">{</span><span class="op" id="2756724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2756727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756730">typ</span>&nbsp;<span class="op" id="2756734">:=</span>&nbsp;<span class="ident" id="2756737">tt</span><span class="op" id="2756739">.</span><span class="ident" id="2756740">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756746">fl</span>&nbsp;<span class="op" id="2756749">:=</span>&nbsp;<span class="op" id="2756752">(</span><span class="ident" id="2756753">v</span><span class="op" id="2756754">.</span><span class="ident" id="2756755">flag</span>&nbsp;<span class="op" id="2756760">|</span>&nbsp;<span class="ident" id="2756762">key</span><span class="op" id="2756765">.</span><span class="ident" id="2756766">flag</span><span class="op" id="2756770">)</span>&nbsp;<span class="op" id="2756772">&amp;</span>&nbsp;<span class="ident" id="2756774">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756782">fl</span>&nbsp;<span class="op" id="2756785">|=</span>&nbsp;<span class="ident" id="2756788">flag</span><span class="op" id="2756792">(</span><span class="ident" id="2756793">typ</span><span class="op" id="2756796">.</span><span class="ident" id="2756797">Kind</span><span class="op" id="2756801">(</span><span class="op" id="2756802">)</span><span class="op" id="2756803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756806">if</span>&nbsp;<span class="ident" id="2756809">ifaceIndir</span><span class="op" id="2756819">(</span><span class="ident" id="2756820">typ</span><span class="op" id="2756823">)</span>&nbsp;<span class="op" id="2756825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756829">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2756875">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756915">c</span>&nbsp;<span class="op" id="2756917">:=</span>&nbsp;<span class="ident" id="2756920">unsafe_New</span><span class="op" id="2756930">(</span><span class="ident" id="2756931">typ</span><span class="op" id="2756934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2756938">memmove</span><span class="op" id="2756945">(</span><span class="ident" id="2756946">c</span><span class="op" id="2756947">,</span>&nbsp;<span class="ident" id="2756949">e</span><span class="op" id="2756950">,</span>&nbsp;<span class="ident" id="2756952">typ</span><span class="op" id="2756955">.</span><span class="ident" id="2756956">size</span><span class="op" id="2756960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2756964">return</span>&nbsp;<span class="ident" id="2756971">Value</span><span class="op" id="2756976">{</span><span class="ident" id="2756977">typ</span><span class="op" id="2756980">,</span>&nbsp;<span class="ident" id="2756982">c</span><span class="op" id="2756983">,</span>&nbsp;<span class="ident" id="2756985">fl</span>&nbsp;<span class="op" id="2756988">|</span>&nbsp;<span class="ident" id="2756990">flagIndir</span><span class="op" id="2756999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2757002">}</span>&nbsp;<span class="keyword" id="2757004">else</span>&nbsp;<span class="op" id="2757009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757013">return</span>&nbsp;<span class="ident" id="2757020">Value</span><span class="op" id="2757025">{</span><span class="ident" id="2757026">typ</span><span class="op" id="2757029">,</span>&nbsp;<span class="op" id="2757031">*</span><span class="op" id="2757032">(</span><span class="op" id="2757033">*</span><span class="ident" id="2757034">unsafe</span><span class="op" id="2757040">.</span><span class="ident" id="2757041">Pointer</span><span class="op" id="2757048">)</span><span class="op" id="2757049">(</span><span class="ident" id="2757050">e</span><span class="op" id="2757051">)</span><span class="op" id="2757052">,</span>&nbsp;<span class="ident" id="2757054">fl</span><span class="op" id="2757056">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2757059">}</span><br>
<span class="lineno"></span><span class="op" id="2757061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2757064">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2757135">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2757160">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2757197">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2757253">func</span>&nbsp;<span class="op" id="2757258">(</span><span class="ident" id="2757259">v</span>&nbsp;<span class="ident" id="2757261">Value</span><span class="op" id="2757266">)</span>&nbsp;<span class="ident" id="2757268">MapKeys</span><span class="op" id="2757275">(</span><span class="op" id="2757276">)</span>&nbsp;<span class="op" id="2757278">[</span><span class="op" id="2757279">]</span><span class="ident" id="2757280">Value</span>&nbsp;<span class="op" id="2757286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757289">v</span><span class="op" id="2757290">.</span><span class="ident" id="2757291">mustBe</span><span class="op" id="2757297">(</span><span class="ident" id="2757298">Map</span><span class="op" id="2757301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757304">tt</span>&nbsp;<span class="op" id="2757307">:=</span>&nbsp;<span class="op" id="2757310">(</span><span class="op" id="2757311">*</span><span class="ident" id="2757312">mapType</span><span class="op" id="2757319">)</span><span class="op" id="2757320">(</span><span class="ident" id="2757321">unsafe</span><span class="op" id="2757327">.</span><span class="ident" id="2757328">Pointer</span><span class="op" id="2757335">(</span><span class="ident" id="2757336">v</span><span class="op" id="2757337">.</span><span class="ident" id="2757338">typ</span><span class="op" id="2757341">)</span><span class="op" id="2757342">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757345">keyType</span>&nbsp;<span class="op" id="2757353">:=</span>&nbsp;<span class="ident" id="2757356">tt</span><span class="op" id="2757358">.</span><span class="ident" id="2757359">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757365">fl</span>&nbsp;<span class="op" id="2757368">:=</span>&nbsp;<span class="ident" id="2757371">v</span><span class="op" id="2757372">.</span><span class="ident" id="2757373">flag</span><span class="op" id="2757377">&amp;</span><span class="ident" id="2757378">flagRO</span>&nbsp;<span class="op" id="2757385">|</span>&nbsp;<span class="ident" id="2757387">flag</span><span class="op" id="2757391">(</span><span class="ident" id="2757392">keyType</span><span class="op" id="2757399">.</span><span class="ident" id="2757400">Kind</span><span class="op" id="2757404">(</span><span class="op" id="2757405">)</span><span class="op" id="2757406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757410">m</span>&nbsp;<span class="op" id="2757412">:=</span>&nbsp;<span class="ident" id="2757415">v</span><span class="op" id="2757416">.</span><span class="ident" id="2757417">pointer</span><span class="op" id="2757424">(</span><span class="op" id="2757425">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757428">mlen</span>&nbsp;<span class="op" id="2757433">:=</span>&nbsp;<span class="builtintype" id="2757436">int</span><span class="op" id="2757439">(</span><span class="num" id="2757440">0</span><span class="op" id="2757441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757444">if</span>&nbsp;<span class="ident" id="2757447">m</span>&nbsp;<span class="op" id="2757449">!=</span>&nbsp;<span class="builtintype" id="2757452">nil</span>&nbsp;<span class="op" id="2757456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757460">mlen</span>&nbsp;<span class="op" id="2757465">=</span>&nbsp;<span class="ident" id="2757467">maplen</span><span class="op" id="2757473">(</span><span class="ident" id="2757474">m</span><span class="op" id="2757475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2757478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757481">it</span>&nbsp;<span class="op" id="2757484">:=</span>&nbsp;<span class="ident" id="2757487">mapiterinit</span><span class="op" id="2757498">(</span><span class="ident" id="2757499">v</span><span class="op" id="2757500">.</span><span class="ident" id="2757501">typ</span><span class="op" id="2757504">,</span>&nbsp;<span class="ident" id="2757506">m</span><span class="op" id="2757507">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757510">a</span>&nbsp;<span class="op" id="2757512">:=</span>&nbsp;<span class="builtinfunc" id="2757515">make</span><span class="op" id="2757519">(</span><span class="op" id="2757520">[</span><span class="op" id="2757521">]</span><span class="ident" id="2757522">Value</span><span class="op" id="2757527">,</span>&nbsp;<span class="ident" id="2757529">mlen</span><span class="op" id="2757533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757536">var</span>&nbsp;<span class="ident" id="2757540">i</span>&nbsp;<span class="builtintype" id="2757542">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757547">for</span>&nbsp;<span class="ident" id="2757551">i</span>&nbsp;<span class="op" id="2757553">=</span>&nbsp;<span class="num" id="2757555">0</span><span class="op" id="2757556">;</span>&nbsp;<span class="ident" id="2757558">i</span>&nbsp;<span class="op" id="2757560">&lt;</span>&nbsp;<span class="builtinfunc" id="2757562">len</span><span class="op" id="2757565">(</span><span class="ident" id="2757566">a</span><span class="op" id="2757567">)</span><span class="op" id="2757568">;</span>&nbsp;<span class="ident" id="2757570">i</span><span class="op" id="2757571">++</span>&nbsp;<span class="op" id="2757574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757578">key</span>&nbsp;<span class="op" id="2757582">:=</span>&nbsp;<span class="ident" id="2757585">mapiterkey</span><span class="op" id="2757595">(</span><span class="ident" id="2757596">it</span><span class="op" id="2757598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757602">if</span>&nbsp;<span class="ident" id="2757605">key</span>&nbsp;<span class="op" id="2757609">==</span>&nbsp;<span class="builtintype" id="2757612">nil</span>&nbsp;<span class="op" id="2757616">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757621">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757674">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757732">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757758">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2757766">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2757770">if</span>&nbsp;<span class="ident" id="2757773">ifaceIndir</span><span class="op" id="2757783">(</span><span class="ident" id="2757784">keyType</span><span class="op" id="2757791">)</span>&nbsp;<span class="op" id="2757793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757798">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2757845">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757886">c</span>&nbsp;<span class="op" id="2757888">:=</span>&nbsp;<span class="ident" id="2757891">unsafe_New</span><span class="op" id="2757901">(</span><span class="ident" id="2757902">keyType</span><span class="op" id="2757909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757914">memmove</span><span class="op" id="2757921">(</span><span class="ident" id="2757922">c</span><span class="op" id="2757923">,</span>&nbsp;<span class="ident" id="2757925">key</span><span class="op" id="2757928">,</span>&nbsp;<span class="ident" id="2757930">keyType</span><span class="op" id="2757937">.</span><span class="ident" id="2757938">size</span><span class="op" id="2757942">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2757947">a</span><span class="op" id="2757948">[</span><span class="ident" id="2757949">i</span><span class="op" id="2757950">]</span>&nbsp;<span class="op" id="2757952">=</span>&nbsp;<span class="ident" id="2757954">Value</span><span class="op" id="2757959">{</span><span class="ident" id="2757960">keyType</span><span class="op" id="2757967">,</span>&nbsp;<span class="ident" id="2757969">c</span><span class="op" id="2757970">,</span>&nbsp;<span class="ident" id="2757972">fl</span>&nbsp;<span class="op" id="2757975">|</span>&nbsp;<span class="ident" id="2757977">flagIndir</span><span class="op" id="2757986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2757990">}</span>&nbsp;<span class="keyword" id="2757992">else</span>&nbsp;<span class="op" id="2757997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758002">a</span><span class="op" id="2758003">[</span><span class="ident" id="2758004">i</span><span class="op" id="2758005">]</span>&nbsp;<span class="op" id="2758007">=</span>&nbsp;<span class="ident" id="2758009">Value</span><span class="op" id="2758014">{</span><span class="ident" id="2758015">keyType</span><span class="op" id="2758022">,</span>&nbsp;<span class="op" id="2758024">*</span><span class="op" id="2758025">(</span><span class="op" id="2758026">*</span><span class="ident" id="2758027">unsafe</span><span class="op" id="2758033">.</span><span class="ident" id="2758034">Pointer</span><span class="op" id="2758041">)</span><span class="op" id="2758042">(</span><span class="ident" id="2758043">key</span><span class="op" id="2758046">)</span><span class="op" id="2758047">,</span>&nbsp;<span class="ident" id="2758049">fl</span><span class="op" id="2758051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2758055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758059">mapiternext</span><span class="op" id="2758070">(</span><span class="ident" id="2758071">it</span><span class="op" id="2758073">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2758076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758079">return</span>&nbsp;<span class="ident" id="2758086">a</span><span class="op" id="2758087">[</span><span class="op" id="2758088">:</span><span class="ident" id="2758089">i</span><span class="op" id="2758090">]</span><br>
<span class="lineno"></span><span class="op" id="2758092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758095">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2758164">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2758235">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2758307">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2758379">func</span>&nbsp;<span class="op" id="2758384">(</span><span class="ident" id="2758385">v</span>&nbsp;<span class="ident" id="2758387">Value</span><span class="op" id="2758392">)</span>&nbsp;<span class="ident" id="2758394">Method</span><span class="op" id="2758400">(</span><span class="ident" id="2758401">i</span>&nbsp;<span class="builtintype" id="2758403">int</span><span class="op" id="2758406">)</span>&nbsp;<span class="ident" id="2758408">Value</span>&nbsp;<span class="op" id="2758414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758417">if</span>&nbsp;<span class="ident" id="2758420">v</span><span class="op" id="2758421">.</span><span class="ident" id="2758422">typ</span>&nbsp;<span class="op" id="2758426">==</span>&nbsp;<span class="builtintype" id="2758429">nil</span>&nbsp;<span class="op" id="2758433">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2758437">panic</span><span class="op" id="2758442">(</span><span class="op" id="2758443">&amp;</span><span class="ident" id="2758444">ValueError</span><span class="op" id="2758454">{</span><span class="string" id="2758455">&#34;reflect.Value.Method&#34;</span><span class="op" id="2758477">,</span>&nbsp;<span class="ident" id="2758479">Invalid</span><span class="op" id="2758486">}</span><span class="op" id="2758487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2758490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758493">if</span>&nbsp;<span class="ident" id="2758496">v</span><span class="op" id="2758497">.</span><span class="ident" id="2758498">flag</span><span class="op" id="2758502">&amp;</span><span class="ident" id="2758503">flagMethod</span>&nbsp;<span class="op" id="2758514">!=</span>&nbsp;<span class="num" id="2758517">0</span>&nbsp;<span class="op" id="2758519">||</span>&nbsp;<span class="builtintype" id="2758522">uint</span><span class="op" id="2758526">(</span><span class="ident" id="2758527">i</span><span class="op" id="2758528">)</span>&nbsp;<span class="op" id="2758530">&gt;=</span>&nbsp;<span class="builtintype" id="2758533">uint</span><span class="op" id="2758537">(</span><span class="ident" id="2758538">v</span><span class="op" id="2758539">.</span><span class="ident" id="2758540">typ</span><span class="op" id="2758543">.</span><span class="ident" id="2758544">NumMethod</span><span class="op" id="2758553">(</span><span class="op" id="2758554">)</span><span class="op" id="2758555">)</span>&nbsp;<span class="op" id="2758557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2758561">panic</span><span class="op" id="2758566">(</span><span class="string" id="2758567">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2758603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2758606">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758609">if</span>&nbsp;<span class="ident" id="2758612">v</span><span class="op" id="2758613">.</span><span class="ident" id="2758614">typ</span><span class="op" id="2758617">.</span><span class="ident" id="2758618">Kind</span><span class="op" id="2758622">(</span><span class="op" id="2758623">)</span>&nbsp;<span class="op" id="2758625">==</span>&nbsp;<span class="ident" id="2758628">Interface</span>&nbsp;<span class="op" id="2758638">&amp;&amp;</span>&nbsp;<span class="ident" id="2758641">v</span><span class="op" id="2758642">.</span><span class="ident" id="2758643">IsNil</span><span class="op" id="2758648">(</span><span class="op" id="2758649">)</span>&nbsp;<span class="op" id="2758651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2758655">panic</span><span class="op" id="2758660">(</span><span class="string" id="2758661">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2758701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2758704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758707">fl</span>&nbsp;<span class="op" id="2758710">:=</span>&nbsp;<span class="ident" id="2758713">v</span><span class="op" id="2758714">.</span><span class="ident" id="2758715">flag</span>&nbsp;<span class="op" id="2758720">&amp;</span>&nbsp;<span class="op" id="2758722">(</span><span class="ident" id="2758723">flagRO</span>&nbsp;<span class="op" id="2758730">|</span>&nbsp;<span class="ident" id="2758732">flagIndir</span><span class="op" id="2758741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758744">fl</span>&nbsp;<span class="op" id="2758747">|=</span>&nbsp;<span class="ident" id="2758750">flag</span><span class="op" id="2758754">(</span><span class="ident" id="2758755">Func</span><span class="op" id="2758759">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2758762">fl</span>&nbsp;<span class="op" id="2758765">|=</span>&nbsp;<span class="ident" id="2758768">flag</span><span class="op" id="2758772">(</span><span class="ident" id="2758773">i</span><span class="op" id="2758774">)</span><span class="op" id="2758775">&lt;&lt;</span><span class="ident" id="2758777">flagMethodShift</span>&nbsp;<span class="op" id="2758793">|</span>&nbsp;<span class="ident" id="2758795">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758807">return</span>&nbsp;<span class="ident" id="2758814">Value</span><span class="op" id="2758819">{</span><span class="ident" id="2758820">v</span><span class="op" id="2758821">.</span><span class="ident" id="2758822">typ</span><span class="op" id="2758825">,</span>&nbsp;<span class="ident" id="2758827">v</span><span class="op" id="2758828">.</span><span class="ident" id="2758829">ptr</span><span class="op" id="2758832">,</span>&nbsp;<span class="ident" id="2758834">fl</span><span class="op" id="2758836">}</span><br>
<span class="lineno"></span><span class="op" id="2758838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758841">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2758911">func</span>&nbsp;<span class="op" id="2758916">(</span><span class="ident" id="2758917">v</span>&nbsp;<span class="ident" id="2758919">Value</span><span class="op" id="2758924">)</span>&nbsp;<span class="ident" id="2758926">NumMethod</span><span class="op" id="2758935">(</span><span class="op" id="2758936">)</span>&nbsp;<span class="builtintype" id="2758938">int</span>&nbsp;<span class="op" id="2758942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2758945">if</span>&nbsp;<span class="ident" id="2758948">v</span><span class="op" id="2758949">.</span><span class="ident" id="2758950">typ</span>&nbsp;<span class="op" id="2758954">==</span>&nbsp;<span class="builtintype" id="2758957">nil</span>&nbsp;<span class="op" id="2758961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2758965">panic</span><span class="op" id="2758970">(</span><span class="op" id="2758971">&amp;</span><span class="ident" id="2758972">ValueError</span><span class="op" id="2758982">{</span><span class="string" id="2758983">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2759008">,</span>&nbsp;<span class="ident" id="2759010">Invalid</span><span class="op" id="2759017">}</span><span class="op" id="2759018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759024">if</span>&nbsp;<span class="ident" id="2759027">v</span><span class="op" id="2759028">.</span><span class="ident" id="2759029">flag</span><span class="op" id="2759033">&amp;</span><span class="ident" id="2759034">flagMethod</span>&nbsp;<span class="op" id="2759045">!=</span>&nbsp;<span class="num" id="2759048">0</span>&nbsp;<span class="op" id="2759050">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759054">return</span>&nbsp;<span class="num" id="2759061">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759067">return</span>&nbsp;<span class="ident" id="2759074">v</span><span class="op" id="2759075">.</span><span class="ident" id="2759076">typ</span><span class="op" id="2759079">.</span><span class="ident" id="2759080">NumMethod</span><span class="op" id="2759089">(</span><span class="op" id="2759090">)</span><br>
<span class="lineno"></span><span class="op" id="2759092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2759095">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2759164">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2759193">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2759264">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2759336">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2759389">func</span>&nbsp;<span class="op" id="2759394">(</span><span class="ident" id="2759395">v</span>&nbsp;<span class="ident" id="2759397">Value</span><span class="op" id="2759402">)</span>&nbsp;<span class="ident" id="2759404">MethodByName</span><span class="op" id="2759416">(</span><span class="ident" id="2759417">name</span>&nbsp;<span class="builtintype" id="2759422">string</span><span class="op" id="2759428">)</span>&nbsp;<span class="ident" id="2759430">Value</span>&nbsp;<span class="op" id="2759436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759439">if</span>&nbsp;<span class="ident" id="2759442">v</span><span class="op" id="2759443">.</span><span class="ident" id="2759444">typ</span>&nbsp;<span class="op" id="2759448">==</span>&nbsp;<span class="builtintype" id="2759451">nil</span>&nbsp;<span class="op" id="2759455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2759459">panic</span><span class="op" id="2759464">(</span><span class="op" id="2759465">&amp;</span><span class="ident" id="2759466">ValueError</span><span class="op" id="2759476">{</span><span class="string" id="2759477">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2759505">,</span>&nbsp;<span class="ident" id="2759507">Invalid</span><span class="op" id="2759514">}</span><span class="op" id="2759515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759521">if</span>&nbsp;<span class="ident" id="2759524">v</span><span class="op" id="2759525">.</span><span class="ident" id="2759526">flag</span><span class="op" id="2759530">&amp;</span><span class="ident" id="2759531">flagMethod</span>&nbsp;<span class="op" id="2759542">!=</span>&nbsp;<span class="num" id="2759545">0</span>&nbsp;<span class="op" id="2759547">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759551">return</span>&nbsp;<span class="ident" id="2759558">Value</span><span class="op" id="2759563">{</span><span class="op" id="2759564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759570">m</span><span class="op" id="2759571">,</span>&nbsp;<span class="ident" id="2759573">ok</span>&nbsp;<span class="op" id="2759576">:=</span>&nbsp;<span class="ident" id="2759579">v</span><span class="op" id="2759580">.</span><span class="ident" id="2759581">typ</span><span class="op" id="2759584">.</span><span class="ident" id="2759585">MethodByName</span><span class="op" id="2759597">(</span><span class="ident" id="2759598">name</span><span class="op" id="2759602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759605">if</span>&nbsp;<span class="op" id="2759608">!</span><span class="ident" id="2759609">ok</span>&nbsp;<span class="op" id="2759612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759616">return</span>&nbsp;<span class="ident" id="2759623">Value</span><span class="op" id="2759628">{</span><span class="op" id="2759629">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2759632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759635">return</span>&nbsp;<span class="ident" id="2759642">v</span><span class="op" id="2759643">.</span><span class="ident" id="2759644">Method</span><span class="op" id="2759650">(</span><span class="ident" id="2759651">m</span><span class="op" id="2759652">.</span><span class="ident" id="2759653">Index</span><span class="op" id="2759658">)</span><br>
<span class="lineno"></span><span class="op" id="2759660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759663">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2759721">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2759761">func</span>&nbsp;<span class="op" id="2759766">(</span><span class="ident" id="2759767">v</span>&nbsp;<span class="ident" id="2759769">Value</span><span class="op" id="2759774">)</span>&nbsp;<span class="ident" id="2759776">NumField</span><span class="op" id="2759784">(</span><span class="op" id="2759785">)</span>&nbsp;<span class="builtintype" id="2759787">int</span>&nbsp;<span class="op" id="2759791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759794">v</span><span class="op" id="2759795">.</span><span class="ident" id="2759796">mustBe</span><span class="op" id="2759802">(</span><span class="ident" id="2759803">Struct</span><span class="op" id="2759809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2759812">tt</span>&nbsp;<span class="op" id="2759815">:=</span>&nbsp;<span class="op" id="2759818">(</span><span class="op" id="2759819">*</span><span class="ident" id="2759820">structType</span><span class="op" id="2759830">)</span><span class="op" id="2759831">(</span><span class="ident" id="2759832">unsafe</span><span class="op" id="2759838">.</span><span class="ident" id="2759839">Pointer</span><span class="op" id="2759846">(</span><span class="ident" id="2759847">v</span><span class="op" id="2759848">.</span><span class="ident" id="2759849">typ</span><span class="op" id="2759852">)</span><span class="op" id="2759853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2759856">return</span>&nbsp;<span class="builtinfunc" id="2759863">len</span><span class="op" id="2759866">(</span><span class="ident" id="2759867">tt</span><span class="op" id="2759869">.</span><span class="ident" id="2759870">fields</span><span class="op" id="2759876">)</span><br>
<span class="lineno">1120</span><span class="op" id="2759878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2759881">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2759968">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2760025">func</span>&nbsp;<span class="op" id="2760030">(</span><span class="ident" id="2760031">v</span>&nbsp;<span class="ident" id="2760033">Value</span><span class="op" id="2760038">)</span>&nbsp;<span class="ident" id="2760040">OverflowComplex</span><span class="op" id="2760055">(</span><span class="ident" id="2760056">x</span>&nbsp;<span class="builtintype" id="2760058">complex128</span><span class="op" id="2760068">)</span>&nbsp;<span class="builtintype" id="2760070">bool</span>&nbsp;<span class="op" id="2760075">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2760078">k</span>&nbsp;<span class="op" id="2760080">:=</span>&nbsp;<span class="ident" id="2760083">v</span><span class="op" id="2760084">.</span><span class="ident" id="2760085">kind</span><span class="op" id="2760089">(</span><span class="op" id="2760090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760093">switch</span>&nbsp;<span class="ident" id="2760100">k</span>&nbsp;<span class="op" id="2760102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760105">case</span>&nbsp;<span class="ident" id="2760110">Complex64</span><span class="op" id="2760119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760123">return</span>&nbsp;<span class="ident" id="2760130">overflowFloat32</span><span class="op" id="2760145">(</span><span class="builtinfunc" id="2760146">real</span><span class="op" id="2760150">(</span><span class="ident" id="2760151">x</span><span class="op" id="2760152">)</span><span class="op" id="2760153">)</span>&nbsp;<span class="op" id="2760155">||</span>&nbsp;<span class="ident" id="2760158">overflowFloat32</span><span class="op" id="2760173">(</span><span class="builtinfunc" id="2760174">imag</span><span class="op" id="2760178">(</span><span class="ident" id="2760179">x</span><span class="op" id="2760180">)</span><span class="op" id="2760181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760184">case</span>&nbsp;<span class="ident" id="2760189">Complex128</span><span class="op" id="2760199">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760203">return</span>&nbsp;<span class="builtintype" id="2760210">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2760217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2760220">panic</span><span class="op" id="2760225">(</span><span class="op" id="2760226">&amp;</span><span class="ident" id="2760227">ValueError</span><span class="op" id="2760237">{</span><span class="string" id="2760238">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2760269">,</span>&nbsp;<span class="ident" id="2760271">v</span><span class="op" id="2760272">.</span><span class="ident" id="2760273">kind</span><span class="op" id="2760277">(</span><span class="op" id="2760278">)</span><span class="op" id="2760279">}</span><span class="op" id="2760280">)</span><br>
<span class="lineno"></span><span class="op" id="2760282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2760285">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2760367">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2760419">func</span>&nbsp;<span class="op" id="2760424">(</span><span class="ident" id="2760425">v</span>&nbsp;<span class="ident" id="2760427">Value</span><span class="op" id="2760432">)</span>&nbsp;<span class="ident" id="2760434">OverflowFloat</span><span class="op" id="2760447">(</span><span class="ident" id="2760448">x</span>&nbsp;<span class="builtintype" id="2760450">float64</span><span class="op" id="2760457">)</span>&nbsp;<span class="builtintype" id="2760459">bool</span>&nbsp;<span class="op" id="2760464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2760467">k</span>&nbsp;<span class="op" id="2760469">:=</span>&nbsp;<span class="ident" id="2760472">v</span><span class="op" id="2760473">.</span><span class="ident" id="2760474">kind</span><span class="op" id="2760478">(</span><span class="op" id="2760479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760482">switch</span>&nbsp;<span class="ident" id="2760489">k</span>&nbsp;<span class="op" id="2760491">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760494">case</span>&nbsp;<span class="ident" id="2760499">Float32</span><span class="op" id="2760506">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760510">return</span>&nbsp;<span class="ident" id="2760517">overflowFloat32</span><span class="op" id="2760532">(</span><span class="ident" id="2760533">x</span><span class="op" id="2760534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760537">case</span>&nbsp;<span class="ident" id="2760542">Float64</span><span class="op" id="2760549">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760553">return</span>&nbsp;<span class="builtintype" id="2760560">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2760567">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2760570">panic</span><span class="op" id="2760575">(</span><span class="op" id="2760576">&amp;</span><span class="ident" id="2760577">ValueError</span><span class="op" id="2760587">{</span><span class="string" id="2760588">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2760617">,</span>&nbsp;<span class="ident" id="2760619">v</span><span class="op" id="2760620">.</span><span class="ident" id="2760621">kind</span><span class="op" id="2760625">(</span><span class="op" id="2760626">)</span><span class="op" id="2760627">}</span><span class="op" id="2760628">)</span><br>
<span class="lineno"></span><span class="op" id="2760630">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2760633">func</span>&nbsp;<span class="ident" id="2760638">overflowFloat32</span><span class="op" id="2760653">(</span><span class="ident" id="2760654">x</span>&nbsp;<span class="builtintype" id="2760656">float64</span><span class="op" id="2760663">)</span>&nbsp;<span class="builtintype" id="2760665">bool</span>&nbsp;<span class="op" id="2760670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760673">if</span>&nbsp;<span class="ident" id="2760676">x</span>&nbsp;<span class="op" id="2760678">&lt;</span>&nbsp;<span class="num" id="2760680">0</span>&nbsp;<span class="op" id="2760682">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2760686">x</span>&nbsp;<span class="op" id="2760688">=</span>&nbsp;<span class="op" id="2760690">-</span><span class="ident" id="2760691">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2760694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760697">return</span>&nbsp;<span class="ident" id="2760704">math</span><span class="op" id="2760708">.</span><span class="ident" id="2760709">MaxFloat32</span>&nbsp;<span class="op" id="2760720">&lt;</span>&nbsp;<span class="ident" id="2760722">x</span>&nbsp;<span class="op" id="2760724">&amp;&amp;</span>&nbsp;<span class="ident" id="2760727">x</span>&nbsp;<span class="op" id="2760729">&lt;=</span>&nbsp;<span class="ident" id="2760732">math</span><span class="op" id="2760736">.</span><span class="ident" id="2760737">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2760748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2760751">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2760829">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2760896">func</span>&nbsp;<span class="op" id="2760901">(</span><span class="ident" id="2760902">v</span>&nbsp;<span class="ident" id="2760904">Value</span><span class="op" id="2760909">)</span>&nbsp;<span class="ident" id="2760911">OverflowInt</span><span class="op" id="2760922">(</span><span class="ident" id="2760923">x</span>&nbsp;<span class="ident" id="2760925">int64</span><span class="op" id="2760930">)</span>&nbsp;<span class="builtintype" id="2760932">bool</span>&nbsp;<span class="op" id="2760937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2760940">k</span>&nbsp;<span class="op" id="2760942">:=</span>&nbsp;<span class="ident" id="2760945">v</span><span class="op" id="2760946">.</span><span class="ident" id="2760947">kind</span><span class="op" id="2760951">(</span><span class="op" id="2760952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760955">switch</span>&nbsp;<span class="ident" id="2760962">k</span>&nbsp;<span class="op" id="2760964">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2760967">case</span>&nbsp;<span class="ident" id="2760972">Int</span><span class="op" id="2760975">,</span>&nbsp;<span class="ident" id="2760977">Int8</span><span class="op" id="2760981">,</span>&nbsp;<span class="ident" id="2760983">Int16</span><span class="op" id="2760988">,</span>&nbsp;<span class="ident" id="2760990">Int32</span><span class="op" id="2760995">,</span>&nbsp;<span class="ident" id="2760997">Int64</span><span class="op" id="2761002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2761006">bitSize</span>&nbsp;<span class="op" id="2761014">:=</span>&nbsp;<span class="ident" id="2761017">v</span><span class="op" id="2761018">.</span><span class="ident" id="2761019">typ</span><span class="op" id="2761022">.</span><span class="ident" id="2761023">size</span>&nbsp;<span class="op" id="2761028">*</span>&nbsp;<span class="num" id="2761030">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2761034">trunc</span>&nbsp;<span class="op" id="2761040">:=</span>&nbsp;<span class="op" id="2761043">(</span><span class="ident" id="2761044">x</span>&nbsp;<span class="op" id="2761046">&lt;&lt;</span>&nbsp;<span class="op" id="2761049">(</span><span class="num" id="2761050">64</span>&nbsp;<span class="op" id="2761053">-</span>&nbsp;<span class="ident" id="2761055">bitSize</span><span class="op" id="2761062">)</span><span class="op" id="2761063">)</span>&nbsp;<span class="op" id="2761065">&gt;&gt;</span>&nbsp;<span class="op" id="2761068">(</span><span class="num" id="2761069">64</span>&nbsp;<span class="op" id="2761072">-</span>&nbsp;<span class="ident" id="2761074">bitSize</span><span class="op" id="2761081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2761085">return</span>&nbsp;<span class="ident" id="2761092">x</span>&nbsp;<span class="op" id="2761094">!=</span>&nbsp;<span class="ident" id="2761097">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2761104">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2761107">panic</span><span class="op" id="2761112">(</span><span class="op" id="2761113">&amp;</span><span class="ident" id="2761114">ValueError</span><span class="op" id="2761124">{</span><span class="string" id="2761125">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2761152">,</span>&nbsp;<span class="ident" id="2761154">v</span><span class="op" id="2761155">.</span><span class="ident" id="2761156">kind</span><span class="op" id="2761160">(</span><span class="op" id="2761161">)</span><span class="op" id="2761162">}</span><span class="op" id="2761163">)</span><br>
<span class="lineno"></span><span class="op" id="2761165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2761168">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2761248">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2761329">func</span>&nbsp;<span class="op" id="2761334">(</span><span class="ident" id="2761335">v</span>&nbsp;<span class="ident" id="2761337">Value</span><span class="op" id="2761342">)</span>&nbsp;<span class="ident" id="2761344">OverflowUint</span><span class="op" id="2761356">(</span><span class="ident" id="2761357">x</span>&nbsp;<span class="ident" id="2761359">uint64</span><span class="op" id="2761365">)</span>&nbsp;<span class="builtintype" id="2761367">bool</span>&nbsp;<span class="op" id="2761372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2761375">k</span>&nbsp;<span class="op" id="2761377">:=</span>&nbsp;<span class="ident" id="2761380">v</span><span class="op" id="2761381">.</span><span class="ident" id="2761382">kind</span><span class="op" id="2761386">(</span><span class="op" id="2761387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2761390">switch</span>&nbsp;<span class="ident" id="2761397">k</span>&nbsp;<span class="op" id="2761399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2761402">case</span>&nbsp;<span class="ident" id="2761407">Uint</span><span class="op" id="2761411">,</span>&nbsp;<span class="ident" id="2761413">Uintptr</span><span class="op" id="2761420">,</span>&nbsp;<span class="ident" id="2761422">Uint8</span><span class="op" id="2761427">,</span>&nbsp;<span class="ident" id="2761429">Uint16</span><span class="op" id="2761435">,</span>&nbsp;<span class="ident" id="2761437">Uint32</span><span class="op" id="2761443">,</span>&nbsp;<span class="ident" id="2761445">Uint64</span><span class="op" id="2761451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2761455">bitSize</span>&nbsp;<span class="op" id="2761463">:=</span>&nbsp;<span class="ident" id="2761466">v</span><span class="op" id="2761467">.</span><span class="ident" id="2761468">typ</span><span class="op" id="2761471">.</span><span class="ident" id="2761472">size</span>&nbsp;<span class="op" id="2761477">*</span>&nbsp;<span class="num" id="2761479">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2761483">trunc</span>&nbsp;<span class="op" id="2761489">:=</span>&nbsp;<span class="op" id="2761492">(</span><span class="ident" id="2761493">x</span>&nbsp;<span class="op" id="2761495">&lt;&lt;</span>&nbsp;<span class="op" id="2761498">(</span><span class="num" id="2761499">64</span>&nbsp;<span class="op" id="2761502">-</span>&nbsp;<span class="ident" id="2761504">bitSize</span><span class="op" id="2761511">)</span><span class="op" id="2761512">)</span>&nbsp;<span class="op" id="2761514">&gt;&gt;</span>&nbsp;<span class="op" id="2761517">(</span><span class="num" id="2761518">64</span>&nbsp;<span class="op" id="2761521">-</span>&nbsp;<span class="ident" id="2761523">bitSize</span><span class="op" id="2761530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2761534">return</span>&nbsp;<span class="ident" id="2761541">x</span>&nbsp;<span class="op" id="2761543">!=</span>&nbsp;<span class="ident" id="2761546">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2761553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2761556">panic</span><span class="op" id="2761561">(</span><span class="op" id="2761562">&amp;</span><span class="ident" id="2761563">ValueError</span><span class="op" id="2761573">{</span><span class="string" id="2761574">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2761602">,</span>&nbsp;<span class="ident" id="2761604">v</span><span class="op" id="2761605">.</span><span class="ident" id="2761606">kind</span><span class="op" id="2761610">(</span><span class="op" id="2761611">)</span><span class="op" id="2761612">}</span><span class="op" id="2761613">)</span><br>
<span class="lineno"></span><span class="op" id="2761615">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2761618">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2761661">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2761717">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2761769">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2761821">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2761900">//</span><br>
<span class="lineno"></span><span class="comment" id="2761903">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2761965">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2762023">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2762083">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2762139">//</span><br>
<span class="lineno"></span><span class="comment" id="2762142">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2762204">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2762269">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2762343">func</span>&nbsp;<span class="op" id="2762348">(</span><span class="ident" id="2762349">v</span>&nbsp;<span class="ident" id="2762351">Value</span><span class="op" id="2762356">)</span>&nbsp;<span class="ident" id="2762358">Pointer</span><span class="op" id="2762365">(</span><span class="op" id="2762366">)</span>&nbsp;<span class="builtintype" id="2762368">uintptr</span>&nbsp;<span class="op" id="2762376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762379">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2762399">k</span>&nbsp;<span class="op" id="2762401">:=</span>&nbsp;<span class="ident" id="2762404">v</span><span class="op" id="2762405">.</span><span class="ident" id="2762406">kind</span><span class="op" id="2762410">(</span><span class="op" id="2762411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762414">switch</span>&nbsp;<span class="ident" id="2762421">k</span>&nbsp;<span class="op" id="2762423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762426">case</span>&nbsp;<span class="ident" id="2762431">Chan</span><span class="op" id="2762435">,</span>&nbsp;<span class="ident" id="2762437">Map</span><span class="op" id="2762440">,</span>&nbsp;<span class="ident" id="2762442">Ptr</span><span class="op" id="2762445">,</span>&nbsp;<span class="ident" id="2762447">UnsafePointer</span><span class="op" id="2762460">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762464">return</span>&nbsp;<span class="builtintype" id="2762471">uintptr</span><span class="op" id="2762478">(</span><span class="ident" id="2762479">v</span><span class="op" id="2762480">.</span><span class="ident" id="2762481">pointer</span><span class="op" id="2762488">(</span><span class="op" id="2762489">)</span><span class="op" id="2762490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762493">case</span>&nbsp;<span class="ident" id="2762498">Func</span><span class="op" id="2762502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762506">if</span>&nbsp;<span class="ident" id="2762509">v</span><span class="op" id="2762510">.</span><span class="ident" id="2762511">flag</span><span class="op" id="2762515">&amp;</span><span class="ident" id="2762516">flagMethod</span>&nbsp;<span class="op" id="2762527">!=</span>&nbsp;<span class="num" id="2762530">0</span>&nbsp;<span class="op" id="2762532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762537">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762595">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762655">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762721">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762786">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762849">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2762894">f</span>&nbsp;<span class="op" id="2762896">:=</span>&nbsp;<span class="ident" id="2762899">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2762918">return</span>&nbsp;<span class="op" id="2762925">*</span><span class="op" id="2762926">*</span><span class="op" id="2762927">(</span><span class="op" id="2762928">*</span><span class="op" id="2762929">*</span><span class="builtintype" id="2762930">uintptr</span><span class="op" id="2762937">)</span><span class="op" id="2762938">(</span><span class="ident" id="2762939">unsafe</span><span class="op" id="2762945">.</span><span class="ident" id="2762946">Pointer</span><span class="op" id="2762953">(</span><span class="op" id="2762954">&amp;</span><span class="ident" id="2762955">f</span><span class="op" id="2762956">)</span><span class="op" id="2762957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2762961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2762965">p</span>&nbsp;<span class="op" id="2762967">:=</span>&nbsp;<span class="ident" id="2762970">v</span><span class="op" id="2762971">.</span><span class="ident" id="2762972">pointer</span><span class="op" id="2762979">(</span><span class="op" id="2762980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2762984">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2763030">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763076">if</span>&nbsp;<span class="ident" id="2763079">p</span>&nbsp;<span class="op" id="2763081">!=</span>&nbsp;<span class="builtintype" id="2763084">nil</span>&nbsp;<span class="op" id="2763088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763093">p</span>&nbsp;<span class="op" id="2763095">=</span>&nbsp;<span class="op" id="2763097">*</span><span class="op" id="2763098">(</span><span class="op" id="2763099">*</span><span class="ident" id="2763100">unsafe</span><span class="op" id="2763106">.</span><span class="ident" id="2763107">Pointer</span><span class="op" id="2763114">)</span><span class="op" id="2763115">(</span><span class="ident" id="2763116">p</span><span class="op" id="2763117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763125">return</span>&nbsp;<span class="builtintype" id="2763132">uintptr</span><span class="op" id="2763139">(</span><span class="ident" id="2763140">p</span><span class="op" id="2763141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763145">case</span>&nbsp;<span class="ident" id="2763150">Slice</span><span class="op" id="2763155">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763159">return</span>&nbsp;<span class="op" id="2763166">(</span><span class="op" id="2763167">*</span><span class="ident" id="2763168">SliceHeader</span><span class="op" id="2763179">)</span><span class="op" id="2763180">(</span><span class="ident" id="2763181">v</span><span class="op" id="2763182">.</span><span class="ident" id="2763183">ptr</span><span class="op" id="2763186">)</span><span class="op" id="2763187">.</span><span class="ident" id="2763188">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2763197">panic</span><span class="op" id="2763202">(</span><span class="op" id="2763203">&amp;</span><span class="ident" id="2763204">ValueError</span><span class="op" id="2763214">{</span><span class="string" id="2763215">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2763238">,</span>&nbsp;<span class="ident" id="2763240">v</span><span class="op" id="2763241">.</span><span class="ident" id="2763242">kind</span><span class="op" id="2763246">(</span><span class="op" id="2763247">)</span><span class="op" id="2763248">}</span><span class="op" id="2763249">)</span><br>
<span class="lineno"></span><span class="op" id="2763251">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2763254">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2763311">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2763349">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2763395">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2763464">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2763551">func</span>&nbsp;<span class="op" id="2763556">(</span><span class="ident" id="2763557">v</span>&nbsp;<span class="ident" id="2763559">Value</span><span class="op" id="2763564">)</span>&nbsp;<span class="ident" id="2763566">Recv</span><span class="op" id="2763570">(</span><span class="op" id="2763571">)</span>&nbsp;<span class="op" id="2763573">(</span><span class="ident" id="2763574">x</span>&nbsp;<span class="ident" id="2763576">Value</span><span class="op" id="2763581">,</span>&nbsp;<span class="ident" id="2763583">ok</span>&nbsp;<span class="builtintype" id="2763586">bool</span><span class="op" id="2763590">)</span>&nbsp;<span class="op" id="2763592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763595">v</span><span class="op" id="2763596">.</span><span class="ident" id="2763597">mustBe</span><span class="op" id="2763603">(</span><span class="ident" id="2763604">Chan</span><span class="op" id="2763608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763611">v</span><span class="op" id="2763612">.</span><span class="ident" id="2763613">mustBeExported</span><span class="op" id="2763627">(</span><span class="op" id="2763628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763631">return</span>&nbsp;<span class="ident" id="2763638">v</span><span class="op" id="2763639">.</span><span class="ident" id="2763640">recv</span><span class="op" id="2763644">(</span><span class="builtintype" id="2763645">false</span><span class="op" id="2763650">)</span><br>
<span class="lineno">1235</span><span class="op" id="2763652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2763655">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2763701">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2763732">func</span>&nbsp;<span class="op" id="2763737">(</span><span class="ident" id="2763738">v</span>&nbsp;<span class="ident" id="2763740">Value</span><span class="op" id="2763745">)</span>&nbsp;<span class="ident" id="2763747">recv</span><span class="op" id="2763751">(</span><span class="ident" id="2763752">nb</span>&nbsp;<span class="builtintype" id="2763755">bool</span><span class="op" id="2763759">)</span>&nbsp;<span class="op" id="2763761">(</span><span class="ident" id="2763762">val</span>&nbsp;<span class="ident" id="2763766">Value</span><span class="op" id="2763771">,</span>&nbsp;<span class="ident" id="2763773">ok</span>&nbsp;<span class="builtintype" id="2763776">bool</span><span class="op" id="2763780">)</span>&nbsp;<span class="op" id="2763782">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763785">tt</span>&nbsp;<span class="op" id="2763788">:=</span>&nbsp;<span class="op" id="2763791">(</span><span class="op" id="2763792">*</span><span class="ident" id="2763793">chanType</span><span class="op" id="2763801">)</span><span class="op" id="2763802">(</span><span class="ident" id="2763803">unsafe</span><span class="op" id="2763809">.</span><span class="ident" id="2763810">Pointer</span><span class="op" id="2763817">(</span><span class="ident" id="2763818">v</span><span class="op" id="2763819">.</span><span class="ident" id="2763820">typ</span><span class="op" id="2763823">)</span><span class="op" id="2763824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763827">if</span>&nbsp;<span class="ident" id="2763830">ChanDir</span><span class="op" id="2763837">(</span><span class="ident" id="2763838">tt</span><span class="op" id="2763840">.</span><span class="ident" id="2763841">dir</span><span class="op" id="2763844">)</span><span class="op" id="2763845">&amp;</span><span class="ident" id="2763846">RecvDir</span>&nbsp;<span class="op" id="2763854">==</span>&nbsp;<span class="num" id="2763857">0</span>&nbsp;<span class="op" id="2763859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2763863">panic</span><span class="op" id="2763868">(</span><span class="string" id="2763869">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2763905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2763908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763911">t</span>&nbsp;<span class="op" id="2763913">:=</span>&nbsp;<span class="ident" id="2763916">tt</span><span class="op" id="2763918">.</span><span class="ident" id="2763919">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2763925">val</span>&nbsp;<span class="op" id="2763929">=</span>&nbsp;<span class="ident" id="2763931">Value</span><span class="op" id="2763936">{</span><span class="ident" id="2763937">t</span><span class="op" id="2763938">,</span>&nbsp;<span class="builtintype" id="2763940">nil</span><span class="op" id="2763943">,</span>&nbsp;<span class="ident" id="2763945">flag</span><span class="op" id="2763949">(</span><span class="ident" id="2763950">t</span><span class="op" id="2763951">.</span><span class="ident" id="2763952">Kind</span><span class="op" id="2763956">(</span><span class="op" id="2763957">)</span><span class="op" id="2763958">)</span><span class="op" id="2763959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763962">var</span>&nbsp;<span class="ident" id="2763966">p</span>&nbsp;<span class="ident" id="2763968">unsafe</span><span class="op" id="2763974">.</span><span class="ident" id="2763975">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2763984">if</span>&nbsp;<span class="ident" id="2763987">ifaceIndir</span><span class="op" id="2763997">(</span><span class="ident" id="2763998">t</span><span class="op" id="2763999">)</span>&nbsp;<span class="op" id="2764001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764005">p</span>&nbsp;<span class="op" id="2764007">=</span>&nbsp;<span class="ident" id="2764009">unsafe_New</span><span class="op" id="2764019">(</span><span class="ident" id="2764020">t</span><span class="op" id="2764021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764025">val</span><span class="op" id="2764028">.</span><span class="ident" id="2764029">ptr</span>&nbsp;<span class="op" id="2764033">=</span>&nbsp;<span class="ident" id="2764035">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764039">val</span><span class="op" id="2764042">.</span><span class="ident" id="2764043">flag</span>&nbsp;<span class="op" id="2764048">|=</span>&nbsp;<span class="ident" id="2764051">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764062">}</span>&nbsp;<span class="keyword" id="2764064">else</span>&nbsp;<span class="op" id="2764069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764073">p</span>&nbsp;<span class="op" id="2764075">=</span>&nbsp;<span class="ident" id="2764077">unsafe</span><span class="op" id="2764083">.</span><span class="ident" id="2764084">Pointer</span><span class="op" id="2764091">(</span><span class="op" id="2764092">&amp;</span><span class="ident" id="2764093">val</span><span class="op" id="2764096">.</span><span class="ident" id="2764097">ptr</span><span class="op" id="2764100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764106">selected</span><span class="op" id="2764114">,</span>&nbsp;<span class="ident" id="2764116">ok</span>&nbsp;<span class="op" id="2764119">:=</span>&nbsp;<span class="ident" id="2764122">chanrecv</span><span class="op" id="2764130">(</span><span class="ident" id="2764131">v</span><span class="op" id="2764132">.</span><span class="ident" id="2764133">typ</span><span class="op" id="2764136">,</span>&nbsp;<span class="ident" id="2764138">v</span><span class="op" id="2764139">.</span><span class="ident" id="2764140">pointer</span><span class="op" id="2764147">(</span><span class="op" id="2764148">)</span><span class="op" id="2764149">,</span>&nbsp;<span class="ident" id="2764151">nb</span><span class="op" id="2764153">,</span>&nbsp;<span class="ident" id="2764155">p</span><span class="op" id="2764156">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764159">if</span>&nbsp;<span class="op" id="2764162">!</span><span class="ident" id="2764163">selected</span>&nbsp;<span class="op" id="2764172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764176">val</span>&nbsp;<span class="op" id="2764180">=</span>&nbsp;<span class="ident" id="2764182">Value</span><span class="op" id="2764187">{</span><span class="op" id="2764188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764194">return</span><br>
<span class="lineno"></span><span class="op" id="2764201">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2764204">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2764238">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2764332">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2764405">func</span>&nbsp;<span class="op" id="2764410">(</span><span class="ident" id="2764411">v</span>&nbsp;<span class="ident" id="2764413">Value</span><span class="op" id="2764418">)</span>&nbsp;<span class="ident" id="2764420">Send</span><span class="op" id="2764424">(</span><span class="ident" id="2764425">x</span>&nbsp;<span class="ident" id="2764427">Value</span><span class="op" id="2764432">)</span>&nbsp;<span class="op" id="2764434">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764437">v</span><span class="op" id="2764438">.</span><span class="ident" id="2764439">mustBe</span><span class="op" id="2764445">(</span><span class="ident" id="2764446">Chan</span><span class="op" id="2764450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764453">v</span><span class="op" id="2764454">.</span><span class="ident" id="2764455">mustBeExported</span><span class="op" id="2764469">(</span><span class="op" id="2764470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764473">v</span><span class="op" id="2764474">.</span><span class="ident" id="2764475">send</span><span class="op" id="2764479">(</span><span class="ident" id="2764480">x</span><span class="op" id="2764481">,</span>&nbsp;<span class="builtintype" id="2764483">false</span><span class="op" id="2764488">)</span><br>
<span class="lineno"></span><span class="op" id="2764490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2764493">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2764534">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2764565">func</span>&nbsp;<span class="op" id="2764570">(</span><span class="ident" id="2764571">v</span>&nbsp;<span class="ident" id="2764573">Value</span><span class="op" id="2764578">)</span>&nbsp;<span class="ident" id="2764580">send</span><span class="op" id="2764584">(</span><span class="ident" id="2764585">x</span>&nbsp;<span class="ident" id="2764587">Value</span><span class="op" id="2764592">,</span>&nbsp;<span class="ident" id="2764594">nb</span>&nbsp;<span class="builtintype" id="2764597">bool</span><span class="op" id="2764601">)</span>&nbsp;<span class="op" id="2764603">(</span><span class="ident" id="2764604">selected</span>&nbsp;<span class="builtintype" id="2764613">bool</span><span class="op" id="2764617">)</span>&nbsp;<span class="op" id="2764619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764622">tt</span>&nbsp;<span class="op" id="2764625">:=</span>&nbsp;<span class="op" id="2764628">(</span><span class="op" id="2764629">*</span><span class="ident" id="2764630">chanType</span><span class="op" id="2764638">)</span><span class="op" id="2764639">(</span><span class="ident" id="2764640">unsafe</span><span class="op" id="2764646">.</span><span class="ident" id="2764647">Pointer</span><span class="op" id="2764654">(</span><span class="ident" id="2764655">v</span><span class="op" id="2764656">.</span><span class="ident" id="2764657">typ</span><span class="op" id="2764660">)</span><span class="op" id="2764661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764664">if</span>&nbsp;<span class="ident" id="2764667">ChanDir</span><span class="op" id="2764674">(</span><span class="ident" id="2764675">tt</span><span class="op" id="2764677">.</span><span class="ident" id="2764678">dir</span><span class="op" id="2764681">)</span><span class="op" id="2764682">&amp;</span><span class="ident" id="2764683">SendDir</span>&nbsp;<span class="op" id="2764691">==</span>&nbsp;<span class="num" id="2764694">0</span>&nbsp;<span class="op" id="2764696">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2764700">panic</span><span class="op" id="2764705">(</span><span class="string" id="2764706">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2764742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764748">x</span><span class="op" id="2764749">.</span><span class="ident" id="2764750">mustBeExported</span><span class="op" id="2764764">(</span><span class="op" id="2764765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764768">x</span>&nbsp;<span class="op" id="2764770">=</span>&nbsp;<span class="ident" id="2764772">x</span><span class="op" id="2764773">.</span><span class="ident" id="2764774">assignTo</span><span class="op" id="2764782">(</span><span class="string" id="2764783">&#34;reflect.Value.Send&#34;</span><span class="op" id="2764803">,</span>&nbsp;<span class="ident" id="2764805">tt</span><span class="op" id="2764807">.</span><span class="ident" id="2764808">elem</span><span class="op" id="2764812">,</span>&nbsp;<span class="builtintype" id="2764814">nil</span><span class="op" id="2764817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764820">var</span>&nbsp;<span class="ident" id="2764824">p</span>&nbsp;<span class="ident" id="2764826">unsafe</span><span class="op" id="2764832">.</span><span class="ident" id="2764833">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764842">if</span>&nbsp;<span class="ident" id="2764845">x</span><span class="op" id="2764846">.</span><span class="ident" id="2764847">flag</span><span class="op" id="2764851">&amp;</span><span class="ident" id="2764852">flagIndir</span>&nbsp;<span class="op" id="2764862">!=</span>&nbsp;<span class="num" id="2764865">0</span>&nbsp;<span class="op" id="2764867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764871">p</span>&nbsp;<span class="op" id="2764873">=</span>&nbsp;<span class="ident" id="2764875">x</span><span class="op" id="2764876">.</span><span class="ident" id="2764877">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764882">}</span>&nbsp;<span class="keyword" id="2764884">else</span>&nbsp;<span class="op" id="2764889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2764893">p</span>&nbsp;<span class="op" id="2764895">=</span>&nbsp;<span class="ident" id="2764897">unsafe</span><span class="op" id="2764903">.</span><span class="ident" id="2764904">Pointer</span><span class="op" id="2764911">(</span><span class="op" id="2764912">&amp;</span><span class="ident" id="2764913">x</span><span class="op" id="2764914">.</span><span class="ident" id="2764915">ptr</span><span class="op" id="2764918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2764921">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2764924">return</span>&nbsp;<span class="ident" id="2764931">chansend</span><span class="op" id="2764939">(</span><span class="ident" id="2764940">v</span><span class="op" id="2764941">.</span><span class="ident" id="2764942">typ</span><span class="op" id="2764945">,</span>&nbsp;<span class="ident" id="2764947">v</span><span class="op" id="2764948">.</span><span class="ident" id="2764949">pointer</span><span class="op" id="2764956">(</span><span class="op" id="2764957">)</span><span class="op" id="2764958">,</span>&nbsp;<span class="ident" id="2764960">p</span><span class="op" id="2764961">,</span>&nbsp;<span class="ident" id="2764963">nb</span><span class="op" id="2764965">)</span><br>
<span class="lineno"></span><span class="op" id="2764967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764970">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2765003">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2765041">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2765096">func</span>&nbsp;<span class="op" id="2765101">(</span><span class="ident" id="2765102">v</span>&nbsp;<span class="ident" id="2765104">Value</span><span class="op" id="2765109">)</span>&nbsp;<span class="ident" id="2765111">Set</span><span class="op" id="2765114">(</span><span class="ident" id="2765115">x</span>&nbsp;<span class="ident" id="2765117">Value</span><span class="op" id="2765122">)</span>&nbsp;<span class="op" id="2765124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765127">v</span><span class="op" id="2765128">.</span><span class="ident" id="2765129">mustBeAssignable</span><span class="op" id="2765145">(</span><span class="op" id="2765146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765149">x</span><span class="op" id="2765150">.</span><span class="ident" id="2765151">mustBeExported</span><span class="op" id="2765165">(</span><span class="op" id="2765166">)</span>&nbsp;<span class="comment" id="2765168">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765201">var</span>&nbsp;<span class="ident" id="2765205">target</span>&nbsp;<span class="ident" id="2765212">unsafe</span><span class="op" id="2765218">.</span><span class="ident" id="2765219">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765228">if</span>&nbsp;<span class="ident" id="2765231">v</span><span class="op" id="2765232">.</span><span class="ident" id="2765233">kind</span><span class="op" id="2765237">(</span><span class="op" id="2765238">)</span>&nbsp;<span class="op" id="2765240">==</span>&nbsp;<span class="ident" id="2765243">Interface</span>&nbsp;<span class="op" id="2765253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765257">target</span>&nbsp;<span class="op" id="2765264">=</span>&nbsp;<span class="ident" id="2765266">v</span><span class="op" id="2765267">.</span><span class="ident" id="2765268">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765276">x</span>&nbsp;<span class="op" id="2765278">=</span>&nbsp;<span class="ident" id="2765280">x</span><span class="op" id="2765281">.</span><span class="ident" id="2765282">assignTo</span><span class="op" id="2765290">(</span><span class="string" id="2765291">&#34;reflect.Set&#34;</span><span class="op" id="2765304">,</span>&nbsp;<span class="ident" id="2765306">v</span><span class="op" id="2765307">.</span><span class="ident" id="2765308">typ</span><span class="op" id="2765311">,</span>&nbsp;<span class="ident" id="2765313">target</span><span class="op" id="2765319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765322">if</span>&nbsp;<span class="ident" id="2765325">x</span><span class="op" id="2765326">.</span><span class="ident" id="2765327">flag</span><span class="op" id="2765331">&amp;</span><span class="ident" id="2765332">flagIndir</span>&nbsp;<span class="op" id="2765342">!=</span>&nbsp;<span class="num" id="2765345">0</span>&nbsp;<span class="op" id="2765347">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765351">memmove</span><span class="op" id="2765358">(</span><span class="ident" id="2765359">v</span><span class="op" id="2765360">.</span><span class="ident" id="2765361">ptr</span><span class="op" id="2765364">,</span>&nbsp;<span class="ident" id="2765366">x</span><span class="op" id="2765367">.</span><span class="ident" id="2765368">ptr</span><span class="op" id="2765371">,</span>&nbsp;<span class="ident" id="2765373">v</span><span class="op" id="2765374">.</span><span class="ident" id="2765375">typ</span><span class="op" id="2765378">.</span><span class="ident" id="2765379">size</span><span class="op" id="2765383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765386">}</span>&nbsp;<span class="keyword" id="2765388">else</span>&nbsp;<span class="op" id="2765393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765397">*</span><span class="op" id="2765398">(</span><span class="op" id="2765399">*</span><span class="ident" id="2765400">unsafe</span><span class="op" id="2765406">.</span><span class="ident" id="2765407">Pointer</span><span class="op" id="2765414">)</span><span class="op" id="2765415">(</span><span class="ident" id="2765416">v</span><span class="op" id="2765417">.</span><span class="ident" id="2765418">ptr</span><span class="op" id="2765421">)</span>&nbsp;<span class="op" id="2765423">=</span>&nbsp;<span class="ident" id="2765425">x</span><span class="op" id="2765426">.</span><span class="ident" id="2765427">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765432">}</span><br>
<span class="lineno"></span><span class="op" id="2765434">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2765437">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2765475">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2765537">func</span>&nbsp;<span class="op" id="2765542">(</span><span class="ident" id="2765543">v</span>&nbsp;<span class="ident" id="2765545">Value</span><span class="op" id="2765550">)</span>&nbsp;<span class="ident" id="2765552">SetBool</span><span class="op" id="2765559">(</span><span class="ident" id="2765560">x</span>&nbsp;<span class="builtintype" id="2765562">bool</span><span class="op" id="2765566">)</span>&nbsp;<span class="op" id="2765568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765571">v</span><span class="op" id="2765572">.</span><span class="ident" id="2765573">mustBeAssignable</span><span class="op" id="2765589">(</span><span class="op" id="2765590">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765593">v</span><span class="op" id="2765594">.</span><span class="ident" id="2765595">mustBe</span><span class="op" id="2765601">(</span><span class="ident" id="2765602">Bool</span><span class="op" id="2765606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765609">*</span><span class="op" id="2765610">(</span><span class="op" id="2765611">*</span><span class="builtintype" id="2765612">bool</span><span class="op" id="2765616">)</span><span class="op" id="2765617">(</span><span class="ident" id="2765618">v</span><span class="op" id="2765619">.</span><span class="ident" id="2765620">ptr</span><span class="op" id="2765623">)</span>&nbsp;<span class="op" id="2765625">=</span>&nbsp;<span class="ident" id="2765627">x</span><br>
<span class="lineno"></span><span class="op" id="2765629">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765632">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2765671">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2765733">func</span>&nbsp;<span class="op" id="2765738">(</span><span class="ident" id="2765739">v</span>&nbsp;<span class="ident" id="2765741">Value</span><span class="op" id="2765746">)</span>&nbsp;<span class="ident" id="2765748">SetBytes</span><span class="op" id="2765756">(</span><span class="ident" id="2765757">x</span>&nbsp;<span class="op" id="2765759">[</span><span class="op" id="2765760">]</span><span class="builtintype" id="2765761">byte</span><span class="op" id="2765765">)</span>&nbsp;<span class="op" id="2765767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765770">v</span><span class="op" id="2765771">.</span><span class="ident" id="2765772">mustBeAssignable</span><span class="op" id="2765788">(</span><span class="op" id="2765789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2765792">v</span><span class="op" id="2765793">.</span><span class="ident" id="2765794">mustBe</span><span class="op" id="2765800">(</span><span class="ident" id="2765801">Slice</span><span class="op" id="2765806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2765809">if</span>&nbsp;<span class="ident" id="2765812">v</span><span class="op" id="2765813">.</span><span class="ident" id="2765814">typ</span><span class="op" id="2765817">.</span><span class="ident" id="2765818">Elem</span><span class="op" id="2765822">(</span><span class="op" id="2765823">)</span><span class="op" id="2765824">.</span><span class="ident" id="2765825">Kind</span><span class="op" id="2765829">(</span><span class="op" id="2765830">)</span>&nbsp;<span class="op" id="2765832">!=</span>&nbsp;<span class="ident" id="2765835">Uint8</span>&nbsp;<span class="op" id="2765841">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2765845">panic</span><span class="op" id="2765850">(</span><span class="string" id="2765851">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2765893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2765899">*</span><span class="op" id="2765900">(</span><span class="op" id="2765901">*</span><span class="op" id="2765902">[</span><span class="op" id="2765903">]</span><span class="builtintype" id="2765904">byte</span><span class="op" id="2765908">)</span><span class="op" id="2765909">(</span><span class="ident" id="2765910">v</span><span class="op" id="2765911">.</span><span class="ident" id="2765912">ptr</span><span class="op" id="2765915">)</span>&nbsp;<span class="op" id="2765917">=</span>&nbsp;<span class="ident" id="2765919">x</span><br>
<span class="lineno"></span><span class="op" id="2765921">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2765924">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2765963">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2766034">func</span>&nbsp;<span class="op" id="2766039">(</span><span class="ident" id="2766040">v</span>&nbsp;<span class="ident" id="2766042">Value</span><span class="op" id="2766047">)</span>&nbsp;<span class="ident" id="2766049">setRunes</span><span class="op" id="2766057">(</span><span class="ident" id="2766058">x</span>&nbsp;<span class="op" id="2766060">[</span><span class="op" id="2766061">]</span><span class="builtintype" id="2766062">rune</span><span class="op" id="2766066">)</span>&nbsp;<span class="op" id="2766068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766071">v</span><span class="op" id="2766072">.</span><span class="ident" id="2766073">mustBeAssignable</span><span class="op" id="2766089">(</span><span class="op" id="2766090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766093">v</span><span class="op" id="2766094">.</span><span class="ident" id="2766095">mustBe</span><span class="op" id="2766101">(</span><span class="ident" id="2766102">Slice</span><span class="op" id="2766107">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766110">if</span>&nbsp;<span class="ident" id="2766113">v</span><span class="op" id="2766114">.</span><span class="ident" id="2766115">typ</span><span class="op" id="2766118">.</span><span class="ident" id="2766119">Elem</span><span class="op" id="2766123">(</span><span class="op" id="2766124">)</span><span class="op" id="2766125">.</span><span class="ident" id="2766126">Kind</span><span class="op" id="2766130">(</span><span class="op" id="2766131">)</span>&nbsp;<span class="op" id="2766133">!=</span>&nbsp;<span class="ident" id="2766136">Int32</span>&nbsp;<span class="op" id="2766142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2766146">panic</span><span class="op" id="2766151">(</span><span class="string" id="2766152">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2766194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766200">*</span><span class="op" id="2766201">(</span><span class="op" id="2766202">*</span><span class="op" id="2766203">[</span><span class="op" id="2766204">]</span><span class="builtintype" id="2766205">rune</span><span class="op" id="2766209">)</span><span class="op" id="2766210">(</span><span class="ident" id="2766211">v</span><span class="op" id="2766212">.</span><span class="ident" id="2766213">ptr</span><span class="op" id="2766216">)</span>&nbsp;<span class="op" id="2766218">=</span>&nbsp;<span class="ident" id="2766220">x</span><br>
<span class="lineno"></span><span class="op" id="2766222">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2766225">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2766271">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2766353">func</span>&nbsp;<span class="op" id="2766358">(</span><span class="ident" id="2766359">v</span>&nbsp;<span class="ident" id="2766361">Value</span><span class="op" id="2766366">)</span>&nbsp;<span class="ident" id="2766368">SetComplex</span><span class="op" id="2766378">(</span><span class="ident" id="2766379">x</span>&nbsp;<span class="builtintype" id="2766381">complex128</span><span class="op" id="2766391">)</span>&nbsp;<span class="op" id="2766393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766396">v</span><span class="op" id="2766397">.</span><span class="ident" id="2766398">mustBeAssignable</span><span class="op" id="2766414">(</span><span class="op" id="2766415">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766418">switch</span>&nbsp;<span class="ident" id="2766425">k</span>&nbsp;<span class="op" id="2766427">:=</span>&nbsp;<span class="ident" id="2766430">v</span><span class="op" id="2766431">.</span><span class="ident" id="2766432">kind</span><span class="op" id="2766436">(</span><span class="op" id="2766437">)</span><span class="op" id="2766438">;</span>&nbsp;<span class="ident" id="2766440">k</span>&nbsp;<span class="op" id="2766442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766445">default</span><span class="op" id="2766452">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2766456">panic</span><span class="op" id="2766461">(</span><span class="op" id="2766462">&amp;</span><span class="ident" id="2766463">ValueError</span><span class="op" id="2766473">{</span><span class="string" id="2766474">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2766500">,</span>&nbsp;<span class="ident" id="2766502">v</span><span class="op" id="2766503">.</span><span class="ident" id="2766504">kind</span><span class="op" id="2766508">(</span><span class="op" id="2766509">)</span><span class="op" id="2766510">}</span><span class="op" id="2766511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766514">case</span>&nbsp;<span class="ident" id="2766519">Complex64</span><span class="op" id="2766528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766532">*</span><span class="op" id="2766533">(</span><span class="op" id="2766534">*</span><span class="builtintype" id="2766535">complex64</span><span class="op" id="2766544">)</span><span class="op" id="2766545">(</span><span class="ident" id="2766546">v</span><span class="op" id="2766547">.</span><span class="ident" id="2766548">ptr</span><span class="op" id="2766551">)</span>&nbsp;<span class="op" id="2766553">=</span>&nbsp;<span class="builtintype" id="2766555">complex64</span><span class="op" id="2766564">(</span><span class="ident" id="2766565">x</span><span class="op" id="2766566">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766569">case</span>&nbsp;<span class="ident" id="2766574">Complex128</span><span class="op" id="2766584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766588">*</span><span class="op" id="2766589">(</span><span class="op" id="2766590">*</span><span class="builtintype" id="2766591">complex128</span><span class="op" id="2766601">)</span><span class="op" id="2766602">(</span><span class="ident" id="2766603">v</span><span class="op" id="2766604">.</span><span class="ident" id="2766605">ptr</span><span class="op" id="2766608">)</span>&nbsp;<span class="op" id="2766610">=</span>&nbsp;<span class="ident" id="2766612">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766615">}</span><br>
<span class="lineno"></span><span class="op" id="2766617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2766620">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2766664">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2766741">func</span>&nbsp;<span class="op" id="2766746">(</span><span class="ident" id="2766747">v</span>&nbsp;<span class="ident" id="2766749">Value</span><span class="op" id="2766754">)</span>&nbsp;<span class="ident" id="2766756">SetFloat</span><span class="op" id="2766764">(</span><span class="ident" id="2766765">x</span>&nbsp;<span class="builtintype" id="2766767">float64</span><span class="op" id="2766774">)</span>&nbsp;<span class="op" id="2766776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2766779">v</span><span class="op" id="2766780">.</span><span class="ident" id="2766781">mustBeAssignable</span><span class="op" id="2766797">(</span><span class="op" id="2766798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766801">switch</span>&nbsp;<span class="ident" id="2766808">k</span>&nbsp;<span class="op" id="2766810">:=</span>&nbsp;<span class="ident" id="2766813">v</span><span class="op" id="2766814">.</span><span class="ident" id="2766815">kind</span><span class="op" id="2766819">(</span><span class="op" id="2766820">)</span><span class="op" id="2766821">;</span>&nbsp;<span class="ident" id="2766823">k</span>&nbsp;<span class="op" id="2766825">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766828">default</span><span class="op" id="2766835">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2766839">panic</span><span class="op" id="2766844">(</span><span class="op" id="2766845">&amp;</span><span class="ident" id="2766846">ValueError</span><span class="op" id="2766856">{</span><span class="string" id="2766857">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2766881">,</span>&nbsp;<span class="ident" id="2766883">v</span><span class="op" id="2766884">.</span><span class="ident" id="2766885">kind</span><span class="op" id="2766889">(</span><span class="op" id="2766890">)</span><span class="op" id="2766891">}</span><span class="op" id="2766892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766895">case</span>&nbsp;<span class="ident" id="2766900">Float32</span><span class="op" id="2766907">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766911">*</span><span class="op" id="2766912">(</span><span class="op" id="2766913">*</span><span class="builtintype" id="2766914">float32</span><span class="op" id="2766921">)</span><span class="op" id="2766922">(</span><span class="ident" id="2766923">v</span><span class="op" id="2766924">.</span><span class="ident" id="2766925">ptr</span><span class="op" id="2766928">)</span>&nbsp;<span class="op" id="2766930">=</span>&nbsp;<span class="builtintype" id="2766932">float32</span><span class="op" id="2766939">(</span><span class="ident" id="2766940">x</span><span class="op" id="2766941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2766944">case</span>&nbsp;<span class="ident" id="2766949">Float64</span><span class="op" id="2766956">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766960">*</span><span class="op" id="2766961">(</span><span class="op" id="2766962">*</span><span class="builtintype" id="2766963">float64</span><span class="op" id="2766970">)</span><span class="op" id="2766971">(</span><span class="ident" id="2766972">v</span><span class="op" id="2766973">.</span><span class="ident" id="2766974">ptr</span><span class="op" id="2766977">)</span>&nbsp;<span class="op" id="2766979">=</span>&nbsp;<span class="ident" id="2766981">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2766984">}</span><br>
<span class="lineno"></span><span class="op" id="2766986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766989">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2767031">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2767123">func</span>&nbsp;<span class="op" id="2767128">(</span><span class="ident" id="2767129">v</span>&nbsp;<span class="ident" id="2767131">Value</span><span class="op" id="2767136">)</span>&nbsp;<span class="ident" id="2767138">SetInt</span><span class="op" id="2767144">(</span><span class="ident" id="2767145">x</span>&nbsp;<span class="ident" id="2767147">int64</span><span class="op" id="2767152">)</span>&nbsp;<span class="op" id="2767154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767157">v</span><span class="op" id="2767158">.</span><span class="ident" id="2767159">mustBeAssignable</span><span class="op" id="2767175">(</span><span class="op" id="2767176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767179">switch</span>&nbsp;<span class="ident" id="2767186">k</span>&nbsp;<span class="op" id="2767188">:=</span>&nbsp;<span class="ident" id="2767191">v</span><span class="op" id="2767192">.</span><span class="ident" id="2767193">kind</span><span class="op" id="2767197">(</span><span class="op" id="2767198">)</span><span class="op" id="2767199">;</span>&nbsp;<span class="ident" id="2767201">k</span>&nbsp;<span class="op" id="2767203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767206">default</span><span class="op" id="2767213">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2767217">panic</span><span class="op" id="2767222">(</span><span class="op" id="2767223">&amp;</span><span class="ident" id="2767224">ValueError</span><span class="op" id="2767234">{</span><span class="string" id="2767235">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2767257">,</span>&nbsp;<span class="ident" id="2767259">v</span><span class="op" id="2767260">.</span><span class="ident" id="2767261">kind</span><span class="op" id="2767265">(</span><span class="op" id="2767266">)</span><span class="op" id="2767267">}</span><span class="op" id="2767268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767271">case</span>&nbsp;<span class="ident" id="2767276">Int</span><span class="op" id="2767279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767283">*</span><span class="op" id="2767284">(</span><span class="op" id="2767285">*</span><span class="builtintype" id="2767286">int</span><span class="op" id="2767289">)</span><span class="op" id="2767290">(</span><span class="ident" id="2767291">v</span><span class="op" id="2767292">.</span><span class="ident" id="2767293">ptr</span><span class="op" id="2767296">)</span>&nbsp;<span class="op" id="2767298">=</span>&nbsp;<span class="builtintype" id="2767300">int</span><span class="op" id="2767303">(</span><span class="ident" id="2767304">x</span><span class="op" id="2767305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767308">case</span>&nbsp;<span class="ident" id="2767313">Int8</span><span class="op" id="2767317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767321">*</span><span class="op" id="2767322">(</span><span class="op" id="2767323">*</span><span class="builtintype" id="2767324">int8</span><span class="op" id="2767328">)</span><span class="op" id="2767329">(</span><span class="ident" id="2767330">v</span><span class="op" id="2767331">.</span><span class="ident" id="2767332">ptr</span><span class="op" id="2767335">)</span>&nbsp;<span class="op" id="2767337">=</span>&nbsp;<span class="builtintype" id="2767339">int8</span><span class="op" id="2767343">(</span><span class="ident" id="2767344">x</span><span class="op" id="2767345">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767348">case</span>&nbsp;<span class="ident" id="2767353">Int16</span><span class="op" id="2767358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767362">*</span><span class="op" id="2767363">(</span><span class="op" id="2767364">*</span><span class="builtintype" id="2767365">int16</span><span class="op" id="2767370">)</span><span class="op" id="2767371">(</span><span class="ident" id="2767372">v</span><span class="op" id="2767373">.</span><span class="ident" id="2767374">ptr</span><span class="op" id="2767377">)</span>&nbsp;<span class="op" id="2767379">=</span>&nbsp;<span class="builtintype" id="2767381">int16</span><span class="op" id="2767386">(</span><span class="ident" id="2767387">x</span><span class="op" id="2767388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767391">case</span>&nbsp;<span class="ident" id="2767396">Int32</span><span class="op" id="2767401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767405">*</span><span class="op" id="2767406">(</span><span class="op" id="2767407">*</span><span class="builtintype" id="2767408">int32</span><span class="op" id="2767413">)</span><span class="op" id="2767414">(</span><span class="ident" id="2767415">v</span><span class="op" id="2767416">.</span><span class="ident" id="2767417">ptr</span><span class="op" id="2767420">)</span>&nbsp;<span class="op" id="2767422">=</span>&nbsp;<span class="builtintype" id="2767424">int32</span><span class="op" id="2767429">(</span><span class="ident" id="2767430">x</span><span class="op" id="2767431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767434">case</span>&nbsp;<span class="ident" id="2767439">Int64</span><span class="op" id="2767444">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767448">*</span><span class="op" id="2767449">(</span><span class="op" id="2767450">*</span><span class="ident" id="2767451">int64</span><span class="op" id="2767456">)</span><span class="op" id="2767457">(</span><span class="ident" id="2767458">v</span><span class="op" id="2767459">.</span><span class="ident" id="2767460">ptr</span><span class="op" id="2767463">)</span>&nbsp;<span class="op" id="2767465">=</span>&nbsp;<span class="ident" id="2767467">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767470">}</span><br>
<span class="lineno"></span><span class="op" id="2767472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767475">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2767507">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2767568">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2767611">func</span>&nbsp;<span class="op" id="2767616">(</span><span class="ident" id="2767617">v</span>&nbsp;<span class="ident" id="2767619">Value</span><span class="op" id="2767624">)</span>&nbsp;<span class="ident" id="2767626">SetLen</span><span class="op" id="2767632">(</span><span class="ident" id="2767633">n</span>&nbsp;<span class="builtintype" id="2767635">int</span><span class="op" id="2767638">)</span>&nbsp;<span class="op" id="2767640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767643">v</span><span class="op" id="2767644">.</span><span class="ident" id="2767645">mustBeAssignable</span><span class="op" id="2767661">(</span><span class="op" id="2767662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767665">v</span><span class="op" id="2767666">.</span><span class="ident" id="2767667">mustBe</span><span class="op" id="2767673">(</span><span class="ident" id="2767674">Slice</span><span class="op" id="2767679">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767682">s</span>&nbsp;<span class="op" id="2767684">:=</span>&nbsp;<span class="op" id="2767687">(</span><span class="op" id="2767688">*</span><span class="ident" id="2767689">sliceHeader</span><span class="op" id="2767700">)</span><span class="op" id="2767701">(</span><span class="ident" id="2767702">v</span><span class="op" id="2767703">.</span><span class="ident" id="2767704">ptr</span><span class="op" id="2767707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2767710">if</span>&nbsp;<span class="builtintype" id="2767713">uint</span><span class="op" id="2767717">(</span><span class="ident" id="2767718">n</span><span class="op" id="2767719">)</span>&nbsp;<span class="op" id="2767721">&gt;</span>&nbsp;<span class="builtintype" id="2767723">uint</span><span class="op" id="2767727">(</span><span class="ident" id="2767728">s</span><span class="op" id="2767729">.</span><span class="ident" id="2767730">Cap</span><span class="op" id="2767733">)</span>&nbsp;<span class="op" id="2767735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2767739">panic</span><span class="op" id="2767744">(</span><span class="string" id="2767745">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2767791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2767794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767797">s</span><span class="op" id="2767798">.</span><span class="ident" id="2767799">Len</span>&nbsp;<span class="op" id="2767803">=</span>&nbsp;<span class="ident" id="2767805">n</span><br>
<span class="lineno">1395</span><span class="op" id="2767807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767810">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2767844">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2767920">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2767963">func</span>&nbsp;<span class="op" id="2767968">(</span><span class="ident" id="2767969">v</span>&nbsp;<span class="ident" id="2767971">Value</span><span class="op" id="2767976">)</span>&nbsp;<span class="ident" id="2767978">SetCap</span><span class="op" id="2767984">(</span><span class="ident" id="2767985">n</span>&nbsp;<span class="builtintype" id="2767987">int</span><span class="op" id="2767990">)</span>&nbsp;<span class="op" id="2767992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2767995">v</span><span class="op" id="2767996">.</span><span class="ident" id="2767997">mustBeAssignable</span><span class="op" id="2768013">(</span><span class="op" id="2768014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768017">v</span><span class="op" id="2768018">.</span><span class="ident" id="2768019">mustBe</span><span class="op" id="2768025">(</span><span class="ident" id="2768026">Slice</span><span class="op" id="2768031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768034">s</span>&nbsp;<span class="op" id="2768036">:=</span>&nbsp;<span class="op" id="2768039">(</span><span class="op" id="2768040">*</span><span class="ident" id="2768041">sliceHeader</span><span class="op" id="2768052">)</span><span class="op" id="2768053">(</span><span class="ident" id="2768054">v</span><span class="op" id="2768055">.</span><span class="ident" id="2768056">ptr</span><span class="op" id="2768059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768062">if</span>&nbsp;<span class="ident" id="2768065">n</span>&nbsp;<span class="op" id="2768067">&lt;</span>&nbsp;<span class="builtintype" id="2768069">int</span><span class="op" id="2768072">(</span><span class="ident" id="2768073">s</span><span class="op" id="2768074">.</span><span class="ident" id="2768075">Len</span><span class="op" id="2768078">)</span>&nbsp;<span class="op" id="2768080">||</span>&nbsp;<span class="ident" id="2768083">n</span>&nbsp;<span class="op" id="2768085">&gt;</span>&nbsp;<span class="builtintype" id="2768087">int</span><span class="op" id="2768090">(</span><span class="ident" id="2768091">s</span><span class="op" id="2768092">.</span><span class="ident" id="2768093">Cap</span><span class="op" id="2768096">)</span>&nbsp;<span class="op" id="2768098">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2768102">panic</span><span class="op" id="2768107">(</span><span class="string" id="2768108">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2768156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768162">s</span><span class="op" id="2768163">.</span><span class="ident" id="2768164">Cap</span>&nbsp;<span class="op" id="2768168">=</span>&nbsp;<span class="ident" id="2768170">n</span><br>
<span class="lineno"></span><span class="op" id="2768172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2768175">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2768246">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2768283">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2768354">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2768413">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2768480">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2768543">func</span>&nbsp;<span class="op" id="2768548">(</span><span class="ident" id="2768549">v</span>&nbsp;<span class="ident" id="2768551">Value</span><span class="op" id="2768556">)</span>&nbsp;<span class="ident" id="2768558">SetMapIndex</span><span class="op" id="2768569">(</span><span class="ident" id="2768570">key</span><span class="op" id="2768573">,</span>&nbsp;<span class="ident" id="2768575">val</span>&nbsp;<span class="ident" id="2768579">Value</span><span class="op" id="2768584">)</span>&nbsp;<span class="op" id="2768586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768589">v</span><span class="op" id="2768590">.</span><span class="ident" id="2768591">mustBe</span><span class="op" id="2768597">(</span><span class="ident" id="2768598">Map</span><span class="op" id="2768601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768604">v</span><span class="op" id="2768605">.</span><span class="ident" id="2768606">mustBeExported</span><span class="op" id="2768620">(</span><span class="op" id="2768621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768624">key</span><span class="op" id="2768627">.</span><span class="ident" id="2768628">mustBeExported</span><span class="op" id="2768642">(</span><span class="op" id="2768643">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768646">tt</span>&nbsp;<span class="op" id="2768649">:=</span>&nbsp;<span class="op" id="2768652">(</span><span class="op" id="2768653">*</span><span class="ident" id="2768654">mapType</span><span class="op" id="2768661">)</span><span class="op" id="2768662">(</span><span class="ident" id="2768663">unsafe</span><span class="op" id="2768669">.</span><span class="ident" id="2768670">Pointer</span><span class="op" id="2768677">(</span><span class="ident" id="2768678">v</span><span class="op" id="2768679">.</span><span class="ident" id="2768680">typ</span><span class="op" id="2768683">)</span><span class="op" id="2768684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768687">key</span>&nbsp;<span class="op" id="2768691">=</span>&nbsp;<span class="ident" id="2768693">key</span><span class="op" id="2768696">.</span><span class="ident" id="2768697">assignTo</span><span class="op" id="2768705">(</span><span class="string" id="2768706">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2768733">,</span>&nbsp;<span class="ident" id="2768735">tt</span><span class="op" id="2768737">.</span><span class="ident" id="2768738">key</span><span class="op" id="2768741">,</span>&nbsp;<span class="builtintype" id="2768743">nil</span><span class="op" id="2768746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768749">var</span>&nbsp;<span class="ident" id="2768753">k</span>&nbsp;<span class="ident" id="2768755">unsafe</span><span class="op" id="2768761">.</span><span class="ident" id="2768762">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768771">if</span>&nbsp;<span class="ident" id="2768774">key</span><span class="op" id="2768777">.</span><span class="ident" id="2768778">flag</span><span class="op" id="2768782">&amp;</span><span class="ident" id="2768783">flagIndir</span>&nbsp;<span class="op" id="2768793">!=</span>&nbsp;<span class="num" id="2768796">0</span>&nbsp;<span class="op" id="2768798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768802">k</span>&nbsp;<span class="op" id="2768804">=</span>&nbsp;<span class="ident" id="2768806">key</span><span class="op" id="2768809">.</span><span class="ident" id="2768810">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768815">}</span>&nbsp;<span class="keyword" id="2768817">else</span>&nbsp;<span class="op" id="2768822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768826">k</span>&nbsp;<span class="op" id="2768828">=</span>&nbsp;<span class="ident" id="2768830">unsafe</span><span class="op" id="2768836">.</span><span class="ident" id="2768837">Pointer</span><span class="op" id="2768844">(</span><span class="op" id="2768845">&amp;</span><span class="ident" id="2768846">key</span><span class="op" id="2768849">.</span><span class="ident" id="2768850">ptr</span><span class="op" id="2768853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768859">if</span>&nbsp;<span class="ident" id="2768862">val</span><span class="op" id="2768865">.</span><span class="ident" id="2768866">typ</span>&nbsp;<span class="op" id="2768870">==</span>&nbsp;<span class="builtintype" id="2768873">nil</span>&nbsp;<span class="op" id="2768877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768881">mapdelete</span><span class="op" id="2768890">(</span><span class="ident" id="2768891">v</span><span class="op" id="2768892">.</span><span class="ident" id="2768893">typ</span><span class="op" id="2768896">,</span>&nbsp;<span class="ident" id="2768898">v</span><span class="op" id="2768899">.</span><span class="ident" id="2768900">pointer</span><span class="op" id="2768907">(</span><span class="op" id="2768908">)</span><span class="op" id="2768909">,</span>&nbsp;<span class="ident" id="2768911">k</span><span class="op" id="2768912">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2768916">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2768924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768927">val</span><span class="op" id="2768930">.</span><span class="ident" id="2768931">mustBeExported</span><span class="op" id="2768945">(</span><span class="op" id="2768946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2768949">val</span>&nbsp;<span class="op" id="2768953">=</span>&nbsp;<span class="ident" id="2768955">val</span><span class="op" id="2768958">.</span><span class="ident" id="2768959">assignTo</span><span class="op" id="2768967">(</span><span class="string" id="2768968">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2768995">,</span>&nbsp;<span class="ident" id="2768997">tt</span><span class="op" id="2768999">.</span><span class="ident" id="2769000">elem</span><span class="op" id="2769004">,</span>&nbsp;<span class="builtintype" id="2769006">nil</span><span class="op" id="2769009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769012">var</span>&nbsp;<span class="ident" id="2769016">e</span>&nbsp;<span class="ident" id="2769018">unsafe</span><span class="op" id="2769024">.</span><span class="ident" id="2769025">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769034">if</span>&nbsp;<span class="ident" id="2769037">val</span><span class="op" id="2769040">.</span><span class="ident" id="2769041">flag</span><span class="op" id="2769045">&amp;</span><span class="ident" id="2769046">flagIndir</span>&nbsp;<span class="op" id="2769056">!=</span>&nbsp;<span class="num" id="2769059">0</span>&nbsp;<span class="op" id="2769061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769065">e</span>&nbsp;<span class="op" id="2769067">=</span>&nbsp;<span class="ident" id="2769069">val</span><span class="op" id="2769072">.</span><span class="ident" id="2769073">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769078">}</span>&nbsp;<span class="keyword" id="2769080">else</span>&nbsp;<span class="op" id="2769085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769089">e</span>&nbsp;<span class="op" id="2769091">=</span>&nbsp;<span class="ident" id="2769093">unsafe</span><span class="op" id="2769099">.</span><span class="ident" id="2769100">Pointer</span><span class="op" id="2769107">(</span><span class="op" id="2769108">&amp;</span><span class="ident" id="2769109">val</span><span class="op" id="2769112">.</span><span class="ident" id="2769113">ptr</span><span class="op" id="2769116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769119">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769122">mapassign</span><span class="op" id="2769131">(</span><span class="ident" id="2769132">v</span><span class="op" id="2769133">.</span><span class="ident" id="2769134">typ</span><span class="op" id="2769137">,</span>&nbsp;<span class="ident" id="2769139">v</span><span class="op" id="2769140">.</span><span class="ident" id="2769141">pointer</span><span class="op" id="2769148">(</span><span class="op" id="2769149">)</span><span class="op" id="2769150">,</span>&nbsp;<span class="ident" id="2769152">k</span><span class="op" id="2769153">,</span>&nbsp;<span class="ident" id="2769155">e</span><span class="op" id="2769156">)</span><br>
<span class="lineno"></span><span class="op" id="2769158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769161">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2769204">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2769310">func</span>&nbsp;<span class="op" id="2769315">(</span><span class="ident" id="2769316">v</span>&nbsp;<span class="ident" id="2769318">Value</span><span class="op" id="2769323">)</span>&nbsp;<span class="ident" id="2769325">SetUint</span><span class="op" id="2769332">(</span><span class="ident" id="2769333">x</span>&nbsp;<span class="ident" id="2769335">uint64</span><span class="op" id="2769341">)</span>&nbsp;<span class="op" id="2769343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769346">v</span><span class="op" id="2769347">.</span><span class="ident" id="2769348">mustBeAssignable</span><span class="op" id="2769364">(</span><span class="op" id="2769365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769368">switch</span>&nbsp;<span class="ident" id="2769375">k</span>&nbsp;<span class="op" id="2769377">:=</span>&nbsp;<span class="ident" id="2769380">v</span><span class="op" id="2769381">.</span><span class="ident" id="2769382">kind</span><span class="op" id="2769386">(</span><span class="op" id="2769387">)</span><span class="op" id="2769388">;</span>&nbsp;<span class="ident" id="2769390">k</span>&nbsp;<span class="op" id="2769392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769395">default</span><span class="op" id="2769402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2769406">panic</span><span class="op" id="2769411">(</span><span class="op" id="2769412">&amp;</span><span class="ident" id="2769413">ValueError</span><span class="op" id="2769423">{</span><span class="string" id="2769424">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2769447">,</span>&nbsp;<span class="ident" id="2769449">v</span><span class="op" id="2769450">.</span><span class="ident" id="2769451">kind</span><span class="op" id="2769455">(</span><span class="op" id="2769456">)</span><span class="op" id="2769457">}</span><span class="op" id="2769458">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769461">case</span>&nbsp;<span class="ident" id="2769466">Uint</span><span class="op" id="2769470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769474">*</span><span class="op" id="2769475">(</span><span class="op" id="2769476">*</span><span class="builtintype" id="2769477">uint</span><span class="op" id="2769481">)</span><span class="op" id="2769482">(</span><span class="ident" id="2769483">v</span><span class="op" id="2769484">.</span><span class="ident" id="2769485">ptr</span><span class="op" id="2769488">)</span>&nbsp;<span class="op" id="2769490">=</span>&nbsp;<span class="builtintype" id="2769492">uint</span><span class="op" id="2769496">(</span><span class="ident" id="2769497">x</span><span class="op" id="2769498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769501">case</span>&nbsp;<span class="ident" id="2769506">Uint8</span><span class="op" id="2769511">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769515">*</span><span class="op" id="2769516">(</span><span class="op" id="2769517">*</span><span class="builtintype" id="2769518">uint8</span><span class="op" id="2769523">)</span><span class="op" id="2769524">(</span><span class="ident" id="2769525">v</span><span class="op" id="2769526">.</span><span class="ident" id="2769527">ptr</span><span class="op" id="2769530">)</span>&nbsp;<span class="op" id="2769532">=</span>&nbsp;<span class="builtintype" id="2769534">uint8</span><span class="op" id="2769539">(</span><span class="ident" id="2769540">x</span><span class="op" id="2769541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769544">case</span>&nbsp;<span class="ident" id="2769549">Uint16</span><span class="op" id="2769555">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769559">*</span><span class="op" id="2769560">(</span><span class="op" id="2769561">*</span><span class="builtintype" id="2769562">uint16</span><span class="op" id="2769568">)</span><span class="op" id="2769569">(</span><span class="ident" id="2769570">v</span><span class="op" id="2769571">.</span><span class="ident" id="2769572">ptr</span><span class="op" id="2769575">)</span>&nbsp;<span class="op" id="2769577">=</span>&nbsp;<span class="builtintype" id="2769579">uint16</span><span class="op" id="2769585">(</span><span class="ident" id="2769586">x</span><span class="op" id="2769587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769590">case</span>&nbsp;<span class="ident" id="2769595">Uint32</span><span class="op" id="2769601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769605">*</span><span class="op" id="2769606">(</span><span class="op" id="2769607">*</span><span class="builtintype" id="2769608">uint32</span><span class="op" id="2769614">)</span><span class="op" id="2769615">(</span><span class="ident" id="2769616">v</span><span class="op" id="2769617">.</span><span class="ident" id="2769618">ptr</span><span class="op" id="2769621">)</span>&nbsp;<span class="op" id="2769623">=</span>&nbsp;<span class="builtintype" id="2769625">uint32</span><span class="op" id="2769631">(</span><span class="ident" id="2769632">x</span><span class="op" id="2769633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769636">case</span>&nbsp;<span class="ident" id="2769641">Uint64</span><span class="op" id="2769647">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769651">*</span><span class="op" id="2769652">(</span><span class="op" id="2769653">*</span><span class="ident" id="2769654">uint64</span><span class="op" id="2769660">)</span><span class="op" id="2769661">(</span><span class="ident" id="2769662">v</span><span class="op" id="2769663">.</span><span class="ident" id="2769664">ptr</span><span class="op" id="2769667">)</span>&nbsp;<span class="op" id="2769669">=</span>&nbsp;<span class="ident" id="2769671">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2769674">case</span>&nbsp;<span class="ident" id="2769679">Uintptr</span><span class="op" id="2769686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769690">*</span><span class="op" id="2769691">(</span><span class="op" id="2769692">*</span><span class="builtintype" id="2769693">uintptr</span><span class="op" id="2769700">)</span><span class="op" id="2769701">(</span><span class="ident" id="2769702">v</span><span class="op" id="2769703">.</span><span class="ident" id="2769704">ptr</span><span class="op" id="2769707">)</span>&nbsp;<span class="op" id="2769709">=</span>&nbsp;<span class="builtintype" id="2769711">uintptr</span><span class="op" id="2769718">(</span><span class="ident" id="2769719">x</span><span class="op" id="2769720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769723">}</span><br>
<span class="lineno"></span><span class="op" id="2769725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2769728">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2769780">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2769827">func</span>&nbsp;<span class="op" id="2769832">(</span><span class="ident" id="2769833">v</span>&nbsp;<span class="ident" id="2769835">Value</span><span class="op" id="2769840">)</span>&nbsp;<span class="ident" id="2769842">SetPointer</span><span class="op" id="2769852">(</span><span class="ident" id="2769853">x</span>&nbsp;<span class="ident" id="2769855">unsafe</span><span class="op" id="2769861">.</span><span class="ident" id="2769862">Pointer</span><span class="op" id="2769869">)</span>&nbsp;<span class="op" id="2769871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769874">v</span><span class="op" id="2769875">.</span><span class="ident" id="2769876">mustBeAssignable</span><span class="op" id="2769892">(</span><span class="op" id="2769893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2769896">v</span><span class="op" id="2769897">.</span><span class="ident" id="2769898">mustBe</span><span class="op" id="2769904">(</span><span class="ident" id="2769905">UnsafePointer</span><span class="op" id="2769918">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2769921">*</span><span class="op" id="2769922">(</span><span class="op" id="2769923">*</span><span class="ident" id="2769924">unsafe</span><span class="op" id="2769930">.</span><span class="ident" id="2769931">Pointer</span><span class="op" id="2769938">)</span><span class="op" id="2769939">(</span><span class="ident" id="2769940">v</span><span class="op" id="2769941">.</span><span class="ident" id="2769942">ptr</span><span class="op" id="2769945">)</span>&nbsp;<span class="op" id="2769947">=</span>&nbsp;<span class="ident" id="2769949">x</span><br>
<span class="lineno"></span><span class="op" id="2769951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769954">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2769999">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2770063">func</span>&nbsp;<span class="op" id="2770068">(</span><span class="ident" id="2770069">v</span>&nbsp;<span class="ident" id="2770071">Value</span><span class="op" id="2770076">)</span>&nbsp;<span class="ident" id="2770078">SetString</span><span class="op" id="2770087">(</span><span class="ident" id="2770088">x</span>&nbsp;<span class="builtintype" id="2770090">string</span><span class="op" id="2770096">)</span>&nbsp;<span class="op" id="2770098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770101">v</span><span class="op" id="2770102">.</span><span class="ident" id="2770103">mustBeAssignable</span><span class="op" id="2770119">(</span><span class="op" id="2770120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770123">v</span><span class="op" id="2770124">.</span><span class="ident" id="2770125">mustBe</span><span class="op" id="2770131">(</span><span class="ident" id="2770132">String</span><span class="op" id="2770138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770141">*</span><span class="op" id="2770142">(</span><span class="op" id="2770143">*</span><span class="builtintype" id="2770144">string</span><span class="op" id="2770150">)</span><span class="op" id="2770151">(</span><span class="ident" id="2770152">v</span><span class="op" id="2770153">.</span><span class="ident" id="2770154">ptr</span><span class="op" id="2770157">)</span>&nbsp;<span class="op" id="2770159">=</span>&nbsp;<span class="ident" id="2770161">x</span><br>
<span class="lineno"></span><span class="op" id="2770163">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2770166">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2770191">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2770282">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2770322">func</span>&nbsp;<span class="op" id="2770327">(</span><span class="ident" id="2770328">v</span>&nbsp;<span class="ident" id="2770330">Value</span><span class="op" id="2770335">)</span>&nbsp;<span class="ident" id="2770337">Slice</span><span class="op" id="2770342">(</span><span class="ident" id="2770343">i</span><span class="op" id="2770344">,</span>&nbsp;<span class="ident" id="2770346">j</span>&nbsp;<span class="builtintype" id="2770348">int</span><span class="op" id="2770351">)</span>&nbsp;<span class="ident" id="2770353">Value</span>&nbsp;<span class="op" id="2770359">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770362">var</span>&nbsp;<span class="op" id="2770366">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770370">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2770375">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770381">typ</span>&nbsp;&nbsp;<span class="op" id="2770386">*</span><span class="ident" id="2770387">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770399">base</span>&nbsp;<span class="ident" id="2770404">unsafe</span><span class="op" id="2770410">.</span><span class="ident" id="2770411">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770420">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770423">switch</span>&nbsp;<span class="ident" id="2770430">kind</span>&nbsp;<span class="op" id="2770435">:=</span>&nbsp;<span class="ident" id="2770438">v</span><span class="op" id="2770439">.</span><span class="ident" id="2770440">kind</span><span class="op" id="2770444">(</span><span class="op" id="2770445">)</span><span class="op" id="2770446">;</span>&nbsp;<span class="ident" id="2770448">kind</span>&nbsp;<span class="op" id="2770453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770456">default</span><span class="op" id="2770463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770467">panic</span><span class="op" id="2770472">(</span><span class="op" id="2770473">&amp;</span><span class="ident" id="2770474">ValueError</span><span class="op" id="2770484">{</span><span class="string" id="2770485">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2770506">,</span>&nbsp;<span class="ident" id="2770508">v</span><span class="op" id="2770509">.</span><span class="ident" id="2770510">kind</span><span class="op" id="2770514">(</span><span class="op" id="2770515">)</span><span class="op" id="2770516">}</span><span class="op" id="2770517">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770521">case</span>&nbsp;<span class="ident" id="2770526">Array</span><span class="op" id="2770531">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770535">if</span>&nbsp;<span class="ident" id="2770538">v</span><span class="op" id="2770539">.</span><span class="ident" id="2770540">flag</span><span class="op" id="2770544">&amp;</span><span class="ident" id="2770545">flagAddr</span>&nbsp;<span class="op" id="2770554">==</span>&nbsp;<span class="num" id="2770557">0</span>&nbsp;<span class="op" id="2770559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770564">panic</span><span class="op" id="2770569">(</span><span class="string" id="2770570">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2770621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2770625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770629">tt</span>&nbsp;<span class="op" id="2770632">:=</span>&nbsp;<span class="op" id="2770635">(</span><span class="op" id="2770636">*</span><span class="ident" id="2770637">arrayType</span><span class="op" id="2770646">)</span><span class="op" id="2770647">(</span><span class="ident" id="2770648">unsafe</span><span class="op" id="2770654">.</span><span class="ident" id="2770655">Pointer</span><span class="op" id="2770662">(</span><span class="ident" id="2770663">v</span><span class="op" id="2770664">.</span><span class="ident" id="2770665">typ</span><span class="op" id="2770668">)</span><span class="op" id="2770669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770673">cap</span>&nbsp;<span class="op" id="2770677">=</span>&nbsp;<span class="builtintype" id="2770679">int</span><span class="op" id="2770682">(</span><span class="ident" id="2770683">tt</span><span class="op" id="2770685">.</span><span class="builtinfunc" id="2770686">len</span><span class="op" id="2770689">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770693">typ</span>&nbsp;<span class="op" id="2770697">=</span>&nbsp;<span class="op" id="2770699">(</span><span class="op" id="2770700">*</span><span class="ident" id="2770701">sliceType</span><span class="op" id="2770710">)</span><span class="op" id="2770711">(</span><span class="ident" id="2770712">unsafe</span><span class="op" id="2770718">.</span><span class="ident" id="2770719">Pointer</span><span class="op" id="2770726">(</span><span class="ident" id="2770727">tt</span><span class="op" id="2770729">.</span><span class="ident" id="2770730">slice</span><span class="op" id="2770735">)</span><span class="op" id="2770736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770740">base</span>&nbsp;<span class="op" id="2770745">=</span>&nbsp;<span class="ident" id="2770747">v</span><span class="op" id="2770748">.</span><span class="ident" id="2770749">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770755">case</span>&nbsp;<span class="ident" id="2770760">Slice</span><span class="op" id="2770765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770769">typ</span>&nbsp;<span class="op" id="2770773">=</span>&nbsp;<span class="op" id="2770775">(</span><span class="op" id="2770776">*</span><span class="ident" id="2770777">sliceType</span><span class="op" id="2770786">)</span><span class="op" id="2770787">(</span><span class="ident" id="2770788">unsafe</span><span class="op" id="2770794">.</span><span class="ident" id="2770795">Pointer</span><span class="op" id="2770802">(</span><span class="ident" id="2770803">v</span><span class="op" id="2770804">.</span><span class="ident" id="2770805">typ</span><span class="op" id="2770808">)</span><span class="op" id="2770809">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770813">s</span>&nbsp;<span class="op" id="2770815">:=</span>&nbsp;<span class="op" id="2770818">(</span><span class="op" id="2770819">*</span><span class="ident" id="2770820">sliceHeader</span><span class="op" id="2770831">)</span><span class="op" id="2770832">(</span><span class="ident" id="2770833">v</span><span class="op" id="2770834">.</span><span class="ident" id="2770835">ptr</span><span class="op" id="2770838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770842">base</span>&nbsp;<span class="op" id="2770847">=</span>&nbsp;<span class="ident" id="2770849">unsafe</span><span class="op" id="2770855">.</span><span class="ident" id="2770856">Pointer</span><span class="op" id="2770863">(</span><span class="ident" id="2770864">s</span><span class="op" id="2770865">.</span><span class="ident" id="2770866">Data</span><span class="op" id="2770870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770874">cap</span>&nbsp;<span class="op" id="2770878">=</span>&nbsp;<span class="ident" id="2770880">s</span><span class="op" id="2770881">.</span><span class="ident" id="2770882">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770888">case</span>&nbsp;<span class="ident" id="2770893">String</span><span class="op" id="2770899">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2770903">s</span>&nbsp;<span class="op" id="2770905">:=</span>&nbsp;<span class="op" id="2770908">(</span><span class="op" id="2770909">*</span><span class="ident" id="2770910">stringHeader</span><span class="op" id="2770922">)</span><span class="op" id="2770923">(</span><span class="ident" id="2770924">v</span><span class="op" id="2770925">.</span><span class="ident" id="2770926">ptr</span><span class="op" id="2770929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2770933">if</span>&nbsp;<span class="ident" id="2770936">i</span>&nbsp;<span class="op" id="2770938">&lt;</span>&nbsp;<span class="num" id="2770940">0</span>&nbsp;<span class="op" id="2770942">||</span>&nbsp;<span class="ident" id="2770945">j</span>&nbsp;<span class="op" id="2770947">&lt;</span>&nbsp;<span class="ident" id="2770949">i</span>&nbsp;<span class="op" id="2770951">||</span>&nbsp;<span class="ident" id="2770954">j</span>&nbsp;<span class="op" id="2770956">&gt;</span>&nbsp;<span class="ident" id="2770958">s</span><span class="op" id="2770959">.</span><span class="ident" id="2770960">Len</span>&nbsp;<span class="op" id="2770964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2770969">panic</span><span class="op" id="2770974">(</span><span class="string" id="2770975">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2771030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771038">t</span>&nbsp;<span class="op" id="2771040">:=</span>&nbsp;<span class="ident" id="2771043">stringHeader</span><span class="op" id="2771055">{</span><span class="ident" id="2771056">unsafe</span><span class="op" id="2771062">.</span><span class="ident" id="2771063">Pointer</span><span class="op" id="2771070">(</span><span class="builtintype" id="2771071">uintptr</span><span class="op" id="2771078">(</span><span class="ident" id="2771079">s</span><span class="op" id="2771080">.</span><span class="ident" id="2771081">Data</span><span class="op" id="2771085">)</span>&nbsp;<span class="op" id="2771087">+</span>&nbsp;<span class="builtintype" id="2771089">uintptr</span><span class="op" id="2771096">(</span><span class="ident" id="2771097">i</span><span class="op" id="2771098">)</span><span class="op" id="2771099">)</span><span class="op" id="2771100">,</span>&nbsp;<span class="ident" id="2771102">j</span>&nbsp;<span class="op" id="2771104">-</span>&nbsp;<span class="ident" id="2771106">i</span><span class="op" id="2771107">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771111">return</span>&nbsp;<span class="ident" id="2771118">Value</span><span class="op" id="2771123">{</span><span class="ident" id="2771124">v</span><span class="op" id="2771125">.</span><span class="ident" id="2771126">typ</span><span class="op" id="2771129">,</span>&nbsp;<span class="ident" id="2771131">unsafe</span><span class="op" id="2771137">.</span><span class="ident" id="2771138">Pointer</span><span class="op" id="2771145">(</span><span class="op" id="2771146">&amp;</span><span class="ident" id="2771147">t</span><span class="op" id="2771148">)</span><span class="op" id="2771149">,</span>&nbsp;<span class="ident" id="2771151">v</span><span class="op" id="2771152">.</span><span class="ident" id="2771153">flag</span><span class="op" id="2771157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771164">if</span>&nbsp;<span class="ident" id="2771167">i</span>&nbsp;<span class="op" id="2771169">&lt;</span>&nbsp;<span class="num" id="2771171">0</span>&nbsp;<span class="op" id="2771173">||</span>&nbsp;<span class="ident" id="2771176">j</span>&nbsp;<span class="op" id="2771178">&lt;</span>&nbsp;<span class="ident" id="2771180">i</span>&nbsp;<span class="op" id="2771182">||</span>&nbsp;<span class="ident" id="2771185">j</span>&nbsp;<span class="op" id="2771187">&gt;</span>&nbsp;<span class="builtinfunc" id="2771189">cap</span>&nbsp;<span class="op" id="2771193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2771197">panic</span><span class="op" id="2771202">(</span><span class="string" id="2771203">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2771251">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771258">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771319">var</span>&nbsp;<span class="ident" id="2771323">x</span>&nbsp;<span class="op" id="2771325">[</span><span class="op" id="2771326">]</span><span class="ident" id="2771327">unsafe</span><span class="op" id="2771333">.</span><span class="ident" id="2771334">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771344">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771385">s</span>&nbsp;<span class="op" id="2771387">:=</span>&nbsp;<span class="op" id="2771390">(</span><span class="op" id="2771391">*</span><span class="ident" id="2771392">sliceHeader</span><span class="op" id="2771403">)</span><span class="op" id="2771404">(</span><span class="ident" id="2771405">unsafe</span><span class="op" id="2771411">.</span><span class="ident" id="2771412">Pointer</span><span class="op" id="2771419">(</span><span class="op" id="2771420">&amp;</span><span class="ident" id="2771421">x</span><span class="op" id="2771422">)</span><span class="op" id="2771423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771426">s</span><span class="op" id="2771427">.</span><span class="ident" id="2771428">Len</span>&nbsp;<span class="op" id="2771432">=</span>&nbsp;<span class="ident" id="2771434">j</span>&nbsp;<span class="op" id="2771436">-</span>&nbsp;<span class="ident" id="2771438">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771441">s</span><span class="op" id="2771442">.</span><span class="ident" id="2771443">Cap</span>&nbsp;<span class="op" id="2771447">=</span>&nbsp;<span class="builtinfunc" id="2771449">cap</span>&nbsp;<span class="op" id="2771453">-</span>&nbsp;<span class="ident" id="2771455">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771458">if</span>&nbsp;<span class="builtinfunc" id="2771461">cap</span><span class="op" id="2771464">-</span><span class="ident" id="2771465">i</span>&nbsp;<span class="op" id="2771467">&gt;</span>&nbsp;<span class="num" id="2771469">0</span>&nbsp;<span class="op" id="2771471">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771475">s</span><span class="op" id="2771476">.</span><span class="ident" id="2771477">Data</span>&nbsp;<span class="op" id="2771482">=</span>&nbsp;<span class="ident" id="2771484">unsafe</span><span class="op" id="2771490">.</span><span class="ident" id="2771491">Pointer</span><span class="op" id="2771498">(</span><span class="builtintype" id="2771499">uintptr</span><span class="op" id="2771506">(</span><span class="ident" id="2771507">base</span><span class="op" id="2771511">)</span>&nbsp;<span class="op" id="2771513">+</span>&nbsp;<span class="builtintype" id="2771515">uintptr</span><span class="op" id="2771522">(</span><span class="ident" id="2771523">i</span><span class="op" id="2771524">)</span><span class="op" id="2771525">*</span><span class="ident" id="2771526">typ</span><span class="op" id="2771529">.</span><span class="ident" id="2771530">elem</span><span class="op" id="2771534">.</span><span class="ident" id="2771535">Size</span><span class="op" id="2771539">(</span><span class="op" id="2771540">)</span><span class="op" id="2771541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771544">}</span>&nbsp;<span class="keyword" id="2771546">else</span>&nbsp;<span class="op" id="2771551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771555">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771622">s</span><span class="op" id="2771623">.</span><span class="ident" id="2771624">Data</span>&nbsp;<span class="op" id="2771629">=</span>&nbsp;<span class="ident" id="2771631">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2771637">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771641">fl</span>&nbsp;<span class="op" id="2771644">:=</span>&nbsp;<span class="ident" id="2771647">v</span><span class="op" id="2771648">.</span><span class="ident" id="2771649">flag</span><span class="op" id="2771653">&amp;</span><span class="ident" id="2771654">flagRO</span>&nbsp;<span class="op" id="2771661">|</span>&nbsp;<span class="ident" id="2771663">flagIndir</span>&nbsp;<span class="op" id="2771673">|</span>&nbsp;<span class="ident" id="2771675">flag</span><span class="op" id="2771679">(</span><span class="ident" id="2771680">Slice</span><span class="op" id="2771685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771688">return</span>&nbsp;<span class="ident" id="2771695">Value</span><span class="op" id="2771700">{</span><span class="ident" id="2771701">typ</span><span class="op" id="2771704">.</span><span class="ident" id="2771705">common</span><span class="op" id="2771711">(</span><span class="op" id="2771712">)</span><span class="op" id="2771713">,</span>&nbsp;<span class="ident" id="2771715">unsafe</span><span class="op" id="2771721">.</span><span class="ident" id="2771722">Pointer</span><span class="op" id="2771729">(</span><span class="op" id="2771730">&amp;</span><span class="ident" id="2771731">x</span><span class="op" id="2771732">)</span><span class="op" id="2771733">,</span>&nbsp;<span class="ident" id="2771735">fl</span><span class="op" id="2771737">}</span><br>
<span class="lineno"></span><span class="op" id="2771739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2771742">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2771817">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2771900">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2771940">func</span>&nbsp;<span class="op" id="2771945">(</span><span class="ident" id="2771946">v</span>&nbsp;<span class="ident" id="2771948">Value</span><span class="op" id="2771953">)</span>&nbsp;<span class="ident" id="2771955">Slice3</span><span class="op" id="2771961">(</span><span class="ident" id="2771962">i</span><span class="op" id="2771963">,</span>&nbsp;<span class="ident" id="2771965">j</span><span class="op" id="2771966">,</span>&nbsp;<span class="ident" id="2771968">k</span>&nbsp;<span class="builtintype" id="2771970">int</span><span class="op" id="2771973">)</span>&nbsp;<span class="ident" id="2771975">Value</span>&nbsp;<span class="op" id="2771981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2771984">var</span>&nbsp;<span class="op" id="2771988">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2771992">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2771997">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772003">typ</span>&nbsp;&nbsp;<span class="op" id="2772008">*</span><span class="ident" id="2772009">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772021">base</span>&nbsp;<span class="ident" id="2772026">unsafe</span><span class="op" id="2772032">.</span><span class="ident" id="2772033">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772045">switch</span>&nbsp;<span class="ident" id="2772052">kind</span>&nbsp;<span class="op" id="2772057">:=</span>&nbsp;<span class="ident" id="2772060">v</span><span class="op" id="2772061">.</span><span class="ident" id="2772062">kind</span><span class="op" id="2772066">(</span><span class="op" id="2772067">)</span><span class="op" id="2772068">;</span>&nbsp;<span class="ident" id="2772070">kind</span>&nbsp;<span class="op" id="2772075">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772078">default</span><span class="op" id="2772085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772089">panic</span><span class="op" id="2772094">(</span><span class="op" id="2772095">&amp;</span><span class="ident" id="2772096">ValueError</span><span class="op" id="2772106">{</span><span class="string" id="2772107">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2772129">,</span>&nbsp;<span class="ident" id="2772131">v</span><span class="op" id="2772132">.</span><span class="ident" id="2772133">kind</span><span class="op" id="2772137">(</span><span class="op" id="2772138">)</span><span class="op" id="2772139">}</span><span class="op" id="2772140">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772144">case</span>&nbsp;<span class="ident" id="2772149">Array</span><span class="op" id="2772154">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772158">if</span>&nbsp;<span class="ident" id="2772161">v</span><span class="op" id="2772162">.</span><span class="ident" id="2772163">flag</span><span class="op" id="2772167">&amp;</span><span class="ident" id="2772168">flagAddr</span>&nbsp;<span class="op" id="2772177">==</span>&nbsp;<span class="num" id="2772180">0</span>&nbsp;<span class="op" id="2772182">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772187">panic</span><span class="op" id="2772192">(</span><span class="string" id="2772193">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2772245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772253">tt</span>&nbsp;<span class="op" id="2772256">:=</span>&nbsp;<span class="op" id="2772259">(</span><span class="op" id="2772260">*</span><span class="ident" id="2772261">arrayType</span><span class="op" id="2772270">)</span><span class="op" id="2772271">(</span><span class="ident" id="2772272">unsafe</span><span class="op" id="2772278">.</span><span class="ident" id="2772279">Pointer</span><span class="op" id="2772286">(</span><span class="ident" id="2772287">v</span><span class="op" id="2772288">.</span><span class="ident" id="2772289">typ</span><span class="op" id="2772292">)</span><span class="op" id="2772293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772297">cap</span>&nbsp;<span class="op" id="2772301">=</span>&nbsp;<span class="builtintype" id="2772303">int</span><span class="op" id="2772306">(</span><span class="ident" id="2772307">tt</span><span class="op" id="2772309">.</span><span class="builtinfunc" id="2772310">len</span><span class="op" id="2772313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772317">typ</span>&nbsp;<span class="op" id="2772321">=</span>&nbsp;<span class="op" id="2772323">(</span><span class="op" id="2772324">*</span><span class="ident" id="2772325">sliceType</span><span class="op" id="2772334">)</span><span class="op" id="2772335">(</span><span class="ident" id="2772336">unsafe</span><span class="op" id="2772342">.</span><span class="ident" id="2772343">Pointer</span><span class="op" id="2772350">(</span><span class="ident" id="2772351">tt</span><span class="op" id="2772353">.</span><span class="ident" id="2772354">slice</span><span class="op" id="2772359">)</span><span class="op" id="2772360">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772364">base</span>&nbsp;<span class="op" id="2772369">=</span>&nbsp;<span class="ident" id="2772371">v</span><span class="op" id="2772372">.</span><span class="ident" id="2772373">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772379">case</span>&nbsp;<span class="ident" id="2772384">Slice</span><span class="op" id="2772389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772393">typ</span>&nbsp;<span class="op" id="2772397">=</span>&nbsp;<span class="op" id="2772399">(</span><span class="op" id="2772400">*</span><span class="ident" id="2772401">sliceType</span><span class="op" id="2772410">)</span><span class="op" id="2772411">(</span><span class="ident" id="2772412">unsafe</span><span class="op" id="2772418">.</span><span class="ident" id="2772419">Pointer</span><span class="op" id="2772426">(</span><span class="ident" id="2772427">v</span><span class="op" id="2772428">.</span><span class="ident" id="2772429">typ</span><span class="op" id="2772432">)</span><span class="op" id="2772433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772437">s</span>&nbsp;<span class="op" id="2772439">:=</span>&nbsp;<span class="op" id="2772442">(</span><span class="op" id="2772443">*</span><span class="ident" id="2772444">sliceHeader</span><span class="op" id="2772455">)</span><span class="op" id="2772456">(</span><span class="ident" id="2772457">v</span><span class="op" id="2772458">.</span><span class="ident" id="2772459">ptr</span><span class="op" id="2772462">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772466">base</span>&nbsp;<span class="op" id="2772471">=</span>&nbsp;<span class="ident" id="2772473">s</span><span class="op" id="2772474">.</span><span class="ident" id="2772475">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772482">cap</span>&nbsp;<span class="op" id="2772486">=</span>&nbsp;<span class="ident" id="2772488">s</span><span class="op" id="2772489">.</span><span class="ident" id="2772490">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772499">if</span>&nbsp;<span class="ident" id="2772502">i</span>&nbsp;<span class="op" id="2772504">&lt;</span>&nbsp;<span class="num" id="2772506">0</span>&nbsp;<span class="op" id="2772508">||</span>&nbsp;<span class="ident" id="2772511">j</span>&nbsp;<span class="op" id="2772513">&lt;</span>&nbsp;<span class="ident" id="2772515">i</span>&nbsp;<span class="op" id="2772517">||</span>&nbsp;<span class="ident" id="2772520">k</span>&nbsp;<span class="op" id="2772522">&lt;</span>&nbsp;<span class="ident" id="2772524">j</span>&nbsp;<span class="op" id="2772526">||</span>&nbsp;<span class="ident" id="2772529">k</span>&nbsp;<span class="op" id="2772531">&gt;</span>&nbsp;<span class="builtinfunc" id="2772533">cap</span>&nbsp;<span class="op" id="2772537">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2772541">panic</span><span class="op" id="2772546">(</span><span class="string" id="2772547">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2772596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772603">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772651">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772687">var</span>&nbsp;<span class="ident" id="2772691">x</span>&nbsp;<span class="op" id="2772693">[</span><span class="op" id="2772694">]</span><span class="ident" id="2772695">unsafe</span><span class="op" id="2772701">.</span><span class="ident" id="2772702">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772712">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772753">s</span>&nbsp;<span class="op" id="2772755">:=</span>&nbsp;<span class="op" id="2772758">(</span><span class="op" id="2772759">*</span><span class="ident" id="2772760">sliceHeader</span><span class="op" id="2772771">)</span><span class="op" id="2772772">(</span><span class="ident" id="2772773">unsafe</span><span class="op" id="2772779">.</span><span class="ident" id="2772780">Pointer</span><span class="op" id="2772787">(</span><span class="op" id="2772788">&amp;</span><span class="ident" id="2772789">x</span><span class="op" id="2772790">)</span><span class="op" id="2772791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772794">s</span><span class="op" id="2772795">.</span><span class="ident" id="2772796">Len</span>&nbsp;<span class="op" id="2772800">=</span>&nbsp;<span class="ident" id="2772802">j</span>&nbsp;<span class="op" id="2772804">-</span>&nbsp;<span class="ident" id="2772806">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772809">s</span><span class="op" id="2772810">.</span><span class="ident" id="2772811">Cap</span>&nbsp;<span class="op" id="2772815">=</span>&nbsp;<span class="ident" id="2772817">k</span>&nbsp;<span class="op" id="2772819">-</span>&nbsp;<span class="ident" id="2772821">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2772824">if</span>&nbsp;<span class="ident" id="2772827">k</span><span class="op" id="2772828">-</span><span class="ident" id="2772829">i</span>&nbsp;<span class="op" id="2772831">&gt;</span>&nbsp;<span class="num" id="2772833">0</span>&nbsp;<span class="op" id="2772835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772839">s</span><span class="op" id="2772840">.</span><span class="ident" id="2772841">Data</span>&nbsp;<span class="op" id="2772846">=</span>&nbsp;<span class="ident" id="2772848">unsafe</span><span class="op" id="2772854">.</span><span class="ident" id="2772855">Pointer</span><span class="op" id="2772862">(</span><span class="builtintype" id="2772863">uintptr</span><span class="op" id="2772870">(</span><span class="ident" id="2772871">base</span><span class="op" id="2772875">)</span>&nbsp;<span class="op" id="2772877">+</span>&nbsp;<span class="builtintype" id="2772879">uintptr</span><span class="op" id="2772886">(</span><span class="ident" id="2772887">i</span><span class="op" id="2772888">)</span><span class="op" id="2772889">*</span><span class="ident" id="2772890">typ</span><span class="op" id="2772893">.</span><span class="ident" id="2772894">elem</span><span class="op" id="2772898">.</span><span class="ident" id="2772899">Size</span><span class="op" id="2772903">(</span><span class="op" id="2772904">)</span><span class="op" id="2772905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2772908">}</span>&nbsp;<span class="keyword" id="2772910">else</span>&nbsp;<span class="op" id="2772915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772919">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2772986">s</span><span class="op" id="2772987">.</span><span class="ident" id="2772988">Data</span>&nbsp;<span class="op" id="2772993">=</span>&nbsp;<span class="ident" id="2772995">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2773001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2773005">fl</span>&nbsp;<span class="op" id="2773008">:=</span>&nbsp;<span class="ident" id="2773011">v</span><span class="op" id="2773012">.</span><span class="ident" id="2773013">flag</span><span class="op" id="2773017">&amp;</span><span class="ident" id="2773018">flagRO</span>&nbsp;<span class="op" id="2773025">|</span>&nbsp;<span class="ident" id="2773027">flagIndir</span>&nbsp;<span class="op" id="2773037">|</span>&nbsp;<span class="ident" id="2773039">flag</span><span class="op" id="2773043">(</span><span class="ident" id="2773044">Slice</span><span class="op" id="2773049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773052">return</span>&nbsp;<span class="ident" id="2773059">Value</span><span class="op" id="2773064">{</span><span class="ident" id="2773065">typ</span><span class="op" id="2773068">.</span><span class="ident" id="2773069">common</span><span class="op" id="2773075">(</span><span class="op" id="2773076">)</span><span class="op" id="2773077">,</span>&nbsp;<span class="ident" id="2773079">unsafe</span><span class="op" id="2773085">.</span><span class="ident" id="2773086">Pointer</span><span class="op" id="2773093">(</span><span class="op" id="2773094">&amp;</span><span class="ident" id="2773095">x</span><span class="op" id="2773096">)</span><span class="op" id="2773097">,</span>&nbsp;<span class="ident" id="2773099">fl</span><span class="op" id="2773101">}</span><br>
<span class="lineno">1590</span><span class="op" id="2773103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773106">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2773170">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2773240">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2773314">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2773391">func</span>&nbsp;<span class="op" id="2773396">(</span><span class="ident" id="2773397">v</span>&nbsp;<span class="ident" id="2773399">Value</span><span class="op" id="2773404">)</span>&nbsp;<span class="ident" id="2773406">String</span><span class="op" id="2773412">(</span><span class="op" id="2773413">)</span>&nbsp;<span class="builtintype" id="2773415">string</span>&nbsp;<span class="op" id="2773422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773425">switch</span>&nbsp;<span class="ident" id="2773432">k</span>&nbsp;<span class="op" id="2773434">:=</span>&nbsp;<span class="ident" id="2773437">v</span><span class="op" id="2773438">.</span><span class="ident" id="2773439">kind</span><span class="op" id="2773443">(</span><span class="op" id="2773444">)</span><span class="op" id="2773445">;</span>&nbsp;<span class="ident" id="2773447">k</span>&nbsp;<span class="op" id="2773449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773452">case</span>&nbsp;<span class="ident" id="2773457">Invalid</span><span class="op" id="2773464">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773468">return</span>&nbsp;<span class="string" id="2773475">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773494">case</span>&nbsp;<span class="ident" id="2773499">String</span><span class="op" id="2773505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773509">return</span>&nbsp;<span class="op" id="2773516">*</span><span class="op" id="2773517">(</span><span class="op" id="2773518">*</span><span class="builtintype" id="2773519">string</span><span class="op" id="2773525">)</span><span class="op" id="2773526">(</span><span class="ident" id="2773527">v</span><span class="op" id="2773528">.</span><span class="ident" id="2773529">ptr</span><span class="op" id="2773532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2773535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2773538">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2773610">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2773666">return</span>&nbsp;<span class="string" id="2773673">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2773677">+</span>&nbsp;<span class="ident" id="2773679">v</span><span class="op" id="2773680">.</span><span class="ident" id="2773681">Type</span><span class="op" id="2773685">(</span><span class="op" id="2773686">)</span><span class="op" id="2773687">.</span><span class="ident" id="2773688">String</span><span class="op" id="2773694">(</span><span class="op" id="2773695">)</span>&nbsp;<span class="op" id="2773697">+</span>&nbsp;<span class="string" id="2773699">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2773709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2773712">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2773790">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2773828">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2773907">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2773994">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2774091">func</span>&nbsp;<span class="op" id="2774096">(</span><span class="ident" id="2774097">v</span>&nbsp;<span class="ident" id="2774099">Value</span><span class="op" id="2774104">)</span>&nbsp;<span class="ident" id="2774106">TryRecv</span><span class="op" id="2774113">(</span><span class="op" id="2774114">)</span>&nbsp;<span class="op" id="2774116">(</span><span class="ident" id="2774117">x</span>&nbsp;<span class="ident" id="2774119">Value</span><span class="op" id="2774124">,</span>&nbsp;<span class="ident" id="2774126">ok</span>&nbsp;<span class="builtintype" id="2774129">bool</span><span class="op" id="2774133">)</span>&nbsp;<span class="op" id="2774135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774138">v</span><span class="op" id="2774139">.</span><span class="ident" id="2774140">mustBe</span><span class="op" id="2774146">(</span><span class="ident" id="2774147">Chan</span><span class="op" id="2774151">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774154">v</span><span class="op" id="2774155">.</span><span class="ident" id="2774156">mustBeExported</span><span class="op" id="2774170">(</span><span class="op" id="2774171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774174">return</span>&nbsp;<span class="ident" id="2774181">v</span><span class="op" id="2774182">.</span><span class="ident" id="2774183">recv</span><span class="op" id="2774187">(</span><span class="builtintype" id="2774188">true</span><span class="op" id="2774192">)</span><br>
<span class="lineno"></span><span class="op" id="2774194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774197">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2774264">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2774302">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2774361">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2774434">func</span>&nbsp;<span class="op" id="2774439">(</span><span class="ident" id="2774440">v</span>&nbsp;<span class="ident" id="2774442">Value</span><span class="op" id="2774447">)</span>&nbsp;<span class="ident" id="2774449">TrySend</span><span class="op" id="2774456">(</span><span class="ident" id="2774457">x</span>&nbsp;<span class="ident" id="2774459">Value</span><span class="op" id="2774464">)</span>&nbsp;<span class="builtintype" id="2774466">bool</span>&nbsp;<span class="op" id="2774471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774474">v</span><span class="op" id="2774475">.</span><span class="ident" id="2774476">mustBe</span><span class="op" id="2774482">(</span><span class="ident" id="2774483">Chan</span><span class="op" id="2774487">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774490">v</span><span class="op" id="2774491">.</span><span class="ident" id="2774492">mustBeExported</span><span class="op" id="2774506">(</span><span class="op" id="2774507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774510">return</span>&nbsp;<span class="ident" id="2774517">v</span><span class="op" id="2774518">.</span><span class="ident" id="2774519">send</span><span class="op" id="2774523">(</span><span class="ident" id="2774524">x</span><span class="op" id="2774525">,</span>&nbsp;<span class="builtintype" id="2774527">true</span><span class="op" id="2774531">)</span><br>
<span class="lineno"></span><span class="op" id="2774533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2774536">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2774562">func</span>&nbsp;<span class="op" id="2774567">(</span><span class="ident" id="2774568">v</span>&nbsp;<span class="ident" id="2774570">Value</span><span class="op" id="2774575">)</span>&nbsp;<span class="ident" id="2774577">Type</span><span class="op" id="2774581">(</span><span class="op" id="2774582">)</span>&nbsp;<span class="ident" id="2774584">Type</span>&nbsp;<span class="op" id="2774589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774592">f</span>&nbsp;<span class="op" id="2774594">:=</span>&nbsp;<span class="ident" id="2774597">v</span><span class="op" id="2774598">.</span><span class="ident" id="2774599">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774605">if</span>&nbsp;<span class="ident" id="2774608">f</span>&nbsp;<span class="op" id="2774610">==</span>&nbsp;<span class="num" id="2774613">0</span>&nbsp;<span class="op" id="2774615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2774619">panic</span><span class="op" id="2774624">(</span><span class="op" id="2774625">&amp;</span><span class="ident" id="2774626">ValueError</span><span class="op" id="2774636">{</span><span class="string" id="2774637">&#34;reflect.Value.Type&#34;</span><span class="op" id="2774657">,</span>&nbsp;<span class="ident" id="2774659">Invalid</span><span class="op" id="2774666">}</span><span class="op" id="2774667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2774670">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774673">if</span>&nbsp;<span class="ident" id="2774676">f</span><span class="op" id="2774677">&amp;</span><span class="ident" id="2774678">flagMethod</span>&nbsp;<span class="op" id="2774689">==</span>&nbsp;<span class="num" id="2774692">0</span>&nbsp;<span class="op" id="2774694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2774698">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774713">return</span>&nbsp;<span class="ident" id="2774720">v</span><span class="op" id="2774721">.</span><span class="ident" id="2774722">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2774727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2774731">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2774749">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774804">i</span>&nbsp;<span class="op" id="2774806">:=</span>&nbsp;<span class="builtintype" id="2774809">int</span><span class="op" id="2774812">(</span><span class="ident" id="2774813">v</span><span class="op" id="2774814">.</span><span class="ident" id="2774815">flag</span><span class="op" id="2774819">)</span>&nbsp;<span class="op" id="2774821">&gt;&gt;</span>&nbsp;<span class="ident" id="2774824">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774841">if</span>&nbsp;<span class="ident" id="2774844">v</span><span class="op" id="2774845">.</span><span class="ident" id="2774846">typ</span><span class="op" id="2774849">.</span><span class="ident" id="2774850">Kind</span><span class="op" id="2774854">(</span><span class="op" id="2774855">)</span>&nbsp;<span class="op" id="2774857">==</span>&nbsp;<span class="ident" id="2774860">Interface</span>&nbsp;<span class="op" id="2774870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2774874">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2774900">tt</span>&nbsp;<span class="op" id="2774903">:=</span>&nbsp;<span class="op" id="2774906">(</span><span class="op" id="2774907">*</span><span class="ident" id="2774908">interfaceType</span><span class="op" id="2774921">)</span><span class="op" id="2774922">(</span><span class="ident" id="2774923">unsafe</span><span class="op" id="2774929">.</span><span class="ident" id="2774930">Pointer</span><span class="op" id="2774937">(</span><span class="ident" id="2774938">v</span><span class="op" id="2774939">.</span><span class="ident" id="2774940">typ</span><span class="op" id="2774943">)</span><span class="op" id="2774944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2774948">if</span>&nbsp;<span class="builtintype" id="2774951">uint</span><span class="op" id="2774955">(</span><span class="ident" id="2774956">i</span><span class="op" id="2774957">)</span>&nbsp;<span class="op" id="2774959">&gt;=</span>&nbsp;<span class="builtintype" id="2774962">uint</span><span class="op" id="2774966">(</span><span class="builtinfunc" id="2774967">len</span><span class="op" id="2774970">(</span><span class="ident" id="2774971">tt</span><span class="op" id="2774973">.</span><span class="ident" id="2774974">methods</span><span class="op" id="2774981">)</span><span class="op" id="2774982">)</span>&nbsp;<span class="op" id="2774984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2774989">panic</span><span class="op" id="2774994">(</span><span class="string" id="2774995">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2775042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775050">m</span>&nbsp;<span class="op" id="2775052">:=</span>&nbsp;<span class="op" id="2775055">&amp;</span><span class="ident" id="2775056">tt</span><span class="op" id="2775058">.</span><span class="ident" id="2775059">methods</span><span class="op" id="2775066">[</span><span class="ident" id="2775067">i</span><span class="op" id="2775068">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775072">return</span>&nbsp;<span class="ident" id="2775079">m</span><span class="op" id="2775080">.</span><span class="ident" id="2775081">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2775089">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775118">ut</span>&nbsp;<span class="op" id="2775121">:=</span>&nbsp;<span class="ident" id="2775124">v</span><span class="op" id="2775125">.</span><span class="ident" id="2775126">typ</span><span class="op" id="2775129">.</span><span class="ident" id="2775130">uncommon</span><span class="op" id="2775138">(</span><span class="op" id="2775139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775142">if</span>&nbsp;<span class="ident" id="2775145">ut</span>&nbsp;<span class="op" id="2775148">==</span>&nbsp;<span class="builtintype" id="2775151">nil</span>&nbsp;<span class="op" id="2775155">||</span>&nbsp;<span class="builtintype" id="2775158">uint</span><span class="op" id="2775162">(</span><span class="ident" id="2775163">i</span><span class="op" id="2775164">)</span>&nbsp;<span class="op" id="2775166">&gt;=</span>&nbsp;<span class="builtintype" id="2775169">uint</span><span class="op" id="2775173">(</span><span class="builtinfunc" id="2775174">len</span><span class="op" id="2775177">(</span><span class="ident" id="2775178">ut</span><span class="op" id="2775180">.</span><span class="ident" id="2775181">methods</span><span class="op" id="2775188">)</span><span class="op" id="2775189">)</span>&nbsp;<span class="op" id="2775191">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2775195">panic</span><span class="op" id="2775200">(</span><span class="string" id="2775201">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2775248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775254">m</span>&nbsp;<span class="op" id="2775256">:=</span>&nbsp;<span class="op" id="2775259">&amp;</span><span class="ident" id="2775260">ut</span><span class="op" id="2775262">.</span><span class="ident" id="2775263">methods</span><span class="op" id="2775270">[</span><span class="ident" id="2775271">i</span><span class="op" id="2775272">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775275">return</span>&nbsp;<span class="ident" id="2775282">m</span><span class="op" id="2775283">.</span><span class="ident" id="2775284">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2775289">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2775292">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2775343">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2775424">func</span>&nbsp;<span class="op" id="2775429">(</span><span class="ident" id="2775430">v</span>&nbsp;<span class="ident" id="2775432">Value</span><span class="op" id="2775437">)</span>&nbsp;<span class="ident" id="2775439">Uint</span><span class="op" id="2775443">(</span><span class="op" id="2775444">)</span>&nbsp;<span class="ident" id="2775446">uint64</span>&nbsp;<span class="op" id="2775453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775456">k</span>&nbsp;<span class="op" id="2775458">:=</span>&nbsp;<span class="ident" id="2775461">v</span><span class="op" id="2775462">.</span><span class="ident" id="2775463">kind</span><span class="op" id="2775467">(</span><span class="op" id="2775468">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2775471">p</span>&nbsp;<span class="op" id="2775473">:=</span>&nbsp;<span class="ident" id="2775476">v</span><span class="op" id="2775477">.</span><span class="ident" id="2775478">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775483">switch</span>&nbsp;<span class="ident" id="2775490">k</span>&nbsp;<span class="op" id="2775492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775495">case</span>&nbsp;<span class="ident" id="2775500">Uint</span><span class="op" id="2775504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775508">return</span>&nbsp;<span class="ident" id="2775515">uint64</span><span class="op" id="2775521">(</span><span class="op" id="2775522">*</span><span class="op" id="2775523">(</span><span class="op" id="2775524">*</span><span class="builtintype" id="2775525">uint</span><span class="op" id="2775529">)</span><span class="op" id="2775530">(</span><span class="ident" id="2775531">p</span><span class="op" id="2775532">)</span><span class="op" id="2775533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775536">case</span>&nbsp;<span class="ident" id="2775541">Uint8</span><span class="op" id="2775546">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775550">return</span>&nbsp;<span class="ident" id="2775557">uint64</span><span class="op" id="2775563">(</span><span class="op" id="2775564">*</span><span class="op" id="2775565">(</span><span class="op" id="2775566">*</span><span class="builtintype" id="2775567">uint8</span><span class="op" id="2775572">)</span><span class="op" id="2775573">(</span><span class="ident" id="2775574">p</span><span class="op" id="2775575">)</span><span class="op" id="2775576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775579">case</span>&nbsp;<span class="ident" id="2775584">Uint16</span><span class="op" id="2775590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775594">return</span>&nbsp;<span class="ident" id="2775601">uint64</span><span class="op" id="2775607">(</span><span class="op" id="2775608">*</span><span class="op" id="2775609">(</span><span class="op" id="2775610">*</span><span class="builtintype" id="2775611">uint16</span><span class="op" id="2775617">)</span><span class="op" id="2775618">(</span><span class="ident" id="2775619">p</span><span class="op" id="2775620">)</span><span class="op" id="2775621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775624">case</span>&nbsp;<span class="ident" id="2775629">Uint32</span><span class="op" id="2775635">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775639">return</span>&nbsp;<span class="ident" id="2775646">uint64</span><span class="op" id="2775652">(</span><span class="op" id="2775653">*</span><span class="op" id="2775654">(</span><span class="op" id="2775655">*</span><span class="builtintype" id="2775656">uint32</span><span class="op" id="2775662">)</span><span class="op" id="2775663">(</span><span class="ident" id="2775664">p</span><span class="op" id="2775665">)</span><span class="op" id="2775666">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775669">case</span>&nbsp;<span class="ident" id="2775674">Uint64</span><span class="op" id="2775680">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775684">return</span>&nbsp;<span class="ident" id="2775691">uint64</span><span class="op" id="2775697">(</span><span class="op" id="2775698">*</span><span class="op" id="2775699">(</span><span class="op" id="2775700">*</span><span class="ident" id="2775701">uint64</span><span class="op" id="2775707">)</span><span class="op" id="2775708">(</span><span class="ident" id="2775709">p</span><span class="op" id="2775710">)</span><span class="op" id="2775711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775714">case</span>&nbsp;<span class="ident" id="2775719">Uintptr</span><span class="op" id="2775726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2775730">return</span>&nbsp;<span class="ident" id="2775737">uint64</span><span class="op" id="2775743">(</span><span class="op" id="2775744">*</span><span class="op" id="2775745">(</span><span class="op" id="2775746">*</span><span class="builtintype" id="2775747">uintptr</span><span class="op" id="2775754">)</span><span class="op" id="2775755">(</span><span class="ident" id="2775756">p</span><span class="op" id="2775757">)</span><span class="op" id="2775758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2775761">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2775764">panic</span><span class="op" id="2775769">(</span><span class="op" id="2775770">&amp;</span><span class="ident" id="2775771">ValueError</span><span class="op" id="2775781">{</span><span class="string" id="2775782">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2775802">,</span>&nbsp;<span class="ident" id="2775804">v</span><span class="op" id="2775805">.</span><span class="ident" id="2775806">kind</span><span class="op" id="2775810">(</span><span class="op" id="2775811">)</span><span class="op" id="2775812">}</span><span class="op" id="2775813">)</span><br>
<span class="lineno"></span><span class="op" id="2775815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775818">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2775863">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2775932">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2775970">func</span>&nbsp;<span class="op" id="2775975">(</span><span class="ident" id="2775976">v</span>&nbsp;<span class="ident" id="2775978">Value</span><span class="op" id="2775983">)</span>&nbsp;<span class="ident" id="2775985">UnsafeAddr</span><span class="op" id="2775995">(</span><span class="op" id="2775996">)</span>&nbsp;<span class="builtintype" id="2775998">uintptr</span>&nbsp;<span class="op" id="2776006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2776009">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776029">if</span>&nbsp;<span class="ident" id="2776032">v</span><span class="op" id="2776033">.</span><span class="ident" id="2776034">typ</span>&nbsp;<span class="op" id="2776038">==</span>&nbsp;<span class="builtintype" id="2776041">nil</span>&nbsp;<span class="op" id="2776045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2776049">panic</span><span class="op" id="2776054">(</span><span class="op" id="2776055">&amp;</span><span class="ident" id="2776056">ValueError</span><span class="op" id="2776066">{</span><span class="string" id="2776067">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2776093">,</span>&nbsp;<span class="ident" id="2776095">Invalid</span><span class="op" id="2776102">}</span><span class="op" id="2776103">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2776106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776109">if</span>&nbsp;<span class="ident" id="2776112">v</span><span class="op" id="2776113">.</span><span class="ident" id="2776114">flag</span><span class="op" id="2776118">&amp;</span><span class="ident" id="2776119">flagAddr</span>&nbsp;<span class="op" id="2776128">==</span>&nbsp;<span class="num" id="2776131">0</span>&nbsp;<span class="op" id="2776133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2776137">panic</span><span class="op" id="2776142">(</span><span class="string" id="2776143">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2776192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2776195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2776198">return</span>&nbsp;<span class="builtintype" id="2776205">uintptr</span><span class="op" id="2776212">(</span><span class="ident" id="2776213">v</span><span class="op" id="2776214">.</span><span class="ident" id="2776215">ptr</span><span class="op" id="2776218">)</span><br>
<span class="lineno">1695</span><span class="op" id="2776220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776223">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2776282">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2776349">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2776379">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2776447">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2776517">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2776580">type</span>&nbsp;<span class="ident" id="2776585">StringHeader</span>&nbsp;<span class="keyword" id="2776598">struct</span>&nbsp;<span class="op" id="2776605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776608">Data</span>&nbsp;<span class="builtintype" id="2776613">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776622">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2776627">int</span><br>
<span class="lineno"></span><span class="op" id="2776631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776634">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2776710">type</span>&nbsp;<span class="ident" id="2776715">stringHeader</span>&nbsp;<span class="keyword" id="2776728">struct</span>&nbsp;<span class="op" id="2776735">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776738">Data</span>&nbsp;<span class="ident" id="2776743">unsafe</span><span class="op" id="2776749">.</span><span class="ident" id="2776750">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2776759">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2776764">int</span><br>
<span class="lineno"></span><span class="op" id="2776768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776771">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2776828">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2776895">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2776925">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2776993">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2777063">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2777126">type</span>&nbsp;<span class="ident" id="2777131">SliceHeader</span>&nbsp;<span class="keyword" id="2777143">struct</span>&nbsp;<span class="op" id="2777150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777153">Data</span>&nbsp;<span class="builtintype" id="2777158">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777167">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2777172">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777177">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2777182">int</span><br>
<span class="lineno"></span><span class="op" id="2777186">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2777189">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2777263">type</span>&nbsp;<span class="ident" id="2777268">sliceHeader</span>&nbsp;<span class="keyword" id="2777280">struct</span>&nbsp;<span class="op" id="2777287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777290">Data</span>&nbsp;<span class="ident" id="2777295">unsafe</span><span class="op" id="2777301">.</span><span class="ident" id="2777302">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777311">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2777316">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777321">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2777326">int</span><br>
<span class="lineno"></span><span class="op" id="2777330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2777333">func</span>&nbsp;<span class="ident" id="2777338">typesMustMatch</span><span class="op" id="2777352">(</span><span class="ident" id="2777353">what</span>&nbsp;<span class="builtintype" id="2777358">string</span><span class="op" id="2777364">,</span>&nbsp;<span class="ident" id="2777366">t1</span><span class="op" id="2777368">,</span>&nbsp;<span class="ident" id="2777370">t2</span>&nbsp;<span class="ident" id="2777373">Type</span><span class="op" id="2777377">)</span>&nbsp;<span class="op" id="2777379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777382">if</span>&nbsp;<span class="ident" id="2777385">t1</span>&nbsp;<span class="op" id="2777388">!=</span>&nbsp;<span class="ident" id="2777391">t2</span>&nbsp;<span class="op" id="2777394">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2777398">panic</span><span class="op" id="2777403">(</span><span class="ident" id="2777404">what</span>&nbsp;<span class="op" id="2777409">+</span>&nbsp;<span class="string" id="2777411">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2777416">+</span>&nbsp;<span class="ident" id="2777418">t1</span><span class="op" id="2777420">.</span><span class="ident" id="2777421">String</span><span class="op" id="2777427">(</span><span class="op" id="2777428">)</span>&nbsp;<span class="op" id="2777430">+</span>&nbsp;<span class="string" id="2777432">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2777439">+</span>&nbsp;<span class="ident" id="2777441">t2</span><span class="op" id="2777443">.</span><span class="ident" id="2777444">String</span><span class="op" id="2777450">(</span><span class="op" id="2777451">)</span><span class="op" id="2777452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777455">}</span><br>
<span class="lineno"></span><span class="op" id="2777457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2777460">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2777536">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2777611">func</span>&nbsp;<span class="ident" id="2777616">grow</span><span class="op" id="2777620">(</span><span class="ident" id="2777621">s</span>&nbsp;<span class="ident" id="2777623">Value</span><span class="op" id="2777628">,</span>&nbsp;<span class="ident" id="2777630">extra</span>&nbsp;<span class="builtintype" id="2777636">int</span><span class="op" id="2777639">)</span>&nbsp;<span class="op" id="2777641">(</span><span class="ident" id="2777642">Value</span><span class="op" id="2777647">,</span>&nbsp;<span class="builtintype" id="2777649">int</span><span class="op" id="2777652">,</span>&nbsp;<span class="builtintype" id="2777654">int</span><span class="op" id="2777657">)</span>&nbsp;<span class="op" id="2777659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777662">i0</span>&nbsp;<span class="op" id="2777665">:=</span>&nbsp;<span class="ident" id="2777668">s</span><span class="op" id="2777669">.</span><span class="ident" id="2777670">Len</span><span class="op" id="2777673">(</span><span class="op" id="2777674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777677">i1</span>&nbsp;<span class="op" id="2777680">:=</span>&nbsp;<span class="ident" id="2777683">i0</span>&nbsp;<span class="op" id="2777686">+</span>&nbsp;<span class="ident" id="2777688">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777695">if</span>&nbsp;<span class="ident" id="2777698">i1</span>&nbsp;<span class="op" id="2777701">&lt;</span>&nbsp;<span class="ident" id="2777703">i0</span>&nbsp;<span class="op" id="2777706">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2777710">panic</span><span class="op" id="2777715">(</span><span class="string" id="2777716">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2777748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777754">m</span>&nbsp;<span class="op" id="2777756">:=</span>&nbsp;<span class="ident" id="2777759">s</span><span class="op" id="2777760">.</span><span class="ident" id="2777761">Cap</span><span class="op" id="2777764">(</span><span class="op" id="2777765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777768">if</span>&nbsp;<span class="ident" id="2777771">i1</span>&nbsp;<span class="op" id="2777774">&lt;=</span>&nbsp;<span class="ident" id="2777777">m</span>&nbsp;<span class="op" id="2777779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777783">return</span>&nbsp;<span class="ident" id="2777790">s</span><span class="op" id="2777791">.</span><span class="ident" id="2777792">Slice</span><span class="op" id="2777797">(</span><span class="num" id="2777798">0</span><span class="op" id="2777799">,</span>&nbsp;<span class="ident" id="2777801">i1</span><span class="op" id="2777803">)</span><span class="op" id="2777804">,</span>&nbsp;<span class="ident" id="2777806">i0</span><span class="op" id="2777808">,</span>&nbsp;<span class="ident" id="2777810">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777817">if</span>&nbsp;<span class="ident" id="2777820">m</span>&nbsp;<span class="op" id="2777822">==</span>&nbsp;<span class="num" id="2777825">0</span>&nbsp;<span class="op" id="2777827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777831">m</span>&nbsp;<span class="op" id="2777833">=</span>&nbsp;<span class="ident" id="2777835">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777842">}</span>&nbsp;<span class="keyword" id="2777844">else</span>&nbsp;<span class="op" id="2777849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777853">for</span>&nbsp;<span class="ident" id="2777857">m</span>&nbsp;<span class="op" id="2777859">&lt;</span>&nbsp;<span class="ident" id="2777861">i1</span>&nbsp;<span class="op" id="2777864">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777869">if</span>&nbsp;<span class="ident" id="2777872">i0</span>&nbsp;<span class="op" id="2777875">&lt;</span>&nbsp;<span class="num" id="2777877">1024</span>&nbsp;<span class="op" id="2777882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777888">m</span>&nbsp;<span class="op" id="2777890">+=</span>&nbsp;<span class="ident" id="2777893">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777898">}</span>&nbsp;<span class="keyword" id="2777900">else</span>&nbsp;<span class="op" id="2777905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777911">m</span>&nbsp;<span class="op" id="2777913">+=</span>&nbsp;<span class="ident" id="2777916">m</span>&nbsp;<span class="op" id="2777918">/</span>&nbsp;<span class="num" id="2777920">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777925">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2777932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777935">t</span>&nbsp;<span class="op" id="2777937">:=</span>&nbsp;<span class="ident" id="2777940">MakeSlice</span><span class="op" id="2777949">(</span><span class="ident" id="2777950">s</span><span class="op" id="2777951">.</span><span class="ident" id="2777952">Type</span><span class="op" id="2777956">(</span><span class="op" id="2777957">)</span><span class="op" id="2777958">,</span>&nbsp;<span class="ident" id="2777960">i1</span><span class="op" id="2777962">,</span>&nbsp;<span class="ident" id="2777964">m</span><span class="op" id="2777965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2777968">Copy</span><span class="op" id="2777972">(</span><span class="ident" id="2777973">t</span><span class="op" id="2777974">,</span>&nbsp;<span class="ident" id="2777976">s</span><span class="op" id="2777977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2777980">return</span>&nbsp;<span class="ident" id="2777987">t</span><span class="op" id="2777988">,</span>&nbsp;<span class="ident" id="2777990">i0</span><span class="op" id="2777992">,</span>&nbsp;<span class="ident" id="2777994">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2777997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778000">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2778077">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2778153">func</span>&nbsp;<span class="ident" id="2778158">Append</span><span class="op" id="2778164">(</span><span class="ident" id="2778165">s</span>&nbsp;<span class="ident" id="2778167">Value</span><span class="op" id="2778172">,</span>&nbsp;<span class="ident" id="2778174">x</span>&nbsp;<span class="op" id="2778176">...</span><span class="ident" id="2778179">Value</span><span class="op" id="2778184">)</span>&nbsp;<span class="ident" id="2778186">Value</span>&nbsp;<span class="op" id="2778192">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778195">s</span><span class="op" id="2778196">.</span><span class="ident" id="2778197">mustBe</span><span class="op" id="2778203">(</span><span class="ident" id="2778204">Slice</span><span class="op" id="2778209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778212">s</span><span class="op" id="2778213">,</span>&nbsp;<span class="ident" id="2778215">i0</span><span class="op" id="2778217">,</span>&nbsp;<span class="ident" id="2778219">i1</span>&nbsp;<span class="op" id="2778222">:=</span>&nbsp;<span class="ident" id="2778225">grow</span><span class="op" id="2778229">(</span><span class="ident" id="2778230">s</span><span class="op" id="2778231">,</span>&nbsp;<span class="builtinfunc" id="2778233">len</span><span class="op" id="2778236">(</span><span class="ident" id="2778237">x</span><span class="op" id="2778238">)</span><span class="op" id="2778239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778242">for</span>&nbsp;<span class="ident" id="2778246">i</span><span class="op" id="2778247">,</span>&nbsp;<span class="ident" id="2778249">j</span>&nbsp;<span class="op" id="2778251">:=</span>&nbsp;<span class="ident" id="2778254">i0</span><span class="op" id="2778256">,</span>&nbsp;<span class="num" id="2778258">0</span><span class="op" id="2778259">;</span>&nbsp;<span class="ident" id="2778261">i</span>&nbsp;<span class="op" id="2778263">&lt;</span>&nbsp;<span class="ident" id="2778265">i1</span><span class="op" id="2778267">;</span>&nbsp;<span class="ident" id="2778269">i</span><span class="op" id="2778270">,</span>&nbsp;<span class="ident" id="2778272">j</span>&nbsp;<span class="op" id="2778274">=</span>&nbsp;<span class="ident" id="2778276">i</span><span class="op" id="2778277">+</span><span class="num" id="2778278">1</span><span class="op" id="2778279">,</span>&nbsp;<span class="ident" id="2778281">j</span><span class="op" id="2778282">+</span><span class="num" id="2778283">1</span>&nbsp;<span class="op" id="2778285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778289">s</span><span class="op" id="2778290">.</span><span class="ident" id="2778291">Index</span><span class="op" id="2778296">(</span><span class="ident" id="2778297">i</span><span class="op" id="2778298">)</span><span class="op" id="2778299">.</span><span class="ident" id="2778300">Set</span><span class="op" id="2778303">(</span><span class="ident" id="2778304">x</span><span class="op" id="2778305">[</span><span class="ident" id="2778306">j</span><span class="op" id="2778307">]</span><span class="op" id="2778308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2778311">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778314">return</span>&nbsp;<span class="ident" id="2778321">s</span><br>
<span class="lineno"></span><span class="op" id="2778323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778326">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2778405">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2778460">func</span>&nbsp;<span class="ident" id="2778465">AppendSlice</span><span class="op" id="2778476">(</span><span class="ident" id="2778477">s</span><span class="op" id="2778478">,</span>&nbsp;<span class="ident" id="2778480">t</span>&nbsp;<span class="ident" id="2778482">Value</span><span class="op" id="2778487">)</span>&nbsp;<span class="ident" id="2778489">Value</span>&nbsp;<span class="op" id="2778495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778498">s</span><span class="op" id="2778499">.</span><span class="ident" id="2778500">mustBe</span><span class="op" id="2778506">(</span><span class="ident" id="2778507">Slice</span><span class="op" id="2778512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778515">t</span><span class="op" id="2778516">.</span><span class="ident" id="2778517">mustBe</span><span class="op" id="2778523">(</span><span class="ident" id="2778524">Slice</span><span class="op" id="2778529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778532">typesMustMatch</span><span class="op" id="2778546">(</span><span class="string" id="2778547">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2778568">,</span>&nbsp;<span class="ident" id="2778570">s</span><span class="op" id="2778571">.</span><span class="ident" id="2778572">Type</span><span class="op" id="2778576">(</span><span class="op" id="2778577">)</span><span class="op" id="2778578">.</span><span class="ident" id="2778579">Elem</span><span class="op" id="2778583">(</span><span class="op" id="2778584">)</span><span class="op" id="2778585">,</span>&nbsp;<span class="ident" id="2778587">t</span><span class="op" id="2778588">.</span><span class="ident" id="2778589">Type</span><span class="op" id="2778593">(</span><span class="op" id="2778594">)</span><span class="op" id="2778595">.</span><span class="ident" id="2778596">Elem</span><span class="op" id="2778600">(</span><span class="op" id="2778601">)</span><span class="op" id="2778602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778605">s</span><span class="op" id="2778606">,</span>&nbsp;<span class="ident" id="2778608">i0</span><span class="op" id="2778610">,</span>&nbsp;<span class="ident" id="2778612">i1</span>&nbsp;<span class="op" id="2778615">:=</span>&nbsp;<span class="ident" id="2778618">grow</span><span class="op" id="2778622">(</span><span class="ident" id="2778623">s</span><span class="op" id="2778624">,</span>&nbsp;<span class="ident" id="2778626">t</span><span class="op" id="2778627">.</span><span class="ident" id="2778628">Len</span><span class="op" id="2778631">(</span><span class="op" id="2778632">)</span><span class="op" id="2778633">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778636">Copy</span><span class="op" id="2778640">(</span><span class="ident" id="2778641">s</span><span class="op" id="2778642">.</span><span class="ident" id="2778643">Slice</span><span class="op" id="2778648">(</span><span class="ident" id="2778649">i0</span><span class="op" id="2778651">,</span>&nbsp;<span class="ident" id="2778653">i1</span><span class="op" id="2778655">)</span><span class="op" id="2778656">,</span>&nbsp;<span class="ident" id="2778658">t</span><span class="op" id="2778659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778662">return</span>&nbsp;<span class="ident" id="2778669">s</span><br>
<span class="lineno"></span><span class="op" id="2778671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778674">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2778731">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2778781">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2778826">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2778881">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2778929">func</span>&nbsp;<span class="ident" id="2778934">Copy</span><span class="op" id="2778938">(</span><span class="ident" id="2778939">dst</span><span class="op" id="2778942">,</span>&nbsp;<span class="ident" id="2778944">src</span>&nbsp;<span class="ident" id="2778948">Value</span><span class="op" id="2778953">)</span>&nbsp;<span class="builtintype" id="2778955">int</span>&nbsp;<span class="op" id="2778959">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2778962">dk</span>&nbsp;<span class="op" id="2778965">:=</span>&nbsp;<span class="ident" id="2778968">dst</span><span class="op" id="2778971">.</span><span class="ident" id="2778972">kind</span><span class="op" id="2778976">(</span><span class="op" id="2778977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2778980">if</span>&nbsp;<span class="ident" id="2778983">dk</span>&nbsp;<span class="op" id="2778986">!=</span>&nbsp;<span class="ident" id="2778989">Array</span>&nbsp;<span class="op" id="2778995">&amp;&amp;</span>&nbsp;<span class="ident" id="2778998">dk</span>&nbsp;<span class="op" id="2779001">!=</span>&nbsp;<span class="ident" id="2779004">Slice</span>&nbsp;<span class="op" id="2779010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2779014">panic</span><span class="op" id="2779019">(</span><span class="op" id="2779020">&amp;</span><span class="ident" id="2779021">ValueError</span><span class="op" id="2779031">{</span><span class="string" id="2779032">&#34;reflect.Copy&#34;</span><span class="op" id="2779046">,</span>&nbsp;<span class="ident" id="2779048">dk</span><span class="op" id="2779050">}</span><span class="op" id="2779051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779057">if</span>&nbsp;<span class="ident" id="2779060">dk</span>&nbsp;<span class="op" id="2779063">==</span>&nbsp;<span class="ident" id="2779066">Array</span>&nbsp;<span class="op" id="2779072">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779076">dst</span><span class="op" id="2779079">.</span><span class="ident" id="2779080">mustBeAssignable</span><span class="op" id="2779096">(</span><span class="op" id="2779097">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779103">dst</span><span class="op" id="2779106">.</span><span class="ident" id="2779107">mustBeExported</span><span class="op" id="2779121">(</span><span class="op" id="2779122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779126">sk</span>&nbsp;<span class="op" id="2779129">:=</span>&nbsp;<span class="ident" id="2779132">src</span><span class="op" id="2779135">.</span><span class="ident" id="2779136">kind</span><span class="op" id="2779140">(</span><span class="op" id="2779141">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779144">if</span>&nbsp;<span class="ident" id="2779147">sk</span>&nbsp;<span class="op" id="2779150">!=</span>&nbsp;<span class="ident" id="2779153">Array</span>&nbsp;<span class="op" id="2779159">&amp;&amp;</span>&nbsp;<span class="ident" id="2779162">sk</span>&nbsp;<span class="op" id="2779165">!=</span>&nbsp;<span class="ident" id="2779168">Slice</span>&nbsp;<span class="op" id="2779174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2779178">panic</span><span class="op" id="2779183">(</span><span class="op" id="2779184">&amp;</span><span class="ident" id="2779185">ValueError</span><span class="op" id="2779195">{</span><span class="string" id="2779196">&#34;reflect.Copy&#34;</span><span class="op" id="2779210">,</span>&nbsp;<span class="ident" id="2779212">sk</span><span class="op" id="2779214">}</span><span class="op" id="2779215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779221">src</span><span class="op" id="2779224">.</span><span class="ident" id="2779225">mustBeExported</span><span class="op" id="2779239">(</span><span class="op" id="2779240">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779244">de</span>&nbsp;<span class="op" id="2779247">:=</span>&nbsp;<span class="ident" id="2779250">dst</span><span class="op" id="2779253">.</span><span class="ident" id="2779254">typ</span><span class="op" id="2779257">.</span><span class="ident" id="2779258">Elem</span><span class="op" id="2779262">(</span><span class="op" id="2779263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779266">se</span>&nbsp;<span class="op" id="2779269">:=</span>&nbsp;<span class="ident" id="2779272">src</span><span class="op" id="2779275">.</span><span class="ident" id="2779276">typ</span><span class="op" id="2779279">.</span><span class="ident" id="2779280">Elem</span><span class="op" id="2779284">(</span><span class="op" id="2779285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779288">typesMustMatch</span><span class="op" id="2779302">(</span><span class="string" id="2779303">&#34;reflect.Copy&#34;</span><span class="op" id="2779317">,</span>&nbsp;<span class="ident" id="2779319">de</span><span class="op" id="2779321">,</span>&nbsp;<span class="ident" id="2779323">se</span><span class="op" id="2779325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779329">n</span>&nbsp;<span class="op" id="2779331">:=</span>&nbsp;<span class="ident" id="2779334">dst</span><span class="op" id="2779337">.</span><span class="ident" id="2779338">Len</span><span class="op" id="2779341">(</span><span class="op" id="2779342">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779345">if</span>&nbsp;<span class="ident" id="2779348">sn</span>&nbsp;<span class="op" id="2779351">:=</span>&nbsp;<span class="ident" id="2779354">src</span><span class="op" id="2779357">.</span><span class="ident" id="2779358">Len</span><span class="op" id="2779361">(</span><span class="op" id="2779362">)</span><span class="op" id="2779363">;</span>&nbsp;<span class="ident" id="2779365">n</span>&nbsp;<span class="op" id="2779367">&gt;</span>&nbsp;<span class="ident" id="2779369">sn</span>&nbsp;<span class="op" id="2779372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779376">n</span>&nbsp;<span class="op" id="2779378">=</span>&nbsp;<span class="ident" id="2779380">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2779388">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779410">var</span>&nbsp;<span class="ident" id="2779414">da</span><span class="op" id="2779416">,</span>&nbsp;<span class="ident" id="2779418">sa</span>&nbsp;<span class="ident" id="2779421">unsafe</span><span class="op" id="2779427">.</span><span class="ident" id="2779428">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779437">if</span>&nbsp;<span class="ident" id="2779440">dk</span>&nbsp;<span class="op" id="2779443">==</span>&nbsp;<span class="ident" id="2779446">Array</span>&nbsp;<span class="op" id="2779452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779456">da</span>&nbsp;<span class="op" id="2779459">=</span>&nbsp;<span class="ident" id="2779461">dst</span><span class="op" id="2779464">.</span><span class="ident" id="2779465">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779470">}</span>&nbsp;<span class="keyword" id="2779472">else</span>&nbsp;<span class="op" id="2779477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779481">da</span>&nbsp;<span class="op" id="2779484">=</span>&nbsp;<span class="op" id="2779486">(</span><span class="op" id="2779487">*</span><span class="ident" id="2779488">sliceHeader</span><span class="op" id="2779499">)</span><span class="op" id="2779500">(</span><span class="ident" id="2779501">dst</span><span class="op" id="2779504">.</span><span class="ident" id="2779505">ptr</span><span class="op" id="2779508">)</span><span class="op" id="2779509">.</span><span class="ident" id="2779510">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779519">if</span>&nbsp;<span class="ident" id="2779522">src</span><span class="op" id="2779525">.</span><span class="ident" id="2779526">flag</span><span class="op" id="2779530">&amp;</span><span class="ident" id="2779531">flagIndir</span>&nbsp;<span class="op" id="2779541">==</span>&nbsp;<span class="num" id="2779544">0</span>&nbsp;<span class="op" id="2779546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779550">sa</span>&nbsp;<span class="op" id="2779553">=</span>&nbsp;<span class="ident" id="2779555">unsafe</span><span class="op" id="2779561">.</span><span class="ident" id="2779562">Pointer</span><span class="op" id="2779569">(</span><span class="op" id="2779570">&amp;</span><span class="ident" id="2779571">src</span><span class="op" id="2779574">.</span><span class="ident" id="2779575">ptr</span><span class="op" id="2779578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779581">}</span>&nbsp;<span class="keyword" id="2779583">else</span>&nbsp;<span class="keyword" id="2779588">if</span>&nbsp;<span class="ident" id="2779591">sk</span>&nbsp;<span class="op" id="2779594">==</span>&nbsp;<span class="ident" id="2779597">Array</span>&nbsp;<span class="op" id="2779603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779607">sa</span>&nbsp;<span class="op" id="2779610">=</span>&nbsp;<span class="ident" id="2779612">src</span><span class="op" id="2779615">.</span><span class="ident" id="2779616">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779621">}</span>&nbsp;<span class="keyword" id="2779623">else</span>&nbsp;<span class="op" id="2779628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779632">sa</span>&nbsp;<span class="op" id="2779635">=</span>&nbsp;<span class="op" id="2779637">(</span><span class="op" id="2779638">*</span><span class="ident" id="2779639">sliceHeader</span><span class="op" id="2779650">)</span><span class="op" id="2779651">(</span><span class="ident" id="2779652">src</span><span class="op" id="2779655">.</span><span class="ident" id="2779656">ptr</span><span class="op" id="2779659">)</span><span class="op" id="2779660">.</span><span class="ident" id="2779661">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2779667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779670">memmove</span><span class="op" id="2779677">(</span><span class="ident" id="2779678">da</span><span class="op" id="2779680">,</span>&nbsp;<span class="ident" id="2779682">sa</span><span class="op" id="2779684">,</span>&nbsp;<span class="builtintype" id="2779686">uintptr</span><span class="op" id="2779693">(</span><span class="ident" id="2779694">n</span><span class="op" id="2779695">)</span><span class="op" id="2779696">*</span><span class="ident" id="2779697">de</span><span class="op" id="2779699">.</span><span class="ident" id="2779700">Size</span><span class="op" id="2779704">(</span><span class="op" id="2779705">)</span><span class="op" id="2779706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2779709">return</span>&nbsp;<span class="ident" id="2779716">n</span><br>
<span class="lineno">1835</span><span class="op" id="2779718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2779721">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2779776">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2779831">type</span>&nbsp;<span class="ident" id="2779836">runtimeSelect</span>&nbsp;<span class="keyword" id="2779850">struct</span>&nbsp;<span class="op" id="2779857">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779860">dir</span>&nbsp;<span class="builtintype" id="2779864">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2779879">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779906">typ</span>&nbsp;<span class="op" id="2779910">*</span><span class="ident" id="2779911">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2779925">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779942">ch</span>&nbsp;&nbsp;<span class="ident" id="2779946">unsafe</span><span class="op" id="2779952">.</span><span class="ident" id="2779953">Pointer</span>&nbsp;<span class="comment" id="2779961">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2779973">val</span>&nbsp;<span class="ident" id="2779977">unsafe</span><span class="op" id="2779983">.</span><span class="ident" id="2779984">Pointer</span>&nbsp;<span class="comment" id="2779992">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2780052">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2780055">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2780123">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2780195">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2780265">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2780285">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2780299">func</span>&nbsp;<span class="ident" id="2780304">rselect</span><span class="op" id="2780311">(</span><span class="op" id="2780312">[</span><span class="op" id="2780313">]</span><span class="ident" id="2780314">runtimeSelect</span><span class="op" id="2780327">)</span>&nbsp;<span class="op" id="2780329">(</span><span class="ident" id="2780330">chosen</span>&nbsp;<span class="builtintype" id="2780337">int</span><span class="op" id="2780340">,</span>&nbsp;<span class="ident" id="2780342">recvOK</span>&nbsp;<span class="builtintype" id="2780349">bool</span><span class="op" id="2780353">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780356">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2780427">type</span>&nbsp;<span class="ident" id="2780432">SelectDir</span>&nbsp;<span class="builtintype" id="2780442">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2780447">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2780514">const</span>&nbsp;<span class="op" id="2780520">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780523">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780537">SelectDir</span>&nbsp;<span class="op" id="2780547">=</span>&nbsp;<span class="ident" id="2780549">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780555">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2780579">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780601">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2780625">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2780642">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2780666">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2780677">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2780680">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2780743">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2780808">//</span><br>
<span class="lineno"></span><span class="comment" id="2780811">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2780875">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2780913">//</span><br>
<span class="lineno"></span><span class="comment" id="2780916">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2780979">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2781070">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2781159">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2781251">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2781267">//</span><br>
<span class="lineno"></span><span class="comment" id="2781270">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2781336">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2781421">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2781512">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2781595">//</span><br>
<span class="lineno"></span><span class="keyword" id="2781598">type</span>&nbsp;<span class="ident" id="2781603">SelectCase</span>&nbsp;<span class="keyword" id="2781614">struct</span>&nbsp;<span class="op" id="2781621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781624">Dir</span>&nbsp;&nbsp;<span class="ident" id="2781629">SelectDir</span>&nbsp;<span class="comment" id="2781639">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781661">Chan</span>&nbsp;<span class="ident" id="2781666">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2781676">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2781717">Send</span>&nbsp;<span class="ident" id="2781722">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2781732">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2781760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2781763">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2781833">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2781908">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2781962">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2782034">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2782105">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2782182">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2782254">func</span>&nbsp;<span class="ident" id="2782259">Select</span><span class="op" id="2782265">(</span><span class="ident" id="2782266">cases</span>&nbsp;<span class="op" id="2782272">[</span><span class="op" id="2782273">]</span><span class="ident" id="2782274">SelectCase</span><span class="op" id="2782284">)</span>&nbsp;<span class="op" id="2782286">(</span><span class="ident" id="2782287">chosen</span>&nbsp;<span class="builtintype" id="2782294">int</span><span class="op" id="2782297">,</span>&nbsp;<span class="ident" id="2782299">recv</span>&nbsp;<span class="ident" id="2782304">Value</span><span class="op" id="2782309">,</span>&nbsp;<span class="ident" id="2782311">recvOK</span>&nbsp;<span class="builtintype" id="2782318">bool</span><span class="op" id="2782322">)</span>&nbsp;<span class="op" id="2782324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2782327">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2782401">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2782476">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2782534">runcases</span>&nbsp;<span class="op" id="2782543">:=</span>&nbsp;<span class="builtinfunc" id="2782546">make</span><span class="op" id="2782550">(</span><span class="op" id="2782551">[</span><span class="op" id="2782552">]</span><span class="ident" id="2782553">runtimeSelect</span><span class="op" id="2782566">,</span>&nbsp;<span class="builtinfunc" id="2782568">len</span><span class="op" id="2782571">(</span><span class="ident" id="2782572">cases</span><span class="op" id="2782577">)</span><span class="op" id="2782578">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2782581">haveDefault</span>&nbsp;<span class="op" id="2782593">:=</span>&nbsp;<span class="builtintype" id="2782596">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782603">for</span>&nbsp;<span class="ident" id="2782607">i</span><span class="op" id="2782608">,</span>&nbsp;<span class="ident" id="2782610">c</span>&nbsp;<span class="op" id="2782612">:=</span>&nbsp;<span class="keyword" id="2782615">range</span>&nbsp;<span class="ident" id="2782621">cases</span>&nbsp;<span class="op" id="2782627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2782631">rc</span>&nbsp;<span class="op" id="2782634">:=</span>&nbsp;<span class="op" id="2782637">&amp;</span><span class="ident" id="2782638">runcases</span><span class="op" id="2782646">[</span><span class="ident" id="2782647">i</span><span class="op" id="2782648">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2782652">rc</span><span class="op" id="2782654">.</span><span class="ident" id="2782655">dir</span>&nbsp;<span class="op" id="2782659">=</span>&nbsp;<span class="builtintype" id="2782661">uintptr</span><span class="op" id="2782668">(</span><span class="ident" id="2782669">c</span><span class="op" id="2782670">.</span><span class="ident" id="2782671">Dir</span><span class="op" id="2782674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782678">switch</span>&nbsp;<span class="ident" id="2782685">c</span><span class="op" id="2782686">.</span><span class="ident" id="2782687">Dir</span>&nbsp;<span class="op" id="2782691">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782695">default</span><span class="op" id="2782702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2782707">panic</span><span class="op" id="2782712">(</span><span class="string" id="2782713">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2782742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782747">case</span>&nbsp;<span class="ident" id="2782752">SelectDefault</span><span class="op" id="2782765">:</span>&nbsp;<span class="comment" id="2782767">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782781">if</span>&nbsp;<span class="ident" id="2782784">haveDefault</span>&nbsp;<span class="op" id="2782796">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2782802">panic</span><span class="op" id="2782807">(</span><span class="string" id="2782808">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2782848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2782853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2782858">haveDefault</span>&nbsp;<span class="op" id="2782870">=</span>&nbsp;<span class="builtintype" id="2782872">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782880">if</span>&nbsp;<span class="ident" id="2782883">c</span><span class="op" id="2782884">.</span><span class="ident" id="2782885">Chan</span><span class="op" id="2782889">.</span><span class="ident" id="2782890">IsValid</span><span class="op" id="2782897">(</span><span class="op" id="2782898">)</span>&nbsp;<span class="op" id="2782900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2782906">panic</span><span class="op" id="2782911">(</span><span class="string" id="2782912">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2782957">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2782962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2782967">if</span>&nbsp;<span class="ident" id="2782970">c</span><span class="op" id="2782971">.</span><span class="ident" id="2782972">Send</span><span class="op" id="2782976">.</span><span class="ident" id="2782977">IsValid</span><span class="op" id="2782984">(</span><span class="op" id="2782985">)</span>&nbsp;<span class="op" id="2782987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2782993">panic</span><span class="op" id="2782998">(</span><span class="string" id="2782999">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2783044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783054">case</span>&nbsp;<span class="ident" id="2783059">SelectSend</span><span class="op" id="2783069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783074">ch</span>&nbsp;<span class="op" id="2783077">:=</span>&nbsp;<span class="ident" id="2783080">c</span><span class="op" id="2783081">.</span><span class="ident" id="2783082">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783090">if</span>&nbsp;<span class="op" id="2783093">!</span><span class="ident" id="2783094">ch</span><span class="op" id="2783096">.</span><span class="ident" id="2783097">IsValid</span><span class="op" id="2783104">(</span><span class="op" id="2783105">)</span>&nbsp;<span class="op" id="2783107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783113">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783122">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783127">ch</span><span class="op" id="2783129">.</span><span class="ident" id="2783130">mustBe</span><span class="op" id="2783136">(</span><span class="ident" id="2783137">Chan</span><span class="op" id="2783141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783146">ch</span><span class="op" id="2783148">.</span><span class="ident" id="2783149">mustBeExported</span><span class="op" id="2783163">(</span><span class="op" id="2783164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783169">tt</span>&nbsp;<span class="op" id="2783172">:=</span>&nbsp;<span class="op" id="2783175">(</span><span class="op" id="2783176">*</span><span class="ident" id="2783177">chanType</span><span class="op" id="2783185">)</span><span class="op" id="2783186">(</span><span class="ident" id="2783187">unsafe</span><span class="op" id="2783193">.</span><span class="ident" id="2783194">Pointer</span><span class="op" id="2783201">(</span><span class="ident" id="2783202">ch</span><span class="op" id="2783204">.</span><span class="ident" id="2783205">typ</span><span class="op" id="2783208">)</span><span class="op" id="2783209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783214">if</span>&nbsp;<span class="ident" id="2783217">ChanDir</span><span class="op" id="2783224">(</span><span class="ident" id="2783225">tt</span><span class="op" id="2783227">.</span><span class="ident" id="2783228">dir</span><span class="op" id="2783231">)</span><span class="op" id="2783232">&amp;</span><span class="ident" id="2783233">SendDir</span>&nbsp;<span class="op" id="2783241">==</span>&nbsp;<span class="num" id="2783244">0</span>&nbsp;<span class="op" id="2783246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2783252">panic</span><span class="op" id="2783257">(</span><span class="string" id="2783258">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2783312">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783322">rc</span><span class="op" id="2783324">.</span><span class="ident" id="2783325">ch</span>&nbsp;<span class="op" id="2783328">=</span>&nbsp;<span class="ident" id="2783330">ch</span><span class="op" id="2783332">.</span><span class="ident" id="2783333">pointer</span><span class="op" id="2783340">(</span><span class="op" id="2783341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783346">rc</span><span class="op" id="2783348">.</span><span class="ident" id="2783349">typ</span>&nbsp;<span class="op" id="2783353">=</span>&nbsp;<span class="op" id="2783355">&amp;</span><span class="ident" id="2783356">tt</span><span class="op" id="2783358">.</span><span class="ident" id="2783359">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783368">v</span>&nbsp;<span class="op" id="2783370">:=</span>&nbsp;<span class="ident" id="2783373">c</span><span class="op" id="2783374">.</span><span class="ident" id="2783375">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783383">if</span>&nbsp;<span class="op" id="2783386">!</span><span class="ident" id="2783387">v</span><span class="op" id="2783388">.</span><span class="ident" id="2783389">IsValid</span><span class="op" id="2783396">(</span><span class="op" id="2783397">)</span>&nbsp;<span class="op" id="2783399">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2783405">panic</span><span class="op" id="2783410">(</span><span class="string" id="2783411">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2783460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783470">v</span><span class="op" id="2783471">.</span><span class="ident" id="2783472">mustBeExported</span><span class="op" id="2783486">(</span><span class="op" id="2783487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783492">v</span>&nbsp;<span class="op" id="2783494">=</span>&nbsp;<span class="ident" id="2783496">v</span><span class="op" id="2783497">.</span><span class="ident" id="2783498">assignTo</span><span class="op" id="2783506">(</span><span class="string" id="2783507">&#34;reflect.Select&#34;</span><span class="op" id="2783523">,</span>&nbsp;<span class="ident" id="2783525">tt</span><span class="op" id="2783527">.</span><span class="ident" id="2783528">elem</span><span class="op" id="2783532">,</span>&nbsp;<span class="builtintype" id="2783534">nil</span><span class="op" id="2783537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783542">if</span>&nbsp;<span class="ident" id="2783545">v</span><span class="op" id="2783546">.</span><span class="ident" id="2783547">flag</span><span class="op" id="2783551">&amp;</span><span class="ident" id="2783552">flagIndir</span>&nbsp;<span class="op" id="2783562">!=</span>&nbsp;<span class="num" id="2783565">0</span>&nbsp;<span class="op" id="2783567">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783573">rc</span><span class="op" id="2783575">.</span><span class="ident" id="2783576">val</span>&nbsp;<span class="op" id="2783580">=</span>&nbsp;<span class="ident" id="2783582">v</span><span class="op" id="2783583">.</span><span class="ident" id="2783584">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783591">}</span>&nbsp;<span class="keyword" id="2783593">else</span>&nbsp;<span class="op" id="2783598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783604">rc</span><span class="op" id="2783606">.</span><span class="ident" id="2783607">val</span>&nbsp;<span class="op" id="2783611">=</span>&nbsp;<span class="ident" id="2783613">unsafe</span><span class="op" id="2783619">.</span><span class="ident" id="2783620">Pointer</span><span class="op" id="2783627">(</span><span class="op" id="2783628">&amp;</span><span class="ident" id="2783629">v</span><span class="op" id="2783630">.</span><span class="ident" id="2783631">ptr</span><span class="op" id="2783634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783644">case</span>&nbsp;<span class="ident" id="2783649">SelectRecv</span><span class="op" id="2783659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783664">if</span>&nbsp;<span class="ident" id="2783667">c</span><span class="op" id="2783668">.</span><span class="ident" id="2783669">Send</span><span class="op" id="2783673">.</span><span class="ident" id="2783674">IsValid</span><span class="op" id="2783681">(</span><span class="op" id="2783682">)</span>&nbsp;<span class="op" id="2783684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2783690">panic</span><span class="op" id="2783695">(</span><span class="string" id="2783696">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2783741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783751">ch</span>&nbsp;<span class="op" id="2783754">:=</span>&nbsp;<span class="ident" id="2783757">c</span><span class="op" id="2783758">.</span><span class="ident" id="2783759">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783767">if</span>&nbsp;<span class="op" id="2783770">!</span><span class="ident" id="2783771">ch</span><span class="op" id="2783773">.</span><span class="ident" id="2783774">IsValid</span><span class="op" id="2783781">(</span><span class="op" id="2783782">)</span>&nbsp;<span class="op" id="2783784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783790">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783804">ch</span><span class="op" id="2783806">.</span><span class="ident" id="2783807">mustBe</span><span class="op" id="2783813">(</span><span class="ident" id="2783814">Chan</span><span class="op" id="2783818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783823">ch</span><span class="op" id="2783825">.</span><span class="ident" id="2783826">mustBeExported</span><span class="op" id="2783840">(</span><span class="op" id="2783841">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783846">tt</span>&nbsp;<span class="op" id="2783849">:=</span>&nbsp;<span class="op" id="2783852">(</span><span class="op" id="2783853">*</span><span class="ident" id="2783854">chanType</span><span class="op" id="2783862">)</span><span class="op" id="2783863">(</span><span class="ident" id="2783864">unsafe</span><span class="op" id="2783870">.</span><span class="ident" id="2783871">Pointer</span><span class="op" id="2783878">(</span><span class="ident" id="2783879">ch</span><span class="op" id="2783881">.</span><span class="ident" id="2783882">typ</span><span class="op" id="2783885">)</span><span class="op" id="2783886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2783891">if</span>&nbsp;<span class="ident" id="2783894">ChanDir</span><span class="op" id="2783901">(</span><span class="ident" id="2783902">tt</span><span class="op" id="2783904">.</span><span class="ident" id="2783905">dir</span><span class="op" id="2783908">)</span><span class="op" id="2783909">&amp;</span><span class="ident" id="2783910">RecvDir</span>&nbsp;<span class="op" id="2783918">==</span>&nbsp;<span class="num" id="2783921">0</span>&nbsp;<span class="op" id="2783923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2783929">panic</span><span class="op" id="2783934">(</span><span class="string" id="2783935">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2783989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2783994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2783999">rc</span><span class="op" id="2784001">.</span><span class="ident" id="2784002">ch</span>&nbsp;<span class="op" id="2784005">=</span>&nbsp;<span class="ident" id="2784007">ch</span><span class="op" id="2784009">.</span><span class="ident" id="2784010">pointer</span><span class="op" id="2784017">(</span><span class="op" id="2784018">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784023">rc</span><span class="op" id="2784025">.</span><span class="ident" id="2784026">typ</span>&nbsp;<span class="op" id="2784030">=</span>&nbsp;<span class="op" id="2784032">&amp;</span><span class="ident" id="2784033">tt</span><span class="op" id="2784035">.</span><span class="ident" id="2784036">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784045">rc</span><span class="op" id="2784047">.</span><span class="ident" id="2784048">val</span>&nbsp;<span class="op" id="2784052">=</span>&nbsp;<span class="ident" id="2784054">unsafe_New</span><span class="op" id="2784064">(</span><span class="ident" id="2784065">tt</span><span class="op" id="2784067">.</span><span class="ident" id="2784068">elem</span><span class="op" id="2784072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784083">chosen</span><span class="op" id="2784089">,</span>&nbsp;<span class="ident" id="2784091">recvOK</span>&nbsp;<span class="op" id="2784098">=</span>&nbsp;<span class="ident" id="2784100">rselect</span><span class="op" id="2784107">(</span><span class="ident" id="2784108">runcases</span><span class="op" id="2784116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784119">if</span>&nbsp;<span class="ident" id="2784122">runcases</span><span class="op" id="2784130">[</span><span class="ident" id="2784131">chosen</span><span class="op" id="2784137">]</span><span class="op" id="2784138">.</span><span class="ident" id="2784139">dir</span>&nbsp;<span class="op" id="2784143">==</span>&nbsp;<span class="builtintype" id="2784146">uintptr</span><span class="op" id="2784153">(</span><span class="ident" id="2784154">SelectRecv</span><span class="op" id="2784164">)</span>&nbsp;<span class="op" id="2784166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784170">tt</span>&nbsp;<span class="op" id="2784173">:=</span>&nbsp;<span class="op" id="2784176">(</span><span class="op" id="2784177">*</span><span class="ident" id="2784178">chanType</span><span class="op" id="2784186">)</span><span class="op" id="2784187">(</span><span class="ident" id="2784188">unsafe</span><span class="op" id="2784194">.</span><span class="ident" id="2784195">Pointer</span><span class="op" id="2784202">(</span><span class="ident" id="2784203">runcases</span><span class="op" id="2784211">[</span><span class="ident" id="2784212">chosen</span><span class="op" id="2784218">]</span><span class="op" id="2784219">.</span><span class="ident" id="2784220">typ</span><span class="op" id="2784223">)</span><span class="op" id="2784224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784228">t</span>&nbsp;<span class="op" id="2784230">:=</span>&nbsp;<span class="ident" id="2784233">tt</span><span class="op" id="2784235">.</span><span class="ident" id="2784236">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784243">p</span>&nbsp;<span class="op" id="2784245">:=</span>&nbsp;<span class="ident" id="2784248">runcases</span><span class="op" id="2784256">[</span><span class="ident" id="2784257">chosen</span><span class="op" id="2784263">]</span><span class="op" id="2784264">.</span><span class="ident" id="2784265">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784271">fl</span>&nbsp;<span class="op" id="2784274">:=</span>&nbsp;<span class="ident" id="2784277">flag</span><span class="op" id="2784281">(</span><span class="ident" id="2784282">t</span><span class="op" id="2784283">.</span><span class="ident" id="2784284">Kind</span><span class="op" id="2784288">(</span><span class="op" id="2784289">)</span><span class="op" id="2784290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784294">if</span>&nbsp;<span class="ident" id="2784297">ifaceIndir</span><span class="op" id="2784307">(</span><span class="ident" id="2784308">t</span><span class="op" id="2784309">)</span>&nbsp;<span class="op" id="2784311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784316">recv</span>&nbsp;<span class="op" id="2784321">=</span>&nbsp;<span class="ident" id="2784323">Value</span><span class="op" id="2784328">{</span><span class="ident" id="2784329">t</span><span class="op" id="2784330">,</span>&nbsp;<span class="ident" id="2784332">p</span><span class="op" id="2784333">,</span>&nbsp;<span class="ident" id="2784335">fl</span>&nbsp;<span class="op" id="2784338">|</span>&nbsp;<span class="ident" id="2784340">flagIndir</span><span class="op" id="2784349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784353">}</span>&nbsp;<span class="keyword" id="2784355">else</span>&nbsp;<span class="op" id="2784360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2784365">recv</span>&nbsp;<span class="op" id="2784370">=</span>&nbsp;<span class="ident" id="2784372">Value</span><span class="op" id="2784377">{</span><span class="ident" id="2784378">t</span><span class="op" id="2784379">,</span>&nbsp;<span class="op" id="2784381">*</span><span class="op" id="2784382">(</span><span class="op" id="2784383">*</span><span class="ident" id="2784384">unsafe</span><span class="op" id="2784390">.</span><span class="ident" id="2784391">Pointer</span><span class="op" id="2784398">)</span><span class="op" id="2784399">(</span><span class="ident" id="2784400">p</span><span class="op" id="2784401">)</span><span class="op" id="2784402">,</span>&nbsp;<span class="ident" id="2784404">fl</span><span class="op" id="2784406">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784416">return</span>&nbsp;<span class="ident" id="2784423">chosen</span><span class="op" id="2784429">,</span>&nbsp;<span class="ident" id="2784431">recv</span><span class="op" id="2784435">,</span>&nbsp;<span class="ident" id="2784437">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2784444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2784447">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784471">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2784505">func</span>&nbsp;<span class="ident" id="2784510">unsafe_New</span><span class="op" id="2784520">(</span><span class="op" id="2784521">*</span><span class="ident" id="2784522">rtype</span><span class="op" id="2784527">)</span>&nbsp;<span class="ident" id="2784529">unsafe</span><span class="op" id="2784535">.</span><span class="ident" id="2784536">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2784544">func</span>&nbsp;<span class="ident" id="2784549">unsafe_NewArray</span><span class="op" id="2784564">(</span><span class="op" id="2784565">*</span><span class="ident" id="2784566">rtype</span><span class="op" id="2784571">,</span>&nbsp;<span class="builtintype" id="2784573">int</span><span class="op" id="2784576">)</span>&nbsp;<span class="ident" id="2784578">unsafe</span><span class="op" id="2784584">.</span><span class="ident" id="2784585">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784594">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2784650">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2784705">func</span>&nbsp;<span class="ident" id="2784710">MakeSlice</span><span class="op" id="2784719">(</span><span class="ident" id="2784720">typ</span>&nbsp;<span class="ident" id="2784724">Type</span><span class="op" id="2784728">,</span>&nbsp;<span class="builtinfunc" id="2784730">len</span><span class="op" id="2784733">,</span>&nbsp;<span class="builtinfunc" id="2784735">cap</span>&nbsp;<span class="builtintype" id="2784739">int</span><span class="op" id="2784742">)</span>&nbsp;<span class="ident" id="2784744">Value</span>&nbsp;<span class="op" id="2784750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784753">if</span>&nbsp;<span class="ident" id="2784756">typ</span><span class="op" id="2784759">.</span><span class="ident" id="2784760">Kind</span><span class="op" id="2784764">(</span><span class="op" id="2784765">)</span>&nbsp;<span class="op" id="2784767">!=</span>&nbsp;<span class="ident" id="2784770">Slice</span>&nbsp;<span class="op" id="2784776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2784780">panic</span><span class="op" id="2784785">(</span><span class="string" id="2784786">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2784823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784829">if</span>&nbsp;<span class="builtinfunc" id="2784832">len</span>&nbsp;<span class="op" id="2784836">&lt;</span>&nbsp;<span class="num" id="2784838">0</span>&nbsp;<span class="op" id="2784840">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2784844">panic</span><span class="op" id="2784849">(</span><span class="string" id="2784850">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2784883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784889">if</span>&nbsp;<span class="builtinfunc" id="2784892">cap</span>&nbsp;<span class="op" id="2784896">&lt;</span>&nbsp;<span class="num" id="2784898">0</span>&nbsp;<span class="op" id="2784900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2784904">panic</span><span class="op" id="2784909">(</span><span class="string" id="2784910">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2784943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2784946">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2784949">if</span>&nbsp;<span class="builtinfunc" id="2784952">len</span>&nbsp;<span class="op" id="2784956">&gt;</span>&nbsp;<span class="builtinfunc" id="2784958">cap</span>&nbsp;<span class="op" id="2784962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2784966">panic</span><span class="op" id="2784971">(</span><span class="string" id="2784972">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2785002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785009">s</span>&nbsp;<span class="op" id="2785011">:=</span>&nbsp;<span class="ident" id="2785014">sliceHeader</span><span class="op" id="2785025">{</span><span class="ident" id="2785026">unsafe_NewArray</span><span class="op" id="2785041">(</span><span class="ident" id="2785042">typ</span><span class="op" id="2785045">.</span><span class="ident" id="2785046">Elem</span><span class="op" id="2785050">(</span><span class="op" id="2785051">)</span><span class="op" id="2785052">.</span><span class="op" id="2785053">(</span><span class="op" id="2785054">*</span><span class="ident" id="2785055">rtype</span><span class="op" id="2785060">)</span><span class="op" id="2785061">,</span>&nbsp;<span class="builtinfunc" id="2785063">cap</span><span class="op" id="2785066">)</span><span class="op" id="2785067">,</span>&nbsp;<span class="builtinfunc" id="2785069">len</span><span class="op" id="2785072">,</span>&nbsp;<span class="builtinfunc" id="2785074">cap</span><span class="op" id="2785077">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785080">return</span>&nbsp;<span class="ident" id="2785087">Value</span><span class="op" id="2785092">{</span><span class="ident" id="2785093">typ</span><span class="op" id="2785096">.</span><span class="ident" id="2785097">common</span><span class="op" id="2785103">(</span><span class="op" id="2785104">)</span><span class="op" id="2785105">,</span>&nbsp;<span class="ident" id="2785107">unsafe</span><span class="op" id="2785113">.</span><span class="ident" id="2785114">Pointer</span><span class="op" id="2785121">(</span><span class="op" id="2785122">&amp;</span><span class="ident" id="2785123">s</span><span class="op" id="2785124">)</span><span class="op" id="2785125">,</span>&nbsp;<span class="ident" id="2785127">flagIndir</span>&nbsp;<span class="op" id="2785137">|</span>&nbsp;<span class="ident" id="2785139">flag</span><span class="op" id="2785143">(</span><span class="ident" id="2785144">Slice</span><span class="op" id="2785149">)</span><span class="op" id="2785150">}</span><br>
<span class="lineno"></span><span class="op" id="2785152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785155">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2785230">func</span>&nbsp;<span class="ident" id="2785235">MakeChan</span><span class="op" id="2785243">(</span><span class="ident" id="2785244">typ</span>&nbsp;<span class="ident" id="2785248">Type</span><span class="op" id="2785252">,</span>&nbsp;<span class="ident" id="2785254">buffer</span>&nbsp;<span class="builtintype" id="2785261">int</span><span class="op" id="2785264">)</span>&nbsp;<span class="ident" id="2785266">Value</span>&nbsp;<span class="op" id="2785272">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785275">if</span>&nbsp;<span class="ident" id="2785278">typ</span><span class="op" id="2785281">.</span><span class="ident" id="2785282">Kind</span><span class="op" id="2785286">(</span><span class="op" id="2785287">)</span>&nbsp;<span class="op" id="2785289">!=</span>&nbsp;<span class="ident" id="2785292">Chan</span>&nbsp;<span class="op" id="2785297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2785301">panic</span><span class="op" id="2785306">(</span><span class="string" id="2785307">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2785342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785348">if</span>&nbsp;<span class="ident" id="2785351">buffer</span>&nbsp;<span class="op" id="2785358">&lt;</span>&nbsp;<span class="num" id="2785360">0</span>&nbsp;<span class="op" id="2785362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2785366">panic</span><span class="op" id="2785371">(</span><span class="string" id="2785372">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2785412">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785418">if</span>&nbsp;<span class="ident" id="2785421">typ</span><span class="op" id="2785424">.</span><span class="ident" id="2785425">ChanDir</span><span class="op" id="2785432">(</span><span class="op" id="2785433">)</span>&nbsp;<span class="op" id="2785435">!=</span>&nbsp;<span class="ident" id="2785438">BothDir</span>&nbsp;<span class="op" id="2785446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2785450">panic</span><span class="op" id="2785455">(</span><span class="string" id="2785456">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2785503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785509">ch</span>&nbsp;<span class="op" id="2785512">:=</span>&nbsp;<span class="ident" id="2785515">makechan</span><span class="op" id="2785523">(</span><span class="ident" id="2785524">typ</span><span class="op" id="2785527">.</span><span class="op" id="2785528">(</span><span class="op" id="2785529">*</span><span class="ident" id="2785530">rtype</span><span class="op" id="2785535">)</span><span class="op" id="2785536">,</span>&nbsp;<span class="ident" id="2785538">uint64</span><span class="op" id="2785544">(</span><span class="ident" id="2785545">buffer</span><span class="op" id="2785551">)</span><span class="op" id="2785552">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785555">return</span>&nbsp;<span class="ident" id="2785562">Value</span><span class="op" id="2785567">{</span><span class="ident" id="2785568">typ</span><span class="op" id="2785571">.</span><span class="ident" id="2785572">common</span><span class="op" id="2785578">(</span><span class="op" id="2785579">)</span><span class="op" id="2785580">,</span>&nbsp;<span class="ident" id="2785582">ch</span><span class="op" id="2785584">,</span>&nbsp;<span class="ident" id="2785586">flag</span><span class="op" id="2785590">(</span><span class="ident" id="2785591">Chan</span><span class="op" id="2785595">)</span><span class="op" id="2785596">}</span><br>
<span class="lineno"></span><span class="op" id="2785598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785601">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2785653">func</span>&nbsp;<span class="ident" id="2785658">MakeMap</span><span class="op" id="2785665">(</span><span class="ident" id="2785666">typ</span>&nbsp;<span class="ident" id="2785670">Type</span><span class="op" id="2785674">)</span>&nbsp;<span class="ident" id="2785676">Value</span>&nbsp;<span class="op" id="2785682">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785685">if</span>&nbsp;<span class="ident" id="2785688">typ</span><span class="op" id="2785691">.</span><span class="ident" id="2785692">Kind</span><span class="op" id="2785696">(</span><span class="op" id="2785697">)</span>&nbsp;<span class="op" id="2785699">!=</span>&nbsp;<span class="ident" id="2785702">Map</span>&nbsp;<span class="op" id="2785706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2785710">panic</span><span class="op" id="2785715">(</span><span class="string" id="2785716">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2785749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2785752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2785755">m</span>&nbsp;<span class="op" id="2785757">:=</span>&nbsp;<span class="ident" id="2785760">makemap</span><span class="op" id="2785767">(</span><span class="ident" id="2785768">typ</span><span class="op" id="2785771">.</span><span class="op" id="2785772">(</span><span class="op" id="2785773">*</span><span class="ident" id="2785774">rtype</span><span class="op" id="2785779">)</span><span class="op" id="2785780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2785783">return</span>&nbsp;<span class="ident" id="2785790">Value</span><span class="op" id="2785795">{</span><span class="ident" id="2785796">typ</span><span class="op" id="2785799">.</span><span class="ident" id="2785800">common</span><span class="op" id="2785806">(</span><span class="op" id="2785807">)</span><span class="op" id="2785808">,</span>&nbsp;<span class="ident" id="2785810">m</span><span class="op" id="2785811">,</span>&nbsp;<span class="ident" id="2785813">flag</span><span class="op" id="2785817">(</span><span class="ident" id="2785818">Map</span><span class="op" id="2785821">)</span><span class="op" id="2785822">}</span><br>
<span class="lineno">2030</span><span class="op" id="2785824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785827">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2785875">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2785932">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2785978">func</span>&nbsp;<span class="ident" id="2785983">Indirect</span><span class="op" id="2785991">(</span><span class="ident" id="2785992">v</span>&nbsp;<span class="ident" id="2785994">Value</span><span class="op" id="2785999">)</span>&nbsp;<span class="ident" id="2786001">Value</span>&nbsp;<span class="op" id="2786007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786010">if</span>&nbsp;<span class="ident" id="2786013">v</span><span class="op" id="2786014">.</span><span class="ident" id="2786015">Kind</span><span class="op" id="2786019">(</span><span class="op" id="2786020">)</span>&nbsp;<span class="op" id="2786022">!=</span>&nbsp;<span class="ident" id="2786025">Ptr</span>&nbsp;<span class="op" id="2786029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786033">return</span>&nbsp;<span class="ident" id="2786040">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2786043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786046">return</span>&nbsp;<span class="ident" id="2786053">v</span><span class="op" id="2786054">.</span><span class="ident" id="2786055">Elem</span><span class="op" id="2786059">(</span><span class="op" id="2786060">)</span><br>
<span class="lineno">2040</span><span class="op" id="2786062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786065">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2786130">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2786198">func</span>&nbsp;<span class="ident" id="2786203">ValueOf</span><span class="op" id="2786210">(</span><span class="ident" id="2786211">i</span>&nbsp;<span class="keyword" id="2786213">interface</span><span class="op" id="2786222">{</span><span class="op" id="2786223">}</span><span class="op" id="2786224">)</span>&nbsp;<span class="ident" id="2786226">Value</span>&nbsp;<span class="op" id="2786232">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786235">if</span>&nbsp;<span class="ident" id="2786238">i</span>&nbsp;<span class="op" id="2786240">==</span>&nbsp;<span class="builtintype" id="2786243">nil</span>&nbsp;<span class="op" id="2786247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786251">return</span>&nbsp;<span class="ident" id="2786258">Value</span><span class="op" id="2786263">{</span><span class="op" id="2786264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2786267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786271">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786316">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786370">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786418">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2786461">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786503">escapes</span><span class="op" id="2786510">(</span><span class="ident" id="2786511">i</span><span class="op" id="2786512">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786516">return</span>&nbsp;<span class="ident" id="2786523">unpackEface</span><span class="op" id="2786534">(</span><span class="ident" id="2786535">i</span><span class="op" id="2786536">)</span><br>
<span class="lineno"></span><span class="op" id="2786538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786541">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2786617">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2786685">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2786722">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2786798">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2786857">func</span>&nbsp;<span class="ident" id="2786862">Zero</span><span class="op" id="2786866">(</span><span class="ident" id="2786867">typ</span>&nbsp;<span class="ident" id="2786871">Type</span><span class="op" id="2786875">)</span>&nbsp;<span class="ident" id="2786877">Value</span>&nbsp;<span class="op" id="2786883">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786886">if</span>&nbsp;<span class="ident" id="2786889">typ</span>&nbsp;<span class="op" id="2786893">==</span>&nbsp;<span class="builtintype" id="2786896">nil</span>&nbsp;<span class="op" id="2786900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2786904">panic</span><span class="op" id="2786909">(</span><span class="string" id="2786910">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2786930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2786933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786936">t</span>&nbsp;<span class="op" id="2786938">:=</span>&nbsp;<span class="ident" id="2786941">typ</span><span class="op" id="2786944">.</span><span class="ident" id="2786945">common</span><span class="op" id="2786951">(</span><span class="op" id="2786952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2786955">fl</span>&nbsp;<span class="op" id="2786958">:=</span>&nbsp;<span class="ident" id="2786961">flag</span><span class="op" id="2786965">(</span><span class="ident" id="2786966">t</span><span class="op" id="2786967">.</span><span class="ident" id="2786968">Kind</span><span class="op" id="2786972">(</span><span class="op" id="2786973">)</span><span class="op" id="2786974">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786977">if</span>&nbsp;<span class="ident" id="2786980">ifaceIndir</span><span class="op" id="2786990">(</span><span class="ident" id="2786991">t</span><span class="op" id="2786992">)</span>&nbsp;<span class="op" id="2786994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2786998">return</span>&nbsp;<span class="ident" id="2787005">Value</span><span class="op" id="2787010">{</span><span class="ident" id="2787011">t</span><span class="op" id="2787012">,</span>&nbsp;<span class="ident" id="2787014">unsafe_New</span><span class="op" id="2787024">(</span><span class="ident" id="2787025">typ</span><span class="op" id="2787028">.</span><span class="op" id="2787029">(</span><span class="op" id="2787030">*</span><span class="ident" id="2787031">rtype</span><span class="op" id="2787036">)</span><span class="op" id="2787037">)</span><span class="op" id="2787038">,</span>&nbsp;<span class="ident" id="2787040">fl</span>&nbsp;<span class="op" id="2787043">|</span>&nbsp;<span class="ident" id="2787045">flagIndir</span><span class="op" id="2787054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787060">return</span>&nbsp;<span class="ident" id="2787067">Value</span><span class="op" id="2787072">{</span><span class="ident" id="2787073">t</span><span class="op" id="2787074">,</span>&nbsp;<span class="builtintype" id="2787076">nil</span><span class="op" id="2787079">,</span>&nbsp;<span class="ident" id="2787081">fl</span><span class="op" id="2787083">}</span><br>
<span class="lineno"></span><span class="op" id="2787085">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2787088">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2787154">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2787232">func</span>&nbsp;<span class="ident" id="2787237">New</span><span class="op" id="2787240">(</span><span class="ident" id="2787241">typ</span>&nbsp;<span class="ident" id="2787245">Type</span><span class="op" id="2787249">)</span>&nbsp;<span class="ident" id="2787251">Value</span>&nbsp;<span class="op" id="2787257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787260">if</span>&nbsp;<span class="ident" id="2787263">typ</span>&nbsp;<span class="op" id="2787267">==</span>&nbsp;<span class="builtintype" id="2787270">nil</span>&nbsp;<span class="op" id="2787274">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2787278">panic</span><span class="op" id="2787283">(</span><span class="string" id="2787284">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2787303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787309">ptr</span>&nbsp;<span class="op" id="2787313">:=</span>&nbsp;<span class="ident" id="2787316">unsafe_New</span><span class="op" id="2787326">(</span><span class="ident" id="2787327">typ</span><span class="op" id="2787330">.</span><span class="op" id="2787331">(</span><span class="op" id="2787332">*</span><span class="ident" id="2787333">rtype</span><span class="op" id="2787338">)</span><span class="op" id="2787339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787342">fl</span>&nbsp;<span class="op" id="2787345">:=</span>&nbsp;<span class="ident" id="2787348">flag</span><span class="op" id="2787352">(</span><span class="ident" id="2787353">Ptr</span><span class="op" id="2787356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787359">return</span>&nbsp;<span class="ident" id="2787366">Value</span><span class="op" id="2787371">{</span><span class="ident" id="2787372">typ</span><span class="op" id="2787375">.</span><span class="ident" id="2787376">common</span><span class="op" id="2787382">(</span><span class="op" id="2787383">)</span><span class="op" id="2787384">.</span><span class="ident" id="2787385">ptrTo</span><span class="op" id="2787390">(</span><span class="op" id="2787391">)</span><span class="op" id="2787392">,</span>&nbsp;<span class="ident" id="2787394">ptr</span><span class="op" id="2787397">,</span>&nbsp;<span class="ident" id="2787399">fl</span><span class="op" id="2787401">}</span><br>
<span class="lineno">2085</span><span class="op" id="2787403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2787406">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2787472">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2787516">func</span>&nbsp;<span class="ident" id="2787521">NewAt</span><span class="op" id="2787526">(</span><span class="ident" id="2787527">typ</span>&nbsp;<span class="ident" id="2787531">Type</span><span class="op" id="2787535">,</span>&nbsp;<span class="ident" id="2787537">p</span>&nbsp;<span class="ident" id="2787539">unsafe</span><span class="op" id="2787545">.</span><span class="ident" id="2787546">Pointer</span><span class="op" id="2787553">)</span>&nbsp;<span class="ident" id="2787555">Value</span>&nbsp;<span class="op" id="2787561">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787564">fl</span>&nbsp;<span class="op" id="2787567">:=</span>&nbsp;<span class="ident" id="2787570">flag</span><span class="op" id="2787574">(</span><span class="ident" id="2787575">Ptr</span><span class="op" id="2787578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787581">return</span>&nbsp;<span class="ident" id="2787588">Value</span><span class="op" id="2787593">{</span><span class="ident" id="2787594">typ</span><span class="op" id="2787597">.</span><span class="ident" id="2787598">common</span><span class="op" id="2787604">(</span><span class="op" id="2787605">)</span><span class="op" id="2787606">.</span><span class="ident" id="2787607">ptrTo</span><span class="op" id="2787612">(</span><span class="op" id="2787613">)</span><span class="op" id="2787614">,</span>&nbsp;<span class="ident" id="2787616">p</span><span class="op" id="2787617">,</span>&nbsp;<span class="ident" id="2787619">fl</span><span class="op" id="2787621">}</span><br>
<span class="lineno"></span><span class="op" id="2787623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2787626">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2787694">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2787738">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2787824">func</span>&nbsp;<span class="op" id="2787829">(</span><span class="ident" id="2787830">v</span>&nbsp;<span class="ident" id="2787832">Value</span><span class="op" id="2787837">)</span>&nbsp;<span class="ident" id="2787839">assignTo</span><span class="op" id="2787847">(</span><span class="ident" id="2787848">context</span>&nbsp;<span class="builtintype" id="2787856">string</span><span class="op" id="2787862">,</span>&nbsp;<span class="ident" id="2787864">dst</span>&nbsp;<span class="op" id="2787868">*</span><span class="ident" id="2787869">rtype</span><span class="op" id="2787874">,</span>&nbsp;<span class="ident" id="2787876">target</span>&nbsp;<span class="ident" id="2787883">unsafe</span><span class="op" id="2787889">.</span><span class="ident" id="2787890">Pointer</span><span class="op" id="2787897">)</span>&nbsp;<span class="ident" id="2787899">Value</span>&nbsp;<span class="op" id="2787905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787908">if</span>&nbsp;<span class="ident" id="2787911">v</span><span class="op" id="2787912">.</span><span class="ident" id="2787913">flag</span><span class="op" id="2787917">&amp;</span><span class="ident" id="2787918">flagMethod</span>&nbsp;<span class="op" id="2787929">!=</span>&nbsp;<span class="num" id="2787932">0</span>&nbsp;<span class="op" id="2787934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2787938">v</span>&nbsp;<span class="op" id="2787940">=</span>&nbsp;<span class="ident" id="2787942">makeMethodValue</span><span class="op" id="2787957">(</span><span class="ident" id="2787958">context</span><span class="op" id="2787965">,</span>&nbsp;<span class="ident" id="2787967">v</span><span class="op" id="2787968">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2787971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787975">switch</span>&nbsp;<span class="op" id="2787982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2787985">case</span>&nbsp;<span class="ident" id="2787990">directlyAssignable</span><span class="op" id="2788008">(</span><span class="ident" id="2788009">dst</span><span class="op" id="2788012">,</span>&nbsp;<span class="ident" id="2788014">v</span><span class="op" id="2788015">.</span><span class="ident" id="2788016">typ</span><span class="op" id="2788019">)</span><span class="op" id="2788020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788024">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788064">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788106">v</span><span class="op" id="2788107">.</span><span class="ident" id="2788108">typ</span>&nbsp;<span class="op" id="2788112">=</span>&nbsp;<span class="ident" id="2788114">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788120">fl</span>&nbsp;<span class="op" id="2788123">:=</span>&nbsp;<span class="ident" id="2788126">v</span><span class="op" id="2788127">.</span><span class="ident" id="2788128">flag</span>&nbsp;<span class="op" id="2788133">&amp;</span>&nbsp;<span class="op" id="2788135">(</span><span class="ident" id="2788136">flagRO</span>&nbsp;<span class="op" id="2788143">|</span>&nbsp;<span class="ident" id="2788145">flagAddr</span>&nbsp;<span class="op" id="2788154">|</span>&nbsp;<span class="ident" id="2788156">flagIndir</span><span class="op" id="2788165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788169">fl</span>&nbsp;<span class="op" id="2788172">|=</span>&nbsp;<span class="ident" id="2788175">flag</span><span class="op" id="2788179">(</span><span class="ident" id="2788180">dst</span><span class="op" id="2788183">.</span><span class="ident" id="2788184">Kind</span><span class="op" id="2788188">(</span><span class="op" id="2788189">)</span><span class="op" id="2788190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788194">return</span>&nbsp;<span class="ident" id="2788201">Value</span><span class="op" id="2788206">{</span><span class="ident" id="2788207">dst</span><span class="op" id="2788210">,</span>&nbsp;<span class="ident" id="2788212">v</span><span class="op" id="2788213">.</span><span class="ident" id="2788214">ptr</span><span class="op" id="2788217">,</span>&nbsp;<span class="ident" id="2788219">fl</span><span class="op" id="2788221">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788225">case</span>&nbsp;<span class="ident" id="2788230">implements</span><span class="op" id="2788240">(</span><span class="ident" id="2788241">dst</span><span class="op" id="2788244">,</span>&nbsp;<span class="ident" id="2788246">v</span><span class="op" id="2788247">.</span><span class="ident" id="2788248">typ</span><span class="op" id="2788251">)</span><span class="op" id="2788252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788256">if</span>&nbsp;<span class="ident" id="2788259">target</span>&nbsp;<span class="op" id="2788266">==</span>&nbsp;<span class="builtintype" id="2788269">nil</span>&nbsp;<span class="op" id="2788273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788278">target</span>&nbsp;<span class="op" id="2788285">=</span>&nbsp;<span class="ident" id="2788287">unsafe_New</span><span class="op" id="2788297">(</span><span class="ident" id="2788298">dst</span><span class="op" id="2788301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788305">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788309">x</span>&nbsp;<span class="op" id="2788311">:=</span>&nbsp;<span class="ident" id="2788314">valueInterface</span><span class="op" id="2788328">(</span><span class="ident" id="2788329">v</span><span class="op" id="2788330">,</span>&nbsp;<span class="builtintype" id="2788332">false</span><span class="op" id="2788337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788341">if</span>&nbsp;<span class="ident" id="2788344">dst</span><span class="op" id="2788347">.</span><span class="ident" id="2788348">NumMethod</span><span class="op" id="2788357">(</span><span class="op" id="2788358">)</span>&nbsp;<span class="op" id="2788360">==</span>&nbsp;<span class="num" id="2788363">0</span>&nbsp;<span class="op" id="2788365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788370">*</span><span class="op" id="2788371">(</span><span class="op" id="2788372">*</span><span class="keyword" id="2788373">interface</span><span class="op" id="2788382">{</span><span class="op" id="2788383">}</span><span class="op" id="2788384">)</span><span class="op" id="2788385">(</span><span class="ident" id="2788386">target</span><span class="op" id="2788392">)</span>&nbsp;<span class="op" id="2788394">=</span>&nbsp;<span class="ident" id="2788396">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788400">}</span>&nbsp;<span class="keyword" id="2788402">else</span>&nbsp;<span class="op" id="2788407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788412">ifaceE2I</span><span class="op" id="2788420">(</span><span class="ident" id="2788421">dst</span><span class="op" id="2788424">,</span>&nbsp;<span class="ident" id="2788426">x</span><span class="op" id="2788427">,</span>&nbsp;<span class="ident" id="2788429">target</span><span class="op" id="2788435">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788443">return</span>&nbsp;<span class="ident" id="2788450">Value</span><span class="op" id="2788455">{</span><span class="ident" id="2788456">dst</span><span class="op" id="2788459">,</span>&nbsp;<span class="ident" id="2788461">target</span><span class="op" id="2788467">,</span>&nbsp;<span class="ident" id="2788469">flagIndir</span>&nbsp;<span class="op" id="2788479">|</span>&nbsp;<span class="ident" id="2788481">flag</span><span class="op" id="2788485">(</span><span class="ident" id="2788486">Interface</span><span class="op" id="2788495">)</span><span class="op" id="2788496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2788503">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2788515">panic</span><span class="op" id="2788520">(</span><span class="ident" id="2788521">context</span>&nbsp;<span class="op" id="2788529">+</span>&nbsp;<span class="string" id="2788531">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2788550">+</span>&nbsp;<span class="ident" id="2788552">v</span><span class="op" id="2788553">.</span><span class="ident" id="2788554">typ</span><span class="op" id="2788557">.</span><span class="ident" id="2788558">String</span><span class="op" id="2788564">(</span><span class="op" id="2788565">)</span>&nbsp;<span class="op" id="2788567">+</span>&nbsp;<span class="string" id="2788569">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2788599">+</span>&nbsp;<span class="ident" id="2788601">dst</span><span class="op" id="2788604">.</span><span class="ident" id="2788605">String</span><span class="op" id="2788611">(</span><span class="op" id="2788612">)</span><span class="op" id="2788613">)</span><br>
<span class="lineno"></span><span class="op" id="2788615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2788618">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2788670">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2788730">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2788775">func</span>&nbsp;<span class="op" id="2788780">(</span><span class="ident" id="2788781">v</span>&nbsp;<span class="ident" id="2788783">Value</span><span class="op" id="2788788">)</span>&nbsp;<span class="ident" id="2788790">Convert</span><span class="op" id="2788797">(</span><span class="ident" id="2788798">t</span>&nbsp;<span class="ident" id="2788800">Type</span><span class="op" id="2788804">)</span>&nbsp;<span class="ident" id="2788806">Value</span>&nbsp;<span class="op" id="2788812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788815">if</span>&nbsp;<span class="ident" id="2788818">v</span><span class="op" id="2788819">.</span><span class="ident" id="2788820">flag</span><span class="op" id="2788824">&amp;</span><span class="ident" id="2788825">flagMethod</span>&nbsp;<span class="op" id="2788836">!=</span>&nbsp;<span class="num" id="2788839">0</span>&nbsp;<span class="op" id="2788841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788845">v</span>&nbsp;<span class="op" id="2788847">=</span>&nbsp;<span class="ident" id="2788849">makeMethodValue</span><span class="op" id="2788864">(</span><span class="string" id="2788865">&#34;Convert&#34;</span><span class="op" id="2788874">,</span>&nbsp;<span class="ident" id="2788876">v</span><span class="op" id="2788877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2788880">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2788883">op</span>&nbsp;<span class="op" id="2788886">:=</span>&nbsp;<span class="ident" id="2788889">convertOp</span><span class="op" id="2788898">(</span><span class="ident" id="2788899">t</span><span class="op" id="2788900">.</span><span class="ident" id="2788901">common</span><span class="op" id="2788907">(</span><span class="op" id="2788908">)</span><span class="op" id="2788909">,</span>&nbsp;<span class="ident" id="2788911">v</span><span class="op" id="2788912">.</span><span class="ident" id="2788913">typ</span><span class="op" id="2788916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2788919">if</span>&nbsp;<span class="ident" id="2788922">op</span>&nbsp;<span class="op" id="2788925">==</span>&nbsp;<span class="builtintype" id="2788928">nil</span>&nbsp;<span class="op" id="2788932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2788936">panic</span><span class="op" id="2788941">(</span><span class="string" id="2788942">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2788982">+</span>&nbsp;<span class="ident" id="2788984">v</span><span class="op" id="2788985">.</span><span class="ident" id="2788986">typ</span><span class="op" id="2788989">.</span><span class="ident" id="2788990">String</span><span class="op" id="2788996">(</span><span class="op" id="2788997">)</span>&nbsp;<span class="op" id="2788999">+</span>&nbsp;<span class="string" id="2789001">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2789033">+</span>&nbsp;<span class="ident" id="2789035">t</span><span class="op" id="2789036">.</span><span class="ident" id="2789037">String</span><span class="op" id="2789043">(</span><span class="op" id="2789044">)</span><span class="op" id="2789045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789051">return</span>&nbsp;<span class="ident" id="2789058">op</span><span class="op" id="2789060">(</span><span class="ident" id="2789061">v</span><span class="op" id="2789062">,</span>&nbsp;<span class="ident" id="2789064">t</span><span class="op" id="2789065">)</span><br>
<span class="lineno">2140</span><span class="op" id="2789067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2789070">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2789135">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2789215">func</span>&nbsp;<span class="ident" id="2789220">convertOp</span><span class="op" id="2789229">(</span><span class="ident" id="2789230">dst</span><span class="op" id="2789233">,</span>&nbsp;<span class="ident" id="2789235">src</span>&nbsp;<span class="op" id="2789239">*</span><span class="ident" id="2789240">rtype</span><span class="op" id="2789245">)</span>&nbsp;<span class="keyword" id="2789247">func</span><span class="op" id="2789251">(</span><span class="ident" id="2789252">Value</span><span class="op" id="2789257">,</span>&nbsp;<span class="ident" id="2789259">Type</span><span class="op" id="2789263">)</span>&nbsp;<span class="ident" id="2789265">Value</span>&nbsp;<span class="op" id="2789271">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789274">switch</span>&nbsp;<span class="ident" id="2789281">src</span><span class="op" id="2789284">.</span><span class="ident" id="2789285">Kind</span><span class="op" id="2789289">(</span><span class="op" id="2789290">)</span>&nbsp;<span class="op" id="2789292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789295">case</span>&nbsp;<span class="ident" id="2789300">Int</span><span class="op" id="2789303">,</span>&nbsp;<span class="ident" id="2789305">Int8</span><span class="op" id="2789309">,</span>&nbsp;<span class="ident" id="2789311">Int16</span><span class="op" id="2789316">,</span>&nbsp;<span class="ident" id="2789318">Int32</span><span class="op" id="2789323">,</span>&nbsp;<span class="ident" id="2789325">Int64</span><span class="op" id="2789330">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789334">switch</span>&nbsp;<span class="ident" id="2789341">dst</span><span class="op" id="2789344">.</span><span class="ident" id="2789345">Kind</span><span class="op" id="2789349">(</span><span class="op" id="2789350">)</span>&nbsp;<span class="op" id="2789352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789356">case</span>&nbsp;<span class="ident" id="2789361">Int</span><span class="op" id="2789364">,</span>&nbsp;<span class="ident" id="2789366">Int8</span><span class="op" id="2789370">,</span>&nbsp;<span class="ident" id="2789372">Int16</span><span class="op" id="2789377">,</span>&nbsp;<span class="ident" id="2789379">Int32</span><span class="op" id="2789384">,</span>&nbsp;<span class="ident" id="2789386">Int64</span><span class="op" id="2789391">,</span>&nbsp;<span class="ident" id="2789393">Uint</span><span class="op" id="2789397">,</span>&nbsp;<span class="ident" id="2789399">Uint8</span><span class="op" id="2789404">,</span>&nbsp;<span class="ident" id="2789406">Uint16</span><span class="op" id="2789412">,</span>&nbsp;<span class="ident" id="2789414">Uint32</span><span class="op" id="2789420">,</span>&nbsp;<span class="ident" id="2789422">Uint64</span><span class="op" id="2789428">,</span>&nbsp;<span class="ident" id="2789430">Uintptr</span><span class="op" id="2789437">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789442">return</span>&nbsp;<span class="ident" id="2789449">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789458">case</span>&nbsp;<span class="ident" id="2789463">Float32</span><span class="op" id="2789470">,</span>&nbsp;<span class="ident" id="2789472">Float64</span><span class="op" id="2789479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789484">return</span>&nbsp;<span class="ident" id="2789491">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789505">case</span>&nbsp;<span class="ident" id="2789510">String</span><span class="op" id="2789516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789521">return</span>&nbsp;<span class="ident" id="2789528">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789543">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789547">case</span>&nbsp;<span class="ident" id="2789552">Uint</span><span class="op" id="2789556">,</span>&nbsp;<span class="ident" id="2789558">Uint8</span><span class="op" id="2789563">,</span>&nbsp;<span class="ident" id="2789565">Uint16</span><span class="op" id="2789571">,</span>&nbsp;<span class="ident" id="2789573">Uint32</span><span class="op" id="2789579">,</span>&nbsp;<span class="ident" id="2789581">Uint64</span><span class="op" id="2789587">,</span>&nbsp;<span class="ident" id="2789589">Uintptr</span><span class="op" id="2789596">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789600">switch</span>&nbsp;<span class="ident" id="2789607">dst</span><span class="op" id="2789610">.</span><span class="ident" id="2789611">Kind</span><span class="op" id="2789615">(</span><span class="op" id="2789616">)</span>&nbsp;<span class="op" id="2789618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789622">case</span>&nbsp;<span class="ident" id="2789627">Int</span><span class="op" id="2789630">,</span>&nbsp;<span class="ident" id="2789632">Int8</span><span class="op" id="2789636">,</span>&nbsp;<span class="ident" id="2789638">Int16</span><span class="op" id="2789643">,</span>&nbsp;<span class="ident" id="2789645">Int32</span><span class="op" id="2789650">,</span>&nbsp;<span class="ident" id="2789652">Int64</span><span class="op" id="2789657">,</span>&nbsp;<span class="ident" id="2789659">Uint</span><span class="op" id="2789663">,</span>&nbsp;<span class="ident" id="2789665">Uint8</span><span class="op" id="2789670">,</span>&nbsp;<span class="ident" id="2789672">Uint16</span><span class="op" id="2789678">,</span>&nbsp;<span class="ident" id="2789680">Uint32</span><span class="op" id="2789686">,</span>&nbsp;<span class="ident" id="2789688">Uint64</span><span class="op" id="2789694">,</span>&nbsp;<span class="ident" id="2789696">Uintptr</span><span class="op" id="2789703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789708">return</span>&nbsp;<span class="ident" id="2789715">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789725">case</span>&nbsp;<span class="ident" id="2789730">Float32</span><span class="op" id="2789737">,</span>&nbsp;<span class="ident" id="2789739">Float64</span><span class="op" id="2789746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789751">return</span>&nbsp;<span class="ident" id="2789758">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789773">case</span>&nbsp;<span class="ident" id="2789778">String</span><span class="op" id="2789784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789789">return</span>&nbsp;<span class="ident" id="2789796">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2789812">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789816">case</span>&nbsp;<span class="ident" id="2789821">Float32</span><span class="op" id="2789828">,</span>&nbsp;<span class="ident" id="2789830">Float64</span><span class="op" id="2789837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789841">switch</span>&nbsp;<span class="ident" id="2789848">dst</span><span class="op" id="2789851">.</span><span class="ident" id="2789852">Kind</span><span class="op" id="2789856">(</span><span class="op" id="2789857">)</span>&nbsp;<span class="op" id="2789859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789863">case</span>&nbsp;<span class="ident" id="2789868">Int</span><span class="op" id="2789871">,</span>&nbsp;<span class="ident" id="2789873">Int8</span><span class="op" id="2789877">,</span>&nbsp;<span class="ident" id="2789879">Int16</span><span class="op" id="2789884">,</span>&nbsp;<span class="ident" id="2789886">Int32</span><span class="op" id="2789891">,</span>&nbsp;<span class="ident" id="2789893">Int64</span><span class="op" id="2789898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789903">return</span>&nbsp;<span class="ident" id="2789910">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789924">case</span>&nbsp;<span class="ident" id="2789929">Uint</span><span class="op" id="2789933">,</span>&nbsp;<span class="ident" id="2789935">Uint8</span><span class="op" id="2789940">,</span>&nbsp;<span class="ident" id="2789942">Uint16</span><span class="op" id="2789948">,</span>&nbsp;<span class="ident" id="2789950">Uint32</span><span class="op" id="2789956">,</span>&nbsp;<span class="ident" id="2789958">Uint64</span><span class="op" id="2789964">,</span>&nbsp;<span class="ident" id="2789966">Uintptr</span><span class="op" id="2789973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2789978">return</span>&nbsp;<span class="ident" id="2789985">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790000">case</span>&nbsp;<span class="ident" id="2790005">Float32</span><span class="op" id="2790012">,</span>&nbsp;<span class="ident" id="2790014">Float64</span><span class="op" id="2790021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790026">return</span>&nbsp;<span class="ident" id="2790033">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790044">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790048">case</span>&nbsp;<span class="ident" id="2790053">Complex64</span><span class="op" id="2790062">,</span>&nbsp;<span class="ident" id="2790064">Complex128</span><span class="op" id="2790074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790078">switch</span>&nbsp;<span class="ident" id="2790085">dst</span><span class="op" id="2790088">.</span><span class="ident" id="2790089">Kind</span><span class="op" id="2790093">(</span><span class="op" id="2790094">)</span>&nbsp;<span class="op" id="2790096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790100">case</span>&nbsp;<span class="ident" id="2790105">Complex64</span><span class="op" id="2790114">,</span>&nbsp;<span class="ident" id="2790116">Complex128</span><span class="op" id="2790126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790131">return</span>&nbsp;<span class="ident" id="2790138">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790155">case</span>&nbsp;<span class="ident" id="2790160">String</span><span class="op" id="2790166">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790170">if</span>&nbsp;<span class="ident" id="2790173">dst</span><span class="op" id="2790176">.</span><span class="ident" id="2790177">Kind</span><span class="op" id="2790181">(</span><span class="op" id="2790182">)</span>&nbsp;<span class="op" id="2790184">==</span>&nbsp;<span class="ident" id="2790187">Slice</span>&nbsp;<span class="op" id="2790193">&amp;&amp;</span>&nbsp;<span class="ident" id="2790196">dst</span><span class="op" id="2790199">.</span><span class="ident" id="2790200">Elem</span><span class="op" id="2790204">(</span><span class="op" id="2790205">)</span><span class="op" id="2790206">.</span><span class="ident" id="2790207">PkgPath</span><span class="op" id="2790214">(</span><span class="op" id="2790215">)</span>&nbsp;<span class="op" id="2790217">==</span>&nbsp;<span class="string" id="2790220">&#34;&#34;</span>&nbsp;<span class="op" id="2790223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790228">switch</span>&nbsp;<span class="ident" id="2790235">dst</span><span class="op" id="2790238">.</span><span class="ident" id="2790239">Elem</span><span class="op" id="2790243">(</span><span class="op" id="2790244">)</span><span class="op" id="2790245">.</span><span class="ident" id="2790246">Kind</span><span class="op" id="2790250">(</span><span class="op" id="2790251">)</span>&nbsp;<span class="op" id="2790253">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790258">case</span>&nbsp;<span class="ident" id="2790263">Uint8</span><span class="op" id="2790268">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790274">return</span>&nbsp;<span class="ident" id="2790281">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790299">case</span>&nbsp;<span class="ident" id="2790304">Int32</span><span class="op" id="2790309">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790315">return</span>&nbsp;<span class="ident" id="2790322">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790340">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790348">case</span>&nbsp;<span class="ident" id="2790353">Slice</span><span class="op" id="2790358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790362">if</span>&nbsp;<span class="ident" id="2790365">dst</span><span class="op" id="2790368">.</span><span class="ident" id="2790369">Kind</span><span class="op" id="2790373">(</span><span class="op" id="2790374">)</span>&nbsp;<span class="op" id="2790376">==</span>&nbsp;<span class="ident" id="2790379">String</span>&nbsp;<span class="op" id="2790386">&amp;&amp;</span>&nbsp;<span class="ident" id="2790389">src</span><span class="op" id="2790392">.</span><span class="ident" id="2790393">Elem</span><span class="op" id="2790397">(</span><span class="op" id="2790398">)</span><span class="op" id="2790399">.</span><span class="ident" id="2790400">PkgPath</span><span class="op" id="2790407">(</span><span class="op" id="2790408">)</span>&nbsp;<span class="op" id="2790410">==</span>&nbsp;<span class="string" id="2790413">&#34;&#34;</span>&nbsp;<span class="op" id="2790416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790421">switch</span>&nbsp;<span class="ident" id="2790428">src</span><span class="op" id="2790431">.</span><span class="ident" id="2790432">Elem</span><span class="op" id="2790436">(</span><span class="op" id="2790437">)</span><span class="op" id="2790438">.</span><span class="ident" id="2790439">Kind</span><span class="op" id="2790443">(</span><span class="op" id="2790444">)</span>&nbsp;<span class="op" id="2790446">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790451">case</span>&nbsp;<span class="ident" id="2790456">Uint8</span><span class="op" id="2790461">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790467">return</span>&nbsp;<span class="ident" id="2790474">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790492">case</span>&nbsp;<span class="ident" id="2790497">Int32</span><span class="op" id="2790502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790508">return</span>&nbsp;<span class="ident" id="2790515">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790533">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2790544">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790587">if</span>&nbsp;<span class="ident" id="2790590">haveIdenticalUnderlyingType</span><span class="op" id="2790617">(</span><span class="ident" id="2790618">dst</span><span class="op" id="2790621">,</span>&nbsp;<span class="ident" id="2790623">src</span><span class="op" id="2790626">)</span>&nbsp;<span class="op" id="2790628">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790632">return</span>&nbsp;<span class="ident" id="2790639">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2790654">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790728">if</span>&nbsp;<span class="ident" id="2790731">dst</span><span class="op" id="2790734">.</span><span class="ident" id="2790735">Kind</span><span class="op" id="2790739">(</span><span class="op" id="2790740">)</span>&nbsp;<span class="op" id="2790742">==</span>&nbsp;<span class="ident" id="2790745">Ptr</span>&nbsp;<span class="op" id="2790749">&amp;&amp;</span>&nbsp;<span class="ident" id="2790752">dst</span><span class="op" id="2790755">.</span><span class="ident" id="2790756">Name</span><span class="op" id="2790760">(</span><span class="op" id="2790761">)</span>&nbsp;<span class="op" id="2790763">==</span>&nbsp;<span class="string" id="2790766">&#34;&#34;</span>&nbsp;<span class="op" id="2790769">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2790774">src</span><span class="op" id="2790777">.</span><span class="ident" id="2790778">Kind</span><span class="op" id="2790782">(</span><span class="op" id="2790783">)</span>&nbsp;<span class="op" id="2790785">==</span>&nbsp;<span class="ident" id="2790788">Ptr</span>&nbsp;<span class="op" id="2790792">&amp;&amp;</span>&nbsp;<span class="ident" id="2790795">src</span><span class="op" id="2790798">.</span><span class="ident" id="2790799">Name</span><span class="op" id="2790803">(</span><span class="op" id="2790804">)</span>&nbsp;<span class="op" id="2790806">==</span>&nbsp;<span class="string" id="2790809">&#34;&#34;</span>&nbsp;<span class="op" id="2790812">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2790817">haveIdenticalUnderlyingType</span><span class="op" id="2790844">(</span><span class="ident" id="2790845">dst</span><span class="op" id="2790848">.</span><span class="ident" id="2790849">Elem</span><span class="op" id="2790853">(</span><span class="op" id="2790854">)</span><span class="op" id="2790855">.</span><span class="ident" id="2790856">common</span><span class="op" id="2790862">(</span><span class="op" id="2790863">)</span><span class="op" id="2790864">,</span>&nbsp;<span class="ident" id="2790866">src</span><span class="op" id="2790869">.</span><span class="ident" id="2790870">Elem</span><span class="op" id="2790874">(</span><span class="op" id="2790875">)</span><span class="op" id="2790876">.</span><span class="ident" id="2790877">common</span><span class="op" id="2790883">(</span><span class="op" id="2790884">)</span><span class="op" id="2790885">)</span>&nbsp;<span class="op" id="2790887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790891">return</span>&nbsp;<span class="ident" id="2790898">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790913">if</span>&nbsp;<span class="ident" id="2790916">implements</span><span class="op" id="2790926">(</span><span class="ident" id="2790927">dst</span><span class="op" id="2790930">,</span>&nbsp;<span class="ident" id="2790932">src</span><span class="op" id="2790935">)</span>&nbsp;<span class="op" id="2790937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790941">if</span>&nbsp;<span class="ident" id="2790944">src</span><span class="op" id="2790947">.</span><span class="ident" id="2790948">Kind</span><span class="op" id="2790952">(</span><span class="op" id="2790953">)</span>&nbsp;<span class="op" id="2790955">==</span>&nbsp;<span class="ident" id="2790958">Interface</span>&nbsp;<span class="op" id="2790968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790973">return</span>&nbsp;<span class="ident" id="2790980">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2790989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2790993">return</span>&nbsp;<span class="ident" id="2791000">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791012">return</span>&nbsp;<span class="builtintype" id="2791019">nil</span><br>
<span class="lineno"></span><span class="op" id="2791023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2791026">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2791099">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2791144">func</span>&nbsp;<span class="ident" id="2791149">makeInt</span><span class="op" id="2791156">(</span><span class="ident" id="2791157">f</span>&nbsp;<span class="ident" id="2791159">flag</span><span class="op" id="2791163">,</span>&nbsp;<span class="ident" id="2791165">bits</span>&nbsp;<span class="ident" id="2791170">uint64</span><span class="op" id="2791176">,</span>&nbsp;<span class="ident" id="2791178">t</span>&nbsp;<span class="ident" id="2791180">Type</span><span class="op" id="2791184">)</span>&nbsp;<span class="ident" id="2791186">Value</span>&nbsp;<span class="op" id="2791192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2791195">typ</span>&nbsp;<span class="op" id="2791199">:=</span>&nbsp;<span class="ident" id="2791202">t</span><span class="op" id="2791203">.</span><span class="ident" id="2791204">common</span><span class="op" id="2791210">(</span><span class="op" id="2791211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2791214">ptr</span>&nbsp;<span class="op" id="2791218">:=</span>&nbsp;<span class="ident" id="2791221">unsafe_New</span><span class="op" id="2791231">(</span><span class="ident" id="2791232">typ</span><span class="op" id="2791235">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791238">switch</span>&nbsp;<span class="ident" id="2791245">typ</span><span class="op" id="2791248">.</span><span class="ident" id="2791249">size</span>&nbsp;<span class="op" id="2791254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791257">case</span>&nbsp;<span class="num" id="2791262">1</span><span class="op" id="2791263">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791267">*</span><span class="op" id="2791268">(</span><span class="op" id="2791269">*</span><span class="builtintype" id="2791270">uint8</span><span class="op" id="2791275">)</span><span class="op" id="2791276">(</span><span class="ident" id="2791277">unsafe</span><span class="op" id="2791283">.</span><span class="ident" id="2791284">Pointer</span><span class="op" id="2791291">(</span><span class="ident" id="2791292">ptr</span><span class="op" id="2791295">)</span><span class="op" id="2791296">)</span>&nbsp;<span class="op" id="2791298">=</span>&nbsp;<span class="builtintype" id="2791300">uint8</span><span class="op" id="2791305">(</span><span class="ident" id="2791306">bits</span><span class="op" id="2791310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791313">case</span>&nbsp;<span class="num" id="2791318">2</span><span class="op" id="2791319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791323">*</span><span class="op" id="2791324">(</span><span class="op" id="2791325">*</span><span class="builtintype" id="2791326">uint16</span><span class="op" id="2791332">)</span><span class="op" id="2791333">(</span><span class="ident" id="2791334">unsafe</span><span class="op" id="2791340">.</span><span class="ident" id="2791341">Pointer</span><span class="op" id="2791348">(</span><span class="ident" id="2791349">ptr</span><span class="op" id="2791352">)</span><span class="op" id="2791353">)</span>&nbsp;<span class="op" id="2791355">=</span>&nbsp;<span class="builtintype" id="2791357">uint16</span><span class="op" id="2791363">(</span><span class="ident" id="2791364">bits</span><span class="op" id="2791368">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791371">case</span>&nbsp;<span class="num" id="2791376">4</span><span class="op" id="2791377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791381">*</span><span class="op" id="2791382">(</span><span class="op" id="2791383">*</span><span class="builtintype" id="2791384">uint32</span><span class="op" id="2791390">)</span><span class="op" id="2791391">(</span><span class="ident" id="2791392">unsafe</span><span class="op" id="2791398">.</span><span class="ident" id="2791399">Pointer</span><span class="op" id="2791406">(</span><span class="ident" id="2791407">ptr</span><span class="op" id="2791410">)</span><span class="op" id="2791411">)</span>&nbsp;<span class="op" id="2791413">=</span>&nbsp;<span class="builtintype" id="2791415">uint32</span><span class="op" id="2791421">(</span><span class="ident" id="2791422">bits</span><span class="op" id="2791426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791429">case</span>&nbsp;<span class="num" id="2791434">8</span><span class="op" id="2791435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791439">*</span><span class="op" id="2791440">(</span><span class="op" id="2791441">*</span><span class="ident" id="2791442">uint64</span><span class="op" id="2791448">)</span><span class="op" id="2791449">(</span><span class="ident" id="2791450">unsafe</span><span class="op" id="2791456">.</span><span class="ident" id="2791457">Pointer</span><span class="op" id="2791464">(</span><span class="ident" id="2791465">ptr</span><span class="op" id="2791468">)</span><span class="op" id="2791469">)</span>&nbsp;<span class="op" id="2791471">=</span>&nbsp;<span class="ident" id="2791473">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791479">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791482">return</span>&nbsp;<span class="ident" id="2791489">Value</span><span class="op" id="2791494">{</span><span class="ident" id="2791495">typ</span><span class="op" id="2791498">,</span>&nbsp;<span class="ident" id="2791500">ptr</span><span class="op" id="2791503">,</span>&nbsp;<span class="ident" id="2791505">f</span>&nbsp;<span class="op" id="2791507">|</span>&nbsp;<span class="ident" id="2791509">flagIndir</span>&nbsp;<span class="op" id="2791519">|</span>&nbsp;<span class="ident" id="2791521">flag</span><span class="op" id="2791525">(</span><span class="ident" id="2791526">typ</span><span class="op" id="2791529">.</span><span class="ident" id="2791530">Kind</span><span class="op" id="2791534">(</span><span class="op" id="2791535">)</span><span class="op" id="2791536">)</span><span class="op" id="2791537">}</span><br>
<span class="lineno"></span><span class="op" id="2791539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791542">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2791625">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2791666">func</span>&nbsp;<span class="ident" id="2791671">makeFloat</span><span class="op" id="2791680">(</span><span class="ident" id="2791681">f</span>&nbsp;<span class="ident" id="2791683">flag</span><span class="op" id="2791687">,</span>&nbsp;<span class="ident" id="2791689">v</span>&nbsp;<span class="builtintype" id="2791691">float64</span><span class="op" id="2791698">,</span>&nbsp;<span class="ident" id="2791700">t</span>&nbsp;<span class="ident" id="2791702">Type</span><span class="op" id="2791706">)</span>&nbsp;<span class="ident" id="2791708">Value</span>&nbsp;<span class="op" id="2791714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2791717">typ</span>&nbsp;<span class="op" id="2791721">:=</span>&nbsp;<span class="ident" id="2791724">t</span><span class="op" id="2791725">.</span><span class="ident" id="2791726">common</span><span class="op" id="2791732">(</span><span class="op" id="2791733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2791736">ptr</span>&nbsp;<span class="op" id="2791740">:=</span>&nbsp;<span class="ident" id="2791743">unsafe_New</span><span class="op" id="2791753">(</span><span class="ident" id="2791754">typ</span><span class="op" id="2791757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791760">switch</span>&nbsp;<span class="ident" id="2791767">typ</span><span class="op" id="2791770">.</span><span class="ident" id="2791771">size</span>&nbsp;<span class="op" id="2791776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791779">case</span>&nbsp;<span class="num" id="2791784">4</span><span class="op" id="2791785">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791789">*</span><span class="op" id="2791790">(</span><span class="op" id="2791791">*</span><span class="builtintype" id="2791792">float32</span><span class="op" id="2791799">)</span><span class="op" id="2791800">(</span><span class="ident" id="2791801">unsafe</span><span class="op" id="2791807">.</span><span class="ident" id="2791808">Pointer</span><span class="op" id="2791815">(</span><span class="ident" id="2791816">ptr</span><span class="op" id="2791819">)</span><span class="op" id="2791820">)</span>&nbsp;<span class="op" id="2791822">=</span>&nbsp;<span class="builtintype" id="2791824">float32</span><span class="op" id="2791831">(</span><span class="ident" id="2791832">v</span><span class="op" id="2791833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791836">case</span>&nbsp;<span class="num" id="2791841">8</span><span class="op" id="2791842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791846">*</span><span class="op" id="2791847">(</span><span class="op" id="2791848">*</span><span class="builtintype" id="2791849">float64</span><span class="op" id="2791856">)</span><span class="op" id="2791857">(</span><span class="ident" id="2791858">unsafe</span><span class="op" id="2791864">.</span><span class="ident" id="2791865">Pointer</span><span class="op" id="2791872">(</span><span class="ident" id="2791873">ptr</span><span class="op" id="2791876">)</span><span class="op" id="2791877">)</span>&nbsp;<span class="op" id="2791879">=</span>&nbsp;<span class="ident" id="2791881">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2791884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2791887">return</span>&nbsp;<span class="ident" id="2791894">Value</span><span class="op" id="2791899">{</span><span class="ident" id="2791900">typ</span><span class="op" id="2791903">,</span>&nbsp;<span class="ident" id="2791905">ptr</span><span class="op" id="2791908">,</span>&nbsp;<span class="ident" id="2791910">f</span>&nbsp;<span class="op" id="2791912">|</span>&nbsp;<span class="ident" id="2791914">flagIndir</span>&nbsp;<span class="op" id="2791924">|</span>&nbsp;<span class="ident" id="2791926">flag</span><span class="op" id="2791930">(</span><span class="ident" id="2791931">typ</span><span class="op" id="2791934">.</span><span class="ident" id="2791935">Kind</span><span class="op" id="2791939">(</span><span class="op" id="2791940">)</span><span class="op" id="2791941">)</span><span class="op" id="2791942">}</span><br>
<span class="lineno">2255</span><span class="op" id="2791944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2791947">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2792034">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2792080">func</span>&nbsp;<span class="ident" id="2792085">makeComplex</span><span class="op" id="2792096">(</span><span class="ident" id="2792097">f</span>&nbsp;<span class="ident" id="2792099">flag</span><span class="op" id="2792103">,</span>&nbsp;<span class="ident" id="2792105">v</span>&nbsp;<span class="builtintype" id="2792107">complex128</span><span class="op" id="2792117">,</span>&nbsp;<span class="ident" id="2792119">t</span>&nbsp;<span class="ident" id="2792121">Type</span><span class="op" id="2792125">)</span>&nbsp;<span class="ident" id="2792127">Value</span>&nbsp;<span class="op" id="2792133">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792136">typ</span>&nbsp;<span class="op" id="2792140">:=</span>&nbsp;<span class="ident" id="2792143">t</span><span class="op" id="2792144">.</span><span class="ident" id="2792145">common</span><span class="op" id="2792151">(</span><span class="op" id="2792152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792155">ptr</span>&nbsp;<span class="op" id="2792159">:=</span>&nbsp;<span class="ident" id="2792162">unsafe_New</span><span class="op" id="2792172">(</span><span class="ident" id="2792173">typ</span><span class="op" id="2792176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792179">switch</span>&nbsp;<span class="ident" id="2792186">typ</span><span class="op" id="2792189">.</span><span class="ident" id="2792190">size</span>&nbsp;<span class="op" id="2792195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792198">case</span>&nbsp;<span class="num" id="2792203">8</span><span class="op" id="2792204">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2792208">*</span><span class="op" id="2792209">(</span><span class="op" id="2792210">*</span><span class="builtintype" id="2792211">complex64</span><span class="op" id="2792220">)</span><span class="op" id="2792221">(</span><span class="ident" id="2792222">unsafe</span><span class="op" id="2792228">.</span><span class="ident" id="2792229">Pointer</span><span class="op" id="2792236">(</span><span class="ident" id="2792237">ptr</span><span class="op" id="2792240">)</span><span class="op" id="2792241">)</span>&nbsp;<span class="op" id="2792243">=</span>&nbsp;<span class="builtintype" id="2792245">complex64</span><span class="op" id="2792254">(</span><span class="ident" id="2792255">v</span><span class="op" id="2792256">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792259">case</span>&nbsp;<span class="num" id="2792264">16</span><span class="op" id="2792266">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2792270">*</span><span class="op" id="2792271">(</span><span class="op" id="2792272">*</span><span class="builtintype" id="2792273">complex128</span><span class="op" id="2792283">)</span><span class="op" id="2792284">(</span><span class="ident" id="2792285">unsafe</span><span class="op" id="2792291">.</span><span class="ident" id="2792292">Pointer</span><span class="op" id="2792299">(</span><span class="ident" id="2792300">ptr</span><span class="op" id="2792303">)</span><span class="op" id="2792304">)</span>&nbsp;<span class="op" id="2792306">=</span>&nbsp;<span class="ident" id="2792308">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2792311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792314">return</span>&nbsp;<span class="ident" id="2792321">Value</span><span class="op" id="2792326">{</span><span class="ident" id="2792327">typ</span><span class="op" id="2792330">,</span>&nbsp;<span class="ident" id="2792332">ptr</span><span class="op" id="2792335">,</span>&nbsp;<span class="ident" id="2792337">f</span>&nbsp;<span class="op" id="2792339">|</span>&nbsp;<span class="ident" id="2792341">flagIndir</span>&nbsp;<span class="op" id="2792351">|</span>&nbsp;<span class="ident" id="2792353">flag</span><span class="op" id="2792357">(</span><span class="ident" id="2792358">typ</span><span class="op" id="2792361">.</span><span class="ident" id="2792362">Kind</span><span class="op" id="2792366">(</span><span class="op" id="2792367">)</span><span class="op" id="2792368">)</span><span class="op" id="2792369">}</span><br>
<span class="lineno"></span><span class="op" id="2792371">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2792374">func</span>&nbsp;<span class="ident" id="2792379">makeString</span><span class="op" id="2792389">(</span><span class="ident" id="2792390">f</span>&nbsp;<span class="ident" id="2792392">flag</span><span class="op" id="2792396">,</span>&nbsp;<span class="ident" id="2792398">v</span>&nbsp;<span class="builtintype" id="2792400">string</span><span class="op" id="2792406">,</span>&nbsp;<span class="ident" id="2792408">t</span>&nbsp;<span class="ident" id="2792410">Type</span><span class="op" id="2792414">)</span>&nbsp;<span class="ident" id="2792416">Value</span>&nbsp;<span class="op" id="2792422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792425">ret</span>&nbsp;<span class="op" id="2792429">:=</span>&nbsp;<span class="ident" id="2792432">New</span><span class="op" id="2792435">(</span><span class="ident" id="2792436">t</span><span class="op" id="2792437">)</span><span class="op" id="2792438">.</span><span class="ident" id="2792439">Elem</span><span class="op" id="2792443">(</span><span class="op" id="2792444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792447">ret</span><span class="op" id="2792450">.</span><span class="ident" id="2792451">SetString</span><span class="op" id="2792460">(</span><span class="ident" id="2792461">v</span><span class="op" id="2792462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792465">ret</span><span class="op" id="2792468">.</span><span class="ident" id="2792469">flag</span>&nbsp;<span class="op" id="2792474">=</span>&nbsp;<span class="ident" id="2792476">ret</span><span class="op" id="2792479">.</span><span class="ident" id="2792480">flag</span><span class="op" id="2792484">&amp;^</span><span class="ident" id="2792486">flagAddr</span>&nbsp;<span class="op" id="2792495">|</span>&nbsp;<span class="ident" id="2792497">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792500">return</span>&nbsp;<span class="ident" id="2792507">ret</span><br>
<span class="lineno"></span><span class="op" id="2792511">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2792514">func</span>&nbsp;<span class="ident" id="2792519">makeBytes</span><span class="op" id="2792528">(</span><span class="ident" id="2792529">f</span>&nbsp;<span class="ident" id="2792531">flag</span><span class="op" id="2792535">,</span>&nbsp;<span class="ident" id="2792537">v</span>&nbsp;<span class="op" id="2792539">[</span><span class="op" id="2792540">]</span><span class="builtintype" id="2792541">byte</span><span class="op" id="2792545">,</span>&nbsp;<span class="ident" id="2792547">t</span>&nbsp;<span class="ident" id="2792549">Type</span><span class="op" id="2792553">)</span>&nbsp;<span class="ident" id="2792555">Value</span>&nbsp;<span class="op" id="2792561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792564">ret</span>&nbsp;<span class="op" id="2792568">:=</span>&nbsp;<span class="ident" id="2792571">New</span><span class="op" id="2792574">(</span><span class="ident" id="2792575">t</span><span class="op" id="2792576">)</span><span class="op" id="2792577">.</span><span class="ident" id="2792578">Elem</span><span class="op" id="2792582">(</span><span class="op" id="2792583">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792586">ret</span><span class="op" id="2792589">.</span><span class="ident" id="2792590">SetBytes</span><span class="op" id="2792598">(</span><span class="ident" id="2792599">v</span><span class="op" id="2792600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792603">ret</span><span class="op" id="2792606">.</span><span class="ident" id="2792607">flag</span>&nbsp;<span class="op" id="2792612">=</span>&nbsp;<span class="ident" id="2792614">ret</span><span class="op" id="2792617">.</span><span class="ident" id="2792618">flag</span><span class="op" id="2792622">&amp;^</span><span class="ident" id="2792624">flagAddr</span>&nbsp;<span class="op" id="2792633">|</span>&nbsp;<span class="ident" id="2792635">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792638">return</span>&nbsp;<span class="ident" id="2792645">ret</span><br>
<span class="lineno"></span><span class="op" id="2792649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2792652">func</span>&nbsp;<span class="ident" id="2792657">makeRunes</span><span class="op" id="2792666">(</span><span class="ident" id="2792667">f</span>&nbsp;<span class="ident" id="2792669">flag</span><span class="op" id="2792673">,</span>&nbsp;<span class="ident" id="2792675">v</span>&nbsp;<span class="op" id="2792677">[</span><span class="op" id="2792678">]</span><span class="builtintype" id="2792679">rune</span><span class="op" id="2792683">,</span>&nbsp;<span class="ident" id="2792685">t</span>&nbsp;<span class="ident" id="2792687">Type</span><span class="op" id="2792691">)</span>&nbsp;<span class="ident" id="2792693">Value</span>&nbsp;<span class="op" id="2792699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792702">ret</span>&nbsp;<span class="op" id="2792706">:=</span>&nbsp;<span class="ident" id="2792709">New</span><span class="op" id="2792712">(</span><span class="ident" id="2792713">t</span><span class="op" id="2792714">)</span><span class="op" id="2792715">.</span><span class="ident" id="2792716">Elem</span><span class="op" id="2792720">(</span><span class="op" id="2792721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792724">ret</span><span class="op" id="2792727">.</span><span class="ident" id="2792728">setRunes</span><span class="op" id="2792736">(</span><span class="ident" id="2792737">v</span><span class="op" id="2792738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2792741">ret</span><span class="op" id="2792744">.</span><span class="ident" id="2792745">flag</span>&nbsp;<span class="op" id="2792750">=</span>&nbsp;<span class="ident" id="2792752">ret</span><span class="op" id="2792755">.</span><span class="ident" id="2792756">flag</span><span class="op" id="2792760">&amp;^</span><span class="ident" id="2792762">flagAddr</span>&nbsp;<span class="op" id="2792771">|</span>&nbsp;<span class="ident" id="2792773">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2792776">return</span>&nbsp;<span class="ident" id="2792783">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2792787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2792790">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2792846">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2792918">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2792990">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793049">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793081">func</span>&nbsp;<span class="ident" id="2793086">cvtInt</span><span class="op" id="2793092">(</span><span class="ident" id="2793093">v</span>&nbsp;<span class="ident" id="2793095">Value</span><span class="op" id="2793100">,</span>&nbsp;<span class="ident" id="2793102">t</span>&nbsp;<span class="ident" id="2793104">Type</span><span class="op" id="2793108">)</span>&nbsp;<span class="ident" id="2793110">Value</span>&nbsp;<span class="op" id="2793116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793119">return</span>&nbsp;<span class="ident" id="2793126">makeInt</span><span class="op" id="2793133">(</span><span class="ident" id="2793134">v</span><span class="op" id="2793135">.</span><span class="ident" id="2793136">flag</span><span class="op" id="2793140">&amp;</span><span class="ident" id="2793141">flagRO</span><span class="op" id="2793147">,</span>&nbsp;<span class="ident" id="2793149">uint64</span><span class="op" id="2793155">(</span><span class="ident" id="2793156">v</span><span class="op" id="2793157">.</span><span class="ident" id="2793158">Int</span><span class="op" id="2793161">(</span><span class="op" id="2793162">)</span><span class="op" id="2793163">)</span><span class="op" id="2793164">,</span>&nbsp;<span class="ident" id="2793166">t</span><span class="op" id="2793167">)</span><br>
<span class="lineno">2300</span><span class="op" id="2793169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793172">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793205">func</span>&nbsp;<span class="ident" id="2793210">cvtUint</span><span class="op" id="2793217">(</span><span class="ident" id="2793218">v</span>&nbsp;<span class="ident" id="2793220">Value</span><span class="op" id="2793225">,</span>&nbsp;<span class="ident" id="2793227">t</span>&nbsp;<span class="ident" id="2793229">Type</span><span class="op" id="2793233">)</span>&nbsp;<span class="ident" id="2793235">Value</span>&nbsp;<span class="op" id="2793241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793244">return</span>&nbsp;<span class="ident" id="2793251">makeInt</span><span class="op" id="2793258">(</span><span class="ident" id="2793259">v</span><span class="op" id="2793260">.</span><span class="ident" id="2793261">flag</span><span class="op" id="2793265">&amp;</span><span class="ident" id="2793266">flagRO</span><span class="op" id="2793272">,</span>&nbsp;<span class="ident" id="2793274">v</span><span class="op" id="2793275">.</span><span class="ident" id="2793276">Uint</span><span class="op" id="2793280">(</span><span class="op" id="2793281">)</span><span class="op" id="2793282">,</span>&nbsp;<span class="ident" id="2793284">t</span><span class="op" id="2793285">)</span><br>
<span class="lineno">2305</span><span class="op" id="2793287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793290">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793321">func</span>&nbsp;<span class="ident" id="2793326">cvtFloatInt</span><span class="op" id="2793337">(</span><span class="ident" id="2793338">v</span>&nbsp;<span class="ident" id="2793340">Value</span><span class="op" id="2793345">,</span>&nbsp;<span class="ident" id="2793347">t</span>&nbsp;<span class="ident" id="2793349">Type</span><span class="op" id="2793353">)</span>&nbsp;<span class="ident" id="2793355">Value</span>&nbsp;<span class="op" id="2793361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793364">return</span>&nbsp;<span class="ident" id="2793371">makeInt</span><span class="op" id="2793378">(</span><span class="ident" id="2793379">v</span><span class="op" id="2793380">.</span><span class="ident" id="2793381">flag</span><span class="op" id="2793385">&amp;</span><span class="ident" id="2793386">flagRO</span><span class="op" id="2793392">,</span>&nbsp;<span class="ident" id="2793394">uint64</span><span class="op" id="2793400">(</span><span class="ident" id="2793401">int64</span><span class="op" id="2793406">(</span><span class="ident" id="2793407">v</span><span class="op" id="2793408">.</span><span class="ident" id="2793409">Float</span><span class="op" id="2793414">(</span><span class="op" id="2793415">)</span><span class="op" id="2793416">)</span><span class="op" id="2793417">)</span><span class="op" id="2793418">,</span>&nbsp;<span class="ident" id="2793420">t</span><span class="op" id="2793421">)</span><br>
<span class="lineno">2310</span><span class="op" id="2793423">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793426">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793458">func</span>&nbsp;<span class="ident" id="2793463">cvtFloatUint</span><span class="op" id="2793475">(</span><span class="ident" id="2793476">v</span>&nbsp;<span class="ident" id="2793478">Value</span><span class="op" id="2793483">,</span>&nbsp;<span class="ident" id="2793485">t</span>&nbsp;<span class="ident" id="2793487">Type</span><span class="op" id="2793491">)</span>&nbsp;<span class="ident" id="2793493">Value</span>&nbsp;<span class="op" id="2793499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793502">return</span>&nbsp;<span class="ident" id="2793509">makeInt</span><span class="op" id="2793516">(</span><span class="ident" id="2793517">v</span><span class="op" id="2793518">.</span><span class="ident" id="2793519">flag</span><span class="op" id="2793523">&amp;</span><span class="ident" id="2793524">flagRO</span><span class="op" id="2793530">,</span>&nbsp;<span class="ident" id="2793532">uint64</span><span class="op" id="2793538">(</span><span class="ident" id="2793539">v</span><span class="op" id="2793540">.</span><span class="ident" id="2793541">Float</span><span class="op" id="2793546">(</span><span class="op" id="2793547">)</span><span class="op" id="2793548">)</span><span class="op" id="2793549">,</span>&nbsp;<span class="ident" id="2793551">t</span><span class="op" id="2793552">)</span><br>
<span class="lineno">2315</span><span class="op" id="2793554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793557">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793588">func</span>&nbsp;<span class="ident" id="2793593">cvtIntFloat</span><span class="op" id="2793604">(</span><span class="ident" id="2793605">v</span>&nbsp;<span class="ident" id="2793607">Value</span><span class="op" id="2793612">,</span>&nbsp;<span class="ident" id="2793614">t</span>&nbsp;<span class="ident" id="2793616">Type</span><span class="op" id="2793620">)</span>&nbsp;<span class="ident" id="2793622">Value</span>&nbsp;<span class="op" id="2793628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793631">return</span>&nbsp;<span class="ident" id="2793638">makeFloat</span><span class="op" id="2793647">(</span><span class="ident" id="2793648">v</span><span class="op" id="2793649">.</span><span class="ident" id="2793650">flag</span><span class="op" id="2793654">&amp;</span><span class="ident" id="2793655">flagRO</span><span class="op" id="2793661">,</span>&nbsp;<span class="builtintype" id="2793663">float64</span><span class="op" id="2793670">(</span><span class="ident" id="2793671">v</span><span class="op" id="2793672">.</span><span class="ident" id="2793673">Int</span><span class="op" id="2793676">(</span><span class="op" id="2793677">)</span><span class="op" id="2793678">)</span><span class="op" id="2793679">,</span>&nbsp;<span class="ident" id="2793681">t</span><span class="op" id="2793682">)</span><br>
<span class="lineno">2320</span><span class="op" id="2793684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793687">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793719">func</span>&nbsp;<span class="ident" id="2793724">cvtUintFloat</span><span class="op" id="2793736">(</span><span class="ident" id="2793737">v</span>&nbsp;<span class="ident" id="2793739">Value</span><span class="op" id="2793744">,</span>&nbsp;<span class="ident" id="2793746">t</span>&nbsp;<span class="ident" id="2793748">Type</span><span class="op" id="2793752">)</span>&nbsp;<span class="ident" id="2793754">Value</span>&nbsp;<span class="op" id="2793760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793763">return</span>&nbsp;<span class="ident" id="2793770">makeFloat</span><span class="op" id="2793779">(</span><span class="ident" id="2793780">v</span><span class="op" id="2793781">.</span><span class="ident" id="2793782">flag</span><span class="op" id="2793786">&amp;</span><span class="ident" id="2793787">flagRO</span><span class="op" id="2793793">,</span>&nbsp;<span class="builtintype" id="2793795">float64</span><span class="op" id="2793802">(</span><span class="ident" id="2793803">v</span><span class="op" id="2793804">.</span><span class="ident" id="2793805">Uint</span><span class="op" id="2793809">(</span><span class="op" id="2793810">)</span><span class="op" id="2793811">)</span><span class="op" id="2793812">,</span>&nbsp;<span class="ident" id="2793814">t</span><span class="op" id="2793815">)</span><br>
<span class="lineno">2325</span><span class="op" id="2793817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793820">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793853">func</span>&nbsp;<span class="ident" id="2793858">cvtFloat</span><span class="op" id="2793866">(</span><span class="ident" id="2793867">v</span>&nbsp;<span class="ident" id="2793869">Value</span><span class="op" id="2793874">,</span>&nbsp;<span class="ident" id="2793876">t</span>&nbsp;<span class="ident" id="2793878">Type</span><span class="op" id="2793882">)</span>&nbsp;<span class="ident" id="2793884">Value</span>&nbsp;<span class="op" id="2793890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2793893">return</span>&nbsp;<span class="ident" id="2793900">makeFloat</span><span class="op" id="2793909">(</span><span class="ident" id="2793910">v</span><span class="op" id="2793911">.</span><span class="ident" id="2793912">flag</span><span class="op" id="2793916">&amp;</span><span class="ident" id="2793917">flagRO</span><span class="op" id="2793923">,</span>&nbsp;<span class="ident" id="2793925">v</span><span class="op" id="2793926">.</span><span class="ident" id="2793927">Float</span><span class="op" id="2793932">(</span><span class="op" id="2793933">)</span><span class="op" id="2793934">,</span>&nbsp;<span class="ident" id="2793936">t</span><span class="op" id="2793937">)</span><br>
<span class="lineno">2330</span><span class="op" id="2793939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2793942">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2793979">func</span>&nbsp;<span class="ident" id="2793984">cvtComplex</span><span class="op" id="2793994">(</span><span class="ident" id="2793995">v</span>&nbsp;<span class="ident" id="2793997">Value</span><span class="op" id="2794002">,</span>&nbsp;<span class="ident" id="2794004">t</span>&nbsp;<span class="ident" id="2794006">Type</span><span class="op" id="2794010">)</span>&nbsp;<span class="ident" id="2794012">Value</span>&nbsp;<span class="op" id="2794018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794021">return</span>&nbsp;<span class="ident" id="2794028">makeComplex</span><span class="op" id="2794039">(</span><span class="ident" id="2794040">v</span><span class="op" id="2794041">.</span><span class="ident" id="2794042">flag</span><span class="op" id="2794046">&amp;</span><span class="ident" id="2794047">flagRO</span><span class="op" id="2794053">,</span>&nbsp;<span class="ident" id="2794055">v</span><span class="op" id="2794056">.</span><span class="ident" id="2794057">Complex</span><span class="op" id="2794064">(</span><span class="op" id="2794065">)</span><span class="op" id="2794066">,</span>&nbsp;<span class="ident" id="2794068">t</span><span class="op" id="2794069">)</span><br>
<span class="lineno">2335</span><span class="op" id="2794071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794074">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2794104">func</span>&nbsp;<span class="ident" id="2794109">cvtIntString</span><span class="op" id="2794121">(</span><span class="ident" id="2794122">v</span>&nbsp;<span class="ident" id="2794124">Value</span><span class="op" id="2794129">,</span>&nbsp;<span class="ident" id="2794131">t</span>&nbsp;<span class="ident" id="2794133">Type</span><span class="op" id="2794137">)</span>&nbsp;<span class="ident" id="2794139">Value</span>&nbsp;<span class="op" id="2794145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794148">return</span>&nbsp;<span class="ident" id="2794155">makeString</span><span class="op" id="2794165">(</span><span class="ident" id="2794166">v</span><span class="op" id="2794167">.</span><span class="ident" id="2794168">flag</span><span class="op" id="2794172">&amp;</span><span class="ident" id="2794173">flagRO</span><span class="op" id="2794179">,</span>&nbsp;<span class="builtintype" id="2794181">string</span><span class="op" id="2794187">(</span><span class="ident" id="2794188">v</span><span class="op" id="2794189">.</span><span class="ident" id="2794190">Int</span><span class="op" id="2794193">(</span><span class="op" id="2794194">)</span><span class="op" id="2794195">)</span><span class="op" id="2794196">,</span>&nbsp;<span class="ident" id="2794198">t</span><span class="op" id="2794199">)</span><br>
<span class="lineno">2340</span><span class="op" id="2794201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794204">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2794235">func</span>&nbsp;<span class="ident" id="2794240">cvtUintString</span><span class="op" id="2794253">(</span><span class="ident" id="2794254">v</span>&nbsp;<span class="ident" id="2794256">Value</span><span class="op" id="2794261">,</span>&nbsp;<span class="ident" id="2794263">t</span>&nbsp;<span class="ident" id="2794265">Type</span><span class="op" id="2794269">)</span>&nbsp;<span class="ident" id="2794271">Value</span>&nbsp;<span class="op" id="2794277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794280">return</span>&nbsp;<span class="ident" id="2794287">makeString</span><span class="op" id="2794297">(</span><span class="ident" id="2794298">v</span><span class="op" id="2794299">.</span><span class="ident" id="2794300">flag</span><span class="op" id="2794304">&amp;</span><span class="ident" id="2794305">flagRO</span><span class="op" id="2794311">,</span>&nbsp;<span class="builtintype" id="2794313">string</span><span class="op" id="2794319">(</span><span class="ident" id="2794320">v</span><span class="op" id="2794321">.</span><span class="ident" id="2794322">Uint</span><span class="op" id="2794326">(</span><span class="op" id="2794327">)</span><span class="op" id="2794328">)</span><span class="op" id="2794329">,</span>&nbsp;<span class="ident" id="2794331">t</span><span class="op" id="2794332">)</span><br>
<span class="lineno">2345</span><span class="op" id="2794334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794337">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2794368">func</span>&nbsp;<span class="ident" id="2794373">cvtBytesString</span><span class="op" id="2794387">(</span><span class="ident" id="2794388">v</span>&nbsp;<span class="ident" id="2794390">Value</span><span class="op" id="2794395">,</span>&nbsp;<span class="ident" id="2794397">t</span>&nbsp;<span class="ident" id="2794399">Type</span><span class="op" id="2794403">)</span>&nbsp;<span class="ident" id="2794405">Value</span>&nbsp;<span class="op" id="2794411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794414">return</span>&nbsp;<span class="ident" id="2794421">makeString</span><span class="op" id="2794431">(</span><span class="ident" id="2794432">v</span><span class="op" id="2794433">.</span><span class="ident" id="2794434">flag</span><span class="op" id="2794438">&amp;</span><span class="ident" id="2794439">flagRO</span><span class="op" id="2794445">,</span>&nbsp;<span class="builtintype" id="2794447">string</span><span class="op" id="2794453">(</span><span class="ident" id="2794454">v</span><span class="op" id="2794455">.</span><span class="ident" id="2794456">Bytes</span><span class="op" id="2794461">(</span><span class="op" id="2794462">)</span><span class="op" id="2794463">)</span><span class="op" id="2794464">,</span>&nbsp;<span class="ident" id="2794466">t</span><span class="op" id="2794467">)</span><br>
<span class="lineno">2350</span><span class="op" id="2794469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794472">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2794503">func</span>&nbsp;<span class="ident" id="2794508">cvtStringBytes</span><span class="op" id="2794522">(</span><span class="ident" id="2794523">v</span>&nbsp;<span class="ident" id="2794525">Value</span><span class="op" id="2794530">,</span>&nbsp;<span class="ident" id="2794532">t</span>&nbsp;<span class="ident" id="2794534">Type</span><span class="op" id="2794538">)</span>&nbsp;<span class="ident" id="2794540">Value</span>&nbsp;<span class="op" id="2794546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794549">return</span>&nbsp;<span class="ident" id="2794556">makeBytes</span><span class="op" id="2794565">(</span><span class="ident" id="2794566">v</span><span class="op" id="2794567">.</span><span class="ident" id="2794568">flag</span><span class="op" id="2794572">&amp;</span><span class="ident" id="2794573">flagRO</span><span class="op" id="2794579">,</span>&nbsp;<span class="op" id="2794581">[</span><span class="op" id="2794582">]</span><span class="builtintype" id="2794583">byte</span><span class="op" id="2794587">(</span><span class="ident" id="2794588">v</span><span class="op" id="2794589">.</span><span class="ident" id="2794590">String</span><span class="op" id="2794596">(</span><span class="op" id="2794597">)</span><span class="op" id="2794598">)</span><span class="op" id="2794599">,</span>&nbsp;<span class="ident" id="2794601">t</span><span class="op" id="2794602">)</span><br>
<span class="lineno">2355</span><span class="op" id="2794604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794607">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2794638">func</span>&nbsp;<span class="ident" id="2794643">cvtRunesString</span><span class="op" id="2794657">(</span><span class="ident" id="2794658">v</span>&nbsp;<span class="ident" id="2794660">Value</span><span class="op" id="2794665">,</span>&nbsp;<span class="ident" id="2794667">t</span>&nbsp;<span class="ident" id="2794669">Type</span><span class="op" id="2794673">)</span>&nbsp;<span class="ident" id="2794675">Value</span>&nbsp;<span class="op" id="2794681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794684">return</span>&nbsp;<span class="ident" id="2794691">makeString</span><span class="op" id="2794701">(</span><span class="ident" id="2794702">v</span><span class="op" id="2794703">.</span><span class="ident" id="2794704">flag</span><span class="op" id="2794708">&amp;</span><span class="ident" id="2794709">flagRO</span><span class="op" id="2794715">,</span>&nbsp;<span class="builtintype" id="2794717">string</span><span class="op" id="2794723">(</span><span class="ident" id="2794724">v</span><span class="op" id="2794725">.</span><span class="ident" id="2794726">runes</span><span class="op" id="2794731">(</span><span class="op" id="2794732">)</span><span class="op" id="2794733">)</span><span class="op" id="2794734">,</span>&nbsp;<span class="ident" id="2794736">t</span><span class="op" id="2794737">)</span><br>
<span class="lineno">2360</span><span class="op" id="2794739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794742">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2794773">func</span>&nbsp;<span class="ident" id="2794778">cvtStringRunes</span><span class="op" id="2794792">(</span><span class="ident" id="2794793">v</span>&nbsp;<span class="ident" id="2794795">Value</span><span class="op" id="2794800">,</span>&nbsp;<span class="ident" id="2794802">t</span>&nbsp;<span class="ident" id="2794804">Type</span><span class="op" id="2794808">)</span>&nbsp;<span class="ident" id="2794810">Value</span>&nbsp;<span class="op" id="2794816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794819">return</span>&nbsp;<span class="ident" id="2794826">makeRunes</span><span class="op" id="2794835">(</span><span class="ident" id="2794836">v</span><span class="op" id="2794837">.</span><span class="ident" id="2794838">flag</span><span class="op" id="2794842">&amp;</span><span class="ident" id="2794843">flagRO</span><span class="op" id="2794849">,</span>&nbsp;<span class="op" id="2794851">[</span><span class="op" id="2794852">]</span><span class="builtintype" id="2794853">rune</span><span class="op" id="2794857">(</span><span class="ident" id="2794858">v</span><span class="op" id="2794859">.</span><span class="ident" id="2794860">String</span><span class="op" id="2794866">(</span><span class="op" id="2794867">)</span><span class="op" id="2794868">)</span><span class="op" id="2794869">,</span>&nbsp;<span class="ident" id="2794871">t</span><span class="op" id="2794872">)</span><br>
<span class="lineno">2365</span><span class="op" id="2794874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2794877">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2794903">func</span>&nbsp;<span class="ident" id="2794908">cvtDirect</span><span class="op" id="2794917">(</span><span class="ident" id="2794918">v</span>&nbsp;<span class="ident" id="2794920">Value</span><span class="op" id="2794925">,</span>&nbsp;<span class="ident" id="2794927">typ</span>&nbsp;<span class="ident" id="2794931">Type</span><span class="op" id="2794935">)</span>&nbsp;<span class="ident" id="2794937">Value</span>&nbsp;<span class="op" id="2794943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2794946">f</span>&nbsp;<span class="op" id="2794948">:=</span>&nbsp;<span class="ident" id="2794951">v</span><span class="op" id="2794952">.</span><span class="ident" id="2794953">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2794959">t</span>&nbsp;<span class="op" id="2794961">:=</span>&nbsp;<span class="ident" id="2794964">typ</span><span class="op" id="2794967">.</span><span class="ident" id="2794968">common</span><span class="op" id="2794974">(</span><span class="op" id="2794975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2794978">ptr</span>&nbsp;<span class="op" id="2794982">:=</span>&nbsp;<span class="ident" id="2794985">v</span><span class="op" id="2794986">.</span><span class="ident" id="2794987">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2794992">if</span>&nbsp;<span class="ident" id="2794995">f</span><span class="op" id="2794996">&amp;</span><span class="ident" id="2794997">flagAddr</span>&nbsp;<span class="op" id="2795006">!=</span>&nbsp;<span class="num" id="2795009">0</span>&nbsp;<span class="op" id="2795011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2795015">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795057">c</span>&nbsp;<span class="op" id="2795059">:=</span>&nbsp;<span class="ident" id="2795062">unsafe_New</span><span class="op" id="2795072">(</span><span class="ident" id="2795073">t</span><span class="op" id="2795074">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795078">memmove</span><span class="op" id="2795085">(</span><span class="ident" id="2795086">c</span><span class="op" id="2795087">,</span>&nbsp;<span class="ident" id="2795089">ptr</span><span class="op" id="2795092">,</span>&nbsp;<span class="ident" id="2795094">t</span><span class="op" id="2795095">.</span><span class="ident" id="2795096">size</span><span class="op" id="2795100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795104">ptr</span>&nbsp;<span class="op" id="2795108">=</span>&nbsp;<span class="ident" id="2795110">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795114">f</span>&nbsp;<span class="op" id="2795116">&amp;^=</span>&nbsp;<span class="ident" id="2795120">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2795130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795133">return</span>&nbsp;<span class="ident" id="2795140">Value</span><span class="op" id="2795145">{</span><span class="ident" id="2795146">t</span><span class="op" id="2795147">,</span>&nbsp;<span class="ident" id="2795149">ptr</span><span class="op" id="2795152">,</span>&nbsp;<span class="ident" id="2795154">v</span><span class="op" id="2795155">.</span><span class="ident" id="2795156">flag</span><span class="op" id="2795160">&amp;</span><span class="ident" id="2795161">flagRO</span>&nbsp;<span class="op" id="2795168">|</span>&nbsp;<span class="ident" id="2795170">f</span><span class="op" id="2795171">}</span>&nbsp;<span class="comment" id="2795173">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2795198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2795201">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2795237">func</span>&nbsp;<span class="ident" id="2795242">cvtT2I</span><span class="op" id="2795248">(</span><span class="ident" id="2795249">v</span>&nbsp;<span class="ident" id="2795251">Value</span><span class="op" id="2795256">,</span>&nbsp;<span class="ident" id="2795258">typ</span>&nbsp;<span class="ident" id="2795262">Type</span><span class="op" id="2795266">)</span>&nbsp;<span class="ident" id="2795268">Value</span>&nbsp;<span class="op" id="2795274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795277">target</span>&nbsp;<span class="op" id="2795284">:=</span>&nbsp;<span class="ident" id="2795287">unsafe_New</span><span class="op" id="2795297">(</span><span class="ident" id="2795298">typ</span><span class="op" id="2795301">.</span><span class="ident" id="2795302">common</span><span class="op" id="2795308">(</span><span class="op" id="2795309">)</span><span class="op" id="2795310">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795313">x</span>&nbsp;<span class="op" id="2795315">:=</span>&nbsp;<span class="ident" id="2795318">valueInterface</span><span class="op" id="2795332">(</span><span class="ident" id="2795333">v</span><span class="op" id="2795334">,</span>&nbsp;<span class="builtintype" id="2795336">false</span><span class="op" id="2795341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795344">if</span>&nbsp;<span class="ident" id="2795347">typ</span><span class="op" id="2795350">.</span><span class="ident" id="2795351">NumMethod</span><span class="op" id="2795360">(</span><span class="op" id="2795361">)</span>&nbsp;<span class="op" id="2795363">==</span>&nbsp;<span class="num" id="2795366">0</span>&nbsp;<span class="op" id="2795368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2795372">*</span><span class="op" id="2795373">(</span><span class="op" id="2795374">*</span><span class="keyword" id="2795375">interface</span><span class="op" id="2795384">{</span><span class="op" id="2795385">}</span><span class="op" id="2795386">)</span><span class="op" id="2795387">(</span><span class="ident" id="2795388">target</span><span class="op" id="2795394">)</span>&nbsp;<span class="op" id="2795396">=</span>&nbsp;<span class="ident" id="2795398">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2795401">}</span>&nbsp;<span class="keyword" id="2795403">else</span>&nbsp;<span class="op" id="2795408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795412">ifaceE2I</span><span class="op" id="2795420">(</span><span class="ident" id="2795421">typ</span><span class="op" id="2795424">.</span><span class="op" id="2795425">(</span><span class="op" id="2795426">*</span><span class="ident" id="2795427">rtype</span><span class="op" id="2795432">)</span><span class="op" id="2795433">,</span>&nbsp;<span class="ident" id="2795435">x</span><span class="op" id="2795436">,</span>&nbsp;<span class="ident" id="2795438">target</span><span class="op" id="2795444">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2795447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795450">return</span>&nbsp;<span class="ident" id="2795457">Value</span><span class="op" id="2795462">{</span><span class="ident" id="2795463">typ</span><span class="op" id="2795466">.</span><span class="ident" id="2795467">common</span><span class="op" id="2795473">(</span><span class="op" id="2795474">)</span><span class="op" id="2795475">,</span>&nbsp;<span class="ident" id="2795477">target</span><span class="op" id="2795483">,</span>&nbsp;<span class="ident" id="2795485">v</span><span class="op" id="2795486">.</span><span class="ident" id="2795487">flag</span><span class="op" id="2795491">&amp;</span><span class="ident" id="2795492">flagRO</span>&nbsp;<span class="op" id="2795499">|</span>&nbsp;<span class="ident" id="2795501">flagIndir</span>&nbsp;<span class="op" id="2795511">|</span>&nbsp;<span class="ident" id="2795513">flag</span><span class="op" id="2795517">(</span><span class="ident" id="2795518">Interface</span><span class="op" id="2795527">)</span><span class="op" id="2795528">}</span><br>
<span class="lineno"></span><span class="op" id="2795530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2795533">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2795570">func</span>&nbsp;<span class="ident" id="2795575">cvtI2I</span><span class="op" id="2795581">(</span><span class="ident" id="2795582">v</span>&nbsp;<span class="ident" id="2795584">Value</span><span class="op" id="2795589">,</span>&nbsp;<span class="ident" id="2795591">typ</span>&nbsp;<span class="ident" id="2795595">Type</span><span class="op" id="2795599">)</span>&nbsp;<span class="ident" id="2795601">Value</span>&nbsp;<span class="op" id="2795607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795610">if</span>&nbsp;<span class="ident" id="2795613">v</span><span class="op" id="2795614">.</span><span class="ident" id="2795615">IsNil</span><span class="op" id="2795620">(</span><span class="op" id="2795621">)</span>&nbsp;<span class="op" id="2795623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795627">ret</span>&nbsp;<span class="op" id="2795631">:=</span>&nbsp;<span class="ident" id="2795634">Zero</span><span class="op" id="2795638">(</span><span class="ident" id="2795639">typ</span><span class="op" id="2795642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2795646">ret</span><span class="op" id="2795649">.</span><span class="ident" id="2795650">flag</span>&nbsp;<span class="op" id="2795655">|=</span>&nbsp;<span class="ident" id="2795658">v</span><span class="op" id="2795659">.</span><span class="ident" id="2795660">flag</span>&nbsp;<span class="op" id="2795665">&amp;</span>&nbsp;<span class="ident" id="2795667">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795676">return</span>&nbsp;<span class="ident" id="2795683">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2795688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2795691">return</span>&nbsp;<span class="ident" id="2795698">cvtT2I</span><span class="op" id="2795704">(</span><span class="ident" id="2795705">v</span><span class="op" id="2795706">.</span><span class="ident" id="2795707">Elem</span><span class="op" id="2795711">(</span><span class="op" id="2795712">)</span><span class="op" id="2795713">,</span>&nbsp;<span class="ident" id="2795715">typ</span><span class="op" id="2795718">)</span><br>
<span class="lineno"></span><span class="op" id="2795720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2795723">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2795752">func</span>&nbsp;<span class="ident" id="2795757">chancap</span><span class="op" id="2795764">(</span><span class="ident" id="2795765">ch</span>&nbsp;<span class="ident" id="2795768">unsafe</span><span class="op" id="2795774">.</span><span class="ident" id="2795775">Pointer</span><span class="op" id="2795782">)</span>&nbsp;<span class="builtintype" id="2795784">int</span><br>
<span class="lineno"></span><span class="keyword" id="2795788">func</span>&nbsp;<span class="ident" id="2795793">chanclose</span><span class="op" id="2795802">(</span><span class="ident" id="2795803">ch</span>&nbsp;<span class="ident" id="2795806">unsafe</span><span class="op" id="2795812">.</span><span class="ident" id="2795813">Pointer</span><span class="op" id="2795820">)</span><br>
<span class="lineno"></span><span class="keyword" id="2795822">func</span>&nbsp;<span class="ident" id="2795827">chanlen</span><span class="op" id="2795834">(</span><span class="ident" id="2795835">ch</span>&nbsp;<span class="ident" id="2795838">unsafe</span><span class="op" id="2795844">.</span><span class="ident" id="2795845">Pointer</span><span class="op" id="2795852">)</span>&nbsp;<span class="builtintype" id="2795854">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2795859">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2795873">func</span>&nbsp;<span class="ident" id="2795878">chanrecv</span><span class="op" id="2795886">(</span><span class="ident" id="2795887">t</span>&nbsp;<span class="op" id="2795889">*</span><span class="ident" id="2795890">rtype</span><span class="op" id="2795895">,</span>&nbsp;<span class="ident" id="2795897">ch</span>&nbsp;<span class="ident" id="2795900">unsafe</span><span class="op" id="2795906">.</span><span class="ident" id="2795907">Pointer</span><span class="op" id="2795914">,</span>&nbsp;<span class="ident" id="2795916">nb</span>&nbsp;<span class="builtintype" id="2795919">bool</span><span class="op" id="2795923">,</span>&nbsp;<span class="ident" id="2795925">val</span>&nbsp;<span class="ident" id="2795929">unsafe</span><span class="op" id="2795935">.</span><span class="ident" id="2795936">Pointer</span><span class="op" id="2795943">)</span>&nbsp;<span class="op" id="2795945">(</span><span class="ident" id="2795946">selected</span><span class="op" id="2795954">,</span>&nbsp;<span class="ident" id="2795956">received</span>&nbsp;<span class="builtintype" id="2795965">bool</span><span class="op" id="2795969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2795972">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2795986">func</span>&nbsp;<span class="ident" id="2795991">chansend</span><span class="op" id="2795999">(</span><span class="ident" id="2796000">t</span>&nbsp;<span class="op" id="2796002">*</span><span class="ident" id="2796003">rtype</span><span class="op" id="2796008">,</span>&nbsp;<span class="ident" id="2796010">ch</span>&nbsp;<span class="ident" id="2796013">unsafe</span><span class="op" id="2796019">.</span><span class="ident" id="2796020">Pointer</span><span class="op" id="2796027">,</span>&nbsp;<span class="ident" id="2796029">val</span>&nbsp;<span class="ident" id="2796033">unsafe</span><span class="op" id="2796039">.</span><span class="ident" id="2796040">Pointer</span><span class="op" id="2796047">,</span>&nbsp;<span class="ident" id="2796049">nb</span>&nbsp;<span class="builtintype" id="2796052">bool</span><span class="op" id="2796056">)</span>&nbsp;<span class="builtintype" id="2796058">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2796064">func</span>&nbsp;<span class="ident" id="2796069">makechan</span><span class="op" id="2796077">(</span><span class="ident" id="2796078">typ</span>&nbsp;<span class="op" id="2796082">*</span><span class="ident" id="2796083">rtype</span><span class="op" id="2796088">,</span>&nbsp;<span class="ident" id="2796090">size</span>&nbsp;<span class="ident" id="2796095">uint64</span><span class="op" id="2796101">)</span>&nbsp;<span class="op" id="2796103">(</span><span class="ident" id="2796104">ch</span>&nbsp;<span class="ident" id="2796107">unsafe</span><span class="op" id="2796113">.</span><span class="ident" id="2796114">Pointer</span><span class="op" id="2796121">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796123">func</span>&nbsp;<span class="ident" id="2796128">makemap</span><span class="op" id="2796135">(</span><span class="ident" id="2796136">t</span>&nbsp;<span class="op" id="2796138">*</span><span class="ident" id="2796139">rtype</span><span class="op" id="2796144">)</span>&nbsp;<span class="op" id="2796146">(</span><span class="ident" id="2796147">m</span>&nbsp;<span class="ident" id="2796149">unsafe</span><span class="op" id="2796155">.</span><span class="ident" id="2796156">Pointer</span><span class="op" id="2796163">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796165">func</span>&nbsp;<span class="ident" id="2796170">mapaccess</span><span class="op" id="2796179">(</span><span class="ident" id="2796180">t</span>&nbsp;<span class="op" id="2796182">*</span><span class="ident" id="2796183">rtype</span><span class="op" id="2796188">,</span>&nbsp;<span class="ident" id="2796190">m</span>&nbsp;<span class="ident" id="2796192">unsafe</span><span class="op" id="2796198">.</span><span class="ident" id="2796199">Pointer</span><span class="op" id="2796206">,</span>&nbsp;<span class="ident" id="2796208">key</span>&nbsp;<span class="ident" id="2796212">unsafe</span><span class="op" id="2796218">.</span><span class="ident" id="2796219">Pointer</span><span class="op" id="2796226">)</span>&nbsp;<span class="op" id="2796228">(</span><span class="ident" id="2796229">val</span>&nbsp;<span class="ident" id="2796233">unsafe</span><span class="op" id="2796239">.</span><span class="ident" id="2796240">Pointer</span><span class="op" id="2796247">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796249">func</span>&nbsp;<span class="ident" id="2796254">mapassign</span><span class="op" id="2796263">(</span><span class="ident" id="2796264">t</span>&nbsp;<span class="op" id="2796266">*</span><span class="ident" id="2796267">rtype</span><span class="op" id="2796272">,</span>&nbsp;<span class="ident" id="2796274">m</span>&nbsp;<span class="ident" id="2796276">unsafe</span><span class="op" id="2796282">.</span><span class="ident" id="2796283">Pointer</span><span class="op" id="2796290">,</span>&nbsp;<span class="ident" id="2796292">key</span><span class="op" id="2796295">,</span>&nbsp;<span class="ident" id="2796297">val</span>&nbsp;<span class="ident" id="2796301">unsafe</span><span class="op" id="2796307">.</span><span class="ident" id="2796308">Pointer</span><span class="op" id="2796315">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796317">func</span>&nbsp;<span class="ident" id="2796322">mapdelete</span><span class="op" id="2796331">(</span><span class="ident" id="2796332">t</span>&nbsp;<span class="op" id="2796334">*</span><span class="ident" id="2796335">rtype</span><span class="op" id="2796340">,</span>&nbsp;<span class="ident" id="2796342">m</span>&nbsp;<span class="ident" id="2796344">unsafe</span><span class="op" id="2796350">.</span><span class="ident" id="2796351">Pointer</span><span class="op" id="2796358">,</span>&nbsp;<span class="ident" id="2796360">key</span>&nbsp;<span class="ident" id="2796364">unsafe</span><span class="op" id="2796370">.</span><span class="ident" id="2796371">Pointer</span><span class="op" id="2796378">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2796380">func</span>&nbsp;<span class="ident" id="2796385">mapiterinit</span><span class="op" id="2796396">(</span><span class="ident" id="2796397">t</span>&nbsp;<span class="op" id="2796399">*</span><span class="ident" id="2796400">rtype</span><span class="op" id="2796405">,</span>&nbsp;<span class="ident" id="2796407">m</span>&nbsp;<span class="ident" id="2796409">unsafe</span><span class="op" id="2796415">.</span><span class="ident" id="2796416">Pointer</span><span class="op" id="2796423">)</span>&nbsp;<span class="ident" id="2796425">unsafe</span><span class="op" id="2796431">.</span><span class="ident" id="2796432">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2796440">func</span>&nbsp;<span class="ident" id="2796445">mapiterkey</span><span class="op" id="2796455">(</span><span class="ident" id="2796456">it</span>&nbsp;<span class="ident" id="2796459">unsafe</span><span class="op" id="2796465">.</span><span class="ident" id="2796466">Pointer</span><span class="op" id="2796473">)</span>&nbsp;<span class="op" id="2796475">(</span><span class="ident" id="2796476">key</span>&nbsp;<span class="ident" id="2796480">unsafe</span><span class="op" id="2796486">.</span><span class="ident" id="2796487">Pointer</span><span class="op" id="2796494">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796496">func</span>&nbsp;<span class="ident" id="2796501">mapiternext</span><span class="op" id="2796512">(</span><span class="ident" id="2796513">it</span>&nbsp;<span class="ident" id="2796516">unsafe</span><span class="op" id="2796522">.</span><span class="ident" id="2796523">Pointer</span><span class="op" id="2796530">)</span><br>
<span class="lineno"></span><span class="keyword" id="2796532">func</span>&nbsp;<span class="ident" id="2796537">maplen</span><span class="op" id="2796543">(</span><span class="ident" id="2796544">m</span>&nbsp;<span class="ident" id="2796546">unsafe</span><span class="op" id="2796552">.</span><span class="ident" id="2796553">Pointer</span><span class="op" id="2796560">)</span>&nbsp;<span class="builtintype" id="2796562">int</span><br>
<span class="lineno"></span><span class="keyword" id="2796566">func</span>&nbsp;<span class="ident" id="2796571">call</span><span class="op" id="2796575">(</span><span class="ident" id="2796576">fn</span><span class="op" id="2796578">,</span>&nbsp;<span class="ident" id="2796580">arg</span>&nbsp;<span class="ident" id="2796584">unsafe</span><span class="op" id="2796590">.</span><span class="ident" id="2796591">Pointer</span><span class="op" id="2796598">,</span>&nbsp;<span class="ident" id="2796600">n</span>&nbsp;<span class="builtintype" id="2796602">uint32</span><span class="op" id="2796608">,</span>&nbsp;<span class="ident" id="2796610">retoffset</span>&nbsp;<span class="builtintype" id="2796620">uint32</span><span class="op" id="2796626">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2796629">func</span>&nbsp;<span class="ident" id="2796634">ifaceE2I</span><span class="op" id="2796642">(</span><span class="ident" id="2796643">t</span>&nbsp;<span class="op" id="2796645">*</span><span class="ident" id="2796646">rtype</span><span class="op" id="2796651">,</span>&nbsp;<span class="ident" id="2796653">src</span>&nbsp;<span class="keyword" id="2796657">interface</span><span class="op" id="2796666">{</span><span class="op" id="2796667">}</span><span class="op" id="2796668">,</span>&nbsp;<span class="ident" id="2796670">dst</span>&nbsp;<span class="ident" id="2796674">unsafe</span><span class="op" id="2796680">.</span><span class="ident" id="2796681">Pointer</span><span class="op" id="2796688">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2796691">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2796705">func</span>&nbsp;<span class="ident" id="2796710">memmove</span><span class="op" id="2796717">(</span><span class="ident" id="2796718">adst</span><span class="op" id="2796722">,</span>&nbsp;<span class="ident" id="2796724">asrc</span>&nbsp;<span class="ident" id="2796729">unsafe</span><span class="op" id="2796735">.</span><span class="ident" id="2796736">Pointer</span><span class="op" id="2796743">,</span>&nbsp;<span class="ident" id="2796745">n</span>&nbsp;<span class="builtintype" id="2796747">uintptr</span><span class="op" id="2796754">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2796757">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2796811">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2796872">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2796903">func</span>&nbsp;<span class="ident" id="2796908">escapes</span><span class="op" id="2796915">(</span><span class="ident" id="2796916">x</span>&nbsp;<span class="keyword" id="2796918">interface</span><span class="op" id="2796927">{</span><span class="op" id="2796928">}</span><span class="op" id="2796929">)</span>&nbsp;<span class="op" id="2796931">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2796934">if</span>&nbsp;<span class="ident" id="2796937">dummy</span><span class="op" id="2796942">.</span><span class="ident" id="2796943">b</span>&nbsp;<span class="op" id="2796945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2796949">dummy</span><span class="op" id="2796954">.</span><span class="ident" id="2796955">x</span>&nbsp;<span class="op" id="2796957">=</span>&nbsp;<span class="ident" id="2796959">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2796962">}</span><br>
<span class="lineno"></span><span class="op" id="2796964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2796967">var</span>&nbsp;<span class="ident" id="2796971">dummy</span>&nbsp;<span class="keyword" id="2796977">struct</span>&nbsp;<span class="op" id="2796984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2796987">b</span>&nbsp;<span class="builtintype" id="2796989">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2796995">x</span>&nbsp;<span class="keyword" id="2796997">interface</span><span class="op" id="2797006">{</span><span class="op" id="2797007">}</span><br>
<span class="lineno"></span><span class="op" id="2797009">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
