<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html" class="current">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2110474">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2110529">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2110583">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2110634">package</span>&nbsp;<span class="ident" id="2110642">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2110651">//&nbsp;An&nbsp;extFloat&nbsp;represents&nbsp;an&nbsp;extended&nbsp;floating-point&nbsp;number,&nbsp;with&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="2110722">//&nbsp;precision&nbsp;than&nbsp;a&nbsp;float64.&nbsp;It&nbsp;does&nbsp;not&nbsp;try&nbsp;to&nbsp;save&nbsp;bits:&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2110785">//&nbsp;number&nbsp;represented&nbsp;by&nbsp;the&nbsp;structure&nbsp;is&nbsp;mant*(2^exp),&nbsp;with&nbsp;a&nbsp;negative</span><br>
<span class="lineno">10</span><span class="comment" id="2110857">//&nbsp;sign&nbsp;if&nbsp;neg&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="2110881">type</span>&nbsp;<span class="ident" id="2110886">extFloat</span>&nbsp;<span class="keyword" id="2110895">struct</span>&nbsp;<span class="op" id="2110902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110905">mant</span>&nbsp;<span class="builtintype" id="2110910">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110918">exp</span>&nbsp;&nbsp;<span class="builtintype" id="2110923">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2110928">neg</span>&nbsp;&nbsp;<span class="builtintype" id="2110933">bool</span><br>
<span class="lineno">15</span><span class="op" id="2110938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2110941">//&nbsp;Powers&nbsp;of&nbsp;ten&nbsp;taken&nbsp;from&nbsp;double-conversion&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="2110996">//&nbsp;http://code.google.com/p/double-conversion/</span><br>
<span class="lineno"></span><span class="keyword" id="2111043">const</span>&nbsp;<span class="op" id="2111049">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111052">firstPowerOfTen</span>&nbsp;<span class="op" id="2111068">=</span>&nbsp;<span class="op" id="2111070">-</span><span class="num" id="2111071">348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2111076">stepPowerOfTen</span>&nbsp;&nbsp;<span class="op" id="2111092">=</span>&nbsp;<span class="num" id="2111094">8</span><br>
<span class="lineno"></span><span class="op" id="2111096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2111099">var</span>&nbsp;<span class="ident" id="2111103">smallPowersOfTen</span>&nbsp;<span class="op" id="2111120">=</span>&nbsp;<span class="op" id="2111122">[</span><span class="op" id="2111123">...</span><span class="op" id="2111126">]</span><span class="ident" id="2111127">extFloat</span><span class="op" id="2111135">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111138">{</span><span class="num" id="2111139">1</span>&nbsp;<span class="op" id="2111141">&lt;&lt;</span>&nbsp;<span class="num" id="2111144">63</span><span class="op" id="2111146">,</span>&nbsp;<span class="op" id="2111148">-</span><span class="num" id="2111149">63</span><span class="op" id="2111151">,</span>&nbsp;<span class="builtintype" id="2111153">false</span><span class="op" id="2111158">}</span><span class="op" id="2111159">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111168">//&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111174">{</span><span class="num" id="2111175">0xa</span>&nbsp;<span class="op" id="2111179">&lt;&lt;</span>&nbsp;<span class="num" id="2111182">60</span><span class="op" id="2111184">,</span>&nbsp;<span class="op" id="2111186">-</span><span class="num" id="2111187">60</span><span class="op" id="2111189">,</span>&nbsp;<span class="builtintype" id="2111191">false</span><span class="op" id="2111196">}</span><span class="op" id="2111197">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111204">//&nbsp;1e1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111212">{</span><span class="num" id="2111213">0x64</span>&nbsp;<span class="op" id="2111218">&lt;&lt;</span>&nbsp;<span class="num" id="2111221">57</span><span class="op" id="2111223">,</span>&nbsp;<span class="op" id="2111225">-</span><span class="num" id="2111226">57</span><span class="op" id="2111228">,</span>&nbsp;<span class="builtintype" id="2111230">false</span><span class="op" id="2111235">}</span><span class="op" id="2111236">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111242">//&nbsp;1e2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111250">{</span><span class="num" id="2111251">0x3e8</span>&nbsp;<span class="op" id="2111257">&lt;&lt;</span>&nbsp;<span class="num" id="2111260">54</span><span class="op" id="2111262">,</span>&nbsp;<span class="op" id="2111264">-</span><span class="num" id="2111265">54</span><span class="op" id="2111267">,</span>&nbsp;<span class="builtintype" id="2111269">false</span><span class="op" id="2111274">}</span><span class="op" id="2111275">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2111280">//&nbsp;1e3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111288">{</span><span class="num" id="2111289">0x2710</span>&nbsp;<span class="op" id="2111296">&lt;&lt;</span>&nbsp;<span class="num" id="2111299">50</span><span class="op" id="2111301">,</span>&nbsp;<span class="op" id="2111303">-</span><span class="num" id="2111304">50</span><span class="op" id="2111306">,</span>&nbsp;<span class="builtintype" id="2111308">false</span><span class="op" id="2111313">}</span><span class="op" id="2111314">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2111318">//&nbsp;1e4</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111326">{</span><span class="num" id="2111327">0x186a0</span>&nbsp;<span class="op" id="2111335">&lt;&lt;</span>&nbsp;<span class="num" id="2111338">47</span><span class="op" id="2111340">,</span>&nbsp;<span class="op" id="2111342">-</span><span class="num" id="2111343">47</span><span class="op" id="2111345">,</span>&nbsp;<span class="builtintype" id="2111347">false</span><span class="op" id="2111352">}</span><span class="op" id="2111353">,</span>&nbsp;&nbsp;<span class="comment" id="2111356">//&nbsp;1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111364">{</span><span class="num" id="2111365">0xf4240</span>&nbsp;<span class="op" id="2111373">&lt;&lt;</span>&nbsp;<span class="num" id="2111376">44</span><span class="op" id="2111378">,</span>&nbsp;<span class="op" id="2111380">-</span><span class="num" id="2111381">44</span><span class="op" id="2111383">,</span>&nbsp;<span class="builtintype" id="2111385">false</span><span class="op" id="2111390">}</span><span class="op" id="2111391">,</span>&nbsp;&nbsp;<span class="comment" id="2111394">//&nbsp;1e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111402">{</span><span class="num" id="2111403">0x989680</span>&nbsp;<span class="op" id="2111412">&lt;&lt;</span>&nbsp;<span class="num" id="2111415">40</span><span class="op" id="2111417">,</span>&nbsp;<span class="op" id="2111419">-</span><span class="num" id="2111420">40</span><span class="op" id="2111422">,</span>&nbsp;<span class="builtintype" id="2111424">false</span><span class="op" id="2111429">}</span><span class="op" id="2111430">,</span>&nbsp;<span class="comment" id="2111432">//&nbsp;1e7</span><br>
<span class="lineno"></span><span class="op" id="2111439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="2111442">var</span>&nbsp;<span class="ident" id="2111446">powersOfTen</span>&nbsp;<span class="op" id="2111458">=</span>&nbsp;<span class="op" id="2111460">[</span><span class="op" id="2111461">...</span><span class="op" id="2111464">]</span><span class="ident" id="2111465">extFloat</span><span class="op" id="2111473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111476">{</span><span class="num" id="2111477">0xfa8fd5a0081c0288</span><span class="op" id="2111495">,</span>&nbsp;<span class="op" id="2111497">-</span><span class="num" id="2111498">1220</span><span class="op" id="2111502">,</span>&nbsp;<span class="builtintype" id="2111504">false</span><span class="op" id="2111509">}</span><span class="op" id="2111510">,</span>&nbsp;<span class="comment" id="2111512">//&nbsp;10^-348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111524">{</span><span class="num" id="2111525">0xbaaee17fa23ebf76</span><span class="op" id="2111543">,</span>&nbsp;<span class="op" id="2111545">-</span><span class="num" id="2111546">1193</span><span class="op" id="2111550">,</span>&nbsp;<span class="builtintype" id="2111552">false</span><span class="op" id="2111557">}</span><span class="op" id="2111558">,</span>&nbsp;<span class="comment" id="2111560">//&nbsp;10^-340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111572">{</span><span class="num" id="2111573">0x8b16fb203055ac76</span><span class="op" id="2111591">,</span>&nbsp;<span class="op" id="2111593">-</span><span class="num" id="2111594">1166</span><span class="op" id="2111598">,</span>&nbsp;<span class="builtintype" id="2111600">false</span><span class="op" id="2111605">}</span><span class="op" id="2111606">,</span>&nbsp;<span class="comment" id="2111608">//&nbsp;10^-332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111620">{</span><span class="num" id="2111621">0xcf42894a5dce35ea</span><span class="op" id="2111639">,</span>&nbsp;<span class="op" id="2111641">-</span><span class="num" id="2111642">1140</span><span class="op" id="2111646">,</span>&nbsp;<span class="builtintype" id="2111648">false</span><span class="op" id="2111653">}</span><span class="op" id="2111654">,</span>&nbsp;<span class="comment" id="2111656">//&nbsp;10^-324</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111668">{</span><span class="num" id="2111669">0x9a6bb0aa55653b2d</span><span class="op" id="2111687">,</span>&nbsp;<span class="op" id="2111689">-</span><span class="num" id="2111690">1113</span><span class="op" id="2111694">,</span>&nbsp;<span class="builtintype" id="2111696">false</span><span class="op" id="2111701">}</span><span class="op" id="2111702">,</span>&nbsp;<span class="comment" id="2111704">//&nbsp;10^-316</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111716">{</span><span class="num" id="2111717">0xe61acf033d1a45df</span><span class="op" id="2111735">,</span>&nbsp;<span class="op" id="2111737">-</span><span class="num" id="2111738">1087</span><span class="op" id="2111742">,</span>&nbsp;<span class="builtintype" id="2111744">false</span><span class="op" id="2111749">}</span><span class="op" id="2111750">,</span>&nbsp;<span class="comment" id="2111752">//&nbsp;10^-308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111764">{</span><span class="num" id="2111765">0xab70fe17c79ac6ca</span><span class="op" id="2111783">,</span>&nbsp;<span class="op" id="2111785">-</span><span class="num" id="2111786">1060</span><span class="op" id="2111790">,</span>&nbsp;<span class="builtintype" id="2111792">false</span><span class="op" id="2111797">}</span><span class="op" id="2111798">,</span>&nbsp;<span class="comment" id="2111800">//&nbsp;10^-300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111812">{</span><span class="num" id="2111813">0xff77b1fcbebcdc4f</span><span class="op" id="2111831">,</span>&nbsp;<span class="op" id="2111833">-</span><span class="num" id="2111834">1034</span><span class="op" id="2111838">,</span>&nbsp;<span class="builtintype" id="2111840">false</span><span class="op" id="2111845">}</span><span class="op" id="2111846">,</span>&nbsp;<span class="comment" id="2111848">//&nbsp;10^-292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111860">{</span><span class="num" id="2111861">0xbe5691ef416bd60c</span><span class="op" id="2111879">,</span>&nbsp;<span class="op" id="2111881">-</span><span class="num" id="2111882">1007</span><span class="op" id="2111886">,</span>&nbsp;<span class="builtintype" id="2111888">false</span><span class="op" id="2111893">}</span><span class="op" id="2111894">,</span>&nbsp;<span class="comment" id="2111896">//&nbsp;10^-284</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111908">{</span><span class="num" id="2111909">0x8dd01fad907ffc3c</span><span class="op" id="2111927">,</span>&nbsp;<span class="op" id="2111929">-</span><span class="num" id="2111930">980</span><span class="op" id="2111933">,</span>&nbsp;<span class="builtintype" id="2111935">false</span><span class="op" id="2111940">}</span><span class="op" id="2111941">,</span>&nbsp;&nbsp;<span class="comment" id="2111944">//&nbsp;10^-276</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2111956">{</span><span class="num" id="2111957">0xd3515c2831559a83</span><span class="op" id="2111975">,</span>&nbsp;<span class="op" id="2111977">-</span><span class="num" id="2111978">954</span><span class="op" id="2111981">,</span>&nbsp;<span class="builtintype" id="2111983">false</span><span class="op" id="2111988">}</span><span class="op" id="2111989">,</span>&nbsp;&nbsp;<span class="comment" id="2111992">//&nbsp;10^-268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112004">{</span><span class="num" id="2112005">0x9d71ac8fada6c9b5</span><span class="op" id="2112023">,</span>&nbsp;<span class="op" id="2112025">-</span><span class="num" id="2112026">927</span><span class="op" id="2112029">,</span>&nbsp;<span class="builtintype" id="2112031">false</span><span class="op" id="2112036">}</span><span class="op" id="2112037">,</span>&nbsp;&nbsp;<span class="comment" id="2112040">//&nbsp;10^-260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112052">{</span><span class="num" id="2112053">0xea9c227723ee8bcb</span><span class="op" id="2112071">,</span>&nbsp;<span class="op" id="2112073">-</span><span class="num" id="2112074">901</span><span class="op" id="2112077">,</span>&nbsp;<span class="builtintype" id="2112079">false</span><span class="op" id="2112084">}</span><span class="op" id="2112085">,</span>&nbsp;&nbsp;<span class="comment" id="2112088">//&nbsp;10^-252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112100">{</span><span class="num" id="2112101">0xaecc49914078536d</span><span class="op" id="2112119">,</span>&nbsp;<span class="op" id="2112121">-</span><span class="num" id="2112122">874</span><span class="op" id="2112125">,</span>&nbsp;<span class="builtintype" id="2112127">false</span><span class="op" id="2112132">}</span><span class="op" id="2112133">,</span>&nbsp;&nbsp;<span class="comment" id="2112136">//&nbsp;10^-244</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112148">{</span><span class="num" id="2112149">0x823c12795db6ce57</span><span class="op" id="2112167">,</span>&nbsp;<span class="op" id="2112169">-</span><span class="num" id="2112170">847</span><span class="op" id="2112173">,</span>&nbsp;<span class="builtintype" id="2112175">false</span><span class="op" id="2112180">}</span><span class="op" id="2112181">,</span>&nbsp;&nbsp;<span class="comment" id="2112184">//&nbsp;10^-236</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112196">{</span><span class="num" id="2112197">0xc21094364dfb5637</span><span class="op" id="2112215">,</span>&nbsp;<span class="op" id="2112217">-</span><span class="num" id="2112218">821</span><span class="op" id="2112221">,</span>&nbsp;<span class="builtintype" id="2112223">false</span><span class="op" id="2112228">}</span><span class="op" id="2112229">,</span>&nbsp;&nbsp;<span class="comment" id="2112232">//&nbsp;10^-228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112244">{</span><span class="num" id="2112245">0x9096ea6f3848984f</span><span class="op" id="2112263">,</span>&nbsp;<span class="op" id="2112265">-</span><span class="num" id="2112266">794</span><span class="op" id="2112269">,</span>&nbsp;<span class="builtintype" id="2112271">false</span><span class="op" id="2112276">}</span><span class="op" id="2112277">,</span>&nbsp;&nbsp;<span class="comment" id="2112280">//&nbsp;10^-220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112292">{</span><span class="num" id="2112293">0xd77485cb25823ac7</span><span class="op" id="2112311">,</span>&nbsp;<span class="op" id="2112313">-</span><span class="num" id="2112314">768</span><span class="op" id="2112317">,</span>&nbsp;<span class="builtintype" id="2112319">false</span><span class="op" id="2112324">}</span><span class="op" id="2112325">,</span>&nbsp;&nbsp;<span class="comment" id="2112328">//&nbsp;10^-212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112340">{</span><span class="num" id="2112341">0xa086cfcd97bf97f4</span><span class="op" id="2112359">,</span>&nbsp;<span class="op" id="2112361">-</span><span class="num" id="2112362">741</span><span class="op" id="2112365">,</span>&nbsp;<span class="builtintype" id="2112367">false</span><span class="op" id="2112372">}</span><span class="op" id="2112373">,</span>&nbsp;&nbsp;<span class="comment" id="2112376">//&nbsp;10^-204</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112388">{</span><span class="num" id="2112389">0xef340a98172aace5</span><span class="op" id="2112407">,</span>&nbsp;<span class="op" id="2112409">-</span><span class="num" id="2112410">715</span><span class="op" id="2112413">,</span>&nbsp;<span class="builtintype" id="2112415">false</span><span class="op" id="2112420">}</span><span class="op" id="2112421">,</span>&nbsp;&nbsp;<span class="comment" id="2112424">//&nbsp;10^-196</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112436">{</span><span class="num" id="2112437">0xb23867fb2a35b28e</span><span class="op" id="2112455">,</span>&nbsp;<span class="op" id="2112457">-</span><span class="num" id="2112458">688</span><span class="op" id="2112461">,</span>&nbsp;<span class="builtintype" id="2112463">false</span><span class="op" id="2112468">}</span><span class="op" id="2112469">,</span>&nbsp;&nbsp;<span class="comment" id="2112472">//&nbsp;10^-188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112484">{</span><span class="num" id="2112485">0x84c8d4dfd2c63f3b</span><span class="op" id="2112503">,</span>&nbsp;<span class="op" id="2112505">-</span><span class="num" id="2112506">661</span><span class="op" id="2112509">,</span>&nbsp;<span class="builtintype" id="2112511">false</span><span class="op" id="2112516">}</span><span class="op" id="2112517">,</span>&nbsp;&nbsp;<span class="comment" id="2112520">//&nbsp;10^-180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112532">{</span><span class="num" id="2112533">0xc5dd44271ad3cdba</span><span class="op" id="2112551">,</span>&nbsp;<span class="op" id="2112553">-</span><span class="num" id="2112554">635</span><span class="op" id="2112557">,</span>&nbsp;<span class="builtintype" id="2112559">false</span><span class="op" id="2112564">}</span><span class="op" id="2112565">,</span>&nbsp;&nbsp;<span class="comment" id="2112568">//&nbsp;10^-172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112580">{</span><span class="num" id="2112581">0x936b9fcebb25c996</span><span class="op" id="2112599">,</span>&nbsp;<span class="op" id="2112601">-</span><span class="num" id="2112602">608</span><span class="op" id="2112605">,</span>&nbsp;<span class="builtintype" id="2112607">false</span><span class="op" id="2112612">}</span><span class="op" id="2112613">,</span>&nbsp;&nbsp;<span class="comment" id="2112616">//&nbsp;10^-164</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112628">{</span><span class="num" id="2112629">0xdbac6c247d62a584</span><span class="op" id="2112647">,</span>&nbsp;<span class="op" id="2112649">-</span><span class="num" id="2112650">582</span><span class="op" id="2112653">,</span>&nbsp;<span class="builtintype" id="2112655">false</span><span class="op" id="2112660">}</span><span class="op" id="2112661">,</span>&nbsp;&nbsp;<span class="comment" id="2112664">//&nbsp;10^-156</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112676">{</span><span class="num" id="2112677">0xa3ab66580d5fdaf6</span><span class="op" id="2112695">,</span>&nbsp;<span class="op" id="2112697">-</span><span class="num" id="2112698">555</span><span class="op" id="2112701">,</span>&nbsp;<span class="builtintype" id="2112703">false</span><span class="op" id="2112708">}</span><span class="op" id="2112709">,</span>&nbsp;&nbsp;<span class="comment" id="2112712">//&nbsp;10^-148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112724">{</span><span class="num" id="2112725">0xf3e2f893dec3f126</span><span class="op" id="2112743">,</span>&nbsp;<span class="op" id="2112745">-</span><span class="num" id="2112746">529</span><span class="op" id="2112749">,</span>&nbsp;<span class="builtintype" id="2112751">false</span><span class="op" id="2112756">}</span><span class="op" id="2112757">,</span>&nbsp;&nbsp;<span class="comment" id="2112760">//&nbsp;10^-140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112772">{</span><span class="num" id="2112773">0xb5b5ada8aaff80b8</span><span class="op" id="2112791">,</span>&nbsp;<span class="op" id="2112793">-</span><span class="num" id="2112794">502</span><span class="op" id="2112797">,</span>&nbsp;<span class="builtintype" id="2112799">false</span><span class="op" id="2112804">}</span><span class="op" id="2112805">,</span>&nbsp;&nbsp;<span class="comment" id="2112808">//&nbsp;10^-132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112820">{</span><span class="num" id="2112821">0x87625f056c7c4a8b</span><span class="op" id="2112839">,</span>&nbsp;<span class="op" id="2112841">-</span><span class="num" id="2112842">475</span><span class="op" id="2112845">,</span>&nbsp;<span class="builtintype" id="2112847">false</span><span class="op" id="2112852">}</span><span class="op" id="2112853">,</span>&nbsp;&nbsp;<span class="comment" id="2112856">//&nbsp;10^-124</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112868">{</span><span class="num" id="2112869">0xc9bcff6034c13053</span><span class="op" id="2112887">,</span>&nbsp;<span class="op" id="2112889">-</span><span class="num" id="2112890">449</span><span class="op" id="2112893">,</span>&nbsp;<span class="builtintype" id="2112895">false</span><span class="op" id="2112900">}</span><span class="op" id="2112901">,</span>&nbsp;&nbsp;<span class="comment" id="2112904">//&nbsp;10^-116</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112916">{</span><span class="num" id="2112917">0x964e858c91ba2655</span><span class="op" id="2112935">,</span>&nbsp;<span class="op" id="2112937">-</span><span class="num" id="2112938">422</span><span class="op" id="2112941">,</span>&nbsp;<span class="builtintype" id="2112943">false</span><span class="op" id="2112948">}</span><span class="op" id="2112949">,</span>&nbsp;&nbsp;<span class="comment" id="2112952">//&nbsp;10^-108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2112964">{</span><span class="num" id="2112965">0xdff9772470297ebd</span><span class="op" id="2112983">,</span>&nbsp;<span class="op" id="2112985">-</span><span class="num" id="2112986">396</span><span class="op" id="2112989">,</span>&nbsp;<span class="builtintype" id="2112991">false</span><span class="op" id="2112996">}</span><span class="op" id="2112997">,</span>&nbsp;&nbsp;<span class="comment" id="2113000">//&nbsp;10^-100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113012">{</span><span class="num" id="2113013">0xa6dfbd9fb8e5b88f</span><span class="op" id="2113031">,</span>&nbsp;<span class="op" id="2113033">-</span><span class="num" id="2113034">369</span><span class="op" id="2113037">,</span>&nbsp;<span class="builtintype" id="2113039">false</span><span class="op" id="2113044">}</span><span class="op" id="2113045">,</span>&nbsp;&nbsp;<span class="comment" id="2113048">//&nbsp;10^-92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113059">{</span><span class="num" id="2113060">0xf8a95fcf88747d94</span><span class="op" id="2113078">,</span>&nbsp;<span class="op" id="2113080">-</span><span class="num" id="2113081">343</span><span class="op" id="2113084">,</span>&nbsp;<span class="builtintype" id="2113086">false</span><span class="op" id="2113091">}</span><span class="op" id="2113092">,</span>&nbsp;&nbsp;<span class="comment" id="2113095">//&nbsp;10^-84</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113106">{</span><span class="num" id="2113107">0xb94470938fa89bcf</span><span class="op" id="2113125">,</span>&nbsp;<span class="op" id="2113127">-</span><span class="num" id="2113128">316</span><span class="op" id="2113131">,</span>&nbsp;<span class="builtintype" id="2113133">false</span><span class="op" id="2113138">}</span><span class="op" id="2113139">,</span>&nbsp;&nbsp;<span class="comment" id="2113142">//&nbsp;10^-76</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113153">{</span><span class="num" id="2113154">0x8a08f0f8bf0f156b</span><span class="op" id="2113172">,</span>&nbsp;<span class="op" id="2113174">-</span><span class="num" id="2113175">289</span><span class="op" id="2113178">,</span>&nbsp;<span class="builtintype" id="2113180">false</span><span class="op" id="2113185">}</span><span class="op" id="2113186">,</span>&nbsp;&nbsp;<span class="comment" id="2113189">//&nbsp;10^-68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113200">{</span><span class="num" id="2113201">0xcdb02555653131b6</span><span class="op" id="2113219">,</span>&nbsp;<span class="op" id="2113221">-</span><span class="num" id="2113222">263</span><span class="op" id="2113225">,</span>&nbsp;<span class="builtintype" id="2113227">false</span><span class="op" id="2113232">}</span><span class="op" id="2113233">,</span>&nbsp;&nbsp;<span class="comment" id="2113236">//&nbsp;10^-60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113247">{</span><span class="num" id="2113248">0x993fe2c6d07b7fac</span><span class="op" id="2113266">,</span>&nbsp;<span class="op" id="2113268">-</span><span class="num" id="2113269">236</span><span class="op" id="2113272">,</span>&nbsp;<span class="builtintype" id="2113274">false</span><span class="op" id="2113279">}</span><span class="op" id="2113280">,</span>&nbsp;&nbsp;<span class="comment" id="2113283">//&nbsp;10^-52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113294">{</span><span class="num" id="2113295">0xe45c10c42a2b3b06</span><span class="op" id="2113313">,</span>&nbsp;<span class="op" id="2113315">-</span><span class="num" id="2113316">210</span><span class="op" id="2113319">,</span>&nbsp;<span class="builtintype" id="2113321">false</span><span class="op" id="2113326">}</span><span class="op" id="2113327">,</span>&nbsp;&nbsp;<span class="comment" id="2113330">//&nbsp;10^-44</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113341">{</span><span class="num" id="2113342">0xaa242499697392d3</span><span class="op" id="2113360">,</span>&nbsp;<span class="op" id="2113362">-</span><span class="num" id="2113363">183</span><span class="op" id="2113366">,</span>&nbsp;<span class="builtintype" id="2113368">false</span><span class="op" id="2113373">}</span><span class="op" id="2113374">,</span>&nbsp;&nbsp;<span class="comment" id="2113377">//&nbsp;10^-36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113388">{</span><span class="num" id="2113389">0xfd87b5f28300ca0e</span><span class="op" id="2113407">,</span>&nbsp;<span class="op" id="2113409">-</span><span class="num" id="2113410">157</span><span class="op" id="2113413">,</span>&nbsp;<span class="builtintype" id="2113415">false</span><span class="op" id="2113420">}</span><span class="op" id="2113421">,</span>&nbsp;&nbsp;<span class="comment" id="2113424">//&nbsp;10^-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113435">{</span><span class="num" id="2113436">0xbce5086492111aeb</span><span class="op" id="2113454">,</span>&nbsp;<span class="op" id="2113456">-</span><span class="num" id="2113457">130</span><span class="op" id="2113460">,</span>&nbsp;<span class="builtintype" id="2113462">false</span><span class="op" id="2113467">}</span><span class="op" id="2113468">,</span>&nbsp;&nbsp;<span class="comment" id="2113471">//&nbsp;10^-20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113482">{</span><span class="num" id="2113483">0x8cbccc096f5088cc</span><span class="op" id="2113501">,</span>&nbsp;<span class="op" id="2113503">-</span><span class="num" id="2113504">103</span><span class="op" id="2113507">,</span>&nbsp;<span class="builtintype" id="2113509">false</span><span class="op" id="2113514">}</span><span class="op" id="2113515">,</span>&nbsp;&nbsp;<span class="comment" id="2113518">//&nbsp;10^-12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113529">{</span><span class="num" id="2113530">0xd1b71758e219652c</span><span class="op" id="2113548">,</span>&nbsp;<span class="op" id="2113550">-</span><span class="num" id="2113551">77</span><span class="op" id="2113553">,</span>&nbsp;<span class="builtintype" id="2113555">false</span><span class="op" id="2113560">}</span><span class="op" id="2113561">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113565">//&nbsp;10^-4</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113575">{</span><span class="num" id="2113576">0x9c40000000000000</span><span class="op" id="2113594">,</span>&nbsp;<span class="op" id="2113596">-</span><span class="num" id="2113597">50</span><span class="op" id="2113599">,</span>&nbsp;<span class="builtintype" id="2113601">false</span><span class="op" id="2113606">}</span><span class="op" id="2113607">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113611">//&nbsp;10^4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113620">{</span><span class="num" id="2113621">0xe8d4a51000000000</span><span class="op" id="2113639">,</span>&nbsp;<span class="op" id="2113641">-</span><span class="num" id="2113642">24</span><span class="op" id="2113644">,</span>&nbsp;<span class="builtintype" id="2113646">false</span><span class="op" id="2113651">}</span><span class="op" id="2113652">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113656">//&nbsp;10^12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113666">{</span><span class="num" id="2113667">0xad78ebc5ac620000</span><span class="op" id="2113685">,</span>&nbsp;<span class="num" id="2113687">3</span><span class="op" id="2113688">,</span>&nbsp;<span class="builtintype" id="2113690">false</span><span class="op" id="2113695">}</span><span class="op" id="2113696">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2113702">//&nbsp;10^20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113712">{</span><span class="num" id="2113713">0x813f3978f8940984</span><span class="op" id="2113731">,</span>&nbsp;<span class="num" id="2113733">30</span><span class="op" id="2113735">,</span>&nbsp;<span class="builtintype" id="2113737">false</span><span class="op" id="2113742">}</span><span class="op" id="2113743">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2113748">//&nbsp;10^28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113758">{</span><span class="num" id="2113759">0xc097ce7bc90715b3</span><span class="op" id="2113777">,</span>&nbsp;<span class="num" id="2113779">56</span><span class="op" id="2113781">,</span>&nbsp;<span class="builtintype" id="2113783">false</span><span class="op" id="2113788">}</span><span class="op" id="2113789">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2113794">//&nbsp;10^36</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113804">{</span><span class="num" id="2113805">0x8f7e32ce7bea5c70</span><span class="op" id="2113823">,</span>&nbsp;<span class="num" id="2113825">83</span><span class="op" id="2113827">,</span>&nbsp;<span class="builtintype" id="2113829">false</span><span class="op" id="2113834">}</span><span class="op" id="2113835">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2113840">//&nbsp;10^44</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113850">{</span><span class="num" id="2113851">0xd5d238a4abe98068</span><span class="op" id="2113869">,</span>&nbsp;<span class="num" id="2113871">109</span><span class="op" id="2113874">,</span>&nbsp;<span class="builtintype" id="2113876">false</span><span class="op" id="2113881">}</span><span class="op" id="2113882">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113886">//&nbsp;10^52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113896">{</span><span class="num" id="2113897">0x9f4f2726179a2245</span><span class="op" id="2113915">,</span>&nbsp;<span class="num" id="2113917">136</span><span class="op" id="2113920">,</span>&nbsp;<span class="builtintype" id="2113922">false</span><span class="op" id="2113927">}</span><span class="op" id="2113928">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113932">//&nbsp;10^60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113942">{</span><span class="num" id="2113943">0xed63a231d4c4fb27</span><span class="op" id="2113961">,</span>&nbsp;<span class="num" id="2113963">162</span><span class="op" id="2113966">,</span>&nbsp;<span class="builtintype" id="2113968">false</span><span class="op" id="2113973">}</span><span class="op" id="2113974">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2113978">//&nbsp;10^68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2113988">{</span><span class="num" id="2113989">0xb0de65388cc8ada8</span><span class="op" id="2114007">,</span>&nbsp;<span class="num" id="2114009">189</span><span class="op" id="2114012">,</span>&nbsp;<span class="builtintype" id="2114014">false</span><span class="op" id="2114019">}</span><span class="op" id="2114020">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114024">//&nbsp;10^76</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114034">{</span><span class="num" id="2114035">0x83c7088e1aab65db</span><span class="op" id="2114053">,</span>&nbsp;<span class="num" id="2114055">216</span><span class="op" id="2114058">,</span>&nbsp;<span class="builtintype" id="2114060">false</span><span class="op" id="2114065">}</span><span class="op" id="2114066">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114070">//&nbsp;10^84</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114080">{</span><span class="num" id="2114081">0xc45d1df942711d9a</span><span class="op" id="2114099">,</span>&nbsp;<span class="num" id="2114101">242</span><span class="op" id="2114104">,</span>&nbsp;<span class="builtintype" id="2114106">false</span><span class="op" id="2114111">}</span><span class="op" id="2114112">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114116">//&nbsp;10^92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114126">{</span><span class="num" id="2114127">0x924d692ca61be758</span><span class="op" id="2114145">,</span>&nbsp;<span class="num" id="2114147">269</span><span class="op" id="2114150">,</span>&nbsp;<span class="builtintype" id="2114152">false</span><span class="op" id="2114157">}</span><span class="op" id="2114158">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114162">//&nbsp;10^100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114173">{</span><span class="num" id="2114174">0xda01ee641a708dea</span><span class="op" id="2114192">,</span>&nbsp;<span class="num" id="2114194">295</span><span class="op" id="2114197">,</span>&nbsp;<span class="builtintype" id="2114199">false</span><span class="op" id="2114204">}</span><span class="op" id="2114205">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114209">//&nbsp;10^108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114220">{</span><span class="num" id="2114221">0xa26da3999aef774a</span><span class="op" id="2114239">,</span>&nbsp;<span class="num" id="2114241">322</span><span class="op" id="2114244">,</span>&nbsp;<span class="builtintype" id="2114246">false</span><span class="op" id="2114251">}</span><span class="op" id="2114252">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114256">//&nbsp;10^116</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114267">{</span><span class="num" id="2114268">0xf209787bb47d6b85</span><span class="op" id="2114286">,</span>&nbsp;<span class="num" id="2114288">348</span><span class="op" id="2114291">,</span>&nbsp;<span class="builtintype" id="2114293">false</span><span class="op" id="2114298">}</span><span class="op" id="2114299">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114303">//&nbsp;10^124</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114314">{</span><span class="num" id="2114315">0xb454e4a179dd1877</span><span class="op" id="2114333">,</span>&nbsp;<span class="num" id="2114335">375</span><span class="op" id="2114338">,</span>&nbsp;<span class="builtintype" id="2114340">false</span><span class="op" id="2114345">}</span><span class="op" id="2114346">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114350">//&nbsp;10^132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114361">{</span><span class="num" id="2114362">0x865b86925b9bc5c2</span><span class="op" id="2114380">,</span>&nbsp;<span class="num" id="2114382">402</span><span class="op" id="2114385">,</span>&nbsp;<span class="builtintype" id="2114387">false</span><span class="op" id="2114392">}</span><span class="op" id="2114393">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114397">//&nbsp;10^140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114408">{</span><span class="num" id="2114409">0xc83553c5c8965d3d</span><span class="op" id="2114427">,</span>&nbsp;<span class="num" id="2114429">428</span><span class="op" id="2114432">,</span>&nbsp;<span class="builtintype" id="2114434">false</span><span class="op" id="2114439">}</span><span class="op" id="2114440">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114444">//&nbsp;10^148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114455">{</span><span class="num" id="2114456">0x952ab45cfa97a0b3</span><span class="op" id="2114474">,</span>&nbsp;<span class="num" id="2114476">455</span><span class="op" id="2114479">,</span>&nbsp;<span class="builtintype" id="2114481">false</span><span class="op" id="2114486">}</span><span class="op" id="2114487">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114491">//&nbsp;10^156</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114502">{</span><span class="num" id="2114503">0xde469fbd99a05fe3</span><span class="op" id="2114521">,</span>&nbsp;<span class="num" id="2114523">481</span><span class="op" id="2114526">,</span>&nbsp;<span class="builtintype" id="2114528">false</span><span class="op" id="2114533">}</span><span class="op" id="2114534">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114538">//&nbsp;10^164</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114549">{</span><span class="num" id="2114550">0xa59bc234db398c25</span><span class="op" id="2114568">,</span>&nbsp;<span class="num" id="2114570">508</span><span class="op" id="2114573">,</span>&nbsp;<span class="builtintype" id="2114575">false</span><span class="op" id="2114580">}</span><span class="op" id="2114581">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114585">//&nbsp;10^172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114596">{</span><span class="num" id="2114597">0xf6c69a72a3989f5c</span><span class="op" id="2114615">,</span>&nbsp;<span class="num" id="2114617">534</span><span class="op" id="2114620">,</span>&nbsp;<span class="builtintype" id="2114622">false</span><span class="op" id="2114627">}</span><span class="op" id="2114628">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114632">//&nbsp;10^180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114643">{</span><span class="num" id="2114644">0xb7dcbf5354e9bece</span><span class="op" id="2114662">,</span>&nbsp;<span class="num" id="2114664">561</span><span class="op" id="2114667">,</span>&nbsp;<span class="builtintype" id="2114669">false</span><span class="op" id="2114674">}</span><span class="op" id="2114675">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114679">//&nbsp;10^188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114690">{</span><span class="num" id="2114691">0x88fcf317f22241e2</span><span class="op" id="2114709">,</span>&nbsp;<span class="num" id="2114711">588</span><span class="op" id="2114714">,</span>&nbsp;<span class="builtintype" id="2114716">false</span><span class="op" id="2114721">}</span><span class="op" id="2114722">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114726">//&nbsp;10^196</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114737">{</span><span class="num" id="2114738">0xcc20ce9bd35c78a5</span><span class="op" id="2114756">,</span>&nbsp;<span class="num" id="2114758">614</span><span class="op" id="2114761">,</span>&nbsp;<span class="builtintype" id="2114763">false</span><span class="op" id="2114768">}</span><span class="op" id="2114769">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114773">//&nbsp;10^204</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114784">{</span><span class="num" id="2114785">0x98165af37b2153df</span><span class="op" id="2114803">,</span>&nbsp;<span class="num" id="2114805">641</span><span class="op" id="2114808">,</span>&nbsp;<span class="builtintype" id="2114810">false</span><span class="op" id="2114815">}</span><span class="op" id="2114816">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114820">//&nbsp;10^212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114831">{</span><span class="num" id="2114832">0xe2a0b5dc971f303a</span><span class="op" id="2114850">,</span>&nbsp;<span class="num" id="2114852">667</span><span class="op" id="2114855">,</span>&nbsp;<span class="builtintype" id="2114857">false</span><span class="op" id="2114862">}</span><span class="op" id="2114863">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114867">//&nbsp;10^220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114878">{</span><span class="num" id="2114879">0xa8d9d1535ce3b396</span><span class="op" id="2114897">,</span>&nbsp;<span class="num" id="2114899">694</span><span class="op" id="2114902">,</span>&nbsp;<span class="builtintype" id="2114904">false</span><span class="op" id="2114909">}</span><span class="op" id="2114910">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114914">//&nbsp;10^228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114925">{</span><span class="num" id="2114926">0xfb9b7cd9a4a7443c</span><span class="op" id="2114944">,</span>&nbsp;<span class="num" id="2114946">720</span><span class="op" id="2114949">,</span>&nbsp;<span class="builtintype" id="2114951">false</span><span class="op" id="2114956">}</span><span class="op" id="2114957">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2114961">//&nbsp;10^236</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2114972">{</span><span class="num" id="2114973">0xbb764c4ca7a44410</span><span class="op" id="2114991">,</span>&nbsp;<span class="num" id="2114993">747</span><span class="op" id="2114996">,</span>&nbsp;<span class="builtintype" id="2114998">false</span><span class="op" id="2115003">}</span><span class="op" id="2115004">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115008">//&nbsp;10^244</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115019">{</span><span class="num" id="2115020">0x8bab8eefb6409c1a</span><span class="op" id="2115038">,</span>&nbsp;<span class="num" id="2115040">774</span><span class="op" id="2115043">,</span>&nbsp;<span class="builtintype" id="2115045">false</span><span class="op" id="2115050">}</span><span class="op" id="2115051">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115055">//&nbsp;10^252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115066">{</span><span class="num" id="2115067">0xd01fef10a657842c</span><span class="op" id="2115085">,</span>&nbsp;<span class="num" id="2115087">800</span><span class="op" id="2115090">,</span>&nbsp;<span class="builtintype" id="2115092">false</span><span class="op" id="2115097">}</span><span class="op" id="2115098">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115102">//&nbsp;10^260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115113">{</span><span class="num" id="2115114">0x9b10a4e5e9913129</span><span class="op" id="2115132">,</span>&nbsp;<span class="num" id="2115134">827</span><span class="op" id="2115137">,</span>&nbsp;<span class="builtintype" id="2115139">false</span><span class="op" id="2115144">}</span><span class="op" id="2115145">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115149">//&nbsp;10^268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115160">{</span><span class="num" id="2115161">0xe7109bfba19c0c9d</span><span class="op" id="2115179">,</span>&nbsp;<span class="num" id="2115181">853</span><span class="op" id="2115184">,</span>&nbsp;<span class="builtintype" id="2115186">false</span><span class="op" id="2115191">}</span><span class="op" id="2115192">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115196">//&nbsp;10^276</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115207">{</span><span class="num" id="2115208">0xac2820d9623bf429</span><span class="op" id="2115226">,</span>&nbsp;<span class="num" id="2115228">880</span><span class="op" id="2115231">,</span>&nbsp;<span class="builtintype" id="2115233">false</span><span class="op" id="2115238">}</span><span class="op" id="2115239">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115243">//&nbsp;10^284</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115254">{</span><span class="num" id="2115255">0x80444b5e7aa7cf85</span><span class="op" id="2115273">,</span>&nbsp;<span class="num" id="2115275">907</span><span class="op" id="2115278">,</span>&nbsp;<span class="builtintype" id="2115280">false</span><span class="op" id="2115285">}</span><span class="op" id="2115286">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115290">//&nbsp;10^292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115301">{</span><span class="num" id="2115302">0xbf21e44003acdd2d</span><span class="op" id="2115320">,</span>&nbsp;<span class="num" id="2115322">933</span><span class="op" id="2115325">,</span>&nbsp;<span class="builtintype" id="2115327">false</span><span class="op" id="2115332">}</span><span class="op" id="2115333">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115337">//&nbsp;10^300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115348">{</span><span class="num" id="2115349">0x8e679c2f5e44ff8f</span><span class="op" id="2115367">,</span>&nbsp;<span class="num" id="2115369">960</span><span class="op" id="2115372">,</span>&nbsp;<span class="builtintype" id="2115374">false</span><span class="op" id="2115379">}</span><span class="op" id="2115380">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115384">//&nbsp;10^308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115395">{</span><span class="num" id="2115396">0xd433179d9c8cb841</span><span class="op" id="2115414">,</span>&nbsp;<span class="num" id="2115416">986</span><span class="op" id="2115419">,</span>&nbsp;<span class="builtintype" id="2115421">false</span><span class="op" id="2115426">}</span><span class="op" id="2115427">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2115431">//&nbsp;10^316</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115442">{</span><span class="num" id="2115443">0x9e19db92b4e31ba9</span><span class="op" id="2115461">,</span>&nbsp;<span class="num" id="2115463">1013</span><span class="op" id="2115467">,</span>&nbsp;<span class="builtintype" id="2115469">false</span><span class="op" id="2115474">}</span><span class="op" id="2115475">,</span>&nbsp;&nbsp;<span class="comment" id="2115478">//&nbsp;10^324</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115489">{</span><span class="num" id="2115490">0xeb96bf6ebadf77d9</span><span class="op" id="2115508">,</span>&nbsp;<span class="num" id="2115510">1039</span><span class="op" id="2115514">,</span>&nbsp;<span class="builtintype" id="2115516">false</span><span class="op" id="2115521">}</span><span class="op" id="2115522">,</span>&nbsp;&nbsp;<span class="comment" id="2115525">//&nbsp;10^332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115536">{</span><span class="num" id="2115537">0xaf87023b9bf0ee6b</span><span class="op" id="2115555">,</span>&nbsp;<span class="num" id="2115557">1066</span><span class="op" id="2115561">,</span>&nbsp;<span class="builtintype" id="2115563">false</span><span class="op" id="2115568">}</span><span class="op" id="2115569">,</span>&nbsp;&nbsp;<span class="comment" id="2115572">//&nbsp;10^340</span><br>
<span class="lineno"></span><span class="op" id="2115582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="2115585">//&nbsp;floatBits&nbsp;returns&nbsp;the&nbsp;bits&nbsp;of&nbsp;the&nbsp;float64&nbsp;that&nbsp;best&nbsp;approximates</span><br>
<span class="lineno"></span><span class="comment" id="2115653">//&nbsp;the&nbsp;extFloat&nbsp;passed&nbsp;as&nbsp;receiver.&nbsp;Overflow&nbsp;is&nbsp;set&nbsp;to&nbsp;true&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="2115716">//&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;is&nbsp;Inf.</span><br>
<span class="lineno"></span><span class="keyword" id="2115751">func</span>&nbsp;<span class="op" id="2115756">(</span><span class="ident" id="2115757">f</span>&nbsp;<span class="op" id="2115759">*</span><span class="ident" id="2115760">extFloat</span><span class="op" id="2115768">)</span>&nbsp;<span class="ident" id="2115770">floatBits</span><span class="op" id="2115779">(</span><span class="ident" id="2115780">flt</span>&nbsp;<span class="op" id="2115784">*</span><span class="ident" id="2115785">floatInfo</span><span class="op" id="2115794">)</span>&nbsp;<span class="op" id="2115796">(</span><span class="ident" id="2115797">bits</span>&nbsp;<span class="builtintype" id="2115802">uint64</span><span class="op" id="2115808">,</span>&nbsp;<span class="ident" id="2115810">overflow</span>&nbsp;<span class="builtintype" id="2115819">bool</span><span class="op" id="2115823">)</span>&nbsp;<span class="op" id="2115825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2115828">f</span><span class="op" id="2115829">.</span><span class="ident" id="2115830">Normalize</span><span class="op" id="2115839">(</span><span class="op" id="2115840">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2115844">exp</span>&nbsp;<span class="op" id="2115848">:=</span>&nbsp;<span class="ident" id="2115851">f</span><span class="op" id="2115852">.</span><span class="ident" id="2115853">exp</span>&nbsp;<span class="op" id="2115857">+</span>&nbsp;<span class="num" id="2115859">63</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2115864">//&nbsp;Exponent&nbsp;too&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2115888">if</span>&nbsp;<span class="ident" id="2115891">exp</span>&nbsp;<span class="op" id="2115895">&lt;</span>&nbsp;<span class="ident" id="2115897">flt</span><span class="op" id="2115900">.</span><span class="ident" id="2115901">bias</span><span class="op" id="2115905">+</span><span class="num" id="2115906">1</span>&nbsp;<span class="op" id="2115908">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2115912">n</span>&nbsp;<span class="op" id="2115914">:=</span>&nbsp;<span class="ident" id="2115917">flt</span><span class="op" id="2115920">.</span><span class="ident" id="2115921">bias</span>&nbsp;<span class="op" id="2115926">+</span>&nbsp;<span class="num" id="2115928">1</span>&nbsp;<span class="op" id="2115930">-</span>&nbsp;<span class="ident" id="2115932">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2115938">f</span><span class="op" id="2115939">.</span><span class="ident" id="2115940">mant</span>&nbsp;<span class="op" id="2115945">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2115949">uint</span><span class="op" id="2115953">(</span><span class="ident" id="2115954">n</span><span class="op" id="2115955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2115959">exp</span>&nbsp;<span class="op" id="2115963">+=</span>&nbsp;<span class="ident" id="2115966">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2115969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2115973">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits&nbsp;from&nbsp;the&nbsp;64-bit&nbsp;mantissa.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116031">mant</span>&nbsp;<span class="op" id="2116036">:=</span>&nbsp;<span class="ident" id="2116039">f</span><span class="op" id="2116040">.</span><span class="ident" id="2116041">mant</span>&nbsp;<span class="op" id="2116046">&gt;&gt;</span>&nbsp;<span class="op" id="2116049">(</span><span class="num" id="2116050">63</span>&nbsp;<span class="op" id="2116053">-</span>&nbsp;<span class="ident" id="2116055">flt</span><span class="op" id="2116058">.</span><span class="ident" id="2116059">mantbits</span><span class="op" id="2116067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2116070">if</span>&nbsp;<span class="ident" id="2116073">f</span><span class="op" id="2116074">.</span><span class="ident" id="2116075">mant</span><span class="op" id="2116079">&amp;</span><span class="op" id="2116080">(</span><span class="num" id="2116081">1</span><span class="op" id="2116082">&lt;&lt;</span><span class="op" id="2116084">(</span><span class="num" id="2116085">62</span><span class="op" id="2116087">-</span><span class="ident" id="2116088">flt</span><span class="op" id="2116091">.</span><span class="ident" id="2116092">mantbits</span><span class="op" id="2116100">)</span><span class="op" id="2116101">)</span>&nbsp;<span class="op" id="2116103">!=</span>&nbsp;<span class="num" id="2116106">0</span>&nbsp;<span class="op" id="2116108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116112">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116127">mant</span>&nbsp;<span class="op" id="2116132">+=</span>&nbsp;<span class="num" id="2116135">1</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2116138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116142">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2116191">if</span>&nbsp;<span class="ident" id="2116194">mant</span>&nbsp;<span class="op" id="2116199">==</span>&nbsp;<span class="num" id="2116202">2</span><span class="op" id="2116203">&lt;&lt;</span><span class="ident" id="2116205">flt</span><span class="op" id="2116208">.</span><span class="ident" id="2116209">mantbits</span>&nbsp;<span class="op" id="2116218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116222">mant</span>&nbsp;<span class="op" id="2116227">&gt;&gt;=</span>&nbsp;<span class="num" id="2116231">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116235">exp</span><span class="op" id="2116238">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2116242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116246">//&nbsp;Infinities.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2116262">if</span>&nbsp;<span class="ident" id="2116265">exp</span><span class="op" id="2116268">-</span><span class="ident" id="2116269">flt</span><span class="op" id="2116272">.</span><span class="ident" id="2116273">bias</span>&nbsp;<span class="op" id="2116278">&gt;=</span>&nbsp;<span class="num" id="2116281">1</span><span class="op" id="2116282">&lt;&lt;</span><span class="ident" id="2116284">flt</span><span class="op" id="2116287">.</span><span class="ident" id="2116288">expbits</span><span class="op" id="2116295">-</span><span class="num" id="2116296">1</span>&nbsp;<span class="op" id="2116298">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116302">//&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116313">mant</span>&nbsp;<span class="op" id="2116318">=</span>&nbsp;<span class="num" id="2116320">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116324">exp</span>&nbsp;<span class="op" id="2116328">=</span>&nbsp;<span class="num" id="2116330">1</span><span class="op" id="2116331">&lt;&lt;</span><span class="ident" id="2116333">flt</span><span class="op" id="2116336">.</span><span class="ident" id="2116337">expbits</span>&nbsp;<span class="op" id="2116345">-</span>&nbsp;<span class="num" id="2116347">1</span>&nbsp;<span class="op" id="2116349">+</span>&nbsp;<span class="ident" id="2116351">flt</span><span class="op" id="2116354">.</span><span class="ident" id="2116355">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116362">overflow</span>&nbsp;<span class="op" id="2116371">=</span>&nbsp;<span class="builtintype" id="2116373">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2116379">}</span>&nbsp;<span class="keyword" id="2116381">else</span>&nbsp;<span class="keyword" id="2116386">if</span>&nbsp;<span class="ident" id="2116389">mant</span><span class="op" id="2116393">&amp;</span><span class="op" id="2116394">(</span><span class="num" id="2116395">1</span><span class="op" id="2116396">&lt;&lt;</span><span class="ident" id="2116398">flt</span><span class="op" id="2116401">.</span><span class="ident" id="2116402">mantbits</span><span class="op" id="2116410">)</span>&nbsp;<span class="op" id="2116412">==</span>&nbsp;<span class="num" id="2116415">0</span>&nbsp;<span class="op" id="2116417">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116421">//&nbsp;Denormalized?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116440">exp</span>&nbsp;<span class="op" id="2116444">=</span>&nbsp;<span class="ident" id="2116446">flt</span><span class="op" id="2116449">.</span><span class="ident" id="2116450">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2116456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2116459">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116478">bits</span>&nbsp;<span class="op" id="2116483">=</span>&nbsp;<span class="ident" id="2116485">mant</span>&nbsp;<span class="op" id="2116490">&amp;</span>&nbsp;<span class="op" id="2116492">(</span><span class="builtintype" id="2116493">uint64</span><span class="op" id="2116499">(</span><span class="num" id="2116500">1</span><span class="op" id="2116501">)</span><span class="op" id="2116502">&lt;&lt;</span><span class="ident" id="2116504">flt</span><span class="op" id="2116507">.</span><span class="ident" id="2116508">mantbits</span>&nbsp;<span class="op" id="2116517">-</span>&nbsp;<span class="num" id="2116519">1</span><span class="op" id="2116520">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116523">bits</span>&nbsp;<span class="op" id="2116528">|=</span>&nbsp;<span class="builtintype" id="2116531">uint64</span><span class="op" id="2116537">(</span><span class="op" id="2116538">(</span><span class="ident" id="2116539">exp</span><span class="op" id="2116542">-</span><span class="ident" id="2116543">flt</span><span class="op" id="2116546">.</span><span class="ident" id="2116547">bias</span><span class="op" id="2116551">)</span><span class="op" id="2116552">&amp;</span><span class="op" id="2116553">(</span><span class="num" id="2116554">1</span><span class="op" id="2116555">&lt;&lt;</span><span class="ident" id="2116557">flt</span><span class="op" id="2116560">.</span><span class="ident" id="2116561">expbits</span><span class="op" id="2116568">-</span><span class="num" id="2116569">1</span><span class="op" id="2116570">)</span><span class="op" id="2116571">)</span>&nbsp;<span class="op" id="2116573">&lt;&lt;</span>&nbsp;<span class="ident" id="2116576">flt</span><span class="op" id="2116579">.</span><span class="ident" id="2116580">mantbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2116590">if</span>&nbsp;<span class="ident" id="2116593">f</span><span class="op" id="2116594">.</span><span class="ident" id="2116595">neg</span>&nbsp;<span class="op" id="2116599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2116603">bits</span>&nbsp;<span class="op" id="2116608">|=</span>&nbsp;<span class="num" id="2116611">1</span>&nbsp;<span class="op" id="2116613">&lt;&lt;</span>&nbsp;<span class="op" id="2116616">(</span><span class="ident" id="2116617">flt</span><span class="op" id="2116620">.</span><span class="ident" id="2116621">mantbits</span>&nbsp;<span class="op" id="2116630">+</span>&nbsp;<span class="ident" id="2116632">flt</span><span class="op" id="2116635">.</span><span class="ident" id="2116636">expbits</span><span class="op" id="2116643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2116646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2116649">return</span><br>
<span class="lineno">170</span><span class="op" id="2116656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2116659">//&nbsp;AssignComputeBounds&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;floating&nbsp;point&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2116717">//&nbsp;defined&nbsp;by&nbsp;mant,&nbsp;exp&nbsp;and&nbsp;precision&nbsp;given&nbsp;by&nbsp;flt.&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="2116780">//&nbsp;lower,&nbsp;upper&nbsp;such&nbsp;that&nbsp;any&nbsp;number&nbsp;in&nbsp;the&nbsp;closed&nbsp;interval</span><br>
<span class="lineno">175</span><span class="comment" id="2116840">//&nbsp;[lower,&nbsp;upper]&nbsp;is&nbsp;converted&nbsp;back&nbsp;to&nbsp;the&nbsp;same&nbsp;floating&nbsp;point&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="2116911">func</span>&nbsp;<span class="op" id="2116916">(</span><span class="ident" id="2116917">f</span>&nbsp;<span class="op" id="2116919">*</span><span class="ident" id="2116920">extFloat</span><span class="op" id="2116928">)</span>&nbsp;<span class="ident" id="2116930">AssignComputeBounds</span><span class="op" id="2116949">(</span><span class="ident" id="2116950">mant</span>&nbsp;<span class="builtintype" id="2116955">uint64</span><span class="op" id="2116961">,</span>&nbsp;<span class="ident" id="2116963">exp</span>&nbsp;<span class="builtintype" id="2116967">int</span><span class="op" id="2116970">,</span>&nbsp;<span class="ident" id="2116972">neg</span>&nbsp;<span class="builtintype" id="2116976">bool</span><span class="op" id="2116980">,</span>&nbsp;<span class="ident" id="2116982">flt</span>&nbsp;<span class="op" id="2116986">*</span><span class="ident" id="2116987">floatInfo</span><span class="op" id="2116996">)</span>&nbsp;<span class="op" id="2116998">(</span><span class="ident" id="2116999">lower</span><span class="op" id="2117004">,</span>&nbsp;<span class="ident" id="2117006">upper</span>&nbsp;<span class="ident" id="2117012">extFloat</span><span class="op" id="2117020">)</span>&nbsp;<span class="op" id="2117022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117025">f</span><span class="op" id="2117026">.</span><span class="ident" id="2117027">mant</span>&nbsp;<span class="op" id="2117032">=</span>&nbsp;<span class="ident" id="2117034">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117040">f</span><span class="op" id="2117041">.</span><span class="ident" id="2117042">exp</span>&nbsp;<span class="op" id="2117046">=</span>&nbsp;<span class="ident" id="2117048">exp</span>&nbsp;<span class="op" id="2117052">-</span>&nbsp;<span class="builtintype" id="2117054">int</span><span class="op" id="2117057">(</span><span class="ident" id="2117058">flt</span><span class="op" id="2117061">.</span><span class="ident" id="2117062">mantbits</span><span class="op" id="2117070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117073">f</span><span class="op" id="2117074">.</span><span class="ident" id="2117075">neg</span>&nbsp;<span class="op" id="2117079">=</span>&nbsp;<span class="ident" id="2117081">neg</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117086">if</span>&nbsp;<span class="ident" id="2117089">f</span><span class="op" id="2117090">.</span><span class="ident" id="2117091">exp</span>&nbsp;<span class="op" id="2117095">&lt;=</span>&nbsp;<span class="num" id="2117098">0</span>&nbsp;<span class="op" id="2117100">&amp;&amp;</span>&nbsp;<span class="ident" id="2117103">mant</span>&nbsp;<span class="op" id="2117108">==</span>&nbsp;<span class="op" id="2117111">(</span><span class="ident" id="2117112">mant</span><span class="op" id="2117116">&gt;&gt;</span><span class="builtintype" id="2117118">uint</span><span class="op" id="2117122">(</span><span class="op" id="2117123">-</span><span class="ident" id="2117124">f</span><span class="op" id="2117125">.</span><span class="ident" id="2117126">exp</span><span class="op" id="2117129">)</span><span class="op" id="2117130">)</span><span class="op" id="2117131">&lt;&lt;</span><span class="builtintype" id="2117133">uint</span><span class="op" id="2117137">(</span><span class="op" id="2117138">-</span><span class="ident" id="2117139">f</span><span class="op" id="2117140">.</span><span class="ident" id="2117141">exp</span><span class="op" id="2117144">)</span>&nbsp;<span class="op" id="2117146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2117150">//&nbsp;An&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117172">f</span><span class="op" id="2117173">.</span><span class="ident" id="2117174">mant</span>&nbsp;<span class="op" id="2117179">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="2117183">uint</span><span class="op" id="2117187">(</span><span class="op" id="2117188">-</span><span class="ident" id="2117189">f</span><span class="op" id="2117190">.</span><span class="ident" id="2117191">exp</span><span class="op" id="2117194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117198">f</span><span class="op" id="2117199">.</span><span class="ident" id="2117200">exp</span>&nbsp;<span class="op" id="2117204">=</span>&nbsp;<span class="num" id="2117206">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117210">return</span>&nbsp;<span class="op" id="2117217">*</span><span class="ident" id="2117218">f</span><span class="op" id="2117219">,</span>&nbsp;<span class="op" id="2117221">*</span><span class="ident" id="2117222">f</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117228">expBiased</span>&nbsp;<span class="op" id="2117238">:=</span>&nbsp;<span class="ident" id="2117241">exp</span>&nbsp;<span class="op" id="2117245">-</span>&nbsp;<span class="ident" id="2117247">flt</span><span class="op" id="2117250">.</span><span class="ident" id="2117251">bias</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117258">upper</span>&nbsp;<span class="op" id="2117264">=</span>&nbsp;<span class="ident" id="2117266">extFloat</span><span class="op" id="2117274">{</span><span class="ident" id="2117275">mant</span><span class="op" id="2117279">:</span>&nbsp;<span class="num" id="2117281">2</span><span class="op" id="2117282">*</span><span class="ident" id="2117283">f</span><span class="op" id="2117284">.</span><span class="ident" id="2117285">mant</span>&nbsp;<span class="op" id="2117290">+</span>&nbsp;<span class="num" id="2117292">1</span><span class="op" id="2117293">,</span>&nbsp;<span class="ident" id="2117295">exp</span><span class="op" id="2117298">:</span>&nbsp;<span class="ident" id="2117300">f</span><span class="op" id="2117301">.</span><span class="ident" id="2117302">exp</span>&nbsp;<span class="op" id="2117306">-</span>&nbsp;<span class="num" id="2117308">1</span><span class="op" id="2117309">,</span>&nbsp;<span class="ident" id="2117311">neg</span><span class="op" id="2117314">:</span>&nbsp;<span class="ident" id="2117316">f</span><span class="op" id="2117317">.</span><span class="ident" id="2117318">neg</span><span class="op" id="2117321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117324">if</span>&nbsp;<span class="ident" id="2117327">mant</span>&nbsp;<span class="op" id="2117332">!=</span>&nbsp;<span class="num" id="2117335">1</span><span class="op" id="2117336">&lt;&lt;</span><span class="ident" id="2117338">flt</span><span class="op" id="2117341">.</span><span class="ident" id="2117342">mantbits</span>&nbsp;<span class="op" id="2117351">||</span>&nbsp;<span class="ident" id="2117354">expBiased</span>&nbsp;<span class="op" id="2117364">==</span>&nbsp;<span class="num" id="2117367">1</span>&nbsp;<span class="op" id="2117369">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117373">lower</span>&nbsp;<span class="op" id="2117379">=</span>&nbsp;<span class="ident" id="2117381">extFloat</span><span class="op" id="2117389">{</span><span class="ident" id="2117390">mant</span><span class="op" id="2117394">:</span>&nbsp;<span class="num" id="2117396">2</span><span class="op" id="2117397">*</span><span class="ident" id="2117398">f</span><span class="op" id="2117399">.</span><span class="ident" id="2117400">mant</span>&nbsp;<span class="op" id="2117405">-</span>&nbsp;<span class="num" id="2117407">1</span><span class="op" id="2117408">,</span>&nbsp;<span class="ident" id="2117410">exp</span><span class="op" id="2117413">:</span>&nbsp;<span class="ident" id="2117415">f</span><span class="op" id="2117416">.</span><span class="ident" id="2117417">exp</span>&nbsp;<span class="op" id="2117421">-</span>&nbsp;<span class="num" id="2117423">1</span><span class="op" id="2117424">,</span>&nbsp;<span class="ident" id="2117426">neg</span><span class="op" id="2117429">:</span>&nbsp;<span class="ident" id="2117431">f</span><span class="op" id="2117432">.</span><span class="ident" id="2117433">neg</span><span class="op" id="2117436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117439">}</span>&nbsp;<span class="keyword" id="2117441">else</span>&nbsp;<span class="op" id="2117446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117450">lower</span>&nbsp;<span class="op" id="2117456">=</span>&nbsp;<span class="ident" id="2117458">extFloat</span><span class="op" id="2117466">{</span><span class="ident" id="2117467">mant</span><span class="op" id="2117471">:</span>&nbsp;<span class="num" id="2117473">4</span><span class="op" id="2117474">*</span><span class="ident" id="2117475">f</span><span class="op" id="2117476">.</span><span class="ident" id="2117477">mant</span>&nbsp;<span class="op" id="2117482">-</span>&nbsp;<span class="num" id="2117484">1</span><span class="op" id="2117485">,</span>&nbsp;<span class="ident" id="2117487">exp</span><span class="op" id="2117490">:</span>&nbsp;<span class="ident" id="2117492">f</span><span class="op" id="2117493">.</span><span class="ident" id="2117494">exp</span>&nbsp;<span class="op" id="2117498">-</span>&nbsp;<span class="num" id="2117500">2</span><span class="op" id="2117501">,</span>&nbsp;<span class="ident" id="2117503">neg</span><span class="op" id="2117506">:</span>&nbsp;<span class="ident" id="2117508">f</span><span class="op" id="2117509">.</span><span class="ident" id="2117510">neg</span><span class="op" id="2117513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117519">return</span><br>
<span class="lineno">195</span><span class="op" id="2117526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2117529">//&nbsp;Normalize&nbsp;normalizes&nbsp;f&nbsp;so&nbsp;that&nbsp;the&nbsp;highest&nbsp;bit&nbsp;of&nbsp;the&nbsp;mantissa&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2117598">//&nbsp;set,&nbsp;and&nbsp;returns&nbsp;the&nbsp;number&nbsp;by&nbsp;which&nbsp;the&nbsp;mantissa&nbsp;was&nbsp;left-shifted.</span><br>
<span class="lineno"></span><span class="keyword" id="2117669">func</span>&nbsp;<span class="op" id="2117674">(</span><span class="ident" id="2117675">f</span>&nbsp;<span class="op" id="2117677">*</span><span class="ident" id="2117678">extFloat</span><span class="op" id="2117686">)</span>&nbsp;<span class="ident" id="2117688">Normalize</span><span class="op" id="2117697">(</span><span class="op" id="2117698">)</span>&nbsp;<span class="op" id="2117700">(</span><span class="ident" id="2117701">shift</span>&nbsp;<span class="builtintype" id="2117707">uint</span><span class="op" id="2117711">)</span>&nbsp;<span class="op" id="2117713">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117716">mant</span><span class="op" id="2117720">,</span>&nbsp;<span class="ident" id="2117722">exp</span>&nbsp;<span class="op" id="2117726">:=</span>&nbsp;<span class="ident" id="2117729">f</span><span class="op" id="2117730">.</span><span class="ident" id="2117731">mant</span><span class="op" id="2117735">,</span>&nbsp;<span class="ident" id="2117737">f</span><span class="op" id="2117738">.</span><span class="ident" id="2117739">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117744">if</span>&nbsp;<span class="ident" id="2117747">mant</span>&nbsp;<span class="op" id="2117752">==</span>&nbsp;<span class="num" id="2117755">0</span>&nbsp;<span class="op" id="2117757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117761">return</span>&nbsp;<span class="num" id="2117768">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117774">if</span>&nbsp;<span class="ident" id="2117777">mant</span><span class="op" id="2117781">&gt;&gt;</span><span class="op" id="2117783">(</span><span class="num" id="2117784">64</span><span class="op" id="2117786">-</span><span class="num" id="2117787">32</span><span class="op" id="2117789">)</span>&nbsp;<span class="op" id="2117791">==</span>&nbsp;<span class="num" id="2117794">0</span>&nbsp;<span class="op" id="2117796">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117800">mant</span>&nbsp;<span class="op" id="2117805">&lt;&lt;=</span>&nbsp;<span class="num" id="2117809">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117814">exp</span>&nbsp;<span class="op" id="2117818">-=</span>&nbsp;<span class="num" id="2117821">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117828">if</span>&nbsp;<span class="ident" id="2117831">mant</span><span class="op" id="2117835">&gt;&gt;</span><span class="op" id="2117837">(</span><span class="num" id="2117838">64</span><span class="op" id="2117840">-</span><span class="num" id="2117841">16</span><span class="op" id="2117843">)</span>&nbsp;<span class="op" id="2117845">==</span>&nbsp;<span class="num" id="2117848">0</span>&nbsp;<span class="op" id="2117850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117854">mant</span>&nbsp;<span class="op" id="2117859">&lt;&lt;=</span>&nbsp;<span class="num" id="2117863">16</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117868">exp</span>&nbsp;<span class="op" id="2117872">-=</span>&nbsp;<span class="num" id="2117875">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117882">if</span>&nbsp;<span class="ident" id="2117885">mant</span><span class="op" id="2117889">&gt;&gt;</span><span class="op" id="2117891">(</span><span class="num" id="2117892">64</span><span class="op" id="2117894">-</span><span class="num" id="2117895">8</span><span class="op" id="2117896">)</span>&nbsp;<span class="op" id="2117898">==</span>&nbsp;<span class="num" id="2117901">0</span>&nbsp;<span class="op" id="2117903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117907">mant</span>&nbsp;<span class="op" id="2117912">&lt;&lt;=</span>&nbsp;<span class="num" id="2117916">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117920">exp</span>&nbsp;<span class="op" id="2117924">-=</span>&nbsp;<span class="num" id="2117927">8</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117933">if</span>&nbsp;<span class="ident" id="2117936">mant</span><span class="op" id="2117940">&gt;&gt;</span><span class="op" id="2117942">(</span><span class="num" id="2117943">64</span><span class="op" id="2117945">-</span><span class="num" id="2117946">4</span><span class="op" id="2117947">)</span>&nbsp;<span class="op" id="2117949">==</span>&nbsp;<span class="num" id="2117952">0</span>&nbsp;<span class="op" id="2117954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117958">mant</span>&nbsp;<span class="op" id="2117963">&lt;&lt;=</span>&nbsp;<span class="num" id="2117967">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2117971">exp</span>&nbsp;<span class="op" id="2117975">-=</span>&nbsp;<span class="num" id="2117978">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2117981">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2117984">if</span>&nbsp;<span class="ident" id="2117987">mant</span><span class="op" id="2117991">&gt;&gt;</span><span class="op" id="2117993">(</span><span class="num" id="2117994">64</span><span class="op" id="2117996">-</span><span class="num" id="2117997">2</span><span class="op" id="2117998">)</span>&nbsp;<span class="op" id="2118000">==</span>&nbsp;<span class="num" id="2118003">0</span>&nbsp;<span class="op" id="2118005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118009">mant</span>&nbsp;<span class="op" id="2118014">&lt;&lt;=</span>&nbsp;<span class="num" id="2118018">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118022">exp</span>&nbsp;<span class="op" id="2118026">-=</span>&nbsp;<span class="num" id="2118029">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2118032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2118035">if</span>&nbsp;<span class="ident" id="2118038">mant</span><span class="op" id="2118042">&gt;&gt;</span><span class="op" id="2118044">(</span><span class="num" id="2118045">64</span><span class="op" id="2118047">-</span><span class="num" id="2118048">1</span><span class="op" id="2118049">)</span>&nbsp;<span class="op" id="2118051">==</span>&nbsp;<span class="num" id="2118054">0</span>&nbsp;<span class="op" id="2118056">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118060">mant</span>&nbsp;<span class="op" id="2118065">&lt;&lt;=</span>&nbsp;<span class="num" id="2118069">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118073">exp</span>&nbsp;<span class="op" id="2118077">-=</span>&nbsp;<span class="num" id="2118080">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2118083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118086">shift</span>&nbsp;<span class="op" id="2118092">=</span>&nbsp;<span class="builtintype" id="2118094">uint</span><span class="op" id="2118098">(</span><span class="ident" id="2118099">f</span><span class="op" id="2118100">.</span><span class="ident" id="2118101">exp</span>&nbsp;<span class="op" id="2118105">-</span>&nbsp;<span class="ident" id="2118107">exp</span><span class="op" id="2118110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118113">f</span><span class="op" id="2118114">.</span><span class="ident" id="2118115">mant</span><span class="op" id="2118119">,</span>&nbsp;<span class="ident" id="2118121">f</span><span class="op" id="2118122">.</span><span class="ident" id="2118123">exp</span>&nbsp;<span class="op" id="2118127">=</span>&nbsp;<span class="ident" id="2118129">mant</span><span class="op" id="2118133">,</span>&nbsp;<span class="ident" id="2118135">exp</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2118140">return</span><br>
<span class="lineno"></span><span class="op" id="2118147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2118150">//&nbsp;Multiply&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;product&nbsp;f*g:&nbsp;the&nbsp;result&nbsp;is&nbsp;correctly&nbsp;rounded,</span><br>
<span class="lineno"></span><span class="comment" id="2118222">//&nbsp;but&nbsp;not&nbsp;normalized.</span><br>
<span class="lineno">235</span><span class="keyword" id="2118245">func</span>&nbsp;<span class="op" id="2118250">(</span><span class="ident" id="2118251">f</span>&nbsp;<span class="op" id="2118253">*</span><span class="ident" id="2118254">extFloat</span><span class="op" id="2118262">)</span>&nbsp;<span class="ident" id="2118264">Multiply</span><span class="op" id="2118272">(</span><span class="ident" id="2118273">g</span>&nbsp;<span class="ident" id="2118275">extFloat</span><span class="op" id="2118283">)</span>&nbsp;<span class="op" id="2118285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118288">fhi</span><span class="op" id="2118291">,</span>&nbsp;<span class="ident" id="2118293">flo</span>&nbsp;<span class="op" id="2118297">:=</span>&nbsp;<span class="ident" id="2118300">f</span><span class="op" id="2118301">.</span><span class="ident" id="2118302">mant</span><span class="op" id="2118306">&gt;&gt;</span><span class="num" id="2118308">32</span><span class="op" id="2118310">,</span>&nbsp;<span class="builtintype" id="2118312">uint64</span><span class="op" id="2118318">(</span><span class="builtintype" id="2118319">uint32</span><span class="op" id="2118325">(</span><span class="ident" id="2118326">f</span><span class="op" id="2118327">.</span><span class="ident" id="2118328">mant</span><span class="op" id="2118332">)</span><span class="op" id="2118333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118336">ghi</span><span class="op" id="2118339">,</span>&nbsp;<span class="ident" id="2118341">glo</span>&nbsp;<span class="op" id="2118345">:=</span>&nbsp;<span class="ident" id="2118348">g</span><span class="op" id="2118349">.</span><span class="ident" id="2118350">mant</span><span class="op" id="2118354">&gt;&gt;</span><span class="num" id="2118356">32</span><span class="op" id="2118358">,</span>&nbsp;<span class="builtintype" id="2118360">uint64</span><span class="op" id="2118366">(</span><span class="builtintype" id="2118367">uint32</span><span class="op" id="2118373">(</span><span class="ident" id="2118374">g</span><span class="op" id="2118375">.</span><span class="ident" id="2118376">mant</span><span class="op" id="2118380">)</span><span class="op" id="2118381">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2118385">//&nbsp;Cross&nbsp;products.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118405">cross1</span>&nbsp;<span class="op" id="2118412">:=</span>&nbsp;<span class="ident" id="2118415">fhi</span>&nbsp;<span class="op" id="2118419">*</span>&nbsp;<span class="ident" id="2118421">glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118426">cross2</span>&nbsp;<span class="op" id="2118433">:=</span>&nbsp;<span class="ident" id="2118436">flo</span>&nbsp;<span class="op" id="2118440">*</span>&nbsp;<span class="ident" id="2118442">ghi</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2118448">//&nbsp;f.mant*g.mant&nbsp;is&nbsp;fhi*ghi&nbsp;&lt;&lt;&nbsp;64&nbsp;+&nbsp;(cross1+cross2)&nbsp;&lt;&lt;&nbsp;32&nbsp;+&nbsp;flo*glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118517">f</span><span class="op" id="2118518">.</span><span class="ident" id="2118519">mant</span>&nbsp;<span class="op" id="2118524">=</span>&nbsp;<span class="ident" id="2118526">fhi</span><span class="op" id="2118529">*</span><span class="ident" id="2118530">ghi</span>&nbsp;<span class="op" id="2118534">+</span>&nbsp;<span class="op" id="2118536">(</span><span class="ident" id="2118537">cross1</span>&nbsp;<span class="op" id="2118544">&gt;&gt;</span>&nbsp;<span class="num" id="2118547">32</span><span class="op" id="2118549">)</span>&nbsp;<span class="op" id="2118551">+</span>&nbsp;<span class="op" id="2118553">(</span><span class="ident" id="2118554">cross2</span>&nbsp;<span class="op" id="2118561">&gt;&gt;</span>&nbsp;<span class="num" id="2118564">32</span><span class="op" id="2118566">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118569">rem</span>&nbsp;<span class="op" id="2118573">:=</span>&nbsp;<span class="builtintype" id="2118576">uint64</span><span class="op" id="2118582">(</span><span class="builtintype" id="2118583">uint32</span><span class="op" id="2118589">(</span><span class="ident" id="2118590">cross1</span><span class="op" id="2118596">)</span><span class="op" id="2118597">)</span>&nbsp;<span class="op" id="2118599">+</span>&nbsp;<span class="builtintype" id="2118601">uint64</span><span class="op" id="2118607">(</span><span class="builtintype" id="2118608">uint32</span><span class="op" id="2118614">(</span><span class="ident" id="2118615">cross2</span><span class="op" id="2118621">)</span><span class="op" id="2118622">)</span>&nbsp;<span class="op" id="2118624">+</span>&nbsp;<span class="op" id="2118626">(</span><span class="op" id="2118627">(</span><span class="ident" id="2118628">flo</span>&nbsp;<span class="op" id="2118632">*</span>&nbsp;<span class="ident" id="2118634">glo</span><span class="op" id="2118637">)</span>&nbsp;<span class="op" id="2118639">&gt;&gt;</span>&nbsp;<span class="num" id="2118642">32</span><span class="op" id="2118644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2118647">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118661">rem</span>&nbsp;<span class="op" id="2118665">+=</span>&nbsp;<span class="op" id="2118668">(</span><span class="num" id="2118669">1</span>&nbsp;<span class="op" id="2118671">&lt;&lt;</span>&nbsp;<span class="num" id="2118674">31</span><span class="op" id="2118676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118680">f</span><span class="op" id="2118681">.</span><span class="ident" id="2118682">mant</span>&nbsp;<span class="op" id="2118687">+=</span>&nbsp;<span class="op" id="2118690">(</span><span class="ident" id="2118691">rem</span>&nbsp;<span class="op" id="2118695">&gt;&gt;</span>&nbsp;<span class="num" id="2118698">32</span><span class="op" id="2118700">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2118703">f</span><span class="op" id="2118704">.</span><span class="ident" id="2118705">exp</span>&nbsp;<span class="op" id="2118709">=</span>&nbsp;<span class="ident" id="2118711">f</span><span class="op" id="2118712">.</span><span class="ident" id="2118713">exp</span>&nbsp;<span class="op" id="2118717">+</span>&nbsp;<span class="ident" id="2118719">g</span><span class="op" id="2118720">.</span><span class="ident" id="2118721">exp</span>&nbsp;<span class="op" id="2118725">+</span>&nbsp;<span class="num" id="2118727">64</span><br>
<span class="lineno"></span><span class="op" id="2118730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2118733">var</span>&nbsp;<span class="ident" id="2118737">uint64pow10</span>&nbsp;<span class="op" id="2118749">=</span>&nbsp;<span class="op" id="2118751">[</span><span class="op" id="2118752">...</span><span class="op" id="2118755">]</span><span class="builtintype" id="2118756">uint64</span><span class="op" id="2118762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2118765">1</span><span class="op" id="2118766">,</span>&nbsp;<span class="num" id="2118768">1e1</span><span class="op" id="2118771">,</span>&nbsp;<span class="num" id="2118773">1e2</span><span class="op" id="2118776">,</span>&nbsp;<span class="num" id="2118778">1e3</span><span class="op" id="2118781">,</span>&nbsp;<span class="num" id="2118783">1e4</span><span class="op" id="2118786">,</span>&nbsp;<span class="num" id="2118788">1e5</span><span class="op" id="2118791">,</span>&nbsp;<span class="num" id="2118793">1e6</span><span class="op" id="2118796">,</span>&nbsp;<span class="num" id="2118798">1e7</span><span class="op" id="2118801">,</span>&nbsp;<span class="num" id="2118803">1e8</span><span class="op" id="2118806">,</span>&nbsp;<span class="num" id="2118808">1e9</span><span class="op" id="2118811">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2118814">1e10</span><span class="op" id="2118818">,</span>&nbsp;<span class="num" id="2118820">1e11</span><span class="op" id="2118824">,</span>&nbsp;<span class="num" id="2118826">1e12</span><span class="op" id="2118830">,</span>&nbsp;<span class="num" id="2118832">1e13</span><span class="op" id="2118836">,</span>&nbsp;<span class="num" id="2118838">1e14</span><span class="op" id="2118842">,</span>&nbsp;<span class="num" id="2118844">1e15</span><span class="op" id="2118848">,</span>&nbsp;<span class="num" id="2118850">1e16</span><span class="op" id="2118854">,</span>&nbsp;<span class="num" id="2118856">1e17</span><span class="op" id="2118860">,</span>&nbsp;<span class="num" id="2118862">1e18</span><span class="op" id="2118866">,</span>&nbsp;<span class="num" id="2118868">1e19</span><span class="op" id="2118872">,</span><br>
<span class="lineno"></span><span class="op" id="2118874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2118877">//&nbsp;AssignDecimal&nbsp;sets&nbsp;f&nbsp;to&nbsp;an&nbsp;approximate&nbsp;value&nbsp;mantissa*10^exp.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="2118945">//&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;f&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="2119015">//&nbsp;best&nbsp;approximation&nbsp;of&nbsp;d&nbsp;after&nbsp;being&nbsp;rounded&nbsp;to&nbsp;a&nbsp;float64&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2119078">//&nbsp;float32&nbsp;depending&nbsp;on&nbsp;flt.</span><br>
<span class="lineno"></span><span class="keyword" id="2119107">func</span>&nbsp;<span class="op" id="2119112">(</span><span class="ident" id="2119113">f</span>&nbsp;<span class="op" id="2119115">*</span><span class="ident" id="2119116">extFloat</span><span class="op" id="2119124">)</span>&nbsp;<span class="ident" id="2119126">AssignDecimal</span><span class="op" id="2119139">(</span><span class="ident" id="2119140">mantissa</span>&nbsp;<span class="builtintype" id="2119149">uint64</span><span class="op" id="2119155">,</span>&nbsp;<span class="ident" id="2119157">exp10</span>&nbsp;<span class="builtintype" id="2119163">int</span><span class="op" id="2119166">,</span>&nbsp;<span class="ident" id="2119168">neg</span>&nbsp;<span class="builtintype" id="2119172">bool</span><span class="op" id="2119176">,</span>&nbsp;<span class="ident" id="2119178">trunc</span>&nbsp;<span class="builtintype" id="2119184">bool</span><span class="op" id="2119188">,</span>&nbsp;<span class="ident" id="2119190">flt</span>&nbsp;<span class="op" id="2119194">*</span><span class="ident" id="2119195">floatInfo</span><span class="op" id="2119204">)</span>&nbsp;<span class="op" id="2119206">(</span><span class="ident" id="2119207">ok</span>&nbsp;<span class="builtintype" id="2119210">bool</span><span class="op" id="2119214">)</span>&nbsp;<span class="op" id="2119216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119219">const</span>&nbsp;<span class="ident" id="2119225">uint64digits</span>&nbsp;<span class="op" id="2119238">=</span>&nbsp;<span class="num" id="2119240">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119244">const</span>&nbsp;<span class="ident" id="2119250">errorscale</span>&nbsp;<span class="op" id="2119261">=</span>&nbsp;<span class="num" id="2119263">8</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119266">errors</span>&nbsp;<span class="op" id="2119273">:=</span>&nbsp;<span class="num" id="2119276">0</span>&nbsp;<span class="comment" id="2119278">//&nbsp;An&nbsp;upper&nbsp;bound&nbsp;for&nbsp;error,&nbsp;computed&nbsp;in&nbsp;errorscale*ulp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119336">if</span>&nbsp;<span class="ident" id="2119339">trunc</span>&nbsp;<span class="op" id="2119345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119349">//&nbsp;the&nbsp;decimal&nbsp;number&nbsp;was&nbsp;truncated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119388">errors</span>&nbsp;<span class="op" id="2119395">+=</span>&nbsp;<span class="ident" id="2119398">errorscale</span>&nbsp;<span class="op" id="2119409">/</span>&nbsp;<span class="num" id="2119411">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2119414">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119418">f</span><span class="op" id="2119419">.</span><span class="ident" id="2119420">mant</span>&nbsp;<span class="op" id="2119425">=</span>&nbsp;<span class="ident" id="2119427">mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119437">f</span><span class="op" id="2119438">.</span><span class="ident" id="2119439">exp</span>&nbsp;<span class="op" id="2119443">=</span>&nbsp;<span class="num" id="2119445">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119448">f</span><span class="op" id="2119449">.</span><span class="ident" id="2119450">neg</span>&nbsp;<span class="op" id="2119454">=</span>&nbsp;<span class="ident" id="2119456">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119462">//&nbsp;Multiply&nbsp;by&nbsp;powers&nbsp;of&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119493">i</span>&nbsp;<span class="op" id="2119495">:=</span>&nbsp;<span class="op" id="2119498">(</span><span class="ident" id="2119499">exp10</span>&nbsp;<span class="op" id="2119505">-</span>&nbsp;<span class="ident" id="2119507">firstPowerOfTen</span><span class="op" id="2119522">)</span>&nbsp;<span class="op" id="2119524">/</span>&nbsp;<span class="ident" id="2119526">stepPowerOfTen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119542">if</span>&nbsp;<span class="ident" id="2119545">exp10</span>&nbsp;<span class="op" id="2119551">&lt;</span>&nbsp;<span class="ident" id="2119553">firstPowerOfTen</span>&nbsp;<span class="op" id="2119569">||</span>&nbsp;<span class="ident" id="2119572">i</span>&nbsp;<span class="op" id="2119574">&gt;=</span>&nbsp;<span class="builtinfunc" id="2119577">len</span><span class="op" id="2119580">(</span><span class="ident" id="2119581">powersOfTen</span><span class="op" id="2119592">)</span>&nbsp;<span class="op" id="2119594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119598">return</span>&nbsp;<span class="builtintype" id="2119605">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2119612">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119615">adjExp</span>&nbsp;<span class="op" id="2119622">:=</span>&nbsp;<span class="op" id="2119625">(</span><span class="ident" id="2119626">exp10</span>&nbsp;<span class="op" id="2119632">-</span>&nbsp;<span class="ident" id="2119634">firstPowerOfTen</span><span class="op" id="2119649">)</span>&nbsp;<span class="op" id="2119651">%</span>&nbsp;<span class="ident" id="2119653">stepPowerOfTen</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119670">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;exp%step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2119698">if</span>&nbsp;<span class="ident" id="2119701">adjExp</span>&nbsp;<span class="op" id="2119708">&lt;</span>&nbsp;<span class="ident" id="2119710">uint64digits</span>&nbsp;<span class="op" id="2119723">&amp;&amp;</span>&nbsp;<span class="ident" id="2119726">mantissa</span>&nbsp;<span class="op" id="2119735">&lt;</span>&nbsp;<span class="ident" id="2119737">uint64pow10</span><span class="op" id="2119748">[</span><span class="ident" id="2119749">uint64digits</span><span class="op" id="2119761">-</span><span class="ident" id="2119762">adjExp</span><span class="op" id="2119768">]</span>&nbsp;<span class="op" id="2119770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119774">//&nbsp;We&nbsp;can&nbsp;multiply&nbsp;the&nbsp;mantissa&nbsp;exactly.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119817">f</span><span class="op" id="2119818">.</span><span class="ident" id="2119819">mant</span>&nbsp;<span class="op" id="2119824">*=</span>&nbsp;<span class="ident" id="2119827">uint64pow10</span><span class="op" id="2119838">[</span><span class="ident" id="2119839">adjExp</span><span class="op" id="2119845">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119849">f</span><span class="op" id="2119850">.</span><span class="ident" id="2119851">Normalize</span><span class="op" id="2119860">(</span><span class="op" id="2119861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2119864">}</span>&nbsp;<span class="keyword" id="2119866">else</span>&nbsp;<span class="op" id="2119871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119875">f</span><span class="op" id="2119876">.</span><span class="ident" id="2119877">Normalize</span><span class="op" id="2119886">(</span><span class="op" id="2119887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119891">f</span><span class="op" id="2119892">.</span><span class="ident" id="2119893">Multiply</span><span class="op" id="2119901">(</span><span class="ident" id="2119902">smallPowersOfTen</span><span class="op" id="2119918">[</span><span class="ident" id="2119919">adjExp</span><span class="op" id="2119925">]</span><span class="op" id="2119926">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2119930">errors</span>&nbsp;<span class="op" id="2119937">+=</span>&nbsp;<span class="ident" id="2119940">errorscale</span>&nbsp;<span class="op" id="2119951">/</span>&nbsp;<span class="num" id="2119953">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2119956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2119960">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;10&nbsp;to&nbsp;the&nbsp;exp&nbsp;-&nbsp;exp%step.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120005">f</span><span class="op" id="2120006">.</span><span class="ident" id="2120007">Multiply</span><span class="op" id="2120015">(</span><span class="ident" id="2120016">powersOfTen</span><span class="op" id="2120027">[</span><span class="ident" id="2120028">i</span><span class="op" id="2120029">]</span><span class="op" id="2120030">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2120033">if</span>&nbsp;<span class="ident" id="2120036">errors</span>&nbsp;<span class="op" id="2120043">&gt;</span>&nbsp;<span class="num" id="2120045">0</span>&nbsp;<span class="op" id="2120047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120051">errors</span>&nbsp;<span class="op" id="2120058">+=</span>&nbsp;<span class="num" id="2120061">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2120064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120067">errors</span>&nbsp;<span class="op" id="2120074">+=</span>&nbsp;<span class="ident" id="2120077">errorscale</span>&nbsp;<span class="op" id="2120088">/</span>&nbsp;<span class="num" id="2120090">2</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120094">//&nbsp;Normalize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120108">shift</span>&nbsp;<span class="op" id="2120114">:=</span>&nbsp;<span class="ident" id="2120117">f</span><span class="op" id="2120118">.</span><span class="ident" id="2120119">Normalize</span><span class="op" id="2120128">(</span><span class="op" id="2120129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120132">errors</span>&nbsp;<span class="op" id="2120139">&lt;&lt;=</span>&nbsp;<span class="ident" id="2120143">shift</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120151">//&nbsp;Now&nbsp;f&nbsp;is&nbsp;a&nbsp;good&nbsp;approximation&nbsp;of&nbsp;the&nbsp;decimal.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120201">//&nbsp;Check&nbsp;whether&nbsp;the&nbsp;error&nbsp;is&nbsp;too&nbsp;large:&nbsp;that&nbsp;is,&nbsp;if&nbsp;the&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120268">//&nbsp;is&nbsp;perturbated&nbsp;by&nbsp;the&nbsp;error,&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;will&nbsp;change.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120336">//&nbsp;The&nbsp;64&nbsp;bits&nbsp;mantissa&nbsp;is&nbsp;1&nbsp;+&nbsp;52&nbsp;bits&nbsp;for&nbsp;float64&nbsp;+&nbsp;11&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120405">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120409">//&nbsp;In&nbsp;many&nbsp;cases&nbsp;the&nbsp;approximation&nbsp;will&nbsp;be&nbsp;good&nbsp;enough.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120466">denormalExp</span>&nbsp;<span class="op" id="2120478">:=</span>&nbsp;<span class="ident" id="2120481">flt</span><span class="op" id="2120484">.</span><span class="ident" id="2120485">bias</span>&nbsp;<span class="op" id="2120490">-</span>&nbsp;<span class="num" id="2120492">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2120496">var</span>&nbsp;<span class="ident" id="2120500">extrabits</span>&nbsp;<span class="builtintype" id="2120510">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2120516">if</span>&nbsp;<span class="ident" id="2120519">f</span><span class="op" id="2120520">.</span><span class="ident" id="2120521">exp</span>&nbsp;<span class="op" id="2120525">&lt;=</span>&nbsp;<span class="ident" id="2120528">denormalExp</span>&nbsp;<span class="op" id="2120540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120544">//&nbsp;f.mant&nbsp;*&nbsp;2^f.exp&nbsp;is&nbsp;smaller&nbsp;than&nbsp;2^(flt.bias+1).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120598">extrabits</span>&nbsp;<span class="op" id="2120608">=</span>&nbsp;<span class="builtintype" id="2120610">uint</span><span class="op" id="2120614">(</span><span class="num" id="2120615">63</span>&nbsp;<span class="op" id="2120618">-</span>&nbsp;<span class="ident" id="2120620">flt</span><span class="op" id="2120623">.</span><span class="ident" id="2120624">mantbits</span>&nbsp;<span class="op" id="2120633">+</span>&nbsp;<span class="num" id="2120635">1</span>&nbsp;<span class="op" id="2120637">+</span>&nbsp;<span class="builtintype" id="2120639">uint</span><span class="op" id="2120643">(</span><span class="ident" id="2120644">denormalExp</span><span class="op" id="2120655">-</span><span class="ident" id="2120656">f</span><span class="op" id="2120657">.</span><span class="ident" id="2120658">exp</span><span class="op" id="2120661">)</span><span class="op" id="2120662">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2120665">}</span>&nbsp;<span class="keyword" id="2120667">else</span>&nbsp;<span class="op" id="2120672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120676">extrabits</span>&nbsp;<span class="op" id="2120686">=</span>&nbsp;<span class="builtintype" id="2120688">uint</span><span class="op" id="2120692">(</span><span class="num" id="2120693">63</span>&nbsp;<span class="op" id="2120696">-</span>&nbsp;<span class="ident" id="2120698">flt</span><span class="op" id="2120701">.</span><span class="ident" id="2120702">mantbits</span><span class="op" id="2120710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2120713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120717">halfway</span>&nbsp;<span class="op" id="2120725">:=</span>&nbsp;<span class="builtintype" id="2120728">uint64</span><span class="op" id="2120734">(</span><span class="num" id="2120735">1</span><span class="op" id="2120736">)</span>&nbsp;<span class="op" id="2120738">&lt;&lt;</span>&nbsp;<span class="op" id="2120741">(</span><span class="ident" id="2120742">extrabits</span>&nbsp;<span class="op" id="2120752">-</span>&nbsp;<span class="num" id="2120754">1</span><span class="op" id="2120755">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2120758">mant_extra</span>&nbsp;<span class="op" id="2120769">:=</span>&nbsp;<span class="ident" id="2120772">f</span><span class="op" id="2120773">.</span><span class="ident" id="2120774">mant</span>&nbsp;<span class="op" id="2120779">&amp;</span>&nbsp;<span class="op" id="2120781">(</span><span class="num" id="2120782">1</span><span class="op" id="2120783">&lt;&lt;</span><span class="ident" id="2120785">extrabits</span>&nbsp;<span class="op" id="2120795">-</span>&nbsp;<span class="num" id="2120797">1</span><span class="op" id="2120798">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120802">//&nbsp;Do&nbsp;a&nbsp;signed&nbsp;comparison&nbsp;here!&nbsp;If&nbsp;the&nbsp;error&nbsp;estimate&nbsp;could&nbsp;make</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120868">//&nbsp;the&nbsp;mantissa&nbsp;round&nbsp;differently&nbsp;for&nbsp;the&nbsp;conversion&nbsp;to&nbsp;double,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2120933">//&nbsp;then&nbsp;we&nbsp;can&#39;t&nbsp;give&nbsp;a&nbsp;definite&nbsp;answer.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2120975">if</span>&nbsp;<span class="builtintype" id="2120978">int64</span><span class="op" id="2120983">(</span><span class="ident" id="2120984">halfway</span><span class="op" id="2120991">)</span><span class="op" id="2120992">-</span><span class="builtintype" id="2120993">int64</span><span class="op" id="2120998">(</span><span class="ident" id="2120999">errors</span><span class="op" id="2121005">)</span>&nbsp;<span class="op" id="2121007">&lt;</span>&nbsp;<span class="builtintype" id="2121009">int64</span><span class="op" id="2121014">(</span><span class="ident" id="2121015">mant_extra</span><span class="op" id="2121025">)</span>&nbsp;<span class="op" id="2121027">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2121032">int64</span><span class="op" id="2121037">(</span><span class="ident" id="2121038">mant_extra</span><span class="op" id="2121048">)</span>&nbsp;<span class="op" id="2121050">&lt;</span>&nbsp;<span class="builtintype" id="2121052">int64</span><span class="op" id="2121057">(</span><span class="ident" id="2121058">halfway</span><span class="op" id="2121065">)</span><span class="op" id="2121066">+</span><span class="builtintype" id="2121067">int64</span><span class="op" id="2121072">(</span><span class="ident" id="2121073">errors</span><span class="op" id="2121079">)</span>&nbsp;<span class="op" id="2121081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2121085">return</span>&nbsp;<span class="builtintype" id="2121092">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2121099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2121102">return</span>&nbsp;<span class="builtintype" id="2121109">true</span><br>
<span class="lineno">330</span><span class="op" id="2121114">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2121117">//&nbsp;Frexp10&nbsp;is&nbsp;an&nbsp;analogue&nbsp;of&nbsp;math.Frexp&nbsp;for&nbsp;decimal&nbsp;powers.&nbsp;It&nbsp;scales</span><br>
<span class="lineno"></span><span class="comment" id="2121187">//&nbsp;f&nbsp;by&nbsp;an&nbsp;approximate&nbsp;power&nbsp;of&nbsp;ten&nbsp;10^-exp,&nbsp;and&nbsp;returns&nbsp;exp10,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="2121254">//&nbsp;that&nbsp;f*10^exp10&nbsp;has&nbsp;the&nbsp;same&nbsp;value&nbsp;as&nbsp;the&nbsp;old&nbsp;f,&nbsp;up&nbsp;to&nbsp;an&nbsp;ulp,</span><br>
<span class="lineno">335</span><span class="comment" id="2121320">//&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;index&nbsp;of&nbsp;10^-exp&nbsp;in&nbsp;the&nbsp;powersOfTen&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="2121381">func</span>&nbsp;<span class="op" id="2121386">(</span><span class="ident" id="2121387">f</span>&nbsp;<span class="op" id="2121389">*</span><span class="ident" id="2121390">extFloat</span><span class="op" id="2121398">)</span>&nbsp;<span class="ident" id="2121400">frexp10</span><span class="op" id="2121407">(</span><span class="op" id="2121408">)</span>&nbsp;<span class="op" id="2121410">(</span><span class="ident" id="2121411">exp10</span><span class="op" id="2121416">,</span>&nbsp;<span class="ident" id="2121418">index</span>&nbsp;<span class="builtintype" id="2121424">int</span><span class="op" id="2121427">)</span>&nbsp;<span class="op" id="2121429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121432">//&nbsp;The&nbsp;constants&nbsp;expMin&nbsp;and&nbsp;expMax&nbsp;constrain&nbsp;the&nbsp;final&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121501">//&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;f.&nbsp;We&nbsp;want&nbsp;a&nbsp;small&nbsp;integral&nbsp;part&nbsp;in&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121571">//&nbsp;because&nbsp;finding&nbsp;digits&nbsp;of&nbsp;an&nbsp;integer&nbsp;requires&nbsp;divisions,&nbsp;whereas</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121640">//&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part&nbsp;can&nbsp;be&nbsp;found&nbsp;by&nbsp;repeatedly&nbsp;multiplying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121713">//&nbsp;by&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2121724">const</span>&nbsp;<span class="ident" id="2121730">expMin</span>&nbsp;<span class="op" id="2121737">=</span>&nbsp;<span class="op" id="2121739">-</span><span class="num" id="2121740">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2121744">const</span>&nbsp;<span class="ident" id="2121750">expMax</span>&nbsp;<span class="op" id="2121757">=</span>&nbsp;<span class="op" id="2121759">-</span><span class="num" id="2121760">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121764">//&nbsp;Find&nbsp;power&nbsp;of&nbsp;ten&nbsp;such&nbsp;that&nbsp;x&nbsp;*&nbsp;10^n&nbsp;has&nbsp;a&nbsp;binary&nbsp;exponent</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2121827">//&nbsp;between&nbsp;expMin&nbsp;and&nbsp;expMax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2121858">approxExp10</span>&nbsp;<span class="op" id="2121870">:=</span>&nbsp;<span class="op" id="2121873">(</span><span class="op" id="2121874">(</span><span class="ident" id="2121875">expMin</span><span class="op" id="2121881">+</span><span class="ident" id="2121882">expMax</span><span class="op" id="2121888">)</span><span class="op" id="2121889">/</span><span class="num" id="2121890">2</span>&nbsp;<span class="op" id="2121892">-</span>&nbsp;<span class="ident" id="2121894">f</span><span class="op" id="2121895">.</span><span class="ident" id="2121896">exp</span><span class="op" id="2121899">)</span>&nbsp;<span class="op" id="2121901">*</span>&nbsp;<span class="num" id="2121903">28</span>&nbsp;<span class="op" id="2121906">/</span>&nbsp;<span class="num" id="2121908">93</span>&nbsp;<span class="comment" id="2121911">//&nbsp;log(10)/log(2)&nbsp;is&nbsp;close&nbsp;to&nbsp;93/28.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2121949">i</span>&nbsp;<span class="op" id="2121951">:=</span>&nbsp;<span class="op" id="2121954">(</span><span class="ident" id="2121955">approxExp10</span>&nbsp;<span class="op" id="2121967">-</span>&nbsp;<span class="ident" id="2121969">firstPowerOfTen</span><span class="op" id="2121984">)</span>&nbsp;<span class="op" id="2121986">/</span>&nbsp;<span class="ident" id="2121988">stepPowerOfTen</span><br>
<span class="lineno"></span><span class="ident" id="2122003">Loop</span><span class="op" id="2122007">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122010">for</span>&nbsp;<span class="op" id="2122014">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122018">exp</span>&nbsp;<span class="op" id="2122022">:=</span>&nbsp;<span class="ident" id="2122025">f</span><span class="op" id="2122026">.</span><span class="ident" id="2122027">exp</span>&nbsp;<span class="op" id="2122031">+</span>&nbsp;<span class="ident" id="2122033">powersOfTen</span><span class="op" id="2122044">[</span><span class="ident" id="2122045">i</span><span class="op" id="2122046">]</span><span class="op" id="2122047">.</span><span class="ident" id="2122048">exp</span>&nbsp;<span class="op" id="2122052">+</span>&nbsp;<span class="num" id="2122054">64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122059">switch</span>&nbsp;<span class="op" id="2122066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122070">case</span>&nbsp;<span class="ident" id="2122075">exp</span>&nbsp;<span class="op" id="2122079">&lt;</span>&nbsp;<span class="ident" id="2122081">expMin</span><span class="op" id="2122087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122092">i</span><span class="op" id="2122093">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122098">case</span>&nbsp;<span class="ident" id="2122103">exp</span>&nbsp;<span class="op" id="2122107">&gt;</span>&nbsp;<span class="ident" id="2122109">expMax</span><span class="op" id="2122115">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122120">i</span><span class="op" id="2122121">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122126">default</span><span class="op" id="2122133">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122138">break</span>&nbsp;<span class="ident" id="2122144">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2122151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2122154">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122157">//&nbsp;Apply&nbsp;the&nbsp;desired&nbsp;decimal&nbsp;shift&nbsp;on&nbsp;f.&nbsp;It&nbsp;will&nbsp;have&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122221">//&nbsp;in&nbsp;the&nbsp;desired&nbsp;range.&nbsp;This&nbsp;is&nbsp;multiplication&nbsp;by&nbsp;10^-exp10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122284">f</span><span class="op" id="2122285">.</span><span class="ident" id="2122286">Multiply</span><span class="op" id="2122294">(</span><span class="ident" id="2122295">powersOfTen</span><span class="op" id="2122306">[</span><span class="ident" id="2122307">i</span><span class="op" id="2122308">]</span><span class="op" id="2122309">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122313">return</span>&nbsp;<span class="op" id="2122320">-</span><span class="op" id="2122321">(</span><span class="ident" id="2122322">firstPowerOfTen</span>&nbsp;<span class="op" id="2122338">+</span>&nbsp;<span class="ident" id="2122340">i</span><span class="op" id="2122341">*</span><span class="ident" id="2122342">stepPowerOfTen</span><span class="op" id="2122356">)</span><span class="op" id="2122357">,</span>&nbsp;<span class="ident" id="2122359">i</span><br>
<span class="lineno">365</span><span class="op" id="2122361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2122364">//&nbsp;frexp10Many&nbsp;applies&nbsp;a&nbsp;common&nbsp;shift&nbsp;by&nbsp;a&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;a,&nbsp;b,&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="2122432">func</span>&nbsp;<span class="ident" id="2122437">frexp10Many</span><span class="op" id="2122448">(</span><span class="ident" id="2122449">a</span><span class="op" id="2122450">,</span>&nbsp;<span class="ident" id="2122452">b</span><span class="op" id="2122453">,</span>&nbsp;<span class="ident" id="2122455">c</span>&nbsp;<span class="op" id="2122457">*</span><span class="ident" id="2122458">extFloat</span><span class="op" id="2122466">)</span>&nbsp;<span class="op" id="2122468">(</span><span class="ident" id="2122469">exp10</span>&nbsp;<span class="builtintype" id="2122475">int</span><span class="op" id="2122478">)</span>&nbsp;<span class="op" id="2122480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122483">exp10</span><span class="op" id="2122488">,</span>&nbsp;<span class="ident" id="2122490">i</span>&nbsp;<span class="op" id="2122492">:=</span>&nbsp;<span class="ident" id="2122495">c</span><span class="op" id="2122496">.</span><span class="ident" id="2122497">frexp10</span><span class="op" id="2122504">(</span><span class="op" id="2122505">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122508">a</span><span class="op" id="2122509">.</span><span class="ident" id="2122510">Multiply</span><span class="op" id="2122518">(</span><span class="ident" id="2122519">powersOfTen</span><span class="op" id="2122530">[</span><span class="ident" id="2122531">i</span><span class="op" id="2122532">]</span><span class="op" id="2122533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122536">b</span><span class="op" id="2122537">.</span><span class="ident" id="2122538">Multiply</span><span class="op" id="2122546">(</span><span class="ident" id="2122547">powersOfTen</span><span class="op" id="2122558">[</span><span class="ident" id="2122559">i</span><span class="op" id="2122560">]</span><span class="op" id="2122561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122564">return</span><br>
<span class="lineno"></span><span class="op" id="2122571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span><span class="comment" id="2122574">//&nbsp;FixedDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;first&nbsp;n&nbsp;significant&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="2122633">//&nbsp;of&nbsp;the&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f.&nbsp;It&nbsp;returns&nbsp;false</span><br>
<span class="lineno"></span><span class="comment" id="2122689">//&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be&nbsp;sure&nbsp;of&nbsp;the&nbsp;answer.</span><br>
<span class="lineno"></span><span class="keyword" id="2122728">func</span>&nbsp;<span class="op" id="2122733">(</span><span class="ident" id="2122734">f</span>&nbsp;<span class="op" id="2122736">*</span><span class="ident" id="2122737">extFloat</span><span class="op" id="2122745">)</span>&nbsp;<span class="ident" id="2122747">FixedDecimal</span><span class="op" id="2122759">(</span><span class="ident" id="2122760">d</span>&nbsp;<span class="op" id="2122762">*</span><span class="ident" id="2122763">decimalSlice</span><span class="op" id="2122775">,</span>&nbsp;<span class="ident" id="2122777">n</span>&nbsp;<span class="builtintype" id="2122779">int</span><span class="op" id="2122782">)</span>&nbsp;<span class="builtintype" id="2122784">bool</span>&nbsp;<span class="op" id="2122789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122792">if</span>&nbsp;<span class="ident" id="2122795">f</span><span class="op" id="2122796">.</span><span class="ident" id="2122797">mant</span>&nbsp;<span class="op" id="2122802">==</span>&nbsp;<span class="num" id="2122805">0</span>&nbsp;<span class="op" id="2122807">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122811">d</span><span class="op" id="2122812">.</span><span class="ident" id="2122813">nd</span>&nbsp;<span class="op" id="2122816">=</span>&nbsp;<span class="num" id="2122818">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122822">d</span><span class="op" id="2122823">.</span><span class="ident" id="2122824">dp</span>&nbsp;<span class="op" id="2122827">=</span>&nbsp;<span class="num" id="2122829">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2122833">d</span><span class="op" id="2122834">.</span><span class="ident" id="2122835">neg</span>&nbsp;<span class="op" id="2122839">=</span>&nbsp;<span class="ident" id="2122841">f</span><span class="op" id="2122842">.</span><span class="ident" id="2122843">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122849">return</span>&nbsp;<span class="builtintype" id="2122856">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2122862">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2122865">if</span>&nbsp;<span class="ident" id="2122868">n</span>&nbsp;<span class="op" id="2122870">==</span>&nbsp;<span class="num" id="2122873">0</span>&nbsp;<span class="op" id="2122875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2122879">panic</span><span class="op" id="2122884">(</span><span class="string" id="2122885">&#34;strconv:&nbsp;internal&nbsp;error:&nbsp;extFloat.FixedDecimal&nbsp;called&nbsp;with&nbsp;n&nbsp;==&nbsp;0&#34;</span><span class="op" id="2122952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2122955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2122958">//&nbsp;Multiply&nbsp;by&nbsp;an&nbsp;appropriate&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;have&nbsp;a&nbsp;reasonable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123023">//&nbsp;number&nbsp;to&nbsp;process.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123046">f</span><span class="op" id="2123047">.</span><span class="ident" id="2123048">Normalize</span><span class="op" id="2123057">(</span><span class="op" id="2123058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123061">exp10</span><span class="op" id="2123066">,</span>&nbsp;<span class="ident" id="2123068">_</span>&nbsp;<span class="op" id="2123070">:=</span>&nbsp;<span class="ident" id="2123073">f</span><span class="op" id="2123074">.</span><span class="ident" id="2123075">frexp10</span><span class="op" id="2123082">(</span><span class="op" id="2123083">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123087">shift</span>&nbsp;<span class="op" id="2123093">:=</span>&nbsp;<span class="builtintype" id="2123096">uint</span><span class="op" id="2123100">(</span><span class="op" id="2123101">-</span><span class="ident" id="2123102">f</span><span class="op" id="2123103">.</span><span class="ident" id="2123104">exp</span><span class="op" id="2123107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123110">integer</span>&nbsp;<span class="op" id="2123118">:=</span>&nbsp;<span class="builtintype" id="2123121">uint32</span><span class="op" id="2123127">(</span><span class="ident" id="2123128">f</span><span class="op" id="2123129">.</span><span class="ident" id="2123130">mant</span>&nbsp;<span class="op" id="2123135">&gt;&gt;</span>&nbsp;<span class="ident" id="2123138">shift</span><span class="op" id="2123143">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123146">fraction</span>&nbsp;<span class="op" id="2123155">:=</span>&nbsp;<span class="ident" id="2123158">f</span><span class="op" id="2123159">.</span><span class="ident" id="2123160">mant</span>&nbsp;<span class="op" id="2123165">-</span>&nbsp;<span class="op" id="2123167">(</span><span class="builtintype" id="2123168">uint64</span><span class="op" id="2123174">(</span><span class="ident" id="2123175">integer</span><span class="op" id="2123182">)</span>&nbsp;<span class="op" id="2123184">&lt;&lt;</span>&nbsp;<span class="ident" id="2123187">shift</span><span class="op" id="2123192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123195"></span>&nbsp;<span class="op" id="2123198">:=</span>&nbsp;<span class="builtintype" id="2123201">uint64</span><span class="op" id="2123207">(</span><span class="num" id="2123208">1</span><span class="op" id="2123209">)</span>&nbsp;<span class="comment" id="2123211">//&nbsp;&nbsp;is&nbsp;the&nbsp;uncertainty&nbsp;we&nbsp;have&nbsp;on&nbsp;the&nbsp;mantissa&nbsp;of&nbsp;f.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123268">//&nbsp;Write&nbsp;exactly&nbsp;n&nbsp;digits&nbsp;to&nbsp;d.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123301">needed</span>&nbsp;<span class="op" id="2123308">:=</span>&nbsp;<span class="ident" id="2123311">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123320">//&nbsp;how&nbsp;many&nbsp;digits&nbsp;are&nbsp;left&nbsp;to&nbsp;write.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123359">integerDigits</span>&nbsp;<span class="op" id="2123373">:=</span>&nbsp;<span class="num" id="2123376">0</span>&nbsp;<span class="comment" id="2123378">//&nbsp;the&nbsp;number&nbsp;of&nbsp;decimal&nbsp;digits&nbsp;of&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123423">pow10</span>&nbsp;<span class="op" id="2123429">:=</span>&nbsp;<span class="builtintype" id="2123432">uint64</span><span class="op" id="2123438">(</span><span class="num" id="2123439">1</span><span class="op" id="2123440">)</span>&nbsp;<span class="comment" id="2123442">//&nbsp;the&nbsp;power&nbsp;of&nbsp;ten&nbsp;by&nbsp;which&nbsp;f&nbsp;was&nbsp;scaled.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123486">for</span>&nbsp;<span class="ident" id="2123490">i</span><span class="op" id="2123491">,</span>&nbsp;<span class="ident" id="2123493">pow</span>&nbsp;<span class="op" id="2123497">:=</span>&nbsp;<span class="num" id="2123500">0</span><span class="op" id="2123501">,</span>&nbsp;<span class="builtintype" id="2123503">uint64</span><span class="op" id="2123509">(</span><span class="num" id="2123510">1</span><span class="op" id="2123511">)</span><span class="op" id="2123512">;</span>&nbsp;<span class="ident" id="2123514">i</span>&nbsp;<span class="op" id="2123516">&lt;</span>&nbsp;<span class="num" id="2123518">20</span><span class="op" id="2123520">;</span>&nbsp;<span class="ident" id="2123522">i</span><span class="op" id="2123523">++</span>&nbsp;<span class="op" id="2123526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123530">if</span>&nbsp;<span class="ident" id="2123533">pow</span>&nbsp;<span class="op" id="2123537">&gt;</span>&nbsp;<span class="builtintype" id="2123539">uint64</span><span class="op" id="2123545">(</span><span class="ident" id="2123546">integer</span><span class="op" id="2123553">)</span>&nbsp;<span class="op" id="2123555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123560">integerDigits</span>&nbsp;<span class="op" id="2123574">=</span>&nbsp;<span class="ident" id="2123576">i</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123581">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2123589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123593">pow</span>&nbsp;<span class="op" id="2123597">*=</span>&nbsp;<span class="num" id="2123600">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2123604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123607">rest</span>&nbsp;<span class="op" id="2123612">:=</span>&nbsp;<span class="ident" id="2123615">integer</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123624">if</span>&nbsp;<span class="ident" id="2123627">integerDigits</span>&nbsp;<span class="op" id="2123641">&gt;</span>&nbsp;<span class="ident" id="2123643">needed</span>&nbsp;<span class="op" id="2123650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123654">//&nbsp;the&nbsp;integral&nbsp;part&nbsp;is&nbsp;already&nbsp;large,&nbsp;trim&nbsp;the&nbsp;last&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123717">pow10</span>&nbsp;<span class="op" id="2123723">=</span>&nbsp;<span class="ident" id="2123725">uint64pow10</span><span class="op" id="2123736">[</span><span class="ident" id="2123737">integerDigits</span><span class="op" id="2123750">-</span><span class="ident" id="2123751">needed</span><span class="op" id="2123757">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123761">integer</span>&nbsp;<span class="op" id="2123769">/=</span>&nbsp;<span class="builtintype" id="2123772">uint32</span><span class="op" id="2123778">(</span><span class="ident" id="2123779">pow10</span><span class="op" id="2123784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123788">rest</span>&nbsp;<span class="op" id="2123793">-=</span>&nbsp;<span class="ident" id="2123796">integer</span>&nbsp;<span class="op" id="2123804">*</span>&nbsp;<span class="builtintype" id="2123806">uint32</span><span class="op" id="2123812">(</span><span class="ident" id="2123813">pow10</span><span class="op" id="2123818">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2123821">}</span>&nbsp;<span class="keyword" id="2123823">else</span>&nbsp;<span class="op" id="2123828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123832">rest</span>&nbsp;<span class="op" id="2123837">=</span>&nbsp;<span class="num" id="2123839">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2123842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2123846">//&nbsp;Write&nbsp;the&nbsp;digits&nbsp;of&nbsp;integer:&nbsp;the&nbsp;digits&nbsp;of&nbsp;rest&nbsp;are&nbsp;omitted.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123911">var</span>&nbsp;<span class="ident" id="2123915">buf</span>&nbsp;<span class="op" id="2123919">[</span><span class="num" id="2123920">32</span><span class="op" id="2123922">]</span><span class="builtintype" id="2123923">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123929">pos</span>&nbsp;<span class="op" id="2123933">:=</span>&nbsp;<span class="builtinfunc" id="2123936">len</span><span class="op" id="2123939">(</span><span class="ident" id="2123940">buf</span><span class="op" id="2123943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2123946">for</span>&nbsp;<span class="ident" id="2123950">v</span>&nbsp;<span class="op" id="2123952">:=</span>&nbsp;<span class="ident" id="2123955">integer</span><span class="op" id="2123962">;</span>&nbsp;<span class="ident" id="2123964">v</span>&nbsp;<span class="op" id="2123966">&gt;</span>&nbsp;<span class="num" id="2123968">0</span><span class="op" id="2123969">;</span>&nbsp;<span class="op" id="2123971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123975">v1</span>&nbsp;<span class="op" id="2123978">:=</span>&nbsp;<span class="ident" id="2123981">v</span>&nbsp;<span class="op" id="2123983">/</span>&nbsp;<span class="num" id="2123985">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2123990">v</span>&nbsp;<span class="op" id="2123992">-=</span>&nbsp;<span class="num" id="2123995">10</span>&nbsp;<span class="op" id="2123998">*</span>&nbsp;<span class="ident" id="2124000">v1</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124005">pos</span><span class="op" id="2124008">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124013">buf</span><span class="op" id="2124016">[</span><span class="ident" id="2124017">pos</span><span class="op" id="2124020">]</span>&nbsp;<span class="op" id="2124022">=</span>&nbsp;<span class="builtintype" id="2124024">byte</span><span class="op" id="2124028">(</span><span class="ident" id="2124029">v</span>&nbsp;<span class="op" id="2124031">+</span>&nbsp;<span class="string" id="2124033">&#39;0&#39;</span><span class="op" id="2124036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124040">v</span>&nbsp;<span class="op" id="2124042">=</span>&nbsp;<span class="ident" id="2124044">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124051">for</span>&nbsp;<span class="ident" id="2124055">i</span>&nbsp;<span class="op" id="2124057">:=</span>&nbsp;<span class="ident" id="2124060">pos</span><span class="op" id="2124063">;</span>&nbsp;<span class="ident" id="2124065">i</span>&nbsp;<span class="op" id="2124067">&lt;</span>&nbsp;<span class="builtinfunc" id="2124069">len</span><span class="op" id="2124072">(</span><span class="ident" id="2124073">buf</span><span class="op" id="2124076">)</span><span class="op" id="2124077">;</span>&nbsp;<span class="ident" id="2124079">i</span><span class="op" id="2124080">++</span>&nbsp;<span class="op" id="2124083">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124087">d</span><span class="op" id="2124088">.</span><span class="ident" id="2124089">d</span><span class="op" id="2124090">[</span><span class="ident" id="2124091">i</span><span class="op" id="2124092">-</span><span class="ident" id="2124093">pos</span><span class="op" id="2124096">]</span>&nbsp;<span class="op" id="2124098">=</span>&nbsp;<span class="ident" id="2124100">buf</span><span class="op" id="2124103">[</span><span class="ident" id="2124104">i</span><span class="op" id="2124105">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124111">nd</span>&nbsp;<span class="op" id="2124114">:=</span>&nbsp;<span class="builtinfunc" id="2124117">len</span><span class="op" id="2124120">(</span><span class="ident" id="2124121">buf</span><span class="op" id="2124124">)</span>&nbsp;<span class="op" id="2124126">-</span>&nbsp;<span class="ident" id="2124128">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124133">d</span><span class="op" id="2124134">.</span><span class="ident" id="2124135">nd</span>&nbsp;<span class="op" id="2124138">=</span>&nbsp;<span class="ident" id="2124140">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124144">d</span><span class="op" id="2124145">.</span><span class="ident" id="2124146">dp</span>&nbsp;<span class="op" id="2124149">=</span>&nbsp;<span class="ident" id="2124151">integerDigits</span>&nbsp;<span class="op" id="2124165">+</span>&nbsp;<span class="ident" id="2124167">exp10</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124174">needed</span>&nbsp;<span class="op" id="2124181">-=</span>&nbsp;<span class="ident" id="2124184">nd</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124189">if</span>&nbsp;<span class="ident" id="2124192">needed</span>&nbsp;<span class="op" id="2124199">&gt;</span>&nbsp;<span class="num" id="2124201">0</span>&nbsp;<span class="op" id="2124203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124207">if</span>&nbsp;<span class="ident" id="2124210">rest</span>&nbsp;<span class="op" id="2124215">!=</span>&nbsp;<span class="num" id="2124218">0</span>&nbsp;<span class="op" id="2124220">||</span>&nbsp;<span class="ident" id="2124223">pow10</span>&nbsp;<span class="op" id="2124229">!=</span>&nbsp;<span class="num" id="2124232">1</span>&nbsp;<span class="op" id="2124234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2124239">panic</span><span class="op" id="2124244">(</span><span class="string" id="2124245">&#34;strconv:&nbsp;internal&nbsp;error,&nbsp;rest&nbsp;!=&nbsp;0&nbsp;but&nbsp;needed&nbsp;&gt;&nbsp;0&#34;</span><span class="op" id="2124296">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124304">//&nbsp;Emit&nbsp;digits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;Each&nbsp;time,&nbsp;10*fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124369">//&nbsp;fits&nbsp;in&nbsp;a&nbsp;uint64&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124409">for</span>&nbsp;<span class="ident" id="2124413">needed</span>&nbsp;<span class="op" id="2124420">&gt;</span>&nbsp;<span class="num" id="2124422">0</span>&nbsp;<span class="op" id="2124424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124429">fraction</span>&nbsp;<span class="op" id="2124438">*=</span>&nbsp;<span class="num" id="2124441">10</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124447"></span>&nbsp;<span class="op" id="2124450">*=</span>&nbsp;<span class="num" id="2124453">10</span>&nbsp;<span class="comment" id="2124456">//&nbsp;the&nbsp;uncertainty&nbsp;scales&nbsp;as&nbsp;we&nbsp;multiply&nbsp;by&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124508">if</span>&nbsp;<span class="num" id="2124511">2</span><span class="op" id="2124512">*</span><span class="ident" id="2124513"></span>&nbsp;<span class="op" id="2124516">&gt;</span>&nbsp;<span class="num" id="2124518">1</span><span class="op" id="2124519">&lt;&lt;</span><span class="ident" id="2124521">shift</span>&nbsp;<span class="op" id="2124527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124533">//&nbsp;the&nbsp;error&nbsp;is&nbsp;so&nbsp;large&nbsp;it&nbsp;could&nbsp;modify&nbsp;which&nbsp;digit&nbsp;to&nbsp;write,&nbsp;abort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2124607">return</span>&nbsp;<span class="builtintype" id="2124614">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124623">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124628">digit</span>&nbsp;<span class="op" id="2124634">:=</span>&nbsp;<span class="ident" id="2124637">fraction</span>&nbsp;<span class="op" id="2124646">&gt;&gt;</span>&nbsp;<span class="ident" id="2124649">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124658">d</span><span class="op" id="2124659">.</span><span class="ident" id="2124660">d</span><span class="op" id="2124661">[</span><span class="ident" id="2124662">nd</span><span class="op" id="2124664">]</span>&nbsp;<span class="op" id="2124666">=</span>&nbsp;<span class="builtintype" id="2124668">byte</span><span class="op" id="2124672">(</span><span class="ident" id="2124673">digit</span>&nbsp;<span class="op" id="2124679">+</span>&nbsp;<span class="string" id="2124681">&#39;0&#39;</span><span class="op" id="2124684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124689">fraction</span>&nbsp;<span class="op" id="2124698">-=</span>&nbsp;<span class="ident" id="2124701">digit</span>&nbsp;<span class="op" id="2124707">&lt;&lt;</span>&nbsp;<span class="ident" id="2124710">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124719">nd</span><span class="op" id="2124721">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124727">needed</span><span class="op" id="2124733">--</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2124742">d</span><span class="op" id="2124743">.</span><span class="ident" id="2124744">nd</span>&nbsp;<span class="op" id="2124747">=</span>&nbsp;<span class="ident" id="2124749">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2124753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124757">//&nbsp;We&nbsp;have&nbsp;written&nbsp;a&nbsp;truncation&nbsp;of&nbsp;f&nbsp;(a&nbsp;numerator&nbsp;/&nbsp;10^d.dp).&nbsp;The&nbsp;remaining&nbsp;part</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124839">//&nbsp;can&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;small&nbsp;number&nbsp;(&lt;&nbsp;1)&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;last&nbsp;digit&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124923">//&nbsp;numerator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124938">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124942">//&nbsp;If&nbsp;rest&nbsp;&gt;&nbsp;0,&nbsp;the&nbsp;amount&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2124974">//&nbsp;&nbsp;&nbsp;&nbsp;(rest&lt;&lt;shift&nbsp;|&nbsp;fraction)&nbsp;/&nbsp;(pow10&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125025">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125078">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;fact&nbsp;that&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;guarantees&nbsp;that&nbsp;pow10&nbsp;&lt;&lt;&nbsp;shift&nbsp;does&nbsp;not&nbsp;overflow&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125164">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125168">//&nbsp;If&nbsp;rest&nbsp;=&nbsp;0,&nbsp;pow10&nbsp;==&nbsp;1&nbsp;and&nbsp;the&nbsp;amount&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125214">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;/&nbsp;(1&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125245">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125298">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125302">//&nbsp;We&nbsp;pass&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;rounding&nbsp;routine&nbsp;for&nbsp;adjustment.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2125372">ok</span>&nbsp;<span class="op" id="2125375">:=</span>&nbsp;<span class="ident" id="2125378">adjustLastDigitFixed</span><span class="op" id="2125398">(</span><span class="ident" id="2125399">d</span><span class="op" id="2125400">,</span>&nbsp;<span class="builtintype" id="2125402">uint64</span><span class="op" id="2125408">(</span><span class="ident" id="2125409">rest</span><span class="op" id="2125413">)</span><span class="op" id="2125414">&lt;&lt;</span><span class="ident" id="2125416">shift</span><span class="op" id="2125421">|</span><span class="ident" id="2125422">fraction</span><span class="op" id="2125430">,</span>&nbsp;<span class="ident" id="2125432">pow10</span><span class="op" id="2125437">,</span>&nbsp;<span class="ident" id="2125439">shift</span><span class="op" id="2125444">,</span>&nbsp;<span class="ident" id="2125446"></span><span class="op" id="2125448">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125451">if</span>&nbsp;<span class="op" id="2125454">!</span><span class="ident" id="2125455">ok</span>&nbsp;<span class="op" id="2125458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125462">return</span>&nbsp;<span class="builtintype" id="2125469">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2125476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2125479">//&nbsp;Trim&nbsp;trailing&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125504">for</span>&nbsp;<span class="ident" id="2125508">i</span>&nbsp;<span class="op" id="2125510">:=</span>&nbsp;<span class="ident" id="2125513">d</span><span class="op" id="2125514">.</span><span class="ident" id="2125515">nd</span>&nbsp;<span class="op" id="2125518">-</span>&nbsp;<span class="num" id="2125520">1</span><span class="op" id="2125521">;</span>&nbsp;<span class="ident" id="2125523">i</span>&nbsp;<span class="op" id="2125525">&gt;=</span>&nbsp;<span class="num" id="2125528">0</span><span class="op" id="2125529">;</span>&nbsp;<span class="ident" id="2125531">i</span><span class="op" id="2125532">--</span>&nbsp;<span class="op" id="2125535">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125539">if</span>&nbsp;<span class="ident" id="2125542">d</span><span class="op" id="2125543">.</span><span class="ident" id="2125544">d</span><span class="op" id="2125545">[</span><span class="ident" id="2125546">i</span><span class="op" id="2125547">]</span>&nbsp;<span class="op" id="2125549">!=</span>&nbsp;<span class="string" id="2125552">&#39;0&#39;</span>&nbsp;<span class="op" id="2125556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2125561">d</span><span class="op" id="2125562">.</span><span class="ident" id="2125563">nd</span>&nbsp;<span class="op" id="2125566">=</span>&nbsp;<span class="ident" id="2125568">i</span>&nbsp;<span class="op" id="2125570">+</span>&nbsp;<span class="num" id="2125572">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125577">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2125585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2125588">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2125591">return</span>&nbsp;<span class="builtintype" id="2125598">true</span><br>
<span class="lineno"></span><span class="op" id="2125603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2125606">//&nbsp;adjustLastDigitFixed&nbsp;assumes&nbsp;d&nbsp;contains&nbsp;the&nbsp;representation&nbsp;of&nbsp;the&nbsp;integral&nbsp;part</span><br>
<span class="lineno"></span><span class="comment" id="2125689">//&nbsp;of&nbsp;some&nbsp;number,&nbsp;whose&nbsp;fractional&nbsp;part&nbsp;is&nbsp;num&nbsp;/&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift).&nbsp;The&nbsp;numerator</span><br>
<span class="lineno">490</span><span class="comment" id="2125769">//&nbsp;num&nbsp;is&nbsp;only&nbsp;known&nbsp;up&nbsp;to&nbsp;an&nbsp;uncertainty&nbsp;of&nbsp;size&nbsp;,&nbsp;assumed&nbsp;to&nbsp;be&nbsp;less&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2125847">//&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift)/2.</span><br>
<span class="lineno"></span><span class="comment" id="2125868">//</span><br>
<span class="lineno"></span><span class="comment" id="2125871">//&nbsp;It&nbsp;will&nbsp;increase&nbsp;the&nbsp;last&nbsp;digit&nbsp;by&nbsp;one&nbsp;to&nbsp;account&nbsp;for&nbsp;correct&nbsp;rounding,&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="2125956">//&nbsp;when&nbsp;the&nbsp;fractional&nbsp;part&nbsp;is&nbsp;greater&nbsp;than&nbsp;1/2,&nbsp;and&nbsp;will&nbsp;return&nbsp;false&nbsp;if&nbsp;&nbsp;is&nbsp;such</span><br>
<span class="lineno">495</span><span class="comment" id="2126041">//&nbsp;that&nbsp;no&nbsp;correct&nbsp;answer&nbsp;can&nbsp;be&nbsp;given.</span><br>
<span class="lineno"></span><span class="keyword" id="2126081">func</span>&nbsp;<span class="ident" id="2126086">adjustLastDigitFixed</span><span class="op" id="2126106">(</span><span class="ident" id="2126107">d</span>&nbsp;<span class="op" id="2126109">*</span><span class="ident" id="2126110">decimalSlice</span><span class="op" id="2126122">,</span>&nbsp;<span class="ident" id="2126124">num</span><span class="op" id="2126127">,</span>&nbsp;<span class="ident" id="2126129">den</span>&nbsp;<span class="builtintype" id="2126133">uint64</span><span class="op" id="2126139">,</span>&nbsp;<span class="ident" id="2126141">shift</span>&nbsp;<span class="builtintype" id="2126147">uint</span><span class="op" id="2126151">,</span>&nbsp;<span class="ident" id="2126153"></span>&nbsp;<span class="builtintype" id="2126156">uint64</span><span class="op" id="2126162">)</span>&nbsp;<span class="builtintype" id="2126164">bool</span>&nbsp;<span class="op" id="2126169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126172">if</span>&nbsp;<span class="ident" id="2126175">num</span>&nbsp;<span class="op" id="2126179">&gt;</span>&nbsp;<span class="ident" id="2126181">den</span><span class="op" id="2126184">&lt;&lt;</span><span class="ident" id="2126186">shift</span>&nbsp;<span class="op" id="2126192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2126196">panic</span><span class="op" id="2126201">(</span><span class="string" id="2126202">&#34;strconv:&nbsp;num&nbsp;&gt;&nbsp;den&lt;&lt;shift&nbsp;in&nbsp;adjustLastDigitFixed&#34;</span><span class="op" id="2126253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126256">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126259">if</span>&nbsp;<span class="num" id="2126262">2</span><span class="op" id="2126263">*</span><span class="ident" id="2126264"></span>&nbsp;<span class="op" id="2126267">&gt;</span>&nbsp;<span class="ident" id="2126269">den</span><span class="op" id="2126272">&lt;&lt;</span><span class="ident" id="2126274">shift</span>&nbsp;<span class="op" id="2126280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2126284">panic</span><span class="op" id="2126289">(</span><span class="string" id="2126290">&#34;strconv:&nbsp;&nbsp;&gt;&nbsp;(den&lt;&lt;shift)/2&#34;</span><span class="op" id="2126320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126326">if</span>&nbsp;<span class="num" id="2126329">2</span><span class="op" id="2126330">*</span><span class="op" id="2126331">(</span><span class="ident" id="2126332">num</span><span class="op" id="2126335">+</span><span class="ident" id="2126336"></span><span class="op" id="2126338">)</span>&nbsp;<span class="op" id="2126340">&lt;</span>&nbsp;<span class="ident" id="2126342">den</span><span class="op" id="2126345">&lt;&lt;</span><span class="ident" id="2126347">shift</span>&nbsp;<span class="op" id="2126353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126357">return</span>&nbsp;<span class="builtintype" id="2126364">true</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126373">if</span>&nbsp;<span class="num" id="2126376">2</span><span class="op" id="2126377">*</span><span class="op" id="2126378">(</span><span class="ident" id="2126379">num</span><span class="op" id="2126382">-</span><span class="ident" id="2126383"></span><span class="op" id="2126385">)</span>&nbsp;<span class="op" id="2126387">&gt;</span>&nbsp;<span class="ident" id="2126389">den</span><span class="op" id="2126392">&lt;&lt;</span><span class="ident" id="2126394">shift</span>&nbsp;<span class="op" id="2126400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2126404">//&nbsp;increment&nbsp;d&nbsp;by&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126427">i</span>&nbsp;<span class="op" id="2126429">:=</span>&nbsp;<span class="ident" id="2126432">d</span><span class="op" id="2126433">.</span><span class="ident" id="2126434">nd</span>&nbsp;<span class="op" id="2126437">-</span>&nbsp;<span class="num" id="2126439">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126443">for</span>&nbsp;<span class="op" id="2126447">;</span>&nbsp;<span class="ident" id="2126449">i</span>&nbsp;<span class="op" id="2126451">&gt;=</span>&nbsp;<span class="num" id="2126454">0</span><span class="op" id="2126455">;</span>&nbsp;<span class="ident" id="2126457">i</span><span class="op" id="2126458">--</span>&nbsp;<span class="op" id="2126461">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126466">if</span>&nbsp;<span class="ident" id="2126469">d</span><span class="op" id="2126470">.</span><span class="ident" id="2126471">d</span><span class="op" id="2126472">[</span><span class="ident" id="2126473">i</span><span class="op" id="2126474">]</span>&nbsp;<span class="op" id="2126476">==</span>&nbsp;<span class="string" id="2126479">&#39;9&#39;</span>&nbsp;<span class="op" id="2126483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126489">d</span><span class="op" id="2126490">.</span><span class="ident" id="2126491">nd</span><span class="op" id="2126493">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126499">}</span>&nbsp;<span class="keyword" id="2126501">else</span>&nbsp;<span class="op" id="2126506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126512">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126521">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126529">if</span>&nbsp;<span class="ident" id="2126532">i</span>&nbsp;<span class="op" id="2126534">&lt;</span>&nbsp;<span class="num" id="2126536">0</span>&nbsp;<span class="op" id="2126538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126543">d</span><span class="op" id="2126544">.</span><span class="ident" id="2126545">d</span><span class="op" id="2126546">[</span><span class="num" id="2126547">0</span><span class="op" id="2126548">]</span>&nbsp;<span class="op" id="2126550">=</span>&nbsp;<span class="string" id="2126552">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126559">d</span><span class="op" id="2126560">.</span><span class="ident" id="2126561">nd</span>&nbsp;<span class="op" id="2126564">=</span>&nbsp;<span class="num" id="2126566">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126571">d</span><span class="op" id="2126572">.</span><span class="ident" id="2126573">dp</span><span class="op" id="2126575">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126580">}</span>&nbsp;<span class="keyword" id="2126582">else</span>&nbsp;<span class="op" id="2126587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126592">d</span><span class="op" id="2126593">.</span><span class="ident" id="2126594">d</span><span class="op" id="2126595">[</span><span class="ident" id="2126596">i</span><span class="op" id="2126597">]</span><span class="op" id="2126598">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126607">return</span>&nbsp;<span class="builtintype" id="2126614">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2126620">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126623">return</span>&nbsp;<span class="builtintype" id="2126630">false</span><br>
<span class="lineno"></span><span class="op" id="2126636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2126639">//&nbsp;ShortestDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;shortest&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f</span><br>
<span class="lineno"></span><span class="comment" id="2126711">//&nbsp;which&nbsp;belongs&nbsp;to&nbsp;the&nbsp;open&nbsp;interval&nbsp;(lower,&nbsp;upper),&nbsp;where&nbsp;f&nbsp;is&nbsp;supposed</span><br>
<span class="lineno">530</span><span class="comment" id="2126785">//&nbsp;to&nbsp;lie.&nbsp;It&nbsp;returns&nbsp;false&nbsp;whenever&nbsp;the&nbsp;result&nbsp;is&nbsp;unsure.&nbsp;The&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="2126863">//&nbsp;uses&nbsp;the&nbsp;Grisu3&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="2126893">func</span>&nbsp;<span class="op" id="2126898">(</span><span class="ident" id="2126899">f</span>&nbsp;<span class="op" id="2126901">*</span><span class="ident" id="2126902">extFloat</span><span class="op" id="2126910">)</span>&nbsp;<span class="ident" id="2126912">ShortestDecimal</span><span class="op" id="2126927">(</span><span class="ident" id="2126928">d</span>&nbsp;<span class="op" id="2126930">*</span><span class="ident" id="2126931">decimalSlice</span><span class="op" id="2126943">,</span>&nbsp;<span class="ident" id="2126945">lower</span><span class="op" id="2126950">,</span>&nbsp;<span class="ident" id="2126952">upper</span>&nbsp;<span class="op" id="2126958">*</span><span class="ident" id="2126959">extFloat</span><span class="op" id="2126967">)</span>&nbsp;<span class="builtintype" id="2126969">bool</span>&nbsp;<span class="op" id="2126974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2126977">if</span>&nbsp;<span class="ident" id="2126980">f</span><span class="op" id="2126981">.</span><span class="ident" id="2126982">mant</span>&nbsp;<span class="op" id="2126987">==</span>&nbsp;<span class="num" id="2126990">0</span>&nbsp;<span class="op" id="2126992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2126996">d</span><span class="op" id="2126997">.</span><span class="ident" id="2126998">nd</span>&nbsp;<span class="op" id="2127001">=</span>&nbsp;<span class="num" id="2127003">0</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127007">d</span><span class="op" id="2127008">.</span><span class="ident" id="2127009">dp</span>&nbsp;<span class="op" id="2127012">=</span>&nbsp;<span class="num" id="2127014">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127018">d</span><span class="op" id="2127019">.</span><span class="ident" id="2127020">neg</span>&nbsp;<span class="op" id="2127024">=</span>&nbsp;<span class="ident" id="2127026">f</span><span class="op" id="2127027">.</span><span class="ident" id="2127028">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127034">return</span>&nbsp;<span class="builtintype" id="2127041">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127050">if</span>&nbsp;<span class="ident" id="2127053">f</span><span class="op" id="2127054">.</span><span class="ident" id="2127055">exp</span>&nbsp;<span class="op" id="2127059">==</span>&nbsp;<span class="num" id="2127062">0</span>&nbsp;<span class="op" id="2127064">&amp;&amp;</span>&nbsp;<span class="op" id="2127067">*</span><span class="ident" id="2127068">lower</span>&nbsp;<span class="op" id="2127074">==</span>&nbsp;<span class="op" id="2127077">*</span><span class="ident" id="2127078">f</span>&nbsp;<span class="op" id="2127080">&amp;&amp;</span>&nbsp;<span class="op" id="2127083">*</span><span class="ident" id="2127084">lower</span>&nbsp;<span class="op" id="2127090">==</span>&nbsp;<span class="op" id="2127093">*</span><span class="ident" id="2127094">upper</span>&nbsp;<span class="op" id="2127100">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2127104">//&nbsp;an&nbsp;exact&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127127">var</span>&nbsp;<span class="ident" id="2127131">buf</span>&nbsp;<span class="op" id="2127135">[</span><span class="num" id="2127136">24</span><span class="op" id="2127138">]</span><span class="builtintype" id="2127139">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127146">n</span>&nbsp;<span class="op" id="2127148">:=</span>&nbsp;<span class="builtinfunc" id="2127151">len</span><span class="op" id="2127154">(</span><span class="ident" id="2127155">buf</span><span class="op" id="2127158">)</span>&nbsp;<span class="op" id="2127160">-</span>&nbsp;<span class="num" id="2127162">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127166">for</span>&nbsp;<span class="ident" id="2127170">v</span>&nbsp;<span class="op" id="2127172">:=</span>&nbsp;<span class="ident" id="2127175">f</span><span class="op" id="2127176">.</span><span class="ident" id="2127177">mant</span><span class="op" id="2127181">;</span>&nbsp;<span class="ident" id="2127183">v</span>&nbsp;<span class="op" id="2127185">&gt;</span>&nbsp;<span class="num" id="2127187">0</span><span class="op" id="2127188">;</span>&nbsp;<span class="op" id="2127190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127195">v1</span>&nbsp;<span class="op" id="2127198">:=</span>&nbsp;<span class="ident" id="2127201">v</span>&nbsp;<span class="op" id="2127203">/</span>&nbsp;<span class="num" id="2127205">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127211">v</span>&nbsp;<span class="op" id="2127213">-=</span>&nbsp;<span class="num" id="2127216">10</span>&nbsp;<span class="op" id="2127219">*</span>&nbsp;<span class="ident" id="2127221">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127227">buf</span><span class="op" id="2127230">[</span><span class="ident" id="2127231">n</span><span class="op" id="2127232">]</span>&nbsp;<span class="op" id="2127234">=</span>&nbsp;<span class="builtintype" id="2127236">byte</span><span class="op" id="2127240">(</span><span class="ident" id="2127241">v</span>&nbsp;<span class="op" id="2127243">+</span>&nbsp;<span class="string" id="2127245">&#39;0&#39;</span><span class="op" id="2127248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127253">n</span><span class="op" id="2127254">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127260">v</span>&nbsp;<span class="op" id="2127262">=</span>&nbsp;<span class="ident" id="2127264">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127269">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127273">nd</span>&nbsp;<span class="op" id="2127276">:=</span>&nbsp;<span class="builtinfunc" id="2127279">len</span><span class="op" id="2127282">(</span><span class="ident" id="2127283">buf</span><span class="op" id="2127286">)</span>&nbsp;<span class="op" id="2127288">-</span>&nbsp;<span class="ident" id="2127290">n</span>&nbsp;<span class="op" id="2127292">-</span>&nbsp;<span class="num" id="2127294">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127298">for</span>&nbsp;<span class="ident" id="2127302">i</span>&nbsp;<span class="op" id="2127304">:=</span>&nbsp;<span class="num" id="2127307">0</span><span class="op" id="2127308">;</span>&nbsp;<span class="ident" id="2127310">i</span>&nbsp;<span class="op" id="2127312">&lt;</span>&nbsp;<span class="ident" id="2127314">nd</span><span class="op" id="2127316">;</span>&nbsp;<span class="ident" id="2127318">i</span><span class="op" id="2127319">++</span>&nbsp;<span class="op" id="2127322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127327">d</span><span class="op" id="2127328">.</span><span class="ident" id="2127329">d</span><span class="op" id="2127330">[</span><span class="ident" id="2127331">i</span><span class="op" id="2127332">]</span>&nbsp;<span class="op" id="2127334">=</span>&nbsp;<span class="ident" id="2127336">buf</span><span class="op" id="2127339">[</span><span class="ident" id="2127340">n</span><span class="op" id="2127341">+</span><span class="num" id="2127342">1</span><span class="op" id="2127343">+</span><span class="ident" id="2127344">i</span><span class="op" id="2127345">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127353">d</span><span class="op" id="2127354">.</span><span class="ident" id="2127355">nd</span><span class="op" id="2127357">,</span>&nbsp;<span class="ident" id="2127359">d</span><span class="op" id="2127360">.</span><span class="ident" id="2127361">dp</span>&nbsp;<span class="op" id="2127364">=</span>&nbsp;<span class="ident" id="2127366">nd</span><span class="op" id="2127368">,</span>&nbsp;<span class="ident" id="2127370">nd</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127375">for</span>&nbsp;<span class="ident" id="2127379">d</span><span class="op" id="2127380">.</span><span class="ident" id="2127381">nd</span>&nbsp;<span class="op" id="2127384">&gt;</span>&nbsp;<span class="num" id="2127386">0</span>&nbsp;<span class="op" id="2127388">&amp;&amp;</span>&nbsp;<span class="ident" id="2127391">d</span><span class="op" id="2127392">.</span><span class="ident" id="2127393">d</span><span class="op" id="2127394">[</span><span class="ident" id="2127395">d</span><span class="op" id="2127396">.</span><span class="ident" id="2127397">nd</span><span class="op" id="2127399">-</span><span class="num" id="2127400">1</span><span class="op" id="2127401">]</span>&nbsp;<span class="op" id="2127403">==</span>&nbsp;<span class="string" id="2127406">&#39;0&#39;</span>&nbsp;<span class="op" id="2127410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127415">d</span><span class="op" id="2127416">.</span><span class="ident" id="2127417">nd</span><span class="op" id="2127419">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127428">if</span>&nbsp;<span class="ident" id="2127431">d</span><span class="op" id="2127432">.</span><span class="ident" id="2127433">nd</span>&nbsp;<span class="op" id="2127436">==</span>&nbsp;<span class="num" id="2127439">0</span>&nbsp;<span class="op" id="2127441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127446">d</span><span class="op" id="2127447">.</span><span class="ident" id="2127448">dp</span>&nbsp;<span class="op" id="2127451">=</span>&nbsp;<span class="num" id="2127453">0</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127461">d</span><span class="op" id="2127462">.</span><span class="ident" id="2127463">neg</span>&nbsp;<span class="op" id="2127467">=</span>&nbsp;<span class="ident" id="2127469">f</span><span class="op" id="2127470">.</span><span class="ident" id="2127471">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127477">return</span>&nbsp;<span class="builtintype" id="2127484">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127493">upper</span><span class="op" id="2127498">.</span><span class="ident" id="2127499">Normalize</span><span class="op" id="2127508">(</span><span class="op" id="2127509">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2127512">//&nbsp;Uniformize&nbsp;exponents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127538">if</span>&nbsp;<span class="ident" id="2127541">f</span><span class="op" id="2127542">.</span><span class="ident" id="2127543">exp</span>&nbsp;<span class="op" id="2127547">&gt;</span>&nbsp;<span class="ident" id="2127549">upper</span><span class="op" id="2127554">.</span><span class="ident" id="2127555">exp</span>&nbsp;<span class="op" id="2127559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127563">f</span><span class="op" id="2127564">.</span><span class="ident" id="2127565">mant</span>&nbsp;<span class="op" id="2127570">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2127574">uint</span><span class="op" id="2127578">(</span><span class="ident" id="2127579">f</span><span class="op" id="2127580">.</span><span class="ident" id="2127581">exp</span>&nbsp;<span class="op" id="2127585">-</span>&nbsp;<span class="ident" id="2127587">upper</span><span class="op" id="2127592">.</span><span class="ident" id="2127593">exp</span><span class="op" id="2127596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127600">f</span><span class="op" id="2127601">.</span><span class="ident" id="2127602">exp</span>&nbsp;<span class="op" id="2127606">=</span>&nbsp;<span class="ident" id="2127608">upper</span><span class="op" id="2127613">.</span><span class="ident" id="2127614">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127619">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2127622">if</span>&nbsp;<span class="ident" id="2127625">lower</span><span class="op" id="2127630">.</span><span class="ident" id="2127631">exp</span>&nbsp;<span class="op" id="2127635">&gt;</span>&nbsp;<span class="ident" id="2127637">upper</span><span class="op" id="2127642">.</span><span class="ident" id="2127643">exp</span>&nbsp;<span class="op" id="2127647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127651">lower</span><span class="op" id="2127656">.</span><span class="ident" id="2127657">mant</span>&nbsp;<span class="op" id="2127662">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="2127666">uint</span><span class="op" id="2127670">(</span><span class="ident" id="2127671">lower</span><span class="op" id="2127676">.</span><span class="ident" id="2127677">exp</span>&nbsp;<span class="op" id="2127681">-</span>&nbsp;<span class="ident" id="2127683">upper</span><span class="op" id="2127688">.</span><span class="ident" id="2127689">exp</span><span class="op" id="2127692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127696">lower</span><span class="op" id="2127701">.</span><span class="ident" id="2127702">exp</span>&nbsp;<span class="op" id="2127706">=</span>&nbsp;<span class="ident" id="2127708">upper</span><span class="op" id="2127713">.</span><span class="ident" id="2127714">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2127719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127723">exp10</span>&nbsp;<span class="op" id="2127729">:=</span>&nbsp;<span class="ident" id="2127732">frexp10Many</span><span class="op" id="2127743">(</span><span class="ident" id="2127744">lower</span><span class="op" id="2127749">,</span>&nbsp;<span class="ident" id="2127751">f</span><span class="op" id="2127752">,</span>&nbsp;<span class="ident" id="2127754">upper</span><span class="op" id="2127759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2127762">//&nbsp;Take&nbsp;a&nbsp;safety&nbsp;margin&nbsp;due&nbsp;to&nbsp;rounding&nbsp;in&nbsp;frexp10Many,&nbsp;but&nbsp;we&nbsp;lose&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127842">upper</span><span class="op" id="2127847">.</span><span class="ident" id="2127848">mant</span><span class="op" id="2127852">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127856">lower</span><span class="op" id="2127861">.</span><span class="ident" id="2127862">mant</span><span class="op" id="2127866">--</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2127871">//&nbsp;The&nbsp;shortest&nbsp;representation&nbsp;of&nbsp;f&nbsp;is&nbsp;either&nbsp;rounded&nbsp;up&nbsp;or&nbsp;down,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2127942">//&nbsp;in&nbsp;any&nbsp;case,&nbsp;it&nbsp;is&nbsp;a&nbsp;truncation&nbsp;of&nbsp;upper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2127988">shift</span>&nbsp;<span class="op" id="2127994">:=</span>&nbsp;<span class="builtintype" id="2127997">uint</span><span class="op" id="2128001">(</span><span class="op" id="2128002">-</span><span class="ident" id="2128003">upper</span><span class="op" id="2128008">.</span><span class="ident" id="2128009">exp</span><span class="op" id="2128012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128015">integer</span>&nbsp;<span class="op" id="2128023">:=</span>&nbsp;<span class="builtintype" id="2128026">uint32</span><span class="op" id="2128032">(</span><span class="ident" id="2128033">upper</span><span class="op" id="2128038">.</span><span class="ident" id="2128039">mant</span>&nbsp;<span class="op" id="2128044">&gt;&gt;</span>&nbsp;<span class="ident" id="2128047">shift</span><span class="op" id="2128052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128055">fraction</span>&nbsp;<span class="op" id="2128064">:=</span>&nbsp;<span class="ident" id="2128067">upper</span><span class="op" id="2128072">.</span><span class="ident" id="2128073">mant</span>&nbsp;<span class="op" id="2128078">-</span>&nbsp;<span class="op" id="2128080">(</span><span class="builtintype" id="2128081">uint64</span><span class="op" id="2128087">(</span><span class="ident" id="2128088">integer</span><span class="op" id="2128095">)</span>&nbsp;<span class="op" id="2128097">&lt;&lt;</span>&nbsp;<span class="ident" id="2128100">shift</span><span class="op" id="2128105">)</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128109">//&nbsp;How&nbsp;far&nbsp;we&nbsp;can&nbsp;go&nbsp;down&nbsp;from&nbsp;upper&nbsp;until&nbsp;the&nbsp;result&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128174">allowance</span>&nbsp;<span class="op" id="2128184">:=</span>&nbsp;<span class="ident" id="2128187">upper</span><span class="op" id="2128192">.</span><span class="ident" id="2128193">mant</span>&nbsp;<span class="op" id="2128198">-</span>&nbsp;<span class="ident" id="2128200">lower</span><span class="op" id="2128205">.</span><span class="ident" id="2128206">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128212">//&nbsp;How&nbsp;far&nbsp;we&nbsp;should&nbsp;go&nbsp;to&nbsp;get&nbsp;a&nbsp;very&nbsp;precise&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128267">targetDiff</span>&nbsp;<span class="op" id="2128278">:=</span>&nbsp;<span class="ident" id="2128281">upper</span><span class="op" id="2128286">.</span><span class="ident" id="2128287">mant</span>&nbsp;<span class="op" id="2128292">-</span>&nbsp;<span class="ident" id="2128294">f</span><span class="op" id="2128295">.</span><span class="ident" id="2128296">mant</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128303">//&nbsp;Count&nbsp;integral&nbsp;digits:&nbsp;there&nbsp;are&nbsp;at&nbsp;most&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128352">var</span>&nbsp;<span class="ident" id="2128356">integerDigits</span>&nbsp;<span class="builtintype" id="2128370">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128375">for</span>&nbsp;<span class="ident" id="2128379">i</span><span class="op" id="2128380">,</span>&nbsp;<span class="ident" id="2128382">pow</span>&nbsp;<span class="op" id="2128386">:=</span>&nbsp;<span class="num" id="2128389">0</span><span class="op" id="2128390">,</span>&nbsp;<span class="builtintype" id="2128392">uint64</span><span class="op" id="2128398">(</span><span class="num" id="2128399">1</span><span class="op" id="2128400">)</span><span class="op" id="2128401">;</span>&nbsp;<span class="ident" id="2128403">i</span>&nbsp;<span class="op" id="2128405">&lt;</span>&nbsp;<span class="num" id="2128407">20</span><span class="op" id="2128409">;</span>&nbsp;<span class="ident" id="2128411">i</span><span class="op" id="2128412">++</span>&nbsp;<span class="op" id="2128415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128419">if</span>&nbsp;<span class="ident" id="2128422">pow</span>&nbsp;<span class="op" id="2128426">&gt;</span>&nbsp;<span class="builtintype" id="2128428">uint64</span><span class="op" id="2128434">(</span><span class="ident" id="2128435">integer</span><span class="op" id="2128442">)</span>&nbsp;<span class="op" id="2128444">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128449">integerDigits</span>&nbsp;<span class="op" id="2128463">=</span>&nbsp;<span class="ident" id="2128465">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128470">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2128478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128482">pow</span>&nbsp;<span class="op" id="2128486">*=</span>&nbsp;<span class="num" id="2128489">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2128493">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128496">for</span>&nbsp;<span class="ident" id="2128500">i</span>&nbsp;<span class="op" id="2128502">:=</span>&nbsp;<span class="num" id="2128505">0</span><span class="op" id="2128506">;</span>&nbsp;<span class="ident" id="2128508">i</span>&nbsp;<span class="op" id="2128510">&lt;</span>&nbsp;<span class="ident" id="2128512">integerDigits</span><span class="op" id="2128525">;</span>&nbsp;<span class="ident" id="2128527">i</span><span class="op" id="2128528">++</span>&nbsp;<span class="op" id="2128531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128535">pow</span>&nbsp;<span class="op" id="2128539">:=</span>&nbsp;<span class="ident" id="2128542">uint64pow10</span><span class="op" id="2128553">[</span><span class="ident" id="2128554">integerDigits</span><span class="op" id="2128567">-</span><span class="ident" id="2128568">i</span><span class="op" id="2128569">-</span><span class="num" id="2128570">1</span><span class="op" id="2128571">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128575">digit</span>&nbsp;<span class="op" id="2128581">:=</span>&nbsp;<span class="ident" id="2128584">integer</span>&nbsp;<span class="op" id="2128592">/</span>&nbsp;<span class="builtintype" id="2128594">uint32</span><span class="op" id="2128600">(</span><span class="ident" id="2128601">pow</span><span class="op" id="2128604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128608">d</span><span class="op" id="2128609">.</span><span class="ident" id="2128610">d</span><span class="op" id="2128611">[</span><span class="ident" id="2128612">i</span><span class="op" id="2128613">]</span>&nbsp;<span class="op" id="2128615">=</span>&nbsp;<span class="builtintype" id="2128617">byte</span><span class="op" id="2128621">(</span><span class="ident" id="2128622">digit</span>&nbsp;<span class="op" id="2128628">+</span>&nbsp;<span class="string" id="2128630">&#39;0&#39;</span><span class="op" id="2128633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128637">integer</span>&nbsp;<span class="op" id="2128645">-=</span>&nbsp;<span class="ident" id="2128648">digit</span>&nbsp;<span class="op" id="2128654">*</span>&nbsp;<span class="builtintype" id="2128656">uint32</span><span class="op" id="2128662">(</span><span class="ident" id="2128663">pow</span><span class="op" id="2128666">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128670">//&nbsp;evaluate&nbsp;whether&nbsp;we&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128708">if</span>&nbsp;<span class="ident" id="2128711">currentDiff</span>&nbsp;<span class="op" id="2128723">:=</span>&nbsp;<span class="builtintype" id="2128726">uint64</span><span class="op" id="2128732">(</span><span class="ident" id="2128733">integer</span><span class="op" id="2128740">)</span><span class="op" id="2128741">&lt;&lt;</span><span class="ident" id="2128743">shift</span>&nbsp;<span class="op" id="2128749">+</span>&nbsp;<span class="ident" id="2128751">fraction</span><span class="op" id="2128759">;</span>&nbsp;<span class="ident" id="2128761">currentDiff</span>&nbsp;<span class="op" id="2128773">&lt;</span>&nbsp;<span class="ident" id="2128775">allowance</span>&nbsp;<span class="op" id="2128785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128790">d</span><span class="op" id="2128791">.</span><span class="ident" id="2128792">nd</span>&nbsp;<span class="op" id="2128795">=</span>&nbsp;<span class="ident" id="2128797">i</span>&nbsp;<span class="op" id="2128799">+</span>&nbsp;<span class="num" id="2128801">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128806">d</span><span class="op" id="2128807">.</span><span class="ident" id="2128808">dp</span>&nbsp;<span class="op" id="2128811">=</span>&nbsp;<span class="ident" id="2128813">integerDigits</span>&nbsp;<span class="op" id="2128827">+</span>&nbsp;<span class="ident" id="2128829">exp10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2128838">d</span><span class="op" id="2128839">.</span><span class="ident" id="2128840">neg</span>&nbsp;<span class="op" id="2128844">=</span>&nbsp;<span class="ident" id="2128846">f</span><span class="op" id="2128847">.</span><span class="ident" id="2128848">neg</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128855">//&nbsp;Sometimes&nbsp;allowance&nbsp;is&nbsp;so&nbsp;large&nbsp;the&nbsp;last&nbsp;digit&nbsp;might&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2128925">//&nbsp;decremented&nbsp;to&nbsp;get&nbsp;closer&nbsp;to&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2128963">return</span>&nbsp;<span class="ident" id="2128970">adjustLastDigit</span><span class="op" id="2128985">(</span><span class="ident" id="2128986">d</span><span class="op" id="2128987">,</span>&nbsp;<span class="ident" id="2128989">currentDiff</span><span class="op" id="2129000">,</span>&nbsp;<span class="ident" id="2129002">targetDiff</span><span class="op" id="2129012">,</span>&nbsp;<span class="ident" id="2129014">allowance</span><span class="op" id="2129023">,</span>&nbsp;<span class="ident" id="2129025">pow</span><span class="op" id="2129028">&lt;&lt;</span><span class="ident" id="2129030">shift</span><span class="op" id="2129035">,</span>&nbsp;<span class="num" id="2129037">2</span><span class="op" id="2129038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2129042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2129045">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129048">d</span><span class="op" id="2129049">.</span><span class="ident" id="2129050">nd</span>&nbsp;<span class="op" id="2129053">=</span>&nbsp;<span class="ident" id="2129055">integerDigits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129070">d</span><span class="op" id="2129071">.</span><span class="ident" id="2129072">dp</span>&nbsp;<span class="op" id="2129075">=</span>&nbsp;<span class="ident" id="2129077">d</span><span class="op" id="2129078">.</span><span class="ident" id="2129079">nd</span>&nbsp;<span class="op" id="2129082">+</span>&nbsp;<span class="ident" id="2129084">exp10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129091">d</span><span class="op" id="2129092">.</span><span class="ident" id="2129093">neg</span>&nbsp;<span class="op" id="2129097">=</span>&nbsp;<span class="ident" id="2129099">f</span><span class="op" id="2129100">.</span><span class="ident" id="2129101">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2129107">//&nbsp;Compute&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;At&nbsp;each&nbsp;step&nbsp;fraction&nbsp;does&nbsp;not</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2129181">//&nbsp;overflow.&nbsp;The&nbsp;choice&nbsp;of&nbsp;minExp&nbsp;implies&nbsp;that&nbsp;fraction&nbsp;is&nbsp;less&nbsp;than&nbsp;2^60.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2129257">var</span>&nbsp;<span class="ident" id="2129261">digit</span>&nbsp;<span class="builtintype" id="2129267">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129272">multiplier</span>&nbsp;<span class="op" id="2129283">:=</span>&nbsp;<span class="builtintype" id="2129286">uint64</span><span class="op" id="2129292">(</span><span class="num" id="2129293">1</span><span class="op" id="2129294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2129297">for</span>&nbsp;<span class="op" id="2129301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129305">fraction</span>&nbsp;<span class="op" id="2129314">*=</span>&nbsp;<span class="num" id="2129317">10</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129322">multiplier</span>&nbsp;<span class="op" id="2129333">*=</span>&nbsp;<span class="num" id="2129336">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129341">digit</span>&nbsp;<span class="op" id="2129347">=</span>&nbsp;<span class="builtintype" id="2129349">int</span><span class="op" id="2129352">(</span><span class="ident" id="2129353">fraction</span>&nbsp;<span class="op" id="2129362">&gt;&gt;</span>&nbsp;<span class="ident" id="2129365">shift</span><span class="op" id="2129370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129374">d</span><span class="op" id="2129375">.</span><span class="ident" id="2129376">d</span><span class="op" id="2129377">[</span><span class="ident" id="2129378">d</span><span class="op" id="2129379">.</span><span class="ident" id="2129380">nd</span><span class="op" id="2129382">]</span>&nbsp;<span class="op" id="2129384">=</span>&nbsp;<span class="builtintype" id="2129386">byte</span><span class="op" id="2129390">(</span><span class="ident" id="2129391">digit</span>&nbsp;<span class="op" id="2129397">+</span>&nbsp;<span class="string" id="2129399">&#39;0&#39;</span><span class="op" id="2129402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129406">d</span><span class="op" id="2129407">.</span><span class="ident" id="2129408">nd</span><span class="op" id="2129410">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129415">fraction</span>&nbsp;<span class="op" id="2129424">-=</span>&nbsp;<span class="builtintype" id="2129427">uint64</span><span class="op" id="2129433">(</span><span class="ident" id="2129434">digit</span><span class="op" id="2129439">)</span>&nbsp;<span class="op" id="2129441">&lt;&lt;</span>&nbsp;<span class="ident" id="2129444">shift</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2129452">if</span>&nbsp;<span class="ident" id="2129455">fraction</span>&nbsp;<span class="op" id="2129464">&lt;</span>&nbsp;<span class="ident" id="2129466">allowance</span><span class="op" id="2129475">*</span><span class="ident" id="2129476">multiplier</span>&nbsp;<span class="op" id="2129487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2129492">//&nbsp;We&nbsp;are&nbsp;in&nbsp;the&nbsp;admissible&nbsp;range.&nbsp;Note&nbsp;that&nbsp;if&nbsp;allowance&nbsp;is&nbsp;about&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2129565">//&nbsp;overflow,&nbsp;that&nbsp;is,&nbsp;allowance&nbsp;&gt;&nbsp;2^64/10,&nbsp;the&nbsp;condition&nbsp;is&nbsp;automatically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2129642">//&nbsp;true&nbsp;due&nbsp;to&nbsp;the&nbsp;limited&nbsp;range&nbsp;of&nbsp;fraction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2129691">return</span>&nbsp;<span class="ident" id="2129698">adjustLastDigit</span><span class="op" id="2129713">(</span><span class="ident" id="2129714">d</span><span class="op" id="2129715">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2129721">fraction</span><span class="op" id="2129729">,</span>&nbsp;<span class="ident" id="2129731">targetDiff</span><span class="op" id="2129741">*</span><span class="ident" id="2129742">multiplier</span><span class="op" id="2129752">,</span>&nbsp;<span class="ident" id="2129754">allowance</span><span class="op" id="2129763">*</span><span class="ident" id="2129764">multiplier</span><span class="op" id="2129774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2129780">1</span><span class="op" id="2129781">&lt;&lt;</span><span class="ident" id="2129783">shift</span><span class="op" id="2129788">,</span>&nbsp;<span class="ident" id="2129790">multiplier</span><span class="op" id="2129800">*</span><span class="num" id="2129801">2</span><span class="op" id="2129802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2129806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2129809">}</span><br>
<span class="lineno"></span><span class="op" id="2129811">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="2129814">//&nbsp;adjustLastDigit&nbsp;modifies&nbsp;d&nbsp;=&nbsp;x-currentDiff*,&nbsp;to&nbsp;get&nbsp;closest&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2129882">//&nbsp;d&nbsp;=&nbsp;x-targetDiff*,&nbsp;without&nbsp;becoming&nbsp;smaller&nbsp;than&nbsp;x-maxDiff*.</span><br>
<span class="lineno"></span><span class="comment" id="2129950">//&nbsp;It&nbsp;assumes&nbsp;that&nbsp;a&nbsp;decimal&nbsp;digit&nbsp;is&nbsp;worth&nbsp;ulpDecimal*,&nbsp;and&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2130018">//&nbsp;all&nbsp;data&nbsp;is&nbsp;known&nbsp;with&nbsp;a&nbsp;error&nbsp;estimate&nbsp;of&nbsp;ulpBinary*.</span><br>
<span class="lineno">645</span><span class="keyword" id="2130078">func</span>&nbsp;<span class="ident" id="2130083">adjustLastDigit</span><span class="op" id="2130098">(</span><span class="ident" id="2130099">d</span>&nbsp;<span class="op" id="2130101">*</span><span class="ident" id="2130102">decimalSlice</span><span class="op" id="2130114">,</span>&nbsp;<span class="ident" id="2130116">currentDiff</span><span class="op" id="2130127">,</span>&nbsp;<span class="ident" id="2130129">targetDiff</span><span class="op" id="2130139">,</span>&nbsp;<span class="ident" id="2130141">maxDiff</span><span class="op" id="2130148">,</span>&nbsp;<span class="ident" id="2130150">ulpDecimal</span><span class="op" id="2130160">,</span>&nbsp;<span class="ident" id="2130162">ulpBinary</span>&nbsp;<span class="builtintype" id="2130172">uint64</span><span class="op" id="2130178">)</span>&nbsp;<span class="builtintype" id="2130180">bool</span>&nbsp;<span class="op" id="2130185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130188">if</span>&nbsp;<span class="ident" id="2130191">ulpDecimal</span>&nbsp;<span class="op" id="2130202">&lt;</span>&nbsp;<span class="num" id="2130204">2</span><span class="op" id="2130205">*</span><span class="ident" id="2130206">ulpBinary</span>&nbsp;<span class="op" id="2130216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2130220">//&nbsp;Approximation&nbsp;is&nbsp;too&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130252">return</span>&nbsp;<span class="builtintype" id="2130259">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2130266">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130269">for</span>&nbsp;<span class="ident" id="2130273">currentDiff</span><span class="op" id="2130284">+</span><span class="ident" id="2130285">ulpDecimal</span><span class="op" id="2130295">/</span><span class="num" id="2130296">2</span><span class="op" id="2130297">+</span><span class="ident" id="2130298">ulpBinary</span>&nbsp;<span class="op" id="2130308">&lt;</span>&nbsp;<span class="ident" id="2130310">targetDiff</span>&nbsp;<span class="op" id="2130321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130325">d</span><span class="op" id="2130326">.</span><span class="ident" id="2130327">d</span><span class="op" id="2130328">[</span><span class="ident" id="2130329">d</span><span class="op" id="2130330">.</span><span class="ident" id="2130331">nd</span><span class="op" id="2130333">-</span><span class="num" id="2130334">1</span><span class="op" id="2130335">]</span><span class="op" id="2130336">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130341">currentDiff</span>&nbsp;<span class="op" id="2130353">+=</span>&nbsp;<span class="ident" id="2130356">ulpDecimal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2130368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130371">if</span>&nbsp;<span class="ident" id="2130374">currentDiff</span><span class="op" id="2130385">+</span><span class="ident" id="2130386">ulpDecimal</span>&nbsp;<span class="op" id="2130397">&lt;=</span>&nbsp;<span class="ident" id="2130400">targetDiff</span><span class="op" id="2130410">+</span><span class="ident" id="2130411">ulpDecimal</span><span class="op" id="2130421">/</span><span class="num" id="2130422">2</span><span class="op" id="2130423">+</span><span class="ident" id="2130424">ulpBinary</span>&nbsp;<span class="op" id="2130434">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2130438">//&nbsp;we&nbsp;have&nbsp;two&nbsp;choices,&nbsp;and&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;to&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130491">return</span>&nbsp;<span class="builtintype" id="2130498">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2130505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130508">if</span>&nbsp;<span class="ident" id="2130511">currentDiff</span>&nbsp;<span class="op" id="2130523">&lt;</span>&nbsp;<span class="ident" id="2130525">ulpBinary</span>&nbsp;<span class="op" id="2130535">||</span>&nbsp;<span class="ident" id="2130538">currentDiff</span>&nbsp;<span class="op" id="2130550">&gt;</span>&nbsp;<span class="ident" id="2130552">maxDiff</span><span class="op" id="2130559">-</span><span class="ident" id="2130560">ulpBinary</span>&nbsp;<span class="op" id="2130570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2130574">//&nbsp;we&nbsp;went&nbsp;too&nbsp;far</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130595">return</span>&nbsp;<span class="builtintype" id="2130602">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2130609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130612">if</span>&nbsp;<span class="ident" id="2130615">d</span><span class="op" id="2130616">.</span><span class="ident" id="2130617">nd</span>&nbsp;<span class="op" id="2130620">==</span>&nbsp;<span class="num" id="2130623">1</span>&nbsp;<span class="op" id="2130625">&amp;&amp;</span>&nbsp;<span class="ident" id="2130628">d</span><span class="op" id="2130629">.</span><span class="ident" id="2130630">d</span><span class="op" id="2130631">[</span><span class="num" id="2130632">0</span><span class="op" id="2130633">]</span>&nbsp;<span class="op" id="2130635">==</span>&nbsp;<span class="string" id="2130638">&#39;0&#39;</span>&nbsp;<span class="op" id="2130642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2130646">//&nbsp;the&nbsp;number&nbsp;has&nbsp;actually&nbsp;reached&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130689">d</span><span class="op" id="2130690">.</span><span class="ident" id="2130691">nd</span>&nbsp;<span class="op" id="2130694">=</span>&nbsp;<span class="num" id="2130696">0</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2130700">d</span><span class="op" id="2130701">.</span><span class="ident" id="2130702">dp</span>&nbsp;<span class="op" id="2130705">=</span>&nbsp;<span class="num" id="2130707">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2130710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2130713">return</span>&nbsp;<span class="builtintype" id="2130720">true</span><br>
<span class="lineno"></span><span class="op" id="2130725">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
