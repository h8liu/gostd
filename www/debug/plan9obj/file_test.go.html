<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7345677">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7345733">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7345787">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7345838">package</span>&nbsp;<span class="ident" id="7345846">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7345856">import</span>&nbsp;<span class="op" id="7345863">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7345866">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7345877">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7345887">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7345890">type</span>&nbsp;<span class="ident" id="7345895">fileTest</span>&nbsp;<span class="keyword" id="7345904">struct</span>&nbsp;<span class="op" id="7345911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345914">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7345923">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345931">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7345940"><a href="/debug/plan9obj/file.go.html#5238840">FileHeader</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7345952">sections</span>&nbsp;<span class="op" id="7345961">[</span><span class="op" id="7345962">]</span><span class="op" id="7345963">*</span><span class="ident" id="7345964"><a href="/debug/plan9obj/file.go.html#5239266">SectionHeader</a></span><br>
<span class="lineno"></span><span class="op" id="7345978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7345981">var</span>&nbsp;<span class="ident" id="7345985">fileTests</span>&nbsp;<span class="op" id="7345995">=</span>&nbsp;<span class="op" id="7345997">[</span><span class="op" id="7345998">]</span><span class="ident" id="7345999"><a href="/debug/plan9obj/file_test.go.html#7345895">fileTest</a></span><span class="op" id="7346007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346010">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7346014">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="7346039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346043"><a href="/debug/plan9obj/file.go.html#5238840">FileHeader</a></span><span class="op" id="7346053">{</span><span class="ident" id="7346054"><a href="/debug/plan9obj/plan9obj.go.html#5246101">Magic386</a></span><span class="op" id="7346062">,</span>&nbsp;<span class="num" id="7346064">0x324</span><span class="op" id="7346069">,</span>&nbsp;<span class="num" id="7346071">0x14</span><span class="op" id="7346075">,</span>&nbsp;<span class="num" id="7346077">4</span><span class="op" id="7346078">,</span>&nbsp;<span class="num" id="7346080">0x1000</span><span class="op" id="7346086">,</span>&nbsp;<span class="num" id="7346088">32</span><span class="op" id="7346090">}</span><span class="op" id="7346091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346095">[</span><span class="op" id="7346096">]</span><span class="op" id="7346097">*</span><span class="ident" id="7346098"><a href="/debug/plan9obj/file.go.html#5239266">SectionHeader</a></span><span class="op" id="7346111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346116">{</span><span class="string" id="7346117">&#34;text&#34;</span><span class="op" id="7346123">,</span>&nbsp;<span class="num" id="7346125">0x4c5f</span><span class="op" id="7346131">,</span>&nbsp;<span class="num" id="7346133">0x20</span><span class="op" id="7346137">}</span><span class="op" id="7346138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346143">{</span><span class="string" id="7346144">&#34;data&#34;</span><span class="op" id="7346150">,</span>&nbsp;<span class="num" id="7346152">0x94c</span><span class="op" id="7346157">,</span>&nbsp;<span class="num" id="7346159">0x4c7f</span><span class="op" id="7346165">}</span><span class="op" id="7346166">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346171">{</span><span class="string" id="7346172">&#34;syms&#34;</span><span class="op" id="7346178">,</span>&nbsp;<span class="num" id="7346180">0x2c2b</span><span class="op" id="7346186">,</span>&nbsp;<span class="num" id="7346188">0x55cb</span><span class="op" id="7346194">}</span><span class="op" id="7346195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346200">{</span><span class="string" id="7346201">&#34;spsz&#34;</span><span class="op" id="7346207">,</span>&nbsp;<span class="num" id="7346209">0x0</span><span class="op" id="7346212">,</span>&nbsp;<span class="num" id="7346214">0x81f6</span><span class="op" id="7346220">}</span><span class="op" id="7346221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346226">{</span><span class="string" id="7346227">&#34;pcsz&#34;</span><span class="op" id="7346233">,</span>&nbsp;<span class="num" id="7346235">0xf7a</span><span class="op" id="7346240">,</span>&nbsp;<span class="num" id="7346242">0x81f6</span><span class="op" id="7346248">}</span><span class="op" id="7346249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346253">}</span><span class="op" id="7346254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346257">}</span><span class="op" id="7346258">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7346265">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="7346292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346296"><a href="/debug/plan9obj/file.go.html#5238840">FileHeader</a></span><span class="op" id="7346306">{</span><span class="ident" id="7346307"><a href="/debug/plan9obj/plan9obj.go.html#5246131">MagicAMD64</a></span><span class="op" id="7346317">,</span>&nbsp;<span class="num" id="7346319">0x618</span><span class="op" id="7346324">,</span>&nbsp;<span class="num" id="7346326">0x13</span><span class="op" id="7346330">,</span>&nbsp;<span class="num" id="7346332">8</span><span class="op" id="7346333">,</span>&nbsp;<span class="num" id="7346335">0x200000</span><span class="op" id="7346343">,</span>&nbsp;<span class="num" id="7346345">40</span><span class="op" id="7346347">}</span><span class="op" id="7346348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346352">[</span><span class="op" id="7346353">]</span><span class="op" id="7346354">*</span><span class="ident" id="7346355"><a href="/debug/plan9obj/file.go.html#5239266">SectionHeader</a></span><span class="op" id="7346368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346373">{</span><span class="string" id="7346374">&#34;text&#34;</span><span class="op" id="7346380">,</span>&nbsp;<span class="num" id="7346382">0x4213</span><span class="op" id="7346388">,</span>&nbsp;<span class="num" id="7346390">0x28</span><span class="op" id="7346394">}</span><span class="op" id="7346395">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346400">{</span><span class="string" id="7346401">&#34;data&#34;</span><span class="op" id="7346407">,</span>&nbsp;<span class="num" id="7346409">0xa80</span><span class="op" id="7346414">,</span>&nbsp;<span class="num" id="7346416">0x423b</span><span class="op" id="7346422">}</span><span class="op" id="7346423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346428">{</span><span class="string" id="7346429">&#34;syms&#34;</span><span class="op" id="7346435">,</span>&nbsp;<span class="num" id="7346437">0x2c8c</span><span class="op" id="7346443">,</span>&nbsp;<span class="num" id="7346445">0x4cbb</span><span class="op" id="7346451">}</span><span class="op" id="7346452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346457">{</span><span class="string" id="7346458">&#34;spsz&#34;</span><span class="op" id="7346464">,</span>&nbsp;<span class="num" id="7346466">0x0</span><span class="op" id="7346469">,</span>&nbsp;<span class="num" id="7346471">0x7947</span><span class="op" id="7346477">}</span><span class="op" id="7346478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346483">{</span><span class="string" id="7346484">&#34;pcsz&#34;</span><span class="op" id="7346490">,</span>&nbsp;<span class="num" id="7346492">0xca0</span><span class="op" id="7346497">,</span>&nbsp;<span class="num" id="7346499">0x7947</span><span class="op" id="7346505">}</span><span class="op" id="7346506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346510">}</span><span class="op" id="7346511">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346514">}</span><span class="op" id="7346515">,</span><br>
<span class="lineno"></span><span class="op" id="7346517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7346520">func</span>&nbsp;<span class="ident" id="7346525">TestOpen</span><span class="op" id="7346533">(</span><span class="ident" id="7346534">t</span>&nbsp;<span class="op" id="7346536">*</span><span class="ident" id="7346537"><a href="/debug/plan9obj/file_test.go.html#7345877">testing</a></span><span class="op" id="7346544">.</span><span class="ident" id="7346545">T</span><span class="op" id="7346546">)</span>&nbsp;<span class="op" id="7346548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346551">for</span>&nbsp;<span class="ident" id="7346555">i</span>&nbsp;<span class="op" id="7346557">:=</span>&nbsp;<span class="keyword" id="7346560">range</span>&nbsp;<span class="ident" id="7346566"><a href="/debug/plan9obj/file_test.go.html#7345985">fileTests</a></span>&nbsp;<span class="op" id="7346576">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346580">tt</span>&nbsp;<span class="op" id="7346583">:=</span>&nbsp;<span class="op" id="7346586">&amp;</span><span class="ident" id="7346587"><a href="/debug/plan9obj/file_test.go.html#7345985">fileTests</a></span><span class="op" id="7346596">[</span><span class="ident" id="7346597"><a href="/debug/plan9obj/file_test.go.html#7346555">i</a></span><span class="op" id="7346598">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346603">f</span><span class="op" id="7346604">,</span>&nbsp;<span class="ident" id="7346606">err</span>&nbsp;<span class="op" id="7346610">:=</span>&nbsp;<span class="ident" id="7346613"><a href="/debug/plan9obj/file.go.html#5240728">Open</a></span><span class="op" id="7346617">(</span><span class="ident" id="7346618"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346620">.</span><span class="ident" id="7346621">file</span><span class="op" id="7346625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346629">if</span>&nbsp;<span class="ident" id="7346632"><a href="/debug/plan9obj/file_test.go.html#7346606">err</a></span>&nbsp;<span class="op" id="7346636">!=</span>&nbsp;<span class="ident" id="7346639">nil</span>&nbsp;<span class="op" id="7346643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346648"><a href="/debug/plan9obj/file_test.go.html#7346534">t</a></span><span class="op" id="7346649">.</span><span class="ident" id="7346650">Error</span><span class="op" id="7346655">(</span><span class="ident" id="7346656"><a href="/debug/plan9obj/file_test.go.html#7346606">err</a></span><span class="op" id="7346659">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346679">if</span>&nbsp;<span class="op" id="7346682">!</span><span class="ident" id="7346683"><a href="/debug/plan9obj/file_test.go.html#7345866">reflect</a></span><span class="op" id="7346690">.</span><span class="ident" id="7346691">DeepEqual</span><span class="op" id="7346700">(</span><span class="ident" id="7346701"><a href="/debug/plan9obj/file_test.go.html#7346603">f</a></span><span class="op" id="7346702">.</span><span class="ident" id="7346703">FileHeader</span><span class="op" id="7346713">,</span>&nbsp;<span class="ident" id="7346715"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346717">.</span><span class="ident" id="7346718">hdr</span><span class="op" id="7346721">)</span>&nbsp;<span class="op" id="7346723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346728"><a href="/debug/plan9obj/file_test.go.html#7346534">t</a></span><span class="op" id="7346729">.</span><span class="ident" id="7346730">Errorf</span><span class="op" id="7346736">(</span><span class="string" id="7346737">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7346773">,</span>&nbsp;<span class="ident" id="7346775"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346777">.</span><span class="ident" id="7346778">file</span><span class="op" id="7346782">,</span>&nbsp;<span class="ident" id="7346784"><a href="/debug/plan9obj/file_test.go.html#7346603">f</a></span><span class="op" id="7346785">.</span><span class="ident" id="7346786">FileHeader</span><span class="op" id="7346796">,</span>&nbsp;<span class="ident" id="7346798"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346800">.</span><span class="ident" id="7346801">hdr</span><span class="op" id="7346804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346809">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346825">for</span>&nbsp;<span class="ident" id="7346829">i</span><span class="op" id="7346830">,</span>&nbsp;<span class="ident" id="7346832">sh</span>&nbsp;<span class="op" id="7346835">:=</span>&nbsp;<span class="keyword" id="7346838">range</span>&nbsp;<span class="ident" id="7346844"><a href="/debug/plan9obj/file_test.go.html#7346603">f</a></span><span class="op" id="7346845">.</span><span class="ident" id="7346846">Sections</span>&nbsp;<span class="op" id="7346855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346860">if</span>&nbsp;<span class="ident" id="7346863"><a href="/debug/plan9obj/file_test.go.html#7346829">i</a></span>&nbsp;<span class="op" id="7346865">&gt;=</span>&nbsp;<span class="builtinfunc" id="7346868">len</span><span class="op" id="7346871">(</span><span class="ident" id="7346872"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346874">.</span><span class="ident" id="7346875">sections</span><span class="op" id="7346883">)</span>&nbsp;<span class="op" id="7346885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346891">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346905">have</span>&nbsp;<span class="op" id="7346910">:=</span>&nbsp;<span class="op" id="7346913">&amp;</span><span class="ident" id="7346914"><a href="/debug/plan9obj/file_test.go.html#7346832">sh</a></span><span class="op" id="7346916">.</span><span class="ident" id="7346917">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7346934">want</span>&nbsp;<span class="op" id="7346939">:=</span>&nbsp;<span class="ident" id="7346942"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7346944">.</span><span class="ident" id="7346945">sections</span><span class="op" id="7346953">[</span><span class="ident" id="7346954"><a href="/debug/plan9obj/file_test.go.html#7346829">i</a></span><span class="op" id="7346955">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7346960">if</span>&nbsp;<span class="op" id="7346963">!</span><span class="ident" id="7346964"><a href="/debug/plan9obj/file_test.go.html#7345866">reflect</a></span><span class="op" id="7346971">.</span><span class="ident" id="7346972">DeepEqual</span><span class="op" id="7346981">(</span><span class="ident" id="7346982"><a href="/debug/plan9obj/file_test.go.html#7346905">have</a></span><span class="op" id="7346986">,</span>&nbsp;<span class="ident" id="7346988"><a href="/debug/plan9obj/file_test.go.html#7346934">want</a></span><span class="op" id="7346992">)</span>&nbsp;<span class="op" id="7346994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347000"><a href="/debug/plan9obj/file_test.go.html#7346534">t</a></span><span class="op" id="7347001">.</span><span class="ident" id="7347002">Errorf</span><span class="op" id="7347008">(</span><span class="string" id="7347009">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7347057">,</span>&nbsp;<span class="ident" id="7347059"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7347061">.</span><span class="ident" id="7347062">file</span><span class="op" id="7347066">,</span>&nbsp;<span class="ident" id="7347068"><a href="/debug/plan9obj/file_test.go.html#7346829">i</a></span><span class="op" id="7347069">,</span>&nbsp;<span class="ident" id="7347071"><a href="/debug/plan9obj/file_test.go.html#7346905">have</a></span><span class="op" id="7347075">,</span>&nbsp;<span class="ident" id="7347077"><a href="/debug/plan9obj/file_test.go.html#7346934">want</a></span><span class="op" id="7347081">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347094">tn</span>&nbsp;<span class="op" id="7347097">:=</span>&nbsp;<span class="builtinfunc" id="7347100">len</span><span class="op" id="7347103">(</span><span class="ident" id="7347104"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7347106">.</span><span class="ident" id="7347107">sections</span><span class="op" id="7347115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347119">fn</span>&nbsp;<span class="op" id="7347122">:=</span>&nbsp;<span class="builtinfunc" id="7347125">len</span><span class="op" id="7347128">(</span><span class="ident" id="7347129"><a href="/debug/plan9obj/file_test.go.html#7346603">f</a></span><span class="op" id="7347130">.</span><span class="ident" id="7347131">Sections</span><span class="op" id="7347139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347143">if</span>&nbsp;<span class="ident" id="7347146"><a href="/debug/plan9obj/file_test.go.html#7347094">tn</a></span>&nbsp;<span class="op" id="7347149">!=</span>&nbsp;<span class="ident" id="7347152"><a href="/debug/plan9obj/file_test.go.html#7347119">fn</a></span>&nbsp;<span class="op" id="7347155">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347160"><a href="/debug/plan9obj/file_test.go.html#7346534">t</a></span><span class="op" id="7347161">.</span><span class="ident" id="7347162">Errorf</span><span class="op" id="7347168">(</span><span class="string" id="7347169">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7347207">,</span>&nbsp;<span class="ident" id="7347209"><a href="/debug/plan9obj/file_test.go.html#7346580">tt</a></span><span class="op" id="7347211">.</span><span class="ident" id="7347212">file</span><span class="op" id="7347216">,</span>&nbsp;<span class="ident" id="7347218"><a href="/debug/plan9obj/file_test.go.html#7347119">fn</a></span><span class="op" id="7347220">,</span>&nbsp;<span class="ident" id="7347222"><a href="/debug/plan9obj/file_test.go.html#7347094">tn</a></span><span class="op" id="7347224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347231">}</span><br>
<span class="lineno"></span><span class="op" id="7347233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7347236">func</span>&nbsp;<span class="ident" id="7347241">TestOpenFailure</span><span class="op" id="7347256">(</span><span class="ident" id="7347257">t</span>&nbsp;<span class="op" id="7347259">*</span><span class="ident" id="7347260"><a href="/debug/plan9obj/file_test.go.html#7345877">testing</a></span><span class="op" id="7347267">.</span><span class="ident" id="7347268">T</span><span class="op" id="7347269">)</span>&nbsp;<span class="op" id="7347271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347274">filename</span>&nbsp;<span class="op" id="7347283">:=</span>&nbsp;<span class="string" id="7347286">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7347299">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347327">_</span><span class="op" id="7347328">,</span>&nbsp;<span class="ident" id="7347330">err</span>&nbsp;<span class="op" id="7347334">:=</span>&nbsp;<span class="ident" id="7347337"><a href="/debug/plan9obj/file.go.html#5240728">Open</a></span><span class="op" id="7347341">(</span><span class="ident" id="7347342"><a href="/debug/plan9obj/file_test.go.html#7347274">filename</a></span><span class="op" id="7347350">)</span>&nbsp;<span class="comment" id="7347352">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7347368">if</span>&nbsp;<span class="ident" id="7347371"><a href="/debug/plan9obj/file_test.go.html#7347330">err</a></span>&nbsp;<span class="op" id="7347375">==</span>&nbsp;<span class="ident" id="7347378">nil</span>&nbsp;<span class="op" id="7347382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7347386"><a href="/debug/plan9obj/file_test.go.html#7347257">t</a></span><span class="op" id="7347387">.</span><span class="ident" id="7347388">Errorf</span><span class="op" id="7347394">(</span><span class="string" id="7347395">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="7347428">,</span>&nbsp;<span class="ident" id="7347430"><a href="/debug/plan9obj/file_test.go.html#7347274">filename</a></span><span class="op" id="7347438">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7347441">}</span><br>
<span class="lineno"></span><span class="op" id="7347443">}</span>
</div>
</body>
</html>
