<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8418615">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8418671">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8418725">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8418776">package</span>&nbsp;<span class="ident" id="8418784">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8418790">import</span>&nbsp;<span class="op" id="8418797">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8418800">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8418809">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8418827">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8418833">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8418843">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8418846">func</span>&nbsp;<span class="ident" id="8418851">TestRead</span><span class="op" id="8418859">(</span><span class="ident" id="8418860">t</span>&nbsp;<span class="op" id="8418862">*</span><span class="ident" id="8418863">testing</span><span class="op" id="8418870">.</span><span class="ident" id="8418871">T</span><span class="op" id="8418872">)</span>&nbsp;<span class="op" id="8418874">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8418877">var</span>&nbsp;<span class="ident" id="8418881">n</span>&nbsp;<span class="builtintype" id="8418883">int</span>&nbsp;<span class="op" id="8418887">=</span>&nbsp;<span class="num" id="8418889">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8418894">if</span>&nbsp;<span class="ident" id="8418897">testing</span><span class="op" id="8418904">.</span><span class="ident" id="8418905">Short</span><span class="op" id="8418910">(</span><span class="op" id="8418911">)</span>&nbsp;<span class="op" id="8418913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8418917">n</span>&nbsp;<span class="op" id="8418919">=</span>&nbsp;<span class="num" id="8418921">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8418926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8418929">b</span>&nbsp;<span class="op" id="8418931">:=</span>&nbsp;<span class="builtinfunc" id="8418934">make</span><span class="op" id="8418938">(</span><span class="op" id="8418939">[</span><span class="op" id="8418940">]</span><span class="builtintype" id="8418941">byte</span><span class="op" id="8418945">,</span>&nbsp;<span class="ident" id="8418947">n</span><span class="op" id="8418948">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8418951">n</span><span class="op" id="8418952">,</span>&nbsp;<span class="ident" id="8418954">err</span>&nbsp;<span class="op" id="8418958">:=</span>&nbsp;<span class="ident" id="8418961">io</span><span class="op" id="8418963">.</span><span class="ident" id="8418964">ReadFull</span><span class="op" id="8418972">(</span><span class="ident" id="8418973">Reader</span><span class="op" id="8418979">,</span>&nbsp;<span class="ident" id="8418981">b</span><span class="op" id="8418982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8418985">if</span>&nbsp;<span class="ident" id="8418988">n</span>&nbsp;<span class="op" id="8418990">!=</span>&nbsp;<span class="builtinfunc" id="8418993">len</span><span class="op" id="8418996">(</span><span class="ident" id="8418997">b</span><span class="op" id="8418998">)</span>&nbsp;<span class="op" id="8419000">||</span>&nbsp;<span class="ident" id="8419003">err</span>&nbsp;<span class="op" id="8419007">!=</span>&nbsp;<span class="ident" id="8419010">nil</span>&nbsp;<span class="op" id="8419014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419018">t</span><span class="op" id="8419019">.</span><span class="ident" id="8419020">Fatalf</span><span class="op" id="8419026">(</span><span class="string" id="8419027">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8419051">,</span>&nbsp;<span class="ident" id="8419053">n</span><span class="op" id="8419054">,</span>&nbsp;<span class="ident" id="8419056">err</span><span class="op" id="8419059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8419062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8419066">var</span>&nbsp;<span class="ident" id="8419070">z</span>&nbsp;<span class="ident" id="8419072">bytes</span><span class="op" id="8419077">.</span><span class="ident" id="8419078">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419086">f</span><span class="op" id="8419087">,</span>&nbsp;<span class="ident" id="8419089">_</span>&nbsp;<span class="op" id="8419091">:=</span>&nbsp;<span class="ident" id="8419094">flate</span><span class="op" id="8419099">.</span><span class="ident" id="8419100">NewWriter</span><span class="op" id="8419109">(</span><span class="op" id="8419110">&amp;</span><span class="ident" id="8419111">z</span><span class="op" id="8419112">,</span>&nbsp;<span class="num" id="8419114">5</span><span class="op" id="8419115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419118">f</span><span class="op" id="8419119">.</span><span class="ident" id="8419120">Write</span><span class="op" id="8419125">(</span><span class="ident" id="8419126">b</span><span class="op" id="8419127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419130">f</span><span class="op" id="8419131">.</span><span class="ident" id="8419132">Close</span><span class="op" id="8419137">(</span><span class="op" id="8419138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8419141">if</span>&nbsp;<span class="ident" id="8419144">z</span><span class="op" id="8419145">.</span><span class="ident" id="8419146">Len</span><span class="op" id="8419149">(</span><span class="op" id="8419150">)</span>&nbsp;<span class="op" id="8419152">&lt;</span>&nbsp;<span class="builtinfunc" id="8419154">len</span><span class="op" id="8419157">(</span><span class="ident" id="8419158">b</span><span class="op" id="8419159">)</span><span class="op" id="8419160">*</span><span class="num" id="8419161">99</span><span class="op" id="8419163">/</span><span class="num" id="8419164">100</span>&nbsp;<span class="op" id="8419168">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419172">t</span><span class="op" id="8419173">.</span><span class="ident" id="8419174">Fatalf</span><span class="op" id="8419180">(</span><span class="string" id="8419181">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="8419202">,</span>&nbsp;<span class="builtinfunc" id="8419204">len</span><span class="op" id="8419207">(</span><span class="ident" id="8419208">b</span><span class="op" id="8419209">)</span><span class="op" id="8419210">,</span>&nbsp;<span class="ident" id="8419212">z</span><span class="op" id="8419213">.</span><span class="ident" id="8419214">Len</span><span class="op" id="8419217">(</span><span class="op" id="8419218">)</span><span class="op" id="8419219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8419222">}</span><br>
<span class="lineno"></span><span class="op" id="8419224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8419227">func</span>&nbsp;<span class="ident" id="8419232">TestReadEmpty</span><span class="op" id="8419245">(</span><span class="ident" id="8419246">t</span>&nbsp;<span class="op" id="8419248">*</span><span class="ident" id="8419249">testing</span><span class="op" id="8419256">.</span><span class="ident" id="8419257">T</span><span class="op" id="8419258">)</span>&nbsp;<span class="op" id="8419260">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419263">n</span><span class="op" id="8419264">,</span>&nbsp;<span class="ident" id="8419266">err</span>&nbsp;<span class="op" id="8419270">:=</span>&nbsp;<span class="ident" id="8419273">Reader</span><span class="op" id="8419279">.</span><span class="ident" id="8419280">Read</span><span class="op" id="8419284">(</span><span class="builtinfunc" id="8419285">make</span><span class="op" id="8419289">(</span><span class="op" id="8419290">[</span><span class="op" id="8419291">]</span><span class="builtintype" id="8419292">byte</span><span class="op" id="8419296">,</span>&nbsp;<span class="num" id="8419298">0</span><span class="op" id="8419299">)</span><span class="op" id="8419300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8419303">if</span>&nbsp;<span class="ident" id="8419306">n</span>&nbsp;<span class="op" id="8419308">!=</span>&nbsp;<span class="num" id="8419311">0</span>&nbsp;<span class="op" id="8419313">||</span>&nbsp;<span class="ident" id="8419316">err</span>&nbsp;<span class="op" id="8419320">!=</span>&nbsp;<span class="ident" id="8419323">nil</span>&nbsp;<span class="op" id="8419327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419331">t</span><span class="op" id="8419332">.</span><span class="ident" id="8419333">Fatalf</span><span class="op" id="8419339">(</span><span class="string" id="8419340">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="8419372">,</span>&nbsp;<span class="ident" id="8419374">n</span><span class="op" id="8419375">,</span>&nbsp;<span class="ident" id="8419377">err</span><span class="op" id="8419380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8419383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419386">n</span><span class="op" id="8419387">,</span>&nbsp;<span class="ident" id="8419389">err</span>&nbsp;<span class="op" id="8419393">=</span>&nbsp;<span class="ident" id="8419395">Reader</span><span class="op" id="8419401">.</span><span class="ident" id="8419402">Read</span><span class="op" id="8419406">(</span><span class="ident" id="8419407">nil</span><span class="op" id="8419410">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8419413">if</span>&nbsp;<span class="ident" id="8419416">n</span>&nbsp;<span class="op" id="8419418">!=</span>&nbsp;<span class="num" id="8419421">0</span>&nbsp;<span class="op" id="8419423">||</span>&nbsp;<span class="ident" id="8419426">err</span>&nbsp;<span class="op" id="8419430">!=</span>&nbsp;<span class="ident" id="8419433">nil</span>&nbsp;<span class="op" id="8419437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8419441">t</span><span class="op" id="8419442">.</span><span class="ident" id="8419443">Fatalf</span><span class="op" id="8419449">(</span><span class="string" id="8419450">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="8419470">,</span>&nbsp;<span class="ident" id="8419472">n</span><span class="op" id="8419473">,</span>&nbsp;<span class="ident" id="8419475">err</span><span class="op" id="8419478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8419481">}</span><br>
<span class="lineno"></span><span class="op" id="8419483">}</span>
</div>
</body>
</html>
