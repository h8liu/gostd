<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html" class="current">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4006557">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4006613">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4006667">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4006718">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4006783">package</span>&nbsp;<span class="ident" id="4006791">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4006796">import</span>&nbsp;<span class="op" id="4006803">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4006806">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4006812">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="4006822">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4006825">func</span>&nbsp;<span class="ident" id="4006830">joinIPv4Group</span><span class="op" id="4006843">(</span><span class="ident" id="4006844">fd</span>&nbsp;<span class="op" id="4006847">*</span><span class="ident" id="4006848">netFD</span><span class="op" id="4006853">,</span>&nbsp;<span class="ident" id="4006855">ifi</span>&nbsp;<span class="op" id="4006859">*</span><span class="ident" id="4006860">Interface</span><span class="op" id="4006869">,</span>&nbsp;<span class="ident" id="4006871">ip</span>&nbsp;<span class="ident" id="4006874">IP</span><span class="op" id="4006876">)</span>&nbsp;<span class="builtintype" id="4006878">error</span>&nbsp;<span class="op" id="4006884">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4006887">mreq</span>&nbsp;<span class="op" id="4006892">:=</span>&nbsp;<span class="op" id="4006895">&amp;</span><span class="ident" id="4006896">syscall</span><span class="op" id="4006903">.</span><span class="ident" id="4006904">IPMreq</span><span class="op" id="4006910">{</span><span class="ident" id="4006911">Multiaddr</span><span class="op" id="4006920">:</span>&nbsp;<span class="op" id="4006922">[</span><span class="num" id="4006923">4</span><span class="op" id="4006924">]</span><span class="builtintype" id="4006925">byte</span><span class="op" id="4006929">{</span><span class="ident" id="4006930">ip</span><span class="op" id="4006932">[</span><span class="num" id="4006933">0</span><span class="op" id="4006934">]</span><span class="op" id="4006935">,</span>&nbsp;<span class="ident" id="4006937">ip</span><span class="op" id="4006939">[</span><span class="num" id="4006940">1</span><span class="op" id="4006941">]</span><span class="op" id="4006942">,</span>&nbsp;<span class="ident" id="4006944">ip</span><span class="op" id="4006946">[</span><span class="num" id="4006947">2</span><span class="op" id="4006948">]</span><span class="op" id="4006949">,</span>&nbsp;<span class="ident" id="4006951">ip</span><span class="op" id="4006953">[</span><span class="num" id="4006954">3</span><span class="op" id="4006955">]</span><span class="op" id="4006956">}</span><span class="op" id="4006957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4006960">if</span>&nbsp;<span class="ident" id="4006963">err</span>&nbsp;<span class="op" id="4006967">:=</span>&nbsp;<span class="ident" id="4006970">setIPv4MreqToInterface</span><span class="op" id="4006992">(</span><span class="ident" id="4006993">mreq</span><span class="op" id="4006997">,</span>&nbsp;<span class="ident" id="4006999">ifi</span><span class="op" id="4007002">)</span><span class="op" id="4007003">;</span>&nbsp;<span class="ident" id="4007005">err</span>&nbsp;<span class="op" id="4007009">!=</span>&nbsp;<span class="builtintype" id="4007012">nil</span>&nbsp;<span class="op" id="4007016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007020">return</span>&nbsp;<span class="ident" id="4007027">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007035">if</span>&nbsp;<span class="ident" id="4007038">err</span>&nbsp;<span class="op" id="4007042">:=</span>&nbsp;<span class="ident" id="4007045">fd</span><span class="op" id="4007047">.</span><span class="ident" id="4007048">incref</span><span class="op" id="4007054">(</span><span class="op" id="4007055">)</span><span class="op" id="4007056">;</span>&nbsp;<span class="ident" id="4007058">err</span>&nbsp;<span class="op" id="4007062">!=</span>&nbsp;<span class="builtintype" id="4007065">nil</span>&nbsp;<span class="op" id="4007069">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007073">return</span>&nbsp;<span class="ident" id="4007080">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007088">defer</span>&nbsp;<span class="ident" id="4007094">fd</span><span class="op" id="4007096">.</span><span class="ident" id="4007097">decref</span><span class="op" id="4007103">(</span><span class="op" id="4007104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007107">return</span>&nbsp;<span class="ident" id="4007114">os</span><span class="op" id="4007116">.</span><span class="ident" id="4007117">NewSyscallError</span><span class="op" id="4007132">(</span><span class="string" id="4007133">&#34;setsockopt&#34;</span><span class="op" id="4007145">,</span>&nbsp;<span class="ident" id="4007147">syscall</span><span class="op" id="4007154">.</span><span class="ident" id="4007155">SetsockoptIPMreq</span><span class="op" id="4007171">(</span><span class="ident" id="4007172">fd</span><span class="op" id="4007174">.</span><span class="ident" id="4007175">sysfd</span><span class="op" id="4007180">,</span>&nbsp;<span class="ident" id="4007182">syscall</span><span class="op" id="4007189">.</span><span class="ident" id="4007190">IPPROTO_IP</span><span class="op" id="4007200">,</span>&nbsp;<span class="ident" id="4007202">syscall</span><span class="op" id="4007209">.</span><span class="ident" id="4007210">IP_ADD_MEMBERSHIP</span><span class="op" id="4007227">,</span>&nbsp;<span class="ident" id="4007229">mreq</span><span class="op" id="4007233">)</span><span class="op" id="4007234">)</span><br>
<span class="lineno"></span><span class="op" id="4007236">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4007239">func</span>&nbsp;<span class="ident" id="4007244">setIPv6MulticastInterface</span><span class="op" id="4007269">(</span><span class="ident" id="4007270">fd</span>&nbsp;<span class="op" id="4007273">*</span><span class="ident" id="4007274">netFD</span><span class="op" id="4007279">,</span>&nbsp;<span class="ident" id="4007281">ifi</span>&nbsp;<span class="op" id="4007285">*</span><span class="ident" id="4007286">Interface</span><span class="op" id="4007295">)</span>&nbsp;<span class="builtintype" id="4007297">error</span>&nbsp;<span class="op" id="4007303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007306">var</span>&nbsp;<span class="ident" id="4007310">v</span>&nbsp;<span class="builtintype" id="4007312">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007317">if</span>&nbsp;<span class="ident" id="4007320">ifi</span>&nbsp;<span class="op" id="4007324">!=</span>&nbsp;<span class="builtintype" id="4007327">nil</span>&nbsp;<span class="op" id="4007331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4007335">v</span>&nbsp;<span class="op" id="4007337">=</span>&nbsp;<span class="ident" id="4007339">ifi</span><span class="op" id="4007342">.</span><span class="ident" id="4007343">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007353">if</span>&nbsp;<span class="ident" id="4007356">err</span>&nbsp;<span class="op" id="4007360">:=</span>&nbsp;<span class="ident" id="4007363">fd</span><span class="op" id="4007365">.</span><span class="ident" id="4007366">incref</span><span class="op" id="4007372">(</span><span class="op" id="4007373">)</span><span class="op" id="4007374">;</span>&nbsp;<span class="ident" id="4007376">err</span>&nbsp;<span class="op" id="4007380">!=</span>&nbsp;<span class="builtintype" id="4007383">nil</span>&nbsp;<span class="op" id="4007387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007391">return</span>&nbsp;<span class="ident" id="4007398">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007406">defer</span>&nbsp;<span class="ident" id="4007412">fd</span><span class="op" id="4007414">.</span><span class="ident" id="4007415">decref</span><span class="op" id="4007421">(</span><span class="op" id="4007422">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007425">return</span>&nbsp;<span class="ident" id="4007432">os</span><span class="op" id="4007434">.</span><span class="ident" id="4007435">NewSyscallError</span><span class="op" id="4007450">(</span><span class="string" id="4007451">&#34;setsockopt&#34;</span><span class="op" id="4007463">,</span>&nbsp;<span class="ident" id="4007465">syscall</span><span class="op" id="4007472">.</span><span class="ident" id="4007473">SetsockoptInt</span><span class="op" id="4007486">(</span><span class="ident" id="4007487">fd</span><span class="op" id="4007489">.</span><span class="ident" id="4007490">sysfd</span><span class="op" id="4007495">,</span>&nbsp;<span class="ident" id="4007497">syscall</span><span class="op" id="4007504">.</span><span class="ident" id="4007505">IPPROTO_IPV6</span><span class="op" id="4007517">,</span>&nbsp;<span class="ident" id="4007519">syscall</span><span class="op" id="4007526">.</span><span class="ident" id="4007527">IPV6_MULTICAST_IF</span><span class="op" id="4007544">,</span>&nbsp;<span class="ident" id="4007546">v</span><span class="op" id="4007547">)</span><span class="op" id="4007548">)</span><br>
<span class="lineno"></span><span class="op" id="4007550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4007553">func</span>&nbsp;<span class="ident" id="4007558">setIPv6MulticastLoopback</span><span class="op" id="4007582">(</span><span class="ident" id="4007583">fd</span>&nbsp;<span class="op" id="4007586">*</span><span class="ident" id="4007587">netFD</span><span class="op" id="4007592">,</span>&nbsp;<span class="ident" id="4007594">v</span>&nbsp;<span class="builtintype" id="4007596">bool</span><span class="op" id="4007600">)</span>&nbsp;<span class="builtintype" id="4007602">error</span>&nbsp;<span class="op" id="4007608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007611">if</span>&nbsp;<span class="ident" id="4007614">err</span>&nbsp;<span class="op" id="4007618">:=</span>&nbsp;<span class="ident" id="4007621">fd</span><span class="op" id="4007623">.</span><span class="ident" id="4007624">incref</span><span class="op" id="4007630">(</span><span class="op" id="4007631">)</span><span class="op" id="4007632">;</span>&nbsp;<span class="ident" id="4007634">err</span>&nbsp;<span class="op" id="4007638">!=</span>&nbsp;<span class="builtintype" id="4007641">nil</span>&nbsp;<span class="op" id="4007645">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007649">return</span>&nbsp;<span class="ident" id="4007656">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007664">defer</span>&nbsp;<span class="ident" id="4007670">fd</span><span class="op" id="4007672">.</span><span class="ident" id="4007673">decref</span><span class="op" id="4007679">(</span><span class="op" id="4007680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007683">return</span>&nbsp;<span class="ident" id="4007690">os</span><span class="op" id="4007692">.</span><span class="ident" id="4007693">NewSyscallError</span><span class="op" id="4007708">(</span><span class="string" id="4007709">&#34;setsockopt&#34;</span><span class="op" id="4007721">,</span>&nbsp;<span class="ident" id="4007723">syscall</span><span class="op" id="4007730">.</span><span class="ident" id="4007731">SetsockoptInt</span><span class="op" id="4007744">(</span><span class="ident" id="4007745">fd</span><span class="op" id="4007747">.</span><span class="ident" id="4007748">sysfd</span><span class="op" id="4007753">,</span>&nbsp;<span class="ident" id="4007755">syscall</span><span class="op" id="4007762">.</span><span class="ident" id="4007763">IPPROTO_IPV6</span><span class="op" id="4007775">,</span>&nbsp;<span class="ident" id="4007777">syscall</span><span class="op" id="4007784">.</span><span class="ident" id="4007785">IPV6_MULTICAST_LOOP</span><span class="op" id="4007804">,</span>&nbsp;<span class="ident" id="4007806">boolint</span><span class="op" id="4007813">(</span><span class="ident" id="4007814">v</span><span class="op" id="4007815">)</span><span class="op" id="4007816">)</span><span class="op" id="4007817">)</span><br>
<span class="lineno"></span><span class="op" id="4007819">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="4007822">func</span>&nbsp;<span class="ident" id="4007827">joinIPv6Group</span><span class="op" id="4007840">(</span><span class="ident" id="4007841">fd</span>&nbsp;<span class="op" id="4007844">*</span><span class="ident" id="4007845">netFD</span><span class="op" id="4007850">,</span>&nbsp;<span class="ident" id="4007852">ifi</span>&nbsp;<span class="op" id="4007856">*</span><span class="ident" id="4007857">Interface</span><span class="op" id="4007866">,</span>&nbsp;<span class="ident" id="4007868">ip</span>&nbsp;<span class="ident" id="4007871">IP</span><span class="op" id="4007873">)</span>&nbsp;<span class="builtintype" id="4007875">error</span>&nbsp;<span class="op" id="4007881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4007884">mreq</span>&nbsp;<span class="op" id="4007889">:=</span>&nbsp;<span class="op" id="4007892">&amp;</span><span class="ident" id="4007893">syscall</span><span class="op" id="4007900">.</span><span class="ident" id="4007901">IPv6Mreq</span><span class="op" id="4007909">{</span><span class="op" id="4007910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4007913">copy</span><span class="op" id="4007917">(</span><span class="ident" id="4007918">mreq</span><span class="op" id="4007922">.</span><span class="ident" id="4007923">Multiaddr</span><span class="op" id="4007932">[</span><span class="op" id="4007933">:</span><span class="op" id="4007934">]</span><span class="op" id="4007935">,</span>&nbsp;<span class="ident" id="4007937">ip</span><span class="op" id="4007939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007942">if</span>&nbsp;<span class="ident" id="4007945">ifi</span>&nbsp;<span class="op" id="4007949">!=</span>&nbsp;<span class="builtintype" id="4007952">nil</span>&nbsp;<span class="op" id="4007956">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4007960">mreq</span><span class="op" id="4007964">.</span><span class="ident" id="4007965">Interface</span>&nbsp;<span class="op" id="4007975">=</span>&nbsp;<span class="builtintype" id="4007977">uint32</span><span class="op" id="4007983">(</span><span class="ident" id="4007984">ifi</span><span class="op" id="4007987">.</span><span class="ident" id="4007988">Index</span><span class="op" id="4007993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4007996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4007999">if</span>&nbsp;<span class="ident" id="4008002">err</span>&nbsp;<span class="op" id="4008006">:=</span>&nbsp;<span class="ident" id="4008009">fd</span><span class="op" id="4008011">.</span><span class="ident" id="4008012">incref</span><span class="op" id="4008018">(</span><span class="op" id="4008019">)</span><span class="op" id="4008020">;</span>&nbsp;<span class="ident" id="4008022">err</span>&nbsp;<span class="op" id="4008026">!=</span>&nbsp;<span class="builtintype" id="4008029">nil</span>&nbsp;<span class="op" id="4008033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4008037">return</span>&nbsp;<span class="ident" id="4008044">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4008049">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4008052">defer</span>&nbsp;<span class="ident" id="4008058">fd</span><span class="op" id="4008060">.</span><span class="ident" id="4008061">decref</span><span class="op" id="4008067">(</span><span class="op" id="4008068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4008071">return</span>&nbsp;<span class="ident" id="4008078">os</span><span class="op" id="4008080">.</span><span class="ident" id="4008081">NewSyscallError</span><span class="op" id="4008096">(</span><span class="string" id="4008097">&#34;setsockopt&#34;</span><span class="op" id="4008109">,</span>&nbsp;<span class="ident" id="4008111">syscall</span><span class="op" id="4008118">.</span><span class="ident" id="4008119">SetsockoptIPv6Mreq</span><span class="op" id="4008137">(</span><span class="ident" id="4008138">fd</span><span class="op" id="4008140">.</span><span class="ident" id="4008141">sysfd</span><span class="op" id="4008146">,</span>&nbsp;<span class="ident" id="4008148">syscall</span><span class="op" id="4008155">.</span><span class="ident" id="4008156">IPPROTO_IPV6</span><span class="op" id="4008168">,</span>&nbsp;<span class="ident" id="4008170">syscall</span><span class="op" id="4008177">.</span><span class="ident" id="4008178">IPV6_JOIN_GROUP</span><span class="op" id="4008193">,</span>&nbsp;<span class="ident" id="4008195">mreq</span><span class="op" id="4008199">)</span><span class="op" id="4008200">)</span><br>
<span class="lineno"></span><span class="op" id="4008202">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
