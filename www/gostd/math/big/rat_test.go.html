<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7229297">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7229352">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7229406">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7229457">package</span>&nbsp;<span class="ident" id="7229465">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7229470">import</span>&nbsp;<span class="op" id="7229477">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229480">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229489">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229505">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229522">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229538">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229545">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229553">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229564">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7229575">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7229585">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7229588">func</span>&nbsp;<span class="ident" id="7229593">TestZeroRat</span><span class="op" id="7229604">(</span><span class="ident" id="7229605">t</span>&nbsp;<span class="op" id="7229607">*</span><span class="ident" id="7229608">testing</span><span class="op" id="7229615">.</span><span class="ident" id="7229616">T</span><span class="op" id="7229617">)</span>&nbsp;<span class="op" id="7229619">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229622">var</span>&nbsp;<span class="ident" id="7229626">x</span><span class="op" id="7229627">,</span>&nbsp;<span class="ident" id="7229629">y</span><span class="op" id="7229630">,</span>&nbsp;<span class="ident" id="7229632">z</span>&nbsp;<span class="ident" id="7229634">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229639">y</span><span class="op" id="7229640">.</span><span class="ident" id="7229641">SetFrac64</span><span class="op" id="7229650">(</span><span class="num" id="7229651">0</span><span class="op" id="7229652">,</span>&nbsp;<span class="num" id="7229654">42</span><span class="op" id="7229656">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229660">if</span>&nbsp;<span class="ident" id="7229663">x</span><span class="op" id="7229664">.</span><span class="ident" id="7229665">Cmp</span><span class="op" id="7229668">(</span><span class="op" id="7229669">&amp;</span><span class="ident" id="7229670">y</span><span class="op" id="7229671">)</span>&nbsp;<span class="op" id="7229673">!=</span>&nbsp;<span class="num" id="7229676">0</span>&nbsp;<span class="op" id="7229678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229682">t</span><span class="op" id="7229683">.</span><span class="ident" id="7229684">Errorf</span><span class="op" id="7229690">(</span><span class="string" id="7229691">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7229730">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7229733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229737">if</span>&nbsp;<span class="ident" id="7229740">s</span>&nbsp;<span class="op" id="7229742">:=</span>&nbsp;<span class="ident" id="7229745">x</span><span class="op" id="7229746">.</span><span class="ident" id="7229747">String</span><span class="op" id="7229753">(</span><span class="op" id="7229754">)</span><span class="op" id="7229755">;</span>&nbsp;<span class="ident" id="7229757">s</span>&nbsp;<span class="op" id="7229759">!=</span>&nbsp;<span class="string" id="7229762">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7229768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229772">t</span><span class="op" id="7229773">.</span><span class="ident" id="7229774">Errorf</span><span class="op" id="7229780">(</span><span class="string" id="7229781">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7229803">,</span>&nbsp;<span class="ident" id="7229805">s</span><span class="op" id="7229806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7229809">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229813">if</span>&nbsp;<span class="ident" id="7229816">s</span>&nbsp;<span class="op" id="7229818">:=</span>&nbsp;<span class="ident" id="7229821">x</span><span class="op" id="7229822">.</span><span class="ident" id="7229823">RatString</span><span class="op" id="7229832">(</span><span class="op" id="7229833">)</span><span class="op" id="7229834">;</span>&nbsp;<span class="ident" id="7229836">s</span>&nbsp;<span class="op" id="7229838">!=</span>&nbsp;<span class="string" id="7229841">&#34;0&#34;</span>&nbsp;<span class="op" id="7229845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229849">t</span><span class="op" id="7229850">.</span><span class="ident" id="7229851">Errorf</span><span class="op" id="7229857">(</span><span class="string" id="7229858">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7229878">,</span>&nbsp;<span class="ident" id="7229880">s</span><span class="op" id="7229881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7229884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229888">z</span><span class="op" id="7229889">.</span><span class="ident" id="7229890">Add</span><span class="op" id="7229893">(</span><span class="op" id="7229894">&amp;</span><span class="ident" id="7229895">x</span><span class="op" id="7229896">,</span>&nbsp;<span class="op" id="7229898">&amp;</span><span class="ident" id="7229899">y</span><span class="op" id="7229900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229903">if</span>&nbsp;<span class="ident" id="7229906">s</span>&nbsp;<span class="op" id="7229908">:=</span>&nbsp;<span class="ident" id="7229911">z</span><span class="op" id="7229912">.</span><span class="ident" id="7229913">RatString</span><span class="op" id="7229922">(</span><span class="op" id="7229923">)</span><span class="op" id="7229924">;</span>&nbsp;<span class="ident" id="7229926">s</span>&nbsp;<span class="op" id="7229928">!=</span>&nbsp;<span class="string" id="7229931">&#34;0&#34;</span>&nbsp;<span class="op" id="7229935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229939">t</span><span class="op" id="7229940">.</span><span class="ident" id="7229941">Errorf</span><span class="op" id="7229947">(</span><span class="string" id="7229948">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7229970">,</span>&nbsp;<span class="ident" id="7229972">s</span><span class="op" id="7229973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7229976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7229980">z</span><span class="op" id="7229981">.</span><span class="ident" id="7229982">Sub</span><span class="op" id="7229985">(</span><span class="op" id="7229986">&amp;</span><span class="ident" id="7229987">x</span><span class="op" id="7229988">,</span>&nbsp;<span class="op" id="7229990">&amp;</span><span class="ident" id="7229991">y</span><span class="op" id="7229992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7229995">if</span>&nbsp;<span class="ident" id="7229998">s</span>&nbsp;<span class="op" id="7230000">:=</span>&nbsp;<span class="ident" id="7230003">z</span><span class="op" id="7230004">.</span><span class="ident" id="7230005">RatString</span><span class="op" id="7230014">(</span><span class="op" id="7230015">)</span><span class="op" id="7230016">;</span>&nbsp;<span class="ident" id="7230018">s</span>&nbsp;<span class="op" id="7230020">!=</span>&nbsp;<span class="string" id="7230023">&#34;0&#34;</span>&nbsp;<span class="op" id="7230027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230031">t</span><span class="op" id="7230032">.</span><span class="ident" id="7230033">Errorf</span><span class="op" id="7230039">(</span><span class="string" id="7230040">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7230062">,</span>&nbsp;<span class="ident" id="7230064">s</span><span class="op" id="7230065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230072">z</span><span class="op" id="7230073">.</span><span class="ident" id="7230074">Mul</span><span class="op" id="7230077">(</span><span class="op" id="7230078">&amp;</span><span class="ident" id="7230079">x</span><span class="op" id="7230080">,</span>&nbsp;<span class="op" id="7230082">&amp;</span><span class="ident" id="7230083">y</span><span class="op" id="7230084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7230087">if</span>&nbsp;<span class="ident" id="7230090">s</span>&nbsp;<span class="op" id="7230092">:=</span>&nbsp;<span class="ident" id="7230095">z</span><span class="op" id="7230096">.</span><span class="ident" id="7230097">RatString</span><span class="op" id="7230106">(</span><span class="op" id="7230107">)</span><span class="op" id="7230108">;</span>&nbsp;<span class="ident" id="7230110">s</span>&nbsp;<span class="op" id="7230112">!=</span>&nbsp;<span class="string" id="7230115">&#34;0&#34;</span>&nbsp;<span class="op" id="7230119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230123">t</span><span class="op" id="7230124">.</span><span class="ident" id="7230125">Errorf</span><span class="op" id="7230131">(</span><span class="string" id="7230132">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7230154">,</span>&nbsp;<span class="ident" id="7230156">s</span><span class="op" id="7230157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7230164">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7230195">defer</span>&nbsp;<span class="keyword" id="7230201">func</span><span class="op" id="7230205">(</span><span class="op" id="7230206">)</span>&nbsp;<span class="op" id="7230208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7230212">if</span>&nbsp;<span class="ident" id="7230215">s</span>&nbsp;<span class="op" id="7230217">:=</span>&nbsp;<span class="builtinfunc" id="7230220">recover</span><span class="op" id="7230227">(</span><span class="op" id="7230228">)</span><span class="op" id="7230229">;</span>&nbsp;<span class="ident" id="7230231">s</span>&nbsp;<span class="op" id="7230233">==</span>&nbsp;<span class="ident" id="7230236">nil</span>&nbsp;<span class="op" id="7230240">||</span>&nbsp;<span class="ident" id="7230243">s</span><span class="op" id="7230244">.</span><span class="op" id="7230245">(</span><span class="builtintype" id="7230246">string</span><span class="op" id="7230252">)</span>&nbsp;<span class="op" id="7230254">!=</span>&nbsp;<span class="string" id="7230257">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7230276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7230281">panic</span><span class="op" id="7230286">(</span><span class="ident" id="7230287">s</span><span class="op" id="7230288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230292">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230295">}</span><span class="op" id="7230296">(</span><span class="op" id="7230297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230300">z</span><span class="op" id="7230301">.</span><span class="ident" id="7230302">Quo</span><span class="op" id="7230305">(</span><span class="op" id="7230306">&amp;</span><span class="ident" id="7230307">x</span><span class="op" id="7230308">,</span>&nbsp;<span class="op" id="7230310">&amp;</span><span class="ident" id="7230311">y</span><span class="op" id="7230312">)</span><br>
<span class="lineno"></span><span class="op" id="7230314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7230317">var</span>&nbsp;<span class="ident" id="7230321">setStringTests</span>&nbsp;<span class="op" id="7230336">=</span>&nbsp;<span class="op" id="7230338">[</span><span class="op" id="7230339">]</span><span class="keyword" id="7230340">struct</span>&nbsp;<span class="op" id="7230347">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230350">in</span><span class="op" id="7230352">,</span>&nbsp;<span class="ident" id="7230354">out</span>&nbsp;<span class="builtintype" id="7230358">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7230366">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7230374">bool</span><br>
<span class="lineno"></span><span class="op" id="7230379">}</span><span class="op" id="7230380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230383">{</span><span class="string" id="7230384">&#34;0&#34;</span><span class="op" id="7230387">,</span>&nbsp;<span class="string" id="7230389">&#34;0&#34;</span><span class="op" id="7230392">,</span>&nbsp;<span class="builtintype" id="7230394">true</span><span class="op" id="7230398">}</span><span class="op" id="7230399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230402">{</span><span class="string" id="7230403">&#34;-0&#34;</span><span class="op" id="7230407">,</span>&nbsp;<span class="string" id="7230409">&#34;0&#34;</span><span class="op" id="7230412">,</span>&nbsp;<span class="builtintype" id="7230414">true</span><span class="op" id="7230418">}</span><span class="op" id="7230419">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230422">{</span><span class="string" id="7230423">&#34;1&#34;</span><span class="op" id="7230426">,</span>&nbsp;<span class="string" id="7230428">&#34;1&#34;</span><span class="op" id="7230431">,</span>&nbsp;<span class="builtintype" id="7230433">true</span><span class="op" id="7230437">}</span><span class="op" id="7230438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230441">{</span><span class="string" id="7230442">&#34;-1&#34;</span><span class="op" id="7230446">,</span>&nbsp;<span class="string" id="7230448">&#34;-1&#34;</span><span class="op" id="7230452">,</span>&nbsp;<span class="builtintype" id="7230454">true</span><span class="op" id="7230458">}</span><span class="op" id="7230459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230462">{</span><span class="string" id="7230463">&#34;1.&#34;</span><span class="op" id="7230467">,</span>&nbsp;<span class="string" id="7230469">&#34;1&#34;</span><span class="op" id="7230472">,</span>&nbsp;<span class="builtintype" id="7230474">true</span><span class="op" id="7230478">}</span><span class="op" id="7230479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230482">{</span><span class="string" id="7230483">&#34;1e0&#34;</span><span class="op" id="7230488">,</span>&nbsp;<span class="string" id="7230490">&#34;1&#34;</span><span class="op" id="7230493">,</span>&nbsp;<span class="builtintype" id="7230495">true</span><span class="op" id="7230499">}</span><span class="op" id="7230500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230503">{</span><span class="string" id="7230504">&#34;1.e1&#34;</span><span class="op" id="7230510">,</span>&nbsp;<span class="string" id="7230512">&#34;10&#34;</span><span class="op" id="7230516">,</span>&nbsp;<span class="builtintype" id="7230518">true</span><span class="op" id="7230522">}</span><span class="op" id="7230523">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230526">{</span><span class="ident" id="7230527">in</span><span class="op" id="7230529">:</span>&nbsp;<span class="string" id="7230531">&#34;1e&#34;</span><span class="op" id="7230535">,</span>&nbsp;<span class="ident" id="7230537">ok</span><span class="op" id="7230539">:</span>&nbsp;<span class="builtintype" id="7230541">false</span><span class="op" id="7230546">}</span><span class="op" id="7230547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230550">{</span><span class="ident" id="7230551">in</span><span class="op" id="7230553">:</span>&nbsp;<span class="string" id="7230555">&#34;1.e&#34;</span><span class="op" id="7230560">,</span>&nbsp;<span class="ident" id="7230562">ok</span><span class="op" id="7230564">:</span>&nbsp;<span class="builtintype" id="7230566">false</span><span class="op" id="7230571">}</span><span class="op" id="7230572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230575">{</span><span class="ident" id="7230576">in</span><span class="op" id="7230578">:</span>&nbsp;<span class="string" id="7230580">&#34;1e+14e-5&#34;</span><span class="op" id="7230590">,</span>&nbsp;<span class="ident" id="7230592">ok</span><span class="op" id="7230594">:</span>&nbsp;<span class="builtintype" id="7230596">false</span><span class="op" id="7230601">}</span><span class="op" id="7230602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230605">{</span><span class="ident" id="7230606">in</span><span class="op" id="7230608">:</span>&nbsp;<span class="string" id="7230610">&#34;1e4.5&#34;</span><span class="op" id="7230617">,</span>&nbsp;<span class="ident" id="7230619">ok</span><span class="op" id="7230621">:</span>&nbsp;<span class="builtintype" id="7230623">false</span><span class="op" id="7230628">}</span><span class="op" id="7230629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230632">{</span><span class="ident" id="7230633">in</span><span class="op" id="7230635">:</span>&nbsp;<span class="string" id="7230637">&#34;r&#34;</span><span class="op" id="7230640">,</span>&nbsp;<span class="ident" id="7230642">ok</span><span class="op" id="7230644">:</span>&nbsp;<span class="builtintype" id="7230646">false</span><span class="op" id="7230651">}</span><span class="op" id="7230652">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230655">{</span><span class="ident" id="7230656">in</span><span class="op" id="7230658">:</span>&nbsp;<span class="string" id="7230660">&#34;a/b&#34;</span><span class="op" id="7230665">,</span>&nbsp;<span class="ident" id="7230667">ok</span><span class="op" id="7230669">:</span>&nbsp;<span class="builtintype" id="7230671">false</span><span class="op" id="7230676">}</span><span class="op" id="7230677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230680">{</span><span class="ident" id="7230681">in</span><span class="op" id="7230683">:</span>&nbsp;<span class="string" id="7230685">&#34;a.b&#34;</span><span class="op" id="7230690">,</span>&nbsp;<span class="ident" id="7230692">ok</span><span class="op" id="7230694">:</span>&nbsp;<span class="builtintype" id="7230696">false</span><span class="op" id="7230701">}</span><span class="op" id="7230702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230705">{</span><span class="string" id="7230706">&#34;-0.1&#34;</span><span class="op" id="7230712">,</span>&nbsp;<span class="string" id="7230714">&#34;-1/10&#34;</span><span class="op" id="7230721">,</span>&nbsp;<span class="builtintype" id="7230723">true</span><span class="op" id="7230727">}</span><span class="op" id="7230728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230731">{</span><span class="string" id="7230732">&#34;-.1&#34;</span><span class="op" id="7230737">,</span>&nbsp;<span class="string" id="7230739">&#34;-1/10&#34;</span><span class="op" id="7230746">,</span>&nbsp;<span class="builtintype" id="7230748">true</span><span class="op" id="7230752">}</span><span class="op" id="7230753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230756">{</span><span class="string" id="7230757">&#34;2/4&#34;</span><span class="op" id="7230762">,</span>&nbsp;<span class="string" id="7230764">&#34;1/2&#34;</span><span class="op" id="7230769">,</span>&nbsp;<span class="builtintype" id="7230771">true</span><span class="op" id="7230775">}</span><span class="op" id="7230776">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230779">{</span><span class="string" id="7230780">&#34;.25&#34;</span><span class="op" id="7230785">,</span>&nbsp;<span class="string" id="7230787">&#34;1/4&#34;</span><span class="op" id="7230792">,</span>&nbsp;<span class="builtintype" id="7230794">true</span><span class="op" id="7230798">}</span><span class="op" id="7230799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230802">{</span><span class="string" id="7230803">&#34;-1/5&#34;</span><span class="op" id="7230809">,</span>&nbsp;<span class="string" id="7230811">&#34;-1/5&#34;</span><span class="op" id="7230817">,</span>&nbsp;<span class="builtintype" id="7230819">true</span><span class="op" id="7230823">}</span><span class="op" id="7230824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230827">{</span><span class="string" id="7230828">&#34;8129567.7690E14&#34;</span><span class="op" id="7230845">,</span>&nbsp;<span class="string" id="7230847">&#34;812956776900000000000&#34;</span><span class="op" id="7230870">,</span>&nbsp;<span class="builtintype" id="7230872">true</span><span class="op" id="7230876">}</span><span class="op" id="7230877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230880">{</span><span class="string" id="7230881">&#34;78189e+4&#34;</span><span class="op" id="7230891">,</span>&nbsp;<span class="string" id="7230893">&#34;781890000&#34;</span><span class="op" id="7230904">,</span>&nbsp;<span class="builtintype" id="7230906">true</span><span class="op" id="7230910">}</span><span class="op" id="7230911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230914">{</span><span class="string" id="7230915">&#34;553019.8935e+8&#34;</span><span class="op" id="7230931">,</span>&nbsp;<span class="string" id="7230933">&#34;55301989350000&#34;</span><span class="op" id="7230949">,</span>&nbsp;<span class="builtintype" id="7230951">true</span><span class="op" id="7230955">}</span><span class="op" id="7230956">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7230959">{</span><span class="string" id="7230960">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7230995">,</span>&nbsp;<span class="string" id="7230997">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7231040">,</span>&nbsp;<span class="builtintype" id="7231042">true</span><span class="op" id="7231046">}</span><span class="op" id="7231047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231050">{</span><span class="string" id="7231051">&#34;9877861857500000E-7&#34;</span><span class="op" id="7231072">,</span>&nbsp;<span class="string" id="7231074">&#34;3951144743/4&#34;</span><span class="op" id="7231088">,</span>&nbsp;<span class="builtintype" id="7231090">true</span><span class="op" id="7231094">}</span><span class="op" id="7231095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231098">{</span><span class="string" id="7231099">&#34;2169378.417e-3&#34;</span><span class="op" id="7231115">,</span>&nbsp;<span class="string" id="7231117">&#34;2169378417/1000000&#34;</span><span class="op" id="7231137">,</span>&nbsp;<span class="builtintype" id="7231139">true</span><span class="op" id="7231143">}</span><span class="op" id="7231144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231147">{</span><span class="string" id="7231148">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7231186">,</span>&nbsp;<span class="string" id="7231188">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7231226">,</span>&nbsp;<span class="builtintype" id="7231228">true</span><span class="op" id="7231232">}</span><span class="op" id="7231233">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231236">{</span><span class="string" id="7231237">&#34;53/70893980658822810696&#34;</span><span class="op" id="7231262">,</span>&nbsp;<span class="string" id="7231264">&#34;53/70893980658822810696&#34;</span><span class="op" id="7231289">,</span>&nbsp;<span class="builtintype" id="7231291">true</span><span class="op" id="7231295">}</span><span class="op" id="7231296">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231299">{</span><span class="string" id="7231300">&#34;106/141787961317645621392&#34;</span><span class="op" id="7231327">,</span>&nbsp;<span class="string" id="7231329">&#34;53/70893980658822810696&#34;</span><span class="op" id="7231354">,</span>&nbsp;<span class="builtintype" id="7231356">true</span><span class="op" id="7231360">}</span><span class="op" id="7231361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231364">{</span><span class="string" id="7231365">&#34;204211327800791583.81095&#34;</span><span class="op" id="7231391">,</span>&nbsp;<span class="string" id="7231393">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7231423">,</span>&nbsp;<span class="builtintype" id="7231425">true</span><span class="op" id="7231429">}</span><span class="op" id="7231430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231433">{</span><span class="ident" id="7231434">in</span><span class="op" id="7231436">:</span>&nbsp;<span class="string" id="7231438">&#34;1/0&#34;</span><span class="op" id="7231443">,</span>&nbsp;<span class="ident" id="7231445">ok</span><span class="op" id="7231447">:</span>&nbsp;<span class="builtintype" id="7231449">false</span><span class="op" id="7231454">}</span><span class="op" id="7231455">,</span><br>
<span class="lineno"></span><span class="op" id="7231457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7231460">func</span>&nbsp;<span class="ident" id="7231465">TestRatSetString</span><span class="op" id="7231481">(</span><span class="ident" id="7231482">t</span>&nbsp;<span class="op" id="7231484">*</span><span class="ident" id="7231485">testing</span><span class="op" id="7231492">.</span><span class="ident" id="7231493">T</span><span class="op" id="7231494">)</span>&nbsp;<span class="op" id="7231496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7231499">for</span>&nbsp;<span class="ident" id="7231503">i</span><span class="op" id="7231504">,</span>&nbsp;<span class="ident" id="7231506">test</span>&nbsp;<span class="op" id="7231511">:=</span>&nbsp;<span class="keyword" id="7231514">range</span>&nbsp;<span class="ident" id="7231520">setStringTests</span>&nbsp;<span class="op" id="7231535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7231539">x</span><span class="op" id="7231540">,</span>&nbsp;<span class="ident" id="7231542">ok</span>&nbsp;<span class="op" id="7231545">:=</span>&nbsp;<span class="builtinfunc" id="7231548">new</span><span class="op" id="7231551">(</span><span class="ident" id="7231552">Rat</span><span class="op" id="7231555">)</span><span class="op" id="7231556">.</span><span class="ident" id="7231557">SetString</span><span class="op" id="7231566">(</span><span class="ident" id="7231567">test</span><span class="op" id="7231571">.</span><span class="ident" id="7231572">in</span><span class="op" id="7231574">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7231579">if</span>&nbsp;<span class="ident" id="7231582">ok</span>&nbsp;<span class="op" id="7231585">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7231590">if</span>&nbsp;<span class="op" id="7231593">!</span><span class="ident" id="7231594">test</span><span class="op" id="7231598">.</span><span class="ident" id="7231599">ok</span>&nbsp;<span class="op" id="7231602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7231608">t</span><span class="op" id="7231609">.</span><span class="ident" id="7231610">Errorf</span><span class="op" id="7231616">(</span><span class="string" id="7231617">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7231653">,</span>&nbsp;<span class="ident" id="7231655">i</span><span class="op" id="7231656">,</span>&nbsp;<span class="ident" id="7231658">test</span><span class="op" id="7231662">.</span><span class="ident" id="7231663">in</span><span class="op" id="7231665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231670">}</span>&nbsp;<span class="keyword" id="7231672">else</span>&nbsp;<span class="keyword" id="7231677">if</span>&nbsp;<span class="ident" id="7231680">x</span><span class="op" id="7231681">.</span><span class="ident" id="7231682">RatString</span><span class="op" id="7231691">(</span><span class="op" id="7231692">)</span>&nbsp;<span class="op" id="7231694">!=</span>&nbsp;<span class="ident" id="7231697">test</span><span class="op" id="7231701">.</span><span class="ident" id="7231702">out</span>&nbsp;<span class="op" id="7231706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7231712">t</span><span class="op" id="7231713">.</span><span class="ident" id="7231714">Errorf</span><span class="op" id="7231720">(</span><span class="string" id="7231721">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7231755">,</span>&nbsp;<span class="ident" id="7231757">i</span><span class="op" id="7231758">,</span>&nbsp;<span class="ident" id="7231760">test</span><span class="op" id="7231764">.</span><span class="ident" id="7231765">in</span><span class="op" id="7231767">,</span>&nbsp;<span class="ident" id="7231769">x</span><span class="op" id="7231770">.</span><span class="ident" id="7231771">RatString</span><span class="op" id="7231780">(</span><span class="op" id="7231781">)</span><span class="op" id="7231782">,</span>&nbsp;<span class="ident" id="7231784">test</span><span class="op" id="7231788">.</span><span class="ident" id="7231789">out</span><span class="op" id="7231792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231797">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231801">}</span>&nbsp;<span class="keyword" id="7231803">else</span>&nbsp;<span class="keyword" id="7231808">if</span>&nbsp;<span class="ident" id="7231811">x</span>&nbsp;<span class="op" id="7231813">!=</span>&nbsp;<span class="ident" id="7231816">nil</span>&nbsp;<span class="op" id="7231820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7231825">t</span><span class="op" id="7231826">.</span><span class="ident" id="7231827">Errorf</span><span class="op" id="7231833">(</span><span class="string" id="7231834">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7231869">,</span>&nbsp;<span class="ident" id="7231871">i</span><span class="op" id="7231872">,</span>&nbsp;<span class="ident" id="7231874">test</span><span class="op" id="7231878">.</span><span class="ident" id="7231879">in</span><span class="op" id="7231881">,</span>&nbsp;<span class="ident" id="7231883">x</span><span class="op" id="7231884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7231891">}</span><br>
<span class="lineno"></span><span class="op" id="7231893">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7231896">func</span>&nbsp;<span class="ident" id="7231901">TestRatScan</span><span class="op" id="7231912">(</span><span class="ident" id="7231913">t</span>&nbsp;<span class="op" id="7231915">*</span><span class="ident" id="7231916">testing</span><span class="op" id="7231923">.</span><span class="ident" id="7231924">T</span><span class="op" id="7231925">)</span>&nbsp;<span class="op" id="7231927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7231930">var</span>&nbsp;<span class="ident" id="7231934">buf</span>&nbsp;<span class="ident" id="7231938">bytes</span><span class="op" id="7231943">.</span><span class="ident" id="7231944">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7231952">for</span>&nbsp;<span class="ident" id="7231956">i</span><span class="op" id="7231957">,</span>&nbsp;<span class="ident" id="7231959">test</span>&nbsp;<span class="op" id="7231964">:=</span>&nbsp;<span class="keyword" id="7231967">range</span>&nbsp;<span class="ident" id="7231973">setStringTests</span>&nbsp;<span class="op" id="7231988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7231992">x</span>&nbsp;<span class="op" id="7231994">:=</span>&nbsp;<span class="builtinfunc" id="7231997">new</span><span class="op" id="7232000">(</span><span class="ident" id="7232001">Rat</span><span class="op" id="7232004">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232008">buf</span><span class="op" id="7232011">.</span><span class="ident" id="7232012">Reset</span><span class="op" id="7232017">(</span><span class="op" id="7232018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232022">buf</span><span class="op" id="7232025">.</span><span class="ident" id="7232026">WriteString</span><span class="op" id="7232037">(</span><span class="ident" id="7232038">test</span><span class="op" id="7232042">.</span><span class="ident" id="7232043">in</span><span class="op" id="7232045">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232050">_</span><span class="op" id="7232051">,</span>&nbsp;<span class="ident" id="7232053">err</span>&nbsp;<span class="op" id="7232057">:=</span>&nbsp;<span class="ident" id="7232060">fmt</span><span class="op" id="7232063">.</span><span class="ident" id="7232064">Fscanf</span><span class="op" id="7232070">(</span><span class="op" id="7232071">&amp;</span><span class="ident" id="7232072">buf</span><span class="op" id="7232075">,</span>&nbsp;<span class="string" id="7232077">&#34;%v&#34;</span><span class="op" id="7232081">,</span>&nbsp;<span class="ident" id="7232083">x</span><span class="op" id="7232084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232088">if</span>&nbsp;<span class="ident" id="7232091">err</span>&nbsp;<span class="op" id="7232095">==</span>&nbsp;<span class="ident" id="7232098">nil</span>&nbsp;<span class="op" id="7232102">!=</span>&nbsp;<span class="ident" id="7232105">test</span><span class="op" id="7232109">.</span><span class="ident" id="7232110">ok</span>&nbsp;<span class="op" id="7232113">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232118">if</span>&nbsp;<span class="ident" id="7232121">test</span><span class="op" id="7232125">.</span><span class="ident" id="7232126">ok</span>&nbsp;<span class="op" id="7232129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232135">t</span><span class="op" id="7232136">.</span><span class="ident" id="7232137">Errorf</span><span class="op" id="7232143">(</span><span class="string" id="7232144">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7232159">,</span>&nbsp;<span class="ident" id="7232161">i</span><span class="op" id="7232162">,</span>&nbsp;<span class="ident" id="7232164">err</span><span class="op" id="7232167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232172">}</span>&nbsp;<span class="keyword" id="7232174">else</span>&nbsp;<span class="op" id="7232179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232185">t</span><span class="op" id="7232186">.</span><span class="ident" id="7232187">Errorf</span><span class="op" id="7232193">(</span><span class="string" id="7232194">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7232214">,</span>&nbsp;<span class="ident" id="7232216">i</span><span class="op" id="7232217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232222">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232227">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232242">if</span>&nbsp;<span class="ident" id="7232245">err</span>&nbsp;<span class="op" id="7232249">==</span>&nbsp;<span class="ident" id="7232252">nil</span>&nbsp;<span class="op" id="7232256">&amp;&amp;</span>&nbsp;<span class="ident" id="7232259">x</span><span class="op" id="7232260">.</span><span class="ident" id="7232261">RatString</span><span class="op" id="7232270">(</span><span class="op" id="7232271">)</span>&nbsp;<span class="op" id="7232273">!=</span>&nbsp;<span class="ident" id="7232276">test</span><span class="op" id="7232280">.</span><span class="ident" id="7232281">out</span>&nbsp;<span class="op" id="7232285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232290">t</span><span class="op" id="7232291">.</span><span class="ident" id="7232292">Errorf</span><span class="op" id="7232298">(</span><span class="string" id="7232299">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7232319">,</span>&nbsp;<span class="ident" id="7232321">i</span><span class="op" id="7232322">,</span>&nbsp;<span class="ident" id="7232324">x</span><span class="op" id="7232325">.</span><span class="ident" id="7232326">RatString</span><span class="op" id="7232335">(</span><span class="op" id="7232336">)</span><span class="op" id="7232337">,</span>&nbsp;<span class="ident" id="7232339">test</span><span class="op" id="7232343">.</span><span class="ident" id="7232344">out</span><span class="op" id="7232347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232351">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232354">}</span><br>
<span class="lineno"></span><span class="op" id="7232356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7232359">var</span>&nbsp;<span class="ident" id="7232363">floatStringTests</span>&nbsp;<span class="op" id="7232380">=</span>&nbsp;<span class="op" id="7232382">[</span><span class="op" id="7232383">]</span><span class="keyword" id="7232384">struct</span>&nbsp;<span class="op" id="7232391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232394">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7232399">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232407">prec</span>&nbsp;<span class="builtintype" id="7232412">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232417">out</span>&nbsp;&nbsp;<span class="builtintype" id="7232422">string</span><br>
<span class="lineno"></span><span class="op" id="7232429">}</span><span class="op" id="7232430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232433">{</span><span class="string" id="7232434">&#34;0&#34;</span><span class="op" id="7232437">,</span>&nbsp;<span class="num" id="7232439">0</span><span class="op" id="7232440">,</span>&nbsp;<span class="string" id="7232442">&#34;0&#34;</span><span class="op" id="7232445">}</span><span class="op" id="7232446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232449">{</span><span class="string" id="7232450">&#34;0&#34;</span><span class="op" id="7232453">,</span>&nbsp;<span class="num" id="7232455">4</span><span class="op" id="7232456">,</span>&nbsp;<span class="string" id="7232458">&#34;0.0000&#34;</span><span class="op" id="7232466">}</span><span class="op" id="7232467">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232470">{</span><span class="string" id="7232471">&#34;1&#34;</span><span class="op" id="7232474">,</span>&nbsp;<span class="num" id="7232476">0</span><span class="op" id="7232477">,</span>&nbsp;<span class="string" id="7232479">&#34;1&#34;</span><span class="op" id="7232482">}</span><span class="op" id="7232483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232486">{</span><span class="string" id="7232487">&#34;1&#34;</span><span class="op" id="7232490">,</span>&nbsp;<span class="num" id="7232492">2</span><span class="op" id="7232493">,</span>&nbsp;<span class="string" id="7232495">&#34;1.00&#34;</span><span class="op" id="7232501">}</span><span class="op" id="7232502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232505">{</span><span class="string" id="7232506">&#34;-1&#34;</span><span class="op" id="7232510">,</span>&nbsp;<span class="num" id="7232512">0</span><span class="op" id="7232513">,</span>&nbsp;<span class="string" id="7232515">&#34;-1&#34;</span><span class="op" id="7232519">}</span><span class="op" id="7232520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232523">{</span><span class="string" id="7232524">&#34;.25&#34;</span><span class="op" id="7232529">,</span>&nbsp;<span class="num" id="7232531">2</span><span class="op" id="7232532">,</span>&nbsp;<span class="string" id="7232534">&#34;0.25&#34;</span><span class="op" id="7232540">}</span><span class="op" id="7232541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232544">{</span><span class="string" id="7232545">&#34;.25&#34;</span><span class="op" id="7232550">,</span>&nbsp;<span class="num" id="7232552">1</span><span class="op" id="7232553">,</span>&nbsp;<span class="string" id="7232555">&#34;0.3&#34;</span><span class="op" id="7232560">}</span><span class="op" id="7232561">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232564">{</span><span class="string" id="7232565">&#34;.25&#34;</span><span class="op" id="7232570">,</span>&nbsp;<span class="num" id="7232572">3</span><span class="op" id="7232573">,</span>&nbsp;<span class="string" id="7232575">&#34;0.250&#34;</span><span class="op" id="7232582">}</span><span class="op" id="7232583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232586">{</span><span class="string" id="7232587">&#34;-1/3&#34;</span><span class="op" id="7232593">,</span>&nbsp;<span class="num" id="7232595">3</span><span class="op" id="7232596">,</span>&nbsp;<span class="string" id="7232598">&#34;-0.333&#34;</span><span class="op" id="7232606">}</span><span class="op" id="7232607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232610">{</span><span class="string" id="7232611">&#34;-2/3&#34;</span><span class="op" id="7232617">,</span>&nbsp;<span class="num" id="7232619">4</span><span class="op" id="7232620">,</span>&nbsp;<span class="string" id="7232622">&#34;-0.6667&#34;</span><span class="op" id="7232631">}</span><span class="op" id="7232632">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232635">{</span><span class="string" id="7232636">&#34;0.96&#34;</span><span class="op" id="7232642">,</span>&nbsp;<span class="num" id="7232644">1</span><span class="op" id="7232645">,</span>&nbsp;<span class="string" id="7232647">&#34;1.0&#34;</span><span class="op" id="7232652">}</span><span class="op" id="7232653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232656">{</span><span class="string" id="7232657">&#34;0.999&#34;</span><span class="op" id="7232664">,</span>&nbsp;<span class="num" id="7232666">2</span><span class="op" id="7232667">,</span>&nbsp;<span class="string" id="7232669">&#34;1.00&#34;</span><span class="op" id="7232675">}</span><span class="op" id="7232676">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232679">{</span><span class="string" id="7232680">&#34;0.9&#34;</span><span class="op" id="7232685">,</span>&nbsp;<span class="num" id="7232687">0</span><span class="op" id="7232688">,</span>&nbsp;<span class="string" id="7232690">&#34;1&#34;</span><span class="op" id="7232693">}</span><span class="op" id="7232694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232697">{</span><span class="string" id="7232698">&#34;.25&#34;</span><span class="op" id="7232703">,</span>&nbsp;<span class="op" id="7232705">-</span><span class="num" id="7232706">1</span><span class="op" id="7232707">,</span>&nbsp;<span class="string" id="7232709">&#34;0&#34;</span><span class="op" id="7232712">}</span><span class="op" id="7232713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232716">{</span><span class="string" id="7232717">&#34;.55&#34;</span><span class="op" id="7232722">,</span>&nbsp;<span class="op" id="7232724">-</span><span class="num" id="7232725">1</span><span class="op" id="7232726">,</span>&nbsp;<span class="string" id="7232728">&#34;1&#34;</span><span class="op" id="7232731">}</span><span class="op" id="7232732">,</span><br>
<span class="lineno"></span><span class="op" id="7232734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7232737">func</span>&nbsp;<span class="ident" id="7232742">TestFloatString</span><span class="op" id="7232757">(</span><span class="ident" id="7232758">t</span>&nbsp;<span class="op" id="7232760">*</span><span class="ident" id="7232761">testing</span><span class="op" id="7232768">.</span><span class="ident" id="7232769">T</span><span class="op" id="7232770">)</span>&nbsp;<span class="op" id="7232772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232775">for</span>&nbsp;<span class="ident" id="7232779">i</span><span class="op" id="7232780">,</span>&nbsp;<span class="ident" id="7232782">test</span>&nbsp;<span class="op" id="7232787">:=</span>&nbsp;<span class="keyword" id="7232790">range</span>&nbsp;<span class="ident" id="7232796">floatStringTests</span>&nbsp;<span class="op" id="7232813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232817">x</span><span class="op" id="7232818">,</span>&nbsp;<span class="ident" id="7232820">_</span>&nbsp;<span class="op" id="7232822">:=</span>&nbsp;<span class="builtinfunc" id="7232825">new</span><span class="op" id="7232828">(</span><span class="ident" id="7232829">Rat</span><span class="op" id="7232832">)</span><span class="op" id="7232833">.</span><span class="ident" id="7232834">SetString</span><span class="op" id="7232843">(</span><span class="ident" id="7232844">test</span><span class="op" id="7232848">.</span><span class="ident" id="7232849">in</span><span class="op" id="7232851">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7232856">if</span>&nbsp;<span class="ident" id="7232859">x</span><span class="op" id="7232860">.</span><span class="ident" id="7232861">FloatString</span><span class="op" id="7232872">(</span><span class="ident" id="7232873">test</span><span class="op" id="7232877">.</span><span class="ident" id="7232878">prec</span><span class="op" id="7232882">)</span>&nbsp;<span class="op" id="7232884">!=</span>&nbsp;<span class="ident" id="7232887">test</span><span class="op" id="7232891">.</span><span class="ident" id="7232892">out</span>&nbsp;<span class="op" id="7232896">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7232901">t</span><span class="op" id="7232902">.</span><span class="ident" id="7232903">Errorf</span><span class="op" id="7232909">(</span><span class="string" id="7232910">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7232930">,</span>&nbsp;<span class="ident" id="7232932">i</span><span class="op" id="7232933">,</span>&nbsp;<span class="ident" id="7232935">x</span><span class="op" id="7232936">.</span><span class="ident" id="7232937">FloatString</span><span class="op" id="7232948">(</span><span class="ident" id="7232949">test</span><span class="op" id="7232953">.</span><span class="ident" id="7232954">prec</span><span class="op" id="7232958">)</span><span class="op" id="7232959">,</span>&nbsp;<span class="ident" id="7232961">test</span><span class="op" id="7232965">.</span><span class="ident" id="7232966">out</span><span class="op" id="7232969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7232976">}</span><br>
<span class="lineno"></span><span class="op" id="7232978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7232981">func</span>&nbsp;<span class="ident" id="7232986">TestRatSign</span><span class="op" id="7232997">(</span><span class="ident" id="7232998">t</span>&nbsp;<span class="op" id="7233000">*</span><span class="ident" id="7233001">testing</span><span class="op" id="7233008">.</span><span class="ident" id="7233009">T</span><span class="op" id="7233010">)</span>&nbsp;<span class="op" id="7233012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233015">zero</span>&nbsp;<span class="op" id="7233020">:=</span>&nbsp;<span class="ident" id="7233023">NewRat</span><span class="op" id="7233029">(</span><span class="num" id="7233030">0</span><span class="op" id="7233031">,</span>&nbsp;<span class="num" id="7233033">1</span><span class="op" id="7233034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233037">for</span>&nbsp;<span class="ident" id="7233041">_</span><span class="op" id="7233042">,</span>&nbsp;<span class="ident" id="7233044">a</span>&nbsp;<span class="op" id="7233046">:=</span>&nbsp;<span class="keyword" id="7233049">range</span>&nbsp;<span class="ident" id="7233055">setStringTests</span>&nbsp;<span class="op" id="7233070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233074">x</span><span class="op" id="7233075">,</span>&nbsp;<span class="ident" id="7233077">ok</span>&nbsp;<span class="op" id="7233080">:=</span>&nbsp;<span class="builtinfunc" id="7233083">new</span><span class="op" id="7233086">(</span><span class="ident" id="7233087">Rat</span><span class="op" id="7233090">)</span><span class="op" id="7233091">.</span><span class="ident" id="7233092">SetString</span><span class="op" id="7233101">(</span><span class="ident" id="7233102">a</span><span class="op" id="7233103">.</span><span class="ident" id="7233104">in</span><span class="op" id="7233106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233110">if</span>&nbsp;<span class="op" id="7233113">!</span><span class="ident" id="7233114">ok</span>&nbsp;<span class="op" id="7233117">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233122">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233137">s</span>&nbsp;<span class="op" id="7233139">:=</span>&nbsp;<span class="ident" id="7233142">x</span><span class="op" id="7233143">.</span><span class="ident" id="7233144">Sign</span><span class="op" id="7233148">(</span><span class="op" id="7233149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233153">e</span>&nbsp;<span class="op" id="7233155">:=</span>&nbsp;<span class="ident" id="7233158">x</span><span class="op" id="7233159">.</span><span class="ident" id="7233160">Cmp</span><span class="op" id="7233163">(</span><span class="ident" id="7233164">zero</span><span class="op" id="7233168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233172">if</span>&nbsp;<span class="ident" id="7233175">s</span>&nbsp;<span class="op" id="7233177">!=</span>&nbsp;<span class="ident" id="7233180">e</span>&nbsp;<span class="op" id="7233182">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233187">t</span><span class="op" id="7233188">.</span><span class="ident" id="7233189">Errorf</span><span class="op" id="7233195">(</span><span class="string" id="7233196">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7233224">,</span>&nbsp;<span class="ident" id="7233226">s</span><span class="op" id="7233227">,</span>&nbsp;<span class="ident" id="7233229">e</span><span class="op" id="7233230">,</span>&nbsp;<span class="op" id="7233232">&amp;</span><span class="ident" id="7233233">x</span><span class="op" id="7233234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233241">}</span><br>
<span class="lineno"></span><span class="op" id="7233243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7233246">var</span>&nbsp;<span class="ident" id="7233250">ratCmpTests</span>&nbsp;<span class="op" id="7233262">=</span>&nbsp;<span class="op" id="7233264">[</span><span class="op" id="7233265">]</span><span class="keyword" id="7233266">struct</span>&nbsp;<span class="op" id="7233273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233276">rat1</span><span class="op" id="7233280">,</span>&nbsp;<span class="ident" id="7233282">rat2</span>&nbsp;<span class="builtintype" id="7233287">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233295">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7233306">int</span><br>
<span class="lineno"></span><span class="op" id="7233310">}</span><span class="op" id="7233311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233314">{</span><span class="string" id="7233315">&#34;0&#34;</span><span class="op" id="7233318">,</span>&nbsp;<span class="string" id="7233320">&#34;0/1&#34;</span><span class="op" id="7233325">,</span>&nbsp;<span class="num" id="7233327">0</span><span class="op" id="7233328">}</span><span class="op" id="7233329">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233332">{</span><span class="string" id="7233333">&#34;1/1&#34;</span><span class="op" id="7233338">,</span>&nbsp;<span class="string" id="7233340">&#34;1&#34;</span><span class="op" id="7233343">,</span>&nbsp;<span class="num" id="7233345">0</span><span class="op" id="7233346">}</span><span class="op" id="7233347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233350">{</span><span class="string" id="7233351">&#34;-1&#34;</span><span class="op" id="7233355">,</span>&nbsp;<span class="string" id="7233357">&#34;-2/2&#34;</span><span class="op" id="7233363">,</span>&nbsp;<span class="num" id="7233365">0</span><span class="op" id="7233366">}</span><span class="op" id="7233367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233370">{</span><span class="string" id="7233371">&#34;1&#34;</span><span class="op" id="7233374">,</span>&nbsp;<span class="string" id="7233376">&#34;0&#34;</span><span class="op" id="7233379">,</span>&nbsp;<span class="num" id="7233381">1</span><span class="op" id="7233382">}</span><span class="op" id="7233383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233386">{</span><span class="string" id="7233387">&#34;0/1&#34;</span><span class="op" id="7233392">,</span>&nbsp;<span class="string" id="7233394">&#34;1/1&#34;</span><span class="op" id="7233399">,</span>&nbsp;<span class="op" id="7233401">-</span><span class="num" id="7233402">1</span><span class="op" id="7233403">}</span><span class="op" id="7233404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233407">{</span><span class="string" id="7233408">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7233435">,</span>&nbsp;<span class="string" id="7233437">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7233464">,</span>&nbsp;<span class="op" id="7233466">-</span><span class="num" id="7233467">1</span><span class="op" id="7233468">}</span><span class="op" id="7233469">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233472">{</span><span class="string" id="7233473">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7233506">,</span>&nbsp;<span class="string" id="7233508">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7233541">,</span>&nbsp;<span class="op" id="7233543">-</span><span class="num" id="7233544">1</span><span class="op" id="7233545">}</span><span class="op" id="7233546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233549">{</span><span class="string" id="7233550">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7233587">,</span>&nbsp;<span class="string" id="7233589">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7233625">,</span>&nbsp;<span class="op" id="7233627">-</span><span class="num" id="7233628">1</span><span class="op" id="7233629">}</span><span class="op" id="7233630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233633">{</span><span class="string" id="7233634">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7233670">,</span>&nbsp;<span class="string" id="7233672">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7233709">,</span>&nbsp;<span class="num" id="7233711">0</span><span class="op" id="7233712">}</span><span class="op" id="7233713">,</span><br>
<span class="lineno"></span><span class="op" id="7233715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7233718">func</span>&nbsp;<span class="ident" id="7233723">TestRatCmp</span><span class="op" id="7233733">(</span><span class="ident" id="7233734">t</span>&nbsp;<span class="op" id="7233736">*</span><span class="ident" id="7233737">testing</span><span class="op" id="7233744">.</span><span class="ident" id="7233745">T</span><span class="op" id="7233746">)</span>&nbsp;<span class="op" id="7233748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233751">for</span>&nbsp;<span class="ident" id="7233755">i</span><span class="op" id="7233756">,</span>&nbsp;<span class="ident" id="7233758">test</span>&nbsp;<span class="op" id="7233763">:=</span>&nbsp;<span class="keyword" id="7233766">range</span>&nbsp;<span class="ident" id="7233772">ratCmpTests</span>&nbsp;<span class="op" id="7233784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233788">x</span><span class="op" id="7233789">,</span>&nbsp;<span class="ident" id="7233791">_</span>&nbsp;<span class="op" id="7233793">:=</span>&nbsp;<span class="builtinfunc" id="7233796">new</span><span class="op" id="7233799">(</span><span class="ident" id="7233800">Rat</span><span class="op" id="7233803">)</span><span class="op" id="7233804">.</span><span class="ident" id="7233805">SetString</span><span class="op" id="7233814">(</span><span class="ident" id="7233815">test</span><span class="op" id="7233819">.</span><span class="ident" id="7233820">rat1</span><span class="op" id="7233824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233828">y</span><span class="op" id="7233829">,</span>&nbsp;<span class="ident" id="7233831">_</span>&nbsp;<span class="op" id="7233833">:=</span>&nbsp;<span class="builtinfunc" id="7233836">new</span><span class="op" id="7233839">(</span><span class="ident" id="7233840">Rat</span><span class="op" id="7233843">)</span><span class="op" id="7233844">.</span><span class="ident" id="7233845">SetString</span><span class="op" id="7233854">(</span><span class="ident" id="7233855">test</span><span class="op" id="7233859">.</span><span class="ident" id="7233860">rat2</span><span class="op" id="7233864">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233869">out</span>&nbsp;<span class="op" id="7233873">:=</span>&nbsp;<span class="ident" id="7233876">x</span><span class="op" id="7233877">.</span><span class="ident" id="7233878">Cmp</span><span class="op" id="7233881">(</span><span class="ident" id="7233882">y</span><span class="op" id="7233883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7233887">if</span>&nbsp;<span class="ident" id="7233890">out</span>&nbsp;<span class="op" id="7233894">!=</span>&nbsp;<span class="ident" id="7233897">test</span><span class="op" id="7233901">.</span><span class="ident" id="7233902">out</span>&nbsp;<span class="op" id="7233906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7233911">t</span><span class="op" id="7233912">.</span><span class="ident" id="7233913">Errorf</span><span class="op" id="7233919">(</span><span class="string" id="7233920">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7233947">,</span>&nbsp;<span class="ident" id="7233949">i</span><span class="op" id="7233950">,</span>&nbsp;<span class="ident" id="7233952">out</span><span class="op" id="7233955">,</span>&nbsp;<span class="ident" id="7233957">test</span><span class="op" id="7233961">.</span><span class="ident" id="7233962">out</span><span class="op" id="7233965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7233972">}</span><br>
<span class="lineno">205</span><span class="op" id="7233974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7233977">func</span>&nbsp;<span class="ident" id="7233982">TestIsInt</span><span class="op" id="7233991">(</span><span class="ident" id="7233992">t</span>&nbsp;<span class="op" id="7233994">*</span><span class="ident" id="7233995">testing</span><span class="op" id="7234002">.</span><span class="ident" id="7234003">T</span><span class="op" id="7234004">)</span>&nbsp;<span class="op" id="7234006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234009">one</span>&nbsp;<span class="op" id="7234013">:=</span>&nbsp;<span class="ident" id="7234016">NewInt</span><span class="op" id="7234022">(</span><span class="num" id="7234023">1</span><span class="op" id="7234024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234027">for</span>&nbsp;<span class="ident" id="7234031">_</span><span class="op" id="7234032">,</span>&nbsp;<span class="ident" id="7234034">a</span>&nbsp;<span class="op" id="7234036">:=</span>&nbsp;<span class="keyword" id="7234039">range</span>&nbsp;<span class="ident" id="7234045">setStringTests</span>&nbsp;<span class="op" id="7234060">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234064">x</span><span class="op" id="7234065">,</span>&nbsp;<span class="ident" id="7234067">ok</span>&nbsp;<span class="op" id="7234070">:=</span>&nbsp;<span class="builtinfunc" id="7234073">new</span><span class="op" id="7234076">(</span><span class="ident" id="7234077">Rat</span><span class="op" id="7234080">)</span><span class="op" id="7234081">.</span><span class="ident" id="7234082">SetString</span><span class="op" id="7234091">(</span><span class="ident" id="7234092">a</span><span class="op" id="7234093">.</span><span class="ident" id="7234094">in</span><span class="op" id="7234096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234100">if</span>&nbsp;<span class="op" id="7234103">!</span><span class="ident" id="7234104">ok</span>&nbsp;<span class="op" id="7234107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234112">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234127">i</span>&nbsp;<span class="op" id="7234129">:=</span>&nbsp;<span class="ident" id="7234132">x</span><span class="op" id="7234133">.</span><span class="ident" id="7234134">IsInt</span><span class="op" id="7234139">(</span><span class="op" id="7234140">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234144">e</span>&nbsp;<span class="op" id="7234146">:=</span>&nbsp;<span class="ident" id="7234149">x</span><span class="op" id="7234150">.</span><span class="ident" id="7234151">Denom</span><span class="op" id="7234156">(</span><span class="op" id="7234157">)</span><span class="op" id="7234158">.</span><span class="ident" id="7234159">Cmp</span><span class="op" id="7234162">(</span><span class="ident" id="7234163">one</span><span class="op" id="7234166">)</span>&nbsp;<span class="op" id="7234168">==</span>&nbsp;<span class="num" id="7234171">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234175">if</span>&nbsp;<span class="ident" id="7234178">i</span>&nbsp;<span class="op" id="7234180">!=</span>&nbsp;<span class="ident" id="7234183">e</span>&nbsp;<span class="op" id="7234185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234190">t</span><span class="op" id="7234191">.</span><span class="ident" id="7234192">Errorf</span><span class="op" id="7234198">(</span><span class="string" id="7234199">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7234229">,</span>&nbsp;<span class="ident" id="7234231">x</span><span class="op" id="7234232">,</span>&nbsp;<span class="ident" id="7234234">i</span><span class="op" id="7234235">,</span>&nbsp;<span class="ident" id="7234237">e</span><span class="op" id="7234238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234245">}</span><br>
<span class="lineno">220</span><span class="op" id="7234247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7234250">func</span>&nbsp;<span class="ident" id="7234255">TestRatAbs</span><span class="op" id="7234265">(</span><span class="ident" id="7234266">t</span>&nbsp;<span class="op" id="7234268">*</span><span class="ident" id="7234269">testing</span><span class="op" id="7234276">.</span><span class="ident" id="7234277">T</span><span class="op" id="7234278">)</span>&nbsp;<span class="op" id="7234280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234283">zero</span>&nbsp;<span class="op" id="7234288">:=</span>&nbsp;<span class="builtinfunc" id="7234291">new</span><span class="op" id="7234294">(</span><span class="ident" id="7234295">Rat</span><span class="op" id="7234298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234301">for</span>&nbsp;<span class="ident" id="7234305">_</span><span class="op" id="7234306">,</span>&nbsp;<span class="ident" id="7234308">a</span>&nbsp;<span class="op" id="7234310">:=</span>&nbsp;<span class="keyword" id="7234313">range</span>&nbsp;<span class="ident" id="7234319">setStringTests</span>&nbsp;<span class="op" id="7234334">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234338">x</span><span class="op" id="7234339">,</span>&nbsp;<span class="ident" id="7234341">ok</span>&nbsp;<span class="op" id="7234344">:=</span>&nbsp;<span class="builtinfunc" id="7234347">new</span><span class="op" id="7234350">(</span><span class="ident" id="7234351">Rat</span><span class="op" id="7234354">)</span><span class="op" id="7234355">.</span><span class="ident" id="7234356">SetString</span><span class="op" id="7234365">(</span><span class="ident" id="7234366">a</span><span class="op" id="7234367">.</span><span class="ident" id="7234368">in</span><span class="op" id="7234370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234374">if</span>&nbsp;<span class="op" id="7234377">!</span><span class="ident" id="7234378">ok</span>&nbsp;<span class="op" id="7234381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234386">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234401">e</span>&nbsp;<span class="op" id="7234403">:=</span>&nbsp;<span class="builtinfunc" id="7234406">new</span><span class="op" id="7234409">(</span><span class="ident" id="7234410">Rat</span><span class="op" id="7234413">)</span><span class="op" id="7234414">.</span><span class="ident" id="7234415">Set</span><span class="op" id="7234418">(</span><span class="ident" id="7234419">x</span><span class="op" id="7234420">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234424">if</span>&nbsp;<span class="ident" id="7234427">e</span><span class="op" id="7234428">.</span><span class="ident" id="7234429">Cmp</span><span class="op" id="7234432">(</span><span class="ident" id="7234433">zero</span><span class="op" id="7234437">)</span>&nbsp;<span class="op" id="7234439">&lt;</span>&nbsp;<span class="num" id="7234441">0</span>&nbsp;<span class="op" id="7234443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234448">e</span><span class="op" id="7234449">.</span><span class="ident" id="7234450">Sub</span><span class="op" id="7234453">(</span><span class="ident" id="7234454">zero</span><span class="op" id="7234458">,</span>&nbsp;<span class="ident" id="7234460">e</span><span class="op" id="7234461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234469">z</span>&nbsp;<span class="op" id="7234471">:=</span>&nbsp;<span class="builtinfunc" id="7234474">new</span><span class="op" id="7234477">(</span><span class="ident" id="7234478">Rat</span><span class="op" id="7234481">)</span><span class="op" id="7234482">.</span><span class="ident" id="7234483">Abs</span><span class="op" id="7234486">(</span><span class="ident" id="7234487">x</span><span class="op" id="7234488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234492">if</span>&nbsp;<span class="ident" id="7234495">z</span><span class="op" id="7234496">.</span><span class="ident" id="7234497">Cmp</span><span class="op" id="7234500">(</span><span class="ident" id="7234501">e</span><span class="op" id="7234502">)</span>&nbsp;<span class="op" id="7234504">!=</span>&nbsp;<span class="num" id="7234507">0</span>&nbsp;<span class="op" id="7234509">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234514">t</span><span class="op" id="7234515">.</span><span class="ident" id="7234516">Errorf</span><span class="op" id="7234522">(</span><span class="string" id="7234523">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7234550">,</span>&nbsp;<span class="ident" id="7234552">x</span><span class="op" id="7234553">,</span>&nbsp;<span class="ident" id="7234555">z</span><span class="op" id="7234556">,</span>&nbsp;<span class="ident" id="7234558">e</span><span class="op" id="7234559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234566">}</span><br>
<span class="lineno"></span><span class="op" id="7234568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7234571">func</span>&nbsp;<span class="ident" id="7234576">TestRatNeg</span><span class="op" id="7234586">(</span><span class="ident" id="7234587">t</span>&nbsp;<span class="op" id="7234589">*</span><span class="ident" id="7234590">testing</span><span class="op" id="7234597">.</span><span class="ident" id="7234598">T</span><span class="op" id="7234599">)</span>&nbsp;<span class="op" id="7234601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234604">zero</span>&nbsp;<span class="op" id="7234609">:=</span>&nbsp;<span class="builtinfunc" id="7234612">new</span><span class="op" id="7234615">(</span><span class="ident" id="7234616">Rat</span><span class="op" id="7234619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234622">for</span>&nbsp;<span class="ident" id="7234626">_</span><span class="op" id="7234627">,</span>&nbsp;<span class="ident" id="7234629">a</span>&nbsp;<span class="op" id="7234631">:=</span>&nbsp;<span class="keyword" id="7234634">range</span>&nbsp;<span class="ident" id="7234640">setStringTests</span>&nbsp;<span class="op" id="7234655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234659">x</span><span class="op" id="7234660">,</span>&nbsp;<span class="ident" id="7234662">ok</span>&nbsp;<span class="op" id="7234665">:=</span>&nbsp;<span class="builtinfunc" id="7234668">new</span><span class="op" id="7234671">(</span><span class="ident" id="7234672">Rat</span><span class="op" id="7234675">)</span><span class="op" id="7234676">.</span><span class="ident" id="7234677">SetString</span><span class="op" id="7234686">(</span><span class="ident" id="7234687">a</span><span class="op" id="7234688">.</span><span class="ident" id="7234689">in</span><span class="op" id="7234691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234695">if</span>&nbsp;<span class="op" id="7234698">!</span><span class="ident" id="7234699">ok</span>&nbsp;<span class="op" id="7234702">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234707">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234722">e</span>&nbsp;<span class="op" id="7234724">:=</span>&nbsp;<span class="builtinfunc" id="7234727">new</span><span class="op" id="7234730">(</span><span class="ident" id="7234731">Rat</span><span class="op" id="7234734">)</span><span class="op" id="7234735">.</span><span class="ident" id="7234736">Sub</span><span class="op" id="7234739">(</span><span class="ident" id="7234740">zero</span><span class="op" id="7234744">,</span>&nbsp;<span class="ident" id="7234746">x</span><span class="op" id="7234747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234751">z</span>&nbsp;<span class="op" id="7234753">:=</span>&nbsp;<span class="builtinfunc" id="7234756">new</span><span class="op" id="7234759">(</span><span class="ident" id="7234760">Rat</span><span class="op" id="7234763">)</span><span class="op" id="7234764">.</span><span class="ident" id="7234765">Neg</span><span class="op" id="7234768">(</span><span class="ident" id="7234769">x</span><span class="op" id="7234770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234774">if</span>&nbsp;<span class="ident" id="7234777">z</span><span class="op" id="7234778">.</span><span class="ident" id="7234779">Cmp</span><span class="op" id="7234782">(</span><span class="ident" id="7234783">e</span><span class="op" id="7234784">)</span>&nbsp;<span class="op" id="7234786">!=</span>&nbsp;<span class="num" id="7234789">0</span>&nbsp;<span class="op" id="7234791">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234796">t</span><span class="op" id="7234797">.</span><span class="ident" id="7234798">Errorf</span><span class="op" id="7234804">(</span><span class="string" id="7234805">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7234832">,</span>&nbsp;<span class="ident" id="7234834">x</span><span class="op" id="7234835">,</span>&nbsp;<span class="ident" id="7234837">z</span><span class="op" id="7234838">,</span>&nbsp;<span class="ident" id="7234840">e</span><span class="op" id="7234841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7234848">}</span><br>
<span class="lineno"></span><span class="op" id="7234850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7234853">func</span>&nbsp;<span class="ident" id="7234858">TestRatInv</span><span class="op" id="7234868">(</span><span class="ident" id="7234869">t</span>&nbsp;<span class="op" id="7234871">*</span><span class="ident" id="7234872">testing</span><span class="op" id="7234879">.</span><span class="ident" id="7234880">T</span><span class="op" id="7234881">)</span>&nbsp;<span class="op" id="7234883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234886">zero</span>&nbsp;<span class="op" id="7234891">:=</span>&nbsp;<span class="builtinfunc" id="7234894">new</span><span class="op" id="7234897">(</span><span class="ident" id="7234898">Rat</span><span class="op" id="7234901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234904">for</span>&nbsp;<span class="ident" id="7234908">_</span><span class="op" id="7234909">,</span>&nbsp;<span class="ident" id="7234911">a</span>&nbsp;<span class="op" id="7234913">:=</span>&nbsp;<span class="keyword" id="7234916">range</span>&nbsp;<span class="ident" id="7234922">setStringTests</span>&nbsp;<span class="op" id="7234937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7234941">x</span><span class="op" id="7234942">,</span>&nbsp;<span class="ident" id="7234944">ok</span>&nbsp;<span class="op" id="7234947">:=</span>&nbsp;<span class="builtinfunc" id="7234950">new</span><span class="op" id="7234953">(</span><span class="ident" id="7234954">Rat</span><span class="op" id="7234957">)</span><span class="op" id="7234958">.</span><span class="ident" id="7234959">SetString</span><span class="op" id="7234968">(</span><span class="ident" id="7234969">a</span><span class="op" id="7234970">.</span><span class="ident" id="7234971">in</span><span class="op" id="7234973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234977">if</span>&nbsp;<span class="op" id="7234980">!</span><span class="ident" id="7234981">ok</span>&nbsp;<span class="op" id="7234984">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7234989">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7235004">if</span>&nbsp;<span class="ident" id="7235007">x</span><span class="op" id="7235008">.</span><span class="ident" id="7235009">Cmp</span><span class="op" id="7235012">(</span><span class="ident" id="7235013">zero</span><span class="op" id="7235017">)</span>&nbsp;<span class="op" id="7235019">==</span>&nbsp;<span class="num" id="7235022">0</span>&nbsp;<span class="op" id="7235024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7235029">continue</span>&nbsp;<span class="comment" id="7235038">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235066">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235070">e</span>&nbsp;<span class="op" id="7235072">:=</span>&nbsp;<span class="builtinfunc" id="7235075">new</span><span class="op" id="7235078">(</span><span class="ident" id="7235079">Rat</span><span class="op" id="7235082">)</span><span class="op" id="7235083">.</span><span class="ident" id="7235084">SetFrac</span><span class="op" id="7235091">(</span><span class="ident" id="7235092">x</span><span class="op" id="7235093">.</span><span class="ident" id="7235094">Denom</span><span class="op" id="7235099">(</span><span class="op" id="7235100">)</span><span class="op" id="7235101">,</span>&nbsp;<span class="ident" id="7235103">x</span><span class="op" id="7235104">.</span><span class="ident" id="7235105">Num</span><span class="op" id="7235108">(</span><span class="op" id="7235109">)</span><span class="op" id="7235110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235114">z</span>&nbsp;<span class="op" id="7235116">:=</span>&nbsp;<span class="builtinfunc" id="7235119">new</span><span class="op" id="7235122">(</span><span class="ident" id="7235123">Rat</span><span class="op" id="7235126">)</span><span class="op" id="7235127">.</span><span class="ident" id="7235128">Inv</span><span class="op" id="7235131">(</span><span class="ident" id="7235132">x</span><span class="op" id="7235133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7235137">if</span>&nbsp;<span class="ident" id="7235140">z</span><span class="op" id="7235141">.</span><span class="ident" id="7235142">Cmp</span><span class="op" id="7235145">(</span><span class="ident" id="7235146">e</span><span class="op" id="7235147">)</span>&nbsp;<span class="op" id="7235149">!=</span>&nbsp;<span class="num" id="7235152">0</span>&nbsp;<span class="op" id="7235154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235159">t</span><span class="op" id="7235160">.</span><span class="ident" id="7235161">Errorf</span><span class="op" id="7235167">(</span><span class="string" id="7235168">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7235195">,</span>&nbsp;<span class="ident" id="7235197">x</span><span class="op" id="7235198">,</span>&nbsp;<span class="ident" id="7235200">z</span><span class="op" id="7235201">,</span>&nbsp;<span class="ident" id="7235203">e</span><span class="op" id="7235204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235208">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235211">}</span><br>
<span class="lineno"></span><span class="op" id="7235213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7235216">type</span>&nbsp;<span class="ident" id="7235221">ratBinFun</span>&nbsp;<span class="keyword" id="7235231">func</span><span class="op" id="7235235">(</span><span class="ident" id="7235236">z</span><span class="op" id="7235237">,</span>&nbsp;<span class="ident" id="7235239">x</span><span class="op" id="7235240">,</span>&nbsp;<span class="ident" id="7235242">y</span>&nbsp;<span class="op" id="7235244">*</span><span class="ident" id="7235245">Rat</span><span class="op" id="7235248">)</span>&nbsp;<span class="op" id="7235250">*</span><span class="ident" id="7235251">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7235255">type</span>&nbsp;<span class="ident" id="7235260">ratBinArg</span>&nbsp;<span class="keyword" id="7235270">struct</span>&nbsp;<span class="op" id="7235277">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235280">x</span><span class="op" id="7235281">,</span>&nbsp;<span class="ident" id="7235283">y</span><span class="op" id="7235284">,</span>&nbsp;<span class="ident" id="7235286">z</span>&nbsp;<span class="builtintype" id="7235288">string</span><br>
<span class="lineno"></span><span class="op" id="7235295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7235298">func</span>&nbsp;<span class="ident" id="7235303">testRatBin</span><span class="op" id="7235313">(</span><span class="ident" id="7235314">t</span>&nbsp;<span class="op" id="7235316">*</span><span class="ident" id="7235317">testing</span><span class="op" id="7235324">.</span><span class="ident" id="7235325">T</span><span class="op" id="7235326">,</span>&nbsp;<span class="ident" id="7235328">i</span>&nbsp;<span class="builtintype" id="7235330">int</span><span class="op" id="7235333">,</span>&nbsp;<span class="ident" id="7235335">name</span>&nbsp;<span class="builtintype" id="7235340">string</span><span class="op" id="7235346">,</span>&nbsp;<span class="ident" id="7235348">f</span>&nbsp;<span class="ident" id="7235350">ratBinFun</span><span class="op" id="7235359">,</span>&nbsp;<span class="ident" id="7235361">a</span>&nbsp;<span class="ident" id="7235363">ratBinArg</span><span class="op" id="7235372">)</span>&nbsp;<span class="op" id="7235374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235377">x</span><span class="op" id="7235378">,</span>&nbsp;<span class="ident" id="7235380">_</span>&nbsp;<span class="op" id="7235382">:=</span>&nbsp;<span class="builtinfunc" id="7235385">new</span><span class="op" id="7235388">(</span><span class="ident" id="7235389">Rat</span><span class="op" id="7235392">)</span><span class="op" id="7235393">.</span><span class="ident" id="7235394">SetString</span><span class="op" id="7235403">(</span><span class="ident" id="7235404">a</span><span class="op" id="7235405">.</span><span class="ident" id="7235406">x</span><span class="op" id="7235407">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235410">y</span><span class="op" id="7235411">,</span>&nbsp;<span class="ident" id="7235413">_</span>&nbsp;<span class="op" id="7235415">:=</span>&nbsp;<span class="builtinfunc" id="7235418">new</span><span class="op" id="7235421">(</span><span class="ident" id="7235422">Rat</span><span class="op" id="7235425">)</span><span class="op" id="7235426">.</span><span class="ident" id="7235427">SetString</span><span class="op" id="7235436">(</span><span class="ident" id="7235437">a</span><span class="op" id="7235438">.</span><span class="ident" id="7235439">y</span><span class="op" id="7235440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235443">z</span><span class="op" id="7235444">,</span>&nbsp;<span class="ident" id="7235446">_</span>&nbsp;<span class="op" id="7235448">:=</span>&nbsp;<span class="builtinfunc" id="7235451">new</span><span class="op" id="7235454">(</span><span class="ident" id="7235455">Rat</span><span class="op" id="7235458">)</span><span class="op" id="7235459">.</span><span class="ident" id="7235460">SetString</span><span class="op" id="7235469">(</span><span class="ident" id="7235470">a</span><span class="op" id="7235471">.</span><span class="ident" id="7235472">z</span><span class="op" id="7235473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235476">out</span>&nbsp;<span class="op" id="7235480">:=</span>&nbsp;<span class="ident" id="7235483">f</span><span class="op" id="7235484">(</span><span class="builtinfunc" id="7235485">new</span><span class="op" id="7235488">(</span><span class="ident" id="7235489">Rat</span><span class="op" id="7235492">)</span><span class="op" id="7235493">,</span>&nbsp;<span class="ident" id="7235495">x</span><span class="op" id="7235496">,</span>&nbsp;<span class="ident" id="7235498">y</span><span class="op" id="7235499">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7235503">if</span>&nbsp;<span class="ident" id="7235506">out</span><span class="op" id="7235509">.</span><span class="ident" id="7235510">Cmp</span><span class="op" id="7235513">(</span><span class="ident" id="7235514">z</span><span class="op" id="7235515">)</span>&nbsp;<span class="op" id="7235517">!=</span>&nbsp;<span class="num" id="7235520">0</span>&nbsp;<span class="op" id="7235522">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235526">t</span><span class="op" id="7235527">.</span><span class="ident" id="7235528">Errorf</span><span class="op" id="7235534">(</span><span class="string" id="7235535">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7235558">,</span>&nbsp;<span class="ident" id="7235560">name</span><span class="op" id="7235564">,</span>&nbsp;<span class="ident" id="7235566">i</span><span class="op" id="7235567">,</span>&nbsp;<span class="ident" id="7235569">out</span><span class="op" id="7235572">,</span>&nbsp;<span class="ident" id="7235574">z</span><span class="op" id="7235575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235578">}</span><br>
<span class="lineno"></span><span class="op" id="7235580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7235583">var</span>&nbsp;<span class="ident" id="7235587">ratBinTests</span>&nbsp;<span class="op" id="7235599">=</span>&nbsp;<span class="op" id="7235601">[</span><span class="op" id="7235602">]</span><span class="keyword" id="7235603">struct</span>&nbsp;<span class="op" id="7235610">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235613">x</span><span class="op" id="7235614">,</span>&nbsp;<span class="ident" id="7235616">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7235623">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7235631">sum</span><span class="op" id="7235634">,</span>&nbsp;<span class="ident" id="7235636">prod</span>&nbsp;<span class="builtintype" id="7235641">string</span><br>
<span class="lineno"></span><span class="op" id="7235648">}</span><span class="op" id="7235649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235652">{</span><span class="string" id="7235653">&#34;0&#34;</span><span class="op" id="7235656">,</span>&nbsp;<span class="string" id="7235658">&#34;0&#34;</span><span class="op" id="7235661">,</span>&nbsp;<span class="string" id="7235663">&#34;0&#34;</span><span class="op" id="7235666">,</span>&nbsp;<span class="string" id="7235668">&#34;0&#34;</span><span class="op" id="7235671">}</span><span class="op" id="7235672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235675">{</span><span class="string" id="7235676">&#34;0&#34;</span><span class="op" id="7235679">,</span>&nbsp;<span class="string" id="7235681">&#34;1&#34;</span><span class="op" id="7235684">,</span>&nbsp;<span class="string" id="7235686">&#34;1&#34;</span><span class="op" id="7235689">,</span>&nbsp;<span class="string" id="7235691">&#34;0&#34;</span><span class="op" id="7235694">}</span><span class="op" id="7235695">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235698">{</span><span class="string" id="7235699">&#34;-1&#34;</span><span class="op" id="7235703">,</span>&nbsp;<span class="string" id="7235705">&#34;0&#34;</span><span class="op" id="7235708">,</span>&nbsp;<span class="string" id="7235710">&#34;-1&#34;</span><span class="op" id="7235714">,</span>&nbsp;<span class="string" id="7235716">&#34;0&#34;</span><span class="op" id="7235719">}</span><span class="op" id="7235720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235723">{</span><span class="string" id="7235724">&#34;-1&#34;</span><span class="op" id="7235728">,</span>&nbsp;<span class="string" id="7235730">&#34;1&#34;</span><span class="op" id="7235733">,</span>&nbsp;<span class="string" id="7235735">&#34;0&#34;</span><span class="op" id="7235738">,</span>&nbsp;<span class="string" id="7235740">&#34;-1&#34;</span><span class="op" id="7235744">}</span><span class="op" id="7235745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235748">{</span><span class="string" id="7235749">&#34;1&#34;</span><span class="op" id="7235752">,</span>&nbsp;<span class="string" id="7235754">&#34;1&#34;</span><span class="op" id="7235757">,</span>&nbsp;<span class="string" id="7235759">&#34;2&#34;</span><span class="op" id="7235762">,</span>&nbsp;<span class="string" id="7235764">&#34;1&#34;</span><span class="op" id="7235767">}</span><span class="op" id="7235768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235771">{</span><span class="string" id="7235772">&#34;1/2&#34;</span><span class="op" id="7235777">,</span>&nbsp;<span class="string" id="7235779">&#34;1/2&#34;</span><span class="op" id="7235784">,</span>&nbsp;<span class="string" id="7235786">&#34;1&#34;</span><span class="op" id="7235789">,</span>&nbsp;<span class="string" id="7235791">&#34;1/4&#34;</span><span class="op" id="7235796">}</span><span class="op" id="7235797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235800">{</span><span class="string" id="7235801">&#34;1/4&#34;</span><span class="op" id="7235806">,</span>&nbsp;<span class="string" id="7235808">&#34;1/3&#34;</span><span class="op" id="7235813">,</span>&nbsp;<span class="string" id="7235815">&#34;7/12&#34;</span><span class="op" id="7235821">,</span>&nbsp;<span class="string" id="7235823">&#34;1/12&#34;</span><span class="op" id="7235829">}</span><span class="op" id="7235830">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235833">{</span><span class="string" id="7235834">&#34;2/5&#34;</span><span class="op" id="7235839">,</span>&nbsp;<span class="string" id="7235841">&#34;-14/3&#34;</span><span class="op" id="7235848">,</span>&nbsp;<span class="string" id="7235850">&#34;-64/15&#34;</span><span class="op" id="7235858">,</span>&nbsp;<span class="string" id="7235860">&#34;-28/15&#34;</span><span class="op" id="7235868">}</span><span class="op" id="7235869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7235872">{</span><span class="string" id="7235873">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7235900">,</span>&nbsp;<span class="string" id="7235902">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7235930">,</span>&nbsp;<span class="string" id="7235932">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7235998">,</span>&nbsp;<span class="string" id="7236000">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7236050">}</span><span class="op" id="7236051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236054">{</span><span class="string" id="7236055">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7236080">,</span>&nbsp;<span class="string" id="7236082">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7236107">,</span>&nbsp;<span class="string" id="7236109">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7236135">,</span>&nbsp;<span class="string" id="7236137">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7236180">}</span><span class="op" id="7236181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236184">{</span><span class="string" id="7236185">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7236247">,</span>&nbsp;<span class="string" id="7236249">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7236275">,</span>&nbsp;<span class="string" id="7236277">&#34;-27/133467566250814981&#34;</span><span class="op" id="7236301">,</span>&nbsp;<span class="string" id="7236303">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7236386">}</span><span class="op" id="7236387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236390">{</span><span class="string" id="7236391">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7236450">,</span>&nbsp;<span class="string" id="7236452">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7236485">,</span>&nbsp;<span class="string" id="7236487">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7236521">,</span>&nbsp;<span class="string" id="7236523">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7236610">}</span><span class="op" id="7236611">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236614">{</span><span class="string" id="7236615">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7236640">,</span>&nbsp;<span class="string" id="7236642">&#34;5/2848423294177090248&#34;</span><span class="op" id="7236665">,</span>&nbsp;<span class="string" id="7236667">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7236727">,</span>&nbsp;<span class="string" id="7236729">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7236772">}</span><span class="op" id="7236773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236776">{</span><span class="string" id="7236777">&#34;26946729/330400702820&#34;</span><span class="op" id="7236800">,</span>&nbsp;<span class="string" id="7236802">&#34;41563965/225583428284&#34;</span><span class="op" id="7236825">,</span>&nbsp;<span class="string" id="7236827">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7236871">,</span>&nbsp;<span class="string" id="7236873">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7236914">}</span><span class="op" id="7236915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7236918">{</span><span class="string" id="7236919">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7236943">,</span>&nbsp;<span class="string" id="7236945">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7236989">,</span>&nbsp;<span class="string" id="7236991">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7237055">,</span>&nbsp;<span class="string" id="7237057">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7237120">}</span><span class="op" id="7237121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7237124">{</span><span class="string" id="7237125">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7237165">,</span>&nbsp;<span class="string" id="7237167">&#34;29/712593081308&#34;</span><span class="op" id="7237184">,</span>&nbsp;<span class="string" id="7237186">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7237249">,</span>&nbsp;<span class="string" id="7237251">&#34;808/45524274987585732633&#34;</span><span class="op" id="7237277">}</span><span class="op" id="7237278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7237281">{</span><span class="string" id="7237282">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7237323">,</span>&nbsp;<span class="string" id="7237325">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7237351">,</span>&nbsp;<span class="string" id="7237353">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7237424">,</span>&nbsp;<span class="string" id="7237426">&#34;8967230/3296219033&#34;</span><span class="op" id="7237446">}</span><span class="op" id="7237447">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7237450">{</span><span class="string" id="7237451">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7237498">,</span>&nbsp;<span class="string" id="7237500">&#34;9381566963714/9633539&#34;</span><span class="op" id="7237523">,</span>&nbsp;<span class="string" id="7237525">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7237594">,</span>&nbsp;<span class="string" id="7237596">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7237623">}</span><span class="op" id="7237624">,</span><br>
<span class="lineno"></span><span class="op" id="7237626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7237629">func</span>&nbsp;<span class="ident" id="7237634">TestRatBin</span><span class="op" id="7237644">(</span><span class="ident" id="7237645">t</span>&nbsp;<span class="op" id="7237647">*</span><span class="ident" id="7237648">testing</span><span class="op" id="7237655">.</span><span class="ident" id="7237656">T</span><span class="op" id="7237657">)</span>&nbsp;<span class="op" id="7237659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7237662">for</span>&nbsp;<span class="ident" id="7237666">i</span><span class="op" id="7237667">,</span>&nbsp;<span class="ident" id="7237669">test</span>&nbsp;<span class="op" id="7237674">:=</span>&nbsp;<span class="keyword" id="7237677">range</span>&nbsp;<span class="ident" id="7237683">ratBinTests</span>&nbsp;<span class="op" id="7237695">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237699">arg</span>&nbsp;<span class="op" id="7237703">:=</span>&nbsp;<span class="ident" id="7237706">ratBinArg</span><span class="op" id="7237715">{</span><span class="ident" id="7237716">test</span><span class="op" id="7237720">.</span><span class="ident" id="7237721">x</span><span class="op" id="7237722">,</span>&nbsp;<span class="ident" id="7237724">test</span><span class="op" id="7237728">.</span><span class="ident" id="7237729">y</span><span class="op" id="7237730">,</span>&nbsp;<span class="ident" id="7237732">test</span><span class="op" id="7237736">.</span><span class="ident" id="7237737">sum</span><span class="op" id="7237740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237744">testRatBin</span><span class="op" id="7237754">(</span><span class="ident" id="7237755">t</span><span class="op" id="7237756">,</span>&nbsp;<span class="ident" id="7237758">i</span><span class="op" id="7237759">,</span>&nbsp;<span class="string" id="7237761">&#34;Add&#34;</span><span class="op" id="7237766">,</span>&nbsp;<span class="op" id="7237768">(</span><span class="op" id="7237769">*</span><span class="ident" id="7237770">Rat</span><span class="op" id="7237773">)</span><span class="op" id="7237774">.</span><span class="ident" id="7237775">Add</span><span class="op" id="7237778">,</span>&nbsp;<span class="ident" id="7237780">arg</span><span class="op" id="7237783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237788">arg</span>&nbsp;<span class="op" id="7237792">=</span>&nbsp;<span class="ident" id="7237794">ratBinArg</span><span class="op" id="7237803">{</span><span class="ident" id="7237804">test</span><span class="op" id="7237808">.</span><span class="ident" id="7237809">y</span><span class="op" id="7237810">,</span>&nbsp;<span class="ident" id="7237812">test</span><span class="op" id="7237816">.</span><span class="ident" id="7237817">x</span><span class="op" id="7237818">,</span>&nbsp;<span class="ident" id="7237820">test</span><span class="op" id="7237824">.</span><span class="ident" id="7237825">sum</span><span class="op" id="7237828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237832">testRatBin</span><span class="op" id="7237842">(</span><span class="ident" id="7237843">t</span><span class="op" id="7237844">,</span>&nbsp;<span class="ident" id="7237846">i</span><span class="op" id="7237847">,</span>&nbsp;<span class="string" id="7237849">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7237864">,</span>&nbsp;<span class="op" id="7237866">(</span><span class="op" id="7237867">*</span><span class="ident" id="7237868">Rat</span><span class="op" id="7237871">)</span><span class="op" id="7237872">.</span><span class="ident" id="7237873">Add</span><span class="op" id="7237876">,</span>&nbsp;<span class="ident" id="7237878">arg</span><span class="op" id="7237881">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237886">arg</span>&nbsp;<span class="op" id="7237890">=</span>&nbsp;<span class="ident" id="7237892">ratBinArg</span><span class="op" id="7237901">{</span><span class="ident" id="7237902">test</span><span class="op" id="7237906">.</span><span class="ident" id="7237907">sum</span><span class="op" id="7237910">,</span>&nbsp;<span class="ident" id="7237912">test</span><span class="op" id="7237916">.</span><span class="ident" id="7237917">x</span><span class="op" id="7237918">,</span>&nbsp;<span class="ident" id="7237920">test</span><span class="op" id="7237924">.</span><span class="ident" id="7237925">y</span><span class="op" id="7237926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237930">testRatBin</span><span class="op" id="7237940">(</span><span class="ident" id="7237941">t</span><span class="op" id="7237942">,</span>&nbsp;<span class="ident" id="7237944">i</span><span class="op" id="7237945">,</span>&nbsp;<span class="string" id="7237947">&#34;Sub&#34;</span><span class="op" id="7237952">,</span>&nbsp;<span class="op" id="7237954">(</span><span class="op" id="7237955">*</span><span class="ident" id="7237956">Rat</span><span class="op" id="7237959">)</span><span class="op" id="7237960">.</span><span class="ident" id="7237961">Sub</span><span class="op" id="7237964">,</span>&nbsp;<span class="ident" id="7237966">arg</span><span class="op" id="7237969">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7237974">arg</span>&nbsp;<span class="op" id="7237978">=</span>&nbsp;<span class="ident" id="7237980">ratBinArg</span><span class="op" id="7237989">{</span><span class="ident" id="7237990">test</span><span class="op" id="7237994">.</span><span class="ident" id="7237995">sum</span><span class="op" id="7237998">,</span>&nbsp;<span class="ident" id="7238000">test</span><span class="op" id="7238004">.</span><span class="ident" id="7238005">y</span><span class="op" id="7238006">,</span>&nbsp;<span class="ident" id="7238008">test</span><span class="op" id="7238012">.</span><span class="ident" id="7238013">x</span><span class="op" id="7238014">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238018">testRatBin</span><span class="op" id="7238028">(</span><span class="ident" id="7238029">t</span><span class="op" id="7238030">,</span>&nbsp;<span class="ident" id="7238032">i</span><span class="op" id="7238033">,</span>&nbsp;<span class="string" id="7238035">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7238050">,</span>&nbsp;<span class="op" id="7238052">(</span><span class="op" id="7238053">*</span><span class="ident" id="7238054">Rat</span><span class="op" id="7238057">)</span><span class="op" id="7238058">.</span><span class="ident" id="7238059">Sub</span><span class="op" id="7238062">,</span>&nbsp;<span class="ident" id="7238064">arg</span><span class="op" id="7238067">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238072">arg</span>&nbsp;<span class="op" id="7238076">=</span>&nbsp;<span class="ident" id="7238078">ratBinArg</span><span class="op" id="7238087">{</span><span class="ident" id="7238088">test</span><span class="op" id="7238092">.</span><span class="ident" id="7238093">x</span><span class="op" id="7238094">,</span>&nbsp;<span class="ident" id="7238096">test</span><span class="op" id="7238100">.</span><span class="ident" id="7238101">y</span><span class="op" id="7238102">,</span>&nbsp;<span class="ident" id="7238104">test</span><span class="op" id="7238108">.</span><span class="ident" id="7238109">prod</span><span class="op" id="7238113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238117">testRatBin</span><span class="op" id="7238127">(</span><span class="ident" id="7238128">t</span><span class="op" id="7238129">,</span>&nbsp;<span class="ident" id="7238131">i</span><span class="op" id="7238132">,</span>&nbsp;<span class="string" id="7238134">&#34;Mul&#34;</span><span class="op" id="7238139">,</span>&nbsp;<span class="op" id="7238141">(</span><span class="op" id="7238142">*</span><span class="ident" id="7238143">Rat</span><span class="op" id="7238146">)</span><span class="op" id="7238147">.</span><span class="ident" id="7238148">Mul</span><span class="op" id="7238151">,</span>&nbsp;<span class="ident" id="7238153">arg</span><span class="op" id="7238156">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238161">arg</span>&nbsp;<span class="op" id="7238165">=</span>&nbsp;<span class="ident" id="7238167">ratBinArg</span><span class="op" id="7238176">{</span><span class="ident" id="7238177">test</span><span class="op" id="7238181">.</span><span class="ident" id="7238182">y</span><span class="op" id="7238183">,</span>&nbsp;<span class="ident" id="7238185">test</span><span class="op" id="7238189">.</span><span class="ident" id="7238190">x</span><span class="op" id="7238191">,</span>&nbsp;<span class="ident" id="7238193">test</span><span class="op" id="7238197">.</span><span class="ident" id="7238198">prod</span><span class="op" id="7238202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238206">testRatBin</span><span class="op" id="7238216">(</span><span class="ident" id="7238217">t</span><span class="op" id="7238218">,</span>&nbsp;<span class="ident" id="7238220">i</span><span class="op" id="7238221">,</span>&nbsp;<span class="string" id="7238223">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7238238">,</span>&nbsp;<span class="op" id="7238240">(</span><span class="op" id="7238241">*</span><span class="ident" id="7238242">Rat</span><span class="op" id="7238245">)</span><span class="op" id="7238246">.</span><span class="ident" id="7238247">Mul</span><span class="op" id="7238250">,</span>&nbsp;<span class="ident" id="7238252">arg</span><span class="op" id="7238255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7238260">if</span>&nbsp;<span class="ident" id="7238263">test</span><span class="op" id="7238267">.</span><span class="ident" id="7238268">x</span>&nbsp;<span class="op" id="7238270">!=</span>&nbsp;<span class="string" id="7238273">&#34;0&#34;</span>&nbsp;<span class="op" id="7238277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238282">arg</span>&nbsp;<span class="op" id="7238286">=</span>&nbsp;<span class="ident" id="7238288">ratBinArg</span><span class="op" id="7238297">{</span><span class="ident" id="7238298">test</span><span class="op" id="7238302">.</span><span class="ident" id="7238303">prod</span><span class="op" id="7238307">,</span>&nbsp;<span class="ident" id="7238309">test</span><span class="op" id="7238313">.</span><span class="ident" id="7238314">x</span><span class="op" id="7238315">,</span>&nbsp;<span class="ident" id="7238317">test</span><span class="op" id="7238321">.</span><span class="ident" id="7238322">y</span><span class="op" id="7238323">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238328">testRatBin</span><span class="op" id="7238338">(</span><span class="ident" id="7238339">t</span><span class="op" id="7238340">,</span>&nbsp;<span class="ident" id="7238342">i</span><span class="op" id="7238343">,</span>&nbsp;<span class="string" id="7238345">&#34;Quo&#34;</span><span class="op" id="7238350">,</span>&nbsp;<span class="op" id="7238352">(</span><span class="op" id="7238353">*</span><span class="ident" id="7238354">Rat</span><span class="op" id="7238357">)</span><span class="op" id="7238358">.</span><span class="ident" id="7238359">Quo</span><span class="op" id="7238362">,</span>&nbsp;<span class="ident" id="7238364">arg</span><span class="op" id="7238367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7238376">if</span>&nbsp;<span class="ident" id="7238379">test</span><span class="op" id="7238383">.</span><span class="ident" id="7238384">y</span>&nbsp;<span class="op" id="7238386">!=</span>&nbsp;<span class="string" id="7238389">&#34;0&#34;</span>&nbsp;<span class="op" id="7238393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238398">arg</span>&nbsp;<span class="op" id="7238402">=</span>&nbsp;<span class="ident" id="7238404">ratBinArg</span><span class="op" id="7238413">{</span><span class="ident" id="7238414">test</span><span class="op" id="7238418">.</span><span class="ident" id="7238419">prod</span><span class="op" id="7238423">,</span>&nbsp;<span class="ident" id="7238425">test</span><span class="op" id="7238429">.</span><span class="ident" id="7238430">y</span><span class="op" id="7238431">,</span>&nbsp;<span class="ident" id="7238433">test</span><span class="op" id="7238437">.</span><span class="ident" id="7238438">x</span><span class="op" id="7238439">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238444">testRatBin</span><span class="op" id="7238454">(</span><span class="ident" id="7238455">t</span><span class="op" id="7238456">,</span>&nbsp;<span class="ident" id="7238458">i</span><span class="op" id="7238459">,</span>&nbsp;<span class="string" id="7238461">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7238476">,</span>&nbsp;<span class="op" id="7238478">(</span><span class="op" id="7238479">*</span><span class="ident" id="7238480">Rat</span><span class="op" id="7238483">)</span><span class="op" id="7238484">.</span><span class="ident" id="7238485">Quo</span><span class="op" id="7238488">,</span>&nbsp;<span class="ident" id="7238490">arg</span><span class="op" id="7238493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238500">}</span><br>
<span class="lineno"></span><span class="op" id="7238502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7238505">func</span>&nbsp;<span class="ident" id="7238510">TestIssue820</span><span class="op" id="7238522">(</span><span class="ident" id="7238523">t</span>&nbsp;<span class="op" id="7238525">*</span><span class="ident" id="7238526">testing</span><span class="op" id="7238533">.</span><span class="ident" id="7238534">T</span><span class="op" id="7238535">)</span>&nbsp;<span class="op" id="7238537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238540">x</span>&nbsp;<span class="op" id="7238542">:=</span>&nbsp;<span class="ident" id="7238545">NewRat</span><span class="op" id="7238551">(</span><span class="num" id="7238552">3</span><span class="op" id="7238553">,</span>&nbsp;<span class="num" id="7238555">1</span><span class="op" id="7238556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238559">y</span>&nbsp;<span class="op" id="7238561">:=</span>&nbsp;<span class="ident" id="7238564">NewRat</span><span class="op" id="7238570">(</span><span class="num" id="7238571">2</span><span class="op" id="7238572">,</span>&nbsp;<span class="num" id="7238574">1</span><span class="op" id="7238575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238578">z</span>&nbsp;<span class="op" id="7238580">:=</span>&nbsp;<span class="ident" id="7238583">y</span><span class="op" id="7238584">.</span><span class="ident" id="7238585">Quo</span><span class="op" id="7238588">(</span><span class="ident" id="7238589">x</span><span class="op" id="7238590">,</span>&nbsp;<span class="ident" id="7238592">y</span><span class="op" id="7238593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238596">q</span>&nbsp;<span class="op" id="7238598">:=</span>&nbsp;<span class="ident" id="7238601">NewRat</span><span class="op" id="7238607">(</span><span class="num" id="7238608">3</span><span class="op" id="7238609">,</span>&nbsp;<span class="num" id="7238611">2</span><span class="op" id="7238612">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7238615">if</span>&nbsp;<span class="ident" id="7238618">z</span><span class="op" id="7238619">.</span><span class="ident" id="7238620">Cmp</span><span class="op" id="7238623">(</span><span class="ident" id="7238624">q</span><span class="op" id="7238625">)</span>&nbsp;<span class="op" id="7238627">!=</span>&nbsp;<span class="num" id="7238630">0</span>&nbsp;<span class="op" id="7238632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238636">t</span><span class="op" id="7238637">.</span><span class="ident" id="7238638">Errorf</span><span class="op" id="7238644">(</span><span class="string" id="7238645">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7238661">,</span>&nbsp;<span class="ident" id="7238663">z</span><span class="op" id="7238664">,</span>&nbsp;<span class="ident" id="7238666">q</span><span class="op" id="7238667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238674">y</span>&nbsp;<span class="op" id="7238676">=</span>&nbsp;<span class="ident" id="7238678">NewRat</span><span class="op" id="7238684">(</span><span class="num" id="7238685">3</span><span class="op" id="7238686">,</span>&nbsp;<span class="num" id="7238688">1</span><span class="op" id="7238689">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238692">x</span>&nbsp;<span class="op" id="7238694">=</span>&nbsp;<span class="ident" id="7238696">NewRat</span><span class="op" id="7238702">(</span><span class="num" id="7238703">2</span><span class="op" id="7238704">,</span>&nbsp;<span class="num" id="7238706">1</span><span class="op" id="7238707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238710">z</span>&nbsp;<span class="op" id="7238712">=</span>&nbsp;<span class="ident" id="7238714">y</span><span class="op" id="7238715">.</span><span class="ident" id="7238716">Quo</span><span class="op" id="7238719">(</span><span class="ident" id="7238720">x</span><span class="op" id="7238721">,</span>&nbsp;<span class="ident" id="7238723">y</span><span class="op" id="7238724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238727">q</span>&nbsp;<span class="op" id="7238729">=</span>&nbsp;<span class="ident" id="7238731">NewRat</span><span class="op" id="7238737">(</span><span class="num" id="7238738">2</span><span class="op" id="7238739">,</span>&nbsp;<span class="num" id="7238741">3</span><span class="op" id="7238742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7238745">if</span>&nbsp;<span class="ident" id="7238748">z</span><span class="op" id="7238749">.</span><span class="ident" id="7238750">Cmp</span><span class="op" id="7238753">(</span><span class="ident" id="7238754">q</span><span class="op" id="7238755">)</span>&nbsp;<span class="op" id="7238757">!=</span>&nbsp;<span class="num" id="7238760">0</span>&nbsp;<span class="op" id="7238762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238766">t</span><span class="op" id="7238767">.</span><span class="ident" id="7238768">Errorf</span><span class="op" id="7238774">(</span><span class="string" id="7238775">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7238791">,</span>&nbsp;<span class="ident" id="7238793">z</span><span class="op" id="7238794">,</span>&nbsp;<span class="ident" id="7238796">q</span><span class="op" id="7238797">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238804">x</span>&nbsp;<span class="op" id="7238806">=</span>&nbsp;<span class="ident" id="7238808">NewRat</span><span class="op" id="7238814">(</span><span class="num" id="7238815">3</span><span class="op" id="7238816">,</span>&nbsp;<span class="num" id="7238818">1</span><span class="op" id="7238819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238822">z</span>&nbsp;<span class="op" id="7238824">=</span>&nbsp;<span class="ident" id="7238826">x</span><span class="op" id="7238827">.</span><span class="ident" id="7238828">Quo</span><span class="op" id="7238831">(</span><span class="ident" id="7238832">x</span><span class="op" id="7238833">,</span>&nbsp;<span class="ident" id="7238835">x</span><span class="op" id="7238836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238839">q</span>&nbsp;<span class="op" id="7238841">=</span>&nbsp;<span class="ident" id="7238843">NewRat</span><span class="op" id="7238849">(</span><span class="num" id="7238850">3</span><span class="op" id="7238851">,</span>&nbsp;<span class="num" id="7238853">3</span><span class="op" id="7238854">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7238857">if</span>&nbsp;<span class="ident" id="7238860">z</span><span class="op" id="7238861">.</span><span class="ident" id="7238862">Cmp</span><span class="op" id="7238865">(</span><span class="ident" id="7238866">q</span><span class="op" id="7238867">)</span>&nbsp;<span class="op" id="7238869">!=</span>&nbsp;<span class="num" id="7238872">0</span>&nbsp;<span class="op" id="7238874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238878">t</span><span class="op" id="7238879">.</span><span class="ident" id="7238880">Errorf</span><span class="op" id="7238886">(</span><span class="string" id="7238887">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7238903">,</span>&nbsp;<span class="ident" id="7238905">z</span><span class="op" id="7238906">,</span>&nbsp;<span class="ident" id="7238908">q</span><span class="op" id="7238909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238912">}</span><br>
<span class="lineno"></span><span class="op" id="7238914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7238917">var</span>&nbsp;<span class="ident" id="7238921">setFrac64Tests</span>&nbsp;<span class="op" id="7238936">=</span>&nbsp;<span class="op" id="7238938">[</span><span class="op" id="7238939">]</span><span class="keyword" id="7238940">struct</span>&nbsp;<span class="op" id="7238947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238950">a</span><span class="op" id="7238951">,</span>&nbsp;<span class="ident" id="7238953">b</span>&nbsp;<span class="ident" id="7238955">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7238962">out</span>&nbsp;&nbsp;<span class="builtintype" id="7238967">string</span><br>
<span class="lineno"></span><span class="op" id="7238974">}</span><span class="op" id="7238975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238978">{</span><span class="num" id="7238979">0</span><span class="op" id="7238980">,</span>&nbsp;<span class="num" id="7238982">1</span><span class="op" id="7238983">,</span>&nbsp;<span class="string" id="7238985">&#34;0&#34;</span><span class="op" id="7238988">}</span><span class="op" id="7238989">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7238992">{</span><span class="num" id="7238993">0</span><span class="op" id="7238994">,</span>&nbsp;<span class="op" id="7238996">-</span><span class="num" id="7238997">1</span><span class="op" id="7238998">,</span>&nbsp;<span class="string" id="7239000">&#34;0&#34;</span><span class="op" id="7239003">}</span><span class="op" id="7239004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239007">{</span><span class="num" id="7239008">1</span><span class="op" id="7239009">,</span>&nbsp;<span class="num" id="7239011">1</span><span class="op" id="7239012">,</span>&nbsp;<span class="string" id="7239014">&#34;1&#34;</span><span class="op" id="7239017">}</span><span class="op" id="7239018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239021">{</span><span class="op" id="7239022">-</span><span class="num" id="7239023">1</span><span class="op" id="7239024">,</span>&nbsp;<span class="num" id="7239026">1</span><span class="op" id="7239027">,</span>&nbsp;<span class="string" id="7239029">&#34;-1&#34;</span><span class="op" id="7239033">}</span><span class="op" id="7239034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239037">{</span><span class="num" id="7239038">1</span><span class="op" id="7239039">,</span>&nbsp;<span class="op" id="7239041">-</span><span class="num" id="7239042">1</span><span class="op" id="7239043">,</span>&nbsp;<span class="string" id="7239045">&#34;-1&#34;</span><span class="op" id="7239049">}</span><span class="op" id="7239050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239053">{</span><span class="op" id="7239054">-</span><span class="num" id="7239055">1</span><span class="op" id="7239056">,</span>&nbsp;<span class="op" id="7239058">-</span><span class="num" id="7239059">1</span><span class="op" id="7239060">,</span>&nbsp;<span class="string" id="7239062">&#34;1&#34;</span><span class="op" id="7239065">}</span><span class="op" id="7239066">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239069">{</span><span class="op" id="7239070">-</span><span class="num" id="7239071">9223372036854775808</span><span class="op" id="7239090">,</span>&nbsp;<span class="op" id="7239092">-</span><span class="num" id="7239093">9223372036854775808</span><span class="op" id="7239112">,</span>&nbsp;<span class="string" id="7239114">&#34;1&#34;</span><span class="op" id="7239117">}</span><span class="op" id="7239118">,</span><br>
<span class="lineno"></span><span class="op" id="7239120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7239123">func</span>&nbsp;<span class="ident" id="7239128">TestRatSetFrac64Rat</span><span class="op" id="7239147">(</span><span class="ident" id="7239148">t</span>&nbsp;<span class="op" id="7239150">*</span><span class="ident" id="7239151">testing</span><span class="op" id="7239158">.</span><span class="ident" id="7239159">T</span><span class="op" id="7239160">)</span>&nbsp;<span class="op" id="7239162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239165">for</span>&nbsp;<span class="ident" id="7239169">i</span><span class="op" id="7239170">,</span>&nbsp;<span class="ident" id="7239172">test</span>&nbsp;<span class="op" id="7239177">:=</span>&nbsp;<span class="keyword" id="7239180">range</span>&nbsp;<span class="ident" id="7239186">setFrac64Tests</span>&nbsp;<span class="op" id="7239201">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239205">x</span>&nbsp;<span class="op" id="7239207">:=</span>&nbsp;<span class="builtinfunc" id="7239210">new</span><span class="op" id="7239213">(</span><span class="ident" id="7239214">Rat</span><span class="op" id="7239217">)</span><span class="op" id="7239218">.</span><span class="ident" id="7239219">SetFrac64</span><span class="op" id="7239228">(</span><span class="ident" id="7239229">test</span><span class="op" id="7239233">.</span><span class="ident" id="7239234">a</span><span class="op" id="7239235">,</span>&nbsp;<span class="ident" id="7239237">test</span><span class="op" id="7239241">.</span><span class="ident" id="7239242">b</span><span class="op" id="7239243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239247">if</span>&nbsp;<span class="ident" id="7239250">x</span><span class="op" id="7239251">.</span><span class="ident" id="7239252">RatString</span><span class="op" id="7239261">(</span><span class="op" id="7239262">)</span>&nbsp;<span class="op" id="7239264">!=</span>&nbsp;<span class="ident" id="7239267">test</span><span class="op" id="7239271">.</span><span class="ident" id="7239272">out</span>&nbsp;<span class="op" id="7239276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239281">t</span><span class="op" id="7239282">.</span><span class="ident" id="7239283">Errorf</span><span class="op" id="7239289">(</span><span class="string" id="7239290">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7239310">,</span>&nbsp;<span class="ident" id="7239312">i</span><span class="op" id="7239313">,</span>&nbsp;<span class="ident" id="7239315">x</span><span class="op" id="7239316">.</span><span class="ident" id="7239317">RatString</span><span class="op" id="7239326">(</span><span class="op" id="7239327">)</span><span class="op" id="7239328">,</span>&nbsp;<span class="ident" id="7239330">test</span><span class="op" id="7239334">.</span><span class="ident" id="7239335">out</span><span class="op" id="7239338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239345">}</span><br>
<span class="lineno">390</span><span class="op" id="7239347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7239350">func</span>&nbsp;<span class="ident" id="7239355">TestRatGobEncoding</span><span class="op" id="7239373">(</span><span class="ident" id="7239374">t</span>&nbsp;<span class="op" id="7239376">*</span><span class="ident" id="7239377">testing</span><span class="op" id="7239384">.</span><span class="ident" id="7239385">T</span><span class="op" id="7239386">)</span>&nbsp;<span class="op" id="7239388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239391">var</span>&nbsp;<span class="ident" id="7239395">medium</span>&nbsp;<span class="ident" id="7239402">bytes</span><span class="op" id="7239407">.</span><span class="ident" id="7239408">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239416">enc</span>&nbsp;<span class="op" id="7239420">:=</span>&nbsp;<span class="ident" id="7239423">gob</span><span class="op" id="7239426">.</span><span class="ident" id="7239427">NewEncoder</span><span class="op" id="7239437">(</span><span class="op" id="7239438">&amp;</span><span class="ident" id="7239439">medium</span><span class="op" id="7239445">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239448">dec</span>&nbsp;<span class="op" id="7239452">:=</span>&nbsp;<span class="ident" id="7239455">gob</span><span class="op" id="7239458">.</span><span class="ident" id="7239459">NewDecoder</span><span class="op" id="7239469">(</span><span class="op" id="7239470">&amp;</span><span class="ident" id="7239471">medium</span><span class="op" id="7239477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239480">for</span>&nbsp;<span class="ident" id="7239484">_</span><span class="op" id="7239485">,</span>&nbsp;<span class="ident" id="7239487">test</span>&nbsp;<span class="op" id="7239492">:=</span>&nbsp;<span class="keyword" id="7239495">range</span>&nbsp;<span class="ident" id="7239501">encodingTests</span>&nbsp;<span class="op" id="7239515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239519">medium</span><span class="op" id="7239525">.</span><span class="ident" id="7239526">Reset</span><span class="op" id="7239531">(</span><span class="op" id="7239532">)</span>&nbsp;<span class="comment" id="7239534">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239593">var</span>&nbsp;<span class="ident" id="7239597">tx</span>&nbsp;<span class="ident" id="7239600">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239606">tx</span><span class="op" id="7239608">.</span><span class="ident" id="7239609">SetString</span><span class="op" id="7239618">(</span><span class="ident" id="7239619">test</span>&nbsp;<span class="op" id="7239624">+</span>&nbsp;<span class="string" id="7239626">&#34;.14159265&#34;</span><span class="op" id="7239637">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239641">if</span>&nbsp;<span class="ident" id="7239644">err</span>&nbsp;<span class="op" id="7239648">:=</span>&nbsp;<span class="ident" id="7239651">enc</span><span class="op" id="7239654">.</span><span class="ident" id="7239655">Encode</span><span class="op" id="7239661">(</span><span class="op" id="7239662">&amp;</span><span class="ident" id="7239663">tx</span><span class="op" id="7239665">)</span><span class="op" id="7239666">;</span>&nbsp;<span class="ident" id="7239668">err</span>&nbsp;<span class="op" id="7239672">!=</span>&nbsp;<span class="ident" id="7239675">nil</span>&nbsp;<span class="op" id="7239679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239684">t</span><span class="op" id="7239685">.</span><span class="ident" id="7239686">Errorf</span><span class="op" id="7239692">(</span><span class="string" id="7239693">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7239720">,</span>&nbsp;<span class="op" id="7239722">&amp;</span><span class="ident" id="7239723">tx</span><span class="op" id="7239725">,</span>&nbsp;<span class="ident" id="7239727">err</span><span class="op" id="7239730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239738">var</span>&nbsp;<span class="ident" id="7239742">rx</span>&nbsp;<span class="ident" id="7239745">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239751">if</span>&nbsp;<span class="ident" id="7239754">err</span>&nbsp;<span class="op" id="7239758">:=</span>&nbsp;<span class="ident" id="7239761">dec</span><span class="op" id="7239764">.</span><span class="ident" id="7239765">Decode</span><span class="op" id="7239771">(</span><span class="op" id="7239772">&amp;</span><span class="ident" id="7239773">rx</span><span class="op" id="7239775">)</span><span class="op" id="7239776">;</span>&nbsp;<span class="ident" id="7239778">err</span>&nbsp;<span class="op" id="7239782">!=</span>&nbsp;<span class="ident" id="7239785">nil</span>&nbsp;<span class="op" id="7239789">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239794">t</span><span class="op" id="7239795">.</span><span class="ident" id="7239796">Errorf</span><span class="op" id="7239802">(</span><span class="string" id="7239803">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7239830">,</span>&nbsp;<span class="op" id="7239832">&amp;</span><span class="ident" id="7239833">tx</span><span class="op" id="7239835">,</span>&nbsp;<span class="ident" id="7239837">err</span><span class="op" id="7239840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7239848">if</span>&nbsp;<span class="ident" id="7239851">rx</span><span class="op" id="7239853">.</span><span class="ident" id="7239854">Cmp</span><span class="op" id="7239857">(</span><span class="op" id="7239858">&amp;</span><span class="ident" id="7239859">tx</span><span class="op" id="7239861">)</span>&nbsp;<span class="op" id="7239863">!=</span>&nbsp;<span class="num" id="7239866">0</span>&nbsp;<span class="op" id="7239868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7239873">t</span><span class="op" id="7239874">.</span><span class="ident" id="7239875">Errorf</span><span class="op" id="7239881">(</span><span class="string" id="7239882">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7239925">,</span>&nbsp;<span class="op" id="7239927">&amp;</span><span class="ident" id="7239928">tx</span><span class="op" id="7239930">,</span>&nbsp;<span class="op" id="7239932">&amp;</span><span class="ident" id="7239933">rx</span><span class="op" id="7239935">,</span>&nbsp;<span class="op" id="7239937">&amp;</span><span class="ident" id="7239938">tx</span><span class="op" id="7239940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239944">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7239947">}</span><br>
<span class="lineno"></span><span class="op" id="7239949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7239952">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7240047">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7240072">func</span>&nbsp;<span class="ident" id="7240077">TestGobEncodingNilRatInSlice</span><span class="op" id="7240105">(</span><span class="ident" id="7240106">t</span>&nbsp;<span class="op" id="7240108">*</span><span class="ident" id="7240109">testing</span><span class="op" id="7240116">.</span><span class="ident" id="7240117">T</span><span class="op" id="7240118">)</span>&nbsp;<span class="op" id="7240120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240123">buf</span>&nbsp;<span class="op" id="7240127">:=</span>&nbsp;<span class="builtinfunc" id="7240130">new</span><span class="op" id="7240133">(</span><span class="ident" id="7240134">bytes</span><span class="op" id="7240139">.</span><span class="ident" id="7240140">Buffer</span><span class="op" id="7240146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240149">enc</span>&nbsp;<span class="op" id="7240153">:=</span>&nbsp;<span class="ident" id="7240156">gob</span><span class="op" id="7240159">.</span><span class="ident" id="7240160">NewEncoder</span><span class="op" id="7240170">(</span><span class="ident" id="7240171">buf</span><span class="op" id="7240174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240177">dec</span>&nbsp;<span class="op" id="7240181">:=</span>&nbsp;<span class="ident" id="7240184">gob</span><span class="op" id="7240187">.</span><span class="ident" id="7240188">NewDecoder</span><span class="op" id="7240198">(</span><span class="ident" id="7240199">buf</span><span class="op" id="7240202">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240206">var</span>&nbsp;<span class="ident" id="7240210">in</span>&nbsp;<span class="op" id="7240213">=</span>&nbsp;<span class="builtinfunc" id="7240215">make</span><span class="op" id="7240219">(</span><span class="op" id="7240220">[</span><span class="op" id="7240221">]</span><span class="op" id="7240222">*</span><span class="ident" id="7240223">Rat</span><span class="op" id="7240226">,</span>&nbsp;<span class="num" id="7240228">1</span><span class="op" id="7240229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240232">err</span>&nbsp;<span class="op" id="7240236">:=</span>&nbsp;<span class="ident" id="7240239">enc</span><span class="op" id="7240242">.</span><span class="ident" id="7240243">Encode</span><span class="op" id="7240249">(</span><span class="op" id="7240250">&amp;</span><span class="ident" id="7240251">in</span><span class="op" id="7240253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240256">if</span>&nbsp;<span class="ident" id="7240259">err</span>&nbsp;<span class="op" id="7240263">!=</span>&nbsp;<span class="ident" id="7240266">nil</span>&nbsp;<span class="op" id="7240270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240274">t</span><span class="op" id="7240275">.</span><span class="ident" id="7240276">Errorf</span><span class="op" id="7240282">(</span><span class="string" id="7240283">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7240306">,</span>&nbsp;<span class="ident" id="7240308">err</span><span class="op" id="7240311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7240314">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240317">var</span>&nbsp;<span class="ident" id="7240321">out</span>&nbsp;<span class="op" id="7240325">[</span><span class="op" id="7240326">]</span><span class="op" id="7240327">*</span><span class="ident" id="7240328">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240333">err</span>&nbsp;<span class="op" id="7240337">=</span>&nbsp;<span class="ident" id="7240339">dec</span><span class="op" id="7240342">.</span><span class="ident" id="7240343">Decode</span><span class="op" id="7240349">(</span><span class="op" id="7240350">&amp;</span><span class="ident" id="7240351">out</span><span class="op" id="7240354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240357">if</span>&nbsp;<span class="ident" id="7240360">err</span>&nbsp;<span class="op" id="7240364">!=</span>&nbsp;<span class="ident" id="7240367">nil</span>&nbsp;<span class="op" id="7240371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240375">t</span><span class="op" id="7240376">.</span><span class="ident" id="7240377">Fatalf</span><span class="op" id="7240383">(</span><span class="string" id="7240384">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7240407">,</span>&nbsp;<span class="ident" id="7240409">err</span><span class="op" id="7240412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7240415">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240418">if</span>&nbsp;<span class="builtinfunc" id="7240421">len</span><span class="op" id="7240424">(</span><span class="ident" id="7240425">out</span><span class="op" id="7240428">)</span>&nbsp;<span class="op" id="7240430">!=</span>&nbsp;<span class="num" id="7240433">1</span>&nbsp;<span class="op" id="7240435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240439">t</span><span class="op" id="7240440">.</span><span class="ident" id="7240441">Fatalf</span><span class="op" id="7240447">(</span><span class="string" id="7240448">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7240474">,</span>&nbsp;<span class="builtinfunc" id="7240476">len</span><span class="op" id="7240479">(</span><span class="ident" id="7240480">out</span><span class="op" id="7240483">)</span><span class="op" id="7240484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7240487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240490">var</span>&nbsp;<span class="ident" id="7240494">zero</span>&nbsp;<span class="ident" id="7240499">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7240504">if</span>&nbsp;<span class="ident" id="7240507">out</span><span class="op" id="7240510">[</span><span class="num" id="7240511">0</span><span class="op" id="7240512">]</span><span class="op" id="7240513">.</span><span class="ident" id="7240514">Cmp</span><span class="op" id="7240517">(</span><span class="op" id="7240518">&amp;</span><span class="ident" id="7240519">zero</span><span class="op" id="7240523">)</span>&nbsp;<span class="op" id="7240525">!=</span>&nbsp;<span class="num" id="7240528">0</span>&nbsp;<span class="op" id="7240530">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7240534">t</span><span class="op" id="7240535">.</span><span class="ident" id="7240536">Errorf</span><span class="op" id="7240542">(</span><span class="string" id="7240543">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7240595">,</span>&nbsp;<span class="ident" id="7240597">out</span><span class="op" id="7240600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7240603">}</span><br>
<span class="lineno"></span><span class="op" id="7240605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7240608">var</span>&nbsp;<span class="ident" id="7240612">ratNums</span>&nbsp;<span class="op" id="7240620">=</span>&nbsp;<span class="op" id="7240622">[</span><span class="op" id="7240623">]</span><span class="builtintype" id="7240624">string</span><span class="op" id="7240630">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240633">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7240711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240714">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7240757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240760">&#34;-141592653589793&#34;</span><span class="op" id="7240778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240781">&#34;-1&#34;</span><span class="op" id="7240785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240788">&#34;0&#34;</span><span class="op" id="7240791">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240794">&#34;1&#34;</span><span class="op" id="7240797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240800">&#34;141592653589793&#34;</span><span class="op" id="7240817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240820">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7240862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240865">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7240942">,</span><br>
<span class="lineno"></span><span class="op" id="7240944">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7240947">var</span>&nbsp;<span class="ident" id="7240951">ratDenoms</span>&nbsp;<span class="op" id="7240961">=</span>&nbsp;<span class="op" id="7240963">[</span><span class="op" id="7240964">]</span><span class="builtintype" id="7240965">string</span><span class="op" id="7240971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240974">&#34;1&#34;</span><span class="op" id="7240977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7240980">&#34;718281828459045&#34;</span><span class="op" id="7240997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7241000">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7241042">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7241045">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7241122">,</span><br>
<span class="lineno"></span><span class="op" id="7241124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7241127">func</span>&nbsp;<span class="ident" id="7241132">TestRatJSONEncoding</span><span class="op" id="7241151">(</span><span class="ident" id="7241152">t</span>&nbsp;<span class="op" id="7241154">*</span><span class="ident" id="7241155">testing</span><span class="op" id="7241162">.</span><span class="ident" id="7241163">T</span><span class="op" id="7241164">)</span>&nbsp;<span class="op" id="7241166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241169">for</span>&nbsp;<span class="ident" id="7241173">_</span><span class="op" id="7241174">,</span>&nbsp;<span class="ident" id="7241176">num</span>&nbsp;<span class="op" id="7241180">:=</span>&nbsp;<span class="keyword" id="7241183">range</span>&nbsp;<span class="ident" id="7241189">ratNums</span>&nbsp;<span class="op" id="7241197">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241201">for</span>&nbsp;<span class="ident" id="7241205">_</span><span class="op" id="7241206">,</span>&nbsp;<span class="ident" id="7241208">denom</span>&nbsp;<span class="op" id="7241214">:=</span>&nbsp;<span class="keyword" id="7241217">range</span>&nbsp;<span class="ident" id="7241223">ratDenoms</span>&nbsp;<span class="op" id="7241233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241238">var</span>&nbsp;<span class="ident" id="7241242">tx</span>&nbsp;<span class="ident" id="7241245">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241252">tx</span><span class="op" id="7241254">.</span><span class="ident" id="7241255">SetString</span><span class="op" id="7241264">(</span><span class="ident" id="7241265">num</span>&nbsp;<span class="op" id="7241269">+</span>&nbsp;<span class="string" id="7241271">&#34;/&#34;</span>&nbsp;<span class="op" id="7241275">+</span>&nbsp;<span class="ident" id="7241277">denom</span><span class="op" id="7241282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241287">b</span><span class="op" id="7241288">,</span>&nbsp;<span class="ident" id="7241290">err</span>&nbsp;<span class="op" id="7241294">:=</span>&nbsp;<span class="ident" id="7241297">json</span><span class="op" id="7241301">.</span><span class="ident" id="7241302">Marshal</span><span class="op" id="7241309">(</span><span class="op" id="7241310">&amp;</span><span class="ident" id="7241311">tx</span><span class="op" id="7241313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241318">if</span>&nbsp;<span class="ident" id="7241321">err</span>&nbsp;<span class="op" id="7241325">!=</span>&nbsp;<span class="ident" id="7241328">nil</span>&nbsp;<span class="op" id="7241332">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241338">t</span><span class="op" id="7241339">.</span><span class="ident" id="7241340">Errorf</span><span class="op" id="7241346">(</span><span class="string" id="7241347">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7241376">,</span>&nbsp;<span class="op" id="7241378">&amp;</span><span class="ident" id="7241379">tx</span><span class="op" id="7241381">,</span>&nbsp;<span class="ident" id="7241383">err</span><span class="op" id="7241386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241392">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241409">var</span>&nbsp;<span class="ident" id="7241413">rx</span>&nbsp;<span class="ident" id="7241416">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241423">if</span>&nbsp;<span class="ident" id="7241426">err</span>&nbsp;<span class="op" id="7241430">:=</span>&nbsp;<span class="ident" id="7241433">json</span><span class="op" id="7241437">.</span><span class="ident" id="7241438">Unmarshal</span><span class="op" id="7241447">(</span><span class="ident" id="7241448">b</span><span class="op" id="7241449">,</span>&nbsp;<span class="op" id="7241451">&amp;</span><span class="ident" id="7241452">rx</span><span class="op" id="7241454">)</span><span class="op" id="7241455">;</span>&nbsp;<span class="ident" id="7241457">err</span>&nbsp;<span class="op" id="7241461">!=</span>&nbsp;<span class="ident" id="7241464">nil</span>&nbsp;<span class="op" id="7241468">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241474">t</span><span class="op" id="7241475">.</span><span class="ident" id="7241476">Errorf</span><span class="op" id="7241482">(</span><span class="string" id="7241483">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7241514">,</span>&nbsp;<span class="op" id="7241516">&amp;</span><span class="ident" id="7241517">tx</span><span class="op" id="7241519">,</span>&nbsp;<span class="ident" id="7241521">err</span><span class="op" id="7241524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241530">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241547">if</span>&nbsp;<span class="ident" id="7241550">rx</span><span class="op" id="7241552">.</span><span class="ident" id="7241553">Cmp</span><span class="op" id="7241556">(</span><span class="op" id="7241557">&amp;</span><span class="ident" id="7241558">tx</span><span class="op" id="7241560">)</span>&nbsp;<span class="op" id="7241562">!=</span>&nbsp;<span class="num" id="7241565">0</span>&nbsp;<span class="op" id="7241567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241573">t</span><span class="op" id="7241574">.</span><span class="ident" id="7241575">Errorf</span><span class="op" id="7241581">(</span><span class="string" id="7241582">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7241626">,</span>&nbsp;<span class="op" id="7241628">&amp;</span><span class="ident" id="7241629">tx</span><span class="op" id="7241631">,</span>&nbsp;<span class="op" id="7241633">&amp;</span><span class="ident" id="7241634">rx</span><span class="op" id="7241636">,</span>&nbsp;<span class="op" id="7241638">&amp;</span><span class="ident" id="7241639">tx</span><span class="op" id="7241641">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241653">}</span><br>
<span class="lineno"></span><span class="op" id="7241655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7241658">func</span>&nbsp;<span class="ident" id="7241663">TestRatXMLEncoding</span><span class="op" id="7241681">(</span><span class="ident" id="7241682">t</span>&nbsp;<span class="op" id="7241684">*</span><span class="ident" id="7241685">testing</span><span class="op" id="7241692">.</span><span class="ident" id="7241693">T</span><span class="op" id="7241694">)</span>&nbsp;<span class="op" id="7241696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241699">for</span>&nbsp;<span class="ident" id="7241703">_</span><span class="op" id="7241704">,</span>&nbsp;<span class="ident" id="7241706">num</span>&nbsp;<span class="op" id="7241710">:=</span>&nbsp;<span class="keyword" id="7241713">range</span>&nbsp;<span class="ident" id="7241719">ratNums</span>&nbsp;<span class="op" id="7241727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241731">for</span>&nbsp;<span class="ident" id="7241735">_</span><span class="op" id="7241736">,</span>&nbsp;<span class="ident" id="7241738">denom</span>&nbsp;<span class="op" id="7241744">:=</span>&nbsp;<span class="keyword" id="7241747">range</span>&nbsp;<span class="ident" id="7241753">ratDenoms</span>&nbsp;<span class="op" id="7241763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241768">var</span>&nbsp;<span class="ident" id="7241772">tx</span>&nbsp;<span class="ident" id="7241775">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241782">tx</span><span class="op" id="7241784">.</span><span class="ident" id="7241785">SetString</span><span class="op" id="7241794">(</span><span class="ident" id="7241795">num</span>&nbsp;<span class="op" id="7241799">+</span>&nbsp;<span class="string" id="7241801">&#34;/&#34;</span>&nbsp;<span class="op" id="7241805">+</span>&nbsp;<span class="ident" id="7241807">denom</span><span class="op" id="7241812">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241817">b</span><span class="op" id="7241818">,</span>&nbsp;<span class="ident" id="7241820">err</span>&nbsp;<span class="op" id="7241824">:=</span>&nbsp;<span class="ident" id="7241827">xml</span><span class="op" id="7241830">.</span><span class="ident" id="7241831">Marshal</span><span class="op" id="7241838">(</span><span class="op" id="7241839">&amp;</span><span class="ident" id="7241840">tx</span><span class="op" id="7241842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241847">if</span>&nbsp;<span class="ident" id="7241850">err</span>&nbsp;<span class="op" id="7241854">!=</span>&nbsp;<span class="ident" id="7241857">nil</span>&nbsp;<span class="op" id="7241861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7241867">t</span><span class="op" id="7241868">.</span><span class="ident" id="7241869">Errorf</span><span class="op" id="7241875">(</span><span class="string" id="7241876">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7241905">,</span>&nbsp;<span class="op" id="7241907">&amp;</span><span class="ident" id="7241908">tx</span><span class="op" id="7241910">,</span>&nbsp;<span class="ident" id="7241912">err</span><span class="op" id="7241915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241921">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7241933">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241938">var</span>&nbsp;<span class="ident" id="7241942">rx</span>&nbsp;<span class="ident" id="7241945">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7241952">if</span>&nbsp;<span class="ident" id="7241955">err</span>&nbsp;<span class="op" id="7241959">:=</span>&nbsp;<span class="ident" id="7241962">xml</span><span class="op" id="7241965">.</span><span class="ident" id="7241966">Unmarshal</span><span class="op" id="7241975">(</span><span class="ident" id="7241976">b</span><span class="op" id="7241977">,</span>&nbsp;<span class="op" id="7241979">&amp;</span><span class="ident" id="7241980">rx</span><span class="op" id="7241982">)</span><span class="op" id="7241983">;</span>&nbsp;<span class="ident" id="7241985">err</span>&nbsp;<span class="op" id="7241989">!=</span>&nbsp;<span class="ident" id="7241992">nil</span>&nbsp;<span class="op" id="7241996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242002">t</span><span class="op" id="7242003">.</span><span class="ident" id="7242004">Errorf</span><span class="op" id="7242010">(</span><span class="string" id="7242011">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7242042">,</span>&nbsp;<span class="op" id="7242044">&amp;</span><span class="ident" id="7242045">tx</span><span class="op" id="7242047">,</span>&nbsp;<span class="ident" id="7242049">err</span><span class="op" id="7242052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242058">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242070">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242075">if</span>&nbsp;<span class="ident" id="7242078">rx</span><span class="op" id="7242080">.</span><span class="ident" id="7242081">Cmp</span><span class="op" id="7242084">(</span><span class="op" id="7242085">&amp;</span><span class="ident" id="7242086">tx</span><span class="op" id="7242088">)</span>&nbsp;<span class="op" id="7242090">!=</span>&nbsp;<span class="num" id="7242093">0</span>&nbsp;<span class="op" id="7242095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242101">t</span><span class="op" id="7242102">.</span><span class="ident" id="7242103">Errorf</span><span class="op" id="7242109">(</span><span class="string" id="7242110">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242153">,</span>&nbsp;<span class="op" id="7242155">&amp;</span><span class="ident" id="7242156">tx</span><span class="op" id="7242158">,</span>&nbsp;<span class="op" id="7242160">&amp;</span><span class="ident" id="7242161">rx</span><span class="op" id="7242163">,</span>&nbsp;<span class="op" id="7242165">&amp;</span><span class="ident" id="7242166">tx</span><span class="op" id="7242168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242180">}</span><br>
<span class="lineno">500</span><span class="op" id="7242182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7242185">func</span>&nbsp;<span class="ident" id="7242190">TestIssue2379</span><span class="op" id="7242203">(</span><span class="ident" id="7242204">t</span>&nbsp;<span class="op" id="7242206">*</span><span class="ident" id="7242207">testing</span><span class="op" id="7242214">.</span><span class="ident" id="7242215">T</span><span class="op" id="7242216">)</span>&nbsp;<span class="op" id="7242218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7242221">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242240">q</span>&nbsp;<span class="op" id="7242242">:=</span>&nbsp;<span class="ident" id="7242245">NewRat</span><span class="op" id="7242251">(</span><span class="num" id="7242252">3</span><span class="op" id="7242253">,</span>&nbsp;<span class="num" id="7242255">2</span><span class="op" id="7242256">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242259">x</span>&nbsp;<span class="op" id="7242261">:=</span>&nbsp;<span class="builtinfunc" id="7242264">new</span><span class="op" id="7242267">(</span><span class="ident" id="7242268">Rat</span><span class="op" id="7242271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242274">x</span><span class="op" id="7242275">.</span><span class="ident" id="7242276">SetFrac</span><span class="op" id="7242283">(</span><span class="ident" id="7242284">NewInt</span><span class="op" id="7242290">(</span><span class="num" id="7242291">3</span><span class="op" id="7242292">)</span><span class="op" id="7242293">,</span>&nbsp;<span class="ident" id="7242295">NewInt</span><span class="op" id="7242301">(</span><span class="num" id="7242302">2</span><span class="op" id="7242303">)</span><span class="op" id="7242304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242307">if</span>&nbsp;<span class="ident" id="7242310">x</span><span class="op" id="7242311">.</span><span class="ident" id="7242312">Cmp</span><span class="op" id="7242315">(</span><span class="ident" id="7242316">q</span><span class="op" id="7242317">)</span>&nbsp;<span class="op" id="7242319">!=</span>&nbsp;<span class="num" id="7242322">0</span>&nbsp;<span class="op" id="7242324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242328">t</span><span class="op" id="7242329">.</span><span class="ident" id="7242330">Errorf</span><span class="op" id="7242336">(</span><span class="string" id="7242337">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242356">,</span>&nbsp;<span class="ident" id="7242358">x</span><span class="op" id="7242359">,</span>&nbsp;<span class="ident" id="7242361">q</span><span class="op" id="7242362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242365">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7242369">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242398">x</span>&nbsp;<span class="op" id="7242400">=</span>&nbsp;<span class="ident" id="7242402">NewRat</span><span class="op" id="7242408">(</span><span class="num" id="7242409">2</span><span class="op" id="7242410">,</span>&nbsp;<span class="num" id="7242412">3</span><span class="op" id="7242413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242416">x</span><span class="op" id="7242417">.</span><span class="ident" id="7242418">SetFrac</span><span class="op" id="7242425">(</span><span class="ident" id="7242426">NewInt</span><span class="op" id="7242432">(</span><span class="num" id="7242433">3</span><span class="op" id="7242434">)</span><span class="op" id="7242435">,</span>&nbsp;<span class="ident" id="7242437">x</span><span class="op" id="7242438">.</span><span class="ident" id="7242439">Num</span><span class="op" id="7242442">(</span><span class="op" id="7242443">)</span><span class="op" id="7242444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242447">if</span>&nbsp;<span class="ident" id="7242450">x</span><span class="op" id="7242451">.</span><span class="ident" id="7242452">Cmp</span><span class="op" id="7242455">(</span><span class="ident" id="7242456">q</span><span class="op" id="7242457">)</span>&nbsp;<span class="op" id="7242459">!=</span>&nbsp;<span class="num" id="7242462">0</span>&nbsp;<span class="op" id="7242464">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242468">t</span><span class="op" id="7242469">.</span><span class="ident" id="7242470">Errorf</span><span class="op" id="7242476">(</span><span class="string" id="7242477">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242496">,</span>&nbsp;<span class="ident" id="7242498">x</span><span class="op" id="7242499">,</span>&nbsp;<span class="ident" id="7242501">q</span><span class="op" id="7242502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7242509">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242540">x</span>&nbsp;<span class="op" id="7242542">=</span>&nbsp;<span class="ident" id="7242544">NewRat</span><span class="op" id="7242550">(</span><span class="num" id="7242551">2</span><span class="op" id="7242552">,</span>&nbsp;<span class="num" id="7242554">3</span><span class="op" id="7242555">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242558">x</span><span class="op" id="7242559">.</span><span class="ident" id="7242560">SetFrac</span><span class="op" id="7242567">(</span><span class="ident" id="7242568">x</span><span class="op" id="7242569">.</span><span class="ident" id="7242570">Denom</span><span class="op" id="7242575">(</span><span class="op" id="7242576">)</span><span class="op" id="7242577">,</span>&nbsp;<span class="ident" id="7242579">NewInt</span><span class="op" id="7242585">(</span><span class="num" id="7242586">2</span><span class="op" id="7242587">)</span><span class="op" id="7242588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242591">if</span>&nbsp;<span class="ident" id="7242594">x</span><span class="op" id="7242595">.</span><span class="ident" id="7242596">Cmp</span><span class="op" id="7242599">(</span><span class="ident" id="7242600">q</span><span class="op" id="7242601">)</span>&nbsp;<span class="op" id="7242603">!=</span>&nbsp;<span class="num" id="7242606">0</span>&nbsp;<span class="op" id="7242608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242612">t</span><span class="op" id="7242613">.</span><span class="ident" id="7242614">Errorf</span><span class="op" id="7242620">(</span><span class="string" id="7242621">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242640">,</span>&nbsp;<span class="ident" id="7242642">x</span><span class="op" id="7242643">,</span>&nbsp;<span class="ident" id="7242645">q</span><span class="op" id="7242646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7242653">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242698">x</span>&nbsp;<span class="op" id="7242700">=</span>&nbsp;<span class="ident" id="7242702">NewRat</span><span class="op" id="7242708">(</span><span class="num" id="7242709">2</span><span class="op" id="7242710">,</span>&nbsp;<span class="num" id="7242712">3</span><span class="op" id="7242713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242716">x</span><span class="op" id="7242717">.</span><span class="ident" id="7242718">SetFrac</span><span class="op" id="7242725">(</span><span class="ident" id="7242726">x</span><span class="op" id="7242727">.</span><span class="ident" id="7242728">Denom</span><span class="op" id="7242733">(</span><span class="op" id="7242734">)</span><span class="op" id="7242735">,</span>&nbsp;<span class="ident" id="7242737">x</span><span class="op" id="7242738">.</span><span class="ident" id="7242739">Num</span><span class="op" id="7242742">(</span><span class="op" id="7242743">)</span><span class="op" id="7242744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242747">if</span>&nbsp;<span class="ident" id="7242750">x</span><span class="op" id="7242751">.</span><span class="ident" id="7242752">Cmp</span><span class="op" id="7242755">(</span><span class="ident" id="7242756">q</span><span class="op" id="7242757">)</span>&nbsp;<span class="op" id="7242759">!=</span>&nbsp;<span class="num" id="7242762">0</span>&nbsp;<span class="op" id="7242764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242768">t</span><span class="op" id="7242769">.</span><span class="ident" id="7242770">Errorf</span><span class="op" id="7242776">(</span><span class="string" id="7242777">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242796">,</span>&nbsp;<span class="ident" id="7242798">x</span><span class="op" id="7242799">,</span>&nbsp;<span class="ident" id="7242801">q</span><span class="op" id="7242802">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7242809">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242855">q</span>&nbsp;<span class="op" id="7242857">=</span>&nbsp;<span class="ident" id="7242859">NewRat</span><span class="op" id="7242865">(</span><span class="num" id="7242866">1</span><span class="op" id="7242867">,</span>&nbsp;<span class="num" id="7242869">1</span><span class="op" id="7242870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242873">x</span>&nbsp;<span class="op" id="7242875">=</span>&nbsp;<span class="builtinfunc" id="7242877">new</span><span class="op" id="7242880">(</span><span class="ident" id="7242881">Rat</span><span class="op" id="7242884">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242887">n</span>&nbsp;<span class="op" id="7242889">:=</span>&nbsp;<span class="ident" id="7242892">NewInt</span><span class="op" id="7242898">(</span><span class="num" id="7242899">7</span><span class="op" id="7242900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242903">x</span><span class="op" id="7242904">.</span><span class="ident" id="7242905">SetFrac</span><span class="op" id="7242912">(</span><span class="ident" id="7242913">n</span><span class="op" id="7242914">,</span>&nbsp;<span class="ident" id="7242916">n</span><span class="op" id="7242917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7242920">if</span>&nbsp;<span class="ident" id="7242923">x</span><span class="op" id="7242924">.</span><span class="ident" id="7242925">Cmp</span><span class="op" id="7242928">(</span><span class="ident" id="7242929">q</span><span class="op" id="7242930">)</span>&nbsp;<span class="op" id="7242932">!=</span>&nbsp;<span class="num" id="7242935">0</span>&nbsp;<span class="op" id="7242937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7242941">t</span><span class="op" id="7242942">.</span><span class="ident" id="7242943">Errorf</span><span class="op" id="7242949">(</span><span class="string" id="7242950">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7242969">,</span>&nbsp;<span class="ident" id="7242971">x</span><span class="op" id="7242972">,</span>&nbsp;<span class="ident" id="7242974">q</span><span class="op" id="7242975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7242978">}</span><br>
<span class="lineno">540</span><span class="op" id="7242980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7242983">func</span>&nbsp;<span class="ident" id="7242988">TestIssue3521</span><span class="op" id="7243001">(</span><span class="ident" id="7243002">t</span>&nbsp;<span class="op" id="7243004">*</span><span class="ident" id="7243005">testing</span><span class="op" id="7243012">.</span><span class="ident" id="7243013">T</span><span class="op" id="7243014">)</span>&nbsp;<span class="op" id="7243016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243019">a</span>&nbsp;<span class="op" id="7243021">:=</span>&nbsp;<span class="builtinfunc" id="7243024">new</span><span class="op" id="7243027">(</span><span class="ident" id="7243028">Int</span><span class="op" id="7243031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243034">b</span>&nbsp;<span class="op" id="7243036">:=</span>&nbsp;<span class="builtinfunc" id="7243039">new</span><span class="op" id="7243042">(</span><span class="ident" id="7243043">Int</span><span class="op" id="7243046">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243049">a</span><span class="op" id="7243050">.</span><span class="ident" id="7243051">SetString</span><span class="op" id="7243060">(</span><span class="string" id="7243061">&#34;64375784358435883458348587&#34;</span><span class="op" id="7243089">,</span>&nbsp;<span class="num" id="7243091">0</span><span class="op" id="7243092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243095">b</span><span class="op" id="7243096">.</span><span class="ident" id="7243097">SetString</span><span class="op" id="7243106">(</span><span class="string" id="7243107">&#34;4789759874531&#34;</span><span class="op" id="7243122">,</span>&nbsp;<span class="num" id="7243124">0</span><span class="op" id="7243125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7243129">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243174">zero</span>&nbsp;<span class="op" id="7243179">:=</span>&nbsp;<span class="builtinfunc" id="7243182">new</span><span class="op" id="7243185">(</span><span class="ident" id="7243186">Rat</span><span class="op" id="7243189">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243192">one</span>&nbsp;<span class="op" id="7243196">:=</span>&nbsp;<span class="ident" id="7243199">NewInt</span><span class="op" id="7243205">(</span><span class="num" id="7243206">1</span><span class="op" id="7243207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7243210">if</span>&nbsp;<span class="ident" id="7243213">zero</span><span class="op" id="7243217">.</span><span class="ident" id="7243218">Denom</span><span class="op" id="7243223">(</span><span class="op" id="7243224">)</span><span class="op" id="7243225">.</span><span class="ident" id="7243226">Cmp</span><span class="op" id="7243229">(</span><span class="ident" id="7243230">one</span><span class="op" id="7243233">)</span>&nbsp;<span class="op" id="7243235">!=</span>&nbsp;<span class="num" id="7243238">0</span>&nbsp;<span class="op" id="7243240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243244">t</span><span class="op" id="7243245">.</span><span class="ident" id="7243246">Errorf</span><span class="op" id="7243252">(</span><span class="string" id="7243253">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7243272">,</span>&nbsp;<span class="ident" id="7243274">zero</span><span class="op" id="7243278">.</span><span class="ident" id="7243279">Denom</span><span class="op" id="7243284">(</span><span class="op" id="7243285">)</span><span class="op" id="7243286">,</span>&nbsp;<span class="ident" id="7243288">one</span><span class="op" id="7243291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7243294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7243298">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243359">x</span>&nbsp;<span class="op" id="7243361">:=</span>&nbsp;<span class="builtinfunc" id="7243364">new</span><span class="op" id="7243367">(</span><span class="ident" id="7243368">Rat</span><span class="op" id="7243371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243374">x</span><span class="op" id="7243375">.</span><span class="ident" id="7243376">Denom</span><span class="op" id="7243381">(</span><span class="op" id="7243382">)</span><span class="op" id="7243383">.</span><span class="ident" id="7243384">Set</span><span class="op" id="7243387">(</span><span class="builtinfunc" id="7243388">new</span><span class="op" id="7243391">(</span><span class="ident" id="7243392">Int</span><span class="op" id="7243395">)</span><span class="op" id="7243396">.</span><span class="ident" id="7243397">Neg</span><span class="op" id="7243400">(</span><span class="ident" id="7243401">b</span><span class="op" id="7243402">)</span><span class="op" id="7243403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7243406">if</span>&nbsp;<span class="ident" id="7243409">x</span><span class="op" id="7243410">.</span><span class="ident" id="7243411">Cmp</span><span class="op" id="7243414">(</span><span class="ident" id="7243415">zero</span><span class="op" id="7243419">)</span>&nbsp;<span class="op" id="7243421">!=</span>&nbsp;<span class="num" id="7243424">0</span>&nbsp;<span class="op" id="7243426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243430">t</span><span class="op" id="7243431">.</span><span class="ident" id="7243432">Errorf</span><span class="op" id="7243438">(</span><span class="string" id="7243439">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7243459">,</span>&nbsp;<span class="ident" id="7243461">x</span><span class="op" id="7243462">,</span>&nbsp;<span class="ident" id="7243464">zero</span><span class="op" id="7243468">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7243471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7243475">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243533">x</span><span class="op" id="7243534">.</span><span class="ident" id="7243535">Num</span><span class="op" id="7243538">(</span><span class="op" id="7243539">)</span><span class="op" id="7243540">.</span><span class="ident" id="7243541">Set</span><span class="op" id="7243544">(</span><span class="ident" id="7243545">a</span><span class="op" id="7243546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243549">qab</span>&nbsp;<span class="op" id="7243553">:=</span>&nbsp;<span class="builtinfunc" id="7243556">new</span><span class="op" id="7243559">(</span><span class="ident" id="7243560">Rat</span><span class="op" id="7243563">)</span><span class="op" id="7243564">.</span><span class="ident" id="7243565">SetFrac</span><span class="op" id="7243572">(</span><span class="ident" id="7243573">a</span><span class="op" id="7243574">,</span>&nbsp;<span class="ident" id="7243576">b</span><span class="op" id="7243577">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7243580">if</span>&nbsp;<span class="ident" id="7243583">x</span><span class="op" id="7243584">.</span><span class="ident" id="7243585">Cmp</span><span class="op" id="7243588">(</span><span class="ident" id="7243589">qab</span><span class="op" id="7243592">)</span>&nbsp;<span class="op" id="7243594">!=</span>&nbsp;<span class="num" id="7243597">0</span>&nbsp;<span class="op" id="7243599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243603">t</span><span class="op" id="7243604">.</span><span class="ident" id="7243605">Errorf</span><span class="op" id="7243611">(</span><span class="string" id="7243612">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7243632">,</span>&nbsp;<span class="ident" id="7243634">x</span><span class="op" id="7243635">,</span>&nbsp;<span class="ident" id="7243637">qab</span><span class="op" id="7243640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7243643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7243647">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243717">x</span><span class="op" id="7243718">.</span><span class="ident" id="7243719">SetFrac64</span><span class="op" id="7243728">(</span><span class="num" id="7243729">10</span><span class="op" id="7243731">,</span>&nbsp;<span class="num" id="7243733">2</span><span class="op" id="7243734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243737">x</span><span class="op" id="7243738">.</span><span class="ident" id="7243739">Denom</span><span class="op" id="7243744">(</span><span class="op" id="7243745">)</span><span class="op" id="7243746">.</span><span class="ident" id="7243747">SetInt64</span><span class="op" id="7243755">(</span><span class="num" id="7243756">3</span><span class="op" id="7243757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243760">q53</span>&nbsp;<span class="op" id="7243764">:=</span>&nbsp;<span class="ident" id="7243767">NewRat</span><span class="op" id="7243773">(</span><span class="num" id="7243774">5</span><span class="op" id="7243775">,</span>&nbsp;<span class="num" id="7243777">3</span><span class="op" id="7243778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7243781">if</span>&nbsp;<span class="ident" id="7243784">x</span><span class="op" id="7243785">.</span><span class="ident" id="7243786">Cmp</span><span class="op" id="7243789">(</span><span class="ident" id="7243790">q53</span><span class="op" id="7243793">)</span>&nbsp;<span class="op" id="7243795">!=</span>&nbsp;<span class="num" id="7243798">0</span>&nbsp;<span class="op" id="7243800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243804">t</span><span class="op" id="7243805">.</span><span class="ident" id="7243806">Errorf</span><span class="op" id="7243812">(</span><span class="string" id="7243813">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7243833">,</span>&nbsp;<span class="ident" id="7243835">x</span><span class="op" id="7243836">,</span>&nbsp;<span class="ident" id="7243838">q53</span><span class="op" id="7243841">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7243844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7243848">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243918">x</span>&nbsp;<span class="op" id="7243920">=</span>&nbsp;<span class="ident" id="7243922">NewRat</span><span class="op" id="7243928">(</span><span class="num" id="7243929">10</span><span class="op" id="7243931">,</span>&nbsp;<span class="num" id="7243933">2</span><span class="op" id="7243934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243937">x</span><span class="op" id="7243938">.</span><span class="ident" id="7243939">Denom</span><span class="op" id="7243944">(</span><span class="op" id="7243945">)</span><span class="op" id="7243946">.</span><span class="ident" id="7243947">SetInt64</span><span class="op" id="7243955">(</span><span class="num" id="7243956">3</span><span class="op" id="7243957">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7243960">if</span>&nbsp;<span class="ident" id="7243963">x</span><span class="op" id="7243964">.</span><span class="ident" id="7243965">Cmp</span><span class="op" id="7243968">(</span><span class="ident" id="7243969">q53</span><span class="op" id="7243972">)</span>&nbsp;<span class="op" id="7243974">!=</span>&nbsp;<span class="num" id="7243977">0</span>&nbsp;<span class="op" id="7243979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7243983">t</span><span class="op" id="7243984">.</span><span class="ident" id="7243985">Errorf</span><span class="op" id="7243991">(</span><span class="string" id="7243992">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7244012">,</span>&nbsp;<span class="ident" id="7244014">x</span><span class="op" id="7244015">,</span>&nbsp;<span class="ident" id="7244017">q53</span><span class="op" id="7244020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7244023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7244027">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244094">x</span><span class="op" id="7244095">.</span><span class="ident" id="7244096">SetFrac</span><span class="op" id="7244103">(</span><span class="ident" id="7244104">a</span><span class="op" id="7244105">,</span>&nbsp;<span class="ident" id="7244107">b</span><span class="op" id="7244108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244111">a</span>&nbsp;<span class="op" id="7244113">=</span>&nbsp;<span class="ident" id="7244115">x</span><span class="op" id="7244116">.</span><span class="ident" id="7244117">Num</span><span class="op" id="7244120">(</span><span class="op" id="7244121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244124">b</span>&nbsp;<span class="op" id="7244126">=</span>&nbsp;<span class="ident" id="7244128">x</span><span class="op" id="7244129">.</span><span class="ident" id="7244130">Denom</span><span class="op" id="7244135">(</span><span class="op" id="7244136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244139">a</span><span class="op" id="7244140">.</span><span class="ident" id="7244141">SetInt64</span><span class="op" id="7244149">(</span><span class="num" id="7244150">5</span><span class="op" id="7244151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244154">b</span><span class="op" id="7244155">.</span><span class="ident" id="7244156">SetInt64</span><span class="op" id="7244164">(</span><span class="num" id="7244165">3</span><span class="op" id="7244166">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7244169">if</span>&nbsp;<span class="ident" id="7244172">x</span><span class="op" id="7244173">.</span><span class="ident" id="7244174">Cmp</span><span class="op" id="7244177">(</span><span class="ident" id="7244178">q53</span><span class="op" id="7244181">)</span>&nbsp;<span class="op" id="7244183">!=</span>&nbsp;<span class="num" id="7244186">0</span>&nbsp;<span class="op" id="7244188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7244192">t</span><span class="op" id="7244193">.</span><span class="ident" id="7244194">Errorf</span><span class="op" id="7244200">(</span><span class="string" id="7244201">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7244220">,</span>&nbsp;<span class="ident" id="7244222">x</span><span class="op" id="7244223">,</span>&nbsp;<span class="ident" id="7244225">q53</span><span class="op" id="7244228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7244231">}</span><br>
<span class="lineno"></span><span class="op" id="7244233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7244236">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7244305">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7244377">var</span>&nbsp;<span class="ident" id="7244381">float64inputs</span>&nbsp;<span class="op" id="7244395">=</span>&nbsp;<span class="op" id="7244397">[</span><span class="op" id="7244398">]</span><span class="builtintype" id="7244399">string</span><span class="op" id="7244405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7244408">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7244458">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244528">&#34;5e+125&#34;</span><span class="op" id="7244536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244539">&#34;69e+267&#34;</span><span class="op" id="7244548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244551">&#34;999e-026&#34;</span><span class="op" id="7244561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244564">&#34;7861e-034&#34;</span><span class="op" id="7244575">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244578">&#34;75569e-254&#34;</span><span class="op" id="7244590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244593">&#34;928609e-261&#34;</span><span class="op" id="7244606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244609">&#34;9210917e+080&#34;</span><span class="op" id="7244623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244626">&#34;84863171e+114&#34;</span><span class="op" id="7244641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244644">&#34;653777767e+273&#34;</span><span class="op" id="7244660">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244663">&#34;5232604057e-298&#34;</span><span class="op" id="7244680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244683">&#34;27235667517e-109&#34;</span><span class="op" id="7244701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244704">&#34;653532977297e-123&#34;</span><span class="op" id="7244723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244726">&#34;3142213164987e-294&#34;</span><span class="op" id="7244746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244749">&#34;46202199371337e-072&#34;</span><span class="op" id="7244770">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244773">&#34;231010996856685e-073&#34;</span><span class="op" id="7244795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244798">&#34;9324754620109615e+212&#34;</span><span class="op" id="7244821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244824">&#34;78459735791271921e+049&#34;</span><span class="op" id="7244848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244851">&#34;272104041512242479e+200&#34;</span><span class="op" id="7244876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244879">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7244905">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244908">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7244935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244938">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7244966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7244969">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7244998">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7245002">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245072">&#34;9e-265&#34;</span><span class="op" id="7245080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245083">&#34;85e-037&#34;</span><span class="op" id="7245092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245095">&#34;623e+100&#34;</span><span class="op" id="7245105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245108">&#34;3571e+263&#34;</span><span class="op" id="7245119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245122">&#34;81661e+153&#34;</span><span class="op" id="7245134">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245137">&#34;920657e-023&#34;</span><span class="op" id="7245150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245153">&#34;4603285e-024&#34;</span><span class="op" id="7245167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245170">&#34;87575437e-309&#34;</span><span class="op" id="7245185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245188">&#34;245540327e+122&#34;</span><span class="op" id="7245204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245207">&#34;6138508175e+120&#34;</span><span class="op" id="7245224">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245227">&#34;83356057653e+193&#34;</span><span class="op" id="7245245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245248">&#34;619534293513e+124&#34;</span><span class="op" id="7245267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245270">&#34;2335141086879e+218&#34;</span><span class="op" id="7245290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245293">&#34;36167929443327e-159&#34;</span><span class="op" id="7245314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245317">&#34;609610927149051e-255&#34;</span><span class="op" id="7245339">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245342">&#34;3743626360493413e-165&#34;</span><span class="op" id="7245365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245368">&#34;94080055902682397e-242&#34;</span><span class="op" id="7245392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245395">&#34;899810892172646163e+283&#34;</span><span class="op" id="7245420">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245423">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7245449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245452">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7245479">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245482">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7245510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245513">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7245542">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7245546">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245616">&#34;5e-20&#34;</span><span class="op" id="7245623">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245626">&#34;67e+14&#34;</span><span class="op" id="7245634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245637">&#34;985e+15&#34;</span><span class="op" id="7245646">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245649">&#34;7693e-42&#34;</span><span class="op" id="7245659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245662">&#34;55895e-16&#34;</span><span class="op" id="7245673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245676">&#34;996622e-44&#34;</span><span class="op" id="7245688">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245691">&#34;7038531e-32&#34;</span><span class="op" id="7245704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245707">&#34;60419369e-46&#34;</span><span class="op" id="7245721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245724">&#34;702990899e-20&#34;</span><span class="op" id="7245739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245742">&#34;6930161142e-48&#34;</span><span class="op" id="7245758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245761">&#34;25933168707e+13&#34;</span><span class="op" id="7245778">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245781">&#34;596428896559e+20&#34;</span><span class="op" id="7245799">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7245803">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245873">&#34;3e-23&#34;</span><span class="op" id="7245880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245883">&#34;57e+18&#34;</span><span class="op" id="7245891">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245894">&#34;789e-35&#34;</span><span class="op" id="7245903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245906">&#34;2539e-18&#34;</span><span class="op" id="7245916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245919">&#34;76173e+28&#34;</span><span class="op" id="7245930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245933">&#34;887745e-11&#34;</span><span class="op" id="7245945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245948">&#34;5382571e-37&#34;</span><span class="op" id="7245961">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245964">&#34;82381273e-35&#34;</span><span class="op" id="7245978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245981">&#34;750486563e-38&#34;</span><span class="op" id="7245996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7245999">&#34;3752432815e-39&#34;</span><span class="op" id="7246015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246018">&#34;75224575729e-45&#34;</span><span class="op" id="7246035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246038">&#34;459926601011e+15&#34;</span><span class="op" id="7246056">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246060">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246112">&#34;0&#34;</span><span class="op" id="7246115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246118">&#34;1&#34;</span><span class="op" id="7246121">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246124">&#34;+1&#34;</span><span class="op" id="7246128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246131">&#34;1e23&#34;</span><span class="op" id="7246137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246140">&#34;1E23&#34;</span><span class="op" id="7246146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246149">&#34;100000000000000000000000&#34;</span><span class="op" id="7246175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246178">&#34;1e-100&#34;</span><span class="op" id="7246186">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246189">&#34;123456700&#34;</span><span class="op" id="7246200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246203">&#34;99999999999999974834176&#34;</span><span class="op" id="7246228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246231">&#34;100000000000000000000001&#34;</span><span class="op" id="7246257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246260">&#34;100000000000000008388608&#34;</span><span class="op" id="7246286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246289">&#34;100000000000000016777215&#34;</span><span class="op" id="7246315">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246318">&#34;100000000000000016777216&#34;</span><span class="op" id="7246344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246347">&#34;-1&#34;</span><span class="op" id="7246351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246354">&#34;-0.1&#34;</span><span class="op" id="7246360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246363">&#34;-0&#34;</span><span class="op" id="7246367">,</span>&nbsp;<span class="comment" id="7246369">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246407">&#34;1e-20&#34;</span><span class="op" id="7246414">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246417">&#34;625e-3&#34;</span><span class="op" id="7246425">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246429">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246449">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7246473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246476">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7246501">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246504">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246533">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7246557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246560">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7246585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246588">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246616">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246638">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7246662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246665">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7246690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246693">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246720">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7246746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246749">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7246776">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246780">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246803">&#34;1e308&#34;</span><span class="op" id="7246810">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246813">&#34;2e308&#34;</span><span class="op" id="7246820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246823">&#34;1e309&#34;</span><span class="op" id="7246830">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246834">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246852">&#34;1e310&#34;</span><span class="op" id="7246859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246862">&#34;-1e310&#34;</span><span class="op" id="7246870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246873">&#34;1e400&#34;</span><span class="op" id="7246880">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246883">&#34;-1e400&#34;</span><span class="op" id="7246891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246894">&#34;long:1e400000&#34;</span><span class="op" id="7246909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246912">&#34;long:-1e400000&#34;</span><span class="op" id="7246928">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7246932">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246949">&#34;1e-305&#34;</span><span class="op" id="7246957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246960">&#34;1e-306&#34;</span><span class="op" id="7246968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246971">&#34;1e-307&#34;</span><span class="op" id="7246979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246982">&#34;1e-308&#34;</span><span class="op" id="7246990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7246993">&#34;1e-309&#34;</span><span class="op" id="7247001">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247004">&#34;1e-310&#34;</span><span class="op" id="7247012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247015">&#34;1e-322&#34;</span><span class="op" id="7247023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247026">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247048">&#34;5e-324&#34;</span><span class="op" id="7247056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247059">&#34;4e-324&#34;</span><span class="op" id="7247067">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247070">&#34;3e-324&#34;</span><span class="op" id="7247078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247081">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247095">&#34;2e-324&#34;</span><span class="op" id="7247103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247106">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247124">&#34;1e-350&#34;</span><span class="op" id="7247132">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247135">&#34;long:1e-400000&#34;</span><span class="op" id="7247151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247154">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247182">&#34;-1e-350&#34;</span><span class="op" id="7247191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247194">&#34;long:-1e-400000&#34;</span><span class="op" id="7247211">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247215">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247244">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247303">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247324">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247345">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247376">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247408">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247495">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7247520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247523">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247610">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7247635">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247639">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247713">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7247737">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247741">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247784">&#34;22.222222222222222&#34;</span><span class="op" id="7247804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247807">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7247817">+</span>&nbsp;<span class="ident" id="7247819">strings</span><span class="op" id="7247826">.</span><span class="ident" id="7247827">Repeat</span><span class="op" id="7247833">(</span><span class="string" id="7247834">&#34;2&#34;</span><span class="op" id="7247837">,</span>&nbsp;<span class="num" id="7247839">4000</span><span class="op" id="7247843">)</span>&nbsp;<span class="op" id="7247845">+</span>&nbsp;<span class="string" id="7247847">&#34;e+1&#34;</span><span class="op" id="7247852">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247856">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247912">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7247938">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7247995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7247998">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248036">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7248093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248096">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248127">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7248184">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248187">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248253">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7248316">+</span>&nbsp;<span class="ident" id="7248318">strings</span><span class="op" id="7248325">.</span><span class="ident" id="7248326">Repeat</span><span class="op" id="7248332">(</span><span class="string" id="7248333">&#34;0&#34;</span><span class="op" id="7248336">,</span>&nbsp;<span class="num" id="7248338">10000</span><span class="op" id="7248343">)</span>&nbsp;<span class="op" id="7248345">+</span>&nbsp;<span class="string" id="7248347">&#34;1&#34;</span><span class="op" id="7248350">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248354">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248390">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7248438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248441">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248485">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7248533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248536">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248595">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248640">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7248688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248691">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7248759">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248804">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7248852">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248856">&#34;1152921504606846975&#34;</span><span class="op" id="7248877">,</span>&nbsp;&nbsp;<span class="comment" id="7248880">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248896">&#34;-1152921504606846975&#34;</span><span class="op" id="7248918">,</span>&nbsp;<span class="comment" id="7248920">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248937">&#34;1152921504606846977&#34;</span><span class="op" id="7248958">,</span>&nbsp;&nbsp;<span class="comment" id="7248961">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7248977">&#34;-1152921504606846977&#34;</span><span class="op" id="7248999">,</span>&nbsp;<span class="comment" id="7249001">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7249019">&#34;1/3&#34;</span><span class="op" id="7249024">,</span><br>
<span class="lineno"></span><span class="op" id="7249026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7249029">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7249095">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7249155">func</span>&nbsp;<span class="ident" id="7249160">isFinite</span><span class="op" id="7249168">(</span><span class="ident" id="7249169">f</span>&nbsp;<span class="builtintype" id="7249171">float64</span><span class="op" id="7249178">)</span>&nbsp;<span class="builtintype" id="7249180">bool</span>&nbsp;<span class="op" id="7249185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249188">return</span>&nbsp;<span class="ident" id="7249195">math</span><span class="op" id="7249199">.</span><span class="ident" id="7249200">Abs</span><span class="op" id="7249203">(</span><span class="ident" id="7249204">f</span><span class="op" id="7249205">)</span>&nbsp;<span class="op" id="7249207">&lt;=</span>&nbsp;<span class="ident" id="7249210">math</span><span class="op" id="7249214">.</span><span class="ident" id="7249215">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7249226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7249229">func</span>&nbsp;<span class="ident" id="7249234">TestFloat32SpecialCases</span><span class="op" id="7249257">(</span><span class="ident" id="7249258">t</span>&nbsp;<span class="op" id="7249260">*</span><span class="ident" id="7249261">testing</span><span class="op" id="7249268">.</span><span class="ident" id="7249269">T</span><span class="op" id="7249270">)</span>&nbsp;<span class="op" id="7249272">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249275">for</span>&nbsp;<span class="ident" id="7249279">_</span><span class="op" id="7249280">,</span>&nbsp;<span class="ident" id="7249282">input</span>&nbsp;<span class="op" id="7249288">:=</span>&nbsp;<span class="keyword" id="7249291">range</span>&nbsp;<span class="ident" id="7249297">float64inputs</span>&nbsp;<span class="op" id="7249311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249315">if</span>&nbsp;<span class="ident" id="7249318">strings</span><span class="op" id="7249325">.</span><span class="ident" id="7249326">HasPrefix</span><span class="op" id="7249335">(</span><span class="ident" id="7249336">input</span><span class="op" id="7249341">,</span>&nbsp;<span class="string" id="7249343">&#34;long:&#34;</span><span class="op" id="7249350">)</span>&nbsp;<span class="op" id="7249352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249357">if</span>&nbsp;<span class="ident" id="7249360">testing</span><span class="op" id="7249367">.</span><span class="ident" id="7249368">Short</span><span class="op" id="7249373">(</span><span class="op" id="7249374">)</span>&nbsp;<span class="op" id="7249376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249382">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7249394">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249399">input</span>&nbsp;<span class="op" id="7249405">=</span>&nbsp;<span class="ident" id="7249407">input</span><span class="op" id="7249412">[</span><span class="builtinfunc" id="7249413">len</span><span class="op" id="7249416">(</span><span class="string" id="7249417">&#34;long:&#34;</span><span class="op" id="7249424">)</span><span class="op" id="7249425">:</span><span class="op" id="7249426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7249430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249435">r</span><span class="op" id="7249436">,</span>&nbsp;<span class="ident" id="7249438">ok</span>&nbsp;<span class="op" id="7249441">:=</span>&nbsp;<span class="builtinfunc" id="7249444">new</span><span class="op" id="7249447">(</span><span class="ident" id="7249448">Rat</span><span class="op" id="7249451">)</span><span class="op" id="7249452">.</span><span class="ident" id="7249453">SetString</span><span class="op" id="7249462">(</span><span class="ident" id="7249463">input</span><span class="op" id="7249468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249472">if</span>&nbsp;<span class="op" id="7249475">!</span><span class="ident" id="7249476">ok</span>&nbsp;<span class="op" id="7249479">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249484">t</span><span class="op" id="7249485">.</span><span class="ident" id="7249486">Errorf</span><span class="op" id="7249492">(</span><span class="string" id="7249493">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7249519">,</span>&nbsp;<span class="ident" id="7249521">input</span><span class="op" id="7249526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249531">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7249542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249546">f</span><span class="op" id="7249547">,</span>&nbsp;<span class="ident" id="7249549">exact</span>&nbsp;<span class="op" id="7249555">:=</span>&nbsp;<span class="ident" id="7249558">r</span><span class="op" id="7249559">.</span><span class="ident" id="7249560">Float32</span><span class="op" id="7249567">(</span><span class="op" id="7249568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249573">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249628">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249669">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249731">if</span>&nbsp;<span class="op" id="7249734">!</span><span class="ident" id="7249735">strings</span><span class="op" id="7249742">.</span><span class="ident" id="7249743">Contains</span><span class="op" id="7249751">(</span><span class="ident" id="7249752">input</span><span class="op" id="7249757">,</span>&nbsp;<span class="string" id="7249759">&#34;/&#34;</span><span class="op" id="7249762">)</span>&nbsp;<span class="op" id="7249764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249769">e64</span><span class="op" id="7249772">,</span>&nbsp;<span class="ident" id="7249774">_</span>&nbsp;<span class="op" id="7249776">:=</span>&nbsp;<span class="ident" id="7249779">strconv</span><span class="op" id="7249786">.</span><span class="ident" id="7249787">ParseFloat</span><span class="op" id="7249797">(</span><span class="ident" id="7249798">input</span><span class="op" id="7249803">,</span>&nbsp;<span class="num" id="7249805">32</span><span class="op" id="7249807">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7249812">e</span>&nbsp;<span class="op" id="7249814">:=</span>&nbsp;<span class="builtintype" id="7249817">float32</span><span class="op" id="7249824">(</span><span class="ident" id="7249825">e64</span><span class="op" id="7249828">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249834">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249877">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7249927">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249973">switch</span>&nbsp;<span class="op" id="7249980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7249985">case</span>&nbsp;<span class="ident" id="7249990">math</span><span class="op" id="7249994">.</span><span class="ident" id="7249995">Float32bits</span><span class="op" id="7250006">(</span><span class="ident" id="7250007">e</span><span class="op" id="7250008">)</span>&nbsp;<span class="op" id="7250010">==</span>&nbsp;<span class="ident" id="7250013">math</span><span class="op" id="7250017">.</span><span class="ident" id="7250018">Float32bits</span><span class="op" id="7250029">(</span><span class="ident" id="7250030">f</span><span class="op" id="7250031">)</span><span class="op" id="7250032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250038">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250063">case</span>&nbsp;<span class="ident" id="7250068">f</span>&nbsp;<span class="op" id="7250070">==</span>&nbsp;<span class="num" id="7250073">0</span>&nbsp;<span class="op" id="7250075">&amp;&amp;</span>&nbsp;<span class="ident" id="7250078">r</span><span class="op" id="7250079">.</span><span class="ident" id="7250080">Num</span><span class="op" id="7250083">(</span><span class="op" id="7250084">)</span><span class="op" id="7250085">.</span><span class="ident" id="7250086">BitLen</span><span class="op" id="7250092">(</span><span class="op" id="7250093">)</span>&nbsp;<span class="op" id="7250095">==</span>&nbsp;<span class="num" id="7250098">0</span><span class="op" id="7250099">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250105">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250160">default</span><span class="op" id="7250167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250173">t</span><span class="op" id="7250174">.</span><span class="ident" id="7250175">Errorf</span><span class="op" id="7250181">(</span><span class="string" id="7250182">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7250242">,</span>&nbsp;<span class="ident" id="7250244">input</span><span class="op" id="7250249">,</span>&nbsp;<span class="ident" id="7250251">e</span><span class="op" id="7250252">,</span>&nbsp;<span class="ident" id="7250254">e</span><span class="op" id="7250255">,</span>&nbsp;<span class="ident" id="7250257">f</span><span class="op" id="7250258">,</span>&nbsp;<span class="ident" id="7250260">f</span><span class="op" id="7250261">,</span>&nbsp;<span class="ident" id="7250263">f</span><span class="op" id="7250264">-</span><span class="ident" id="7250265">e</span><span class="op" id="7250266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250280">if</span>&nbsp;<span class="op" id="7250283">!</span><span class="ident" id="7250284">isFinite</span><span class="op" id="7250292">(</span><span class="builtintype" id="7250293">float64</span><span class="op" id="7250300">(</span><span class="ident" id="7250301">f</span><span class="op" id="7250302">)</span><span class="op" id="7250303">)</span>&nbsp;<span class="op" id="7250305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250310">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250326">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250370">if</span>&nbsp;<span class="op" id="7250373">!</span><span class="ident" id="7250374">checkIsBestApprox32</span><span class="op" id="7250393">(</span><span class="ident" id="7250394">t</span><span class="op" id="7250395">,</span>&nbsp;<span class="ident" id="7250397">f</span><span class="op" id="7250398">,</span>&nbsp;<span class="ident" id="7250400">r</span><span class="op" id="7250401">)</span>&nbsp;<span class="op" id="7250403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250408">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250442">t</span><span class="op" id="7250443">.</span><span class="ident" id="7250444">Errorf</span><span class="op" id="7250450">(</span><span class="string" id="7250451">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7250467">,</span>&nbsp;<span class="ident" id="7250469">input</span><span class="op" id="7250474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250483">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250529">checkNonLossyRoundtrip32</span><span class="op" id="7250553">(</span><span class="ident" id="7250554">t</span><span class="op" id="7250555">,</span>&nbsp;<span class="ident" id="7250557">f</span><span class="op" id="7250558">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7250563">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250609">if</span>&nbsp;<span class="ident" id="7250612">wasExact</span>&nbsp;<span class="op" id="7250621">:=</span>&nbsp;<span class="builtinfunc" id="7250624">new</span><span class="op" id="7250627">(</span><span class="ident" id="7250628">Rat</span><span class="op" id="7250631">)</span><span class="op" id="7250632">.</span><span class="ident" id="7250633">SetFloat64</span><span class="op" id="7250643">(</span><span class="builtintype" id="7250644">float64</span><span class="op" id="7250651">(</span><span class="ident" id="7250652">f</span><span class="op" id="7250653">)</span><span class="op" id="7250654">)</span><span class="op" id="7250655">.</span><span class="ident" id="7250656">Cmp</span><span class="op" id="7250659">(</span><span class="ident" id="7250660">r</span><span class="op" id="7250661">)</span>&nbsp;<span class="op" id="7250663">==</span>&nbsp;<span class="num" id="7250666">0</span><span class="op" id="7250667">;</span>&nbsp;<span class="ident" id="7250669">wasExact</span>&nbsp;<span class="op" id="7250678">!=</span>&nbsp;<span class="ident" id="7250681">exact</span>&nbsp;<span class="op" id="7250687">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250692">t</span><span class="op" id="7250693">.</span><span class="ident" id="7250694">Errorf</span><span class="op" id="7250700">(</span><span class="string" id="7250701">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7250750">,</span>&nbsp;<span class="ident" id="7250752">input</span><span class="op" id="7250757">,</span>&nbsp;<span class="ident" id="7250759">exact</span><span class="op" id="7250764">,</span>&nbsp;<span class="ident" id="7250766">wasExact</span><span class="op" id="7250774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250781">}</span><br>
<span class="lineno"></span><span class="op" id="7250783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7250786">func</span>&nbsp;<span class="ident" id="7250791">TestFloat64SpecialCases</span><span class="op" id="7250814">(</span><span class="ident" id="7250815">t</span>&nbsp;<span class="op" id="7250817">*</span><span class="ident" id="7250818">testing</span><span class="op" id="7250825">.</span><span class="ident" id="7250826">T</span><span class="op" id="7250827">)</span>&nbsp;<span class="op" id="7250829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250832">for</span>&nbsp;<span class="ident" id="7250836">_</span><span class="op" id="7250837">,</span>&nbsp;<span class="ident" id="7250839">input</span>&nbsp;<span class="op" id="7250845">:=</span>&nbsp;<span class="keyword" id="7250848">range</span>&nbsp;<span class="ident" id="7250854">float64inputs</span>&nbsp;<span class="op" id="7250868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250872">if</span>&nbsp;<span class="ident" id="7250875">strings</span><span class="op" id="7250882">.</span><span class="ident" id="7250883">HasPrefix</span><span class="op" id="7250892">(</span><span class="ident" id="7250893">input</span><span class="op" id="7250898">,</span>&nbsp;<span class="string" id="7250900">&#34;long:&#34;</span><span class="op" id="7250907">)</span>&nbsp;<span class="op" id="7250909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250914">if</span>&nbsp;<span class="ident" id="7250917">testing</span><span class="op" id="7250924">.</span><span class="ident" id="7250925">Short</span><span class="op" id="7250930">(</span><span class="op" id="7250931">)</span>&nbsp;<span class="op" id="7250933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7250939">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250956">input</span>&nbsp;<span class="op" id="7250962">=</span>&nbsp;<span class="ident" id="7250964">input</span><span class="op" id="7250969">[</span><span class="builtinfunc" id="7250970">len</span><span class="op" id="7250973">(</span><span class="string" id="7250974">&#34;long:&#34;</span><span class="op" id="7250981">)</span><span class="op" id="7250982">:</span><span class="op" id="7250983">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7250987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7250992">r</span><span class="op" id="7250993">,</span>&nbsp;<span class="ident" id="7250995">ok</span>&nbsp;<span class="op" id="7250998">:=</span>&nbsp;<span class="builtinfunc" id="7251001">new</span><span class="op" id="7251004">(</span><span class="ident" id="7251005">Rat</span><span class="op" id="7251008">)</span><span class="op" id="7251009">.</span><span class="ident" id="7251010">SetString</span><span class="op" id="7251019">(</span><span class="ident" id="7251020">input</span><span class="op" id="7251025">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251029">if</span>&nbsp;<span class="op" id="7251032">!</span><span class="ident" id="7251033">ok</span>&nbsp;<span class="op" id="7251036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7251041">t</span><span class="op" id="7251042">.</span><span class="ident" id="7251043">Errorf</span><span class="op" id="7251049">(</span><span class="string" id="7251050">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7251076">,</span>&nbsp;<span class="ident" id="7251078">input</span><span class="op" id="7251083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251088">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7251099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7251103">f</span><span class="op" id="7251104">,</span>&nbsp;<span class="ident" id="7251106">exact</span>&nbsp;<span class="op" id="7251112">:=</span>&nbsp;<span class="ident" id="7251115">r</span><span class="op" id="7251116">.</span><span class="ident" id="7251117">Float64</span><span class="op" id="7251124">(</span><span class="op" id="7251125">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251130">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251185">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251226">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251288">if</span>&nbsp;<span class="op" id="7251291">!</span><span class="ident" id="7251292">strings</span><span class="op" id="7251299">.</span><span class="ident" id="7251300">Contains</span><span class="op" id="7251308">(</span><span class="ident" id="7251309">input</span><span class="op" id="7251314">,</span>&nbsp;<span class="string" id="7251316">&#34;/&#34;</span><span class="op" id="7251319">)</span>&nbsp;<span class="op" id="7251321">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7251326">e</span><span class="op" id="7251327">,</span>&nbsp;<span class="ident" id="7251329">_</span>&nbsp;<span class="op" id="7251331">:=</span>&nbsp;<span class="ident" id="7251334">strconv</span><span class="op" id="7251341">.</span><span class="ident" id="7251342">ParseFloat</span><span class="op" id="7251352">(</span><span class="ident" id="7251353">input</span><span class="op" id="7251358">,</span>&nbsp;<span class="num" id="7251360">64</span><span class="op" id="7251362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251368">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251411">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251461">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251507">switch</span>&nbsp;<span class="op" id="7251514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251519">case</span>&nbsp;<span class="ident" id="7251524">math</span><span class="op" id="7251528">.</span><span class="ident" id="7251529">Float64bits</span><span class="op" id="7251540">(</span><span class="ident" id="7251541">e</span><span class="op" id="7251542">)</span>&nbsp;<span class="op" id="7251544">==</span>&nbsp;<span class="ident" id="7251547">math</span><span class="op" id="7251551">.</span><span class="ident" id="7251552">Float64bits</span><span class="op" id="7251563">(</span><span class="ident" id="7251564">f</span><span class="op" id="7251565">)</span><span class="op" id="7251566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251572">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251597">case</span>&nbsp;<span class="ident" id="7251602">f</span>&nbsp;<span class="op" id="7251604">==</span>&nbsp;<span class="num" id="7251607">0</span>&nbsp;<span class="op" id="7251609">&amp;&amp;</span>&nbsp;<span class="ident" id="7251612">r</span><span class="op" id="7251613">.</span><span class="ident" id="7251614">Num</span><span class="op" id="7251617">(</span><span class="op" id="7251618">)</span><span class="op" id="7251619">.</span><span class="ident" id="7251620">BitLen</span><span class="op" id="7251626">(</span><span class="op" id="7251627">)</span>&nbsp;<span class="op" id="7251629">==</span>&nbsp;<span class="num" id="7251632">0</span><span class="op" id="7251633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251639">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251694">default</span><span class="op" id="7251701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7251707">t</span><span class="op" id="7251708">.</span><span class="ident" id="7251709">Errorf</span><span class="op" id="7251715">(</span><span class="string" id="7251716">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7251776">,</span>&nbsp;<span class="ident" id="7251778">input</span><span class="op" id="7251783">,</span>&nbsp;<span class="ident" id="7251785">e</span><span class="op" id="7251786">,</span>&nbsp;<span class="ident" id="7251788">e</span><span class="op" id="7251789">,</span>&nbsp;<span class="ident" id="7251791">f</span><span class="op" id="7251792">,</span>&nbsp;<span class="ident" id="7251794">f</span><span class="op" id="7251795">,</span>&nbsp;<span class="ident" id="7251797">f</span><span class="op" id="7251798">-</span><span class="ident" id="7251799">e</span><span class="op" id="7251800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7251805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7251809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251814">if</span>&nbsp;<span class="op" id="7251817">!</span><span class="ident" id="7251818">isFinite</span><span class="op" id="7251826">(</span><span class="ident" id="7251827">f</span><span class="op" id="7251828">)</span>&nbsp;<span class="op" id="7251830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251835">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7251846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251851">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7251895">if</span>&nbsp;<span class="op" id="7251898">!</span><span class="ident" id="7251899">checkIsBestApprox64</span><span class="op" id="7251918">(</span><span class="ident" id="7251919">t</span><span class="op" id="7251920">,</span>&nbsp;<span class="ident" id="7251922">f</span><span class="op" id="7251923">,</span>&nbsp;<span class="ident" id="7251925">r</span><span class="op" id="7251926">)</span>&nbsp;<span class="op" id="7251928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7251933">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7251967">t</span><span class="op" id="7251968">.</span><span class="ident" id="7251969">Errorf</span><span class="op" id="7251975">(</span><span class="string" id="7251976">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7251992">,</span>&nbsp;<span class="ident" id="7251994">input</span><span class="op" id="7251999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7252008">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252054">checkNonLossyRoundtrip64</span><span class="op" id="7252078">(</span><span class="ident" id="7252079">t</span><span class="op" id="7252080">,</span>&nbsp;<span class="ident" id="7252082">f</span><span class="op" id="7252083">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7252088">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252134">if</span>&nbsp;<span class="ident" id="7252137">wasExact</span>&nbsp;<span class="op" id="7252146">:=</span>&nbsp;<span class="builtinfunc" id="7252149">new</span><span class="op" id="7252152">(</span><span class="ident" id="7252153">Rat</span><span class="op" id="7252156">)</span><span class="op" id="7252157">.</span><span class="ident" id="7252158">SetFloat64</span><span class="op" id="7252168">(</span><span class="ident" id="7252169">f</span><span class="op" id="7252170">)</span><span class="op" id="7252171">.</span><span class="ident" id="7252172">Cmp</span><span class="op" id="7252175">(</span><span class="ident" id="7252176">r</span><span class="op" id="7252177">)</span>&nbsp;<span class="op" id="7252179">==</span>&nbsp;<span class="num" id="7252182">0</span><span class="op" id="7252183">;</span>&nbsp;<span class="ident" id="7252185">wasExact</span>&nbsp;<span class="op" id="7252194">!=</span>&nbsp;<span class="ident" id="7252197">exact</span>&nbsp;<span class="op" id="7252203">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252208">t</span><span class="op" id="7252209">.</span><span class="ident" id="7252210">Errorf</span><span class="op" id="7252216">(</span><span class="string" id="7252217">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7252266">,</span>&nbsp;<span class="ident" id="7252268">input</span><span class="op" id="7252273">,</span>&nbsp;<span class="ident" id="7252275">exact</span><span class="op" id="7252280">,</span>&nbsp;<span class="ident" id="7252282">wasExact</span><span class="op" id="7252290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252297">}</span><br>
<span class="lineno"></span><span class="op" id="7252299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7252302">func</span>&nbsp;<span class="ident" id="7252307">TestFloat32Distribution</span><span class="op" id="7252330">(</span><span class="ident" id="7252331">t</span>&nbsp;<span class="op" id="7252333">*</span><span class="ident" id="7252334">testing</span><span class="op" id="7252341">.</span><span class="ident" id="7252342">T</span><span class="op" id="7252343">)</span>&nbsp;<span class="op" id="7252345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7252348">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7252408">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7252468">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252520">var</span>&nbsp;<span class="ident" id="7252524">add</span>&nbsp;<span class="op" id="7252528">=</span>&nbsp;<span class="op" id="7252530">[</span><span class="op" id="7252531">]</span><span class="ident" id="7252532">int64</span><span class="op" id="7252537">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252541">0</span><span class="op" id="7252542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252546">1</span><span class="op" id="7252547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252551">3</span><span class="op" id="7252552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252556">5</span><span class="op" id="7252557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252561">7</span><span class="op" id="7252562">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252566">9</span><span class="op" id="7252567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7252571">11</span><span class="op" id="7252573">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252579">var</span>&nbsp;<span class="ident" id="7252583">winc</span><span class="op" id="7252587">,</span>&nbsp;<span class="ident" id="7252589">einc</span>&nbsp;<span class="op" id="7252594">=</span>&nbsp;<span class="ident" id="7252596">uint64</span><span class="op" id="7252602">(</span><span class="num" id="7252603">1</span><span class="op" id="7252604">)</span><span class="op" id="7252605">,</span>&nbsp;<span class="num" id="7252607">1</span>&nbsp;<span class="comment" id="7252609">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252641">if</span>&nbsp;<span class="ident" id="7252644">testing</span><span class="op" id="7252651">.</span><span class="ident" id="7252652">Short</span><span class="op" id="7252657">(</span><span class="op" id="7252658">)</span>&nbsp;<span class="op" id="7252660">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252664">winc</span><span class="op" id="7252668">,</span>&nbsp;<span class="ident" id="7252670">einc</span>&nbsp;<span class="op" id="7252675">=</span>&nbsp;<span class="num" id="7252677">5</span><span class="op" id="7252678">,</span>&nbsp;<span class="num" id="7252680">15</span>&nbsp;<span class="comment" id="7252683">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252720">for</span>&nbsp;<span class="ident" id="7252724">_</span><span class="op" id="7252725">,</span>&nbsp;<span class="ident" id="7252727">sign</span>&nbsp;<span class="op" id="7252732">:=</span>&nbsp;<span class="keyword" id="7252735">range</span>&nbsp;<span class="string" id="7252741">&#34;+-&#34;</span>&nbsp;<span class="op" id="7252746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252750">for</span>&nbsp;<span class="ident" id="7252754">_</span><span class="op" id="7252755">,</span>&nbsp;<span class="ident" id="7252757">a</span>&nbsp;<span class="op" id="7252759">:=</span>&nbsp;<span class="keyword" id="7252762">range</span>&nbsp;<span class="ident" id="7252768">add</span>&nbsp;<span class="op" id="7252772">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252777">for</span>&nbsp;<span class="ident" id="7252781">wid</span>&nbsp;<span class="op" id="7252785">:=</span>&nbsp;<span class="ident" id="7252788">uint64</span><span class="op" id="7252794">(</span><span class="num" id="7252795">0</span><span class="op" id="7252796">)</span><span class="op" id="7252797">;</span>&nbsp;<span class="ident" id="7252799">wid</span>&nbsp;<span class="op" id="7252803">&lt;</span>&nbsp;<span class="num" id="7252805">30</span><span class="op" id="7252807">;</span>&nbsp;<span class="ident" id="7252809">wid</span>&nbsp;<span class="op" id="7252813">+=</span>&nbsp;<span class="ident" id="7252816">winc</span>&nbsp;<span class="op" id="7252821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252827">b</span>&nbsp;<span class="op" id="7252829">:=</span>&nbsp;<span class="num" id="7252832">1</span><span class="op" id="7252833">&lt;&lt;</span><span class="ident" id="7252835">wid</span>&nbsp;<span class="op" id="7252839">+</span>&nbsp;<span class="ident" id="7252841">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252847">if</span>&nbsp;<span class="ident" id="7252850">sign</span>&nbsp;<span class="op" id="7252855">==</span>&nbsp;<span class="string" id="7252858">&#39;-&#39;</span>&nbsp;<span class="op" id="7252862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252869">b</span>&nbsp;<span class="op" id="7252871">=</span>&nbsp;<span class="op" id="7252873">-</span><span class="ident" id="7252874">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7252880">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252886">for</span>&nbsp;<span class="ident" id="7252890">exp</span>&nbsp;<span class="op" id="7252894">:=</span>&nbsp;<span class="op" id="7252897">-</span><span class="num" id="7252898">150</span><span class="op" id="7252901">;</span>&nbsp;<span class="ident" id="7252903">exp</span>&nbsp;<span class="op" id="7252907">&lt;</span>&nbsp;<span class="num" id="7252909">150</span><span class="op" id="7252912">;</span>&nbsp;<span class="ident" id="7252914">exp</span>&nbsp;<span class="op" id="7252918">+=</span>&nbsp;<span class="ident" id="7252921">einc</span>&nbsp;<span class="op" id="7252926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252933">num</span><span class="op" id="7252936">,</span>&nbsp;<span class="ident" id="7252938">den</span>&nbsp;<span class="op" id="7252942">:=</span>&nbsp;<span class="ident" id="7252945">NewInt</span><span class="op" id="7252951">(</span><span class="ident" id="7252952">b</span><span class="op" id="7252953">)</span><span class="op" id="7252954">,</span>&nbsp;<span class="ident" id="7252956">NewInt</span><span class="op" id="7252962">(</span><span class="num" id="7252963">1</span><span class="op" id="7252964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7252971">if</span>&nbsp;<span class="ident" id="7252974">exp</span>&nbsp;<span class="op" id="7252978">&gt;</span>&nbsp;<span class="num" id="7252980">0</span>&nbsp;<span class="op" id="7252982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7252990">num</span><span class="op" id="7252993">.</span><span class="ident" id="7252994">Lsh</span><span class="op" id="7252997">(</span><span class="ident" id="7252998">num</span><span class="op" id="7253001">,</span>&nbsp;<span class="builtintype" id="7253003">uint</span><span class="op" id="7253007">(</span><span class="ident" id="7253008">exp</span><span class="op" id="7253011">)</span><span class="op" id="7253012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253019">}</span>&nbsp;<span class="keyword" id="7253021">else</span>&nbsp;<span class="op" id="7253026">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253034">den</span><span class="op" id="7253037">.</span><span class="ident" id="7253038">Lsh</span><span class="op" id="7253041">(</span><span class="ident" id="7253042">den</span><span class="op" id="7253045">,</span>&nbsp;<span class="builtintype" id="7253047">uint</span><span class="op" id="7253051">(</span><span class="op" id="7253052">-</span><span class="ident" id="7253053">exp</span><span class="op" id="7253056">)</span><span class="op" id="7253057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253071">r</span>&nbsp;<span class="op" id="7253073">:=</span>&nbsp;<span class="builtinfunc" id="7253076">new</span><span class="op" id="7253079">(</span><span class="ident" id="7253080">Rat</span><span class="op" id="7253083">)</span><span class="op" id="7253084">.</span><span class="ident" id="7253085">SetFrac</span><span class="op" id="7253092">(</span><span class="ident" id="7253093">num</span><span class="op" id="7253096">,</span>&nbsp;<span class="ident" id="7253098">den</span><span class="op" id="7253101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253108">f</span><span class="op" id="7253109">,</span>&nbsp;<span class="ident" id="7253111">_</span>&nbsp;<span class="op" id="7253113">:=</span>&nbsp;<span class="ident" id="7253116">r</span><span class="op" id="7253117">.</span><span class="ident" id="7253118">Float32</span><span class="op" id="7253125">(</span><span class="op" id="7253126">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253134">if</span>&nbsp;<span class="op" id="7253137">!</span><span class="ident" id="7253138">checkIsBestApprox32</span><span class="op" id="7253157">(</span><span class="ident" id="7253158">t</span><span class="op" id="7253159">,</span>&nbsp;<span class="ident" id="7253161">f</span><span class="op" id="7253162">,</span>&nbsp;<span class="ident" id="7253164">r</span><span class="op" id="7253165">)</span>&nbsp;<span class="op" id="7253167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7253175">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253212">t</span><span class="op" id="7253213">.</span><span class="ident" id="7253214">Errorf</span><span class="op" id="7253220">(</span><span class="string" id="7253221">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7253284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253293">b</span><span class="op" id="7253294">,</span>&nbsp;<span class="ident" id="7253296">exp</span><span class="op" id="7253299">,</span>&nbsp;<span class="ident" id="7253301">f</span><span class="op" id="7253302">,</span>&nbsp;<span class="ident" id="7253304">f</span><span class="op" id="7253305">,</span>&nbsp;<span class="ident" id="7253307">math</span><span class="op" id="7253311">.</span><span class="ident" id="7253312">Ldexp</span><span class="op" id="7253317">(</span><span class="builtintype" id="7253318">float64</span><span class="op" id="7253325">(</span><span class="ident" id="7253326">b</span><span class="op" id="7253327">)</span><span class="op" id="7253328">,</span>&nbsp;<span class="ident" id="7253330">exp</span><span class="op" id="7253333">)</span><span class="op" id="7253334">,</span>&nbsp;<span class="ident" id="7253336">r</span><span class="op" id="7253337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253344">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253352">checkNonLossyRoundtrip32</span><span class="op" id="7253376">(</span><span class="ident" id="7253377">t</span><span class="op" id="7253378">,</span>&nbsp;<span class="ident" id="7253380">f</span><span class="op" id="7253381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253396">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253399">}</span><br>
<span class="lineno"></span><span class="op" id="7253401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7253404">func</span>&nbsp;<span class="ident" id="7253409">TestFloat64Distribution</span><span class="op" id="7253432">(</span><span class="ident" id="7253433">t</span>&nbsp;<span class="op" id="7253435">*</span><span class="ident" id="7253436">testing</span><span class="op" id="7253443">.</span><span class="ident" id="7253444">T</span><span class="op" id="7253445">)</span>&nbsp;<span class="op" id="7253447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7253450">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7253510">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7253570">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253622">var</span>&nbsp;<span class="ident" id="7253626">add</span>&nbsp;<span class="op" id="7253630">=</span>&nbsp;<span class="op" id="7253632">[</span><span class="op" id="7253633">]</span><span class="ident" id="7253634">int64</span><span class="op" id="7253639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253643">0</span><span class="op" id="7253644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253648">1</span><span class="op" id="7253649">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253653">3</span><span class="op" id="7253654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253658">5</span><span class="op" id="7253659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253663">7</span><span class="op" id="7253664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253668">9</span><span class="op" id="7253669">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7253673">11</span><span class="op" id="7253675">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253681">var</span>&nbsp;<span class="ident" id="7253685">winc</span><span class="op" id="7253689">,</span>&nbsp;<span class="ident" id="7253691">einc</span>&nbsp;<span class="op" id="7253696">=</span>&nbsp;<span class="ident" id="7253698">uint64</span><span class="op" id="7253704">(</span><span class="num" id="7253705">1</span><span class="op" id="7253706">)</span><span class="op" id="7253707">,</span>&nbsp;<span class="num" id="7253709">1</span>&nbsp;<span class="comment" id="7253711">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253742">if</span>&nbsp;<span class="ident" id="7253745">testing</span><span class="op" id="7253752">.</span><span class="ident" id="7253753">Short</span><span class="op" id="7253758">(</span><span class="op" id="7253759">)</span>&nbsp;<span class="op" id="7253761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253765">winc</span><span class="op" id="7253769">,</span>&nbsp;<span class="ident" id="7253771">einc</span>&nbsp;<span class="op" id="7253776">=</span>&nbsp;<span class="num" id="7253778">10</span><span class="op" id="7253780">,</span>&nbsp;<span class="num" id="7253782">500</span>&nbsp;<span class="comment" id="7253786">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253819">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253823">for</span>&nbsp;<span class="ident" id="7253827">_</span><span class="op" id="7253828">,</span>&nbsp;<span class="ident" id="7253830">sign</span>&nbsp;<span class="op" id="7253835">:=</span>&nbsp;<span class="keyword" id="7253838">range</span>&nbsp;<span class="string" id="7253844">&#34;+-&#34;</span>&nbsp;<span class="op" id="7253849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253853">for</span>&nbsp;<span class="ident" id="7253857">_</span><span class="op" id="7253858">,</span>&nbsp;<span class="ident" id="7253860">a</span>&nbsp;<span class="op" id="7253862">:=</span>&nbsp;<span class="keyword" id="7253865">range</span>&nbsp;<span class="ident" id="7253871">add</span>&nbsp;<span class="op" id="7253875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253880">for</span>&nbsp;<span class="ident" id="7253884">wid</span>&nbsp;<span class="op" id="7253888">:=</span>&nbsp;<span class="ident" id="7253891">uint64</span><span class="op" id="7253897">(</span><span class="num" id="7253898">0</span><span class="op" id="7253899">)</span><span class="op" id="7253900">;</span>&nbsp;<span class="ident" id="7253902">wid</span>&nbsp;<span class="op" id="7253906">&lt;</span>&nbsp;<span class="num" id="7253908">60</span><span class="op" id="7253910">;</span>&nbsp;<span class="ident" id="7253912">wid</span>&nbsp;<span class="op" id="7253916">+=</span>&nbsp;<span class="ident" id="7253919">winc</span>&nbsp;<span class="op" id="7253924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253930">b</span>&nbsp;<span class="op" id="7253932">:=</span>&nbsp;<span class="num" id="7253935">1</span><span class="op" id="7253936">&lt;&lt;</span><span class="ident" id="7253938">wid</span>&nbsp;<span class="op" id="7253942">+</span>&nbsp;<span class="ident" id="7253944">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253950">if</span>&nbsp;<span class="ident" id="7253953">sign</span>&nbsp;<span class="op" id="7253958">==</span>&nbsp;<span class="string" id="7253961">&#39;-&#39;</span>&nbsp;<span class="op" id="7253965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7253972">b</span>&nbsp;<span class="op" id="7253974">=</span>&nbsp;<span class="op" id="7253976">-</span><span class="ident" id="7253977">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7253983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7253989">for</span>&nbsp;<span class="ident" id="7253993">exp</span>&nbsp;<span class="op" id="7253997">:=</span>&nbsp;<span class="op" id="7254000">-</span><span class="num" id="7254001">1100</span><span class="op" id="7254005">;</span>&nbsp;<span class="ident" id="7254007">exp</span>&nbsp;<span class="op" id="7254011">&lt;</span>&nbsp;<span class="num" id="7254013">1100</span><span class="op" id="7254017">;</span>&nbsp;<span class="ident" id="7254019">exp</span>&nbsp;<span class="op" id="7254023">+=</span>&nbsp;<span class="ident" id="7254026">einc</span>&nbsp;<span class="op" id="7254031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254038">num</span><span class="op" id="7254041">,</span>&nbsp;<span class="ident" id="7254043">den</span>&nbsp;<span class="op" id="7254047">:=</span>&nbsp;<span class="ident" id="7254050">NewInt</span><span class="op" id="7254056">(</span><span class="ident" id="7254057">b</span><span class="op" id="7254058">)</span><span class="op" id="7254059">,</span>&nbsp;<span class="ident" id="7254061">NewInt</span><span class="op" id="7254067">(</span><span class="num" id="7254068">1</span><span class="op" id="7254069">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254076">if</span>&nbsp;<span class="ident" id="7254079">exp</span>&nbsp;<span class="op" id="7254083">&gt;</span>&nbsp;<span class="num" id="7254085">0</span>&nbsp;<span class="op" id="7254087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254095">num</span><span class="op" id="7254098">.</span><span class="ident" id="7254099">Lsh</span><span class="op" id="7254102">(</span><span class="ident" id="7254103">num</span><span class="op" id="7254106">,</span>&nbsp;<span class="builtintype" id="7254108">uint</span><span class="op" id="7254112">(</span><span class="ident" id="7254113">exp</span><span class="op" id="7254116">)</span><span class="op" id="7254117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254124">}</span>&nbsp;<span class="keyword" id="7254126">else</span>&nbsp;<span class="op" id="7254131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254139">den</span><span class="op" id="7254142">.</span><span class="ident" id="7254143">Lsh</span><span class="op" id="7254146">(</span><span class="ident" id="7254147">den</span><span class="op" id="7254150">,</span>&nbsp;<span class="builtintype" id="7254152">uint</span><span class="op" id="7254156">(</span><span class="op" id="7254157">-</span><span class="ident" id="7254158">exp</span><span class="op" id="7254161">)</span><span class="op" id="7254162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254169">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254176">r</span>&nbsp;<span class="op" id="7254178">:=</span>&nbsp;<span class="builtinfunc" id="7254181">new</span><span class="op" id="7254184">(</span><span class="ident" id="7254185">Rat</span><span class="op" id="7254188">)</span><span class="op" id="7254189">.</span><span class="ident" id="7254190">SetFrac</span><span class="op" id="7254197">(</span><span class="ident" id="7254198">num</span><span class="op" id="7254201">,</span>&nbsp;<span class="ident" id="7254203">den</span><span class="op" id="7254206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254213">f</span><span class="op" id="7254214">,</span>&nbsp;<span class="ident" id="7254216">_</span>&nbsp;<span class="op" id="7254218">:=</span>&nbsp;<span class="ident" id="7254221">r</span><span class="op" id="7254222">.</span><span class="ident" id="7254223">Float64</span><span class="op" id="7254230">(</span><span class="op" id="7254231">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254239">if</span>&nbsp;<span class="op" id="7254242">!</span><span class="ident" id="7254243">checkIsBestApprox64</span><span class="op" id="7254262">(</span><span class="ident" id="7254263">t</span><span class="op" id="7254264">,</span>&nbsp;<span class="ident" id="7254266">f</span><span class="op" id="7254267">,</span>&nbsp;<span class="ident" id="7254269">r</span><span class="op" id="7254270">)</span>&nbsp;<span class="op" id="7254272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7254280">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254317">t</span><span class="op" id="7254318">.</span><span class="ident" id="7254319">Errorf</span><span class="op" id="7254325">(</span><span class="string" id="7254326">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7254389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254398">b</span><span class="op" id="7254399">,</span>&nbsp;<span class="ident" id="7254401">exp</span><span class="op" id="7254404">,</span>&nbsp;<span class="ident" id="7254406">f</span><span class="op" id="7254407">,</span>&nbsp;<span class="ident" id="7254409">f</span><span class="op" id="7254410">,</span>&nbsp;<span class="ident" id="7254412">math</span><span class="op" id="7254416">.</span><span class="ident" id="7254417">Ldexp</span><span class="op" id="7254422">(</span><span class="builtintype" id="7254423">float64</span><span class="op" id="7254430">(</span><span class="ident" id="7254431">b</span><span class="op" id="7254432">)</span><span class="op" id="7254433">,</span>&nbsp;<span class="ident" id="7254435">exp</span><span class="op" id="7254438">)</span><span class="op" id="7254439">,</span>&nbsp;<span class="ident" id="7254441">r</span><span class="op" id="7254442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254457">checkNonLossyRoundtrip64</span><span class="op" id="7254481">(</span><span class="ident" id="7254482">t</span><span class="op" id="7254483">,</span>&nbsp;<span class="ident" id="7254485">f</span><span class="op" id="7254486">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254504">}</span><br>
<span class="lineno"></span><span class="op" id="7254506">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7254509">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7254581">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7254597">func</span>&nbsp;<span class="ident" id="7254602">TestSetFloat64NonFinite</span><span class="op" id="7254625">(</span><span class="ident" id="7254626">t</span>&nbsp;<span class="op" id="7254628">*</span><span class="ident" id="7254629">testing</span><span class="op" id="7254636">.</span><span class="ident" id="7254637">T</span><span class="op" id="7254638">)</span>&nbsp;<span class="op" id="7254640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254643">for</span>&nbsp;<span class="ident" id="7254647">_</span><span class="op" id="7254648">,</span>&nbsp;<span class="ident" id="7254650">f</span>&nbsp;<span class="op" id="7254652">:=</span>&nbsp;<span class="keyword" id="7254655">range</span>&nbsp;<span class="op" id="7254661">[</span><span class="op" id="7254662">]</span><span class="builtintype" id="7254663">float64</span><span class="op" id="7254670">{</span><span class="ident" id="7254671">math</span><span class="op" id="7254675">.</span><span class="ident" id="7254676">NaN</span><span class="op" id="7254679">(</span><span class="op" id="7254680">)</span><span class="op" id="7254681">,</span>&nbsp;<span class="ident" id="7254683">math</span><span class="op" id="7254687">.</span><span class="ident" id="7254688">Inf</span><span class="op" id="7254691">(</span><span class="op" id="7254692">+</span><span class="num" id="7254693">1</span><span class="op" id="7254694">)</span><span class="op" id="7254695">,</span>&nbsp;<span class="ident" id="7254697">math</span><span class="op" id="7254701">.</span><span class="ident" id="7254702">Inf</span><span class="op" id="7254705">(</span><span class="op" id="7254706">-</span><span class="num" id="7254707">1</span><span class="op" id="7254708">)</span><span class="op" id="7254709">}</span>&nbsp;<span class="op" id="7254711">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254715">var</span>&nbsp;<span class="ident" id="7254719">r</span>&nbsp;<span class="ident" id="7254721">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254727">if</span>&nbsp;<span class="ident" id="7254730">r2</span>&nbsp;<span class="op" id="7254733">:=</span>&nbsp;<span class="ident" id="7254736">r</span><span class="op" id="7254737">.</span><span class="ident" id="7254738">SetFloat64</span><span class="op" id="7254748">(</span><span class="ident" id="7254749">f</span><span class="op" id="7254750">)</span><span class="op" id="7254751">;</span>&nbsp;<span class="ident" id="7254753">r2</span>&nbsp;<span class="op" id="7254756">!=</span>&nbsp;<span class="ident" id="7254759">nil</span>&nbsp;<span class="op" id="7254763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7254768">t</span><span class="op" id="7254769">.</span><span class="ident" id="7254770">Errorf</span><span class="op" id="7254776">(</span><span class="string" id="7254777">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7254810">,</span>&nbsp;<span class="ident" id="7254812">f</span><span class="op" id="7254813">,</span>&nbsp;<span class="ident" id="7254815">r2</span><span class="op" id="7254817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254824">}</span><br>
<span class="lineno">1015</span><span class="op" id="7254826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7254829">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7254902">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7254929">func</span>&nbsp;<span class="ident" id="7254934">checkNonLossyRoundtrip32</span><span class="op" id="7254958">(</span><span class="ident" id="7254959">t</span>&nbsp;<span class="op" id="7254961">*</span><span class="ident" id="7254962">testing</span><span class="op" id="7254969">.</span><span class="ident" id="7254970">T</span><span class="op" id="7254971">,</span>&nbsp;<span class="ident" id="7254973">f</span>&nbsp;<span class="builtintype" id="7254975">float32</span><span class="op" id="7254982">)</span>&nbsp;<span class="op" id="7254984">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7254987">if</span>&nbsp;<span class="op" id="7254990">!</span><span class="ident" id="7254991">isFinite</span><span class="op" id="7254999">(</span><span class="builtintype" id="7255000">float64</span><span class="op" id="7255007">(</span><span class="ident" id="7255008">f</span><span class="op" id="7255009">)</span><span class="op" id="7255010">)</span>&nbsp;<span class="op" id="7255012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255016">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255027">r</span>&nbsp;<span class="op" id="7255029">:=</span>&nbsp;<span class="builtinfunc" id="7255032">new</span><span class="op" id="7255035">(</span><span class="ident" id="7255036">Rat</span><span class="op" id="7255039">)</span><span class="op" id="7255040">.</span><span class="ident" id="7255041">SetFloat64</span><span class="op" id="7255051">(</span><span class="builtintype" id="7255052">float64</span><span class="op" id="7255059">(</span><span class="ident" id="7255060">f</span><span class="op" id="7255061">)</span><span class="op" id="7255062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255065">if</span>&nbsp;<span class="ident" id="7255068">r</span>&nbsp;<span class="op" id="7255070">==</span>&nbsp;<span class="ident" id="7255073">nil</span>&nbsp;<span class="op" id="7255077">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255081">t</span><span class="op" id="7255082">.</span><span class="ident" id="7255083">Errorf</span><span class="op" id="7255089">(</span><span class="string" id="7255090">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7255131">,</span>&nbsp;<span class="ident" id="7255133">f</span><span class="op" id="7255134">,</span>&nbsp;<span class="ident" id="7255136">f</span><span class="op" id="7255137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255141">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255152">f2</span><span class="op" id="7255154">,</span>&nbsp;<span class="ident" id="7255156">exact</span>&nbsp;<span class="op" id="7255162">:=</span>&nbsp;<span class="ident" id="7255165">r</span><span class="op" id="7255166">.</span><span class="ident" id="7255167">Float32</span><span class="op" id="7255174">(</span><span class="op" id="7255175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255178">if</span>&nbsp;<span class="ident" id="7255181">f</span>&nbsp;<span class="op" id="7255183">!=</span>&nbsp;<span class="ident" id="7255186">f2</span>&nbsp;<span class="op" id="7255189">||</span>&nbsp;<span class="op" id="7255192">!</span><span class="ident" id="7255193">exact</span>&nbsp;<span class="op" id="7255199">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255203">t</span><span class="op" id="7255204">.</span><span class="ident" id="7255205">Errorf</span><span class="op" id="7255211">(</span><span class="string" id="7255212">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7255295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255300">f</span><span class="op" id="7255301">,</span>&nbsp;<span class="ident" id="7255303">f2</span><span class="op" id="7255305">,</span>&nbsp;<span class="ident" id="7255307">f2</span><span class="op" id="7255309">,</span>&nbsp;<span class="ident" id="7255311">exact</span><span class="op" id="7255316">,</span>&nbsp;<span class="ident" id="7255318">f</span><span class="op" id="7255319">,</span>&nbsp;<span class="ident" id="7255321">f</span><span class="op" id="7255322">,</span>&nbsp;<span class="builtintype" id="7255324">true</span><span class="op" id="7255328">,</span>&nbsp;<span class="ident" id="7255330">f2</span><span class="op" id="7255332">-</span><span class="ident" id="7255333">f</span><span class="op" id="7255334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255337">}</span><br>
<span class="lineno"></span><span class="op" id="7255339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7255342">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7255415">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7255442">func</span>&nbsp;<span class="ident" id="7255447">checkNonLossyRoundtrip64</span><span class="op" id="7255471">(</span><span class="ident" id="7255472">t</span>&nbsp;<span class="op" id="7255474">*</span><span class="ident" id="7255475">testing</span><span class="op" id="7255482">.</span><span class="ident" id="7255483">T</span><span class="op" id="7255484">,</span>&nbsp;<span class="ident" id="7255486">f</span>&nbsp;<span class="builtintype" id="7255488">float64</span><span class="op" id="7255495">)</span>&nbsp;<span class="op" id="7255497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255500">if</span>&nbsp;<span class="op" id="7255503">!</span><span class="ident" id="7255504">isFinite</span><span class="op" id="7255512">(</span><span class="ident" id="7255513">f</span><span class="op" id="7255514">)</span>&nbsp;<span class="op" id="7255516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255520">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255531">r</span>&nbsp;<span class="op" id="7255533">:=</span>&nbsp;<span class="builtinfunc" id="7255536">new</span><span class="op" id="7255539">(</span><span class="ident" id="7255540">Rat</span><span class="op" id="7255543">)</span><span class="op" id="7255544">.</span><span class="ident" id="7255545">SetFloat64</span><span class="op" id="7255555">(</span><span class="ident" id="7255556">f</span><span class="op" id="7255557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255560">if</span>&nbsp;<span class="ident" id="7255563">r</span>&nbsp;<span class="op" id="7255565">==</span>&nbsp;<span class="ident" id="7255568">nil</span>&nbsp;<span class="op" id="7255572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255576">t</span><span class="op" id="7255577">.</span><span class="ident" id="7255578">Errorf</span><span class="op" id="7255584">(</span><span class="string" id="7255585">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7255617">,</span>&nbsp;<span class="ident" id="7255619">f</span><span class="op" id="7255620">,</span>&nbsp;<span class="ident" id="7255622">f</span><span class="op" id="7255623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255627">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255638">f2</span><span class="op" id="7255640">,</span>&nbsp;<span class="ident" id="7255642">exact</span>&nbsp;<span class="op" id="7255648">:=</span>&nbsp;<span class="ident" id="7255651">r</span><span class="op" id="7255652">.</span><span class="ident" id="7255653">Float64</span><span class="op" id="7255660">(</span><span class="op" id="7255661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255664">if</span>&nbsp;<span class="ident" id="7255667">f</span>&nbsp;<span class="op" id="7255669">!=</span>&nbsp;<span class="ident" id="7255672">f2</span>&nbsp;<span class="op" id="7255675">||</span>&nbsp;<span class="op" id="7255678">!</span><span class="ident" id="7255679">exact</span>&nbsp;<span class="op" id="7255685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255689">t</span><span class="op" id="7255690">.</span><span class="ident" id="7255691">Errorf</span><span class="op" id="7255697">(</span><span class="string" id="7255698">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7255772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255777">f</span><span class="op" id="7255778">,</span>&nbsp;<span class="ident" id="7255780">f2</span><span class="op" id="7255782">,</span>&nbsp;<span class="ident" id="7255784">f2</span><span class="op" id="7255786">,</span>&nbsp;<span class="ident" id="7255788">exact</span><span class="op" id="7255793">,</span>&nbsp;<span class="ident" id="7255795">f</span><span class="op" id="7255796">,</span>&nbsp;<span class="ident" id="7255798">f</span><span class="op" id="7255799">,</span>&nbsp;<span class="builtintype" id="7255801">true</span><span class="op" id="7255805">,</span>&nbsp;<span class="ident" id="7255807">f2</span><span class="op" id="7255809">-</span><span class="ident" id="7255810">f</span><span class="op" id="7255811">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7255814">}</span><br>
<span class="lineno"></span><span class="op" id="7255816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7255819">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7255877">func</span>&nbsp;<span class="ident" id="7255882">delta</span><span class="op" id="7255887">(</span><span class="ident" id="7255888">r</span>&nbsp;<span class="op" id="7255890">*</span><span class="ident" id="7255891">Rat</span><span class="op" id="7255894">,</span>&nbsp;<span class="ident" id="7255896">f</span>&nbsp;<span class="builtintype" id="7255898">float64</span><span class="op" id="7255905">)</span>&nbsp;<span class="op" id="7255907">*</span><span class="ident" id="7255908">Rat</span>&nbsp;<span class="op" id="7255912">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7255915">d</span>&nbsp;<span class="op" id="7255917">:=</span>&nbsp;<span class="builtinfunc" id="7255920">new</span><span class="op" id="7255923">(</span><span class="ident" id="7255924">Rat</span><span class="op" id="7255927">)</span><span class="op" id="7255928">.</span><span class="ident" id="7255929">Sub</span><span class="op" id="7255932">(</span><span class="ident" id="7255933">r</span><span class="op" id="7255934">,</span>&nbsp;<span class="builtinfunc" id="7255936">new</span><span class="op" id="7255939">(</span><span class="ident" id="7255940">Rat</span><span class="op" id="7255943">)</span><span class="op" id="7255944">.</span><span class="ident" id="7255945">SetFloat64</span><span class="op" id="7255955">(</span><span class="ident" id="7255956">f</span><span class="op" id="7255957">)</span><span class="op" id="7255958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7255961">return</span>&nbsp;<span class="ident" id="7255968">d</span><span class="op" id="7255969">.</span><span class="ident" id="7255970">Abs</span><span class="op" id="7255973">(</span><span class="ident" id="7255974">d</span><span class="op" id="7255975">)</span><br>
<span class="lineno"></span><span class="op" id="7255977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7255980">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7256046">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7256069">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7256097">func</span>&nbsp;<span class="ident" id="7256102">checkIsBestApprox32</span><span class="op" id="7256121">(</span><span class="ident" id="7256122">t</span>&nbsp;<span class="op" id="7256124">*</span><span class="ident" id="7256125">testing</span><span class="op" id="7256132">.</span><span class="ident" id="7256133">T</span><span class="op" id="7256134">,</span>&nbsp;<span class="ident" id="7256136">f</span>&nbsp;<span class="builtintype" id="7256138">float32</span><span class="op" id="7256145">,</span>&nbsp;<span class="ident" id="7256147">r</span>&nbsp;<span class="op" id="7256149">*</span><span class="ident" id="7256150">Rat</span><span class="op" id="7256153">)</span>&nbsp;<span class="builtintype" id="7256155">bool</span>&nbsp;<span class="op" id="7256160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256163">if</span>&nbsp;<span class="ident" id="7256166">math</span><span class="op" id="7256170">.</span><span class="ident" id="7256171">Abs</span><span class="op" id="7256174">(</span><span class="builtintype" id="7256175">float64</span><span class="op" id="7256182">(</span><span class="ident" id="7256183">f</span><span class="op" id="7256184">)</span><span class="op" id="7256185">)</span>&nbsp;<span class="op" id="7256187">&gt;=</span>&nbsp;<span class="ident" id="7256190">math</span><span class="op" id="7256194">.</span><span class="ident" id="7256195">MaxFloat32</span>&nbsp;<span class="op" id="7256206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7256210">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7256281">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256329">return</span>&nbsp;<span class="builtintype" id="7256336">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7256342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7256346">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256413">f0</span>&nbsp;<span class="op" id="7256416">:=</span>&nbsp;<span class="ident" id="7256419">math</span><span class="op" id="7256423">.</span><span class="ident" id="7256424">Nextafter32</span><span class="op" id="7256435">(</span><span class="ident" id="7256436">f</span><span class="op" id="7256437">,</span>&nbsp;<span class="builtintype" id="7256439">float32</span><span class="op" id="7256446">(</span><span class="ident" id="7256447">math</span><span class="op" id="7256451">.</span><span class="ident" id="7256452">Inf</span><span class="op" id="7256455">(</span><span class="op" id="7256456">-</span><span class="num" id="7256457">1</span><span class="op" id="7256458">)</span><span class="op" id="7256459">)</span><span class="op" id="7256460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256463">f1</span>&nbsp;<span class="op" id="7256466">:=</span>&nbsp;<span class="ident" id="7256469">math</span><span class="op" id="7256473">.</span><span class="ident" id="7256474">Nextafter32</span><span class="op" id="7256485">(</span><span class="ident" id="7256486">f</span><span class="op" id="7256487">,</span>&nbsp;<span class="builtintype" id="7256489">float32</span><span class="op" id="7256496">(</span><span class="ident" id="7256497">math</span><span class="op" id="7256501">.</span><span class="ident" id="7256502">Inf</span><span class="op" id="7256505">(</span><span class="op" id="7256506">+</span><span class="num" id="7256507">1</span><span class="op" id="7256508">)</span><span class="op" id="7256509">)</span><span class="op" id="7256510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7256514">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256579">df</span>&nbsp;<span class="op" id="7256582">:=</span>&nbsp;<span class="ident" id="7256585">delta</span><span class="op" id="7256590">(</span><span class="ident" id="7256591">r</span><span class="op" id="7256592">,</span>&nbsp;<span class="builtintype" id="7256594">float64</span><span class="op" id="7256601">(</span><span class="ident" id="7256602">f</span><span class="op" id="7256603">)</span><span class="op" id="7256604">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256607">df0</span>&nbsp;<span class="op" id="7256611">:=</span>&nbsp;<span class="ident" id="7256614">delta</span><span class="op" id="7256619">(</span><span class="ident" id="7256620">r</span><span class="op" id="7256621">,</span>&nbsp;<span class="builtintype" id="7256623">float64</span><span class="op" id="7256630">(</span><span class="ident" id="7256631">f0</span><span class="op" id="7256633">)</span><span class="op" id="7256634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256637">df1</span>&nbsp;<span class="op" id="7256641">:=</span>&nbsp;<span class="ident" id="7256644">delta</span><span class="op" id="7256649">(</span><span class="ident" id="7256650">r</span><span class="op" id="7256651">,</span>&nbsp;<span class="builtintype" id="7256653">float64</span><span class="op" id="7256660">(</span><span class="ident" id="7256661">f1</span><span class="op" id="7256663">)</span><span class="op" id="7256664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256667">if</span>&nbsp;<span class="ident" id="7256670">df</span><span class="op" id="7256672">.</span><span class="ident" id="7256673">Cmp</span><span class="op" id="7256676">(</span><span class="ident" id="7256677">df0</span><span class="op" id="7256680">)</span>&nbsp;<span class="op" id="7256682">&gt;</span>&nbsp;<span class="num" id="7256684">0</span>&nbsp;<span class="op" id="7256686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256690">t</span><span class="op" id="7256691">.</span><span class="ident" id="7256692">Errorf</span><span class="op" id="7256698">(</span><span class="string" id="7256699">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7256768">,</span>&nbsp;<span class="ident" id="7256770">r</span><span class="op" id="7256771">,</span>&nbsp;<span class="ident" id="7256773">f</span><span class="op" id="7256774">,</span>&nbsp;<span class="ident" id="7256776">f</span><span class="op" id="7256777">,</span>&nbsp;<span class="ident" id="7256779">f0</span><span class="op" id="7256781">,</span>&nbsp;<span class="ident" id="7256783">f0</span><span class="op" id="7256785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256789">return</span>&nbsp;<span class="builtintype" id="7256796">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7256803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256806">if</span>&nbsp;<span class="ident" id="7256809">df</span><span class="op" id="7256811">.</span><span class="ident" id="7256812">Cmp</span><span class="op" id="7256815">(</span><span class="ident" id="7256816">df1</span><span class="op" id="7256819">)</span>&nbsp;<span class="op" id="7256821">&gt;</span>&nbsp;<span class="num" id="7256823">0</span>&nbsp;<span class="op" id="7256825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256829">t</span><span class="op" id="7256830">.</span><span class="ident" id="7256831">Errorf</span><span class="op" id="7256837">(</span><span class="string" id="7256838">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7256903">,</span>&nbsp;<span class="ident" id="7256905">r</span><span class="op" id="7256906">,</span>&nbsp;<span class="ident" id="7256908">f</span><span class="op" id="7256909">,</span>&nbsp;<span class="ident" id="7256911">f</span><span class="op" id="7256912">,</span>&nbsp;<span class="ident" id="7256914">f1</span><span class="op" id="7256916">,</span>&nbsp;<span class="ident" id="7256918">f1</span><span class="op" id="7256920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256924">return</span>&nbsp;<span class="builtintype" id="7256931">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7256938">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7256941">if</span>&nbsp;<span class="ident" id="7256944">df</span><span class="op" id="7256946">.</span><span class="ident" id="7256947">Cmp</span><span class="op" id="7256950">(</span><span class="ident" id="7256951">df0</span><span class="op" id="7256954">)</span>&nbsp;<span class="op" id="7256956">==</span>&nbsp;<span class="num" id="7256959">0</span>&nbsp;<span class="op" id="7256961">&amp;&amp;</span>&nbsp;<span class="op" id="7256964">!</span><span class="ident" id="7256965">isEven32</span><span class="op" id="7256973">(</span><span class="ident" id="7256974">f</span><span class="op" id="7256975">)</span>&nbsp;<span class="op" id="7256977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7256981">t</span><span class="op" id="7256982">.</span><span class="ident" id="7256983">Errorf</span><span class="op" id="7256989">(</span><span class="string" id="7256990">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7257067">,</span>&nbsp;<span class="ident" id="7257069">r</span><span class="op" id="7257070">,</span>&nbsp;<span class="ident" id="7257072">f</span><span class="op" id="7257073">,</span>&nbsp;<span class="ident" id="7257075">f</span><span class="op" id="7257076">,</span>&nbsp;<span class="ident" id="7257078">f0</span><span class="op" id="7257080">,</span>&nbsp;<span class="ident" id="7257082">f0</span><span class="op" id="7257084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257088">return</span>&nbsp;<span class="builtintype" id="7257095">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7257102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257105">if</span>&nbsp;<span class="ident" id="7257108">df</span><span class="op" id="7257110">.</span><span class="ident" id="7257111">Cmp</span><span class="op" id="7257114">(</span><span class="ident" id="7257115">df1</span><span class="op" id="7257118">)</span>&nbsp;<span class="op" id="7257120">==</span>&nbsp;<span class="num" id="7257123">0</span>&nbsp;<span class="op" id="7257125">&amp;&amp;</span>&nbsp;<span class="op" id="7257128">!</span><span class="ident" id="7257129">isEven32</span><span class="op" id="7257137">(</span><span class="ident" id="7257138">f</span><span class="op" id="7257139">)</span>&nbsp;<span class="op" id="7257141">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257145">t</span><span class="op" id="7257146">.</span><span class="ident" id="7257147">Errorf</span><span class="op" id="7257153">(</span><span class="string" id="7257154">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7257231">,</span>&nbsp;<span class="ident" id="7257233">r</span><span class="op" id="7257234">,</span>&nbsp;<span class="ident" id="7257236">f</span><span class="op" id="7257237">,</span>&nbsp;<span class="ident" id="7257239">f</span><span class="op" id="7257240">,</span>&nbsp;<span class="ident" id="7257242">f1</span><span class="op" id="7257244">,</span>&nbsp;<span class="ident" id="7257246">f1</span><span class="op" id="7257248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257252">return</span>&nbsp;<span class="builtintype" id="7257259">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7257266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257269">return</span>&nbsp;<span class="builtintype" id="7257276">true</span><br>
<span class="lineno"></span><span class="op" id="7257281">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7257284">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7257350">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7257373">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7257401">func</span>&nbsp;<span class="ident" id="7257406">checkIsBestApprox64</span><span class="op" id="7257425">(</span><span class="ident" id="7257426">t</span>&nbsp;<span class="op" id="7257428">*</span><span class="ident" id="7257429">testing</span><span class="op" id="7257436">.</span><span class="ident" id="7257437">T</span><span class="op" id="7257438">,</span>&nbsp;<span class="ident" id="7257440">f</span>&nbsp;<span class="builtintype" id="7257442">float64</span><span class="op" id="7257449">,</span>&nbsp;<span class="ident" id="7257451">r</span>&nbsp;<span class="op" id="7257453">*</span><span class="ident" id="7257454">Rat</span><span class="op" id="7257457">)</span>&nbsp;<span class="builtintype" id="7257459">bool</span>&nbsp;<span class="op" id="7257464">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257467">if</span>&nbsp;<span class="ident" id="7257470">math</span><span class="op" id="7257474">.</span><span class="ident" id="7257475">Abs</span><span class="op" id="7257478">(</span><span class="ident" id="7257479">f</span><span class="op" id="7257480">)</span>&nbsp;<span class="op" id="7257482">&gt;=</span>&nbsp;<span class="ident" id="7257485">math</span><span class="op" id="7257489">.</span><span class="ident" id="7257490">MaxFloat64</span>&nbsp;<span class="op" id="7257501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7257505">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7257576">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257624">return</span>&nbsp;<span class="builtintype" id="7257631">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7257637">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7257641">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257708">f0</span>&nbsp;<span class="op" id="7257711">:=</span>&nbsp;<span class="ident" id="7257714">math</span><span class="op" id="7257718">.</span><span class="ident" id="7257719">Nextafter</span><span class="op" id="7257728">(</span><span class="ident" id="7257729">f</span><span class="op" id="7257730">,</span>&nbsp;<span class="ident" id="7257732">math</span><span class="op" id="7257736">.</span><span class="ident" id="7257737">Inf</span><span class="op" id="7257740">(</span><span class="op" id="7257741">-</span><span class="num" id="7257742">1</span><span class="op" id="7257743">)</span><span class="op" id="7257744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257747">f1</span>&nbsp;<span class="op" id="7257750">:=</span>&nbsp;<span class="ident" id="7257753">math</span><span class="op" id="7257757">.</span><span class="ident" id="7257758">Nextafter</span><span class="op" id="7257767">(</span><span class="ident" id="7257768">f</span><span class="op" id="7257769">,</span>&nbsp;<span class="ident" id="7257771">math</span><span class="op" id="7257775">.</span><span class="ident" id="7257776">Inf</span><span class="op" id="7257779">(</span><span class="op" id="7257780">+</span><span class="num" id="7257781">1</span><span class="op" id="7257782">)</span><span class="op" id="7257783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7257787">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257852">df</span>&nbsp;<span class="op" id="7257855">:=</span>&nbsp;<span class="ident" id="7257858">delta</span><span class="op" id="7257863">(</span><span class="ident" id="7257864">r</span><span class="op" id="7257865">,</span>&nbsp;<span class="ident" id="7257867">f</span><span class="op" id="7257868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257871">df0</span>&nbsp;<span class="op" id="7257875">:=</span>&nbsp;<span class="ident" id="7257878">delta</span><span class="op" id="7257883">(</span><span class="ident" id="7257884">r</span><span class="op" id="7257885">,</span>&nbsp;<span class="ident" id="7257887">f0</span><span class="op" id="7257889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257892">df1</span>&nbsp;<span class="op" id="7257896">:=</span>&nbsp;<span class="ident" id="7257899">delta</span><span class="op" id="7257904">(</span><span class="ident" id="7257905">r</span><span class="op" id="7257906">,</span>&nbsp;<span class="ident" id="7257908">f1</span><span class="op" id="7257910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257913">if</span>&nbsp;<span class="ident" id="7257916">df</span><span class="op" id="7257918">.</span><span class="ident" id="7257919">Cmp</span><span class="op" id="7257922">(</span><span class="ident" id="7257923">df0</span><span class="op" id="7257926">)</span>&nbsp;<span class="op" id="7257928">&gt;</span>&nbsp;<span class="num" id="7257930">0</span>&nbsp;<span class="op" id="7257932">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7257936">t</span><span class="op" id="7257937">.</span><span class="ident" id="7257938">Errorf</span><span class="op" id="7257944">(</span><span class="string" id="7257945">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7258014">,</span>&nbsp;<span class="ident" id="7258016">r</span><span class="op" id="7258017">,</span>&nbsp;<span class="ident" id="7258019">f</span><span class="op" id="7258020">,</span>&nbsp;<span class="ident" id="7258022">f</span><span class="op" id="7258023">,</span>&nbsp;<span class="ident" id="7258025">f0</span><span class="op" id="7258027">,</span>&nbsp;<span class="ident" id="7258029">f0</span><span class="op" id="7258031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258035">return</span>&nbsp;<span class="builtintype" id="7258042">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258052">if</span>&nbsp;<span class="ident" id="7258055">df</span><span class="op" id="7258057">.</span><span class="ident" id="7258058">Cmp</span><span class="op" id="7258061">(</span><span class="ident" id="7258062">df1</span><span class="op" id="7258065">)</span>&nbsp;<span class="op" id="7258067">&gt;</span>&nbsp;<span class="num" id="7258069">0</span>&nbsp;<span class="op" id="7258071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258075">t</span><span class="op" id="7258076">.</span><span class="ident" id="7258077">Errorf</span><span class="op" id="7258083">(</span><span class="string" id="7258084">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7258149">,</span>&nbsp;<span class="ident" id="7258151">r</span><span class="op" id="7258152">,</span>&nbsp;<span class="ident" id="7258154">f</span><span class="op" id="7258155">,</span>&nbsp;<span class="ident" id="7258157">f</span><span class="op" id="7258158">,</span>&nbsp;<span class="ident" id="7258160">f1</span><span class="op" id="7258162">,</span>&nbsp;<span class="ident" id="7258164">f1</span><span class="op" id="7258166">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258170">return</span>&nbsp;<span class="builtintype" id="7258177">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258187">if</span>&nbsp;<span class="ident" id="7258190">df</span><span class="op" id="7258192">.</span><span class="ident" id="7258193">Cmp</span><span class="op" id="7258196">(</span><span class="ident" id="7258197">df0</span><span class="op" id="7258200">)</span>&nbsp;<span class="op" id="7258202">==</span>&nbsp;<span class="num" id="7258205">0</span>&nbsp;<span class="op" id="7258207">&amp;&amp;</span>&nbsp;<span class="op" id="7258210">!</span><span class="ident" id="7258211">isEven64</span><span class="op" id="7258219">(</span><span class="ident" id="7258220">f</span><span class="op" id="7258221">)</span>&nbsp;<span class="op" id="7258223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258227">t</span><span class="op" id="7258228">.</span><span class="ident" id="7258229">Errorf</span><span class="op" id="7258235">(</span><span class="string" id="7258236">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7258313">,</span>&nbsp;<span class="ident" id="7258315">r</span><span class="op" id="7258316">,</span>&nbsp;<span class="ident" id="7258318">f</span><span class="op" id="7258319">,</span>&nbsp;<span class="ident" id="7258321">f</span><span class="op" id="7258322">,</span>&nbsp;<span class="ident" id="7258324">f0</span><span class="op" id="7258326">,</span>&nbsp;<span class="ident" id="7258328">f0</span><span class="op" id="7258330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258334">return</span>&nbsp;<span class="builtintype" id="7258341">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258351">if</span>&nbsp;<span class="ident" id="7258354">df</span><span class="op" id="7258356">.</span><span class="ident" id="7258357">Cmp</span><span class="op" id="7258360">(</span><span class="ident" id="7258361">df1</span><span class="op" id="7258364">)</span>&nbsp;<span class="op" id="7258366">==</span>&nbsp;<span class="num" id="7258369">0</span>&nbsp;<span class="op" id="7258371">&amp;&amp;</span>&nbsp;<span class="op" id="7258374">!</span><span class="ident" id="7258375">isEven64</span><span class="op" id="7258383">(</span><span class="ident" id="7258384">f</span><span class="op" id="7258385">)</span>&nbsp;<span class="op" id="7258387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258391">t</span><span class="op" id="7258392">.</span><span class="ident" id="7258393">Errorf</span><span class="op" id="7258399">(</span><span class="string" id="7258400">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7258477">,</span>&nbsp;<span class="ident" id="7258479">r</span><span class="op" id="7258480">,</span>&nbsp;<span class="ident" id="7258482">f</span><span class="op" id="7258483">,</span>&nbsp;<span class="ident" id="7258485">f</span><span class="op" id="7258486">,</span>&nbsp;<span class="ident" id="7258488">f1</span><span class="op" id="7258490">,</span>&nbsp;<span class="ident" id="7258492">f1</span><span class="op" id="7258494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258498">return</span>&nbsp;<span class="builtintype" id="7258505">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258512">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258515">return</span>&nbsp;<span class="builtintype" id="7258522">true</span><br>
<span class="lineno"></span><span class="op" id="7258527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7258530">func</span>&nbsp;<span class="ident" id="7258535">isEven32</span><span class="op" id="7258543">(</span><span class="ident" id="7258544">f</span>&nbsp;<span class="builtintype" id="7258546">float32</span><span class="op" id="7258553">)</span>&nbsp;<span class="builtintype" id="7258555">bool</span>&nbsp;<span class="op" id="7258560">{</span>&nbsp;<span class="keyword" id="7258562">return</span>&nbsp;<span class="ident" id="7258569">math</span><span class="op" id="7258573">.</span><span class="ident" id="7258574">Float32bits</span><span class="op" id="7258585">(</span><span class="ident" id="7258586">f</span><span class="op" id="7258587">)</span><span class="op" id="7258588">&amp;</span><span class="num" id="7258589">1</span>&nbsp;<span class="op" id="7258591">==</span>&nbsp;<span class="num" id="7258594">0</span>&nbsp;<span class="op" id="7258596">}</span><br>
<span class="lineno"></span><span class="keyword" id="7258598">func</span>&nbsp;<span class="ident" id="7258603">isEven64</span><span class="op" id="7258611">(</span><span class="ident" id="7258612">f</span>&nbsp;<span class="builtintype" id="7258614">float64</span><span class="op" id="7258621">)</span>&nbsp;<span class="builtintype" id="7258623">bool</span>&nbsp;<span class="op" id="7258628">{</span>&nbsp;<span class="keyword" id="7258630">return</span>&nbsp;<span class="ident" id="7258637">math</span><span class="op" id="7258641">.</span><span class="ident" id="7258642">Float64bits</span><span class="op" id="7258653">(</span><span class="ident" id="7258654">f</span><span class="op" id="7258655">)</span><span class="op" id="7258656">&amp;</span><span class="num" id="7258657">1</span>&nbsp;<span class="op" id="7258659">==</span>&nbsp;<span class="num" id="7258662">0</span>&nbsp;<span class="op" id="7258664">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7258667">func</span>&nbsp;<span class="ident" id="7258672">TestIsFinite</span><span class="op" id="7258684">(</span><span class="ident" id="7258685">t</span>&nbsp;<span class="op" id="7258687">*</span><span class="ident" id="7258688">testing</span><span class="op" id="7258695">.</span><span class="ident" id="7258696">T</span><span class="op" id="7258697">)</span>&nbsp;<span class="op" id="7258699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258702">finites</span>&nbsp;<span class="op" id="7258710">:=</span>&nbsp;<span class="op" id="7258713">[</span><span class="op" id="7258714">]</span><span class="builtintype" id="7258715">float64</span><span class="op" id="7258722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7258726">1.0</span>&nbsp;<span class="op" id="7258730">/</span>&nbsp;<span class="num" id="7258732">3</span><span class="op" id="7258733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7258737">4891559871276714924261e+222</span><span class="op" id="7258764">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258768">math</span><span class="op" id="7258772">.</span><span class="ident" id="7258773">MaxFloat64</span><span class="op" id="7258783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258787">math</span><span class="op" id="7258791">.</span><span class="ident" id="7258792">SmallestNonzeroFloat64</span><span class="op" id="7258814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258818">-</span><span class="ident" id="7258819">math</span><span class="op" id="7258823">.</span><span class="ident" id="7258824">MaxFloat64</span><span class="op" id="7258834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258838">-</span><span class="ident" id="7258839">math</span><span class="op" id="7258843">.</span><span class="ident" id="7258844">SmallestNonzeroFloat64</span><span class="op" id="7258866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258869">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258872">for</span>&nbsp;<span class="ident" id="7258876">_</span><span class="op" id="7258877">,</span>&nbsp;<span class="ident" id="7258879">f</span>&nbsp;<span class="op" id="7258881">:=</span>&nbsp;<span class="keyword" id="7258884">range</span>&nbsp;<span class="ident" id="7258890">finites</span>&nbsp;<span class="op" id="7258898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7258902">if</span>&nbsp;<span class="op" id="7258905">!</span><span class="ident" id="7258906">isFinite</span><span class="op" id="7258914">(</span><span class="ident" id="7258915">f</span><span class="op" id="7258916">)</span>&nbsp;<span class="op" id="7258918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258923">t</span><span class="op" id="7258924">.</span><span class="ident" id="7258925">Errorf</span><span class="op" id="7258931">(</span><span class="string" id="7258932">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7258952">,</span>&nbsp;<span class="ident" id="7258954">f</span><span class="op" id="7258955">,</span>&nbsp;<span class="ident" id="7258957">f</span><span class="op" id="7258958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7258965">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258968">nonfinites</span>&nbsp;<span class="op" id="7258979">:=</span>&nbsp;<span class="op" id="7258982">[</span><span class="op" id="7258983">]</span><span class="builtintype" id="7258984">float64</span><span class="op" id="7258991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7258995">math</span><span class="op" id="7258999">.</span><span class="ident" id="7259000">NaN</span><span class="op" id="7259003">(</span><span class="op" id="7259004">)</span><span class="op" id="7259005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259009">math</span><span class="op" id="7259013">.</span><span class="ident" id="7259014">Inf</span><span class="op" id="7259017">(</span><span class="op" id="7259018">-</span><span class="num" id="7259019">1</span><span class="op" id="7259020">)</span><span class="op" id="7259021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259025">math</span><span class="op" id="7259029">.</span><span class="ident" id="7259030">Inf</span><span class="op" id="7259033">(</span><span class="op" id="7259034">+</span><span class="num" id="7259035">1</span><span class="op" id="7259036">)</span><span class="op" id="7259037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259040">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259043">for</span>&nbsp;<span class="ident" id="7259047">_</span><span class="op" id="7259048">,</span>&nbsp;<span class="ident" id="7259050">f</span>&nbsp;<span class="op" id="7259052">:=</span>&nbsp;<span class="keyword" id="7259055">range</span>&nbsp;<span class="ident" id="7259061">nonfinites</span>&nbsp;<span class="op" id="7259072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7259076">if</span>&nbsp;<span class="ident" id="7259079">isFinite</span><span class="op" id="7259087">(</span><span class="ident" id="7259088">f</span><span class="op" id="7259089">)</span>&nbsp;<span class="op" id="7259091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7259096">t</span><span class="op" id="7259097">.</span><span class="ident" id="7259098">Errorf</span><span class="op" id="7259104">(</span><span class="string" id="7259105">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7259125">,</span>&nbsp;<span class="ident" id="7259127">f</span><span class="op" id="7259128">,</span>&nbsp;<span class="ident" id="7259130">f</span><span class="op" id="7259131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7259138">}</span><br>
<span class="lineno">1160</span><span class="op" id="7259140">}</span>
</div>
</body>
</html>
