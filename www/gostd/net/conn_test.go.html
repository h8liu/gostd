<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8184209">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8184265">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8184319">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8184370">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="8184449">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8184458">package</span>&nbsp;<span class="ident" id="8184466">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="8184471">import</span>&nbsp;<span class="op" id="8184478">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8184481">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8184487">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8184498">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8184509">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8184516">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8184519">var</span>&nbsp;<span class="ident" id="8184523">connTests</span>&nbsp;<span class="op" id="8184533">=</span>&nbsp;<span class="op" id="8184535">[</span><span class="op" id="8184536">]</span><span class="keyword" id="8184537">struct</span>&nbsp;<span class="op" id="8184544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184547">net</span>&nbsp;&nbsp;<span class="builtintype" id="8184552">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8184560">addr</span>&nbsp;<span class="builtintype" id="8184565">string</span><br>
<span class="lineno">20</span><span class="op" id="8184572">}</span><span class="op" id="8184573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184576">{</span><span class="string" id="8184577">&#34;tcp&#34;</span><span class="op" id="8184582">,</span>&nbsp;<span class="string" id="8184584">&#34;127.0.0.1:0&#34;</span><span class="op" id="8184597">}</span><span class="op" id="8184598">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184601">{</span><span class="string" id="8184602">&#34;unix&#34;</span><span class="op" id="8184608">,</span>&nbsp;<span class="ident" id="8184610">testUnixAddr</span><span class="op" id="8184622">(</span><span class="op" id="8184623">)</span><span class="op" id="8184624">}</span><span class="op" id="8184625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8184628">{</span><span class="string" id="8184629">&#34;unixpacket&#34;</span><span class="op" id="8184641">,</span>&nbsp;<span class="ident" id="8184643">testUnixAddr</span><span class="op" id="8184655">(</span><span class="op" id="8184656">)</span><span class="op" id="8184657">}</span><span class="op" id="8184658">,</span><br>
<span class="lineno"></span><span class="op" id="8184660">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="8184663">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="8184729">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="8184792">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="8184840">const</span>&nbsp;<span class="ident" id="8184846">someTimeout</span>&nbsp;<span class="op" id="8184858">=</span>&nbsp;<span class="num" id="8184860">10</span>&nbsp;<span class="op" id="8184863">*</span>&nbsp;<span class="ident" id="8184865">time</span><span class="op" id="8184869">.</span><span class="ident" id="8184870">Second</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="8184878">func</span>&nbsp;<span class="ident" id="8184883">TestConnAndListener</span><span class="op" id="8184902">(</span><span class="ident" id="8184903">t</span>&nbsp;<span class="op" id="8184905">*</span><span class="ident" id="8184906">testing</span><span class="op" id="8184913">.</span><span class="ident" id="8184914">T</span><span class="op" id="8184915">)</span>&nbsp;<span class="op" id="8184917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184920">for</span>&nbsp;<span class="ident" id="8184924">_</span><span class="op" id="8184925">,</span>&nbsp;<span class="ident" id="8184927">tt</span>&nbsp;<span class="op" id="8184930">:=</span>&nbsp;<span class="keyword" id="8184933">range</span>&nbsp;<span class="ident" id="8184939">connTests</span>&nbsp;<span class="op" id="8184949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184953">switch</span>&nbsp;<span class="ident" id="8184960">tt</span><span class="op" id="8184962">.</span><span class="ident" id="8184963">net</span>&nbsp;<span class="op" id="8184967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184971">case</span>&nbsp;<span class="string" id="8184976">&#34;unix&#34;</span><span class="op" id="8184982">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8184987">switch</span>&nbsp;<span class="ident" id="8184994">runtime</span><span class="op" id="8185001">.</span><span class="ident" id="8185002">GOOS</span>&nbsp;<span class="op" id="8185007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185012">case</span>&nbsp;<span class="string" id="8185017">&#34;nacl&#34;</span><span class="op" id="8185023">,</span>&nbsp;<span class="string" id="8185025">&#34;plan9&#34;</span><span class="op" id="8185032">,</span>&nbsp;<span class="string" id="8185034">&#34;windows&#34;</span><span class="op" id="8185043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185049">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185065">case</span>&nbsp;<span class="string" id="8185070">&#34;unixpacket&#34;</span><span class="op" id="8185082">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185087">switch</span>&nbsp;<span class="ident" id="8185094">runtime</span><span class="op" id="8185101">.</span><span class="ident" id="8185102">GOOS</span>&nbsp;<span class="op" id="8185107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185112">case</span>&nbsp;<span class="string" id="8185117">&#34;android&#34;</span><span class="op" id="8185126">,</span>&nbsp;<span class="string" id="8185128">&#34;darwin&#34;</span><span class="op" id="8185136">,</span>&nbsp;<span class="string" id="8185138">&#34;nacl&#34;</span><span class="op" id="8185144">,</span>&nbsp;<span class="string" id="8185146">&#34;openbsd&#34;</span><span class="op" id="8185155">,</span>&nbsp;<span class="string" id="8185157">&#34;plan9&#34;</span><span class="op" id="8185164">,</span>&nbsp;<span class="string" id="8185166">&#34;windows&#34;</span><span class="op" id="8185175">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185181">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185193">case</span>&nbsp;<span class="string" id="8185198">&#34;freebsd&#34;</span><span class="op" id="8185207">:</span>&nbsp;<span class="comment" id="8185209">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185253">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185274">ln</span><span class="op" id="8185276">,</span>&nbsp;<span class="ident" id="8185278">err</span>&nbsp;<span class="op" id="8185282">:=</span>&nbsp;<span class="ident" id="8185285">Listen</span><span class="op" id="8185291">(</span><span class="ident" id="8185292">tt</span><span class="op" id="8185294">.</span><span class="ident" id="8185295">net</span><span class="op" id="8185298">,</span>&nbsp;<span class="ident" id="8185300">tt</span><span class="op" id="8185302">.</span><span class="ident" id="8185303">addr</span><span class="op" id="8185307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185311">if</span>&nbsp;<span class="ident" id="8185314">err</span>&nbsp;<span class="op" id="8185318">!=</span>&nbsp;<span class="ident" id="8185321">nil</span>&nbsp;<span class="op" id="8185325">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185330">t</span><span class="op" id="8185331">.</span><span class="ident" id="8185332">Fatalf</span><span class="op" id="8185338">(</span><span class="string" id="8185339">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8185358">,</span>&nbsp;<span class="ident" id="8185360">err</span><span class="op" id="8185363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185371">defer</span>&nbsp;<span class="keyword" id="8185377">func</span><span class="op" id="8185381">(</span><span class="ident" id="8185382">ln</span>&nbsp;<span class="ident" id="8185385">Listener</span><span class="op" id="8185393">,</span>&nbsp;<span class="ident" id="8185395">net</span><span class="op" id="8185398">,</span>&nbsp;<span class="ident" id="8185400">addr</span>&nbsp;<span class="builtintype" id="8185405">string</span><span class="op" id="8185411">)</span>&nbsp;<span class="op" id="8185413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185418">ln</span><span class="op" id="8185420">.</span><span class="ident" id="8185421">Close</span><span class="op" id="8185426">(</span><span class="op" id="8185427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185432">switch</span>&nbsp;<span class="ident" id="8185439">net</span>&nbsp;<span class="op" id="8185443">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185448">case</span>&nbsp;<span class="string" id="8185453">&#34;unix&#34;</span><span class="op" id="8185459">,</span>&nbsp;<span class="string" id="8185461">&#34;unixpacket&#34;</span><span class="op" id="8185473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185479">os</span><span class="op" id="8185481">.</span><span class="ident" id="8185482">Remove</span><span class="op" id="8185488">(</span><span class="ident" id="8185489">addr</span><span class="op" id="8185493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185502">}</span><span class="op" id="8185503">(</span><span class="ident" id="8185504">ln</span><span class="op" id="8185506">,</span>&nbsp;<span class="ident" id="8185508">tt</span><span class="op" id="8185510">.</span><span class="ident" id="8185511">net</span><span class="op" id="8185514">,</span>&nbsp;<span class="ident" id="8185516">tt</span><span class="op" id="8185518">.</span><span class="ident" id="8185519">addr</span><span class="op" id="8185523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185527">if</span>&nbsp;<span class="ident" id="8185530">ln</span><span class="op" id="8185532">.</span><span class="ident" id="8185533">Addr</span><span class="op" id="8185537">(</span><span class="op" id="8185538">)</span><span class="op" id="8185539">.</span><span class="ident" id="8185540">Network</span><span class="op" id="8185547">(</span><span class="op" id="8185548">)</span>&nbsp;<span class="op" id="8185550">!=</span>&nbsp;<span class="ident" id="8185553">tt</span><span class="op" id="8185555">.</span><span class="ident" id="8185556">net</span>&nbsp;<span class="op" id="8185560">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185565">t</span><span class="op" id="8185566">.</span><span class="ident" id="8185567">Fatalf</span><span class="op" id="8185573">(</span><span class="string" id="8185574">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8185595">,</span>&nbsp;<span class="ident" id="8185597">ln</span><span class="op" id="8185599">.</span><span class="ident" id="8185600">Addr</span><span class="op" id="8185604">(</span><span class="op" id="8185605">)</span><span class="op" id="8185606">.</span><span class="ident" id="8185607">Network</span><span class="op" id="8185614">(</span><span class="op" id="8185615">)</span><span class="op" id="8185616">,</span>&nbsp;<span class="ident" id="8185618">tt</span><span class="op" id="8185620">.</span><span class="ident" id="8185621">net</span><span class="op" id="8185624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185628">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185633">done</span>&nbsp;<span class="op" id="8185638">:=</span>&nbsp;<span class="builtinfunc" id="8185641">make</span><span class="op" id="8185645">(</span><span class="keyword" id="8185646">chan</span>&nbsp;<span class="builtintype" id="8185651">int</span><span class="op" id="8185654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185658">go</span>&nbsp;<span class="ident" id="8185661">transponder</span><span class="op" id="8185672">(</span><span class="ident" id="8185673">t</span><span class="op" id="8185674">,</span>&nbsp;<span class="ident" id="8185676">ln</span><span class="op" id="8185678">,</span>&nbsp;<span class="ident" id="8185680">done</span><span class="op" id="8185684">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185689">c</span><span class="op" id="8185690">,</span>&nbsp;<span class="ident" id="8185692">err</span>&nbsp;<span class="op" id="8185696">:=</span>&nbsp;<span class="ident" id="8185699">Dial</span><span class="op" id="8185703">(</span><span class="ident" id="8185704">tt</span><span class="op" id="8185706">.</span><span class="ident" id="8185707">net</span><span class="op" id="8185710">,</span>&nbsp;<span class="ident" id="8185712">ln</span><span class="op" id="8185714">.</span><span class="ident" id="8185715">Addr</span><span class="op" id="8185719">(</span><span class="op" id="8185720">)</span><span class="op" id="8185721">.</span><span class="ident" id="8185722">String</span><span class="op" id="8185728">(</span><span class="op" id="8185729">)</span><span class="op" id="8185730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185734">if</span>&nbsp;<span class="ident" id="8185737">err</span>&nbsp;<span class="op" id="8185741">!=</span>&nbsp;<span class="ident" id="8185744">nil</span>&nbsp;<span class="op" id="8185748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185753">t</span><span class="op" id="8185754">.</span><span class="ident" id="8185755">Fatalf</span><span class="op" id="8185761">(</span><span class="string" id="8185762">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8185779">,</span>&nbsp;<span class="ident" id="8185781">err</span><span class="op" id="8185784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185788">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185792">defer</span>&nbsp;<span class="ident" id="8185798">c</span><span class="op" id="8185799">.</span><span class="ident" id="8185800">Close</span><span class="op" id="8185805">(</span><span class="op" id="8185806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8185810">if</span>&nbsp;<span class="ident" id="8185813">c</span><span class="op" id="8185814">.</span><span class="ident" id="8185815">LocalAddr</span><span class="op" id="8185824">(</span><span class="op" id="8185825">)</span><span class="op" id="8185826">.</span><span class="ident" id="8185827">Network</span><span class="op" id="8185834">(</span><span class="op" id="8185835">)</span>&nbsp;<span class="op" id="8185837">!=</span>&nbsp;<span class="ident" id="8185840">tt</span><span class="op" id="8185842">.</span><span class="ident" id="8185843">net</span>&nbsp;<span class="op" id="8185847">||</span>&nbsp;<span class="ident" id="8185850">c</span><span class="op" id="8185851">.</span><span class="ident" id="8185852">LocalAddr</span><span class="op" id="8185861">(</span><span class="op" id="8185862">)</span><span class="op" id="8185863">.</span><span class="ident" id="8185864">Network</span><span class="op" id="8185871">(</span><span class="op" id="8185872">)</span>&nbsp;<span class="op" id="8185874">!=</span>&nbsp;<span class="ident" id="8185877">tt</span><span class="op" id="8185879">.</span><span class="ident" id="8185880">net</span>&nbsp;<span class="op" id="8185884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8185889">t</span><span class="op" id="8185890">.</span><span class="ident" id="8185891">Fatalf</span><span class="op" id="8185897">(</span><span class="string" id="8185898">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="8185927">,</span>&nbsp;<span class="ident" id="8185929">c</span><span class="op" id="8185930">.</span><span class="ident" id="8185931">LocalAddr</span><span class="op" id="8185940">(</span><span class="op" id="8185941">)</span><span class="op" id="8185942">.</span><span class="ident" id="8185943">Network</span><span class="op" id="8185950">(</span><span class="op" id="8185951">)</span><span class="op" id="8185952">,</span>&nbsp;<span class="ident" id="8185954">c</span><span class="op" id="8185955">.</span><span class="ident" id="8185956">RemoteAddr</span><span class="op" id="8185966">(</span><span class="op" id="8185967">)</span><span class="op" id="8185968">.</span><span class="ident" id="8185969">Network</span><span class="op" id="8185976">(</span><span class="op" id="8185977">)</span><span class="op" id="8185978">,</span>&nbsp;<span class="ident" id="8185980">tt</span><span class="op" id="8185982">.</span><span class="ident" id="8185983">net</span><span class="op" id="8185986">,</span>&nbsp;<span class="ident" id="8185988">tt</span><span class="op" id="8185990">.</span><span class="ident" id="8185991">net</span><span class="op" id="8185994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8185998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186002">c</span><span class="op" id="8186003">.</span><span class="ident" id="8186004">SetDeadline</span><span class="op" id="8186015">(</span><span class="ident" id="8186016">time</span><span class="op" id="8186020">.</span><span class="ident" id="8186021">Now</span><span class="op" id="8186024">(</span><span class="op" id="8186025">)</span><span class="op" id="8186026">.</span><span class="ident" id="8186027">Add</span><span class="op" id="8186030">(</span><span class="ident" id="8186031">someTimeout</span><span class="op" id="8186042">)</span><span class="op" id="8186043">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186047">c</span><span class="op" id="8186048">.</span><span class="ident" id="8186049">SetReadDeadline</span><span class="op" id="8186064">(</span><span class="ident" id="8186065">time</span><span class="op" id="8186069">.</span><span class="ident" id="8186070">Now</span><span class="op" id="8186073">(</span><span class="op" id="8186074">)</span><span class="op" id="8186075">.</span><span class="ident" id="8186076">Add</span><span class="op" id="8186079">(</span><span class="ident" id="8186080">someTimeout</span><span class="op" id="8186091">)</span><span class="op" id="8186092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186096">c</span><span class="op" id="8186097">.</span><span class="ident" id="8186098">SetWriteDeadline</span><span class="op" id="8186114">(</span><span class="ident" id="8186115">time</span><span class="op" id="8186119">.</span><span class="ident" id="8186120">Now</span><span class="op" id="8186123">(</span><span class="op" id="8186124">)</span><span class="op" id="8186125">.</span><span class="ident" id="8186126">Add</span><span class="op" id="8186129">(</span><span class="ident" id="8186130">someTimeout</span><span class="op" id="8186141">)</span><span class="op" id="8186142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186147">if</span>&nbsp;<span class="ident" id="8186150">_</span><span class="op" id="8186151">,</span>&nbsp;<span class="ident" id="8186153">err</span>&nbsp;<span class="op" id="8186157">:=</span>&nbsp;<span class="ident" id="8186160">c</span><span class="op" id="8186161">.</span><span class="ident" id="8186162">Write</span><span class="op" id="8186167">(</span><span class="op" id="8186168">[</span><span class="op" id="8186169">]</span><span class="builtintype" id="8186170">byte</span><span class="op" id="8186174">(</span><span class="string" id="8186175">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="8186186">)</span><span class="op" id="8186187">)</span><span class="op" id="8186188">;</span>&nbsp;<span class="ident" id="8186190">err</span>&nbsp;<span class="op" id="8186194">!=</span>&nbsp;<span class="ident" id="8186197">nil</span>&nbsp;<span class="op" id="8186201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186206">t</span><span class="op" id="8186207">.</span><span class="ident" id="8186208">Fatalf</span><span class="op" id="8186214">(</span><span class="string" id="8186215">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8186238">,</span>&nbsp;<span class="ident" id="8186240">err</span><span class="op" id="8186243">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186251">rb</span>&nbsp;<span class="op" id="8186254">:=</span>&nbsp;<span class="builtinfunc" id="8186257">make</span><span class="op" id="8186261">(</span><span class="op" id="8186262">[</span><span class="op" id="8186263">]</span><span class="builtintype" id="8186264">byte</span><span class="op" id="8186268">,</span>&nbsp;<span class="num" id="8186270">128</span><span class="op" id="8186273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186277">if</span>&nbsp;<span class="ident" id="8186280">_</span><span class="op" id="8186281">,</span>&nbsp;<span class="ident" id="8186283">err</span>&nbsp;<span class="op" id="8186287">:=</span>&nbsp;<span class="ident" id="8186290">c</span><span class="op" id="8186291">.</span><span class="ident" id="8186292">Read</span><span class="op" id="8186296">(</span><span class="ident" id="8186297">rb</span><span class="op" id="8186299">)</span><span class="op" id="8186300">;</span>&nbsp;<span class="ident" id="8186302">err</span>&nbsp;<span class="op" id="8186306">!=</span>&nbsp;<span class="ident" id="8186309">nil</span>&nbsp;<span class="op" id="8186313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186318">t</span><span class="op" id="8186319">.</span><span class="ident" id="8186320">Fatalf</span><span class="op" id="8186326">(</span><span class="string" id="8186327">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8186349">,</span>&nbsp;<span class="ident" id="8186351">err</span><span class="op" id="8186354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186358">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186363">&lt;-</span><span class="ident" id="8186365">done</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186371">}</span><br>
<span class="lineno"></span><span class="op" id="8186373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="8186376">func</span>&nbsp;<span class="ident" id="8186381">transponder</span><span class="op" id="8186392">(</span><span class="ident" id="8186393">t</span>&nbsp;<span class="op" id="8186395">*</span><span class="ident" id="8186396">testing</span><span class="op" id="8186403">.</span><span class="ident" id="8186404">T</span><span class="op" id="8186405">,</span>&nbsp;<span class="ident" id="8186407">ln</span>&nbsp;<span class="ident" id="8186410">Listener</span><span class="op" id="8186418">,</span>&nbsp;<span class="ident" id="8186420">done</span>&nbsp;<span class="keyword" id="8186425">chan</span><span class="op" id="8186429">&lt;-</span>&nbsp;<span class="builtintype" id="8186432">int</span><span class="op" id="8186435">)</span>&nbsp;<span class="op" id="8186437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186440">defer</span>&nbsp;<span class="keyword" id="8186446">func</span><span class="op" id="8186450">(</span><span class="op" id="8186451">)</span>&nbsp;<span class="op" id="8186453">{</span>&nbsp;<span class="ident" id="8186455">done</span>&nbsp;<span class="op" id="8186460">&lt;-</span>&nbsp;<span class="num" id="8186463">1</span>&nbsp;<span class="op" id="8186465">}</span><span class="op" id="8186466">(</span><span class="op" id="8186467">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186471">switch</span>&nbsp;<span class="ident" id="8186478">ln</span>&nbsp;<span class="op" id="8186481">:=</span>&nbsp;<span class="ident" id="8186484">ln</span><span class="op" id="8186486">.</span><span class="op" id="8186487">(</span><span class="keyword" id="8186488">type</span><span class="op" id="8186492">)</span>&nbsp;<span class="op" id="8186494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186497">case</span>&nbsp;<span class="op" id="8186502">*</span><span class="ident" id="8186503">TCPListener</span><span class="op" id="8186514">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186518">ln</span><span class="op" id="8186520">.</span><span class="ident" id="8186521">SetDeadline</span><span class="op" id="8186532">(</span><span class="ident" id="8186533">time</span><span class="op" id="8186537">.</span><span class="ident" id="8186538">Now</span><span class="op" id="8186541">(</span><span class="op" id="8186542">)</span><span class="op" id="8186543">.</span><span class="ident" id="8186544">Add</span><span class="op" id="8186547">(</span><span class="ident" id="8186548">someTimeout</span><span class="op" id="8186559">)</span><span class="op" id="8186560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186563">case</span>&nbsp;<span class="op" id="8186568">*</span><span class="ident" id="8186569">UnixListener</span><span class="op" id="8186581">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186585">ln</span><span class="op" id="8186587">.</span><span class="ident" id="8186588">SetDeadline</span><span class="op" id="8186599">(</span><span class="ident" id="8186600">time</span><span class="op" id="8186604">.</span><span class="ident" id="8186605">Now</span><span class="op" id="8186608">(</span><span class="op" id="8186609">)</span><span class="op" id="8186610">.</span><span class="ident" id="8186611">Add</span><span class="op" id="8186614">(</span><span class="ident" id="8186615">someTimeout</span><span class="op" id="8186626">)</span><span class="op" id="8186627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186633">c</span><span class="op" id="8186634">,</span>&nbsp;<span class="ident" id="8186636">err</span>&nbsp;<span class="op" id="8186640">:=</span>&nbsp;<span class="ident" id="8186643">ln</span><span class="op" id="8186645">.</span><span class="ident" id="8186646">Accept</span><span class="op" id="8186652">(</span><span class="op" id="8186653">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186656">if</span>&nbsp;<span class="ident" id="8186659">err</span>&nbsp;<span class="op" id="8186663">!=</span>&nbsp;<span class="ident" id="8186666">nil</span>&nbsp;<span class="op" id="8186670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186674">t</span><span class="op" id="8186675">.</span><span class="ident" id="8186676">Errorf</span><span class="op" id="8186682">(</span><span class="string" id="8186683">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8186711">,</span>&nbsp;<span class="ident" id="8186713">err</span><span class="op" id="8186716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186720">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186731">defer</span>&nbsp;<span class="ident" id="8186737">c</span><span class="op" id="8186738">.</span><span class="ident" id="8186739">Close</span><span class="op" id="8186744">(</span><span class="op" id="8186745">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186748">network</span>&nbsp;<span class="op" id="8186756">:=</span>&nbsp;<span class="ident" id="8186759">ln</span><span class="op" id="8186761">.</span><span class="ident" id="8186762">Addr</span><span class="op" id="8186766">(</span><span class="op" id="8186767">)</span><span class="op" id="8186768">.</span><span class="ident" id="8186769">Network</span><span class="op" id="8186776">(</span><span class="op" id="8186777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186780">if</span>&nbsp;<span class="ident" id="8186783">c</span><span class="op" id="8186784">.</span><span class="ident" id="8186785">LocalAddr</span><span class="op" id="8186794">(</span><span class="op" id="8186795">)</span><span class="op" id="8186796">.</span><span class="ident" id="8186797">Network</span><span class="op" id="8186804">(</span><span class="op" id="8186805">)</span>&nbsp;<span class="op" id="8186807">!=</span>&nbsp;<span class="ident" id="8186810">network</span>&nbsp;<span class="op" id="8186818">||</span>&nbsp;<span class="ident" id="8186821">c</span><span class="op" id="8186822">.</span><span class="ident" id="8186823">LocalAddr</span><span class="op" id="8186832">(</span><span class="op" id="8186833">)</span><span class="op" id="8186834">.</span><span class="ident" id="8186835">Network</span><span class="op" id="8186842">(</span><span class="op" id="8186843">)</span>&nbsp;<span class="op" id="8186845">!=</span>&nbsp;<span class="ident" id="8186848">network</span>&nbsp;<span class="op" id="8186856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186860">t</span><span class="op" id="8186861">.</span><span class="ident" id="8186862">Errorf</span><span class="op" id="8186868">(</span><span class="string" id="8186869">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="8186898">,</span>&nbsp;<span class="ident" id="8186900">c</span><span class="op" id="8186901">.</span><span class="ident" id="8186902">LocalAddr</span><span class="op" id="8186911">(</span><span class="op" id="8186912">)</span><span class="op" id="8186913">.</span><span class="ident" id="8186914">Network</span><span class="op" id="8186921">(</span><span class="op" id="8186922">)</span><span class="op" id="8186923">,</span>&nbsp;<span class="ident" id="8186925">c</span><span class="op" id="8186926">.</span><span class="ident" id="8186927">RemoteAddr</span><span class="op" id="8186937">(</span><span class="op" id="8186938">)</span><span class="op" id="8186939">.</span><span class="ident" id="8186940">Network</span><span class="op" id="8186947">(</span><span class="op" id="8186948">)</span><span class="op" id="8186949">,</span>&nbsp;<span class="ident" id="8186951">network</span><span class="op" id="8186958">,</span>&nbsp;<span class="ident" id="8186960">network</span><span class="op" id="8186967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8186971">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8186979">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8186982">c</span><span class="op" id="8186983">.</span><span class="ident" id="8186984">SetDeadline</span><span class="op" id="8186995">(</span><span class="ident" id="8186996">time</span><span class="op" id="8187000">.</span><span class="ident" id="8187001">Now</span><span class="op" id="8187004">(</span><span class="op" id="8187005">)</span><span class="op" id="8187006">.</span><span class="ident" id="8187007">Add</span><span class="op" id="8187010">(</span><span class="ident" id="8187011">someTimeout</span><span class="op" id="8187022">)</span><span class="op" id="8187023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187026">c</span><span class="op" id="8187027">.</span><span class="ident" id="8187028">SetReadDeadline</span><span class="op" id="8187043">(</span><span class="ident" id="8187044">time</span><span class="op" id="8187048">.</span><span class="ident" id="8187049">Now</span><span class="op" id="8187052">(</span><span class="op" id="8187053">)</span><span class="op" id="8187054">.</span><span class="ident" id="8187055">Add</span><span class="op" id="8187058">(</span><span class="ident" id="8187059">someTimeout</span><span class="op" id="8187070">)</span><span class="op" id="8187071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187074">c</span><span class="op" id="8187075">.</span><span class="ident" id="8187076">SetWriteDeadline</span><span class="op" id="8187092">(</span><span class="ident" id="8187093">time</span><span class="op" id="8187097">.</span><span class="ident" id="8187098">Now</span><span class="op" id="8187101">(</span><span class="op" id="8187102">)</span><span class="op" id="8187103">.</span><span class="ident" id="8187104">Add</span><span class="op" id="8187107">(</span><span class="ident" id="8187108">someTimeout</span><span class="op" id="8187119">)</span><span class="op" id="8187120">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187124">b</span>&nbsp;<span class="op" id="8187126">:=</span>&nbsp;<span class="builtinfunc" id="8187129">make</span><span class="op" id="8187133">(</span><span class="op" id="8187134">[</span><span class="op" id="8187135">]</span><span class="builtintype" id="8187136">byte</span><span class="op" id="8187140">,</span>&nbsp;<span class="num" id="8187142">128</span><span class="op" id="8187145">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187148">n</span><span class="op" id="8187149">,</span>&nbsp;<span class="ident" id="8187151">err</span>&nbsp;<span class="op" id="8187155">:=</span>&nbsp;<span class="ident" id="8187158">c</span><span class="op" id="8187159">.</span><span class="ident" id="8187160">Read</span><span class="op" id="8187164">(</span><span class="ident" id="8187165">b</span><span class="op" id="8187166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187169">if</span>&nbsp;<span class="ident" id="8187172">err</span>&nbsp;<span class="op" id="8187176">!=</span>&nbsp;<span class="ident" id="8187179">nil</span>&nbsp;<span class="op" id="8187183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187187">t</span><span class="op" id="8187188">.</span><span class="ident" id="8187189">Errorf</span><span class="op" id="8187195">(</span><span class="string" id="8187196">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8187218">,</span>&nbsp;<span class="ident" id="8187220">err</span><span class="op" id="8187223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187227">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187235">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187238">if</span>&nbsp;<span class="ident" id="8187241">_</span><span class="op" id="8187242">,</span>&nbsp;<span class="ident" id="8187244">err</span>&nbsp;<span class="op" id="8187248">:=</span>&nbsp;<span class="ident" id="8187251">c</span><span class="op" id="8187252">.</span><span class="ident" id="8187253">Write</span><span class="op" id="8187258">(</span><span class="ident" id="8187259">b</span><span class="op" id="8187260">[</span><span class="op" id="8187261">:</span><span class="ident" id="8187262">n</span><span class="op" id="8187263">]</span><span class="op" id="8187264">)</span><span class="op" id="8187265">;</span>&nbsp;<span class="ident" id="8187267">err</span>&nbsp;<span class="op" id="8187271">!=</span>&nbsp;<span class="ident" id="8187274">nil</span>&nbsp;<span class="op" id="8187278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8187282">t</span><span class="op" id="8187283">.</span><span class="ident" id="8187284">Errorf</span><span class="op" id="8187290">(</span><span class="string" id="8187291">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="8187314">,</span>&nbsp;<span class="ident" id="8187316">err</span><span class="op" id="8187319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8187323">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8187331">}</span><br>
<span class="lineno"></span><span class="op" id="8187333">}</span>
</div>
</body>
</html>
