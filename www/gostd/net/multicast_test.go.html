<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html" class="current">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6506607">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6506662">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6506716">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6506767">package</span>&nbsp;<span class="ident" id="6506775">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6506780">import</span>&nbsp;<span class="op" id="6506787">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6506790">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6506797">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6506803">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6506814">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6506824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6506827">var</span>&nbsp;<span class="ident" id="6506831">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6506858">=</span>&nbsp;<span class="op" id="6506860">[</span><span class="op" id="6506861">]</span><span class="keyword" id="6506862">struct</span>&nbsp;<span class="op" id="6506869">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6506872">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6506878">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6506886">gaddr</span>&nbsp;<span class="op" id="6506892">*</span><span class="ident" id="6506893">UDPAddr</span>&nbsp;<span class="comment" id="6506901">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6506917">}</span><span class="op" id="6506918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6506921">{</span><span class="string" id="6506922">&#34;udp&#34;</span><span class="op" id="6506927">,</span>&nbsp;<span class="op" id="6506929">&amp;</span><span class="ident" id="6506930">UDPAddr</span><span class="op" id="6506937">{</span><span class="ident" id="6506938">IP</span><span class="op" id="6506940">:</span>&nbsp;<span class="ident" id="6506942">IPv4</span><span class="op" id="6506946">(</span><span class="num" id="6506947">224</span><span class="op" id="6506950">,</span>&nbsp;<span class="num" id="6506952">0</span><span class="op" id="6506953">,</span>&nbsp;<span class="num" id="6506955">0</span><span class="op" id="6506956">,</span>&nbsp;<span class="num" id="6506958">254</span><span class="op" id="6506961">)</span><span class="op" id="6506962">,</span>&nbsp;<span class="ident" id="6506964">Port</span><span class="op" id="6506968">:</span>&nbsp;<span class="num" id="6506970">12345</span><span class="op" id="6506975">}</span><span class="op" id="6506976">}</span><span class="op" id="6506977">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6506981">{</span><span class="string" id="6506982">&#34;udp4&#34;</span><span class="op" id="6506988">,</span>&nbsp;<span class="op" id="6506990">&amp;</span><span class="ident" id="6506991">UDPAddr</span><span class="op" id="6506998">{</span><span class="ident" id="6506999">IP</span><span class="op" id="6507001">:</span>&nbsp;<span class="ident" id="6507003">IPv4</span><span class="op" id="6507007">(</span><span class="num" id="6507008">224</span><span class="op" id="6507011">,</span>&nbsp;<span class="num" id="6507013">0</span><span class="op" id="6507014">,</span>&nbsp;<span class="num" id="6507016">0</span><span class="op" id="6507017">,</span>&nbsp;<span class="num" id="6507019">254</span><span class="op" id="6507022">)</span><span class="op" id="6507023">,</span>&nbsp;<span class="ident" id="6507025">Port</span><span class="op" id="6507029">:</span>&nbsp;<span class="num" id="6507031">12345</span><span class="op" id="6507036">}</span><span class="op" id="6507037">}</span><span class="op" id="6507038">,</span><br>
<span class="lineno"></span><span class="op" id="6507040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6507043">//&nbsp;TestIPv4MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6507113">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">25</span><span class="comment" id="6507184">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6507193">func</span>&nbsp;<span class="ident" id="6507198">TestIPv4MulticastListener</span><span class="op" id="6507223">(</span><span class="ident" id="6507224">t</span>&nbsp;<span class="op" id="6507226">*</span><span class="ident" id="6507227">testing</span><span class="op" id="6507234">.</span><span class="ident" id="6507235">T</span><span class="op" id="6507236">)</span>&nbsp;<span class="op" id="6507238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507241">switch</span>&nbsp;<span class="ident" id="6507248">runtime</span><span class="op" id="6507255">.</span><span class="ident" id="6507256">GOOS</span>&nbsp;<span class="op" id="6507261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507264">case</span>&nbsp;<span class="string" id="6507269">&#34;android&#34;</span><span class="op" id="6507278">,</span>&nbsp;<span class="string" id="6507280">&#34;nacl&#34;</span><span class="op" id="6507286">,</span>&nbsp;<span class="string" id="6507288">&#34;plan9&#34;</span><span class="op" id="6507295">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6507299">t</span><span class="op" id="6507300">.</span><span class="ident" id="6507301">Skipf</span><span class="op" id="6507306">(</span><span class="string" id="6507307">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6507328">,</span>&nbsp;<span class="ident" id="6507330">runtime</span><span class="op" id="6507337">.</span><span class="ident" id="6507338">GOOS</span><span class="op" id="6507342">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507345">case</span>&nbsp;<span class="string" id="6507350">&#34;solaris&#34;</span><span class="op" id="6507359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6507363">t</span><span class="op" id="6507364">.</span><span class="ident" id="6507365">Skipf</span><span class="op" id="6507370">(</span><span class="string" id="6507371">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6507413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6507416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6507420">closer</span>&nbsp;<span class="op" id="6507427">:=</span>&nbsp;<span class="keyword" id="6507430">func</span><span class="op" id="6507434">(</span><span class="ident" id="6507435">cs</span>&nbsp;<span class="op" id="6507438">[</span><span class="op" id="6507439">]</span><span class="op" id="6507440">*</span><span class="ident" id="6507441">UDPConn</span><span class="op" id="6507448">)</span>&nbsp;<span class="op" id="6507450">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507454">for</span>&nbsp;<span class="ident" id="6507458">_</span><span class="op" id="6507459">,</span>&nbsp;<span class="ident" id="6507461">c</span>&nbsp;<span class="op" id="6507463">:=</span>&nbsp;<span class="keyword" id="6507466">range</span>&nbsp;<span class="ident" id="6507472">cs</span>&nbsp;<span class="op" id="6507475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507480">if</span>&nbsp;<span class="ident" id="6507483">c</span>&nbsp;<span class="op" id="6507485">!=</span>&nbsp;<span class="builtintype" id="6507488">nil</span>&nbsp;<span class="op" id="6507492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6507498">c</span><span class="op" id="6507499">.</span><span class="ident" id="6507500">Close</span><span class="op" id="6507505">(</span><span class="op" id="6507506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6507511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6507515">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6507518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507522">for</span>&nbsp;<span class="ident" id="6507526">_</span><span class="op" id="6507527">,</span>&nbsp;<span class="ident" id="6507529">ifi</span>&nbsp;<span class="op" id="6507533">:=</span>&nbsp;<span class="keyword" id="6507536">range</span>&nbsp;<span class="op" id="6507542">[</span><span class="op" id="6507543">]</span><span class="op" id="6507544">*</span><span class="ident" id="6507545">Interface</span><span class="op" id="6507554">{</span><span class="ident" id="6507555">loopbackInterface</span><span class="op" id="6507572">(</span><span class="op" id="6507573">)</span><span class="op" id="6507574">,</span>&nbsp;<span class="builtintype" id="6507576">nil</span><span class="op" id="6507579">}</span>&nbsp;<span class="op" id="6507581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6507585">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6507641">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6507694">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6507744">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6507796">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507814">if</span>&nbsp;<span class="ident" id="6507817">ifi</span>&nbsp;<span class="op" id="6507821">==</span>&nbsp;<span class="builtintype" id="6507824">nil</span>&nbsp;<span class="op" id="6507828">&amp;&amp;</span>&nbsp;<span class="op" id="6507831">!</span><span class="op" id="6507832">*</span><span class="ident" id="6507833">testExternal</span>&nbsp;<span class="op" id="6507846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507851">continue</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6507862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507866">for</span>&nbsp;<span class="ident" id="6507870">_</span><span class="op" id="6507871">,</span>&nbsp;<span class="ident" id="6507873">tt</span>&nbsp;<span class="op" id="6507876">:=</span>&nbsp;<span class="keyword" id="6507879">range</span>&nbsp;<span class="ident" id="6507885">ipv4MulticastListenerTests</span>&nbsp;<span class="op" id="6507912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507917">var</span>&nbsp;<span class="ident" id="6507921">err</span>&nbsp;<span class="builtintype" id="6507925">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6507934">cs</span>&nbsp;<span class="op" id="6507937">:=</span>&nbsp;<span class="builtinfunc" id="6507940">make</span><span class="op" id="6507944">(</span><span class="op" id="6507945">[</span><span class="op" id="6507946">]</span><span class="op" id="6507947">*</span><span class="ident" id="6507948">UDPConn</span><span class="op" id="6507955">,</span>&nbsp;<span class="num" id="6507957">2</span><span class="op" id="6507958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6507963">if</span>&nbsp;<span class="ident" id="6507966">cs</span><span class="op" id="6507968">[</span><span class="num" id="6507969">0</span><span class="op" id="6507970">]</span><span class="op" id="6507971">,</span>&nbsp;<span class="ident" id="6507973">err</span>&nbsp;<span class="op" id="6507977">=</span>&nbsp;<span class="ident" id="6507979">ListenMulticastUDP</span><span class="op" id="6507997">(</span><span class="ident" id="6507998">tt</span><span class="op" id="6508000">.</span><span class="ident" id="6508001">net</span><span class="op" id="6508004">,</span>&nbsp;<span class="ident" id="6508006">ifi</span><span class="op" id="6508009">,</span>&nbsp;<span class="ident" id="6508011">tt</span><span class="op" id="6508013">.</span><span class="ident" id="6508014">gaddr</span><span class="op" id="6508019">)</span><span class="op" id="6508020">;</span>&nbsp;<span class="ident" id="6508022">err</span>&nbsp;<span class="op" id="6508026">!=</span>&nbsp;<span class="builtintype" id="6508029">nil</span>&nbsp;<span class="op" id="6508033">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508039">t</span><span class="op" id="6508040">.</span><span class="ident" id="6508041">Fatalf</span><span class="op" id="6508047">(</span><span class="string" id="6508048">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6508091">,</span>&nbsp;<span class="ident" id="6508093">ifi</span><span class="op" id="6508096">,</span>&nbsp;<span class="ident" id="6508098">err</span><span class="op" id="6508101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6508111">if</span>&nbsp;<span class="ident" id="6508114">err</span>&nbsp;<span class="op" id="6508118">:=</span>&nbsp;<span class="ident" id="6508121">checkMulticastListener</span><span class="op" id="6508143">(</span><span class="ident" id="6508144">cs</span><span class="op" id="6508146">[</span><span class="num" id="6508147">0</span><span class="op" id="6508148">]</span><span class="op" id="6508149">,</span>&nbsp;<span class="ident" id="6508151">tt</span><span class="op" id="6508153">.</span><span class="ident" id="6508154">gaddr</span><span class="op" id="6508159">.</span><span class="ident" id="6508160">IP</span><span class="op" id="6508162">)</span><span class="op" id="6508163">;</span>&nbsp;<span class="ident" id="6508165">err</span>&nbsp;<span class="op" id="6508169">!=</span>&nbsp;<span class="builtintype" id="6508172">nil</span>&nbsp;<span class="op" id="6508176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508182">closer</span><span class="op" id="6508188">(</span><span class="ident" id="6508189">cs</span><span class="op" id="6508191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508197">t</span><span class="op" id="6508198">.</span><span class="ident" id="6508199">Fatal</span><span class="op" id="6508204">(</span><span class="ident" id="6508205">err</span><span class="op" id="6508208">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6508218">if</span>&nbsp;<span class="ident" id="6508221">cs</span><span class="op" id="6508223">[</span><span class="num" id="6508224">1</span><span class="op" id="6508225">]</span><span class="op" id="6508226">,</span>&nbsp;<span class="ident" id="6508228">err</span>&nbsp;<span class="op" id="6508232">=</span>&nbsp;<span class="ident" id="6508234">ListenMulticastUDP</span><span class="op" id="6508252">(</span><span class="ident" id="6508253">tt</span><span class="op" id="6508255">.</span><span class="ident" id="6508256">net</span><span class="op" id="6508259">,</span>&nbsp;<span class="ident" id="6508261">ifi</span><span class="op" id="6508264">,</span>&nbsp;<span class="ident" id="6508266">tt</span><span class="op" id="6508268">.</span><span class="ident" id="6508269">gaddr</span><span class="op" id="6508274">)</span><span class="op" id="6508275">;</span>&nbsp;<span class="ident" id="6508277">err</span>&nbsp;<span class="op" id="6508281">!=</span>&nbsp;<span class="builtintype" id="6508284">nil</span>&nbsp;<span class="op" id="6508288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508294">closer</span><span class="op" id="6508300">(</span><span class="ident" id="6508301">cs</span><span class="op" id="6508303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508309">t</span><span class="op" id="6508310">.</span><span class="ident" id="6508311">Fatalf</span><span class="op" id="6508317">(</span><span class="string" id="6508318">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6508362">,</span>&nbsp;<span class="ident" id="6508364">ifi</span><span class="op" id="6508367">,</span>&nbsp;<span class="ident" id="6508369">err</span><span class="op" id="6508372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508377">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6508382">if</span>&nbsp;<span class="ident" id="6508385">err</span>&nbsp;<span class="op" id="6508389">:=</span>&nbsp;<span class="ident" id="6508392">checkMulticastListener</span><span class="op" id="6508414">(</span><span class="ident" id="6508415">cs</span><span class="op" id="6508417">[</span><span class="num" id="6508418">1</span><span class="op" id="6508419">]</span><span class="op" id="6508420">,</span>&nbsp;<span class="ident" id="6508422">tt</span><span class="op" id="6508424">.</span><span class="ident" id="6508425">gaddr</span><span class="op" id="6508430">.</span><span class="ident" id="6508431">IP</span><span class="op" id="6508433">)</span><span class="op" id="6508434">;</span>&nbsp;<span class="ident" id="6508436">err</span>&nbsp;<span class="op" id="6508440">!=</span>&nbsp;<span class="builtintype" id="6508443">nil</span>&nbsp;<span class="op" id="6508447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508453">closer</span><span class="op" id="6508459">(</span><span class="ident" id="6508460">cs</span><span class="op" id="6508462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508468">t</span><span class="op" id="6508469">.</span><span class="ident" id="6508470">Fatal</span><span class="op" id="6508475">(</span><span class="ident" id="6508476">err</span><span class="op" id="6508479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508489">closer</span><span class="op" id="6508495">(</span><span class="ident" id="6508496">cs</span><span class="op" id="6508498">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508505">}</span><br>
<span class="lineno"></span><span class="op" id="6508507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508510">var</span>&nbsp;<span class="ident" id="6508514">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6508541">=</span>&nbsp;<span class="op" id="6508543">[</span><span class="op" id="6508544">]</span><span class="keyword" id="6508545">struct</span>&nbsp;<span class="op" id="6508552">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508555">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6508561">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6508569">gaddr</span>&nbsp;<span class="op" id="6508575">*</span><span class="ident" id="6508576">UDPAddr</span>&nbsp;<span class="comment" id="6508584">//&nbsp;see&nbsp;RFC&nbsp;4727</span><br>
<span class="lineno"></span><span class="op" id="6508600">}</span><span class="op" id="6508601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508604">{</span><span class="string" id="6508605">&#34;udp&#34;</span><span class="op" id="6508610">,</span>&nbsp;<span class="op" id="6508612">&amp;</span><span class="ident" id="6508613">UDPAddr</span><span class="op" id="6508620">{</span><span class="ident" id="6508621">IP</span><span class="op" id="6508623">:</span>&nbsp;<span class="ident" id="6508625">ParseIP</span><span class="op" id="6508632">(</span><span class="string" id="6508633">&#34;ff01::114&#34;</span><span class="op" id="6508644">)</span><span class="op" id="6508645">,</span>&nbsp;<span class="ident" id="6508647">Port</span><span class="op" id="6508651">:</span>&nbsp;<span class="num" id="6508653">12345</span><span class="op" id="6508658">}</span><span class="op" id="6508659">}</span><span class="op" id="6508660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508663">{</span><span class="string" id="6508664">&#34;udp&#34;</span><span class="op" id="6508669">,</span>&nbsp;<span class="op" id="6508671">&amp;</span><span class="ident" id="6508672">UDPAddr</span><span class="op" id="6508679">{</span><span class="ident" id="6508680">IP</span><span class="op" id="6508682">:</span>&nbsp;<span class="ident" id="6508684">ParseIP</span><span class="op" id="6508691">(</span><span class="string" id="6508692">&#34;ff02::114&#34;</span><span class="op" id="6508703">)</span><span class="op" id="6508704">,</span>&nbsp;<span class="ident" id="6508706">Port</span><span class="op" id="6508710">:</span>&nbsp;<span class="num" id="6508712">12345</span><span class="op" id="6508717">}</span><span class="op" id="6508718">}</span><span class="op" id="6508719">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508722">{</span><span class="string" id="6508723">&#34;udp&#34;</span><span class="op" id="6508728">,</span>&nbsp;<span class="op" id="6508730">&amp;</span><span class="ident" id="6508731">UDPAddr</span><span class="op" id="6508738">{</span><span class="ident" id="6508739">IP</span><span class="op" id="6508741">:</span>&nbsp;<span class="ident" id="6508743">ParseIP</span><span class="op" id="6508750">(</span><span class="string" id="6508751">&#34;ff04::114&#34;</span><span class="op" id="6508762">)</span><span class="op" id="6508763">,</span>&nbsp;<span class="ident" id="6508765">Port</span><span class="op" id="6508769">:</span>&nbsp;<span class="num" id="6508771">12345</span><span class="op" id="6508776">}</span><span class="op" id="6508777">}</span><span class="op" id="6508778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508781">{</span><span class="string" id="6508782">&#34;udp&#34;</span><span class="op" id="6508787">,</span>&nbsp;<span class="op" id="6508789">&amp;</span><span class="ident" id="6508790">UDPAddr</span><span class="op" id="6508797">{</span><span class="ident" id="6508798">IP</span><span class="op" id="6508800">:</span>&nbsp;<span class="ident" id="6508802">ParseIP</span><span class="op" id="6508809">(</span><span class="string" id="6508810">&#34;ff05::114&#34;</span><span class="op" id="6508821">)</span><span class="op" id="6508822">,</span>&nbsp;<span class="ident" id="6508824">Port</span><span class="op" id="6508828">:</span>&nbsp;<span class="num" id="6508830">12345</span><span class="op" id="6508835">}</span><span class="op" id="6508836">}</span><span class="op" id="6508837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508840">{</span><span class="string" id="6508841">&#34;udp&#34;</span><span class="op" id="6508846">,</span>&nbsp;<span class="op" id="6508848">&amp;</span><span class="ident" id="6508849">UDPAddr</span><span class="op" id="6508856">{</span><span class="ident" id="6508857">IP</span><span class="op" id="6508859">:</span>&nbsp;<span class="ident" id="6508861">ParseIP</span><span class="op" id="6508868">(</span><span class="string" id="6508869">&#34;ff08::114&#34;</span><span class="op" id="6508880">)</span><span class="op" id="6508881">,</span>&nbsp;<span class="ident" id="6508883">Port</span><span class="op" id="6508887">:</span>&nbsp;<span class="num" id="6508889">12345</span><span class="op" id="6508894">}</span><span class="op" id="6508895">}</span><span class="op" id="6508896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508899">{</span><span class="string" id="6508900">&#34;udp&#34;</span><span class="op" id="6508905">,</span>&nbsp;<span class="op" id="6508907">&amp;</span><span class="ident" id="6508908">UDPAddr</span><span class="op" id="6508915">{</span><span class="ident" id="6508916">IP</span><span class="op" id="6508918">:</span>&nbsp;<span class="ident" id="6508920">ParseIP</span><span class="op" id="6508927">(</span><span class="string" id="6508928">&#34;ff0e::114&#34;</span><span class="op" id="6508939">)</span><span class="op" id="6508940">,</span>&nbsp;<span class="ident" id="6508942">Port</span><span class="op" id="6508946">:</span>&nbsp;<span class="num" id="6508948">12345</span><span class="op" id="6508953">}</span><span class="op" id="6508954">}</span><span class="op" id="6508955">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508959">{</span><span class="string" id="6508960">&#34;udp6&#34;</span><span class="op" id="6508966">,</span>&nbsp;<span class="op" id="6508968">&amp;</span><span class="ident" id="6508969">UDPAddr</span><span class="op" id="6508976">{</span><span class="ident" id="6508977">IP</span><span class="op" id="6508979">:</span>&nbsp;<span class="ident" id="6508981">ParseIP</span><span class="op" id="6508988">(</span><span class="string" id="6508989">&#34;ff01::114&#34;</span><span class="op" id="6509000">)</span><span class="op" id="6509001">,</span>&nbsp;<span class="ident" id="6509003">Port</span><span class="op" id="6509007">:</span>&nbsp;<span class="num" id="6509009">12345</span><span class="op" id="6509014">}</span><span class="op" id="6509015">}</span><span class="op" id="6509016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509019">{</span><span class="string" id="6509020">&#34;udp6&#34;</span><span class="op" id="6509026">,</span>&nbsp;<span class="op" id="6509028">&amp;</span><span class="ident" id="6509029">UDPAddr</span><span class="op" id="6509036">{</span><span class="ident" id="6509037">IP</span><span class="op" id="6509039">:</span>&nbsp;<span class="ident" id="6509041">ParseIP</span><span class="op" id="6509048">(</span><span class="string" id="6509049">&#34;ff02::114&#34;</span><span class="op" id="6509060">)</span><span class="op" id="6509061">,</span>&nbsp;<span class="ident" id="6509063">Port</span><span class="op" id="6509067">:</span>&nbsp;<span class="num" id="6509069">12345</span><span class="op" id="6509074">}</span><span class="op" id="6509075">}</span><span class="op" id="6509076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509079">{</span><span class="string" id="6509080">&#34;udp6&#34;</span><span class="op" id="6509086">,</span>&nbsp;<span class="op" id="6509088">&amp;</span><span class="ident" id="6509089">UDPAddr</span><span class="op" id="6509096">{</span><span class="ident" id="6509097">IP</span><span class="op" id="6509099">:</span>&nbsp;<span class="ident" id="6509101">ParseIP</span><span class="op" id="6509108">(</span><span class="string" id="6509109">&#34;ff04::114&#34;</span><span class="op" id="6509120">)</span><span class="op" id="6509121">,</span>&nbsp;<span class="ident" id="6509123">Port</span><span class="op" id="6509127">:</span>&nbsp;<span class="num" id="6509129">12345</span><span class="op" id="6509134">}</span><span class="op" id="6509135">}</span><span class="op" id="6509136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509139">{</span><span class="string" id="6509140">&#34;udp6&#34;</span><span class="op" id="6509146">,</span>&nbsp;<span class="op" id="6509148">&amp;</span><span class="ident" id="6509149">UDPAddr</span><span class="op" id="6509156">{</span><span class="ident" id="6509157">IP</span><span class="op" id="6509159">:</span>&nbsp;<span class="ident" id="6509161">ParseIP</span><span class="op" id="6509168">(</span><span class="string" id="6509169">&#34;ff05::114&#34;</span><span class="op" id="6509180">)</span><span class="op" id="6509181">,</span>&nbsp;<span class="ident" id="6509183">Port</span><span class="op" id="6509187">:</span>&nbsp;<span class="num" id="6509189">12345</span><span class="op" id="6509194">}</span><span class="op" id="6509195">}</span><span class="op" id="6509196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509199">{</span><span class="string" id="6509200">&#34;udp6&#34;</span><span class="op" id="6509206">,</span>&nbsp;<span class="op" id="6509208">&amp;</span><span class="ident" id="6509209">UDPAddr</span><span class="op" id="6509216">{</span><span class="ident" id="6509217">IP</span><span class="op" id="6509219">:</span>&nbsp;<span class="ident" id="6509221">ParseIP</span><span class="op" id="6509228">(</span><span class="string" id="6509229">&#34;ff08::114&#34;</span><span class="op" id="6509240">)</span><span class="op" id="6509241">,</span>&nbsp;<span class="ident" id="6509243">Port</span><span class="op" id="6509247">:</span>&nbsp;<span class="num" id="6509249">12345</span><span class="op" id="6509254">}</span><span class="op" id="6509255">}</span><span class="op" id="6509256">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509259">{</span><span class="string" id="6509260">&#34;udp6&#34;</span><span class="op" id="6509266">,</span>&nbsp;<span class="op" id="6509268">&amp;</span><span class="ident" id="6509269">UDPAddr</span><span class="op" id="6509276">{</span><span class="ident" id="6509277">IP</span><span class="op" id="6509279">:</span>&nbsp;<span class="ident" id="6509281">ParseIP</span><span class="op" id="6509288">(</span><span class="string" id="6509289">&#34;ff0e::114&#34;</span><span class="op" id="6509300">)</span><span class="op" id="6509301">,</span>&nbsp;<span class="ident" id="6509303">Port</span><span class="op" id="6509307">:</span>&nbsp;<span class="num" id="6509309">12345</span><span class="op" id="6509314">}</span><span class="op" id="6509315">}</span><span class="op" id="6509316">,</span><br>
<span class="lineno"></span><span class="op" id="6509318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6509321">//&nbsp;TestIPv6MulticastListener&nbsp;tests&nbsp;both&nbsp;single&nbsp;and&nbsp;double&nbsp;listen&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6509391">//&nbsp;test&nbsp;listener&nbsp;with&nbsp;same&nbsp;address&nbsp;family,&nbsp;same&nbsp;group&nbsp;address&nbsp;and&nbsp;same</span><br>
<span class="lineno">95</span><span class="comment" id="6509462">//&nbsp;port.</span><br>
<span class="lineno"></span><span class="keyword" id="6509471">func</span>&nbsp;<span class="ident" id="6509476">TestIPv6MulticastListener</span><span class="op" id="6509501">(</span><span class="ident" id="6509502">t</span>&nbsp;<span class="op" id="6509504">*</span><span class="ident" id="6509505">testing</span><span class="op" id="6509512">.</span><span class="ident" id="6509513">T</span><span class="op" id="6509514">)</span>&nbsp;<span class="op" id="6509516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509519">switch</span>&nbsp;<span class="ident" id="6509526">runtime</span><span class="op" id="6509533">.</span><span class="ident" id="6509534">GOOS</span>&nbsp;<span class="op" id="6509539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509542">case</span>&nbsp;<span class="string" id="6509547">&#34;plan9&#34;</span><span class="op" id="6509554">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509558">t</span><span class="op" id="6509559">.</span><span class="ident" id="6509560">Skipf</span><span class="op" id="6509565">(</span><span class="string" id="6509566">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6509587">,</span>&nbsp;<span class="ident" id="6509589">runtime</span><span class="op" id="6509596">.</span><span class="ident" id="6509597">GOOS</span><span class="op" id="6509601">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509604">case</span>&nbsp;<span class="string" id="6509609">&#34;solaris&#34;</span><span class="op" id="6509618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509622">t</span><span class="op" id="6509623">.</span><span class="ident" id="6509624">Skipf</span><span class="op" id="6509629">(</span><span class="string" id="6509630">&#34;skipping&nbsp;test&nbsp;on&nbsp;solaris,&nbsp;see&nbsp;issue&nbsp;7399&#34;</span><span class="op" id="6509672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509678">if</span>&nbsp;<span class="op" id="6509681">!</span><span class="ident" id="6509682">supportsIPv6</span>&nbsp;<span class="op" id="6509695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509699">t</span><span class="op" id="6509700">.</span><span class="ident" id="6509701">Skip</span><span class="op" id="6509705">(</span><span class="string" id="6509706">&#34;ipv6&nbsp;is&nbsp;not&nbsp;supported&#34;</span><span class="op" id="6509729">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509735">if</span>&nbsp;<span class="ident" id="6509738">os</span><span class="op" id="6509740">.</span><span class="ident" id="6509741">Getuid</span><span class="op" id="6509747">(</span><span class="op" id="6509748">)</span>&nbsp;<span class="op" id="6509750">!=</span>&nbsp;<span class="num" id="6509753">0</span>&nbsp;<span class="op" id="6509755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509759">t</span><span class="op" id="6509760">.</span><span class="ident" id="6509761">Skip</span><span class="op" id="6509765">(</span><span class="string" id="6509766">&#34;skipping&nbsp;test;&nbsp;must&nbsp;be&nbsp;root&#34;</span><span class="op" id="6509795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509802">closer</span>&nbsp;<span class="op" id="6509809">:=</span>&nbsp;<span class="keyword" id="6509812">func</span><span class="op" id="6509816">(</span><span class="ident" id="6509817">cs</span>&nbsp;<span class="op" id="6509820">[</span><span class="op" id="6509821">]</span><span class="op" id="6509822">*</span><span class="ident" id="6509823">UDPConn</span><span class="op" id="6509830">)</span>&nbsp;<span class="op" id="6509832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509836">for</span>&nbsp;<span class="ident" id="6509840">_</span><span class="op" id="6509841">,</span>&nbsp;<span class="ident" id="6509843">c</span>&nbsp;<span class="op" id="6509845">:=</span>&nbsp;<span class="keyword" id="6509848">range</span>&nbsp;<span class="ident" id="6509854">cs</span>&nbsp;<span class="op" id="6509857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509862">if</span>&nbsp;<span class="ident" id="6509865">c</span>&nbsp;<span class="op" id="6509867">!=</span>&nbsp;<span class="builtintype" id="6509870">nil</span>&nbsp;<span class="op" id="6509874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6509880">c</span><span class="op" id="6509881">.</span><span class="ident" id="6509882">Close</span><span class="op" id="6509887">(</span><span class="op" id="6509888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509893">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6509900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6509904">for</span>&nbsp;<span class="ident" id="6509908">_</span><span class="op" id="6509909">,</span>&nbsp;<span class="ident" id="6509911">ifi</span>&nbsp;<span class="op" id="6509915">:=</span>&nbsp;<span class="keyword" id="6509918">range</span>&nbsp;<span class="op" id="6509924">[</span><span class="op" id="6509925">]</span><span class="op" id="6509926">*</span><span class="ident" id="6509927">Interface</span><span class="op" id="6509936">{</span><span class="ident" id="6509937">loopbackInterface</span><span class="op" id="6509954">(</span><span class="op" id="6509955">)</span><span class="op" id="6509956">,</span>&nbsp;<span class="builtintype" id="6509958">nil</span><span class="op" id="6509961">}</span>&nbsp;<span class="op" id="6509963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6509967">//&nbsp;Note&nbsp;that&nbsp;multicast&nbsp;interface&nbsp;assignment&nbsp;by&nbsp;system</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6510023">//&nbsp;is&nbsp;not&nbsp;recommended&nbsp;because&nbsp;it&nbsp;usually&nbsp;relies&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6510076">//&nbsp;routing&nbsp;stuff&nbsp;for&nbsp;finding&nbsp;out&nbsp;an&nbsp;appropriate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6510126">//&nbsp;nexthop&nbsp;containing&nbsp;both&nbsp;network&nbsp;and&nbsp;link&nbsp;layer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6510178">//&nbsp;adjacencies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510196">if</span>&nbsp;<span class="ident" id="6510199">ifi</span>&nbsp;<span class="op" id="6510203">==</span>&nbsp;<span class="builtintype" id="6510206">nil</span>&nbsp;<span class="op" id="6510210">&amp;&amp;</span>&nbsp;<span class="op" id="6510213">(</span><span class="op" id="6510214">!</span><span class="op" id="6510215">*</span><span class="ident" id="6510216">testExternal</span>&nbsp;<span class="op" id="6510229">||</span>&nbsp;<span class="op" id="6510232">!</span><span class="op" id="6510233">*</span><span class="ident" id="6510234">testIPv6</span><span class="op" id="6510242">)</span>&nbsp;<span class="op" id="6510244">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510249">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510264">for</span>&nbsp;<span class="ident" id="6510268">_</span><span class="op" id="6510269">,</span>&nbsp;<span class="ident" id="6510271">tt</span>&nbsp;<span class="op" id="6510274">:=</span>&nbsp;<span class="keyword" id="6510277">range</span>&nbsp;<span class="ident" id="6510283">ipv6MulticastListenerTests</span>&nbsp;<span class="op" id="6510310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510315">var</span>&nbsp;<span class="ident" id="6510319">err</span>&nbsp;<span class="builtintype" id="6510323">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510332">cs</span>&nbsp;<span class="op" id="6510335">:=</span>&nbsp;<span class="builtinfunc" id="6510338">make</span><span class="op" id="6510342">(</span><span class="op" id="6510343">[</span><span class="op" id="6510344">]</span><span class="op" id="6510345">*</span><span class="ident" id="6510346">UDPConn</span><span class="op" id="6510353">,</span>&nbsp;<span class="num" id="6510355">2</span><span class="op" id="6510356">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510361">if</span>&nbsp;<span class="ident" id="6510364">cs</span><span class="op" id="6510366">[</span><span class="num" id="6510367">0</span><span class="op" id="6510368">]</span><span class="op" id="6510369">,</span>&nbsp;<span class="ident" id="6510371">err</span>&nbsp;<span class="op" id="6510375">=</span>&nbsp;<span class="ident" id="6510377">ListenMulticastUDP</span><span class="op" id="6510395">(</span><span class="ident" id="6510396">tt</span><span class="op" id="6510398">.</span><span class="ident" id="6510399">net</span><span class="op" id="6510402">,</span>&nbsp;<span class="ident" id="6510404">ifi</span><span class="op" id="6510407">,</span>&nbsp;<span class="ident" id="6510409">tt</span><span class="op" id="6510411">.</span><span class="ident" id="6510412">gaddr</span><span class="op" id="6510417">)</span><span class="op" id="6510418">;</span>&nbsp;<span class="ident" id="6510420">err</span>&nbsp;<span class="op" id="6510424">!=</span>&nbsp;<span class="builtintype" id="6510427">nil</span>&nbsp;<span class="op" id="6510431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510437">t</span><span class="op" id="6510438">.</span><span class="ident" id="6510439">Fatalf</span><span class="op" id="6510445">(</span><span class="string" id="6510446">&#34;First&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6510489">,</span>&nbsp;<span class="ident" id="6510491">ifi</span><span class="op" id="6510494">,</span>&nbsp;<span class="ident" id="6510496">err</span><span class="op" id="6510499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510509">if</span>&nbsp;<span class="ident" id="6510512">err</span>&nbsp;<span class="op" id="6510516">:=</span>&nbsp;<span class="ident" id="6510519">checkMulticastListener</span><span class="op" id="6510541">(</span><span class="ident" id="6510542">cs</span><span class="op" id="6510544">[</span><span class="num" id="6510545">0</span><span class="op" id="6510546">]</span><span class="op" id="6510547">,</span>&nbsp;<span class="ident" id="6510549">tt</span><span class="op" id="6510551">.</span><span class="ident" id="6510552">gaddr</span><span class="op" id="6510557">.</span><span class="ident" id="6510558">IP</span><span class="op" id="6510560">)</span><span class="op" id="6510561">;</span>&nbsp;<span class="ident" id="6510563">err</span>&nbsp;<span class="op" id="6510567">!=</span>&nbsp;<span class="builtintype" id="6510570">nil</span>&nbsp;<span class="op" id="6510574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510580">closer</span><span class="op" id="6510586">(</span><span class="ident" id="6510587">cs</span><span class="op" id="6510589">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510595">t</span><span class="op" id="6510596">.</span><span class="ident" id="6510597">Fatal</span><span class="op" id="6510602">(</span><span class="ident" id="6510603">err</span><span class="op" id="6510606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510616">if</span>&nbsp;<span class="ident" id="6510619">cs</span><span class="op" id="6510621">[</span><span class="num" id="6510622">1</span><span class="op" id="6510623">]</span><span class="op" id="6510624">,</span>&nbsp;<span class="ident" id="6510626">err</span>&nbsp;<span class="op" id="6510630">=</span>&nbsp;<span class="ident" id="6510632">ListenMulticastUDP</span><span class="op" id="6510650">(</span><span class="ident" id="6510651">tt</span><span class="op" id="6510653">.</span><span class="ident" id="6510654">net</span><span class="op" id="6510657">,</span>&nbsp;<span class="ident" id="6510659">ifi</span><span class="op" id="6510662">,</span>&nbsp;<span class="ident" id="6510664">tt</span><span class="op" id="6510666">.</span><span class="ident" id="6510667">gaddr</span><span class="op" id="6510672">)</span><span class="op" id="6510673">;</span>&nbsp;<span class="ident" id="6510675">err</span>&nbsp;<span class="op" id="6510679">!=</span>&nbsp;<span class="builtintype" id="6510682">nil</span>&nbsp;<span class="op" id="6510686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510692">closer</span><span class="op" id="6510698">(</span><span class="ident" id="6510699">cs</span><span class="op" id="6510701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510707">t</span><span class="op" id="6510708">.</span><span class="ident" id="6510709">Fatalf</span><span class="op" id="6510715">(</span><span class="string" id="6510716">&#34;Second&nbsp;ListenMulticastUDP&nbsp;on&nbsp;%v&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6510760">,</span>&nbsp;<span class="ident" id="6510762">ifi</span><span class="op" id="6510765">,</span>&nbsp;<span class="ident" id="6510767">err</span><span class="op" id="6510770">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510780">if</span>&nbsp;<span class="ident" id="6510783">err</span>&nbsp;<span class="op" id="6510787">:=</span>&nbsp;<span class="ident" id="6510790">checkMulticastListener</span><span class="op" id="6510812">(</span><span class="ident" id="6510813">cs</span><span class="op" id="6510815">[</span><span class="num" id="6510816">1</span><span class="op" id="6510817">]</span><span class="op" id="6510818">,</span>&nbsp;<span class="ident" id="6510820">tt</span><span class="op" id="6510822">.</span><span class="ident" id="6510823">gaddr</span><span class="op" id="6510828">.</span><span class="ident" id="6510829">IP</span><span class="op" id="6510831">)</span><span class="op" id="6510832">;</span>&nbsp;<span class="ident" id="6510834">err</span>&nbsp;<span class="op" id="6510838">!=</span>&nbsp;<span class="builtintype" id="6510841">nil</span>&nbsp;<span class="op" id="6510845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510851">closer</span><span class="op" id="6510857">(</span><span class="ident" id="6510858">cs</span><span class="op" id="6510860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510866">t</span><span class="op" id="6510867">.</span><span class="ident" id="6510868">Fatal</span><span class="op" id="6510873">(</span><span class="ident" id="6510874">err</span><span class="op" id="6510877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510882">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6510887">closer</span><span class="op" id="6510893">(</span><span class="ident" id="6510894">cs</span><span class="op" id="6510896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6510903">}</span><br>
<span class="lineno"></span><span class="op" id="6510905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="keyword" id="6510908">func</span>&nbsp;<span class="ident" id="6510913">checkMulticastListener</span><span class="op" id="6510935">(</span><span class="ident" id="6510936">c</span>&nbsp;<span class="op" id="6510938">*</span><span class="ident" id="6510939">UDPConn</span><span class="op" id="6510946">,</span>&nbsp;<span class="ident" id="6510948">ip</span>&nbsp;<span class="ident" id="6510951">IP</span><span class="op" id="6510953">)</span>&nbsp;<span class="builtintype" id="6510955">error</span>&nbsp;<span class="op" id="6510961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6510964">if</span>&nbsp;<span class="ident" id="6510967">ok</span><span class="op" id="6510969">,</span>&nbsp;<span class="ident" id="6510971">err</span>&nbsp;<span class="op" id="6510975">:=</span>&nbsp;<span class="ident" id="6510978">multicastRIBContains</span><span class="op" id="6510998">(</span><span class="ident" id="6510999">ip</span><span class="op" id="6511001">)</span><span class="op" id="6511002">;</span>&nbsp;<span class="ident" id="6511004">err</span>&nbsp;<span class="op" id="6511008">!=</span>&nbsp;<span class="builtintype" id="6511011">nil</span>&nbsp;<span class="op" id="6511015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511019">return</span>&nbsp;<span class="ident" id="6511026">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511031">}</span>&nbsp;<span class="keyword" id="6511033">else</span>&nbsp;<span class="keyword" id="6511038">if</span>&nbsp;<span class="op" id="6511041">!</span><span class="ident" id="6511042">ok</span>&nbsp;<span class="op" id="6511045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511049">return</span>&nbsp;<span class="ident" id="6511056">fmt</span><span class="op" id="6511059">.</span><span class="ident" id="6511060">Errorf</span><span class="op" id="6511066">(</span><span class="string" id="6511067">&#34;%q&nbsp;not&nbsp;found&nbsp;in&nbsp;multicast&nbsp;RIB&#34;</span><span class="op" id="6511098">,</span>&nbsp;<span class="ident" id="6511100">ip</span><span class="op" id="6511102">.</span><span class="ident" id="6511103">String</span><span class="op" id="6511109">(</span><span class="op" id="6511110">)</span><span class="op" id="6511111">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6511117">la</span>&nbsp;<span class="op" id="6511120">:=</span>&nbsp;<span class="ident" id="6511123">c</span><span class="op" id="6511124">.</span><span class="ident" id="6511125">LocalAddr</span><span class="op" id="6511134">(</span><span class="op" id="6511135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511138">if</span>&nbsp;<span class="ident" id="6511141">la</span><span class="op" id="6511143">,</span>&nbsp;<span class="ident" id="6511145">ok</span>&nbsp;<span class="op" id="6511148">:=</span>&nbsp;<span class="ident" id="6511151">la</span><span class="op" id="6511153">.</span><span class="op" id="6511154">(</span><span class="op" id="6511155">*</span><span class="ident" id="6511156">UDPAddr</span><span class="op" id="6511163">)</span><span class="op" id="6511164">;</span>&nbsp;<span class="op" id="6511166">!</span><span class="ident" id="6511167">ok</span>&nbsp;<span class="op" id="6511170">||</span>&nbsp;<span class="ident" id="6511173">la</span><span class="op" id="6511175">.</span><span class="ident" id="6511176">Port</span>&nbsp;<span class="op" id="6511181">==</span>&nbsp;<span class="num" id="6511184">0</span>&nbsp;<span class="op" id="6511186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511190">return</span>&nbsp;<span class="ident" id="6511197">fmt</span><span class="op" id="6511200">.</span><span class="ident" id="6511201">Errorf</span><span class="op" id="6511207">(</span><span class="string" id="6511208">&#34;got&nbsp;%v;&nbsp;expected&nbsp;a&nbsp;proper&nbsp;address&nbsp;with&nbsp;non-zero&nbsp;port&nbsp;number&#34;</span><span class="op" id="6511269">,</span>&nbsp;<span class="ident" id="6511271">la</span><span class="op" id="6511273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511276">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511279">return</span>&nbsp;<span class="builtintype" id="6511286">nil</span><br>
<span class="lineno"></span><span class="op" id="6511290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511293">func</span>&nbsp;<span class="ident" id="6511298">multicastRIBContains</span><span class="op" id="6511318">(</span><span class="ident" id="6511319">ip</span>&nbsp;<span class="ident" id="6511322">IP</span><span class="op" id="6511324">)</span>&nbsp;<span class="op" id="6511326">(</span><span class="builtintype" id="6511327">bool</span><span class="op" id="6511331">,</span>&nbsp;<span class="builtintype" id="6511333">error</span><span class="op" id="6511338">)</span>&nbsp;<span class="op" id="6511340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511343">switch</span>&nbsp;<span class="ident" id="6511350">runtime</span><span class="op" id="6511357">.</span><span class="ident" id="6511358">GOOS</span>&nbsp;<span class="op" id="6511363">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511366">case</span>&nbsp;<span class="string" id="6511371">&#34;dragonfly&#34;</span><span class="op" id="6511382">,</span>&nbsp;<span class="string" id="6511384">&#34;netbsd&#34;</span><span class="op" id="6511392">,</span>&nbsp;<span class="string" id="6511394">&#34;openbsd&#34;</span><span class="op" id="6511403">,</span>&nbsp;<span class="string" id="6511405">&#34;plan9&#34;</span><span class="op" id="6511412">,</span>&nbsp;<span class="string" id="6511414">&#34;solaris&#34;</span><span class="op" id="6511423">,</span>&nbsp;<span class="string" id="6511425">&#34;windows&#34;</span><span class="op" id="6511434">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511438">return</span>&nbsp;<span class="builtintype" id="6511445">true</span><span class="op" id="6511449">,</span>&nbsp;<span class="builtintype" id="6511451">nil</span>&nbsp;<span class="comment" id="6511455">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511479">case</span>&nbsp;<span class="string" id="6511484">&#34;linux&#34;</span><span class="op" id="6511491">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511495">if</span>&nbsp;<span class="ident" id="6511498">runtime</span><span class="op" id="6511505">.</span><span class="ident" id="6511506">GOARCH</span>&nbsp;<span class="op" id="6511513">==</span>&nbsp;<span class="string" id="6511516">&#34;arm&#34;</span>&nbsp;<span class="op" id="6511522">||</span>&nbsp;<span class="ident" id="6511525">runtime</span><span class="op" id="6511532">.</span><span class="ident" id="6511533">GOARCH</span>&nbsp;<span class="op" id="6511540">==</span>&nbsp;<span class="string" id="6511543">&#34;alpha&#34;</span>&nbsp;<span class="op" id="6511551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511556">return</span>&nbsp;<span class="builtintype" id="6511563">true</span><span class="op" id="6511567">,</span>&nbsp;<span class="builtintype" id="6511569">nil</span>&nbsp;<span class="comment" id="6511573">//&nbsp;not&nbsp;implemented&nbsp;yet</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6511604">ift</span><span class="op" id="6511607">,</span>&nbsp;<span class="ident" id="6511609">err</span>&nbsp;<span class="op" id="6511613">:=</span>&nbsp;<span class="ident" id="6511616">Interfaces</span><span class="op" id="6511626">(</span><span class="op" id="6511627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511630">if</span>&nbsp;<span class="ident" id="6511633">err</span>&nbsp;<span class="op" id="6511637">!=</span>&nbsp;<span class="builtintype" id="6511640">nil</span>&nbsp;<span class="op" id="6511644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511648">return</span>&nbsp;<span class="builtintype" id="6511655">false</span><span class="op" id="6511660">,</span>&nbsp;<span class="ident" id="6511662">err</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511670">for</span>&nbsp;<span class="ident" id="6511674">_</span><span class="op" id="6511675">,</span>&nbsp;<span class="ident" id="6511677">ifi</span>&nbsp;<span class="op" id="6511681">:=</span>&nbsp;<span class="keyword" id="6511684">range</span>&nbsp;<span class="ident" id="6511690">ift</span>&nbsp;<span class="op" id="6511694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6511698">ifmat</span><span class="op" id="6511703">,</span>&nbsp;<span class="ident" id="6511705">err</span>&nbsp;<span class="op" id="6511709">:=</span>&nbsp;<span class="ident" id="6511712">ifi</span><span class="op" id="6511715">.</span><span class="ident" id="6511716">MulticastAddrs</span><span class="op" id="6511730">(</span><span class="op" id="6511731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511735">if</span>&nbsp;<span class="ident" id="6511738">err</span>&nbsp;<span class="op" id="6511742">!=</span>&nbsp;<span class="builtintype" id="6511745">nil</span>&nbsp;<span class="op" id="6511749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511754">return</span>&nbsp;<span class="builtintype" id="6511761">false</span><span class="op" id="6511766">,</span>&nbsp;<span class="ident" id="6511768">err</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511778">for</span>&nbsp;<span class="ident" id="6511782">_</span><span class="op" id="6511783">,</span>&nbsp;<span class="ident" id="6511785">ifma</span>&nbsp;<span class="op" id="6511790">:=</span>&nbsp;<span class="keyword" id="6511793">range</span>&nbsp;<span class="ident" id="6511799">ifmat</span>&nbsp;<span class="op" id="6511805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511810">if</span>&nbsp;<span class="ident" id="6511813">ifma</span><span class="op" id="6511817">.</span><span class="op" id="6511818">(</span><span class="op" id="6511819">*</span><span class="ident" id="6511820">IPAddr</span><span class="op" id="6511826">)</span><span class="op" id="6511827">.</span><span class="ident" id="6511828">IP</span><span class="op" id="6511830">.</span><span class="ident" id="6511831">Equal</span><span class="op" id="6511836">(</span><span class="ident" id="6511837">ip</span><span class="op" id="6511839">)</span>&nbsp;<span class="op" id="6511841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511847">return</span>&nbsp;<span class="builtintype" id="6511854">true</span><span class="op" id="6511858">,</span>&nbsp;<span class="builtintype" id="6511860">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511867">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6511874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6511877">return</span>&nbsp;<span class="builtintype" id="6511884">false</span><span class="op" id="6511889">,</span>&nbsp;<span class="builtintype" id="6511891">nil</span><br>
<span class="lineno"></span><span class="op" id="6511895">}</span>
</div>
</body>
</html>
