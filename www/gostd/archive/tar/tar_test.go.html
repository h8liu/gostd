<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7972027">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7972082">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7972136">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7972187">package</span>&nbsp;<span class="ident" id="7972195">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7972200">import</span>&nbsp;<span class="op" id="7972207">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972210">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972219">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972232">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972238">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972246">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972257">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972268">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7972279">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7972286">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7972289">func</span>&nbsp;<span class="ident" id="7972294">TestFileInfoHeader</span><span class="op" id="7972312">(</span><span class="ident" id="7972313">t</span>&nbsp;<span class="op" id="7972315">*</span><span class="ident" id="7972316">testing</span><span class="op" id="7972323">.</span><span class="ident" id="7972324">T</span><span class="op" id="7972325">)</span>&nbsp;<span class="op" id="7972327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972330">fi</span><span class="op" id="7972332">,</span>&nbsp;<span class="ident" id="7972334">err</span>&nbsp;<span class="op" id="7972338">:=</span>&nbsp;<span class="ident" id="7972341">os</span><span class="op" id="7972343">.</span><span class="ident" id="7972344">Stat</span><span class="op" id="7972348">(</span><span class="string" id="7972349">&#34;testdata/small.txt&#34;</span><span class="op" id="7972369">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972372">if</span>&nbsp;<span class="ident" id="7972375">err</span>&nbsp;<span class="op" id="7972379">!=</span>&nbsp;<span class="ident" id="7972382">nil</span>&nbsp;<span class="op" id="7972386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972390">t</span><span class="op" id="7972391">.</span><span class="ident" id="7972392">Fatal</span><span class="op" id="7972397">(</span><span class="ident" id="7972398">err</span><span class="op" id="7972401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972407">h</span><span class="op" id="7972408">,</span>&nbsp;<span class="ident" id="7972410">err</span>&nbsp;<span class="op" id="7972414">:=</span>&nbsp;<span class="ident" id="7972417">FileInfoHeader</span><span class="op" id="7972431">(</span><span class="ident" id="7972432">fi</span><span class="op" id="7972434">,</span>&nbsp;<span class="string" id="7972436">&#34;&#34;</span><span class="op" id="7972438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972441">if</span>&nbsp;<span class="ident" id="7972444">err</span>&nbsp;<span class="op" id="7972448">!=</span>&nbsp;<span class="ident" id="7972451">nil</span>&nbsp;<span class="op" id="7972455">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972459">t</span><span class="op" id="7972460">.</span><span class="ident" id="7972461">Fatalf</span><span class="op" id="7972467">(</span><span class="string" id="7972468">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7972488">,</span>&nbsp;<span class="ident" id="7972490">err</span><span class="op" id="7972493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972499">if</span>&nbsp;<span class="ident" id="7972502">g</span><span class="op" id="7972503">,</span>&nbsp;<span class="ident" id="7972505">e</span>&nbsp;<span class="op" id="7972507">:=</span>&nbsp;<span class="ident" id="7972510">h</span><span class="op" id="7972511">.</span><span class="ident" id="7972512">Name</span><span class="op" id="7972516">,</span>&nbsp;<span class="string" id="7972518">&#34;small.txt&#34;</span><span class="op" id="7972529">;</span>&nbsp;<span class="ident" id="7972531">g</span>&nbsp;<span class="op" id="7972533">!=</span>&nbsp;<span class="ident" id="7972536">e</span>&nbsp;<span class="op" id="7972538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972542">t</span><span class="op" id="7972543">.</span><span class="ident" id="7972544">Errorf</span><span class="op" id="7972550">(</span><span class="string" id="7972551">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7972571">,</span>&nbsp;<span class="ident" id="7972573">g</span><span class="op" id="7972574">,</span>&nbsp;<span class="ident" id="7972576">e</span><span class="op" id="7972577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972580">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972583">if</span>&nbsp;<span class="ident" id="7972586">g</span><span class="op" id="7972587">,</span>&nbsp;<span class="ident" id="7972589">e</span>&nbsp;<span class="op" id="7972591">:=</span>&nbsp;<span class="ident" id="7972594">h</span><span class="op" id="7972595">.</span><span class="ident" id="7972596">Mode</span><span class="op" id="7972600">,</span>&nbsp;<span class="ident" id="7972602">int64</span><span class="op" id="7972607">(</span><span class="ident" id="7972608">fi</span><span class="op" id="7972610">.</span><span class="ident" id="7972611">Mode</span><span class="op" id="7972615">(</span><span class="op" id="7972616">)</span><span class="op" id="7972617">.</span><span class="ident" id="7972618">Perm</span><span class="op" id="7972622">(</span><span class="op" id="7972623">)</span><span class="op" id="7972624">)</span><span class="op" id="7972625">|</span><span class="ident" id="7972626">c_ISREG</span><span class="op" id="7972633">;</span>&nbsp;<span class="ident" id="7972635">g</span>&nbsp;<span class="op" id="7972637">!=</span>&nbsp;<span class="ident" id="7972640">e</span>&nbsp;<span class="op" id="7972642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972646">t</span><span class="op" id="7972647">.</span><span class="ident" id="7972648">Errorf</span><span class="op" id="7972654">(</span><span class="string" id="7972655">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7972677">,</span>&nbsp;<span class="ident" id="7972679">g</span><span class="op" id="7972680">,</span>&nbsp;<span class="ident" id="7972682">e</span><span class="op" id="7972683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972689">if</span>&nbsp;<span class="ident" id="7972692">g</span><span class="op" id="7972693">,</span>&nbsp;<span class="ident" id="7972695">e</span>&nbsp;<span class="op" id="7972697">:=</span>&nbsp;<span class="ident" id="7972700">h</span><span class="op" id="7972701">.</span><span class="ident" id="7972702">Size</span><span class="op" id="7972706">,</span>&nbsp;<span class="ident" id="7972708">int64</span><span class="op" id="7972713">(</span><span class="num" id="7972714">5</span><span class="op" id="7972715">)</span><span class="op" id="7972716">;</span>&nbsp;<span class="ident" id="7972718">g</span>&nbsp;<span class="op" id="7972720">!=</span>&nbsp;<span class="ident" id="7972723">e</span>&nbsp;<span class="op" id="7972725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972729">t</span><span class="op" id="7972730">.</span><span class="ident" id="7972731">Errorf</span><span class="op" id="7972737">(</span><span class="string" id="7972738">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7972758">,</span>&nbsp;<span class="ident" id="7972760">g</span><span class="op" id="7972761">,</span>&nbsp;<span class="ident" id="7972763">e</span><span class="op" id="7972764">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972770">if</span>&nbsp;<span class="ident" id="7972773">g</span><span class="op" id="7972774">,</span>&nbsp;<span class="ident" id="7972776">e</span>&nbsp;<span class="op" id="7972778">:=</span>&nbsp;<span class="ident" id="7972781">h</span><span class="op" id="7972782">.</span><span class="ident" id="7972783">ModTime</span><span class="op" id="7972790">,</span>&nbsp;<span class="ident" id="7972792">fi</span><span class="op" id="7972794">.</span><span class="ident" id="7972795">ModTime</span><span class="op" id="7972802">(</span><span class="op" id="7972803">)</span><span class="op" id="7972804">;</span>&nbsp;<span class="op" id="7972806">!</span><span class="ident" id="7972807">g</span><span class="op" id="7972808">.</span><span class="ident" id="7972809">Equal</span><span class="op" id="7972814">(</span><span class="ident" id="7972815">e</span><span class="op" id="7972816">)</span>&nbsp;<span class="op" id="7972818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972822">t</span><span class="op" id="7972823">.</span><span class="ident" id="7972824">Errorf</span><span class="op" id="7972830">(</span><span class="string" id="7972831">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7972854">,</span>&nbsp;<span class="ident" id="7972856">g</span><span class="op" id="7972857">,</span>&nbsp;<span class="ident" id="7972859">e</span><span class="op" id="7972860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7972863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7972866">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7972924">if</span>&nbsp;<span class="ident" id="7972927">_</span><span class="op" id="7972928">,</span>&nbsp;<span class="ident" id="7972930">err</span>&nbsp;<span class="op" id="7972934">:=</span>&nbsp;<span class="ident" id="7972937">FileInfoHeader</span><span class="op" id="7972951">(</span><span class="ident" id="7972952">nil</span><span class="op" id="7972955">,</span>&nbsp;<span class="string" id="7972957">&#34;&#34;</span><span class="op" id="7972959">)</span><span class="op" id="7972960">;</span>&nbsp;<span class="ident" id="7972962">err</span>&nbsp;<span class="op" id="7972966">==</span>&nbsp;<span class="ident" id="7972969">nil</span>&nbsp;<span class="op" id="7972973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7972977">t</span><span class="op" id="7972978">.</span><span class="ident" id="7972979">Fatalf</span><span class="op" id="7972985">(</span><span class="string" id="7972986">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="7973037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973040">}</span><br>
<span class="lineno"></span><span class="op" id="7973042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7973045">func</span>&nbsp;<span class="ident" id="7973050">TestFileInfoHeaderDir</span><span class="op" id="7973071">(</span><span class="ident" id="7973072">t</span>&nbsp;<span class="op" id="7973074">*</span><span class="ident" id="7973075">testing</span><span class="op" id="7973082">.</span><span class="ident" id="7973083">T</span><span class="op" id="7973084">)</span>&nbsp;<span class="op" id="7973086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973089">fi</span><span class="op" id="7973091">,</span>&nbsp;<span class="ident" id="7973093">err</span>&nbsp;<span class="op" id="7973097">:=</span>&nbsp;<span class="ident" id="7973100">os</span><span class="op" id="7973102">.</span><span class="ident" id="7973103">Stat</span><span class="op" id="7973107">(</span><span class="string" id="7973108">&#34;testdata&#34;</span><span class="op" id="7973118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973121">if</span>&nbsp;<span class="ident" id="7973124">err</span>&nbsp;<span class="op" id="7973128">!=</span>&nbsp;<span class="ident" id="7973131">nil</span>&nbsp;<span class="op" id="7973135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973139">t</span><span class="op" id="7973140">.</span><span class="ident" id="7973141">Fatal</span><span class="op" id="7973146">(</span><span class="ident" id="7973147">err</span><span class="op" id="7973150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973153">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973156">h</span><span class="op" id="7973157">,</span>&nbsp;<span class="ident" id="7973159">err</span>&nbsp;<span class="op" id="7973163">:=</span>&nbsp;<span class="ident" id="7973166">FileInfoHeader</span><span class="op" id="7973180">(</span><span class="ident" id="7973181">fi</span><span class="op" id="7973183">,</span>&nbsp;<span class="string" id="7973185">&#34;&#34;</span><span class="op" id="7973187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973190">if</span>&nbsp;<span class="ident" id="7973193">err</span>&nbsp;<span class="op" id="7973197">!=</span>&nbsp;<span class="ident" id="7973200">nil</span>&nbsp;<span class="op" id="7973204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973208">t</span><span class="op" id="7973209">.</span><span class="ident" id="7973210">Fatalf</span><span class="op" id="7973216">(</span><span class="string" id="7973217">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7973237">,</span>&nbsp;<span class="ident" id="7973239">err</span><span class="op" id="7973242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973248">if</span>&nbsp;<span class="ident" id="7973251">g</span><span class="op" id="7973252">,</span>&nbsp;<span class="ident" id="7973254">e</span>&nbsp;<span class="op" id="7973256">:=</span>&nbsp;<span class="ident" id="7973259">h</span><span class="op" id="7973260">.</span><span class="ident" id="7973261">Name</span><span class="op" id="7973265">,</span>&nbsp;<span class="string" id="7973267">&#34;testdata/&#34;</span><span class="op" id="7973278">;</span>&nbsp;<span class="ident" id="7973280">g</span>&nbsp;<span class="op" id="7973282">!=</span>&nbsp;<span class="ident" id="7973285">e</span>&nbsp;<span class="op" id="7973287">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973291">t</span><span class="op" id="7973292">.</span><span class="ident" id="7973293">Errorf</span><span class="op" id="7973299">(</span><span class="string" id="7973300">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7973320">,</span>&nbsp;<span class="ident" id="7973322">g</span><span class="op" id="7973323">,</span>&nbsp;<span class="ident" id="7973325">e</span><span class="op" id="7973326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973329">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7973332">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973379">if</span>&nbsp;<span class="ident" id="7973382">g</span><span class="op" id="7973383">,</span>&nbsp;<span class="ident" id="7973385">e</span>&nbsp;<span class="op" id="7973387">:=</span>&nbsp;<span class="ident" id="7973390">h</span><span class="op" id="7973391">.</span><span class="ident" id="7973392">Mode</span><span class="op" id="7973396">&amp;^</span><span class="ident" id="7973398">c_ISGID</span><span class="op" id="7973405">,</span>&nbsp;<span class="ident" id="7973407">int64</span><span class="op" id="7973412">(</span><span class="ident" id="7973413">fi</span><span class="op" id="7973415">.</span><span class="ident" id="7973416">Mode</span><span class="op" id="7973420">(</span><span class="op" id="7973421">)</span><span class="op" id="7973422">.</span><span class="ident" id="7973423">Perm</span><span class="op" id="7973427">(</span><span class="op" id="7973428">)</span><span class="op" id="7973429">)</span><span class="op" id="7973430">|</span><span class="ident" id="7973431">c_ISDIR</span><span class="op" id="7973438">;</span>&nbsp;<span class="ident" id="7973440">g</span>&nbsp;<span class="op" id="7973442">!=</span>&nbsp;<span class="ident" id="7973445">e</span>&nbsp;<span class="op" id="7973447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973451">t</span><span class="op" id="7973452">.</span><span class="ident" id="7973453">Errorf</span><span class="op" id="7973459">(</span><span class="string" id="7973460">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7973482">,</span>&nbsp;<span class="ident" id="7973484">g</span><span class="op" id="7973485">,</span>&nbsp;<span class="ident" id="7973487">e</span><span class="op" id="7973488">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973494">if</span>&nbsp;<span class="ident" id="7973497">g</span><span class="op" id="7973498">,</span>&nbsp;<span class="ident" id="7973500">e</span>&nbsp;<span class="op" id="7973502">:=</span>&nbsp;<span class="ident" id="7973505">h</span><span class="op" id="7973506">.</span><span class="ident" id="7973507">Size</span><span class="op" id="7973511">,</span>&nbsp;<span class="ident" id="7973513">int64</span><span class="op" id="7973518">(</span><span class="num" id="7973519">0</span><span class="op" id="7973520">)</span><span class="op" id="7973521">;</span>&nbsp;<span class="ident" id="7973523">g</span>&nbsp;<span class="op" id="7973525">!=</span>&nbsp;<span class="ident" id="7973528">e</span>&nbsp;<span class="op" id="7973530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973534">t</span><span class="op" id="7973535">.</span><span class="ident" id="7973536">Errorf</span><span class="op" id="7973542">(</span><span class="string" id="7973543">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7973563">,</span>&nbsp;<span class="ident" id="7973565">g</span><span class="op" id="7973566">,</span>&nbsp;<span class="ident" id="7973568">e</span><span class="op" id="7973569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973575">if</span>&nbsp;<span class="ident" id="7973578">g</span><span class="op" id="7973579">,</span>&nbsp;<span class="ident" id="7973581">e</span>&nbsp;<span class="op" id="7973583">:=</span>&nbsp;<span class="ident" id="7973586">h</span><span class="op" id="7973587">.</span><span class="ident" id="7973588">ModTime</span><span class="op" id="7973595">,</span>&nbsp;<span class="ident" id="7973597">fi</span><span class="op" id="7973599">.</span><span class="ident" id="7973600">ModTime</span><span class="op" id="7973607">(</span><span class="op" id="7973608">)</span><span class="op" id="7973609">;</span>&nbsp;<span class="op" id="7973611">!</span><span class="ident" id="7973612">g</span><span class="op" id="7973613">.</span><span class="ident" id="7973614">Equal</span><span class="op" id="7973619">(</span><span class="ident" id="7973620">e</span><span class="op" id="7973621">)</span>&nbsp;<span class="op" id="7973623">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973627">t</span><span class="op" id="7973628">.</span><span class="ident" id="7973629">Errorf</span><span class="op" id="7973635">(</span><span class="string" id="7973636">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7973659">,</span>&nbsp;<span class="ident" id="7973661">g</span><span class="op" id="7973662">,</span>&nbsp;<span class="ident" id="7973664">e</span><span class="op" id="7973665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973668">}</span><br>
<span class="lineno"></span><span class="op" id="7973670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7973673">func</span>&nbsp;<span class="ident" id="7973678">TestFileInfoHeaderSymlink</span><span class="op" id="7973703">(</span><span class="ident" id="7973704">t</span>&nbsp;<span class="op" id="7973706">*</span><span class="ident" id="7973707">testing</span><span class="op" id="7973714">.</span><span class="ident" id="7973715">T</span><span class="op" id="7973716">)</span>&nbsp;<span class="op" id="7973718">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973721">h</span><span class="op" id="7973722">,</span>&nbsp;<span class="ident" id="7973724">err</span>&nbsp;<span class="op" id="7973728">:=</span>&nbsp;<span class="ident" id="7973731">FileInfoHeader</span><span class="op" id="7973745">(</span><span class="ident" id="7973746">symlink</span><span class="op" id="7973753">{</span><span class="op" id="7973754">}</span><span class="op" id="7973755">,</span>&nbsp;<span class="string" id="7973757">&#34;some-target&#34;</span><span class="op" id="7973770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973773">if</span>&nbsp;<span class="ident" id="7973776">err</span>&nbsp;<span class="op" id="7973780">!=</span>&nbsp;<span class="ident" id="7973783">nil</span>&nbsp;<span class="op" id="7973787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973791">t</span><span class="op" id="7973792">.</span><span class="ident" id="7973793">Fatal</span><span class="op" id="7973798">(</span><span class="ident" id="7973799">err</span><span class="op" id="7973802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973808">if</span>&nbsp;<span class="ident" id="7973811">g</span><span class="op" id="7973812">,</span>&nbsp;<span class="ident" id="7973814">e</span>&nbsp;<span class="op" id="7973816">:=</span>&nbsp;<span class="ident" id="7973819">h</span><span class="op" id="7973820">.</span><span class="ident" id="7973821">Name</span><span class="op" id="7973825">,</span>&nbsp;<span class="string" id="7973827">&#34;some-symlink&#34;</span><span class="op" id="7973841">;</span>&nbsp;<span class="ident" id="7973843">g</span>&nbsp;<span class="op" id="7973845">!=</span>&nbsp;<span class="ident" id="7973848">e</span>&nbsp;<span class="op" id="7973850">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973854">t</span><span class="op" id="7973855">.</span><span class="ident" id="7973856">Errorf</span><span class="op" id="7973862">(</span><span class="string" id="7973863">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7973883">,</span>&nbsp;<span class="ident" id="7973885">g</span><span class="op" id="7973886">,</span>&nbsp;<span class="ident" id="7973888">e</span><span class="op" id="7973889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7973895">if</span>&nbsp;<span class="ident" id="7973898">g</span><span class="op" id="7973899">,</span>&nbsp;<span class="ident" id="7973901">e</span>&nbsp;<span class="op" id="7973903">:=</span>&nbsp;<span class="ident" id="7973906">h</span><span class="op" id="7973907">.</span><span class="ident" id="7973908">Linkname</span><span class="op" id="7973916">,</span>&nbsp;<span class="string" id="7973918">&#34;some-target&#34;</span><span class="op" id="7973931">;</span>&nbsp;<span class="ident" id="7973933">g</span>&nbsp;<span class="op" id="7973935">!=</span>&nbsp;<span class="ident" id="7973938">e</span>&nbsp;<span class="op" id="7973940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7973944">t</span><span class="op" id="7973945">.</span><span class="ident" id="7973946">Errorf</span><span class="op" id="7973952">(</span><span class="string" id="7973953">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7973977">,</span>&nbsp;<span class="ident" id="7973979">g</span><span class="op" id="7973980">,</span>&nbsp;<span class="ident" id="7973982">e</span><span class="op" id="7973983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7973986">}</span><br>
<span class="lineno">80</span><span class="op" id="7973988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7973991">type</span>&nbsp;<span class="ident" id="7973996">symlink</span>&nbsp;<span class="keyword" id="7974004">struct</span><span class="op" id="7974010">{</span><span class="op" id="7974011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7974014">func</span>&nbsp;<span class="op" id="7974019">(</span><span class="ident" id="7974020">symlink</span><span class="op" id="7974027">)</span>&nbsp;<span class="ident" id="7974029">Name</span><span class="op" id="7974033">(</span><span class="op" id="7974034">)</span>&nbsp;<span class="builtintype" id="7974036">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7974049">{</span>&nbsp;<span class="keyword" id="7974051">return</span>&nbsp;<span class="string" id="7974058">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="7974073">}</span><br>
<span class="lineno">85</span><span class="keyword" id="7974075">func</span>&nbsp;<span class="op" id="7974080">(</span><span class="ident" id="7974081">symlink</span><span class="op" id="7974088">)</span>&nbsp;<span class="ident" id="7974090">Size</span><span class="op" id="7974094">(</span><span class="op" id="7974095">)</span>&nbsp;<span class="ident" id="7974097">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7974110">{</span>&nbsp;<span class="keyword" id="7974112">return</span>&nbsp;<span class="num" id="7974119">0</span>&nbsp;<span class="op" id="7974121">}</span><br>
<span class="lineno"></span><span class="keyword" id="7974123">func</span>&nbsp;<span class="op" id="7974128">(</span><span class="ident" id="7974129">symlink</span><span class="op" id="7974136">)</span>&nbsp;<span class="ident" id="7974138">Mode</span><span class="op" id="7974142">(</span><span class="op" id="7974143">)</span>&nbsp;<span class="ident" id="7974145">os</span><span class="op" id="7974147">.</span><span class="ident" id="7974148">FileMode</span>&nbsp;&nbsp;<span class="op" id="7974158">{</span>&nbsp;<span class="keyword" id="7974160">return</span>&nbsp;<span class="ident" id="7974167">os</span><span class="op" id="7974169">.</span><span class="ident" id="7974170">ModeSymlink</span>&nbsp;<span class="op" id="7974182">}</span><br>
<span class="lineno"></span><span class="keyword" id="7974184">func</span>&nbsp;<span class="op" id="7974189">(</span><span class="ident" id="7974190">symlink</span><span class="op" id="7974197">)</span>&nbsp;<span class="ident" id="7974199">ModTime</span><span class="op" id="7974206">(</span><span class="op" id="7974207">)</span>&nbsp;<span class="ident" id="7974209">time</span><span class="op" id="7974213">.</span><span class="ident" id="7974214">Time</span>&nbsp;<span class="op" id="7974219">{</span>&nbsp;<span class="keyword" id="7974221">return</span>&nbsp;<span class="ident" id="7974228">time</span><span class="op" id="7974232">.</span><span class="ident" id="7974233">Time</span><span class="op" id="7974237">{</span><span class="op" id="7974238">}</span>&nbsp;<span class="op" id="7974240">}</span><br>
<span class="lineno"></span><span class="keyword" id="7974242">func</span>&nbsp;<span class="op" id="7974247">(</span><span class="ident" id="7974248">symlink</span><span class="op" id="7974255">)</span>&nbsp;<span class="ident" id="7974257">IsDir</span><span class="op" id="7974262">(</span><span class="op" id="7974263">)</span>&nbsp;<span class="builtintype" id="7974265">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7974277">{</span>&nbsp;<span class="keyword" id="7974279">return</span>&nbsp;<span class="builtintype" id="7974286">false</span>&nbsp;<span class="op" id="7974292">}</span><br>
<span class="lineno"></span><span class="keyword" id="7974294">func</span>&nbsp;<span class="op" id="7974299">(</span><span class="ident" id="7974300">symlink</span><span class="op" id="7974307">)</span>&nbsp;<span class="ident" id="7974309">Sys</span><span class="op" id="7974312">(</span><span class="op" id="7974313">)</span>&nbsp;<span class="keyword" id="7974315">interface</span><span class="op" id="7974324">{</span><span class="op" id="7974325">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7974329">{</span>&nbsp;<span class="keyword" id="7974331">return</span>&nbsp;<span class="ident" id="7974338">nil</span>&nbsp;<span class="op" id="7974342">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="7974345">func</span>&nbsp;<span class="ident" id="7974350">TestRoundTrip</span><span class="op" id="7974363">(</span><span class="ident" id="7974364">t</span>&nbsp;<span class="op" id="7974366">*</span><span class="ident" id="7974367">testing</span><span class="op" id="7974374">.</span><span class="ident" id="7974375">T</span><span class="op" id="7974376">)</span>&nbsp;<span class="op" id="7974378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974381">data</span>&nbsp;<span class="op" id="7974386">:=</span>&nbsp;<span class="op" id="7974389">[</span><span class="op" id="7974390">]</span><span class="builtintype" id="7974391">byte</span><span class="op" id="7974395">(</span><span class="string" id="7974396">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="7974416">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974420">var</span>&nbsp;<span class="ident" id="7974424">b</span>&nbsp;<span class="ident" id="7974426">bytes</span><span class="op" id="7974431">.</span><span class="ident" id="7974432">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974440">tw</span>&nbsp;<span class="op" id="7974443">:=</span>&nbsp;<span class="ident" id="7974446">NewWriter</span><span class="op" id="7974455">(</span><span class="op" id="7974456">&amp;</span><span class="ident" id="7974457">b</span><span class="op" id="7974458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974461">hdr</span>&nbsp;<span class="op" id="7974465">:=</span>&nbsp;<span class="op" id="7974468">&amp;</span><span class="ident" id="7974469">Header</span><span class="op" id="7974475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974479">Name</span><span class="op" id="7974483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7974488">&#34;file.txt&#34;</span><span class="op" id="7974498">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974502">Uid</span><span class="op" id="7974505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7974511">1</span>&nbsp;<span class="op" id="7974513">&lt;&lt;</span>&nbsp;<span class="num" id="7974516">21</span><span class="op" id="7974518">,</span>&nbsp;<span class="comment" id="7974520">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974552">Size</span><span class="op" id="7974556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7974561">int64</span><span class="op" id="7974566">(</span><span class="builtinfunc" id="7974567">len</span><span class="op" id="7974570">(</span><span class="ident" id="7974571">data</span><span class="op" id="7974575">)</span><span class="op" id="7974576">)</span><span class="op" id="7974577">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974581">ModTime</span><span class="op" id="7974588">:</span>&nbsp;<span class="ident" id="7974590">time</span><span class="op" id="7974594">.</span><span class="ident" id="7974595">Now</span><span class="op" id="7974598">(</span><span class="op" id="7974599">)</span><span class="op" id="7974600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7974606">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974646">hdr</span><span class="op" id="7974649">.</span><span class="ident" id="7974650">ModTime</span>&nbsp;<span class="op" id="7974658">=</span>&nbsp;<span class="ident" id="7974660">hdr</span><span class="op" id="7974663">.</span><span class="ident" id="7974664">ModTime</span><span class="op" id="7974671">.</span><span class="ident" id="7974672">Add</span><span class="op" id="7974675">(</span><span class="op" id="7974676">-</span><span class="ident" id="7974677">time</span><span class="op" id="7974681">.</span><span class="ident" id="7974682">Duration</span><span class="op" id="7974690">(</span><span class="ident" id="7974691">hdr</span><span class="op" id="7974694">.</span><span class="ident" id="7974695">ModTime</span><span class="op" id="7974702">.</span><span class="ident" id="7974703">Nanosecond</span><span class="op" id="7974713">(</span><span class="op" id="7974714">)</span><span class="op" id="7974715">)</span>&nbsp;<span class="op" id="7974717">*</span>&nbsp;<span class="ident" id="7974719">time</span><span class="op" id="7974723">.</span><span class="ident" id="7974724">Nanosecond</span><span class="op" id="7974734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974737">if</span>&nbsp;<span class="ident" id="7974740">err</span>&nbsp;<span class="op" id="7974744">:=</span>&nbsp;<span class="ident" id="7974747">tw</span><span class="op" id="7974749">.</span><span class="ident" id="7974750">WriteHeader</span><span class="op" id="7974761">(</span><span class="ident" id="7974762">hdr</span><span class="op" id="7974765">)</span><span class="op" id="7974766">;</span>&nbsp;<span class="ident" id="7974768">err</span>&nbsp;<span class="op" id="7974772">!=</span>&nbsp;<span class="ident" id="7974775">nil</span>&nbsp;<span class="op" id="7974779">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974783">t</span><span class="op" id="7974784">.</span><span class="ident" id="7974785">Fatalf</span><span class="op" id="7974791">(</span><span class="string" id="7974792">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="7974812">,</span>&nbsp;<span class="ident" id="7974814">err</span><span class="op" id="7974817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974823">if</span>&nbsp;<span class="ident" id="7974826">_</span><span class="op" id="7974827">,</span>&nbsp;<span class="ident" id="7974829">err</span>&nbsp;<span class="op" id="7974833">:=</span>&nbsp;<span class="ident" id="7974836">tw</span><span class="op" id="7974838">.</span><span class="ident" id="7974839">Write</span><span class="op" id="7974844">(</span><span class="ident" id="7974845">data</span><span class="op" id="7974849">)</span><span class="op" id="7974850">;</span>&nbsp;<span class="ident" id="7974852">err</span>&nbsp;<span class="op" id="7974856">!=</span>&nbsp;<span class="ident" id="7974859">nil</span>&nbsp;<span class="op" id="7974863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974867">t</span><span class="op" id="7974868">.</span><span class="ident" id="7974869">Fatalf</span><span class="op" id="7974875">(</span><span class="string" id="7974876">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="7974890">,</span>&nbsp;<span class="ident" id="7974892">err</span><span class="op" id="7974895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974898">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7974901">if</span>&nbsp;<span class="ident" id="7974904">err</span>&nbsp;<span class="op" id="7974908">:=</span>&nbsp;<span class="ident" id="7974911">tw</span><span class="op" id="7974913">.</span><span class="ident" id="7974914">Close</span><span class="op" id="7974919">(</span><span class="op" id="7974920">)</span><span class="op" id="7974921">;</span>&nbsp;<span class="ident" id="7974923">err</span>&nbsp;<span class="op" id="7974927">!=</span>&nbsp;<span class="ident" id="7974930">nil</span>&nbsp;<span class="op" id="7974934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974938">t</span><span class="op" id="7974939">.</span><span class="ident" id="7974940">Fatalf</span><span class="op" id="7974946">(</span><span class="string" id="7974947">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="7974961">,</span>&nbsp;<span class="ident" id="7974963">err</span><span class="op" id="7974966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7974969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7974973">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7974991">tr</span>&nbsp;<span class="op" id="7974994">:=</span>&nbsp;<span class="ident" id="7974997">NewReader</span><span class="op" id="7975006">(</span><span class="op" id="7975007">&amp;</span><span class="ident" id="7975008">b</span><span class="op" id="7975009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975012">rHdr</span><span class="op" id="7975016">,</span>&nbsp;<span class="ident" id="7975018">err</span>&nbsp;<span class="op" id="7975022">:=</span>&nbsp;<span class="ident" id="7975025">tr</span><span class="op" id="7975027">.</span><span class="ident" id="7975028">Next</span><span class="op" id="7975032">(</span><span class="op" id="7975033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975036">if</span>&nbsp;<span class="ident" id="7975039">err</span>&nbsp;<span class="op" id="7975043">!=</span>&nbsp;<span class="ident" id="7975046">nil</span>&nbsp;<span class="op" id="7975050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975054">t</span><span class="op" id="7975055">.</span><span class="ident" id="7975056">Fatalf</span><span class="op" id="7975062">(</span><span class="string" id="7975063">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="7975076">,</span>&nbsp;<span class="ident" id="7975078">err</span><span class="op" id="7975081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975084">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975087">if</span>&nbsp;<span class="op" id="7975090">!</span><span class="ident" id="7975091">reflect</span><span class="op" id="7975098">.</span><span class="ident" id="7975099">DeepEqual</span><span class="op" id="7975108">(</span><span class="ident" id="7975109">rHdr</span><span class="op" id="7975113">,</span>&nbsp;<span class="ident" id="7975115">hdr</span><span class="op" id="7975118">)</span>&nbsp;<span class="op" id="7975120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975124">t</span><span class="op" id="7975125">.</span><span class="ident" id="7975126">Errorf</span><span class="op" id="7975132">(</span><span class="string" id="7975133">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7975171">,</span>&nbsp;<span class="ident" id="7975173">rHdr</span><span class="op" id="7975177">,</span>&nbsp;<span class="ident" id="7975179">hdr</span><span class="op" id="7975182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975188">rData</span><span class="op" id="7975193">,</span>&nbsp;<span class="ident" id="7975195">err</span>&nbsp;<span class="op" id="7975199">:=</span>&nbsp;<span class="ident" id="7975202">ioutil</span><span class="op" id="7975208">.</span><span class="ident" id="7975209">ReadAll</span><span class="op" id="7975216">(</span><span class="ident" id="7975217">tr</span><span class="op" id="7975219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975222">if</span>&nbsp;<span class="ident" id="7975225">err</span>&nbsp;<span class="op" id="7975229">!=</span>&nbsp;<span class="ident" id="7975232">nil</span>&nbsp;<span class="op" id="7975236">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975240">t</span><span class="op" id="7975241">.</span><span class="ident" id="7975242">Fatalf</span><span class="op" id="7975248">(</span><span class="string" id="7975249">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="7975259">,</span>&nbsp;<span class="ident" id="7975261">err</span><span class="op" id="7975264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7975270">if</span>&nbsp;<span class="op" id="7975273">!</span><span class="ident" id="7975274">bytes</span><span class="op" id="7975279">.</span><span class="ident" id="7975280">Equal</span><span class="op" id="7975285">(</span><span class="ident" id="7975286">rData</span><span class="op" id="7975291">,</span>&nbsp;<span class="ident" id="7975293">data</span><span class="op" id="7975297">)</span>&nbsp;<span class="op" id="7975299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975303">t</span><span class="op" id="7975304">.</span><span class="ident" id="7975305">Errorf</span><span class="op" id="7975311">(</span><span class="string" id="7975312">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7975346">,</span>&nbsp;<span class="ident" id="7975348">rData</span><span class="op" id="7975353">,</span>&nbsp;<span class="ident" id="7975355">data</span><span class="op" id="7975359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975362">}</span><br>
<span class="lineno">130</span><span class="op" id="7975364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7975367">type</span>&nbsp;<span class="ident" id="7975372">headerRoundTripTest</span>&nbsp;<span class="keyword" id="7975392">struct</span>&nbsp;<span class="op" id="7975399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975402">h</span>&nbsp;&nbsp;<span class="op" id="7975405">*</span><span class="ident" id="7975406">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975414">fm</span>&nbsp;<span class="ident" id="7975417">os</span><span class="op" id="7975419">.</span><span class="ident" id="7975420">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="7975429">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7975432">func</span>&nbsp;<span class="ident" id="7975437">TestHeaderRoundTrip</span><span class="op" id="7975456">(</span><span class="ident" id="7975457">t</span>&nbsp;<span class="op" id="7975459">*</span><span class="ident" id="7975460">testing</span><span class="op" id="7975467">.</span><span class="ident" id="7975468">T</span><span class="op" id="7975469">)</span>&nbsp;<span class="op" id="7975471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975474">golden</span>&nbsp;<span class="op" id="7975481">:=</span>&nbsp;<span class="op" id="7975484">[</span><span class="op" id="7975485">]</span><span class="ident" id="7975486">headerRoundTripTest</span><span class="op" id="7975505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7975509">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975533">h</span><span class="op" id="7975534">:</span>&nbsp;<span class="op" id="7975536">&amp;</span><span class="ident" id="7975537">Header</span><span class="op" id="7975543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975549">Name</span><span class="op" id="7975553">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7975559">&#34;test.txt&#34;</span><span class="op" id="7975569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975575">Mode</span><span class="op" id="7975579">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7975585">0644</span>&nbsp;<span class="op" id="7975590">|</span>&nbsp;<span class="ident" id="7975592">c_ISREG</span><span class="op" id="7975599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975605">Size</span><span class="op" id="7975609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7975615">12</span><span class="op" id="7975617">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975623">ModTime</span><span class="op" id="7975630">:</span>&nbsp;&nbsp;<span class="ident" id="7975633">time</span><span class="op" id="7975637">.</span><span class="ident" id="7975638">Unix</span><span class="op" id="7975642">(</span><span class="num" id="7975643">1360600916</span><span class="op" id="7975653">,</span>&nbsp;<span class="num" id="7975655">0</span><span class="op" id="7975656">)</span><span class="op" id="7975657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975663">Typeflag</span><span class="op" id="7975671">:</span>&nbsp;<span class="ident" id="7975673">TypeReg</span><span class="op" id="7975680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975685">}</span><span class="op" id="7975686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975691">fm</span><span class="op" id="7975693">:</span>&nbsp;<span class="num" id="7975695">0644</span><span class="op" id="7975699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975703">}</span><span class="op" id="7975704">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7975708">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975729">h</span><span class="op" id="7975730">:</span>&nbsp;<span class="op" id="7975732">&amp;</span><span class="ident" id="7975733">Header</span><span class="op" id="7975739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975745">Name</span><span class="op" id="7975749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7975755">&#34;hard.txt&#34;</span><span class="op" id="7975765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975771">Mode</span><span class="op" id="7975775">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7975781">0644</span>&nbsp;<span class="op" id="7975786">|</span>&nbsp;<span class="ident" id="7975788">c_ISLNK</span><span class="op" id="7975795">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975801">Size</span><span class="op" id="7975805">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7975811">0</span><span class="op" id="7975812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975818">ModTime</span><span class="op" id="7975825">:</span>&nbsp;&nbsp;<span class="ident" id="7975828">time</span><span class="op" id="7975832">.</span><span class="ident" id="7975833">Unix</span><span class="op" id="7975837">(</span><span class="num" id="7975838">1360600916</span><span class="op" id="7975848">,</span>&nbsp;<span class="num" id="7975850">0</span><span class="op" id="7975851">)</span><span class="op" id="7975852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975858">Typeflag</span><span class="op" id="7975866">:</span>&nbsp;<span class="ident" id="7975868">TypeLink</span><span class="op" id="7975876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975881">}</span><span class="op" id="7975882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975887">fm</span><span class="op" id="7975889">:</span>&nbsp;<span class="num" id="7975891">0644</span>&nbsp;<span class="op" id="7975896">|</span>&nbsp;<span class="ident" id="7975898">os</span><span class="op" id="7975900">.</span><span class="ident" id="7975901">ModeSymlink</span><span class="op" id="7975912">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975916">}</span><span class="op" id="7975917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7975921">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7975941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975946">h</span><span class="op" id="7975947">:</span>&nbsp;<span class="op" id="7975949">&amp;</span><span class="ident" id="7975950">Header</span><span class="op" id="7975956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975962">Name</span><span class="op" id="7975966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7975972">&#34;link.txt&#34;</span><span class="op" id="7975982">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7975988">Mode</span><span class="op" id="7975992">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7975998">0777</span>&nbsp;<span class="op" id="7976003">|</span>&nbsp;<span class="ident" id="7976005">c_ISLNK</span><span class="op" id="7976012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976018">Size</span><span class="op" id="7976022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976028">0</span><span class="op" id="7976029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976035">ModTime</span><span class="op" id="7976042">:</span>&nbsp;&nbsp;<span class="ident" id="7976045">time</span><span class="op" id="7976049">.</span><span class="ident" id="7976050">Unix</span><span class="op" id="7976054">(</span><span class="num" id="7976055">1360600852</span><span class="op" id="7976065">,</span>&nbsp;<span class="num" id="7976067">0</span><span class="op" id="7976068">)</span><span class="op" id="7976069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976075">Typeflag</span><span class="op" id="7976083">:</span>&nbsp;<span class="ident" id="7976085">TypeSymlink</span><span class="op" id="7976096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976101">}</span><span class="op" id="7976102">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976107">fm</span><span class="op" id="7976109">:</span>&nbsp;<span class="num" id="7976111">0777</span>&nbsp;<span class="op" id="7976116">|</span>&nbsp;<span class="ident" id="7976118">os</span><span class="op" id="7976120">.</span><span class="ident" id="7976121">ModeSymlink</span><span class="op" id="7976132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976136">}</span><span class="op" id="7976137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7976141">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976174">h</span><span class="op" id="7976175">:</span>&nbsp;<span class="op" id="7976177">&amp;</span><span class="ident" id="7976178">Header</span><span class="op" id="7976184">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976190">Name</span><span class="op" id="7976194">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7976200">&#34;dev/null&#34;</span><span class="op" id="7976210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976216">Mode</span><span class="op" id="7976220">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976226">0666</span>&nbsp;<span class="op" id="7976231">|</span>&nbsp;<span class="ident" id="7976233">c_ISCHR</span><span class="op" id="7976240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976246">Size</span><span class="op" id="7976250">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976256">0</span><span class="op" id="7976257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976263">ModTime</span><span class="op" id="7976270">:</span>&nbsp;&nbsp;<span class="ident" id="7976273">time</span><span class="op" id="7976277">.</span><span class="ident" id="7976278">Unix</span><span class="op" id="7976282">(</span><span class="num" id="7976283">1360578951</span><span class="op" id="7976293">,</span>&nbsp;<span class="num" id="7976295">0</span><span class="op" id="7976296">)</span><span class="op" id="7976297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976303">Typeflag</span><span class="op" id="7976311">:</span>&nbsp;<span class="ident" id="7976313">TypeChar</span><span class="op" id="7976321">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976326">}</span><span class="op" id="7976327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976332">fm</span><span class="op" id="7976334">:</span>&nbsp;<span class="num" id="7976336">0666</span>&nbsp;<span class="op" id="7976341">|</span>&nbsp;<span class="ident" id="7976343">os</span><span class="op" id="7976345">.</span><span class="ident" id="7976346">ModeDevice</span>&nbsp;<span class="op" id="7976357">|</span>&nbsp;<span class="ident" id="7976359">os</span><span class="op" id="7976361">.</span><span class="ident" id="7976362">ModeCharDevice</span><span class="op" id="7976376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976380">}</span><span class="op" id="7976381">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7976385">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976409">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976414">h</span><span class="op" id="7976415">:</span>&nbsp;<span class="op" id="7976417">&amp;</span><span class="ident" id="7976418">Header</span><span class="op" id="7976424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976430">Name</span><span class="op" id="7976434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7976440">&#34;dev/sda&#34;</span><span class="op" id="7976449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976455">Mode</span><span class="op" id="7976459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976465">0660</span>&nbsp;<span class="op" id="7976470">|</span>&nbsp;<span class="ident" id="7976472">c_ISBLK</span><span class="op" id="7976479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976485">Size</span><span class="op" id="7976489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976495">0</span><span class="op" id="7976496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976502">ModTime</span><span class="op" id="7976509">:</span>&nbsp;&nbsp;<span class="ident" id="7976512">time</span><span class="op" id="7976516">.</span><span class="ident" id="7976517">Unix</span><span class="op" id="7976521">(</span><span class="num" id="7976522">1360578954</span><span class="op" id="7976532">,</span>&nbsp;<span class="num" id="7976534">0</span><span class="op" id="7976535">)</span><span class="op" id="7976536">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976542">Typeflag</span><span class="op" id="7976550">:</span>&nbsp;<span class="ident" id="7976552">TypeBlock</span><span class="op" id="7976561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976566">}</span><span class="op" id="7976567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976572">fm</span><span class="op" id="7976574">:</span>&nbsp;<span class="num" id="7976576">0660</span>&nbsp;<span class="op" id="7976581">|</span>&nbsp;<span class="ident" id="7976583">os</span><span class="op" id="7976585">.</span><span class="ident" id="7976586">ModeDevice</span><span class="op" id="7976596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976600">}</span><span class="op" id="7976601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7976605">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976626">h</span><span class="op" id="7976627">:</span>&nbsp;<span class="op" id="7976629">&amp;</span><span class="ident" id="7976630">Header</span><span class="op" id="7976636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976642">Name</span><span class="op" id="7976646">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7976652">&#34;dir/&#34;</span><span class="op" id="7976658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976664">Mode</span><span class="op" id="7976668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976674">0755</span>&nbsp;<span class="op" id="7976679">|</span>&nbsp;<span class="ident" id="7976681">c_ISDIR</span><span class="op" id="7976688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976694">Size</span><span class="op" id="7976698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976704">0</span><span class="op" id="7976705">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976711">ModTime</span><span class="op" id="7976718">:</span>&nbsp;&nbsp;<span class="ident" id="7976721">time</span><span class="op" id="7976725">.</span><span class="ident" id="7976726">Unix</span><span class="op" id="7976730">(</span><span class="num" id="7976731">1360601116</span><span class="op" id="7976741">,</span>&nbsp;<span class="num" id="7976743">0</span><span class="op" id="7976744">)</span><span class="op" id="7976745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976751">Typeflag</span><span class="op" id="7976759">:</span>&nbsp;<span class="ident" id="7976761">TypeDir</span><span class="op" id="7976768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976773">}</span><span class="op" id="7976774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976779">fm</span><span class="op" id="7976781">:</span>&nbsp;<span class="num" id="7976783">0755</span>&nbsp;<span class="op" id="7976788">|</span>&nbsp;<span class="ident" id="7976790">os</span><span class="op" id="7976792">.</span><span class="ident" id="7976793">ModeDir</span><span class="op" id="7976800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976804">}</span><span class="op" id="7976805">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7976809">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976830">h</span><span class="op" id="7976831">:</span>&nbsp;<span class="op" id="7976833">&amp;</span><span class="ident" id="7976834">Header</span><span class="op" id="7976840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976846">Name</span><span class="op" id="7976850">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7976856">&#34;dev/initctl&#34;</span><span class="op" id="7976869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976875">Mode</span><span class="op" id="7976879">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976885">0600</span>&nbsp;<span class="op" id="7976890">|</span>&nbsp;<span class="ident" id="7976892">c_ISFIFO</span><span class="op" id="7976900">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976906">Size</span><span class="op" id="7976910">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7976916">0</span><span class="op" id="7976917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976923">ModTime</span><span class="op" id="7976930">:</span>&nbsp;&nbsp;<span class="ident" id="7976933">time</span><span class="op" id="7976937">.</span><span class="ident" id="7976938">Unix</span><span class="op" id="7976942">(</span><span class="num" id="7976943">1360578949</span><span class="op" id="7976953">,</span>&nbsp;<span class="num" id="7976955">0</span><span class="op" id="7976956">)</span><span class="op" id="7976957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976963">Typeflag</span><span class="op" id="7976971">:</span>&nbsp;<span class="ident" id="7976973">TypeFifo</span><span class="op" id="7976981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7976986">}</span><span class="op" id="7976987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7976992">fm</span><span class="op" id="7976994">:</span>&nbsp;<span class="num" id="7976996">0600</span>&nbsp;<span class="op" id="7977001">|</span>&nbsp;<span class="ident" id="7977003">os</span><span class="op" id="7977005">.</span><span class="ident" id="7977006">ModeNamedPipe</span><span class="op" id="7977019">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977023">}</span><span class="op" id="7977024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7977028">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977046">h</span><span class="op" id="7977047">:</span>&nbsp;<span class="op" id="7977049">&amp;</span><span class="ident" id="7977050">Header</span><span class="op" id="7977056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977062">Name</span><span class="op" id="7977066">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7977072">&#34;bin/su&#34;</span><span class="op" id="7977080">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977086">Mode</span><span class="op" id="7977090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977096">0755</span>&nbsp;<span class="op" id="7977101">|</span>&nbsp;<span class="ident" id="7977103">c_ISREG</span>&nbsp;<span class="op" id="7977111">|</span>&nbsp;<span class="ident" id="7977113">c_ISUID</span><span class="op" id="7977120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977126">Size</span><span class="op" id="7977130">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977136">23232</span><span class="op" id="7977141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977147">ModTime</span><span class="op" id="7977154">:</span>&nbsp;&nbsp;<span class="ident" id="7977157">time</span><span class="op" id="7977161">.</span><span class="ident" id="7977162">Unix</span><span class="op" id="7977166">(</span><span class="num" id="7977167">1355405093</span><span class="op" id="7977177">,</span>&nbsp;<span class="num" id="7977179">0</span><span class="op" id="7977180">)</span><span class="op" id="7977181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977187">Typeflag</span><span class="op" id="7977195">:</span>&nbsp;<span class="ident" id="7977197">TypeReg</span><span class="op" id="7977204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977209">}</span><span class="op" id="7977210">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977215">fm</span><span class="op" id="7977217">:</span>&nbsp;<span class="num" id="7977219">0755</span>&nbsp;<span class="op" id="7977224">|</span>&nbsp;<span class="ident" id="7977226">os</span><span class="op" id="7977228">.</span><span class="ident" id="7977229">ModeSetuid</span><span class="op" id="7977239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977243">}</span><span class="op" id="7977244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7977248">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977267">h</span><span class="op" id="7977268">:</span>&nbsp;<span class="op" id="7977270">&amp;</span><span class="ident" id="7977271">Header</span><span class="op" id="7977277">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977283">Name</span><span class="op" id="7977287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7977293">&#34;group.txt&#34;</span><span class="op" id="7977304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977310">Mode</span><span class="op" id="7977314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977320">0750</span>&nbsp;<span class="op" id="7977325">|</span>&nbsp;<span class="ident" id="7977327">c_ISREG</span>&nbsp;<span class="op" id="7977335">|</span>&nbsp;<span class="ident" id="7977337">c_ISGID</span><span class="op" id="7977344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977350">Size</span><span class="op" id="7977354">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977360">0</span><span class="op" id="7977361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977367">ModTime</span><span class="op" id="7977374">:</span>&nbsp;&nbsp;<span class="ident" id="7977377">time</span><span class="op" id="7977381">.</span><span class="ident" id="7977382">Unix</span><span class="op" id="7977386">(</span><span class="num" id="7977387">1360602346</span><span class="op" id="7977397">,</span>&nbsp;<span class="num" id="7977399">0</span><span class="op" id="7977400">)</span><span class="op" id="7977401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977407">Typeflag</span><span class="op" id="7977415">:</span>&nbsp;<span class="ident" id="7977417">TypeReg</span><span class="op" id="7977424">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977429">}</span><span class="op" id="7977430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977435">fm</span><span class="op" id="7977437">:</span>&nbsp;<span class="num" id="7977439">0750</span>&nbsp;<span class="op" id="7977444">|</span>&nbsp;<span class="ident" id="7977446">os</span><span class="op" id="7977448">.</span><span class="ident" id="7977449">ModeSetgid</span><span class="op" id="7977459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977463">}</span><span class="op" id="7977464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7977468">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977481">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977486">h</span><span class="op" id="7977487">:</span>&nbsp;<span class="op" id="7977489">&amp;</span><span class="ident" id="7977490">Header</span><span class="op" id="7977496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977502">Name</span><span class="op" id="7977506">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7977512">&#34;sticky.txt&#34;</span><span class="op" id="7977524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977530">Mode</span><span class="op" id="7977534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977540">0600</span>&nbsp;<span class="op" id="7977545">|</span>&nbsp;<span class="ident" id="7977547">c_ISREG</span>&nbsp;<span class="op" id="7977555">|</span>&nbsp;<span class="ident" id="7977557">c_ISVTX</span><span class="op" id="7977564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977570">Size</span><span class="op" id="7977574">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7977580">7</span><span class="op" id="7977581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977587">ModTime</span><span class="op" id="7977594">:</span>&nbsp;&nbsp;<span class="ident" id="7977597">time</span><span class="op" id="7977601">.</span><span class="ident" id="7977602">Unix</span><span class="op" id="7977606">(</span><span class="num" id="7977607">1360602540</span><span class="op" id="7977617">,</span>&nbsp;<span class="num" id="7977619">0</span><span class="op" id="7977620">)</span><span class="op" id="7977621">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977627">Typeflag</span><span class="op" id="7977635">:</span>&nbsp;<span class="ident" id="7977637">TypeReg</span><span class="op" id="7977644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977649">}</span><span class="op" id="7977650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977655">fm</span><span class="op" id="7977657">:</span>&nbsp;<span class="num" id="7977659">0600</span>&nbsp;<span class="op" id="7977664">|</span>&nbsp;<span class="ident" id="7977666">os</span><span class="op" id="7977668">.</span><span class="ident" id="7977669">ModeSticky</span><span class="op" id="7977679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977683">}</span><span class="op" id="7977684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977687">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7977691">for</span>&nbsp;<span class="ident" id="7977695">i</span><span class="op" id="7977696">,</span>&nbsp;<span class="ident" id="7977698">g</span>&nbsp;<span class="op" id="7977700">:=</span>&nbsp;<span class="keyword" id="7977703">range</span>&nbsp;<span class="ident" id="7977709">golden</span>&nbsp;<span class="op" id="7977716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977720">fi</span>&nbsp;<span class="op" id="7977723">:=</span>&nbsp;<span class="ident" id="7977726">g</span><span class="op" id="7977727">.</span><span class="ident" id="7977728">h</span><span class="op" id="7977729">.</span><span class="ident" id="7977730">FileInfo</span><span class="op" id="7977738">(</span><span class="op" id="7977739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977743">h2</span><span class="op" id="7977745">,</span>&nbsp;<span class="ident" id="7977747">err</span>&nbsp;<span class="op" id="7977751">:=</span>&nbsp;<span class="ident" id="7977754">FileInfoHeader</span><span class="op" id="7977768">(</span><span class="ident" id="7977769">fi</span><span class="op" id="7977771">,</span>&nbsp;<span class="string" id="7977773">&#34;&#34;</span><span class="op" id="7977775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7977779">if</span>&nbsp;<span class="ident" id="7977782">err</span>&nbsp;<span class="op" id="7977786">!=</span>&nbsp;<span class="ident" id="7977789">nil</span>&nbsp;<span class="op" id="7977793">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977798">t</span><span class="op" id="7977799">.</span><span class="ident" id="7977800">Error</span><span class="op" id="7977805">(</span><span class="ident" id="7977806">err</span><span class="op" id="7977809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7977814">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7977829">if</span>&nbsp;<span class="ident" id="7977832">strings</span><span class="op" id="7977839">.</span><span class="ident" id="7977840">Contains</span><span class="op" id="7977848">(</span><span class="ident" id="7977849">fi</span><span class="op" id="7977851">.</span><span class="ident" id="7977852">Name</span><span class="op" id="7977856">(</span><span class="op" id="7977857">)</span><span class="op" id="7977858">,</span>&nbsp;<span class="string" id="7977860">&#34;/&#34;</span><span class="op" id="7977863">)</span>&nbsp;<span class="op" id="7977865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977870">t</span><span class="op" id="7977871">.</span><span class="ident" id="7977872">Errorf</span><span class="op" id="7977878">(</span><span class="string" id="7977879">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="7977914">,</span>&nbsp;<span class="ident" id="7977916">g</span><span class="op" id="7977917">.</span><span class="ident" id="7977918">h</span><span class="op" id="7977919">.</span><span class="ident" id="7977920">Name</span><span class="op" id="7977924">,</span>&nbsp;<span class="ident" id="7977926">fi</span><span class="op" id="7977928">.</span><span class="ident" id="7977929">Name</span><span class="op" id="7977933">(</span><span class="op" id="7977934">)</span><span class="op" id="7977935">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7977939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977943">name</span>&nbsp;<span class="op" id="7977948">:=</span>&nbsp;<span class="ident" id="7977951">path</span><span class="op" id="7977955">.</span><span class="ident" id="7977956">Base</span><span class="op" id="7977960">(</span><span class="ident" id="7977961">g</span><span class="op" id="7977962">.</span><span class="ident" id="7977963">h</span><span class="op" id="7977964">.</span><span class="ident" id="7977965">Name</span><span class="op" id="7977969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7977973">if</span>&nbsp;<span class="ident" id="7977976">fi</span><span class="op" id="7977978">.</span><span class="ident" id="7977979">IsDir</span><span class="op" id="7977984">(</span><span class="op" id="7977985">)</span>&nbsp;<span class="op" id="7977987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7977992">name</span>&nbsp;<span class="op" id="7977997">+=</span>&nbsp;<span class="string" id="7978000">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978006">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978010">if</span>&nbsp;<span class="ident" id="7978013">got</span><span class="op" id="7978016">,</span>&nbsp;<span class="ident" id="7978018">want</span>&nbsp;<span class="op" id="7978023">:=</span>&nbsp;<span class="ident" id="7978026">h2</span><span class="op" id="7978028">.</span><span class="ident" id="7978029">Name</span><span class="op" id="7978033">,</span>&nbsp;<span class="ident" id="7978035">name</span><span class="op" id="7978039">;</span>&nbsp;<span class="ident" id="7978041">got</span>&nbsp;<span class="op" id="7978045">!=</span>&nbsp;<span class="ident" id="7978048">want</span>&nbsp;<span class="op" id="7978053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978058">t</span><span class="op" id="7978059">.</span><span class="ident" id="7978060">Errorf</span><span class="op" id="7978066">(</span><span class="string" id="7978067">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7978096">,</span>&nbsp;<span class="ident" id="7978098">i</span><span class="op" id="7978099">,</span>&nbsp;<span class="ident" id="7978101">got</span><span class="op" id="7978104">,</span>&nbsp;<span class="ident" id="7978106">want</span><span class="op" id="7978110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978118">if</span>&nbsp;<span class="ident" id="7978121">got</span><span class="op" id="7978124">,</span>&nbsp;<span class="ident" id="7978126">want</span>&nbsp;<span class="op" id="7978131">:=</span>&nbsp;<span class="ident" id="7978134">h2</span><span class="op" id="7978136">.</span><span class="ident" id="7978137">Size</span><span class="op" id="7978141">,</span>&nbsp;<span class="ident" id="7978143">g</span><span class="op" id="7978144">.</span><span class="ident" id="7978145">h</span><span class="op" id="7978146">.</span><span class="ident" id="7978147">Size</span><span class="op" id="7978151">;</span>&nbsp;<span class="ident" id="7978153">got</span>&nbsp;<span class="op" id="7978157">!=</span>&nbsp;<span class="ident" id="7978160">want</span>&nbsp;<span class="op" id="7978165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978170">t</span><span class="op" id="7978171">.</span><span class="ident" id="7978172">Errorf</span><span class="op" id="7978178">(</span><span class="string" id="7978179">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7978208">,</span>&nbsp;<span class="ident" id="7978210">i</span><span class="op" id="7978211">,</span>&nbsp;<span class="ident" id="7978213">got</span><span class="op" id="7978216">,</span>&nbsp;<span class="ident" id="7978218">want</span><span class="op" id="7978222">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978226">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978230">if</span>&nbsp;<span class="ident" id="7978233">got</span><span class="op" id="7978236">,</span>&nbsp;<span class="ident" id="7978238">want</span>&nbsp;<span class="op" id="7978243">:=</span>&nbsp;<span class="ident" id="7978246">h2</span><span class="op" id="7978248">.</span><span class="ident" id="7978249">Mode</span><span class="op" id="7978253">,</span>&nbsp;<span class="ident" id="7978255">g</span><span class="op" id="7978256">.</span><span class="ident" id="7978257">h</span><span class="op" id="7978258">.</span><span class="ident" id="7978259">Mode</span><span class="op" id="7978263">;</span>&nbsp;<span class="ident" id="7978265">got</span>&nbsp;<span class="op" id="7978269">!=</span>&nbsp;<span class="ident" id="7978272">want</span>&nbsp;<span class="op" id="7978277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978282">t</span><span class="op" id="7978283">.</span><span class="ident" id="7978284">Errorf</span><span class="op" id="7978290">(</span><span class="string" id="7978291">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7978320">,</span>&nbsp;<span class="ident" id="7978322">i</span><span class="op" id="7978323">,</span>&nbsp;<span class="ident" id="7978325">got</span><span class="op" id="7978328">,</span>&nbsp;<span class="ident" id="7978330">want</span><span class="op" id="7978334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978342">if</span>&nbsp;<span class="ident" id="7978345">got</span><span class="op" id="7978348">,</span>&nbsp;<span class="ident" id="7978350">want</span>&nbsp;<span class="op" id="7978355">:=</span>&nbsp;<span class="ident" id="7978358">fi</span><span class="op" id="7978360">.</span><span class="ident" id="7978361">Mode</span><span class="op" id="7978365">(</span><span class="op" id="7978366">)</span><span class="op" id="7978367">,</span>&nbsp;<span class="ident" id="7978369">g</span><span class="op" id="7978370">.</span><span class="ident" id="7978371">fm</span><span class="op" id="7978373">;</span>&nbsp;<span class="ident" id="7978375">got</span>&nbsp;<span class="op" id="7978379">!=</span>&nbsp;<span class="ident" id="7978382">want</span>&nbsp;<span class="op" id="7978387">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978392">t</span><span class="op" id="7978393">.</span><span class="ident" id="7978394">Errorf</span><span class="op" id="7978400">(</span><span class="string" id="7978401">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7978433">,</span>&nbsp;<span class="ident" id="7978435">i</span><span class="op" id="7978436">,</span>&nbsp;<span class="ident" id="7978438">got</span><span class="op" id="7978441">,</span>&nbsp;<span class="ident" id="7978443">want</span><span class="op" id="7978447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978455">if</span>&nbsp;<span class="ident" id="7978458">got</span><span class="op" id="7978461">,</span>&nbsp;<span class="ident" id="7978463">want</span>&nbsp;<span class="op" id="7978468">:=</span>&nbsp;<span class="ident" id="7978471">h2</span><span class="op" id="7978473">.</span><span class="ident" id="7978474">ModTime</span><span class="op" id="7978481">,</span>&nbsp;<span class="ident" id="7978483">g</span><span class="op" id="7978484">.</span><span class="ident" id="7978485">h</span><span class="op" id="7978486">.</span><span class="ident" id="7978487">ModTime</span><span class="op" id="7978494">;</span>&nbsp;<span class="ident" id="7978496">got</span>&nbsp;<span class="op" id="7978500">!=</span>&nbsp;<span class="ident" id="7978503">want</span>&nbsp;<span class="op" id="7978508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978513">t</span><span class="op" id="7978514">.</span><span class="ident" id="7978515">Errorf</span><span class="op" id="7978521">(</span><span class="string" id="7978522">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7978554">,</span>&nbsp;<span class="ident" id="7978556">i</span><span class="op" id="7978557">,</span>&nbsp;<span class="ident" id="7978559">got</span><span class="op" id="7978562">,</span>&nbsp;<span class="ident" id="7978564">want</span><span class="op" id="7978568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978572">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7978576">if</span>&nbsp;<span class="ident" id="7978579">sysh</span><span class="op" id="7978583">,</span>&nbsp;<span class="ident" id="7978585">ok</span>&nbsp;<span class="op" id="7978588">:=</span>&nbsp;<span class="ident" id="7978591">fi</span><span class="op" id="7978593">.</span><span class="ident" id="7978594">Sys</span><span class="op" id="7978597">(</span><span class="op" id="7978598">)</span><span class="op" id="7978599">.</span><span class="op" id="7978600">(</span><span class="op" id="7978601">*</span><span class="ident" id="7978602">Header</span><span class="op" id="7978608">)</span><span class="op" id="7978609">;</span>&nbsp;<span class="op" id="7978611">!</span><span class="ident" id="7978612">ok</span>&nbsp;<span class="op" id="7978615">||</span>&nbsp;<span class="ident" id="7978618">sysh</span>&nbsp;<span class="op" id="7978623">!=</span>&nbsp;<span class="ident" id="7978626">g</span><span class="op" id="7978627">.</span><span class="ident" id="7978628">h</span>&nbsp;<span class="op" id="7978630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7978635">t</span><span class="op" id="7978636">.</span><span class="ident" id="7978637">Errorf</span><span class="op" id="7978643">(</span><span class="string" id="7978644">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="7978686">,</span>&nbsp;<span class="ident" id="7978688">i</span><span class="op" id="7978689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7978696">}</span><br>
<span class="lineno"></span><span class="op" id="7978698">}</span>
</div>
</body>
</html>
