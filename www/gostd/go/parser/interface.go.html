<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html" class="current">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5950295">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5950350">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5950404">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5950455">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;the&nbsp;exported&nbsp;entry&nbsp;points&nbsp;for&nbsp;invoking&nbsp;the&nbsp;parser.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5950529">package</span>&nbsp;<span class="ident" id="5950537">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5950545">import</span>&nbsp;<span class="op" id="5950552">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950555">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950564">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950574">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950584">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950596">&#34;io&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950602">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950615">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950621">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5950638">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5950648">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5950651">//&nbsp;If&nbsp;src&nbsp;!=&nbsp;nil,&nbsp;readSource&nbsp;converts&nbsp;src&nbsp;to&nbsp;a&nbsp;[]byte&nbsp;if&nbsp;possible;</span><br>
<span class="lineno"></span><span class="comment" id="5950718">//&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error.&nbsp;If&nbsp;src&nbsp;==&nbsp;nil,&nbsp;readSource&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="5950786">//&nbsp;the&nbsp;result&nbsp;of&nbsp;reading&nbsp;the&nbsp;file&nbsp;specified&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="5950843">//</span><br>
<span class="lineno">25</span><span class="keyword" id="5950846">func</span>&nbsp;<span class="ident" id="5950851">readSource</span><span class="op" id="5950861">(</span><span class="ident" id="5950862">filename</span>&nbsp;<span class="builtintype" id="5950871">string</span><span class="op" id="5950877">,</span>&nbsp;<span class="ident" id="5950879">src</span>&nbsp;<span class="keyword" id="5950883">interface</span><span class="op" id="5950892">{</span><span class="op" id="5950893">}</span><span class="op" id="5950894">)</span>&nbsp;<span class="op" id="5950896">(</span><span class="op" id="5950897">[</span><span class="op" id="5950898">]</span><span class="builtintype" id="5950899">byte</span><span class="op" id="5950903">,</span>&nbsp;<span class="builtintype" id="5950905">error</span><span class="op" id="5950910">)</span>&nbsp;<span class="op" id="5950912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950915">if</span>&nbsp;<span class="ident" id="5950918"><a href="/gostd/go/parser/interface.go.html#5950879">src</a></span>&nbsp;<span class="op" id="5950922">!=</span>&nbsp;<span class="builtintype" id="5950925">nil</span>&nbsp;<span class="op" id="5950929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950933">switch</span>&nbsp;<span class="ident" id="5950940">s</span>&nbsp;<span class="op" id="5950942">:=</span>&nbsp;<span class="ident" id="5950945"><a href="/gostd/go/parser/interface.go.html#5950879">src</a></span><span class="op" id="5950948">.</span><span class="op" id="5950949">(</span><span class="keyword" id="5950950">type</span><span class="op" id="5950954">)</span>&nbsp;<span class="op" id="5950956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950960">case</span>&nbsp;<span class="builtintype" id="5950965">string</span><span class="op" id="5950971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5950976">return</span>&nbsp;<span class="op" id="5950983">[</span><span class="op" id="5950984">]</span><span class="builtintype" id="5950985">byte</span><span class="op" id="5950989">(</span><span class="ident" id="5950990"><a href="/gostd/go/parser/interface.go.html#5950940">s</a></span><span class="op" id="5950991">)</span><span class="op" id="5950992">,</span>&nbsp;<span class="builtintype" id="5950994">nil</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951000">case</span>&nbsp;<span class="op" id="5951005">[</span><span class="op" id="5951006">]</span><span class="builtintype" id="5951007">byte</span><span class="op" id="5951011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951016">return</span>&nbsp;<span class="ident" id="5951023"><a href="/gostd/go/parser/interface.go.html#5950940">s</a></span><span class="op" id="5951024">,</span>&nbsp;<span class="builtintype" id="5951026">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951032">case</span>&nbsp;<span class="op" id="5951037">*</span><span class="ident" id="5951038"><a href="/gostd/go/parser/interface.go.html#5950555">bytes</a></span><span class="op" id="5951043">.</span><span class="ident" id="5951044"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="5951050">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951055">//&nbsp;is&nbsp;io.Reader,&nbsp;but&nbsp;src&nbsp;is&nbsp;already&nbsp;available&nbsp;in&nbsp;[]byte&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951119">if</span>&nbsp;<span class="ident" id="5951122"><a href="/gostd/go/parser/interface.go.html#5950940">s</a></span>&nbsp;<span class="op" id="5951124">!=</span>&nbsp;<span class="builtintype" id="5951127">nil</span>&nbsp;<span class="op" id="5951131">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951137">return</span>&nbsp;<span class="ident" id="5951144"><a href="/gostd/go/parser/interface.go.html#5950940">s</a></span><span class="op" id="5951145">.</span><span class="ident" id="5951146"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="5951151">(</span><span class="op" id="5951152">)</span><span class="op" id="5951153">,</span>&nbsp;<span class="builtintype" id="5951155">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951166">case</span>&nbsp;<span class="ident" id="5951171"><a href="/gostd/go/parser/interface.go.html#5950596">io</a></span><span class="op" id="5951173">.</span><span class="ident" id="5951174"><a href="/gostd/io/io.go.html#1421823">Reader</a></span><span class="op" id="5951180">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951185">var</span>&nbsp;<span class="ident" id="5951189">buf</span>&nbsp;<span class="ident" id="5951193"><a href="/gostd/go/parser/interface.go.html#5950555">bytes</a></span><span class="op" id="5951198">.</span><span class="ident" id="5951199"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951209">if</span>&nbsp;<span class="ident" id="5951212">_</span><span class="op" id="5951213">,</span>&nbsp;<span class="ident" id="5951215">err</span>&nbsp;<span class="op" id="5951219">:=</span>&nbsp;<span class="ident" id="5951222"><a href="/gostd/go/parser/interface.go.html#5950596">io</a></span><span class="op" id="5951224">.</span><span class="ident" id="5951225"><a href="/gostd/io/io.go.html#1430946">Copy</a></span><span class="op" id="5951229">(</span><span class="op" id="5951230">&amp;</span><span class="ident" id="5951231"><a href="/gostd/go/parser/interface.go.html#5951189">buf</a></span><span class="op" id="5951234">,</span>&nbsp;<span class="ident" id="5951236"><a href="/gostd/go/parser/interface.go.html#5950940">s</a></span><span class="op" id="5951237">)</span><span class="op" id="5951238">;</span>&nbsp;<span class="ident" id="5951240"><a href="/gostd/go/parser/interface.go.html#5951215">err</a></span>&nbsp;<span class="op" id="5951244">!=</span>&nbsp;<span class="builtintype" id="5951247">nil</span>&nbsp;<span class="op" id="5951251">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951257">return</span>&nbsp;<span class="builtintype" id="5951264">nil</span><span class="op" id="5951267">,</span>&nbsp;<span class="ident" id="5951269"><a href="/gostd/go/parser/interface.go.html#5951215">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951281">return</span>&nbsp;<span class="ident" id="5951288"><a href="/gostd/go/parser/interface.go.html#5951189">buf</a></span><span class="op" id="5951291">.</span><span class="ident" id="5951292"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="5951297">(</span><span class="op" id="5951298">)</span><span class="op" id="5951299">,</span>&nbsp;<span class="builtintype" id="5951301">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951311">return</span>&nbsp;<span class="builtintype" id="5951318">nil</span><span class="op" id="5951321">,</span>&nbsp;<span class="ident" id="5951323"><a href="/gostd/go/parser/interface.go.html#5950564">errors</a></span><span class="op" id="5951329">.</span><span class="ident" id="5951330"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5951333">(</span><span class="string" id="5951334">&#34;invalid&nbsp;source&#34;</span><span class="op" id="5951350">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5951356">return</span>&nbsp;<span class="ident" id="5951363"><a href="/gostd/go/parser/interface.go.html#5950602">ioutil</a></span><span class="op" id="5951369">.</span><span class="ident" id="5951370"><a href="/gostd/io/ioutil/ioutil.go.html#3765434">ReadFile</a></span><span class="op" id="5951378">(</span><span class="ident" id="5951379"><a href="/gostd/go/parser/interface.go.html#5950862">filename</a></span><span class="op" id="5951387">)</span><br>
<span class="lineno"></span><span class="op" id="5951389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5951392">//&nbsp;A&nbsp;Mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno">50</span><span class="comment" id="5951434">//&nbsp;They&nbsp;control&nbsp;the&nbsp;amount&nbsp;of&nbsp;source&nbsp;code&nbsp;parsed&nbsp;and&nbsp;other&nbsp;optional</span><br>
<span class="lineno"></span><span class="comment" id="5951502">//&nbsp;parser&nbsp;functionality.</span><br>
<span class="lineno"></span><span class="comment" id="5951527">//</span><br>
<span class="lineno"></span><span class="keyword" id="5951530">type</span>&nbsp;<span class="ident" id="5951535">Mode</span>&nbsp;<span class="builtintype" id="5951540">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="5951546">const</span>&nbsp;<span class="op" id="5951552">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951555">PackageClauseOnly</span>&nbsp;<span class="ident" id="5951573"><a href="/gostd/go/parser/interface.go.html#5951535">Mode</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5951590">=</span>&nbsp;<span class="num" id="5951592">1</span>&nbsp;<span class="op" id="5951594">&lt;&lt;</span>&nbsp;<span class="ident" id="5951597">iota</span>&nbsp;<span class="comment" id="5951602">//&nbsp;stop&nbsp;parsing&nbsp;after&nbsp;package&nbsp;clause</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951640">ImportsOnly</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951687">//&nbsp;stop&nbsp;parsing&nbsp;after&nbsp;import&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951730">ParseComments</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951777">//&nbsp;parse&nbsp;comments&nbsp;and&nbsp;add&nbsp;them&nbsp;to&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951816">Trace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951863">//&nbsp;print&nbsp;a&nbsp;trace&nbsp;of&nbsp;parsed&nbsp;productions</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951903">DeclarationErrors</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5951950">//&nbsp;report&nbsp;declaration&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5951980">SpuriousErrors</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5952027">//&nbsp;same&nbsp;as&nbsp;AllErrors,&nbsp;for&nbsp;backward-compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5952077">AllErrors</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5952095">=</span>&nbsp;<span class="ident" id="5952097"><a href="/gostd/go/parser/interface.go.html#5951980">SpuriousErrors</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5952124">//&nbsp;report&nbsp;all&nbsp;errors&nbsp;(not&nbsp;just&nbsp;the&nbsp;first&nbsp;10&nbsp;on&nbsp;different&nbsp;lines)</span><br>
<span class="lineno"></span><span class="op" id="5952188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="5952191">//&nbsp;ParseFile&nbsp;parses&nbsp;the&nbsp;source&nbsp;code&nbsp;of&nbsp;a&nbsp;single&nbsp;Go&nbsp;source&nbsp;file&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="5952266">//&nbsp;the&nbsp;corresponding&nbsp;ast.File&nbsp;node.&nbsp;The&nbsp;source&nbsp;code&nbsp;may&nbsp;be&nbsp;provided&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="5952338">//&nbsp;the&nbsp;filename&nbsp;of&nbsp;the&nbsp;source&nbsp;file,&nbsp;or&nbsp;via&nbsp;the&nbsp;src&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="5952400">//</span><br>
<span class="lineno"></span><span class="comment" id="5952403">//&nbsp;If&nbsp;src&nbsp;!=&nbsp;nil,&nbsp;ParseFile&nbsp;parses&nbsp;the&nbsp;source&nbsp;from&nbsp;src&nbsp;and&nbsp;the&nbsp;filename&nbsp;is</span><br>
<span class="lineno">70</span><span class="comment" id="5952478">//&nbsp;only&nbsp;used&nbsp;when&nbsp;recording&nbsp;position&nbsp;information.&nbsp;The&nbsp;type&nbsp;of&nbsp;the&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="5952553">//&nbsp;for&nbsp;the&nbsp;src&nbsp;parameter&nbsp;must&nbsp;be&nbsp;string,&nbsp;[]byte,&nbsp;or&nbsp;io.Reader.</span><br>
<span class="lineno"></span><span class="comment" id="5952616">//&nbsp;If&nbsp;src&nbsp;==&nbsp;nil,&nbsp;ParseFile&nbsp;parses&nbsp;the&nbsp;file&nbsp;specified&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="5952683">//</span><br>
<span class="lineno"></span><span class="comment" id="5952686">//&nbsp;The&nbsp;mode&nbsp;parameter&nbsp;controls&nbsp;the&nbsp;amount&nbsp;of&nbsp;source&nbsp;text&nbsp;parsed&nbsp;and&nbsp;other</span><br>
<span class="lineno">75</span><span class="comment" id="5952760">//&nbsp;optional&nbsp;parser&nbsp;functionality.&nbsp;Position&nbsp;information&nbsp;is&nbsp;recorded&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5952834">//&nbsp;file&nbsp;set&nbsp;fset.</span><br>
<span class="lineno"></span><span class="comment" id="5952852">//</span><br>
<span class="lineno"></span><span class="comment" id="5952855">//&nbsp;If&nbsp;the&nbsp;source&nbsp;couldn&#39;t&nbsp;be&nbsp;read,&nbsp;the&nbsp;returned&nbsp;AST&nbsp;is&nbsp;nil&nbsp;and&nbsp;the&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5952928">//&nbsp;indicates&nbsp;the&nbsp;specific&nbsp;failure.&nbsp;If&nbsp;the&nbsp;source&nbsp;was&nbsp;read&nbsp;but&nbsp;syntax</span><br>
<span class="lineno">80</span><span class="comment" id="5952997">//&nbsp;errors&nbsp;were&nbsp;found,&nbsp;the&nbsp;result&nbsp;is&nbsp;a&nbsp;partial&nbsp;AST&nbsp;(with&nbsp;ast.Bad*&nbsp;nodes</span><br>
<span class="lineno"></span><span class="comment" id="5953068">//&nbsp;representing&nbsp;the&nbsp;fragments&nbsp;of&nbsp;erroneous&nbsp;source&nbsp;code).&nbsp;Multiple&nbsp;errors</span><br>
<span class="lineno"></span><span class="comment" id="5953141">//&nbsp;are&nbsp;returned&nbsp;via&nbsp;a&nbsp;scanner.ErrorList&nbsp;which&nbsp;is&nbsp;sorted&nbsp;by&nbsp;file&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5953215">//</span><br>
<span class="lineno"></span><span class="keyword" id="5953218">func</span>&nbsp;<span class="ident" id="5953223">ParseFile</span><span class="op" id="5953232">(</span><span class="ident" id="5953233">fset</span>&nbsp;<span class="op" id="5953238">*</span><span class="ident" id="5953239"><a href="/gostd/go/parser/interface.go.html#5950584">token</a></span><span class="op" id="5953244">.</span><span class="ident" id="5953245"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5953252">,</span>&nbsp;<span class="ident" id="5953254">filename</span>&nbsp;<span class="builtintype" id="5953263">string</span><span class="op" id="5953269">,</span>&nbsp;<span class="ident" id="5953271">src</span>&nbsp;<span class="keyword" id="5953275">interface</span><span class="op" id="5953284">{</span><span class="op" id="5953285">}</span><span class="op" id="5953286">,</span>&nbsp;<span class="ident" id="5953288">mode</span>&nbsp;<span class="ident" id="5953293"><a href="/gostd/go/parser/interface.go.html#5951535">Mode</a></span><span class="op" id="5953297">)</span>&nbsp;<span class="op" id="5953299">(</span><span class="ident" id="5953300">f</span>&nbsp;<span class="op" id="5953302">*</span><span class="ident" id="5953303"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5953306">.</span><span class="ident" id="5953307"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5953311">,</span>&nbsp;<span class="ident" id="5953313">err</span>&nbsp;<span class="builtintype" id="5953317">error</span><span class="op" id="5953322">)</span>&nbsp;<span class="op" id="5953324">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953327">//&nbsp;get&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953342">text</span><span class="op" id="5953346">,</span>&nbsp;<span class="ident" id="5953348"><a href="/gostd/go/parser/interface.go.html#5953313">err</a></span>&nbsp;<span class="op" id="5953352">:=</span>&nbsp;<span class="ident" id="5953355"><a href="/gostd/go/parser/interface.go.html#5950851">readSource</a></span><span class="op" id="5953365">(</span><span class="ident" id="5953366"><a href="/gostd/go/parser/interface.go.html#5953254">filename</a></span><span class="op" id="5953374">,</span>&nbsp;<span class="ident" id="5953376"><a href="/gostd/go/parser/interface.go.html#5953271">src</a></span><span class="op" id="5953379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953382">if</span>&nbsp;<span class="ident" id="5953385"><a href="/gostd/go/parser/interface.go.html#5953313">err</a></span>&nbsp;<span class="op" id="5953389">!=</span>&nbsp;<span class="builtintype" id="5953392">nil</span>&nbsp;<span class="op" id="5953396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953400">return</span>&nbsp;<span class="builtintype" id="5953407">nil</span><span class="op" id="5953410">,</span>&nbsp;<span class="ident" id="5953412"><a href="/gostd/go/parser/interface.go.html#5953313">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953417">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953421">var</span>&nbsp;<span class="ident" id="5953425">p</span>&nbsp;<span class="ident" id="5953427"><a href="/gostd/go/parser/parser.go.html#5956882">parser</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953435">defer</span>&nbsp;<span class="keyword" id="5953441">func</span><span class="op" id="5953445">(</span><span class="op" id="5953446">)</span>&nbsp;<span class="op" id="5953448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953452">if</span>&nbsp;<span class="ident" id="5953455">e</span>&nbsp;<span class="op" id="5953457">:=</span>&nbsp;<span class="builtinfunc" id="5953460">recover</span><span class="op" id="5953467">(</span><span class="op" id="5953468">)</span><span class="op" id="5953469">;</span>&nbsp;<span class="ident" id="5953471"><a href="/gostd/go/parser/interface.go.html#5953455">e</a></span>&nbsp;<span class="op" id="5953473">!=</span>&nbsp;<span class="builtintype" id="5953476">nil</span>&nbsp;<span class="op" id="5953480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953485">_</span>&nbsp;<span class="op" id="5953487">=</span>&nbsp;<span class="ident" id="5953489"><a href="/gostd/go/parser/interface.go.html#5953455">e</a></span><span class="op" id="5953490">.</span><span class="op" id="5953491">(</span><span class="ident" id="5953492"><a href="/gostd/go/parser/parser.go.html#5966597">bailout</a></span><span class="op" id="5953499">)</span>&nbsp;<span class="comment" id="5953501">//&nbsp;re-panics&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;bailout</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953543">//&nbsp;set&nbsp;result&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953566">if</span>&nbsp;<span class="ident" id="5953569"><a href="/gostd/go/parser/interface.go.html#5953300">f</a></span>&nbsp;<span class="op" id="5953571">==</span>&nbsp;<span class="builtintype" id="5953574">nil</span>&nbsp;<span class="op" id="5953578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953583">//&nbsp;source&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;Go&nbsp;source&nbsp;file&nbsp;-&nbsp;satisfy</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953636">//&nbsp;ParseFile&nbsp;API&nbsp;and&nbsp;return&nbsp;a&nbsp;valid&nbsp;(but)&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953687">//&nbsp;*ast.File</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953703"><a href="/gostd/go/parser/interface.go.html#5953300">f</a></span>&nbsp;<span class="op" id="5953705">=</span>&nbsp;<span class="op" id="5953707">&amp;</span><span class="ident" id="5953708"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5953711">.</span><span class="ident" id="5953712"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5953716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953722"><a href="/gostd/go/ast/ast.go.html#3824009">Name</a></span><span class="op" id="5953726">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="5953729">new</span><span class="op" id="5953732">(</span><span class="ident" id="5953733"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5953736">.</span><span class="ident" id="5953737"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="5953742">)</span><span class="op" id="5953743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953749"><a href="/gostd/go/ast/ast.go.html#3824115">Scope</a></span><span class="op" id="5953754">:</span>&nbsp;<span class="ident" id="5953756"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5953759">.</span><span class="ident" id="5953760"><a href="/gostd/go/ast/scope.go.html#3863557">NewScope</a></span><span class="op" id="5953768">(</span><span class="builtintype" id="5953769">nil</span><span class="op" id="5953772">)</span><span class="op" id="5953773">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953787"><a href="/gostd/go/parser/interface.go.html#5953425">p</a></span><span class="op" id="5953788">.</span><span class="ident" id="5953789"><a href="/gostd/go/parser/parser.go.html#5956920">errors</a></span><span class="op" id="5953795">.</span><span class="ident" id="5953796"><a href="/gostd/go/scanner/errors.go.html#3896610">Sort</a></span><span class="op" id="5953800">(</span><span class="op" id="5953801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953805"><a href="/gostd/go/parser/interface.go.html#5953313">err</a></span>&nbsp;<span class="op" id="5953809">=</span>&nbsp;<span class="ident" id="5953811"><a href="/gostd/go/parser/interface.go.html#5953425">p</a></span><span class="op" id="5953812">.</span><span class="ident" id="5953813"><a href="/gostd/go/parser/parser.go.html#5956920">errors</a></span><span class="op" id="5953819">.</span><span class="ident" id="5953820"><a href="/gostd/go/scanner/errors.go.html#3897358">Err</a></span><span class="op" id="5953823">(</span><span class="op" id="5953824">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5953827">}</span><span class="op" id="5953828">(</span><span class="op" id="5953829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5953833">//&nbsp;parse&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953850"><a href="/gostd/go/parser/interface.go.html#5953425">p</a></span><span class="op" id="5953851">.</span><span class="ident" id="5953852"><a href="/gostd/go/parser/parser.go.html#5958333">init</a></span><span class="op" id="5953856">(</span><span class="ident" id="5953857"><a href="/gostd/go/parser/interface.go.html#5953233">fset</a></span><span class="op" id="5953861">,</span>&nbsp;<span class="ident" id="5953863"><a href="/gostd/go/parser/interface.go.html#5953254">filename</a></span><span class="op" id="5953871">,</span>&nbsp;<span class="ident" id="5953873"><a href="/gostd/go/parser/interface.go.html#5953342">text</a></span><span class="op" id="5953877">,</span>&nbsp;<span class="ident" id="5953879"><a href="/gostd/go/parser/interface.go.html#5953288">mode</a></span><span class="op" id="5953883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5953886"><a href="/gostd/go/parser/interface.go.html#5953300">f</a></span>&nbsp;<span class="op" id="5953888">=</span>&nbsp;<span class="ident" id="5953890"><a href="/gostd/go/parser/interface.go.html#5953425">p</a></span><span class="op" id="5953891">.</span><span class="ident" id="5953892"><a href="/gostd/go/parser/parser.go.html#6016701">parseFile</a></span><span class="op" id="5953901">(</span><span class="op" id="5953902">)</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5953906">return</span><br>
<span class="lineno"></span><span class="op" id="5953913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5953916">//&nbsp;ParseDir&nbsp;calls&nbsp;ParseFile&nbsp;for&nbsp;all&nbsp;files&nbsp;with&nbsp;names&nbsp;ending&nbsp;in&nbsp;&#34;.go&#34;&nbsp;in&nbsp;the</span><br>
<span class="lineno">120</span><span class="comment" id="5953992">//&nbsp;directory&nbsp;specified&nbsp;by&nbsp;path&nbsp;and&nbsp;returns&nbsp;a&nbsp;map&nbsp;of&nbsp;package&nbsp;name&nbsp;-&gt;&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5954068">//&nbsp;AST&nbsp;with&nbsp;all&nbsp;the&nbsp;packages&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="5954104">//</span><br>
<span class="lineno"></span><span class="comment" id="5954107">//&nbsp;If&nbsp;filter&nbsp;!=&nbsp;nil,&nbsp;only&nbsp;the&nbsp;files&nbsp;with&nbsp;os.FileInfo&nbsp;entries&nbsp;passing&nbsp;through</span><br>
<span class="lineno"></span><span class="comment" id="5954184">//&nbsp;the&nbsp;filter&nbsp;(and&nbsp;ending&nbsp;in&nbsp;&#34;.go&#34;)&nbsp;are&nbsp;considered.&nbsp;The&nbsp;mode&nbsp;bits&nbsp;are&nbsp;passed</span><br>
<span class="lineno">125</span><span class="comment" id="5954261">//&nbsp;to&nbsp;ParseFile&nbsp;unchanged.&nbsp;Position&nbsp;information&nbsp;is&nbsp;recorded&nbsp;in&nbsp;fset.</span><br>
<span class="lineno"></span><span class="comment" id="5954330">//</span><br>
<span class="lineno"></span><span class="comment" id="5954333">//&nbsp;If&nbsp;the&nbsp;directory&nbsp;couldn&#39;t&nbsp;be&nbsp;read,&nbsp;a&nbsp;nil&nbsp;map&nbsp;and&nbsp;the&nbsp;respective&nbsp;error&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5954410">//&nbsp;returned.&nbsp;If&nbsp;a&nbsp;parse&nbsp;error&nbsp;occurred,&nbsp;a&nbsp;non-nil&nbsp;but&nbsp;incomplete&nbsp;map&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5954487">//&nbsp;first&nbsp;error&nbsp;encountered&nbsp;are&nbsp;returned.</span><br>
<span class="lineno">130</span><span class="comment" id="5954528">//</span><br>
<span class="lineno"></span><span class="keyword" id="5954531">func</span>&nbsp;<span class="ident" id="5954536">ParseDir</span><span class="op" id="5954544">(</span><span class="ident" id="5954545">fset</span>&nbsp;<span class="op" id="5954550">*</span><span class="ident" id="5954551"><a href="/gostd/go/parser/interface.go.html#5950584">token</a></span><span class="op" id="5954556">.</span><span class="ident" id="5954557"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5954564">,</span>&nbsp;<span class="ident" id="5954566">path</span>&nbsp;<span class="builtintype" id="5954571">string</span><span class="op" id="5954577">,</span>&nbsp;<span class="ident" id="5954579">filter</span>&nbsp;<span class="keyword" id="5954586">func</span><span class="op" id="5954590">(</span><span class="ident" id="5954591"><a href="/gostd/go/parser/interface.go.html#5950615">os</a></span><span class="op" id="5954593">.</span><span class="ident" id="5954594"><a href="/gostd/os/types.go.html#2472460">FileInfo</a></span><span class="op" id="5954602">)</span>&nbsp;<span class="builtintype" id="5954604">bool</span><span class="op" id="5954608">,</span>&nbsp;<span class="ident" id="5954610">mode</span>&nbsp;<span class="ident" id="5954615"><a href="/gostd/go/parser/interface.go.html#5951535">Mode</a></span><span class="op" id="5954619">)</span>&nbsp;<span class="op" id="5954621">(</span><span class="ident" id="5954622">pkgs</span>&nbsp;<span class="keyword" id="5954627">map</span><span class="op" id="5954630">[</span><span class="builtintype" id="5954631">string</span><span class="op" id="5954637">]</span><span class="op" id="5954638">*</span><span class="ident" id="5954639"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5954642">.</span><span class="ident" id="5954643"><a href="/gostd/go/ast/ast.go.html#3824638">Package</a></span><span class="op" id="5954650">,</span>&nbsp;<span class="ident" id="5954652">first</span>&nbsp;<span class="builtintype" id="5954658">error</span><span class="op" id="5954663">)</span>&nbsp;<span class="op" id="5954665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954668">fd</span><span class="op" id="5954670">,</span>&nbsp;<span class="ident" id="5954672">err</span>&nbsp;<span class="op" id="5954676">:=</span>&nbsp;<span class="ident" id="5954679"><a href="/gostd/go/parser/interface.go.html#5950615">os</a></span><span class="op" id="5954681">.</span><span class="ident" id="5954682"><a href="/gostd/os/file.go.html#2446863">Open</a></span><span class="op" id="5954686">(</span><span class="ident" id="5954687"><a href="/gostd/go/parser/interface.go.html#5954566">path</a></span><span class="op" id="5954691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954694">if</span>&nbsp;<span class="ident" id="5954697"><a href="/gostd/go/parser/interface.go.html#5954672">err</a></span>&nbsp;<span class="op" id="5954701">!=</span>&nbsp;<span class="builtintype" id="5954704">nil</span>&nbsp;<span class="op" id="5954708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954712">return</span>&nbsp;<span class="builtintype" id="5954719">nil</span><span class="op" id="5954722">,</span>&nbsp;<span class="ident" id="5954724"><a href="/gostd/go/parser/interface.go.html#5954672">err</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954732">defer</span>&nbsp;<span class="ident" id="5954738"><a href="/gostd/go/parser/interface.go.html#5954668">fd</a></span><span class="op" id="5954740">.</span><span class="ident" id="5954741"><a href="/gostd/os/file_unix.go.html#2454611">Close</a></span><span class="op" id="5954746">(</span><span class="op" id="5954747">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954751">list</span><span class="op" id="5954755">,</span>&nbsp;<span class="ident" id="5954757"><a href="/gostd/go/parser/interface.go.html#5954672">err</a></span>&nbsp;<span class="op" id="5954761">:=</span>&nbsp;<span class="ident" id="5954764"><a href="/gostd/go/parser/interface.go.html#5954668">fd</a></span><span class="op" id="5954766">.</span><span class="ident" id="5954767"><a href="/gostd/os/doc.go.html#2426453">Readdir</a></span><span class="op" id="5954774">(</span><span class="op" id="5954775">-</span><span class="num" id="5954776">1</span><span class="op" id="5954777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954780">if</span>&nbsp;<span class="ident" id="5954783"><a href="/gostd/go/parser/interface.go.html#5954672">err</a></span>&nbsp;<span class="op" id="5954787">!=</span>&nbsp;<span class="builtintype" id="5954790">nil</span>&nbsp;<span class="op" id="5954794">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954798">return</span>&nbsp;<span class="builtintype" id="5954805">nil</span><span class="op" id="5954808">,</span>&nbsp;<span class="ident" id="5954810"><a href="/gostd/go/parser/interface.go.html#5954672">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5954815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954819"><a href="/gostd/go/parser/interface.go.html#5954622">pkgs</a></span>&nbsp;<span class="op" id="5954824">=</span>&nbsp;<span class="builtinfunc" id="5954826">make</span><span class="op" id="5954830">(</span><span class="keyword" id="5954831">map</span><span class="op" id="5954834">[</span><span class="builtintype" id="5954835">string</span><span class="op" id="5954841">]</span><span class="op" id="5954842">*</span><span class="ident" id="5954843"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5954846">.</span><span class="ident" id="5954847"><a href="/gostd/go/ast/ast.go.html#3824638">Package</a></span><span class="op" id="5954854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954857">for</span>&nbsp;<span class="ident" id="5954861">_</span><span class="op" id="5954862">,</span>&nbsp;<span class="ident" id="5954864">d</span>&nbsp;<span class="op" id="5954866">:=</span>&nbsp;<span class="keyword" id="5954869">range</span>&nbsp;<span class="ident" id="5954875"><a href="/gostd/go/parser/interface.go.html#5954751">list</a></span>&nbsp;<span class="op" id="5954880">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5954884">if</span>&nbsp;<span class="ident" id="5954887"><a href="/gostd/go/parser/interface.go.html#5950638">strings</a></span><span class="op" id="5954894">.</span><span class="ident" id="5954895"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="5954904">(</span><span class="ident" id="5954905"><a href="/gostd/go/parser/interface.go.html#5954864">d</a></span><span class="op" id="5954906">.</span><span class="ident" id="5954907"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="5954911">(</span><span class="op" id="5954912">)</span><span class="op" id="5954913">,</span>&nbsp;<span class="string" id="5954915">&#34;.go&#34;</span><span class="op" id="5954920">)</span>&nbsp;<span class="op" id="5954922">&amp;&amp;</span>&nbsp;<span class="op" id="5954925">(</span><span class="ident" id="5954926"><a href="/gostd/go/parser/interface.go.html#5954579">filter</a></span>&nbsp;<span class="op" id="5954933">==</span>&nbsp;<span class="builtintype" id="5954936">nil</span>&nbsp;<span class="op" id="5954940">||</span>&nbsp;<span class="ident" id="5954943"><a href="/gostd/go/parser/interface.go.html#5954579">filter</a></span><span class="op" id="5954949">(</span><span class="ident" id="5954950"><a href="/gostd/go/parser/interface.go.html#5954864">d</a></span><span class="op" id="5954951">)</span><span class="op" id="5954952">)</span>&nbsp;<span class="op" id="5954954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5954959">filename</span>&nbsp;<span class="op" id="5954968">:=</span>&nbsp;<span class="ident" id="5954971"><a href="/gostd/go/parser/interface.go.html#5950621">filepath</a></span><span class="op" id="5954979">.</span><span class="ident" id="5954980"><a href="/gostd/path/filepath/path.go.html#3783597">Join</a></span><span class="op" id="5954984">(</span><span class="ident" id="5954985"><a href="/gostd/go/parser/interface.go.html#5954566">path</a></span><span class="op" id="5954989">,</span>&nbsp;<span class="ident" id="5954991"><a href="/gostd/go/parser/interface.go.html#5954864">d</a></span><span class="op" id="5954992">.</span><span class="ident" id="5954993"><a href="/gostd/os/types.go.html#2472482">Name</a></span><span class="op" id="5954997">(</span><span class="op" id="5954998">)</span><span class="op" id="5954999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955004">if</span>&nbsp;<span class="ident" id="5955007">src</span><span class="op" id="5955010">,</span>&nbsp;<span class="ident" id="5955012">err</span>&nbsp;<span class="op" id="5955016">:=</span>&nbsp;<span class="ident" id="5955019"><a href="/gostd/go/parser/interface.go.html#5953223">ParseFile</a></span><span class="op" id="5955028">(</span><span class="ident" id="5955029"><a href="/gostd/go/parser/interface.go.html#5954545">fset</a></span><span class="op" id="5955033">,</span>&nbsp;<span class="ident" id="5955035"><a href="/gostd/go/parser/interface.go.html#5954959">filename</a></span><span class="op" id="5955043">,</span>&nbsp;<span class="builtintype" id="5955045">nil</span><span class="op" id="5955048">,</span>&nbsp;<span class="ident" id="5955050"><a href="/gostd/go/parser/interface.go.html#5954610">mode</a></span><span class="op" id="5955054">)</span><span class="op" id="5955055">;</span>&nbsp;<span class="ident" id="5955057"><a href="/gostd/go/parser/interface.go.html#5955012">err</a></span>&nbsp;<span class="op" id="5955061">==</span>&nbsp;<span class="builtintype" id="5955064">nil</span>&nbsp;<span class="op" id="5955068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955074">name</span>&nbsp;<span class="op" id="5955079">:=</span>&nbsp;<span class="ident" id="5955082"><a href="/gostd/go/parser/interface.go.html#5955007">src</a></span><span class="op" id="5955085">.</span><span class="ident" id="5955086"><a href="/gostd/go/ast/ast.go.html#3824009">Name</a></span><span class="op" id="5955090">.</span><span class="ident" id="5955091"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955100">pkg</span><span class="op" id="5955103">,</span>&nbsp;<span class="ident" id="5955105">found</span>&nbsp;<span class="op" id="5955111">:=</span>&nbsp;<span class="ident" id="5955114"><a href="/gostd/go/parser/interface.go.html#5954622">pkgs</a></span><span class="op" id="5955118">[</span><span class="ident" id="5955119"><a href="/gostd/go/parser/interface.go.html#5955074">name</a></span><span class="op" id="5955123">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955129">if</span>&nbsp;<span class="op" id="5955132">!</span><span class="ident" id="5955133"><a href="/gostd/go/parser/interface.go.html#5955105">found</a></span>&nbsp;<span class="op" id="5955139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955146"><a href="/gostd/go/parser/interface.go.html#5955100">pkg</a></span>&nbsp;<span class="op" id="5955150">=</span>&nbsp;<span class="op" id="5955152">&amp;</span><span class="ident" id="5955153"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5955156">.</span><span class="ident" id="5955157"><a href="/gostd/go/ast/ast.go.html#3824638">Package</a></span><span class="op" id="5955164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955172"><a href="/gostd/go/ast/ast.go.html#3824656">Name</a></span><span class="op" id="5955176">:</span>&nbsp;&nbsp;<span class="ident" id="5955179"><a href="/gostd/go/parser/interface.go.html#5955074">name</a></span><span class="op" id="5955183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955191"><a href="/gostd/go/ast/ast.go.html#3824829">Files</a></span><span class="op" id="5955196">:</span>&nbsp;<span class="builtinfunc" id="5955198">make</span><span class="op" id="5955202">(</span><span class="keyword" id="5955203">map</span><span class="op" id="5955206">[</span><span class="builtintype" id="5955207">string</span><span class="op" id="5955213">]</span><span class="op" id="5955214">*</span><span class="ident" id="5955215"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5955218">.</span><span class="ident" id="5955219"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5955223">)</span><span class="op" id="5955224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955231">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955238"><a href="/gostd/go/parser/interface.go.html#5954622">pkgs</a></span><span class="op" id="5955242">[</span><span class="ident" id="5955243"><a href="/gostd/go/parser/interface.go.html#5955074">name</a></span><span class="op" id="5955247">]</span>&nbsp;<span class="op" id="5955249">=</span>&nbsp;<span class="ident" id="5955251"><a href="/gostd/go/parser/interface.go.html#5955100">pkg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955265"><a href="/gostd/go/parser/interface.go.html#5955100">pkg</a></span><span class="op" id="5955268">.</span><span class="ident" id="5955269"><a href="/gostd/go/ast/ast.go.html#3824829">Files</a></span><span class="op" id="5955274">[</span><span class="ident" id="5955275"><a href="/gostd/go/parser/interface.go.html#5954959">filename</a></span><span class="op" id="5955283">]</span>&nbsp;<span class="op" id="5955285">=</span>&nbsp;<span class="ident" id="5955287"><a href="/gostd/go/parser/interface.go.html#5955007">src</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955294">}</span>&nbsp;<span class="keyword" id="5955296">else</span>&nbsp;<span class="keyword" id="5955301">if</span>&nbsp;<span class="ident" id="5955304"><a href="/gostd/go/parser/interface.go.html#5954652">first</a></span>&nbsp;<span class="op" id="5955310">==</span>&nbsp;<span class="builtintype" id="5955313">nil</span>&nbsp;<span class="op" id="5955317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955323"><a href="/gostd/go/parser/interface.go.html#5954652">first</a></span>&nbsp;<span class="op" id="5955329">=</span>&nbsp;<span class="ident" id="5955331"><a href="/gostd/go/parser/interface.go.html#5955012">err</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5955345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955349">return</span><br>
<span class="lineno">165</span><span class="op" id="5955356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5955359">//&nbsp;ParseExpr&nbsp;is&nbsp;a&nbsp;convenience&nbsp;function&nbsp;for&nbsp;obtaining&nbsp;the&nbsp;AST&nbsp;of&nbsp;an&nbsp;expression&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="5955440">//&nbsp;The&nbsp;position&nbsp;information&nbsp;recorded&nbsp;in&nbsp;the&nbsp;AST&nbsp;is&nbsp;undefined.&nbsp;The&nbsp;filename&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="5955520">//&nbsp;in&nbsp;error&nbsp;messages&nbsp;is&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno">170</span><span class="comment" id="5955562">//</span><br>
<span class="lineno"></span><span class="keyword" id="5955565">func</span>&nbsp;<span class="ident" id="5955570">ParseExpr</span><span class="op" id="5955579">(</span><span class="ident" id="5955580">x</span>&nbsp;<span class="builtintype" id="5955582">string</span><span class="op" id="5955588">)</span>&nbsp;<span class="op" id="5955590">(</span><span class="ident" id="5955591"><a href="/gostd/go/parser/interface.go.html#5950574">ast</a></span><span class="op" id="5955594">.</span><span class="ident" id="5955595"><a href="/gostd/go/ast/ast.go.html#3795238">Expr</a></span><span class="op" id="5955599">,</span>&nbsp;<span class="builtintype" id="5955601">error</span><span class="op" id="5955606">)</span>&nbsp;<span class="op" id="5955608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5955611">var</span>&nbsp;<span class="ident" id="5955615">p</span>&nbsp;<span class="ident" id="5955617"><a href="/gostd/go/parser/parser.go.html#5956882">parser</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955625"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955626">.</span><span class="ident" id="5955627"><a href="/gostd/go/parser/parser.go.html#5958333">init</a></span><span class="op" id="5955631">(</span><span class="ident" id="5955632"><a href="/gostd/go/parser/interface.go.html#5950584">token</a></span><span class="op" id="5955637">.</span><span class="ident" id="5955638"><a href="/gostd/go/token/position.go.html#3883646">NewFileSet</a></span><span class="op" id="5955648">(</span><span class="op" id="5955649">)</span><span class="op" id="5955650">,</span>&nbsp;<span class="string" id="5955652">&#34;&#34;</span><span class="op" id="5955654">,</span>&nbsp;<span class="op" id="5955656">[</span><span class="op" id="5955657">]</span><span class="builtintype" id="5955658">byte</span><span class="op" id="5955662">(</span><span class="ident" id="5955663"><a href="/gostd/go/parser/interface.go.html#5955580">x</a></span><span class="op" id="5955664">)</span><span class="op" id="5955665">,</span>&nbsp;<span class="num" id="5955667">0</span><span class="op" id="5955668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955672">//&nbsp;Set&nbsp;up&nbsp;pkg-level&nbsp;scopes&nbsp;to&nbsp;avoid&nbsp;nil-pointer&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955729">//&nbsp;This&nbsp;is&nbsp;not&nbsp;needed&nbsp;for&nbsp;a&nbsp;correct&nbsp;expression&nbsp;x&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955786">//&nbsp;parser&nbsp;will&nbsp;be&nbsp;ok&nbsp;with&nbsp;a&nbsp;nil&nbsp;topScope,&nbsp;but&nbsp;be&nbsp;cautious</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5955845">//&nbsp;in&nbsp;case&nbsp;of&nbsp;an&nbsp;erroneous&nbsp;x.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955876"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955877">.</span><span class="ident" id="5955878"><a href="/gostd/go/parser/parser.go.html#5958857">openScope</a></span><span class="op" id="5955887">(</span><span class="op" id="5955888">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955891"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955892">.</span><span class="ident" id="5955893"><a href="/gostd/go/parser/parser.go.html#5957907">pkgScope</a></span>&nbsp;<span class="op" id="5955902">=</span>&nbsp;<span class="ident" id="5955904"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955905">.</span><span class="ident" id="5955906"><a href="/gostd/go/parser/parser.go.html#5957962">topScope</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955916">e</span>&nbsp;<span class="op" id="5955918">:=</span>&nbsp;<span class="ident" id="5955921"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955922">.</span><span class="ident" id="5955923"><a href="/gostd/go/parser/parser.go.html#5997735">parseRhsOrType</a></span><span class="op" id="5955937">(</span><span class="op" id="5955938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955941"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955942">.</span><span class="ident" id="5955943"><a href="/gostd/go/parser/parser.go.html#5958930">closeScope</a></span><span class="op" id="5955953">(</span><span class="op" id="5955954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5955957"><a href="/gostd/go/parser/parser.go.html#5968558">assert</a></span><span class="op" id="5955963">(</span><span class="ident" id="5955964"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5955965">.</span><span class="ident" id="5955966"><a href="/gostd/go/parser/parser.go.html#5957962">topScope</a></span>&nbsp;<span class="op" id="5955975">==</span>&nbsp;<span class="builtintype" id="5955978">nil</span><span class="op" id="5955981">,</span>&nbsp;<span class="string" id="5955983">&#34;unbalanced&nbsp;scopes&#34;</span><span class="op" id="5956002">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5956006">//&nbsp;If&nbsp;a&nbsp;semicolon&nbsp;was&nbsp;inserted,&nbsp;consume&nbsp;it;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5956051">//&nbsp;report&nbsp;an&nbsp;error&nbsp;if&nbsp;there&#39;s&nbsp;more&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956095">if</span>&nbsp;<span class="ident" id="5956098"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956099">.</span><span class="ident" id="5956100"><a href="/gostd/go/parser/parser.go.html#5957317">tok</a></span>&nbsp;<span class="op" id="5956104">==</span>&nbsp;<span class="ident" id="5956107"><a href="/gostd/go/parser/interface.go.html#5950584">token</a></span><span class="op" id="5956112">.</span><span class="ident" id="5956113"><a href="/gostd/go/token/token.go.html#3890677">SEMICOLON</a></span>&nbsp;<span class="op" id="5956123">&amp;&amp;</span>&nbsp;<span class="ident" id="5956126"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956127">.</span><span class="ident" id="5956128"><a href="/gostd/go/parser/parser.go.html#5957358">lit</a></span>&nbsp;<span class="op" id="5956132">==</span>&nbsp;<span class="string" id="5956135">&#34;\n&#34;</span>&nbsp;<span class="op" id="5956140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956144"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956145">.</span><span class="ident" id="5956146"><a href="/gostd/go/parser/parser.go.html#5965636">next</a></span><span class="op" id="5956150">(</span><span class="op" id="5956151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956154">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956157"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956158">.</span><span class="ident" id="5956159"><a href="/gostd/go/parser/parser.go.html#5967504">expect</a></span><span class="op" id="5956165">(</span><span class="ident" id="5956166"><a href="/gostd/go/parser/interface.go.html#5950584">token</a></span><span class="op" id="5956171">.</span><span class="ident" id="5956172"><a href="/gostd/go/token/token.go.html#3889706">EOF</a></span><span class="op" id="5956175">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956179">if</span>&nbsp;<span class="ident" id="5956182"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956183">.</span><span class="ident" id="5956184"><a href="/gostd/go/parser/parser.go.html#5956920">errors</a></span><span class="op" id="5956190">.</span><span class="ident" id="5956191"><a href="/gostd/go/scanner/errors.go.html#3895915">Len</a></span><span class="op" id="5956194">(</span><span class="op" id="5956195">)</span>&nbsp;<span class="op" id="5956197">&gt;</span>&nbsp;<span class="num" id="5956199">0</span>&nbsp;<span class="op" id="5956201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5956205"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956206">.</span><span class="ident" id="5956207"><a href="/gostd/go/parser/parser.go.html#5956920">errors</a></span><span class="op" id="5956213">.</span><span class="ident" id="5956214"><a href="/gostd/go/scanner/errors.go.html#3896610">Sort</a></span><span class="op" id="5956218">(</span><span class="op" id="5956219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956223">return</span>&nbsp;<span class="builtintype" id="5956230">nil</span><span class="op" id="5956233">,</span>&nbsp;<span class="ident" id="5956235"><a href="/gostd/go/parser/interface.go.html#5955615">p</a></span><span class="op" id="5956236">.</span><span class="ident" id="5956237"><a href="/gostd/go/parser/parser.go.html#5956920">errors</a></span><span class="op" id="5956243">.</span><span class="ident" id="5956244"><a href="/gostd/go/scanner/errors.go.html#3897358">Err</a></span><span class="op" id="5956247">(</span><span class="op" id="5956248">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5956251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5956255">return</span>&nbsp;<span class="ident" id="5956262"><a href="/gostd/go/parser/interface.go.html#5955916">e</a></span><span class="op" id="5956263">,</span>&nbsp;<span class="builtintype" id="5956265">nil</span><br>
<span class="lineno"></span><span class="op" id="5956269">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
