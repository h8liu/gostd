<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7794202">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7794257">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7794311">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7794362">package</span>&nbsp;<span class="ident" id="7794370">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794377">import</span>&nbsp;<span class="op" id="7794384">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794387">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794396">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794403">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794409">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794422">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794433">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7794441">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="7794451">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794454">type</span>&nbsp;<span class="ident" id="7794459">deflateTest</span>&nbsp;<span class="keyword" id="7794471">struct</span>&nbsp;<span class="op" id="7794478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794481">in</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7794487">[</span><span class="op" id="7794488">]</span><span class="builtintype" id="7794489">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794495">level</span>&nbsp;<span class="builtintype" id="7794501">int</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794506">out</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7794512">[</span><span class="op" id="7794513">]</span><span class="builtintype" id="7794514">byte</span><br>
<span class="lineno"></span><span class="op" id="7794519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794522">type</span>&nbsp;<span class="ident" id="7794527">deflateInflateTest</span>&nbsp;<span class="keyword" id="7794546">struct</span>&nbsp;<span class="op" id="7794553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794556">in</span>&nbsp;<span class="op" id="7794559">[</span><span class="op" id="7794560">]</span><span class="builtintype" id="7794561">byte</span><br>
<span class="lineno">25</span><span class="op" id="7794566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794569">type</span>&nbsp;<span class="ident" id="7794574">reverseBitsTest</span>&nbsp;<span class="keyword" id="7794590">struct</span>&nbsp;<span class="op" id="7794597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794600">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7794609">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794617">bitCount</span>&nbsp;<span class="builtintype" id="7794626">uint8</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7794633">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7794642">uint16</span><br>
<span class="lineno"></span><span class="op" id="7794649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7794652">var</span>&nbsp;<span class="ident" id="7794656">deflateTests</span>&nbsp;<span class="op" id="7794669">=</span>&nbsp;<span class="op" id="7794671">[</span><span class="op" id="7794672">]</span><span class="op" id="7794673">*</span><span class="ident" id="7794674"><a href="/compress/flate/deflate_test.go.html#7794459">deflateTest</a></span><span class="op" id="7794685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794688">{</span><span class="op" id="7794689">[</span><span class="op" id="7794690">]</span><span class="builtintype" id="7794691">byte</span><span class="op" id="7794695">{</span><span class="op" id="7794696">}</span><span class="op" id="7794697">,</span>&nbsp;<span class="num" id="7794699">0</span><span class="op" id="7794700">,</span>&nbsp;<span class="op" id="7794702">[</span><span class="op" id="7794703">]</span><span class="builtintype" id="7794704">byte</span><span class="op" id="7794708">{</span><span class="num" id="7794709">1</span><span class="op" id="7794710">,</span>&nbsp;<span class="num" id="7794712">0</span><span class="op" id="7794713">,</span>&nbsp;<span class="num" id="7794715">0</span><span class="op" id="7794716">,</span>&nbsp;<span class="num" id="7794718">255</span><span class="op" id="7794721">,</span>&nbsp;<span class="num" id="7794723">255</span><span class="op" id="7794726">}</span><span class="op" id="7794727">}</span><span class="op" id="7794728">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794731">{</span><span class="op" id="7794732">[</span><span class="op" id="7794733">]</span><span class="builtintype" id="7794734">byte</span><span class="op" id="7794738">{</span><span class="num" id="7794739">0x11</span><span class="op" id="7794743">}</span><span class="op" id="7794744">,</span>&nbsp;<span class="op" id="7794746">-</span><span class="num" id="7794747">1</span><span class="op" id="7794748">,</span>&nbsp;<span class="op" id="7794750">[</span><span class="op" id="7794751">]</span><span class="builtintype" id="7794752">byte</span><span class="op" id="7794756">{</span><span class="num" id="7794757">18</span><span class="op" id="7794759">,</span>&nbsp;<span class="num" id="7794761">4</span><span class="op" id="7794762">,</span>&nbsp;<span class="num" id="7794764">4</span><span class="op" id="7794765">,</span>&nbsp;<span class="num" id="7794767">0</span><span class="op" id="7794768">,</span>&nbsp;<span class="num" id="7794770">0</span><span class="op" id="7794771">,</span>&nbsp;<span class="num" id="7794773">255</span><span class="op" id="7794776">,</span>&nbsp;<span class="num" id="7794778">255</span><span class="op" id="7794781">}</span><span class="op" id="7794782">}</span><span class="op" id="7794783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794786">{</span><span class="op" id="7794787">[</span><span class="op" id="7794788">]</span><span class="builtintype" id="7794789">byte</span><span class="op" id="7794793">{</span><span class="num" id="7794794">0x11</span><span class="op" id="7794798">}</span><span class="op" id="7794799">,</span>&nbsp;<span class="ident" id="7794801"><a href="/compress/flate/deflate.go.html#4310281">DefaultCompression</a></span><span class="op" id="7794819">,</span>&nbsp;<span class="op" id="7794821">[</span><span class="op" id="7794822">]</span><span class="builtintype" id="7794823">byte</span><span class="op" id="7794827">{</span><span class="num" id="7794828">18</span><span class="op" id="7794830">,</span>&nbsp;<span class="num" id="7794832">4</span><span class="op" id="7794833">,</span>&nbsp;<span class="num" id="7794835">4</span><span class="op" id="7794836">,</span>&nbsp;<span class="num" id="7794838">0</span><span class="op" id="7794839">,</span>&nbsp;<span class="num" id="7794841">0</span><span class="op" id="7794842">,</span>&nbsp;<span class="num" id="7794844">255</span><span class="op" id="7794847">,</span>&nbsp;<span class="num" id="7794849">255</span><span class="op" id="7794852">}</span><span class="op" id="7794853">}</span><span class="op" id="7794854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794857">{</span><span class="op" id="7794858">[</span><span class="op" id="7794859">]</span><span class="builtintype" id="7794860">byte</span><span class="op" id="7794864">{</span><span class="num" id="7794865">0x11</span><span class="op" id="7794869">}</span><span class="op" id="7794870">,</span>&nbsp;<span class="num" id="7794872">4</span><span class="op" id="7794873">,</span>&nbsp;<span class="op" id="7794875">[</span><span class="op" id="7794876">]</span><span class="builtintype" id="7794877">byte</span><span class="op" id="7794881">{</span><span class="num" id="7794882">18</span><span class="op" id="7794884">,</span>&nbsp;<span class="num" id="7794886">4</span><span class="op" id="7794887">,</span>&nbsp;<span class="num" id="7794889">4</span><span class="op" id="7794890">,</span>&nbsp;<span class="num" id="7794892">0</span><span class="op" id="7794893">,</span>&nbsp;<span class="num" id="7794895">0</span><span class="op" id="7794896">,</span>&nbsp;<span class="num" id="7794898">255</span><span class="op" id="7794901">,</span>&nbsp;<span class="num" id="7794903">255</span><span class="op" id="7794906">}</span><span class="op" id="7794907">}</span><span class="op" id="7794908">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794912">{</span><span class="op" id="7794913">[</span><span class="op" id="7794914">]</span><span class="builtintype" id="7794915">byte</span><span class="op" id="7794919">{</span><span class="num" id="7794920">0x11</span><span class="op" id="7794924">}</span><span class="op" id="7794925">,</span>&nbsp;<span class="num" id="7794927">0</span><span class="op" id="7794928">,</span>&nbsp;<span class="op" id="7794930">[</span><span class="op" id="7794931">]</span><span class="builtintype" id="7794932">byte</span><span class="op" id="7794936">{</span><span class="num" id="7794937">0</span><span class="op" id="7794938">,</span>&nbsp;<span class="num" id="7794940">1</span><span class="op" id="7794941">,</span>&nbsp;<span class="num" id="7794943">0</span><span class="op" id="7794944">,</span>&nbsp;<span class="num" id="7794946">254</span><span class="op" id="7794949">,</span>&nbsp;<span class="num" id="7794951">255</span><span class="op" id="7794954">,</span>&nbsp;<span class="num" id="7794956">17</span><span class="op" id="7794958">,</span>&nbsp;<span class="num" id="7794960">1</span><span class="op" id="7794961">,</span>&nbsp;<span class="num" id="7794963">0</span><span class="op" id="7794964">,</span>&nbsp;<span class="num" id="7794966">0</span><span class="op" id="7794967">,</span>&nbsp;<span class="num" id="7794969">255</span><span class="op" id="7794972">,</span>&nbsp;<span class="num" id="7794974">255</span><span class="op" id="7794977">}</span><span class="op" id="7794978">}</span><span class="op" id="7794979">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7794982">{</span><span class="op" id="7794983">[</span><span class="op" id="7794984">]</span><span class="builtintype" id="7794985">byte</span><span class="op" id="7794989">{</span><span class="num" id="7794990">0x11</span><span class="op" id="7794994">,</span>&nbsp;<span class="num" id="7794996">0x12</span><span class="op" id="7795000">}</span><span class="op" id="7795001">,</span>&nbsp;<span class="num" id="7795003">0</span><span class="op" id="7795004">,</span>&nbsp;<span class="op" id="7795006">[</span><span class="op" id="7795007">]</span><span class="builtintype" id="7795008">byte</span><span class="op" id="7795012">{</span><span class="num" id="7795013">0</span><span class="op" id="7795014">,</span>&nbsp;<span class="num" id="7795016">2</span><span class="op" id="7795017">,</span>&nbsp;<span class="num" id="7795019">0</span><span class="op" id="7795020">,</span>&nbsp;<span class="num" id="7795022">253</span><span class="op" id="7795025">,</span>&nbsp;<span class="num" id="7795027">255</span><span class="op" id="7795030">,</span>&nbsp;<span class="num" id="7795032">17</span><span class="op" id="7795034">,</span>&nbsp;<span class="num" id="7795036">18</span><span class="op" id="7795038">,</span>&nbsp;<span class="num" id="7795040">1</span><span class="op" id="7795041">,</span>&nbsp;<span class="num" id="7795043">0</span><span class="op" id="7795044">,</span>&nbsp;<span class="num" id="7795046">0</span><span class="op" id="7795047">,</span>&nbsp;<span class="num" id="7795049">255</span><span class="op" id="7795052">,</span>&nbsp;<span class="num" id="7795054">255</span><span class="op" id="7795057">}</span><span class="op" id="7795058">}</span><span class="op" id="7795059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795062">{</span><span class="op" id="7795063">[</span><span class="op" id="7795064">]</span><span class="builtintype" id="7795065">byte</span><span class="op" id="7795069">{</span><span class="num" id="7795070">0x11</span><span class="op" id="7795074">,</span>&nbsp;<span class="num" id="7795076">0x11</span><span class="op" id="7795080">,</span>&nbsp;<span class="num" id="7795082">0x11</span><span class="op" id="7795086">,</span>&nbsp;<span class="num" id="7795088">0x11</span><span class="op" id="7795092">,</span>&nbsp;<span class="num" id="7795094">0x11</span><span class="op" id="7795098">,</span>&nbsp;<span class="num" id="7795100">0x11</span><span class="op" id="7795104">,</span>&nbsp;<span class="num" id="7795106">0x11</span><span class="op" id="7795110">,</span>&nbsp;<span class="num" id="7795112">0x11</span><span class="op" id="7795116">}</span><span class="op" id="7795117">,</span>&nbsp;<span class="num" id="7795119">0</span><span class="op" id="7795120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795124">[</span><span class="op" id="7795125">]</span><span class="builtintype" id="7795126">byte</span><span class="op" id="7795130">{</span><span class="num" id="7795131">0</span><span class="op" id="7795132">,</span>&nbsp;<span class="num" id="7795134">8</span><span class="op" id="7795135">,</span>&nbsp;<span class="num" id="7795137">0</span><span class="op" id="7795138">,</span>&nbsp;<span class="num" id="7795140">247</span><span class="op" id="7795143">,</span>&nbsp;<span class="num" id="7795145">255</span><span class="op" id="7795148">,</span>&nbsp;<span class="num" id="7795150">17</span><span class="op" id="7795152">,</span>&nbsp;<span class="num" id="7795154">17</span><span class="op" id="7795156">,</span>&nbsp;<span class="num" id="7795158">17</span><span class="op" id="7795160">,</span>&nbsp;<span class="num" id="7795162">17</span><span class="op" id="7795164">,</span>&nbsp;<span class="num" id="7795166">17</span><span class="op" id="7795168">,</span>&nbsp;<span class="num" id="7795170">17</span><span class="op" id="7795172">,</span>&nbsp;<span class="num" id="7795174">17</span><span class="op" id="7795176">,</span>&nbsp;<span class="num" id="7795178">17</span><span class="op" id="7795180">,</span>&nbsp;<span class="num" id="7795182">1</span><span class="op" id="7795183">,</span>&nbsp;<span class="num" id="7795185">0</span><span class="op" id="7795186">,</span>&nbsp;<span class="num" id="7795188">0</span><span class="op" id="7795189">,</span>&nbsp;<span class="num" id="7795191">255</span><span class="op" id="7795194">,</span>&nbsp;<span class="num" id="7795196">255</span><span class="op" id="7795199">}</span><span class="op" id="7795200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795203">}</span><span class="op" id="7795204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795207">{</span><span class="op" id="7795208">[</span><span class="op" id="7795209">]</span><span class="builtintype" id="7795210">byte</span><span class="op" id="7795214">{</span><span class="op" id="7795215">}</span><span class="op" id="7795216">,</span>&nbsp;<span class="num" id="7795218">1</span><span class="op" id="7795219">,</span>&nbsp;<span class="op" id="7795221">[</span><span class="op" id="7795222">]</span><span class="builtintype" id="7795223">byte</span><span class="op" id="7795227">{</span><span class="num" id="7795228">1</span><span class="op" id="7795229">,</span>&nbsp;<span class="num" id="7795231">0</span><span class="op" id="7795232">,</span>&nbsp;<span class="num" id="7795234">0</span><span class="op" id="7795235">,</span>&nbsp;<span class="num" id="7795237">255</span><span class="op" id="7795240">,</span>&nbsp;<span class="num" id="7795242">255</span><span class="op" id="7795245">}</span><span class="op" id="7795246">}</span><span class="op" id="7795247">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795250">{</span><span class="op" id="7795251">[</span><span class="op" id="7795252">]</span><span class="builtintype" id="7795253">byte</span><span class="op" id="7795257">{</span><span class="num" id="7795258">0x11</span><span class="op" id="7795262">}</span><span class="op" id="7795263">,</span>&nbsp;<span class="num" id="7795265">1</span><span class="op" id="7795266">,</span>&nbsp;<span class="op" id="7795268">[</span><span class="op" id="7795269">]</span><span class="builtintype" id="7795270">byte</span><span class="op" id="7795274">{</span><span class="num" id="7795275">18</span><span class="op" id="7795277">,</span>&nbsp;<span class="num" id="7795279">4</span><span class="op" id="7795280">,</span>&nbsp;<span class="num" id="7795282">4</span><span class="op" id="7795283">,</span>&nbsp;<span class="num" id="7795285">0</span><span class="op" id="7795286">,</span>&nbsp;<span class="num" id="7795288">0</span><span class="op" id="7795289">,</span>&nbsp;<span class="num" id="7795291">255</span><span class="op" id="7795294">,</span>&nbsp;<span class="num" id="7795296">255</span><span class="op" id="7795299">}</span><span class="op" id="7795300">}</span><span class="op" id="7795301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795304">{</span><span class="op" id="7795305">[</span><span class="op" id="7795306">]</span><span class="builtintype" id="7795307">byte</span><span class="op" id="7795311">{</span><span class="num" id="7795312">0x11</span><span class="op" id="7795316">,</span>&nbsp;<span class="num" id="7795318">0x12</span><span class="op" id="7795322">}</span><span class="op" id="7795323">,</span>&nbsp;<span class="num" id="7795325">1</span><span class="op" id="7795326">,</span>&nbsp;<span class="op" id="7795328">[</span><span class="op" id="7795329">]</span><span class="builtintype" id="7795330">byte</span><span class="op" id="7795334">{</span><span class="num" id="7795335">18</span><span class="op" id="7795337">,</span>&nbsp;<span class="num" id="7795339">20</span><span class="op" id="7795341">,</span>&nbsp;<span class="num" id="7795343">2</span><span class="op" id="7795344">,</span>&nbsp;<span class="num" id="7795346">4</span><span class="op" id="7795347">,</span>&nbsp;<span class="num" id="7795349">0</span><span class="op" id="7795350">,</span>&nbsp;<span class="num" id="7795352">0</span><span class="op" id="7795353">,</span>&nbsp;<span class="num" id="7795355">255</span><span class="op" id="7795358">,</span>&nbsp;<span class="num" id="7795360">255</span><span class="op" id="7795363">}</span><span class="op" id="7795364">}</span><span class="op" id="7795365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795368">{</span><span class="op" id="7795369">[</span><span class="op" id="7795370">]</span><span class="builtintype" id="7795371">byte</span><span class="op" id="7795375">{</span><span class="num" id="7795376">0x11</span><span class="op" id="7795380">,</span>&nbsp;<span class="num" id="7795382">0x11</span><span class="op" id="7795386">,</span>&nbsp;<span class="num" id="7795388">0x11</span><span class="op" id="7795392">,</span>&nbsp;<span class="num" id="7795394">0x11</span><span class="op" id="7795398">,</span>&nbsp;<span class="num" id="7795400">0x11</span><span class="op" id="7795404">,</span>&nbsp;<span class="num" id="7795406">0x11</span><span class="op" id="7795410">,</span>&nbsp;<span class="num" id="7795412">0x11</span><span class="op" id="7795416">,</span>&nbsp;<span class="num" id="7795418">0x11</span><span class="op" id="7795422">}</span><span class="op" id="7795423">,</span>&nbsp;<span class="num" id="7795425">1</span><span class="op" id="7795426">,</span>&nbsp;<span class="op" id="7795428">[</span><span class="op" id="7795429">]</span><span class="builtintype" id="7795430">byte</span><span class="op" id="7795434">{</span><span class="num" id="7795435">18</span><span class="op" id="7795437">,</span>&nbsp;<span class="num" id="7795439">132</span><span class="op" id="7795442">,</span>&nbsp;<span class="num" id="7795444">2</span><span class="op" id="7795445">,</span>&nbsp;<span class="num" id="7795447">64</span><span class="op" id="7795449">,</span>&nbsp;<span class="num" id="7795451">0</span><span class="op" id="7795452">,</span>&nbsp;<span class="num" id="7795454">0</span><span class="op" id="7795455">,</span>&nbsp;<span class="num" id="7795457">0</span><span class="op" id="7795458">,</span>&nbsp;<span class="num" id="7795460">255</span><span class="op" id="7795463">,</span>&nbsp;<span class="num" id="7795465">255</span><span class="op" id="7795468">}</span><span class="op" id="7795469">}</span><span class="op" id="7795470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795473">{</span><span class="op" id="7795474">[</span><span class="op" id="7795475">]</span><span class="builtintype" id="7795476">byte</span><span class="op" id="7795480">{</span><span class="op" id="7795481">}</span><span class="op" id="7795482">,</span>&nbsp;<span class="num" id="7795484">9</span><span class="op" id="7795485">,</span>&nbsp;<span class="op" id="7795487">[</span><span class="op" id="7795488">]</span><span class="builtintype" id="7795489">byte</span><span class="op" id="7795493">{</span><span class="num" id="7795494">1</span><span class="op" id="7795495">,</span>&nbsp;<span class="num" id="7795497">0</span><span class="op" id="7795498">,</span>&nbsp;<span class="num" id="7795500">0</span><span class="op" id="7795501">,</span>&nbsp;<span class="num" id="7795503">255</span><span class="op" id="7795506">,</span>&nbsp;<span class="num" id="7795508">255</span><span class="op" id="7795511">}</span><span class="op" id="7795512">}</span><span class="op" id="7795513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795516">{</span><span class="op" id="7795517">[</span><span class="op" id="7795518">]</span><span class="builtintype" id="7795519">byte</span><span class="op" id="7795523">{</span><span class="num" id="7795524">0x11</span><span class="op" id="7795528">}</span><span class="op" id="7795529">,</span>&nbsp;<span class="num" id="7795531">9</span><span class="op" id="7795532">,</span>&nbsp;<span class="op" id="7795534">[</span><span class="op" id="7795535">]</span><span class="builtintype" id="7795536">byte</span><span class="op" id="7795540">{</span><span class="num" id="7795541">18</span><span class="op" id="7795543">,</span>&nbsp;<span class="num" id="7795545">4</span><span class="op" id="7795546">,</span>&nbsp;<span class="num" id="7795548">4</span><span class="op" id="7795549">,</span>&nbsp;<span class="num" id="7795551">0</span><span class="op" id="7795552">,</span>&nbsp;<span class="num" id="7795554">0</span><span class="op" id="7795555">,</span>&nbsp;<span class="num" id="7795557">255</span><span class="op" id="7795560">,</span>&nbsp;<span class="num" id="7795562">255</span><span class="op" id="7795565">}</span><span class="op" id="7795566">}</span><span class="op" id="7795567">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795570">{</span><span class="op" id="7795571">[</span><span class="op" id="7795572">]</span><span class="builtintype" id="7795573">byte</span><span class="op" id="7795577">{</span><span class="num" id="7795578">0x11</span><span class="op" id="7795582">,</span>&nbsp;<span class="num" id="7795584">0x12</span><span class="op" id="7795588">}</span><span class="op" id="7795589">,</span>&nbsp;<span class="num" id="7795591">9</span><span class="op" id="7795592">,</span>&nbsp;<span class="op" id="7795594">[</span><span class="op" id="7795595">]</span><span class="builtintype" id="7795596">byte</span><span class="op" id="7795600">{</span><span class="num" id="7795601">18</span><span class="op" id="7795603">,</span>&nbsp;<span class="num" id="7795605">20</span><span class="op" id="7795607">,</span>&nbsp;<span class="num" id="7795609">2</span><span class="op" id="7795610">,</span>&nbsp;<span class="num" id="7795612">4</span><span class="op" id="7795613">,</span>&nbsp;<span class="num" id="7795615">0</span><span class="op" id="7795616">,</span>&nbsp;<span class="num" id="7795618">0</span><span class="op" id="7795619">,</span>&nbsp;<span class="num" id="7795621">255</span><span class="op" id="7795624">,</span>&nbsp;<span class="num" id="7795626">255</span><span class="op" id="7795629">}</span><span class="op" id="7795630">}</span><span class="op" id="7795631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795634">{</span><span class="op" id="7795635">[</span><span class="op" id="7795636">]</span><span class="builtintype" id="7795637">byte</span><span class="op" id="7795641">{</span><span class="num" id="7795642">0x11</span><span class="op" id="7795646">,</span>&nbsp;<span class="num" id="7795648">0x11</span><span class="op" id="7795652">,</span>&nbsp;<span class="num" id="7795654">0x11</span><span class="op" id="7795658">,</span>&nbsp;<span class="num" id="7795660">0x11</span><span class="op" id="7795664">,</span>&nbsp;<span class="num" id="7795666">0x11</span><span class="op" id="7795670">,</span>&nbsp;<span class="num" id="7795672">0x11</span><span class="op" id="7795676">,</span>&nbsp;<span class="num" id="7795678">0x11</span><span class="op" id="7795682">,</span>&nbsp;<span class="num" id="7795684">0x11</span><span class="op" id="7795688">}</span><span class="op" id="7795689">,</span>&nbsp;<span class="num" id="7795691">9</span><span class="op" id="7795692">,</span>&nbsp;<span class="op" id="7795694">[</span><span class="op" id="7795695">]</span><span class="builtintype" id="7795696">byte</span><span class="op" id="7795700">{</span><span class="num" id="7795701">18</span><span class="op" id="7795703">,</span>&nbsp;<span class="num" id="7795705">132</span><span class="op" id="7795708">,</span>&nbsp;<span class="num" id="7795710">2</span><span class="op" id="7795711">,</span>&nbsp;<span class="num" id="7795713">64</span><span class="op" id="7795715">,</span>&nbsp;<span class="num" id="7795717">0</span><span class="op" id="7795718">,</span>&nbsp;<span class="num" id="7795720">0</span><span class="op" id="7795721">,</span>&nbsp;<span class="num" id="7795723">0</span><span class="op" id="7795724">,</span>&nbsp;<span class="num" id="7795726">255</span><span class="op" id="7795729">,</span>&nbsp;<span class="num" id="7795731">255</span><span class="op" id="7795734">}</span><span class="op" id="7795735">}</span><span class="op" id="7795736">,</span><br>
<span class="lineno"></span><span class="op" id="7795738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7795741">var</span>&nbsp;<span class="ident" id="7795745">deflateInflateTests</span>&nbsp;<span class="op" id="7795765">=</span>&nbsp;<span class="op" id="7795767">[</span><span class="op" id="7795768">]</span><span class="op" id="7795769">*</span><span class="ident" id="7795770"><a href="/compress/flate/deflate_test.go.html#7794527">deflateInflateTest</a></span><span class="op" id="7795788">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795791">{</span><span class="op" id="7795792">[</span><span class="op" id="7795793">]</span><span class="builtintype" id="7795794">byte</span><span class="op" id="7795798">{</span><span class="op" id="7795799">}</span><span class="op" id="7795800">}</span><span class="op" id="7795801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795804">{</span><span class="op" id="7795805">[</span><span class="op" id="7795806">]</span><span class="builtintype" id="7795807">byte</span><span class="op" id="7795811">{</span><span class="num" id="7795812">0x11</span><span class="op" id="7795816">}</span><span class="op" id="7795817">}</span><span class="op" id="7795818">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795821">{</span><span class="op" id="7795822">[</span><span class="op" id="7795823">]</span><span class="builtintype" id="7795824">byte</span><span class="op" id="7795828">{</span><span class="num" id="7795829">0x11</span><span class="op" id="7795833">,</span>&nbsp;<span class="num" id="7795835">0x12</span><span class="op" id="7795839">}</span><span class="op" id="7795840">}</span><span class="op" id="7795841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795844">{</span><span class="op" id="7795845">[</span><span class="op" id="7795846">]</span><span class="builtintype" id="7795847">byte</span><span class="op" id="7795851">{</span><span class="num" id="7795852">0x11</span><span class="op" id="7795856">,</span>&nbsp;<span class="num" id="7795858">0x11</span><span class="op" id="7795862">,</span>&nbsp;<span class="num" id="7795864">0x11</span><span class="op" id="7795868">,</span>&nbsp;<span class="num" id="7795870">0x11</span><span class="op" id="7795874">,</span>&nbsp;<span class="num" id="7795876">0x11</span><span class="op" id="7795880">,</span>&nbsp;<span class="num" id="7795882">0x11</span><span class="op" id="7795886">,</span>&nbsp;<span class="num" id="7795888">0x11</span><span class="op" id="7795892">,</span>&nbsp;<span class="num" id="7795894">0x11</span><span class="op" id="7795898">}</span><span class="op" id="7795899">}</span><span class="op" id="7795900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795903">{</span><span class="op" id="7795904">[</span><span class="op" id="7795905">]</span><span class="builtintype" id="7795906">byte</span><span class="op" id="7795910">{</span><span class="num" id="7795911">0x11</span><span class="op" id="7795915">,</span>&nbsp;<span class="num" id="7795917">0x10</span><span class="op" id="7795921">,</span>&nbsp;<span class="num" id="7795923">0x13</span><span class="op" id="7795927">,</span>&nbsp;<span class="num" id="7795929">0x41</span><span class="op" id="7795933">,</span>&nbsp;<span class="num" id="7795935">0x21</span><span class="op" id="7795939">,</span>&nbsp;<span class="num" id="7795941">0x21</span><span class="op" id="7795945">,</span>&nbsp;<span class="num" id="7795947">0x41</span><span class="op" id="7795951">,</span>&nbsp;<span class="num" id="7795953">0x13</span><span class="op" id="7795957">,</span>&nbsp;<span class="num" id="7795959">0x87</span><span class="op" id="7795963">,</span>&nbsp;<span class="num" id="7795965">0x78</span><span class="op" id="7795969">,</span>&nbsp;<span class="num" id="7795971">0x13</span><span class="op" id="7795975">}</span><span class="op" id="7795976">}</span><span class="op" id="7795977">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7795980">{</span><span class="ident" id="7795981"><a href="/compress/flate/deflate_test.go.html#7796159">largeDataChunk</a></span><span class="op" id="7795995">(</span><span class="op" id="7795996">)</span><span class="op" id="7795997">}</span><span class="op" id="7795998">,</span><br>
<span class="lineno"></span><span class="op" id="7796000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796003">var</span>&nbsp;<span class="ident" id="7796007">reverseBitsTests</span>&nbsp;<span class="op" id="7796024">=</span>&nbsp;<span class="op" id="7796026">[</span><span class="op" id="7796027">]</span><span class="op" id="7796028">*</span><span class="ident" id="7796029"><a href="/compress/flate/deflate_test.go.html#7794574">reverseBitsTest</a></span><span class="op" id="7796044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796047">{</span><span class="num" id="7796048">1</span><span class="op" id="7796049">,</span>&nbsp;<span class="num" id="7796051">1</span><span class="op" id="7796052">,</span>&nbsp;<span class="num" id="7796054">1</span><span class="op" id="7796055">}</span><span class="op" id="7796056">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796059">{</span><span class="num" id="7796060">1</span><span class="op" id="7796061">,</span>&nbsp;<span class="num" id="7796063">2</span><span class="op" id="7796064">,</span>&nbsp;<span class="num" id="7796066">2</span><span class="op" id="7796067">}</span><span class="op" id="7796068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796071">{</span><span class="num" id="7796072">1</span><span class="op" id="7796073">,</span>&nbsp;<span class="num" id="7796075">3</span><span class="op" id="7796076">,</span>&nbsp;<span class="num" id="7796078">4</span><span class="op" id="7796079">}</span><span class="op" id="7796080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796083">{</span><span class="num" id="7796084">1</span><span class="op" id="7796085">,</span>&nbsp;<span class="num" id="7796087">4</span><span class="op" id="7796088">,</span>&nbsp;<span class="num" id="7796090">8</span><span class="op" id="7796091">}</span><span class="op" id="7796092">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796095">{</span><span class="num" id="7796096">1</span><span class="op" id="7796097">,</span>&nbsp;<span class="num" id="7796099">5</span><span class="op" id="7796100">,</span>&nbsp;<span class="num" id="7796102">16</span><span class="op" id="7796104">}</span><span class="op" id="7796105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796108">{</span><span class="num" id="7796109">17</span><span class="op" id="7796111">,</span>&nbsp;<span class="num" id="7796113">5</span><span class="op" id="7796114">,</span>&nbsp;<span class="num" id="7796116">17</span><span class="op" id="7796118">}</span><span class="op" id="7796119">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796122">{</span><span class="num" id="7796123">257</span><span class="op" id="7796126">,</span>&nbsp;<span class="num" id="7796128">9</span><span class="op" id="7796129">,</span>&nbsp;<span class="num" id="7796131">257</span><span class="op" id="7796134">}</span><span class="op" id="7796135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796138">{</span><span class="num" id="7796139">29</span><span class="op" id="7796141">,</span>&nbsp;<span class="num" id="7796143">5</span><span class="op" id="7796144">,</span>&nbsp;<span class="num" id="7796146">23</span><span class="op" id="7796148">}</span><span class="op" id="7796149">,</span><br>
<span class="lineno"></span><span class="op" id="7796151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796154">func</span>&nbsp;<span class="ident" id="7796159">largeDataChunk</span><span class="op" id="7796173">(</span><span class="op" id="7796174">)</span>&nbsp;<span class="op" id="7796176">[</span><span class="op" id="7796177">]</span><span class="builtintype" id="7796178">byte</span>&nbsp;<span class="op" id="7796183">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796186">result</span>&nbsp;<span class="op" id="7796193">:=</span>&nbsp;<span class="builtinfunc" id="7796196">make</span><span class="op" id="7796200">(</span><span class="op" id="7796201">[</span><span class="op" id="7796202">]</span><span class="builtintype" id="7796203">byte</span><span class="op" id="7796207">,</span>&nbsp;<span class="num" id="7796209">100000</span><span class="op" id="7796215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796218">for</span>&nbsp;<span class="ident" id="7796222">i</span>&nbsp;<span class="op" id="7796224">:=</span>&nbsp;<span class="keyword" id="7796227">range</span>&nbsp;<span class="ident" id="7796233"><a href="/compress/flate/deflate_test.go.html#7796186">result</a></span>&nbsp;<span class="op" id="7796240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796244"><a href="/compress/flate/deflate_test.go.html#7796186">result</a></span><span class="op" id="7796250">[</span><span class="ident" id="7796251"><a href="/compress/flate/deflate_test.go.html#7796222">i</a></span><span class="op" id="7796252">]</span>&nbsp;<span class="op" id="7796254">=</span>&nbsp;<span class="builtintype" id="7796256">byte</span><span class="op" id="7796260">(</span><span class="ident" id="7796261"><a href="/compress/flate/deflate_test.go.html#7796222">i</a></span>&nbsp;<span class="op" id="7796263">*</span>&nbsp;<span class="ident" id="7796265"><a href="/compress/flate/deflate_test.go.html#7796222">i</a></span>&nbsp;<span class="op" id="7796267">&amp;</span>&nbsp;<span class="num" id="7796269">0xFF</span><span class="op" id="7796273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796279">return</span>&nbsp;<span class="ident" id="7796286"><a href="/compress/flate/deflate_test.go.html#7796186">result</a></span><br>
<span class="lineno">80</span><span class="op" id="7796293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7796296">func</span>&nbsp;<span class="ident" id="7796301">TestDeflate</span><span class="op" id="7796312">(</span><span class="ident" id="7796313">t</span>&nbsp;<span class="op" id="7796315">*</span><span class="ident" id="7796316"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7796323">.</span><span class="ident" id="7796324">T</span><span class="op" id="7796325">)</span>&nbsp;<span class="op" id="7796327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796330">for</span>&nbsp;<span class="ident" id="7796334">_</span><span class="op" id="7796335">,</span>&nbsp;<span class="ident" id="7796337">h</span>&nbsp;<span class="op" id="7796339">:=</span>&nbsp;<span class="keyword" id="7796342">range</span>&nbsp;<span class="ident" id="7796348"><a href="/compress/flate/deflate_test.go.html#7794656">deflateTests</a></span>&nbsp;<span class="op" id="7796361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796365">var</span>&nbsp;<span class="ident" id="7796369">buf</span>&nbsp;<span class="ident" id="7796373"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7796378">.</span><span class="ident" id="7796379">Buffer</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796388">w</span><span class="op" id="7796389">,</span>&nbsp;<span class="ident" id="7796391">err</span>&nbsp;<span class="op" id="7796395">:=</span>&nbsp;<span class="ident" id="7796398"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7796407">(</span><span class="op" id="7796408">&amp;</span><span class="ident" id="7796409"><a href="/compress/flate/deflate_test.go.html#7796369">buf</a></span><span class="op" id="7796412">,</span>&nbsp;<span class="ident" id="7796414"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796415">.</span><span class="ident" id="7796416">level</span><span class="op" id="7796421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796425">if</span>&nbsp;<span class="ident" id="7796428"><a href="/compress/flate/deflate_test.go.html#7796391">err</a></span>&nbsp;<span class="op" id="7796432">!=</span>&nbsp;<span class="ident" id="7796435">nil</span>&nbsp;<span class="op" id="7796439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796444"><a href="/compress/flate/deflate_test.go.html#7796313">t</a></span><span class="op" id="7796445">.</span><span class="ident" id="7796446">Errorf</span><span class="op" id="7796452">(</span><span class="string" id="7796453">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7796468">,</span>&nbsp;<span class="ident" id="7796470"><a href="/compress/flate/deflate_test.go.html#7796391">err</a></span><span class="op" id="7796473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796478">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796489">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796493"><a href="/compress/flate/deflate_test.go.html#7796388">w</a></span><span class="op" id="7796494">.</span><span class="ident" id="7796495">Write</span><span class="op" id="7796500">(</span><span class="ident" id="7796501"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796502">.</span><span class="ident" id="7796503">in</span><span class="op" id="7796505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796509"><a href="/compress/flate/deflate_test.go.html#7796388">w</a></span><span class="op" id="7796510">.</span><span class="ident" id="7796511">Close</span><span class="op" id="7796516">(</span><span class="op" id="7796517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796521">if</span>&nbsp;<span class="op" id="7796524">!</span><span class="ident" id="7796525"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7796530">.</span><span class="ident" id="7796531">Equal</span><span class="op" id="7796536">(</span><span class="ident" id="7796537"><a href="/compress/flate/deflate_test.go.html#7796369">buf</a></span><span class="op" id="7796540">.</span><span class="ident" id="7796541">Bytes</span><span class="op" id="7796546">(</span><span class="op" id="7796547">)</span><span class="op" id="7796548">,</span>&nbsp;<span class="ident" id="7796550"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796551">.</span><span class="ident" id="7796552">out</span><span class="op" id="7796555">)</span>&nbsp;<span class="op" id="7796557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796562"><a href="/compress/flate/deflate_test.go.html#7796313">t</a></span><span class="op" id="7796563">.</span><span class="ident" id="7796564">Errorf</span><span class="op" id="7796570">(</span><span class="string" id="7796571">&#34;Deflate(%d,&nbsp;%x)&nbsp;=&nbsp;%x,&nbsp;want&nbsp;%x&#34;</span><span class="op" id="7796602">,</span>&nbsp;<span class="ident" id="7796604"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796605">.</span><span class="ident" id="7796606">level</span><span class="op" id="7796611">,</span>&nbsp;<span class="ident" id="7796613"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796614">.</span><span class="ident" id="7796615">in</span><span class="op" id="7796617">,</span>&nbsp;<span class="ident" id="7796619"><a href="/compress/flate/deflate_test.go.html#7796369">buf</a></span><span class="op" id="7796622">.</span><span class="ident" id="7796623">Bytes</span><span class="op" id="7796628">(</span><span class="op" id="7796629">)</span><span class="op" id="7796630">,</span>&nbsp;<span class="ident" id="7796632"><a href="/compress/flate/deflate_test.go.html#7796337">h</a></span><span class="op" id="7796633">.</span><span class="ident" id="7796634">out</span><span class="op" id="7796637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796641">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796644">}</span><br>
<span class="lineno"></span><span class="op" id="7796646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7796649">//&nbsp;A&nbsp;sparseReader&nbsp;returns&nbsp;a&nbsp;stream&nbsp;consisting&nbsp;of&nbsp;0s&nbsp;followed&nbsp;by&nbsp;1&lt;&lt;16&nbsp;1s.</span><br>
<span class="lineno"></span><span class="comment" id="7796723">//&nbsp;This&nbsp;tests&nbsp;missing&nbsp;hash&nbsp;references&nbsp;in&nbsp;a&nbsp;very&nbsp;large&nbsp;input.</span><br>
<span class="lineno">100</span><span class="keyword" id="7796784">type</span>&nbsp;<span class="ident" id="7796789">sparseReader</span>&nbsp;<span class="keyword" id="7796802">struct</span>&nbsp;<span class="op" id="7796809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796812">l</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7796816">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796823">cur</span>&nbsp;<span class="ident" id="7796827">int64</span><br>
<span class="lineno"></span><span class="op" id="7796833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7796836">func</span>&nbsp;<span class="op" id="7796841">(</span><span class="ident" id="7796842">r</span>&nbsp;<span class="op" id="7796844">*</span><span class="ident" id="7796845"><a href="/compress/flate/deflate_test.go.html#7796789">sparseReader</a></span><span class="op" id="7796857">)</span>&nbsp;<span class="ident" id="7796859">Read</span><span class="op" id="7796863">(</span><span class="ident" id="7796864">b</span>&nbsp;<span class="op" id="7796866">[</span><span class="op" id="7796867">]</span><span class="builtintype" id="7796868">byte</span><span class="op" id="7796872">)</span>&nbsp;<span class="op" id="7796874">(</span><span class="ident" id="7796875">n</span>&nbsp;<span class="builtintype" id="7796877">int</span><span class="op" id="7796880">,</span>&nbsp;<span class="ident" id="7796882">err</span>&nbsp;<span class="builtintype" id="7796886">error</span><span class="op" id="7796891">)</span>&nbsp;<span class="op" id="7796893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796896">if</span>&nbsp;<span class="ident" id="7796899"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7796900">.</span><span class="ident" id="7796901">cur</span>&nbsp;<span class="op" id="7796905">&gt;=</span>&nbsp;<span class="ident" id="7796908"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7796909">.</span><span class="ident" id="7796910">l</span>&nbsp;<span class="op" id="7796912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796916">return</span>&nbsp;<span class="num" id="7796923">0</span><span class="op" id="7796924">,</span>&nbsp;<span class="ident" id="7796926"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7796928">.</span><span class="ident" id="7796929">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7796934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796937"><a href="/compress/flate/deflate_test.go.html#7796875">n</a></span>&nbsp;<span class="op" id="7796939">=</span>&nbsp;<span class="builtinfunc" id="7796941">len</span><span class="op" id="7796944">(</span><span class="ident" id="7796945"><a href="/compress/flate/deflate_test.go.html#7796864">b</a></span><span class="op" id="7796946">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796949">cur</span>&nbsp;<span class="op" id="7796953">:=</span>&nbsp;<span class="ident" id="7796956"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7796957">.</span><span class="ident" id="7796958">cur</span>&nbsp;<span class="op" id="7796962">+</span>&nbsp;<span class="ident" id="7796964">int64</span><span class="op" id="7796969">(</span><span class="ident" id="7796970"><a href="/compress/flate/deflate_test.go.html#7796875">n</a></span><span class="op" id="7796971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7796974">if</span>&nbsp;<span class="ident" id="7796977"><a href="/compress/flate/deflate_test.go.html#7796949">cur</a></span>&nbsp;<span class="op" id="7796981">&gt;</span>&nbsp;<span class="ident" id="7796983"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7796984">.</span><span class="ident" id="7796985">l</span>&nbsp;<span class="op" id="7796987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7796991"><a href="/compress/flate/deflate_test.go.html#7796875">n</a></span>&nbsp;<span class="op" id="7796993">-=</span>&nbsp;<span class="builtintype" id="7796996">int</span><span class="op" id="7796999">(</span><span class="ident" id="7797000"><a href="/compress/flate/deflate_test.go.html#7796949">cur</a></span>&nbsp;<span class="op" id="7797004">-</span>&nbsp;<span class="ident" id="7797006"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7797007">.</span><span class="ident" id="7797008">l</span><span class="op" id="7797009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797013"><a href="/compress/flate/deflate_test.go.html#7796949">cur</a></span>&nbsp;<span class="op" id="7797017">=</span>&nbsp;<span class="ident" id="7797019"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7797020">.</span><span class="ident" id="7797021">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797024">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797027">for</span>&nbsp;<span class="ident" id="7797031">i</span>&nbsp;<span class="op" id="7797033">:=</span>&nbsp;<span class="keyword" id="7797036">range</span>&nbsp;<span class="ident" id="7797042"><a href="/compress/flate/deflate_test.go.html#7796864">b</a></span><span class="op" id="7797043">[</span><span class="num" id="7797044">0</span><span class="op" id="7797045">:</span><span class="ident" id="7797046"><a href="/compress/flate/deflate_test.go.html#7796875">n</a></span><span class="op" id="7797047">]</span>&nbsp;<span class="op" id="7797049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797053">if</span>&nbsp;<span class="ident" id="7797056"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7797057">.</span><span class="ident" id="7797058">cur</span><span class="op" id="7797061">+</span><span class="ident" id="7797062">int64</span><span class="op" id="7797067">(</span><span class="ident" id="7797068"><a href="/compress/flate/deflate_test.go.html#7797031">i</a></span><span class="op" id="7797069">)</span>&nbsp;<span class="op" id="7797071">&gt;=</span>&nbsp;<span class="ident" id="7797074"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7797075">.</span><span class="ident" id="7797076">l</span><span class="op" id="7797077">-</span><span class="num" id="7797078">1</span><span class="op" id="7797079">&lt;&lt;</span><span class="num" id="7797081">16</span>&nbsp;<span class="op" id="7797084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797089"><a href="/compress/flate/deflate_test.go.html#7796864">b</a></span><span class="op" id="7797090">[</span><span class="ident" id="7797091"><a href="/compress/flate/deflate_test.go.html#7797031">i</a></span><span class="op" id="7797092">]</span>&nbsp;<span class="op" id="7797094">=</span>&nbsp;<span class="num" id="7797096">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797100">}</span>&nbsp;<span class="keyword" id="7797102">else</span>&nbsp;<span class="op" id="7797107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797112"><a href="/compress/flate/deflate_test.go.html#7796864">b</a></span><span class="op" id="7797113">[</span><span class="ident" id="7797114"><a href="/compress/flate/deflate_test.go.html#7797031">i</a></span><span class="op" id="7797115">]</span>&nbsp;<span class="op" id="7797117">=</span>&nbsp;<span class="num" id="7797119">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797129"><a href="/compress/flate/deflate_test.go.html#7796842">r</a></span><span class="op" id="7797130">.</span><span class="ident" id="7797131">cur</span>&nbsp;<span class="op" id="7797135">=</span>&nbsp;<span class="ident" id="7797137"><a href="/compress/flate/deflate_test.go.html#7796949">cur</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797142">return</span><br>
<span class="lineno"></span><span class="op" id="7797149">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7797152">func</span>&nbsp;<span class="ident" id="7797157">TestVeryLongSparseChunk</span><span class="op" id="7797180">(</span><span class="ident" id="7797181">t</span>&nbsp;<span class="op" id="7797183">*</span><span class="ident" id="7797184"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7797191">.</span><span class="ident" id="7797192">T</span><span class="op" id="7797193">)</span>&nbsp;<span class="op" id="7797195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797198">if</span>&nbsp;<span class="ident" id="7797201"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7797208">.</span><span class="ident" id="7797209">Short</span><span class="op" id="7797214">(</span><span class="op" id="7797215">)</span>&nbsp;<span class="op" id="7797217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797221"><a href="/compress/flate/deflate_test.go.html#7797181">t</a></span><span class="op" id="7797222">.</span><span class="ident" id="7797223">Skip</span><span class="op" id="7797227">(</span><span class="string" id="7797228">&#34;skipping&nbsp;sparse&nbsp;chunk&nbsp;during&nbsp;short&nbsp;test&#34;</span><span class="op" id="7797269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797272">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797275">w</span><span class="op" id="7797276">,</span>&nbsp;<span class="ident" id="7797278">err</span>&nbsp;<span class="op" id="7797282">:=</span>&nbsp;<span class="ident" id="7797285"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7797294">(</span><span class="ident" id="7797295"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7797301">.</span><span class="ident" id="7797302">Discard</span><span class="op" id="7797309">,</span>&nbsp;<span class="num" id="7797311">1</span><span class="op" id="7797312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797315">if</span>&nbsp;<span class="ident" id="7797318"><a href="/compress/flate/deflate_test.go.html#7797278">err</a></span>&nbsp;<span class="op" id="7797322">!=</span>&nbsp;<span class="ident" id="7797325">nil</span>&nbsp;<span class="op" id="7797329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797333"><a href="/compress/flate/deflate_test.go.html#7797181">t</a></span><span class="op" id="7797334">.</span><span class="ident" id="7797335">Errorf</span><span class="op" id="7797341">(</span><span class="string" id="7797342">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7797357">,</span>&nbsp;<span class="ident" id="7797359"><a href="/compress/flate/deflate_test.go.html#7797278">err</a></span><span class="op" id="7797362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797366">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797374">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797377">if</span>&nbsp;<span class="ident" id="7797380">_</span><span class="op" id="7797381">,</span>&nbsp;<span class="ident" id="7797383"><a href="/compress/flate/deflate_test.go.html#7797278">err</a></span>&nbsp;<span class="op" id="7797387">=</span>&nbsp;<span class="ident" id="7797389"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7797391">.</span><span class="ident" id="7797392">Copy</span><span class="op" id="7797396">(</span><span class="ident" id="7797397"><a href="/compress/flate/deflate_test.go.html#7797275">w</a></span><span class="op" id="7797398">,</span>&nbsp;<span class="op" id="7797400">&amp;</span><span class="ident" id="7797401"><a href="/compress/flate/deflate_test.go.html#7796789">sparseReader</a></span><span class="op" id="7797413">{</span><span class="ident" id="7797414">l</span><span class="op" id="7797415">:</span>&nbsp;<span class="num" id="7797417">23E8</span><span class="op" id="7797421">}</span><span class="op" id="7797422">)</span><span class="op" id="7797423">;</span>&nbsp;<span class="ident" id="7797425"><a href="/compress/flate/deflate_test.go.html#7797278">err</a></span>&nbsp;<span class="op" id="7797429">!=</span>&nbsp;<span class="ident" id="7797432">nil</span>&nbsp;<span class="op" id="7797436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797440"><a href="/compress/flate/deflate_test.go.html#7797181">t</a></span><span class="op" id="7797441">.</span><span class="ident" id="7797442">Errorf</span><span class="op" id="7797448">(</span><span class="string" id="7797449">&#34;Compress&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7797470">,</span>&nbsp;<span class="ident" id="7797472"><a href="/compress/flate/deflate_test.go.html#7797278">err</a></span><span class="op" id="7797475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797487">}</span><br>
<span class="lineno"></span><span class="op" id="7797489">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="7797492">type</span>&nbsp;<span class="ident" id="7797497">syncBuffer</span>&nbsp;<span class="keyword" id="7797508">struct</span>&nbsp;<span class="op" id="7797515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797518">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7797525"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7797530">.</span><span class="ident" id="7797531">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797539">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7797546"><a href="/compress/flate/deflate_test.go.html#7794433">sync</a></span><span class="op" id="7797550">.</span><span class="ident" id="7797551">RWMutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797560">closed</span>&nbsp;<span class="builtintype" id="7797567">bool</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797573">ready</span>&nbsp;&nbsp;<span class="keyword" id="7797580">chan</span>&nbsp;<span class="builtintype" id="7797585">bool</span><br>
<span class="lineno"></span><span class="op" id="7797590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7797593">func</span>&nbsp;<span class="ident" id="7797598">newSyncBuffer</span><span class="op" id="7797611">(</span><span class="op" id="7797612">)</span>&nbsp;<span class="op" id="7797614">*</span><span class="ident" id="7797615"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span>&nbsp;<span class="op" id="7797626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797629">return</span>&nbsp;<span class="op" id="7797636">&amp;</span><span class="ident" id="7797637"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7797647">{</span><span class="ident" id="7797648">ready</span><span class="op" id="7797653">:</span>&nbsp;<span class="builtinfunc" id="7797655">make</span><span class="op" id="7797659">(</span><span class="keyword" id="7797660">chan</span>&nbsp;<span class="builtintype" id="7797665">bool</span><span class="op" id="7797669">,</span>&nbsp;<span class="num" id="7797671">1</span><span class="op" id="7797672">)</span><span class="op" id="7797673">}</span><br>
<span class="lineno">150</span><span class="op" id="7797675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7797678">func</span>&nbsp;<span class="op" id="7797683">(</span><span class="ident" id="7797684">b</span>&nbsp;<span class="op" id="7797686">*</span><span class="ident" id="7797687"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7797697">)</span>&nbsp;<span class="ident" id="7797699">Read</span><span class="op" id="7797703">(</span><span class="ident" id="7797704">p</span>&nbsp;<span class="op" id="7797706">[</span><span class="op" id="7797707">]</span><span class="builtintype" id="7797708">byte</span><span class="op" id="7797712">)</span>&nbsp;<span class="op" id="7797714">(</span><span class="ident" id="7797715">n</span>&nbsp;<span class="builtintype" id="7797717">int</span><span class="op" id="7797720">,</span>&nbsp;<span class="ident" id="7797722">err</span>&nbsp;<span class="builtintype" id="7797726">error</span><span class="op" id="7797731">)</span>&nbsp;<span class="op" id="7797733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797736">for</span>&nbsp;<span class="op" id="7797740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797744"><a href="/compress/flate/deflate_test.go.html#7797684">b</a></span><span class="op" id="7797745">.</span><span class="ident" id="7797746">mu</span><span class="op" id="7797748">.</span><span class="ident" id="7797749">RLock</span><span class="op" id="7797754">(</span><span class="op" id="7797755">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797759"><a href="/compress/flate/deflate_test.go.html#7797715">n</a></span><span class="op" id="7797760">,</span>&nbsp;<span class="ident" id="7797762"><a href="/compress/flate/deflate_test.go.html#7797722">err</a></span>&nbsp;<span class="op" id="7797766">=</span>&nbsp;<span class="ident" id="7797768"><a href="/compress/flate/deflate_test.go.html#7797684">b</a></span><span class="op" id="7797769">.</span><span class="ident" id="7797770">buf</span><span class="op" id="7797773">.</span><span class="ident" id="7797774">Read</span><span class="op" id="7797778">(</span><span class="ident" id="7797779"><a href="/compress/flate/deflate_test.go.html#7797704">p</a></span><span class="op" id="7797780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797784"><a href="/compress/flate/deflate_test.go.html#7797684">b</a></span><span class="op" id="7797785">.</span><span class="ident" id="7797786">mu</span><span class="op" id="7797788">.</span><span class="ident" id="7797789">RUnlock</span><span class="op" id="7797796">(</span><span class="op" id="7797797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797801">if</span>&nbsp;<span class="ident" id="7797804"><a href="/compress/flate/deflate_test.go.html#7797715">n</a></span>&nbsp;<span class="op" id="7797806">&gt;</span>&nbsp;<span class="num" id="7797808">0</span>&nbsp;<span class="op" id="7797810">||</span>&nbsp;<span class="ident" id="7797813"><a href="/compress/flate/deflate_test.go.html#7797684">b</a></span><span class="op" id="7797814">.</span><span class="ident" id="7797815">closed</span>&nbsp;<span class="op" id="7797822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797836">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797840">&lt;-</span><span class="ident" id="7797842"><a href="/compress/flate/deflate_test.go.html#7797684">b</a></span><span class="op" id="7797843">.</span><span class="ident" id="7797844">ready</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797851">}</span><br>
<span class="lineno"></span><span class="op" id="7797853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7797856">func</span>&nbsp;<span class="op" id="7797861">(</span><span class="ident" id="7797862">b</span>&nbsp;<span class="op" id="7797864">*</span><span class="ident" id="7797865"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7797875">)</span>&nbsp;<span class="ident" id="7797877">signal</span><span class="op" id="7797883">(</span><span class="op" id="7797884">)</span>&nbsp;<span class="op" id="7797886">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797889">select</span>&nbsp;<span class="op" id="7797896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797899">case</span>&nbsp;<span class="ident" id="7797904"><a href="/compress/flate/deflate_test.go.html#7797862">b</a></span><span class="op" id="7797905">.</span><span class="ident" id="7797906">ready</span>&nbsp;<span class="op" id="7797912">&lt;-</span>&nbsp;<span class="builtintype" id="7797915">true</span><span class="op" id="7797919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7797922">default</span><span class="op" id="7797929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7797932">}</span><br>
<span class="lineno"></span><span class="op" id="7797934">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="7797937">func</span>&nbsp;<span class="op" id="7797942">(</span><span class="ident" id="7797943">b</span>&nbsp;<span class="op" id="7797945">*</span><span class="ident" id="7797946"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7797956">)</span>&nbsp;<span class="ident" id="7797958">Write</span><span class="op" id="7797963">(</span><span class="ident" id="7797964">p</span>&nbsp;<span class="op" id="7797966">[</span><span class="op" id="7797967">]</span><span class="builtintype" id="7797968">byte</span><span class="op" id="7797972">)</span>&nbsp;<span class="op" id="7797974">(</span><span class="ident" id="7797975">n</span>&nbsp;<span class="builtintype" id="7797977">int</span><span class="op" id="7797980">,</span>&nbsp;<span class="ident" id="7797982">err</span>&nbsp;<span class="builtintype" id="7797986">error</span><span class="op" id="7797991">)</span>&nbsp;<span class="op" id="7797993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7797996"><a href="/compress/flate/deflate_test.go.html#7797975">n</a></span><span class="op" id="7797997">,</span>&nbsp;<span class="ident" id="7797999"><a href="/compress/flate/deflate_test.go.html#7797982">err</a></span>&nbsp;<span class="op" id="7798003">=</span>&nbsp;<span class="ident" id="7798005"><a href="/compress/flate/deflate_test.go.html#7797943">b</a></span><span class="op" id="7798006">.</span><span class="ident" id="7798007">buf</span><span class="op" id="7798010">.</span><span class="ident" id="7798011">Write</span><span class="op" id="7798016">(</span><span class="ident" id="7798017"><a href="/compress/flate/deflate_test.go.html#7797964">p</a></span><span class="op" id="7798018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798021"><a href="/compress/flate/deflate_test.go.html#7797943">b</a></span><span class="op" id="7798022">.</span><span class="ident" id="7798023">signal</span><span class="op" id="7798029">(</span><span class="op" id="7798030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798033">return</span><br>
<span class="lineno">175</span><span class="op" id="7798040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7798043">func</span>&nbsp;<span class="op" id="7798048">(</span><span class="ident" id="7798049">b</span>&nbsp;<span class="op" id="7798051">*</span><span class="ident" id="7798052"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7798062">)</span>&nbsp;<span class="ident" id="7798064">WriteMode</span><span class="op" id="7798073">(</span><span class="op" id="7798074">)</span>&nbsp;<span class="op" id="7798076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798079"><a href="/compress/flate/deflate_test.go.html#7798049">b</a></span><span class="op" id="7798080">.</span><span class="ident" id="7798081">mu</span><span class="op" id="7798083">.</span><span class="ident" id="7798084">Lock</span><span class="op" id="7798088">(</span><span class="op" id="7798089">)</span><br>
<span class="lineno"></span><span class="op" id="7798091">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="7798094">func</span>&nbsp;<span class="op" id="7798099">(</span><span class="ident" id="7798100">b</span>&nbsp;<span class="op" id="7798102">*</span><span class="ident" id="7798103"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7798113">)</span>&nbsp;<span class="ident" id="7798115">ReadMode</span><span class="op" id="7798123">(</span><span class="op" id="7798124">)</span>&nbsp;<span class="op" id="7798126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798129"><a href="/compress/flate/deflate_test.go.html#7798100">b</a></span><span class="op" id="7798130">.</span><span class="ident" id="7798131">mu</span><span class="op" id="7798133">.</span><span class="ident" id="7798134">Unlock</span><span class="op" id="7798140">(</span><span class="op" id="7798141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798144"><a href="/compress/flate/deflate_test.go.html#7798100">b</a></span><span class="op" id="7798145">.</span><span class="ident" id="7798146">signal</span><span class="op" id="7798152">(</span><span class="op" id="7798153">)</span><br>
<span class="lineno"></span><span class="op" id="7798155">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="7798158">func</span>&nbsp;<span class="op" id="7798163">(</span><span class="ident" id="7798164">b</span>&nbsp;<span class="op" id="7798166">*</span><span class="ident" id="7798167"><a href="/compress/flate/deflate_test.go.html#7797497">syncBuffer</a></span><span class="op" id="7798177">)</span>&nbsp;<span class="ident" id="7798179">Close</span><span class="op" id="7798184">(</span><span class="op" id="7798185">)</span>&nbsp;<span class="builtintype" id="7798187">error</span>&nbsp;<span class="op" id="7798193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798196"><a href="/compress/flate/deflate_test.go.html#7798164">b</a></span><span class="op" id="7798197">.</span><span class="ident" id="7798198">closed</span>&nbsp;<span class="op" id="7798205">=</span>&nbsp;<span class="builtintype" id="7798207">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798213"><a href="/compress/flate/deflate_test.go.html#7798164">b</a></span><span class="op" id="7798214">.</span><span class="ident" id="7798215">signal</span><span class="op" id="7798221">(</span><span class="op" id="7798222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798225">return</span>&nbsp;<span class="ident" id="7798232">nil</span><br>
<span class="lineno">190</span><span class="op" id="7798236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7798239">func</span>&nbsp;<span class="ident" id="7798244">testSync</span><span class="op" id="7798252">(</span><span class="ident" id="7798253">t</span>&nbsp;<span class="op" id="7798255">*</span><span class="ident" id="7798256"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7798263">.</span><span class="ident" id="7798264">T</span><span class="op" id="7798265">,</span>&nbsp;<span class="ident" id="7798267">level</span>&nbsp;<span class="builtintype" id="7798273">int</span><span class="op" id="7798276">,</span>&nbsp;<span class="ident" id="7798278">input</span>&nbsp;<span class="op" id="7798284">[</span><span class="op" id="7798285">]</span><span class="builtintype" id="7798286">byte</span><span class="op" id="7798290">,</span>&nbsp;<span class="ident" id="7798292">name</span>&nbsp;<span class="builtintype" id="7798297">string</span><span class="op" id="7798303">)</span>&nbsp;<span class="op" id="7798305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798308">if</span>&nbsp;<span class="builtinfunc" id="7798311">len</span><span class="op" id="7798314">(</span><span class="ident" id="7798315"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798320">)</span>&nbsp;<span class="op" id="7798322">==</span>&nbsp;<span class="num" id="7798325">0</span>&nbsp;<span class="op" id="7798327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798331">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798343"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7798344">.</span><span class="ident" id="7798345">Logf</span><span class="op" id="7798349">(</span><span class="string" id="7798350">&#34;--testSync&nbsp;%d,&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7798373">,</span>&nbsp;<span class="ident" id="7798375"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7798380">,</span>&nbsp;<span class="builtinfunc" id="7798382">len</span><span class="op" id="7798385">(</span><span class="ident" id="7798386"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798391">)</span><span class="op" id="7798392">,</span>&nbsp;<span class="ident" id="7798394"><a href="/compress/flate/deflate_test.go.html#7798292">name</a></span><span class="op" id="7798398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798401">buf</span>&nbsp;<span class="op" id="7798405">:=</span>&nbsp;<span class="ident" id="7798408"><a href="/compress/flate/deflate_test.go.html#7797598">newSyncBuffer</a></span><span class="op" id="7798421">(</span><span class="op" id="7798422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798425">buf1</span>&nbsp;<span class="op" id="7798430">:=</span>&nbsp;<span class="builtinfunc" id="7798433">new</span><span class="op" id="7798436">(</span><span class="ident" id="7798437"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7798442">.</span><span class="ident" id="7798443">Buffer</span><span class="op" id="7798449">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798452"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7798455">.</span><span class="ident" id="7798456">WriteMode</span><span class="op" id="7798465">(</span><span class="op" id="7798466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798469">w</span><span class="op" id="7798470">,</span>&nbsp;<span class="ident" id="7798472">err</span>&nbsp;<span class="op" id="7798476">:=</span>&nbsp;<span class="ident" id="7798479"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7798488">(</span><span class="ident" id="7798489"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7798491">.</span><span class="ident" id="7798492">MultiWriter</span><span class="op" id="7798503">(</span><span class="ident" id="7798504"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7798507">,</span>&nbsp;<span class="ident" id="7798509"><a href="/compress/flate/deflate_test.go.html#7798425">buf1</a></span><span class="op" id="7798513">)</span><span class="op" id="7798514">,</span>&nbsp;<span class="ident" id="7798516"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7798521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798524">if</span>&nbsp;<span class="ident" id="7798527"><a href="/compress/flate/deflate_test.go.html#7798472">err</a></span>&nbsp;<span class="op" id="7798531">!=</span>&nbsp;<span class="ident" id="7798534">nil</span>&nbsp;<span class="op" id="7798538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798542"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7798543">.</span><span class="ident" id="7798544">Errorf</span><span class="op" id="7798550">(</span><span class="string" id="7798551">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7798566">,</span>&nbsp;<span class="ident" id="7798568"><a href="/compress/flate/deflate_test.go.html#7798472">err</a></span><span class="op" id="7798571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798575">return</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798586">r</span>&nbsp;<span class="op" id="7798588">:=</span>&nbsp;<span class="ident" id="7798591"><a href="/compress/flate/inflate.go.html#4368462">NewReader</a></span><span class="op" id="7798600">(</span><span class="ident" id="7798601"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7798604">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7798608">//&nbsp;Write&nbsp;half&nbsp;the&nbsp;input&nbsp;and&nbsp;read&nbsp;back.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798648">for</span>&nbsp;<span class="ident" id="7798652">i</span>&nbsp;<span class="op" id="7798654">:=</span>&nbsp;<span class="num" id="7798657">0</span><span class="op" id="7798658">;</span>&nbsp;<span class="ident" id="7798660"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span>&nbsp;<span class="op" id="7798662">&lt;</span>&nbsp;<span class="num" id="7798664">2</span><span class="op" id="7798665">;</span>&nbsp;<span class="ident" id="7798667"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span><span class="op" id="7798668">++</span>&nbsp;<span class="op" id="7798671">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798675">var</span>&nbsp;<span class="ident" id="7798679">lo</span><span class="op" id="7798681">,</span>&nbsp;<span class="ident" id="7798683">hi</span>&nbsp;<span class="builtintype" id="7798686">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798692">if</span>&nbsp;<span class="ident" id="7798695"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span>&nbsp;<span class="op" id="7798697">==</span>&nbsp;<span class="num" id="7798700">0</span>&nbsp;<span class="op" id="7798702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798707"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7798709">,</span>&nbsp;<span class="ident" id="7798711"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span>&nbsp;<span class="op" id="7798714">=</span>&nbsp;<span class="num" id="7798716">0</span><span class="op" id="7798717">,</span>&nbsp;<span class="op" id="7798719">(</span><span class="builtinfunc" id="7798720">len</span><span class="op" id="7798723">(</span><span class="ident" id="7798724"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798729">)</span><span class="op" id="7798730">+</span><span class="num" id="7798731">1</span><span class="op" id="7798732">)</span><span class="op" id="7798733">/</span><span class="num" id="7798734">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798738">}</span>&nbsp;<span class="keyword" id="7798740">else</span>&nbsp;<span class="op" id="7798745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798750"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7798752">,</span>&nbsp;<span class="ident" id="7798754"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span>&nbsp;<span class="op" id="7798757">=</span>&nbsp;<span class="op" id="7798759">(</span><span class="builtinfunc" id="7798760">len</span><span class="op" id="7798763">(</span><span class="ident" id="7798764"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798769">)</span><span class="op" id="7798770">+</span><span class="num" id="7798771">1</span><span class="op" id="7798772">)</span><span class="op" id="7798773">/</span><span class="num" id="7798774">2</span><span class="op" id="7798775">,</span>&nbsp;<span class="builtinfunc" id="7798777">len</span><span class="op" id="7798780">(</span><span class="ident" id="7798781"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798786">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798794"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7798795">.</span><span class="ident" id="7798796">Logf</span><span class="op" id="7798800">(</span><span class="string" id="7798801">&#34;#%d:&nbsp;write&nbsp;%d-%d&#34;</span><span class="op" id="7798819">,</span>&nbsp;<span class="ident" id="7798821"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span><span class="op" id="7798822">,</span>&nbsp;<span class="ident" id="7798824"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7798826">,</span>&nbsp;<span class="ident" id="7798828"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7798830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798834">if</span>&nbsp;<span class="ident" id="7798837">_</span><span class="op" id="7798838">,</span>&nbsp;<span class="ident" id="7798840">err</span>&nbsp;<span class="op" id="7798844">:=</span>&nbsp;<span class="ident" id="7798847"><a href="/compress/flate/deflate_test.go.html#7798469">w</a></span><span class="op" id="7798848">.</span><span class="ident" id="7798849">Write</span><span class="op" id="7798854">(</span><span class="ident" id="7798855"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7798860">[</span><span class="ident" id="7798861"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7798863">:</span><span class="ident" id="7798864"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7798866">]</span><span class="op" id="7798867">)</span><span class="op" id="7798868">;</span>&nbsp;<span class="ident" id="7798870"><a href="/compress/flate/deflate_test.go.html#7798840">err</a></span>&nbsp;<span class="op" id="7798874">!=</span>&nbsp;<span class="ident" id="7798877">nil</span>&nbsp;<span class="op" id="7798881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798886"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7798887">.</span><span class="ident" id="7798888">Errorf</span><span class="op" id="7798894">(</span><span class="string" id="7798895">&#34;testSync:&nbsp;write:&nbsp;%v&#34;</span><span class="op" id="7798916">,</span>&nbsp;<span class="ident" id="7798918"><a href="/compress/flate/deflate_test.go.html#7798840">err</a></span><span class="op" id="7798921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798926">return</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7798935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798939">if</span>&nbsp;<span class="ident" id="7798942"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span>&nbsp;<span class="op" id="7798944">==</span>&nbsp;<span class="num" id="7798947">0</span>&nbsp;<span class="op" id="7798949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7798954">if</span>&nbsp;<span class="ident" id="7798957">err</span>&nbsp;<span class="op" id="7798961">:=</span>&nbsp;<span class="ident" id="7798964"><a href="/compress/flate/deflate_test.go.html#7798469">w</a></span><span class="op" id="7798965">.</span><span class="ident" id="7798966">Flush</span><span class="op" id="7798971">(</span><span class="op" id="7798972">)</span><span class="op" id="7798973">;</span>&nbsp;<span class="ident" id="7798975"><a href="/compress/flate/deflate_test.go.html#7798957">err</a></span>&nbsp;<span class="op" id="7798979">!=</span>&nbsp;<span class="ident" id="7798982">nil</span>&nbsp;<span class="op" id="7798986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7798992"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7798993">.</span><span class="ident" id="7798994">Errorf</span><span class="op" id="7799000">(</span><span class="string" id="7799001">&#34;testSync:&nbsp;flush:&nbsp;%v&#34;</span><span class="op" id="7799022">,</span>&nbsp;<span class="ident" id="7799024"><a href="/compress/flate/deflate_test.go.html#7798957">err</a></span><span class="op" id="7799027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799033">return</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799047">}</span>&nbsp;<span class="keyword" id="7799049">else</span>&nbsp;<span class="op" id="7799054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799059">if</span>&nbsp;<span class="ident" id="7799062">err</span>&nbsp;<span class="op" id="7799066">:=</span>&nbsp;<span class="ident" id="7799069"><a href="/compress/flate/deflate_test.go.html#7798469">w</a></span><span class="op" id="7799070">.</span><span class="ident" id="7799071">Close</span><span class="op" id="7799076">(</span><span class="op" id="7799077">)</span><span class="op" id="7799078">;</span>&nbsp;<span class="ident" id="7799080"><a href="/compress/flate/deflate_test.go.html#7799062">err</a></span>&nbsp;<span class="op" id="7799084">!=</span>&nbsp;<span class="ident" id="7799087">nil</span>&nbsp;<span class="op" id="7799091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799097"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7799098">.</span><span class="ident" id="7799099">Errorf</span><span class="op" id="7799105">(</span><span class="string" id="7799106">&#34;testSync:&nbsp;close:&nbsp;%v&#34;</span><span class="op" id="7799127">,</span>&nbsp;<span class="ident" id="7799129"><a href="/compress/flate/deflate_test.go.html#7799062">err</a></span><span class="op" id="7799132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799137">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799145"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7799148">.</span><span class="ident" id="7799149">ReadMode</span><span class="op" id="7799157">(</span><span class="op" id="7799158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799162">out</span>&nbsp;<span class="op" id="7799166">:=</span>&nbsp;<span class="builtinfunc" id="7799169">make</span><span class="op" id="7799173">(</span><span class="op" id="7799174">[</span><span class="op" id="7799175">]</span><span class="builtintype" id="7799176">byte</span><span class="op" id="7799180">,</span>&nbsp;<span class="ident" id="7799182"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799184">-</span><span class="ident" id="7799185"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799187">+</span><span class="num" id="7799188">1</span><span class="op" id="7799189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799193">m</span><span class="op" id="7799194">,</span>&nbsp;<span class="ident" id="7799196">err</span>&nbsp;<span class="op" id="7799200">:=</span>&nbsp;<span class="ident" id="7799203"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7799205">.</span><span class="ident" id="7799206">ReadAtLeast</span><span class="op" id="7799217">(</span><span class="ident" id="7799218"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span><span class="op" id="7799219">,</span>&nbsp;<span class="ident" id="7799221"><a href="/compress/flate/deflate_test.go.html#7799162">out</a></span><span class="op" id="7799224">,</span>&nbsp;<span class="ident" id="7799226"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799228">-</span><span class="ident" id="7799229"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799235"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7799236">.</span><span class="ident" id="7799237">Logf</span><span class="op" id="7799241">(</span><span class="string" id="7799242">&#34;#%d:&nbsp;read&nbsp;%d&#34;</span><span class="op" id="7799256">,</span>&nbsp;<span class="ident" id="7799258"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span><span class="op" id="7799259">,</span>&nbsp;<span class="ident" id="7799261"><a href="/compress/flate/deflate_test.go.html#7799193">m</a></span><span class="op" id="7799262">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799266">if</span>&nbsp;<span class="ident" id="7799269"><a href="/compress/flate/deflate_test.go.html#7799193">m</a></span>&nbsp;<span class="op" id="7799271">!=</span>&nbsp;<span class="ident" id="7799274"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799276">-</span><span class="ident" id="7799277"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span>&nbsp;<span class="op" id="7799280">||</span>&nbsp;<span class="ident" id="7799283"><a href="/compress/flate/deflate_test.go.html#7799196">err</a></span>&nbsp;<span class="op" id="7799287">!=</span>&nbsp;<span class="ident" id="7799290">nil</span>&nbsp;<span class="op" id="7799294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799299"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7799300">.</span><span class="ident" id="7799301">Errorf</span><span class="op" id="7799307">(</span><span class="string" id="7799308">&#34;testSync/%d&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;read&nbsp;%d:&nbsp;%d,&nbsp;%v&nbsp;(%d&nbsp;left)&#34;</span><span class="op" id="7799361">,</span>&nbsp;<span class="ident" id="7799363"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span><span class="op" id="7799364">,</span>&nbsp;<span class="ident" id="7799366"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7799371">,</span>&nbsp;<span class="builtinfunc" id="7799373">len</span><span class="op" id="7799376">(</span><span class="ident" id="7799377"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7799382">)</span><span class="op" id="7799383">,</span>&nbsp;<span class="ident" id="7799385"><a href="/compress/flate/deflate_test.go.html#7798292">name</a></span><span class="op" id="7799389">,</span>&nbsp;<span class="ident" id="7799391"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799393">-</span><span class="ident" id="7799394"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799396">,</span>&nbsp;<span class="ident" id="7799398"><a href="/compress/flate/deflate_test.go.html#7799193">m</a></span><span class="op" id="7799399">,</span>&nbsp;<span class="ident" id="7799401"><a href="/compress/flate/deflate_test.go.html#7799196">err</a></span><span class="op" id="7799404">,</span>&nbsp;<span class="ident" id="7799406"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7799409">.</span><span class="ident" id="7799410">buf</span><span class="op" id="7799413">.</span><span class="ident" id="7799414">Len</span><span class="op" id="7799417">(</span><span class="op" id="7799418">)</span><span class="op" id="7799419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799424">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799437">if</span>&nbsp;<span class="op" id="7799440">!</span><span class="ident" id="7799441"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7799446">.</span><span class="ident" id="7799447">Equal</span><span class="op" id="7799452">(</span><span class="ident" id="7799453"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7799458">[</span><span class="ident" id="7799459"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799461">:</span><span class="ident" id="7799462"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799464">]</span><span class="op" id="7799465">,</span>&nbsp;<span class="ident" id="7799467"><a href="/compress/flate/deflate_test.go.html#7799162">out</a></span><span class="op" id="7799470">[</span><span class="op" id="7799471">:</span><span class="ident" id="7799472"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799474">-</span><span class="ident" id="7799475"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799477">]</span><span class="op" id="7799478">)</span>&nbsp;<span class="op" id="7799480">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7799485"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7799486">.</span><span class="ident" id="7799487">Errorf</span><span class="op" id="7799493">(</span><span class="string" id="7799494">&#34;testSync/%d:&nbsp;read&nbsp;wrong&nbsp;bytes:&nbsp;%x&nbsp;vs&nbsp;%x&#34;</span><span class="op" id="7799535">,</span>&nbsp;<span class="ident" id="7799537"><a href="/compress/flate/deflate_test.go.html#7798652">i</a></span><span class="op" id="7799538">,</span>&nbsp;<span class="ident" id="7799540"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7799545">[</span><span class="ident" id="7799546"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799548">:</span><span class="ident" id="7799549"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799551">]</span><span class="op" id="7799552">,</span>&nbsp;<span class="ident" id="7799554"><a href="/compress/flate/deflate_test.go.html#7799162">out</a></span><span class="op" id="7799557">[</span><span class="op" id="7799558">:</span><span class="ident" id="7799559"><a href="/compress/flate/deflate_test.go.html#7798683">hi</a></span><span class="op" id="7799561">-</span><span class="ident" id="7799562"><a href="/compress/flate/deflate_test.go.html#7798679">lo</a></span><span class="op" id="7799564">]</span><span class="op" id="7799565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7799570">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7799579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799583">//&nbsp;This&nbsp;test&nbsp;originally&nbsp;checked&nbsp;that&nbsp;after&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799636">//&nbsp;the&nbsp;first&nbsp;half&nbsp;of&nbsp;the&nbsp;input,&nbsp;there&nbsp;was&nbsp;nothing&nbsp;left</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799693">//&nbsp;in&nbsp;the&nbsp;read&nbsp;buffer&nbsp;(buf.buf.Len()&nbsp;!=&nbsp;0)&nbsp;but&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799750">//&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;case:&nbsp;the&nbsp;write&nbsp;Flush&nbsp;may&nbsp;emit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799806">//&nbsp;some&nbsp;extra&nbsp;framing&nbsp;bits&nbsp;that&nbsp;are&nbsp;not&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799858">//&nbsp;to&nbsp;process&nbsp;to&nbsp;obtain&nbsp;the&nbsp;first&nbsp;half&nbsp;of&nbsp;the&nbsp;uncompressed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799919">//&nbsp;data.&nbsp;&nbsp;The&nbsp;test&nbsp;ran&nbsp;correctly&nbsp;most&nbsp;of&nbsp;the&nbsp;time,&nbsp;because</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7799980">//&nbsp;the&nbsp;background&nbsp;goroutine&nbsp;had&nbsp;usually&nbsp;read&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7800032">//&nbsp;those&nbsp;extra&nbsp;bits&nbsp;by&nbsp;now,&nbsp;but&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;useful&nbsp;thing&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7800093">//&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800105"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7800108">.</span><span class="ident" id="7800109">WriteMode</span><span class="op" id="7800118">(</span><span class="op" id="7800119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800122">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800125"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7800128">.</span><span class="ident" id="7800129">ReadMode</span><span class="op" id="7800137">(</span><span class="op" id="7800138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800141">out</span>&nbsp;<span class="op" id="7800145">:=</span>&nbsp;<span class="builtinfunc" id="7800148">make</span><span class="op" id="7800152">(</span><span class="op" id="7800153">[</span><span class="op" id="7800154">]</span><span class="builtintype" id="7800155">byte</span><span class="op" id="7800159">,</span>&nbsp;<span class="num" id="7800161">10</span><span class="op" id="7800163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800166">if</span>&nbsp;<span class="ident" id="7800169">n</span><span class="op" id="7800170">,</span>&nbsp;<span class="ident" id="7800172">err</span>&nbsp;<span class="op" id="7800176">:=</span>&nbsp;<span class="ident" id="7800179"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span><span class="op" id="7800180">.</span><span class="ident" id="7800181">Read</span><span class="op" id="7800185">(</span><span class="ident" id="7800186"><a href="/compress/flate/deflate_test.go.html#7800141">out</a></span><span class="op" id="7800189">)</span><span class="op" id="7800190">;</span>&nbsp;<span class="ident" id="7800192"><a href="/compress/flate/deflate_test.go.html#7800169">n</a></span>&nbsp;<span class="op" id="7800194">&gt;</span>&nbsp;<span class="num" id="7800196">0</span>&nbsp;<span class="op" id="7800198">||</span>&nbsp;<span class="ident" id="7800201"><a href="/compress/flate/deflate_test.go.html#7800172">err</a></span>&nbsp;<span class="op" id="7800205">!=</span>&nbsp;<span class="ident" id="7800208"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7800210">.</span><span class="ident" id="7800211">EOF</span>&nbsp;<span class="op" id="7800215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800219"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7800220">.</span><span class="ident" id="7800221">Errorf</span><span class="op" id="7800227">(</span><span class="string" id="7800228">&#34;testSync&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;final&nbsp;Read:&nbsp;%d,&nbsp;%v&nbsp;(hex:&nbsp;%x)&#34;</span><span class="op" id="7800281">,</span>&nbsp;<span class="ident" id="7800283"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7800288">,</span>&nbsp;<span class="builtinfunc" id="7800290">len</span><span class="op" id="7800293">(</span><span class="ident" id="7800294"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7800299">)</span><span class="op" id="7800300">,</span>&nbsp;<span class="ident" id="7800302"><a href="/compress/flate/deflate_test.go.html#7798292">name</a></span><span class="op" id="7800306">,</span>&nbsp;<span class="ident" id="7800308"><a href="/compress/flate/deflate_test.go.html#7800169">n</a></span><span class="op" id="7800309">,</span>&nbsp;<span class="ident" id="7800311"><a href="/compress/flate/deflate_test.go.html#7800172">err</a></span><span class="op" id="7800314">,</span>&nbsp;<span class="ident" id="7800316"><a href="/compress/flate/deflate_test.go.html#7800141">out</a></span><span class="op" id="7800319">[</span><span class="num" id="7800320">0</span><span class="op" id="7800321">:</span><span class="ident" id="7800322"><a href="/compress/flate/deflate_test.go.html#7800169">n</a></span><span class="op" id="7800323">]</span><span class="op" id="7800324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800327">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800330">if</span>&nbsp;<span class="ident" id="7800333"><a href="/compress/flate/deflate_test.go.html#7798401">buf</a></span><span class="op" id="7800336">.</span><span class="ident" id="7800337">buf</span><span class="op" id="7800340">.</span><span class="ident" id="7800341">Len</span><span class="op" id="7800344">(</span><span class="op" id="7800345">)</span>&nbsp;<span class="op" id="7800347">!=</span>&nbsp;<span class="num" id="7800350">0</span>&nbsp;<span class="op" id="7800352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800356"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7800357">.</span><span class="ident" id="7800358">Errorf</span><span class="op" id="7800364">(</span><span class="string" id="7800365">&#34;testSync&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;extra&nbsp;data&nbsp;at&nbsp;end&#34;</span><span class="op" id="7800407">,</span>&nbsp;<span class="ident" id="7800409"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7800414">,</span>&nbsp;<span class="builtinfunc" id="7800416">len</span><span class="op" id="7800419">(</span><span class="ident" id="7800420"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7800425">)</span><span class="op" id="7800426">,</span>&nbsp;<span class="ident" id="7800428"><a href="/compress/flate/deflate_test.go.html#7798292">name</a></span><span class="op" id="7800432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800438"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span><span class="op" id="7800439">.</span><span class="ident" id="7800440">Close</span><span class="op" id="7800445">(</span><span class="op" id="7800446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7800450">//&nbsp;stream&nbsp;should&nbsp;work&nbsp;for&nbsp;ordinary&nbsp;reader&nbsp;too</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800497"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span>&nbsp;<span class="op" id="7800499">=</span>&nbsp;<span class="ident" id="7800501"><a href="/compress/flate/inflate.go.html#4368462">NewReader</a></span><span class="op" id="7800510">(</span><span class="ident" id="7800511"><a href="/compress/flate/deflate_test.go.html#7798425">buf1</a></span><span class="op" id="7800515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800518"><a href="/compress/flate/deflate_test.go.html#7800141">out</a></span><span class="op" id="7800521">,</span>&nbsp;<span class="ident" id="7800523"><a href="/compress/flate/deflate_test.go.html#7798472">err</a></span>&nbsp;<span class="op" id="7800527">=</span>&nbsp;<span class="ident" id="7800529"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7800535">.</span><span class="ident" id="7800536">ReadAll</span><span class="op" id="7800543">(</span><span class="ident" id="7800544"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span><span class="op" id="7800545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800548">if</span>&nbsp;<span class="ident" id="7800551"><a href="/compress/flate/deflate_test.go.html#7798472">err</a></span>&nbsp;<span class="op" id="7800555">!=</span>&nbsp;<span class="ident" id="7800558">nil</span>&nbsp;<span class="op" id="7800562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800566"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7800567">.</span><span class="ident" id="7800568">Errorf</span><span class="op" id="7800574">(</span><span class="string" id="7800575">&#34;testSync:&nbsp;read:&nbsp;%s&#34;</span><span class="op" id="7800595">,</span>&nbsp;<span class="ident" id="7800597"><a href="/compress/flate/deflate_test.go.html#7798472">err</a></span><span class="op" id="7800600">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800604">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800615"><a href="/compress/flate/deflate_test.go.html#7798586">r</a></span><span class="op" id="7800616">.</span><span class="ident" id="7800617">Close</span><span class="op" id="7800622">(</span><span class="op" id="7800623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800626">if</span>&nbsp;<span class="op" id="7800629">!</span><span class="ident" id="7800630"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7800635">.</span><span class="ident" id="7800636">Equal</span><span class="op" id="7800641">(</span><span class="ident" id="7800642"><a href="/compress/flate/deflate_test.go.html#7798278">input</a></span><span class="op" id="7800647">,</span>&nbsp;<span class="ident" id="7800649"><a href="/compress/flate/deflate_test.go.html#7800141">out</a></span><span class="op" id="7800652">)</span>&nbsp;<span class="op" id="7800654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800658"><a href="/compress/flate/deflate_test.go.html#7798253">t</a></span><span class="op" id="7800659">.</span><span class="ident" id="7800660">Errorf</span><span class="op" id="7800666">(</span><span class="string" id="7800667">&#34;testSync:&nbsp;decompress(compress(data))&nbsp;!=&nbsp;data:&nbsp;level=%d&nbsp;input=%s&#34;</span><span class="op" id="7800732">,</span>&nbsp;<span class="ident" id="7800734"><a href="/compress/flate/deflate_test.go.html#7798267">level</a></span><span class="op" id="7800739">,</span>&nbsp;<span class="ident" id="7800741"><a href="/compress/flate/deflate_test.go.html#7798292">name</a></span><span class="op" id="7800745">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800748">}</span><br>
<span class="lineno"></span><span class="op" id="7800750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7800753">func</span>&nbsp;<span class="ident" id="7800758">testToFromWithLevelAndLimit</span><span class="op" id="7800785">(</span><span class="ident" id="7800786">t</span>&nbsp;<span class="op" id="7800788">*</span><span class="ident" id="7800789"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7800796">.</span><span class="ident" id="7800797">T</span><span class="op" id="7800798">,</span>&nbsp;<span class="ident" id="7800800">level</span>&nbsp;<span class="builtintype" id="7800806">int</span><span class="op" id="7800809">,</span>&nbsp;<span class="ident" id="7800811">input</span>&nbsp;<span class="op" id="7800817">[</span><span class="op" id="7800818">]</span><span class="builtintype" id="7800819">byte</span><span class="op" id="7800823">,</span>&nbsp;<span class="ident" id="7800825">name</span>&nbsp;<span class="builtintype" id="7800830">string</span><span class="op" id="7800836">,</span>&nbsp;<span class="ident" id="7800838">limit</span>&nbsp;<span class="builtintype" id="7800844">int</span><span class="op" id="7800847">)</span>&nbsp;<span class="op" id="7800849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800852">var</span>&nbsp;<span class="ident" id="7800856">buffer</span>&nbsp;<span class="ident" id="7800863"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7800868">.</span><span class="ident" id="7800869">Buffer</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800877">w</span><span class="op" id="7800878">,</span>&nbsp;<span class="ident" id="7800880">err</span>&nbsp;<span class="op" id="7800884">:=</span>&nbsp;<span class="ident" id="7800887"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7800896">(</span><span class="op" id="7800897">&amp;</span><span class="ident" id="7800898"><a href="/compress/flate/deflate_test.go.html#7800856">buffer</a></span><span class="op" id="7800904">,</span>&nbsp;<span class="ident" id="7800906"><a href="/compress/flate/deflate_test.go.html#7800800">level</a></span><span class="op" id="7800911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800914">if</span>&nbsp;<span class="ident" id="7800917"><a href="/compress/flate/deflate_test.go.html#7800880">err</a></span>&nbsp;<span class="op" id="7800921">!=</span>&nbsp;<span class="ident" id="7800924">nil</span>&nbsp;<span class="op" id="7800928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800932"><a href="/compress/flate/deflate_test.go.html#7800786">t</a></span><span class="op" id="7800933">.</span><span class="ident" id="7800934">Errorf</span><span class="op" id="7800940">(</span><span class="string" id="7800941">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7800956">,</span>&nbsp;<span class="ident" id="7800958"><a href="/compress/flate/deflate_test.go.html#7800880">err</a></span><span class="op" id="7800961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7800965">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7800973">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800976"><a href="/compress/flate/deflate_test.go.html#7800877">w</a></span><span class="op" id="7800977">.</span><span class="ident" id="7800978">Write</span><span class="op" id="7800983">(</span><span class="ident" id="7800984"><a href="/compress/flate/deflate_test.go.html#7800811">input</a></span><span class="op" id="7800989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7800992"><a href="/compress/flate/deflate_test.go.html#7800877">w</a></span><span class="op" id="7800993">.</span><span class="ident" id="7800994">Close</span><span class="op" id="7800999">(</span><span class="op" id="7801000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801003">if</span>&nbsp;<span class="ident" id="7801006"><a href="/compress/flate/deflate_test.go.html#7800838">limit</a></span>&nbsp;<span class="op" id="7801012">&gt;</span>&nbsp;<span class="num" id="7801014">0</span>&nbsp;<span class="op" id="7801016">&amp;&amp;</span>&nbsp;<span class="ident" id="7801019"><a href="/compress/flate/deflate_test.go.html#7800856">buffer</a></span><span class="op" id="7801025">.</span><span class="ident" id="7801026">Len</span><span class="op" id="7801029">(</span><span class="op" id="7801030">)</span>&nbsp;<span class="op" id="7801032">&gt;</span>&nbsp;<span class="ident" id="7801034"><a href="/compress/flate/deflate_test.go.html#7800838">limit</a></span>&nbsp;<span class="op" id="7801040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801044"><a href="/compress/flate/deflate_test.go.html#7800786">t</a></span><span class="op" id="7801045">.</span><span class="ident" id="7801046">Errorf</span><span class="op" id="7801052">(</span><span class="string" id="7801053">&#34;level:&nbsp;%d,&nbsp;len(compress(data))&nbsp;=&nbsp;%d&nbsp;&gt;&nbsp;limit&nbsp;=&nbsp;%d&#34;</span><span class="op" id="7801103">,</span>&nbsp;<span class="ident" id="7801105"><a href="/compress/flate/deflate_test.go.html#7800800">level</a></span><span class="op" id="7801110">,</span>&nbsp;<span class="ident" id="7801112"><a href="/compress/flate/deflate_test.go.html#7800856">buffer</a></span><span class="op" id="7801118">.</span><span class="ident" id="7801119">Len</span><span class="op" id="7801122">(</span><span class="op" id="7801123">)</span><span class="op" id="7801124">,</span>&nbsp;<span class="ident" id="7801126"><a href="/compress/flate/deflate_test.go.html#7800838">limit</a></span><span class="op" id="7801131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801135">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801146">r</span>&nbsp;<span class="op" id="7801148">:=</span>&nbsp;<span class="ident" id="7801151"><a href="/compress/flate/inflate.go.html#4368462">NewReader</a></span><span class="op" id="7801160">(</span><span class="op" id="7801161">&amp;</span><span class="ident" id="7801162"><a href="/compress/flate/deflate_test.go.html#7800856">buffer</a></span><span class="op" id="7801168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801171">out</span><span class="op" id="7801174">,</span>&nbsp;<span class="ident" id="7801176"><a href="/compress/flate/deflate_test.go.html#7800880">err</a></span>&nbsp;<span class="op" id="7801180">:=</span>&nbsp;<span class="ident" id="7801183"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7801189">.</span><span class="ident" id="7801190">ReadAll</span><span class="op" id="7801197">(</span><span class="ident" id="7801198"><a href="/compress/flate/deflate_test.go.html#7801146">r</a></span><span class="op" id="7801199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801202">if</span>&nbsp;<span class="ident" id="7801205"><a href="/compress/flate/deflate_test.go.html#7800880">err</a></span>&nbsp;<span class="op" id="7801209">!=</span>&nbsp;<span class="ident" id="7801212">nil</span>&nbsp;<span class="op" id="7801216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801220"><a href="/compress/flate/deflate_test.go.html#7800786">t</a></span><span class="op" id="7801221">.</span><span class="ident" id="7801222">Errorf</span><span class="op" id="7801228">(</span><span class="string" id="7801229">&#34;read:&nbsp;%s&#34;</span><span class="op" id="7801239">,</span>&nbsp;<span class="ident" id="7801241"><a href="/compress/flate/deflate_test.go.html#7800880">err</a></span><span class="op" id="7801244">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801248">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801259"><a href="/compress/flate/deflate_test.go.html#7801146">r</a></span><span class="op" id="7801260">.</span><span class="ident" id="7801261">Close</span><span class="op" id="7801266">(</span><span class="op" id="7801267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801270">if</span>&nbsp;<span class="op" id="7801273">!</span><span class="ident" id="7801274"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7801279">.</span><span class="ident" id="7801280">Equal</span><span class="op" id="7801285">(</span><span class="ident" id="7801286"><a href="/compress/flate/deflate_test.go.html#7800811">input</a></span><span class="op" id="7801291">,</span>&nbsp;<span class="ident" id="7801293"><a href="/compress/flate/deflate_test.go.html#7801171">out</a></span><span class="op" id="7801296">)</span>&nbsp;<span class="op" id="7801298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801302"><a href="/compress/flate/deflate_test.go.html#7800786">t</a></span><span class="op" id="7801303">.</span><span class="ident" id="7801304">Errorf</span><span class="op" id="7801310">(</span><span class="string" id="7801311">&#34;decompress(compress(data))&nbsp;!=&nbsp;data:&nbsp;level=%d&nbsp;input=%s&#34;</span><span class="op" id="7801366">,</span>&nbsp;<span class="ident" id="7801368"><a href="/compress/flate/deflate_test.go.html#7800800">level</a></span><span class="op" id="7801373">,</span>&nbsp;<span class="ident" id="7801375"><a href="/compress/flate/deflate_test.go.html#7800825">name</a></span><span class="op" id="7801379">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801383">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801394"><a href="/compress/flate/deflate_test.go.html#7798244">testSync</a></span><span class="op" id="7801402">(</span><span class="ident" id="7801403"><a href="/compress/flate/deflate_test.go.html#7800786">t</a></span><span class="op" id="7801404">,</span>&nbsp;<span class="ident" id="7801406"><a href="/compress/flate/deflate_test.go.html#7800800">level</a></span><span class="op" id="7801411">,</span>&nbsp;<span class="ident" id="7801413"><a href="/compress/flate/deflate_test.go.html#7800811">input</a></span><span class="op" id="7801418">,</span>&nbsp;<span class="ident" id="7801420"><a href="/compress/flate/deflate_test.go.html#7800825">name</a></span><span class="op" id="7801424">)</span><br>
<span class="lineno"></span><span class="op" id="7801426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="7801429">func</span>&nbsp;<span class="ident" id="7801434">testToFromWithLimit</span><span class="op" id="7801453">(</span><span class="ident" id="7801454">t</span>&nbsp;<span class="op" id="7801456">*</span><span class="ident" id="7801457"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7801464">.</span><span class="ident" id="7801465">T</span><span class="op" id="7801466">,</span>&nbsp;<span class="ident" id="7801468">input</span>&nbsp;<span class="op" id="7801474">[</span><span class="op" id="7801475">]</span><span class="builtintype" id="7801476">byte</span><span class="op" id="7801480">,</span>&nbsp;<span class="ident" id="7801482">name</span>&nbsp;<span class="builtintype" id="7801487">string</span><span class="op" id="7801493">,</span>&nbsp;<span class="ident" id="7801495">limit</span>&nbsp;<span class="op" id="7801501">[</span><span class="num" id="7801502">10</span><span class="op" id="7801504">]</span><span class="builtintype" id="7801505">int</span><span class="op" id="7801508">)</span>&nbsp;<span class="op" id="7801510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801513">for</span>&nbsp;<span class="ident" id="7801517">i</span>&nbsp;<span class="op" id="7801519">:=</span>&nbsp;<span class="num" id="7801522">0</span><span class="op" id="7801523">;</span>&nbsp;<span class="ident" id="7801525"><a href="/compress/flate/deflate_test.go.html#7801517">i</a></span>&nbsp;<span class="op" id="7801527">&lt;</span>&nbsp;<span class="num" id="7801529">10</span><span class="op" id="7801531">;</span>&nbsp;<span class="ident" id="7801533"><a href="/compress/flate/deflate_test.go.html#7801517">i</a></span><span class="op" id="7801534">++</span>&nbsp;<span class="op" id="7801537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801541"><a href="/compress/flate/deflate_test.go.html#7800758">testToFromWithLevelAndLimit</a></span><span class="op" id="7801568">(</span><span class="ident" id="7801569"><a href="/compress/flate/deflate_test.go.html#7801454">t</a></span><span class="op" id="7801570">,</span>&nbsp;<span class="ident" id="7801572"><a href="/compress/flate/deflate_test.go.html#7801517">i</a></span><span class="op" id="7801573">,</span>&nbsp;<span class="ident" id="7801575"><a href="/compress/flate/deflate_test.go.html#7801468">input</a></span><span class="op" id="7801580">,</span>&nbsp;<span class="ident" id="7801582"><a href="/compress/flate/deflate_test.go.html#7801482">name</a></span><span class="op" id="7801586">,</span>&nbsp;<span class="ident" id="7801588"><a href="/compress/flate/deflate_test.go.html#7801495">limit</a></span><span class="op" id="7801593">[</span><span class="ident" id="7801594"><a href="/compress/flate/deflate_test.go.html#7801517">i</a></span><span class="op" id="7801595">]</span><span class="op" id="7801596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801599">}</span><br>
<span class="lineno"></span><span class="op" id="7801601">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="keyword" id="7801604">func</span>&nbsp;<span class="ident" id="7801609">TestDeflateInflate</span><span class="op" id="7801627">(</span><span class="ident" id="7801628">t</span>&nbsp;<span class="op" id="7801630">*</span><span class="ident" id="7801631"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7801638">.</span><span class="ident" id="7801639">T</span><span class="op" id="7801640">)</span>&nbsp;<span class="op" id="7801642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801645">for</span>&nbsp;<span class="ident" id="7801649">i</span><span class="op" id="7801650">,</span>&nbsp;<span class="ident" id="7801652">h</span>&nbsp;<span class="op" id="7801654">:=</span>&nbsp;<span class="keyword" id="7801657">range</span>&nbsp;<span class="ident" id="7801663"><a href="/compress/flate/deflate_test.go.html#7795745">deflateInflateTests</a></span>&nbsp;<span class="op" id="7801683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801687"><a href="/compress/flate/deflate_test.go.html#7801434">testToFromWithLimit</a></span><span class="op" id="7801706">(</span><span class="ident" id="7801707"><a href="/compress/flate/deflate_test.go.html#7801628">t</a></span><span class="op" id="7801708">,</span>&nbsp;<span class="ident" id="7801710"><a href="/compress/flate/deflate_test.go.html#7801652">h</a></span><span class="op" id="7801711">.</span><span class="ident" id="7801712">in</span><span class="op" id="7801714">,</span>&nbsp;<span class="ident" id="7801716"><a href="/compress/flate/deflate_test.go.html#7794396">fmt</a></span><span class="op" id="7801719">.</span><span class="ident" id="7801720">Sprintf</span><span class="op" id="7801727">(</span><span class="string" id="7801728">&#34;#%d&#34;</span><span class="op" id="7801733">,</span>&nbsp;<span class="ident" id="7801735"><a href="/compress/flate/deflate_test.go.html#7801649">i</a></span><span class="op" id="7801736">)</span><span class="op" id="7801737">,</span>&nbsp;<span class="op" id="7801739">[</span><span class="num" id="7801740">10</span><span class="op" id="7801742">]</span><span class="builtintype" id="7801743">int</span><span class="op" id="7801746">{</span><span class="op" id="7801747">}</span><span class="op" id="7801748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801751">}</span><br>
<span class="lineno">315</span><span class="op" id="7801753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7801756">func</span>&nbsp;<span class="ident" id="7801761">TestReverseBits</span><span class="op" id="7801776">(</span><span class="ident" id="7801777">t</span>&nbsp;<span class="op" id="7801779">*</span><span class="ident" id="7801780"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7801787">.</span><span class="ident" id="7801788">T</span><span class="op" id="7801789">)</span>&nbsp;<span class="op" id="7801791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801794">for</span>&nbsp;<span class="ident" id="7801798">_</span><span class="op" id="7801799">,</span>&nbsp;<span class="ident" id="7801801">h</span>&nbsp;<span class="op" id="7801803">:=</span>&nbsp;<span class="keyword" id="7801806">range</span>&nbsp;<span class="ident" id="7801812"><a href="/compress/flate/deflate_test.go.html#7796007">reverseBitsTests</a></span>&nbsp;<span class="op" id="7801829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7801833">if</span>&nbsp;<span class="ident" id="7801836">v</span>&nbsp;<span class="op" id="7801838">:=</span>&nbsp;<span class="ident" id="7801841"><a href="/compress/flate/reverse_bits.go.html#4371219">reverseBits</a></span><span class="op" id="7801852">(</span><span class="ident" id="7801853"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801854">.</span><span class="ident" id="7801855">in</span><span class="op" id="7801857">,</span>&nbsp;<span class="ident" id="7801859"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801860">.</span><span class="ident" id="7801861">bitCount</span><span class="op" id="7801869">)</span><span class="op" id="7801870">;</span>&nbsp;<span class="ident" id="7801872"><a href="/compress/flate/deflate_test.go.html#7801836">v</a></span>&nbsp;<span class="op" id="7801874">!=</span>&nbsp;<span class="ident" id="7801877"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801878">.</span><span class="ident" id="7801879">out</span>&nbsp;<span class="op" id="7801883">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801888"><a href="/compress/flate/deflate_test.go.html#7801777">t</a></span><span class="op" id="7801889">.</span><span class="ident" id="7801890">Errorf</span><span class="op" id="7801896">(</span><span class="string" id="7801897">&#34;reverseBits(%v,%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7801931">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7801937"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801938">.</span><span class="ident" id="7801939">in</span><span class="op" id="7801941">,</span>&nbsp;<span class="ident" id="7801943"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801944">.</span><span class="ident" id="7801945">bitCount</span><span class="op" id="7801953">,</span>&nbsp;<span class="ident" id="7801955"><a href="/compress/flate/deflate_test.go.html#7801836">v</a></span><span class="op" id="7801956">,</span>&nbsp;<span class="ident" id="7801958"><a href="/compress/flate/deflate_test.go.html#7801801">h</a></span><span class="op" id="7801959">.</span><span class="ident" id="7801960">out</span><span class="op" id="7801963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7801970">}</span><br>
<span class="lineno"></span><span class="op" id="7801972">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="7801975">type</span>&nbsp;<span class="ident" id="7801980">deflateInflateStringTest</span>&nbsp;<span class="keyword" id="7802005">struct</span>&nbsp;<span class="op" id="7802012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802015">filename</span>&nbsp;<span class="builtintype" id="7802024">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802032">label</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7802041">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802049">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7802058">[</span><span class="num" id="7802059">10</span><span class="op" id="7802061">]</span><span class="builtintype" id="7802062">int</span><br>
<span class="lineno">330</span><span class="op" id="7802066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802069">var</span>&nbsp;<span class="ident" id="7802073">deflateInflateStringTests</span>&nbsp;<span class="op" id="7802099">=</span>&nbsp;<span class="op" id="7802101">[</span><span class="op" id="7802102">]</span><span class="ident" id="7802103"><a href="/compress/flate/deflate_test.go.html#7801980">deflateInflateStringTest</a></span><span class="op" id="7802127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802134">&#34;../testdata/e.txt&#34;</span><span class="op" id="7802153">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802157">&#34;2.718281828...&#34;</span><span class="op" id="7802173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802177">[</span><span class="op" id="7802178">...</span><span class="op" id="7802181">]</span><span class="builtintype" id="7802182">int</span><span class="op" id="7802185">{</span><span class="num" id="7802186">100018</span><span class="op" id="7802192">,</span>&nbsp;<span class="num" id="7802194">50650</span><span class="op" id="7802199">,</span>&nbsp;<span class="num" id="7802201">50960</span><span class="op" id="7802206">,</span>&nbsp;<span class="num" id="7802208">51150</span><span class="op" id="7802213">,</span>&nbsp;<span class="num" id="7802215">50930</span><span class="op" id="7802220">,</span>&nbsp;<span class="num" id="7802222">50790</span><span class="op" id="7802227">,</span>&nbsp;<span class="num" id="7802229">50790</span><span class="op" id="7802234">,</span>&nbsp;<span class="num" id="7802236">50790</span><span class="op" id="7802241">,</span>&nbsp;<span class="num" id="7802243">50790</span><span class="op" id="7802248">,</span>&nbsp;<span class="num" id="7802250">50790</span><span class="op" id="7802255">}</span><span class="op" id="7802256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802259">}</span><span class="op" id="7802260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802267">&#34;../testdata/Mark.Twain-Tom.Sawyer.txt&#34;</span><span class="op" id="7802306">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7802310">&#34;Mark.Twain-Tom.Sawyer&#34;</span><span class="op" id="7802333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802337">[</span><span class="op" id="7802338">...</span><span class="op" id="7802341">]</span><span class="builtintype" id="7802342">int</span><span class="op" id="7802345">{</span><span class="num" id="7802346">407330</span><span class="op" id="7802352">,</span>&nbsp;<span class="num" id="7802354">187598</span><span class="op" id="7802360">,</span>&nbsp;<span class="num" id="7802362">180361</span><span class="op" id="7802368">,</span>&nbsp;<span class="num" id="7802370">172974</span><span class="op" id="7802376">,</span>&nbsp;<span class="num" id="7802378">169160</span><span class="op" id="7802384">,</span>&nbsp;<span class="num" id="7802386">163476</span><span class="op" id="7802392">,</span>&nbsp;<span class="num" id="7802394">160936</span><span class="op" id="7802400">,</span>&nbsp;<span class="num" id="7802402">160506</span><span class="op" id="7802408">,</span>&nbsp;<span class="num" id="7802410">160295</span><span class="op" id="7802416">,</span>&nbsp;<span class="num" id="7802418">160295</span><span class="op" id="7802424">}</span><span class="op" id="7802425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802428">}</span><span class="op" id="7802429">,</span><br>
<span class="lineno"></span><span class="op" id="7802431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7802434">func</span>&nbsp;<span class="ident" id="7802439">TestDeflateInflateString</span><span class="op" id="7802463">(</span><span class="ident" id="7802464">t</span>&nbsp;<span class="op" id="7802466">*</span><span class="ident" id="7802467"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7802474">.</span><span class="ident" id="7802475">T</span><span class="op" id="7802476">)</span>&nbsp;<span class="op" id="7802478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802481">for</span>&nbsp;<span class="ident" id="7802485">_</span><span class="op" id="7802486">,</span>&nbsp;<span class="ident" id="7802488">test</span>&nbsp;<span class="op" id="7802493">:=</span>&nbsp;<span class="keyword" id="7802496">range</span>&nbsp;<span class="ident" id="7802502"><a href="/compress/flate/deflate_test.go.html#7802073">deflateInflateStringTests</a></span>&nbsp;<span class="op" id="7802528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802532">gold</span><span class="op" id="7802536">,</span>&nbsp;<span class="ident" id="7802538">err</span>&nbsp;<span class="op" id="7802542">:=</span>&nbsp;<span class="ident" id="7802545"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7802551">.</span><span class="ident" id="7802552">ReadFile</span><span class="op" id="7802560">(</span><span class="ident" id="7802561"><a href="/compress/flate/deflate_test.go.html#7802488">test</a></span><span class="op" id="7802565">.</span><span class="ident" id="7802566">filename</span><span class="op" id="7802574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802578">if</span>&nbsp;<span class="ident" id="7802581"><a href="/compress/flate/deflate_test.go.html#7802538">err</a></span>&nbsp;<span class="op" id="7802585">!=</span>&nbsp;<span class="ident" id="7802588">nil</span>&nbsp;<span class="op" id="7802592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802597"><a href="/compress/flate/deflate_test.go.html#7802464">t</a></span><span class="op" id="7802598">.</span><span class="ident" id="7802599">Error</span><span class="op" id="7802604">(</span><span class="ident" id="7802605"><a href="/compress/flate/deflate_test.go.html#7802538">err</a></span><span class="op" id="7802608">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802616"><a href="/compress/flate/deflate_test.go.html#7801434">testToFromWithLimit</a></span><span class="op" id="7802635">(</span><span class="ident" id="7802636"><a href="/compress/flate/deflate_test.go.html#7802464">t</a></span><span class="op" id="7802637">,</span>&nbsp;<span class="ident" id="7802639"><a href="/compress/flate/deflate_test.go.html#7802532">gold</a></span><span class="op" id="7802643">,</span>&nbsp;<span class="ident" id="7802645"><a href="/compress/flate/deflate_test.go.html#7802488">test</a></span><span class="op" id="7802649">.</span><span class="ident" id="7802650">label</span><span class="op" id="7802655">,</span>&nbsp;<span class="ident" id="7802657"><a href="/compress/flate/deflate_test.go.html#7802488">test</a></span><span class="op" id="7802661">.</span><span class="ident" id="7802662">limit</span><span class="op" id="7802667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802671">if</span>&nbsp;<span class="ident" id="7802674"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7802681">.</span><span class="ident" id="7802682">Short</span><span class="op" id="7802687">(</span><span class="op" id="7802688">)</span>&nbsp;<span class="op" id="7802690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802695">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802703">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802706">}</span><br>
<span class="lineno"></span><span class="op" id="7802708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7802711">func</span>&nbsp;<span class="ident" id="7802716">TestReaderDict</span><span class="op" id="7802730">(</span><span class="ident" id="7802731">t</span>&nbsp;<span class="op" id="7802733">*</span><span class="ident" id="7802734"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7802741">.</span><span class="ident" id="7802742">T</span><span class="op" id="7802743">)</span>&nbsp;<span class="op" id="7802745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802748">const</span>&nbsp;<span class="op" id="7802754">(</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802758">dict</span>&nbsp;<span class="op" id="7802763">=</span>&nbsp;<span class="string" id="7802765">&#34;hello&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802781">text</span>&nbsp;<span class="op" id="7802786">=</span>&nbsp;<span class="string" id="7802788">&#34;hello&nbsp;again&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802812">var</span>&nbsp;<span class="ident" id="7802816">b</span>&nbsp;<span class="ident" id="7802818"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7802823">.</span><span class="ident" id="7802824">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802832">w</span><span class="op" id="7802833">,</span>&nbsp;<span class="ident" id="7802835">err</span>&nbsp;<span class="op" id="7802839">:=</span>&nbsp;<span class="ident" id="7802842"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7802851">(</span><span class="op" id="7802852">&amp;</span><span class="ident" id="7802853"><a href="/compress/flate/deflate_test.go.html#7802816">b</a></span><span class="op" id="7802854">,</span>&nbsp;<span class="num" id="7802856">5</span><span class="op" id="7802857">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7802860">if</span>&nbsp;<span class="ident" id="7802863"><a href="/compress/flate/deflate_test.go.html#7802835">err</a></span>&nbsp;<span class="op" id="7802867">!=</span>&nbsp;<span class="ident" id="7802870">nil</span>&nbsp;<span class="op" id="7802874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802878"><a href="/compress/flate/deflate_test.go.html#7802731">t</a></span><span class="op" id="7802879">.</span><span class="ident" id="7802880">Fatalf</span><span class="op" id="7802886">(</span><span class="string" id="7802887">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7802902">,</span>&nbsp;<span class="ident" id="7802904"><a href="/compress/flate/deflate_test.go.html#7802835">err</a></span><span class="op" id="7802907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7802910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802913"><a href="/compress/flate/deflate_test.go.html#7802832">w</a></span><span class="op" id="7802914">.</span><span class="ident" id="7802915">Write</span><span class="op" id="7802920">(</span><span class="op" id="7802921">[</span><span class="op" id="7802922">]</span><span class="builtintype" id="7802923">byte</span><span class="op" id="7802927">(</span><span class="ident" id="7802928"><a href="/compress/flate/deflate_test.go.html#7802758">dict</a></span><span class="op" id="7802932">)</span><span class="op" id="7802933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802936"><a href="/compress/flate/deflate_test.go.html#7802832">w</a></span><span class="op" id="7802937">.</span><span class="ident" id="7802938">Flush</span><span class="op" id="7802943">(</span><span class="op" id="7802944">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802947"><a href="/compress/flate/deflate_test.go.html#7802816">b</a></span><span class="op" id="7802948">.</span><span class="ident" id="7802949">Reset</span><span class="op" id="7802954">(</span><span class="op" id="7802955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802958"><a href="/compress/flate/deflate_test.go.html#7802832">w</a></span><span class="op" id="7802959">.</span><span class="ident" id="7802960">Write</span><span class="op" id="7802965">(</span><span class="op" id="7802966">[</span><span class="op" id="7802967">]</span><span class="builtintype" id="7802968">byte</span><span class="op" id="7802972">(</span><span class="ident" id="7802973"><a href="/compress/flate/deflate_test.go.html#7802781">text</a></span><span class="op" id="7802977">)</span><span class="op" id="7802978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802981"><a href="/compress/flate/deflate_test.go.html#7802832">w</a></span><span class="op" id="7802982">.</span><span class="ident" id="7802983">Close</span><span class="op" id="7802988">(</span><span class="op" id="7802989">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7802993">r</span>&nbsp;<span class="op" id="7802995">:=</span>&nbsp;<span class="ident" id="7802998"><a href="/compress/flate/inflate.go.html#4369068">NewReaderDict</a></span><span class="op" id="7803011">(</span><span class="op" id="7803012">&amp;</span><span class="ident" id="7803013"><a href="/compress/flate/deflate_test.go.html#7802816">b</a></span><span class="op" id="7803014">,</span>&nbsp;<span class="op" id="7803016">[</span><span class="op" id="7803017">]</span><span class="builtintype" id="7803018">byte</span><span class="op" id="7803022">(</span><span class="ident" id="7803023"><a href="/compress/flate/deflate_test.go.html#7802758">dict</a></span><span class="op" id="7803027">)</span><span class="op" id="7803028">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803031">data</span><span class="op" id="7803035">,</span>&nbsp;<span class="ident" id="7803037"><a href="/compress/flate/deflate_test.go.html#7802835">err</a></span>&nbsp;<span class="op" id="7803041">:=</span>&nbsp;<span class="ident" id="7803044"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7803050">.</span><span class="ident" id="7803051">ReadAll</span><span class="op" id="7803058">(</span><span class="ident" id="7803059"><a href="/compress/flate/deflate_test.go.html#7802993">r</a></span><span class="op" id="7803060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803063">if</span>&nbsp;<span class="ident" id="7803066"><a href="/compress/flate/deflate_test.go.html#7802835">err</a></span>&nbsp;<span class="op" id="7803070">!=</span>&nbsp;<span class="ident" id="7803073">nil</span>&nbsp;<span class="op" id="7803077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803081"><a href="/compress/flate/deflate_test.go.html#7802731">t</a></span><span class="op" id="7803082">.</span><span class="ident" id="7803083">Fatal</span><span class="op" id="7803088">(</span><span class="ident" id="7803089"><a href="/compress/flate/deflate_test.go.html#7802835">err</a></span><span class="op" id="7803092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803098">if</span>&nbsp;<span class="builtintype" id="7803101">string</span><span class="op" id="7803107">(</span><span class="ident" id="7803108"><a href="/compress/flate/deflate_test.go.html#7803031">data</a></span><span class="op" id="7803112">)</span>&nbsp;<span class="op" id="7803114">!=</span>&nbsp;<span class="string" id="7803117">&#34;hello&nbsp;again&nbsp;world&#34;</span>&nbsp;<span class="op" id="7803137">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803141"><a href="/compress/flate/deflate_test.go.html#7802731">t</a></span><span class="op" id="7803142">.</span><span class="ident" id="7803143">Fatalf</span><span class="op" id="7803149">(</span><span class="string" id="7803150">&#34;read&nbsp;returned&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7803176">,</span>&nbsp;<span class="builtintype" id="7803178">string</span><span class="op" id="7803184">(</span><span class="ident" id="7803185"><a href="/compress/flate/deflate_test.go.html#7803031">data</a></span><span class="op" id="7803189">)</span><span class="op" id="7803190">,</span>&nbsp;<span class="ident" id="7803192"><a href="/compress/flate/deflate_test.go.html#7802781">text</a></span><span class="op" id="7803196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803199">}</span><br>
<span class="lineno"></span><span class="op" id="7803201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7803204">func</span>&nbsp;<span class="ident" id="7803209">TestWriterDict</span><span class="op" id="7803223">(</span><span class="ident" id="7803224">t</span>&nbsp;<span class="op" id="7803226">*</span><span class="ident" id="7803227"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7803234">.</span><span class="ident" id="7803235">T</span><span class="op" id="7803236">)</span>&nbsp;<span class="op" id="7803238">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803241">const</span>&nbsp;<span class="op" id="7803247">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803251">dict</span>&nbsp;<span class="op" id="7803256">=</span>&nbsp;<span class="string" id="7803258">&#34;hello&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803274">text</span>&nbsp;<span class="op" id="7803279">=</span>&nbsp;<span class="string" id="7803281">&#34;hello&nbsp;again&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803305">var</span>&nbsp;<span class="ident" id="7803309">b</span>&nbsp;<span class="ident" id="7803311"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7803316">.</span><span class="ident" id="7803317">Buffer</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803325">w</span><span class="op" id="7803326">,</span>&nbsp;<span class="ident" id="7803328">err</span>&nbsp;<span class="op" id="7803332">:=</span>&nbsp;<span class="ident" id="7803335"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7803344">(</span><span class="op" id="7803345">&amp;</span><span class="ident" id="7803346"><a href="/compress/flate/deflate_test.go.html#7803309">b</a></span><span class="op" id="7803347">,</span>&nbsp;<span class="num" id="7803349">5</span><span class="op" id="7803350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803353">if</span>&nbsp;<span class="ident" id="7803356"><a href="/compress/flate/deflate_test.go.html#7803328">err</a></span>&nbsp;<span class="op" id="7803360">!=</span>&nbsp;<span class="ident" id="7803363">nil</span>&nbsp;<span class="op" id="7803367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803371"><a href="/compress/flate/deflate_test.go.html#7803224">t</a></span><span class="op" id="7803372">.</span><span class="ident" id="7803373">Fatalf</span><span class="op" id="7803379">(</span><span class="string" id="7803380">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7803395">,</span>&nbsp;<span class="ident" id="7803397"><a href="/compress/flate/deflate_test.go.html#7803328">err</a></span><span class="op" id="7803400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803406"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803407">.</span><span class="ident" id="7803408">Write</span><span class="op" id="7803413">(</span><span class="op" id="7803414">[</span><span class="op" id="7803415">]</span><span class="builtintype" id="7803416">byte</span><span class="op" id="7803420">(</span><span class="ident" id="7803421"><a href="/compress/flate/deflate_test.go.html#7803251">dict</a></span><span class="op" id="7803425">)</span><span class="op" id="7803426">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803429"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803430">.</span><span class="ident" id="7803431">Flush</span><span class="op" id="7803436">(</span><span class="op" id="7803437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803440"><a href="/compress/flate/deflate_test.go.html#7803309">b</a></span><span class="op" id="7803441">.</span><span class="ident" id="7803442">Reset</span><span class="op" id="7803447">(</span><span class="op" id="7803448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803451"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803452">.</span><span class="ident" id="7803453">Write</span><span class="op" id="7803458">(</span><span class="op" id="7803459">[</span><span class="op" id="7803460">]</span><span class="builtintype" id="7803461">byte</span><span class="op" id="7803465">(</span><span class="ident" id="7803466"><a href="/compress/flate/deflate_test.go.html#7803274">text</a></span><span class="op" id="7803470">)</span><span class="op" id="7803471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803474"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803475">.</span><span class="ident" id="7803476">Close</span><span class="op" id="7803481">(</span><span class="op" id="7803482">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803486">var</span>&nbsp;<span class="ident" id="7803490">b1</span>&nbsp;<span class="ident" id="7803493"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7803498">.</span><span class="ident" id="7803499">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803507"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803508">,</span>&nbsp;<span class="ident" id="7803510">_</span>&nbsp;<span class="op" id="7803512">=</span>&nbsp;<span class="ident" id="7803514"><a href="/compress/flate/deflate.go.html#4323297">NewWriterDict</a></span><span class="op" id="7803527">(</span><span class="op" id="7803528">&amp;</span><span class="ident" id="7803529"><a href="/compress/flate/deflate_test.go.html#7803490">b1</a></span><span class="op" id="7803531">,</span>&nbsp;<span class="num" id="7803533">5</span><span class="op" id="7803534">,</span>&nbsp;<span class="op" id="7803536">[</span><span class="op" id="7803537">]</span><span class="builtintype" id="7803538">byte</span><span class="op" id="7803542">(</span><span class="ident" id="7803543"><a href="/compress/flate/deflate_test.go.html#7803251">dict</a></span><span class="op" id="7803547">)</span><span class="op" id="7803548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803551"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803552">.</span><span class="ident" id="7803553">Write</span><span class="op" id="7803558">(</span><span class="op" id="7803559">[</span><span class="op" id="7803560">]</span><span class="builtintype" id="7803561">byte</span><span class="op" id="7803565">(</span><span class="ident" id="7803566"><a href="/compress/flate/deflate_test.go.html#7803274">text</a></span><span class="op" id="7803570">)</span><span class="op" id="7803571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803574"><a href="/compress/flate/deflate_test.go.html#7803325">w</a></span><span class="op" id="7803575">.</span><span class="ident" id="7803576">Close</span><span class="op" id="7803581">(</span><span class="op" id="7803582">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803586">if</span>&nbsp;<span class="op" id="7803589">!</span><span class="ident" id="7803590"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7803595">.</span><span class="ident" id="7803596">Equal</span><span class="op" id="7803601">(</span><span class="ident" id="7803602"><a href="/compress/flate/deflate_test.go.html#7803490">b1</a></span><span class="op" id="7803604">.</span><span class="ident" id="7803605">Bytes</span><span class="op" id="7803610">(</span><span class="op" id="7803611">)</span><span class="op" id="7803612">,</span>&nbsp;<span class="ident" id="7803614"><a href="/compress/flate/deflate_test.go.html#7803309">b</a></span><span class="op" id="7803615">.</span><span class="ident" id="7803616">Bytes</span><span class="op" id="7803621">(</span><span class="op" id="7803622">)</span><span class="op" id="7803623">)</span>&nbsp;<span class="op" id="7803625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803629"><a href="/compress/flate/deflate_test.go.html#7803224">t</a></span><span class="op" id="7803630">.</span><span class="ident" id="7803631">Fatalf</span><span class="op" id="7803637">(</span><span class="string" id="7803638">&#34;writer&nbsp;wrote&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7803663">,</span>&nbsp;<span class="ident" id="7803665"><a href="/compress/flate/deflate_test.go.html#7803490">b1</a></span><span class="op" id="7803667">.</span><span class="ident" id="7803668">Bytes</span><span class="op" id="7803673">(</span><span class="op" id="7803674">)</span><span class="op" id="7803675">,</span>&nbsp;<span class="ident" id="7803677"><a href="/compress/flate/deflate_test.go.html#7803309">b</a></span><span class="op" id="7803678">.</span><span class="ident" id="7803679">Bytes</span><span class="op" id="7803684">(</span><span class="op" id="7803685">)</span><span class="op" id="7803686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803689">}</span><br>
<span class="lineno"></span><span class="op" id="7803691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="comment" id="7803694">//&nbsp;See&nbsp;http://code.google.com/p/go/issues/detail?id=2508</span><br>
<span class="lineno"></span><span class="keyword" id="7803751">func</span>&nbsp;<span class="ident" id="7803756">TestRegression2508</span><span class="op" id="7803774">(</span><span class="ident" id="7803775">t</span>&nbsp;<span class="op" id="7803777">*</span><span class="ident" id="7803778"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7803785">.</span><span class="ident" id="7803786">T</span><span class="op" id="7803787">)</span>&nbsp;<span class="op" id="7803789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803792">if</span>&nbsp;<span class="ident" id="7803795"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7803802">.</span><span class="ident" id="7803803">Short</span><span class="op" id="7803808">(</span><span class="op" id="7803809">)</span>&nbsp;<span class="op" id="7803811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803815"><a href="/compress/flate/deflate_test.go.html#7803775">t</a></span><span class="op" id="7803816">.</span><span class="ident" id="7803817">Logf</span><span class="op" id="7803821">(</span><span class="string" id="7803822">&#34;test&nbsp;disabled&nbsp;with&nbsp;-short&#34;</span><span class="op" id="7803849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803853">return</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803864">w</span><span class="op" id="7803865">,</span>&nbsp;<span class="ident" id="7803867">err</span>&nbsp;<span class="op" id="7803871">:=</span>&nbsp;<span class="ident" id="7803874"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7803883">(</span><span class="ident" id="7803884"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7803890">.</span><span class="ident" id="7803891">Discard</span><span class="op" id="7803898">,</span>&nbsp;<span class="num" id="7803900">1</span><span class="op" id="7803901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803904">if</span>&nbsp;<span class="ident" id="7803907"><a href="/compress/flate/deflate_test.go.html#7803867">err</a></span>&nbsp;<span class="op" id="7803911">!=</span>&nbsp;<span class="ident" id="7803914">nil</span>&nbsp;<span class="op" id="7803918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803922"><a href="/compress/flate/deflate_test.go.html#7803775">t</a></span><span class="op" id="7803923">.</span><span class="ident" id="7803924">Fatalf</span><span class="op" id="7803930">(</span><span class="string" id="7803931">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7803946">,</span>&nbsp;<span class="ident" id="7803948"><a href="/compress/flate/deflate_test.go.html#7803867">err</a></span><span class="op" id="7803951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7803954">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803957">buf</span>&nbsp;<span class="op" id="7803961">:=</span>&nbsp;<span class="builtinfunc" id="7803964">make</span><span class="op" id="7803968">(</span><span class="op" id="7803969">[</span><span class="op" id="7803970">]</span><span class="builtintype" id="7803971">byte</span><span class="op" id="7803975">,</span>&nbsp;<span class="num" id="7803977">1024</span><span class="op" id="7803981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7803984">for</span>&nbsp;<span class="ident" id="7803988">i</span>&nbsp;<span class="op" id="7803990">:=</span>&nbsp;<span class="num" id="7803993">0</span><span class="op" id="7803994">;</span>&nbsp;<span class="ident" id="7803996"><a href="/compress/flate/deflate_test.go.html#7803988">i</a></span>&nbsp;<span class="op" id="7803998">&lt;</span>&nbsp;<span class="num" id="7804000">131072</span><span class="op" id="7804006">;</span>&nbsp;<span class="ident" id="7804008"><a href="/compress/flate/deflate_test.go.html#7803988">i</a></span><span class="op" id="7804009">++</span>&nbsp;<span class="op" id="7804012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804016">if</span>&nbsp;<span class="ident" id="7804019">_</span><span class="op" id="7804020">,</span>&nbsp;<span class="ident" id="7804022">err</span>&nbsp;<span class="op" id="7804026">:=</span>&nbsp;<span class="ident" id="7804029"><a href="/compress/flate/deflate_test.go.html#7803864">w</a></span><span class="op" id="7804030">.</span><span class="ident" id="7804031">Write</span><span class="op" id="7804036">(</span><span class="ident" id="7804037"><a href="/compress/flate/deflate_test.go.html#7803957">buf</a></span><span class="op" id="7804040">)</span><span class="op" id="7804041">;</span>&nbsp;<span class="ident" id="7804043"><a href="/compress/flate/deflate_test.go.html#7804022">err</a></span>&nbsp;<span class="op" id="7804047">!=</span>&nbsp;<span class="ident" id="7804050">nil</span>&nbsp;<span class="op" id="7804054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804059"><a href="/compress/flate/deflate_test.go.html#7803775">t</a></span><span class="op" id="7804060">.</span><span class="ident" id="7804061">Fatalf</span><span class="op" id="7804067">(</span><span class="string" id="7804068">&#34;writer&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7804087">,</span>&nbsp;<span class="ident" id="7804089"><a href="/compress/flate/deflate_test.go.html#7804022">err</a></span><span class="op" id="7804092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804096">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804102"><a href="/compress/flate/deflate_test.go.html#7803864">w</a></span><span class="op" id="7804103">.</span><span class="ident" id="7804104">Close</span><span class="op" id="7804109">(</span><span class="op" id="7804110">)</span><br>
<span class="lineno"></span><span class="op" id="7804112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7804115">func</span>&nbsp;<span class="ident" id="7804120">TestWriterReset</span><span class="op" id="7804135">(</span><span class="ident" id="7804136">t</span>&nbsp;<span class="op" id="7804138">*</span><span class="ident" id="7804139"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7804146">.</span><span class="ident" id="7804147">T</span><span class="op" id="7804148">)</span>&nbsp;<span class="op" id="7804150">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804153">for</span>&nbsp;<span class="ident" id="7804157">level</span>&nbsp;<span class="op" id="7804163">:=</span>&nbsp;<span class="num" id="7804166">0</span><span class="op" id="7804167">;</span>&nbsp;<span class="ident" id="7804169"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span>&nbsp;<span class="op" id="7804175">&lt;=</span>&nbsp;<span class="num" id="7804178">9</span><span class="op" id="7804179">;</span>&nbsp;<span class="ident" id="7804181"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span><span class="op" id="7804186">++</span>&nbsp;<span class="op" id="7804189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804193">if</span>&nbsp;<span class="ident" id="7804196"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7804203">.</span><span class="ident" id="7804204">Short</span><span class="op" id="7804209">(</span><span class="op" id="7804210">)</span>&nbsp;<span class="op" id="7804212">&amp;&amp;</span>&nbsp;<span class="ident" id="7804215"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span>&nbsp;<span class="op" id="7804221">&gt;</span>&nbsp;<span class="num" id="7804223">1</span>&nbsp;<span class="op" id="7804225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804230">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804242">w</span><span class="op" id="7804243">,</span>&nbsp;<span class="ident" id="7804245">err</span>&nbsp;<span class="op" id="7804249">:=</span>&nbsp;<span class="ident" id="7804252"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7804261">(</span><span class="ident" id="7804262"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7804268">.</span><span class="ident" id="7804269">Discard</span><span class="op" id="7804276">,</span>&nbsp;<span class="ident" id="7804278"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span><span class="op" id="7804283">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804287">if</span>&nbsp;<span class="ident" id="7804290"><a href="/compress/flate/deflate_test.go.html#7804245">err</a></span>&nbsp;<span class="op" id="7804294">!=</span>&nbsp;<span class="ident" id="7804297">nil</span>&nbsp;<span class="op" id="7804301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804306"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804307">.</span><span class="ident" id="7804308">Fatalf</span><span class="op" id="7804314">(</span><span class="string" id="7804315">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7804330">,</span>&nbsp;<span class="ident" id="7804332"><a href="/compress/flate/deflate_test.go.html#7804245">err</a></span><span class="op" id="7804335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804343">buf</span>&nbsp;<span class="op" id="7804347">:=</span>&nbsp;<span class="op" id="7804350">[</span><span class="op" id="7804351">]</span><span class="builtintype" id="7804352">byte</span><span class="op" id="7804356">(</span><span class="string" id="7804357">&#34;hello&nbsp;world&#34;</span><span class="op" id="7804370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804374">for</span>&nbsp;<span class="ident" id="7804378">i</span>&nbsp;<span class="op" id="7804380">:=</span>&nbsp;<span class="num" id="7804383">0</span><span class="op" id="7804384">;</span>&nbsp;<span class="ident" id="7804386"><a href="/compress/flate/deflate_test.go.html#7804378">i</a></span>&nbsp;<span class="op" id="7804388">&lt;</span>&nbsp;<span class="num" id="7804390">1024</span><span class="op" id="7804394">;</span>&nbsp;<span class="ident" id="7804396"><a href="/compress/flate/deflate_test.go.html#7804378">i</a></span><span class="op" id="7804397">++</span>&nbsp;<span class="op" id="7804400">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804405"><a href="/compress/flate/deflate_test.go.html#7804242">w</a></span><span class="op" id="7804406">.</span><span class="ident" id="7804407">Write</span><span class="op" id="7804412">(</span><span class="ident" id="7804413"><a href="/compress/flate/deflate_test.go.html#7804343">buf</a></span><span class="op" id="7804416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804424"><a href="/compress/flate/deflate_test.go.html#7804242">w</a></span><span class="op" id="7804425">.</span><span class="ident" id="7804426">Reset</span><span class="op" id="7804431">(</span><span class="ident" id="7804432"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7804438">.</span><span class="ident" id="7804439">Discard</span><span class="op" id="7804446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804451">wref</span><span class="op" id="7804455">,</span>&nbsp;<span class="ident" id="7804457"><a href="/compress/flate/deflate_test.go.html#7804245">err</a></span>&nbsp;<span class="op" id="7804461">:=</span>&nbsp;<span class="ident" id="7804464"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7804473">(</span><span class="ident" id="7804474"><a href="/compress/flate/deflate_test.go.html#7794409">ioutil</a></span><span class="op" id="7804480">.</span><span class="ident" id="7804481">Discard</span><span class="op" id="7804488">,</span>&nbsp;<span class="ident" id="7804490"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span><span class="op" id="7804495">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804499">if</span>&nbsp;<span class="ident" id="7804502"><a href="/compress/flate/deflate_test.go.html#7804245">err</a></span>&nbsp;<span class="op" id="7804506">!=</span>&nbsp;<span class="ident" id="7804509">nil</span>&nbsp;<span class="op" id="7804513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804518"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804519">.</span><span class="ident" id="7804520">Fatalf</span><span class="op" id="7804526">(</span><span class="string" id="7804527">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7804542">,</span>&nbsp;<span class="ident" id="7804544"><a href="/compress/flate/deflate_test.go.html#7804245">err</a></span><span class="op" id="7804547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7804556">//&nbsp;DeepEqual&nbsp;doesn&#39;t&nbsp;compare&nbsp;functions.</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804598"><a href="/compress/flate/deflate_test.go.html#7804242">w</a></span><span class="op" id="7804599">.</span><span class="ident" id="7804600">d</span><span class="op" id="7804601">.</span><span class="ident" id="7804602">fill</span><span class="op" id="7804606">,</span>&nbsp;<span class="ident" id="7804608"><a href="/compress/flate/deflate_test.go.html#7804451">wref</a></span><span class="op" id="7804612">.</span><span class="ident" id="7804613">d</span><span class="op" id="7804614">.</span><span class="ident" id="7804615">fill</span>&nbsp;<span class="op" id="7804620">=</span>&nbsp;<span class="ident" id="7804622">nil</span><span class="op" id="7804625">,</span>&nbsp;<span class="ident" id="7804627">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804633"><a href="/compress/flate/deflate_test.go.html#7804242">w</a></span><span class="op" id="7804634">.</span><span class="ident" id="7804635">d</span><span class="op" id="7804636">.</span><span class="ident" id="7804637">step</span><span class="op" id="7804641">,</span>&nbsp;<span class="ident" id="7804643"><a href="/compress/flate/deflate_test.go.html#7804451">wref</a></span><span class="op" id="7804647">.</span><span class="ident" id="7804648">d</span><span class="op" id="7804649">.</span><span class="ident" id="7804650">step</span>&nbsp;<span class="op" id="7804655">=</span>&nbsp;<span class="ident" id="7804657">nil</span><span class="op" id="7804660">,</span>&nbsp;<span class="ident" id="7804662">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7804668">if</span>&nbsp;<span class="op" id="7804671">!</span><span class="ident" id="7804672"><a href="/compress/flate/deflate_test.go.html#7794422">reflect</a></span><span class="op" id="7804679">.</span><span class="ident" id="7804680">DeepEqual</span><span class="op" id="7804689">(</span><span class="ident" id="7804690"><a href="/compress/flate/deflate_test.go.html#7804242">w</a></span><span class="op" id="7804691">,</span>&nbsp;<span class="ident" id="7804693"><a href="/compress/flate/deflate_test.go.html#7804451">wref</a></span><span class="op" id="7804697">)</span>&nbsp;<span class="op" id="7804699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804704"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804705">.</span><span class="ident" id="7804706">Errorf</span><span class="op" id="7804712">(</span><span class="string" id="7804713">&#34;level&nbsp;%d&nbsp;Writer&nbsp;not&nbsp;reset&nbsp;after&nbsp;Reset&#34;</span><span class="op" id="7804752">,</span>&nbsp;<span class="ident" id="7804754"><a href="/compress/flate/deflate_test.go.html#7804157">level</a></span><span class="op" id="7804759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804763">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804769"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7804784">(</span><span class="ident" id="7804785"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804786">,</span>&nbsp;<span class="keyword" id="7804788">func</span><span class="op" id="7804792">(</span><span class="ident" id="7804793">w</span>&nbsp;<span class="ident" id="7804795"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7804797">.</span><span class="ident" id="7804798">Writer</span><span class="op" id="7804804">)</span>&nbsp;<span class="op" id="7804806">(</span><span class="op" id="7804807">*</span><span class="ident" id="7804808"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7804814">,</span>&nbsp;<span class="builtintype" id="7804816">error</span><span class="op" id="7804821">)</span>&nbsp;<span class="op" id="7804823">{</span>&nbsp;<span class="keyword" id="7804825">return</span>&nbsp;<span class="ident" id="7804832"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7804841">(</span><span class="ident" id="7804842"><a href="/compress/flate/deflate_test.go.html#7804793">w</a></span><span class="op" id="7804843">,</span>&nbsp;<span class="ident" id="7804845"><a href="/compress/flate/deflate.go.html#4310185">NoCompression</a></span><span class="op" id="7804858">)</span>&nbsp;<span class="op" id="7804860">}</span><span class="op" id="7804861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804864"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7804879">(</span><span class="ident" id="7804880"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804881">,</span>&nbsp;<span class="keyword" id="7804883">func</span><span class="op" id="7804887">(</span><span class="ident" id="7804888">w</span>&nbsp;<span class="ident" id="7804890"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7804892">.</span><span class="ident" id="7804893">Writer</span><span class="op" id="7804899">)</span>&nbsp;<span class="op" id="7804901">(</span><span class="op" id="7804902">*</span><span class="ident" id="7804903"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7804909">,</span>&nbsp;<span class="builtintype" id="7804911">error</span><span class="op" id="7804916">)</span>&nbsp;<span class="op" id="7804918">{</span>&nbsp;<span class="keyword" id="7804920">return</span>&nbsp;<span class="ident" id="7804927"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7804936">(</span><span class="ident" id="7804937"><a href="/compress/flate/deflate_test.go.html#7804888">w</a></span><span class="op" id="7804938">,</span>&nbsp;<span class="ident" id="7804940"><a href="/compress/flate/deflate.go.html#4310281">DefaultCompression</a></span><span class="op" id="7804958">)</span>&nbsp;<span class="op" id="7804960">}</span><span class="op" id="7804961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804964"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7804979">(</span><span class="ident" id="7804980"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7804981">,</span>&nbsp;<span class="keyword" id="7804983">func</span><span class="op" id="7804987">(</span><span class="ident" id="7804988">w</span>&nbsp;<span class="ident" id="7804990"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7804992">.</span><span class="ident" id="7804993">Writer</span><span class="op" id="7804999">)</span>&nbsp;<span class="op" id="7805001">(</span><span class="op" id="7805002">*</span><span class="ident" id="7805003"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7805009">,</span>&nbsp;<span class="builtintype" id="7805011">error</span><span class="op" id="7805016">)</span>&nbsp;<span class="op" id="7805018">{</span>&nbsp;<span class="keyword" id="7805020">return</span>&nbsp;<span class="ident" id="7805027"><a href="/compress/flate/deflate.go.html#4322808">NewWriter</a></span><span class="op" id="7805036">(</span><span class="ident" id="7805037"><a href="/compress/flate/deflate_test.go.html#7804988">w</a></span><span class="op" id="7805038">,</span>&nbsp;<span class="ident" id="7805040"><a href="/compress/flate/deflate.go.html#4310257">BestCompression</a></span><span class="op" id="7805055">)</span>&nbsp;<span class="op" id="7805057">}</span><span class="op" id="7805058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805061">dict</span>&nbsp;<span class="op" id="7805066">:=</span>&nbsp;<span class="op" id="7805069">[</span><span class="op" id="7805070">]</span><span class="builtintype" id="7805071">byte</span><span class="op" id="7805075">(</span><span class="string" id="7805076">&#34;we&nbsp;are&nbsp;the&nbsp;world&#34;</span><span class="op" id="7805094">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805097"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7805112">(</span><span class="ident" id="7805113"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7805114">,</span>&nbsp;<span class="keyword" id="7805116">func</span><span class="op" id="7805120">(</span><span class="ident" id="7805121">w</span>&nbsp;<span class="ident" id="7805123"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7805125">.</span><span class="ident" id="7805126">Writer</span><span class="op" id="7805132">)</span>&nbsp;<span class="op" id="7805134">(</span><span class="op" id="7805135">*</span><span class="ident" id="7805136"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7805142">,</span>&nbsp;<span class="builtintype" id="7805144">error</span><span class="op" id="7805149">)</span>&nbsp;<span class="op" id="7805151">{</span>&nbsp;<span class="keyword" id="7805153">return</span>&nbsp;<span class="ident" id="7805160"><a href="/compress/flate/deflate.go.html#4323297">NewWriterDict</a></span><span class="op" id="7805173">(</span><span class="ident" id="7805174"><a href="/compress/flate/deflate_test.go.html#7805121">w</a></span><span class="op" id="7805175">,</span>&nbsp;<span class="ident" id="7805177"><a href="/compress/flate/deflate.go.html#4310185">NoCompression</a></span><span class="op" id="7805190">,</span>&nbsp;<span class="ident" id="7805192"><a href="/compress/flate/deflate_test.go.html#7805061">dict</a></span><span class="op" id="7805196">)</span>&nbsp;<span class="op" id="7805198">}</span><span class="op" id="7805199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805202"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7805217">(</span><span class="ident" id="7805218"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7805219">,</span>&nbsp;<span class="keyword" id="7805221">func</span><span class="op" id="7805225">(</span><span class="ident" id="7805226">w</span>&nbsp;<span class="ident" id="7805228"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7805230">.</span><span class="ident" id="7805231">Writer</span><span class="op" id="7805237">)</span>&nbsp;<span class="op" id="7805239">(</span><span class="op" id="7805240">*</span><span class="ident" id="7805241"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7805247">,</span>&nbsp;<span class="builtintype" id="7805249">error</span><span class="op" id="7805254">)</span>&nbsp;<span class="op" id="7805256">{</span>&nbsp;<span class="keyword" id="7805258">return</span>&nbsp;<span class="ident" id="7805265"><a href="/compress/flate/deflate.go.html#4323297">NewWriterDict</a></span><span class="op" id="7805278">(</span><span class="ident" id="7805279"><a href="/compress/flate/deflate_test.go.html#7805226">w</a></span><span class="op" id="7805280">,</span>&nbsp;<span class="ident" id="7805282"><a href="/compress/flate/deflate.go.html#4310281">DefaultCompression</a></span><span class="op" id="7805300">,</span>&nbsp;<span class="ident" id="7805302"><a href="/compress/flate/deflate_test.go.html#7805061">dict</a></span><span class="op" id="7805306">)</span>&nbsp;<span class="op" id="7805308">}</span><span class="op" id="7805309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805312"><a href="/compress/flate/deflate_test.go.html#7805426">testResetOutput</a></span><span class="op" id="7805327">(</span><span class="ident" id="7805328"><a href="/compress/flate/deflate_test.go.html#7804136">t</a></span><span class="op" id="7805329">,</span>&nbsp;<span class="keyword" id="7805331">func</span><span class="op" id="7805335">(</span><span class="ident" id="7805336">w</span>&nbsp;<span class="ident" id="7805338"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7805340">.</span><span class="ident" id="7805341">Writer</span><span class="op" id="7805347">)</span>&nbsp;<span class="op" id="7805349">(</span><span class="op" id="7805350">*</span><span class="ident" id="7805351"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7805357">,</span>&nbsp;<span class="builtintype" id="7805359">error</span><span class="op" id="7805364">)</span>&nbsp;<span class="op" id="7805366">{</span>&nbsp;<span class="keyword" id="7805368">return</span>&nbsp;<span class="ident" id="7805375"><a href="/compress/flate/deflate.go.html#4323297">NewWriterDict</a></span><span class="op" id="7805388">(</span><span class="ident" id="7805389"><a href="/compress/flate/deflate_test.go.html#7805336">w</a></span><span class="op" id="7805390">,</span>&nbsp;<span class="ident" id="7805392"><a href="/compress/flate/deflate.go.html#4310257">BestCompression</a></span><span class="op" id="7805407">,</span>&nbsp;<span class="ident" id="7805409"><a href="/compress/flate/deflate_test.go.html#7805061">dict</a></span><span class="op" id="7805413">)</span>&nbsp;<span class="op" id="7805415">}</span><span class="op" id="7805416">)</span><br>
<span class="lineno"></span><span class="op" id="7805418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span><span class="keyword" id="7805421">func</span>&nbsp;<span class="ident" id="7805426">testResetOutput</span><span class="op" id="7805441">(</span><span class="ident" id="7805442">t</span>&nbsp;<span class="op" id="7805444">*</span><span class="ident" id="7805445"><a href="/compress/flate/deflate_test.go.html#7794441">testing</a></span><span class="op" id="7805452">.</span><span class="ident" id="7805453">T</span><span class="op" id="7805454">,</span>&nbsp;<span class="ident" id="7805456">newWriter</span>&nbsp;<span class="keyword" id="7805466">func</span><span class="op" id="7805470">(</span><span class="ident" id="7805471">w</span>&nbsp;<span class="ident" id="7805473"><a href="/compress/flate/deflate_test.go.html#7794403">io</a></span><span class="op" id="7805475">.</span><span class="ident" id="7805476">Writer</span><span class="op" id="7805482">)</span>&nbsp;<span class="op" id="7805484">(</span><span class="op" id="7805485">*</span><span class="ident" id="7805486"><a href="/compress/flate/deflate.go.html#4323924">Writer</a></span><span class="op" id="7805492">,</span>&nbsp;<span class="builtintype" id="7805494">error</span><span class="op" id="7805499">)</span><span class="op" id="7805500">)</span>&nbsp;<span class="op" id="7805502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805505">buf</span>&nbsp;<span class="op" id="7805509">:=</span>&nbsp;<span class="builtinfunc" id="7805512">new</span><span class="op" id="7805515">(</span><span class="ident" id="7805516"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7805521">.</span><span class="ident" id="7805522">Buffer</span><span class="op" id="7805528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805531">w</span><span class="op" id="7805532">,</span>&nbsp;<span class="ident" id="7805534">err</span>&nbsp;<span class="op" id="7805538">:=</span>&nbsp;<span class="ident" id="7805541"><a href="/compress/flate/deflate_test.go.html#7805456">newWriter</a></span><span class="op" id="7805550">(</span><span class="ident" id="7805551"><a href="/compress/flate/deflate_test.go.html#7805505">buf</a></span><span class="op" id="7805554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7805557">if</span>&nbsp;<span class="ident" id="7805560"><a href="/compress/flate/deflate_test.go.html#7805534">err</a></span>&nbsp;<span class="op" id="7805564">!=</span>&nbsp;<span class="ident" id="7805567">nil</span>&nbsp;<span class="op" id="7805571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805575"><a href="/compress/flate/deflate_test.go.html#7805442">t</a></span><span class="op" id="7805576">.</span><span class="ident" id="7805577">Fatalf</span><span class="op" id="7805583">(</span><span class="string" id="7805584">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="7805599">,</span>&nbsp;<span class="ident" id="7805601"><a href="/compress/flate/deflate_test.go.html#7805534">err</a></span><span class="op" id="7805604">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805610">b</span>&nbsp;<span class="op" id="7805612">:=</span>&nbsp;<span class="op" id="7805615">[</span><span class="op" id="7805616">]</span><span class="builtintype" id="7805617">byte</span><span class="op" id="7805621">(</span><span class="string" id="7805622">&#34;hello&nbsp;world&#34;</span><span class="op" id="7805635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7805638">for</span>&nbsp;<span class="ident" id="7805642">i</span>&nbsp;<span class="op" id="7805644">:=</span>&nbsp;<span class="num" id="7805647">0</span><span class="op" id="7805648">;</span>&nbsp;<span class="ident" id="7805650"><a href="/compress/flate/deflate_test.go.html#7805642">i</a></span>&nbsp;<span class="op" id="7805652">&lt;</span>&nbsp;<span class="num" id="7805654">1024</span><span class="op" id="7805658">;</span>&nbsp;<span class="ident" id="7805660"><a href="/compress/flate/deflate_test.go.html#7805642">i</a></span><span class="op" id="7805661">++</span>&nbsp;<span class="op" id="7805664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805668"><a href="/compress/flate/deflate_test.go.html#7805531">w</a></span><span class="op" id="7805669">.</span><span class="ident" id="7805670">Write</span><span class="op" id="7805675">(</span><span class="ident" id="7805676"><a href="/compress/flate/deflate_test.go.html#7805610">b</a></span><span class="op" id="7805677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805680">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805683"><a href="/compress/flate/deflate_test.go.html#7805531">w</a></span><span class="op" id="7805684">.</span><span class="ident" id="7805685">Close</span><span class="op" id="7805690">(</span><span class="op" id="7805691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805694">out1</span>&nbsp;<span class="op" id="7805699">:=</span>&nbsp;<span class="ident" id="7805702"><a href="/compress/flate/deflate_test.go.html#7805505">buf</a></span><span class="op" id="7805705">.</span><span class="ident" id="7805706">String</span><span class="op" id="7805712">(</span><span class="op" id="7805713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805717">buf2</span>&nbsp;<span class="op" id="7805722">:=</span>&nbsp;<span class="builtinfunc" id="7805725">new</span><span class="op" id="7805728">(</span><span class="ident" id="7805729"><a href="/compress/flate/deflate_test.go.html#7794387">bytes</a></span><span class="op" id="7805734">.</span><span class="ident" id="7805735">Buffer</span><span class="op" id="7805741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805744"><a href="/compress/flate/deflate_test.go.html#7805531">w</a></span><span class="op" id="7805745">.</span><span class="ident" id="7805746">Reset</span><span class="op" id="7805751">(</span><span class="ident" id="7805752"><a href="/compress/flate/deflate_test.go.html#7805717">buf2</a></span><span class="op" id="7805756">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7805759">for</span>&nbsp;<span class="ident" id="7805763">i</span>&nbsp;<span class="op" id="7805765">:=</span>&nbsp;<span class="num" id="7805768">0</span><span class="op" id="7805769">;</span>&nbsp;<span class="ident" id="7805771"><a href="/compress/flate/deflate_test.go.html#7805763">i</a></span>&nbsp;<span class="op" id="7805773">&lt;</span>&nbsp;<span class="num" id="7805775">1024</span><span class="op" id="7805779">;</span>&nbsp;<span class="ident" id="7805781"><a href="/compress/flate/deflate_test.go.html#7805763">i</a></span><span class="op" id="7805782">++</span>&nbsp;<span class="op" id="7805785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805789"><a href="/compress/flate/deflate_test.go.html#7805531">w</a></span><span class="op" id="7805790">.</span><span class="ident" id="7805791">Write</span><span class="op" id="7805796">(</span><span class="ident" id="7805797"><a href="/compress/flate/deflate_test.go.html#7805610">b</a></span><span class="op" id="7805798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805804"><a href="/compress/flate/deflate_test.go.html#7805531">w</a></span><span class="op" id="7805805">.</span><span class="ident" id="7805806">Close</span><span class="op" id="7805811">(</span><span class="op" id="7805812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805815">out2</span>&nbsp;<span class="op" id="7805820">:=</span>&nbsp;<span class="ident" id="7805823"><a href="/compress/flate/deflate_test.go.html#7805717">buf2</a></span><span class="op" id="7805827">.</span><span class="ident" id="7805828">String</span><span class="op" id="7805834">(</span><span class="op" id="7805835">)</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7805839">if</span>&nbsp;<span class="ident" id="7805842"><a href="/compress/flate/deflate_test.go.html#7805694">out1</a></span>&nbsp;<span class="op" id="7805847">!=</span>&nbsp;<span class="ident" id="7805850"><a href="/compress/flate/deflate_test.go.html#7805815">out2</a></span>&nbsp;<span class="op" id="7805855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805859"><a href="/compress/flate/deflate_test.go.html#7805442">t</a></span><span class="op" id="7805860">.</span><span class="ident" id="7805861">Errorf</span><span class="op" id="7805867">(</span><span class="string" id="7805868">&#34;got&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7805889">,</span>&nbsp;<span class="ident" id="7805891"><a href="/compress/flate/deflate_test.go.html#7805815">out2</a></span><span class="op" id="7805895">,</span>&nbsp;<span class="ident" id="7805897"><a href="/compress/flate/deflate_test.go.html#7805694">out1</a></span><span class="op" id="7805901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805907"><a href="/compress/flate/deflate_test.go.html#7805442">t</a></span><span class="op" id="7805908">.</span><span class="ident" id="7805909">Logf</span><span class="op" id="7805913">(</span><span class="string" id="7805914">&#34;got&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7805928">,</span>&nbsp;<span class="builtinfunc" id="7805930">len</span><span class="op" id="7805933">(</span><span class="ident" id="7805934"><a href="/compress/flate/deflate_test.go.html#7805694">out1</a></span><span class="op" id="7805938">)</span><span class="op" id="7805939">)</span><br>
<span class="lineno">490</span><span class="op" id="7805941">}</span>
</div>
</body>
</html>
