<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2601805">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2601860">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2601914">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2601965">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2602035">package</span>&nbsp;<span class="ident" id="2602043">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2602049">import</span>&nbsp;<span class="op" id="2602056">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2602059">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2602069">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2602079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2602082">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2602126">func</span>&nbsp;<span class="ident" id="2602131">interrupt</span><span class="op" id="2602140">(</span><span class="op" id="2602141">)</span>&nbsp;<span class="op" id="2602143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602146">syscall</span><span class="op" id="2602153">.</span><span class="ident" id="2602154">Kill</span><span class="op" id="2602158">(</span><span class="ident" id="2602159">syscall</span><span class="op" id="2602166">.</span><span class="ident" id="2602167">Getpid</span><span class="op" id="2602173">(</span><span class="op" id="2602174">)</span><span class="op" id="2602175">,</span>&nbsp;<span class="ident" id="2602177">syscall</span><span class="op" id="2602184">.</span><span class="ident" id="2602185">SIGCHLD</span><span class="op" id="2602192">)</span><br>
<span class="lineno"></span><span class="op" id="2602194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2602197">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2602258">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2602326">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2602373">func</span>&nbsp;<span class="ident" id="2602378">readFile</span><span class="op" id="2602386">(</span><span class="ident" id="2602387">name</span>&nbsp;<span class="builtintype" id="2602392">string</span><span class="op" id="2602398">)</span>&nbsp;<span class="op" id="2602400">(</span><span class="op" id="2602401">[</span><span class="op" id="2602402">]</span><span class="builtintype" id="2602403">byte</span><span class="op" id="2602407">,</span>&nbsp;<span class="builtintype" id="2602409">error</span><span class="op" id="2602414">)</span>&nbsp;<span class="op" id="2602416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602419">f</span><span class="op" id="2602420">,</span>&nbsp;<span class="ident" id="2602422">err</span>&nbsp;<span class="op" id="2602426">:=</span>&nbsp;<span class="ident" id="2602429">syscall</span><span class="op" id="2602436">.</span><span class="ident" id="2602437">Open</span><span class="op" id="2602441">(</span><span class="ident" id="2602442">name</span><span class="op" id="2602446">,</span>&nbsp;<span class="ident" id="2602448">syscall</span><span class="op" id="2602455">.</span><span class="ident" id="2602456">O_RDONLY</span><span class="op" id="2602464">,</span>&nbsp;<span class="num" id="2602466">0</span><span class="op" id="2602467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602470">if</span>&nbsp;<span class="ident" id="2602473">err</span>&nbsp;<span class="op" id="2602477">!=</span>&nbsp;<span class="ident" id="2602480">nil</span>&nbsp;<span class="op" id="2602484">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602488">return</span>&nbsp;<span class="ident" id="2602495">nil</span><span class="op" id="2602498">,</span>&nbsp;<span class="ident" id="2602500">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602508">defer</span>&nbsp;<span class="ident" id="2602514">syscall</span><span class="op" id="2602521">.</span><span class="ident" id="2602522">Close</span><span class="op" id="2602527">(</span><span class="ident" id="2602528">f</span><span class="op" id="2602529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602532">var</span>&nbsp;<span class="op" id="2602536">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602540">buf</span>&nbsp;<span class="op" id="2602544">[</span><span class="num" id="2602545">4096</span><span class="op" id="2602549">]</span><span class="builtintype" id="2602550">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602557">ret</span>&nbsp;<span class="op" id="2602561">[</span><span class="op" id="2602562">]</span><span class="builtintype" id="2602563">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602570">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2602574">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602582">for</span>&nbsp;<span class="op" id="2602586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602590">n</span><span class="op" id="2602591">,</span>&nbsp;<span class="ident" id="2602593">err</span>&nbsp;<span class="op" id="2602597">=</span>&nbsp;<span class="ident" id="2602599">syscall</span><span class="op" id="2602606">.</span><span class="ident" id="2602607">Read</span><span class="op" id="2602611">(</span><span class="ident" id="2602612">f</span><span class="op" id="2602613">,</span>&nbsp;<span class="ident" id="2602615">buf</span><span class="op" id="2602618">[</span><span class="op" id="2602619">:</span><span class="op" id="2602620">]</span><span class="op" id="2602621">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602625">if</span>&nbsp;<span class="ident" id="2602628">n</span>&nbsp;<span class="op" id="2602630">&gt;</span>&nbsp;<span class="num" id="2602632">0</span>&nbsp;<span class="op" id="2602634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602639">ret</span>&nbsp;<span class="op" id="2602643">=</span>&nbsp;<span class="builtinfunc" id="2602645">append</span><span class="op" id="2602651">(</span><span class="ident" id="2602652">ret</span><span class="op" id="2602655">,</span>&nbsp;<span class="ident" id="2602657">buf</span><span class="op" id="2602660">[</span><span class="op" id="2602661">:</span><span class="ident" id="2602662">n</span><span class="op" id="2602663">]</span><span class="op" id="2602664">...</span><span class="op" id="2602667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602675">if</span>&nbsp;<span class="ident" id="2602678">n</span>&nbsp;<span class="op" id="2602680">==</span>&nbsp;<span class="num" id="2602683">0</span>&nbsp;<span class="op" id="2602685">||</span>&nbsp;<span class="ident" id="2602688">err</span>&nbsp;<span class="op" id="2602692">!=</span>&nbsp;<span class="ident" id="2602695">nil</span>&nbsp;<span class="op" id="2602699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602704">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602718">return</span>&nbsp;<span class="ident" id="2602725">ret</span><span class="op" id="2602728">,</span>&nbsp;<span class="ident" id="2602730">err</span><br>
<span class="lineno"></span><span class="op" id="2602734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2602737">func</span>&nbsp;<span class="ident" id="2602742">open</span><span class="op" id="2602746">(</span><span class="ident" id="2602747">name</span>&nbsp;<span class="builtintype" id="2602752">string</span><span class="op" id="2602758">)</span>&nbsp;<span class="op" id="2602760">(</span><span class="builtintype" id="2602761">uintptr</span><span class="op" id="2602768">,</span>&nbsp;<span class="builtintype" id="2602770">error</span><span class="op" id="2602775">)</span>&nbsp;<span class="op" id="2602777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602780">fd</span><span class="op" id="2602782">,</span>&nbsp;<span class="ident" id="2602784">err</span>&nbsp;<span class="op" id="2602788">:=</span>&nbsp;<span class="ident" id="2602791">syscall</span><span class="op" id="2602798">.</span><span class="ident" id="2602799">Open</span><span class="op" id="2602803">(</span><span class="ident" id="2602804">name</span><span class="op" id="2602808">,</span>&nbsp;<span class="ident" id="2602810">syscall</span><span class="op" id="2602817">.</span><span class="ident" id="2602818">O_RDONLY</span><span class="op" id="2602826">,</span>&nbsp;<span class="num" id="2602828">0</span><span class="op" id="2602829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602832">if</span>&nbsp;<span class="ident" id="2602835">err</span>&nbsp;<span class="op" id="2602839">!=</span>&nbsp;<span class="ident" id="2602842">nil</span>&nbsp;<span class="op" id="2602846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602850">return</span>&nbsp;<span class="num" id="2602857">0</span><span class="op" id="2602858">,</span>&nbsp;<span class="ident" id="2602860">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2602865">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2602868">return</span>&nbsp;<span class="builtintype" id="2602875">uintptr</span><span class="op" id="2602882">(</span><span class="ident" id="2602883">fd</span><span class="op" id="2602885">)</span><span class="op" id="2602886">,</span>&nbsp;<span class="ident" id="2602888">nil</span><br>
<span class="lineno"></span><span class="op" id="2602892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2602895">func</span>&nbsp;<span class="ident" id="2602900">closefd</span><span class="op" id="2602907">(</span><span class="ident" id="2602908">fd</span>&nbsp;<span class="builtintype" id="2602911">uintptr</span><span class="op" id="2602918">)</span>&nbsp;<span class="op" id="2602920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2602923">syscall</span><span class="op" id="2602930">.</span><span class="ident" id="2602931">Close</span><span class="op" id="2602936">(</span><span class="builtintype" id="2602937">int</span><span class="op" id="2602940">(</span><span class="ident" id="2602941">fd</span><span class="op" id="2602943">)</span><span class="op" id="2602944">)</span><br>
<span class="lineno">55</span><span class="op" id="2602946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2602949">func</span>&nbsp;<span class="ident" id="2602954">preadn</span><span class="op" id="2602960">(</span><span class="ident" id="2602961">fd</span>&nbsp;<span class="builtintype" id="2602964">uintptr</span><span class="op" id="2602971">,</span>&nbsp;<span class="ident" id="2602973">buf</span>&nbsp;<span class="op" id="2602977">[</span><span class="op" id="2602978">]</span><span class="builtintype" id="2602979">byte</span><span class="op" id="2602983">,</span>&nbsp;<span class="ident" id="2602985">off</span>&nbsp;<span class="builtintype" id="2602989">int</span><span class="op" id="2602992">)</span>&nbsp;<span class="builtintype" id="2602994">error</span>&nbsp;<span class="op" id="2603000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603003">whence</span>&nbsp;<span class="op" id="2603010">:=</span>&nbsp;<span class="num" id="2603013">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603016">if</span>&nbsp;<span class="ident" id="2603019">off</span>&nbsp;<span class="op" id="2603023">&lt;</span>&nbsp;<span class="num" id="2603025">0</span>&nbsp;<span class="op" id="2603027">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603031">whence</span>&nbsp;<span class="op" id="2603038">=</span>&nbsp;<span class="num" id="2603040">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2603043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603046">if</span>&nbsp;<span class="ident" id="2603049">_</span><span class="op" id="2603050">,</span>&nbsp;<span class="ident" id="2603052">err</span>&nbsp;<span class="op" id="2603056">:=</span>&nbsp;<span class="ident" id="2603059">syscall</span><span class="op" id="2603066">.</span><span class="ident" id="2603067">Seek</span><span class="op" id="2603071">(</span><span class="builtintype" id="2603072">int</span><span class="op" id="2603075">(</span><span class="ident" id="2603076">fd</span><span class="op" id="2603078">)</span><span class="op" id="2603079">,</span>&nbsp;<span class="ident" id="2603081">int64</span><span class="op" id="2603086">(</span><span class="ident" id="2603087">off</span><span class="op" id="2603090">)</span><span class="op" id="2603091">,</span>&nbsp;<span class="ident" id="2603093">whence</span><span class="op" id="2603099">)</span><span class="op" id="2603100">;</span>&nbsp;<span class="ident" id="2603102">err</span>&nbsp;<span class="op" id="2603106">!=</span>&nbsp;<span class="ident" id="2603109">nil</span>&nbsp;<span class="op" id="2603113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603117">return</span>&nbsp;<span class="ident" id="2603124">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2603129">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603132">for</span>&nbsp;<span class="builtinfunc" id="2603136">len</span><span class="op" id="2603139">(</span><span class="ident" id="2603140">buf</span><span class="op" id="2603143">)</span>&nbsp;<span class="op" id="2603145">&gt;</span>&nbsp;<span class="num" id="2603147">0</span>&nbsp;<span class="op" id="2603149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603153">m</span><span class="op" id="2603154">,</span>&nbsp;<span class="ident" id="2603156">err</span>&nbsp;<span class="op" id="2603160">:=</span>&nbsp;<span class="ident" id="2603163">syscall</span><span class="op" id="2603170">.</span><span class="ident" id="2603171">Read</span><span class="op" id="2603175">(</span><span class="builtintype" id="2603176">int</span><span class="op" id="2603179">(</span><span class="ident" id="2603180">fd</span><span class="op" id="2603182">)</span><span class="op" id="2603183">,</span>&nbsp;<span class="ident" id="2603185">buf</span><span class="op" id="2603188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603192">if</span>&nbsp;<span class="ident" id="2603195">m</span>&nbsp;<span class="op" id="2603197">&lt;=</span>&nbsp;<span class="num" id="2603200">0</span>&nbsp;<span class="op" id="2603202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603207">if</span>&nbsp;<span class="ident" id="2603210">err</span>&nbsp;<span class="op" id="2603214">==</span>&nbsp;<span class="ident" id="2603217">nil</span>&nbsp;<span class="op" id="2603221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603227">return</span>&nbsp;<span class="ident" id="2603234">errors</span><span class="op" id="2603240">.</span><span class="ident" id="2603241">New</span><span class="op" id="2603244">(</span><span class="string" id="2603245">&#34;short&nbsp;read&#34;</span><span class="op" id="2603257">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2603262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603267">return</span>&nbsp;<span class="ident" id="2603274">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2603280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2603284">buf</span>&nbsp;<span class="op" id="2603288">=</span>&nbsp;<span class="ident" id="2603290">buf</span><span class="op" id="2603293">[</span><span class="ident" id="2603294">m</span><span class="op" id="2603295">:</span><span class="op" id="2603296">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2603299">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2603302">return</span>&nbsp;<span class="ident" id="2603309">nil</span><br>
<span class="lineno"></span><span class="op" id="2603313">}</span>
</div>
</body>
</html>
