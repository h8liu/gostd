<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html" class="current">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="974662">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="974717">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="974771">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="974822">package</span>&nbsp;<span class="ident" id="974830">runtime_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="974844">import</span>&nbsp;<span class="op" id="974851">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="974854">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="974865">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="974876">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="974886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="974889">func</span>&nbsp;<span class="ident" id="974894">BenchmarkCompareStringEqual</span><span class="op" id="974921">(</span><span class="ident" id="974922">b</span>&nbsp;<span class="op" id="974924">*</span><span class="ident" id="974925">testing</span><span class="op" id="974932">.</span><span class="ident" id="974933">B</span><span class="op" id="974934">)</span>&nbsp;<span class="op" id="974936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="974939">bytes</span>&nbsp;<span class="op" id="974945">:=</span>&nbsp;<span class="op" id="974948">[</span><span class="op" id="974949">]</span><span class="builtintype" id="974950">byte</span><span class="op" id="974954">(</span><span class="string" id="974955">&#34;Hello&nbsp;Gophers!&#34;</span><span class="op" id="974971">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="974974">s1</span><span class="op" id="974976">,</span>&nbsp;<span class="ident" id="974978">s2</span>&nbsp;<span class="op" id="974981">:=</span>&nbsp;<span class="builtintype" id="974984">string</span><span class="op" id="974990">(</span><span class="ident" id="974991">bytes</span><span class="op" id="974996">)</span><span class="op" id="974997">,</span>&nbsp;<span class="builtintype" id="974999">string</span><span class="op" id="975005">(</span><span class="ident" id="975006">bytes</span><span class="op" id="975011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975014">for</span>&nbsp;<span class="ident" id="975018">i</span>&nbsp;<span class="op" id="975020">:=</span>&nbsp;<span class="num" id="975023">0</span><span class="op" id="975024">;</span>&nbsp;<span class="ident" id="975026">i</span>&nbsp;<span class="op" id="975028">&lt;</span>&nbsp;<span class="ident" id="975030">b</span><span class="op" id="975031">.</span><span class="ident" id="975032">N</span><span class="op" id="975033">;</span>&nbsp;<span class="ident" id="975035">i</span><span class="op" id="975036">++</span>&nbsp;<span class="op" id="975039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975043">if</span>&nbsp;<span class="ident" id="975046">s1</span>&nbsp;<span class="op" id="975049">!=</span>&nbsp;<span class="ident" id="975052">s2</span>&nbsp;<span class="op" id="975055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975060">b</span><span class="op" id="975061">.</span><span class="ident" id="975062">Fatal</span><span class="op" id="975067">(</span><span class="string" id="975068">&#34;s1&nbsp;!=&nbsp;s2&#34;</span><span class="op" id="975078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975082">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975085">}</span><br>
<span class="lineno"></span><span class="op" id="975087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="975090">func</span>&nbsp;<span class="ident" id="975095">BenchmarkCompareStringIdentical</span><span class="op" id="975126">(</span><span class="ident" id="975127">b</span>&nbsp;<span class="op" id="975129">*</span><span class="ident" id="975130">testing</span><span class="op" id="975137">.</span><span class="ident" id="975138">B</span><span class="op" id="975139">)</span>&nbsp;<span class="op" id="975141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975144">s1</span>&nbsp;<span class="op" id="975147">:=</span>&nbsp;<span class="string" id="975150">&#34;Hello&nbsp;Gophers!&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975168">s2</span>&nbsp;<span class="op" id="975171">:=</span>&nbsp;<span class="ident" id="975174">s1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975178">for</span>&nbsp;<span class="ident" id="975182">i</span>&nbsp;<span class="op" id="975184">:=</span>&nbsp;<span class="num" id="975187">0</span><span class="op" id="975188">;</span>&nbsp;<span class="ident" id="975190">i</span>&nbsp;<span class="op" id="975192">&lt;</span>&nbsp;<span class="ident" id="975194">b</span><span class="op" id="975195">.</span><span class="ident" id="975196">N</span><span class="op" id="975197">;</span>&nbsp;<span class="ident" id="975199">i</span><span class="op" id="975200">++</span>&nbsp;<span class="op" id="975203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975207">if</span>&nbsp;<span class="ident" id="975210">s1</span>&nbsp;<span class="op" id="975213">!=</span>&nbsp;<span class="ident" id="975216">s2</span>&nbsp;<span class="op" id="975219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975224">b</span><span class="op" id="975225">.</span><span class="ident" id="975226">Fatal</span><span class="op" id="975231">(</span><span class="string" id="975232">&#34;s1&nbsp;!=&nbsp;s2&#34;</span><span class="op" id="975242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975246">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975249">}</span><br>
<span class="lineno"></span><span class="op" id="975251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="975254">func</span>&nbsp;<span class="ident" id="975259">BenchmarkCompareStringSameLength</span><span class="op" id="975291">(</span><span class="ident" id="975292">b</span>&nbsp;<span class="op" id="975294">*</span><span class="ident" id="975295">testing</span><span class="op" id="975302">.</span><span class="ident" id="975303">B</span><span class="op" id="975304">)</span>&nbsp;<span class="op" id="975306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975309">s1</span>&nbsp;<span class="op" id="975312">:=</span>&nbsp;<span class="string" id="975315">&#34;Hello&nbsp;Gophers!&#34;</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975333">s2</span>&nbsp;<span class="op" id="975336">:=</span>&nbsp;<span class="string" id="975339">&#34;Hello,&nbsp;Gophers&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975357">for</span>&nbsp;<span class="ident" id="975361">i</span>&nbsp;<span class="op" id="975363">:=</span>&nbsp;<span class="num" id="975366">0</span><span class="op" id="975367">;</span>&nbsp;<span class="ident" id="975369">i</span>&nbsp;<span class="op" id="975371">&lt;</span>&nbsp;<span class="ident" id="975373">b</span><span class="op" id="975374">.</span><span class="ident" id="975375">N</span><span class="op" id="975376">;</span>&nbsp;<span class="ident" id="975378">i</span><span class="op" id="975379">++</span>&nbsp;<span class="op" id="975382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975386">if</span>&nbsp;<span class="ident" id="975389">s1</span>&nbsp;<span class="op" id="975392">==</span>&nbsp;<span class="ident" id="975395">s2</span>&nbsp;<span class="op" id="975398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975403">b</span><span class="op" id="975404">.</span><span class="ident" id="975405">Fatal</span><span class="op" id="975410">(</span><span class="string" id="975411">&#34;s1&nbsp;==&nbsp;s2&#34;</span><span class="op" id="975421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975425">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975428">}</span><br>
<span class="lineno"></span><span class="op" id="975430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="975433">func</span>&nbsp;<span class="ident" id="975438">BenchmarkCompareStringDifferentLength</span><span class="op" id="975475">(</span><span class="ident" id="975476">b</span>&nbsp;<span class="op" id="975478">*</span><span class="ident" id="975479">testing</span><span class="op" id="975486">.</span><span class="ident" id="975487">B</span><span class="op" id="975488">)</span>&nbsp;<span class="op" id="975490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975493">s1</span>&nbsp;<span class="op" id="975496">:=</span>&nbsp;<span class="string" id="975499">&#34;Hello&nbsp;Gophers!&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975517">s2</span>&nbsp;<span class="op" id="975520">:=</span>&nbsp;<span class="string" id="975523">&#34;Hello,&nbsp;Gophers!&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975542">for</span>&nbsp;<span class="ident" id="975546">i</span>&nbsp;<span class="op" id="975548">:=</span>&nbsp;<span class="num" id="975551">0</span><span class="op" id="975552">;</span>&nbsp;<span class="ident" id="975554">i</span>&nbsp;<span class="op" id="975556">&lt;</span>&nbsp;<span class="ident" id="975558">b</span><span class="op" id="975559">.</span><span class="ident" id="975560">N</span><span class="op" id="975561">;</span>&nbsp;<span class="ident" id="975563">i</span><span class="op" id="975564">++</span>&nbsp;<span class="op" id="975567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975571">if</span>&nbsp;<span class="ident" id="975574">s1</span>&nbsp;<span class="op" id="975577">==</span>&nbsp;<span class="ident" id="975580">s2</span>&nbsp;<span class="op" id="975583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975588">b</span><span class="op" id="975589">.</span><span class="ident" id="975590">Fatal</span><span class="op" id="975595">(</span><span class="string" id="975596">&#34;s1&nbsp;==&nbsp;s2&#34;</span><span class="op" id="975606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975610">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975613">}</span><br>
<span class="lineno"></span><span class="op" id="975615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="975618">func</span>&nbsp;<span class="ident" id="975623">BenchmarkCompareStringBigUnaligned</span><span class="op" id="975657">(</span><span class="ident" id="975658">b</span>&nbsp;<span class="op" id="975660">*</span><span class="ident" id="975661">testing</span><span class="op" id="975668">.</span><span class="ident" id="975669">B</span><span class="op" id="975670">)</span>&nbsp;<span class="op" id="975672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975675">bytes</span>&nbsp;<span class="op" id="975681">:=</span>&nbsp;<span class="builtinfunc" id="975684">make</span><span class="op" id="975688">(</span><span class="op" id="975689">[</span><span class="op" id="975690">]</span><span class="builtintype" id="975691">byte</span><span class="op" id="975695">,</span>&nbsp;<span class="num" id="975697">0</span><span class="op" id="975698">,</span>&nbsp;<span class="num" id="975700">1</span><span class="op" id="975701">&lt;&lt;</span><span class="num" id="975703">20</span><span class="op" id="975705">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975708">for</span>&nbsp;<span class="builtinfunc" id="975712">len</span><span class="op" id="975715">(</span><span class="ident" id="975716">bytes</span><span class="op" id="975721">)</span>&nbsp;<span class="op" id="975723">&lt;</span>&nbsp;<span class="num" id="975725">1</span><span class="op" id="975726">&lt;&lt;</span><span class="num" id="975728">20</span>&nbsp;<span class="op" id="975731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975735">bytes</span>&nbsp;<span class="op" id="975741">=</span>&nbsp;<span class="builtinfunc" id="975743">append</span><span class="op" id="975749">(</span><span class="ident" id="975750">bytes</span><span class="op" id="975755">,</span>&nbsp;<span class="string" id="975757">&#34;Hello&nbsp;Gophers!&#34;</span><span class="op" id="975773">...</span><span class="op" id="975776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975779">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975782">s1</span><span class="op" id="975784">,</span>&nbsp;<span class="ident" id="975786">s2</span>&nbsp;<span class="op" id="975789">:=</span>&nbsp;<span class="builtintype" id="975792">string</span><span class="op" id="975798">(</span><span class="ident" id="975799">bytes</span><span class="op" id="975804">)</span><span class="op" id="975805">,</span>&nbsp;<span class="string" id="975807">&#34;hello&#34;</span><span class="op" id="975814">+</span><span class="builtintype" id="975815">string</span><span class="op" id="975821">(</span><span class="ident" id="975822">bytes</span><span class="op" id="975827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975830">for</span>&nbsp;<span class="ident" id="975834">i</span>&nbsp;<span class="op" id="975836">:=</span>&nbsp;<span class="num" id="975839">0</span><span class="op" id="975840">;</span>&nbsp;<span class="ident" id="975842">i</span>&nbsp;<span class="op" id="975844">&lt;</span>&nbsp;<span class="ident" id="975846">b</span><span class="op" id="975847">.</span><span class="ident" id="975848">N</span><span class="op" id="975849">;</span>&nbsp;<span class="ident" id="975851">i</span><span class="op" id="975852">++</span>&nbsp;<span class="op" id="975855">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="975859">if</span>&nbsp;<span class="ident" id="975862">s1</span>&nbsp;<span class="op" id="975865">!=</span>&nbsp;<span class="ident" id="975868">s2</span><span class="op" id="975870">[</span><span class="builtinfunc" id="975871">len</span><span class="op" id="975874">(</span><span class="string" id="975875">&#34;hello&#34;</span><span class="op" id="975882">)</span><span class="op" id="975883">:</span><span class="op" id="975884">]</span>&nbsp;<span class="op" id="975886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975891">b</span><span class="op" id="975892">.</span><span class="ident" id="975893">Fatal</span><span class="op" id="975898">(</span><span class="string" id="975899">&#34;s1&nbsp;!=&nbsp;s2&#34;</span><span class="op" id="975909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="975916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975919">b</span><span class="op" id="975920">.</span><span class="ident" id="975921">SetBytes</span><span class="op" id="975929">(</span><span class="ident" id="975930">int64</span><span class="op" id="975935">(</span><span class="builtinfunc" id="975936">len</span><span class="op" id="975939">(</span><span class="ident" id="975940">s1</span><span class="op" id="975942">)</span><span class="op" id="975943">)</span><span class="op" id="975944">)</span><br>
<span class="lineno">65</span><span class="op" id="975946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="975949">func</span>&nbsp;<span class="ident" id="975954">BenchmarkCompareStringBig</span><span class="op" id="975979">(</span><span class="ident" id="975980">b</span>&nbsp;<span class="op" id="975982">*</span><span class="ident" id="975983">testing</span><span class="op" id="975990">.</span><span class="ident" id="975991">B</span><span class="op" id="975992">)</span>&nbsp;<span class="op" id="975994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="975997">bytes</span>&nbsp;<span class="op" id="976003">:=</span>&nbsp;<span class="builtinfunc" id="976006">make</span><span class="op" id="976010">(</span><span class="op" id="976011">[</span><span class="op" id="976012">]</span><span class="builtintype" id="976013">byte</span><span class="op" id="976017">,</span>&nbsp;<span class="num" id="976019">0</span><span class="op" id="976020">,</span>&nbsp;<span class="num" id="976022">1</span><span class="op" id="976023">&lt;&lt;</span><span class="num" id="976025">20</span><span class="op" id="976027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976030">for</span>&nbsp;<span class="builtinfunc" id="976034">len</span><span class="op" id="976037">(</span><span class="ident" id="976038">bytes</span><span class="op" id="976043">)</span>&nbsp;<span class="op" id="976045">&lt;</span>&nbsp;<span class="num" id="976047">1</span><span class="op" id="976048">&lt;&lt;</span><span class="num" id="976050">20</span>&nbsp;<span class="op" id="976053">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976057">bytes</span>&nbsp;<span class="op" id="976063">=</span>&nbsp;<span class="builtinfunc" id="976065">append</span><span class="op" id="976071">(</span><span class="ident" id="976072">bytes</span><span class="op" id="976077">,</span>&nbsp;<span class="string" id="976079">&#34;Hello&nbsp;Gophers!&#34;</span><span class="op" id="976095">...</span><span class="op" id="976098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976104">s1</span><span class="op" id="976106">,</span>&nbsp;<span class="ident" id="976108">s2</span>&nbsp;<span class="op" id="976111">:=</span>&nbsp;<span class="builtintype" id="976114">string</span><span class="op" id="976120">(</span><span class="ident" id="976121">bytes</span><span class="op" id="976126">)</span><span class="op" id="976127">,</span>&nbsp;<span class="builtintype" id="976129">string</span><span class="op" id="976135">(</span><span class="ident" id="976136">bytes</span><span class="op" id="976141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976144">for</span>&nbsp;<span class="ident" id="976148">i</span>&nbsp;<span class="op" id="976150">:=</span>&nbsp;<span class="num" id="976153">0</span><span class="op" id="976154">;</span>&nbsp;<span class="ident" id="976156">i</span>&nbsp;<span class="op" id="976158">&lt;</span>&nbsp;<span class="ident" id="976160">b</span><span class="op" id="976161">.</span><span class="ident" id="976162">N</span><span class="op" id="976163">;</span>&nbsp;<span class="ident" id="976165">i</span><span class="op" id="976166">++</span>&nbsp;<span class="op" id="976169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976173">if</span>&nbsp;<span class="ident" id="976176">s1</span>&nbsp;<span class="op" id="976179">!=</span>&nbsp;<span class="ident" id="976182">s2</span>&nbsp;<span class="op" id="976185">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976190">b</span><span class="op" id="976191">.</span><span class="ident" id="976192">Fatal</span><span class="op" id="976197">(</span><span class="string" id="976198">&#34;s1&nbsp;!=&nbsp;s2&#34;</span><span class="op" id="976208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976218">b</span><span class="op" id="976219">.</span><span class="ident" id="976220">SetBytes</span><span class="op" id="976228">(</span><span class="ident" id="976229">int64</span><span class="op" id="976234">(</span><span class="builtinfunc" id="976235">len</span><span class="op" id="976238">(</span><span class="ident" id="976239">s1</span><span class="op" id="976241">)</span><span class="op" id="976242">)</span><span class="op" id="976243">)</span><br>
<span class="lineno"></span><span class="op" id="976245">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="976248">func</span>&nbsp;<span class="ident" id="976253">BenchmarkRuneIterate</span><span class="op" id="976273">(</span><span class="ident" id="976274">b</span>&nbsp;<span class="op" id="976276">*</span><span class="ident" id="976277">testing</span><span class="op" id="976284">.</span><span class="ident" id="976285">B</span><span class="op" id="976286">)</span>&nbsp;<span class="op" id="976288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976291">bytes</span>&nbsp;<span class="op" id="976297">:=</span>&nbsp;<span class="builtinfunc" id="976300">make</span><span class="op" id="976304">(</span><span class="op" id="976305">[</span><span class="op" id="976306">]</span><span class="builtintype" id="976307">byte</span><span class="op" id="976311">,</span>&nbsp;<span class="num" id="976313">100</span><span class="op" id="976316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976319">for</span>&nbsp;<span class="ident" id="976323">i</span>&nbsp;<span class="op" id="976325">:=</span>&nbsp;<span class="keyword" id="976328">range</span>&nbsp;<span class="ident" id="976334">bytes</span>&nbsp;<span class="op" id="976340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976344">bytes</span><span class="op" id="976349">[</span><span class="ident" id="976350">i</span><span class="op" id="976351">]</span>&nbsp;<span class="op" id="976353">=</span>&nbsp;<span class="builtintype" id="976355">byte</span><span class="op" id="976359">(</span><span class="string" id="976360">&#39;A&#39;</span><span class="op" id="976363">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976369">s</span>&nbsp;<span class="op" id="976371">:=</span>&nbsp;<span class="builtintype" id="976374">string</span><span class="op" id="976380">(</span><span class="ident" id="976381">bytes</span><span class="op" id="976386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976389">for</span>&nbsp;<span class="ident" id="976393">i</span>&nbsp;<span class="op" id="976395">:=</span>&nbsp;<span class="num" id="976398">0</span><span class="op" id="976399">;</span>&nbsp;<span class="ident" id="976401">i</span>&nbsp;<span class="op" id="976403">&lt;</span>&nbsp;<span class="ident" id="976405">b</span><span class="op" id="976406">.</span><span class="ident" id="976407">N</span><span class="op" id="976408">;</span>&nbsp;<span class="ident" id="976410">i</span><span class="op" id="976411">++</span>&nbsp;<span class="op" id="976414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976418">for</span>&nbsp;<span class="keyword" id="976422">range</span>&nbsp;<span class="ident" id="976428">s</span>&nbsp;<span class="op" id="976430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976434">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976437">}</span><br>
<span class="lineno"></span><span class="op" id="976439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="976442">func</span>&nbsp;<span class="ident" id="976447">BenchmarkRuneIterate2</span><span class="op" id="976468">(</span><span class="ident" id="976469">b</span>&nbsp;<span class="op" id="976471">*</span><span class="ident" id="976472">testing</span><span class="op" id="976479">.</span><span class="ident" id="976480">B</span><span class="op" id="976481">)</span>&nbsp;<span class="op" id="976483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976486">bytes</span>&nbsp;<span class="op" id="976492">:=</span>&nbsp;<span class="builtinfunc" id="976495">make</span><span class="op" id="976499">(</span><span class="op" id="976500">[</span><span class="op" id="976501">]</span><span class="builtintype" id="976502">byte</span><span class="op" id="976506">,</span>&nbsp;<span class="num" id="976508">100</span><span class="op" id="976511">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976514">for</span>&nbsp;<span class="ident" id="976518">i</span>&nbsp;<span class="op" id="976520">:=</span>&nbsp;<span class="keyword" id="976523">range</span>&nbsp;<span class="ident" id="976529">bytes</span>&nbsp;<span class="op" id="976535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976539">bytes</span><span class="op" id="976544">[</span><span class="ident" id="976545">i</span><span class="op" id="976546">]</span>&nbsp;<span class="op" id="976548">=</span>&nbsp;<span class="builtintype" id="976550">byte</span><span class="op" id="976554">(</span><span class="string" id="976555">&#39;A&#39;</span><span class="op" id="976558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976564">s</span>&nbsp;<span class="op" id="976566">:=</span>&nbsp;<span class="builtintype" id="976569">string</span><span class="op" id="976575">(</span><span class="ident" id="976576">bytes</span><span class="op" id="976581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976584">for</span>&nbsp;<span class="ident" id="976588">i</span>&nbsp;<span class="op" id="976590">:=</span>&nbsp;<span class="num" id="976593">0</span><span class="op" id="976594">;</span>&nbsp;<span class="ident" id="976596">i</span>&nbsp;<span class="op" id="976598">&lt;</span>&nbsp;<span class="ident" id="976600">b</span><span class="op" id="976601">.</span><span class="ident" id="976602">N</span><span class="op" id="976603">;</span>&nbsp;<span class="ident" id="976605">i</span><span class="op" id="976606">++</span>&nbsp;<span class="op" id="976609">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976613">for</span>&nbsp;<span class="keyword" id="976617">range</span>&nbsp;<span class="ident" id="976623">s</span>&nbsp;<span class="op" id="976625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976632">}</span><br>
<span class="lineno"></span><span class="op" id="976634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="976637">func</span>&nbsp;<span class="ident" id="976642">TestStringW</span><span class="op" id="976653">(</span><span class="ident" id="976654">t</span>&nbsp;<span class="op" id="976656">*</span><span class="ident" id="976657">testing</span><span class="op" id="976664">.</span><span class="ident" id="976665">T</span><span class="op" id="976666">)</span>&nbsp;<span class="op" id="976668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976671">strings</span>&nbsp;<span class="op" id="976679">:=</span>&nbsp;<span class="op" id="976682">[</span><span class="op" id="976683">]</span><span class="builtintype" id="976684">string</span><span class="op" id="976690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="976694">&#34;hello&#34;</span><span class="op" id="976701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="976705">&#34;a\u5566\u7788b&#34;</span><span class="op" id="976721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976724">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976728">for</span>&nbsp;<span class="ident" id="976732">_</span><span class="op" id="976733">,</span>&nbsp;<span class="ident" id="976735">s</span>&nbsp;<span class="op" id="976737">:=</span>&nbsp;<span class="keyword" id="976740">range</span>&nbsp;<span class="ident" id="976746">strings</span>&nbsp;<span class="op" id="976754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976758">var</span>&nbsp;<span class="ident" id="976762">b</span>&nbsp;<span class="op" id="976764">[</span><span class="op" id="976765">]</span><span class="builtintype" id="976766">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976775">for</span>&nbsp;<span class="ident" id="976779">_</span><span class="op" id="976780">,</span>&nbsp;<span class="ident" id="976782">c</span>&nbsp;<span class="op" id="976784">:=</span>&nbsp;<span class="keyword" id="976787">range</span>&nbsp;<span class="ident" id="976793">s</span>&nbsp;<span class="op" id="976795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976800">b</span>&nbsp;<span class="op" id="976802">=</span>&nbsp;<span class="builtinfunc" id="976804">append</span><span class="op" id="976810">(</span><span class="ident" id="976811">b</span><span class="op" id="976812">,</span>&nbsp;<span class="builtintype" id="976814">uint16</span><span class="op" id="976820">(</span><span class="ident" id="976821">c</span><span class="op" id="976822">)</span><span class="op" id="976823">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976828">if</span>&nbsp;<span class="ident" id="976831">c</span>&nbsp;<span class="op" id="976833">!=</span>&nbsp;<span class="builtintype" id="976836">rune</span><span class="op" id="976840">(</span><span class="builtintype" id="976841">uint16</span><span class="op" id="976847">(</span><span class="ident" id="976848">c</span><span class="op" id="976849">)</span><span class="op" id="976850">)</span>&nbsp;<span class="op" id="976852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976858">t</span><span class="op" id="976859">.</span><span class="ident" id="976860">Errorf</span><span class="op" id="976866">(</span><span class="string" id="976867">&#34;bad&nbsp;test:&nbsp;stringW&nbsp;can&#39;t&nbsp;handle&nbsp;&gt;16&nbsp;bit&nbsp;runes&#34;</span><span class="op" id="976913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="976922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976926">b</span>&nbsp;<span class="op" id="976928">=</span>&nbsp;<span class="builtinfunc" id="976930">append</span><span class="op" id="976936">(</span><span class="ident" id="976937">b</span><span class="op" id="976938">,</span>&nbsp;<span class="num" id="976940">0</span><span class="op" id="976941">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976945">r</span>&nbsp;<span class="op" id="976947">:=</span>&nbsp;<span class="ident" id="976950">runtime</span><span class="op" id="976957">.</span><span class="ident" id="976958">GostringW</span><span class="op" id="976967">(</span><span class="ident" id="976968">b</span><span class="op" id="976969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="976973">if</span>&nbsp;<span class="ident" id="976976">r</span>&nbsp;<span class="op" id="976978">!=</span>&nbsp;<span class="ident" id="976981">s</span>&nbsp;<span class="op" id="976983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="976988">t</span><span class="op" id="976989">.</span><span class="ident" id="976990">Errorf</span><span class="op" id="976996">(</span><span class="string" id="976997">&#34;gostringW(%v)&nbsp;=&nbsp;%s,&nbsp;want&nbsp;%s&#34;</span><span class="op" id="977026">,</span>&nbsp;<span class="ident" id="977028">b</span><span class="op" id="977029">,</span>&nbsp;<span class="ident" id="977031">r</span><span class="op" id="977032">,</span>&nbsp;<span class="ident" id="977034">s</span><span class="op" id="977035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="977039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="977042">}</span><br>
<span class="lineno">125</span><span class="op" id="977044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="977047">func</span>&nbsp;<span class="ident" id="977052">TestLargeStringConcat</span><span class="op" id="977073">(</span><span class="ident" id="977074">t</span>&nbsp;<span class="op" id="977076">*</span><span class="ident" id="977077">testing</span><span class="op" id="977084">.</span><span class="ident" id="977085">T</span><span class="op" id="977086">)</span>&nbsp;<span class="op" id="977088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977091">output</span>&nbsp;<span class="op" id="977098">:=</span>&nbsp;<span class="ident" id="977101">executeTest</span><span class="op" id="977112">(</span><span class="ident" id="977113">t</span><span class="op" id="977114">,</span>&nbsp;<span class="ident" id="977116">largeStringConcatSource</span><span class="op" id="977139">,</span>&nbsp;<span class="ident" id="977141">nil</span><span class="op" id="977144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977147">want</span>&nbsp;<span class="op" id="977152">:=</span>&nbsp;<span class="string" id="977155">&#34;panic:&nbsp;&#34;</span>&nbsp;<span class="op" id="977165">+</span>&nbsp;<span class="ident" id="977167">strings</span><span class="op" id="977174">.</span><span class="ident" id="977175">Repeat</span><span class="op" id="977181">(</span><span class="string" id="977182">&#34;0&#34;</span><span class="op" id="977185">,</span>&nbsp;<span class="num" id="977187">1</span><span class="op" id="977188">&lt;&lt;</span><span class="num" id="977190">10</span><span class="op" id="977192">)</span>&nbsp;<span class="op" id="977194">+</span>&nbsp;<span class="ident" id="977196">strings</span><span class="op" id="977203">.</span><span class="ident" id="977204">Repeat</span><span class="op" id="977210">(</span><span class="string" id="977211">&#34;1&#34;</span><span class="op" id="977214">,</span>&nbsp;<span class="num" id="977216">1</span><span class="op" id="977217">&lt;&lt;</span><span class="num" id="977219">10</span><span class="op" id="977221">)</span>&nbsp;<span class="op" id="977223">+</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977227">strings</span><span class="op" id="977234">.</span><span class="ident" id="977235">Repeat</span><span class="op" id="977241">(</span><span class="string" id="977242">&#34;2&#34;</span><span class="op" id="977245">,</span>&nbsp;<span class="num" id="977247">1</span><span class="op" id="977248">&lt;&lt;</span><span class="num" id="977250">10</span><span class="op" id="977252">)</span>&nbsp;<span class="op" id="977254">+</span>&nbsp;<span class="ident" id="977256">strings</span><span class="op" id="977263">.</span><span class="ident" id="977264">Repeat</span><span class="op" id="977270">(</span><span class="string" id="977271">&#34;3&#34;</span><span class="op" id="977274">,</span>&nbsp;<span class="num" id="977276">1</span><span class="op" id="977277">&lt;&lt;</span><span class="num" id="977279">10</span><span class="op" id="977281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="977284">if</span>&nbsp;<span class="op" id="977287">!</span><span class="ident" id="977288">strings</span><span class="op" id="977295">.</span><span class="ident" id="977296">HasPrefix</span><span class="op" id="977305">(</span><span class="ident" id="977306">output</span><span class="op" id="977312">,</span>&nbsp;<span class="ident" id="977314">want</span><span class="op" id="977318">)</span>&nbsp;<span class="op" id="977320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977324">t</span><span class="op" id="977325">.</span><span class="ident" id="977326">Fatalf</span><span class="op" id="977332">(</span><span class="string" id="977333">&#34;output&nbsp;does&nbsp;not&nbsp;start&nbsp;with&nbsp;%q:\n%s&#34;</span><span class="op" id="977369">,</span>&nbsp;<span class="ident" id="977371">want</span><span class="op" id="977375">,</span>&nbsp;<span class="ident" id="977377">output</span><span class="op" id="977383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="977386">}</span><br>
<span class="lineno"></span><span class="op" id="977388">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="977391">var</span>&nbsp;<span class="ident" id="977395">largeStringConcatSource</span>&nbsp;<span class="op" id="977419">=</span>&nbsp;<span class="string" id="977421">`<br>
<span class="lineno"></span>package&nbsp;main<br>
<span class="lineno"></span>import&nbsp;&#34;strings&#34;<br>
<span class="lineno"></span>func&nbsp;main()&nbsp;{<br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;s0&nbsp;:=&nbsp;strings.Repeat(&#34;0&#34;,&nbsp;1&lt;&lt;10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;s1&nbsp;:=&nbsp;strings.Repeat(&#34;1&#34;,&nbsp;1&lt;&lt;10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;s2&nbsp;:=&nbsp;strings.Repeat(&#34;2&#34;,&nbsp;1&lt;&lt;10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;s3&nbsp;:=&nbsp;strings.Repeat(&#34;3&#34;,&nbsp;1&lt;&lt;10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;s0&nbsp;+&nbsp;s1&nbsp;+&nbsp;s2&nbsp;+&nbsp;s3<br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;panic(s)<br>
<span class="lineno"></span>}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="977642">func</span>&nbsp;<span class="ident" id="977647">TestGostringnocopy</span><span class="op" id="977665">(</span><span class="ident" id="977666">t</span>&nbsp;<span class="op" id="977668">*</span><span class="ident" id="977669">testing</span><span class="op" id="977676">.</span><span class="ident" id="977677">T</span><span class="op" id="977678">)</span>&nbsp;<span class="op" id="977680">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977683">max</span>&nbsp;<span class="op" id="977687">:=</span>&nbsp;<span class="op" id="977690">*</span><span class="ident" id="977691">runtime</span><span class="op" id="977698">.</span><span class="ident" id="977699">Maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977710">b</span>&nbsp;<span class="op" id="977712">:=</span>&nbsp;<span class="builtinfunc" id="977715">make</span><span class="op" id="977719">(</span><span class="op" id="977720">[</span><span class="op" id="977721">]</span><span class="builtintype" id="977722">byte</span><span class="op" id="977726">,</span>&nbsp;<span class="ident" id="977728">max</span><span class="op" id="977731">+</span><span class="num" id="977732">10</span><span class="op" id="977734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="977737">for</span>&nbsp;<span class="ident" id="977741">i</span>&nbsp;<span class="op" id="977743">:=</span>&nbsp;<span class="builtintype" id="977746">uintptr</span><span class="op" id="977753">(</span><span class="num" id="977754">0</span><span class="op" id="977755">)</span><span class="op" id="977756">;</span>&nbsp;<span class="ident" id="977758">i</span>&nbsp;<span class="op" id="977760">&lt;</span>&nbsp;<span class="ident" id="977762">max</span><span class="op" id="977765">+</span><span class="num" id="977766">9</span><span class="op" id="977767">;</span>&nbsp;<span class="ident" id="977769">i</span><span class="op" id="977770">++</span>&nbsp;<span class="op" id="977773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977777">b</span><span class="op" id="977778">[</span><span class="ident" id="977779">i</span><span class="op" id="977780">]</span>&nbsp;<span class="op" id="977782">=</span>&nbsp;<span class="string" id="977784">&#39;a&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="977789">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977792">_</span>&nbsp;<span class="op" id="977794">=</span>&nbsp;<span class="ident" id="977796">runtime</span><span class="op" id="977803">.</span><span class="ident" id="977804">Gostringnocopy</span><span class="op" id="977818">(</span><span class="op" id="977819">&amp;</span><span class="ident" id="977820">b</span><span class="op" id="977821">[</span><span class="num" id="977822">0</span><span class="op" id="977823">]</span><span class="op" id="977824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977827">newmax</span>&nbsp;<span class="op" id="977834">:=</span>&nbsp;<span class="op" id="977837">*</span><span class="ident" id="977838">runtime</span><span class="op" id="977845">.</span><span class="ident" id="977846">Maxstring</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="977857">if</span>&nbsp;<span class="ident" id="977860">newmax</span>&nbsp;<span class="op" id="977867">!=</span>&nbsp;<span class="ident" id="977870">max</span><span class="op" id="977873">+</span><span class="num" id="977874">9</span>&nbsp;<span class="op" id="977876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="977880">t</span><span class="op" id="977881">.</span><span class="ident" id="977882">Errorf</span><span class="op" id="977888">(</span><span class="string" id="977889">&#34;want&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="977906">,</span>&nbsp;<span class="ident" id="977908">max</span><span class="op" id="977911">+</span><span class="num" id="977912">9</span><span class="op" id="977913">,</span>&nbsp;<span class="ident" id="977915">newmax</span><span class="op" id="977921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="977924">}</span><br>
<span class="lineno">160</span><span class="op" id="977926">}</span>
</div>
</body>
</html>
