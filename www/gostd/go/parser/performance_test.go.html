<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html" class="current">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7132949">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7133004">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7133058">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7133109">package</span>&nbsp;<span class="ident" id="7133117">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7133125">import</span>&nbsp;<span class="op" id="7133132">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7133135">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7133147">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7133160">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7133170">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7133173">var</span>&nbsp;<span class="ident" id="7133177">src</span>&nbsp;<span class="op" id="7133181">=</span>&nbsp;<span class="ident" id="7133183">readFile</span><span class="op" id="7133191">(</span><span class="string" id="7133192">&#34;parser.go&#34;</span><span class="op" id="7133203">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7133206">func</span>&nbsp;<span class="ident" id="7133211">readFile</span><span class="op" id="7133219">(</span><span class="ident" id="7133220">filename</span>&nbsp;<span class="builtintype" id="7133229">string</span><span class="op" id="7133235">)</span>&nbsp;<span class="op" id="7133237">[</span><span class="op" id="7133238">]</span><span class="builtintype" id="7133239">byte</span>&nbsp;<span class="op" id="7133244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7133247">data</span><span class="op" id="7133251">,</span>&nbsp;<span class="ident" id="7133253">err</span>&nbsp;<span class="op" id="7133257">:=</span>&nbsp;<span class="ident" id="7133260">ioutil</span><span class="op" id="7133266">.</span><span class="ident" id="7133267">ReadFile</span><span class="op" id="7133275">(</span><span class="ident" id="7133276">filename</span><span class="op" id="7133284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7133287">if</span>&nbsp;<span class="ident" id="7133290">err</span>&nbsp;<span class="op" id="7133294">!=</span>&nbsp;<span class="ident" id="7133297">nil</span>&nbsp;<span class="op" id="7133301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7133305">panic</span><span class="op" id="7133310">(</span><span class="ident" id="7133311">err</span><span class="op" id="7133314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7133317">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7133320">return</span>&nbsp;<span class="ident" id="7133327">data</span><br>
<span class="lineno"></span><span class="op" id="7133332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7133335">func</span>&nbsp;<span class="ident" id="7133340">BenchmarkParse</span><span class="op" id="7133354">(</span><span class="ident" id="7133355">b</span>&nbsp;<span class="op" id="7133357">*</span><span class="ident" id="7133358">testing</span><span class="op" id="7133365">.</span><span class="ident" id="7133366">B</span><span class="op" id="7133367">)</span>&nbsp;<span class="op" id="7133369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7133372">b</span><span class="op" id="7133373">.</span><span class="ident" id="7133374">SetBytes</span><span class="op" id="7133382">(</span><span class="ident" id="7133383">int64</span><span class="op" id="7133388">(</span><span class="builtinfunc" id="7133389">len</span><span class="op" id="7133392">(</span><span class="ident" id="7133393">src</span><span class="op" id="7133396">)</span><span class="op" id="7133397">)</span><span class="op" id="7133398">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7133401">for</span>&nbsp;<span class="ident" id="7133405">i</span>&nbsp;<span class="op" id="7133407">:=</span>&nbsp;<span class="num" id="7133410">0</span><span class="op" id="7133411">;</span>&nbsp;<span class="ident" id="7133413">i</span>&nbsp;<span class="op" id="7133415">&lt;</span>&nbsp;<span class="ident" id="7133417">b</span><span class="op" id="7133418">.</span><span class="ident" id="7133419">N</span><span class="op" id="7133420">;</span>&nbsp;<span class="ident" id="7133422">i</span><span class="op" id="7133423">++</span>&nbsp;<span class="op" id="7133426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7133430">if</span>&nbsp;<span class="ident" id="7133433">_</span><span class="op" id="7133434">,</span>&nbsp;<span class="ident" id="7133436">err</span>&nbsp;<span class="op" id="7133440">:=</span>&nbsp;<span class="ident" id="7133443">ParseFile</span><span class="op" id="7133452">(</span><span class="ident" id="7133453">token</span><span class="op" id="7133458">.</span><span class="ident" id="7133459">NewFileSet</span><span class="op" id="7133469">(</span><span class="op" id="7133470">)</span><span class="op" id="7133471">,</span>&nbsp;<span class="string" id="7133473">&#34;&#34;</span><span class="op" id="7133475">,</span>&nbsp;<span class="ident" id="7133477">src</span><span class="op" id="7133480">,</span>&nbsp;<span class="ident" id="7133482">ParseComments</span><span class="op" id="7133495">)</span><span class="op" id="7133496">;</span>&nbsp;<span class="ident" id="7133498">err</span>&nbsp;<span class="op" id="7133502">!=</span>&nbsp;<span class="ident" id="7133505">nil</span>&nbsp;<span class="op" id="7133509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7133514">b</span><span class="op" id="7133515">.</span><span class="ident" id="7133516">Fatalf</span><span class="op" id="7133522">(</span><span class="string" id="7133523">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7133564">,</span>&nbsp;<span class="ident" id="7133566">err</span><span class="op" id="7133569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7133573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7133576">}</span><br>
<span class="lineno">30</span><span class="op" id="7133578">}</span>
</div>
</body>
</html>
