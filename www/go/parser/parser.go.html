<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6037557">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6037612">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6037666">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6037717">//&nbsp;Package&nbsp;parser&nbsp;implements&nbsp;a&nbsp;parser&nbsp;for&nbsp;Go&nbsp;source&nbsp;files.&nbsp;Input&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6037789">//&nbsp;provided&nbsp;in&nbsp;a&nbsp;variety&nbsp;of&nbsp;forms&nbsp;(see&nbsp;the&nbsp;various&nbsp;Parse*&nbsp;functions);&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6037863">//&nbsp;output&nbsp;is&nbsp;an&nbsp;abstract&nbsp;syntax&nbsp;tree&nbsp;(AST)&nbsp;representing&nbsp;the&nbsp;Go&nbsp;source.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="6037938">//&nbsp;parser&nbsp;is&nbsp;invoked&nbsp;through&nbsp;one&nbsp;of&nbsp;the&nbsp;Parse*&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="6037996">//</span><br>
<span class="lineno">10</span><span class="keyword" id="6037999">package</span>&nbsp;<span class="ident" id="6038007">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6038015">import</span>&nbsp;<span class="op" id="6038022">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038025">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038032">&#34;go/ast&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038042">&#34;go/scanner&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038056">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038068">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038079">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6038090">&#34;unicode&#34;</span><br>
<span class="lineno">20</span><span class="op" id="6038100">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6038103">//&nbsp;The&nbsp;parser&nbsp;structure&nbsp;holds&nbsp;the&nbsp;parser&#39;s&nbsp;internal&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="6038162">type</span>&nbsp;<span class="ident" id="6038167">parser</span>&nbsp;<span class="keyword" id="6038174">struct</span>&nbsp;<span class="op" id="6038181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038184">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6038192">*</span><span class="ident" id="6038193"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6038198">.</span><span class="ident" id="6038199">File</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038205">errors</span>&nbsp;&nbsp;<span class="ident" id="6038213"><a href="/go/parser/parser.go.html#6038042">scanner</a></span><span class="op" id="6038220">.</span><span class="ident" id="6038221">ErrorList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038232">scanner</span>&nbsp;<span class="ident" id="6038240"><a href="/go/parser/parser.go.html#6038042">scanner</a></span><span class="op" id="6038247">.</span><span class="ident" id="6038248">Scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038258">//&nbsp;Tracing/debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038280">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6038287"><a href="/go/parser/interface.go.html#6032820">Mode</a></span>&nbsp;<span class="comment" id="6038292">//&nbsp;parsing&nbsp;mode</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038309">trace</span>&nbsp;&nbsp;<span class="builtintype" id="6038316">bool</span>&nbsp;<span class="comment" id="6038321">//&nbsp;==&nbsp;(mode&nbsp;&amp;&nbsp;Trace&nbsp;!=&nbsp;0)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038348">indent</span>&nbsp;<span class="builtintype" id="6038355">int</span>&nbsp;&nbsp;<span class="comment" id="6038360">//&nbsp;indentation&nbsp;used&nbsp;for&nbsp;tracing&nbsp;output</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038401">//&nbsp;Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038414">comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6038426">[</span><span class="op" id="6038427">]</span><span class="op" id="6038428">*</span><span class="ident" id="6038429"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6038432">.</span><span class="ident" id="6038433">CommentGroup</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038447">leadComment</span>&nbsp;<span class="op" id="6038459">*</span><span class="ident" id="6038460"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6038463">.</span><span class="ident" id="6038464">CommentGroup</span>&nbsp;<span class="comment" id="6038477">//&nbsp;last&nbsp;lead&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038499">lineComment</span>&nbsp;<span class="op" id="6038511">*</span><span class="ident" id="6038512"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6038515">.</span><span class="ident" id="6038516">CommentGroup</span>&nbsp;<span class="comment" id="6038529">//&nbsp;last&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038552">//&nbsp;Next&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038567">pos</span>&nbsp;<span class="ident" id="6038571"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6038576">.</span><span class="ident" id="6038577">Pos</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6038583">//&nbsp;token&nbsp;position</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038602">tok</span>&nbsp;<span class="ident" id="6038606"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6038611">.</span><span class="ident" id="6038612">Token</span>&nbsp;<span class="comment" id="6038618">//&nbsp;one&nbsp;token&nbsp;look-ahead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038643">lit</span>&nbsp;<span class="builtintype" id="6038647">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038659">//&nbsp;token&nbsp;literal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038678">//&nbsp;Error&nbsp;recovery</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038697">//&nbsp;(used&nbsp;to&nbsp;limit&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;to&nbsp;syncXXX&nbsp;functions</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038757">//&nbsp;w/o&nbsp;making&nbsp;scanning&nbsp;progress&nbsp;-&nbsp;avoids&nbsp;potential&nbsp;endless</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6038817">//&nbsp;loops&nbsp;across&nbsp;multiple&nbsp;parser&nbsp;functions&nbsp;during&nbsp;error&nbsp;recovery)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038883">syncPos</span>&nbsp;<span class="ident" id="6038891"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6038896">.</span><span class="ident" id="6038897">Pos</span>&nbsp;<span class="comment" id="6038901">//&nbsp;last&nbsp;synchronization&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6038935">syncCnt</span>&nbsp;<span class="builtintype" id="6038943">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6038953">//&nbsp;number&nbsp;of&nbsp;calls&nbsp;to&nbsp;syncXXX&nbsp;without&nbsp;progress</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039002">//&nbsp;Non-syntactic&nbsp;parser&nbsp;control</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039035">exprLev</span>&nbsp;<span class="builtintype" id="6039043">int</span>&nbsp;&nbsp;<span class="comment" id="6039048">//&nbsp;&lt;&nbsp;0:&nbsp;in&nbsp;control&nbsp;clause,&nbsp;&gt;=&nbsp;0:&nbsp;in&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039096">inRhs</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6039104">bool</span>&nbsp;<span class="comment" id="6039109">//&nbsp;if&nbsp;set,&nbsp;the&nbsp;parser&nbsp;is&nbsp;parsing&nbsp;a&nbsp;rhs&nbsp;expression</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039161">//&nbsp;Ordinary&nbsp;identifier&nbsp;scopes</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039192">pkgScope</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6039203">*</span><span class="ident" id="6039204"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039207">.</span><span class="ident" id="6039208">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6039221">//&nbsp;pkgScope.Outer&nbsp;==&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039247">topScope</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6039258">*</span><span class="ident" id="6039259"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039262">.</span><span class="ident" id="6039263">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6039276">//&nbsp;top-most&nbsp;scope;&nbsp;may&nbsp;be&nbsp;pkgScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039312">unresolved</span>&nbsp;<span class="op" id="6039323">[</span><span class="op" id="6039324">]</span><span class="op" id="6039325">*</span><span class="ident" id="6039326"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039329">.</span><span class="ident" id="6039330">Ident</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6039341">//&nbsp;unresolved&nbsp;identifiers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039368">imports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6039379">[</span><span class="op" id="6039380">]</span><span class="op" id="6039381">*</span><span class="ident" id="6039382"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039385">.</span><span class="ident" id="6039386">ImportSpec</span>&nbsp;<span class="comment" id="6039397">//&nbsp;list&nbsp;of&nbsp;imports</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039418">//&nbsp;Label&nbsp;scopes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6039435">//&nbsp;(maintained&nbsp;by&nbsp;open/close&nbsp;LabelScope)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039477">labelScope</span>&nbsp;&nbsp;<span class="op" id="6039489">*</span><span class="ident" id="6039490"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039493">.</span><span class="ident" id="6039494">Scope</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6039504">//&nbsp;label&nbsp;scope&nbsp;for&nbsp;current&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039541">targetStack</span>&nbsp;<span class="op" id="6039553">[</span><span class="op" id="6039554">]</span><span class="op" id="6039555">[</span><span class="op" id="6039556">]</span><span class="op" id="6039557">*</span><span class="ident" id="6039558"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6039561">.</span><span class="ident" id="6039562">Ident</span>&nbsp;<span class="comment" id="6039568">//&nbsp;stack&nbsp;of&nbsp;unresolved&nbsp;labels</span><br>
<span class="lineno"></span><span class="op" id="6039598">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6039601">func</span>&nbsp;<span class="op" id="6039606">(</span><span class="ident" id="6039607">p</span>&nbsp;<span class="op" id="6039609">*</span><span class="ident" id="6039610"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6039616">)</span>&nbsp;<span class="ident" id="6039618">init</span><span class="op" id="6039622">(</span><span class="ident" id="6039623">fset</span>&nbsp;<span class="op" id="6039628">*</span><span class="ident" id="6039629"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6039634">.</span><span class="ident" id="6039635">FileSet</span><span class="op" id="6039642">,</span>&nbsp;<span class="ident" id="6039644">filename</span>&nbsp;<span class="builtintype" id="6039653">string</span><span class="op" id="6039659">,</span>&nbsp;<span class="ident" id="6039661">src</span>&nbsp;<span class="op" id="6039665">[</span><span class="op" id="6039666">]</span><span class="builtintype" id="6039667">byte</span><span class="op" id="6039671">,</span>&nbsp;<span class="ident" id="6039673">mode</span>&nbsp;<span class="ident" id="6039678"><a href="/go/parser/interface.go.html#6032820">Mode</a></span><span class="op" id="6039682">)</span>&nbsp;<span class="op" id="6039684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039687"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039688">.</span><span class="ident" id="6039689">file</span>&nbsp;<span class="op" id="6039694">=</span>&nbsp;<span class="ident" id="6039696"><a href="/go/parser/parser.go.html#6039623">fset</a></span><span class="op" id="6039700">.</span><span class="ident" id="6039701">AddFile</span><span class="op" id="6039708">(</span><span class="ident" id="6039709"><a href="/go/parser/parser.go.html#6039644">filename</a></span><span class="op" id="6039717">,</span>&nbsp;<span class="op" id="6039719">-</span><span class="num" id="6039720">1</span><span class="op" id="6039721">,</span>&nbsp;<span class="builtinfunc" id="6039723">len</span><span class="op" id="6039726">(</span><span class="ident" id="6039727"><a href="/go/parser/parser.go.html#6039661">src</a></span><span class="op" id="6039730">)</span><span class="op" id="6039731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039734">var</span>&nbsp;<span class="ident" id="6039738">m</span>&nbsp;<span class="ident" id="6039740"><a href="/go/parser/parser.go.html#6038042">scanner</a></span><span class="op" id="6039747">.</span><span class="ident" id="6039748">Mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039754">if</span>&nbsp;<span class="ident" id="6039757"><a href="/go/parser/parser.go.html#6039673">mode</a></span><span class="op" id="6039761">&amp;</span><span class="ident" id="6039762"><a href="/go/parser/interface.go.html#6033015">ParseComments</a></span>&nbsp;<span class="op" id="6039776">!=</span>&nbsp;<span class="num" id="6039779">0</span>&nbsp;<span class="op" id="6039781">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039785"><a href="/go/parser/parser.go.html#6039738">m</a></span>&nbsp;<span class="op" id="6039787">=</span>&nbsp;<span class="ident" id="6039789"><a href="/go/parser/parser.go.html#6038042">scanner</a></span><span class="op" id="6039796">.</span><span class="ident" id="6039797">ScanComments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039814">eh</span>&nbsp;<span class="op" id="6039817">:=</span>&nbsp;<span class="keyword" id="6039820">func</span><span class="op" id="6039824">(</span><span class="ident" id="6039825">pos</span>&nbsp;<span class="ident" id="6039829"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6039834">.</span><span class="ident" id="6039835">Position</span><span class="op" id="6039843">,</span>&nbsp;<span class="ident" id="6039845">msg</span>&nbsp;<span class="builtintype" id="6039849">string</span><span class="op" id="6039855">)</span>&nbsp;<span class="op" id="6039857">{</span>&nbsp;<span class="ident" id="6039859"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039860">.</span><span class="ident" id="6039861">errors</span><span class="op" id="6039867">.</span><span class="ident" id="6039868">Add</span><span class="op" id="6039871">(</span><span class="ident" id="6039872"><a href="/go/parser/parser.go.html#6039825">pos</a></span><span class="op" id="6039875">,</span>&nbsp;<span class="ident" id="6039877"><a href="/go/parser/parser.go.html#6039845">msg</a></span><span class="op" id="6039880">)</span>&nbsp;<span class="op" id="6039882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039885"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039886">.</span><span class="ident" id="6039887">scanner</span><span class="op" id="6039894">.</span><span class="ident" id="6039895">Init</span><span class="op" id="6039899">(</span><span class="ident" id="6039900"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039901">.</span><span class="ident" id="6039902">file</span><span class="op" id="6039906">,</span>&nbsp;<span class="ident" id="6039908"><a href="/go/parser/parser.go.html#6039661">src</a></span><span class="op" id="6039911">,</span>&nbsp;<span class="ident" id="6039913"><a href="/go/parser/parser.go.html#6039814">eh</a></span><span class="op" id="6039915">,</span>&nbsp;<span class="ident" id="6039917"><a href="/go/parser/parser.go.html#6039738">m</a></span><span class="op" id="6039918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039922"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039923">.</span><span class="ident" id="6039924">mode</span>&nbsp;<span class="op" id="6039929">=</span>&nbsp;<span class="ident" id="6039931"><a href="/go/parser/parser.go.html#6039673">mode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039937"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6039938">.</span><span class="ident" id="6039939">trace</span>&nbsp;<span class="op" id="6039945">=</span>&nbsp;<span class="ident" id="6039947"><a href="/go/parser/parser.go.html#6039673">mode</a></span><span class="op" id="6039951">&amp;</span><span class="ident" id="6039952"><a href="/go/parser/interface.go.html#6033101">Trace</a></span>&nbsp;<span class="op" id="6039958">!=</span>&nbsp;<span class="num" id="6039961">0</span>&nbsp;<span class="comment" id="6039963">//&nbsp;for&nbsp;convenience&nbsp;(p.trace&nbsp;is&nbsp;used&nbsp;frequently)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040013"><a href="/go/parser/parser.go.html#6039607">p</a></span><span class="op" id="6040014">.</span><span class="ident" id="6040015">next</span><span class="op" id="6040019">(</span><span class="op" id="6040020">)</span><br>
<span class="lineno"></span><span class="op" id="6040022">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6040025">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6040105">//&nbsp;Scoping&nbsp;support</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040125">func</span>&nbsp;<span class="op" id="6040130">(</span><span class="ident" id="6040131">p</span>&nbsp;<span class="op" id="6040133">*</span><span class="ident" id="6040134"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6040140">)</span>&nbsp;<span class="ident" id="6040142">openScope</span><span class="op" id="6040151">(</span><span class="op" id="6040152">)</span>&nbsp;<span class="op" id="6040154">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040157"><a href="/go/parser/parser.go.html#6040131">p</a></span><span class="op" id="6040158">.</span><span class="ident" id="6040159">topScope</span>&nbsp;<span class="op" id="6040168">=</span>&nbsp;<span class="ident" id="6040170"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6040173">.</span><span class="ident" id="6040174">NewScope</span><span class="op" id="6040182">(</span><span class="ident" id="6040183"><a href="/go/parser/parser.go.html#6040131">p</a></span><span class="op" id="6040184">.</span><span class="ident" id="6040185">topScope</span><span class="op" id="6040193">)</span><br>
<span class="lineno"></span><span class="op" id="6040195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040198">func</span>&nbsp;<span class="op" id="6040203">(</span><span class="ident" id="6040204">p</span>&nbsp;<span class="op" id="6040206">*</span><span class="ident" id="6040207"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6040213">)</span>&nbsp;<span class="ident" id="6040215">closeScope</span><span class="op" id="6040225">(</span><span class="op" id="6040226">)</span>&nbsp;<span class="op" id="6040228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040231"><a href="/go/parser/parser.go.html#6040204">p</a></span><span class="op" id="6040232">.</span><span class="ident" id="6040233">topScope</span>&nbsp;<span class="op" id="6040242">=</span>&nbsp;<span class="ident" id="6040244"><a href="/go/parser/parser.go.html#6040204">p</a></span><span class="op" id="6040245">.</span><span class="ident" id="6040246">topScope</span><span class="op" id="6040254">.</span><span class="ident" id="6040255">Outer</span><br>
<span class="lineno">90</span><span class="op" id="6040261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040264">func</span>&nbsp;<span class="op" id="6040269">(</span><span class="ident" id="6040270">p</span>&nbsp;<span class="op" id="6040272">*</span><span class="ident" id="6040273"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6040279">)</span>&nbsp;<span class="ident" id="6040281">openLabelScope</span><span class="op" id="6040295">(</span><span class="op" id="6040296">)</span>&nbsp;<span class="op" id="6040298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040301"><a href="/go/parser/parser.go.html#6040270">p</a></span><span class="op" id="6040302">.</span><span class="ident" id="6040303">labelScope</span>&nbsp;<span class="op" id="6040314">=</span>&nbsp;<span class="ident" id="6040316"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6040319">.</span><span class="ident" id="6040320">NewScope</span><span class="op" id="6040328">(</span><span class="ident" id="6040329"><a href="/go/parser/parser.go.html#6040270">p</a></span><span class="op" id="6040330">.</span><span class="ident" id="6040331">labelScope</span><span class="op" id="6040341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040344"><a href="/go/parser/parser.go.html#6040270">p</a></span><span class="op" id="6040345">.</span><span class="ident" id="6040346">targetStack</span>&nbsp;<span class="op" id="6040358">=</span>&nbsp;<span class="builtinfunc" id="6040360">append</span><span class="op" id="6040366">(</span><span class="ident" id="6040367"><a href="/go/parser/parser.go.html#6040270">p</a></span><span class="op" id="6040368">.</span><span class="ident" id="6040369">targetStack</span><span class="op" id="6040380">,</span>&nbsp;<span class="ident" id="6040382">nil</span><span class="op" id="6040385">)</span><br>
<span class="lineno">95</span><span class="op" id="6040387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040390">func</span>&nbsp;<span class="op" id="6040395">(</span><span class="ident" id="6040396">p</span>&nbsp;<span class="op" id="6040398">*</span><span class="ident" id="6040399"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6040405">)</span>&nbsp;<span class="ident" id="6040407">closeLabelScope</span><span class="op" id="6040422">(</span><span class="op" id="6040423">)</span>&nbsp;<span class="op" id="6040425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6040428">//&nbsp;resolve&nbsp;labels</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040447">n</span>&nbsp;<span class="op" id="6040449">:=</span>&nbsp;<span class="builtinfunc" id="6040452">len</span><span class="op" id="6040455">(</span><span class="ident" id="6040456"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040457">.</span><span class="ident" id="6040458">targetStack</span><span class="op" id="6040469">)</span>&nbsp;<span class="op" id="6040471">-</span>&nbsp;<span class="num" id="6040473">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040476">scope</span>&nbsp;<span class="op" id="6040482">:=</span>&nbsp;<span class="ident" id="6040485"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040486">.</span><span class="ident" id="6040487">labelScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040499">for</span>&nbsp;<span class="ident" id="6040503">_</span><span class="op" id="6040504">,</span>&nbsp;<span class="ident" id="6040506">ident</span>&nbsp;<span class="op" id="6040512">:=</span>&nbsp;<span class="keyword" id="6040515">range</span>&nbsp;<span class="ident" id="6040521"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040522">.</span><span class="ident" id="6040523">targetStack</span><span class="op" id="6040534">[</span><span class="ident" id="6040535"><a href="/go/parser/parser.go.html#6040447">n</a></span><span class="op" id="6040536">]</span>&nbsp;<span class="op" id="6040538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040542"><a href="/go/parser/parser.go.html#6040506">ident</a></span><span class="op" id="6040547">.</span><span class="ident" id="6040548">Obj</span>&nbsp;<span class="op" id="6040552">=</span>&nbsp;<span class="ident" id="6040554"><a href="/go/parser/parser.go.html#6040476">scope</a></span><span class="op" id="6040559">.</span><span class="ident" id="6040560">Lookup</span><span class="op" id="6040566">(</span><span class="ident" id="6040567"><a href="/go/parser/parser.go.html#6040506">ident</a></span><span class="op" id="6040572">.</span><span class="ident" id="6040573">Name</span><span class="op" id="6040577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040581">if</span>&nbsp;<span class="ident" id="6040584"><a href="/go/parser/parser.go.html#6040506">ident</a></span><span class="op" id="6040589">.</span><span class="ident" id="6040590">Obj</span>&nbsp;<span class="op" id="6040594">==</span>&nbsp;<span class="ident" id="6040597">nil</span>&nbsp;<span class="op" id="6040601">&amp;&amp;</span>&nbsp;<span class="ident" id="6040604"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040605">.</span><span class="ident" id="6040606">mode</span><span class="op" id="6040610">&amp;</span><span class="ident" id="6040611"><a href="/go/parser/interface.go.html#6033188">DeclarationErrors</a></span>&nbsp;<span class="op" id="6040629">!=</span>&nbsp;<span class="num" id="6040632">0</span>&nbsp;<span class="op" id="6040634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040639"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040640">.</span><span class="builtintype" id="6040641">error</span><span class="op" id="6040646">(</span><span class="ident" id="6040647"><a href="/go/parser/parser.go.html#6040506">ident</a></span><span class="op" id="6040652">.</span><span class="ident" id="6040653">Pos</span><span class="op" id="6040656">(</span><span class="op" id="6040657">)</span><span class="op" id="6040658">,</span>&nbsp;<span class="ident" id="6040660"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6040663">.</span><span class="ident" id="6040664">Sprintf</span><span class="op" id="6040671">(</span><span class="string" id="6040672">&#34;label&nbsp;%s&nbsp;undefined&#34;</span><span class="op" id="6040692">,</span>&nbsp;<span class="ident" id="6040694"><a href="/go/parser/parser.go.html#6040506">ident</a></span><span class="op" id="6040699">.</span><span class="ident" id="6040700">Name</span><span class="op" id="6040704">)</span><span class="op" id="6040705">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6040712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6040715">//&nbsp;pop&nbsp;label&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040735"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040736">.</span><span class="ident" id="6040737">targetStack</span>&nbsp;<span class="op" id="6040749">=</span>&nbsp;<span class="ident" id="6040751"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040752">.</span><span class="ident" id="6040753">targetStack</span><span class="op" id="6040764">[</span><span class="num" id="6040765">0</span><span class="op" id="6040766">:</span><span class="ident" id="6040767"><a href="/go/parser/parser.go.html#6040447">n</a></span><span class="op" id="6040768">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040771"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040772">.</span><span class="ident" id="6040773">labelScope</span>&nbsp;<span class="op" id="6040784">=</span>&nbsp;<span class="ident" id="6040786"><a href="/go/parser/parser.go.html#6040396">p</a></span><span class="op" id="6040787">.</span><span class="ident" id="6040788">labelScope</span><span class="op" id="6040798">.</span><span class="ident" id="6040799">Outer</span><br>
<span class="lineno">110</span><span class="op" id="6040805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6040808">func</span>&nbsp;<span class="op" id="6040813">(</span><span class="ident" id="6040814">p</span>&nbsp;<span class="op" id="6040816">*</span><span class="ident" id="6040817"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6040823">)</span>&nbsp;<span class="ident" id="6040825">declare</span><span class="op" id="6040832">(</span><span class="ident" id="6040833">decl</span><span class="op" id="6040837">,</span>&nbsp;<span class="ident" id="6040839">data</span>&nbsp;<span class="keyword" id="6040844">interface</span><span class="op" id="6040853">{</span><span class="op" id="6040854">}</span><span class="op" id="6040855">,</span>&nbsp;<span class="ident" id="6040857">scope</span>&nbsp;<span class="op" id="6040863">*</span><span class="ident" id="6040864"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6040867">.</span><span class="ident" id="6040868">Scope</span><span class="op" id="6040873">,</span>&nbsp;<span class="ident" id="6040875">kind</span>&nbsp;<span class="ident" id="6040880"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6040883">.</span><span class="ident" id="6040884">ObjKind</span><span class="op" id="6040891">,</span>&nbsp;<span class="ident" id="6040893">idents</span>&nbsp;<span class="op" id="6040900">...</span><span class="op" id="6040903">*</span><span class="ident" id="6040904"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6040907">.</span><span class="ident" id="6040908">Ident</span><span class="op" id="6040913">)</span>&nbsp;<span class="op" id="6040915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6040918">for</span>&nbsp;<span class="ident" id="6040922">_</span><span class="op" id="6040923">,</span>&nbsp;<span class="ident" id="6040925">ident</span>&nbsp;<span class="op" id="6040931">:=</span>&nbsp;<span class="keyword" id="6040934">range</span>&nbsp;<span class="ident" id="6040940"><a href="/go/parser/parser.go.html#6040893">idents</a></span>&nbsp;<span class="op" id="6040947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040951"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6040957">(</span><span class="ident" id="6040958"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6040963">.</span><span class="ident" id="6040964">Obj</span>&nbsp;<span class="op" id="6040968">==</span>&nbsp;<span class="ident" id="6040971">nil</span><span class="op" id="6040974">,</span>&nbsp;<span class="string" id="6040976">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="6041017">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041021">obj</span>&nbsp;<span class="op" id="6041025">:=</span>&nbsp;<span class="ident" id="6041028"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6041031">.</span><span class="ident" id="6041032">NewObj</span><span class="op" id="6041038">(</span><span class="ident" id="6041039"><a href="/go/parser/parser.go.html#6040875">kind</a></span><span class="op" id="6041043">,</span>&nbsp;<span class="ident" id="6041045"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6041050">.</span><span class="ident" id="6041051">Name</span><span class="op" id="6041055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041059">//&nbsp;remember&nbsp;the&nbsp;corresponding&nbsp;declaration&nbsp;for&nbsp;redeclaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041121">//&nbsp;errors&nbsp;and&nbsp;global&nbsp;variable&nbsp;resolution/typechecking&nbsp;phase</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041183"><a href="/go/parser/parser.go.html#6041021">obj</a></span><span class="op" id="6041186">.</span><span class="ident" id="6041187">Decl</span>&nbsp;<span class="op" id="6041192">=</span>&nbsp;<span class="ident" id="6041194"><a href="/go/parser/parser.go.html#6040833">decl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041201"><a href="/go/parser/parser.go.html#6041021">obj</a></span><span class="op" id="6041204">.</span><span class="ident" id="6041205">Data</span>&nbsp;<span class="op" id="6041210">=</span>&nbsp;<span class="ident" id="6041212"><a href="/go/parser/parser.go.html#6040839">data</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041219"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6041224">.</span><span class="ident" id="6041225">Obj</span>&nbsp;<span class="op" id="6041229">=</span>&nbsp;<span class="ident" id="6041231"><a href="/go/parser/parser.go.html#6041021">obj</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041237">if</span>&nbsp;<span class="ident" id="6041240"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6041245">.</span><span class="ident" id="6041246">Name</span>&nbsp;<span class="op" id="6041251">!=</span>&nbsp;<span class="string" id="6041254">&#34;_&#34;</span>&nbsp;<span class="op" id="6041258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041263">if</span>&nbsp;<span class="ident" id="6041266">alt</span>&nbsp;<span class="op" id="6041270">:=</span>&nbsp;<span class="ident" id="6041273"><a href="/go/parser/parser.go.html#6040857">scope</a></span><span class="op" id="6041278">.</span><span class="ident" id="6041279">Insert</span><span class="op" id="6041285">(</span><span class="ident" id="6041286"><a href="/go/parser/parser.go.html#6041021">obj</a></span><span class="op" id="6041289">)</span><span class="op" id="6041290">;</span>&nbsp;<span class="ident" id="6041292"><a href="/go/parser/parser.go.html#6041266">alt</a></span>&nbsp;<span class="op" id="6041296">!=</span>&nbsp;<span class="ident" id="6041299">nil</span>&nbsp;<span class="op" id="6041303">&amp;&amp;</span>&nbsp;<span class="ident" id="6041306"><a href="/go/parser/parser.go.html#6040814">p</a></span><span class="op" id="6041307">.</span><span class="ident" id="6041308">mode</span><span class="op" id="6041312">&amp;</span><span class="ident" id="6041313"><a href="/go/parser/interface.go.html#6033188">DeclarationErrors</a></span>&nbsp;<span class="op" id="6041331">!=</span>&nbsp;<span class="num" id="6041334">0</span>&nbsp;<span class="op" id="6041336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041342">prevDecl</span>&nbsp;<span class="op" id="6041351">:=</span>&nbsp;<span class="string" id="6041354">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041361">if</span>&nbsp;<span class="ident" id="6041364">pos</span>&nbsp;<span class="op" id="6041368">:=</span>&nbsp;<span class="ident" id="6041371"><a href="/go/parser/parser.go.html#6041266">alt</a></span><span class="op" id="6041374">.</span><span class="ident" id="6041375">Pos</span><span class="op" id="6041378">(</span><span class="op" id="6041379">)</span><span class="op" id="6041380">;</span>&nbsp;<span class="ident" id="6041382"><a href="/go/parser/parser.go.html#6041364">pos</a></span><span class="op" id="6041385">.</span><span class="ident" id="6041386">IsValid</span><span class="op" id="6041393">(</span><span class="op" id="6041394">)</span>&nbsp;<span class="op" id="6041396">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041403"><a href="/go/parser/parser.go.html#6041342">prevDecl</a></span>&nbsp;<span class="op" id="6041412">=</span>&nbsp;<span class="ident" id="6041414"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6041417">.</span><span class="ident" id="6041418">Sprintf</span><span class="op" id="6041425">(</span><span class="string" id="6041426">&#34;\n\tprevious&nbsp;declaration&nbsp;at&nbsp;%s&#34;</span><span class="op" id="6041458">,</span>&nbsp;<span class="ident" id="6041460"><a href="/go/parser/parser.go.html#6040814">p</a></span><span class="op" id="6041461">.</span><span class="ident" id="6041462">file</span><span class="op" id="6041466">.</span><span class="ident" id="6041467">Position</span><span class="op" id="6041475">(</span><span class="ident" id="6041476"><a href="/go/parser/parser.go.html#6041364">pos</a></span><span class="op" id="6041479">)</span><span class="op" id="6041480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041492"><a href="/go/parser/parser.go.html#6040814">p</a></span><span class="op" id="6041493">.</span><span class="builtintype" id="6041494">error</span><span class="op" id="6041499">(</span><span class="ident" id="6041500"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6041505">.</span><span class="ident" id="6041506">Pos</span><span class="op" id="6041509">(</span><span class="op" id="6041510">)</span><span class="op" id="6041511">,</span>&nbsp;<span class="ident" id="6041513"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6041516">.</span><span class="ident" id="6041517">Sprintf</span><span class="op" id="6041524">(</span><span class="string" id="6041525">&#34;%s&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;block%s&#34;</span><span class="op" id="6041556">,</span>&nbsp;<span class="ident" id="6041558"><a href="/go/parser/parser.go.html#6040925">ident</a></span><span class="op" id="6041563">.</span><span class="ident" id="6041564">Name</span><span class="op" id="6041568">,</span>&nbsp;<span class="ident" id="6041570"><a href="/go/parser/parser.go.html#6041342">prevDecl</a></span><span class="op" id="6041578">)</span><span class="op" id="6041579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041588">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041591">}</span><br>
<span class="lineno"></span><span class="op" id="6041593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6041596">func</span>&nbsp;<span class="op" id="6041601">(</span><span class="ident" id="6041602">p</span>&nbsp;<span class="op" id="6041604">*</span><span class="ident" id="6041605"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6041611">)</span>&nbsp;<span class="ident" id="6041613">shortVarDecl</span><span class="op" id="6041625">(</span><span class="ident" id="6041626">decl</span>&nbsp;<span class="op" id="6041631">*</span><span class="ident" id="6041632"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6041635">.</span><span class="ident" id="6041636">AssignStmt</span><span class="op" id="6041646">,</span>&nbsp;<span class="ident" id="6041648">list</span>&nbsp;<span class="op" id="6041653">[</span><span class="op" id="6041654">]</span><span class="ident" id="6041655"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6041658">.</span><span class="ident" id="6041659">Expr</span><span class="op" id="6041663">)</span>&nbsp;<span class="op" id="6041665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041668">//&nbsp;Go&nbsp;spec:&nbsp;A&nbsp;short&nbsp;variable&nbsp;declaration&nbsp;may&nbsp;redeclare&nbsp;variables</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041734">//&nbsp;provided&nbsp;they&nbsp;were&nbsp;originally&nbsp;declared&nbsp;in&nbsp;the&nbsp;same&nbsp;block&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041800">//&nbsp;the&nbsp;same&nbsp;type,&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;non-blank&nbsp;variables&nbsp;is&nbsp;new.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041871">n</span>&nbsp;<span class="op" id="6041873">:=</span>&nbsp;<span class="num" id="6041876">0</span>&nbsp;<span class="comment" id="6041878">//&nbsp;number&nbsp;of&nbsp;new&nbsp;variables</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041906">for</span>&nbsp;<span class="ident" id="6041910">_</span><span class="op" id="6041911">,</span>&nbsp;<span class="ident" id="6041913">x</span>&nbsp;<span class="op" id="6041915">:=</span>&nbsp;<span class="keyword" id="6041918">range</span>&nbsp;<span class="ident" id="6041924"><a href="/go/parser/parser.go.html#6041648">list</a></span>&nbsp;<span class="op" id="6041929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041933">if</span>&nbsp;<span class="ident" id="6041936">ident</span><span class="op" id="6041941">,</span>&nbsp;<span class="ident" id="6041943">isIdent</span>&nbsp;<span class="op" id="6041951">:=</span>&nbsp;<span class="ident" id="6041954"><a href="/go/parser/parser.go.html#6041913">x</a></span><span class="op" id="6041955">.</span><span class="op" id="6041956">(</span><span class="op" id="6041957">*</span><span class="ident" id="6041958"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6041961">.</span><span class="ident" id="6041962">Ident</span><span class="op" id="6041967">)</span><span class="op" id="6041968">;</span>&nbsp;<span class="ident" id="6041970"><a href="/go/parser/parser.go.html#6041943">isIdent</a></span>&nbsp;<span class="op" id="6041978">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041983"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6041989">(</span><span class="ident" id="6041990"><a href="/go/parser/parser.go.html#6041936">ident</a></span><span class="op" id="6041995">.</span><span class="ident" id="6041996">Obj</span>&nbsp;<span class="op" id="6042000">==</span>&nbsp;<span class="ident" id="6042003">nil</span><span class="op" id="6042006">,</span>&nbsp;<span class="string" id="6042008">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="6042049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042054">obj</span>&nbsp;<span class="op" id="6042058">:=</span>&nbsp;<span class="ident" id="6042061"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6042064">.</span><span class="ident" id="6042065">NewObj</span><span class="op" id="6042071">(</span><span class="ident" id="6042072"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6042075">.</span><span class="ident" id="6042076">Var</span><span class="op" id="6042079">,</span>&nbsp;<span class="ident" id="6042081"><a href="/go/parser/parser.go.html#6041936">ident</a></span><span class="op" id="6042086">.</span><span class="ident" id="6042087">Name</span><span class="op" id="6042091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042096">//&nbsp;remember&nbsp;corresponding&nbsp;assignment&nbsp;for&nbsp;other&nbsp;tools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042152"><a href="/go/parser/parser.go.html#6042054">obj</a></span><span class="op" id="6042155">.</span><span class="ident" id="6042156">Decl</span>&nbsp;<span class="op" id="6042161">=</span>&nbsp;<span class="ident" id="6042163"><a href="/go/parser/parser.go.html#6041626">decl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042171"><a href="/go/parser/parser.go.html#6041936">ident</a></span><span class="op" id="6042176">.</span><span class="ident" id="6042177">Obj</span>&nbsp;<span class="op" id="6042181">=</span>&nbsp;<span class="ident" id="6042183"><a href="/go/parser/parser.go.html#6042054">obj</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042190">if</span>&nbsp;<span class="ident" id="6042193"><a href="/go/parser/parser.go.html#6041936">ident</a></span><span class="op" id="6042198">.</span><span class="ident" id="6042199">Name</span>&nbsp;<span class="op" id="6042204">!=</span>&nbsp;<span class="string" id="6042207">&#34;_&#34;</span>&nbsp;<span class="op" id="6042211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042217">if</span>&nbsp;<span class="ident" id="6042220">alt</span>&nbsp;<span class="op" id="6042224">:=</span>&nbsp;<span class="ident" id="6042227"><a href="/go/parser/parser.go.html#6041602">p</a></span><span class="op" id="6042228">.</span><span class="ident" id="6042229">topScope</span><span class="op" id="6042237">.</span><span class="ident" id="6042238">Insert</span><span class="op" id="6042244">(</span><span class="ident" id="6042245"><a href="/go/parser/parser.go.html#6042054">obj</a></span><span class="op" id="6042248">)</span><span class="op" id="6042249">;</span>&nbsp;<span class="ident" id="6042251"><a href="/go/parser/parser.go.html#6042220">alt</a></span>&nbsp;<span class="op" id="6042255">!=</span>&nbsp;<span class="ident" id="6042258">nil</span>&nbsp;<span class="op" id="6042262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042269"><a href="/go/parser/parser.go.html#6041936">ident</a></span><span class="op" id="6042274">.</span><span class="ident" id="6042275">Obj</span>&nbsp;<span class="op" id="6042279">=</span>&nbsp;<span class="ident" id="6042281"><a href="/go/parser/parser.go.html#6042220">alt</a></span>&nbsp;<span class="comment" id="6042285">//&nbsp;redeclaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042306">}</span>&nbsp;<span class="keyword" id="6042308">else</span>&nbsp;<span class="op" id="6042313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042320"><a href="/go/parser/parser.go.html#6041871">n</a></span><span class="op" id="6042321">++</span>&nbsp;<span class="comment" id="6042324">//&nbsp;new&nbsp;declaration</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042347">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042356">}</span>&nbsp;<span class="keyword" id="6042358">else</span>&nbsp;<span class="op" id="6042363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042368"><a href="/go/parser/parser.go.html#6041602">p</a></span><span class="op" id="6042369">.</span><span class="ident" id="6042370">errorExpected</span><span class="op" id="6042383">(</span><span class="ident" id="6042384"><a href="/go/parser/parser.go.html#6041913">x</a></span><span class="op" id="6042385">.</span><span class="ident" id="6042386">Pos</span><span class="op" id="6042389">(</span><span class="op" id="6042390">)</span><span class="op" id="6042391">,</span>&nbsp;<span class="string" id="6042393">&#34;identifier&nbsp;on&nbsp;left&nbsp;side&nbsp;of&nbsp;:=&#34;</span><span class="op" id="6042424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042428">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042434">if</span>&nbsp;<span class="ident" id="6042437"><a href="/go/parser/parser.go.html#6041871">n</a></span>&nbsp;<span class="op" id="6042439">==</span>&nbsp;<span class="num" id="6042442">0</span>&nbsp;<span class="op" id="6042444">&amp;&amp;</span>&nbsp;<span class="ident" id="6042447"><a href="/go/parser/parser.go.html#6041602">p</a></span><span class="op" id="6042448">.</span><span class="ident" id="6042449">mode</span><span class="op" id="6042453">&amp;</span><span class="ident" id="6042454"><a href="/go/parser/interface.go.html#6033188">DeclarationErrors</a></span>&nbsp;<span class="op" id="6042472">!=</span>&nbsp;<span class="num" id="6042475">0</span>&nbsp;<span class="op" id="6042477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042481"><a href="/go/parser/parser.go.html#6041602">p</a></span><span class="op" id="6042482">.</span><span class="builtintype" id="6042483">error</span><span class="op" id="6042488">(</span><span class="ident" id="6042489"><a href="/go/parser/parser.go.html#6041648">list</a></span><span class="op" id="6042493">[</span><span class="num" id="6042494">0</span><span class="op" id="6042495">]</span><span class="op" id="6042496">.</span><span class="ident" id="6042497">Pos</span><span class="op" id="6042500">(</span><span class="op" id="6042501">)</span><span class="op" id="6042502">,</span>&nbsp;<span class="string" id="6042504">&#34;no&nbsp;new&nbsp;variables&nbsp;on&nbsp;left&nbsp;side&nbsp;of&nbsp;:=&#34;</span><span class="op" id="6042541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042544">}</span><br>
<span class="lineno"></span><span class="op" id="6042546">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="6042549">//&nbsp;The&nbsp;unresolved&nbsp;object&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;to&nbsp;mark&nbsp;identifiers&nbsp;that&nbsp;have&nbsp;been&nbsp;added</span><br>
<span class="lineno"></span><span class="comment" id="6042629">//&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;unresolved&nbsp;identifiers.&nbsp;The&nbsp;sentinel&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;verifying</span><br>
<span class="lineno"></span><span class="comment" id="6042711">//&nbsp;internal&nbsp;consistency.</span><br>
<span class="lineno"></span><span class="keyword" id="6042736">var</span>&nbsp;<span class="ident" id="6042740">unresolved</span>&nbsp;<span class="op" id="6042751">=</span>&nbsp;<span class="builtinfunc" id="6042753">new</span><span class="op" id="6042756">(</span><span class="ident" id="6042757"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6042760">.</span><span class="ident" id="6042761">Object</span><span class="op" id="6042767">)</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="6042770">//&nbsp;If&nbsp;x&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;tryResolve&nbsp;attempts&nbsp;to&nbsp;resolve&nbsp;x&nbsp;by&nbsp;looking&nbsp;up</span><br>
<span class="lineno"></span><span class="comment" id="6042843">//&nbsp;the&nbsp;object&nbsp;it&nbsp;denotes.&nbsp;If&nbsp;no&nbsp;object&nbsp;is&nbsp;found&nbsp;and&nbsp;collectUnresolved&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6042916">//&nbsp;set,&nbsp;x&nbsp;is&nbsp;marked&nbsp;as&nbsp;unresolved&nbsp;and&nbsp;collected&nbsp;in&nbsp;the&nbsp;list&nbsp;of&nbsp;unresolved</span><br>
<span class="lineno"></span><span class="comment" id="6042990">//&nbsp;identifiers.</span><br>
<span class="lineno">170</span><span class="comment" id="6043006">//</span><br>
<span class="lineno"></span><span class="keyword" id="6043009">func</span>&nbsp;<span class="op" id="6043014">(</span><span class="ident" id="6043015">p</span>&nbsp;<span class="op" id="6043017">*</span><span class="ident" id="6043018"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6043024">)</span>&nbsp;<span class="ident" id="6043026">tryResolve</span><span class="op" id="6043036">(</span><span class="ident" id="6043037">x</span>&nbsp;<span class="ident" id="6043039"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6043042">.</span><span class="ident" id="6043043">Expr</span><span class="op" id="6043047">,</span>&nbsp;<span class="ident" id="6043049">collectUnresolved</span>&nbsp;<span class="builtintype" id="6043067">bool</span><span class="op" id="6043071">)</span>&nbsp;<span class="op" id="6043073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043076">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;if&nbsp;x&nbsp;is&nbsp;not&nbsp;an&nbsp;identifier&nbsp;or&nbsp;the&nbsp;blank&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043144">ident</span><span class="op" id="6043149">,</span>&nbsp;<span class="ident" id="6043151">_</span>&nbsp;<span class="op" id="6043153">:=</span>&nbsp;<span class="ident" id="6043156"><a href="/go/parser/parser.go.html#6043037">x</a></span><span class="op" id="6043157">.</span><span class="op" id="6043158">(</span><span class="op" id="6043159">*</span><span class="ident" id="6043160"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6043163">.</span><span class="ident" id="6043164">Ident</span><span class="op" id="6043169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043172">if</span>&nbsp;<span class="ident" id="6043175"><a href="/go/parser/parser.go.html#6043144">ident</a></span>&nbsp;<span class="op" id="6043181">==</span>&nbsp;<span class="ident" id="6043184">nil</span>&nbsp;<span class="op" id="6043188">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043192">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043203"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6043209">(</span><span class="ident" id="6043210"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043215">.</span><span class="ident" id="6043216">Obj</span>&nbsp;<span class="op" id="6043220">==</span>&nbsp;<span class="ident" id="6043223">nil</span><span class="op" id="6043226">,</span>&nbsp;<span class="string" id="6043228">&#34;identifier&nbsp;already&nbsp;declared&nbsp;or&nbsp;resolved&#34;</span><span class="op" id="6043269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043272">if</span>&nbsp;<span class="ident" id="6043275"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043280">.</span><span class="ident" id="6043281">Name</span>&nbsp;<span class="op" id="6043286">==</span>&nbsp;<span class="string" id="6043289">&#34;_&#34;</span>&nbsp;<span class="op" id="6043293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043297">return</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043308">//&nbsp;try&nbsp;to&nbsp;resolve&nbsp;the&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043342">for</span>&nbsp;<span class="ident" id="6043346">s</span>&nbsp;<span class="op" id="6043348">:=</span>&nbsp;<span class="ident" id="6043351"><a href="/go/parser/parser.go.html#6043015">p</a></span><span class="op" id="6043352">.</span><span class="ident" id="6043353">topScope</span><span class="op" id="6043361">;</span>&nbsp;<span class="ident" id="6043363"><a href="/go/parser/parser.go.html#6043346">s</a></span>&nbsp;<span class="op" id="6043365">!=</span>&nbsp;<span class="ident" id="6043368">nil</span><span class="op" id="6043371">;</span>&nbsp;<span class="ident" id="6043373"><a href="/go/parser/parser.go.html#6043346">s</a></span>&nbsp;<span class="op" id="6043375">=</span>&nbsp;<span class="ident" id="6043377"><a href="/go/parser/parser.go.html#6043346">s</a></span><span class="op" id="6043378">.</span><span class="ident" id="6043379">Outer</span>&nbsp;<span class="op" id="6043385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043389">if</span>&nbsp;<span class="ident" id="6043392">obj</span>&nbsp;<span class="op" id="6043396">:=</span>&nbsp;<span class="ident" id="6043399"><a href="/go/parser/parser.go.html#6043346">s</a></span><span class="op" id="6043400">.</span><span class="ident" id="6043401">Lookup</span><span class="op" id="6043407">(</span><span class="ident" id="6043408"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043413">.</span><span class="ident" id="6043414">Name</span><span class="op" id="6043418">)</span><span class="op" id="6043419">;</span>&nbsp;<span class="ident" id="6043421"><a href="/go/parser/parser.go.html#6043392">obj</a></span>&nbsp;<span class="op" id="6043425">!=</span>&nbsp;<span class="ident" id="6043428">nil</span>&nbsp;<span class="op" id="6043432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043437"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043442">.</span><span class="ident" id="6043443">Obj</span>&nbsp;<span class="op" id="6043447">=</span>&nbsp;<span class="ident" id="6043449"><a href="/go/parser/parser.go.html#6043392">obj</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043456">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043471">//&nbsp;all&nbsp;local&nbsp;scopes&nbsp;are&nbsp;known,&nbsp;so&nbsp;any&nbsp;unresolved&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043532">//&nbsp;must&nbsp;be&nbsp;found&nbsp;either&nbsp;in&nbsp;the&nbsp;file&nbsp;scope,&nbsp;package&nbsp;scope</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043590">//&nbsp;(perhaps&nbsp;in&nbsp;another&nbsp;file),&nbsp;or&nbsp;universe&nbsp;scope&nbsp;---&nbsp;collect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043651">//&nbsp;them&nbsp;so&nbsp;that&nbsp;they&nbsp;can&nbsp;be&nbsp;resolved&nbsp;later</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043695">if</span>&nbsp;<span class="ident" id="6043698"><a href="/go/parser/parser.go.html#6043049">collectUnresolved</a></span>&nbsp;<span class="op" id="6043716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043720"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043725">.</span><span class="ident" id="6043726">Obj</span>&nbsp;<span class="op" id="6043730">=</span>&nbsp;<span class="ident" id="6043732"><a href="/go/parser/parser.go.html#6042740">unresolved</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043745"><a href="/go/parser/parser.go.html#6043015">p</a></span><span class="op" id="6043746">.</span><span class="ident" id="6043747">unresolved</span>&nbsp;<span class="op" id="6043758">=</span>&nbsp;<span class="builtinfunc" id="6043760">append</span><span class="op" id="6043766">(</span><span class="ident" id="6043767"><a href="/go/parser/parser.go.html#6043015">p</a></span><span class="op" id="6043768">.</span><span class="ident" id="6043769">unresolved</span><span class="op" id="6043779">,</span>&nbsp;<span class="ident" id="6043781"><a href="/go/parser/parser.go.html#6043144">ident</a></span><span class="op" id="6043786">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043789">}</span><br>
<span class="lineno"></span><span class="op" id="6043791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6043794">func</span>&nbsp;<span class="op" id="6043799">(</span><span class="ident" id="6043800">p</span>&nbsp;<span class="op" id="6043802">*</span><span class="ident" id="6043803"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6043809">)</span>&nbsp;<span class="ident" id="6043811">resolve</span><span class="op" id="6043818">(</span><span class="ident" id="6043819">x</span>&nbsp;<span class="ident" id="6043821"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6043824">.</span><span class="ident" id="6043825">Expr</span><span class="op" id="6043829">)</span>&nbsp;<span class="op" id="6043831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043834"><a href="/go/parser/parser.go.html#6043800">p</a></span><span class="op" id="6043835">.</span><span class="ident" id="6043836">tryResolve</span><span class="op" id="6043846">(</span><span class="ident" id="6043847"><a href="/go/parser/parser.go.html#6043819">x</a></span><span class="op" id="6043848">,</span>&nbsp;<span class="ident" id="6043850">true</span><span class="op" id="6043854">)</span><br>
<span class="lineno">200</span><span class="op" id="6043856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6043859">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6043939">//&nbsp;Parsing&nbsp;support</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="6043959">func</span>&nbsp;<span class="op" id="6043964">(</span><span class="ident" id="6043965">p</span>&nbsp;<span class="op" id="6043967">*</span><span class="ident" id="6043968"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6043974">)</span>&nbsp;<span class="ident" id="6043976">printTrace</span><span class="op" id="6043986">(</span><span class="ident" id="6043987">a</span>&nbsp;<span class="op" id="6043989">...</span><span class="keyword" id="6043992">interface</span><span class="op" id="6044001">{</span><span class="op" id="6044002">}</span><span class="op" id="6044003">)</span>&nbsp;<span class="op" id="6044005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044008">const</span>&nbsp;<span class="ident" id="6044014">dots</span>&nbsp;<span class="op" id="6044019">=</span>&nbsp;<span class="string" id="6044021">&#34;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044089">const</span>&nbsp;<span class="ident" id="6044095">n</span>&nbsp;<span class="op" id="6044097">=</span>&nbsp;<span class="builtinfunc" id="6044099">len</span><span class="op" id="6044102">(</span><span class="ident" id="6044103"><a href="/go/parser/parser.go.html#6044014">dots</a></span><span class="op" id="6044107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044110">pos</span>&nbsp;<span class="op" id="6044114">:=</span>&nbsp;<span class="ident" id="6044117"><a href="/go/parser/parser.go.html#6043965">p</a></span><span class="op" id="6044118">.</span><span class="ident" id="6044119">file</span><span class="op" id="6044123">.</span><span class="ident" id="6044124">Position</span><span class="op" id="6044132">(</span><span class="ident" id="6044133"><a href="/go/parser/parser.go.html#6043965">p</a></span><span class="op" id="6044134">.</span><span class="ident" id="6044135">pos</span><span class="op" id="6044138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044141"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6044144">.</span><span class="ident" id="6044145">Printf</span><span class="op" id="6044151">(</span><span class="string" id="6044152">&#34;%5d:%3d:&nbsp;&#34;</span><span class="op" id="6044163">,</span>&nbsp;<span class="ident" id="6044165"><a href="/go/parser/parser.go.html#6044110">pos</a></span><span class="op" id="6044168">.</span><span class="ident" id="6044169">Line</span><span class="op" id="6044173">,</span>&nbsp;<span class="ident" id="6044175"><a href="/go/parser/parser.go.html#6044110">pos</a></span><span class="op" id="6044178">.</span><span class="ident" id="6044179">Column</span><span class="op" id="6044185">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044188">i</span>&nbsp;<span class="op" id="6044190">:=</span>&nbsp;<span class="num" id="6044193">2</span>&nbsp;<span class="op" id="6044195">*</span>&nbsp;<span class="ident" id="6044197"><a href="/go/parser/parser.go.html#6043965">p</a></span><span class="op" id="6044198">.</span><span class="ident" id="6044199">indent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044207">for</span>&nbsp;<span class="ident" id="6044211"><a href="/go/parser/parser.go.html#6044188">i</a></span>&nbsp;<span class="op" id="6044213">&gt;</span>&nbsp;<span class="ident" id="6044215"><a href="/go/parser/parser.go.html#6044095">n</a></span>&nbsp;<span class="op" id="6044217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044221"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6044224">.</span><span class="ident" id="6044225">Print</span><span class="op" id="6044230">(</span><span class="ident" id="6044231"><a href="/go/parser/parser.go.html#6044014">dots</a></span><span class="op" id="6044235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044239"><a href="/go/parser/parser.go.html#6044188">i</a></span>&nbsp;<span class="op" id="6044241">-=</span>&nbsp;<span class="ident" id="6044244"><a href="/go/parser/parser.go.html#6044095">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044247">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044250">//&nbsp;i&nbsp;&lt;=&nbsp;n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044261"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6044264">.</span><span class="ident" id="6044265">Print</span><span class="op" id="6044270">(</span><span class="ident" id="6044271"><a href="/go/parser/parser.go.html#6044014">dots</a></span><span class="op" id="6044275">[</span><span class="num" id="6044276">0</span><span class="op" id="6044277">:</span><span class="ident" id="6044278"><a href="/go/parser/parser.go.html#6044188">i</a></span><span class="op" id="6044279">]</span><span class="op" id="6044280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044283"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6044286">.</span><span class="ident" id="6044287">Println</span><span class="op" id="6044294">(</span><span class="ident" id="6044295"><a href="/go/parser/parser.go.html#6043987">a</a></span><span class="op" id="6044296">...</span><span class="op" id="6044299">)</span><br>
<span class="lineno"></span><span class="op" id="6044301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="6044304">func</span>&nbsp;<span class="ident" id="6044309">trace</span><span class="op" id="6044314">(</span><span class="ident" id="6044315">p</span>&nbsp;<span class="op" id="6044317">*</span><span class="ident" id="6044318"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6044324">,</span>&nbsp;<span class="ident" id="6044326">msg</span>&nbsp;<span class="builtintype" id="6044330">string</span><span class="op" id="6044336">)</span>&nbsp;<span class="op" id="6044338">*</span><span class="ident" id="6044339"><a href="/go/parser/parser.go.html#6038167">parser</a></span>&nbsp;<span class="op" id="6044346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044349"><a href="/go/parser/parser.go.html#6044315">p</a></span><span class="op" id="6044350">.</span><span class="ident" id="6044351">printTrace</span><span class="op" id="6044361">(</span><span class="ident" id="6044362"><a href="/go/parser/parser.go.html#6044326">msg</a></span><span class="op" id="6044365">,</span>&nbsp;<span class="string" id="6044367">&#34;(&#34;</span><span class="op" id="6044370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044373"><a href="/go/parser/parser.go.html#6044315">p</a></span><span class="op" id="6044374">.</span><span class="ident" id="6044375">indent</span><span class="op" id="6044381">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044385">return</span>&nbsp;<span class="ident" id="6044392"><a href="/go/parser/parser.go.html#6044315">p</a></span><br>
<span class="lineno"></span><span class="op" id="6044394">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6044397">//&nbsp;Usage&nbsp;pattern:&nbsp;defer&nbsp;un(trace(p,&nbsp;&#34;...&#34;))</span><br>
<span class="lineno"></span><span class="keyword" id="6044441">func</span>&nbsp;<span class="ident" id="6044446">un</span><span class="op" id="6044448">(</span><span class="ident" id="6044449">p</span>&nbsp;<span class="op" id="6044451">*</span><span class="ident" id="6044452"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6044458">)</span>&nbsp;<span class="op" id="6044460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044463"><a href="/go/parser/parser.go.html#6044449">p</a></span><span class="op" id="6044464">.</span><span class="ident" id="6044465">indent</span><span class="op" id="6044471">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044475"><a href="/go/parser/parser.go.html#6044449">p</a></span><span class="op" id="6044476">.</span><span class="ident" id="6044477">printTrace</span><span class="op" id="6044487">(</span><span class="string" id="6044488">&#34;)&#34;</span><span class="op" id="6044491">)</span><br>
<span class="lineno">230</span><span class="op" id="6044493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6044496">//&nbsp;Advance&nbsp;to&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="6044526">func</span>&nbsp;<span class="op" id="6044531">(</span><span class="ident" id="6044532">p</span>&nbsp;<span class="op" id="6044534">*</span><span class="ident" id="6044535"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6044541">)</span>&nbsp;<span class="ident" id="6044543">next0</span><span class="op" id="6044548">(</span><span class="op" id="6044549">)</span>&nbsp;<span class="op" id="6044551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044554">//&nbsp;Because&nbsp;of&nbsp;one-token&nbsp;look-ahead,&nbsp;print&nbsp;the&nbsp;previous&nbsp;token</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044616">//&nbsp;when&nbsp;tracing&nbsp;as&nbsp;it&nbsp;provides&nbsp;a&nbsp;more&nbsp;readable&nbsp;output.&nbsp;The</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044676">//&nbsp;very&nbsp;first&nbsp;token&nbsp;(!p.pos.IsValid())&nbsp;is&nbsp;not&nbsp;initialized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044735">//&nbsp;(it&nbsp;is&nbsp;token.ILLEGAL),&nbsp;so&nbsp;don&#39;t&nbsp;print&nbsp;it&nbsp;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044782">if</span>&nbsp;<span class="ident" id="6044785"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044786">.</span><span class="ident" id="6044787">trace</span>&nbsp;<span class="op" id="6044793">&amp;&amp;</span>&nbsp;<span class="ident" id="6044796"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044797">.</span><span class="ident" id="6044798">pos</span><span class="op" id="6044801">.</span><span class="ident" id="6044802">IsValid</span><span class="op" id="6044809">(</span><span class="op" id="6044810">)</span>&nbsp;<span class="op" id="6044812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044816">s</span>&nbsp;<span class="op" id="6044818">:=</span>&nbsp;<span class="ident" id="6044821"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044822">.</span><span class="ident" id="6044823">tok</span><span class="op" id="6044826">.</span><span class="ident" id="6044827">String</span><span class="op" id="6044833">(</span><span class="op" id="6044834">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044838">switch</span>&nbsp;<span class="op" id="6044845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044849">case</span>&nbsp;<span class="ident" id="6044854"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044855">.</span><span class="ident" id="6044856">tok</span><span class="op" id="6044859">.</span><span class="ident" id="6044860">IsLiteral</span><span class="op" id="6044869">(</span><span class="op" id="6044870">)</span><span class="op" id="6044871">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044876"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044877">.</span><span class="ident" id="6044878">printTrace</span><span class="op" id="6044888">(</span><span class="ident" id="6044889"><a href="/go/parser/parser.go.html#6044816">s</a></span><span class="op" id="6044890">,</span>&nbsp;<span class="ident" id="6044892"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044893">.</span><span class="ident" id="6044894">lit</span><span class="op" id="6044897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044901">case</span>&nbsp;<span class="ident" id="6044906"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044907">.</span><span class="ident" id="6044908">tok</span><span class="op" id="6044911">.</span><span class="ident" id="6044912">IsOperator</span><span class="op" id="6044922">(</span><span class="op" id="6044923">)</span><span class="op" id="6044924">,</span>&nbsp;<span class="ident" id="6044926"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044927">.</span><span class="ident" id="6044928">tok</span><span class="op" id="6044931">.</span><span class="ident" id="6044932">IsKeyword</span><span class="op" id="6044941">(</span><span class="op" id="6044942">)</span><span class="op" id="6044943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044948"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044949">.</span><span class="ident" id="6044950">printTrace</span><span class="op" id="6044960">(</span><span class="string" id="6044961">&#34;\&#34;&#34;</span>&nbsp;<span class="op" id="6044966">+</span>&nbsp;<span class="ident" id="6044968"><a href="/go/parser/parser.go.html#6044816">s</a></span>&nbsp;<span class="op" id="6044970">+</span>&nbsp;<span class="string" id="6044972">&#34;\&#34;&#34;</span><span class="op" id="6044976">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044980">default</span><span class="op" id="6044987">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044992"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6044993">.</span><span class="ident" id="6044994">printTrace</span><span class="op" id="6045004">(</span><span class="ident" id="6045005"><a href="/go/parser/parser.go.html#6044816">s</a></span><span class="op" id="6045006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045017"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6045018">.</span><span class="ident" id="6045019">pos</span><span class="op" id="6045022">,</span>&nbsp;<span class="ident" id="6045024"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6045025">.</span><span class="ident" id="6045026">tok</span><span class="op" id="6045029">,</span>&nbsp;<span class="ident" id="6045031"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6045032">.</span><span class="ident" id="6045033">lit</span>&nbsp;<span class="op" id="6045037">=</span>&nbsp;<span class="ident" id="6045039"><a href="/go/parser/parser.go.html#6044532">p</a></span><span class="op" id="6045040">.</span><span class="ident" id="6045041">scanner</span><span class="op" id="6045048">.</span><span class="ident" id="6045049">Scan</span><span class="op" id="6045053">(</span><span class="op" id="6045054">)</span><br>
<span class="lineno"></span><span class="op" id="6045056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6045059">//&nbsp;Consume&nbsp;a&nbsp;comment&nbsp;and&nbsp;return&nbsp;it&nbsp;and&nbsp;the&nbsp;line&nbsp;on&nbsp;which&nbsp;it&nbsp;ends.</span><br>
<span class="lineno"></span><span class="keyword" id="6045125">func</span>&nbsp;<span class="op" id="6045130">(</span><span class="ident" id="6045131">p</span>&nbsp;<span class="op" id="6045133">*</span><span class="ident" id="6045134"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6045140">)</span>&nbsp;<span class="ident" id="6045142">consumeComment</span><span class="op" id="6045156">(</span><span class="op" id="6045157">)</span>&nbsp;<span class="op" id="6045159">(</span><span class="ident" id="6045160">comment</span>&nbsp;<span class="op" id="6045168">*</span><span class="ident" id="6045169"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6045172">.</span><span class="ident" id="6045173">Comment</span><span class="op" id="6045180">,</span>&nbsp;<span class="ident" id="6045182">endline</span>&nbsp;<span class="builtintype" id="6045190">int</span><span class="op" id="6045193">)</span>&nbsp;<span class="op" id="6045195">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6045198">//&nbsp;/*-style&nbsp;comments&nbsp;may&nbsp;end&nbsp;on&nbsp;a&nbsp;different&nbsp;line&nbsp;than&nbsp;where&nbsp;they&nbsp;start.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6045271">//&nbsp;Scan&nbsp;the&nbsp;comment&nbsp;for&nbsp;&#39;\n&#39;&nbsp;chars&nbsp;and&nbsp;adjust&nbsp;endline&nbsp;accordingly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045339"><a href="/go/parser/parser.go.html#6045182">endline</a></span>&nbsp;<span class="op" id="6045347">=</span>&nbsp;<span class="ident" id="6045349"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045350">.</span><span class="ident" id="6045351">file</span><span class="op" id="6045355">.</span><span class="ident" id="6045356">Line</span><span class="op" id="6045360">(</span><span class="ident" id="6045361"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045362">.</span><span class="ident" id="6045363">pos</span><span class="op" id="6045366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045369">if</span>&nbsp;<span class="ident" id="6045372"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045373">.</span><span class="ident" id="6045374">lit</span><span class="op" id="6045377">[</span><span class="num" id="6045378">1</span><span class="op" id="6045379">]</span>&nbsp;<span class="op" id="6045381">==</span>&nbsp;<span class="string" id="6045384">&#39;*&#39;</span>&nbsp;<span class="op" id="6045388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6045392">//&nbsp;don&#39;t&nbsp;use&nbsp;range&nbsp;here&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;decode&nbsp;Unicode&nbsp;code&nbsp;points</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045458">for</span>&nbsp;<span class="ident" id="6045462">i</span>&nbsp;<span class="op" id="6045464">:=</span>&nbsp;<span class="num" id="6045467">0</span><span class="op" id="6045468">;</span>&nbsp;<span class="ident" id="6045470"><a href="/go/parser/parser.go.html#6045462">i</a></span>&nbsp;<span class="op" id="6045472">&lt;</span>&nbsp;<span class="builtinfunc" id="6045474">len</span><span class="op" id="6045477">(</span><span class="ident" id="6045478"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045479">.</span><span class="ident" id="6045480">lit</span><span class="op" id="6045483">)</span><span class="op" id="6045484">;</span>&nbsp;<span class="ident" id="6045486"><a href="/go/parser/parser.go.html#6045462">i</a></span><span class="op" id="6045487">++</span>&nbsp;<span class="op" id="6045490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045495">if</span>&nbsp;<span class="ident" id="6045498"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045499">.</span><span class="ident" id="6045500">lit</span><span class="op" id="6045503">[</span><span class="ident" id="6045504"><a href="/go/parser/parser.go.html#6045462">i</a></span><span class="op" id="6045505">]</span>&nbsp;<span class="op" id="6045507">==</span>&nbsp;<span class="string" id="6045510">&#39;\n&#39;</span>&nbsp;<span class="op" id="6045515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045521"><a href="/go/parser/parser.go.html#6045182">endline</a></span><span class="op" id="6045528">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045538">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045545"><a href="/go/parser/parser.go.html#6045160">comment</a></span>&nbsp;<span class="op" id="6045553">=</span>&nbsp;<span class="op" id="6045555">&amp;</span><span class="ident" id="6045556"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6045559">.</span><span class="ident" id="6045560">Comment</span><span class="op" id="6045567">{</span><span class="ident" id="6045568">Slash</span><span class="op" id="6045573">:</span>&nbsp;<span class="ident" id="6045575"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045576">.</span><span class="ident" id="6045577">pos</span><span class="op" id="6045580">,</span>&nbsp;<span class="ident" id="6045582">Text</span><span class="op" id="6045586">:</span>&nbsp;<span class="ident" id="6045588"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045589">.</span><span class="ident" id="6045590">lit</span><span class="op" id="6045593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045596"><a href="/go/parser/parser.go.html#6045131">p</a></span><span class="op" id="6045597">.</span><span class="ident" id="6045598">next0</span><span class="op" id="6045603">(</span><span class="op" id="6045604">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045608">return</span><br>
<span class="lineno"></span><span class="op" id="6045615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6045618">//&nbsp;Consume&nbsp;a&nbsp;group&nbsp;of&nbsp;adjacent&nbsp;comments,&nbsp;add&nbsp;it&nbsp;to&nbsp;the&nbsp;parser&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6045682">//&nbsp;comments&nbsp;list,&nbsp;and&nbsp;return&nbsp;it&nbsp;together&nbsp;with&nbsp;the&nbsp;line&nbsp;at&nbsp;which</span><br>
<span class="lineno">275</span><span class="comment" id="6045746">//&nbsp;the&nbsp;last&nbsp;comment&nbsp;in&nbsp;the&nbsp;group&nbsp;ends.&nbsp;A&nbsp;non-comment&nbsp;token&nbsp;or&nbsp;n</span><br>
<span class="lineno"></span><span class="comment" id="6045810">//&nbsp;empty&nbsp;lines&nbsp;terminate&nbsp;a&nbsp;comment&nbsp;group.</span><br>
<span class="lineno"></span><span class="comment" id="6045852">//</span><br>
<span class="lineno"></span><span class="keyword" id="6045855">func</span>&nbsp;<span class="op" id="6045860">(</span><span class="ident" id="6045861">p</span>&nbsp;<span class="op" id="6045863">*</span><span class="ident" id="6045864"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6045870">)</span>&nbsp;<span class="ident" id="6045872">consumeCommentGroup</span><span class="op" id="6045891">(</span><span class="ident" id="6045892">n</span>&nbsp;<span class="builtintype" id="6045894">int</span><span class="op" id="6045897">)</span>&nbsp;<span class="op" id="6045899">(</span><span class="ident" id="6045900">comments</span>&nbsp;<span class="op" id="6045909">*</span><span class="ident" id="6045910"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6045913">.</span><span class="ident" id="6045914">CommentGroup</span><span class="op" id="6045926">,</span>&nbsp;<span class="ident" id="6045928">endline</span>&nbsp;<span class="builtintype" id="6045936">int</span><span class="op" id="6045939">)</span>&nbsp;<span class="op" id="6045941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045944">var</span>&nbsp;<span class="ident" id="6045948">list</span>&nbsp;<span class="op" id="6045953">[</span><span class="op" id="6045954">]</span><span class="op" id="6045955">*</span><span class="ident" id="6045956"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6045959">.</span><span class="ident" id="6045960">Comment</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045969"><a href="/go/parser/parser.go.html#6045928">endline</a></span>&nbsp;<span class="op" id="6045977">=</span>&nbsp;<span class="ident" id="6045979"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6045980">.</span><span class="ident" id="6045981">file</span><span class="op" id="6045985">.</span><span class="ident" id="6045986">Line</span><span class="op" id="6045990">(</span><span class="ident" id="6045991"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6045992">.</span><span class="ident" id="6045993">pos</span><span class="op" id="6045996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045999">for</span>&nbsp;<span class="ident" id="6046003"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046004">.</span><span class="ident" id="6046005">tok</span>&nbsp;<span class="op" id="6046009">==</span>&nbsp;<span class="ident" id="6046012"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6046017">.</span><span class="ident" id="6046018">COMMENT</span>&nbsp;<span class="op" id="6046026">&amp;&amp;</span>&nbsp;<span class="ident" id="6046029"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046030">.</span><span class="ident" id="6046031">file</span><span class="op" id="6046035">.</span><span class="ident" id="6046036">Line</span><span class="op" id="6046040">(</span><span class="ident" id="6046041"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046042">.</span><span class="ident" id="6046043">pos</span><span class="op" id="6046046">)</span>&nbsp;<span class="op" id="6046048">&lt;=</span>&nbsp;<span class="ident" id="6046051"><a href="/go/parser/parser.go.html#6045928">endline</a></span><span class="op" id="6046058">+</span><span class="ident" id="6046059"><a href="/go/parser/parser.go.html#6045892">n</a></span>&nbsp;<span class="op" id="6046061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046065">var</span>&nbsp;<span class="ident" id="6046069">comment</span>&nbsp;<span class="op" id="6046077">*</span><span class="ident" id="6046078"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6046081">.</span><span class="ident" id="6046082">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046092"><a href="/go/parser/parser.go.html#6046069">comment</a></span><span class="op" id="6046099">,</span>&nbsp;<span class="ident" id="6046101"><a href="/go/parser/parser.go.html#6045928">endline</a></span>&nbsp;<span class="op" id="6046109">=</span>&nbsp;<span class="ident" id="6046111"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046112">.</span><span class="ident" id="6046113">consumeComment</span><span class="op" id="6046127">(</span><span class="op" id="6046128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046132"><a href="/go/parser/parser.go.html#6045948">list</a></span>&nbsp;<span class="op" id="6046137">=</span>&nbsp;<span class="builtinfunc" id="6046139">append</span><span class="op" id="6046145">(</span><span class="ident" id="6046146"><a href="/go/parser/parser.go.html#6045948">list</a></span><span class="op" id="6046150">,</span>&nbsp;<span class="ident" id="6046152"><a href="/go/parser/parser.go.html#6046069">comment</a></span><span class="op" id="6046159">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6046162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046166">//&nbsp;add&nbsp;comment&nbsp;group&nbsp;to&nbsp;the&nbsp;comments&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046209"><a href="/go/parser/parser.go.html#6045900">comments</a></span>&nbsp;<span class="op" id="6046218">=</span>&nbsp;<span class="op" id="6046220">&amp;</span><span class="ident" id="6046221"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6046224">.</span><span class="ident" id="6046225">CommentGroup</span><span class="op" id="6046237">{</span><span class="ident" id="6046238">List</span><span class="op" id="6046242">:</span>&nbsp;<span class="ident" id="6046244"><a href="/go/parser/parser.go.html#6045948">list</a></span><span class="op" id="6046248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046251"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046252">.</span><span class="ident" id="6046253">comments</span>&nbsp;<span class="op" id="6046262">=</span>&nbsp;<span class="builtinfunc" id="6046264">append</span><span class="op" id="6046270">(</span><span class="ident" id="6046271"><a href="/go/parser/parser.go.html#6045861">p</a></span><span class="op" id="6046272">.</span><span class="ident" id="6046273">comments</span><span class="op" id="6046281">,</span>&nbsp;<span class="ident" id="6046283"><a href="/go/parser/parser.go.html#6045900">comments</a></span><span class="op" id="6046291">)</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046295">return</span><br>
<span class="lineno"></span><span class="op" id="6046302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6046305">//&nbsp;Advance&nbsp;to&nbsp;the&nbsp;next&nbsp;non-comment&nbsp;token.&nbsp;In&nbsp;the&nbsp;process,&nbsp;collect</span><br>
<span class="lineno">295</span><span class="comment" id="6046371">//&nbsp;any&nbsp;comment&nbsp;groups&nbsp;encountered,&nbsp;and&nbsp;remember&nbsp;the&nbsp;last&nbsp;lead&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6046437">//&nbsp;and&nbsp;line&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6046459">//</span><br>
<span class="lineno"></span><span class="comment" id="6046462">//&nbsp;A&nbsp;lead&nbsp;comment&nbsp;is&nbsp;a&nbsp;comment&nbsp;group&nbsp;that&nbsp;starts&nbsp;and&nbsp;ends&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6046525">//&nbsp;line&nbsp;without&nbsp;any&nbsp;other&nbsp;tokens&nbsp;and&nbsp;that&nbsp;is&nbsp;followed&nbsp;by&nbsp;a&nbsp;non-comment</span><br>
<span class="lineno">300</span><span class="comment" id="6046596">//&nbsp;token&nbsp;on&nbsp;the&nbsp;line&nbsp;immediately&nbsp;after&nbsp;the&nbsp;comment&nbsp;group.</span><br>
<span class="lineno"></span><span class="comment" id="6046654">//</span><br>
<span class="lineno"></span><span class="comment" id="6046657">//&nbsp;A&nbsp;line&nbsp;comment&nbsp;is&nbsp;a&nbsp;comment&nbsp;group&nbsp;that&nbsp;follows&nbsp;a&nbsp;non-comment</span><br>
<span class="lineno"></span><span class="comment" id="6046721">//&nbsp;token&nbsp;on&nbsp;the&nbsp;same&nbsp;line,&nbsp;and&nbsp;that&nbsp;has&nbsp;no&nbsp;tokens&nbsp;after&nbsp;it&nbsp;on&nbsp;the&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="6046792">//&nbsp;where&nbsp;it&nbsp;ends.</span><br>
<span class="lineno">305</span><span class="comment" id="6046810">//</span><br>
<span class="lineno"></span><span class="comment" id="6046813">//&nbsp;Lead&nbsp;and&nbsp;line&nbsp;comments&nbsp;may&nbsp;be&nbsp;considered&nbsp;documentation&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6046879">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;AST.</span><br>
<span class="lineno"></span><span class="comment" id="6046901">//</span><br>
<span class="lineno"></span><span class="keyword" id="6046904">func</span>&nbsp;<span class="op" id="6046909">(</span><span class="ident" id="6046910">p</span>&nbsp;<span class="op" id="6046912">*</span><span class="ident" id="6046913"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6046919">)</span>&nbsp;<span class="ident" id="6046921">next</span><span class="op" id="6046925">(</span><span class="op" id="6046926">)</span>&nbsp;<span class="op" id="6046928">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046931"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6046932">.</span><span class="ident" id="6046933">leadComment</span>&nbsp;<span class="op" id="6046945">=</span>&nbsp;<span class="ident" id="6046947">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046952"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6046953">.</span><span class="ident" id="6046954">lineComment</span>&nbsp;<span class="op" id="6046966">=</span>&nbsp;<span class="ident" id="6046968">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046973">prev</span>&nbsp;<span class="op" id="6046978">:=</span>&nbsp;<span class="ident" id="6046981"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6046982">.</span><span class="ident" id="6046983">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046988"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6046989">.</span><span class="ident" id="6046990">next0</span><span class="op" id="6046995">(</span><span class="op" id="6046996">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047000">if</span>&nbsp;<span class="ident" id="6047003"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047004">.</span><span class="ident" id="6047005">tok</span>&nbsp;<span class="op" id="6047009">==</span>&nbsp;<span class="ident" id="6047012"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6047017">.</span><span class="ident" id="6047018">COMMENT</span>&nbsp;<span class="op" id="6047026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047030">var</span>&nbsp;<span class="ident" id="6047034">comment</span>&nbsp;<span class="op" id="6047042">*</span><span class="ident" id="6047043"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6047046">.</span><span class="ident" id="6047047">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047062">var</span>&nbsp;<span class="ident" id="6047066">endline</span>&nbsp;<span class="builtintype" id="6047074">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047081">if</span>&nbsp;<span class="ident" id="6047084"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047085">.</span><span class="ident" id="6047086">file</span><span class="op" id="6047090">.</span><span class="ident" id="6047091">Line</span><span class="op" id="6047095">(</span><span class="ident" id="6047096"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047097">.</span><span class="ident" id="6047098">pos</span><span class="op" id="6047101">)</span>&nbsp;<span class="op" id="6047103">==</span>&nbsp;<span class="ident" id="6047106"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047107">.</span><span class="ident" id="6047108">file</span><span class="op" id="6047112">.</span><span class="ident" id="6047113">Line</span><span class="op" id="6047117">(</span><span class="ident" id="6047118"><a href="/go/parser/parser.go.html#6046973">prev</a></span><span class="op" id="6047122">)</span>&nbsp;<span class="op" id="6047124">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047129">//&nbsp;The&nbsp;comment&nbsp;is&nbsp;on&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;previous&nbsp;token;&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047189">//&nbsp;cannot&nbsp;be&nbsp;a&nbsp;lead&nbsp;comment&nbsp;but&nbsp;may&nbsp;be&nbsp;a&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047247"><a href="/go/parser/parser.go.html#6047034">comment</a></span><span class="op" id="6047254">,</span>&nbsp;<span class="ident" id="6047256"><a href="/go/parser/parser.go.html#6047066">endline</a></span>&nbsp;<span class="op" id="6047264">=</span>&nbsp;<span class="ident" id="6047266"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047267">.</span><span class="ident" id="6047268">consumeCommentGroup</span><span class="op" id="6047287">(</span><span class="num" id="6047288">0</span><span class="op" id="6047289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047294">if</span>&nbsp;<span class="ident" id="6047297"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047298">.</span><span class="ident" id="6047299">file</span><span class="op" id="6047303">.</span><span class="ident" id="6047304">Line</span><span class="op" id="6047308">(</span><span class="ident" id="6047309"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047310">.</span><span class="ident" id="6047311">pos</span><span class="op" id="6047314">)</span>&nbsp;<span class="op" id="6047316">!=</span>&nbsp;<span class="ident" id="6047319"><a href="/go/parser/parser.go.html#6047066">endline</a></span>&nbsp;<span class="op" id="6047327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047333">//&nbsp;The&nbsp;next&nbsp;token&nbsp;is&nbsp;on&nbsp;a&nbsp;different&nbsp;line,&nbsp;thus</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047384">//&nbsp;the&nbsp;last&nbsp;comment&nbsp;group&nbsp;is&nbsp;a&nbsp;line&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047433"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047434">.</span><span class="ident" id="6047435">lineComment</span>&nbsp;<span class="op" id="6047447">=</span>&nbsp;<span class="ident" id="6047449"><a href="/go/parser/parser.go.html#6047034">comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047469">//&nbsp;consume&nbsp;successor&nbsp;comments,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047509"><a href="/go/parser/parser.go.html#6047066">endline</a></span>&nbsp;<span class="op" id="6047517">=</span>&nbsp;<span class="op" id="6047519">-</span><span class="num" id="6047520">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047524">for</span>&nbsp;<span class="ident" id="6047528"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047529">.</span><span class="ident" id="6047530">tok</span>&nbsp;<span class="op" id="6047534">==</span>&nbsp;<span class="ident" id="6047537"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6047542">.</span><span class="ident" id="6047543">COMMENT</span>&nbsp;<span class="op" id="6047551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047556"><a href="/go/parser/parser.go.html#6047034">comment</a></span><span class="op" id="6047563">,</span>&nbsp;<span class="ident" id="6047565"><a href="/go/parser/parser.go.html#6047066">endline</a></span>&nbsp;<span class="op" id="6047573">=</span>&nbsp;<span class="ident" id="6047575"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047576">.</span><span class="ident" id="6047577">consumeCommentGroup</span><span class="op" id="6047596">(</span><span class="num" id="6047597">1</span><span class="op" id="6047598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047602">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047607">if</span>&nbsp;<span class="ident" id="6047610"><a href="/go/parser/parser.go.html#6047066">endline</a></span><span class="op" id="6047617">+</span><span class="num" id="6047618">1</span>&nbsp;<span class="op" id="6047620">==</span>&nbsp;<span class="ident" id="6047623"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047624">.</span><span class="ident" id="6047625">file</span><span class="op" id="6047629">.</span><span class="ident" id="6047630">Line</span><span class="op" id="6047634">(</span><span class="ident" id="6047635"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047636">.</span><span class="ident" id="6047637">pos</span><span class="op" id="6047640">)</span>&nbsp;<span class="op" id="6047642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047647">//&nbsp;The&nbsp;next&nbsp;token&nbsp;is&nbsp;following&nbsp;on&nbsp;the&nbsp;line&nbsp;immediately&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047715">//&nbsp;comment&nbsp;group,&nbsp;thus&nbsp;the&nbsp;last&nbsp;comment&nbsp;group&nbsp;is&nbsp;a&nbsp;lead&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047783"><a href="/go/parser/parser.go.html#6046910">p</a></span><span class="op" id="6047784">.</span><span class="ident" id="6047785">leadComment</span>&nbsp;<span class="op" id="6047797">=</span>&nbsp;<span class="ident" id="6047799"><a href="/go/parser/parser.go.html#6047034">comment</a></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047812">}</span><br>
<span class="lineno"></span><span class="op" id="6047814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6047817">//&nbsp;A&nbsp;bailout&nbsp;panic&nbsp;is&nbsp;raised&nbsp;to&nbsp;indicate&nbsp;early&nbsp;termination.</span><br>
<span class="lineno">345</span><span class="keyword" id="6047877">type</span>&nbsp;<span class="ident" id="6047882">bailout</span>&nbsp;<span class="keyword" id="6047890">struct</span><span class="op" id="6047896">{</span><span class="op" id="6047897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6047900">func</span>&nbsp;<span class="op" id="6047905">(</span><span class="ident" id="6047906">p</span>&nbsp;<span class="op" id="6047908">*</span><span class="ident" id="6047909"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6047915">)</span>&nbsp;<span class="builtintype" id="6047917">error</span><span class="op" id="6047922">(</span><span class="ident" id="6047923">pos</span>&nbsp;<span class="ident" id="6047927"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6047932">.</span><span class="ident" id="6047933">Pos</span><span class="op" id="6047936">,</span>&nbsp;<span class="ident" id="6047938">msg</span>&nbsp;<span class="builtintype" id="6047942">string</span><span class="op" id="6047948">)</span>&nbsp;<span class="op" id="6047950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047953">epos</span>&nbsp;<span class="op" id="6047958">:=</span>&nbsp;<span class="ident" id="6047961"><a href="/go/parser/parser.go.html#6047906">p</a></span><span class="op" id="6047962">.</span><span class="ident" id="6047963">file</span><span class="op" id="6047967">.</span><span class="ident" id="6047968">Position</span><span class="op" id="6047976">(</span><span class="ident" id="6047977"><a href="/go/parser/parser.go.html#6047923">pos</a></span><span class="op" id="6047980">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047984">//&nbsp;If&nbsp;AllErrors&nbsp;is&nbsp;not&nbsp;set,&nbsp;discard&nbsp;errors&nbsp;reported&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048054">//&nbsp;as&nbsp;the&nbsp;last&nbsp;recorded&nbsp;error&nbsp;and&nbsp;stop&nbsp;parsing&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;than</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048125">//&nbsp;10&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048140">if</span>&nbsp;<span class="ident" id="6048143"><a href="/go/parser/parser.go.html#6047906">p</a></span><span class="op" id="6048144">.</span><span class="ident" id="6048145">mode</span><span class="op" id="6048149">&amp;</span><span class="ident" id="6048150"><a href="/go/parser/interface.go.html#6033362">AllErrors</a></span>&nbsp;<span class="op" id="6048160">==</span>&nbsp;<span class="num" id="6048163">0</span>&nbsp;<span class="op" id="6048165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048169">n</span>&nbsp;<span class="op" id="6048171">:=</span>&nbsp;<span class="builtinfunc" id="6048174">len</span><span class="op" id="6048177">(</span><span class="ident" id="6048178"><a href="/go/parser/parser.go.html#6047906">p</a></span><span class="op" id="6048179">.</span><span class="ident" id="6048180">errors</span><span class="op" id="6048186">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048190">if</span>&nbsp;<span class="ident" id="6048193"><a href="/go/parser/parser.go.html#6048169">n</a></span>&nbsp;<span class="op" id="6048195">&gt;</span>&nbsp;<span class="num" id="6048197">0</span>&nbsp;<span class="op" id="6048199">&amp;&amp;</span>&nbsp;<span class="ident" id="6048202"><a href="/go/parser/parser.go.html#6047906">p</a></span><span class="op" id="6048203">.</span><span class="ident" id="6048204">errors</span><span class="op" id="6048210">[</span><span class="ident" id="6048211"><a href="/go/parser/parser.go.html#6048169">n</a></span><span class="op" id="6048212">-</span><span class="num" id="6048213">1</span><span class="op" id="6048214">]</span><span class="op" id="6048215">.</span><span class="ident" id="6048216">Pos</span><span class="op" id="6048219">.</span><span class="ident" id="6048220">Line</span>&nbsp;<span class="op" id="6048225">==</span>&nbsp;<span class="ident" id="6048228"><a href="/go/parser/parser.go.html#6047953">epos</a></span><span class="op" id="6048232">.</span><span class="ident" id="6048233">Line</span>&nbsp;<span class="op" id="6048238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048243">return</span>&nbsp;<span class="comment" id="6048250">//&nbsp;discard&nbsp;-&nbsp;likely&nbsp;a&nbsp;spurious&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048293">if</span>&nbsp;<span class="ident" id="6048296"><a href="/go/parser/parser.go.html#6048169">n</a></span>&nbsp;<span class="op" id="6048298">&gt;</span>&nbsp;<span class="num" id="6048300">10</span>&nbsp;<span class="op" id="6048303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6048308">panic</span><span class="op" id="6048313">(</span><span class="ident" id="6048314"><a href="/go/parser/parser.go.html#6047882">bailout</a></span><span class="op" id="6048321">{</span><span class="op" id="6048322">}</span><span class="op" id="6048323">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048334"><a href="/go/parser/parser.go.html#6047906">p</a></span><span class="op" id="6048335">.</span><span class="ident" id="6048336">errors</span><span class="op" id="6048342">.</span><span class="ident" id="6048343">Add</span><span class="op" id="6048346">(</span><span class="ident" id="6048347"><a href="/go/parser/parser.go.html#6047953">epos</a></span><span class="op" id="6048351">,</span>&nbsp;<span class="ident" id="6048353"><a href="/go/parser/parser.go.html#6047938">msg</a></span><span class="op" id="6048356">)</span><br>
<span class="lineno"></span><span class="op" id="6048358">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="6048361">func</span>&nbsp;<span class="op" id="6048366">(</span><span class="ident" id="6048367">p</span>&nbsp;<span class="op" id="6048369">*</span><span class="ident" id="6048370"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6048376">)</span>&nbsp;<span class="ident" id="6048378">errorExpected</span><span class="op" id="6048391">(</span><span class="ident" id="6048392">pos</span>&nbsp;<span class="ident" id="6048396"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6048401">.</span><span class="ident" id="6048402">Pos</span><span class="op" id="6048405">,</span>&nbsp;<span class="ident" id="6048407">msg</span>&nbsp;<span class="builtintype" id="6048411">string</span><span class="op" id="6048417">)</span>&nbsp;<span class="op" id="6048419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048422"><a href="/go/parser/parser.go.html#6048407">msg</a></span>&nbsp;<span class="op" id="6048426">=</span>&nbsp;<span class="string" id="6048428">&#34;expected&nbsp;&#34;</span>&nbsp;<span class="op" id="6048440">+</span>&nbsp;<span class="ident" id="6048442"><a href="/go/parser/parser.go.html#6048407">msg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048447">if</span>&nbsp;<span class="ident" id="6048450"><a href="/go/parser/parser.go.html#6048392">pos</a></span>&nbsp;<span class="op" id="6048454">==</span>&nbsp;<span class="ident" id="6048457"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048458">.</span><span class="ident" id="6048459">pos</span>&nbsp;<span class="op" id="6048463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048467">//&nbsp;the&nbsp;error&nbsp;happened&nbsp;at&nbsp;the&nbsp;current&nbsp;position;</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048516">//&nbsp;make&nbsp;the&nbsp;error&nbsp;message&nbsp;more&nbsp;specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048558">if</span>&nbsp;<span class="ident" id="6048561"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048562">.</span><span class="ident" id="6048563">tok</span>&nbsp;<span class="op" id="6048567">==</span>&nbsp;<span class="ident" id="6048570"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6048575">.</span><span class="ident" id="6048576">SEMICOLON</span>&nbsp;<span class="op" id="6048586">&amp;&amp;</span>&nbsp;<span class="ident" id="6048589"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048590">.</span><span class="ident" id="6048591">lit</span>&nbsp;<span class="op" id="6048595">==</span>&nbsp;<span class="string" id="6048598">&#34;\n&#34;</span>&nbsp;<span class="op" id="6048603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048608"><a href="/go/parser/parser.go.html#6048407">msg</a></span>&nbsp;<span class="op" id="6048612">+=</span>&nbsp;<span class="string" id="6048615">&#34;,&nbsp;found&nbsp;newline&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048635">}</span>&nbsp;<span class="keyword" id="6048637">else</span>&nbsp;<span class="op" id="6048642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048647"><a href="/go/parser/parser.go.html#6048407">msg</a></span>&nbsp;<span class="op" id="6048651">+=</span>&nbsp;<span class="string" id="6048654">&#34;,&nbsp;found&nbsp;&#39;&#34;</span>&nbsp;<span class="op" id="6048666">+</span>&nbsp;<span class="ident" id="6048668"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048669">.</span><span class="ident" id="6048670">tok</span><span class="op" id="6048673">.</span><span class="ident" id="6048674">String</span><span class="op" id="6048680">(</span><span class="op" id="6048681">)</span>&nbsp;<span class="op" id="6048683">+</span>&nbsp;<span class="string" id="6048685">&#34;&#39;&#34;</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048692">if</span>&nbsp;<span class="ident" id="6048695"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048696">.</span><span class="ident" id="6048697">tok</span><span class="op" id="6048700">.</span><span class="ident" id="6048701">IsLiteral</span><span class="op" id="6048710">(</span><span class="op" id="6048711">)</span>&nbsp;<span class="op" id="6048713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048719"><a href="/go/parser/parser.go.html#6048407">msg</a></span>&nbsp;<span class="op" id="6048723">+=</span>&nbsp;<span class="string" id="6048726">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="6048730">+</span>&nbsp;<span class="ident" id="6048732"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048733">.</span><span class="ident" id="6048734">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048748">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048751"><a href="/go/parser/parser.go.html#6048367">p</a></span><span class="op" id="6048752">.</span><span class="builtintype" id="6048753">error</span><span class="op" id="6048758">(</span><span class="ident" id="6048759"><a href="/go/parser/parser.go.html#6048392">pos</a></span><span class="op" id="6048762">,</span>&nbsp;<span class="ident" id="6048764"><a href="/go/parser/parser.go.html#6048407">msg</a></span><span class="op" id="6048767">)</span><br>
<span class="lineno"></span><span class="op" id="6048769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6048772">func</span>&nbsp;<span class="op" id="6048777">(</span><span class="ident" id="6048778">p</span>&nbsp;<span class="op" id="6048780">*</span><span class="ident" id="6048781"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6048787">)</span>&nbsp;<span class="ident" id="6048789">expect</span><span class="op" id="6048795">(</span><span class="ident" id="6048796">tok</span>&nbsp;<span class="ident" id="6048800"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6048805">.</span><span class="ident" id="6048806">Token</span><span class="op" id="6048811">)</span>&nbsp;<span class="ident" id="6048813"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6048818">.</span><span class="ident" id="6048819">Pos</span>&nbsp;<span class="op" id="6048823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048826">pos</span>&nbsp;<span class="op" id="6048830">:=</span>&nbsp;<span class="ident" id="6048833"><a href="/go/parser/parser.go.html#6048778">p</a></span><span class="op" id="6048834">.</span><span class="ident" id="6048835">pos</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048840">if</span>&nbsp;<span class="ident" id="6048843"><a href="/go/parser/parser.go.html#6048778">p</a></span><span class="op" id="6048844">.</span><span class="ident" id="6048845">tok</span>&nbsp;<span class="op" id="6048849">!=</span>&nbsp;<span class="ident" id="6048852"><a href="/go/parser/parser.go.html#6048796">tok</a></span>&nbsp;<span class="op" id="6048856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048860"><a href="/go/parser/parser.go.html#6048778">p</a></span><span class="op" id="6048861">.</span><span class="ident" id="6048862">errorExpected</span><span class="op" id="6048875">(</span><span class="ident" id="6048876"><a href="/go/parser/parser.go.html#6048826">pos</a></span><span class="op" id="6048879">,</span>&nbsp;<span class="string" id="6048881">&#34;&#39;&#34;</span><span class="op" id="6048884">+</span><span class="ident" id="6048885"><a href="/go/parser/parser.go.html#6048796">tok</a></span><span class="op" id="6048888">.</span><span class="ident" id="6048889">String</span><span class="op" id="6048895">(</span><span class="op" id="6048896">)</span><span class="op" id="6048897">+</span><span class="string" id="6048898">&#34;&#39;&#34;</span><span class="op" id="6048901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048907"><a href="/go/parser/parser.go.html#6048778">p</a></span><span class="op" id="6048908">.</span><span class="ident" id="6048909">next</span><span class="op" id="6048913">(</span><span class="op" id="6048914">)</span>&nbsp;<span class="comment" id="6048916">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048934">return</span>&nbsp;<span class="ident" id="6048941"><a href="/go/parser/parser.go.html#6048826">pos</a></span><br>
<span class="lineno">390</span><span class="op" id="6048945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6048948">//&nbsp;expectClosing&nbsp;is&nbsp;like&nbsp;expect&nbsp;but&nbsp;provides&nbsp;a&nbsp;better&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span><span class="comment" id="6049016">//&nbsp;for&nbsp;the&nbsp;common&nbsp;case&nbsp;of&nbsp;a&nbsp;missing&nbsp;comma&nbsp;before&nbsp;a&nbsp;newline.</span><br>
<span class="lineno"></span><span class="comment" id="6049076">//</span><br>
<span class="lineno">395</span><span class="keyword" id="6049079">func</span>&nbsp;<span class="op" id="6049084">(</span><span class="ident" id="6049085">p</span>&nbsp;<span class="op" id="6049087">*</span><span class="ident" id="6049088"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6049094">)</span>&nbsp;<span class="ident" id="6049096">expectClosing</span><span class="op" id="6049109">(</span><span class="ident" id="6049110">tok</span>&nbsp;<span class="ident" id="6049114"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049119">.</span><span class="ident" id="6049120">Token</span><span class="op" id="6049125">,</span>&nbsp;<span class="ident" id="6049127">context</span>&nbsp;<span class="builtintype" id="6049135">string</span><span class="op" id="6049141">)</span>&nbsp;<span class="ident" id="6049143"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049148">.</span><span class="ident" id="6049149">Pos</span>&nbsp;<span class="op" id="6049153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049156">if</span>&nbsp;<span class="ident" id="6049159"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049160">.</span><span class="ident" id="6049161">tok</span>&nbsp;<span class="op" id="6049165">!=</span>&nbsp;<span class="ident" id="6049168"><a href="/go/parser/parser.go.html#6049110">tok</a></span>&nbsp;<span class="op" id="6049172">&amp;&amp;</span>&nbsp;<span class="ident" id="6049175"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049176">.</span><span class="ident" id="6049177">tok</span>&nbsp;<span class="op" id="6049181">==</span>&nbsp;<span class="ident" id="6049184"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049189">.</span><span class="ident" id="6049190">SEMICOLON</span>&nbsp;<span class="op" id="6049200">&amp;&amp;</span>&nbsp;<span class="ident" id="6049203"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049204">.</span><span class="ident" id="6049205">lit</span>&nbsp;<span class="op" id="6049209">==</span>&nbsp;<span class="string" id="6049212">&#34;\n&#34;</span>&nbsp;<span class="op" id="6049217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049221"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049222">.</span><span class="builtintype" id="6049223">error</span><span class="op" id="6049228">(</span><span class="ident" id="6049229"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049230">.</span><span class="ident" id="6049231">pos</span><span class="op" id="6049234">,</span>&nbsp;<span class="string" id="6049236">&#34;missing&nbsp;&#39;,&#39;&nbsp;before&nbsp;newline&nbsp;in&nbsp;&#34;</span><span class="op" id="6049268">+</span><span class="ident" id="6049269"><a href="/go/parser/parser.go.html#6049127">context</a></span><span class="op" id="6049276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049280"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049281">.</span><span class="ident" id="6049282">next</span><span class="op" id="6049286">(</span><span class="op" id="6049287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049290">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049293">return</span>&nbsp;<span class="ident" id="6049300"><a href="/go/parser/parser.go.html#6049085">p</a></span><span class="op" id="6049301">.</span><span class="ident" id="6049302">expect</span><span class="op" id="6049308">(</span><span class="ident" id="6049309"><a href="/go/parser/parser.go.html#6049110">tok</a></span><span class="op" id="6049312">)</span><br>
<span class="lineno"></span><span class="op" id="6049314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6049317">func</span>&nbsp;<span class="op" id="6049322">(</span><span class="ident" id="6049323">p</span>&nbsp;<span class="op" id="6049325">*</span><span class="ident" id="6049326"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6049332">)</span>&nbsp;<span class="ident" id="6049334">expectSemi</span><span class="op" id="6049344">(</span><span class="op" id="6049345">)</span>&nbsp;<span class="op" id="6049347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6049350">//&nbsp;semicolon&nbsp;is&nbsp;optional&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#39;)&#39;&nbsp;or&nbsp;&#39;}&#39;</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049404">if</span>&nbsp;<span class="ident" id="6049407"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049408">.</span><span class="ident" id="6049409">tok</span>&nbsp;<span class="op" id="6049413">!=</span>&nbsp;<span class="ident" id="6049416"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049421">.</span><span class="ident" id="6049422">RPAREN</span>&nbsp;<span class="op" id="6049429">&amp;&amp;</span>&nbsp;<span class="ident" id="6049432"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049433">.</span><span class="ident" id="6049434">tok</span>&nbsp;<span class="op" id="6049438">!=</span>&nbsp;<span class="ident" id="6049441"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049446">.</span><span class="ident" id="6049447">RBRACE</span>&nbsp;<span class="op" id="6049454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049458">if</span>&nbsp;<span class="ident" id="6049461"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049462">.</span><span class="ident" id="6049463">tok</span>&nbsp;<span class="op" id="6049467">==</span>&nbsp;<span class="ident" id="6049470"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049475">.</span><span class="ident" id="6049476">SEMICOLON</span>&nbsp;<span class="op" id="6049486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049491"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049492">.</span><span class="ident" id="6049493">next</span><span class="op" id="6049497">(</span><span class="op" id="6049498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049502">}</span>&nbsp;<span class="keyword" id="6049504">else</span>&nbsp;<span class="op" id="6049509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049514"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049515">.</span><span class="ident" id="6049516">errorExpected</span><span class="op" id="6049529">(</span><span class="ident" id="6049530"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049531">.</span><span class="ident" id="6049532">pos</span><span class="op" id="6049535">,</span>&nbsp;<span class="string" id="6049537">&#34;&#39;;&#39;&#34;</span><span class="op" id="6049542">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049547"><a href="/go/parser/parser.go.html#6050033">syncStmt</a></span><span class="op" id="6049555">(</span><span class="ident" id="6049556"><a href="/go/parser/parser.go.html#6049323">p</a></span><span class="op" id="6049557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049564">}</span><br>
<span class="lineno"></span><span class="op" id="6049566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="keyword" id="6049569">func</span>&nbsp;<span class="op" id="6049574">(</span><span class="ident" id="6049575">p</span>&nbsp;<span class="op" id="6049577">*</span><span class="ident" id="6049578"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6049584">)</span>&nbsp;<span class="ident" id="6049586">atComma</span><span class="op" id="6049593">(</span><span class="ident" id="6049594">context</span>&nbsp;<span class="builtintype" id="6049602">string</span><span class="op" id="6049608">)</span>&nbsp;<span class="builtintype" id="6049610">bool</span>&nbsp;<span class="op" id="6049615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049618">if</span>&nbsp;<span class="ident" id="6049621"><a href="/go/parser/parser.go.html#6049575">p</a></span><span class="op" id="6049622">.</span><span class="ident" id="6049623">tok</span>&nbsp;<span class="op" id="6049627">==</span>&nbsp;<span class="ident" id="6049630"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049635">.</span><span class="ident" id="6049636">COMMA</span>&nbsp;<span class="op" id="6049642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049646">return</span>&nbsp;<span class="ident" id="6049653">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049662">if</span>&nbsp;<span class="ident" id="6049665"><a href="/go/parser/parser.go.html#6049575">p</a></span><span class="op" id="6049666">.</span><span class="ident" id="6049667">tok</span>&nbsp;<span class="op" id="6049671">==</span>&nbsp;<span class="ident" id="6049674"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6049679">.</span><span class="ident" id="6049680">SEMICOLON</span>&nbsp;<span class="op" id="6049690">&amp;&amp;</span>&nbsp;<span class="ident" id="6049693"><a href="/go/parser/parser.go.html#6049575">p</a></span><span class="op" id="6049694">.</span><span class="ident" id="6049695">lit</span>&nbsp;<span class="op" id="6049699">==</span>&nbsp;<span class="string" id="6049702">&#34;\n&#34;</span>&nbsp;<span class="op" id="6049707">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049711"><a href="/go/parser/parser.go.html#6049575">p</a></span><span class="op" id="6049712">.</span><span class="builtintype" id="6049713">error</span><span class="op" id="6049718">(</span><span class="ident" id="6049719"><a href="/go/parser/parser.go.html#6049575">p</a></span><span class="op" id="6049720">.</span><span class="ident" id="6049721">pos</span><span class="op" id="6049724">,</span>&nbsp;<span class="string" id="6049726">&#34;missing&nbsp;&#39;,&#39;&nbsp;before&nbsp;newline&nbsp;in&nbsp;&#34;</span><span class="op" id="6049758">+</span><span class="ident" id="6049759"><a href="/go/parser/parser.go.html#6049594">context</a></span><span class="op" id="6049766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049770">return</span>&nbsp;<span class="ident" id="6049777">true</span>&nbsp;<span class="comment" id="6049782">//&nbsp;&#34;insert&#34;&nbsp;the&nbsp;comma&nbsp;and&nbsp;continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049822">return</span>&nbsp;<span class="ident" id="6049829">false</span><br>
<span class="lineno">425</span><span class="op" id="6049835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6049838">func</span>&nbsp;<span class="ident" id="6049843">assert</span><span class="op" id="6049849">(</span><span class="ident" id="6049850">cond</span>&nbsp;<span class="builtintype" id="6049855">bool</span><span class="op" id="6049859">,</span>&nbsp;<span class="ident" id="6049861">msg</span>&nbsp;<span class="builtintype" id="6049865">string</span><span class="op" id="6049871">)</span>&nbsp;<span class="op" id="6049873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049876">if</span>&nbsp;<span class="op" id="6049879">!</span><span class="ident" id="6049880"><a href="/go/parser/parser.go.html#6049850">cond</a></span>&nbsp;<span class="op" id="6049885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6049889">panic</span><span class="op" id="6049894">(</span><span class="string" id="6049895">&#34;go/parser&nbsp;internal&nbsp;error:&nbsp;&#34;</span>&nbsp;<span class="op" id="6049924">+</span>&nbsp;<span class="ident" id="6049926"><a href="/go/parser/parser.go.html#6049861">msg</a></span><span class="op" id="6049929">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049932">}</span><br>
<span class="lineno"></span><span class="op" id="6049934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6049937">//&nbsp;syncStmt&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;statement.</span><br>
<span class="lineno"></span><span class="comment" id="6049981">//&nbsp;Used&nbsp;for&nbsp;synchronization&nbsp;after&nbsp;an&nbsp;error.</span><br>
<span class="lineno">435</span><span class="comment" id="6050025">//</span><br>
<span class="lineno"></span><span class="keyword" id="6050028">func</span>&nbsp;<span class="ident" id="6050033">syncStmt</span><span class="op" id="6050041">(</span><span class="ident" id="6050042">p</span>&nbsp;<span class="op" id="6050044">*</span><span class="ident" id="6050045"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6050051">)</span>&nbsp;<span class="op" id="6050053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050056">for</span>&nbsp;<span class="op" id="6050060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050064">switch</span>&nbsp;<span class="ident" id="6050071"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050072">.</span><span class="ident" id="6050073">tok</span>&nbsp;<span class="op" id="6050077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050081">case</span>&nbsp;<span class="ident" id="6050086"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050091">.</span><span class="ident" id="6050092">BREAK</span><span class="op" id="6050097">,</span>&nbsp;<span class="ident" id="6050099"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050104">.</span><span class="ident" id="6050105">CONST</span><span class="op" id="6050110">,</span>&nbsp;<span class="ident" id="6050112"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050117">.</span><span class="ident" id="6050118">CONTINUE</span><span class="op" id="6050126">,</span>&nbsp;<span class="ident" id="6050128"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050133">.</span><span class="ident" id="6050134">DEFER</span><span class="op" id="6050139">,</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050144"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050149">.</span><span class="ident" id="6050150">FALLTHROUGH</span><span class="op" id="6050161">,</span>&nbsp;<span class="ident" id="6050163"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050168">.</span><span class="ident" id="6050169">FOR</span><span class="op" id="6050172">,</span>&nbsp;<span class="ident" id="6050174"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050179">.</span><span class="ident" id="6050180">GO</span><span class="op" id="6050182">,</span>&nbsp;<span class="ident" id="6050184"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050189">.</span><span class="ident" id="6050190">GOTO</span><span class="op" id="6050194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050199"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050204">.</span><span class="ident" id="6050205">IF</span><span class="op" id="6050207">,</span>&nbsp;<span class="ident" id="6050209"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050214">.</span><span class="ident" id="6050215">RETURN</span><span class="op" id="6050221">,</span>&nbsp;<span class="ident" id="6050223"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050228">.</span><span class="ident" id="6050229">SELECT</span><span class="op" id="6050235">,</span>&nbsp;<span class="ident" id="6050237"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050242">.</span><span class="ident" id="6050243">SWITCH</span><span class="op" id="6050249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050254"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050259">.</span><span class="ident" id="6050260">TYPE</span><span class="op" id="6050264">,</span>&nbsp;<span class="ident" id="6050266"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6050271">.</span><span class="ident" id="6050272">VAR</span><span class="op" id="6050275">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050280">//&nbsp;Return&nbsp;only&nbsp;if&nbsp;parser&nbsp;made&nbsp;some&nbsp;progress&nbsp;since&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050338">//&nbsp;sync&nbsp;or&nbsp;if&nbsp;it&nbsp;has&nbsp;not&nbsp;reached&nbsp;10&nbsp;sync&nbsp;calls&nbsp;without</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050396">//&nbsp;progress.&nbsp;Otherwise&nbsp;consume&nbsp;at&nbsp;least&nbsp;one&nbsp;token&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050452">//&nbsp;avoid&nbsp;an&nbsp;endless&nbsp;parser&nbsp;loop&nbsp;(it&nbsp;is&nbsp;possible&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050508">//&nbsp;both&nbsp;parseOperand&nbsp;and&nbsp;parseStmt&nbsp;call&nbsp;syncStmt&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050564">//&nbsp;correctly&nbsp;do&nbsp;not&nbsp;advance,&nbsp;thus&nbsp;the&nbsp;need&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050618">//&nbsp;invocation&nbsp;limit&nbsp;p.syncCnt).</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050653">if</span>&nbsp;<span class="ident" id="6050656"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050657">.</span><span class="ident" id="6050658">pos</span>&nbsp;<span class="op" id="6050662">==</span>&nbsp;<span class="ident" id="6050665"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050666">.</span><span class="ident" id="6050667">syncPos</span>&nbsp;<span class="op" id="6050675">&amp;&amp;</span>&nbsp;<span class="ident" id="6050678"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050679">.</span><span class="ident" id="6050680">syncCnt</span>&nbsp;<span class="op" id="6050688">&lt;</span>&nbsp;<span class="num" id="6050690">10</span>&nbsp;<span class="op" id="6050693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050699"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050700">.</span><span class="ident" id="6050701">syncCnt</span><span class="op" id="6050708">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050715">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050730">if</span>&nbsp;<span class="ident" id="6050733"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050734">.</span><span class="ident" id="6050735">pos</span>&nbsp;<span class="op" id="6050739">&gt;</span>&nbsp;<span class="ident" id="6050741"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050742">.</span><span class="ident" id="6050743">syncPos</span>&nbsp;<span class="op" id="6050751">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050757"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050758">.</span><span class="ident" id="6050759">syncPos</span>&nbsp;<span class="op" id="6050767">=</span>&nbsp;<span class="ident" id="6050769"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050770">.</span><span class="ident" id="6050771">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050779"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6050780">.</span><span class="ident" id="6050781">syncCnt</span>&nbsp;<span class="op" id="6050789">=</span>&nbsp;<span class="num" id="6050791">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050797">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050812">//&nbsp;Reaching&nbsp;here&nbsp;indicates&nbsp;a&nbsp;parser&nbsp;bug,&nbsp;likely&nbsp;an</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050866">//&nbsp;incorrect&nbsp;token&nbsp;list&nbsp;in&nbsp;this&nbsp;function,&nbsp;but&nbsp;it&nbsp;only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050923">//&nbsp;leads&nbsp;to&nbsp;skipping&nbsp;of&nbsp;possibly&nbsp;correct&nbsp;code&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050977">//&nbsp;previous&nbsp;error&nbsp;is&nbsp;present,&nbsp;and&nbsp;thus&nbsp;is&nbsp;preferred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6051032">//&nbsp;over&nbsp;a&nbsp;non-terminating&nbsp;parse.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051067">case</span>&nbsp;<span class="ident" id="6051072"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6051077">.</span><span class="ident" id="6051078">EOF</span><span class="op" id="6051081">:</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051086">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051099"><a href="/go/parser/parser.go.html#6050042">p</a></span><span class="op" id="6051100">.</span><span class="ident" id="6051101">next</span><span class="op" id="6051105">(</span><span class="op" id="6051106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051109">}</span><br>
<span class="lineno"></span><span class="op" id="6051111">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="6051114">//&nbsp;syncDecl&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="6051160">//&nbsp;Used&nbsp;for&nbsp;synchronization&nbsp;after&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6051204">//</span><br>
<span class="lineno"></span><span class="keyword" id="6051207">func</span>&nbsp;<span class="ident" id="6051212">syncDecl</span><span class="op" id="6051220">(</span><span class="ident" id="6051221">p</span>&nbsp;<span class="op" id="6051223">*</span><span class="ident" id="6051224"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6051230">)</span>&nbsp;<span class="op" id="6051232">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051235">for</span>&nbsp;<span class="op" id="6051239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051243">switch</span>&nbsp;<span class="ident" id="6051250"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051251">.</span><span class="ident" id="6051252">tok</span>&nbsp;<span class="op" id="6051256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051260">case</span>&nbsp;<span class="ident" id="6051265"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6051270">.</span><span class="ident" id="6051271">CONST</span><span class="op" id="6051276">,</span>&nbsp;<span class="ident" id="6051278"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6051283">.</span><span class="ident" id="6051284">TYPE</span><span class="op" id="6051288">,</span>&nbsp;<span class="ident" id="6051290"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6051295">.</span><span class="ident" id="6051296">VAR</span><span class="op" id="6051299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6051304">//&nbsp;see&nbsp;comments&nbsp;in&nbsp;syncStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051335">if</span>&nbsp;<span class="ident" id="6051338"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051339">.</span><span class="ident" id="6051340">pos</span>&nbsp;<span class="op" id="6051344">==</span>&nbsp;<span class="ident" id="6051347"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051348">.</span><span class="ident" id="6051349">syncPos</span>&nbsp;<span class="op" id="6051357">&amp;&amp;</span>&nbsp;<span class="ident" id="6051360"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051361">.</span><span class="ident" id="6051362">syncCnt</span>&nbsp;<span class="op" id="6051370">&lt;</span>&nbsp;<span class="num" id="6051372">10</span>&nbsp;<span class="op" id="6051375">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051381"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051382">.</span><span class="ident" id="6051383">syncCnt</span><span class="op" id="6051390">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051397">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051412">if</span>&nbsp;<span class="ident" id="6051415"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051416">.</span><span class="ident" id="6051417">pos</span>&nbsp;<span class="op" id="6051421">&gt;</span>&nbsp;<span class="ident" id="6051423"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051424">.</span><span class="ident" id="6051425">syncPos</span>&nbsp;<span class="op" id="6051433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051439"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051440">.</span><span class="ident" id="6051441">syncPos</span>&nbsp;<span class="op" id="6051449">=</span>&nbsp;<span class="ident" id="6051451"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051452">.</span><span class="ident" id="6051453">pos</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051461"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051462">.</span><span class="ident" id="6051463">syncCnt</span>&nbsp;<span class="op" id="6051471">=</span>&nbsp;<span class="num" id="6051473">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051479">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051493">case</span>&nbsp;<span class="ident" id="6051498"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6051503">.</span><span class="ident" id="6051504">EOF</span><span class="op" id="6051507">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051512">return</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051525"><a href="/go/parser/parser.go.html#6051221">p</a></span><span class="op" id="6051526">.</span><span class="ident" id="6051527">next</span><span class="op" id="6051531">(</span><span class="op" id="6051532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051535">}</span><br>
<span class="lineno"></span><span class="op" id="6051537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="comment" id="6051540">//&nbsp;safePos&nbsp;returns&nbsp;a&nbsp;valid&nbsp;file&nbsp;position&nbsp;for&nbsp;a&nbsp;given&nbsp;position:&nbsp;If&nbsp;pos</span><br>
<span class="lineno"></span><span class="comment" id="6051610">//&nbsp;is&nbsp;valid&nbsp;to&nbsp;begin&nbsp;with,&nbsp;safePos&nbsp;returns&nbsp;pos.&nbsp;If&nbsp;pos&nbsp;is&nbsp;out-of-range,</span><br>
<span class="lineno"></span><span class="comment" id="6051682">//&nbsp;safePos&nbsp;returns&nbsp;the&nbsp;EOF&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="6051719">//</span><br>
<span class="lineno"></span><span class="comment" id="6051722">//&nbsp;This&nbsp;is&nbsp;hack&nbsp;to&nbsp;work&nbsp;around&nbsp;&#34;artificial&#34;&nbsp;end&nbsp;positions&nbsp;in&nbsp;the&nbsp;AST&nbsp;which</span><br>
<span class="lineno">500</span><span class="comment" id="6051797">//&nbsp;are&nbsp;computed&nbsp;by&nbsp;adding&nbsp;1&nbsp;to&nbsp;(presumably&nbsp;valid)&nbsp;token&nbsp;positions.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6051871">//&nbsp;token&nbsp;positions&nbsp;are&nbsp;invalid&nbsp;due&nbsp;to&nbsp;parse&nbsp;errors,&nbsp;the&nbsp;resulting&nbsp;end&nbsp;position</span><br>
<span class="lineno"></span><span class="comment" id="6051950">//&nbsp;may&nbsp;be&nbsp;past&nbsp;the&nbsp;file&#39;s&nbsp;EOF&nbsp;position,&nbsp;which&nbsp;would&nbsp;lead&nbsp;to&nbsp;panics&nbsp;if&nbsp;used</span><br>
<span class="lineno"></span><span class="comment" id="6052025">//&nbsp;later&nbsp;on.</span><br>
<span class="lineno"></span><span class="comment" id="6052038">//</span><br>
<span class="lineno">505</span><span class="keyword" id="6052041">func</span>&nbsp;<span class="op" id="6052046">(</span><span class="ident" id="6052047">p</span>&nbsp;<span class="op" id="6052049">*</span><span class="ident" id="6052050"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6052056">)</span>&nbsp;<span class="ident" id="6052058">safePos</span><span class="op" id="6052065">(</span><span class="ident" id="6052066">pos</span>&nbsp;<span class="ident" id="6052070"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052075">.</span><span class="ident" id="6052076">Pos</span><span class="op" id="6052079">)</span>&nbsp;<span class="op" id="6052081">(</span><span class="ident" id="6052082">res</span>&nbsp;<span class="ident" id="6052086"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052091">.</span><span class="ident" id="6052092">Pos</span><span class="op" id="6052095">)</span>&nbsp;<span class="op" id="6052097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052100">defer</span>&nbsp;<span class="keyword" id="6052106">func</span><span class="op" id="6052110">(</span><span class="op" id="6052111">)</span>&nbsp;<span class="op" id="6052113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052117">if</span>&nbsp;<span class="builtinfunc" id="6052120">recover</span><span class="op" id="6052127">(</span><span class="op" id="6052128">)</span>&nbsp;<span class="op" id="6052130">!=</span>&nbsp;<span class="ident" id="6052133">nil</span>&nbsp;<span class="op" id="6052137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052142"><a href="/go/parser/parser.go.html#6052082">res</a></span>&nbsp;<span class="op" id="6052146">=</span>&nbsp;<span class="ident" id="6052148"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052153">.</span><span class="ident" id="6052154">Pos</span><span class="op" id="6052157">(</span><span class="ident" id="6052158"><a href="/go/parser/parser.go.html#6052047">p</a></span><span class="op" id="6052159">.</span><span class="ident" id="6052160">file</span><span class="op" id="6052164">.</span><span class="ident" id="6052165">Base</span><span class="op" id="6052169">(</span><span class="op" id="6052170">)</span>&nbsp;<span class="op" id="6052172">+</span>&nbsp;<span class="ident" id="6052174"><a href="/go/parser/parser.go.html#6052047">p</a></span><span class="op" id="6052175">.</span><span class="ident" id="6052176">file</span><span class="op" id="6052180">.</span><span class="ident" id="6052181">Size</span><span class="op" id="6052185">(</span><span class="op" id="6052186">)</span><span class="op" id="6052187">)</span>&nbsp;<span class="comment" id="6052189">//&nbsp;EOF&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052207">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052210">}</span><span class="op" id="6052211">(</span><span class="op" id="6052212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052215">_</span>&nbsp;<span class="op" id="6052217">=</span>&nbsp;<span class="ident" id="6052219"><a href="/go/parser/parser.go.html#6052047">p</a></span><span class="op" id="6052220">.</span><span class="ident" id="6052221">file</span><span class="op" id="6052225">.</span><span class="ident" id="6052226">Offset</span><span class="op" id="6052232">(</span><span class="ident" id="6052233"><a href="/go/parser/parser.go.html#6052066">pos</a></span><span class="op" id="6052236">)</span>&nbsp;<span class="comment" id="6052238">//&nbsp;trigger&nbsp;a&nbsp;panic&nbsp;if&nbsp;position&nbsp;is&nbsp;out-of-range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052286">return</span>&nbsp;<span class="ident" id="6052293"><a href="/go/parser/parser.go.html#6052066">pos</a></span><br>
<span class="lineno"></span><span class="op" id="6052297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="6052300">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6052380">//&nbsp;Identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6052396">func</span>&nbsp;<span class="op" id="6052401">(</span><span class="ident" id="6052402">p</span>&nbsp;<span class="op" id="6052404">*</span><span class="ident" id="6052405"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6052411">)</span>&nbsp;<span class="ident" id="6052413">parseIdent</span><span class="op" id="6052423">(</span><span class="op" id="6052424">)</span>&nbsp;<span class="op" id="6052426">*</span><span class="ident" id="6052427"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6052430">.</span><span class="ident" id="6052431">Ident</span>&nbsp;<span class="op" id="6052437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052440">pos</span>&nbsp;<span class="op" id="6052444">:=</span>&nbsp;<span class="ident" id="6052447"><a href="/go/parser/parser.go.html#6052402">p</a></span><span class="op" id="6052448">.</span><span class="ident" id="6052449">pos</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052454">name</span>&nbsp;<span class="op" id="6052459">:=</span>&nbsp;<span class="string" id="6052462">&#34;_&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052467">if</span>&nbsp;<span class="ident" id="6052470"><a href="/go/parser/parser.go.html#6052402">p</a></span><span class="op" id="6052471">.</span><span class="ident" id="6052472">tok</span>&nbsp;<span class="op" id="6052476">==</span>&nbsp;<span class="ident" id="6052479"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052484">.</span><span class="ident" id="6052485">IDENT</span>&nbsp;<span class="op" id="6052491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052495"><a href="/go/parser/parser.go.html#6052454">name</a></span>&nbsp;<span class="op" id="6052500">=</span>&nbsp;<span class="ident" id="6052502"><a href="/go/parser/parser.go.html#6052402">p</a></span><span class="op" id="6052503">.</span><span class="ident" id="6052504">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052510"><a href="/go/parser/parser.go.html#6052402">p</a></span><span class="op" id="6052511">.</span><span class="ident" id="6052512">next</span><span class="op" id="6052516">(</span><span class="op" id="6052517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052520">}</span>&nbsp;<span class="keyword" id="6052522">else</span>&nbsp;<span class="op" id="6052527">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052531"><a href="/go/parser/parser.go.html#6052402">p</a></span><span class="op" id="6052532">.</span><span class="ident" id="6052533">expect</span><span class="op" id="6052539">(</span><span class="ident" id="6052540"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052545">.</span><span class="ident" id="6052546">IDENT</span><span class="op" id="6052551">)</span>&nbsp;<span class="comment" id="6052553">//&nbsp;use&nbsp;expect()&nbsp;error&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052588">return</span>&nbsp;<span class="op" id="6052595">&amp;</span><span class="ident" id="6052596"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6052599">.</span><span class="ident" id="6052600">Ident</span><span class="op" id="6052605">{</span><span class="ident" id="6052606">NamePos</span><span class="op" id="6052613">:</span>&nbsp;<span class="ident" id="6052615"><a href="/go/parser/parser.go.html#6052440">pos</a></span><span class="op" id="6052618">,</span>&nbsp;<span class="ident" id="6052620">Name</span><span class="op" id="6052624">:</span>&nbsp;<span class="ident" id="6052626"><a href="/go/parser/parser.go.html#6052454">name</a></span><span class="op" id="6052630">}</span><br>
<span class="lineno"></span><span class="op" id="6052632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span><span class="keyword" id="6052635">func</span>&nbsp;<span class="op" id="6052640">(</span><span class="ident" id="6052641">p</span>&nbsp;<span class="op" id="6052643">*</span><span class="ident" id="6052644"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6052650">)</span>&nbsp;<span class="ident" id="6052652">parseIdentList</span><span class="op" id="6052666">(</span><span class="op" id="6052667">)</span>&nbsp;<span class="op" id="6052669">(</span><span class="ident" id="6052670">list</span>&nbsp;<span class="op" id="6052675">[</span><span class="op" id="6052676">]</span><span class="op" id="6052677">*</span><span class="ident" id="6052678"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6052681">.</span><span class="ident" id="6052682">Ident</span><span class="op" id="6052687">)</span>&nbsp;<span class="op" id="6052689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052692">if</span>&nbsp;<span class="ident" id="6052695"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052696">.</span><span class="ident" id="6052697">trace</span>&nbsp;<span class="op" id="6052703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052707">defer</span>&nbsp;<span class="ident" id="6052713"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6052715">(</span><span class="ident" id="6052716"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6052721">(</span><span class="ident" id="6052722"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052723">,</span>&nbsp;<span class="string" id="6052725">&#34;IdentList&#34;</span><span class="op" id="6052736">)</span><span class="op" id="6052737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052744"><a href="/go/parser/parser.go.html#6052670">list</a></span>&nbsp;<span class="op" id="6052749">=</span>&nbsp;<span class="builtinfunc" id="6052751">append</span><span class="op" id="6052757">(</span><span class="ident" id="6052758"><a href="/go/parser/parser.go.html#6052670">list</a></span><span class="op" id="6052762">,</span>&nbsp;<span class="ident" id="6052764"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052765">.</span><span class="ident" id="6052766">parseIdent</span><span class="op" id="6052776">(</span><span class="op" id="6052777">)</span><span class="op" id="6052778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052781">for</span>&nbsp;<span class="ident" id="6052785"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052786">.</span><span class="ident" id="6052787">tok</span>&nbsp;<span class="op" id="6052791">==</span>&nbsp;<span class="ident" id="6052794"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6052799">.</span><span class="ident" id="6052800">COMMA</span>&nbsp;<span class="op" id="6052806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052810"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052811">.</span><span class="ident" id="6052812">next</span><span class="op" id="6052816">(</span><span class="op" id="6052817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052821"><a href="/go/parser/parser.go.html#6052670">list</a></span>&nbsp;<span class="op" id="6052826">=</span>&nbsp;<span class="builtinfunc" id="6052828">append</span><span class="op" id="6052834">(</span><span class="ident" id="6052835"><a href="/go/parser/parser.go.html#6052670">list</a></span><span class="op" id="6052839">,</span>&nbsp;<span class="ident" id="6052841"><a href="/go/parser/parser.go.html#6052641">p</a></span><span class="op" id="6052842">.</span><span class="ident" id="6052843">parseIdent</span><span class="op" id="6052853">(</span><span class="op" id="6052854">)</span><span class="op" id="6052855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052858">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052862">return</span><br>
<span class="lineno"></span><span class="op" id="6052869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6052872">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">545</span><span class="comment" id="6052952">//&nbsp;Common&nbsp;productions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6052975">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set,&nbsp;result&nbsp;list&nbsp;elements&nbsp;which&nbsp;are&nbsp;identifiers&nbsp;are&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6053054">func</span>&nbsp;<span class="op" id="6053059">(</span><span class="ident" id="6053060">p</span>&nbsp;<span class="op" id="6053062">*</span><span class="ident" id="6053063"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6053069">)</span>&nbsp;<span class="ident" id="6053071">parseExprList</span><span class="op" id="6053084">(</span><span class="ident" id="6053085">lhs</span>&nbsp;<span class="builtintype" id="6053089">bool</span><span class="op" id="6053093">)</span>&nbsp;<span class="op" id="6053095">(</span><span class="ident" id="6053096">list</span>&nbsp;<span class="op" id="6053101">[</span><span class="op" id="6053102">]</span><span class="ident" id="6053103"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6053106">.</span><span class="ident" id="6053107">Expr</span><span class="op" id="6053111">)</span>&nbsp;<span class="op" id="6053113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053116">if</span>&nbsp;<span class="ident" id="6053119"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053120">.</span><span class="ident" id="6053121">trace</span>&nbsp;<span class="op" id="6053127">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053131">defer</span>&nbsp;<span class="ident" id="6053137"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6053139">(</span><span class="ident" id="6053140"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6053145">(</span><span class="ident" id="6053146"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053147">,</span>&nbsp;<span class="string" id="6053149">&#34;ExpressionList&#34;</span><span class="op" id="6053165">)</span><span class="op" id="6053166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053173"><a href="/go/parser/parser.go.html#6053096">list</a></span>&nbsp;<span class="op" id="6053178">=</span>&nbsp;<span class="builtinfunc" id="6053180">append</span><span class="op" id="6053186">(</span><span class="ident" id="6053187"><a href="/go/parser/parser.go.html#6053096">list</a></span><span class="op" id="6053191">,</span>&nbsp;<span class="ident" id="6053193"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053194">.</span><span class="ident" id="6053195">checkExpr</span><span class="op" id="6053204">(</span><span class="ident" id="6053205"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053206">.</span><span class="ident" id="6053207">parseExpr</span><span class="op" id="6053216">(</span><span class="ident" id="6053217"><a href="/go/parser/parser.go.html#6053085">lhs</a></span><span class="op" id="6053220">)</span><span class="op" id="6053221">)</span><span class="op" id="6053222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053225">for</span>&nbsp;<span class="ident" id="6053229"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053230">.</span><span class="ident" id="6053231">tok</span>&nbsp;<span class="op" id="6053235">==</span>&nbsp;<span class="ident" id="6053238"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6053243">.</span><span class="ident" id="6053244">COMMA</span>&nbsp;<span class="op" id="6053250">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053254"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053255">.</span><span class="ident" id="6053256">next</span><span class="op" id="6053260">(</span><span class="op" id="6053261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053265"><a href="/go/parser/parser.go.html#6053096">list</a></span>&nbsp;<span class="op" id="6053270">=</span>&nbsp;<span class="builtinfunc" id="6053272">append</span><span class="op" id="6053278">(</span><span class="ident" id="6053279"><a href="/go/parser/parser.go.html#6053096">list</a></span><span class="op" id="6053283">,</span>&nbsp;<span class="ident" id="6053285"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053286">.</span><span class="ident" id="6053287">checkExpr</span><span class="op" id="6053296">(</span><span class="ident" id="6053297"><a href="/go/parser/parser.go.html#6053060">p</a></span><span class="op" id="6053298">.</span><span class="ident" id="6053299">parseExpr</span><span class="op" id="6053308">(</span><span class="ident" id="6053309"><a href="/go/parser/parser.go.html#6053085">lhs</a></span><span class="op" id="6053312">)</span><span class="op" id="6053313">)</span><span class="op" id="6053314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053321">return</span><br>
<span class="lineno">560</span><span class="op" id="6053328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6053331">func</span>&nbsp;<span class="op" id="6053336">(</span><span class="ident" id="6053337">p</span>&nbsp;<span class="op" id="6053339">*</span><span class="ident" id="6053340"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6053346">)</span>&nbsp;<span class="ident" id="6053348">parseLhsList</span><span class="op" id="6053360">(</span><span class="op" id="6053361">)</span>&nbsp;<span class="op" id="6053363">[</span><span class="op" id="6053364">]</span><span class="ident" id="6053365"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6053368">.</span><span class="ident" id="6053369">Expr</span>&nbsp;<span class="op" id="6053374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053377">old</span>&nbsp;<span class="op" id="6053381">:=</span>&nbsp;<span class="ident" id="6053384"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6053385">.</span><span class="ident" id="6053386">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053393"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6053394">.</span><span class="ident" id="6053395">inRhs</span>&nbsp;<span class="op" id="6053401">=</span>&nbsp;<span class="ident" id="6053403">false</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053410">list</span>&nbsp;<span class="op" id="6053415">:=</span>&nbsp;<span class="ident" id="6053418"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6053419">.</span><span class="ident" id="6053420">parseExprList</span><span class="op" id="6053433">(</span><span class="ident" id="6053434">true</span><span class="op" id="6053438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053441">switch</span>&nbsp;<span class="ident" id="6053448"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6053449">.</span><span class="ident" id="6053450">tok</span>&nbsp;<span class="op" id="6053454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053457">case</span>&nbsp;<span class="ident" id="6053462"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6053467">.</span><span class="ident" id="6053468">DEFINE</span><span class="op" id="6053474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053478">//&nbsp;lhs&nbsp;of&nbsp;a&nbsp;short&nbsp;variable&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053519">//&nbsp;but&nbsp;doesn&#39;t&nbsp;enter&nbsp;scope&nbsp;until&nbsp;later:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053561">//&nbsp;caller&nbsp;must&nbsp;call&nbsp;p.shortVarDecl(p.makeIdentList(list))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053621">//&nbsp;at&nbsp;appropriate&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053646">case</span>&nbsp;<span class="ident" id="6053651"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6053656">.</span><span class="ident" id="6053657">COLON</span><span class="op" id="6053662">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053666">//&nbsp;lhs&nbsp;of&nbsp;a&nbsp;label&nbsp;declaration&nbsp;or&nbsp;a&nbsp;communication&nbsp;clause&nbsp;of&nbsp;a&nbsp;select</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053736">//&nbsp;statement&nbsp;(parseLhsList&nbsp;is&nbsp;not&nbsp;called&nbsp;when&nbsp;parsing&nbsp;the&nbsp;case&nbsp;clause</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053808">//&nbsp;of&nbsp;a&nbsp;switch&nbsp;statement):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053837">//&nbsp;-&nbsp;labels&nbsp;are&nbsp;declared&nbsp;by&nbsp;the&nbsp;caller&nbsp;of&nbsp;parseLhsList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053894">//&nbsp;-&nbsp;for&nbsp;communication&nbsp;clauses,&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;stand-alone&nbsp;identifier</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053965">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon,&nbsp;we&nbsp;have&nbsp;a&nbsp;syntax&nbsp;error;&nbsp;there&nbsp;is&nbsp;no&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6054034">//&nbsp;&nbsp;&nbsp;to&nbsp;resolve&nbsp;the&nbsp;identifier&nbsp;in&nbsp;that&nbsp;case</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054079">default</span><span class="op" id="6054086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6054090">//&nbsp;identifiers&nbsp;must&nbsp;be&nbsp;declared&nbsp;elsewhere</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054134">for</span>&nbsp;<span class="ident" id="6054138">_</span><span class="op" id="6054139">,</span>&nbsp;<span class="ident" id="6054141">x</span>&nbsp;<span class="op" id="6054143">:=</span>&nbsp;<span class="keyword" id="6054146">range</span>&nbsp;<span class="ident" id="6054152"><a href="/go/parser/parser.go.html#6053410">list</a></span>&nbsp;<span class="op" id="6054157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054162"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6054163">.</span><span class="ident" id="6054164">resolve</span><span class="op" id="6054171">(</span><span class="ident" id="6054172"><a href="/go/parser/parser.go.html#6054141">x</a></span><span class="op" id="6054173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054177">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054183"><a href="/go/parser/parser.go.html#6053337">p</a></span><span class="op" id="6054184">.</span><span class="ident" id="6054185">inRhs</span>&nbsp;<span class="op" id="6054191">=</span>&nbsp;<span class="ident" id="6054193"><a href="/go/parser/parser.go.html#6053377">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054198">return</span>&nbsp;<span class="ident" id="6054205"><a href="/go/parser/parser.go.html#6053410">list</a></span><br>
<span class="lineno"></span><span class="op" id="6054210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="keyword" id="6054213">func</span>&nbsp;<span class="op" id="6054218">(</span><span class="ident" id="6054219">p</span>&nbsp;<span class="op" id="6054221">*</span><span class="ident" id="6054222"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6054228">)</span>&nbsp;<span class="ident" id="6054230">parseRhsList</span><span class="op" id="6054242">(</span><span class="op" id="6054243">)</span>&nbsp;<span class="op" id="6054245">[</span><span class="op" id="6054246">]</span><span class="ident" id="6054247"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6054250">.</span><span class="ident" id="6054251">Expr</span>&nbsp;<span class="op" id="6054256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054259">old</span>&nbsp;<span class="op" id="6054263">:=</span>&nbsp;<span class="ident" id="6054266"><a href="/go/parser/parser.go.html#6054219">p</a></span><span class="op" id="6054267">.</span><span class="ident" id="6054268">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054275"><a href="/go/parser/parser.go.html#6054219">p</a></span><span class="op" id="6054276">.</span><span class="ident" id="6054277">inRhs</span>&nbsp;<span class="op" id="6054283">=</span>&nbsp;<span class="ident" id="6054285">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054291">list</span>&nbsp;<span class="op" id="6054296">:=</span>&nbsp;<span class="ident" id="6054299"><a href="/go/parser/parser.go.html#6054219">p</a></span><span class="op" id="6054300">.</span><span class="ident" id="6054301">parseExprList</span><span class="op" id="6054314">(</span><span class="ident" id="6054315">false</span><span class="op" id="6054320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054323"><a href="/go/parser/parser.go.html#6054219">p</a></span><span class="op" id="6054324">.</span><span class="ident" id="6054325">inRhs</span>&nbsp;<span class="op" id="6054331">=</span>&nbsp;<span class="ident" id="6054333"><a href="/go/parser/parser.go.html#6054259">old</a></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054338">return</span>&nbsp;<span class="ident" id="6054345"><a href="/go/parser/parser.go.html#6054291">list</a></span><br>
<span class="lineno"></span><span class="op" id="6054350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6054353">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6054433">//&nbsp;Types</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span><span class="keyword" id="6054443">func</span>&nbsp;<span class="op" id="6054448">(</span><span class="ident" id="6054449">p</span>&nbsp;<span class="op" id="6054451">*</span><span class="ident" id="6054452"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6054458">)</span>&nbsp;<span class="ident" id="6054460">parseType</span><span class="op" id="6054469">(</span><span class="op" id="6054470">)</span>&nbsp;<span class="ident" id="6054472"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6054475">.</span><span class="ident" id="6054476">Expr</span>&nbsp;<span class="op" id="6054481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054484">if</span>&nbsp;<span class="ident" id="6054487"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054488">.</span><span class="ident" id="6054489">trace</span>&nbsp;<span class="op" id="6054495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054499">defer</span>&nbsp;<span class="ident" id="6054505"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6054507">(</span><span class="ident" id="6054508"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6054513">(</span><span class="ident" id="6054514"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054515">,</span>&nbsp;<span class="string" id="6054517">&#34;Type&#34;</span><span class="op" id="6054523">)</span><span class="op" id="6054524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054527">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054531">typ</span>&nbsp;<span class="op" id="6054535">:=</span>&nbsp;<span class="ident" id="6054538"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054539">.</span><span class="ident" id="6054540">tryType</span><span class="op" id="6054547">(</span><span class="op" id="6054548">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054552">if</span>&nbsp;<span class="ident" id="6054555"><a href="/go/parser/parser.go.html#6054531">typ</a></span>&nbsp;<span class="op" id="6054559">==</span>&nbsp;<span class="ident" id="6054562">nil</span>&nbsp;<span class="op" id="6054566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054570">pos</span>&nbsp;<span class="op" id="6054574">:=</span>&nbsp;<span class="ident" id="6054577"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054578">.</span><span class="ident" id="6054579">pos</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054585"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054586">.</span><span class="ident" id="6054587">errorExpected</span><span class="op" id="6054600">(</span><span class="ident" id="6054601"><a href="/go/parser/parser.go.html#6054570">pos</a></span><span class="op" id="6054604">,</span>&nbsp;<span class="string" id="6054606">&#34;type&#34;</span><span class="op" id="6054612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054616"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054617">.</span><span class="ident" id="6054618">next</span><span class="op" id="6054622">(</span><span class="op" id="6054623">)</span>&nbsp;<span class="comment" id="6054625">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054644">return</span>&nbsp;<span class="op" id="6054651">&amp;</span><span class="ident" id="6054652"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6054655">.</span><span class="ident" id="6054656">BadExpr</span><span class="op" id="6054663">{</span><span class="ident" id="6054664">From</span><span class="op" id="6054668">:</span>&nbsp;<span class="ident" id="6054670"><a href="/go/parser/parser.go.html#6054570">pos</a></span><span class="op" id="6054673">,</span>&nbsp;<span class="ident" id="6054675">To</span><span class="op" id="6054677">:</span>&nbsp;<span class="ident" id="6054679"><a href="/go/parser/parser.go.html#6054449">p</a></span><span class="op" id="6054680">.</span><span class="ident" id="6054681">pos</span><span class="op" id="6054684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054691">return</span>&nbsp;<span class="ident" id="6054698"><a href="/go/parser/parser.go.html#6054531">typ</a></span><br>
<span class="lineno"></span><span class="op" id="6054702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6054705">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6054760">func</span>&nbsp;<span class="op" id="6054765">(</span><span class="ident" id="6054766">p</span>&nbsp;<span class="op" id="6054768">*</span><span class="ident" id="6054769"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6054775">)</span>&nbsp;<span class="ident" id="6054777">parseTypeName</span><span class="op" id="6054790">(</span><span class="op" id="6054791">)</span>&nbsp;<span class="ident" id="6054793"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6054796">.</span><span class="ident" id="6054797">Expr</span>&nbsp;<span class="op" id="6054802">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054805">if</span>&nbsp;<span class="ident" id="6054808"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6054809">.</span><span class="ident" id="6054810">trace</span>&nbsp;<span class="op" id="6054816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054820">defer</span>&nbsp;<span class="ident" id="6054826"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6054828">(</span><span class="ident" id="6054829"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6054834">(</span><span class="ident" id="6054835"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6054836">,</span>&nbsp;<span class="string" id="6054838">&#34;TypeName&#34;</span><span class="op" id="6054848">)</span><span class="op" id="6054849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054856">ident</span>&nbsp;<span class="op" id="6054862">:=</span>&nbsp;<span class="ident" id="6054865"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6054866">.</span><span class="ident" id="6054867">parseIdent</span><span class="op" id="6054877">(</span><span class="op" id="6054878">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6054881">//&nbsp;don&#39;t&nbsp;resolve&nbsp;ident&nbsp;yet&nbsp;-&nbsp;it&nbsp;may&nbsp;be&nbsp;a&nbsp;parameter&nbsp;or&nbsp;field&nbsp;name</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054948">if</span>&nbsp;<span class="ident" id="6054951"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6054952">.</span><span class="ident" id="6054953">tok</span>&nbsp;<span class="op" id="6054957">==</span>&nbsp;<span class="ident" id="6054960"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6054965">.</span><span class="ident" id="6054966">PERIOD</span>&nbsp;<span class="op" id="6054973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6054977">//&nbsp;ident&nbsp;is&nbsp;a&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055006"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6055007">.</span><span class="ident" id="6055008">next</span><span class="op" id="6055012">(</span><span class="op" id="6055013">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055017"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6055018">.</span><span class="ident" id="6055019">resolve</span><span class="op" id="6055026">(</span><span class="ident" id="6055027"><a href="/go/parser/parser.go.html#6054856">ident</a></span><span class="op" id="6055032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055036">sel</span>&nbsp;<span class="op" id="6055040">:=</span>&nbsp;<span class="ident" id="6055043"><a href="/go/parser/parser.go.html#6054766">p</a></span><span class="op" id="6055044">.</span><span class="ident" id="6055045">parseIdent</span><span class="op" id="6055055">(</span><span class="op" id="6055056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055060">return</span>&nbsp;<span class="op" id="6055067">&amp;</span><span class="ident" id="6055068"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055071">.</span><span class="ident" id="6055072">SelectorExpr</span><span class="op" id="6055084">{</span><span class="ident" id="6055085">X</span><span class="op" id="6055086">:</span>&nbsp;<span class="ident" id="6055088"><a href="/go/parser/parser.go.html#6054856">ident</a></span><span class="op" id="6055093">,</span>&nbsp;<span class="ident" id="6055095">Sel</span><span class="op" id="6055098">:</span>&nbsp;<span class="ident" id="6055100"><a href="/go/parser/parser.go.html#6055036">sel</a></span><span class="op" id="6055103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055110">return</span>&nbsp;<span class="ident" id="6055117"><a href="/go/parser/parser.go.html#6054856">ident</a></span><br>
<span class="lineno"></span><span class="op" id="6055123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6055126">func</span>&nbsp;<span class="op" id="6055131">(</span><span class="ident" id="6055132">p</span>&nbsp;<span class="op" id="6055134">*</span><span class="ident" id="6055135"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6055141">)</span>&nbsp;<span class="ident" id="6055143">parseArrayType</span><span class="op" id="6055157">(</span><span class="op" id="6055158">)</span>&nbsp;<span class="ident" id="6055160"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055163">.</span><span class="ident" id="6055164">Expr</span>&nbsp;<span class="op" id="6055169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055172">if</span>&nbsp;<span class="ident" id="6055175"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055176">.</span><span class="ident" id="6055177">trace</span>&nbsp;<span class="op" id="6055183">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055187">defer</span>&nbsp;<span class="ident" id="6055193"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6055195">(</span><span class="ident" id="6055196"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6055201">(</span><span class="ident" id="6055202"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055203">,</span>&nbsp;<span class="string" id="6055205">&#34;ArrayType&#34;</span><span class="op" id="6055216">)</span><span class="op" id="6055217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055220">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055224">lbrack</span>&nbsp;<span class="op" id="6055231">:=</span>&nbsp;<span class="ident" id="6055234"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055235">.</span><span class="ident" id="6055236">expect</span><span class="op" id="6055242">(</span><span class="ident" id="6055243"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6055248">.</span><span class="ident" id="6055249">LBRACK</span><span class="op" id="6055255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055258"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055259">.</span><span class="ident" id="6055260">exprLev</span><span class="op" id="6055267">++</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055271">var</span>&nbsp;<span class="builtinfunc" id="6055275">len</span>&nbsp;<span class="ident" id="6055279"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055282">.</span><span class="ident" id="6055283">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6055289">//&nbsp;always&nbsp;permit&nbsp;ellipsis&nbsp;for&nbsp;more&nbsp;fault-tolerant&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055348">if</span>&nbsp;<span class="ident" id="6055351"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055352">.</span><span class="ident" id="6055353">tok</span>&nbsp;<span class="op" id="6055357">==</span>&nbsp;<span class="ident" id="6055360"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6055365">.</span><span class="ident" id="6055366">ELLIPSIS</span>&nbsp;<span class="op" id="6055375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6055379"><a href="/go/parser/parser.go.html#6055275">len</a></span>&nbsp;<span class="op" id="6055383">=</span>&nbsp;<span class="op" id="6055385">&amp;</span><span class="ident" id="6055386"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055389">.</span><span class="ident" id="6055390">Ellipsis</span><span class="op" id="6055398">{</span><span class="ident" id="6055399">Ellipsis</span><span class="op" id="6055407">:</span>&nbsp;<span class="ident" id="6055409"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055410">.</span><span class="ident" id="6055411">pos</span><span class="op" id="6055414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055418"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055419">.</span><span class="ident" id="6055420">next</span><span class="op" id="6055424">(</span><span class="op" id="6055425">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055428">}</span>&nbsp;<span class="keyword" id="6055430">else</span>&nbsp;<span class="keyword" id="6055435">if</span>&nbsp;<span class="ident" id="6055438"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055439">.</span><span class="ident" id="6055440">tok</span>&nbsp;<span class="op" id="6055444">!=</span>&nbsp;<span class="ident" id="6055447"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6055452">.</span><span class="ident" id="6055453">RBRACK</span>&nbsp;<span class="op" id="6055460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6055464"><a href="/go/parser/parser.go.html#6055275">len</a></span>&nbsp;<span class="op" id="6055468">=</span>&nbsp;<span class="ident" id="6055470"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055471">.</span><span class="ident" id="6055472">parseRhs</span><span class="op" id="6055480">(</span><span class="op" id="6055481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055487"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055488">.</span><span class="ident" id="6055489">exprLev</span><span class="op" id="6055496">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055500"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055501">.</span><span class="ident" id="6055502">expect</span><span class="op" id="6055508">(</span><span class="ident" id="6055509"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6055514">.</span><span class="ident" id="6055515">RBRACK</span><span class="op" id="6055521">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055524">elt</span>&nbsp;<span class="op" id="6055528">:=</span>&nbsp;<span class="ident" id="6055531"><a href="/go/parser/parser.go.html#6055132">p</a></span><span class="op" id="6055532">.</span><span class="ident" id="6055533">parseType</span><span class="op" id="6055542">(</span><span class="op" id="6055543">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055547">return</span>&nbsp;<span class="op" id="6055554">&amp;</span><span class="ident" id="6055555"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055558">.</span><span class="ident" id="6055559">ArrayType</span><span class="op" id="6055568">{</span><span class="ident" id="6055569">Lbrack</span><span class="op" id="6055575">:</span>&nbsp;<span class="ident" id="6055577"><a href="/go/parser/parser.go.html#6055224">lbrack</a></span><span class="op" id="6055583">,</span>&nbsp;<span class="ident" id="6055585">Len</span><span class="op" id="6055588">:</span>&nbsp;<span class="builtinfunc" id="6055590"><a href="/go/parser/parser.go.html#6055275">len</a></span><span class="op" id="6055593">,</span>&nbsp;<span class="ident" id="6055595">Elt</span><span class="op" id="6055598">:</span>&nbsp;<span class="ident" id="6055600"><a href="/go/parser/parser.go.html#6055524">elt</a></span><span class="op" id="6055603">}</span><br>
<span class="lineno"></span><span class="op" id="6055605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">660</span><span class="keyword" id="6055608">func</span>&nbsp;<span class="op" id="6055613">(</span><span class="ident" id="6055614">p</span>&nbsp;<span class="op" id="6055616">*</span><span class="ident" id="6055617"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6055623">)</span>&nbsp;<span class="ident" id="6055625">makeIdentList</span><span class="op" id="6055638">(</span><span class="ident" id="6055639">list</span>&nbsp;<span class="op" id="6055644">[</span><span class="op" id="6055645">]</span><span class="ident" id="6055646"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055649">.</span><span class="ident" id="6055650">Expr</span><span class="op" id="6055654">)</span>&nbsp;<span class="op" id="6055656">[</span><span class="op" id="6055657">]</span><span class="op" id="6055658">*</span><span class="ident" id="6055659"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055662">.</span><span class="ident" id="6055663">Ident</span>&nbsp;<span class="op" id="6055669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055672">idents</span>&nbsp;<span class="op" id="6055679">:=</span>&nbsp;<span class="builtinfunc" id="6055682">make</span><span class="op" id="6055686">(</span><span class="op" id="6055687">[</span><span class="op" id="6055688">]</span><span class="op" id="6055689">*</span><span class="ident" id="6055690"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055693">.</span><span class="ident" id="6055694">Ident</span><span class="op" id="6055699">,</span>&nbsp;<span class="builtinfunc" id="6055701">len</span><span class="op" id="6055704">(</span><span class="ident" id="6055705"><a href="/go/parser/parser.go.html#6055639">list</a></span><span class="op" id="6055709">)</span><span class="op" id="6055710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055713">for</span>&nbsp;<span class="ident" id="6055717">i</span><span class="op" id="6055718">,</span>&nbsp;<span class="ident" id="6055720">x</span>&nbsp;<span class="op" id="6055722">:=</span>&nbsp;<span class="keyword" id="6055725">range</span>&nbsp;<span class="ident" id="6055731"><a href="/go/parser/parser.go.html#6055639">list</a></span>&nbsp;<span class="op" id="6055736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055740">ident</span><span class="op" id="6055745">,</span>&nbsp;<span class="ident" id="6055747">isIdent</span>&nbsp;<span class="op" id="6055755">:=</span>&nbsp;<span class="ident" id="6055758"><a href="/go/parser/parser.go.html#6055720">x</a></span><span class="op" id="6055759">.</span><span class="op" id="6055760">(</span><span class="op" id="6055761">*</span><span class="ident" id="6055762"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055765">.</span><span class="ident" id="6055766">Ident</span><span class="op" id="6055771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055775">if</span>&nbsp;<span class="op" id="6055778">!</span><span class="ident" id="6055779"><a href="/go/parser/parser.go.html#6055747">isIdent</a></span>&nbsp;<span class="op" id="6055787">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6055792">if</span>&nbsp;<span class="ident" id="6055795">_</span><span class="op" id="6055796">,</span>&nbsp;<span class="ident" id="6055798">isBad</span>&nbsp;<span class="op" id="6055804">:=</span>&nbsp;<span class="ident" id="6055807"><a href="/go/parser/parser.go.html#6055720">x</a></span><span class="op" id="6055808">.</span><span class="op" id="6055809">(</span><span class="op" id="6055810">*</span><span class="ident" id="6055811"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055814">.</span><span class="ident" id="6055815">BadExpr</span><span class="op" id="6055822">)</span><span class="op" id="6055823">;</span>&nbsp;<span class="op" id="6055825">!</span><span class="ident" id="6055826"><a href="/go/parser/parser.go.html#6055798">isBad</a></span>&nbsp;<span class="op" id="6055832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6055838">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;new&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055881"><a href="/go/parser/parser.go.html#6055614">p</a></span><span class="op" id="6055882">.</span><span class="ident" id="6055883">errorExpected</span><span class="op" id="6055896">(</span><span class="ident" id="6055897"><a href="/go/parser/parser.go.html#6055720">x</a></span><span class="op" id="6055898">.</span><span class="ident" id="6055899">Pos</span><span class="op" id="6055902">(</span><span class="op" id="6055903">)</span><span class="op" id="6055904">,</span>&nbsp;<span class="string" id="6055906">&#34;identifier&#34;</span><span class="op" id="6055918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055928"><a href="/go/parser/parser.go.html#6055740">ident</a></span>&nbsp;<span class="op" id="6055934">=</span>&nbsp;<span class="op" id="6055936">&amp;</span><span class="ident" id="6055937"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6055940">.</span><span class="ident" id="6055941">Ident</span><span class="op" id="6055946">{</span><span class="ident" id="6055947">NamePos</span><span class="op" id="6055954">:</span>&nbsp;<span class="ident" id="6055956"><a href="/go/parser/parser.go.html#6055720">x</a></span><span class="op" id="6055957">.</span><span class="ident" id="6055958">Pos</span><span class="op" id="6055961">(</span><span class="op" id="6055962">)</span><span class="op" id="6055963">,</span>&nbsp;<span class="ident" id="6055965">Name</span><span class="op" id="6055969">:</span>&nbsp;<span class="string" id="6055971">&#34;_&#34;</span><span class="op" id="6055974">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6055978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6055982"><a href="/go/parser/parser.go.html#6055672">idents</a></span><span class="op" id="6055988">[</span><span class="ident" id="6055989"><a href="/go/parser/parser.go.html#6055717">i</a></span><span class="op" id="6055990">]</span>&nbsp;<span class="op" id="6055992">=</span>&nbsp;<span class="ident" id="6055994"><a href="/go/parser/parser.go.html#6055740">ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056004">return</span>&nbsp;<span class="ident" id="6056011"><a href="/go/parser/parser.go.html#6055672">idents</a></span><br>
<span class="lineno"></span><span class="op" id="6056018">}</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span><span class="keyword" id="6056021">func</span>&nbsp;<span class="op" id="6056026">(</span><span class="ident" id="6056027">p</span>&nbsp;<span class="op" id="6056029">*</span><span class="ident" id="6056030"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6056036">)</span>&nbsp;<span class="ident" id="6056038">parseFieldDecl</span><span class="op" id="6056052">(</span><span class="ident" id="6056053">scope</span>&nbsp;<span class="op" id="6056059">*</span><span class="ident" id="6056060"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056063">.</span><span class="ident" id="6056064">Scope</span><span class="op" id="6056069">)</span>&nbsp;<span class="op" id="6056071">*</span><span class="ident" id="6056072"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056075">.</span><span class="ident" id="6056076">Field</span>&nbsp;<span class="op" id="6056082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056085">if</span>&nbsp;<span class="ident" id="6056088"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056089">.</span><span class="ident" id="6056090">trace</span>&nbsp;<span class="op" id="6056096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056100">defer</span>&nbsp;<span class="ident" id="6056106"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6056108">(</span><span class="ident" id="6056109"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6056114">(</span><span class="ident" id="6056115"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056116">,</span>&nbsp;<span class="string" id="6056118">&#34;FieldDecl&#34;</span><span class="op" id="6056129">)</span><span class="op" id="6056130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056133">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056137">doc</span>&nbsp;<span class="op" id="6056141">:=</span>&nbsp;<span class="ident" id="6056144"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056145">.</span><span class="ident" id="6056146">leadComment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6056160">//&nbsp;FieldDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056174">list</span><span class="op" id="6056178">,</span>&nbsp;<span class="ident" id="6056180">typ</span>&nbsp;<span class="op" id="6056184">:=</span>&nbsp;<span class="ident" id="6056187"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056188">.</span><span class="ident" id="6056189">parseVarList</span><span class="op" id="6056201">(</span><span class="ident" id="6056202">false</span><span class="op" id="6056207">)</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6056211">//&nbsp;Tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056219">var</span>&nbsp;<span class="ident" id="6056223">tag</span>&nbsp;<span class="op" id="6056227">*</span><span class="ident" id="6056228"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056231">.</span><span class="ident" id="6056232">BasicLit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056242">if</span>&nbsp;<span class="ident" id="6056245"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056246">.</span><span class="ident" id="6056247">tok</span>&nbsp;<span class="op" id="6056251">==</span>&nbsp;<span class="ident" id="6056254"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6056259">.</span><span class="ident" id="6056260">STRING</span>&nbsp;<span class="op" id="6056267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056271"><a href="/go/parser/parser.go.html#6056223">tag</a></span>&nbsp;<span class="op" id="6056275">=</span>&nbsp;<span class="op" id="6056277">&amp;</span><span class="ident" id="6056278"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056281">.</span><span class="ident" id="6056282">BasicLit</span><span class="op" id="6056290">{</span><span class="ident" id="6056291">ValuePos</span><span class="op" id="6056299">:</span>&nbsp;<span class="ident" id="6056301"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056302">.</span><span class="ident" id="6056303">pos</span><span class="op" id="6056306">,</span>&nbsp;<span class="ident" id="6056308">Kind</span><span class="op" id="6056312">:</span>&nbsp;<span class="ident" id="6056314"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056315">.</span><span class="ident" id="6056316">tok</span><span class="op" id="6056319">,</span>&nbsp;<span class="ident" id="6056321">Value</span><span class="op" id="6056326">:</span>&nbsp;<span class="ident" id="6056328"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056329">.</span><span class="ident" id="6056330">lit</span><span class="op" id="6056333">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056337"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056338">.</span><span class="ident" id="6056339">next</span><span class="op" id="6056343">(</span><span class="op" id="6056344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6056351">//&nbsp;analyze&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056368">var</span>&nbsp;<span class="ident" id="6056372">idents</span>&nbsp;<span class="op" id="6056379">[</span><span class="op" id="6056380">]</span><span class="op" id="6056381">*</span><span class="ident" id="6056382"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056385">.</span><span class="ident" id="6056386">Ident</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056393">if</span>&nbsp;<span class="ident" id="6056396"><a href="/go/parser/parser.go.html#6056180">typ</a></span>&nbsp;<span class="op" id="6056400">!=</span>&nbsp;<span class="ident" id="6056403">nil</span>&nbsp;<span class="op" id="6056407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6056411">//&nbsp;IdentifierList&nbsp;Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056436"><a href="/go/parser/parser.go.html#6056372">idents</a></span>&nbsp;<span class="op" id="6056443">=</span>&nbsp;<span class="ident" id="6056445"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056446">.</span><span class="ident" id="6056447">makeIdentList</span><span class="op" id="6056460">(</span><span class="ident" id="6056461"><a href="/go/parser/parser.go.html#6056174">list</a></span><span class="op" id="6056465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056468">}</span>&nbsp;<span class="keyword" id="6056470">else</span>&nbsp;<span class="op" id="6056475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6056479">//&nbsp;[&#34;*&#34;]&nbsp;TypeName&nbsp;(AnonymousField)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056516"><a href="/go/parser/parser.go.html#6056180">typ</a></span>&nbsp;<span class="op" id="6056520">=</span>&nbsp;<span class="ident" id="6056522"><a href="/go/parser/parser.go.html#6056174">list</a></span><span class="op" id="6056526">[</span><span class="num" id="6056527">0</span><span class="op" id="6056528">]</span>&nbsp;<span class="comment" id="6056530">//&nbsp;we&nbsp;always&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056571">if</span>&nbsp;<span class="ident" id="6056574">n</span>&nbsp;<span class="op" id="6056576">:=</span>&nbsp;<span class="builtinfunc" id="6056579">len</span><span class="op" id="6056582">(</span><span class="ident" id="6056583"><a href="/go/parser/parser.go.html#6056174">list</a></span><span class="op" id="6056587">)</span><span class="op" id="6056588">;</span>&nbsp;<span class="ident" id="6056590"><a href="/go/parser/parser.go.html#6056574">n</a></span>&nbsp;<span class="op" id="6056592">&gt;</span>&nbsp;<span class="num" id="6056594">1</span>&nbsp;<span class="op" id="6056596">||</span>&nbsp;<span class="op" id="6056599">!</span><span class="ident" id="6056600"><a href="/go/parser/parser.go.html#6073269">isTypeName</a></span><span class="op" id="6056610">(</span><span class="ident" id="6056611"><a href="/go/parser/parser.go.html#6074003">deref</a></span><span class="op" id="6056616">(</span><span class="ident" id="6056617"><a href="/go/parser/parser.go.html#6056180">typ</a></span><span class="op" id="6056620">)</span><span class="op" id="6056621">)</span>&nbsp;<span class="op" id="6056623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056628">pos</span>&nbsp;<span class="op" id="6056632">:=</span>&nbsp;<span class="ident" id="6056635"><a href="/go/parser/parser.go.html#6056180">typ</a></span><span class="op" id="6056638">.</span><span class="ident" id="6056639">Pos</span><span class="op" id="6056642">(</span><span class="op" id="6056643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056648"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056649">.</span><span class="ident" id="6056650">errorExpected</span><span class="op" id="6056663">(</span><span class="ident" id="6056664"><a href="/go/parser/parser.go.html#6056628">pos</a></span><span class="op" id="6056667">,</span>&nbsp;<span class="string" id="6056669">&#34;anonymous&nbsp;field&#34;</span><span class="op" id="6056686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056691"><a href="/go/parser/parser.go.html#6056180">typ</a></span>&nbsp;<span class="op" id="6056695">=</span>&nbsp;<span class="op" id="6056697">&amp;</span><span class="ident" id="6056698"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056701">.</span><span class="ident" id="6056702">BadExpr</span><span class="op" id="6056709">{</span><span class="ident" id="6056710">From</span><span class="op" id="6056714">:</span>&nbsp;<span class="ident" id="6056716"><a href="/go/parser/parser.go.html#6056628">pos</a></span><span class="op" id="6056719">,</span>&nbsp;<span class="ident" id="6056721">To</span><span class="op" id="6056723">:</span>&nbsp;<span class="ident" id="6056725"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056726">.</span><span class="ident" id="6056727">safePos</span><span class="op" id="6056734">(</span><span class="ident" id="6056735"><a href="/go/parser/parser.go.html#6056174">list</a></span><span class="op" id="6056739">[</span><span class="ident" id="6056740"><a href="/go/parser/parser.go.html#6056574">n</a></span><span class="op" id="6056741">-</span><span class="num" id="6056742">1</span><span class="op" id="6056743">]</span><span class="op" id="6056744">.</span><span class="ident" id="6056745">End</span><span class="op" id="6056748">(</span><span class="op" id="6056749">)</span><span class="op" id="6056750">)</span><span class="op" id="6056751">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6056758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056762"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056763">.</span><span class="ident" id="6056764">expectSemi</span><span class="op" id="6056774">(</span><span class="op" id="6056775">)</span>&nbsp;<span class="comment" id="6056777">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056818">field</span>&nbsp;<span class="op" id="6056824">:=</span>&nbsp;<span class="op" id="6056827">&amp;</span><span class="ident" id="6056828"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056831">.</span><span class="ident" id="6056832">Field</span><span class="op" id="6056837">{</span><span class="ident" id="6056838">Doc</span><span class="op" id="6056841">:</span>&nbsp;<span class="ident" id="6056843"><a href="/go/parser/parser.go.html#6056137">doc</a></span><span class="op" id="6056846">,</span>&nbsp;<span class="ident" id="6056848">Names</span><span class="op" id="6056853">:</span>&nbsp;<span class="ident" id="6056855"><a href="/go/parser/parser.go.html#6056372">idents</a></span><span class="op" id="6056861">,</span>&nbsp;<span class="ident" id="6056863">Type</span><span class="op" id="6056867">:</span>&nbsp;<span class="ident" id="6056869"><a href="/go/parser/parser.go.html#6056180">typ</a></span><span class="op" id="6056872">,</span>&nbsp;<span class="ident" id="6056874">Tag</span><span class="op" id="6056877">:</span>&nbsp;<span class="ident" id="6056879"><a href="/go/parser/parser.go.html#6056223">tag</a></span><span class="op" id="6056882">,</span>&nbsp;<span class="ident" id="6056884">Comment</span><span class="op" id="6056891">:</span>&nbsp;<span class="ident" id="6056893"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056894">.</span><span class="ident" id="6056895">lineComment</span><span class="op" id="6056906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056909"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056910">.</span><span class="ident" id="6056911">declare</span><span class="op" id="6056918">(</span><span class="ident" id="6056919"><a href="/go/parser/parser.go.html#6056818">field</a></span><span class="op" id="6056924">,</span>&nbsp;<span class="ident" id="6056926">nil</span><span class="op" id="6056929">,</span>&nbsp;<span class="ident" id="6056931"><a href="/go/parser/parser.go.html#6056053">scope</a></span><span class="op" id="6056936">,</span>&nbsp;<span class="ident" id="6056938"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6056941">.</span><span class="ident" id="6056942">Var</span><span class="op" id="6056945">,</span>&nbsp;<span class="ident" id="6056947"><a href="/go/parser/parser.go.html#6056372">idents</a></span><span class="op" id="6056953">...</span><span class="op" id="6056956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6056959"><a href="/go/parser/parser.go.html#6056027">p</a></span><span class="op" id="6056960">.</span><span class="ident" id="6056961">resolve</span><span class="op" id="6056968">(</span><span class="ident" id="6056969"><a href="/go/parser/parser.go.html#6056180">typ</a></span><span class="op" id="6056972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6056976">return</span>&nbsp;<span class="ident" id="6056983"><a href="/go/parser/parser.go.html#6056818">field</a></span><br>
<span class="lineno">715</span><span class="op" id="6056989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6056992">func</span>&nbsp;<span class="op" id="6056997">(</span><span class="ident" id="6056998">p</span>&nbsp;<span class="op" id="6057000">*</span><span class="ident" id="6057001"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6057007">)</span>&nbsp;<span class="ident" id="6057009">parseStructType</span><span class="op" id="6057024">(</span><span class="op" id="6057025">)</span>&nbsp;<span class="op" id="6057027">*</span><span class="ident" id="6057028"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057031">.</span><span class="ident" id="6057032">StructType</span>&nbsp;<span class="op" id="6057043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057046">if</span>&nbsp;<span class="ident" id="6057049"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057050">.</span><span class="ident" id="6057051">trace</span>&nbsp;<span class="op" id="6057057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057061">defer</span>&nbsp;<span class="ident" id="6057067"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6057069">(</span><span class="ident" id="6057070"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6057075">(</span><span class="ident" id="6057076"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057077">,</span>&nbsp;<span class="string" id="6057079">&#34;StructType&#34;</span><span class="op" id="6057091">)</span><span class="op" id="6057092">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6057095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057099">pos</span>&nbsp;<span class="op" id="6057103">:=</span>&nbsp;<span class="ident" id="6057106"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057107">.</span><span class="ident" id="6057108">expect</span><span class="op" id="6057114">(</span><span class="ident" id="6057115"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057120">.</span><span class="ident" id="6057121">STRUCT</span><span class="op" id="6057127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057130">lbrace</span>&nbsp;<span class="op" id="6057137">:=</span>&nbsp;<span class="ident" id="6057140"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057141">.</span><span class="ident" id="6057142">expect</span><span class="op" id="6057148">(</span><span class="ident" id="6057149"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057154">.</span><span class="ident" id="6057155">LBRACE</span><span class="op" id="6057161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057164">scope</span>&nbsp;<span class="op" id="6057170">:=</span>&nbsp;<span class="ident" id="6057173"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057176">.</span><span class="ident" id="6057177">NewScope</span><span class="op" id="6057185">(</span><span class="ident" id="6057186">nil</span><span class="op" id="6057189">)</span>&nbsp;<span class="comment" id="6057191">//&nbsp;struct&nbsp;scope</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057208">var</span>&nbsp;<span class="ident" id="6057212">list</span>&nbsp;<span class="op" id="6057217">[</span><span class="op" id="6057218">]</span><span class="op" id="6057219">*</span><span class="ident" id="6057220"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057223">.</span><span class="ident" id="6057224">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057231">for</span>&nbsp;<span class="ident" id="6057235"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057236">.</span><span class="ident" id="6057237">tok</span>&nbsp;<span class="op" id="6057241">==</span>&nbsp;<span class="ident" id="6057244"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057249">.</span><span class="ident" id="6057250">IDENT</span>&nbsp;<span class="op" id="6057256">||</span>&nbsp;<span class="ident" id="6057259"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057260">.</span><span class="ident" id="6057261">tok</span>&nbsp;<span class="op" id="6057265">==</span>&nbsp;<span class="ident" id="6057268"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057273">.</span><span class="ident" id="6057274">MUL</span>&nbsp;<span class="op" id="6057278">||</span>&nbsp;<span class="ident" id="6057281"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057282">.</span><span class="ident" id="6057283">tok</span>&nbsp;<span class="op" id="6057287">==</span>&nbsp;<span class="ident" id="6057290"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057295">.</span><span class="ident" id="6057296">LPAREN</span>&nbsp;<span class="op" id="6057303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6057307">//&nbsp;a&nbsp;field&nbsp;declaration&nbsp;cannot&nbsp;start&nbsp;with&nbsp;a&nbsp;&#39;(&#39;&nbsp;but&nbsp;we&nbsp;accept</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6057370">//&nbsp;it&nbsp;here&nbsp;for&nbsp;more&nbsp;robust&nbsp;parsing&nbsp;and&nbsp;better&nbsp;error&nbsp;messages</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6057433">//&nbsp;(parseFieldDecl&nbsp;will&nbsp;check&nbsp;and&nbsp;complain&nbsp;if&nbsp;necessary)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057492"><a href="/go/parser/parser.go.html#6057212">list</a></span>&nbsp;<span class="op" id="6057497">=</span>&nbsp;<span class="builtinfunc" id="6057499">append</span><span class="op" id="6057505">(</span><span class="ident" id="6057506"><a href="/go/parser/parser.go.html#6057212">list</a></span><span class="op" id="6057510">,</span>&nbsp;<span class="ident" id="6057512"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057513">.</span><span class="ident" id="6057514">parseFieldDecl</span><span class="op" id="6057528">(</span><span class="ident" id="6057529"><a href="/go/parser/parser.go.html#6057164">scope</a></span><span class="op" id="6057534">)</span><span class="op" id="6057535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6057538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057541">rbrace</span>&nbsp;<span class="op" id="6057548">:=</span>&nbsp;<span class="ident" id="6057551"><a href="/go/parser/parser.go.html#6056998">p</a></span><span class="op" id="6057552">.</span><span class="ident" id="6057553">expect</span><span class="op" id="6057559">(</span><span class="ident" id="6057560"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057565">.</span><span class="ident" id="6057566">RBRACE</span><span class="op" id="6057572">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057576">return</span>&nbsp;<span class="op" id="6057583">&amp;</span><span class="ident" id="6057584"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057587">.</span><span class="ident" id="6057588">StructType</span><span class="op" id="6057598">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057602">Struct</span><span class="op" id="6057608">:</span>&nbsp;<span class="ident" id="6057610"><a href="/go/parser/parser.go.html#6057099">pos</a></span><span class="op" id="6057613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057617">Fields</span><span class="op" id="6057623">:</span>&nbsp;<span class="op" id="6057625">&amp;</span><span class="ident" id="6057626"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057629">.</span><span class="ident" id="6057630">FieldList</span><span class="op" id="6057639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057644">Opening</span><span class="op" id="6057651">:</span>&nbsp;<span class="ident" id="6057653"><a href="/go/parser/parser.go.html#6057130">lbrace</a></span><span class="op" id="6057659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057664">List</span><span class="op" id="6057668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057673"><a href="/go/parser/parser.go.html#6057212">list</a></span><span class="op" id="6057677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057682">Closing</span><span class="op" id="6057689">:</span>&nbsp;<span class="ident" id="6057691"><a href="/go/parser/parser.go.html#6057541">rbrace</a></span><span class="op" id="6057697">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6057701">}</span><span class="op" id="6057702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6057705">}</span><br>
<span class="lineno"></span><span class="op" id="6057707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6057710">func</span>&nbsp;<span class="op" id="6057715">(</span><span class="ident" id="6057716">p</span>&nbsp;<span class="op" id="6057718">*</span><span class="ident" id="6057719"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6057725">)</span>&nbsp;<span class="ident" id="6057727">parsePointerType</span><span class="op" id="6057743">(</span><span class="op" id="6057744">)</span>&nbsp;<span class="op" id="6057746">*</span><span class="ident" id="6057747"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057750">.</span><span class="ident" id="6057751">StarExpr</span>&nbsp;<span class="op" id="6057760">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057763">if</span>&nbsp;<span class="ident" id="6057766"><a href="/go/parser/parser.go.html#6057716">p</a></span><span class="op" id="6057767">.</span><span class="ident" id="6057768">trace</span>&nbsp;<span class="op" id="6057774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057778">defer</span>&nbsp;<span class="ident" id="6057784"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6057786">(</span><span class="ident" id="6057787"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6057792">(</span><span class="ident" id="6057793"><a href="/go/parser/parser.go.html#6057716">p</a></span><span class="op" id="6057794">,</span>&nbsp;<span class="string" id="6057796">&#34;PointerType&#34;</span><span class="op" id="6057809">)</span><span class="op" id="6057810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6057813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057817">star</span>&nbsp;<span class="op" id="6057822">:=</span>&nbsp;<span class="ident" id="6057825"><a href="/go/parser/parser.go.html#6057716">p</a></span><span class="op" id="6057826">.</span><span class="ident" id="6057827">expect</span><span class="op" id="6057833">(</span><span class="ident" id="6057834"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6057839">.</span><span class="ident" id="6057840">MUL</span><span class="op" id="6057843">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6057846">base</span>&nbsp;<span class="op" id="6057851">:=</span>&nbsp;<span class="ident" id="6057854"><a href="/go/parser/parser.go.html#6057716">p</a></span><span class="op" id="6057855">.</span><span class="ident" id="6057856">parseType</span><span class="op" id="6057865">(</span><span class="op" id="6057866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6057870">return</span>&nbsp;<span class="op" id="6057877">&amp;</span><span class="ident" id="6057878"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6057881">.</span><span class="ident" id="6057882">StarExpr</span><span class="op" id="6057890">{</span><span class="ident" id="6057891">Star</span><span class="op" id="6057895">:</span>&nbsp;<span class="ident" id="6057897"><a href="/go/parser/parser.go.html#6057817">star</a></span><span class="op" id="6057901">,</span>&nbsp;<span class="ident" id="6057903">X</span><span class="op" id="6057904">:</span>&nbsp;<span class="ident" id="6057906"><a href="/go/parser/parser.go.html#6057846">base</a></span><span class="op" id="6057910">}</span><br>
<span class="lineno"></span><span class="op" id="6057912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="6057915">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6057970">func</span>&nbsp;<span class="op" id="6057975">(</span><span class="ident" id="6057976">p</span>&nbsp;<span class="op" id="6057978">*</span><span class="ident" id="6057979"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6057985">)</span>&nbsp;<span class="ident" id="6057987">tryVarType</span><span class="op" id="6057997">(</span><span class="ident" id="6057998">isParam</span>&nbsp;<span class="builtintype" id="6058006">bool</span><span class="op" id="6058010">)</span>&nbsp;<span class="ident" id="6058012"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058015">.</span><span class="ident" id="6058016">Expr</span>&nbsp;<span class="op" id="6058021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058024">if</span>&nbsp;<span class="ident" id="6058027"><a href="/go/parser/parser.go.html#6057998">isParam</a></span>&nbsp;<span class="op" id="6058035">&amp;&amp;</span>&nbsp;<span class="ident" id="6058038"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058039">.</span><span class="ident" id="6058040">tok</span>&nbsp;<span class="op" id="6058044">==</span>&nbsp;<span class="ident" id="6058047"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6058052">.</span><span class="ident" id="6058053">ELLIPSIS</span>&nbsp;<span class="op" id="6058062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058066">pos</span>&nbsp;<span class="op" id="6058070">:=</span>&nbsp;<span class="ident" id="6058073"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058074">.</span><span class="ident" id="6058075">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058081"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058082">.</span><span class="ident" id="6058083">next</span><span class="op" id="6058087">(</span><span class="op" id="6058088">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058092">typ</span>&nbsp;<span class="op" id="6058096">:=</span>&nbsp;<span class="ident" id="6058099"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058100">.</span><span class="ident" id="6058101">tryIdentOrType</span><span class="op" id="6058115">(</span><span class="op" id="6058116">)</span>&nbsp;<span class="comment" id="6058118">//&nbsp;don&#39;t&nbsp;use&nbsp;parseType&nbsp;so&nbsp;we&nbsp;can&nbsp;provide&nbsp;better&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058182">if</span>&nbsp;<span class="ident" id="6058185"><a href="/go/parser/parser.go.html#6058092">typ</a></span>&nbsp;<span class="op" id="6058189">!=</span>&nbsp;<span class="ident" id="6058192">nil</span>&nbsp;<span class="op" id="6058196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058201"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058202">.</span><span class="ident" id="6058203">resolve</span><span class="op" id="6058210">(</span><span class="ident" id="6058211"><a href="/go/parser/parser.go.html#6058092">typ</a></span><span class="op" id="6058214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6058218">}</span>&nbsp;<span class="keyword" id="6058220">else</span>&nbsp;<span class="op" id="6058225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058230"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058231">.</span><span class="builtintype" id="6058232">error</span><span class="op" id="6058237">(</span><span class="ident" id="6058238"><a href="/go/parser/parser.go.html#6058066">pos</a></span><span class="op" id="6058241">,</span>&nbsp;<span class="string" id="6058243">&#34;&#39;...&#39;&nbsp;parameter&nbsp;is&nbsp;missing&nbsp;type&#34;</span><span class="op" id="6058276">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058281"><a href="/go/parser/parser.go.html#6058092">typ</a></span>&nbsp;<span class="op" id="6058285">=</span>&nbsp;<span class="op" id="6058287">&amp;</span><span class="ident" id="6058288"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058291">.</span><span class="ident" id="6058292">BadExpr</span><span class="op" id="6058299">{</span><span class="ident" id="6058300">From</span><span class="op" id="6058304">:</span>&nbsp;<span class="ident" id="6058306"><a href="/go/parser/parser.go.html#6058066">pos</a></span><span class="op" id="6058309">,</span>&nbsp;<span class="ident" id="6058311">To</span><span class="op" id="6058313">:</span>&nbsp;<span class="ident" id="6058315"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058316">.</span><span class="ident" id="6058317">pos</span><span class="op" id="6058320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6058324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058328">return</span>&nbsp;<span class="op" id="6058335">&amp;</span><span class="ident" id="6058336"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058339">.</span><span class="ident" id="6058340">Ellipsis</span><span class="op" id="6058348">{</span><span class="ident" id="6058349">Ellipsis</span><span class="op" id="6058357">:</span>&nbsp;<span class="ident" id="6058359"><a href="/go/parser/parser.go.html#6058066">pos</a></span><span class="op" id="6058362">,</span>&nbsp;<span class="ident" id="6058364">Elt</span><span class="op" id="6058367">:</span>&nbsp;<span class="ident" id="6058369"><a href="/go/parser/parser.go.html#6058092">typ</a></span><span class="op" id="6058372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6058375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058378">return</span>&nbsp;<span class="ident" id="6058385"><a href="/go/parser/parser.go.html#6057976">p</a></span><span class="op" id="6058386">.</span><span class="ident" id="6058387">tryIdentOrType</span><span class="op" id="6058401">(</span><span class="op" id="6058402">)</span><br>
<span class="lineno">770</span><span class="op" id="6058404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058407">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6058462">func</span>&nbsp;<span class="op" id="6058467">(</span><span class="ident" id="6058468">p</span>&nbsp;<span class="op" id="6058470">*</span><span class="ident" id="6058471"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6058477">)</span>&nbsp;<span class="ident" id="6058479">parseVarType</span><span class="op" id="6058491">(</span><span class="ident" id="6058492">isParam</span>&nbsp;<span class="builtintype" id="6058500">bool</span><span class="op" id="6058504">)</span>&nbsp;<span class="ident" id="6058506"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058509">.</span><span class="ident" id="6058510">Expr</span>&nbsp;<span class="op" id="6058515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058518">typ</span>&nbsp;<span class="op" id="6058522">:=</span>&nbsp;<span class="ident" id="6058525"><a href="/go/parser/parser.go.html#6058468">p</a></span><span class="op" id="6058526">.</span><span class="ident" id="6058527">tryVarType</span><span class="op" id="6058537">(</span><span class="ident" id="6058538"><a href="/go/parser/parser.go.html#6058492">isParam</a></span><span class="op" id="6058545">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058548">if</span>&nbsp;<span class="ident" id="6058551"><a href="/go/parser/parser.go.html#6058518">typ</a></span>&nbsp;<span class="op" id="6058555">==</span>&nbsp;<span class="ident" id="6058558">nil</span>&nbsp;<span class="op" id="6058562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058566">pos</span>&nbsp;<span class="op" id="6058570">:=</span>&nbsp;<span class="ident" id="6058573"><a href="/go/parser/parser.go.html#6058468">p</a></span><span class="op" id="6058574">.</span><span class="ident" id="6058575">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058581"><a href="/go/parser/parser.go.html#6058468">p</a></span><span class="op" id="6058582">.</span><span class="ident" id="6058583">errorExpected</span><span class="op" id="6058596">(</span><span class="ident" id="6058597"><a href="/go/parser/parser.go.html#6058566">pos</a></span><span class="op" id="6058600">,</span>&nbsp;<span class="string" id="6058602">&#34;type&#34;</span><span class="op" id="6058608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058612"><a href="/go/parser/parser.go.html#6058468">p</a></span><span class="op" id="6058613">.</span><span class="ident" id="6058614">next</span><span class="op" id="6058618">(</span><span class="op" id="6058619">)</span>&nbsp;<span class="comment" id="6058621">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6058640"><a href="/go/parser/parser.go.html#6058518">typ</a></span>&nbsp;<span class="op" id="6058644">=</span>&nbsp;<span class="op" id="6058646">&amp;</span><span class="ident" id="6058647"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058650">.</span><span class="ident" id="6058651">BadExpr</span><span class="op" id="6058658">{</span><span class="ident" id="6058659">From</span><span class="op" id="6058663">:</span>&nbsp;<span class="ident" id="6058665"><a href="/go/parser/parser.go.html#6058566">pos</a></span><span class="op" id="6058668">,</span>&nbsp;<span class="ident" id="6058670">To</span><span class="op" id="6058672">:</span>&nbsp;<span class="ident" id="6058674"><a href="/go/parser/parser.go.html#6058468">p</a></span><span class="op" id="6058675">.</span><span class="ident" id="6058676">pos</span><span class="op" id="6058679">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6058682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058685">return</span>&nbsp;<span class="ident" id="6058692"><a href="/go/parser/parser.go.html#6058518">typ</a></span><br>
<span class="lineno"></span><span class="op" id="6058696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058699">//&nbsp;If&nbsp;any&nbsp;of&nbsp;the&nbsp;results&nbsp;are&nbsp;identifiers,&nbsp;they&nbsp;are&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">785</span><span class="keyword" id="6058764">func</span>&nbsp;<span class="op" id="6058769">(</span><span class="ident" id="6058770">p</span>&nbsp;<span class="op" id="6058772">*</span><span class="ident" id="6058773"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6058779">)</span>&nbsp;<span class="ident" id="6058781">parseVarList</span><span class="op" id="6058793">(</span><span class="ident" id="6058794">isParam</span>&nbsp;<span class="builtintype" id="6058802">bool</span><span class="op" id="6058806">)</span>&nbsp;<span class="op" id="6058808">(</span><span class="ident" id="6058809">list</span>&nbsp;<span class="op" id="6058814">[</span><span class="op" id="6058815">]</span><span class="ident" id="6058816"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058819">.</span><span class="ident" id="6058820">Expr</span><span class="op" id="6058824">,</span>&nbsp;<span class="ident" id="6058826">typ</span>&nbsp;<span class="ident" id="6058830"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6058833">.</span><span class="ident" id="6058834">Expr</span><span class="op" id="6058838">)</span>&nbsp;<span class="op" id="6058840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058843">if</span>&nbsp;<span class="ident" id="6058846"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6058847">.</span><span class="ident" id="6058848">trace</span>&nbsp;<span class="op" id="6058854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6058858">defer</span>&nbsp;<span class="ident" id="6058864"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6058866">(</span><span class="ident" id="6058867"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6058872">(</span><span class="ident" id="6058873"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6058874">,</span>&nbsp;<span class="string" id="6058876">&#34;VarList&#34;</span><span class="op" id="6058885">)</span><span class="op" id="6058886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6058889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6058893">//&nbsp;a&nbsp;list&nbsp;of&nbsp;identifiers&nbsp;looks&nbsp;like&nbsp;a&nbsp;list&nbsp;of&nbsp;type&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6058951">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6058955">//&nbsp;parse/tryVarType&nbsp;accepts&nbsp;any&nbsp;type&nbsp;(including&nbsp;parenthesized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059018">//&nbsp;ones)&nbsp;even&nbsp;though&nbsp;the&nbsp;syntax&nbsp;does&nbsp;not&nbsp;permit&nbsp;them&nbsp;here:&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059081">//&nbsp;accept&nbsp;them&nbsp;all&nbsp;for&nbsp;more&nbsp;robust&nbsp;parsing&nbsp;and&nbsp;complain&nbsp;later</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059144">for</span>&nbsp;<span class="ident" id="6059148">typ</span>&nbsp;<span class="op" id="6059152">:=</span>&nbsp;<span class="ident" id="6059155"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6059156">.</span><span class="ident" id="6059157">parseVarType</span><span class="op" id="6059169">(</span><span class="ident" id="6059170"><a href="/go/parser/parser.go.html#6058794">isParam</a></span><span class="op" id="6059177">)</span><span class="op" id="6059178">;</span>&nbsp;<span class="ident" id="6059180"><a href="/go/parser/parser.go.html#6059148">typ</a></span>&nbsp;<span class="op" id="6059184">!=</span>&nbsp;<span class="ident" id="6059187">nil</span><span class="op" id="6059190">;</span>&nbsp;<span class="op" id="6059192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059196"><a href="/go/parser/parser.go.html#6058809">list</a></span>&nbsp;<span class="op" id="6059201">=</span>&nbsp;<span class="builtinfunc" id="6059203">append</span><span class="op" id="6059209">(</span><span class="ident" id="6059210"><a href="/go/parser/parser.go.html#6058809">list</a></span><span class="op" id="6059214">,</span>&nbsp;<span class="ident" id="6059216"><a href="/go/parser/parser.go.html#6059148">typ</a></span><span class="op" id="6059219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059223">if</span>&nbsp;<span class="ident" id="6059226"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6059227">.</span><span class="ident" id="6059228">tok</span>&nbsp;<span class="op" id="6059232">!=</span>&nbsp;<span class="ident" id="6059235"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6059240">.</span><span class="ident" id="6059241">COMMA</span>&nbsp;<span class="op" id="6059247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059252">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059260">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059264"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6059265">.</span><span class="ident" id="6059266">next</span><span class="op" id="6059270">(</span><span class="op" id="6059271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059275"><a href="/go/parser/parser.go.html#6059148">typ</a></span>&nbsp;<span class="op" id="6059279">=</span>&nbsp;<span class="ident" id="6059281"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6059282">.</span><span class="ident" id="6059283">tryVarType</span><span class="op" id="6059293">(</span><span class="ident" id="6059294"><a href="/go/parser/parser.go.html#6058794">isParam</a></span><span class="op" id="6059301">)</span>&nbsp;<span class="comment" id="6059303">//&nbsp;maybe&nbsp;nil&nbsp;as&nbsp;in:&nbsp;func&nbsp;f(int,)&nbsp;{}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059344">//&nbsp;if&nbsp;we&nbsp;had&nbsp;a&nbsp;list&nbsp;of&nbsp;identifiers,&nbsp;it&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;type</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059411"><a href="/go/parser/parser.go.html#6058826">typ</a></span>&nbsp;<span class="op" id="6059415">=</span>&nbsp;<span class="ident" id="6059417"><a href="/go/parser/parser.go.html#6058770">p</a></span><span class="op" id="6059418">.</span><span class="ident" id="6059419">tryVarType</span><span class="op" id="6059429">(</span><span class="ident" id="6059430"><a href="/go/parser/parser.go.html#6058794">isParam</a></span><span class="op" id="6059437">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059441">return</span><br>
<span class="lineno"></span><span class="op" id="6059448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span><span class="keyword" id="6059451">func</span>&nbsp;<span class="op" id="6059456">(</span><span class="ident" id="6059457">p</span>&nbsp;<span class="op" id="6059459">*</span><span class="ident" id="6059460"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6059466">)</span>&nbsp;<span class="ident" id="6059468">parseParameterList</span><span class="op" id="6059486">(</span><span class="ident" id="6059487">scope</span>&nbsp;<span class="op" id="6059493">*</span><span class="ident" id="6059494"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6059497">.</span><span class="ident" id="6059498">Scope</span><span class="op" id="6059503">,</span>&nbsp;<span class="ident" id="6059505">ellipsisOk</span>&nbsp;<span class="builtintype" id="6059516">bool</span><span class="op" id="6059520">)</span>&nbsp;<span class="op" id="6059522">(</span><span class="ident" id="6059523">params</span>&nbsp;<span class="op" id="6059530">[</span><span class="op" id="6059531">]</span><span class="op" id="6059532">*</span><span class="ident" id="6059533"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6059536">.</span><span class="ident" id="6059537">Field</span><span class="op" id="6059542">)</span>&nbsp;<span class="op" id="6059544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059547">if</span>&nbsp;<span class="ident" id="6059550"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6059551">.</span><span class="ident" id="6059552">trace</span>&nbsp;<span class="op" id="6059558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059562">defer</span>&nbsp;<span class="ident" id="6059568"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6059570">(</span><span class="ident" id="6059571"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6059576">(</span><span class="ident" id="6059577"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6059578">,</span>&nbsp;<span class="string" id="6059580">&#34;ParameterList&#34;</span><span class="op" id="6059595">)</span><span class="op" id="6059596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6059599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059603">//&nbsp;ParameterDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059621">list</span><span class="op" id="6059625">,</span>&nbsp;<span class="ident" id="6059627">typ</span>&nbsp;<span class="op" id="6059631">:=</span>&nbsp;<span class="ident" id="6059634"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6059635">.</span><span class="ident" id="6059636">parseVarList</span><span class="op" id="6059648">(</span><span class="ident" id="6059649"><a href="/go/parser/parser.go.html#6059505">ellipsisOk</a></span><span class="op" id="6059659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059663">//&nbsp;analyze&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6059680">if</span>&nbsp;<span class="ident" id="6059683"><a href="/go/parser/parser.go.html#6059627">typ</a></span>&nbsp;<span class="op" id="6059687">!=</span>&nbsp;<span class="ident" id="6059690">nil</span>&nbsp;<span class="op" id="6059694">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059698">//&nbsp;IdentifierList&nbsp;Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059723">idents</span>&nbsp;<span class="op" id="6059730">:=</span>&nbsp;<span class="ident" id="6059733"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6059734">.</span><span class="ident" id="6059735">makeIdentList</span><span class="op" id="6059748">(</span><span class="ident" id="6059749"><a href="/go/parser/parser.go.html#6059621">list</a></span><span class="op" id="6059753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059757">field</span>&nbsp;<span class="op" id="6059763">:=</span>&nbsp;<span class="op" id="6059766">&amp;</span><span class="ident" id="6059767"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6059770">.</span><span class="ident" id="6059771">Field</span><span class="op" id="6059776">{</span><span class="ident" id="6059777">Names</span><span class="op" id="6059782">:</span>&nbsp;<span class="ident" id="6059784"><a href="/go/parser/parser.go.html#6059723">idents</a></span><span class="op" id="6059790">,</span>&nbsp;<span class="ident" id="6059792">Type</span><span class="op" id="6059796">:</span>&nbsp;<span class="ident" id="6059798"><a href="/go/parser/parser.go.html#6059627">typ</a></span><span class="op" id="6059801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059805"><a href="/go/parser/parser.go.html#6059523">params</a></span>&nbsp;<span class="op" id="6059812">=</span>&nbsp;<span class="builtinfunc" id="6059814">append</span><span class="op" id="6059820">(</span><span class="ident" id="6059821"><a href="/go/parser/parser.go.html#6059523">params</a></span><span class="op" id="6059827">,</span>&nbsp;<span class="ident" id="6059829"><a href="/go/parser/parser.go.html#6059757">field</a></span><span class="op" id="6059834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059838">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;function</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6059899">//&nbsp;parameter&nbsp;or&nbsp;result&nbsp;variable&nbsp;is&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6059955"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6059956">.</span><span class="ident" id="6059957">declare</span><span class="op" id="6059964">(</span><span class="ident" id="6059965"><a href="/go/parser/parser.go.html#6059757">field</a></span><span class="op" id="6059970">,</span>&nbsp;<span class="ident" id="6059972">nil</span><span class="op" id="6059975">,</span>&nbsp;<span class="ident" id="6059977"><a href="/go/parser/parser.go.html#6059487">scope</a></span><span class="op" id="6059982">,</span>&nbsp;<span class="ident" id="6059984"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6059987">.</span><span class="ident" id="6059988">Var</span><span class="op" id="6059991">,</span>&nbsp;<span class="ident" id="6059993"><a href="/go/parser/parser.go.html#6059723">idents</a></span><span class="op" id="6059999">...</span><span class="op" id="6060002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060006"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060007">.</span><span class="ident" id="6060008">resolve</span><span class="op" id="6060015">(</span><span class="ident" id="6060016"><a href="/go/parser/parser.go.html#6059627">typ</a></span><span class="op" id="6060019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060023">if</span>&nbsp;<span class="op" id="6060026">!</span><span class="ident" id="6060027"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060028">.</span><span class="ident" id="6060029">atComma</span><span class="op" id="6060036">(</span><span class="string" id="6060037">&#34;parameter&nbsp;list&#34;</span><span class="op" id="6060053">)</span>&nbsp;<span class="op" id="6060055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060060">return</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060073"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060074">.</span><span class="ident" id="6060075">next</span><span class="op" id="6060079">(</span><span class="op" id="6060080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060084">for</span>&nbsp;<span class="ident" id="6060088"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060089">.</span><span class="ident" id="6060090">tok</span>&nbsp;<span class="op" id="6060094">!=</span>&nbsp;<span class="ident" id="6060097"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6060102">.</span><span class="ident" id="6060103">RPAREN</span>&nbsp;<span class="op" id="6060110">&amp;&amp;</span>&nbsp;<span class="ident" id="6060113"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060114">.</span><span class="ident" id="6060115">tok</span>&nbsp;<span class="op" id="6060119">!=</span>&nbsp;<span class="ident" id="6060122"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6060127">.</span><span class="ident" id="6060128">EOF</span>&nbsp;<span class="op" id="6060132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060137">idents</span>&nbsp;<span class="op" id="6060144">:=</span>&nbsp;<span class="ident" id="6060147"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060148">.</span><span class="ident" id="6060149">parseIdentList</span><span class="op" id="6060163">(</span><span class="op" id="6060164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060169">typ</span>&nbsp;<span class="op" id="6060173">:=</span>&nbsp;<span class="ident" id="6060176"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060177">.</span><span class="ident" id="6060178">parseVarType</span><span class="op" id="6060190">(</span><span class="ident" id="6060191"><a href="/go/parser/parser.go.html#6059505">ellipsisOk</a></span><span class="op" id="6060201">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060206">field</span>&nbsp;<span class="op" id="6060212">:=</span>&nbsp;<span class="op" id="6060215">&amp;</span><span class="ident" id="6060216"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060219">.</span><span class="ident" id="6060220">Field</span><span class="op" id="6060225">{</span><span class="ident" id="6060226">Names</span><span class="op" id="6060231">:</span>&nbsp;<span class="ident" id="6060233"><a href="/go/parser/parser.go.html#6060137">idents</a></span><span class="op" id="6060239">,</span>&nbsp;<span class="ident" id="6060241">Type</span><span class="op" id="6060245">:</span>&nbsp;<span class="ident" id="6060247"><a href="/go/parser/parser.go.html#6060169">typ</a></span><span class="op" id="6060250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060255"><a href="/go/parser/parser.go.html#6059523">params</a></span>&nbsp;<span class="op" id="6060262">=</span>&nbsp;<span class="builtinfunc" id="6060264">append</span><span class="op" id="6060270">(</span><span class="ident" id="6060271"><a href="/go/parser/parser.go.html#6059523">params</a></span><span class="op" id="6060277">,</span>&nbsp;<span class="ident" id="6060279"><a href="/go/parser/parser.go.html#6060206">field</a></span><span class="op" id="6060284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6060289">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6060351">//&nbsp;parameter&nbsp;or&nbsp;result&nbsp;variable&nbsp;is&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060408"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060409">.</span><span class="ident" id="6060410">declare</span><span class="op" id="6060417">(</span><span class="ident" id="6060418"><a href="/go/parser/parser.go.html#6060206">field</a></span><span class="op" id="6060423">,</span>&nbsp;<span class="ident" id="6060425">nil</span><span class="op" id="6060428">,</span>&nbsp;<span class="ident" id="6060430"><a href="/go/parser/parser.go.html#6059487">scope</a></span><span class="op" id="6060435">,</span>&nbsp;<span class="ident" id="6060437"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060440">.</span><span class="ident" id="6060441">Var</span><span class="op" id="6060444">,</span>&nbsp;<span class="ident" id="6060446"><a href="/go/parser/parser.go.html#6060137">idents</a></span><span class="op" id="6060452">...</span><span class="op" id="6060455">)</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060460"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060461">.</span><span class="ident" id="6060462">resolve</span><span class="op" id="6060469">(</span><span class="ident" id="6060470"><a href="/go/parser/parser.go.html#6060169">typ</a></span><span class="op" id="6060473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060478">if</span>&nbsp;<span class="op" id="6060481">!</span><span class="ident" id="6060482"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060483">.</span><span class="ident" id="6060484">atComma</span><span class="op" id="6060491">(</span><span class="string" id="6060492">&#34;parameter&nbsp;list&#34;</span><span class="op" id="6060508">)</span>&nbsp;<span class="op" id="6060510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060516">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060530"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060531">.</span><span class="ident" id="6060532">next</span><span class="op" id="6060536">(</span><span class="op" id="6060537">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060545">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6060557">//&nbsp;Type&nbsp;{&nbsp;&#34;,&#34;&nbsp;Type&nbsp;}&nbsp;(anonymous&nbsp;parameters)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060602"><a href="/go/parser/parser.go.html#6059523">params</a></span>&nbsp;<span class="op" id="6060609">=</span>&nbsp;<span class="builtinfunc" id="6060611">make</span><span class="op" id="6060615">(</span><span class="op" id="6060616">[</span><span class="op" id="6060617">]</span><span class="op" id="6060618">*</span><span class="ident" id="6060619"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060622">.</span><span class="ident" id="6060623">Field</span><span class="op" id="6060628">,</span>&nbsp;<span class="builtinfunc" id="6060630">len</span><span class="op" id="6060633">(</span><span class="ident" id="6060634"><a href="/go/parser/parser.go.html#6059621">list</a></span><span class="op" id="6060638">)</span><span class="op" id="6060639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060642">for</span>&nbsp;<span class="ident" id="6060646">i</span><span class="op" id="6060647">,</span>&nbsp;<span class="ident" id="6060649">typ</span>&nbsp;<span class="op" id="6060653">:=</span>&nbsp;<span class="keyword" id="6060656">range</span>&nbsp;<span class="ident" id="6060662"><a href="/go/parser/parser.go.html#6059621">list</a></span>&nbsp;<span class="op" id="6060667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060671"><a href="/go/parser/parser.go.html#6059457">p</a></span><span class="op" id="6060672">.</span><span class="ident" id="6060673">resolve</span><span class="op" id="6060680">(</span><span class="ident" id="6060681"><a href="/go/parser/parser.go.html#6060649">typ</a></span><span class="op" id="6060684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060688"><a href="/go/parser/parser.go.html#6059523">params</a></span><span class="op" id="6060694">[</span><span class="ident" id="6060695"><a href="/go/parser/parser.go.html#6060646">i</a></span><span class="op" id="6060696">]</span>&nbsp;<span class="op" id="6060698">=</span>&nbsp;<span class="op" id="6060700">&amp;</span><span class="ident" id="6060701"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060704">.</span><span class="ident" id="6060705">Field</span><span class="op" id="6060710">{</span><span class="ident" id="6060711">Type</span><span class="op" id="6060715">:</span>&nbsp;<span class="ident" id="6060717"><a href="/go/parser/parser.go.html#6060649">typ</a></span><span class="op" id="6060720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060723">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060726">return</span><br>
<span class="lineno"></span><span class="op" id="6060733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6060736">func</span>&nbsp;<span class="op" id="6060741">(</span><span class="ident" id="6060742">p</span>&nbsp;<span class="op" id="6060744">*</span><span class="ident" id="6060745"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6060751">)</span>&nbsp;<span class="ident" id="6060753">parseParameters</span><span class="op" id="6060768">(</span><span class="ident" id="6060769">scope</span>&nbsp;<span class="op" id="6060775">*</span><span class="ident" id="6060776"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060779">.</span><span class="ident" id="6060780">Scope</span><span class="op" id="6060785">,</span>&nbsp;<span class="ident" id="6060787">ellipsisOk</span>&nbsp;<span class="builtintype" id="6060798">bool</span><span class="op" id="6060802">)</span>&nbsp;<span class="op" id="6060804">*</span><span class="ident" id="6060805"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060808">.</span><span class="ident" id="6060809">FieldList</span>&nbsp;<span class="op" id="6060819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060822">if</span>&nbsp;<span class="ident" id="6060825"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6060826">.</span><span class="ident" id="6060827">trace</span>&nbsp;<span class="op" id="6060833">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060837">defer</span>&nbsp;<span class="ident" id="6060843"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6060845">(</span><span class="ident" id="6060846"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6060851">(</span><span class="ident" id="6060852"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6060853">,</span>&nbsp;<span class="string" id="6060855">&#34;Parameters&#34;</span><span class="op" id="6060867">)</span><span class="op" id="6060868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6060871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060875">var</span>&nbsp;<span class="ident" id="6060879">params</span>&nbsp;<span class="op" id="6060886">[</span><span class="op" id="6060887">]</span><span class="op" id="6060888">*</span><span class="ident" id="6060889"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6060892">.</span><span class="ident" id="6060893">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060900">lparen</span>&nbsp;<span class="op" id="6060907">:=</span>&nbsp;<span class="ident" id="6060910"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6060911">.</span><span class="ident" id="6060912">expect</span><span class="op" id="6060918">(</span><span class="ident" id="6060919"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6060924">.</span><span class="ident" id="6060925">LPAREN</span><span class="op" id="6060931">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6060934">if</span>&nbsp;<span class="ident" id="6060937"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6060938">.</span><span class="ident" id="6060939">tok</span>&nbsp;<span class="op" id="6060943">!=</span>&nbsp;<span class="ident" id="6060946"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6060951">.</span><span class="ident" id="6060952">RPAREN</span>&nbsp;<span class="op" id="6060959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6060963"><a href="/go/parser/parser.go.html#6060879">params</a></span>&nbsp;<span class="op" id="6060970">=</span>&nbsp;<span class="ident" id="6060972"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6060973">.</span><span class="ident" id="6060974">parseParameterList</span><span class="op" id="6060992">(</span><span class="ident" id="6060993"><a href="/go/parser/parser.go.html#6060769">scope</a></span><span class="op" id="6060998">,</span>&nbsp;<span class="ident" id="6061000"><a href="/go/parser/parser.go.html#6060787">ellipsisOk</a></span><span class="op" id="6061010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061016">rparen</span>&nbsp;<span class="op" id="6061023">:=</span>&nbsp;<span class="ident" id="6061026"><a href="/go/parser/parser.go.html#6060742">p</a></span><span class="op" id="6061027">.</span><span class="ident" id="6061028">expect</span><span class="op" id="6061034">(</span><span class="ident" id="6061035"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6061040">.</span><span class="ident" id="6061041">RPAREN</span><span class="op" id="6061047">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061051">return</span>&nbsp;<span class="op" id="6061058">&amp;</span><span class="ident" id="6061059"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061062">.</span><span class="ident" id="6061063">FieldList</span><span class="op" id="6061072">{</span><span class="ident" id="6061073">Opening</span><span class="op" id="6061080">:</span>&nbsp;<span class="ident" id="6061082"><a href="/go/parser/parser.go.html#6060900">lparen</a></span><span class="op" id="6061088">,</span>&nbsp;<span class="ident" id="6061090">List</span><span class="op" id="6061094">:</span>&nbsp;<span class="ident" id="6061096"><a href="/go/parser/parser.go.html#6060879">params</a></span><span class="op" id="6061102">,</span>&nbsp;<span class="ident" id="6061104">Closing</span><span class="op" id="6061111">:</span>&nbsp;<span class="ident" id="6061113"><a href="/go/parser/parser.go.html#6061016">rparen</a></span><span class="op" id="6061119">}</span><br>
<span class="lineno"></span><span class="op" id="6061121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6061124">func</span>&nbsp;<span class="op" id="6061129">(</span><span class="ident" id="6061130">p</span>&nbsp;<span class="op" id="6061132">*</span><span class="ident" id="6061133"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6061139">)</span>&nbsp;<span class="ident" id="6061141">parseResult</span><span class="op" id="6061152">(</span><span class="ident" id="6061153">scope</span>&nbsp;<span class="op" id="6061159">*</span><span class="ident" id="6061160"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061163">.</span><span class="ident" id="6061164">Scope</span><span class="op" id="6061169">)</span>&nbsp;<span class="op" id="6061171">*</span><span class="ident" id="6061172"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061175">.</span><span class="ident" id="6061176">FieldList</span>&nbsp;<span class="op" id="6061186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061189">if</span>&nbsp;<span class="ident" id="6061192"><a href="/go/parser/parser.go.html#6061130">p</a></span><span class="op" id="6061193">.</span><span class="ident" id="6061194">trace</span>&nbsp;<span class="op" id="6061200">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061204">defer</span>&nbsp;<span class="ident" id="6061210"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6061212">(</span><span class="ident" id="6061213"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6061218">(</span><span class="ident" id="6061219"><a href="/go/parser/parser.go.html#6061130">p</a></span><span class="op" id="6061220">,</span>&nbsp;<span class="string" id="6061222">&#34;Result&#34;</span><span class="op" id="6061230">)</span><span class="op" id="6061231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061238">if</span>&nbsp;<span class="ident" id="6061241"><a href="/go/parser/parser.go.html#6061130">p</a></span><span class="op" id="6061242">.</span><span class="ident" id="6061243">tok</span>&nbsp;<span class="op" id="6061247">==</span>&nbsp;<span class="ident" id="6061250"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6061255">.</span><span class="ident" id="6061256">LPAREN</span>&nbsp;<span class="op" id="6061263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061267">return</span>&nbsp;<span class="ident" id="6061274"><a href="/go/parser/parser.go.html#6061130">p</a></span><span class="op" id="6061275">.</span><span class="ident" id="6061276">parseParameters</span><span class="op" id="6061291">(</span><span class="ident" id="6061292"><a href="/go/parser/parser.go.html#6061153">scope</a></span><span class="op" id="6061297">,</span>&nbsp;<span class="ident" id="6061299">false</span><span class="op" id="6061304">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061311">typ</span>&nbsp;<span class="op" id="6061315">:=</span>&nbsp;<span class="ident" id="6061318"><a href="/go/parser/parser.go.html#6061130">p</a></span><span class="op" id="6061319">.</span><span class="ident" id="6061320">tryType</span><span class="op" id="6061327">(</span><span class="op" id="6061328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061331">if</span>&nbsp;<span class="ident" id="6061334"><a href="/go/parser/parser.go.html#6061311">typ</a></span>&nbsp;<span class="op" id="6061338">!=</span>&nbsp;<span class="ident" id="6061341">nil</span>&nbsp;<span class="op" id="6061345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061349">list</span>&nbsp;<span class="op" id="6061354">:=</span>&nbsp;<span class="builtinfunc" id="6061357">make</span><span class="op" id="6061361">(</span><span class="op" id="6061362">[</span><span class="op" id="6061363">]</span><span class="op" id="6061364">*</span><span class="ident" id="6061365"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061368">.</span><span class="ident" id="6061369">Field</span><span class="op" id="6061374">,</span>&nbsp;<span class="num" id="6061376">1</span><span class="op" id="6061377">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061381"><a href="/go/parser/parser.go.html#6061349">list</a></span><span class="op" id="6061385">[</span><span class="num" id="6061386">0</span><span class="op" id="6061387">]</span>&nbsp;<span class="op" id="6061389">=</span>&nbsp;<span class="op" id="6061391">&amp;</span><span class="ident" id="6061392"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061395">.</span><span class="ident" id="6061396">Field</span><span class="op" id="6061401">{</span><span class="ident" id="6061402">Type</span><span class="op" id="6061406">:</span>&nbsp;<span class="ident" id="6061408"><a href="/go/parser/parser.go.html#6061311">typ</a></span><span class="op" id="6061411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061415">return</span>&nbsp;<span class="op" id="6061422">&amp;</span><span class="ident" id="6061423"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061426">.</span><span class="ident" id="6061427">FieldList</span><span class="op" id="6061436">{</span><span class="ident" id="6061437">List</span><span class="op" id="6061441">:</span>&nbsp;<span class="ident" id="6061443"><a href="/go/parser/parser.go.html#6061349">list</a></span><span class="op" id="6061447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061454">return</span>&nbsp;<span class="ident" id="6061461">nil</span><br>
<span class="lineno">890</span><span class="op" id="6061465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6061468">func</span>&nbsp;<span class="op" id="6061473">(</span><span class="ident" id="6061474">p</span>&nbsp;<span class="op" id="6061476">*</span><span class="ident" id="6061477"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6061483">)</span>&nbsp;<span class="ident" id="6061485">parseSignature</span><span class="op" id="6061499">(</span><span class="ident" id="6061500">scope</span>&nbsp;<span class="op" id="6061506">*</span><span class="ident" id="6061507"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061510">.</span><span class="ident" id="6061511">Scope</span><span class="op" id="6061516">)</span>&nbsp;<span class="op" id="6061518">(</span><span class="ident" id="6061519">params</span><span class="op" id="6061525">,</span>&nbsp;<span class="ident" id="6061527">results</span>&nbsp;<span class="op" id="6061535">*</span><span class="ident" id="6061536"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061539">.</span><span class="ident" id="6061540">FieldList</span><span class="op" id="6061549">)</span>&nbsp;<span class="op" id="6061551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061554">if</span>&nbsp;<span class="ident" id="6061557"><a href="/go/parser/parser.go.html#6061474">p</a></span><span class="op" id="6061558">.</span><span class="ident" id="6061559">trace</span>&nbsp;<span class="op" id="6061565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061569">defer</span>&nbsp;<span class="ident" id="6061575"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6061577">(</span><span class="ident" id="6061578"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6061583">(</span><span class="ident" id="6061584"><a href="/go/parser/parser.go.html#6061474">p</a></span><span class="op" id="6061585">,</span>&nbsp;<span class="string" id="6061587">&#34;Signature&#34;</span><span class="op" id="6061598">)</span><span class="op" id="6061599">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061606"><a href="/go/parser/parser.go.html#6061519">params</a></span>&nbsp;<span class="op" id="6061613">=</span>&nbsp;<span class="ident" id="6061615"><a href="/go/parser/parser.go.html#6061474">p</a></span><span class="op" id="6061616">.</span><span class="ident" id="6061617">parseParameters</span><span class="op" id="6061632">(</span><span class="ident" id="6061633"><a href="/go/parser/parser.go.html#6061500">scope</a></span><span class="op" id="6061638">,</span>&nbsp;<span class="ident" id="6061640">true</span><span class="op" id="6061644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061647"><a href="/go/parser/parser.go.html#6061527">results</a></span>&nbsp;<span class="op" id="6061655">=</span>&nbsp;<span class="ident" id="6061657"><a href="/go/parser/parser.go.html#6061474">p</a></span><span class="op" id="6061658">.</span><span class="ident" id="6061659">parseResult</span><span class="op" id="6061670">(</span><span class="ident" id="6061671"><a href="/go/parser/parser.go.html#6061500">scope</a></span><span class="op" id="6061676">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061680">return</span><br>
<span class="lineno"></span><span class="op" id="6061687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6061690">func</span>&nbsp;<span class="op" id="6061695">(</span><span class="ident" id="6061696">p</span>&nbsp;<span class="op" id="6061698">*</span><span class="ident" id="6061699"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6061705">)</span>&nbsp;<span class="ident" id="6061707">parseFuncType</span><span class="op" id="6061720">(</span><span class="op" id="6061721">)</span>&nbsp;<span class="op" id="6061723">(</span><span class="op" id="6061724">*</span><span class="ident" id="6061725"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061728">.</span><span class="ident" id="6061729">FuncType</span><span class="op" id="6061737">,</span>&nbsp;<span class="op" id="6061739">*</span><span class="ident" id="6061740"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061743">.</span><span class="ident" id="6061744">Scope</span><span class="op" id="6061749">)</span>&nbsp;<span class="op" id="6061751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061754">if</span>&nbsp;<span class="ident" id="6061757"><a href="/go/parser/parser.go.html#6061696">p</a></span><span class="op" id="6061758">.</span><span class="ident" id="6061759">trace</span>&nbsp;<span class="op" id="6061765">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061769">defer</span>&nbsp;<span class="ident" id="6061775"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6061777">(</span><span class="ident" id="6061778"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6061783">(</span><span class="ident" id="6061784"><a href="/go/parser/parser.go.html#6061696">p</a></span><span class="op" id="6061785">,</span>&nbsp;<span class="string" id="6061787">&#34;FuncType&#34;</span><span class="op" id="6061797">)</span><span class="op" id="6061798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6061801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061805">pos</span>&nbsp;<span class="op" id="6061809">:=</span>&nbsp;<span class="ident" id="6061812"><a href="/go/parser/parser.go.html#6061696">p</a></span><span class="op" id="6061813">.</span><span class="ident" id="6061814">expect</span><span class="op" id="6061820">(</span><span class="ident" id="6061821"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6061826">.</span><span class="ident" id="6061827">FUNC</span><span class="op" id="6061831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061834">scope</span>&nbsp;<span class="op" id="6061840">:=</span>&nbsp;<span class="ident" id="6061843"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061846">.</span><span class="ident" id="6061847">NewScope</span><span class="op" id="6061855">(</span><span class="ident" id="6061856"><a href="/go/parser/parser.go.html#6061696">p</a></span><span class="op" id="6061857">.</span><span class="ident" id="6061858">topScope</span><span class="op" id="6061866">)</span>&nbsp;<span class="comment" id="6061868">//&nbsp;function&nbsp;scope</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6061887">params</span><span class="op" id="6061893">,</span>&nbsp;<span class="ident" id="6061895">results</span>&nbsp;<span class="op" id="6061903">:=</span>&nbsp;<span class="ident" id="6061906"><a href="/go/parser/parser.go.html#6061696">p</a></span><span class="op" id="6061907">.</span><span class="ident" id="6061908">parseSignature</span><span class="op" id="6061922">(</span><span class="ident" id="6061923"><a href="/go/parser/parser.go.html#6061834">scope</a></span><span class="op" id="6061928">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6061932">return</span>&nbsp;<span class="op" id="6061939">&amp;</span><span class="ident" id="6061940"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6061943">.</span><span class="ident" id="6061944">FuncType</span><span class="op" id="6061952">{</span><span class="ident" id="6061953">Func</span><span class="op" id="6061957">:</span>&nbsp;<span class="ident" id="6061959"><a href="/go/parser/parser.go.html#6061805">pos</a></span><span class="op" id="6061962">,</span>&nbsp;<span class="ident" id="6061964">Params</span><span class="op" id="6061970">:</span>&nbsp;<span class="ident" id="6061972"><a href="/go/parser/parser.go.html#6061887">params</a></span><span class="op" id="6061978">,</span>&nbsp;<span class="ident" id="6061980">Results</span><span class="op" id="6061987">:</span>&nbsp;<span class="ident" id="6061989"><a href="/go/parser/parser.go.html#6061895">results</a></span><span class="op" id="6061996">}</span><span class="op" id="6061997">,</span>&nbsp;<span class="ident" id="6061999"><a href="/go/parser/parser.go.html#6061834">scope</a></span><br>
<span class="lineno"></span><span class="op" id="6062005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="keyword" id="6062008">func</span>&nbsp;<span class="op" id="6062013">(</span><span class="ident" id="6062014">p</span>&nbsp;<span class="op" id="6062016">*</span><span class="ident" id="6062017"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6062023">)</span>&nbsp;<span class="ident" id="6062025">parseMethodSpec</span><span class="op" id="6062040">(</span><span class="ident" id="6062041">scope</span>&nbsp;<span class="op" id="6062047">*</span><span class="ident" id="6062048"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062051">.</span><span class="ident" id="6062052">Scope</span><span class="op" id="6062057">)</span>&nbsp;<span class="op" id="6062059">*</span><span class="ident" id="6062060"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062063">.</span><span class="ident" id="6062064">Field</span>&nbsp;<span class="op" id="6062070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062073">if</span>&nbsp;<span class="ident" id="6062076"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062077">.</span><span class="ident" id="6062078">trace</span>&nbsp;<span class="op" id="6062084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062088">defer</span>&nbsp;<span class="ident" id="6062094"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6062096">(</span><span class="ident" id="6062097"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6062102">(</span><span class="ident" id="6062103"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062104">,</span>&nbsp;<span class="string" id="6062106">&#34;MethodSpec&#34;</span><span class="op" id="6062118">)</span><span class="op" id="6062119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062126">doc</span>&nbsp;<span class="op" id="6062130">:=</span>&nbsp;<span class="ident" id="6062133"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062134">.</span><span class="ident" id="6062135">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062148">var</span>&nbsp;<span class="ident" id="6062152">idents</span>&nbsp;<span class="op" id="6062159">[</span><span class="op" id="6062160">]</span><span class="op" id="6062161">*</span><span class="ident" id="6062162"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062165">.</span><span class="ident" id="6062166">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062173">var</span>&nbsp;<span class="ident" id="6062177">typ</span>&nbsp;<span class="ident" id="6062181"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062184">.</span><span class="ident" id="6062185">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062191">x</span>&nbsp;<span class="op" id="6062193">:=</span>&nbsp;<span class="ident" id="6062196"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062197">.</span><span class="ident" id="6062198">parseTypeName</span><span class="op" id="6062211">(</span><span class="op" id="6062212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062215">if</span>&nbsp;<span class="ident" id="6062218">ident</span><span class="op" id="6062223">,</span>&nbsp;<span class="ident" id="6062225">isIdent</span>&nbsp;<span class="op" id="6062233">:=</span>&nbsp;<span class="ident" id="6062236"><a href="/go/parser/parser.go.html#6062191">x</a></span><span class="op" id="6062237">.</span><span class="op" id="6062238">(</span><span class="op" id="6062239">*</span><span class="ident" id="6062240"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062243">.</span><span class="ident" id="6062244">Ident</span><span class="op" id="6062249">)</span><span class="op" id="6062250">;</span>&nbsp;<span class="ident" id="6062252"><a href="/go/parser/parser.go.html#6062225">isIdent</a></span>&nbsp;<span class="op" id="6062260">&amp;&amp;</span>&nbsp;<span class="ident" id="6062263"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062264">.</span><span class="ident" id="6062265">tok</span>&nbsp;<span class="op" id="6062269">==</span>&nbsp;<span class="ident" id="6062272"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6062277">.</span><span class="ident" id="6062278">LPAREN</span>&nbsp;<span class="op" id="6062285">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6062289">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062301"><a href="/go/parser/parser.go.html#6062152">idents</a></span>&nbsp;<span class="op" id="6062308">=</span>&nbsp;<span class="op" id="6062310">[</span><span class="op" id="6062311">]</span><span class="op" id="6062312">*</span><span class="ident" id="6062313"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062316">.</span><span class="ident" id="6062317">Ident</span><span class="op" id="6062322">{</span><span class="ident" id="6062323"><a href="/go/parser/parser.go.html#6062218">ident</a></span><span class="op" id="6062328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062332">scope</span>&nbsp;<span class="op" id="6062338">:=</span>&nbsp;<span class="ident" id="6062341"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062344">.</span><span class="ident" id="6062345">NewScope</span><span class="op" id="6062353">(</span><span class="ident" id="6062354">nil</span><span class="op" id="6062357">)</span>&nbsp;<span class="comment" id="6062359">//&nbsp;method&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062377">params</span><span class="op" id="6062383">,</span>&nbsp;<span class="ident" id="6062385">results</span>&nbsp;<span class="op" id="6062393">:=</span>&nbsp;<span class="ident" id="6062396"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062397">.</span><span class="ident" id="6062398">parseSignature</span><span class="op" id="6062412">(</span><span class="ident" id="6062413"><a href="/go/parser/parser.go.html#6062332">scope</a></span><span class="op" id="6062418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062422"><a href="/go/parser/parser.go.html#6062177">typ</a></span>&nbsp;<span class="op" id="6062426">=</span>&nbsp;<span class="op" id="6062428">&amp;</span><span class="ident" id="6062429"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062432">.</span><span class="ident" id="6062433">FuncType</span><span class="op" id="6062441">{</span><span class="ident" id="6062442">Func</span><span class="op" id="6062446">:</span>&nbsp;<span class="ident" id="6062448"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6062453">.</span><span class="ident" id="6062454">NoPos</span><span class="op" id="6062459">,</span>&nbsp;<span class="ident" id="6062461">Params</span><span class="op" id="6062467">:</span>&nbsp;<span class="ident" id="6062469"><a href="/go/parser/parser.go.html#6062377">params</a></span><span class="op" id="6062475">,</span>&nbsp;<span class="ident" id="6062477">Results</span><span class="op" id="6062484">:</span>&nbsp;<span class="ident" id="6062486"><a href="/go/parser/parser.go.html#6062385">results</a></span><span class="op" id="6062493">}</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062496">}</span>&nbsp;<span class="keyword" id="6062498">else</span>&nbsp;<span class="op" id="6062503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6062507">//&nbsp;embedded&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062531"><a href="/go/parser/parser.go.html#6062177">typ</a></span>&nbsp;<span class="op" id="6062535">=</span>&nbsp;<span class="ident" id="6062537"><a href="/go/parser/parser.go.html#6062191">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062541"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062542">.</span><span class="ident" id="6062543">resolve</span><span class="op" id="6062550">(</span><span class="ident" id="6062551"><a href="/go/parser/parser.go.html#6062177">typ</a></span><span class="op" id="6062554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062557">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062560"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062561">.</span><span class="ident" id="6062562">expectSemi</span><span class="op" id="6062572">(</span><span class="op" id="6062573">)</span>&nbsp;<span class="comment" id="6062575">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062616">spec</span>&nbsp;<span class="op" id="6062621">:=</span>&nbsp;<span class="op" id="6062624">&amp;</span><span class="ident" id="6062625"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062628">.</span><span class="ident" id="6062629">Field</span><span class="op" id="6062634">{</span><span class="ident" id="6062635">Doc</span><span class="op" id="6062638">:</span>&nbsp;<span class="ident" id="6062640"><a href="/go/parser/parser.go.html#6062126">doc</a></span><span class="op" id="6062643">,</span>&nbsp;<span class="ident" id="6062645">Names</span><span class="op" id="6062650">:</span>&nbsp;<span class="ident" id="6062652"><a href="/go/parser/parser.go.html#6062152">idents</a></span><span class="op" id="6062658">,</span>&nbsp;<span class="ident" id="6062660">Type</span><span class="op" id="6062664">:</span>&nbsp;<span class="ident" id="6062666"><a href="/go/parser/parser.go.html#6062177">typ</a></span><span class="op" id="6062669">,</span>&nbsp;<span class="ident" id="6062671">Comment</span><span class="op" id="6062678">:</span>&nbsp;<span class="ident" id="6062680"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062681">.</span><span class="ident" id="6062682">lineComment</span><span class="op" id="6062693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062696"><a href="/go/parser/parser.go.html#6062014">p</a></span><span class="op" id="6062697">.</span><span class="ident" id="6062698">declare</span><span class="op" id="6062705">(</span><span class="ident" id="6062706"><a href="/go/parser/parser.go.html#6062616">spec</a></span><span class="op" id="6062710">,</span>&nbsp;<span class="ident" id="6062712">nil</span><span class="op" id="6062715">,</span>&nbsp;<span class="ident" id="6062717"><a href="/go/parser/parser.go.html#6062041">scope</a></span><span class="op" id="6062722">,</span>&nbsp;<span class="ident" id="6062724"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062727">.</span><span class="ident" id="6062728">Fun</span><span class="op" id="6062731">,</span>&nbsp;<span class="ident" id="6062733"><a href="/go/parser/parser.go.html#6062152">idents</a></span><span class="op" id="6062739">...</span><span class="op" id="6062742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062746">return</span>&nbsp;<span class="ident" id="6062753"><a href="/go/parser/parser.go.html#6062616">spec</a></span><br>
<span class="lineno"></span><span class="op" id="6062758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6062761">func</span>&nbsp;<span class="op" id="6062766">(</span><span class="ident" id="6062767">p</span>&nbsp;<span class="op" id="6062769">*</span><span class="ident" id="6062770"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6062776">)</span>&nbsp;<span class="ident" id="6062778">parseInterfaceType</span><span class="op" id="6062796">(</span><span class="op" id="6062797">)</span>&nbsp;<span class="op" id="6062799">*</span><span class="ident" id="6062800"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062803">.</span><span class="ident" id="6062804">InterfaceType</span>&nbsp;<span class="op" id="6062818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062821">if</span>&nbsp;<span class="ident" id="6062824"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6062825">.</span><span class="ident" id="6062826">trace</span>&nbsp;<span class="op" id="6062832">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062836">defer</span>&nbsp;<span class="ident" id="6062842"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6062844">(</span><span class="ident" id="6062845"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6062850">(</span><span class="ident" id="6062851"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6062852">,</span>&nbsp;<span class="string" id="6062854">&#34;InterfaceType&#34;</span><span class="op" id="6062869">)</span><span class="op" id="6062870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6062873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062877">pos</span>&nbsp;<span class="op" id="6062881">:=</span>&nbsp;<span class="ident" id="6062884"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6062885">.</span><span class="ident" id="6062886">expect</span><span class="op" id="6062892">(</span><span class="ident" id="6062893"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6062898">.</span><span class="ident" id="6062899">INTERFACE</span><span class="op" id="6062908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062911">lbrace</span>&nbsp;<span class="op" id="6062918">:=</span>&nbsp;<span class="ident" id="6062921"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6062922">.</span><span class="ident" id="6062923">expect</span><span class="op" id="6062929">(</span><span class="ident" id="6062930"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6062935">.</span><span class="ident" id="6062936">LBRACE</span><span class="op" id="6062942">)</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6062945">scope</span>&nbsp;<span class="op" id="6062951">:=</span>&nbsp;<span class="ident" id="6062954"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6062957">.</span><span class="ident" id="6062958">NewScope</span><span class="op" id="6062966">(</span><span class="ident" id="6062967">nil</span><span class="op" id="6062970">)</span>&nbsp;<span class="comment" id="6062972">//&nbsp;interface&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6062992">var</span>&nbsp;<span class="ident" id="6062996">list</span>&nbsp;<span class="op" id="6063001">[</span><span class="op" id="6063002">]</span><span class="op" id="6063003">*</span><span class="ident" id="6063004"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063007">.</span><span class="ident" id="6063008">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063015">for</span>&nbsp;<span class="ident" id="6063019"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6063020">.</span><span class="ident" id="6063021">tok</span>&nbsp;<span class="op" id="6063025">==</span>&nbsp;<span class="ident" id="6063028"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063033">.</span><span class="ident" id="6063034">IDENT</span>&nbsp;<span class="op" id="6063040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063044"><a href="/go/parser/parser.go.html#6062996">list</a></span>&nbsp;<span class="op" id="6063049">=</span>&nbsp;<span class="builtinfunc" id="6063051">append</span><span class="op" id="6063057">(</span><span class="ident" id="6063058"><a href="/go/parser/parser.go.html#6062996">list</a></span><span class="op" id="6063062">,</span>&nbsp;<span class="ident" id="6063064"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6063065">.</span><span class="ident" id="6063066">parseMethodSpec</span><span class="op" id="6063081">(</span><span class="ident" id="6063082"><a href="/go/parser/parser.go.html#6062945">scope</a></span><span class="op" id="6063087">)</span><span class="op" id="6063088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063091">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063094">rbrace</span>&nbsp;<span class="op" id="6063101">:=</span>&nbsp;<span class="ident" id="6063104"><a href="/go/parser/parser.go.html#6062767">p</a></span><span class="op" id="6063105">.</span><span class="ident" id="6063106">expect</span><span class="op" id="6063112">(</span><span class="ident" id="6063113"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063118">.</span><span class="ident" id="6063119">RBRACE</span><span class="op" id="6063125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063129">return</span>&nbsp;<span class="op" id="6063136">&amp;</span><span class="ident" id="6063137"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063140">.</span><span class="ident" id="6063141">InterfaceType</span><span class="op" id="6063154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063158">Interface</span><span class="op" id="6063167">:</span>&nbsp;<span class="ident" id="6063169"><a href="/go/parser/parser.go.html#6062877">pos</a></span><span class="op" id="6063172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063176">Methods</span><span class="op" id="6063183">:</span>&nbsp;<span class="op" id="6063185">&amp;</span><span class="ident" id="6063186"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063189">.</span><span class="ident" id="6063190">FieldList</span><span class="op" id="6063199">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063204">Opening</span><span class="op" id="6063211">:</span>&nbsp;<span class="ident" id="6063213"><a href="/go/parser/parser.go.html#6062911">lbrace</a></span><span class="op" id="6063219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063224">List</span><span class="op" id="6063228">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6063233"><a href="/go/parser/parser.go.html#6062996">list</a></span><span class="op" id="6063237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063242">Closing</span><span class="op" id="6063249">:</span>&nbsp;<span class="ident" id="6063251"><a href="/go/parser/parser.go.html#6063094">rbrace</a></span><span class="op" id="6063257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063261">}</span><span class="op" id="6063262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063265">}</span><br>
<span class="lineno">965</span><span class="op" id="6063267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6063270">func</span>&nbsp;<span class="op" id="6063275">(</span><span class="ident" id="6063276">p</span>&nbsp;<span class="op" id="6063278">*</span><span class="ident" id="6063279"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6063285">)</span>&nbsp;<span class="ident" id="6063287">parseMapType</span><span class="op" id="6063299">(</span><span class="op" id="6063300">)</span>&nbsp;<span class="op" id="6063302">*</span><span class="ident" id="6063303"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063306">.</span><span class="ident" id="6063307">MapType</span>&nbsp;<span class="op" id="6063315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063318">if</span>&nbsp;<span class="ident" id="6063321"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063322">.</span><span class="ident" id="6063323">trace</span>&nbsp;<span class="op" id="6063329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063333">defer</span>&nbsp;<span class="ident" id="6063339"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6063341">(</span><span class="ident" id="6063342"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6063347">(</span><span class="ident" id="6063348"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063349">,</span>&nbsp;<span class="string" id="6063351">&#34;MapType&#34;</span><span class="op" id="6063360">)</span><span class="op" id="6063361">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063368">pos</span>&nbsp;<span class="op" id="6063372">:=</span>&nbsp;<span class="ident" id="6063375"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063376">.</span><span class="ident" id="6063377">expect</span><span class="op" id="6063383">(</span><span class="ident" id="6063384"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063389">.</span><span class="ident" id="6063390">MAP</span><span class="op" id="6063393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063396"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063397">.</span><span class="ident" id="6063398">expect</span><span class="op" id="6063404">(</span><span class="ident" id="6063405"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063410">.</span><span class="ident" id="6063411">LBRACK</span><span class="op" id="6063417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063420">key</span>&nbsp;<span class="op" id="6063424">:=</span>&nbsp;<span class="ident" id="6063427"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063428">.</span><span class="ident" id="6063429">parseType</span><span class="op" id="6063438">(</span><span class="op" id="6063439">)</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063442"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063443">.</span><span class="ident" id="6063444">expect</span><span class="op" id="6063450">(</span><span class="ident" id="6063451"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063456">.</span><span class="ident" id="6063457">RBRACK</span><span class="op" id="6063463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063466">value</span>&nbsp;<span class="op" id="6063472">:=</span>&nbsp;<span class="ident" id="6063475"><a href="/go/parser/parser.go.html#6063276">p</a></span><span class="op" id="6063476">.</span><span class="ident" id="6063477">parseType</span><span class="op" id="6063486">(</span><span class="op" id="6063487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063491">return</span>&nbsp;<span class="op" id="6063498">&amp;</span><span class="ident" id="6063499"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063502">.</span><span class="ident" id="6063503">MapType</span><span class="op" id="6063510">{</span><span class="ident" id="6063511">Map</span><span class="op" id="6063514">:</span>&nbsp;<span class="ident" id="6063516"><a href="/go/parser/parser.go.html#6063368">pos</a></span><span class="op" id="6063519">,</span>&nbsp;<span class="ident" id="6063521">Key</span><span class="op" id="6063524">:</span>&nbsp;<span class="ident" id="6063526"><a href="/go/parser/parser.go.html#6063420">key</a></span><span class="op" id="6063529">,</span>&nbsp;<span class="ident" id="6063531">Value</span><span class="op" id="6063536">:</span>&nbsp;<span class="ident" id="6063538"><a href="/go/parser/parser.go.html#6063466">value</a></span><span class="op" id="6063543">}</span><br>
<span class="lineno"></span><span class="op" id="6063545">}</span><br>
<span class="lineno">980</span><br>
<span class="lineno"></span><span class="keyword" id="6063548">func</span>&nbsp;<span class="op" id="6063553">(</span><span class="ident" id="6063554">p</span>&nbsp;<span class="op" id="6063556">*</span><span class="ident" id="6063557"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6063563">)</span>&nbsp;<span class="ident" id="6063565">parseChanType</span><span class="op" id="6063578">(</span><span class="op" id="6063579">)</span>&nbsp;<span class="op" id="6063581">*</span><span class="ident" id="6063582"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063585">.</span><span class="ident" id="6063586">ChanType</span>&nbsp;<span class="op" id="6063595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063598">if</span>&nbsp;<span class="ident" id="6063601"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063602">.</span><span class="ident" id="6063603">trace</span>&nbsp;<span class="op" id="6063609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063613">defer</span>&nbsp;<span class="ident" id="6063619"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6063621">(</span><span class="ident" id="6063622"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6063627">(</span><span class="ident" id="6063628"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063629">,</span>&nbsp;<span class="string" id="6063631">&#34;ChanType&#34;</span><span class="op" id="6063641">)</span><span class="op" id="6063642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063645">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063649">pos</span>&nbsp;<span class="op" id="6063653">:=</span>&nbsp;<span class="ident" id="6063656"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063657">.</span><span class="ident" id="6063658">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063663">dir</span>&nbsp;<span class="op" id="6063667">:=</span>&nbsp;<span class="ident" id="6063670"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063673">.</span><span class="ident" id="6063674">SEND</span>&nbsp;<span class="op" id="6063679">|</span>&nbsp;<span class="ident" id="6063681"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063684">.</span><span class="ident" id="6063685">RECV</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063691">var</span>&nbsp;<span class="ident" id="6063695">arrow</span>&nbsp;<span class="ident" id="6063701"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063706">.</span><span class="ident" id="6063707">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063712">if</span>&nbsp;<span class="ident" id="6063715"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063716">.</span><span class="ident" id="6063717">tok</span>&nbsp;<span class="op" id="6063721">==</span>&nbsp;<span class="ident" id="6063724"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063729">.</span><span class="ident" id="6063730">CHAN</span>&nbsp;<span class="op" id="6063735">{</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063739"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063740">.</span><span class="ident" id="6063741">next</span><span class="op" id="6063745">(</span><span class="op" id="6063746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063750">if</span>&nbsp;<span class="ident" id="6063753"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063754">.</span><span class="ident" id="6063755">tok</span>&nbsp;<span class="op" id="6063759">==</span>&nbsp;<span class="ident" id="6063762"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063767">.</span><span class="ident" id="6063768">ARROW</span>&nbsp;<span class="op" id="6063774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063779"><a href="/go/parser/parser.go.html#6063695">arrow</a></span>&nbsp;<span class="op" id="6063785">=</span>&nbsp;<span class="ident" id="6063787"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063788">.</span><span class="ident" id="6063789">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063796"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063797">.</span><span class="ident" id="6063798">next</span><span class="op" id="6063802">(</span><span class="op" id="6063803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063808"><a href="/go/parser/parser.go.html#6063663">dir</a></span>&nbsp;<span class="op" id="6063812">=</span>&nbsp;<span class="ident" id="6063814"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063817">.</span><span class="ident" id="6063818">SEND</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063828">}</span>&nbsp;<span class="keyword" id="6063830">else</span>&nbsp;<span class="op" id="6063835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063839"><a href="/go/parser/parser.go.html#6063695">arrow</a></span>&nbsp;<span class="op" id="6063845">=</span>&nbsp;<span class="ident" id="6063847"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063848">.</span><span class="ident" id="6063849">expect</span><span class="op" id="6063855">(</span><span class="ident" id="6063856"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063861">.</span><span class="ident" id="6063862">ARROW</span><span class="op" id="6063867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063871"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063872">.</span><span class="ident" id="6063873">expect</span><span class="op" id="6063879">(</span><span class="ident" id="6063880"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6063885">.</span><span class="ident" id="6063886">CHAN</span><span class="op" id="6063890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063894"><a href="/go/parser/parser.go.html#6063663">dir</a></span>&nbsp;<span class="op" id="6063898">=</span>&nbsp;<span class="ident" id="6063900"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063903">.</span><span class="ident" id="6063904">RECV</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6063910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6063913">value</span>&nbsp;<span class="op" id="6063919">:=</span>&nbsp;<span class="ident" id="6063922"><a href="/go/parser/parser.go.html#6063554">p</a></span><span class="op" id="6063923">.</span><span class="ident" id="6063924">parseType</span><span class="op" id="6063933">(</span><span class="op" id="6063934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6063938">return</span>&nbsp;<span class="op" id="6063945">&amp;</span><span class="ident" id="6063946"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6063949">.</span><span class="ident" id="6063950">ChanType</span><span class="op" id="6063958">{</span><span class="ident" id="6063959">Begin</span><span class="op" id="6063964">:</span>&nbsp;<span class="ident" id="6063966"><a href="/go/parser/parser.go.html#6063649">pos</a></span><span class="op" id="6063969">,</span>&nbsp;<span class="ident" id="6063971">Arrow</span><span class="op" id="6063976">:</span>&nbsp;<span class="ident" id="6063978"><a href="/go/parser/parser.go.html#6063695">arrow</a></span><span class="op" id="6063983">,</span>&nbsp;<span class="ident" id="6063985">Dir</span><span class="op" id="6063988">:</span>&nbsp;<span class="ident" id="6063990"><a href="/go/parser/parser.go.html#6063663">dir</a></span><span class="op" id="6063993">,</span>&nbsp;<span class="ident" id="6063995">Value</span><span class="op" id="6064000">:</span>&nbsp;<span class="ident" id="6064002"><a href="/go/parser/parser.go.html#6063913">value</a></span><span class="op" id="6064007">}</span><br>
<span class="lineno"></span><span class="op" id="6064009">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="6064012">//&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6064067">func</span>&nbsp;<span class="op" id="6064072">(</span><span class="ident" id="6064073">p</span>&nbsp;<span class="op" id="6064075">*</span><span class="ident" id="6064076"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6064082">)</span>&nbsp;<span class="ident" id="6064084">tryIdentOrType</span><span class="op" id="6064098">(</span><span class="op" id="6064099">)</span>&nbsp;<span class="ident" id="6064101"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6064104">.</span><span class="ident" id="6064105">Expr</span>&nbsp;<span class="op" id="6064110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064113">switch</span>&nbsp;<span class="ident" id="6064120"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064121">.</span><span class="ident" id="6064122">tok</span>&nbsp;<span class="op" id="6064126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064129">case</span>&nbsp;<span class="ident" id="6064134"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064139">.</span><span class="ident" id="6064140">IDENT</span><span class="op" id="6064145">:</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064149">return</span>&nbsp;<span class="ident" id="6064156"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064157">.</span><span class="ident" id="6064158">parseTypeName</span><span class="op" id="6064171">(</span><span class="op" id="6064172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064175">case</span>&nbsp;<span class="ident" id="6064180"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064185">.</span><span class="ident" id="6064186">LBRACK</span><span class="op" id="6064192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064196">return</span>&nbsp;<span class="ident" id="6064203"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064204">.</span><span class="ident" id="6064205">parseArrayType</span><span class="op" id="6064219">(</span><span class="op" id="6064220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064223">case</span>&nbsp;<span class="ident" id="6064228"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064233">.</span><span class="ident" id="6064234">STRUCT</span><span class="op" id="6064240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064244">return</span>&nbsp;<span class="ident" id="6064251"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064252">.</span><span class="ident" id="6064253">parseStructType</span><span class="op" id="6064268">(</span><span class="op" id="6064269">)</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064272">case</span>&nbsp;<span class="ident" id="6064277"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064282">.</span><span class="ident" id="6064283">MUL</span><span class="op" id="6064286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064290">return</span>&nbsp;<span class="ident" id="6064297"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064298">.</span><span class="ident" id="6064299">parsePointerType</span><span class="op" id="6064315">(</span><span class="op" id="6064316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064319">case</span>&nbsp;<span class="ident" id="6064324"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064329">.</span><span class="ident" id="6064330">FUNC</span><span class="op" id="6064334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064338">typ</span><span class="op" id="6064341">,</span>&nbsp;<span class="ident" id="6064343">_</span>&nbsp;<span class="op" id="6064345">:=</span>&nbsp;<span class="ident" id="6064348"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064349">.</span><span class="ident" id="6064350">parseFuncType</span><span class="op" id="6064363">(</span><span class="op" id="6064364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064368">return</span>&nbsp;<span class="ident" id="6064375"><a href="/go/parser/parser.go.html#6064338">typ</a></span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064380">case</span>&nbsp;<span class="ident" id="6064385"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064390">.</span><span class="ident" id="6064391">INTERFACE</span><span class="op" id="6064400">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064404">return</span>&nbsp;<span class="ident" id="6064411"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064412">.</span><span class="ident" id="6064413">parseInterfaceType</span><span class="op" id="6064431">(</span><span class="op" id="6064432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064435">case</span>&nbsp;<span class="ident" id="6064440"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064445">.</span><span class="ident" id="6064446">MAP</span><span class="op" id="6064449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064453">return</span>&nbsp;<span class="ident" id="6064460"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064461">.</span><span class="ident" id="6064462">parseMapType</span><span class="op" id="6064474">(</span><span class="op" id="6064475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064478">case</span>&nbsp;<span class="ident" id="6064483"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064488">.</span><span class="ident" id="6064489">CHAN</span><span class="op" id="6064493">,</span>&nbsp;<span class="ident" id="6064495"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064500">.</span><span class="ident" id="6064501">ARROW</span><span class="op" id="6064506">:</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064510">return</span>&nbsp;<span class="ident" id="6064517"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064518">.</span><span class="ident" id="6064519">parseChanType</span><span class="op" id="6064532">(</span><span class="op" id="6064533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064536">case</span>&nbsp;<span class="ident" id="6064541"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064546">.</span><span class="ident" id="6064547">LPAREN</span><span class="op" id="6064553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064557">lparen</span>&nbsp;<span class="op" id="6064564">:=</span>&nbsp;<span class="ident" id="6064567"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064568">.</span><span class="ident" id="6064569">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064575"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064576">.</span><span class="ident" id="6064577">next</span><span class="op" id="6064581">(</span><span class="op" id="6064582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064586">typ</span>&nbsp;<span class="op" id="6064590">:=</span>&nbsp;<span class="ident" id="6064593"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064594">.</span><span class="ident" id="6064595">parseType</span><span class="op" id="6064604">(</span><span class="op" id="6064605">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064609">rparen</span>&nbsp;<span class="op" id="6064616">:=</span>&nbsp;<span class="ident" id="6064619"><a href="/go/parser/parser.go.html#6064073">p</a></span><span class="op" id="6064620">.</span><span class="ident" id="6064621">expect</span><span class="op" id="6064627">(</span><span class="ident" id="6064628"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6064633">.</span><span class="ident" id="6064634">RPAREN</span><span class="op" id="6064640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064644">return</span>&nbsp;<span class="op" id="6064651">&amp;</span><span class="ident" id="6064652"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6064655">.</span><span class="ident" id="6064656">ParenExpr</span><span class="op" id="6064665">{</span><span class="ident" id="6064666">Lparen</span><span class="op" id="6064672">:</span>&nbsp;<span class="ident" id="6064674"><a href="/go/parser/parser.go.html#6064557">lparen</a></span><span class="op" id="6064680">,</span>&nbsp;<span class="ident" id="6064682">X</span><span class="op" id="6064683">:</span>&nbsp;<span class="ident" id="6064685"><a href="/go/parser/parser.go.html#6064586">typ</a></span><span class="op" id="6064688">,</span>&nbsp;<span class="ident" id="6064690">Rparen</span><span class="op" id="6064696">:</span>&nbsp;<span class="ident" id="6064698"><a href="/go/parser/parser.go.html#6064609">rparen</a></span><span class="op" id="6064704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6064711">//&nbsp;no&nbsp;type&nbsp;found</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064729">return</span>&nbsp;<span class="ident" id="6064736">nil</span><br>
<span class="lineno"></span><span class="op" id="6064740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6064743">func</span>&nbsp;<span class="op" id="6064748">(</span><span class="ident" id="6064749">p</span>&nbsp;<span class="op" id="6064751">*</span><span class="ident" id="6064752"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6064758">)</span>&nbsp;<span class="ident" id="6064760">tryType</span><span class="op" id="6064767">(</span><span class="op" id="6064768">)</span>&nbsp;<span class="ident" id="6064770"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6064773">.</span><span class="ident" id="6064774">Expr</span>&nbsp;<span class="op" id="6064779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064782">typ</span>&nbsp;<span class="op" id="6064786">:=</span>&nbsp;<span class="ident" id="6064789"><a href="/go/parser/parser.go.html#6064749">p</a></span><span class="op" id="6064790">.</span><span class="ident" id="6064791">tryIdentOrType</span><span class="op" id="6064805">(</span><span class="op" id="6064806">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064809">if</span>&nbsp;<span class="ident" id="6064812"><a href="/go/parser/parser.go.html#6064782">typ</a></span>&nbsp;<span class="op" id="6064816">!=</span>&nbsp;<span class="ident" id="6064819">nil</span>&nbsp;<span class="op" id="6064823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6064827"><a href="/go/parser/parser.go.html#6064749">p</a></span><span class="op" id="6064828">.</span><span class="ident" id="6064829">resolve</span><span class="op" id="6064836">(</span><span class="ident" id="6064837"><a href="/go/parser/parser.go.html#6064782">typ</a></span><span class="op" id="6064840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6064843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6064846">return</span>&nbsp;<span class="ident" id="6064853"><a href="/go/parser/parser.go.html#6064782">typ</a></span><br>
<span class="lineno"></span><span class="op" id="6064857">}</span><br>
<span class="lineno">1045</span><br>
<span class="lineno"></span><span class="comment" id="6064860">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6064940">//&nbsp;Blocks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6064951">func</span>&nbsp;<span class="op" id="6064956">(</span><span class="ident" id="6064957">p</span>&nbsp;<span class="op" id="6064959">*</span><span class="ident" id="6064960"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6064966">)</span>&nbsp;<span class="ident" id="6064968">parseStmtList</span><span class="op" id="6064981">(</span><span class="op" id="6064982">)</span>&nbsp;<span class="op" id="6064984">(</span><span class="ident" id="6064985">list</span>&nbsp;<span class="op" id="6064990">[</span><span class="op" id="6064991">]</span><span class="ident" id="6064992"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6064995">.</span><span class="ident" id="6064996">Stmt</span><span class="op" id="6065000">)</span>&nbsp;<span class="op" id="6065002">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065005">if</span>&nbsp;<span class="ident" id="6065008"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065009">.</span><span class="ident" id="6065010">trace</span>&nbsp;<span class="op" id="6065016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065020">defer</span>&nbsp;<span class="ident" id="6065026"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6065028">(</span><span class="ident" id="6065029"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6065034">(</span><span class="ident" id="6065035"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065036">,</span>&nbsp;<span class="string" id="6065038">&#34;StatementList&#34;</span><span class="op" id="6065053">)</span><span class="op" id="6065054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065061">for</span>&nbsp;<span class="ident" id="6065065"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065066">.</span><span class="ident" id="6065067">tok</span>&nbsp;<span class="op" id="6065071">!=</span>&nbsp;<span class="ident" id="6065074"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065079">.</span><span class="ident" id="6065080">CASE</span>&nbsp;<span class="op" id="6065085">&amp;&amp;</span>&nbsp;<span class="ident" id="6065088"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065089">.</span><span class="ident" id="6065090">tok</span>&nbsp;<span class="op" id="6065094">!=</span>&nbsp;<span class="ident" id="6065097"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065102">.</span><span class="ident" id="6065103">DEFAULT</span>&nbsp;<span class="op" id="6065111">&amp;&amp;</span>&nbsp;<span class="ident" id="6065114"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065115">.</span><span class="ident" id="6065116">tok</span>&nbsp;<span class="op" id="6065120">!=</span>&nbsp;<span class="ident" id="6065123"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065128">.</span><span class="ident" id="6065129">RBRACE</span>&nbsp;<span class="op" id="6065136">&amp;&amp;</span>&nbsp;<span class="ident" id="6065139"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065140">.</span><span class="ident" id="6065141">tok</span>&nbsp;<span class="op" id="6065145">!=</span>&nbsp;<span class="ident" id="6065148"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065153">.</span><span class="ident" id="6065154">EOF</span>&nbsp;<span class="op" id="6065158">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065162"><a href="/go/parser/parser.go.html#6064985">list</a></span>&nbsp;<span class="op" id="6065167">=</span>&nbsp;<span class="builtinfunc" id="6065169">append</span><span class="op" id="6065175">(</span><span class="ident" id="6065176"><a href="/go/parser/parser.go.html#6064985">list</a></span><span class="op" id="6065180">,</span>&nbsp;<span class="ident" id="6065182"><a href="/go/parser/parser.go.html#6064957">p</a></span><span class="op" id="6065183">.</span><span class="ident" id="6065184">parseStmt</span><span class="op" id="6065193">(</span><span class="op" id="6065194">)</span><span class="op" id="6065195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065202">return</span><br>
<span class="lineno"></span><span class="op" id="6065209">}</span><br>
<span class="lineno">1060</span><br>
<span class="lineno"></span><span class="keyword" id="6065212">func</span>&nbsp;<span class="op" id="6065217">(</span><span class="ident" id="6065218">p</span>&nbsp;<span class="op" id="6065220">*</span><span class="ident" id="6065221"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6065227">)</span>&nbsp;<span class="ident" id="6065229">parseBody</span><span class="op" id="6065238">(</span><span class="ident" id="6065239">scope</span>&nbsp;<span class="op" id="6065245">*</span><span class="ident" id="6065246"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6065249">.</span><span class="ident" id="6065250">Scope</span><span class="op" id="6065255">)</span>&nbsp;<span class="op" id="6065257">*</span><span class="ident" id="6065258"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6065261">.</span><span class="ident" id="6065262">BlockStmt</span>&nbsp;<span class="op" id="6065272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065275">if</span>&nbsp;<span class="ident" id="6065278"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065279">.</span><span class="ident" id="6065280">trace</span>&nbsp;<span class="op" id="6065286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065290">defer</span>&nbsp;<span class="ident" id="6065296"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6065298">(</span><span class="ident" id="6065299"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6065304">(</span><span class="ident" id="6065305"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065306">,</span>&nbsp;<span class="string" id="6065308">&#34;Body&#34;</span><span class="op" id="6065314">)</span><span class="op" id="6065315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065318">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065322">lbrace</span>&nbsp;<span class="op" id="6065329">:=</span>&nbsp;<span class="ident" id="6065332"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065333">.</span><span class="ident" id="6065334">expect</span><span class="op" id="6065340">(</span><span class="ident" id="6065341"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065346">.</span><span class="ident" id="6065347">LBRACE</span><span class="op" id="6065353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065356"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065357">.</span><span class="ident" id="6065358">topScope</span>&nbsp;<span class="op" id="6065367">=</span>&nbsp;<span class="ident" id="6065369"><a href="/go/parser/parser.go.html#6065239">scope</a></span>&nbsp;<span class="comment" id="6065375">//&nbsp;open&nbsp;function&nbsp;scope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065399"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065400">.</span><span class="ident" id="6065401">openLabelScope</span><span class="op" id="6065415">(</span><span class="op" id="6065416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065419">list</span>&nbsp;<span class="op" id="6065424">:=</span>&nbsp;<span class="ident" id="6065427"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065428">.</span><span class="ident" id="6065429">parseStmtList</span><span class="op" id="6065442">(</span><span class="op" id="6065443">)</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065446"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065447">.</span><span class="ident" id="6065448">closeLabelScope</span><span class="op" id="6065463">(</span><span class="op" id="6065464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065467"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065468">.</span><span class="ident" id="6065469">closeScope</span><span class="op" id="6065479">(</span><span class="op" id="6065480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065483">rbrace</span>&nbsp;<span class="op" id="6065490">:=</span>&nbsp;<span class="ident" id="6065493"><a href="/go/parser/parser.go.html#6065218">p</a></span><span class="op" id="6065494">.</span><span class="ident" id="6065495">expect</span><span class="op" id="6065501">(</span><span class="ident" id="6065502"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065507">.</span><span class="ident" id="6065508">RBRACE</span><span class="op" id="6065514">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065518">return</span>&nbsp;<span class="op" id="6065525">&amp;</span><span class="ident" id="6065526"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6065529">.</span><span class="ident" id="6065530">BlockStmt</span><span class="op" id="6065539">{</span><span class="ident" id="6065540">Lbrace</span><span class="op" id="6065546">:</span>&nbsp;<span class="ident" id="6065548"><a href="/go/parser/parser.go.html#6065322">lbrace</a></span><span class="op" id="6065554">,</span>&nbsp;<span class="ident" id="6065556">List</span><span class="op" id="6065560">:</span>&nbsp;<span class="ident" id="6065562"><a href="/go/parser/parser.go.html#6065419">list</a></span><span class="op" id="6065566">,</span>&nbsp;<span class="ident" id="6065568">Rbrace</span><span class="op" id="6065574">:</span>&nbsp;<span class="ident" id="6065576"><a href="/go/parser/parser.go.html#6065483">rbrace</a></span><span class="op" id="6065582">}</span><br>
<span class="lineno">1075</span><span class="op" id="6065584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6065587">func</span>&nbsp;<span class="op" id="6065592">(</span><span class="ident" id="6065593">p</span>&nbsp;<span class="op" id="6065595">*</span><span class="ident" id="6065596"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6065602">)</span>&nbsp;<span class="ident" id="6065604">parseBlockStmt</span><span class="op" id="6065618">(</span><span class="op" id="6065619">)</span>&nbsp;<span class="op" id="6065621">*</span><span class="ident" id="6065622"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6065625">.</span><span class="ident" id="6065626">BlockStmt</span>&nbsp;<span class="op" id="6065636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065639">if</span>&nbsp;<span class="ident" id="6065642"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065643">.</span><span class="ident" id="6065644">trace</span>&nbsp;<span class="op" id="6065650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065654">defer</span>&nbsp;<span class="ident" id="6065660"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6065662">(</span><span class="ident" id="6065663"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6065668">(</span><span class="ident" id="6065669"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065670">,</span>&nbsp;<span class="string" id="6065672">&#34;BlockStmt&#34;</span><span class="op" id="6065683">)</span><span class="op" id="6065684">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6065687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065691">lbrace</span>&nbsp;<span class="op" id="6065698">:=</span>&nbsp;<span class="ident" id="6065701"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065702">.</span><span class="ident" id="6065703">expect</span><span class="op" id="6065709">(</span><span class="ident" id="6065710"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065715">.</span><span class="ident" id="6065716">LBRACE</span><span class="op" id="6065722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065725"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065726">.</span><span class="ident" id="6065727">openScope</span><span class="op" id="6065736">(</span><span class="op" id="6065737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065740">list</span>&nbsp;<span class="op" id="6065745">:=</span>&nbsp;<span class="ident" id="6065748"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065749">.</span><span class="ident" id="6065750">parseStmtList</span><span class="op" id="6065763">(</span><span class="op" id="6065764">)</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065767"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065768">.</span><span class="ident" id="6065769">closeScope</span><span class="op" id="6065779">(</span><span class="op" id="6065780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6065783">rbrace</span>&nbsp;<span class="op" id="6065790">:=</span>&nbsp;<span class="ident" id="6065793"><a href="/go/parser/parser.go.html#6065593">p</a></span><span class="op" id="6065794">.</span><span class="ident" id="6065795">expect</span><span class="op" id="6065801">(</span><span class="ident" id="6065802"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6065807">.</span><span class="ident" id="6065808">RBRACE</span><span class="op" id="6065814">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6065818">return</span>&nbsp;<span class="op" id="6065825">&amp;</span><span class="ident" id="6065826"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6065829">.</span><span class="ident" id="6065830">BlockStmt</span><span class="op" id="6065839">{</span><span class="ident" id="6065840">Lbrace</span><span class="op" id="6065846">:</span>&nbsp;<span class="ident" id="6065848"><a href="/go/parser/parser.go.html#6065691">lbrace</a></span><span class="op" id="6065854">,</span>&nbsp;<span class="ident" id="6065856">List</span><span class="op" id="6065860">:</span>&nbsp;<span class="ident" id="6065862"><a href="/go/parser/parser.go.html#6065740">list</a></span><span class="op" id="6065866">,</span>&nbsp;<span class="ident" id="6065868">Rbrace</span><span class="op" id="6065874">:</span>&nbsp;<span class="ident" id="6065876"><a href="/go/parser/parser.go.html#6065783">rbrace</a></span><span class="op" id="6065882">}</span><br>
<span class="lineno"></span><span class="op" id="6065884">}</span><br>
<span class="lineno">1090</span><br>
<span class="lineno"></span><span class="comment" id="6065887">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6065967">//&nbsp;Expressions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6065983">func</span>&nbsp;<span class="op" id="6065988">(</span><span class="ident" id="6065989">p</span>&nbsp;<span class="op" id="6065991">*</span><span class="ident" id="6065992"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6065998">)</span>&nbsp;<span class="ident" id="6066000">parseFuncTypeOrLit</span><span class="op" id="6066018">(</span><span class="op" id="6066019">)</span>&nbsp;<span class="ident" id="6066021"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6066024">.</span><span class="ident" id="6066025">Expr</span>&nbsp;<span class="op" id="6066030">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066033">if</span>&nbsp;<span class="ident" id="6066036"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066037">.</span><span class="ident" id="6066038">trace</span>&nbsp;<span class="op" id="6066044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066048">defer</span>&nbsp;<span class="ident" id="6066054"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6066056">(</span><span class="ident" id="6066057"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6066062">(</span><span class="ident" id="6066063"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066064">,</span>&nbsp;<span class="string" id="6066066">&#34;FuncTypeOrLit&#34;</span><span class="op" id="6066081">)</span><span class="op" id="6066082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066089">typ</span><span class="op" id="6066092">,</span>&nbsp;<span class="ident" id="6066094">scope</span>&nbsp;<span class="op" id="6066100">:=</span>&nbsp;<span class="ident" id="6066103"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066104">.</span><span class="ident" id="6066105">parseFuncType</span><span class="op" id="6066118">(</span><span class="op" id="6066119">)</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066122">if</span>&nbsp;<span class="ident" id="6066125"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066126">.</span><span class="ident" id="6066127">tok</span>&nbsp;<span class="op" id="6066131">!=</span>&nbsp;<span class="ident" id="6066134"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066139">.</span><span class="ident" id="6066140">LBRACE</span>&nbsp;<span class="op" id="6066147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6066151">//&nbsp;function&nbsp;type&nbsp;only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066175">return</span>&nbsp;<span class="ident" id="6066182"><a href="/go/parser/parser.go.html#6066089">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066191"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066192">.</span><span class="ident" id="6066193">exprLev</span><span class="op" id="6066200">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066204">body</span>&nbsp;<span class="op" id="6066209">:=</span>&nbsp;<span class="ident" id="6066212"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066213">.</span><span class="ident" id="6066214">parseBody</span><span class="op" id="6066223">(</span><span class="ident" id="6066224"><a href="/go/parser/parser.go.html#6066094">scope</a></span><span class="op" id="6066229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066232"><a href="/go/parser/parser.go.html#6065989">p</a></span><span class="op" id="6066233">.</span><span class="ident" id="6066234">exprLev</span><span class="op" id="6066241">--</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066246">return</span>&nbsp;<span class="op" id="6066253">&amp;</span><span class="ident" id="6066254"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6066257">.</span><span class="ident" id="6066258">FuncLit</span><span class="op" id="6066265">{</span><span class="ident" id="6066266">Type</span><span class="op" id="6066270">:</span>&nbsp;<span class="ident" id="6066272"><a href="/go/parser/parser.go.html#6066089">typ</a></span><span class="op" id="6066275">,</span>&nbsp;<span class="ident" id="6066277">Body</span><span class="op" id="6066281">:</span>&nbsp;<span class="ident" id="6066283"><a href="/go/parser/parser.go.html#6066204">body</a></span><span class="op" id="6066287">}</span><br>
<span class="lineno">1110</span><span class="op" id="6066289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6066292">//&nbsp;parseOperand&nbsp;may&nbsp;return&nbsp;an&nbsp;expression&nbsp;or&nbsp;a&nbsp;raw&nbsp;type&nbsp;(incl.&nbsp;array</span><br>
<span class="lineno"></span><span class="comment" id="6066360">//&nbsp;types&nbsp;of&nbsp;the&nbsp;form&nbsp;[...]T.&nbsp;Callers&nbsp;must&nbsp;verify&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="6066421">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">1115</span><span class="comment" id="6066491">//</span><br>
<span class="lineno"></span><span class="keyword" id="6066494">func</span>&nbsp;<span class="op" id="6066499">(</span><span class="ident" id="6066500">p</span>&nbsp;<span class="op" id="6066502">*</span><span class="ident" id="6066503"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6066509">)</span>&nbsp;<span class="ident" id="6066511">parseOperand</span><span class="op" id="6066523">(</span><span class="ident" id="6066524">lhs</span>&nbsp;<span class="builtintype" id="6066528">bool</span><span class="op" id="6066532">)</span>&nbsp;<span class="ident" id="6066534"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6066537">.</span><span class="ident" id="6066538">Expr</span>&nbsp;<span class="op" id="6066543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066546">if</span>&nbsp;<span class="ident" id="6066549"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066550">.</span><span class="ident" id="6066551">trace</span>&nbsp;<span class="op" id="6066557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066561">defer</span>&nbsp;<span class="ident" id="6066567"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6066569">(</span><span class="ident" id="6066570"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6066575">(</span><span class="ident" id="6066576"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066577">,</span>&nbsp;<span class="string" id="6066579">&#34;Operand&#34;</span><span class="op" id="6066588">)</span><span class="op" id="6066589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066592">}</span><br>
<span class="lineno">1120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066596">switch</span>&nbsp;<span class="ident" id="6066603"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066604">.</span><span class="ident" id="6066605">tok</span>&nbsp;<span class="op" id="6066609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066612">case</span>&nbsp;<span class="ident" id="6066617"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066622">.</span><span class="ident" id="6066623">IDENT</span><span class="op" id="6066628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066632">x</span>&nbsp;<span class="op" id="6066634">:=</span>&nbsp;<span class="ident" id="6066637"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066638">.</span><span class="ident" id="6066639">parseIdent</span><span class="op" id="6066649">(</span><span class="op" id="6066650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066654">if</span>&nbsp;<span class="op" id="6066657">!</span><span class="ident" id="6066658"><a href="/go/parser/parser.go.html#6066524">lhs</a></span>&nbsp;<span class="op" id="6066662">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066667"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066668">.</span><span class="ident" id="6066669">resolve</span><span class="op" id="6066676">(</span><span class="ident" id="6066677"><a href="/go/parser/parser.go.html#6066632">x</a></span><span class="op" id="6066678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6066682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066686">return</span>&nbsp;<span class="ident" id="6066693"><a href="/go/parser/parser.go.html#6066632">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066697">case</span>&nbsp;<span class="ident" id="6066702"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066707">.</span><span class="ident" id="6066708">INT</span><span class="op" id="6066711">,</span>&nbsp;<span class="ident" id="6066713"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066718">.</span><span class="ident" id="6066719">FLOAT</span><span class="op" id="6066724">,</span>&nbsp;<span class="ident" id="6066726"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066731">.</span><span class="ident" id="6066732">IMAG</span><span class="op" id="6066736">,</span>&nbsp;<span class="ident" id="6066738"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066743">.</span><span class="ident" id="6066744">CHAR</span><span class="op" id="6066748">,</span>&nbsp;<span class="ident" id="6066750"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066755">.</span><span class="ident" id="6066756">STRING</span><span class="op" id="6066762">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066766">x</span>&nbsp;<span class="op" id="6066768">:=</span>&nbsp;<span class="op" id="6066771">&amp;</span><span class="ident" id="6066772"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6066775">.</span><span class="ident" id="6066776">BasicLit</span><span class="op" id="6066784">{</span><span class="ident" id="6066785">ValuePos</span><span class="op" id="6066793">:</span>&nbsp;<span class="ident" id="6066795"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066796">.</span><span class="ident" id="6066797">pos</span><span class="op" id="6066800">,</span>&nbsp;<span class="ident" id="6066802">Kind</span><span class="op" id="6066806">:</span>&nbsp;<span class="ident" id="6066808"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066809">.</span><span class="ident" id="6066810">tok</span><span class="op" id="6066813">,</span>&nbsp;<span class="ident" id="6066815">Value</span><span class="op" id="6066820">:</span>&nbsp;<span class="ident" id="6066822"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066823">.</span><span class="ident" id="6066824">lit</span><span class="op" id="6066827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066831"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066832">.</span><span class="ident" id="6066833">next</span><span class="op" id="6066837">(</span><span class="op" id="6066838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066842">return</span>&nbsp;<span class="ident" id="6066849"><a href="/go/parser/parser.go.html#6066766">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6066853">case</span>&nbsp;<span class="ident" id="6066858"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6066863">.</span><span class="ident" id="6066864">LPAREN</span><span class="op" id="6066870">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066874">lparen</span>&nbsp;<span class="op" id="6066881">:=</span>&nbsp;<span class="ident" id="6066884"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066885">.</span><span class="ident" id="6066886">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066892"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066893">.</span><span class="ident" id="6066894">next</span><span class="op" id="6066898">(</span><span class="op" id="6066899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066903"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066904">.</span><span class="ident" id="6066905">exprLev</span><span class="op" id="6066912">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066917">x</span>&nbsp;<span class="op" id="6066919">:=</span>&nbsp;<span class="ident" id="6066922"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066923">.</span><span class="ident" id="6066924">parseRhsOrType</span><span class="op" id="6066938">(</span><span class="op" id="6066939">)</span>&nbsp;<span class="comment" id="6066941">//&nbsp;types&nbsp;may&nbsp;be&nbsp;parenthesized:&nbsp;(some&nbsp;type)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6066986"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6066987">.</span><span class="ident" id="6066988">exprLev</span><span class="op" id="6066995">--</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067000">rparen</span>&nbsp;<span class="op" id="6067007">:=</span>&nbsp;<span class="ident" id="6067010"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067011">.</span><span class="ident" id="6067012">expect</span><span class="op" id="6067018">(</span><span class="ident" id="6067019"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6067024">.</span><span class="ident" id="6067025">RPAREN</span><span class="op" id="6067031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067035">return</span>&nbsp;<span class="op" id="6067042">&amp;</span><span class="ident" id="6067043"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067046">.</span><span class="ident" id="6067047">ParenExpr</span><span class="op" id="6067056">{</span><span class="ident" id="6067057">Lparen</span><span class="op" id="6067063">:</span>&nbsp;<span class="ident" id="6067065"><a href="/go/parser/parser.go.html#6066874">lparen</a></span><span class="op" id="6067071">,</span>&nbsp;<span class="ident" id="6067073">X</span><span class="op" id="6067074">:</span>&nbsp;<span class="ident" id="6067076"><a href="/go/parser/parser.go.html#6066917">x</a></span><span class="op" id="6067077">,</span>&nbsp;<span class="ident" id="6067079">Rparen</span><span class="op" id="6067085">:</span>&nbsp;<span class="ident" id="6067087"><a href="/go/parser/parser.go.html#6067000">rparen</a></span><span class="op" id="6067093">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067097">case</span>&nbsp;<span class="ident" id="6067102"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6067107">.</span><span class="ident" id="6067108">FUNC</span><span class="op" id="6067112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067116">return</span>&nbsp;<span class="ident" id="6067123"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067124">.</span><span class="ident" id="6067125">parseFuncTypeOrLit</span><span class="op" id="6067143">(</span><span class="op" id="6067144">)</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067151">if</span>&nbsp;<span class="ident" id="6067154">typ</span>&nbsp;<span class="op" id="6067158">:=</span>&nbsp;<span class="ident" id="6067161"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067162">.</span><span class="ident" id="6067163">tryIdentOrType</span><span class="op" id="6067177">(</span><span class="op" id="6067178">)</span><span class="op" id="6067179">;</span>&nbsp;<span class="ident" id="6067181"><a href="/go/parser/parser.go.html#6067154">typ</a></span>&nbsp;<span class="op" id="6067185">!=</span>&nbsp;<span class="ident" id="6067188">nil</span>&nbsp;<span class="op" id="6067192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067196">//&nbsp;could&nbsp;be&nbsp;type&nbsp;for&nbsp;composite&nbsp;literal&nbsp;or&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067251">_</span><span class="op" id="6067252">,</span>&nbsp;<span class="ident" id="6067254">isIdent</span>&nbsp;<span class="op" id="6067262">:=</span>&nbsp;<span class="ident" id="6067265"><a href="/go/parser/parser.go.html#6067154">typ</a></span><span class="op" id="6067268">.</span><span class="op" id="6067269">(</span><span class="op" id="6067270">*</span><span class="ident" id="6067271"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067274">.</span><span class="ident" id="6067275">Ident</span><span class="op" id="6067280">)</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067284"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6067290">(</span><span class="op" id="6067291">!</span><span class="ident" id="6067292"><a href="/go/parser/parser.go.html#6067254">isIdent</a></span><span class="op" id="6067299">,</span>&nbsp;<span class="string" id="6067301">&#34;type&nbsp;cannot&nbsp;be&nbsp;identifier&#34;</span><span class="op" id="6067328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067332">return</span>&nbsp;<span class="ident" id="6067339"><a href="/go/parser/parser.go.html#6067154">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067348">//&nbsp;we&nbsp;have&nbsp;an&nbsp;error</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067369">pos</span>&nbsp;<span class="op" id="6067373">:=</span>&nbsp;<span class="ident" id="6067376"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067377">.</span><span class="ident" id="6067378">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067383"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067384">.</span><span class="ident" id="6067385">errorExpected</span><span class="op" id="6067398">(</span><span class="ident" id="6067399"><a href="/go/parser/parser.go.html#6067369">pos</a></span><span class="op" id="6067402">,</span>&nbsp;<span class="string" id="6067404">&#34;operand&#34;</span><span class="op" id="6067413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067416"><a href="/go/parser/parser.go.html#6050033">syncStmt</a></span><span class="op" id="6067424">(</span><span class="ident" id="6067425"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067429">return</span>&nbsp;<span class="op" id="6067436">&amp;</span><span class="ident" id="6067437"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067440">.</span><span class="ident" id="6067441">BadExpr</span><span class="op" id="6067448">{</span><span class="ident" id="6067449">From</span><span class="op" id="6067453">:</span>&nbsp;<span class="ident" id="6067455"><a href="/go/parser/parser.go.html#6067369">pos</a></span><span class="op" id="6067458">,</span>&nbsp;<span class="ident" id="6067460">To</span><span class="op" id="6067462">:</span>&nbsp;<span class="ident" id="6067464"><a href="/go/parser/parser.go.html#6066500">p</a></span><span class="op" id="6067465">.</span><span class="ident" id="6067466">pos</span><span class="op" id="6067469">}</span><br>
<span class="lineno"></span><span class="op" id="6067471">}</span><br>
<span class="lineno">1160</span><br>
<span class="lineno"></span><span class="keyword" id="6067474">func</span>&nbsp;<span class="op" id="6067479">(</span><span class="ident" id="6067480">p</span>&nbsp;<span class="op" id="6067482">*</span><span class="ident" id="6067483"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6067489">)</span>&nbsp;<span class="ident" id="6067491">parseSelector</span><span class="op" id="6067504">(</span><span class="ident" id="6067505">x</span>&nbsp;<span class="ident" id="6067507"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067510">.</span><span class="ident" id="6067511">Expr</span><span class="op" id="6067515">)</span>&nbsp;<span class="ident" id="6067517"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067520">.</span><span class="ident" id="6067521">Expr</span>&nbsp;<span class="op" id="6067526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067529">if</span>&nbsp;<span class="ident" id="6067532"><a href="/go/parser/parser.go.html#6067480">p</a></span><span class="op" id="6067533">.</span><span class="ident" id="6067534">trace</span>&nbsp;<span class="op" id="6067540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067544">defer</span>&nbsp;<span class="ident" id="6067550"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6067552">(</span><span class="ident" id="6067553"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6067558">(</span><span class="ident" id="6067559"><a href="/go/parser/parser.go.html#6067480">p</a></span><span class="op" id="6067560">,</span>&nbsp;<span class="string" id="6067562">&#34;Selector&#34;</span><span class="op" id="6067572">)</span><span class="op" id="6067573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067576">}</span><br>
<span class="lineno">1165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067580">sel</span>&nbsp;<span class="op" id="6067584">:=</span>&nbsp;<span class="ident" id="6067587"><a href="/go/parser/parser.go.html#6067480">p</a></span><span class="op" id="6067588">.</span><span class="ident" id="6067589">parseIdent</span><span class="op" id="6067599">(</span><span class="op" id="6067600">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067604">return</span>&nbsp;<span class="op" id="6067611">&amp;</span><span class="ident" id="6067612"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067615">.</span><span class="ident" id="6067616">SelectorExpr</span><span class="op" id="6067628">{</span><span class="ident" id="6067629">X</span><span class="op" id="6067630">:</span>&nbsp;<span class="ident" id="6067632"><a href="/go/parser/parser.go.html#6067505">x</a></span><span class="op" id="6067633">,</span>&nbsp;<span class="ident" id="6067635">Sel</span><span class="op" id="6067638">:</span>&nbsp;<span class="ident" id="6067640"><a href="/go/parser/parser.go.html#6067580">sel</a></span><span class="op" id="6067643">}</span><br>
<span class="lineno"></span><span class="op" id="6067645">}</span><br>
<span class="lineno">1170</span><br>
<span class="lineno"></span><span class="keyword" id="6067648">func</span>&nbsp;<span class="op" id="6067653">(</span><span class="ident" id="6067654">p</span>&nbsp;<span class="op" id="6067656">*</span><span class="ident" id="6067657"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6067663">)</span>&nbsp;<span class="ident" id="6067665">parseTypeAssertion</span><span class="op" id="6067683">(</span><span class="ident" id="6067684">x</span>&nbsp;<span class="ident" id="6067686"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067689">.</span><span class="ident" id="6067690">Expr</span><span class="op" id="6067694">)</span>&nbsp;<span class="ident" id="6067696"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067699">.</span><span class="ident" id="6067700">Expr</span>&nbsp;<span class="op" id="6067705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067708">if</span>&nbsp;<span class="ident" id="6067711"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067712">.</span><span class="ident" id="6067713">trace</span>&nbsp;<span class="op" id="6067719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067723">defer</span>&nbsp;<span class="ident" id="6067729"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6067731">(</span><span class="ident" id="6067732"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6067737">(</span><span class="ident" id="6067738"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067739">,</span>&nbsp;<span class="string" id="6067741">&#34;TypeAssertion&#34;</span><span class="op" id="6067756">)</span><span class="op" id="6067757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067760">}</span><br>
<span class="lineno">1175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067764">lparen</span>&nbsp;<span class="op" id="6067771">:=</span>&nbsp;<span class="ident" id="6067774"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067775">.</span><span class="ident" id="6067776">expect</span><span class="op" id="6067782">(</span><span class="ident" id="6067783"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6067788">.</span><span class="ident" id="6067789">LPAREN</span><span class="op" id="6067795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067798">var</span>&nbsp;<span class="ident" id="6067802">typ</span>&nbsp;<span class="ident" id="6067806"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067809">.</span><span class="ident" id="6067810">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067816">if</span>&nbsp;<span class="ident" id="6067819"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067820">.</span><span class="ident" id="6067821">tok</span>&nbsp;<span class="op" id="6067825">==</span>&nbsp;<span class="ident" id="6067828"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6067833">.</span><span class="ident" id="6067834">TYPE</span>&nbsp;<span class="op" id="6067839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6067843">//&nbsp;type&nbsp;switch:&nbsp;typ&nbsp;==&nbsp;nil</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067872"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067873">.</span><span class="ident" id="6067874">next</span><span class="op" id="6067878">(</span><span class="op" id="6067879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067882">}</span>&nbsp;<span class="keyword" id="6067884">else</span>&nbsp;<span class="op" id="6067889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067893"><a href="/go/parser/parser.go.html#6067802">typ</a></span>&nbsp;<span class="op" id="6067897">=</span>&nbsp;<span class="ident" id="6067899"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067900">.</span><span class="ident" id="6067901">parseType</span><span class="op" id="6067910">(</span><span class="op" id="6067911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6067914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6067917">rparen</span>&nbsp;<span class="op" id="6067924">:=</span>&nbsp;<span class="ident" id="6067927"><a href="/go/parser/parser.go.html#6067654">p</a></span><span class="op" id="6067928">.</span><span class="ident" id="6067929">expect</span><span class="op" id="6067935">(</span><span class="ident" id="6067936"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6067941">.</span><span class="ident" id="6067942">RPAREN</span><span class="op" id="6067948">)</span><br>
<span class="lineno">1185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6067952">return</span>&nbsp;<span class="op" id="6067959">&amp;</span><span class="ident" id="6067960"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6067963">.</span><span class="ident" id="6067964">TypeAssertExpr</span><span class="op" id="6067978">{</span><span class="ident" id="6067979">X</span><span class="op" id="6067980">:</span>&nbsp;<span class="ident" id="6067982"><a href="/go/parser/parser.go.html#6067684">x</a></span><span class="op" id="6067983">,</span>&nbsp;<span class="ident" id="6067985">Type</span><span class="op" id="6067989">:</span>&nbsp;<span class="ident" id="6067991"><a href="/go/parser/parser.go.html#6067802">typ</a></span><span class="op" id="6067994">,</span>&nbsp;<span class="ident" id="6067996">Lparen</span><span class="op" id="6068002">:</span>&nbsp;<span class="ident" id="6068004"><a href="/go/parser/parser.go.html#6067764">lparen</a></span><span class="op" id="6068010">,</span>&nbsp;<span class="ident" id="6068012">Rparen</span><span class="op" id="6068018">:</span>&nbsp;<span class="ident" id="6068020"><a href="/go/parser/parser.go.html#6067917">rparen</a></span><span class="op" id="6068026">}</span><br>
<span class="lineno"></span><span class="op" id="6068028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6068031">func</span>&nbsp;<span class="op" id="6068036">(</span><span class="ident" id="6068037">p</span>&nbsp;<span class="op" id="6068039">*</span><span class="ident" id="6068040"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6068046">)</span>&nbsp;<span class="ident" id="6068048">parseIndexOrSlice</span><span class="op" id="6068065">(</span><span class="ident" id="6068066">x</span>&nbsp;<span class="ident" id="6068068"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6068071">.</span><span class="ident" id="6068072">Expr</span><span class="op" id="6068076">)</span>&nbsp;<span class="ident" id="6068078"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6068081">.</span><span class="ident" id="6068082">Expr</span>&nbsp;<span class="op" id="6068087">{</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068090">if</span>&nbsp;<span class="ident" id="6068093"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068094">.</span><span class="ident" id="6068095">trace</span>&nbsp;<span class="op" id="6068101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068105">defer</span>&nbsp;<span class="ident" id="6068111"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6068113">(</span><span class="ident" id="6068114"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6068119">(</span><span class="ident" id="6068120"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068121">,</span>&nbsp;<span class="string" id="6068123">&#34;IndexOrSlice&#34;</span><span class="op" id="6068137">)</span><span class="op" id="6068138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068145">const</span>&nbsp;<span class="ident" id="6068151">N</span>&nbsp;<span class="op" id="6068153">=</span>&nbsp;<span class="num" id="6068155">3</span>&nbsp;<span class="comment" id="6068157">//&nbsp;change&nbsp;the&nbsp;3&nbsp;to&nbsp;2&nbsp;to&nbsp;disable&nbsp;3-index&nbsp;slices</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068205">lbrack</span>&nbsp;<span class="op" id="6068212">:=</span>&nbsp;<span class="ident" id="6068215"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068216">.</span><span class="ident" id="6068217">expect</span><span class="op" id="6068223">(</span><span class="ident" id="6068224"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068229">.</span><span class="ident" id="6068230">LBRACK</span><span class="op" id="6068236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068239"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068240">.</span><span class="ident" id="6068241">exprLev</span><span class="op" id="6068248">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068252">var</span>&nbsp;<span class="ident" id="6068256">index</span>&nbsp;<span class="op" id="6068262">[</span><span class="ident" id="6068263"><a href="/go/parser/parser.go.html#6068151">N</a></span><span class="op" id="6068264">]</span><span class="ident" id="6068265"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6068268">.</span><span class="ident" id="6068269">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068275">var</span>&nbsp;<span class="ident" id="6068279">colons</span>&nbsp;<span class="op" id="6068286">[</span><span class="ident" id="6068287"><a href="/go/parser/parser.go.html#6068151">N</a></span>&nbsp;<span class="op" id="6068289">-</span>&nbsp;<span class="num" id="6068291">1</span><span class="op" id="6068292">]</span><span class="ident" id="6068293"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068298">.</span><span class="ident" id="6068299">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068304">if</span>&nbsp;<span class="ident" id="6068307"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068308">.</span><span class="ident" id="6068309">tok</span>&nbsp;<span class="op" id="6068313">!=</span>&nbsp;<span class="ident" id="6068316"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068321">.</span><span class="ident" id="6068322">COLON</span>&nbsp;<span class="op" id="6068328">{</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068332"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6068337">[</span><span class="num" id="6068338">0</span><span class="op" id="6068339">]</span>&nbsp;<span class="op" id="6068341">=</span>&nbsp;<span class="ident" id="6068343"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068344">.</span><span class="ident" id="6068345">parseRhs</span><span class="op" id="6068353">(</span><span class="op" id="6068354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068360">ncolons</span>&nbsp;<span class="op" id="6068368">:=</span>&nbsp;<span class="num" id="6068371">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068374">for</span>&nbsp;<span class="ident" id="6068378"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068379">.</span><span class="ident" id="6068380">tok</span>&nbsp;<span class="op" id="6068384">==</span>&nbsp;<span class="ident" id="6068387"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068392">.</span><span class="ident" id="6068393">COLON</span>&nbsp;<span class="op" id="6068399">&amp;&amp;</span>&nbsp;<span class="ident" id="6068402"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span>&nbsp;<span class="op" id="6068410">&lt;</span>&nbsp;<span class="builtinfunc" id="6068412">len</span><span class="op" id="6068415">(</span><span class="ident" id="6068416"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6068422">)</span>&nbsp;<span class="op" id="6068424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068428"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6068434">[</span><span class="ident" id="6068435"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span><span class="op" id="6068442">]</span>&nbsp;<span class="op" id="6068444">=</span>&nbsp;<span class="ident" id="6068446"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068447">.</span><span class="ident" id="6068448">pos</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068454"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span><span class="op" id="6068461">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068466"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068467">.</span><span class="ident" id="6068468">next</span><span class="op" id="6068472">(</span><span class="op" id="6068473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068477">if</span>&nbsp;<span class="ident" id="6068480"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068481">.</span><span class="ident" id="6068482">tok</span>&nbsp;<span class="op" id="6068486">!=</span>&nbsp;<span class="ident" id="6068489"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068494">.</span><span class="ident" id="6068495">COLON</span>&nbsp;<span class="op" id="6068501">&amp;&amp;</span>&nbsp;<span class="ident" id="6068504"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068505">.</span><span class="ident" id="6068506">tok</span>&nbsp;<span class="op" id="6068510">!=</span>&nbsp;<span class="ident" id="6068513"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068518">.</span><span class="ident" id="6068519">RBRACK</span>&nbsp;<span class="op" id="6068526">&amp;&amp;</span>&nbsp;<span class="ident" id="6068529"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068530">.</span><span class="ident" id="6068531">tok</span>&nbsp;<span class="op" id="6068535">!=</span>&nbsp;<span class="ident" id="6068538"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068543">.</span><span class="ident" id="6068544">EOF</span>&nbsp;<span class="op" id="6068548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068553"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6068558">[</span><span class="ident" id="6068559"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span><span class="op" id="6068566">]</span>&nbsp;<span class="op" id="6068568">=</span>&nbsp;<span class="ident" id="6068570"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068571">.</span><span class="ident" id="6068572">parseRhs</span><span class="op" id="6068580">(</span><span class="op" id="6068581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068585">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6068588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068591"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068592">.</span><span class="ident" id="6068593">exprLev</span><span class="op" id="6068600">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068604">rbrack</span>&nbsp;<span class="op" id="6068611">:=</span>&nbsp;<span class="ident" id="6068614"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068615">.</span><span class="ident" id="6068616">expect</span><span class="op" id="6068622">(</span><span class="ident" id="6068623"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6068628">.</span><span class="ident" id="6068629">RBRACK</span><span class="op" id="6068635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068639">if</span>&nbsp;<span class="ident" id="6068642"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span>&nbsp;<span class="op" id="6068650">&gt;</span>&nbsp;<span class="num" id="6068652">0</span>&nbsp;<span class="op" id="6068654">{</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068658">//&nbsp;slice&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068680">slice3</span>&nbsp;<span class="op" id="6068687">:=</span>&nbsp;<span class="ident" id="6068690">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068698">if</span>&nbsp;<span class="ident" id="6068701"><a href="/go/parser/parser.go.html#6068360">ncolons</a></span>&nbsp;<span class="op" id="6068709">==</span>&nbsp;<span class="num" id="6068712">2</span>&nbsp;<span class="op" id="6068714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068719"><a href="/go/parser/parser.go.html#6068680">slice3</a></span>&nbsp;<span class="op" id="6068726">=</span>&nbsp;<span class="ident" id="6068728">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068736">//&nbsp;Check&nbsp;presence&nbsp;of&nbsp;2nd&nbsp;and&nbsp;3rd&nbsp;index&nbsp;here&nbsp;rather&nbsp;than&nbsp;during&nbsp;type-checking</span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6068816">//&nbsp;to&nbsp;prevent&nbsp;erroneous&nbsp;programs&nbsp;from&nbsp;passing&nbsp;through&nbsp;gofmt&nbsp;(was&nbsp;issue&nbsp;7305).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6068897">if</span>&nbsp;<span class="ident" id="6068900"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6068905">[</span><span class="num" id="6068906">1</span><span class="op" id="6068907">]</span>&nbsp;<span class="op" id="6068909">==</span>&nbsp;<span class="ident" id="6068912">nil</span>&nbsp;<span class="op" id="6068916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068922"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6068923">.</span><span class="builtintype" id="6068924">error</span><span class="op" id="6068929">(</span><span class="ident" id="6068930"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6068936">[</span><span class="num" id="6068937">0</span><span class="op" id="6068938">]</span><span class="op" id="6068939">,</span>&nbsp;<span class="string" id="6068941">&#34;2nd&nbsp;index&nbsp;required&nbsp;in&nbsp;3-index&nbsp;slice&#34;</span><span class="op" id="6068978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6068984"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6068989">[</span><span class="num" id="6068990">1</span><span class="op" id="6068991">]</span>&nbsp;<span class="op" id="6068993">=</span>&nbsp;<span class="op" id="6068995">&amp;</span><span class="ident" id="6068996"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6068999">.</span><span class="ident" id="6069000">BadExpr</span><span class="op" id="6069007">{</span><span class="ident" id="6069008">From</span><span class="op" id="6069012">:</span>&nbsp;<span class="ident" id="6069014"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6069020">[</span><span class="num" id="6069021">0</span><span class="op" id="6069022">]</span>&nbsp;<span class="op" id="6069024">+</span>&nbsp;<span class="num" id="6069026">1</span><span class="op" id="6069027">,</span>&nbsp;<span class="ident" id="6069029">To</span><span class="op" id="6069031">:</span>&nbsp;<span class="ident" id="6069033"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6069039">[</span><span class="num" id="6069040">1</span><span class="op" id="6069041">]</span><span class="op" id="6069042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069047">}</span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069052">if</span>&nbsp;<span class="ident" id="6069055"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069060">[</span><span class="num" id="6069061">2</span><span class="op" id="6069062">]</span>&nbsp;<span class="op" id="6069064">==</span>&nbsp;<span class="ident" id="6069067">nil</span>&nbsp;<span class="op" id="6069071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069077"><a href="/go/parser/parser.go.html#6068037">p</a></span><span class="op" id="6069078">.</span><span class="builtintype" id="6069079">error</span><span class="op" id="6069084">(</span><span class="ident" id="6069085"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6069091">[</span><span class="num" id="6069092">1</span><span class="op" id="6069093">]</span><span class="op" id="6069094">,</span>&nbsp;<span class="string" id="6069096">&#34;3rd&nbsp;index&nbsp;required&nbsp;in&nbsp;3-index&nbsp;slice&#34;</span><span class="op" id="6069133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069139"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069144">[</span><span class="num" id="6069145">2</span><span class="op" id="6069146">]</span>&nbsp;<span class="op" id="6069148">=</span>&nbsp;<span class="op" id="6069150">&amp;</span><span class="ident" id="6069151"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069154">.</span><span class="ident" id="6069155">BadExpr</span><span class="op" id="6069162">{</span><span class="ident" id="6069163">From</span><span class="op" id="6069167">:</span>&nbsp;<span class="ident" id="6069169"><a href="/go/parser/parser.go.html#6068279">colons</a></span><span class="op" id="6069175">[</span><span class="num" id="6069176">1</span><span class="op" id="6069177">]</span>&nbsp;<span class="op" id="6069179">+</span>&nbsp;<span class="num" id="6069181">1</span><span class="op" id="6069182">,</span>&nbsp;<span class="ident" id="6069184">To</span><span class="op" id="6069186">:</span>&nbsp;<span class="ident" id="6069188"><a href="/go/parser/parser.go.html#6068604">rbrack</a></span><span class="op" id="6069194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069203">}</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069207">return</span>&nbsp;<span class="op" id="6069214">&amp;</span><span class="ident" id="6069215"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069218">.</span><span class="ident" id="6069219">SliceExpr</span><span class="op" id="6069228">{</span><span class="ident" id="6069229">X</span><span class="op" id="6069230">:</span>&nbsp;<span class="ident" id="6069232"><a href="/go/parser/parser.go.html#6068066">x</a></span><span class="op" id="6069233">,</span>&nbsp;<span class="ident" id="6069235">Lbrack</span><span class="op" id="6069241">:</span>&nbsp;<span class="ident" id="6069243"><a href="/go/parser/parser.go.html#6068205">lbrack</a></span><span class="op" id="6069249">,</span>&nbsp;<span class="ident" id="6069251">Low</span><span class="op" id="6069254">:</span>&nbsp;<span class="ident" id="6069256"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069261">[</span><span class="num" id="6069262">0</span><span class="op" id="6069263">]</span><span class="op" id="6069264">,</span>&nbsp;<span class="ident" id="6069266">High</span><span class="op" id="6069270">:</span>&nbsp;<span class="ident" id="6069272"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069277">[</span><span class="num" id="6069278">1</span><span class="op" id="6069279">]</span><span class="op" id="6069280">,</span>&nbsp;<span class="ident" id="6069282">Max</span><span class="op" id="6069285">:</span>&nbsp;<span class="ident" id="6069287"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069292">[</span><span class="num" id="6069293">2</span><span class="op" id="6069294">]</span><span class="op" id="6069295">,</span>&nbsp;<span class="ident" id="6069297">Slice3</span><span class="op" id="6069303">:</span>&nbsp;<span class="ident" id="6069305"><a href="/go/parser/parser.go.html#6068680">slice3</a></span><span class="op" id="6069311">,</span>&nbsp;<span class="ident" id="6069313">Rbrack</span><span class="op" id="6069319">:</span>&nbsp;<span class="ident" id="6069321"><a href="/go/parser/parser.go.html#6068604">rbrack</a></span><span class="op" id="6069327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069334">return</span>&nbsp;<span class="op" id="6069341">&amp;</span><span class="ident" id="6069342"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069345">.</span><span class="ident" id="6069346">IndexExpr</span><span class="op" id="6069355">{</span><span class="ident" id="6069356">X</span><span class="op" id="6069357">:</span>&nbsp;<span class="ident" id="6069359"><a href="/go/parser/parser.go.html#6068066">x</a></span><span class="op" id="6069360">,</span>&nbsp;<span class="ident" id="6069362">Lbrack</span><span class="op" id="6069368">:</span>&nbsp;<span class="ident" id="6069370"><a href="/go/parser/parser.go.html#6068205">lbrack</a></span><span class="op" id="6069376">,</span>&nbsp;<span class="ident" id="6069378">Index</span><span class="op" id="6069383">:</span>&nbsp;<span class="ident" id="6069385"><a href="/go/parser/parser.go.html#6068256">index</a></span><span class="op" id="6069390">[</span><span class="num" id="6069391">0</span><span class="op" id="6069392">]</span><span class="op" id="6069393">,</span>&nbsp;<span class="ident" id="6069395">Rbrack</span><span class="op" id="6069401">:</span>&nbsp;<span class="ident" id="6069403"><a href="/go/parser/parser.go.html#6068604">rbrack</a></span><span class="op" id="6069409">}</span><br>
<span class="lineno"></span><span class="op" id="6069411">}</span><br>
<span class="lineno">1235</span><br>
<span class="lineno"></span><span class="keyword" id="6069414">func</span>&nbsp;<span class="op" id="6069419">(</span><span class="ident" id="6069420">p</span>&nbsp;<span class="op" id="6069422">*</span><span class="ident" id="6069423"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6069429">)</span>&nbsp;<span class="ident" id="6069431">parseCallOrConversion</span><span class="op" id="6069452">(</span><span class="ident" id="6069453">fun</span>&nbsp;<span class="ident" id="6069457"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069460">.</span><span class="ident" id="6069461">Expr</span><span class="op" id="6069465">)</span>&nbsp;<span class="op" id="6069467">*</span><span class="ident" id="6069468"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069471">.</span><span class="ident" id="6069472">CallExpr</span>&nbsp;<span class="op" id="6069481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069484">if</span>&nbsp;<span class="ident" id="6069487"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069488">.</span><span class="ident" id="6069489">trace</span>&nbsp;<span class="op" id="6069495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069499">defer</span>&nbsp;<span class="ident" id="6069505"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6069507">(</span><span class="ident" id="6069508"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6069513">(</span><span class="ident" id="6069514"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069515">,</span>&nbsp;<span class="string" id="6069517">&#34;CallOrConversion&#34;</span><span class="op" id="6069535">)</span><span class="op" id="6069536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069539">}</span><br>
<span class="lineno">1240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069543">lparen</span>&nbsp;<span class="op" id="6069550">:=</span>&nbsp;<span class="ident" id="6069553"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069554">.</span><span class="ident" id="6069555">expect</span><span class="op" id="6069561">(</span><span class="ident" id="6069562"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069567">.</span><span class="ident" id="6069568">LPAREN</span><span class="op" id="6069574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069577"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069578">.</span><span class="ident" id="6069579">exprLev</span><span class="op" id="6069586">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069590">var</span>&nbsp;<span class="ident" id="6069594">list</span>&nbsp;<span class="op" id="6069599">[</span><span class="op" id="6069600">]</span><span class="ident" id="6069601"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6069604">.</span><span class="ident" id="6069605">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069611">var</span>&nbsp;<span class="ident" id="6069615">ellipsis</span>&nbsp;<span class="ident" id="6069624"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069629">.</span><span class="ident" id="6069630">Pos</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069635">for</span>&nbsp;<span class="ident" id="6069639"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069640">.</span><span class="ident" id="6069641">tok</span>&nbsp;<span class="op" id="6069645">!=</span>&nbsp;<span class="ident" id="6069648"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069653">.</span><span class="ident" id="6069654">RPAREN</span>&nbsp;<span class="op" id="6069661">&amp;&amp;</span>&nbsp;<span class="ident" id="6069664"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069665">.</span><span class="ident" id="6069666">tok</span>&nbsp;<span class="op" id="6069670">!=</span>&nbsp;<span class="ident" id="6069673"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069678">.</span><span class="ident" id="6069679">EOF</span>&nbsp;<span class="op" id="6069683">&amp;&amp;</span>&nbsp;<span class="op" id="6069686">!</span><span class="ident" id="6069687"><a href="/go/parser/parser.go.html#6069615">ellipsis</a></span><span class="op" id="6069695">.</span><span class="ident" id="6069696">IsValid</span><span class="op" id="6069703">(</span><span class="op" id="6069704">)</span>&nbsp;<span class="op" id="6069706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069710"><a href="/go/parser/parser.go.html#6069594">list</a></span>&nbsp;<span class="op" id="6069715">=</span>&nbsp;<span class="builtinfunc" id="6069717">append</span><span class="op" id="6069723">(</span><span class="ident" id="6069724"><a href="/go/parser/parser.go.html#6069594">list</a></span><span class="op" id="6069728">,</span>&nbsp;<span class="ident" id="6069730"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069731">.</span><span class="ident" id="6069732">parseRhsOrType</span><span class="op" id="6069746">(</span><span class="op" id="6069747">)</span><span class="op" id="6069748">)</span>&nbsp;<span class="comment" id="6069750">//&nbsp;builtins&nbsp;may&nbsp;expect&nbsp;a&nbsp;type:&nbsp;make(some&nbsp;type,&nbsp;...)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069804">if</span>&nbsp;<span class="ident" id="6069807"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069808">.</span><span class="ident" id="6069809">tok</span>&nbsp;<span class="op" id="6069813">==</span>&nbsp;<span class="ident" id="6069816"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069821">.</span><span class="ident" id="6069822">ELLIPSIS</span>&nbsp;<span class="op" id="6069831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069836"><a href="/go/parser/parser.go.html#6069615">ellipsis</a></span>&nbsp;<span class="op" id="6069845">=</span>&nbsp;<span class="ident" id="6069847"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069848">.</span><span class="ident" id="6069849">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069856"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069857">.</span><span class="ident" id="6069858">next</span><span class="op" id="6069862">(</span><span class="op" id="6069863">)</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069871">if</span>&nbsp;<span class="op" id="6069874">!</span><span class="ident" id="6069875"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069876">.</span><span class="ident" id="6069877">atComma</span><span class="op" id="6069884">(</span><span class="string" id="6069885">&#34;argument&nbsp;list&#34;</span><span class="op" id="6069900">)</span>&nbsp;<span class="op" id="6069902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6069907">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069919"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069920">.</span><span class="ident" id="6069921">next</span><span class="op" id="6069925">(</span><span class="op" id="6069926">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6069929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069932"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069933">.</span><span class="ident" id="6069934">exprLev</span><span class="op" id="6069941">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6069945">rparen</span>&nbsp;<span class="op" id="6069952">:=</span>&nbsp;<span class="ident" id="6069955"><a href="/go/parser/parser.go.html#6069420">p</a></span><span class="op" id="6069956">.</span><span class="ident" id="6069957">expectClosing</span><span class="op" id="6069970">(</span><span class="ident" id="6069971"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6069976">.</span><span class="ident" id="6069977">RPAREN</span><span class="op" id="6069983">,</span>&nbsp;<span class="string" id="6069985">&#34;argument&nbsp;list&#34;</span><span class="op" id="6070000">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070004">return</span>&nbsp;<span class="op" id="6070011">&amp;</span><span class="ident" id="6070012"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6070015">.</span><span class="ident" id="6070016">CallExpr</span><span class="op" id="6070024">{</span><span class="ident" id="6070025">Fun</span><span class="op" id="6070028">:</span>&nbsp;<span class="ident" id="6070030"><a href="/go/parser/parser.go.html#6069453">fun</a></span><span class="op" id="6070033">,</span>&nbsp;<span class="ident" id="6070035">Lparen</span><span class="op" id="6070041">:</span>&nbsp;<span class="ident" id="6070043"><a href="/go/parser/parser.go.html#6069543">lparen</a></span><span class="op" id="6070049">,</span>&nbsp;<span class="ident" id="6070051">Args</span><span class="op" id="6070055">:</span>&nbsp;<span class="ident" id="6070057"><a href="/go/parser/parser.go.html#6069594">list</a></span><span class="op" id="6070061">,</span>&nbsp;<span class="ident" id="6070063">Ellipsis</span><span class="op" id="6070071">:</span>&nbsp;<span class="ident" id="6070073"><a href="/go/parser/parser.go.html#6069615">ellipsis</a></span><span class="op" id="6070081">,</span>&nbsp;<span class="ident" id="6070083">Rparen</span><span class="op" id="6070089">:</span>&nbsp;<span class="ident" id="6070091"><a href="/go/parser/parser.go.html#6069945">rparen</a></span><span class="op" id="6070097">}</span><br>
<span class="lineno">1260</span><span class="op" id="6070099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6070102">func</span>&nbsp;<span class="op" id="6070107">(</span><span class="ident" id="6070108">p</span>&nbsp;<span class="op" id="6070110">*</span><span class="ident" id="6070111"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6070117">)</span>&nbsp;<span class="ident" id="6070119">parseElement</span><span class="op" id="6070131">(</span><span class="ident" id="6070132">keyOk</span>&nbsp;<span class="builtintype" id="6070138">bool</span><span class="op" id="6070142">)</span>&nbsp;<span class="ident" id="6070144"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6070147">.</span><span class="ident" id="6070148">Expr</span>&nbsp;<span class="op" id="6070153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070156">if</span>&nbsp;<span class="ident" id="6070159"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6070160">.</span><span class="ident" id="6070161">trace</span>&nbsp;<span class="op" id="6070167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070171">defer</span>&nbsp;<span class="ident" id="6070177"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6070179">(</span><span class="ident" id="6070180"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6070185">(</span><span class="ident" id="6070186"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6070187">,</span>&nbsp;<span class="string" id="6070189">&#34;Element&#34;</span><span class="op" id="6070198">)</span><span class="op" id="6070199">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070206">if</span>&nbsp;<span class="ident" id="6070209"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6070210">.</span><span class="ident" id="6070211">tok</span>&nbsp;<span class="op" id="6070215">==</span>&nbsp;<span class="ident" id="6070218"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6070223">.</span><span class="ident" id="6070224">LBRACE</span>&nbsp;<span class="op" id="6070231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6070235">return</span>&nbsp;<span class="ident" id="6070242"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6070243">.</span><span class="ident" id="6070244">parseLiteralValue</span><span class="op" id="6070261">(</span><span class="ident" id="6070262">nil</span><span class="op" id="6070265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6070268">}</span><br>
<span class="lineno">1270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070272">//&nbsp;Because&nbsp;the&nbsp;parser&nbsp;doesn&#39;t&nbsp;know&nbsp;the&nbsp;composite&nbsp;literal&nbsp;type,&nbsp;it&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070346">//&nbsp;know&nbsp;if&nbsp;a&nbsp;key&nbsp;that&#39;s&nbsp;an&nbsp;identifier&nbsp;is&nbsp;a&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070418">//&nbsp;denoting&nbsp;a&nbsp;value.&nbsp;The&nbsp;former&nbsp;is&nbsp;not&nbsp;resolved&nbsp;by&nbsp;the&nbsp;parser&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070488">//&nbsp;resolver.</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070502">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070506">//&nbsp;Instead,&nbsp;_try_&nbsp;to&nbsp;resolve&nbsp;such&nbsp;a&nbsp;key&nbsp;if&nbsp;possible.&nbsp;If&nbsp;it&nbsp;resolves,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070576">//&nbsp;it&nbsp;a)&nbsp;has&nbsp;correctly&nbsp;resolved,&nbsp;or&nbsp;b)&nbsp;incorrectly&nbsp;resolved&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070645">//&nbsp;the&nbsp;key&nbsp;is&nbsp;a&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name&nbsp;matching&nbsp;another&nbsp;identifier.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070716">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case&nbsp;we&nbsp;are&nbsp;done,&nbsp;and&nbsp;in&nbsp;the&nbsp;latter&nbsp;case&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070784">//&nbsp;care&nbsp;because&nbsp;the&nbsp;type&nbsp;checker&nbsp;will&nbsp;do&nbsp;a&nbsp;separate&nbsp;field&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070851">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070855">//&nbsp;If&nbsp;the&nbsp;key&nbsp;does&nbsp;not&nbsp;resolve,&nbsp;it&nbsp;a)&nbsp;must&nbsp;be&nbsp;defined&nbsp;at&nbsp;the&nbsp;top</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070921">//&nbsp;level&nbsp;in&nbsp;another&nbsp;file&nbsp;of&nbsp;the&nbsp;same&nbsp;package,&nbsp;the&nbsp;universe&nbsp;scope,&nbsp;or&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6070994">//&nbsp;undeclared;&nbsp;or&nbsp;b)&nbsp;it&nbsp;is&nbsp;a&nbsp;struct&nbsp;field.&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;the&nbsp;type</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071067">//&nbsp;checker&nbsp;can&nbsp;do&nbsp;a&nbsp;top-level&nbsp;lookup,&nbsp;and&nbsp;in&nbsp;the&nbsp;latter&nbsp;case&nbsp;it&nbsp;will&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071140">//&nbsp;a&nbsp;separate&nbsp;field&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071169">x</span>&nbsp;<span class="op" id="6071171">:=</span>&nbsp;<span class="ident" id="6071174"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071175">.</span><span class="ident" id="6071176">checkExpr</span><span class="op" id="6071185">(</span><span class="ident" id="6071186"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071187">.</span><span class="ident" id="6071188">parseExpr</span><span class="op" id="6071197">(</span><span class="ident" id="6071198"><a href="/go/parser/parser.go.html#6070132">keyOk</a></span><span class="op" id="6071203">)</span><span class="op" id="6071204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071207">if</span>&nbsp;<span class="ident" id="6071210"><a href="/go/parser/parser.go.html#6070132">keyOk</a></span>&nbsp;<span class="op" id="6071216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071220">if</span>&nbsp;<span class="ident" id="6071223"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071224">.</span><span class="ident" id="6071225">tok</span>&nbsp;<span class="op" id="6071229">==</span>&nbsp;<span class="ident" id="6071232"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6071237">.</span><span class="ident" id="6071238">COLON</span>&nbsp;<span class="op" id="6071244">{</span><br>
<span class="lineno">1290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071249">colon</span>&nbsp;<span class="op" id="6071255">:=</span>&nbsp;<span class="ident" id="6071258"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071259">.</span><span class="ident" id="6071260">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071267"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071268">.</span><span class="ident" id="6071269">next</span><span class="op" id="6071273">(</span><span class="op" id="6071274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071279">//&nbsp;Try&nbsp;to&nbsp;resolve&nbsp;the&nbsp;key&nbsp;but&nbsp;don&#39;t&nbsp;collect&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071329">//&nbsp;as&nbsp;unresolved&nbsp;identifier&nbsp;if&nbsp;it&nbsp;fails&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071380">//&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;(possibly&nbsp;false)&nbsp;errors&nbsp;about</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6071429">//&nbsp;undeclared&nbsp;names.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071453"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071454">.</span><span class="ident" id="6071455">tryResolve</span><span class="op" id="6071465">(</span><span class="ident" id="6071466"><a href="/go/parser/parser.go.html#6071169">x</a></span><span class="op" id="6071467">,</span>&nbsp;<span class="ident" id="6071469">false</span><span class="op" id="6071474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071479">return</span>&nbsp;<span class="op" id="6071486">&amp;</span><span class="ident" id="6071487"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6071490">.</span><span class="ident" id="6071491">KeyValueExpr</span><span class="op" id="6071503">{</span><span class="ident" id="6071504">Key</span><span class="op" id="6071507">:</span>&nbsp;<span class="ident" id="6071509"><a href="/go/parser/parser.go.html#6071169">x</a></span><span class="op" id="6071510">,</span>&nbsp;<span class="ident" id="6071512">Colon</span><span class="op" id="6071517">:</span>&nbsp;<span class="ident" id="6071519"><a href="/go/parser/parser.go.html#6071249">colon</a></span><span class="op" id="6071524">,</span>&nbsp;<span class="ident" id="6071526">Value</span><span class="op" id="6071531">:</span>&nbsp;<span class="ident" id="6071533"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071534">.</span><span class="ident" id="6071535">parseElement</span><span class="op" id="6071547">(</span><span class="ident" id="6071548">false</span><span class="op" id="6071553">)</span><span class="op" id="6071554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071562"><a href="/go/parser/parser.go.html#6070108">p</a></span><span class="op" id="6071563">.</span><span class="ident" id="6071564">resolve</span><span class="op" id="6071571">(</span><span class="ident" id="6071572"><a href="/go/parser/parser.go.html#6071169">x</a></span><span class="op" id="6071573">)</span>&nbsp;<span class="comment" id="6071575">//&nbsp;not&nbsp;a&nbsp;key</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071593">return</span>&nbsp;<span class="ident" id="6071600"><a href="/go/parser/parser.go.html#6071169">x</a></span><br>
<span class="lineno"></span><span class="op" id="6071602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1305</span><span class="keyword" id="6071605">func</span>&nbsp;<span class="op" id="6071610">(</span><span class="ident" id="6071611">p</span>&nbsp;<span class="op" id="6071613">*</span><span class="ident" id="6071614"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6071620">)</span>&nbsp;<span class="ident" id="6071622">parseElementList</span><span class="op" id="6071638">(</span><span class="op" id="6071639">)</span>&nbsp;<span class="op" id="6071641">(</span><span class="ident" id="6071642">list</span>&nbsp;<span class="op" id="6071647">[</span><span class="op" id="6071648">]</span><span class="ident" id="6071649"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6071652">.</span><span class="ident" id="6071653">Expr</span><span class="op" id="6071657">)</span>&nbsp;<span class="op" id="6071659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071662">if</span>&nbsp;<span class="ident" id="6071665"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071666">.</span><span class="ident" id="6071667">trace</span>&nbsp;<span class="op" id="6071673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071677">defer</span>&nbsp;<span class="ident" id="6071683"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6071685">(</span><span class="ident" id="6071686"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6071691">(</span><span class="ident" id="6071692"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071693">,</span>&nbsp;<span class="string" id="6071695">&#34;ElementList&#34;</span><span class="op" id="6071708">)</span><span class="op" id="6071709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071716">for</span>&nbsp;<span class="ident" id="6071720"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071721">.</span><span class="ident" id="6071722">tok</span>&nbsp;<span class="op" id="6071726">!=</span>&nbsp;<span class="ident" id="6071729"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6071734">.</span><span class="ident" id="6071735">RBRACE</span>&nbsp;<span class="op" id="6071742">&amp;&amp;</span>&nbsp;<span class="ident" id="6071745"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071746">.</span><span class="ident" id="6071747">tok</span>&nbsp;<span class="op" id="6071751">!=</span>&nbsp;<span class="ident" id="6071754"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6071759">.</span><span class="ident" id="6071760">EOF</span>&nbsp;<span class="op" id="6071764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071768"><a href="/go/parser/parser.go.html#6071642">list</a></span>&nbsp;<span class="op" id="6071773">=</span>&nbsp;<span class="builtinfunc" id="6071775">append</span><span class="op" id="6071781">(</span><span class="ident" id="6071782"><a href="/go/parser/parser.go.html#6071642">list</a></span><span class="op" id="6071786">,</span>&nbsp;<span class="ident" id="6071788"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071789">.</span><span class="ident" id="6071790">parseElement</span><span class="op" id="6071802">(</span><span class="ident" id="6071803">true</span><span class="op" id="6071807">)</span><span class="op" id="6071808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071812">if</span>&nbsp;<span class="op" id="6071815">!</span><span class="ident" id="6071816"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071817">.</span><span class="ident" id="6071818">atComma</span><span class="op" id="6071825">(</span><span class="string" id="6071826">&#34;composite&nbsp;literal&#34;</span><span class="op" id="6071845">)</span>&nbsp;<span class="op" id="6071847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071852">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071860">}</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6071864"><a href="/go/parser/parser.go.html#6071611">p</a></span><span class="op" id="6071865">.</span><span class="ident" id="6071866">next</span><span class="op" id="6071870">(</span><span class="op" id="6071871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6071874">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071878">return</span><br>
<span class="lineno"></span><span class="op" id="6071885">}</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span><span class="keyword" id="6071888">func</span>&nbsp;<span class="op" id="6071893">(</span><span class="ident" id="6071894">p</span>&nbsp;<span class="op" id="6071896">*</span><span class="ident" id="6071897"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6071903">)</span>&nbsp;<span class="ident" id="6071905">parseLiteralValue</span><span class="op" id="6071922">(</span><span class="ident" id="6071923">typ</span>&nbsp;<span class="ident" id="6071927"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6071930">.</span><span class="ident" id="6071931">Expr</span><span class="op" id="6071935">)</span>&nbsp;<span class="ident" id="6071937"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6071940">.</span><span class="ident" id="6071941">Expr</span>&nbsp;<span class="op" id="6071946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071949">if</span>&nbsp;<span class="ident" id="6071952"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6071953">.</span><span class="ident" id="6071954">trace</span>&nbsp;<span class="op" id="6071960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6071964">defer</span>&nbsp;<span class="ident" id="6071970"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6071972">(</span><span class="ident" id="6071973"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6071978">(</span><span class="ident" id="6071979"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6071980">,</span>&nbsp;<span class="string" id="6071982">&#34;LiteralValue&#34;</span><span class="op" id="6071996">)</span><span class="op" id="6071997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072000">}</span><br>
<span class="lineno">1325</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072004">lbrace</span>&nbsp;<span class="op" id="6072011">:=</span>&nbsp;<span class="ident" id="6072014"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072015">.</span><span class="ident" id="6072016">expect</span><span class="op" id="6072022">(</span><span class="ident" id="6072023"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6072028">.</span><span class="ident" id="6072029">LBRACE</span><span class="op" id="6072035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072038">var</span>&nbsp;<span class="ident" id="6072042">elts</span>&nbsp;<span class="op" id="6072047">[</span><span class="op" id="6072048">]</span><span class="ident" id="6072049"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072052">.</span><span class="ident" id="6072053">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072059"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072060">.</span><span class="ident" id="6072061">exprLev</span><span class="op" id="6072068">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072072">if</span>&nbsp;<span class="ident" id="6072075"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072076">.</span><span class="ident" id="6072077">tok</span>&nbsp;<span class="op" id="6072081">!=</span>&nbsp;<span class="ident" id="6072084"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6072089">.</span><span class="ident" id="6072090">RBRACE</span>&nbsp;<span class="op" id="6072097">{</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072101"><a href="/go/parser/parser.go.html#6072042">elts</a></span>&nbsp;<span class="op" id="6072106">=</span>&nbsp;<span class="ident" id="6072108"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072109">.</span><span class="ident" id="6072110">parseElementList</span><span class="op" id="6072126">(</span><span class="op" id="6072127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6072130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072133"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072134">.</span><span class="ident" id="6072135">exprLev</span><span class="op" id="6072142">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6072146">rbrace</span>&nbsp;<span class="op" id="6072153">:=</span>&nbsp;<span class="ident" id="6072156"><a href="/go/parser/parser.go.html#6071894">p</a></span><span class="op" id="6072157">.</span><span class="ident" id="6072158">expectClosing</span><span class="op" id="6072171">(</span><span class="ident" id="6072172"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6072177">.</span><span class="ident" id="6072178">RBRACE</span><span class="op" id="6072184">,</span>&nbsp;<span class="string" id="6072186">&#34;composite&nbsp;literal&#34;</span><span class="op" id="6072205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072208">return</span>&nbsp;<span class="op" id="6072215">&amp;</span><span class="ident" id="6072216"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072219">.</span><span class="ident" id="6072220">CompositeLit</span><span class="op" id="6072232">{</span><span class="ident" id="6072233">Type</span><span class="op" id="6072237">:</span>&nbsp;<span class="ident" id="6072239"><a href="/go/parser/parser.go.html#6071923">typ</a></span><span class="op" id="6072242">,</span>&nbsp;<span class="ident" id="6072244">Lbrace</span><span class="op" id="6072250">:</span>&nbsp;<span class="ident" id="6072252"><a href="/go/parser/parser.go.html#6072004">lbrace</a></span><span class="op" id="6072258">,</span>&nbsp;<span class="ident" id="6072260">Elts</span><span class="op" id="6072264">:</span>&nbsp;<span class="ident" id="6072266"><a href="/go/parser/parser.go.html#6072042">elts</a></span><span class="op" id="6072270">,</span>&nbsp;<span class="ident" id="6072272">Rbrace</span><span class="op" id="6072278">:</span>&nbsp;<span class="ident" id="6072280"><a href="/go/parser/parser.go.html#6072146">rbrace</a></span><span class="op" id="6072286">}</span><br>
<span class="lineno">1335</span><span class="op" id="6072288">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6072291">//&nbsp;checkExpr&nbsp;checks&nbsp;that&nbsp;x&nbsp;is&nbsp;an&nbsp;expression&nbsp;(and&nbsp;not&nbsp;a&nbsp;type).</span><br>
<span class="lineno"></span><span class="keyword" id="6072353">func</span>&nbsp;<span class="op" id="6072358">(</span><span class="ident" id="6072359">p</span>&nbsp;<span class="op" id="6072361">*</span><span class="ident" id="6072362"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6072368">)</span>&nbsp;<span class="ident" id="6072370">checkExpr</span><span class="op" id="6072379">(</span><span class="ident" id="6072380">x</span>&nbsp;<span class="ident" id="6072382"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072385">.</span><span class="ident" id="6072386">Expr</span><span class="op" id="6072390">)</span>&nbsp;<span class="ident" id="6072392"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072395">.</span><span class="ident" id="6072396">Expr</span>&nbsp;<span class="op" id="6072401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072404">switch</span>&nbsp;<span class="ident" id="6072411"><a href="/go/parser/parser.go.html#6074186">unparen</a></span><span class="op" id="6072418">(</span><span class="ident" id="6072419"><a href="/go/parser/parser.go.html#6072380">x</a></span><span class="op" id="6072420">)</span><span class="op" id="6072421">.</span><span class="op" id="6072422">(</span><span class="keyword" id="6072423">type</span><span class="op" id="6072427">)</span>&nbsp;<span class="op" id="6072429">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072432">case</span>&nbsp;<span class="op" id="6072437">*</span><span class="ident" id="6072438"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072441">.</span><span class="ident" id="6072442">BadExpr</span><span class="op" id="6072449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072452">case</span>&nbsp;<span class="op" id="6072457">*</span><span class="ident" id="6072458"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072461">.</span><span class="ident" id="6072462">Ident</span><span class="op" id="6072467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072470">case</span>&nbsp;<span class="op" id="6072475">*</span><span class="ident" id="6072476"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072479">.</span><span class="ident" id="6072480">BasicLit</span><span class="op" id="6072488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072491">case</span>&nbsp;<span class="op" id="6072496">*</span><span class="ident" id="6072497"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072500">.</span><span class="ident" id="6072501">FuncLit</span><span class="op" id="6072508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072511">case</span>&nbsp;<span class="op" id="6072516">*</span><span class="ident" id="6072517"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072520">.</span><span class="ident" id="6072521">CompositeLit</span><span class="op" id="6072533">:</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072536">case</span>&nbsp;<span class="op" id="6072541">*</span><span class="ident" id="6072542"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072545">.</span><span class="ident" id="6072546">ParenExpr</span><span class="op" id="6072555">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6072559">panic</span><span class="op" id="6072564">(</span><span class="string" id="6072565">&#34;unreachable&#34;</span><span class="op" id="6072578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072581">case</span>&nbsp;<span class="op" id="6072586">*</span><span class="ident" id="6072587"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072590">.</span><span class="ident" id="6072591">SelectorExpr</span><span class="op" id="6072603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072606">case</span>&nbsp;<span class="op" id="6072611">*</span><span class="ident" id="6072612"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072615">.</span><span class="ident" id="6072616">IndexExpr</span><span class="op" id="6072625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072628">case</span>&nbsp;<span class="op" id="6072633">*</span><span class="ident" id="6072634"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072637">.</span><span class="ident" id="6072638">SliceExpr</span><span class="op" id="6072647">:</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072650">case</span>&nbsp;<span class="op" id="6072655">*</span><span class="ident" id="6072656"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072659">.</span><span class="ident" id="6072660">TypeAssertExpr</span><span class="op" id="6072674">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072678">//&nbsp;If&nbsp;t.Type&nbsp;==&nbsp;nil&nbsp;we&nbsp;have&nbsp;a&nbsp;type&nbsp;assertion&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072737">//&nbsp;y.(type),&nbsp;which&nbsp;is&nbsp;only&nbsp;allowed&nbsp;in&nbsp;type&nbsp;switch&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072802">//&nbsp;It&#39;s&nbsp;hard&nbsp;to&nbsp;exclude&nbsp;those&nbsp;but&nbsp;for&nbsp;the&nbsp;case&nbsp;where&nbsp;we&nbsp;are&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072867">//&nbsp;a&nbsp;type&nbsp;switch.&nbsp;Instead&nbsp;be&nbsp;lenient&nbsp;and&nbsp;test&nbsp;this&nbsp;in&nbsp;the&nbsp;type</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6072932">//&nbsp;checker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072945">case</span>&nbsp;<span class="op" id="6072950">*</span><span class="ident" id="6072951"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072954">.</span><span class="ident" id="6072955">CallExpr</span><span class="op" id="6072963">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072966">case</span>&nbsp;<span class="op" id="6072971">*</span><span class="ident" id="6072972"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072975">.</span><span class="ident" id="6072976">StarExpr</span><span class="op" id="6072984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6072987">case</span>&nbsp;<span class="op" id="6072992">*</span><span class="ident" id="6072993"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6072996">.</span><span class="ident" id="6072997">UnaryExpr</span><span class="op" id="6073006">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073009">case</span>&nbsp;<span class="op" id="6073014">*</span><span class="ident" id="6073015"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073018">.</span><span class="ident" id="6073019">BinaryExpr</span><span class="op" id="6073029">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073032">default</span><span class="op" id="6073039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6073043">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;proper&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073091"><a href="/go/parser/parser.go.html#6072359">p</a></span><span class="op" id="6073092">.</span><span class="ident" id="6073093">errorExpected</span><span class="op" id="6073106">(</span><span class="ident" id="6073107"><a href="/go/parser/parser.go.html#6072380">x</a></span><span class="op" id="6073108">.</span><span class="ident" id="6073109">Pos</span><span class="op" id="6073112">(</span><span class="op" id="6073113">)</span><span class="op" id="6073114">,</span>&nbsp;<span class="string" id="6073116">&#34;expression&#34;</span><span class="op" id="6073128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073132"><a href="/go/parser/parser.go.html#6072380">x</a></span>&nbsp;<span class="op" id="6073134">=</span>&nbsp;<span class="op" id="6073136">&amp;</span><span class="ident" id="6073137"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073140">.</span><span class="ident" id="6073141">BadExpr</span><span class="op" id="6073148">{</span><span class="ident" id="6073149">From</span><span class="op" id="6073153">:</span>&nbsp;<span class="ident" id="6073155"><a href="/go/parser/parser.go.html#6072380">x</a></span><span class="op" id="6073156">.</span><span class="ident" id="6073157">Pos</span><span class="op" id="6073160">(</span><span class="op" id="6073161">)</span><span class="op" id="6073162">,</span>&nbsp;<span class="ident" id="6073164">To</span><span class="op" id="6073166">:</span>&nbsp;<span class="ident" id="6073168"><a href="/go/parser/parser.go.html#6072359">p</a></span><span class="op" id="6073169">.</span><span class="ident" id="6073170">safePos</span><span class="op" id="6073177">(</span><span class="ident" id="6073178"><a href="/go/parser/parser.go.html#6072380">x</a></span><span class="op" id="6073179">.</span><span class="ident" id="6073180">End</span><span class="op" id="6073183">(</span><span class="op" id="6073184">)</span><span class="op" id="6073185">)</span><span class="op" id="6073186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073189">}</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073192">return</span>&nbsp;<span class="ident" id="6073199"><a href="/go/parser/parser.go.html#6072380">x</a></span><br>
<span class="lineno"></span><span class="op" id="6073201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6073204">//&nbsp;isTypeName&nbsp;returns&nbsp;true&nbsp;iff&nbsp;x&nbsp;is&nbsp;a&nbsp;(qualified)&nbsp;TypeName.</span><br>
<span class="lineno"></span><span class="keyword" id="6073264">func</span>&nbsp;<span class="ident" id="6073269">isTypeName</span><span class="op" id="6073279">(</span><span class="ident" id="6073280">x</span>&nbsp;<span class="ident" id="6073282"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073285">.</span><span class="ident" id="6073286">Expr</span><span class="op" id="6073290">)</span>&nbsp;<span class="builtintype" id="6073292">bool</span>&nbsp;<span class="op" id="6073297">{</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073300">switch</span>&nbsp;<span class="ident" id="6073307">t</span>&nbsp;<span class="op" id="6073309">:=</span>&nbsp;<span class="ident" id="6073312"><a href="/go/parser/parser.go.html#6073280">x</a></span><span class="op" id="6073313">.</span><span class="op" id="6073314">(</span><span class="keyword" id="6073315">type</span><span class="op" id="6073319">)</span>&nbsp;<span class="op" id="6073321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073324">case</span>&nbsp;<span class="op" id="6073329">*</span><span class="ident" id="6073330"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073333">.</span><span class="ident" id="6073334">BadExpr</span><span class="op" id="6073341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073344">case</span>&nbsp;<span class="op" id="6073349">*</span><span class="ident" id="6073350"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073353">.</span><span class="ident" id="6073354">Ident</span><span class="op" id="6073359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073362">case</span>&nbsp;<span class="op" id="6073367">*</span><span class="ident" id="6073368"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073371">.</span><span class="ident" id="6073372">SelectorExpr</span><span class="op" id="6073384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073388">_</span><span class="op" id="6073389">,</span>&nbsp;<span class="ident" id="6073391">isIdent</span>&nbsp;<span class="op" id="6073399">:=</span>&nbsp;<span class="ident" id="6073402"><a href="/go/parser/parser.go.html#6073307">t</a></span><span class="op" id="6073403">.</span><span class="ident" id="6073404">X</span><span class="op" id="6073405">.</span><span class="op" id="6073406">(</span><span class="op" id="6073407">*</span><span class="ident" id="6073408"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073411">.</span><span class="ident" id="6073412">Ident</span><span class="op" id="6073417">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073421">return</span>&nbsp;<span class="ident" id="6073428"><a href="/go/parser/parser.go.html#6073391">isIdent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073437">default</span><span class="op" id="6073444">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073448">return</span>&nbsp;<span class="ident" id="6073455">false</span>&nbsp;<span class="comment" id="6073461">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;type&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073503">return</span>&nbsp;<span class="ident" id="6073510">true</span><br>
<span class="lineno">1380</span><span class="op" id="6073515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6073518">//&nbsp;isLiteralType&nbsp;returns&nbsp;true&nbsp;iff&nbsp;x&nbsp;is&nbsp;a&nbsp;legal&nbsp;composite&nbsp;literal&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="6073589">func</span>&nbsp;<span class="ident" id="6073594">isLiteralType</span><span class="op" id="6073607">(</span><span class="ident" id="6073608">x</span>&nbsp;<span class="ident" id="6073610"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073613">.</span><span class="ident" id="6073614">Expr</span><span class="op" id="6073618">)</span>&nbsp;<span class="builtintype" id="6073620">bool</span>&nbsp;<span class="op" id="6073625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073628">switch</span>&nbsp;<span class="ident" id="6073635">t</span>&nbsp;<span class="op" id="6073637">:=</span>&nbsp;<span class="ident" id="6073640"><a href="/go/parser/parser.go.html#6073608">x</a></span><span class="op" id="6073641">.</span><span class="op" id="6073642">(</span><span class="keyword" id="6073643">type</span><span class="op" id="6073647">)</span>&nbsp;<span class="op" id="6073649">{</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073652">case</span>&nbsp;<span class="op" id="6073657">*</span><span class="ident" id="6073658"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073661">.</span><span class="ident" id="6073662">BadExpr</span><span class="op" id="6073669">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073672">case</span>&nbsp;<span class="op" id="6073677">*</span><span class="ident" id="6073678"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073681">.</span><span class="ident" id="6073682">Ident</span><span class="op" id="6073687">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073690">case</span>&nbsp;<span class="op" id="6073695">*</span><span class="ident" id="6073696"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073699">.</span><span class="ident" id="6073700">SelectorExpr</span><span class="op" id="6073712">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6073716">_</span><span class="op" id="6073717">,</span>&nbsp;<span class="ident" id="6073719">isIdent</span>&nbsp;<span class="op" id="6073727">:=</span>&nbsp;<span class="ident" id="6073730"><a href="/go/parser/parser.go.html#6073635">t</a></span><span class="op" id="6073731">.</span><span class="ident" id="6073732">X</span><span class="op" id="6073733">.</span><span class="op" id="6073734">(</span><span class="op" id="6073735">*</span><span class="ident" id="6073736"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073739">.</span><span class="ident" id="6073740">Ident</span><span class="op" id="6073745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073749">return</span>&nbsp;<span class="ident" id="6073756"><a href="/go/parser/parser.go.html#6073719">isIdent</a></span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073765">case</span>&nbsp;<span class="op" id="6073770">*</span><span class="ident" id="6073771"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073774">.</span><span class="ident" id="6073775">ArrayType</span><span class="op" id="6073784">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073787">case</span>&nbsp;<span class="op" id="6073792">*</span><span class="ident" id="6073793"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073796">.</span><span class="ident" id="6073797">StructType</span><span class="op" id="6073807">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073810">case</span>&nbsp;<span class="op" id="6073815">*</span><span class="ident" id="6073816"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6073819">.</span><span class="ident" id="6073820">MapType</span><span class="op" id="6073827">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073830">default</span><span class="op" id="6073837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073841">return</span>&nbsp;<span class="ident" id="6073848">false</span>&nbsp;<span class="comment" id="6073854">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;not&nbsp;legal&nbsp;composite&nbsp;literal&nbsp;types</span><br>
<span class="lineno">1395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6073912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6073915">return</span>&nbsp;<span class="ident" id="6073922">true</span><br>
<span class="lineno"></span><span class="op" id="6073927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6073930">//&nbsp;If&nbsp;x&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;*T,&nbsp;deref&nbsp;returns&nbsp;T,&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;x.</span><br>
<span class="lineno">1400</span><span class="keyword" id="6073998">func</span>&nbsp;<span class="ident" id="6074003">deref</span><span class="op" id="6074008">(</span><span class="ident" id="6074009">x</span>&nbsp;<span class="ident" id="6074011"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074014">.</span><span class="ident" id="6074015">Expr</span><span class="op" id="6074019">)</span>&nbsp;<span class="ident" id="6074021"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074024">.</span><span class="ident" id="6074025">Expr</span>&nbsp;<span class="op" id="6074030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074033">if</span>&nbsp;<span class="ident" id="6074036">p</span><span class="op" id="6074037">,</span>&nbsp;<span class="ident" id="6074039">isPtr</span>&nbsp;<span class="op" id="6074045">:=</span>&nbsp;<span class="ident" id="6074048"><a href="/go/parser/parser.go.html#6074009">x</a></span><span class="op" id="6074049">.</span><span class="op" id="6074050">(</span><span class="op" id="6074051">*</span><span class="ident" id="6074052"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074055">.</span><span class="ident" id="6074056">StarExpr</span><span class="op" id="6074064">)</span><span class="op" id="6074065">;</span>&nbsp;<span class="ident" id="6074067"><a href="/go/parser/parser.go.html#6074039">isPtr</a></span>&nbsp;<span class="op" id="6074073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074077"><a href="/go/parser/parser.go.html#6074009">x</a></span>&nbsp;<span class="op" id="6074079">=</span>&nbsp;<span class="ident" id="6074081"><a href="/go/parser/parser.go.html#6074036">p</a></span><span class="op" id="6074082">.</span><span class="ident" id="6074083">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074089">return</span>&nbsp;<span class="ident" id="6074096"><a href="/go/parser/parser.go.html#6074009">x</a></span><br>
<span class="lineno">1405</span><span class="op" id="6074098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6074101">//&nbsp;If&nbsp;x&nbsp;is&nbsp;of&nbsp;the&nbsp;form&nbsp;(T),&nbsp;unparen&nbsp;returns&nbsp;unparen(T),&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;x.</span><br>
<span class="lineno"></span><span class="keyword" id="6074181">func</span>&nbsp;<span class="ident" id="6074186">unparen</span><span class="op" id="6074193">(</span><span class="ident" id="6074194">x</span>&nbsp;<span class="ident" id="6074196"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074199">.</span><span class="ident" id="6074200">Expr</span><span class="op" id="6074204">)</span>&nbsp;<span class="ident" id="6074206"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074209">.</span><span class="ident" id="6074210">Expr</span>&nbsp;<span class="op" id="6074215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074218">if</span>&nbsp;<span class="ident" id="6074221">p</span><span class="op" id="6074222">,</span>&nbsp;<span class="ident" id="6074224">isParen</span>&nbsp;<span class="op" id="6074232">:=</span>&nbsp;<span class="ident" id="6074235"><a href="/go/parser/parser.go.html#6074194">x</a></span><span class="op" id="6074236">.</span><span class="op" id="6074237">(</span><span class="op" id="6074238">*</span><span class="ident" id="6074239"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074242">.</span><span class="ident" id="6074243">ParenExpr</span><span class="op" id="6074252">)</span><span class="op" id="6074253">;</span>&nbsp;<span class="ident" id="6074255"><a href="/go/parser/parser.go.html#6074224">isParen</a></span>&nbsp;<span class="op" id="6074263">{</span><br>
<span class="lineno">1410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074267"><a href="/go/parser/parser.go.html#6074194">x</a></span>&nbsp;<span class="op" id="6074269">=</span>&nbsp;<span class="ident" id="6074271"><a href="/go/parser/parser.go.html#6074186">unparen</a></span><span class="op" id="6074278">(</span><span class="ident" id="6074279"><a href="/go/parser/parser.go.html#6074221">p</a></span><span class="op" id="6074280">.</span><span class="ident" id="6074281">X</span><span class="op" id="6074282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074288">return</span>&nbsp;<span class="ident" id="6074295"><a href="/go/parser/parser.go.html#6074194">x</a></span><br>
<span class="lineno"></span><span class="op" id="6074297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1415</span><span class="comment" id="6074300">//&nbsp;checkExprOrType&nbsp;checks&nbsp;that&nbsp;x&nbsp;is&nbsp;an&nbsp;expression&nbsp;or&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="6074360">//&nbsp;(and&nbsp;not&nbsp;a&nbsp;raw&nbsp;type&nbsp;such&nbsp;as&nbsp;[...]T).</span><br>
<span class="lineno"></span><span class="comment" id="6074400">//</span><br>
<span class="lineno"></span><span class="keyword" id="6074403">func</span>&nbsp;<span class="op" id="6074408">(</span><span class="ident" id="6074409">p</span>&nbsp;<span class="op" id="6074411">*</span><span class="ident" id="6074412"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6074418">)</span>&nbsp;<span class="ident" id="6074420">checkExprOrType</span><span class="op" id="6074435">(</span><span class="ident" id="6074436">x</span>&nbsp;<span class="ident" id="6074438"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074441">.</span><span class="ident" id="6074442">Expr</span><span class="op" id="6074446">)</span>&nbsp;<span class="ident" id="6074448"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074451">.</span><span class="ident" id="6074452">Expr</span>&nbsp;<span class="op" id="6074457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074460">switch</span>&nbsp;<span class="ident" id="6074467">t</span>&nbsp;<span class="op" id="6074469">:=</span>&nbsp;<span class="ident" id="6074472"><a href="/go/parser/parser.go.html#6074186">unparen</a></span><span class="op" id="6074479">(</span><span class="ident" id="6074480"><a href="/go/parser/parser.go.html#6074436">x</a></span><span class="op" id="6074481">)</span><span class="op" id="6074482">.</span><span class="op" id="6074483">(</span><span class="keyword" id="6074484">type</span><span class="op" id="6074488">)</span>&nbsp;<span class="op" id="6074490">{</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074493">case</span>&nbsp;<span class="op" id="6074498">*</span><span class="ident" id="6074499"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074502">.</span><span class="ident" id="6074503">ParenExpr</span><span class="op" id="6074512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6074516">panic</span><span class="op" id="6074521">(</span><span class="string" id="6074522">&#34;unreachable&#34;</span><span class="op" id="6074535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074538">case</span>&nbsp;<span class="op" id="6074543">*</span><span class="ident" id="6074544"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074547">.</span><span class="ident" id="6074548">UnaryExpr</span><span class="op" id="6074557">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074560">case</span>&nbsp;<span class="op" id="6074565">*</span><span class="ident" id="6074566"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074569">.</span><span class="ident" id="6074570">ArrayType</span><span class="op" id="6074579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074583">if</span>&nbsp;<span class="builtinfunc" id="6074586">len</span><span class="op" id="6074589">,</span>&nbsp;<span class="ident" id="6074591">isEllipsis</span>&nbsp;<span class="op" id="6074602">:=</span>&nbsp;<span class="ident" id="6074605"><a href="/go/parser/parser.go.html#6074467">t</a></span><span class="op" id="6074606">.</span><span class="ident" id="6074607">Len</span><span class="op" id="6074610">.</span><span class="op" id="6074611">(</span><span class="op" id="6074612">*</span><span class="ident" id="6074613"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074616">.</span><span class="ident" id="6074617">Ellipsis</span><span class="op" id="6074625">)</span><span class="op" id="6074626">;</span>&nbsp;<span class="ident" id="6074628"><a href="/go/parser/parser.go.html#6074591">isEllipsis</a></span>&nbsp;<span class="op" id="6074639">{</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074644"><a href="/go/parser/parser.go.html#6074409">p</a></span><span class="op" id="6074645">.</span><span class="builtintype" id="6074646">error</span><span class="op" id="6074651">(</span><span class="builtinfunc" id="6074652"><a href="/go/parser/parser.go.html#6074586">len</a></span><span class="op" id="6074655">.</span><span class="ident" id="6074656">Pos</span><span class="op" id="6074659">(</span><span class="op" id="6074660">)</span><span class="op" id="6074661">,</span>&nbsp;<span class="string" id="6074663">&#34;expected&nbsp;array&nbsp;length,&nbsp;found&nbsp;&#39;...&#39;&#34;</span><span class="op" id="6074699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6074704"><a href="/go/parser/parser.go.html#6074436">x</a></span>&nbsp;<span class="op" id="6074706">=</span>&nbsp;<span class="op" id="6074708">&amp;</span><span class="ident" id="6074709"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074712">.</span><span class="ident" id="6074713">BadExpr</span><span class="op" id="6074720">{</span><span class="ident" id="6074721">From</span><span class="op" id="6074725">:</span>&nbsp;<span class="ident" id="6074727"><a href="/go/parser/parser.go.html#6074436">x</a></span><span class="op" id="6074728">.</span><span class="ident" id="6074729">Pos</span><span class="op" id="6074732">(</span><span class="op" id="6074733">)</span><span class="op" id="6074734">,</span>&nbsp;<span class="ident" id="6074736">To</span><span class="op" id="6074738">:</span>&nbsp;<span class="ident" id="6074740"><a href="/go/parser/parser.go.html#6074409">p</a></span><span class="op" id="6074741">.</span><span class="ident" id="6074742">safePos</span><span class="op" id="6074749">(</span><span class="ident" id="6074750"><a href="/go/parser/parser.go.html#6074436">x</a></span><span class="op" id="6074751">.</span><span class="ident" id="6074752">End</span><span class="op" id="6074755">(</span><span class="op" id="6074756">)</span><span class="op" id="6074757">)</span><span class="op" id="6074758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6074765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6074769">//&nbsp;all&nbsp;other&nbsp;nodes&nbsp;are&nbsp;expressions&nbsp;or&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074814">return</span>&nbsp;<span class="ident" id="6074821"><a href="/go/parser/parser.go.html#6074436">x</a></span><br>
<span class="lineno"></span><span class="op" id="6074823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6074826">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno">1435</span><span class="keyword" id="6074896">func</span>&nbsp;<span class="op" id="6074901">(</span><span class="ident" id="6074902">p</span>&nbsp;<span class="op" id="6074904">*</span><span class="ident" id="6074905"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6074911">)</span>&nbsp;<span class="ident" id="6074913">parsePrimaryExpr</span><span class="op" id="6074929">(</span><span class="ident" id="6074930">lhs</span>&nbsp;<span class="builtintype" id="6074934">bool</span><span class="op" id="6074938">)</span>&nbsp;<span class="ident" id="6074940"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6074943">.</span><span class="ident" id="6074944">Expr</span>&nbsp;<span class="op" id="6074949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074952">if</span>&nbsp;<span class="ident" id="6074955"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6074956">.</span><span class="ident" id="6074957">trace</span>&nbsp;<span class="op" id="6074963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6074967">defer</span>&nbsp;<span class="ident" id="6074973"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6074975">(</span><span class="ident" id="6074976"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6074981">(</span><span class="ident" id="6074982"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6074983">,</span>&nbsp;<span class="string" id="6074985">&#34;PrimaryExpr&#34;</span><span class="op" id="6074998">)</span><span class="op" id="6074999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075006">x</span>&nbsp;<span class="op" id="6075008">:=</span>&nbsp;<span class="ident" id="6075011"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075012">.</span><span class="ident" id="6075013">parseOperand</span><span class="op" id="6075025">(</span><span class="ident" id="6075026"><a href="/go/parser/parser.go.html#6074930">lhs</a></span><span class="op" id="6075029">)</span><br>
<span class="lineno"></span><span class="ident" id="6075031">L</span><span class="op" id="6075032">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075035">for</span>&nbsp;<span class="op" id="6075039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075043">switch</span>&nbsp;<span class="ident" id="6075050"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075051">.</span><span class="ident" id="6075052">tok</span>&nbsp;<span class="op" id="6075056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075060">case</span>&nbsp;<span class="ident" id="6075065"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075070">.</span><span class="ident" id="6075071">PERIOD</span><span class="op" id="6075077">:</span><br>
<span class="lineno">1445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075082"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075083">.</span><span class="ident" id="6075084">next</span><span class="op" id="6075088">(</span><span class="op" id="6075089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075094">if</span>&nbsp;<span class="ident" id="6075097"><a href="/go/parser/parser.go.html#6074930">lhs</a></span>&nbsp;<span class="op" id="6075101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075107"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075108">.</span><span class="ident" id="6075109">resolve</span><span class="op" id="6075116">(</span><span class="ident" id="6075117"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075128">switch</span>&nbsp;<span class="ident" id="6075135"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075136">.</span><span class="ident" id="6075137">tok</span>&nbsp;<span class="op" id="6075141">{</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075146">case</span>&nbsp;<span class="ident" id="6075151"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075156">.</span><span class="ident" id="6075157">IDENT</span><span class="op" id="6075162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075168"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075170">=</span>&nbsp;<span class="ident" id="6075172"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075173">.</span><span class="ident" id="6075174">parseSelector</span><span class="op" id="6075187">(</span><span class="ident" id="6075188"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075189">.</span><span class="ident" id="6075190">checkExprOrType</span><span class="op" id="6075205">(</span><span class="ident" id="6075206"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075207">)</span><span class="op" id="6075208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075213">case</span>&nbsp;<span class="ident" id="6075218"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075223">.</span><span class="ident" id="6075224">LPAREN</span><span class="op" id="6075230">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075236"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075238">=</span>&nbsp;<span class="ident" id="6075240"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075241">.</span><span class="ident" id="6075242">parseTypeAssertion</span><span class="op" id="6075260">(</span><span class="ident" id="6075261"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075262">.</span><span class="ident" id="6075263">checkExpr</span><span class="op" id="6075272">(</span><span class="ident" id="6075273"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075274">)</span><span class="op" id="6075275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075280">default</span><span class="op" id="6075287">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075293">pos</span>&nbsp;<span class="op" id="6075297">:=</span>&nbsp;<span class="ident" id="6075300"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075301">.</span><span class="ident" id="6075302">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075310"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075311">.</span><span class="ident" id="6075312">errorExpected</span><span class="op" id="6075325">(</span><span class="ident" id="6075326"><a href="/go/parser/parser.go.html#6075293">pos</a></span><span class="op" id="6075329">,</span>&nbsp;<span class="string" id="6075331">&#34;selector&nbsp;or&nbsp;type&nbsp;assertion&#34;</span><span class="op" id="6075359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075365"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075366">.</span><span class="ident" id="6075367">next</span><span class="op" id="6075371">(</span><span class="op" id="6075372">)</span>&nbsp;<span class="comment" id="6075374">//&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075395"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075397">=</span>&nbsp;<span class="op" id="6075399">&amp;</span><span class="ident" id="6075400"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6075403">.</span><span class="ident" id="6075404">BadExpr</span><span class="op" id="6075411">{</span><span class="ident" id="6075412">From</span><span class="op" id="6075416">:</span>&nbsp;<span class="ident" id="6075418"><a href="/go/parser/parser.go.html#6075293">pos</a></span><span class="op" id="6075421">,</span>&nbsp;<span class="ident" id="6075423">To</span><span class="op" id="6075425">:</span>&nbsp;<span class="ident" id="6075427"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075428">.</span><span class="ident" id="6075429">pos</span><span class="op" id="6075432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075437">}</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075441">case</span>&nbsp;<span class="ident" id="6075446"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075451">.</span><span class="ident" id="6075452">LBRACK</span><span class="op" id="6075458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075463">if</span>&nbsp;<span class="ident" id="6075466"><a href="/go/parser/parser.go.html#6074930">lhs</a></span>&nbsp;<span class="op" id="6075470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075476"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075477">.</span><span class="ident" id="6075478">resolve</span><span class="op" id="6075485">(</span><span class="ident" id="6075486"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075497"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075499">=</span>&nbsp;<span class="ident" id="6075501"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075502">.</span><span class="ident" id="6075503">parseIndexOrSlice</span><span class="op" id="6075520">(</span><span class="ident" id="6075521"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075522">.</span><span class="ident" id="6075523">checkExpr</span><span class="op" id="6075532">(</span><span class="ident" id="6075533"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075534">)</span><span class="op" id="6075535">)</span><br>
<span class="lineno">1465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075539">case</span>&nbsp;<span class="ident" id="6075544"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075549">.</span><span class="ident" id="6075550">LPAREN</span><span class="op" id="6075556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075561">if</span>&nbsp;<span class="ident" id="6075564"><a href="/go/parser/parser.go.html#6074930">lhs</a></span>&nbsp;<span class="op" id="6075568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075574"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075575">.</span><span class="ident" id="6075576">resolve</span><span class="op" id="6075583">(</span><span class="ident" id="6075584"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075595"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075597">=</span>&nbsp;<span class="ident" id="6075599"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075600">.</span><span class="ident" id="6075601">parseCallOrConversion</span><span class="op" id="6075622">(</span><span class="ident" id="6075623"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075624">.</span><span class="ident" id="6075625">checkExprOrType</span><span class="op" id="6075640">(</span><span class="ident" id="6075641"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075642">)</span><span class="op" id="6075643">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075647">case</span>&nbsp;<span class="ident" id="6075652"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6075657">.</span><span class="ident" id="6075658">LBRACE</span><span class="op" id="6075664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075669">if</span>&nbsp;<span class="ident" id="6075672"><a href="/go/parser/parser.go.html#6073594">isLiteralType</a></span><span class="op" id="6075685">(</span><span class="ident" id="6075686"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075687">)</span>&nbsp;<span class="op" id="6075689">&amp;&amp;</span>&nbsp;<span class="op" id="6075692">(</span><span class="ident" id="6075693"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075694">.</span><span class="ident" id="6075695">exprLev</span>&nbsp;<span class="op" id="6075703">&gt;=</span>&nbsp;<span class="num" id="6075706">0</span>&nbsp;<span class="op" id="6075708">||</span>&nbsp;<span class="op" id="6075711">!</span><span class="ident" id="6075712"><a href="/go/parser/parser.go.html#6073269">isTypeName</a></span><span class="op" id="6075722">(</span><span class="ident" id="6075723"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075724">)</span><span class="op" id="6075725">)</span>&nbsp;<span class="op" id="6075727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075733">if</span>&nbsp;<span class="ident" id="6075736"><a href="/go/parser/parser.go.html#6074930">lhs</a></span>&nbsp;<span class="op" id="6075740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075747"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075748">.</span><span class="ident" id="6075749">resolve</span><span class="op" id="6075756">(</span><span class="ident" id="6075757"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075764">}</span><br>
<span class="lineno">1475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075770"><a href="/go/parser/parser.go.html#6075006">x</a></span>&nbsp;<span class="op" id="6075772">=</span>&nbsp;<span class="ident" id="6075774"><a href="/go/parser/parser.go.html#6074902">p</a></span><span class="op" id="6075775">.</span><span class="ident" id="6075776">parseLiteralValue</span><span class="op" id="6075793">(</span><span class="ident" id="6075794"><a href="/go/parser/parser.go.html#6075006">x</a></span><span class="op" id="6075795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075800">}</span>&nbsp;<span class="keyword" id="6075802">else</span>&nbsp;<span class="op" id="6075807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075813">break</span>&nbsp;<span class="ident" id="6075819">L</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075828">default</span><span class="op" id="6075835">:</span><br>
<span class="lineno">1480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075840">break</span>&nbsp;<span class="ident" id="6075846">L</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6075854"><a href="/go/parser/parser.go.html#6074930">lhs</a></span>&nbsp;<span class="op" id="6075858">=</span>&nbsp;<span class="ident" id="6075860">false</span>&nbsp;<span class="comment" id="6075866">//&nbsp;no&nbsp;need&nbsp;to&nbsp;try&nbsp;to&nbsp;resolve&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6075902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6075906">return</span>&nbsp;<span class="ident" id="6075913"><a href="/go/parser/parser.go.html#6075006">x</a></span><br>
<span class="lineno"></span><span class="op" id="6075915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6075918">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6075988">func</span>&nbsp;<span class="op" id="6075993">(</span><span class="ident" id="6075994">p</span>&nbsp;<span class="op" id="6075996">*</span><span class="ident" id="6075997"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6076003">)</span>&nbsp;<span class="ident" id="6076005">parseUnaryExpr</span><span class="op" id="6076019">(</span><span class="ident" id="6076020">lhs</span>&nbsp;<span class="builtintype" id="6076024">bool</span><span class="op" id="6076028">)</span>&nbsp;<span class="ident" id="6076030"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6076033">.</span><span class="ident" id="6076034">Expr</span>&nbsp;<span class="op" id="6076039">{</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076042">if</span>&nbsp;<span class="ident" id="6076045"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076046">.</span><span class="ident" id="6076047">trace</span>&nbsp;<span class="op" id="6076053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076057">defer</span>&nbsp;<span class="ident" id="6076063"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6076065">(</span><span class="ident" id="6076066"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6076071">(</span><span class="ident" id="6076072"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076073">,</span>&nbsp;<span class="string" id="6076075">&#34;UnaryExpr&#34;</span><span class="op" id="6076086">)</span><span class="op" id="6076087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6076090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076094">switch</span>&nbsp;<span class="ident" id="6076101"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076102">.</span><span class="ident" id="6076103">tok</span>&nbsp;<span class="op" id="6076107">{</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076110">case</span>&nbsp;<span class="ident" id="6076115"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076120">.</span><span class="ident" id="6076121">ADD</span><span class="op" id="6076124">,</span>&nbsp;<span class="ident" id="6076126"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076131">.</span><span class="ident" id="6076132">SUB</span><span class="op" id="6076135">,</span>&nbsp;<span class="ident" id="6076137"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076142">.</span><span class="ident" id="6076143">NOT</span><span class="op" id="6076146">,</span>&nbsp;<span class="ident" id="6076148"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076153">.</span><span class="ident" id="6076154">XOR</span><span class="op" id="6076157">,</span>&nbsp;<span class="ident" id="6076159"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076164">.</span><span class="ident" id="6076165">AND</span><span class="op" id="6076168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076172">pos</span><span class="op" id="6076175">,</span>&nbsp;<span class="ident" id="6076177">op</span>&nbsp;<span class="op" id="6076180">:=</span>&nbsp;<span class="ident" id="6076183"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076184">.</span><span class="ident" id="6076185">pos</span><span class="op" id="6076188">,</span>&nbsp;<span class="ident" id="6076190"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076191">.</span><span class="ident" id="6076192">tok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076198"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076199">.</span><span class="ident" id="6076200">next</span><span class="op" id="6076204">(</span><span class="op" id="6076205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076209">x</span>&nbsp;<span class="op" id="6076211">:=</span>&nbsp;<span class="ident" id="6076214"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076215">.</span><span class="ident" id="6076216">parseUnaryExpr</span><span class="op" id="6076230">(</span><span class="ident" id="6076231">false</span><span class="op" id="6076236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076240">return</span>&nbsp;<span class="op" id="6076247">&amp;</span><span class="ident" id="6076248"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6076251">.</span><span class="ident" id="6076252">UnaryExpr</span><span class="op" id="6076261">{</span><span class="ident" id="6076262">OpPos</span><span class="op" id="6076267">:</span>&nbsp;<span class="ident" id="6076269"><a href="/go/parser/parser.go.html#6076172">pos</a></span><span class="op" id="6076272">,</span>&nbsp;<span class="ident" id="6076274">Op</span><span class="op" id="6076276">:</span>&nbsp;<span class="ident" id="6076278"><a href="/go/parser/parser.go.html#6076177">op</a></span><span class="op" id="6076280">,</span>&nbsp;<span class="ident" id="6076282">X</span><span class="op" id="6076283">:</span>&nbsp;<span class="ident" id="6076285"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076286">.</span><span class="ident" id="6076287">checkExpr</span><span class="op" id="6076296">(</span><span class="ident" id="6076297"><a href="/go/parser/parser.go.html#6076209">x</a></span><span class="op" id="6076298">)</span><span class="op" id="6076299">}</span><br>
<span class="lineno">1500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076303">case</span>&nbsp;<span class="ident" id="6076308"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6076313">.</span><span class="ident" id="6076314">ARROW</span><span class="op" id="6076319">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076323">//&nbsp;channel&nbsp;type&nbsp;or&nbsp;receive&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076363">arrow</span>&nbsp;<span class="op" id="6076369">:=</span>&nbsp;<span class="ident" id="6076372"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076373">.</span><span class="ident" id="6076374">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076380"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076381">.</span><span class="ident" id="6076382">next</span><span class="op" id="6076386">(</span><span class="op" id="6076387">)</span><br>
<span class="lineno">1505</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076392">//&nbsp;If&nbsp;the&nbsp;next&nbsp;token&nbsp;is&nbsp;token.CHAN&nbsp;we&nbsp;still&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076455">//&nbsp;is&nbsp;a&nbsp;channel&nbsp;type&nbsp;or&nbsp;a&nbsp;receive&nbsp;operation&nbsp;-&nbsp;we&nbsp;only&nbsp;know</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076516">//&nbsp;once&nbsp;we&nbsp;have&nbsp;found&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unary&nbsp;expression.&nbsp;There</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076579">//&nbsp;are&nbsp;two&nbsp;cases:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076599">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076604">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;type&nbsp;&nbsp;=&gt;&nbsp;(&lt;-type)&nbsp;must&nbsp;be&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076653">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;expr&nbsp;&nbsp;=&gt;&nbsp;&lt;-(expr)&nbsp;is&nbsp;a&nbsp;receive&nbsp;from&nbsp;an&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076713">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076718">//&nbsp;In&nbsp;the&nbsp;first&nbsp;case,&nbsp;the&nbsp;arrow&nbsp;must&nbsp;be&nbsp;re-associated&nbsp;with</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076779">//&nbsp;the&nbsp;channel&nbsp;type&nbsp;parsed&nbsp;already:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076817">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076822">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;(chan&nbsp;type)&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;(&lt;-chan&nbsp;type)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076865">//&nbsp;&nbsp;&nbsp;&lt;-&nbsp;(chan&lt;-&nbsp;type)&nbsp;&nbsp;=&gt;&nbsp;&nbsp;(&lt;-chan&nbsp;(&lt;-type))</span><br>
<span class="lineno"></span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6076913">x</span>&nbsp;<span class="op" id="6076915">:=</span>&nbsp;<span class="ident" id="6076918"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6076919">.</span><span class="ident" id="6076920">parseUnaryExpr</span><span class="op" id="6076934">(</span><span class="ident" id="6076935">false</span><span class="op" id="6076940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6076945">//&nbsp;determine&nbsp;which&nbsp;case&nbsp;we&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6076979">if</span>&nbsp;<span class="ident" id="6076982">typ</span><span class="op" id="6076985">,</span>&nbsp;<span class="ident" id="6076987">ok</span>&nbsp;<span class="op" id="6076990">:=</span>&nbsp;<span class="ident" id="6076993"><a href="/go/parser/parser.go.html#6076913">x</a></span><span class="op" id="6076994">.</span><span class="op" id="6076995">(</span><span class="op" id="6076996">*</span><span class="ident" id="6076997"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077000">.</span><span class="ident" id="6077001">ChanType</span><span class="op" id="6077009">)</span><span class="op" id="6077010">;</span>&nbsp;<span class="ident" id="6077012"><a href="/go/parser/parser.go.html#6076987">ok</a></span>&nbsp;<span class="op" id="6077015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6077020">//&nbsp;(&lt;-type)</span><br>
<span class="lineno">1525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6077036">//&nbsp;re-associate&nbsp;position&nbsp;info&nbsp;and&nbsp;&lt;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077076">dir</span>&nbsp;<span class="op" id="6077080">:=</span>&nbsp;<span class="ident" id="6077083"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077086">.</span><span class="ident" id="6077087">SEND</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077095">for</span>&nbsp;<span class="ident" id="6077099"><a href="/go/parser/parser.go.html#6076987">ok</a></span>&nbsp;<span class="op" id="6077102">&amp;&amp;</span>&nbsp;<span class="ident" id="6077105"><a href="/go/parser/parser.go.html#6077076">dir</a></span>&nbsp;<span class="op" id="6077109">==</span>&nbsp;<span class="ident" id="6077112"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077115">.</span><span class="ident" id="6077116">SEND</span>&nbsp;<span class="op" id="6077121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077127">if</span>&nbsp;<span class="ident" id="6077130"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077133">.</span><span class="ident" id="6077134">Dir</span>&nbsp;<span class="op" id="6077138">==</span>&nbsp;<span class="ident" id="6077141"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077144">.</span><span class="ident" id="6077145">RECV</span>&nbsp;<span class="op" id="6077150">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6077157">//&nbsp;error:&nbsp;(&lt;-type)&nbsp;is&nbsp;(&lt;-(&lt;-chan&nbsp;T))</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077199"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077200">.</span><span class="ident" id="6077201">errorExpected</span><span class="op" id="6077214">(</span><span class="ident" id="6077215"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077218">.</span><span class="ident" id="6077219">Arrow</span><span class="op" id="6077224">,</span>&nbsp;<span class="string" id="6077226">&#34;&#39;chan&#39;&#34;</span><span class="op" id="6077234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077246"><a href="/go/parser/parser.go.html#6076363">arrow</a></span><span class="op" id="6077251">,</span>&nbsp;<span class="ident" id="6077253"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077256">.</span><span class="ident" id="6077257">Begin</span><span class="op" id="6077262">,</span>&nbsp;<span class="ident" id="6077264"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077267">.</span><span class="ident" id="6077268">Arrow</span>&nbsp;<span class="op" id="6077274">=</span>&nbsp;<span class="ident" id="6077276"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077279">.</span><span class="ident" id="6077280">Arrow</span><span class="op" id="6077285">,</span>&nbsp;<span class="ident" id="6077287"><a href="/go/parser/parser.go.html#6076363">arrow</a></span><span class="op" id="6077292">,</span>&nbsp;<span class="ident" id="6077294"><a href="/go/parser/parser.go.html#6076363">arrow</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077304"><a href="/go/parser/parser.go.html#6077076">dir</a></span><span class="op" id="6077307">,</span>&nbsp;<span class="ident" id="6077309"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077312">.</span><span class="ident" id="6077313">Dir</span>&nbsp;<span class="op" id="6077317">=</span>&nbsp;<span class="ident" id="6077319"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077322">.</span><span class="ident" id="6077323">Dir</span><span class="op" id="6077326">,</span>&nbsp;<span class="ident" id="6077328"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077331">.</span><span class="ident" id="6077332">RECV</span><br>
<span class="lineno">1535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077341"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077344">,</span>&nbsp;<span class="ident" id="6077346"><a href="/go/parser/parser.go.html#6076987">ok</a></span>&nbsp;<span class="op" id="6077349">=</span>&nbsp;<span class="ident" id="6077351"><a href="/go/parser/parser.go.html#6076982">typ</a></span><span class="op" id="6077354">.</span><span class="ident" id="6077355">Value</span><span class="op" id="6077360">.</span><span class="op" id="6077361">(</span><span class="op" id="6077362">*</span><span class="ident" id="6077363"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077366">.</span><span class="ident" id="6077367">ChanType</span><span class="op" id="6077375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077385">if</span>&nbsp;<span class="ident" id="6077388"><a href="/go/parser/parser.go.html#6077076">dir</a></span>&nbsp;<span class="op" id="6077392">==</span>&nbsp;<span class="ident" id="6077395"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077398">.</span><span class="ident" id="6077399">SEND</span>&nbsp;<span class="op" id="6077404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077410"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077411">.</span><span class="ident" id="6077412">errorExpected</span><span class="op" id="6077425">(</span><span class="ident" id="6077426"><a href="/go/parser/parser.go.html#6076363">arrow</a></span><span class="op" id="6077431">,</span>&nbsp;<span class="string" id="6077433">&#34;channel&nbsp;type&#34;</span><span class="op" id="6077447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077452">}</span><br>
<span class="lineno">1540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077458">return</span>&nbsp;<span class="ident" id="6077465"><a href="/go/parser/parser.go.html#6076913">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6077474">//&nbsp;&lt;-(expr)</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077488">return</span>&nbsp;<span class="op" id="6077495">&amp;</span><span class="ident" id="6077496"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077499">.</span><span class="ident" id="6077500">UnaryExpr</span><span class="op" id="6077509">{</span><span class="ident" id="6077510">OpPos</span><span class="op" id="6077515">:</span>&nbsp;<span class="ident" id="6077517"><a href="/go/parser/parser.go.html#6076363">arrow</a></span><span class="op" id="6077522">,</span>&nbsp;<span class="ident" id="6077524">Op</span><span class="op" id="6077526">:</span>&nbsp;<span class="ident" id="6077528"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6077533">.</span><span class="ident" id="6077534">ARROW</span><span class="op" id="6077539">,</span>&nbsp;<span class="ident" id="6077541">X</span><span class="op" id="6077542">:</span>&nbsp;<span class="ident" id="6077544"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077545">.</span><span class="ident" id="6077546">checkExpr</span><span class="op" id="6077555">(</span><span class="ident" id="6077556"><a href="/go/parser/parser.go.html#6076913">x</a></span><span class="op" id="6077557">)</span><span class="op" id="6077558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077562">case</span>&nbsp;<span class="ident" id="6077567"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6077572">.</span><span class="ident" id="6077573">MUL</span><span class="op" id="6077576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6077580">//&nbsp;pointer&nbsp;type&nbsp;or&nbsp;unary&nbsp;&#34;*&#34;&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077622">pos</span>&nbsp;<span class="op" id="6077626">:=</span>&nbsp;<span class="ident" id="6077629"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077630">.</span><span class="ident" id="6077631">pos</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077637"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077638">.</span><span class="ident" id="6077639">next</span><span class="op" id="6077643">(</span><span class="op" id="6077644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077648">x</span>&nbsp;<span class="op" id="6077650">:=</span>&nbsp;<span class="ident" id="6077653"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077654">.</span><span class="ident" id="6077655">parseUnaryExpr</span><span class="op" id="6077669">(</span><span class="ident" id="6077670">false</span><span class="op" id="6077675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077679">return</span>&nbsp;<span class="op" id="6077686">&amp;</span><span class="ident" id="6077687"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6077690">.</span><span class="ident" id="6077691">StarExpr</span><span class="op" id="6077699">{</span><span class="ident" id="6077700">Star</span><span class="op" id="6077704">:</span>&nbsp;<span class="ident" id="6077706"><a href="/go/parser/parser.go.html#6077622">pos</a></span><span class="op" id="6077709">,</span>&nbsp;<span class="ident" id="6077711">X</span><span class="op" id="6077712">:</span>&nbsp;<span class="ident" id="6077714"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077715">.</span><span class="ident" id="6077716">checkExprOrType</span><span class="op" id="6077731">(</span><span class="ident" id="6077732"><a href="/go/parser/parser.go.html#6077648">x</a></span><span class="op" id="6077733">)</span><span class="op" id="6077734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077741">return</span>&nbsp;<span class="ident" id="6077748"><a href="/go/parser/parser.go.html#6075994">p</a></span><span class="op" id="6077749">.</span><span class="ident" id="6077750">parsePrimaryExpr</span><span class="op" id="6077766">(</span><span class="ident" id="6077767"><a href="/go/parser/parser.go.html#6076020">lhs</a></span><span class="op" id="6077770">)</span><br>
<span class="lineno"></span><span class="op" id="6077772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6077775">func</span>&nbsp;<span class="op" id="6077780">(</span><span class="ident" id="6077781">p</span>&nbsp;<span class="op" id="6077783">*</span><span class="ident" id="6077784"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6077790">)</span>&nbsp;<span class="ident" id="6077792">tokPrec</span><span class="op" id="6077799">(</span><span class="op" id="6077800">)</span>&nbsp;<span class="op" id="6077802">(</span><span class="ident" id="6077803"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6077808">.</span><span class="ident" id="6077809">Token</span><span class="op" id="6077814">,</span>&nbsp;<span class="builtintype" id="6077816">int</span><span class="op" id="6077819">)</span>&nbsp;<span class="op" id="6077821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077824">tok</span>&nbsp;<span class="op" id="6077828">:=</span>&nbsp;<span class="ident" id="6077831"><a href="/go/parser/parser.go.html#6077781">p</a></span><span class="op" id="6077832">.</span><span class="ident" id="6077833">tok</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077838">if</span>&nbsp;<span class="ident" id="6077841"><a href="/go/parser/parser.go.html#6077781">p</a></span><span class="op" id="6077842">.</span><span class="ident" id="6077843">inRhs</span>&nbsp;<span class="op" id="6077849">&amp;&amp;</span>&nbsp;<span class="ident" id="6077852"><a href="/go/parser/parser.go.html#6077824">tok</a></span>&nbsp;<span class="op" id="6077856">==</span>&nbsp;<span class="ident" id="6077859"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6077864">.</span><span class="ident" id="6077865">ASSIGN</span>&nbsp;<span class="op" id="6077872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6077876"><a href="/go/parser/parser.go.html#6077824">tok</a></span>&nbsp;<span class="op" id="6077880">=</span>&nbsp;<span class="ident" id="6077882"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6077887">.</span><span class="ident" id="6077888">EQL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6077893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6077896">return</span>&nbsp;<span class="ident" id="6077903"><a href="/go/parser/parser.go.html#6077824">tok</a></span><span class="op" id="6077906">,</span>&nbsp;<span class="ident" id="6077908"><a href="/go/parser/parser.go.html#6077824">tok</a></span><span class="op" id="6077911">.</span><span class="ident" id="6077912">Precedence</span><span class="op" id="6077922">(</span><span class="op" id="6077923">)</span><br>
<span class="lineno"></span><span class="op" id="6077925">}</span><br>
<span class="lineno">1565</span><br>
<span class="lineno"></span><span class="comment" id="6077928">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="keyword" id="6077998">func</span>&nbsp;<span class="op" id="6078003">(</span><span class="ident" id="6078004">p</span>&nbsp;<span class="op" id="6078006">*</span><span class="ident" id="6078007"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6078013">)</span>&nbsp;<span class="ident" id="6078015">parseBinaryExpr</span><span class="op" id="6078030">(</span><span class="ident" id="6078031">lhs</span>&nbsp;<span class="builtintype" id="6078035">bool</span><span class="op" id="6078039">,</span>&nbsp;<span class="ident" id="6078041">prec1</span>&nbsp;<span class="builtintype" id="6078047">int</span><span class="op" id="6078050">)</span>&nbsp;<span class="ident" id="6078052"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6078055">.</span><span class="ident" id="6078056">Expr</span>&nbsp;<span class="op" id="6078061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078064">if</span>&nbsp;<span class="ident" id="6078067"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078068">.</span><span class="ident" id="6078069">trace</span>&nbsp;<span class="op" id="6078075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078079">defer</span>&nbsp;<span class="ident" id="6078085"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6078087">(</span><span class="ident" id="6078088"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6078093">(</span><span class="ident" id="6078094"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078095">,</span>&nbsp;<span class="string" id="6078097">&#34;BinaryExpr&#34;</span><span class="op" id="6078109">)</span><span class="op" id="6078110">)</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078117">x</span>&nbsp;<span class="op" id="6078119">:=</span>&nbsp;<span class="ident" id="6078122"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078123">.</span><span class="ident" id="6078124">parseUnaryExpr</span><span class="op" id="6078138">(</span><span class="ident" id="6078139"><a href="/go/parser/parser.go.html#6078031">lhs</a></span><span class="op" id="6078142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078145">for</span>&nbsp;<span class="ident" id="6078149">_</span><span class="op" id="6078150">,</span>&nbsp;<span class="ident" id="6078152">prec</span>&nbsp;<span class="op" id="6078157">:=</span>&nbsp;<span class="ident" id="6078160"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078161">.</span><span class="ident" id="6078162">tokPrec</span><span class="op" id="6078169">(</span><span class="op" id="6078170">)</span><span class="op" id="6078171">;</span>&nbsp;<span class="ident" id="6078173"><a href="/go/parser/parser.go.html#6078152">prec</a></span>&nbsp;<span class="op" id="6078178">&gt;=</span>&nbsp;<span class="ident" id="6078181"><a href="/go/parser/parser.go.html#6078041">prec1</a></span><span class="op" id="6078186">;</span>&nbsp;<span class="ident" id="6078188"><a href="/go/parser/parser.go.html#6078152">prec</a></span><span class="op" id="6078192">--</span>&nbsp;<span class="op" id="6078195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078199">for</span>&nbsp;<span class="op" id="6078203">{</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078208">op</span><span class="op" id="6078210">,</span>&nbsp;<span class="ident" id="6078212">oprec</span>&nbsp;<span class="op" id="6078218">:=</span>&nbsp;<span class="ident" id="6078221"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078222">.</span><span class="ident" id="6078223">tokPrec</span><span class="op" id="6078230">(</span><span class="op" id="6078231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078236">if</span>&nbsp;<span class="ident" id="6078239"><a href="/go/parser/parser.go.html#6078212">oprec</a></span>&nbsp;<span class="op" id="6078245">!=</span>&nbsp;<span class="ident" id="6078248"><a href="/go/parser/parser.go.html#6078152">prec</a></span>&nbsp;<span class="op" id="6078253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078259">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078273">pos</span>&nbsp;<span class="op" id="6078277">:=</span>&nbsp;<span class="ident" id="6078280"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078281">.</span><span class="ident" id="6078282">expect</span><span class="op" id="6078288">(</span><span class="ident" id="6078289"><a href="/go/parser/parser.go.html#6078208">op</a></span><span class="op" id="6078291">)</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078296">if</span>&nbsp;<span class="ident" id="6078299"><a href="/go/parser/parser.go.html#6078031">lhs</a></span>&nbsp;<span class="op" id="6078303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078309"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078310">.</span><span class="ident" id="6078311">resolve</span><span class="op" id="6078318">(</span><span class="ident" id="6078319"><a href="/go/parser/parser.go.html#6078117">x</a></span><span class="op" id="6078320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078326"><a href="/go/parser/parser.go.html#6078031">lhs</a></span>&nbsp;<span class="op" id="6078330">=</span>&nbsp;<span class="ident" id="6078332">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078346">y</span>&nbsp;<span class="op" id="6078348">:=</span>&nbsp;<span class="ident" id="6078351"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078352">.</span><span class="ident" id="6078353">parseBinaryExpr</span><span class="op" id="6078368">(</span><span class="ident" id="6078369">false</span><span class="op" id="6078374">,</span>&nbsp;<span class="ident" id="6078376"><a href="/go/parser/parser.go.html#6078152">prec</a></span><span class="op" id="6078380">+</span><span class="num" id="6078381">1</span><span class="op" id="6078382">)</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078387"><a href="/go/parser/parser.go.html#6078117">x</a></span>&nbsp;<span class="op" id="6078389">=</span>&nbsp;<span class="op" id="6078391">&amp;</span><span class="ident" id="6078392"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6078395">.</span><span class="ident" id="6078396">BinaryExpr</span><span class="op" id="6078406">{</span><span class="ident" id="6078407">X</span><span class="op" id="6078408">:</span>&nbsp;<span class="ident" id="6078410"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078411">.</span><span class="ident" id="6078412">checkExpr</span><span class="op" id="6078421">(</span><span class="ident" id="6078422"><a href="/go/parser/parser.go.html#6078117">x</a></span><span class="op" id="6078423">)</span><span class="op" id="6078424">,</span>&nbsp;<span class="ident" id="6078426">OpPos</span><span class="op" id="6078431">:</span>&nbsp;<span class="ident" id="6078433"><a href="/go/parser/parser.go.html#6078273">pos</a></span><span class="op" id="6078436">,</span>&nbsp;<span class="ident" id="6078438">Op</span><span class="op" id="6078440">:</span>&nbsp;<span class="ident" id="6078442"><a href="/go/parser/parser.go.html#6078208">op</a></span><span class="op" id="6078444">,</span>&nbsp;<span class="ident" id="6078446">Y</span><span class="op" id="6078447">:</span>&nbsp;<span class="ident" id="6078449"><a href="/go/parser/parser.go.html#6078004">p</a></span><span class="op" id="6078450">.</span><span class="ident" id="6078451">checkExpr</span><span class="op" id="6078460">(</span><span class="ident" id="6078461"><a href="/go/parser/parser.go.html#6078346">y</a></span><span class="op" id="6078462">)</span><span class="op" id="6078463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078474">return</span>&nbsp;<span class="ident" id="6078481"><a href="/go/parser/parser.go.html#6078117">x</a></span><br>
<span class="lineno">1590</span><span class="op" id="6078483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6078486">//&nbsp;If&nbsp;lhs&nbsp;is&nbsp;set&nbsp;and&nbsp;the&nbsp;result&nbsp;is&nbsp;an&nbsp;identifier,&nbsp;it&nbsp;is&nbsp;not&nbsp;resolved.</span><br>
<span class="lineno"></span><span class="comment" id="6078556">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;a&nbsp;type&nbsp;or&nbsp;even&nbsp;a&nbsp;raw&nbsp;type&nbsp;([...]int).&nbsp;Callers&nbsp;must</span><br>
<span class="lineno"></span><span class="comment" id="6078628">//&nbsp;check&nbsp;the&nbsp;result&nbsp;(using&nbsp;checkExpr&nbsp;or&nbsp;checkExprOrType),&nbsp;depending&nbsp;on</span><br>
<span class="lineno">1595</span><span class="comment" id="6078699">//&nbsp;context.</span><br>
<span class="lineno"></span><span class="keyword" id="6078711">func</span>&nbsp;<span class="op" id="6078716">(</span><span class="ident" id="6078717">p</span>&nbsp;<span class="op" id="6078719">*</span><span class="ident" id="6078720"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6078726">)</span>&nbsp;<span class="ident" id="6078728">parseExpr</span><span class="op" id="6078737">(</span><span class="ident" id="6078738">lhs</span>&nbsp;<span class="builtintype" id="6078742">bool</span><span class="op" id="6078746">)</span>&nbsp;<span class="ident" id="6078748"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6078751">.</span><span class="ident" id="6078752">Expr</span>&nbsp;<span class="op" id="6078757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078760">if</span>&nbsp;<span class="ident" id="6078763"><a href="/go/parser/parser.go.html#6078717">p</a></span><span class="op" id="6078764">.</span><span class="ident" id="6078765">trace</span>&nbsp;<span class="op" id="6078771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078775">defer</span>&nbsp;<span class="ident" id="6078781"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6078783">(</span><span class="ident" id="6078784"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6078789">(</span><span class="ident" id="6078790"><a href="/go/parser/parser.go.html#6078717">p</a></span><span class="op" id="6078791">,</span>&nbsp;<span class="string" id="6078793">&#34;Expression&#34;</span><span class="op" id="6078805">)</span><span class="op" id="6078806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6078809">}</span><br>
<span class="lineno">1600</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078813">return</span>&nbsp;<span class="ident" id="6078820"><a href="/go/parser/parser.go.html#6078717">p</a></span><span class="op" id="6078821">.</span><span class="ident" id="6078822">parseBinaryExpr</span><span class="op" id="6078837">(</span><span class="ident" id="6078838"><a href="/go/parser/parser.go.html#6078738">lhs</a></span><span class="op" id="6078841">,</span>&nbsp;<span class="ident" id="6078843"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6078848">.</span><span class="ident" id="6078849">LowestPrec</span><span class="op" id="6078859">+</span><span class="num" id="6078860">1</span><span class="op" id="6078861">)</span><br>
<span class="lineno"></span><span class="op" id="6078863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6078866">func</span>&nbsp;<span class="op" id="6078871">(</span><span class="ident" id="6078872">p</span>&nbsp;<span class="op" id="6078874">*</span><span class="ident" id="6078875"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6078881">)</span>&nbsp;<span class="ident" id="6078883">parseRhs</span><span class="op" id="6078891">(</span><span class="op" id="6078892">)</span>&nbsp;<span class="ident" id="6078894"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6078897">.</span><span class="ident" id="6078898">Expr</span>&nbsp;<span class="op" id="6078903">{</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078906">old</span>&nbsp;<span class="op" id="6078910">:=</span>&nbsp;<span class="ident" id="6078913"><a href="/go/parser/parser.go.html#6078872">p</a></span><span class="op" id="6078914">.</span><span class="ident" id="6078915">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078922"><a href="/go/parser/parser.go.html#6078872">p</a></span><span class="op" id="6078923">.</span><span class="ident" id="6078924">inRhs</span>&nbsp;<span class="op" id="6078930">=</span>&nbsp;<span class="ident" id="6078932">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078938">x</span>&nbsp;<span class="op" id="6078940">:=</span>&nbsp;<span class="ident" id="6078943"><a href="/go/parser/parser.go.html#6078872">p</a></span><span class="op" id="6078944">.</span><span class="ident" id="6078945">checkExpr</span><span class="op" id="6078954">(</span><span class="ident" id="6078955"><a href="/go/parser/parser.go.html#6078872">p</a></span><span class="op" id="6078956">.</span><span class="ident" id="6078957">parseExpr</span><span class="op" id="6078966">(</span><span class="ident" id="6078967">false</span><span class="op" id="6078972">)</span><span class="op" id="6078973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6078976"><a href="/go/parser/parser.go.html#6078872">p</a></span><span class="op" id="6078977">.</span><span class="ident" id="6078978">inRhs</span>&nbsp;<span class="op" id="6078984">=</span>&nbsp;<span class="ident" id="6078986"><a href="/go/parser/parser.go.html#6078906">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6078991">return</span>&nbsp;<span class="ident" id="6078998"><a href="/go/parser/parser.go.html#6078938">x</a></span><br>
<span class="lineno">1610</span><span class="op" id="6079000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6079003">func</span>&nbsp;<span class="op" id="6079008">(</span><span class="ident" id="6079009">p</span>&nbsp;<span class="op" id="6079011">*</span><span class="ident" id="6079012"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6079018">)</span>&nbsp;<span class="ident" id="6079020">parseRhsOrType</span><span class="op" id="6079034">(</span><span class="op" id="6079035">)</span>&nbsp;<span class="ident" id="6079037"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6079040">.</span><span class="ident" id="6079041">Expr</span>&nbsp;<span class="op" id="6079046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079049">old</span>&nbsp;<span class="op" id="6079053">:=</span>&nbsp;<span class="ident" id="6079056"><a href="/go/parser/parser.go.html#6079009">p</a></span><span class="op" id="6079057">.</span><span class="ident" id="6079058">inRhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079065"><a href="/go/parser/parser.go.html#6079009">p</a></span><span class="op" id="6079066">.</span><span class="ident" id="6079067">inRhs</span>&nbsp;<span class="op" id="6079073">=</span>&nbsp;<span class="ident" id="6079075">true</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079081">x</span>&nbsp;<span class="op" id="6079083">:=</span>&nbsp;<span class="ident" id="6079086"><a href="/go/parser/parser.go.html#6079009">p</a></span><span class="op" id="6079087">.</span><span class="ident" id="6079088">checkExprOrType</span><span class="op" id="6079103">(</span><span class="ident" id="6079104"><a href="/go/parser/parser.go.html#6079009">p</a></span><span class="op" id="6079105">.</span><span class="ident" id="6079106">parseExpr</span><span class="op" id="6079115">(</span><span class="ident" id="6079116">false</span><span class="op" id="6079121">)</span><span class="op" id="6079122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079125"><a href="/go/parser/parser.go.html#6079009">p</a></span><span class="op" id="6079126">.</span><span class="ident" id="6079127">inRhs</span>&nbsp;<span class="op" id="6079133">=</span>&nbsp;<span class="ident" id="6079135"><a href="/go/parser/parser.go.html#6079049">old</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079140">return</span>&nbsp;<span class="ident" id="6079147"><a href="/go/parser/parser.go.html#6079081">x</a></span><br>
<span class="lineno"></span><span class="op" id="6079149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1620</span><span class="comment" id="6079152">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6079232">//&nbsp;Statements</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6079247">//&nbsp;Parsing&nbsp;modes&nbsp;for&nbsp;parseSimpleStmt.</span><br>
<span class="lineno"></span><span class="keyword" id="6079285">const</span>&nbsp;<span class="op" id="6079291">(</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079294">basic</span>&nbsp;<span class="op" id="6079300">=</span>&nbsp;<span class="ident" id="6079302">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079308">labelOk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079317">rangeOk</span><br>
<span class="lineno"></span><span class="op" id="6079325">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1630</span><span class="comment" id="6079328">//&nbsp;parseSimpleStmt&nbsp;returns&nbsp;true&nbsp;as&nbsp;2nd&nbsp;result&nbsp;if&nbsp;it&nbsp;parsed&nbsp;the&nbsp;assignment</span><br>
<span class="lineno"></span><span class="comment" id="6079402">//&nbsp;of&nbsp;a&nbsp;range&nbsp;clause&nbsp;(with&nbsp;mode&nbsp;==&nbsp;rangeOk).&nbsp;The&nbsp;returned&nbsp;statement&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="6079476">//&nbsp;assignment&nbsp;with&nbsp;a&nbsp;right-hand&nbsp;side&nbsp;that&nbsp;is&nbsp;a&nbsp;single&nbsp;unary&nbsp;expression&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6079550">//&nbsp;the&nbsp;form&nbsp;&#34;range&nbsp;x&#34;.&nbsp;No&nbsp;guarantees&nbsp;are&nbsp;given&nbsp;for&nbsp;the&nbsp;left-hand&nbsp;side.</span><br>
<span class="lineno"></span><span class="keyword" id="6079621">func</span>&nbsp;<span class="op" id="6079626">(</span><span class="ident" id="6079627">p</span>&nbsp;<span class="op" id="6079629">*</span><span class="ident" id="6079630"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6079636">)</span>&nbsp;<span class="ident" id="6079638">parseSimpleStmt</span><span class="op" id="6079653">(</span><span class="ident" id="6079654">mode</span>&nbsp;<span class="builtintype" id="6079659">int</span><span class="op" id="6079662">)</span>&nbsp;<span class="op" id="6079664">(</span><span class="ident" id="6079665"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6079668">.</span><span class="ident" id="6079669">Stmt</span><span class="op" id="6079673">,</span>&nbsp;<span class="builtintype" id="6079675">bool</span><span class="op" id="6079679">)</span>&nbsp;<span class="op" id="6079681">{</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079684">if</span>&nbsp;<span class="ident" id="6079687"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6079688">.</span><span class="ident" id="6079689">trace</span>&nbsp;<span class="op" id="6079695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079699">defer</span>&nbsp;<span class="ident" id="6079705"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6079707">(</span><span class="ident" id="6079708"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6079713">(</span><span class="ident" id="6079714"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6079715">,</span>&nbsp;<span class="string" id="6079717">&#34;SimpleStmt&#34;</span><span class="op" id="6079729">)</span><span class="op" id="6079730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6079733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079737">x</span>&nbsp;<span class="op" id="6079739">:=</span>&nbsp;<span class="ident" id="6079742"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6079743">.</span><span class="ident" id="6079744">parseLhsList</span><span class="op" id="6079756">(</span><span class="op" id="6079757">)</span><br>
<span class="lineno">1640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079761">switch</span>&nbsp;<span class="ident" id="6079768"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6079769">.</span><span class="ident" id="6079770">tok</span>&nbsp;<span class="op" id="6079774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6079777">case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079784"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079789">.</span><span class="ident" id="6079790">DEFINE</span><span class="op" id="6079796">,</span>&nbsp;<span class="ident" id="6079798"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079803">.</span><span class="ident" id="6079804">ASSIGN</span><span class="op" id="6079810">,</span>&nbsp;<span class="ident" id="6079812"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079817">.</span><span class="ident" id="6079818">ADD_ASSIGN</span><span class="op" id="6079828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079832"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079837">.</span><span class="ident" id="6079838">SUB_ASSIGN</span><span class="op" id="6079848">,</span>&nbsp;<span class="ident" id="6079850"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079855">.</span><span class="ident" id="6079856">MUL_ASSIGN</span><span class="op" id="6079866">,</span>&nbsp;<span class="ident" id="6079868"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079873">.</span><span class="ident" id="6079874">QUO_ASSIGN</span><span class="op" id="6079884">,</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079888"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079893">.</span><span class="ident" id="6079894">REM_ASSIGN</span><span class="op" id="6079904">,</span>&nbsp;<span class="ident" id="6079906"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079911">.</span><span class="ident" id="6079912">AND_ASSIGN</span><span class="op" id="6079922">,</span>&nbsp;<span class="ident" id="6079924"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079929">.</span><span class="ident" id="6079930">OR_ASSIGN</span><span class="op" id="6079939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6079943"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079948">.</span><span class="ident" id="6079949">XOR_ASSIGN</span><span class="op" id="6079959">,</span>&nbsp;<span class="ident" id="6079961"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079966">.</span><span class="ident" id="6079967">SHL_ASSIGN</span><span class="op" id="6079977">,</span>&nbsp;<span class="ident" id="6079979"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6079984">.</span><span class="ident" id="6079985">SHR_ASSIGN</span><span class="op" id="6079995">,</span>&nbsp;<span class="ident" id="6079997"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080002">.</span><span class="ident" id="6080003">AND_NOT_ASSIGN</span><span class="op" id="6080017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080021">//&nbsp;assignment&nbsp;statement,&nbsp;possibly&nbsp;part&nbsp;of&nbsp;a&nbsp;range&nbsp;clause</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080080">pos</span><span class="op" id="6080083">,</span>&nbsp;<span class="ident" id="6080085">tok</span>&nbsp;<span class="op" id="6080089">:=</span>&nbsp;<span class="ident" id="6080092"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080093">.</span><span class="ident" id="6080094">pos</span><span class="op" id="6080097">,</span>&nbsp;<span class="ident" id="6080099"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080100">.</span><span class="ident" id="6080101">tok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080107"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080108">.</span><span class="ident" id="6080109">next</span><span class="op" id="6080113">(</span><span class="op" id="6080114">)</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080118">var</span>&nbsp;<span class="ident" id="6080122">y</span>&nbsp;<span class="op" id="6080124">[</span><span class="op" id="6080125">]</span><span class="ident" id="6080126"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080129">.</span><span class="ident" id="6080130">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080137">isRange</span>&nbsp;<span class="op" id="6080145">:=</span>&nbsp;<span class="ident" id="6080148">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080156">if</span>&nbsp;<span class="ident" id="6080159"><a href="/go/parser/parser.go.html#6079654">mode</a></span>&nbsp;<span class="op" id="6080164">==</span>&nbsp;<span class="ident" id="6080167"><a href="/go/parser/parser.go.html#6079317">rangeOk</a></span>&nbsp;<span class="op" id="6080175">&amp;&amp;</span>&nbsp;<span class="ident" id="6080178"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080179">.</span><span class="ident" id="6080180">tok</span>&nbsp;<span class="op" id="6080184">==</span>&nbsp;<span class="ident" id="6080187"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080192">.</span><span class="ident" id="6080193">RANGE</span>&nbsp;<span class="op" id="6080199">&amp;&amp;</span>&nbsp;<span class="op" id="6080202">(</span><span class="ident" id="6080203"><a href="/go/parser/parser.go.html#6080085">tok</a></span>&nbsp;<span class="op" id="6080207">==</span>&nbsp;<span class="ident" id="6080210"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080215">.</span><span class="ident" id="6080216">DEFINE</span>&nbsp;<span class="op" id="6080223">||</span>&nbsp;<span class="ident" id="6080226"><a href="/go/parser/parser.go.html#6080085">tok</a></span>&nbsp;<span class="op" id="6080230">==</span>&nbsp;<span class="ident" id="6080233"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080238">.</span><span class="ident" id="6080239">ASSIGN</span><span class="op" id="6080245">)</span>&nbsp;<span class="op" id="6080247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080252">pos</span>&nbsp;<span class="op" id="6080256">:=</span>&nbsp;<span class="ident" id="6080259"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080260">.</span><span class="ident" id="6080261">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080268"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080269">.</span><span class="ident" id="6080270">next</span><span class="op" id="6080274">(</span><span class="op" id="6080275">)</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080280"><a href="/go/parser/parser.go.html#6080122">y</a></span>&nbsp;<span class="op" id="6080282">=</span>&nbsp;<span class="op" id="6080284">[</span><span class="op" id="6080285">]</span><span class="ident" id="6080286"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080289">.</span><span class="ident" id="6080290">Expr</span><span class="op" id="6080294">{</span><span class="op" id="6080295">&amp;</span><span class="ident" id="6080296"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080299">.</span><span class="ident" id="6080300">UnaryExpr</span><span class="op" id="6080309">{</span><span class="ident" id="6080310">OpPos</span><span class="op" id="6080315">:</span>&nbsp;<span class="ident" id="6080317"><a href="/go/parser/parser.go.html#6080252">pos</a></span><span class="op" id="6080320">,</span>&nbsp;<span class="ident" id="6080322">Op</span><span class="op" id="6080324">:</span>&nbsp;<span class="ident" id="6080326"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080331">.</span><span class="ident" id="6080332">RANGE</span><span class="op" id="6080337">,</span>&nbsp;<span class="ident" id="6080339">X</span><span class="op" id="6080340">:</span>&nbsp;<span class="ident" id="6080342"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080343">.</span><span class="ident" id="6080344">parseRhs</span><span class="op" id="6080352">(</span><span class="op" id="6080353">)</span><span class="op" id="6080354">}</span><span class="op" id="6080355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080360"><a href="/go/parser/parser.go.html#6080137">isRange</a></span>&nbsp;<span class="op" id="6080368">=</span>&nbsp;<span class="ident" id="6080370">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080377">}</span>&nbsp;<span class="keyword" id="6080379">else</span>&nbsp;<span class="op" id="6080384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080389"><a href="/go/parser/parser.go.html#6080122">y</a></span>&nbsp;<span class="op" id="6080391">=</span>&nbsp;<span class="ident" id="6080393"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080394">.</span><span class="ident" id="6080395">parseRhsList</span><span class="op" id="6080407">(</span><span class="op" id="6080408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080412">}</span><br>
<span class="lineno">1660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080416">as</span>&nbsp;<span class="op" id="6080419">:=</span>&nbsp;<span class="op" id="6080422">&amp;</span><span class="ident" id="6080423"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080426">.</span><span class="ident" id="6080427">AssignStmt</span><span class="op" id="6080437">{</span><span class="ident" id="6080438">Lhs</span><span class="op" id="6080441">:</span>&nbsp;<span class="ident" id="6080443"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6080444">,</span>&nbsp;<span class="ident" id="6080446">TokPos</span><span class="op" id="6080452">:</span>&nbsp;<span class="ident" id="6080454"><a href="/go/parser/parser.go.html#6080080">pos</a></span><span class="op" id="6080457">,</span>&nbsp;<span class="ident" id="6080459">Tok</span><span class="op" id="6080462">:</span>&nbsp;<span class="ident" id="6080464"><a href="/go/parser/parser.go.html#6080085">tok</a></span><span class="op" id="6080467">,</span>&nbsp;<span class="ident" id="6080469">Rhs</span><span class="op" id="6080472">:</span>&nbsp;<span class="ident" id="6080474"><a href="/go/parser/parser.go.html#6080122">y</a></span><span class="op" id="6080475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080479">if</span>&nbsp;<span class="ident" id="6080482"><a href="/go/parser/parser.go.html#6080085">tok</a></span>&nbsp;<span class="op" id="6080486">==</span>&nbsp;<span class="ident" id="6080489"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080494">.</span><span class="ident" id="6080495">DEFINE</span>&nbsp;<span class="op" id="6080502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080507"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080508">.</span><span class="ident" id="6080509">shortVarDecl</span><span class="op" id="6080521">(</span><span class="ident" id="6080522"><a href="/go/parser/parser.go.html#6080416">as</a></span><span class="op" id="6080524">,</span>&nbsp;<span class="ident" id="6080526"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6080527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080535">return</span>&nbsp;<span class="ident" id="6080542"><a href="/go/parser/parser.go.html#6080416">as</a></span><span class="op" id="6080544">,</span>&nbsp;<span class="ident" id="6080546"><a href="/go/parser/parser.go.html#6080137">isRange</a></span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080559">if</span>&nbsp;<span class="builtinfunc" id="6080562">len</span><span class="op" id="6080565">(</span><span class="ident" id="6080566"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6080567">)</span>&nbsp;<span class="op" id="6080569">&gt;</span>&nbsp;<span class="num" id="6080571">1</span>&nbsp;<span class="op" id="6080573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080577"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080578">.</span><span class="ident" id="6080579">errorExpected</span><span class="op" id="6080592">(</span><span class="ident" id="6080593"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6080594">[</span><span class="num" id="6080595">0</span><span class="op" id="6080596">]</span><span class="op" id="6080597">.</span><span class="ident" id="6080598">Pos</span><span class="op" id="6080601">(</span><span class="op" id="6080602">)</span><span class="op" id="6080603">,</span>&nbsp;<span class="string" id="6080605">&#34;1&nbsp;expression&#34;</span><span class="op" id="6080619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080623">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6080658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080662">switch</span>&nbsp;<span class="ident" id="6080669"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080670">.</span><span class="ident" id="6080671">tok</span>&nbsp;<span class="op" id="6080675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080678">case</span>&nbsp;<span class="ident" id="6080683"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6080688">.</span><span class="ident" id="6080689">COLON</span><span class="op" id="6080694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080698">//&nbsp;labeled&nbsp;statement</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080721">colon</span>&nbsp;<span class="op" id="6080727">:=</span>&nbsp;<span class="ident" id="6080730"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080731">.</span><span class="ident" id="6080732">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080738"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6080739">.</span><span class="ident" id="6080740">next</span><span class="op" id="6080744">(</span><span class="op" id="6080745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6080749">if</span>&nbsp;<span class="ident" id="6080752">label</span><span class="op" id="6080757">,</span>&nbsp;<span class="ident" id="6080759">isIdent</span>&nbsp;<span class="op" id="6080767">:=</span>&nbsp;<span class="ident" id="6080770"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6080771">[</span><span class="num" id="6080772">0</span><span class="op" id="6080773">]</span><span class="op" id="6080774">.</span><span class="op" id="6080775">(</span><span class="op" id="6080776">*</span><span class="ident" id="6080777"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080780">.</span><span class="ident" id="6080781">Ident</span><span class="op" id="6080786">)</span><span class="op" id="6080787">;</span>&nbsp;<span class="ident" id="6080789"><a href="/go/parser/parser.go.html#6079654">mode</a></span>&nbsp;<span class="op" id="6080794">==</span>&nbsp;<span class="ident" id="6080797"><a href="/go/parser/parser.go.html#6079308">labelOk</a></span>&nbsp;<span class="op" id="6080805">&amp;&amp;</span>&nbsp;<span class="ident" id="6080808"><a href="/go/parser/parser.go.html#6080759">isIdent</a></span>&nbsp;<span class="op" id="6080816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080821">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;label&nbsp;is&nbsp;the&nbsp;body&nbsp;of&nbsp;the&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080885">//&nbsp;in&nbsp;which&nbsp;it&nbsp;is&nbsp;declared&nbsp;and&nbsp;excludes&nbsp;the&nbsp;body&nbsp;of&nbsp;any&nbsp;nested</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6080951">//&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6080967">stmt</span>&nbsp;<span class="op" id="6080972">:=</span>&nbsp;<span class="op" id="6080975">&amp;</span><span class="ident" id="6080976"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6080979">.</span><span class="ident" id="6080980">LabeledStmt</span><span class="op" id="6080991">{</span><span class="ident" id="6080992">Label</span><span class="op" id="6080997">:</span>&nbsp;<span class="ident" id="6080999"><a href="/go/parser/parser.go.html#6080752">label</a></span><span class="op" id="6081004">,</span>&nbsp;<span class="ident" id="6081006">Colon</span><span class="op" id="6081011">:</span>&nbsp;<span class="ident" id="6081013"><a href="/go/parser/parser.go.html#6080721">colon</a></span><span class="op" id="6081018">,</span>&nbsp;<span class="ident" id="6081020">Stmt</span><span class="op" id="6081024">:</span>&nbsp;<span class="ident" id="6081026"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081027">.</span><span class="ident" id="6081028">parseStmt</span><span class="op" id="6081037">(</span><span class="op" id="6081038">)</span><span class="op" id="6081039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081044"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081045">.</span><span class="ident" id="6081046">declare</span><span class="op" id="6081053">(</span><span class="ident" id="6081054"><a href="/go/parser/parser.go.html#6080967">stmt</a></span><span class="op" id="6081058">,</span>&nbsp;<span class="ident" id="6081060">nil</span><span class="op" id="6081063">,</span>&nbsp;<span class="ident" id="6081065"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081066">.</span><span class="ident" id="6081067">labelScope</span><span class="op" id="6081077">,</span>&nbsp;<span class="ident" id="6081079"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6081082">.</span><span class="ident" id="6081083">Lbl</span><span class="op" id="6081086">,</span>&nbsp;<span class="ident" id="6081088"><a href="/go/parser/parser.go.html#6080752">label</a></span><span class="op" id="6081093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081098">return</span>&nbsp;<span class="ident" id="6081105"><a href="/go/parser/parser.go.html#6080967">stmt</a></span><span class="op" id="6081109">,</span>&nbsp;<span class="ident" id="6081111">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081119">}</span><br>
<span class="lineno">1685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081123">//&nbsp;The&nbsp;label&nbsp;declaration&nbsp;typically&nbsp;starts&nbsp;at&nbsp;x[0].Pos(),&nbsp;but&nbsp;the&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081196">//&nbsp;declaration&nbsp;may&nbsp;be&nbsp;erroneous&nbsp;due&nbsp;to&nbsp;a&nbsp;token&nbsp;after&nbsp;that&nbsp;position&nbsp;(and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081270">//&nbsp;before&nbsp;the&nbsp;&#39;:&#39;).&nbsp;If&nbsp;SpuriousErrors&nbsp;is&nbsp;not&nbsp;set,&nbsp;the&nbsp;(only)&nbsp;error&nbsp;re-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081343">//&nbsp;ported&nbsp;for&nbsp;the&nbsp;line&nbsp;is&nbsp;the&nbsp;illegal&nbsp;label&nbsp;error&nbsp;instead&nbsp;of&nbsp;the&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081416">//&nbsp;before&nbsp;the&nbsp;&#39;:&#39;&nbsp;that&nbsp;caused&nbsp;the&nbsp;problem.&nbsp;Thus,&nbsp;use&nbsp;the&nbsp;(latest)&nbsp;colon</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081490">//&nbsp;position&nbsp;for&nbsp;error&nbsp;reporting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081525"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081526">.</span><span class="builtintype" id="6081527">error</span><span class="op" id="6081532">(</span><span class="ident" id="6081533"><a href="/go/parser/parser.go.html#6080721">colon</a></span><span class="op" id="6081538">,</span>&nbsp;<span class="string" id="6081540">&#34;illegal&nbsp;label&nbsp;declaration&#34;</span><span class="op" id="6081567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081571">return</span>&nbsp;<span class="op" id="6081578">&amp;</span><span class="ident" id="6081579"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6081582">.</span><span class="ident" id="6081583">BadStmt</span><span class="op" id="6081590">{</span><span class="ident" id="6081591">From</span><span class="op" id="6081595">:</span>&nbsp;<span class="ident" id="6081597"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6081598">[</span><span class="num" id="6081599">0</span><span class="op" id="6081600">]</span><span class="op" id="6081601">.</span><span class="ident" id="6081602">Pos</span><span class="op" id="6081605">(</span><span class="op" id="6081606">)</span><span class="op" id="6081607">,</span>&nbsp;<span class="ident" id="6081609">To</span><span class="op" id="6081611">:</span>&nbsp;<span class="ident" id="6081613"><a href="/go/parser/parser.go.html#6080721">colon</a></span>&nbsp;<span class="op" id="6081619">+</span>&nbsp;<span class="num" id="6081621">1</span><span class="op" id="6081622">}</span><span class="op" id="6081623">,</span>&nbsp;<span class="ident" id="6081625">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081633">case</span>&nbsp;<span class="ident" id="6081638"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6081643">.</span><span class="ident" id="6081644">ARROW</span><span class="op" id="6081649">:</span><br>
<span class="lineno">1695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081653">//&nbsp;send&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081673">arrow</span>&nbsp;<span class="op" id="6081679">:=</span>&nbsp;<span class="ident" id="6081682"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081683">.</span><span class="ident" id="6081684">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081690"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081691">.</span><span class="ident" id="6081692">next</span><span class="op" id="6081696">(</span><span class="op" id="6081697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081701">y</span>&nbsp;<span class="op" id="6081703">:=</span>&nbsp;<span class="ident" id="6081706"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081707">.</span><span class="ident" id="6081708">parseRhs</span><span class="op" id="6081716">(</span><span class="op" id="6081717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081721">return</span>&nbsp;<span class="op" id="6081728">&amp;</span><span class="ident" id="6081729"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6081732">.</span><span class="ident" id="6081733">SendStmt</span><span class="op" id="6081741">{</span><span class="ident" id="6081742">Chan</span><span class="op" id="6081746">:</span>&nbsp;<span class="ident" id="6081748"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6081749">[</span><span class="num" id="6081750">0</span><span class="op" id="6081751">]</span><span class="op" id="6081752">,</span>&nbsp;<span class="ident" id="6081754">Arrow</span><span class="op" id="6081759">:</span>&nbsp;<span class="ident" id="6081761"><a href="/go/parser/parser.go.html#6081673">arrow</a></span><span class="op" id="6081766">,</span>&nbsp;<span class="ident" id="6081768">Value</span><span class="op" id="6081773">:</span>&nbsp;<span class="ident" id="6081775"><a href="/go/parser/parser.go.html#6081701">y</a></span><span class="op" id="6081776">}</span><span class="op" id="6081777">,</span>&nbsp;<span class="ident" id="6081779">false</span><br>
<span class="lineno">1700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081787">case</span>&nbsp;<span class="ident" id="6081792"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6081797">.</span><span class="ident" id="6081798">INC</span><span class="op" id="6081801">,</span>&nbsp;<span class="ident" id="6081803"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6081808">.</span><span class="ident" id="6081809">DEC</span><span class="op" id="6081812">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081816">//&nbsp;increment&nbsp;or&nbsp;decrement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081844">s</span>&nbsp;<span class="op" id="6081846">:=</span>&nbsp;<span class="op" id="6081849">&amp;</span><span class="ident" id="6081850"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6081853">.</span><span class="ident" id="6081854">IncDecStmt</span><span class="op" id="6081864">{</span><span class="ident" id="6081865">X</span><span class="op" id="6081866">:</span>&nbsp;<span class="ident" id="6081868"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6081869">[</span><span class="num" id="6081870">0</span><span class="op" id="6081871">]</span><span class="op" id="6081872">,</span>&nbsp;<span class="ident" id="6081874">TokPos</span><span class="op" id="6081880">:</span>&nbsp;<span class="ident" id="6081882"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081883">.</span><span class="ident" id="6081884">pos</span><span class="op" id="6081887">,</span>&nbsp;<span class="ident" id="6081889">Tok</span><span class="op" id="6081892">:</span>&nbsp;<span class="ident" id="6081894"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081895">.</span><span class="ident" id="6081896">tok</span><span class="op" id="6081899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6081903"><a href="/go/parser/parser.go.html#6079627">p</a></span><span class="op" id="6081904">.</span><span class="ident" id="6081905">next</span><span class="op" id="6081909">(</span><span class="op" id="6081910">)</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081914">return</span>&nbsp;<span class="ident" id="6081921"><a href="/go/parser/parser.go.html#6081844">s</a></span><span class="op" id="6081922">,</span>&nbsp;<span class="ident" id="6081924">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6081931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6081935">//&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6081950">return</span>&nbsp;<span class="op" id="6081957">&amp;</span><span class="ident" id="6081958"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6081961">.</span><span class="ident" id="6081962">ExprStmt</span><span class="op" id="6081970">{</span><span class="ident" id="6081971">X</span><span class="op" id="6081972">:</span>&nbsp;<span class="ident" id="6081974"><a href="/go/parser/parser.go.html#6079737">x</a></span><span class="op" id="6081975">[</span><span class="num" id="6081976">0</span><span class="op" id="6081977">]</span><span class="op" id="6081978">}</span><span class="op" id="6081979">,</span>&nbsp;<span class="ident" id="6081981">false</span><br>
<span class="lineno">1710</span><span class="op" id="6081987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6081990">func</span>&nbsp;<span class="op" id="6081995">(</span><span class="ident" id="6081996">p</span>&nbsp;<span class="op" id="6081998">*</span><span class="ident" id="6081999"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6082005">)</span>&nbsp;<span class="ident" id="6082007">parseCallExpr</span><span class="op" id="6082020">(</span><span class="ident" id="6082021">callType</span>&nbsp;<span class="builtintype" id="6082030">string</span><span class="op" id="6082036">)</span>&nbsp;<span class="op" id="6082038">*</span><span class="ident" id="6082039"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082042">.</span><span class="ident" id="6082043">CallExpr</span>&nbsp;<span class="op" id="6082052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082055">x</span>&nbsp;<span class="op" id="6082057">:=</span>&nbsp;<span class="ident" id="6082060"><a href="/go/parser/parser.go.html#6081996">p</a></span><span class="op" id="6082061">.</span><span class="ident" id="6082062">parseRhsOrType</span><span class="op" id="6082076">(</span><span class="op" id="6082077">)</span>&nbsp;<span class="comment" id="6082079">//&nbsp;could&nbsp;be&nbsp;a&nbsp;conversion:&nbsp;(some&nbsp;type)(x)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082121">if</span>&nbsp;<span class="ident" id="6082124">call</span><span class="op" id="6082128">,</span>&nbsp;<span class="ident" id="6082130">isCall</span>&nbsp;<span class="op" id="6082137">:=</span>&nbsp;<span class="ident" id="6082140"><a href="/go/parser/parser.go.html#6082055">x</a></span><span class="op" id="6082141">.</span><span class="op" id="6082142">(</span><span class="op" id="6082143">*</span><span class="ident" id="6082144"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082147">.</span><span class="ident" id="6082148">CallExpr</span><span class="op" id="6082156">)</span><span class="op" id="6082157">;</span>&nbsp;<span class="ident" id="6082159"><a href="/go/parser/parser.go.html#6082130">isCall</a></span>&nbsp;<span class="op" id="6082166">{</span><br>
<span class="lineno">1715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082170">return</span>&nbsp;<span class="ident" id="6082177"><a href="/go/parser/parser.go.html#6082124">call</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082186">if</span>&nbsp;<span class="ident" id="6082189">_</span><span class="op" id="6082190">,</span>&nbsp;<span class="ident" id="6082192">isBad</span>&nbsp;<span class="op" id="6082198">:=</span>&nbsp;<span class="ident" id="6082201"><a href="/go/parser/parser.go.html#6082055">x</a></span><span class="op" id="6082202">.</span><span class="op" id="6082203">(</span><span class="op" id="6082204">*</span><span class="ident" id="6082205"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082208">.</span><span class="ident" id="6082209">BadExpr</span><span class="op" id="6082216">)</span><span class="op" id="6082217">;</span>&nbsp;<span class="op" id="6082219">!</span><span class="ident" id="6082220"><a href="/go/parser/parser.go.html#6082192">isBad</a></span>&nbsp;<span class="op" id="6082226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6082230">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;new&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082271"><a href="/go/parser/parser.go.html#6081996">p</a></span><span class="op" id="6082272">.</span><span class="builtintype" id="6082273">error</span><span class="op" id="6082278">(</span><span class="ident" id="6082279"><a href="/go/parser/parser.go.html#6081996">p</a></span><span class="op" id="6082280">.</span><span class="ident" id="6082281">safePos</span><span class="op" id="6082288">(</span><span class="ident" id="6082289"><a href="/go/parser/parser.go.html#6082055">x</a></span><span class="op" id="6082290">.</span><span class="ident" id="6082291">End</span><span class="op" id="6082294">(</span><span class="op" id="6082295">)</span><span class="op" id="6082296">)</span><span class="op" id="6082297">,</span>&nbsp;<span class="ident" id="6082299"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6082302">.</span><span class="ident" id="6082303">Sprintf</span><span class="op" id="6082310">(</span><span class="string" id="6082311">&#34;function&nbsp;must&nbsp;be&nbsp;invoked&nbsp;in&nbsp;%s&nbsp;statement&#34;</span><span class="op" id="6082353">,</span>&nbsp;<span class="ident" id="6082355"><a href="/go/parser/parser.go.html#6082021">callType</a></span><span class="op" id="6082363">)</span><span class="op" id="6082364">)</span><br>
<span class="lineno">1720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082370">return</span>&nbsp;<span class="ident" id="6082377">nil</span><br>
<span class="lineno"></span><span class="op" id="6082381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6082384">func</span>&nbsp;<span class="op" id="6082389">(</span><span class="ident" id="6082390">p</span>&nbsp;<span class="op" id="6082392">*</span><span class="ident" id="6082393"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6082399">)</span>&nbsp;<span class="ident" id="6082401">parseGoStmt</span><span class="op" id="6082412">(</span><span class="op" id="6082413">)</span>&nbsp;<span class="ident" id="6082415"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082418">.</span><span class="ident" id="6082419">Stmt</span>&nbsp;<span class="op" id="6082424">{</span><br>
<span class="lineno">1725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082427">if</span>&nbsp;<span class="ident" id="6082430"><a href="/go/parser/parser.go.html#6082390">p</a></span><span class="op" id="6082431">.</span><span class="ident" id="6082432">trace</span>&nbsp;<span class="op" id="6082438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082442">defer</span>&nbsp;<span class="ident" id="6082448"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6082450">(</span><span class="ident" id="6082451"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6082456">(</span><span class="ident" id="6082457"><a href="/go/parser/parser.go.html#6082390">p</a></span><span class="op" id="6082458">,</span>&nbsp;<span class="string" id="6082460">&#34;GoStmt&#34;</span><span class="op" id="6082468">)</span><span class="op" id="6082469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082476">pos</span>&nbsp;<span class="op" id="6082480">:=</span>&nbsp;<span class="ident" id="6082483"><a href="/go/parser/parser.go.html#6082390">p</a></span><span class="op" id="6082484">.</span><span class="ident" id="6082485">expect</span><span class="op" id="6082491">(</span><span class="ident" id="6082492"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6082497">.</span><span class="ident" id="6082498">GO</span><span class="op" id="6082500">)</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082503">call</span>&nbsp;<span class="op" id="6082508">:=</span>&nbsp;<span class="ident" id="6082511"><a href="/go/parser/parser.go.html#6082390">p</a></span><span class="op" id="6082512">.</span><span class="ident" id="6082513">parseCallExpr</span><span class="op" id="6082526">(</span><span class="string" id="6082527">&#34;go&#34;</span><span class="op" id="6082531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082534"><a href="/go/parser/parser.go.html#6082390">p</a></span><span class="op" id="6082535">.</span><span class="ident" id="6082536">expectSemi</span><span class="op" id="6082546">(</span><span class="op" id="6082547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082550">if</span>&nbsp;<span class="ident" id="6082553"><a href="/go/parser/parser.go.html#6082503">call</a></span>&nbsp;<span class="op" id="6082558">==</span>&nbsp;<span class="ident" id="6082561">nil</span>&nbsp;<span class="op" id="6082565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082569">return</span>&nbsp;<span class="op" id="6082576">&amp;</span><span class="ident" id="6082577"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082580">.</span><span class="ident" id="6082581">BadStmt</span><span class="op" id="6082588">{</span><span class="ident" id="6082589">From</span><span class="op" id="6082593">:</span>&nbsp;<span class="ident" id="6082595"><a href="/go/parser/parser.go.html#6082476">pos</a></span><span class="op" id="6082598">,</span>&nbsp;<span class="ident" id="6082600">To</span><span class="op" id="6082602">:</span>&nbsp;<span class="ident" id="6082604"><a href="/go/parser/parser.go.html#6082476">pos</a></span>&nbsp;<span class="op" id="6082608">+</span>&nbsp;<span class="num" id="6082610">2</span><span class="op" id="6082611">}</span>&nbsp;<span class="comment" id="6082613">//&nbsp;len(&#34;go&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082627">}</span><br>
<span class="lineno">1735</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082631">return</span>&nbsp;<span class="op" id="6082638">&amp;</span><span class="ident" id="6082639"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082642">.</span><span class="ident" id="6082643">GoStmt</span><span class="op" id="6082649">{</span><span class="ident" id="6082650">Go</span><span class="op" id="6082652">:</span>&nbsp;<span class="ident" id="6082654"><a href="/go/parser/parser.go.html#6082476">pos</a></span><span class="op" id="6082657">,</span>&nbsp;<span class="ident" id="6082659">Call</span><span class="op" id="6082663">:</span>&nbsp;<span class="ident" id="6082665"><a href="/go/parser/parser.go.html#6082503">call</a></span><span class="op" id="6082669">}</span><br>
<span class="lineno"></span><span class="op" id="6082671">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6082674">func</span>&nbsp;<span class="op" id="6082679">(</span><span class="ident" id="6082680">p</span>&nbsp;<span class="op" id="6082682">*</span><span class="ident" id="6082683"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6082689">)</span>&nbsp;<span class="ident" id="6082691">parseDeferStmt</span><span class="op" id="6082705">(</span><span class="op" id="6082706">)</span>&nbsp;<span class="ident" id="6082708"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082711">.</span><span class="ident" id="6082712">Stmt</span>&nbsp;<span class="op" id="6082717">{</span><br>
<span class="lineno">1740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082720">if</span>&nbsp;<span class="ident" id="6082723"><a href="/go/parser/parser.go.html#6082680">p</a></span><span class="op" id="6082724">.</span><span class="ident" id="6082725">trace</span>&nbsp;<span class="op" id="6082731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082735">defer</span>&nbsp;<span class="ident" id="6082741"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6082743">(</span><span class="ident" id="6082744"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6082749">(</span><span class="ident" id="6082750"><a href="/go/parser/parser.go.html#6082680">p</a></span><span class="op" id="6082751">,</span>&nbsp;<span class="string" id="6082753">&#34;DeferStmt&#34;</span><span class="op" id="6082764">)</span><span class="op" id="6082765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082772">pos</span>&nbsp;<span class="op" id="6082776">:=</span>&nbsp;<span class="ident" id="6082779"><a href="/go/parser/parser.go.html#6082680">p</a></span><span class="op" id="6082780">.</span><span class="ident" id="6082781">expect</span><span class="op" id="6082787">(</span><span class="ident" id="6082788"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6082793">.</span><span class="ident" id="6082794">DEFER</span><span class="op" id="6082799">)</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082802">call</span>&nbsp;<span class="op" id="6082807">:=</span>&nbsp;<span class="ident" id="6082810"><a href="/go/parser/parser.go.html#6082680">p</a></span><span class="op" id="6082811">.</span><span class="ident" id="6082812">parseCallExpr</span><span class="op" id="6082825">(</span><span class="string" id="6082826">&#34;defer&#34;</span><span class="op" id="6082833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6082836"><a href="/go/parser/parser.go.html#6082680">p</a></span><span class="op" id="6082837">.</span><span class="ident" id="6082838">expectSemi</span><span class="op" id="6082848">(</span><span class="op" id="6082849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082852">if</span>&nbsp;<span class="ident" id="6082855"><a href="/go/parser/parser.go.html#6082802">call</a></span>&nbsp;<span class="op" id="6082860">==</span>&nbsp;<span class="ident" id="6082863">nil</span>&nbsp;<span class="op" id="6082867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082871">return</span>&nbsp;<span class="op" id="6082878">&amp;</span><span class="ident" id="6082879"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082882">.</span><span class="ident" id="6082883">BadStmt</span><span class="op" id="6082890">{</span><span class="ident" id="6082891">From</span><span class="op" id="6082895">:</span>&nbsp;<span class="ident" id="6082897"><a href="/go/parser/parser.go.html#6082772">pos</a></span><span class="op" id="6082900">,</span>&nbsp;<span class="ident" id="6082902">To</span><span class="op" id="6082904">:</span>&nbsp;<span class="ident" id="6082906"><a href="/go/parser/parser.go.html#6082772">pos</a></span>&nbsp;<span class="op" id="6082910">+</span>&nbsp;<span class="num" id="6082912">5</span><span class="op" id="6082913">}</span>&nbsp;<span class="comment" id="6082915">//&nbsp;len(&#34;defer&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6082932">}</span><br>
<span class="lineno">1750</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6082936">return</span>&nbsp;<span class="op" id="6082943">&amp;</span><span class="ident" id="6082944"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6082947">.</span><span class="ident" id="6082948">DeferStmt</span><span class="op" id="6082957">{</span><span class="ident" id="6082958">Defer</span><span class="op" id="6082963">:</span>&nbsp;<span class="ident" id="6082965"><a href="/go/parser/parser.go.html#6082772">pos</a></span><span class="op" id="6082968">,</span>&nbsp;<span class="ident" id="6082970">Call</span><span class="op" id="6082974">:</span>&nbsp;<span class="ident" id="6082976"><a href="/go/parser/parser.go.html#6082802">call</a></span><span class="op" id="6082980">}</span><br>
<span class="lineno"></span><span class="op" id="6082982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6082985">func</span>&nbsp;<span class="op" id="6082990">(</span><span class="ident" id="6082991">p</span>&nbsp;<span class="op" id="6082993">*</span><span class="ident" id="6082994"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6083000">)</span>&nbsp;<span class="ident" id="6083002">parseReturnStmt</span><span class="op" id="6083017">(</span><span class="op" id="6083018">)</span>&nbsp;<span class="op" id="6083020">*</span><span class="ident" id="6083021"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083024">.</span><span class="ident" id="6083025">ReturnStmt</span>&nbsp;<span class="op" id="6083036">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083039">if</span>&nbsp;<span class="ident" id="6083042"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083043">.</span><span class="ident" id="6083044">trace</span>&nbsp;<span class="op" id="6083050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083054">defer</span>&nbsp;<span class="ident" id="6083060"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6083062">(</span><span class="ident" id="6083063"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6083068">(</span><span class="ident" id="6083069"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083070">,</span>&nbsp;<span class="string" id="6083072">&#34;ReturnStmt&#34;</span><span class="op" id="6083084">)</span><span class="op" id="6083085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083092">pos</span>&nbsp;<span class="op" id="6083096">:=</span>&nbsp;<span class="ident" id="6083099"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083100">.</span><span class="ident" id="6083101">pos</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083106"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083107">.</span><span class="ident" id="6083108">expect</span><span class="op" id="6083114">(</span><span class="ident" id="6083115"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083120">.</span><span class="ident" id="6083121">RETURN</span><span class="op" id="6083127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083130">var</span>&nbsp;<span class="ident" id="6083134">x</span>&nbsp;<span class="op" id="6083136">[</span><span class="op" id="6083137">]</span><span class="ident" id="6083138"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083141">.</span><span class="ident" id="6083142">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083148">if</span>&nbsp;<span class="ident" id="6083151"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083152">.</span><span class="ident" id="6083153">tok</span>&nbsp;<span class="op" id="6083157">!=</span>&nbsp;<span class="ident" id="6083160"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083165">.</span><span class="ident" id="6083166">SEMICOLON</span>&nbsp;<span class="op" id="6083176">&amp;&amp;</span>&nbsp;<span class="ident" id="6083179"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083180">.</span><span class="ident" id="6083181">tok</span>&nbsp;<span class="op" id="6083185">!=</span>&nbsp;<span class="ident" id="6083188"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083193">.</span><span class="ident" id="6083194">RBRACE</span>&nbsp;<span class="op" id="6083201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083205"><a href="/go/parser/parser.go.html#6083134">x</a></span>&nbsp;<span class="op" id="6083207">=</span>&nbsp;<span class="ident" id="6083209"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083210">.</span><span class="ident" id="6083211">parseRhsList</span><span class="op" id="6083223">(</span><span class="op" id="6083224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083227">}</span><br>
<span class="lineno">1765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083230"><a href="/go/parser/parser.go.html#6082991">p</a></span><span class="op" id="6083231">.</span><span class="ident" id="6083232">expectSemi</span><span class="op" id="6083242">(</span><span class="op" id="6083243">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083247">return</span>&nbsp;<span class="op" id="6083254">&amp;</span><span class="ident" id="6083255"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083258">.</span><span class="ident" id="6083259">ReturnStmt</span><span class="op" id="6083269">{</span><span class="ident" id="6083270">Return</span><span class="op" id="6083276">:</span>&nbsp;<span class="ident" id="6083278"><a href="/go/parser/parser.go.html#6083092">pos</a></span><span class="op" id="6083281">,</span>&nbsp;<span class="ident" id="6083283">Results</span><span class="op" id="6083290">:</span>&nbsp;<span class="ident" id="6083292"><a href="/go/parser/parser.go.html#6083134">x</a></span><span class="op" id="6083293">}</span><br>
<span class="lineno"></span><span class="op" id="6083295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1770</span><span class="keyword" id="6083298">func</span>&nbsp;<span class="op" id="6083303">(</span><span class="ident" id="6083304">p</span>&nbsp;<span class="op" id="6083306">*</span><span class="ident" id="6083307"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6083313">)</span>&nbsp;<span class="ident" id="6083315">parseBranchStmt</span><span class="op" id="6083330">(</span><span class="ident" id="6083331">tok</span>&nbsp;<span class="ident" id="6083335"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083340">.</span><span class="ident" id="6083341">Token</span><span class="op" id="6083346">)</span>&nbsp;<span class="op" id="6083348">*</span><span class="ident" id="6083349"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083352">.</span><span class="ident" id="6083353">BranchStmt</span>&nbsp;<span class="op" id="6083364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083367">if</span>&nbsp;<span class="ident" id="6083370"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083371">.</span><span class="ident" id="6083372">trace</span>&nbsp;<span class="op" id="6083378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083382">defer</span>&nbsp;<span class="ident" id="6083388"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6083390">(</span><span class="ident" id="6083391"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6083396">(</span><span class="ident" id="6083397"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083398">,</span>&nbsp;<span class="string" id="6083400">&#34;BranchStmt&#34;</span><span class="op" id="6083412">)</span><span class="op" id="6083413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083420">pos</span>&nbsp;<span class="op" id="6083424">:=</span>&nbsp;<span class="ident" id="6083427"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083428">.</span><span class="ident" id="6083429">expect</span><span class="op" id="6083435">(</span><span class="ident" id="6083436"><a href="/go/parser/parser.go.html#6083331">tok</a></span><span class="op" id="6083439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083442">var</span>&nbsp;<span class="ident" id="6083446">label</span>&nbsp;<span class="op" id="6083452">*</span><span class="ident" id="6083453"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083456">.</span><span class="ident" id="6083457">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083464">if</span>&nbsp;<span class="ident" id="6083467"><a href="/go/parser/parser.go.html#6083331">tok</a></span>&nbsp;<span class="op" id="6083471">!=</span>&nbsp;<span class="ident" id="6083474"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083479">.</span><span class="ident" id="6083480">FALLTHROUGH</span>&nbsp;<span class="op" id="6083492">&amp;&amp;</span>&nbsp;<span class="ident" id="6083495"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083496">.</span><span class="ident" id="6083497">tok</span>&nbsp;<span class="op" id="6083501">==</span>&nbsp;<span class="ident" id="6083504"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6083509">.</span><span class="ident" id="6083510">IDENT</span>&nbsp;<span class="op" id="6083516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083520"><a href="/go/parser/parser.go.html#6083446">label</a></span>&nbsp;<span class="op" id="6083526">=</span>&nbsp;<span class="ident" id="6083528"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083529">.</span><span class="ident" id="6083530">parseIdent</span><span class="op" id="6083540">(</span><span class="op" id="6083541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6083545">//&nbsp;add&nbsp;to&nbsp;list&nbsp;of&nbsp;unresolved&nbsp;targets</span><br>
<span class="lineno">1780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083584">n</span>&nbsp;<span class="op" id="6083586">:=</span>&nbsp;<span class="builtinfunc" id="6083589">len</span><span class="op" id="6083592">(</span><span class="ident" id="6083593"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083594">.</span><span class="ident" id="6083595">targetStack</span><span class="op" id="6083606">)</span>&nbsp;<span class="op" id="6083608">-</span>&nbsp;<span class="num" id="6083610">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083614"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083615">.</span><span class="ident" id="6083616">targetStack</span><span class="op" id="6083627">[</span><span class="ident" id="6083628"><a href="/go/parser/parser.go.html#6083584">n</a></span><span class="op" id="6083629">]</span>&nbsp;<span class="op" id="6083631">=</span>&nbsp;<span class="builtinfunc" id="6083633">append</span><span class="op" id="6083639">(</span><span class="ident" id="6083640"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083641">.</span><span class="ident" id="6083642">targetStack</span><span class="op" id="6083653">[</span><span class="ident" id="6083654"><a href="/go/parser/parser.go.html#6083584">n</a></span><span class="op" id="6083655">]</span><span class="op" id="6083656">,</span>&nbsp;<span class="ident" id="6083658"><a href="/go/parser/parser.go.html#6083446">label</a></span><span class="op" id="6083663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083669"><a href="/go/parser/parser.go.html#6083304">p</a></span><span class="op" id="6083670">.</span><span class="ident" id="6083671">expectSemi</span><span class="op" id="6083681">(</span><span class="op" id="6083682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083686">return</span>&nbsp;<span class="op" id="6083693">&amp;</span><span class="ident" id="6083694"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083697">.</span><span class="ident" id="6083698">BranchStmt</span><span class="op" id="6083708">{</span><span class="ident" id="6083709">TokPos</span><span class="op" id="6083715">:</span>&nbsp;<span class="ident" id="6083717"><a href="/go/parser/parser.go.html#6083420">pos</a></span><span class="op" id="6083720">,</span>&nbsp;<span class="ident" id="6083722">Tok</span><span class="op" id="6083725">:</span>&nbsp;<span class="ident" id="6083727"><a href="/go/parser/parser.go.html#6083331">tok</a></span><span class="op" id="6083730">,</span>&nbsp;<span class="ident" id="6083732">Label</span><span class="op" id="6083737">:</span>&nbsp;<span class="ident" id="6083739"><a href="/go/parser/parser.go.html#6083446">label</a></span><span class="op" id="6083744">}</span><br>
<span class="lineno"></span><span class="op" id="6083746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6083749">func</span>&nbsp;<span class="op" id="6083754">(</span><span class="ident" id="6083755">p</span>&nbsp;<span class="op" id="6083757">*</span><span class="ident" id="6083758"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6083764">)</span>&nbsp;<span class="ident" id="6083766">makeExpr</span><span class="op" id="6083774">(</span><span class="ident" id="6083775">s</span>&nbsp;<span class="ident" id="6083777"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083780">.</span><span class="ident" id="6083781">Stmt</span><span class="op" id="6083785">,</span>&nbsp;<span class="ident" id="6083787">kind</span>&nbsp;<span class="builtintype" id="6083792">string</span><span class="op" id="6083798">)</span>&nbsp;<span class="ident" id="6083800"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083803">.</span><span class="ident" id="6083804">Expr</span>&nbsp;<span class="op" id="6083809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083812">if</span>&nbsp;<span class="ident" id="6083815"><a href="/go/parser/parser.go.html#6083775">s</a></span>&nbsp;<span class="op" id="6083817">==</span>&nbsp;<span class="ident" id="6083820">nil</span>&nbsp;<span class="op" id="6083824">{</span><br>
<span class="lineno">1790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083828">return</span>&nbsp;<span class="ident" id="6083835">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083843">if</span>&nbsp;<span class="ident" id="6083846">es</span><span class="op" id="6083848">,</span>&nbsp;<span class="ident" id="6083850">isExpr</span>&nbsp;<span class="op" id="6083857">:=</span>&nbsp;<span class="ident" id="6083860"><a href="/go/parser/parser.go.html#6083775">s</a></span><span class="op" id="6083861">.</span><span class="op" id="6083862">(</span><span class="op" id="6083863">*</span><span class="ident" id="6083864"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6083867">.</span><span class="ident" id="6083868">ExprStmt</span><span class="op" id="6083876">)</span><span class="op" id="6083877">;</span>&nbsp;<span class="ident" id="6083879"><a href="/go/parser/parser.go.html#6083850">isExpr</a></span>&nbsp;<span class="op" id="6083886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6083890">return</span>&nbsp;<span class="ident" id="6083897"><a href="/go/parser/parser.go.html#6083755">p</a></span><span class="op" id="6083898">.</span><span class="ident" id="6083899">checkExpr</span><span class="op" id="6083908">(</span><span class="ident" id="6083909"><a href="/go/parser/parser.go.html#6083846">es</a></span><span class="op" id="6083911">.</span><span class="ident" id="6083912">X</span><span class="op" id="6083913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6083916">}</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6083919"><a href="/go/parser/parser.go.html#6083755">p</a></span><span class="op" id="6083920">.</span><span class="builtintype" id="6083921">error</span><span class="op" id="6083926">(</span><span class="ident" id="6083927"><a href="/go/parser/parser.go.html#6083775">s</a></span><span class="op" id="6083928">.</span><span class="ident" id="6083929">Pos</span><span class="op" id="6083932">(</span><span class="op" id="6083933">)</span><span class="op" id="6083934">,</span>&nbsp;<span class="ident" id="6083936"><a href="/go/parser/parser.go.html#6038025">fmt</a></span><span class="op" id="6083939">.</span><span class="ident" id="6083940">Sprintf</span><span class="op" id="6083947">(</span><span class="string" id="6083948">&#34;expected&nbsp;%s,&nbsp;found&nbsp;simple&nbsp;statement&nbsp;(missing&nbsp;parentheses&nbsp;around&nbsp;composite&nbsp;literal?)&#34;</span><span class="op" id="6084033">,</span>&nbsp;<span class="ident" id="6084035"><a href="/go/parser/parser.go.html#6083787">kind</a></span><span class="op" id="6084039">)</span><span class="op" id="6084040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084043">return</span>&nbsp;<span class="op" id="6084050">&amp;</span><span class="ident" id="6084051"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084054">.</span><span class="ident" id="6084055">BadExpr</span><span class="op" id="6084062">{</span><span class="ident" id="6084063">From</span><span class="op" id="6084067">:</span>&nbsp;<span class="ident" id="6084069"><a href="/go/parser/parser.go.html#6083775">s</a></span><span class="op" id="6084070">.</span><span class="ident" id="6084071">Pos</span><span class="op" id="6084074">(</span><span class="op" id="6084075">)</span><span class="op" id="6084076">,</span>&nbsp;<span class="ident" id="6084078">To</span><span class="op" id="6084080">:</span>&nbsp;<span class="ident" id="6084082"><a href="/go/parser/parser.go.html#6083755">p</a></span><span class="op" id="6084083">.</span><span class="ident" id="6084084">safePos</span><span class="op" id="6084091">(</span><span class="ident" id="6084092"><a href="/go/parser/parser.go.html#6083775">s</a></span><span class="op" id="6084093">.</span><span class="ident" id="6084094">End</span><span class="op" id="6084097">(</span><span class="op" id="6084098">)</span><span class="op" id="6084099">)</span><span class="op" id="6084100">}</span><br>
<span class="lineno"></span><span class="op" id="6084102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6084105">func</span>&nbsp;<span class="op" id="6084110">(</span><span class="ident" id="6084111">p</span>&nbsp;<span class="op" id="6084113">*</span><span class="ident" id="6084114"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6084120">)</span>&nbsp;<span class="ident" id="6084122">parseIfStmt</span><span class="op" id="6084133">(</span><span class="op" id="6084134">)</span>&nbsp;<span class="op" id="6084136">*</span><span class="ident" id="6084137"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084140">.</span><span class="ident" id="6084141">IfStmt</span>&nbsp;<span class="op" id="6084148">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084151">if</span>&nbsp;<span class="ident" id="6084154"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084155">.</span><span class="ident" id="6084156">trace</span>&nbsp;<span class="op" id="6084162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084166">defer</span>&nbsp;<span class="ident" id="6084172"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6084174">(</span><span class="ident" id="6084175"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6084180">(</span><span class="ident" id="6084181"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084182">,</span>&nbsp;<span class="string" id="6084184">&#34;IfStmt&#34;</span><span class="op" id="6084192">)</span><span class="op" id="6084193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084200">pos</span>&nbsp;<span class="op" id="6084204">:=</span>&nbsp;<span class="ident" id="6084207"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084208">.</span><span class="ident" id="6084209">expect</span><span class="op" id="6084215">(</span><span class="ident" id="6084216"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6084221">.</span><span class="ident" id="6084222">IF</span><span class="op" id="6084224">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084227"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084228">.</span><span class="ident" id="6084229">openScope</span><span class="op" id="6084238">(</span><span class="op" id="6084239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084242">defer</span>&nbsp;<span class="ident" id="6084248"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084249">.</span><span class="ident" id="6084250">closeScope</span><span class="op" id="6084260">(</span><span class="op" id="6084261">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084265">var</span>&nbsp;<span class="ident" id="6084269">s</span>&nbsp;<span class="ident" id="6084271"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084274">.</span><span class="ident" id="6084275">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084281">var</span>&nbsp;<span class="ident" id="6084285">x</span>&nbsp;<span class="ident" id="6084287"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084290">.</span><span class="ident" id="6084291">Expr</span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084301">prevLev</span>&nbsp;<span class="op" id="6084309">:=</span>&nbsp;<span class="ident" id="6084312"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084313">.</span><span class="ident" id="6084314">exprLev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084324"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084325">.</span><span class="ident" id="6084326">exprLev</span>&nbsp;<span class="op" id="6084334">=</span>&nbsp;<span class="op" id="6084336">-</span><span class="num" id="6084337">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084341">if</span>&nbsp;<span class="ident" id="6084344"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084345">.</span><span class="ident" id="6084346">tok</span>&nbsp;<span class="op" id="6084350">==</span>&nbsp;<span class="ident" id="6084353"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6084358">.</span><span class="ident" id="6084359">SEMICOLON</span>&nbsp;<span class="op" id="6084369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084374"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084375">.</span><span class="ident" id="6084376">next</span><span class="op" id="6084380">(</span><span class="op" id="6084381">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084386"><a href="/go/parser/parser.go.html#6084285">x</a></span>&nbsp;<span class="op" id="6084388">=</span>&nbsp;<span class="ident" id="6084390"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084391">.</span><span class="ident" id="6084392">parseRhs</span><span class="op" id="6084400">(</span><span class="op" id="6084401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084405">}</span>&nbsp;<span class="keyword" id="6084407">else</span>&nbsp;<span class="op" id="6084412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084417"><a href="/go/parser/parser.go.html#6084269">s</a></span><span class="op" id="6084418">,</span>&nbsp;<span class="ident" id="6084420">_</span>&nbsp;<span class="op" id="6084422">=</span>&nbsp;<span class="ident" id="6084424"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084425">.</span><span class="ident" id="6084426">parseSimpleStmt</span><span class="op" id="6084441">(</span><span class="ident" id="6084442"><a href="/go/parser/parser.go.html#6079294">basic</a></span><span class="op" id="6084447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084452">if</span>&nbsp;<span class="ident" id="6084455"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084456">.</span><span class="ident" id="6084457">tok</span>&nbsp;<span class="op" id="6084461">==</span>&nbsp;<span class="ident" id="6084464"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6084469">.</span><span class="ident" id="6084470">SEMICOLON</span>&nbsp;<span class="op" id="6084480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084486"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084487">.</span><span class="ident" id="6084488">next</span><span class="op" id="6084492">(</span><span class="op" id="6084493">)</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084499"><a href="/go/parser/parser.go.html#6084285">x</a></span>&nbsp;<span class="op" id="6084501">=</span>&nbsp;<span class="ident" id="6084503"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084504">.</span><span class="ident" id="6084505">parseRhs</span><span class="op" id="6084513">(</span><span class="op" id="6084514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084519">}</span>&nbsp;<span class="keyword" id="6084521">else</span>&nbsp;<span class="op" id="6084526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084532"><a href="/go/parser/parser.go.html#6084285">x</a></span>&nbsp;<span class="op" id="6084534">=</span>&nbsp;<span class="ident" id="6084536"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084537">.</span><span class="ident" id="6084538">makeExpr</span><span class="op" id="6084546">(</span><span class="ident" id="6084547"><a href="/go/parser/parser.go.html#6084269">s</a></span><span class="op" id="6084548">,</span>&nbsp;<span class="string" id="6084550">&#34;boolean&nbsp;expression&#34;</span><span class="op" id="6084570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084576"><a href="/go/parser/parser.go.html#6084269">s</a></span>&nbsp;<span class="op" id="6084578">=</span>&nbsp;<span class="ident" id="6084580">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084587">}</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084595"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084596">.</span><span class="ident" id="6084597">exprLev</span>&nbsp;<span class="op" id="6084605">=</span>&nbsp;<span class="ident" id="6084607"><a href="/go/parser/parser.go.html#6084301">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084620">body</span>&nbsp;<span class="op" id="6084625">:=</span>&nbsp;<span class="ident" id="6084628"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084629">.</span><span class="ident" id="6084630">parseBlockStmt</span><span class="op" id="6084644">(</span><span class="op" id="6084645">)</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084648">var</span>&nbsp;<span class="ident" id="6084652">else_</span>&nbsp;<span class="ident" id="6084658"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084661">.</span><span class="ident" id="6084662">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084668">if</span>&nbsp;<span class="ident" id="6084671"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084672">.</span><span class="ident" id="6084673">tok</span>&nbsp;<span class="op" id="6084677">==</span>&nbsp;<span class="ident" id="6084680"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6084685">.</span><span class="ident" id="6084686">ELSE</span>&nbsp;<span class="op" id="6084691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084695"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084696">.</span><span class="ident" id="6084697">next</span><span class="op" id="6084701">(</span><span class="op" id="6084702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084706"><a href="/go/parser/parser.go.html#6084652">else_</a></span>&nbsp;<span class="op" id="6084712">=</span>&nbsp;<span class="ident" id="6084714"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084715">.</span><span class="ident" id="6084716">parseStmt</span><span class="op" id="6084725">(</span><span class="op" id="6084726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084729">}</span>&nbsp;<span class="keyword" id="6084731">else</span>&nbsp;<span class="op" id="6084736">{</span><br>
<span class="lineno">1835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084740"><a href="/go/parser/parser.go.html#6084111">p</a></span><span class="op" id="6084741">.</span><span class="ident" id="6084742">expectSemi</span><span class="op" id="6084752">(</span><span class="op" id="6084753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084760">return</span>&nbsp;<span class="op" id="6084767">&amp;</span><span class="ident" id="6084768"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084771">.</span><span class="ident" id="6084772">IfStmt</span><span class="op" id="6084778">{</span><span class="ident" id="6084779">If</span><span class="op" id="6084781">:</span>&nbsp;<span class="ident" id="6084783"><a href="/go/parser/parser.go.html#6084200">pos</a></span><span class="op" id="6084786">,</span>&nbsp;<span class="ident" id="6084788">Init</span><span class="op" id="6084792">:</span>&nbsp;<span class="ident" id="6084794"><a href="/go/parser/parser.go.html#6084269">s</a></span><span class="op" id="6084795">,</span>&nbsp;<span class="ident" id="6084797">Cond</span><span class="op" id="6084801">:</span>&nbsp;<span class="ident" id="6084803"><a href="/go/parser/parser.go.html#6084285">x</a></span><span class="op" id="6084804">,</span>&nbsp;<span class="ident" id="6084806">Body</span><span class="op" id="6084810">:</span>&nbsp;<span class="ident" id="6084812"><a href="/go/parser/parser.go.html#6084620">body</a></span><span class="op" id="6084816">,</span>&nbsp;<span class="ident" id="6084818">Else</span><span class="op" id="6084822">:</span>&nbsp;<span class="ident" id="6084824"><a href="/go/parser/parser.go.html#6084652">else_</a></span><span class="op" id="6084829">}</span><br>
<span class="lineno"></span><span class="op" id="6084831">}</span><br>
<span class="lineno">1840</span><br>
<span class="lineno"></span><span class="keyword" id="6084834">func</span>&nbsp;<span class="op" id="6084839">(</span><span class="ident" id="6084840">p</span>&nbsp;<span class="op" id="6084842">*</span><span class="ident" id="6084843"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6084849">)</span>&nbsp;<span class="ident" id="6084851">parseTypeList</span><span class="op" id="6084864">(</span><span class="op" id="6084865">)</span>&nbsp;<span class="op" id="6084867">(</span><span class="ident" id="6084868">list</span>&nbsp;<span class="op" id="6084873">[</span><span class="op" id="6084874">]</span><span class="ident" id="6084875"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6084878">.</span><span class="ident" id="6084879">Expr</span><span class="op" id="6084883">)</span>&nbsp;<span class="op" id="6084885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084888">if</span>&nbsp;<span class="ident" id="6084891"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6084892">.</span><span class="ident" id="6084893">trace</span>&nbsp;<span class="op" id="6084899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084903">defer</span>&nbsp;<span class="ident" id="6084909"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6084911">(</span><span class="ident" id="6084912"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6084917">(</span><span class="ident" id="6084918"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6084919">,</span>&nbsp;<span class="string" id="6084921">&#34;TypeList&#34;</span><span class="op" id="6084931">)</span><span class="op" id="6084932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6084935">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6084939"><a href="/go/parser/parser.go.html#6084868">list</a></span>&nbsp;<span class="op" id="6084944">=</span>&nbsp;<span class="builtinfunc" id="6084946">append</span><span class="op" id="6084952">(</span><span class="ident" id="6084953"><a href="/go/parser/parser.go.html#6084868">list</a></span><span class="op" id="6084957">,</span>&nbsp;<span class="ident" id="6084959"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6084960">.</span><span class="ident" id="6084961">parseType</span><span class="op" id="6084970">(</span><span class="op" id="6084971">)</span><span class="op" id="6084972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6084975">for</span>&nbsp;<span class="ident" id="6084979"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6084980">.</span><span class="ident" id="6084981">tok</span>&nbsp;<span class="op" id="6084985">==</span>&nbsp;<span class="ident" id="6084988"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6084993">.</span><span class="ident" id="6084994">COMMA</span>&nbsp;<span class="op" id="6085000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085004"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6085005">.</span><span class="ident" id="6085006">next</span><span class="op" id="6085010">(</span><span class="op" id="6085011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085015"><a href="/go/parser/parser.go.html#6084868">list</a></span>&nbsp;<span class="op" id="6085020">=</span>&nbsp;<span class="builtinfunc" id="6085022">append</span><span class="op" id="6085028">(</span><span class="ident" id="6085029"><a href="/go/parser/parser.go.html#6084868">list</a></span><span class="op" id="6085033">,</span>&nbsp;<span class="ident" id="6085035"><a href="/go/parser/parser.go.html#6084840">p</a></span><span class="op" id="6085036">.</span><span class="ident" id="6085037">parseType</span><span class="op" id="6085046">(</span><span class="op" id="6085047">)</span><span class="op" id="6085048">)</span><br>
<span class="lineno">1850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085055">return</span><br>
<span class="lineno"></span><span class="op" id="6085062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1855</span><span class="keyword" id="6085065">func</span>&nbsp;<span class="op" id="6085070">(</span><span class="ident" id="6085071">p</span>&nbsp;<span class="op" id="6085073">*</span><span class="ident" id="6085074"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6085080">)</span>&nbsp;<span class="ident" id="6085082">parseCaseClause</span><span class="op" id="6085097">(</span><span class="ident" id="6085098">typeSwitch</span>&nbsp;<span class="builtintype" id="6085109">bool</span><span class="op" id="6085113">)</span>&nbsp;<span class="op" id="6085115">*</span><span class="ident" id="6085116"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085119">.</span><span class="ident" id="6085120">CaseClause</span>&nbsp;<span class="op" id="6085131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085134">if</span>&nbsp;<span class="ident" id="6085137"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085138">.</span><span class="ident" id="6085139">trace</span>&nbsp;<span class="op" id="6085145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085149">defer</span>&nbsp;<span class="ident" id="6085155"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6085157">(</span><span class="ident" id="6085158"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6085163">(</span><span class="ident" id="6085164"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085165">,</span>&nbsp;<span class="string" id="6085167">&#34;CaseClause&#34;</span><span class="op" id="6085179">)</span><span class="op" id="6085180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085187">pos</span>&nbsp;<span class="op" id="6085191">:=</span>&nbsp;<span class="ident" id="6085194"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085195">.</span><span class="ident" id="6085196">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085201">var</span>&nbsp;<span class="ident" id="6085205">list</span>&nbsp;<span class="op" id="6085210">[</span><span class="op" id="6085211">]</span><span class="ident" id="6085212"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085215">.</span><span class="ident" id="6085216">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085222">if</span>&nbsp;<span class="ident" id="6085225"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085226">.</span><span class="ident" id="6085227">tok</span>&nbsp;<span class="op" id="6085231">==</span>&nbsp;<span class="ident" id="6085234"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6085239">.</span><span class="ident" id="6085240">CASE</span>&nbsp;<span class="op" id="6085245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085249"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085250">.</span><span class="ident" id="6085251">next</span><span class="op" id="6085255">(</span><span class="op" id="6085256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085260">if</span>&nbsp;<span class="ident" id="6085263"><a href="/go/parser/parser.go.html#6085098">typeSwitch</a></span>&nbsp;<span class="op" id="6085274">{</span><br>
<span class="lineno">1865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085279"><a href="/go/parser/parser.go.html#6085205">list</a></span>&nbsp;<span class="op" id="6085284">=</span>&nbsp;<span class="ident" id="6085286"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085287">.</span><span class="ident" id="6085288">parseTypeList</span><span class="op" id="6085301">(</span><span class="op" id="6085302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085306">}</span>&nbsp;<span class="keyword" id="6085308">else</span>&nbsp;<span class="op" id="6085313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085318"><a href="/go/parser/parser.go.html#6085205">list</a></span>&nbsp;<span class="op" id="6085323">=</span>&nbsp;<span class="ident" id="6085325"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085326">.</span><span class="ident" id="6085327">parseRhsList</span><span class="op" id="6085339">(</span><span class="op" id="6085340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085347">}</span>&nbsp;<span class="keyword" id="6085349">else</span>&nbsp;<span class="op" id="6085354">{</span><br>
<span class="lineno">1870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085358"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085359">.</span><span class="ident" id="6085360">expect</span><span class="op" id="6085366">(</span><span class="ident" id="6085367"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6085372">.</span><span class="ident" id="6085373">DEFAULT</span><span class="op" id="6085380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085387">colon</span>&nbsp;<span class="op" id="6085393">:=</span>&nbsp;<span class="ident" id="6085396"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085397">.</span><span class="ident" id="6085398">expect</span><span class="op" id="6085404">(</span><span class="ident" id="6085405"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6085410">.</span><span class="ident" id="6085411">COLON</span><span class="op" id="6085416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085419"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085420">.</span><span class="ident" id="6085421">openScope</span><span class="op" id="6085430">(</span><span class="op" id="6085431">)</span><br>
<span class="lineno">1875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085434">body</span>&nbsp;<span class="op" id="6085439">:=</span>&nbsp;<span class="ident" id="6085442"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085443">.</span><span class="ident" id="6085444">parseStmtList</span><span class="op" id="6085457">(</span><span class="op" id="6085458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085461"><a href="/go/parser/parser.go.html#6085071">p</a></span><span class="op" id="6085462">.</span><span class="ident" id="6085463">closeScope</span><span class="op" id="6085473">(</span><span class="op" id="6085474">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085478">return</span>&nbsp;<span class="op" id="6085485">&amp;</span><span class="ident" id="6085486"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085489">.</span><span class="ident" id="6085490">CaseClause</span><span class="op" id="6085500">{</span><span class="ident" id="6085501">Case</span><span class="op" id="6085505">:</span>&nbsp;<span class="ident" id="6085507"><a href="/go/parser/parser.go.html#6085187">pos</a></span><span class="op" id="6085510">,</span>&nbsp;<span class="ident" id="6085512">List</span><span class="op" id="6085516">:</span>&nbsp;<span class="ident" id="6085518"><a href="/go/parser/parser.go.html#6085205">list</a></span><span class="op" id="6085522">,</span>&nbsp;<span class="ident" id="6085524">Colon</span><span class="op" id="6085529">:</span>&nbsp;<span class="ident" id="6085531"><a href="/go/parser/parser.go.html#6085387">colon</a></span><span class="op" id="6085536">,</span>&nbsp;<span class="ident" id="6085538">Body</span><span class="op" id="6085542">:</span>&nbsp;<span class="ident" id="6085544"><a href="/go/parser/parser.go.html#6085434">body</a></span><span class="op" id="6085548">}</span><br>
<span class="lineno"></span><span class="op" id="6085550">}</span><br>
<span class="lineno">1880</span><br>
<span class="lineno"></span><span class="keyword" id="6085553">func</span>&nbsp;<span class="ident" id="6085558">isTypeSwitchAssert</span><span class="op" id="6085576">(</span><span class="ident" id="6085577">x</span>&nbsp;<span class="ident" id="6085579"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085582">.</span><span class="ident" id="6085583">Expr</span><span class="op" id="6085587">)</span>&nbsp;<span class="builtintype" id="6085589">bool</span>&nbsp;<span class="op" id="6085594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6085597">a</span><span class="op" id="6085598">,</span>&nbsp;<span class="ident" id="6085600">ok</span>&nbsp;<span class="op" id="6085603">:=</span>&nbsp;<span class="ident" id="6085606"><a href="/go/parser/parser.go.html#6085577">x</a></span><span class="op" id="6085607">.</span><span class="op" id="6085608">(</span><span class="op" id="6085609">*</span><span class="ident" id="6085610"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085613">.</span><span class="ident" id="6085614">TypeAssertExpr</span><span class="op" id="6085628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085631">return</span>&nbsp;<span class="ident" id="6085638"><a href="/go/parser/parser.go.html#6085600">ok</a></span>&nbsp;<span class="op" id="6085641">&amp;&amp;</span>&nbsp;<span class="ident" id="6085644"><a href="/go/parser/parser.go.html#6085597">a</a></span><span class="op" id="6085645">.</span><span class="ident" id="6085646">Type</span>&nbsp;<span class="op" id="6085651">==</span>&nbsp;<span class="ident" id="6085654">nil</span><br>
<span class="lineno"></span><span class="op" id="6085658">}</span><br>
<span class="lineno">1885</span><br>
<span class="lineno"></span><span class="keyword" id="6085661">func</span>&nbsp;<span class="ident" id="6085666">isTypeSwitchGuard</span><span class="op" id="6085683">(</span><span class="ident" id="6085684">s</span>&nbsp;<span class="ident" id="6085686"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085689">.</span><span class="ident" id="6085690">Stmt</span><span class="op" id="6085694">)</span>&nbsp;<span class="builtintype" id="6085696">bool</span>&nbsp;<span class="op" id="6085701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085704">switch</span>&nbsp;<span class="ident" id="6085711">t</span>&nbsp;<span class="op" id="6085713">:=</span>&nbsp;<span class="ident" id="6085716"><a href="/go/parser/parser.go.html#6085684">s</a></span><span class="op" id="6085717">.</span><span class="op" id="6085718">(</span><span class="keyword" id="6085719">type</span><span class="op" id="6085723">)</span>&nbsp;<span class="op" id="6085725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085728">case</span>&nbsp;<span class="op" id="6085733">*</span><span class="ident" id="6085734"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085737">.</span><span class="ident" id="6085738">ExprStmt</span><span class="op" id="6085746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6085750">//&nbsp;x.(nil)</span><br>
<span class="lineno">1890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085763">return</span>&nbsp;<span class="ident" id="6085770"><a href="/go/parser/parser.go.html#6085558">isTypeSwitchAssert</a></span><span class="op" id="6085788">(</span><span class="ident" id="6085789"><a href="/go/parser/parser.go.html#6085711">t</a></span><span class="op" id="6085790">.</span><span class="ident" id="6085791">X</span><span class="op" id="6085792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085795">case</span>&nbsp;<span class="op" id="6085800">*</span><span class="ident" id="6085801"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085804">.</span><span class="ident" id="6085805">AssignStmt</span><span class="op" id="6085815">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6085819">//&nbsp;v&nbsp;:=&nbsp;x.(nil)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085837">return</span>&nbsp;<span class="builtinfunc" id="6085844">len</span><span class="op" id="6085847">(</span><span class="ident" id="6085848"><a href="/go/parser/parser.go.html#6085711">t</a></span><span class="op" id="6085849">.</span><span class="ident" id="6085850">Lhs</span><span class="op" id="6085853">)</span>&nbsp;<span class="op" id="6085855">==</span>&nbsp;<span class="num" id="6085858">1</span>&nbsp;<span class="op" id="6085860">&amp;&amp;</span>&nbsp;<span class="ident" id="6085863"><a href="/go/parser/parser.go.html#6085711">t</a></span><span class="op" id="6085864">.</span><span class="ident" id="6085865">Tok</span>&nbsp;<span class="op" id="6085869">==</span>&nbsp;<span class="ident" id="6085872"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6085877">.</span><span class="ident" id="6085878">DEFINE</span>&nbsp;<span class="op" id="6085885">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6085888">len</span><span class="op" id="6085891">(</span><span class="ident" id="6085892"><a href="/go/parser/parser.go.html#6085711">t</a></span><span class="op" id="6085893">.</span><span class="ident" id="6085894">Rhs</span><span class="op" id="6085897">)</span>&nbsp;<span class="op" id="6085899">==</span>&nbsp;<span class="num" id="6085902">1</span>&nbsp;<span class="op" id="6085904">&amp;&amp;</span>&nbsp;<span class="ident" id="6085907"><a href="/go/parser/parser.go.html#6085558">isTypeSwitchAssert</a></span><span class="op" id="6085925">(</span><span class="ident" id="6085926"><a href="/go/parser/parser.go.html#6085711">t</a></span><span class="op" id="6085927">.</span><span class="ident" id="6085928">Rhs</span><span class="op" id="6085931">[</span><span class="num" id="6085932">0</span><span class="op" id="6085933">]</span><span class="op" id="6085934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6085937">}</span><br>
<span class="lineno">1895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6085940">return</span>&nbsp;<span class="ident" id="6085947">false</span><br>
<span class="lineno"></span><span class="op" id="6085953">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6085956">func</span>&nbsp;<span class="op" id="6085961">(</span><span class="ident" id="6085962">p</span>&nbsp;<span class="op" id="6085964">*</span><span class="ident" id="6085965"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6085971">)</span>&nbsp;<span class="ident" id="6085973">parseSwitchStmt</span><span class="op" id="6085988">(</span><span class="op" id="6085989">)</span>&nbsp;<span class="ident" id="6085991"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6085994">.</span><span class="ident" id="6085995">Stmt</span>&nbsp;<span class="op" id="6086000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086003">if</span>&nbsp;<span class="ident" id="6086006"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086007">.</span><span class="ident" id="6086008">trace</span>&nbsp;<span class="op" id="6086014">{</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086018">defer</span>&nbsp;<span class="ident" id="6086024"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6086026">(</span><span class="ident" id="6086027"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6086032">(</span><span class="ident" id="6086033"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086034">,</span>&nbsp;<span class="string" id="6086036">&#34;SwitchStmt&#34;</span><span class="op" id="6086048">)</span><span class="op" id="6086049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086056">pos</span>&nbsp;<span class="op" id="6086060">:=</span>&nbsp;<span class="ident" id="6086063"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086064">.</span><span class="ident" id="6086065">expect</span><span class="op" id="6086071">(</span><span class="ident" id="6086072"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6086077">.</span><span class="ident" id="6086078">SWITCH</span><span class="op" id="6086084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086087"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086088">.</span><span class="ident" id="6086089">openScope</span><span class="op" id="6086098">(</span><span class="op" id="6086099">)</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086102">defer</span>&nbsp;<span class="ident" id="6086108"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086109">.</span><span class="ident" id="6086110">closeScope</span><span class="op" id="6086120">(</span><span class="op" id="6086121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086125">var</span>&nbsp;<span class="ident" id="6086129">s1</span><span class="op" id="6086131">,</span>&nbsp;<span class="ident" id="6086133">s2</span>&nbsp;<span class="ident" id="6086136"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6086139">.</span><span class="ident" id="6086140">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086146">if</span>&nbsp;<span class="ident" id="6086149"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086150">.</span><span class="ident" id="6086151">tok</span>&nbsp;<span class="op" id="6086155">!=</span>&nbsp;<span class="ident" id="6086158"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6086163">.</span><span class="ident" id="6086164">LBRACE</span>&nbsp;<span class="op" id="6086171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086175">prevLev</span>&nbsp;<span class="op" id="6086183">:=</span>&nbsp;<span class="ident" id="6086186"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086187">.</span><span class="ident" id="6086188">exprLev</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086198"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086199">.</span><span class="ident" id="6086200">exprLev</span>&nbsp;<span class="op" id="6086208">=</span>&nbsp;<span class="op" id="6086210">-</span><span class="num" id="6086211">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086215">if</span>&nbsp;<span class="ident" id="6086218"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086219">.</span><span class="ident" id="6086220">tok</span>&nbsp;<span class="op" id="6086224">!=</span>&nbsp;<span class="ident" id="6086227"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6086232">.</span><span class="ident" id="6086233">SEMICOLON</span>&nbsp;<span class="op" id="6086243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086248"><a href="/go/parser/parser.go.html#6086133">s2</a></span><span class="op" id="6086250">,</span>&nbsp;<span class="ident" id="6086252">_</span>&nbsp;<span class="op" id="6086254">=</span>&nbsp;<span class="ident" id="6086256"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086257">.</span><span class="ident" id="6086258">parseSimpleStmt</span><span class="op" id="6086273">(</span><span class="ident" id="6086274"><a href="/go/parser/parser.go.html#6079294">basic</a></span><span class="op" id="6086279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6086283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086287">if</span>&nbsp;<span class="ident" id="6086290"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086291">.</span><span class="ident" id="6086292">tok</span>&nbsp;<span class="op" id="6086296">==</span>&nbsp;<span class="ident" id="6086299"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6086304">.</span><span class="ident" id="6086305">SEMICOLON</span>&nbsp;<span class="op" id="6086315">{</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086320"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086321">.</span><span class="ident" id="6086322">next</span><span class="op" id="6086326">(</span><span class="op" id="6086327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086332"><a href="/go/parser/parser.go.html#6086129">s1</a></span>&nbsp;<span class="op" id="6086335">=</span>&nbsp;<span class="ident" id="6086337"><a href="/go/parser/parser.go.html#6086133">s2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086343"><a href="/go/parser/parser.go.html#6086133">s2</a></span>&nbsp;<span class="op" id="6086346">=</span>&nbsp;<span class="ident" id="6086348">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086355">if</span>&nbsp;<span class="ident" id="6086358"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086359">.</span><span class="ident" id="6086360">tok</span>&nbsp;<span class="op" id="6086364">!=</span>&nbsp;<span class="ident" id="6086367"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6086372">.</span><span class="ident" id="6086373">LBRACE</span>&nbsp;<span class="op" id="6086380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086386">//&nbsp;A&nbsp;TypeSwitchGuard&nbsp;may&nbsp;declare&nbsp;a&nbsp;variable&nbsp;in&nbsp;addition</span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086446">//&nbsp;to&nbsp;the&nbsp;variable&nbsp;declared&nbsp;in&nbsp;the&nbsp;initial&nbsp;SimpleStmt.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086505">//&nbsp;Introduce&nbsp;extra&nbsp;scope&nbsp;to&nbsp;avoid&nbsp;redeclaration&nbsp;errors:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086565">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086572">//&nbsp;&nbsp;&nbsp;&nbspswitch&nbsp;t&nbsp;:=&nbsp;0;&nbsp;t&nbsp;:=&nbsp;x.(T)&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086613">//</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086620">//&nbsp;(this&nbsp;code&nbsp;is&nbsp;not&nbsp;valid&nbsp;Go&nbsp;because&nbsp;the&nbsp;first&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086674">//&nbsp;cannot&nbsp;be&nbsp;accessed&nbsp;and&nbsp;thus&nbsp;is&nbsp;never&nbsp;used,&nbsp;the&nbsp;extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086734">//&nbsp;scope&nbsp;is&nbsp;needed&nbsp;for&nbsp;the&nbsp;correct&nbsp;error&nbsp;message).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086789">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086796">//&nbsp;If&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;type&nbsp;switch,&nbsp;s2&nbsp;must&nbsp;be&nbsp;an&nbsp;expression.</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6086861">//&nbsp;Having&nbsp;the&nbsp;extra&nbsp;nested&nbsp;but&nbsp;empty&nbsp;scope&nbsp;won&#39;t&nbsp;affect&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086925"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086926">.</span><span class="ident" id="6086927">openScope</span><span class="op" id="6086936">(</span><span class="op" id="6086937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6086943">defer</span>&nbsp;<span class="ident" id="6086949"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086950">.</span><span class="ident" id="6086951">closeScope</span><span class="op" id="6086961">(</span><span class="op" id="6086962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6086968"><a href="/go/parser/parser.go.html#6086133">s2</a></span><span class="op" id="6086970">,</span>&nbsp;<span class="ident" id="6086972">_</span>&nbsp;<span class="op" id="6086974">=</span>&nbsp;<span class="ident" id="6086976"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6086977">.</span><span class="ident" id="6086978">parseSimpleStmt</span><span class="op" id="6086993">(</span><span class="ident" id="6086994"><a href="/go/parser/parser.go.html#6079294">basic</a></span><span class="op" id="6086999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087004">}</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087012"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087013">.</span><span class="ident" id="6087014">exprLev</span>&nbsp;<span class="op" id="6087022">=</span>&nbsp;<span class="ident" id="6087024"><a href="/go/parser/parser.go.html#6086175">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087037">typeSwitch</span>&nbsp;<span class="op" id="6087048">:=</span>&nbsp;<span class="ident" id="6087051"><a href="/go/parser/parser.go.html#6085666">isTypeSwitchGuard</a></span><span class="op" id="6087068">(</span><span class="ident" id="6087069"><a href="/go/parser/parser.go.html#6086133">s2</a></span><span class="op" id="6087071">)</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087074">lbrace</span>&nbsp;<span class="op" id="6087081">:=</span>&nbsp;<span class="ident" id="6087084"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087085">.</span><span class="ident" id="6087086">expect</span><span class="op" id="6087092">(</span><span class="ident" id="6087093"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087098">.</span><span class="ident" id="6087099">LBRACE</span><span class="op" id="6087105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087108">var</span>&nbsp;<span class="ident" id="6087112">list</span>&nbsp;<span class="op" id="6087117">[</span><span class="op" id="6087118">]</span><span class="ident" id="6087119"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087122">.</span><span class="ident" id="6087123">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087129">for</span>&nbsp;<span class="ident" id="6087133"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087134">.</span><span class="ident" id="6087135">tok</span>&nbsp;<span class="op" id="6087139">==</span>&nbsp;<span class="ident" id="6087142"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087147">.</span><span class="ident" id="6087148">CASE</span>&nbsp;<span class="op" id="6087153">||</span>&nbsp;<span class="ident" id="6087156"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087157">.</span><span class="ident" id="6087158">tok</span>&nbsp;<span class="op" id="6087162">==</span>&nbsp;<span class="ident" id="6087165"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087170">.</span><span class="ident" id="6087171">DEFAULT</span>&nbsp;<span class="op" id="6087179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087183"><a href="/go/parser/parser.go.html#6087112">list</a></span>&nbsp;<span class="op" id="6087188">=</span>&nbsp;<span class="builtinfunc" id="6087190">append</span><span class="op" id="6087196">(</span><span class="ident" id="6087197"><a href="/go/parser/parser.go.html#6087112">list</a></span><span class="op" id="6087201">,</span>&nbsp;<span class="ident" id="6087203"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087204">.</span><span class="ident" id="6087205">parseCaseClause</span><span class="op" id="6087220">(</span><span class="ident" id="6087221"><a href="/go/parser/parser.go.html#6087037">typeSwitch</a></span><span class="op" id="6087231">)</span><span class="op" id="6087232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087235">}</span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087238">rbrace</span>&nbsp;<span class="op" id="6087245">:=</span>&nbsp;<span class="ident" id="6087248"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087249">.</span><span class="ident" id="6087250">expect</span><span class="op" id="6087256">(</span><span class="ident" id="6087257"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087262">.</span><span class="ident" id="6087263">RBRACE</span><span class="op" id="6087269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087272"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087273">.</span><span class="ident" id="6087274">expectSemi</span><span class="op" id="6087284">(</span><span class="op" id="6087285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087288">body</span>&nbsp;<span class="op" id="6087293">:=</span>&nbsp;<span class="op" id="6087296">&amp;</span><span class="ident" id="6087297"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087300">.</span><span class="ident" id="6087301">BlockStmt</span><span class="op" id="6087310">{</span><span class="ident" id="6087311">Lbrace</span><span class="op" id="6087317">:</span>&nbsp;<span class="ident" id="6087319"><a href="/go/parser/parser.go.html#6087074">lbrace</a></span><span class="op" id="6087325">,</span>&nbsp;<span class="ident" id="6087327">List</span><span class="op" id="6087331">:</span>&nbsp;<span class="ident" id="6087333"><a href="/go/parser/parser.go.html#6087112">list</a></span><span class="op" id="6087337">,</span>&nbsp;<span class="ident" id="6087339">Rbrace</span><span class="op" id="6087345">:</span>&nbsp;<span class="ident" id="6087347"><a href="/go/parser/parser.go.html#6087238">rbrace</a></span><span class="op" id="6087353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087357">if</span>&nbsp;<span class="ident" id="6087360"><a href="/go/parser/parser.go.html#6087037">typeSwitch</a></span>&nbsp;<span class="op" id="6087371">{</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087375">return</span>&nbsp;<span class="op" id="6087382">&amp;</span><span class="ident" id="6087383"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087386">.</span><span class="ident" id="6087387">TypeSwitchStmt</span><span class="op" id="6087401">{</span><span class="ident" id="6087402">Switch</span><span class="op" id="6087408">:</span>&nbsp;<span class="ident" id="6087410"><a href="/go/parser/parser.go.html#6086056">pos</a></span><span class="op" id="6087413">,</span>&nbsp;<span class="ident" id="6087415">Init</span><span class="op" id="6087419">:</span>&nbsp;<span class="ident" id="6087421"><a href="/go/parser/parser.go.html#6086129">s1</a></span><span class="op" id="6087423">,</span>&nbsp;<span class="ident" id="6087425">Assign</span><span class="op" id="6087431">:</span>&nbsp;<span class="ident" id="6087433"><a href="/go/parser/parser.go.html#6086133">s2</a></span><span class="op" id="6087435">,</span>&nbsp;<span class="ident" id="6087437">Body</span><span class="op" id="6087441">:</span>&nbsp;<span class="ident" id="6087443"><a href="/go/parser/parser.go.html#6087288">body</a></span><span class="op" id="6087447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087454">return</span>&nbsp;<span class="op" id="6087461">&amp;</span><span class="ident" id="6087462"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087465">.</span><span class="ident" id="6087466">SwitchStmt</span><span class="op" id="6087476">{</span><span class="ident" id="6087477">Switch</span><span class="op" id="6087483">:</span>&nbsp;<span class="ident" id="6087485"><a href="/go/parser/parser.go.html#6086056">pos</a></span><span class="op" id="6087488">,</span>&nbsp;<span class="ident" id="6087490">Init</span><span class="op" id="6087494">:</span>&nbsp;<span class="ident" id="6087496"><a href="/go/parser/parser.go.html#6086129">s1</a></span><span class="op" id="6087498">,</span>&nbsp;<span class="ident" id="6087500">Tag</span><span class="op" id="6087503">:</span>&nbsp;<span class="ident" id="6087505"><a href="/go/parser/parser.go.html#6085962">p</a></span><span class="op" id="6087506">.</span><span class="ident" id="6087507">makeExpr</span><span class="op" id="6087515">(</span><span class="ident" id="6087516"><a href="/go/parser/parser.go.html#6086133">s2</a></span><span class="op" id="6087518">,</span>&nbsp;<span class="string" id="6087520">&#34;switch&nbsp;expression&#34;</span><span class="op" id="6087539">)</span><span class="op" id="6087540">,</span>&nbsp;<span class="ident" id="6087542">Body</span><span class="op" id="6087546">:</span>&nbsp;<span class="ident" id="6087548"><a href="/go/parser/parser.go.html#6087288">body</a></span><span class="op" id="6087552">}</span><br>
<span class="lineno"></span><span class="op" id="6087554">}</span><br>
<span class="lineno">1955</span><br>
<span class="lineno"></span><span class="keyword" id="6087557">func</span>&nbsp;<span class="op" id="6087562">(</span><span class="ident" id="6087563">p</span>&nbsp;<span class="op" id="6087565">*</span><span class="ident" id="6087566"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6087572">)</span>&nbsp;<span class="ident" id="6087574">parseCommClause</span><span class="op" id="6087589">(</span><span class="op" id="6087590">)</span>&nbsp;<span class="op" id="6087592">*</span><span class="ident" id="6087593"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087596">.</span><span class="ident" id="6087597">CommClause</span>&nbsp;<span class="op" id="6087608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087611">if</span>&nbsp;<span class="ident" id="6087614"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087615">.</span><span class="ident" id="6087616">trace</span>&nbsp;<span class="op" id="6087622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087626">defer</span>&nbsp;<span class="ident" id="6087632"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6087634">(</span><span class="ident" id="6087635"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6087640">(</span><span class="ident" id="6087641"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087642">,</span>&nbsp;<span class="string" id="6087644">&#34;CommClause&#34;</span><span class="op" id="6087656">)</span><span class="op" id="6087657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087660">}</span><br>
<span class="lineno">1960</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087664"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087665">.</span><span class="ident" id="6087666">openScope</span><span class="op" id="6087675">(</span><span class="op" id="6087676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087679">pos</span>&nbsp;<span class="op" id="6087683">:=</span>&nbsp;<span class="ident" id="6087686"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087687">.</span><span class="ident" id="6087688">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087693">var</span>&nbsp;<span class="ident" id="6087697">comm</span>&nbsp;<span class="ident" id="6087702"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087705">.</span><span class="ident" id="6087706">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087712">if</span>&nbsp;<span class="ident" id="6087715"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087716">.</span><span class="ident" id="6087717">tok</span>&nbsp;<span class="op" id="6087721">==</span>&nbsp;<span class="ident" id="6087724"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087729">.</span><span class="ident" id="6087730">CASE</span>&nbsp;<span class="op" id="6087735">{</span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087739"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087740">.</span><span class="ident" id="6087741">next</span><span class="op" id="6087745">(</span><span class="op" id="6087746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087750">lhs</span>&nbsp;<span class="op" id="6087754">:=</span>&nbsp;<span class="ident" id="6087757"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087758">.</span><span class="ident" id="6087759">parseLhsList</span><span class="op" id="6087771">(</span><span class="op" id="6087772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087776">if</span>&nbsp;<span class="ident" id="6087779"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087780">.</span><span class="ident" id="6087781">tok</span>&nbsp;<span class="op" id="6087785">==</span>&nbsp;<span class="ident" id="6087788"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6087793">.</span><span class="ident" id="6087794">ARROW</span>&nbsp;<span class="op" id="6087800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6087805">//&nbsp;SendStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6087820">if</span>&nbsp;<span class="builtinfunc" id="6087823">len</span><span class="op" id="6087826">(</span><span class="ident" id="6087827"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6087830">)</span>&nbsp;<span class="op" id="6087832">&gt;</span>&nbsp;<span class="num" id="6087834">1</span>&nbsp;<span class="op" id="6087836">{</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087842"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087843">.</span><span class="ident" id="6087844">errorExpected</span><span class="op" id="6087857">(</span><span class="ident" id="6087858"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6087861">[</span><span class="num" id="6087862">0</span><span class="op" id="6087863">]</span><span class="op" id="6087864">.</span><span class="ident" id="6087865">Pos</span><span class="op" id="6087868">(</span><span class="op" id="6087869">)</span><span class="op" id="6087870">,</span>&nbsp;<span class="string" id="6087872">&#34;1&nbsp;expression&#34;</span><span class="op" id="6087886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6087892">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6087929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087934">arrow</span>&nbsp;<span class="op" id="6087940">:=</span>&nbsp;<span class="ident" id="6087943"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087944">.</span><span class="ident" id="6087945">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087952"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087953">.</span><span class="ident" id="6087954">next</span><span class="op" id="6087958">(</span><span class="op" id="6087959">)</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087964">rhs</span>&nbsp;<span class="op" id="6087968">:=</span>&nbsp;<span class="ident" id="6087971"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6087972">.</span><span class="ident" id="6087973">parseRhs</span><span class="op" id="6087981">(</span><span class="op" id="6087982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6087987"><a href="/go/parser/parser.go.html#6087697">comm</a></span>&nbsp;<span class="op" id="6087992">=</span>&nbsp;<span class="op" id="6087994">&amp;</span><span class="ident" id="6087995"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6087998">.</span><span class="ident" id="6087999">SendStmt</span><span class="op" id="6088007">{</span><span class="ident" id="6088008">Chan</span><span class="op" id="6088012">:</span>&nbsp;<span class="ident" id="6088014"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088017">[</span><span class="num" id="6088018">0</span><span class="op" id="6088019">]</span><span class="op" id="6088020">,</span>&nbsp;<span class="ident" id="6088022">Arrow</span><span class="op" id="6088027">:</span>&nbsp;<span class="ident" id="6088029"><a href="/go/parser/parser.go.html#6087934">arrow</a></span><span class="op" id="6088034">,</span>&nbsp;<span class="ident" id="6088036">Value</span><span class="op" id="6088041">:</span>&nbsp;<span class="ident" id="6088043"><a href="/go/parser/parser.go.html#6087964">rhs</a></span><span class="op" id="6088046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088050">}</span>&nbsp;<span class="keyword" id="6088052">else</span>&nbsp;<span class="op" id="6088057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6088062">//&nbsp;RecvStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088077">if</span>&nbsp;<span class="ident" id="6088080">tok</span>&nbsp;<span class="op" id="6088084">:=</span>&nbsp;<span class="ident" id="6088087"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088088">.</span><span class="ident" id="6088089">tok</span><span class="op" id="6088092">;</span>&nbsp;<span class="ident" id="6088094"><a href="/go/parser/parser.go.html#6088080">tok</a></span>&nbsp;<span class="op" id="6088098">==</span>&nbsp;<span class="ident" id="6088101"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6088106">.</span><span class="ident" id="6088107">ASSIGN</span>&nbsp;<span class="op" id="6088114">||</span>&nbsp;<span class="ident" id="6088117"><a href="/go/parser/parser.go.html#6088080">tok</a></span>&nbsp;<span class="op" id="6088121">==</span>&nbsp;<span class="ident" id="6088124"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6088129">.</span><span class="ident" id="6088130">DEFINE</span>&nbsp;<span class="op" id="6088137">{</span><br>
<span class="lineno">1980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6088143">//&nbsp;RecvStmt&nbsp;with&nbsp;assignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088175">if</span>&nbsp;<span class="builtinfunc" id="6088178">len</span><span class="op" id="6088181">(</span><span class="ident" id="6088182"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088185">)</span>&nbsp;<span class="op" id="6088187">&gt;</span>&nbsp;<span class="num" id="6088189">2</span>&nbsp;<span class="op" id="6088191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088198"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088199">.</span><span class="ident" id="6088200">errorExpected</span><span class="op" id="6088213">(</span><span class="ident" id="6088214"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088217">[</span><span class="num" id="6088218">0</span><span class="op" id="6088219">]</span><span class="op" id="6088220">.</span><span class="ident" id="6088221">Pos</span><span class="op" id="6088224">(</span><span class="op" id="6088225">)</span><span class="op" id="6088226">,</span>&nbsp;<span class="string" id="6088228">&#34;1&nbsp;or&nbsp;2&nbsp;expressions&#34;</span><span class="op" id="6088248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6088255">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;two&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088299"><a href="/go/parser/parser.go.html#6087750">lhs</a></span>&nbsp;<span class="op" id="6088303">=</span>&nbsp;<span class="ident" id="6088305"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088308">[</span><span class="num" id="6088309">0</span><span class="op" id="6088310">:</span><span class="num" id="6088311">2</span><span class="op" id="6088312">]</span><br>
<span class="lineno">1985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088324">pos</span>&nbsp;<span class="op" id="6088328">:=</span>&nbsp;<span class="ident" id="6088331"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088332">.</span><span class="ident" id="6088333">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088341"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088342">.</span><span class="ident" id="6088343">next</span><span class="op" id="6088347">(</span><span class="op" id="6088348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088354">rhs</span>&nbsp;<span class="op" id="6088358">:=</span>&nbsp;<span class="ident" id="6088361"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088362">.</span><span class="ident" id="6088363">parseRhs</span><span class="op" id="6088371">(</span><span class="op" id="6088372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088378">as</span>&nbsp;<span class="op" id="6088381">:=</span>&nbsp;<span class="op" id="6088384">&amp;</span><span class="ident" id="6088385"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6088388">.</span><span class="ident" id="6088389">AssignStmt</span><span class="op" id="6088399">{</span><span class="ident" id="6088400">Lhs</span><span class="op" id="6088403">:</span>&nbsp;<span class="ident" id="6088405"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088408">,</span>&nbsp;<span class="ident" id="6088410">TokPos</span><span class="op" id="6088416">:</span>&nbsp;<span class="ident" id="6088418"><a href="/go/parser/parser.go.html#6088324">pos</a></span><span class="op" id="6088421">,</span>&nbsp;<span class="ident" id="6088423">Tok</span><span class="op" id="6088426">:</span>&nbsp;<span class="ident" id="6088428"><a href="/go/parser/parser.go.html#6088080">tok</a></span><span class="op" id="6088431">,</span>&nbsp;<span class="ident" id="6088433">Rhs</span><span class="op" id="6088436">:</span>&nbsp;<span class="op" id="6088438">[</span><span class="op" id="6088439">]</span><span class="ident" id="6088440"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6088443">.</span><span class="ident" id="6088444">Expr</span><span class="op" id="6088448">{</span><span class="ident" id="6088449"><a href="/go/parser/parser.go.html#6088354">rhs</a></span><span class="op" id="6088452">}</span><span class="op" id="6088453">}</span><br>
<span class="lineno">1990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088459">if</span>&nbsp;<span class="ident" id="6088462"><a href="/go/parser/parser.go.html#6088080">tok</a></span>&nbsp;<span class="op" id="6088466">==</span>&nbsp;<span class="ident" id="6088469"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6088474">.</span><span class="ident" id="6088475">DEFINE</span>&nbsp;<span class="op" id="6088482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088489"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088490">.</span><span class="ident" id="6088491">shortVarDecl</span><span class="op" id="6088503">(</span><span class="ident" id="6088504"><a href="/go/parser/parser.go.html#6088378">as</a></span><span class="op" id="6088506">,</span>&nbsp;<span class="ident" id="6088508"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088523"><a href="/go/parser/parser.go.html#6087697">comm</a></span>&nbsp;<span class="op" id="6088528">=</span>&nbsp;<span class="ident" id="6088530"><a href="/go/parser/parser.go.html#6088378">as</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088536">}</span>&nbsp;<span class="keyword" id="6088538">else</span>&nbsp;<span class="op" id="6088543">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6088549">//&nbsp;lhs&nbsp;must&nbsp;be&nbsp;single&nbsp;receive&nbsp;operation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088593">if</span>&nbsp;<span class="builtinfunc" id="6088596">len</span><span class="op" id="6088599">(</span><span class="ident" id="6088600"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088603">)</span>&nbsp;<span class="op" id="6088605">&gt;</span>&nbsp;<span class="num" id="6088607">1</span>&nbsp;<span class="op" id="6088609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088616"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088617">.</span><span class="ident" id="6088618">errorExpected</span><span class="op" id="6088631">(</span><span class="ident" id="6088632"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088635">[</span><span class="num" id="6088636">0</span><span class="op" id="6088637">]</span><span class="op" id="6088638">.</span><span class="ident" id="6088639">Pos</span><span class="op" id="6088642">(</span><span class="op" id="6088643">)</span><span class="op" id="6088644">,</span>&nbsp;<span class="string" id="6088646">&#34;1&nbsp;expression&#34;</span><span class="op" id="6088660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6088667">//&nbsp;continue&nbsp;with&nbsp;first&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088705">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088711"><a href="/go/parser/parser.go.html#6087697">comm</a></span>&nbsp;<span class="op" id="6088716">=</span>&nbsp;<span class="op" id="6088718">&amp;</span><span class="ident" id="6088719"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6088722">.</span><span class="ident" id="6088723">ExprStmt</span><span class="op" id="6088731">{</span><span class="ident" id="6088732">X</span><span class="op" id="6088733">:</span>&nbsp;<span class="ident" id="6088735"><a href="/go/parser/parser.go.html#6087750">lhs</a></span><span class="op" id="6088738">[</span><span class="num" id="6088739">0</span><span class="op" id="6088740">]</span><span class="op" id="6088741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088753">}</span>&nbsp;<span class="keyword" id="6088755">else</span>&nbsp;<span class="op" id="6088760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088764"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088765">.</span><span class="ident" id="6088766">expect</span><span class="op" id="6088772">(</span><span class="ident" id="6088773"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6088778">.</span><span class="ident" id="6088779">DEFAULT</span><span class="op" id="6088786">)</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6088789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088793">colon</span>&nbsp;<span class="op" id="6088799">:=</span>&nbsp;<span class="ident" id="6088802"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088803">.</span><span class="ident" id="6088804">expect</span><span class="op" id="6088810">(</span><span class="ident" id="6088811"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6088816">.</span><span class="ident" id="6088817">COLON</span><span class="op" id="6088822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088825">body</span>&nbsp;<span class="op" id="6088830">:=</span>&nbsp;<span class="ident" id="6088833"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088834">.</span><span class="ident" id="6088835">parseStmtList</span><span class="op" id="6088848">(</span><span class="op" id="6088849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6088852"><a href="/go/parser/parser.go.html#6087563">p</a></span><span class="op" id="6088853">.</span><span class="ident" id="6088854">closeScope</span><span class="op" id="6088864">(</span><span class="op" id="6088865">)</span><br>
<span class="lineno">2010</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088869">return</span>&nbsp;<span class="op" id="6088876">&amp;</span><span class="ident" id="6088877"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6088880">.</span><span class="ident" id="6088881">CommClause</span><span class="op" id="6088891">{</span><span class="ident" id="6088892">Case</span><span class="op" id="6088896">:</span>&nbsp;<span class="ident" id="6088898"><a href="/go/parser/parser.go.html#6087679">pos</a></span><span class="op" id="6088901">,</span>&nbsp;<span class="ident" id="6088903">Comm</span><span class="op" id="6088907">:</span>&nbsp;<span class="ident" id="6088909"><a href="/go/parser/parser.go.html#6087697">comm</a></span><span class="op" id="6088913">,</span>&nbsp;<span class="ident" id="6088915">Colon</span><span class="op" id="6088920">:</span>&nbsp;<span class="ident" id="6088922"><a href="/go/parser/parser.go.html#6088793">colon</a></span><span class="op" id="6088927">,</span>&nbsp;<span class="ident" id="6088929">Body</span><span class="op" id="6088933">:</span>&nbsp;<span class="ident" id="6088935"><a href="/go/parser/parser.go.html#6088825">body</a></span><span class="op" id="6088939">}</span><br>
<span class="lineno"></span><span class="op" id="6088941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6088944">func</span>&nbsp;<span class="op" id="6088949">(</span><span class="ident" id="6088950">p</span>&nbsp;<span class="op" id="6088952">*</span><span class="ident" id="6088953"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6088959">)</span>&nbsp;<span class="ident" id="6088961">parseSelectStmt</span><span class="op" id="6088976">(</span><span class="op" id="6088977">)</span>&nbsp;<span class="op" id="6088979">*</span><span class="ident" id="6088980"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6088983">.</span><span class="ident" id="6088984">SelectStmt</span>&nbsp;<span class="op" id="6088995">{</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6088998">if</span>&nbsp;<span class="ident" id="6089001"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089002">.</span><span class="ident" id="6089003">trace</span>&nbsp;<span class="op" id="6089009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089013">defer</span>&nbsp;<span class="ident" id="6089019"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6089021">(</span><span class="ident" id="6089022"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6089027">(</span><span class="ident" id="6089028"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089029">,</span>&nbsp;<span class="string" id="6089031">&#34;SelectStmt&#34;</span><span class="op" id="6089043">)</span><span class="op" id="6089044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6089047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089051">pos</span>&nbsp;<span class="op" id="6089055">:=</span>&nbsp;<span class="ident" id="6089058"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089059">.</span><span class="ident" id="6089060">expect</span><span class="op" id="6089066">(</span><span class="ident" id="6089067"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089072">.</span><span class="ident" id="6089073">SELECT</span><span class="op" id="6089079">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089082">lbrace</span>&nbsp;<span class="op" id="6089089">:=</span>&nbsp;<span class="ident" id="6089092"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089093">.</span><span class="ident" id="6089094">expect</span><span class="op" id="6089100">(</span><span class="ident" id="6089101"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089106">.</span><span class="ident" id="6089107">LBRACE</span><span class="op" id="6089113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089116">var</span>&nbsp;<span class="ident" id="6089120">list</span>&nbsp;<span class="op" id="6089125">[</span><span class="op" id="6089126">]</span><span class="ident" id="6089127"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089130">.</span><span class="ident" id="6089131">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089137">for</span>&nbsp;<span class="ident" id="6089141"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089142">.</span><span class="ident" id="6089143">tok</span>&nbsp;<span class="op" id="6089147">==</span>&nbsp;<span class="ident" id="6089150"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089155">.</span><span class="ident" id="6089156">CASE</span>&nbsp;<span class="op" id="6089161">||</span>&nbsp;<span class="ident" id="6089164"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089165">.</span><span class="ident" id="6089166">tok</span>&nbsp;<span class="op" id="6089170">==</span>&nbsp;<span class="ident" id="6089173"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089178">.</span><span class="ident" id="6089179">DEFAULT</span>&nbsp;<span class="op" id="6089187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089191"><a href="/go/parser/parser.go.html#6089120">list</a></span>&nbsp;<span class="op" id="6089196">=</span>&nbsp;<span class="builtinfunc" id="6089198">append</span><span class="op" id="6089204">(</span><span class="ident" id="6089205"><a href="/go/parser/parser.go.html#6089120">list</a></span><span class="op" id="6089209">,</span>&nbsp;<span class="ident" id="6089211"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089212">.</span><span class="ident" id="6089213">parseCommClause</span><span class="op" id="6089228">(</span><span class="op" id="6089229">)</span><span class="op" id="6089230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6089233">}</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089236">rbrace</span>&nbsp;<span class="op" id="6089243">:=</span>&nbsp;<span class="ident" id="6089246"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089247">.</span><span class="ident" id="6089248">expect</span><span class="op" id="6089254">(</span><span class="ident" id="6089255"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089260">.</span><span class="ident" id="6089261">RBRACE</span><span class="op" id="6089267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089270"><a href="/go/parser/parser.go.html#6088950">p</a></span><span class="op" id="6089271">.</span><span class="ident" id="6089272">expectSemi</span><span class="op" id="6089282">(</span><span class="op" id="6089283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089286">body</span>&nbsp;<span class="op" id="6089291">:=</span>&nbsp;<span class="op" id="6089294">&amp;</span><span class="ident" id="6089295"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089298">.</span><span class="ident" id="6089299">BlockStmt</span><span class="op" id="6089308">{</span><span class="ident" id="6089309">Lbrace</span><span class="op" id="6089315">:</span>&nbsp;<span class="ident" id="6089317"><a href="/go/parser/parser.go.html#6089082">lbrace</a></span><span class="op" id="6089323">,</span>&nbsp;<span class="ident" id="6089325">List</span><span class="op" id="6089329">:</span>&nbsp;<span class="ident" id="6089331"><a href="/go/parser/parser.go.html#6089120">list</a></span><span class="op" id="6089335">,</span>&nbsp;<span class="ident" id="6089337">Rbrace</span><span class="op" id="6089343">:</span>&nbsp;<span class="ident" id="6089345"><a href="/go/parser/parser.go.html#6089236">rbrace</a></span><span class="op" id="6089351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089355">return</span>&nbsp;<span class="op" id="6089362">&amp;</span><span class="ident" id="6089363"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089366">.</span><span class="ident" id="6089367">SelectStmt</span><span class="op" id="6089377">{</span><span class="ident" id="6089378">Select</span><span class="op" id="6089384">:</span>&nbsp;<span class="ident" id="6089386"><a href="/go/parser/parser.go.html#6089051">pos</a></span><span class="op" id="6089389">,</span>&nbsp;<span class="ident" id="6089391">Body</span><span class="op" id="6089395">:</span>&nbsp;<span class="ident" id="6089397"><a href="/go/parser/parser.go.html#6089286">body</a></span><span class="op" id="6089401">}</span><br>
<span class="lineno">2030</span><span class="op" id="6089403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6089406">func</span>&nbsp;<span class="op" id="6089411">(</span><span class="ident" id="6089412">p</span>&nbsp;<span class="op" id="6089414">*</span><span class="ident" id="6089415"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6089421">)</span>&nbsp;<span class="ident" id="6089423">parseForStmt</span><span class="op" id="6089435">(</span><span class="op" id="6089436">)</span>&nbsp;<span class="ident" id="6089438"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089441">.</span><span class="ident" id="6089442">Stmt</span>&nbsp;<span class="op" id="6089447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089450">if</span>&nbsp;<span class="ident" id="6089453"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089454">.</span><span class="ident" id="6089455">trace</span>&nbsp;<span class="op" id="6089461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089465">defer</span>&nbsp;<span class="ident" id="6089471"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6089473">(</span><span class="ident" id="6089474"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6089479">(</span><span class="ident" id="6089480"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089481">,</span>&nbsp;<span class="string" id="6089483">&#34;ForStmt&#34;</span><span class="op" id="6089492">)</span><span class="op" id="6089493">)</span><br>
<span class="lineno">2035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6089496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089500">pos</span>&nbsp;<span class="op" id="6089504">:=</span>&nbsp;<span class="ident" id="6089507"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089508">.</span><span class="ident" id="6089509">expect</span><span class="op" id="6089515">(</span><span class="ident" id="6089516"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089521">.</span><span class="ident" id="6089522">FOR</span><span class="op" id="6089525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089528"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089529">.</span><span class="ident" id="6089530">openScope</span><span class="op" id="6089539">(</span><span class="op" id="6089540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089543">defer</span>&nbsp;<span class="ident" id="6089549"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089550">.</span><span class="ident" id="6089551">closeScope</span><span class="op" id="6089561">(</span><span class="op" id="6089562">)</span><br>
<span class="lineno">2040</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089566">var</span>&nbsp;<span class="ident" id="6089570">s1</span><span class="op" id="6089572">,</span>&nbsp;<span class="ident" id="6089574">s2</span><span class="op" id="6089576">,</span>&nbsp;<span class="ident" id="6089578">s3</span>&nbsp;<span class="ident" id="6089581"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089584">.</span><span class="ident" id="6089585">Stmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089591">var</span>&nbsp;<span class="ident" id="6089595">isRange</span>&nbsp;<span class="builtintype" id="6089603">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089609">if</span>&nbsp;<span class="ident" id="6089612"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089613">.</span><span class="ident" id="6089614">tok</span>&nbsp;<span class="op" id="6089618">!=</span>&nbsp;<span class="ident" id="6089621"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089626">.</span><span class="ident" id="6089627">LBRACE</span>&nbsp;<span class="op" id="6089634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089638">prevLev</span>&nbsp;<span class="op" id="6089646">:=</span>&nbsp;<span class="ident" id="6089649"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089650">.</span><span class="ident" id="6089651">exprLev</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089661"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089662">.</span><span class="ident" id="6089663">exprLev</span>&nbsp;<span class="op" id="6089671">=</span>&nbsp;<span class="op" id="6089673">-</span><span class="num" id="6089674">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089678">if</span>&nbsp;<span class="ident" id="6089681"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089682">.</span><span class="ident" id="6089683">tok</span>&nbsp;<span class="op" id="6089687">!=</span>&nbsp;<span class="ident" id="6089690"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089695">.</span><span class="ident" id="6089696">SEMICOLON</span>&nbsp;<span class="op" id="6089706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6089711">if</span>&nbsp;<span class="ident" id="6089714"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089715">.</span><span class="ident" id="6089716">tok</span>&nbsp;<span class="op" id="6089720">==</span>&nbsp;<span class="ident" id="6089723"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089728">.</span><span class="ident" id="6089729">RANGE</span>&nbsp;<span class="op" id="6089735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6089741">//&nbsp;&#34;for&nbsp;range&nbsp;x&#34;&nbsp;(nil&nbsp;lhs&nbsp;in&nbsp;assignment)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089786">pos</span>&nbsp;<span class="op" id="6089790">:=</span>&nbsp;<span class="ident" id="6089793"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089794">.</span><span class="ident" id="6089795">pos</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089803"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089804">.</span><span class="ident" id="6089805">next</span><span class="op" id="6089809">(</span><span class="op" id="6089810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089816">y</span>&nbsp;<span class="op" id="6089818">:=</span>&nbsp;<span class="op" id="6089821">[</span><span class="op" id="6089822">]</span><span class="ident" id="6089823"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089826">.</span><span class="ident" id="6089827">Expr</span><span class="op" id="6089831">{</span><span class="op" id="6089832">&amp;</span><span class="ident" id="6089833"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089836">.</span><span class="ident" id="6089837">UnaryExpr</span><span class="op" id="6089846">{</span><span class="ident" id="6089847">OpPos</span><span class="op" id="6089852">:</span>&nbsp;<span class="ident" id="6089854"><a href="/go/parser/parser.go.html#6089786">pos</a></span><span class="op" id="6089857">,</span>&nbsp;<span class="ident" id="6089859">Op</span><span class="op" id="6089861">:</span>&nbsp;<span class="ident" id="6089863"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6089868">.</span><span class="ident" id="6089869">RANGE</span><span class="op" id="6089874">,</span>&nbsp;<span class="ident" id="6089876">X</span><span class="op" id="6089877">:</span>&nbsp;<span class="ident" id="6089879"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089880">.</span><span class="ident" id="6089881">parseRhs</span><span class="op" id="6089889">(</span><span class="op" id="6089890">)</span><span class="op" id="6089891">}</span><span class="op" id="6089892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089898"><a href="/go/parser/parser.go.html#6089574">s2</a></span>&nbsp;<span class="op" id="6089901">=</span>&nbsp;<span class="op" id="6089903">&amp;</span><span class="ident" id="6089904"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6089907">.</span><span class="ident" id="6089908">AssignStmt</span><span class="op" id="6089918">{</span><span class="ident" id="6089919">Rhs</span><span class="op" id="6089922">:</span>&nbsp;<span class="ident" id="6089924"><a href="/go/parser/parser.go.html#6089816">y</a></span><span class="op" id="6089925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089931"><a href="/go/parser/parser.go.html#6089595">isRange</a></span>&nbsp;<span class="op" id="6089939">=</span>&nbsp;<span class="ident" id="6089941">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6089949">}</span>&nbsp;<span class="keyword" id="6089951">else</span>&nbsp;<span class="op" id="6089956">{</span><br>
<span class="lineno">2055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6089962"><a href="/go/parser/parser.go.html#6089574">s2</a></span><span class="op" id="6089964">,</span>&nbsp;<span class="ident" id="6089966"><a href="/go/parser/parser.go.html#6089595">isRange</a></span>&nbsp;<span class="op" id="6089974">=</span>&nbsp;<span class="ident" id="6089976"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6089977">.</span><span class="ident" id="6089978">parseSimpleStmt</span><span class="op" id="6089993">(</span><span class="ident" id="6089994"><a href="/go/parser/parser.go.html#6079317">rangeOk</a></span><span class="op" id="6090001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090014">if</span>&nbsp;<span class="op" id="6090017">!</span><span class="ident" id="6090018"><a href="/go/parser/parser.go.html#6089595">isRange</a></span>&nbsp;<span class="op" id="6090026">&amp;&amp;</span>&nbsp;<span class="ident" id="6090029"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090030">.</span><span class="ident" id="6090031">tok</span>&nbsp;<span class="op" id="6090035">==</span>&nbsp;<span class="ident" id="6090038"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6090043">.</span><span class="ident" id="6090044">SEMICOLON</span>&nbsp;<span class="op" id="6090054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090059"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090060">.</span><span class="ident" id="6090061">next</span><span class="op" id="6090065">(</span><span class="op" id="6090066">)</span><br>
<span class="lineno">2060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090071"><a href="/go/parser/parser.go.html#6089570">s1</a></span>&nbsp;<span class="op" id="6090074">=</span>&nbsp;<span class="ident" id="6090076"><a href="/go/parser/parser.go.html#6089574">s2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090082"><a href="/go/parser/parser.go.html#6089574">s2</a></span>&nbsp;<span class="op" id="6090085">=</span>&nbsp;<span class="ident" id="6090087">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090094">if</span>&nbsp;<span class="ident" id="6090097"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090098">.</span><span class="ident" id="6090099">tok</span>&nbsp;<span class="op" id="6090103">!=</span>&nbsp;<span class="ident" id="6090106"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6090111">.</span><span class="ident" id="6090112">SEMICOLON</span>&nbsp;<span class="op" id="6090122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090128"><a href="/go/parser/parser.go.html#6089574">s2</a></span><span class="op" id="6090130">,</span>&nbsp;<span class="ident" id="6090132">_</span>&nbsp;<span class="op" id="6090134">=</span>&nbsp;<span class="ident" id="6090136"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090137">.</span><span class="ident" id="6090138">parseSimpleStmt</span><span class="op" id="6090153">(</span><span class="ident" id="6090154"><a href="/go/parser/parser.go.html#6079294">basic</a></span><span class="op" id="6090159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090164">}</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090169"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090170">.</span><span class="ident" id="6090171">expectSemi</span><span class="op" id="6090181">(</span><span class="op" id="6090182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090187">if</span>&nbsp;<span class="ident" id="6090190"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090191">.</span><span class="ident" id="6090192">tok</span>&nbsp;<span class="op" id="6090196">!=</span>&nbsp;<span class="ident" id="6090199"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6090204">.</span><span class="ident" id="6090205">LBRACE</span>&nbsp;<span class="op" id="6090212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090218"><a href="/go/parser/parser.go.html#6089578">s3</a></span><span class="op" id="6090220">,</span>&nbsp;<span class="ident" id="6090222">_</span>&nbsp;<span class="op" id="6090224">=</span>&nbsp;<span class="ident" id="6090226"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090227">.</span><span class="ident" id="6090228">parseSimpleStmt</span><span class="op" id="6090243">(</span><span class="ident" id="6090244"><a href="/go/parser/parser.go.html#6079294">basic</a></span><span class="op" id="6090249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090258">}</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090262"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090263">.</span><span class="ident" id="6090264">exprLev</span>&nbsp;<span class="op" id="6090272">=</span>&nbsp;<span class="ident" id="6090274"><a href="/go/parser/parser.go.html#6089638">prevLev</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090287">body</span>&nbsp;<span class="op" id="6090292">:=</span>&nbsp;<span class="ident" id="6090295"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090296">.</span><span class="ident" id="6090297">parseBlockStmt</span><span class="op" id="6090311">(</span><span class="op" id="6090312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090315"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090316">.</span><span class="ident" id="6090317">expectSemi</span><span class="op" id="6090327">(</span><span class="op" id="6090328">)</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090332">if</span>&nbsp;<span class="ident" id="6090335"><a href="/go/parser/parser.go.html#6089595">isRange</a></span>&nbsp;<span class="op" id="6090343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090347">as</span>&nbsp;<span class="op" id="6090350">:=</span>&nbsp;<span class="ident" id="6090353"><a href="/go/parser/parser.go.html#6089574">s2</a></span><span class="op" id="6090355">.</span><span class="op" id="6090356">(</span><span class="op" id="6090357">*</span><span class="ident" id="6090358"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6090361">.</span><span class="ident" id="6090362">AssignStmt</span><span class="op" id="6090372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090376">//&nbsp;check&nbsp;lhs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090391">var</span>&nbsp;<span class="ident" id="6090395">key</span><span class="op" id="6090398">,</span>&nbsp;<span class="ident" id="6090400">value</span>&nbsp;<span class="ident" id="6090406"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6090409">.</span><span class="ident" id="6090410">Expr</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090417">switch</span>&nbsp;<span class="builtinfunc" id="6090424">len</span><span class="op" id="6090427">(</span><span class="ident" id="6090428"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090430">.</span><span class="ident" id="6090431">Lhs</span><span class="op" id="6090434">)</span>&nbsp;<span class="op" id="6090436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090440">case</span>&nbsp;<span class="num" id="6090445">0</span><span class="op" id="6090446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090451">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090470">case</span>&nbsp;<span class="num" id="6090475">1</span><span class="op" id="6090476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090481"><a href="/go/parser/parser.go.html#6090395">key</a></span>&nbsp;<span class="op" id="6090485">=</span>&nbsp;<span class="ident" id="6090487"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090489">.</span><span class="ident" id="6090490">Lhs</span><span class="op" id="6090493">[</span><span class="num" id="6090494">0</span><span class="op" id="6090495">]</span><br>
<span class="lineno">2085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090499">case</span>&nbsp;<span class="num" id="6090504">2</span><span class="op" id="6090505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090510"><a href="/go/parser/parser.go.html#6090395">key</a></span><span class="op" id="6090513">,</span>&nbsp;<span class="ident" id="6090515"><a href="/go/parser/parser.go.html#6090400">value</a></span>&nbsp;<span class="op" id="6090521">=</span>&nbsp;<span class="ident" id="6090523"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090525">.</span><span class="ident" id="6090526">Lhs</span><span class="op" id="6090529">[</span><span class="num" id="6090530">0</span><span class="op" id="6090531">]</span><span class="op" id="6090532">,</span>&nbsp;<span class="ident" id="6090534"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090536">.</span><span class="ident" id="6090537">Lhs</span><span class="op" id="6090540">[</span><span class="num" id="6090541">1</span><span class="op" id="6090542">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090546">default</span><span class="op" id="6090553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090558"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090559">.</span><span class="ident" id="6090560">errorExpected</span><span class="op" id="6090573">(</span><span class="ident" id="6090574"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090576">.</span><span class="ident" id="6090577">Lhs</span><span class="op" id="6090580">[</span><span class="builtinfunc" id="6090581">len</span><span class="op" id="6090584">(</span><span class="ident" id="6090585"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090587">.</span><span class="ident" id="6090588">Lhs</span><span class="op" id="6090591">)</span><span class="op" id="6090592">-</span><span class="num" id="6090593">1</span><span class="op" id="6090594">]</span><span class="op" id="6090595">.</span><span class="ident" id="6090596">Pos</span><span class="op" id="6090599">(</span><span class="op" id="6090600">)</span><span class="op" id="6090601">,</span>&nbsp;<span class="string" id="6090603">&#34;at&nbsp;most&nbsp;2&nbsp;expressions&#34;</span><span class="op" id="6090626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090631">return</span>&nbsp;<span class="op" id="6090638">&amp;</span><span class="ident" id="6090639"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6090642">.</span><span class="ident" id="6090643">BadStmt</span><span class="op" id="6090650">{</span><span class="ident" id="6090651">From</span><span class="op" id="6090655">:</span>&nbsp;<span class="ident" id="6090657"><a href="/go/parser/parser.go.html#6089500">pos</a></span><span class="op" id="6090660">,</span>&nbsp;<span class="ident" id="6090662">To</span><span class="op" id="6090664">:</span>&nbsp;<span class="ident" id="6090666"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6090667">.</span><span class="ident" id="6090668">safePos</span><span class="op" id="6090675">(</span><span class="ident" id="6090676"><a href="/go/parser/parser.go.html#6090287">body</a></span><span class="op" id="6090680">.</span><span class="ident" id="6090681">End</span><span class="op" id="6090684">(</span><span class="op" id="6090685">)</span><span class="op" id="6090686">)</span><span class="op" id="6090687">}</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090695">//&nbsp;parseSimpleStmt&nbsp;returned&nbsp;a&nbsp;right-hand&nbsp;side&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090748">//&nbsp;is&nbsp;a&nbsp;single&nbsp;unary&nbsp;expression&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;range&nbsp;x&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090804">x</span>&nbsp;<span class="op" id="6090806">:=</span>&nbsp;<span class="ident" id="6090809"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090811">.</span><span class="ident" id="6090812">Rhs</span><span class="op" id="6090815">[</span><span class="num" id="6090816">0</span><span class="op" id="6090817">]</span><span class="op" id="6090818">.</span><span class="op" id="6090819">(</span><span class="op" id="6090820">*</span><span class="ident" id="6090821"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6090824">.</span><span class="ident" id="6090825">UnaryExpr</span><span class="op" id="6090834">)</span><span class="op" id="6090835">.</span><span class="ident" id="6090836">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6090840">return</span>&nbsp;<span class="op" id="6090847">&amp;</span><span class="ident" id="6090848"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6090851">.</span><span class="ident" id="6090852">RangeStmt</span><span class="op" id="6090861">{</span><br>
<span class="lineno">2095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090866">For</span><span class="op" id="6090869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6090874"><a href="/go/parser/parser.go.html#6089500">pos</a></span><span class="op" id="6090877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090882">Key</span><span class="op" id="6090885">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6090890"><a href="/go/parser/parser.go.html#6090395">key</a></span><span class="op" id="6090893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090898">Value</span><span class="op" id="6090903">:</span>&nbsp;&nbsp;<span class="ident" id="6090906"><a href="/go/parser/parser.go.html#6090400">value</a></span><span class="op" id="6090911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090916">TokPos</span><span class="op" id="6090922">:</span>&nbsp;<span class="ident" id="6090924"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090926">.</span><span class="ident" id="6090927">TokPos</span><span class="op" id="6090933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090938">Tok</span><span class="op" id="6090941">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6090946"><a href="/go/parser/parser.go.html#6090347">as</a></span><span class="op" id="6090948">.</span><span class="ident" id="6090949">Tok</span><span class="op" id="6090952">,</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090957">X</span><span class="op" id="6090958">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6090965"><a href="/go/parser/parser.go.html#6090804">x</a></span><span class="op" id="6090966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6090971">Body</span><span class="op" id="6090975">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6090979"><a href="/go/parser/parser.go.html#6090287">body</a></span><span class="op" id="6090983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6090990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6090994">//&nbsp;regular&nbsp;for&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091020">return</span>&nbsp;<span class="op" id="6091027">&amp;</span><span class="ident" id="6091028"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6091031">.</span><span class="ident" id="6091032">ForStmt</span><span class="op" id="6091039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091043">For</span><span class="op" id="6091046">:</span>&nbsp;&nbsp;<span class="ident" id="6091049"><a href="/go/parser/parser.go.html#6089500">pos</a></span><span class="op" id="6091052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091056">Init</span><span class="op" id="6091060">:</span>&nbsp;<span class="ident" id="6091062"><a href="/go/parser/parser.go.html#6089570">s1</a></span><span class="op" id="6091064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091068">Cond</span><span class="op" id="6091072">:</span>&nbsp;<span class="ident" id="6091074"><a href="/go/parser/parser.go.html#6089412">p</a></span><span class="op" id="6091075">.</span><span class="ident" id="6091076">makeExpr</span><span class="op" id="6091084">(</span><span class="ident" id="6091085"><a href="/go/parser/parser.go.html#6089574">s2</a></span><span class="op" id="6091087">,</span>&nbsp;<span class="string" id="6091089">&#34;boolean&nbsp;or&nbsp;range&nbsp;expression&#34;</span><span class="op" id="6091118">)</span><span class="op" id="6091119">,</span><br>
<span class="lineno">2110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091123">Post</span><span class="op" id="6091127">:</span>&nbsp;<span class="ident" id="6091129"><a href="/go/parser/parser.go.html#6089578">s3</a></span><span class="op" id="6091131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091135">Body</span><span class="op" id="6091139">:</span>&nbsp;<span class="ident" id="6091141"><a href="/go/parser/parser.go.html#6090287">body</a></span><span class="op" id="6091145">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6091148">}</span><br>
<span class="lineno"></span><span class="op" id="6091150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2115</span><span class="keyword" id="6091153">func</span>&nbsp;<span class="op" id="6091158">(</span><span class="ident" id="6091159">p</span>&nbsp;<span class="op" id="6091161">*</span><span class="ident" id="6091162"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6091168">)</span>&nbsp;<span class="ident" id="6091170">parseStmt</span><span class="op" id="6091179">(</span><span class="op" id="6091180">)</span>&nbsp;<span class="op" id="6091182">(</span><span class="ident" id="6091183">s</span>&nbsp;<span class="ident" id="6091185"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6091188">.</span><span class="ident" id="6091189">Stmt</span><span class="op" id="6091193">)</span>&nbsp;<span class="op" id="6091195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091198">if</span>&nbsp;<span class="ident" id="6091201"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091202">.</span><span class="ident" id="6091203">trace</span>&nbsp;<span class="op" id="6091209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091213">defer</span>&nbsp;<span class="ident" id="6091219"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6091221">(</span><span class="ident" id="6091222"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6091227">(</span><span class="ident" id="6091228"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091229">,</span>&nbsp;<span class="string" id="6091231">&#34;Statement&#34;</span><span class="op" id="6091242">)</span><span class="op" id="6091243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6091246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091250">switch</span>&nbsp;<span class="ident" id="6091257"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091258">.</span><span class="ident" id="6091259">tok</span>&nbsp;<span class="op" id="6091263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091266">case</span>&nbsp;<span class="ident" id="6091271"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091276">.</span><span class="ident" id="6091277">CONST</span><span class="op" id="6091282">,</span>&nbsp;<span class="ident" id="6091284"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091289">.</span><span class="ident" id="6091290">TYPE</span><span class="op" id="6091294">,</span>&nbsp;<span class="ident" id="6091296"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091301">.</span><span class="ident" id="6091302">VAR</span><span class="op" id="6091305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091309"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6091311">=</span>&nbsp;<span class="op" id="6091313">&amp;</span><span class="ident" id="6091314"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6091317">.</span><span class="ident" id="6091318">DeclStmt</span><span class="op" id="6091326">{</span><span class="ident" id="6091327">Decl</span><span class="op" id="6091331">:</span>&nbsp;<span class="ident" id="6091333"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091334">.</span><span class="ident" id="6091335">parseDecl</span><span class="op" id="6091344">(</span><span class="ident" id="6091345"><a href="/go/parser/parser.go.html#6050033">syncStmt</a></span><span class="op" id="6091353">)</span><span class="op" id="6091354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091357">case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091364">//&nbsp;tokens&nbsp;that&nbsp;may&nbsp;start&nbsp;an&nbsp;expression</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091405"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091410">.</span><span class="ident" id="6091411">IDENT</span><span class="op" id="6091416">,</span>&nbsp;<span class="ident" id="6091418"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091423">.</span><span class="ident" id="6091424">INT</span><span class="op" id="6091427">,</span>&nbsp;<span class="ident" id="6091429"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091434">.</span><span class="ident" id="6091435">FLOAT</span><span class="op" id="6091440">,</span>&nbsp;<span class="ident" id="6091442"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091447">.</span><span class="ident" id="6091448">IMAG</span><span class="op" id="6091452">,</span>&nbsp;<span class="ident" id="6091454"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091459">.</span><span class="ident" id="6091460">CHAR</span><span class="op" id="6091464">,</span>&nbsp;<span class="ident" id="6091466"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091471">.</span><span class="ident" id="6091472">STRING</span><span class="op" id="6091478">,</span>&nbsp;<span class="ident" id="6091480"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091485">.</span><span class="ident" id="6091486">FUNC</span><span class="op" id="6091490">,</span>&nbsp;<span class="ident" id="6091492"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091497">.</span><span class="ident" id="6091498">LPAREN</span><span class="op" id="6091504">,</span>&nbsp;<span class="comment" id="6091506">//&nbsp;operands</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091520"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091525">.</span><span class="ident" id="6091526">LBRACK</span><span class="op" id="6091532">,</span>&nbsp;<span class="ident" id="6091534"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091539">.</span><span class="ident" id="6091540">STRUCT</span><span class="op" id="6091546">,</span>&nbsp;<span class="comment" id="6091548">//&nbsp;composite&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091569"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091574">.</span><span class="ident" id="6091575">ADD</span><span class="op" id="6091578">,</span>&nbsp;<span class="ident" id="6091580"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091585">.</span><span class="ident" id="6091586">SUB</span><span class="op" id="6091589">,</span>&nbsp;<span class="ident" id="6091591"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091596">.</span><span class="ident" id="6091597">MUL</span><span class="op" id="6091600">,</span>&nbsp;<span class="ident" id="6091602"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091607">.</span><span class="ident" id="6091608">AND</span><span class="op" id="6091611">,</span>&nbsp;<span class="ident" id="6091613"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091618">.</span><span class="ident" id="6091619">XOR</span><span class="op" id="6091622">,</span>&nbsp;<span class="ident" id="6091624"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091629">.</span><span class="ident" id="6091630">ARROW</span><span class="op" id="6091635">,</span>&nbsp;<span class="ident" id="6091637"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091642">.</span><span class="ident" id="6091643">NOT</span><span class="op" id="6091646">:</span>&nbsp;<span class="comment" id="6091648">//&nbsp;unary&nbsp;operators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091669"><a href="/go/parser/parser.go.html#6091183">s</a></span><span class="op" id="6091670">,</span>&nbsp;<span class="ident" id="6091672">_</span>&nbsp;<span class="op" id="6091674">=</span>&nbsp;<span class="ident" id="6091676"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091677">.</span><span class="ident" id="6091678">parseSimpleStmt</span><span class="op" id="6091693">(</span><span class="ident" id="6091694"><a href="/go/parser/parser.go.html#6079308">labelOk</a></span><span class="op" id="6091701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091705">//&nbsp;because&nbsp;of&nbsp;the&nbsp;required&nbsp;look-ahead,&nbsp;labeled&nbsp;statements&nbsp;are</span><br>
<span class="lineno">2130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091769">//&nbsp;parsed&nbsp;by&nbsp;parseSimpleStmt&nbsp;-&nbsp;don&#39;t&nbsp;expect&nbsp;a&nbsp;semicolon&nbsp;after</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6091833">//&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091843">if</span>&nbsp;<span class="ident" id="6091846">_</span><span class="op" id="6091847">,</span>&nbsp;<span class="ident" id="6091849">isLabeledStmt</span>&nbsp;<span class="op" id="6091863">:=</span>&nbsp;<span class="ident" id="6091866"><a href="/go/parser/parser.go.html#6091183">s</a></span><span class="op" id="6091867">.</span><span class="op" id="6091868">(</span><span class="op" id="6091869">*</span><span class="ident" id="6091870"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6091873">.</span><span class="ident" id="6091874">LabeledStmt</span><span class="op" id="6091885">)</span><span class="op" id="6091886">;</span>&nbsp;<span class="op" id="6091888">!</span><span class="ident" id="6091889"><a href="/go/parser/parser.go.html#6091849">isLabeledStmt</a></span>&nbsp;<span class="op" id="6091903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091908"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091909">.</span><span class="ident" id="6091910">expectSemi</span><span class="op" id="6091920">(</span><span class="op" id="6091921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6091925">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091928">case</span>&nbsp;<span class="ident" id="6091933"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091938">.</span><span class="ident" id="6091939">GO</span><span class="op" id="6091941">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091945"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6091947">=</span>&nbsp;<span class="ident" id="6091949"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091950">.</span><span class="ident" id="6091951">parseGoStmt</span><span class="op" id="6091962">(</span><span class="op" id="6091963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6091966">case</span>&nbsp;<span class="ident" id="6091971"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6091976">.</span><span class="ident" id="6091977">DEFER</span><span class="op" id="6091982">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6091986"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6091988">=</span>&nbsp;<span class="ident" id="6091990"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6091991">.</span><span class="ident" id="6091992">parseDeferStmt</span><span class="op" id="6092006">(</span><span class="op" id="6092007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092010">case</span>&nbsp;<span class="ident" id="6092015"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092020">.</span><span class="ident" id="6092021">RETURN</span><span class="op" id="6092027">:</span><br>
<span class="lineno">2140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092031"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092033">=</span>&nbsp;<span class="ident" id="6092035"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092036">.</span><span class="ident" id="6092037">parseReturnStmt</span><span class="op" id="6092052">(</span><span class="op" id="6092053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092056">case</span>&nbsp;<span class="ident" id="6092061"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092066">.</span><span class="ident" id="6092067">BREAK</span><span class="op" id="6092072">,</span>&nbsp;<span class="ident" id="6092074"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092079">.</span><span class="ident" id="6092080">CONTINUE</span><span class="op" id="6092088">,</span>&nbsp;<span class="ident" id="6092090"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092095">.</span><span class="ident" id="6092096">GOTO</span><span class="op" id="6092100">,</span>&nbsp;<span class="ident" id="6092102"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092107">.</span><span class="ident" id="6092108">FALLTHROUGH</span><span class="op" id="6092119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092123"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092125">=</span>&nbsp;<span class="ident" id="6092127"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092128">.</span><span class="ident" id="6092129">parseBranchStmt</span><span class="op" id="6092144">(</span><span class="ident" id="6092145"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092146">.</span><span class="ident" id="6092147">tok</span><span class="op" id="6092150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092153">case</span>&nbsp;<span class="ident" id="6092158"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092163">.</span><span class="ident" id="6092164">LBRACE</span><span class="op" id="6092170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092174"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092176">=</span>&nbsp;<span class="ident" id="6092178"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092179">.</span><span class="ident" id="6092180">parseBlockStmt</span><span class="op" id="6092194">(</span><span class="op" id="6092195">)</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092199"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092200">.</span><span class="ident" id="6092201">expectSemi</span><span class="op" id="6092211">(</span><span class="op" id="6092212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092215">case</span>&nbsp;<span class="ident" id="6092220"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092225">.</span><span class="ident" id="6092226">IF</span><span class="op" id="6092228">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092232"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092234">=</span>&nbsp;<span class="ident" id="6092236"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092237">.</span><span class="ident" id="6092238">parseIfStmt</span><span class="op" id="6092249">(</span><span class="op" id="6092250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092253">case</span>&nbsp;<span class="ident" id="6092258"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092263">.</span><span class="ident" id="6092264">SWITCH</span><span class="op" id="6092270">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092274"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092276">=</span>&nbsp;<span class="ident" id="6092278"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092279">.</span><span class="ident" id="6092280">parseSwitchStmt</span><span class="op" id="6092295">(</span><span class="op" id="6092296">)</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092299">case</span>&nbsp;<span class="ident" id="6092304"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092309">.</span><span class="ident" id="6092310">SELECT</span><span class="op" id="6092316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092320"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092322">=</span>&nbsp;<span class="ident" id="6092324"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092325">.</span><span class="ident" id="6092326">parseSelectStmt</span><span class="op" id="6092341">(</span><span class="op" id="6092342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092345">case</span>&nbsp;<span class="ident" id="6092350"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092355">.</span><span class="ident" id="6092356">FOR</span><span class="op" id="6092359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092363"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092365">=</span>&nbsp;<span class="ident" id="6092367"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092368">.</span><span class="ident" id="6092369">parseForStmt</span><span class="op" id="6092381">(</span><span class="op" id="6092382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092385">case</span>&nbsp;<span class="ident" id="6092390"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092395">.</span><span class="ident" id="6092396">SEMICOLON</span><span class="op" id="6092405">:</span><br>
<span class="lineno">2155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092409"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092411">=</span>&nbsp;<span class="op" id="6092413">&amp;</span><span class="ident" id="6092414"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6092417">.</span><span class="ident" id="6092418">EmptyStmt</span><span class="op" id="6092427">{</span><span class="ident" id="6092428">Semicolon</span><span class="op" id="6092437">:</span>&nbsp;<span class="ident" id="6092439"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092440">.</span><span class="ident" id="6092441">pos</span><span class="op" id="6092444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092448"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092449">.</span><span class="ident" id="6092450">next</span><span class="op" id="6092454">(</span><span class="op" id="6092455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092458">case</span>&nbsp;<span class="ident" id="6092463"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092468">.</span><span class="ident" id="6092469">RBRACE</span><span class="op" id="6092475">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6092479">//&nbsp;a&nbsp;semicolon&nbsp;may&nbsp;be&nbsp;omitted&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#34;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092532"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092534">=</span>&nbsp;<span class="op" id="6092536">&amp;</span><span class="ident" id="6092537"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6092540">.</span><span class="ident" id="6092541">EmptyStmt</span><span class="op" id="6092550">{</span><span class="ident" id="6092551">Semicolon</span><span class="op" id="6092560">:</span>&nbsp;<span class="ident" id="6092562"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092563">.</span><span class="ident" id="6092564">pos</span><span class="op" id="6092567">}</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092570">default</span><span class="op" id="6092577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6092581">//&nbsp;no&nbsp;statement&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092605">pos</span>&nbsp;<span class="op" id="6092609">:=</span>&nbsp;<span class="ident" id="6092612"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092613">.</span><span class="ident" id="6092614">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092620"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092621">.</span><span class="ident" id="6092622">errorExpected</span><span class="op" id="6092635">(</span><span class="ident" id="6092636"><a href="/go/parser/parser.go.html#6092605">pos</a></span><span class="op" id="6092639">,</span>&nbsp;<span class="string" id="6092641">&#34;statement&#34;</span><span class="op" id="6092652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092656"><a href="/go/parser/parser.go.html#6050033">syncStmt</a></span><span class="op" id="6092664">(</span><span class="ident" id="6092665"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092666">)</span><br>
<span class="lineno">2165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6092670"><a href="/go/parser/parser.go.html#6091183">s</a></span>&nbsp;<span class="op" id="6092672">=</span>&nbsp;<span class="op" id="6092674">&amp;</span><span class="ident" id="6092675"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6092678">.</span><span class="ident" id="6092679">BadStmt</span><span class="op" id="6092686">{</span><span class="ident" id="6092687">From</span><span class="op" id="6092691">:</span>&nbsp;<span class="ident" id="6092693"><a href="/go/parser/parser.go.html#6092605">pos</a></span><span class="op" id="6092696">,</span>&nbsp;<span class="ident" id="6092698">To</span><span class="op" id="6092700">:</span>&nbsp;<span class="ident" id="6092702"><a href="/go/parser/parser.go.html#6091159">p</a></span><span class="op" id="6092703">.</span><span class="ident" id="6092704">pos</span><span class="op" id="6092707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6092710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092714">return</span><br>
<span class="lineno"></span><span class="op" id="6092721">}</span><br>
<span class="lineno">2170</span><br>
<span class="lineno"></span><span class="comment" id="6092724">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6092804">//&nbsp;Declarations</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6092821">type</span>&nbsp;<span class="ident" id="6092826">parseSpecFunction</span>&nbsp;<span class="keyword" id="6092844">func</span><span class="op" id="6092848">(</span><span class="ident" id="6092849">doc</span>&nbsp;<span class="op" id="6092853">*</span><span class="ident" id="6092854"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6092857">.</span><span class="ident" id="6092858">CommentGroup</span><span class="op" id="6092870">,</span>&nbsp;<span class="ident" id="6092872">keyword</span>&nbsp;<span class="ident" id="6092880"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6092885">.</span><span class="ident" id="6092886">Token</span><span class="op" id="6092891">,</span>&nbsp;<span class="ident" id="6092893">iota</span>&nbsp;<span class="builtintype" id="6092898">int</span><span class="op" id="6092901">)</span>&nbsp;<span class="ident" id="6092903"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6092906">.</span><span class="ident" id="6092907">Spec</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span><span class="keyword" id="6092913">func</span>&nbsp;<span class="ident" id="6092918">isValidImport</span><span class="op" id="6092931">(</span><span class="ident" id="6092932">lit</span>&nbsp;<span class="builtintype" id="6092936">string</span><span class="op" id="6092942">)</span>&nbsp;<span class="builtintype" id="6092944">bool</span>&nbsp;<span class="op" id="6092949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6092952">const</span>&nbsp;<span class="ident" id="6092958">illegalChars</span>&nbsp;<span class="op" id="6092971">=</span>&nbsp;<span class="string" id="6092973">`!&#34;#$%&amp;&#39;()*,:;&lt;=&gt;?[\]^{|}`</span>&nbsp;<span class="op" id="6093000">+</span>&nbsp;<span class="string" id="6093002">&#34;`\uFFFD&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093013">s</span><span class="op" id="6093014">,</span>&nbsp;<span class="ident" id="6093016">_</span>&nbsp;<span class="op" id="6093018">:=</span>&nbsp;<span class="ident" id="6093021"><a href="/go/parser/parser.go.html#6038068">strconv</a></span><span class="op" id="6093028">.</span><span class="ident" id="6093029">Unquote</span><span class="op" id="6093036">(</span><span class="ident" id="6093037"><a href="/go/parser/parser.go.html#6092932">lit</a></span><span class="op" id="6093040">)</span>&nbsp;<span class="comment" id="6093042">//&nbsp;go/scanner&nbsp;returns&nbsp;a&nbsp;legal&nbsp;string&nbsp;literal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093088">for</span>&nbsp;<span class="ident" id="6093092">_</span><span class="op" id="6093093">,</span>&nbsp;<span class="ident" id="6093095">r</span>&nbsp;<span class="op" id="6093097">:=</span>&nbsp;<span class="keyword" id="6093100">range</span>&nbsp;<span class="ident" id="6093106"><a href="/go/parser/parser.go.html#6093013">s</a></span>&nbsp;<span class="op" id="6093108">{</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093112">if</span>&nbsp;<span class="op" id="6093115">!</span><span class="ident" id="6093116"><a href="/go/parser/parser.go.html#6038090">unicode</a></span><span class="op" id="6093123">.</span><span class="ident" id="6093124">IsGraphic</span><span class="op" id="6093133">(</span><span class="ident" id="6093134"><a href="/go/parser/parser.go.html#6093095">r</a></span><span class="op" id="6093135">)</span>&nbsp;<span class="op" id="6093137">||</span>&nbsp;<span class="ident" id="6093140"><a href="/go/parser/parser.go.html#6038090">unicode</a></span><span class="op" id="6093147">.</span><span class="ident" id="6093148">IsSpace</span><span class="op" id="6093155">(</span><span class="ident" id="6093156"><a href="/go/parser/parser.go.html#6093095">r</a></span><span class="op" id="6093157">)</span>&nbsp;<span class="op" id="6093159">||</span>&nbsp;<span class="ident" id="6093162"><a href="/go/parser/parser.go.html#6038079">strings</a></span><span class="op" id="6093169">.</span><span class="ident" id="6093170">ContainsRune</span><span class="op" id="6093182">(</span><span class="ident" id="6093183"><a href="/go/parser/parser.go.html#6092958">illegalChars</a></span><span class="op" id="6093195">,</span>&nbsp;<span class="ident" id="6093197"><a href="/go/parser/parser.go.html#6093095">r</a></span><span class="op" id="6093198">)</span>&nbsp;<span class="op" id="6093200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093205">return</span>&nbsp;<span class="ident" id="6093212">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093226">return</span>&nbsp;<span class="ident" id="6093233"><a href="/go/parser/parser.go.html#6093013">s</a></span>&nbsp;<span class="op" id="6093235">!=</span>&nbsp;<span class="string" id="6093238">&#34;&#34;</span><br>
<span class="lineno">2185</span><span class="op" id="6093241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6093244">func</span>&nbsp;<span class="op" id="6093249">(</span><span class="ident" id="6093250">p</span>&nbsp;<span class="op" id="6093252">*</span><span class="ident" id="6093253"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6093259">)</span>&nbsp;<span class="ident" id="6093261">parseImportSpec</span><span class="op" id="6093276">(</span><span class="ident" id="6093277">doc</span>&nbsp;<span class="op" id="6093281">*</span><span class="ident" id="6093282"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093285">.</span><span class="ident" id="6093286">CommentGroup</span><span class="op" id="6093298">,</span>&nbsp;<span class="ident" id="6093300">_</span>&nbsp;<span class="ident" id="6093302"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093307">.</span><span class="ident" id="6093308">Token</span><span class="op" id="6093313">,</span>&nbsp;<span class="ident" id="6093315">_</span>&nbsp;<span class="builtintype" id="6093317">int</span><span class="op" id="6093320">)</span>&nbsp;<span class="ident" id="6093322"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093325">.</span><span class="ident" id="6093326">Spec</span>&nbsp;<span class="op" id="6093331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093334">if</span>&nbsp;<span class="ident" id="6093337"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093338">.</span><span class="ident" id="6093339">trace</span>&nbsp;<span class="op" id="6093345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093349">defer</span>&nbsp;<span class="ident" id="6093355"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6093357">(</span><span class="ident" id="6093358"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6093363">(</span><span class="ident" id="6093364"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093365">,</span>&nbsp;<span class="string" id="6093367">&#34;ImportSpec&#34;</span><span class="op" id="6093379">)</span><span class="op" id="6093380">)</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093387">var</span>&nbsp;<span class="ident" id="6093391">ident</span>&nbsp;<span class="op" id="6093397">*</span><span class="ident" id="6093398"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093401">.</span><span class="ident" id="6093402">Ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093409">switch</span>&nbsp;<span class="ident" id="6093416"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093417">.</span><span class="ident" id="6093418">tok</span>&nbsp;<span class="op" id="6093422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093425">case</span>&nbsp;<span class="ident" id="6093430"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093435">.</span><span class="ident" id="6093436">PERIOD</span><span class="op" id="6093442">:</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093446"><a href="/go/parser/parser.go.html#6093391">ident</a></span>&nbsp;<span class="op" id="6093452">=</span>&nbsp;<span class="op" id="6093454">&amp;</span><span class="ident" id="6093455"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093458">.</span><span class="ident" id="6093459">Ident</span><span class="op" id="6093464">{</span><span class="ident" id="6093465">NamePos</span><span class="op" id="6093472">:</span>&nbsp;<span class="ident" id="6093474"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093475">.</span><span class="ident" id="6093476">pos</span><span class="op" id="6093479">,</span>&nbsp;<span class="ident" id="6093481">Name</span><span class="op" id="6093485">:</span>&nbsp;<span class="string" id="6093487">&#34;.&#34;</span><span class="op" id="6093490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093494"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093495">.</span><span class="ident" id="6093496">next</span><span class="op" id="6093500">(</span><span class="op" id="6093501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093504">case</span>&nbsp;<span class="ident" id="6093509"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093514">.</span><span class="ident" id="6093515">IDENT</span><span class="op" id="6093520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093524"><a href="/go/parser/parser.go.html#6093391">ident</a></span>&nbsp;<span class="op" id="6093530">=</span>&nbsp;<span class="ident" id="6093532"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093533">.</span><span class="ident" id="6093534">parseIdent</span><span class="op" id="6093544">(</span><span class="op" id="6093545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093548">}</span><br>
<span class="lineno">2200</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093552">pos</span>&nbsp;<span class="op" id="6093556">:=</span>&nbsp;<span class="ident" id="6093559"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093560">.</span><span class="ident" id="6093561">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093566">var</span>&nbsp;<span class="ident" id="6093570">path</span>&nbsp;<span class="builtintype" id="6093575">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093583">if</span>&nbsp;<span class="ident" id="6093586"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093587">.</span><span class="ident" id="6093588">tok</span>&nbsp;<span class="op" id="6093592">==</span>&nbsp;<span class="ident" id="6093595"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093600">.</span><span class="ident" id="6093601">STRING</span>&nbsp;<span class="op" id="6093608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093612"><a href="/go/parser/parser.go.html#6093570">path</a></span>&nbsp;<span class="op" id="6093617">=</span>&nbsp;<span class="ident" id="6093619"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093620">.</span><span class="ident" id="6093621">lit</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6093627">if</span>&nbsp;<span class="op" id="6093630">!</span><span class="ident" id="6093631"><a href="/go/parser/parser.go.html#6092918">isValidImport</a></span><span class="op" id="6093644">(</span><span class="ident" id="6093645"><a href="/go/parser/parser.go.html#6093570">path</a></span><span class="op" id="6093649">)</span>&nbsp;<span class="op" id="6093651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093656"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093657">.</span><span class="builtintype" id="6093658">error</span><span class="op" id="6093663">(</span><span class="ident" id="6093664"><a href="/go/parser/parser.go.html#6093552">pos</a></span><span class="op" id="6093667">,</span>&nbsp;<span class="string" id="6093669">&#34;invalid&nbsp;import&nbsp;path:&nbsp;&#34;</span><span class="op" id="6093692">+</span><span class="ident" id="6093693"><a href="/go/parser/parser.go.html#6093570">path</a></span><span class="op" id="6093697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093705"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093706">.</span><span class="ident" id="6093707">next</span><span class="op" id="6093711">(</span><span class="op" id="6093712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093715">}</span>&nbsp;<span class="keyword" id="6093717">else</span>&nbsp;<span class="op" id="6093722">{</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093726"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093727">.</span><span class="ident" id="6093728">expect</span><span class="op" id="6093734">(</span><span class="ident" id="6093735"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093740">.</span><span class="ident" id="6093741">STRING</span><span class="op" id="6093747">)</span>&nbsp;<span class="comment" id="6093749">//&nbsp;use&nbsp;expect()&nbsp;error&nbsp;handling</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6093781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093784"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6093785">.</span><span class="ident" id="6093786">expectSemi</span><span class="op" id="6093796">(</span><span class="op" id="6093797">)</span>&nbsp;<span class="comment" id="6093799">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6093840">//&nbsp;collect&nbsp;imports</span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093860">spec</span>&nbsp;<span class="op" id="6093865">:=</span>&nbsp;<span class="op" id="6093868">&amp;</span><span class="ident" id="6093869"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093872">.</span><span class="ident" id="6093873">ImportSpec</span><span class="op" id="6093883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093887">Doc</span><span class="op" id="6093890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6093896"><a href="/go/parser/parser.go.html#6093277">doc</a></span><span class="op" id="6093899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093903">Name</span><span class="op" id="6093907">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6093912"><a href="/go/parser/parser.go.html#6093391">ident</a></span><span class="op" id="6093917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093921">Path</span><span class="op" id="6093925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6093930">&amp;</span><span class="ident" id="6093931"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6093934">.</span><span class="ident" id="6093935">BasicLit</span><span class="op" id="6093943">{</span><span class="ident" id="6093944">ValuePos</span><span class="op" id="6093952">:</span>&nbsp;<span class="ident" id="6093954"><a href="/go/parser/parser.go.html#6093552">pos</a></span><span class="op" id="6093957">,</span>&nbsp;<span class="ident" id="6093959">Kind</span><span class="op" id="6093963">:</span>&nbsp;<span class="ident" id="6093965"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6093970">.</span><span class="ident" id="6093971">STRING</span><span class="op" id="6093977">,</span>&nbsp;<span class="ident" id="6093979">Value</span><span class="op" id="6093984">:</span>&nbsp;<span class="ident" id="6093986"><a href="/go/parser/parser.go.html#6093570">path</a></span><span class="op" id="6093990">}</span><span class="op" id="6093991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6093995">Comment</span><span class="op" id="6094002">:</span>&nbsp;<span class="ident" id="6094004"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6094005">.</span><span class="ident" id="6094006">lineComment</span><span class="op" id="6094017">,</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094023"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6094024">.</span><span class="ident" id="6094025">imports</span>&nbsp;<span class="op" id="6094033">=</span>&nbsp;<span class="builtinfunc" id="6094035">append</span><span class="op" id="6094041">(</span><span class="ident" id="6094042"><a href="/go/parser/parser.go.html#6093250">p</a></span><span class="op" id="6094043">.</span><span class="ident" id="6094044">imports</span><span class="op" id="6094051">,</span>&nbsp;<span class="ident" id="6094053"><a href="/go/parser/parser.go.html#6093860">spec</a></span><span class="op" id="6094057">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094061">return</span>&nbsp;<span class="ident" id="6094068"><a href="/go/parser/parser.go.html#6093860">spec</a></span><br>
<span class="lineno"></span><span class="op" id="6094073">}</span><br>
<span class="lineno">2225</span><br>
<span class="lineno"></span><span class="keyword" id="6094076">func</span>&nbsp;<span class="op" id="6094081">(</span><span class="ident" id="6094082">p</span>&nbsp;<span class="op" id="6094084">*</span><span class="ident" id="6094085"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6094091">)</span>&nbsp;<span class="ident" id="6094093">parseValueSpec</span><span class="op" id="6094107">(</span><span class="ident" id="6094108">doc</span>&nbsp;<span class="op" id="6094112">*</span><span class="ident" id="6094113"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094116">.</span><span class="ident" id="6094117">CommentGroup</span><span class="op" id="6094129">,</span>&nbsp;<span class="ident" id="6094131">keyword</span>&nbsp;<span class="ident" id="6094139"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6094144">.</span><span class="ident" id="6094145">Token</span><span class="op" id="6094150">,</span>&nbsp;<span class="ident" id="6094152">iota</span>&nbsp;<span class="builtintype" id="6094157">int</span><span class="op" id="6094160">)</span>&nbsp;<span class="ident" id="6094162"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094165">.</span><span class="ident" id="6094166">Spec</span>&nbsp;<span class="op" id="6094171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094174">if</span>&nbsp;<span class="ident" id="6094177"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094178">.</span><span class="ident" id="6094179">trace</span>&nbsp;<span class="op" id="6094185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094189">defer</span>&nbsp;<span class="ident" id="6094195"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6094197">(</span><span class="ident" id="6094198"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6094203">(</span><span class="ident" id="6094204"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094205">,</span>&nbsp;<span class="ident" id="6094207"><a href="/go/parser/parser.go.html#6094131">keyword</a></span><span class="op" id="6094214">.</span><span class="ident" id="6094215">String</span><span class="op" id="6094221">(</span><span class="op" id="6094222">)</span><span class="op" id="6094223">+</span><span class="string" id="6094224">&#34;Spec&#34;</span><span class="op" id="6094230">)</span><span class="op" id="6094231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094234">}</span><br>
<span class="lineno">2230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094238">idents</span>&nbsp;<span class="op" id="6094245">:=</span>&nbsp;<span class="ident" id="6094248"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094249">.</span><span class="ident" id="6094250">parseIdentList</span><span class="op" id="6094264">(</span><span class="op" id="6094265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094268">typ</span>&nbsp;<span class="op" id="6094272">:=</span>&nbsp;<span class="ident" id="6094275"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094276">.</span><span class="ident" id="6094277">tryType</span><span class="op" id="6094284">(</span><span class="op" id="6094285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094288">var</span>&nbsp;<span class="ident" id="6094292">values</span>&nbsp;<span class="op" id="6094299">[</span><span class="op" id="6094300">]</span><span class="ident" id="6094301"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094304">.</span><span class="ident" id="6094305">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094311">//&nbsp;always&nbsp;permit&nbsp;optional&nbsp;initialization&nbsp;for&nbsp;more&nbsp;tolerant&nbsp;parsing</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094379">if</span>&nbsp;<span class="ident" id="6094382"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094383">.</span><span class="ident" id="6094384">tok</span>&nbsp;<span class="op" id="6094388">==</span>&nbsp;<span class="ident" id="6094391"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6094396">.</span><span class="ident" id="6094397">ASSIGN</span>&nbsp;<span class="op" id="6094404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094408"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094409">.</span><span class="ident" id="6094410">next</span><span class="op" id="6094414">(</span><span class="op" id="6094415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094419"><a href="/go/parser/parser.go.html#6094292">values</a></span>&nbsp;<span class="op" id="6094426">=</span>&nbsp;<span class="ident" id="6094428"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094429">.</span><span class="ident" id="6094430">parseRhsList</span><span class="op" id="6094442">(</span><span class="op" id="6094443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094449"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094450">.</span><span class="ident" id="6094451">expectSemi</span><span class="op" id="6094461">(</span><span class="op" id="6094462">)</span>&nbsp;<span class="comment" id="6094464">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno">2240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094505">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;constant&nbsp;or&nbsp;variable&nbsp;identifier&nbsp;declared&nbsp;inside</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094581">//&nbsp;a&nbsp;function&nbsp;begins&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;ConstSpec&nbsp;or&nbsp;VarSpec&nbsp;and&nbsp;ends&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094654">//&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;innermost&nbsp;containing&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6094701">//&nbsp;(Global&nbsp;identifiers&nbsp;are&nbsp;resolved&nbsp;in&nbsp;a&nbsp;separate&nbsp;phase&nbsp;after&nbsp;parsing.)</span><br>
<span class="lineno">2245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094774">spec</span>&nbsp;<span class="op" id="6094779">:=</span>&nbsp;<span class="op" id="6094782">&amp;</span><span class="ident" id="6094783"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094786">.</span><span class="ident" id="6094787">ValueSpec</span><span class="op" id="6094796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094800">Doc</span><span class="op" id="6094803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6094809"><a href="/go/parser/parser.go.html#6094108">doc</a></span><span class="op" id="6094812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094816">Names</span><span class="op" id="6094821">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6094825"><a href="/go/parser/parser.go.html#6094238">idents</a></span><span class="op" id="6094831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094835">Type</span><span class="op" id="6094839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6094844"><a href="/go/parser/parser.go.html#6094268">typ</a></span><span class="op" id="6094847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094851">Values</span><span class="op" id="6094857">:</span>&nbsp;&nbsp;<span class="ident" id="6094860"><a href="/go/parser/parser.go.html#6094292">values</a></span><span class="op" id="6094866">,</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094870">Comment</span><span class="op" id="6094877">:</span>&nbsp;<span class="ident" id="6094879"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094880">.</span><span class="ident" id="6094881">lineComment</span><span class="op" id="6094892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094898">kind</span>&nbsp;<span class="op" id="6094903">:=</span>&nbsp;<span class="ident" id="6094906"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094909">.</span><span class="ident" id="6094910">Con</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6094915">if</span>&nbsp;<span class="ident" id="6094918"><a href="/go/parser/parser.go.html#6094131">keyword</a></span>&nbsp;<span class="op" id="6094926">==</span>&nbsp;<span class="ident" id="6094929"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6094934">.</span><span class="ident" id="6094935">VAR</span>&nbsp;<span class="op" id="6094939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094943"><a href="/go/parser/parser.go.html#6094898">kind</a></span>&nbsp;<span class="op" id="6094948">=</span>&nbsp;<span class="ident" id="6094950"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6094953">.</span><span class="ident" id="6094954">Var</span><br>
<span class="lineno">2255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6094959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6094962"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094963">.</span><span class="ident" id="6094964">declare</span><span class="op" id="6094971">(</span><span class="ident" id="6094972"><a href="/go/parser/parser.go.html#6094774">spec</a></span><span class="op" id="6094976">,</span>&nbsp;<span class="ident" id="6094978"><a href="/go/parser/parser.go.html#6094152">iota</a></span><span class="op" id="6094982">,</span>&nbsp;<span class="ident" id="6094984"><a href="/go/parser/parser.go.html#6094082">p</a></span><span class="op" id="6094985">.</span><span class="ident" id="6094986">topScope</span><span class="op" id="6094994">,</span>&nbsp;<span class="ident" id="6094996"><a href="/go/parser/parser.go.html#6094898">kind</a></span><span class="op" id="6095000">,</span>&nbsp;<span class="ident" id="6095002"><a href="/go/parser/parser.go.html#6094238">idents</a></span><span class="op" id="6095008">...</span><span class="op" id="6095011">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095015">return</span>&nbsp;<span class="ident" id="6095022"><a href="/go/parser/parser.go.html#6094774">spec</a></span><br>
<span class="lineno"></span><span class="op" id="6095027">}</span><br>
<span class="lineno">2260</span><br>
<span class="lineno"></span><span class="keyword" id="6095030">func</span>&nbsp;<span class="op" id="6095035">(</span><span class="ident" id="6095036">p</span>&nbsp;<span class="op" id="6095038">*</span><span class="ident" id="6095039"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6095045">)</span>&nbsp;<span class="ident" id="6095047">parseTypeSpec</span><span class="op" id="6095060">(</span><span class="ident" id="6095061">doc</span>&nbsp;<span class="op" id="6095065">*</span><span class="ident" id="6095066"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095069">.</span><span class="ident" id="6095070">CommentGroup</span><span class="op" id="6095082">,</span>&nbsp;<span class="ident" id="6095084">_</span>&nbsp;<span class="ident" id="6095086"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6095091">.</span><span class="ident" id="6095092">Token</span><span class="op" id="6095097">,</span>&nbsp;<span class="ident" id="6095099">_</span>&nbsp;<span class="builtintype" id="6095101">int</span><span class="op" id="6095104">)</span>&nbsp;<span class="ident" id="6095106"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095109">.</span><span class="ident" id="6095110">Spec</span>&nbsp;<span class="op" id="6095115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095118">if</span>&nbsp;<span class="ident" id="6095121"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095122">.</span><span class="ident" id="6095123">trace</span>&nbsp;<span class="op" id="6095129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095133">defer</span>&nbsp;<span class="ident" id="6095139"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6095141">(</span><span class="ident" id="6095142"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6095147">(</span><span class="ident" id="6095148"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095149">,</span>&nbsp;<span class="string" id="6095151">&#34;TypeSpec&#34;</span><span class="op" id="6095161">)</span><span class="op" id="6095162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095165">}</span><br>
<span class="lineno">2265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095169">ident</span>&nbsp;<span class="op" id="6095175">:=</span>&nbsp;<span class="ident" id="6095178"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095179">.</span><span class="ident" id="6095180">parseIdent</span><span class="op" id="6095190">(</span><span class="op" id="6095191">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6095195">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;a&nbsp;type&nbsp;identifier&nbsp;declared&nbsp;inside&nbsp;a&nbsp;function&nbsp;begins</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6095273">//&nbsp;at&nbsp;the&nbsp;identifier&nbsp;in&nbsp;the&nbsp;TypeSpec&nbsp;and&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;innermost</span><br>
<span class="lineno">2270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6095348">//&nbsp;containing&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6095370">//&nbsp;(Global&nbsp;identifiers&nbsp;are&nbsp;resolved&nbsp;in&nbsp;a&nbsp;separate&nbsp;phase&nbsp;after&nbsp;parsing.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095443">spec</span>&nbsp;<span class="op" id="6095448">:=</span>&nbsp;<span class="op" id="6095451">&amp;</span><span class="ident" id="6095452"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095455">.</span><span class="ident" id="6095456">TypeSpec</span><span class="op" id="6095464">{</span><span class="ident" id="6095465">Doc</span><span class="op" id="6095468">:</span>&nbsp;<span class="ident" id="6095470"><a href="/go/parser/parser.go.html#6095061">doc</a></span><span class="op" id="6095473">,</span>&nbsp;<span class="ident" id="6095475">Name</span><span class="op" id="6095479">:</span>&nbsp;<span class="ident" id="6095481"><a href="/go/parser/parser.go.html#6095169">ident</a></span><span class="op" id="6095486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095489"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095490">.</span><span class="ident" id="6095491">declare</span><span class="op" id="6095498">(</span><span class="ident" id="6095499"><a href="/go/parser/parser.go.html#6095443">spec</a></span><span class="op" id="6095503">,</span>&nbsp;<span class="ident" id="6095505">nil</span><span class="op" id="6095508">,</span>&nbsp;<span class="ident" id="6095510"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095511">.</span><span class="ident" id="6095512">topScope</span><span class="op" id="6095520">,</span>&nbsp;<span class="ident" id="6095522"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095525">.</span><span class="ident" id="6095526">Typ</span><span class="op" id="6095529">,</span>&nbsp;<span class="ident" id="6095531"><a href="/go/parser/parser.go.html#6095169">ident</a></span><span class="op" id="6095536">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095540"><a href="/go/parser/parser.go.html#6095443">spec</a></span><span class="op" id="6095544">.</span><span class="ident" id="6095545">Type</span>&nbsp;<span class="op" id="6095550">=</span>&nbsp;<span class="ident" id="6095552"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095553">.</span><span class="ident" id="6095554">parseType</span><span class="op" id="6095563">(</span><span class="op" id="6095564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095567"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095568">.</span><span class="ident" id="6095569">expectSemi</span><span class="op" id="6095579">(</span><span class="op" id="6095580">)</span>&nbsp;<span class="comment" id="6095582">//&nbsp;call&nbsp;before&nbsp;accessing&nbsp;p.linecomment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095622"><a href="/go/parser/parser.go.html#6095443">spec</a></span><span class="op" id="6095626">.</span><span class="ident" id="6095627">Comment</span>&nbsp;<span class="op" id="6095635">=</span>&nbsp;<span class="ident" id="6095637"><a href="/go/parser/parser.go.html#6095036">p</a></span><span class="op" id="6095638">.</span><span class="ident" id="6095639">lineComment</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095653">return</span>&nbsp;<span class="ident" id="6095660"><a href="/go/parser/parser.go.html#6095443">spec</a></span><br>
<span class="lineno">2280</span><span class="op" id="6095665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6095668">func</span>&nbsp;<span class="op" id="6095673">(</span><span class="ident" id="6095674">p</span>&nbsp;<span class="op" id="6095676">*</span><span class="ident" id="6095677"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6095683">)</span>&nbsp;<span class="ident" id="6095685">parseGenDecl</span><span class="op" id="6095697">(</span><span class="ident" id="6095698">keyword</span>&nbsp;<span class="ident" id="6095706"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6095711">.</span><span class="ident" id="6095712">Token</span><span class="op" id="6095717">,</span>&nbsp;<span class="ident" id="6095719">f</span>&nbsp;<span class="ident" id="6095721"><a href="/go/parser/parser.go.html#6092826">parseSpecFunction</a></span><span class="op" id="6095738">)</span>&nbsp;<span class="op" id="6095740">*</span><span class="ident" id="6095741"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095744">.</span><span class="ident" id="6095745">GenDecl</span>&nbsp;<span class="op" id="6095753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095756">if</span>&nbsp;<span class="ident" id="6095759"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095760">.</span><span class="ident" id="6095761">trace</span>&nbsp;<span class="op" id="6095767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095771">defer</span>&nbsp;<span class="ident" id="6095777"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6095779">(</span><span class="ident" id="6095780"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6095785">(</span><span class="ident" id="6095786"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095787">,</span>&nbsp;<span class="string" id="6095789">&#34;GenDecl(&#34;</span><span class="op" id="6095799">+</span><span class="ident" id="6095800"><a href="/go/parser/parser.go.html#6095698">keyword</a></span><span class="op" id="6095807">.</span><span class="ident" id="6095808">String</span><span class="op" id="6095814">(</span><span class="op" id="6095815">)</span><span class="op" id="6095816">+</span><span class="string" id="6095817">&#34;)&#34;</span><span class="op" id="6095820">)</span><span class="op" id="6095821">)</span><br>
<span class="lineno">2285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6095824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095828">doc</span>&nbsp;<span class="op" id="6095832">:=</span>&nbsp;<span class="ident" id="6095835"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095836">.</span><span class="ident" id="6095837">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095850">pos</span>&nbsp;<span class="op" id="6095854">:=</span>&nbsp;<span class="ident" id="6095857"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095858">.</span><span class="ident" id="6095859">expect</span><span class="op" id="6095865">(</span><span class="ident" id="6095866"><a href="/go/parser/parser.go.html#6095698">keyword</a></span><span class="op" id="6095873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095876">var</span>&nbsp;<span class="ident" id="6095880">lparen</span><span class="op" id="6095886">,</span>&nbsp;<span class="ident" id="6095888">rparen</span>&nbsp;<span class="ident" id="6095895"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6095900">.</span><span class="ident" id="6095901">Pos</span><br>
<span class="lineno">2290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095906">var</span>&nbsp;<span class="ident" id="6095910">list</span>&nbsp;<span class="op" id="6095915">[</span><span class="op" id="6095916">]</span><span class="ident" id="6095917"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6095920">.</span><span class="ident" id="6095921">Spec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095927">if</span>&nbsp;<span class="ident" id="6095930"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095931">.</span><span class="ident" id="6095932">tok</span>&nbsp;<span class="op" id="6095936">==</span>&nbsp;<span class="ident" id="6095939"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6095944">.</span><span class="ident" id="6095945">LPAREN</span>&nbsp;<span class="op" id="6095952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095956"><a href="/go/parser/parser.go.html#6095880">lparen</a></span>&nbsp;<span class="op" id="6095963">=</span>&nbsp;<span class="ident" id="6095965"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095966">.</span><span class="ident" id="6095967">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6095973"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6095974">.</span><span class="ident" id="6095975">next</span><span class="op" id="6095979">(</span><span class="op" id="6095980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6095984">for</span>&nbsp;<span class="ident" id="6095988">iota</span>&nbsp;<span class="op" id="6095993">:=</span>&nbsp;<span class="num" id="6095996">0</span><span class="op" id="6095997">;</span>&nbsp;<span class="ident" id="6095999"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6096000">.</span><span class="ident" id="6096001">tok</span>&nbsp;<span class="op" id="6096005">!=</span>&nbsp;<span class="ident" id="6096008"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096013">.</span><span class="ident" id="6096014">RPAREN</span>&nbsp;<span class="op" id="6096021">&amp;&amp;</span>&nbsp;<span class="ident" id="6096024"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6096025">.</span><span class="ident" id="6096026">tok</span>&nbsp;<span class="op" id="6096030">!=</span>&nbsp;<span class="ident" id="6096033"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096038">.</span><span class="ident" id="6096039">EOF</span><span class="op" id="6096042">;</span>&nbsp;<span class="ident" id="6096044"><a href="/go/parser/parser.go.html#6095988">iota</a></span><span class="op" id="6096048">++</span>&nbsp;<span class="op" id="6096051">{</span><br>
<span class="lineno">2295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096056"><a href="/go/parser/parser.go.html#6095910">list</a></span>&nbsp;<span class="op" id="6096061">=</span>&nbsp;<span class="builtinfunc" id="6096063">append</span><span class="op" id="6096069">(</span><span class="ident" id="6096070"><a href="/go/parser/parser.go.html#6095910">list</a></span><span class="op" id="6096074">,</span>&nbsp;<span class="ident" id="6096076"><a href="/go/parser/parser.go.html#6095719">f</a></span><span class="op" id="6096077">(</span><span class="ident" id="6096078"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6096079">.</span><span class="ident" id="6096080">leadComment</span><span class="op" id="6096091">,</span>&nbsp;<span class="ident" id="6096093"><a href="/go/parser/parser.go.html#6095698">keyword</a></span><span class="op" id="6096100">,</span>&nbsp;<span class="ident" id="6096102"><a href="/go/parser/parser.go.html#6095988">iota</a></span><span class="op" id="6096106">)</span><span class="op" id="6096107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096115"><a href="/go/parser/parser.go.html#6095888">rparen</a></span>&nbsp;<span class="op" id="6096122">=</span>&nbsp;<span class="ident" id="6096124"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6096125">.</span><span class="ident" id="6096126">expect</span><span class="op" id="6096132">(</span><span class="ident" id="6096133"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096138">.</span><span class="ident" id="6096139">RPAREN</span><span class="op" id="6096145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096149"><a href="/go/parser/parser.go.html#6095674">p</a></span><span class="op" id="6096150">.</span><span class="ident" id="6096151">expectSemi</span><span class="op" id="6096161">(</span><span class="op" id="6096162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096165">}</span>&nbsp;<span class="keyword" id="6096167">else</span>&nbsp;<span class="op" id="6096172">{</span><br>
<span class="lineno">2300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096176"><a href="/go/parser/parser.go.html#6095910">list</a></span>&nbsp;<span class="op" id="6096181">=</span>&nbsp;<span class="builtinfunc" id="6096183">append</span><span class="op" id="6096189">(</span><span class="ident" id="6096190"><a href="/go/parser/parser.go.html#6095910">list</a></span><span class="op" id="6096194">,</span>&nbsp;<span class="ident" id="6096196"><a href="/go/parser/parser.go.html#6095719">f</a></span><span class="op" id="6096197">(</span><span class="ident" id="6096198">nil</span><span class="op" id="6096201">,</span>&nbsp;<span class="ident" id="6096203"><a href="/go/parser/parser.go.html#6095698">keyword</a></span><span class="op" id="6096210">,</span>&nbsp;<span class="num" id="6096212">0</span><span class="op" id="6096213">)</span><span class="op" id="6096214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096221">return</span>&nbsp;<span class="op" id="6096228">&amp;</span><span class="ident" id="6096229"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096232">.</span><span class="ident" id="6096233">GenDecl</span><span class="op" id="6096240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096244">Doc</span><span class="op" id="6096247">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096252"><a href="/go/parser/parser.go.html#6095828">doc</a></span><span class="op" id="6096255">,</span><br>
<span class="lineno">2305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096259">TokPos</span><span class="op" id="6096265">:</span>&nbsp;<span class="ident" id="6096267"><a href="/go/parser/parser.go.html#6095850">pos</a></span><span class="op" id="6096270">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096274">Tok</span><span class="op" id="6096277">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096282"><a href="/go/parser/parser.go.html#6095698">keyword</a></span><span class="op" id="6096289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096293">Lparen</span><span class="op" id="6096299">:</span>&nbsp;<span class="ident" id="6096301"><a href="/go/parser/parser.go.html#6095880">lparen</a></span><span class="op" id="6096307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096311">Specs</span><span class="op" id="6096316">:</span>&nbsp;&nbsp;<span class="ident" id="6096319"><a href="/go/parser/parser.go.html#6095910">list</a></span><span class="op" id="6096323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096327">Rparen</span><span class="op" id="6096333">:</span>&nbsp;<span class="ident" id="6096335"><a href="/go/parser/parser.go.html#6095888">rparen</a></span><span class="op" id="6096341">,</span><br>
<span class="lineno">2310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096344">}</span><br>
<span class="lineno"></span><span class="op" id="6096346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6096349">func</span>&nbsp;<span class="op" id="6096354">(</span><span class="ident" id="6096355">p</span>&nbsp;<span class="op" id="6096357">*</span><span class="ident" id="6096358"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6096364">)</span>&nbsp;<span class="ident" id="6096366">parseFuncDecl</span><span class="op" id="6096379">(</span><span class="op" id="6096380">)</span>&nbsp;<span class="op" id="6096382">*</span><span class="ident" id="6096383"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096386">.</span><span class="ident" id="6096387">FuncDecl</span>&nbsp;<span class="op" id="6096396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096399">if</span>&nbsp;<span class="ident" id="6096402"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096403">.</span><span class="ident" id="6096404">trace</span>&nbsp;<span class="op" id="6096410">{</span><br>
<span class="lineno">2315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096414">defer</span>&nbsp;<span class="ident" id="6096420"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6096422">(</span><span class="ident" id="6096423"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6096428">(</span><span class="ident" id="6096429"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096430">,</span>&nbsp;<span class="string" id="6096432">&#34;FunctionDecl&#34;</span><span class="op" id="6096446">)</span><span class="op" id="6096447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096454">doc</span>&nbsp;<span class="op" id="6096458">:=</span>&nbsp;<span class="ident" id="6096461"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096462">.</span><span class="ident" id="6096463">leadComment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096476">pos</span>&nbsp;<span class="op" id="6096480">:=</span>&nbsp;<span class="ident" id="6096483"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096484">.</span><span class="ident" id="6096485">expect</span><span class="op" id="6096491">(</span><span class="ident" id="6096492"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096497">.</span><span class="ident" id="6096498">FUNC</span><span class="op" id="6096502">)</span><br>
<span class="lineno">2320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096505">scope</span>&nbsp;<span class="op" id="6096511">:=</span>&nbsp;<span class="ident" id="6096514"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096517">.</span><span class="ident" id="6096518">NewScope</span><span class="op" id="6096526">(</span><span class="ident" id="6096527"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096528">.</span><span class="ident" id="6096529">topScope</span><span class="op" id="6096537">)</span>&nbsp;<span class="comment" id="6096539">//&nbsp;function&nbsp;scope</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096559">var</span>&nbsp;<span class="ident" id="6096563">recv</span>&nbsp;<span class="op" id="6096568">*</span><span class="ident" id="6096569"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096572">.</span><span class="ident" id="6096573">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096584">if</span>&nbsp;<span class="ident" id="6096587"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096588">.</span><span class="ident" id="6096589">tok</span>&nbsp;<span class="op" id="6096593">==</span>&nbsp;<span class="ident" id="6096596"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096601">.</span><span class="ident" id="6096602">LPAREN</span>&nbsp;<span class="op" id="6096609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096613"><a href="/go/parser/parser.go.html#6096563">recv</a></span>&nbsp;<span class="op" id="6096618">=</span>&nbsp;<span class="ident" id="6096620"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096621">.</span><span class="ident" id="6096622">parseParameters</span><span class="op" id="6096637">(</span><span class="ident" id="6096638"><a href="/go/parser/parser.go.html#6096505">scope</a></span><span class="op" id="6096643">,</span>&nbsp;<span class="ident" id="6096645">false</span><span class="op" id="6096650">)</span><br>
<span class="lineno">2325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096657">ident</span>&nbsp;<span class="op" id="6096663">:=</span>&nbsp;<span class="ident" id="6096666"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096667">.</span><span class="ident" id="6096668">parseIdent</span><span class="op" id="6096678">(</span><span class="op" id="6096679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096683">params</span><span class="op" id="6096689">,</span>&nbsp;<span class="ident" id="6096691">results</span>&nbsp;<span class="op" id="6096699">:=</span>&nbsp;<span class="ident" id="6096702"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096703">.</span><span class="ident" id="6096704">parseSignature</span><span class="op" id="6096718">(</span><span class="ident" id="6096719"><a href="/go/parser/parser.go.html#6096505">scope</a></span><span class="op" id="6096724">)</span><br>
<span class="lineno">2330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096728">var</span>&nbsp;<span class="ident" id="6096732">body</span>&nbsp;<span class="op" id="6096737">*</span><span class="ident" id="6096738"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096741">.</span><span class="ident" id="6096742">BlockStmt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096753">if</span>&nbsp;<span class="ident" id="6096756"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096757">.</span><span class="ident" id="6096758">tok</span>&nbsp;<span class="op" id="6096762">==</span>&nbsp;<span class="ident" id="6096765"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6096770">.</span><span class="ident" id="6096771">LBRACE</span>&nbsp;<span class="op" id="6096778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096782"><a href="/go/parser/parser.go.html#6096732">body</a></span>&nbsp;<span class="op" id="6096787">=</span>&nbsp;<span class="ident" id="6096789"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096790">.</span><span class="ident" id="6096791">parseBody</span><span class="op" id="6096800">(</span><span class="ident" id="6096801"><a href="/go/parser/parser.go.html#6096505">scope</a></span><span class="op" id="6096806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096809">}</span><br>
<span class="lineno">2335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096812"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6096813">.</span><span class="ident" id="6096814">expectSemi</span><span class="op" id="6096824">(</span><span class="op" id="6096825">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096829">decl</span>&nbsp;<span class="op" id="6096834">:=</span>&nbsp;<span class="op" id="6096837">&amp;</span><span class="ident" id="6096838"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096841">.</span><span class="ident" id="6096842">FuncDecl</span><span class="op" id="6096850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096854">Doc</span><span class="op" id="6096857">:</span>&nbsp;&nbsp;<span class="ident" id="6096860"><a href="/go/parser/parser.go.html#6096454">doc</a></span><span class="op" id="6096863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096867">Recv</span><span class="op" id="6096871">:</span>&nbsp;<span class="ident" id="6096873"><a href="/go/parser/parser.go.html#6096563">recv</a></span><span class="op" id="6096877">,</span><br>
<span class="lineno">2340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096881">Name</span><span class="op" id="6096885">:</span>&nbsp;<span class="ident" id="6096887"><a href="/go/parser/parser.go.html#6096657">ident</a></span><span class="op" id="6096892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096896">Type</span><span class="op" id="6096900">:</span>&nbsp;<span class="op" id="6096902">&amp;</span><span class="ident" id="6096903"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6096906">.</span><span class="ident" id="6096907">FuncType</span><span class="op" id="6096915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096920">Func</span><span class="op" id="6096924">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6096929"><a href="/go/parser/parser.go.html#6096476">pos</a></span><span class="op" id="6096932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096937">Params</span><span class="op" id="6096943">:</span>&nbsp;&nbsp;<span class="ident" id="6096946"><a href="/go/parser/parser.go.html#6096683">params</a></span><span class="op" id="6096952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096957">Results</span><span class="op" id="6096964">:</span>&nbsp;<span class="ident" id="6096966"><a href="/go/parser/parser.go.html#6096691">results</a></span><span class="op" id="6096973">,</span><br>
<span class="lineno">2345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096977">}</span><span class="op" id="6096978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6096982">Body</span><span class="op" id="6096986">:</span>&nbsp;<span class="ident" id="6096988"><a href="/go/parser/parser.go.html#6096732">body</a></span><span class="op" id="6096992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6096995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6096998">if</span>&nbsp;<span class="ident" id="6097001"><a href="/go/parser/parser.go.html#6096563">recv</a></span>&nbsp;<span class="op" id="6097006">==</span>&nbsp;<span class="ident" id="6097009">nil</span>&nbsp;<span class="op" id="6097013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097017">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;scope&nbsp;of&nbsp;an&nbsp;identifier&nbsp;denoting&nbsp;a&nbsp;constant,&nbsp;type,</span><br>
<span class="lineno">2350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097085">//&nbsp;variable,&nbsp;or&nbsp;function&nbsp;(but&nbsp;not&nbsp;method)&nbsp;declared&nbsp;at&nbsp;top&nbsp;level</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097151">//&nbsp;(outside&nbsp;any&nbsp;function)&nbsp;is&nbsp;the&nbsp;package&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097201">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097206">//&nbsp;init()&nbsp;functions&nbsp;cannot&nbsp;be&nbsp;referred&nbsp;to&nbsp;and&nbsp;there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6097264">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;-&nbsp;don&#39;t&nbsp;put&nbsp;them&nbsp;in&nbsp;the&nbsp;pkgScope</span><br>
<span class="lineno">2355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097319">if</span>&nbsp;<span class="ident" id="6097322"><a href="/go/parser/parser.go.html#6096657">ident</a></span><span class="op" id="6097327">.</span><span class="ident" id="6097328">Name</span>&nbsp;<span class="op" id="6097333">!=</span>&nbsp;<span class="string" id="6097336">&#34;init&#34;</span>&nbsp;<span class="op" id="6097343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097348"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6097349">.</span><span class="ident" id="6097350">declare</span><span class="op" id="6097357">(</span><span class="ident" id="6097358"><a href="/go/parser/parser.go.html#6096829">decl</a></span><span class="op" id="6097362">,</span>&nbsp;<span class="ident" id="6097364">nil</span><span class="op" id="6097367">,</span>&nbsp;<span class="ident" id="6097369"><a href="/go/parser/parser.go.html#6096355">p</a></span><span class="op" id="6097370">.</span><span class="ident" id="6097371">pkgScope</span><span class="op" id="6097379">,</span>&nbsp;<span class="ident" id="6097381"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6097384">.</span><span class="ident" id="6097385">Fun</span><span class="op" id="6097388">,</span>&nbsp;<span class="ident" id="6097390"><a href="/go/parser/parser.go.html#6096657">ident</a></span><span class="op" id="6097395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097406">return</span>&nbsp;<span class="ident" id="6097413"><a href="/go/parser/parser.go.html#6096829">decl</a></span><br>
<span class="lineno"></span><span class="op" id="6097418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6097421">func</span>&nbsp;<span class="op" id="6097426">(</span><span class="ident" id="6097427">p</span>&nbsp;<span class="op" id="6097429">*</span><span class="ident" id="6097430"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6097436">)</span>&nbsp;<span class="ident" id="6097438">parseDecl</span><span class="op" id="6097447">(</span><span class="ident" id="6097448">sync</span>&nbsp;<span class="keyword" id="6097453">func</span><span class="op" id="6097457">(</span><span class="op" id="6097458">*</span><span class="ident" id="6097459"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6097465">)</span><span class="op" id="6097466">)</span>&nbsp;<span class="ident" id="6097468"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6097471">.</span><span class="ident" id="6097472">Decl</span>&nbsp;<span class="op" id="6097477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097480">if</span>&nbsp;<span class="ident" id="6097483"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097484">.</span><span class="ident" id="6097485">trace</span>&nbsp;<span class="op" id="6097491">{</span><br>
<span class="lineno">2365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097495">defer</span>&nbsp;<span class="ident" id="6097501"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6097503">(</span><span class="ident" id="6097504"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6097509">(</span><span class="ident" id="6097510"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097511">,</span>&nbsp;<span class="string" id="6097513">&#34;Declaration&#34;</span><span class="op" id="6097526">)</span><span class="op" id="6097527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097530">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097534">var</span>&nbsp;<span class="ident" id="6097538">f</span>&nbsp;<span class="ident" id="6097540"><a href="/go/parser/parser.go.html#6092826">parseSpecFunction</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097559">switch</span>&nbsp;<span class="ident" id="6097566"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097567">.</span><span class="ident" id="6097568">tok</span>&nbsp;<span class="op" id="6097572">{</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097575">case</span>&nbsp;<span class="ident" id="6097580"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6097585">.</span><span class="ident" id="6097586">CONST</span><span class="op" id="6097591">,</span>&nbsp;<span class="ident" id="6097593"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6097598">.</span><span class="ident" id="6097599">VAR</span><span class="op" id="6097602">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097606"><a href="/go/parser/parser.go.html#6097538">f</a></span>&nbsp;<span class="op" id="6097608">=</span>&nbsp;<span class="ident" id="6097610"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097611">.</span><span class="ident" id="6097612">parseValueSpec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097629">case</span>&nbsp;<span class="ident" id="6097634"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6097639">.</span><span class="ident" id="6097640">TYPE</span><span class="op" id="6097644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097648"><a href="/go/parser/parser.go.html#6097538">f</a></span>&nbsp;<span class="op" id="6097650">=</span>&nbsp;<span class="ident" id="6097652"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097653">.</span><span class="ident" id="6097654">parseTypeSpec</span><br>
<span class="lineno">2375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097670">case</span>&nbsp;<span class="ident" id="6097675"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6097680">.</span><span class="ident" id="6097681">FUNC</span><span class="op" id="6097685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097689">return</span>&nbsp;<span class="ident" id="6097696"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097697">.</span><span class="ident" id="6097698">parseFuncDecl</span><span class="op" id="6097711">(</span><span class="op" id="6097712">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097716">default</span><span class="op" id="6097723">:</span><br>
<span class="lineno">2380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097727">pos</span>&nbsp;<span class="op" id="6097731">:=</span>&nbsp;<span class="ident" id="6097734"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097735">.</span><span class="ident" id="6097736">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097742"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097743">.</span><span class="ident" id="6097744">errorExpected</span><span class="op" id="6097757">(</span><span class="ident" id="6097758"><a href="/go/parser/parser.go.html#6097727">pos</a></span><span class="op" id="6097761">,</span>&nbsp;<span class="string" id="6097763">&#34;declaration&#34;</span><span class="op" id="6097776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6097780"><a href="/go/parser/parser.go.html#6097448">sync</a></span><span class="op" id="6097784">(</span><span class="ident" id="6097785"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097790">return</span>&nbsp;<span class="op" id="6097797">&amp;</span><span class="ident" id="6097798"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6097801">.</span><span class="ident" id="6097802">BadDecl</span><span class="op" id="6097809">{</span><span class="ident" id="6097810">From</span><span class="op" id="6097814">:</span>&nbsp;<span class="ident" id="6097816"><a href="/go/parser/parser.go.html#6097727">pos</a></span><span class="op" id="6097819">,</span>&nbsp;<span class="ident" id="6097821">To</span><span class="op" id="6097823">:</span>&nbsp;<span class="ident" id="6097825"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097826">.</span><span class="ident" id="6097827">pos</span><span class="op" id="6097830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6097833">}</span><br>
<span class="lineno">2385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6097837">return</span>&nbsp;<span class="ident" id="6097844"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097845">.</span><span class="ident" id="6097846">parseGenDecl</span><span class="op" id="6097858">(</span><span class="ident" id="6097859"><a href="/go/parser/parser.go.html#6097427">p</a></span><span class="op" id="6097860">.</span><span class="ident" id="6097861">tok</span><span class="op" id="6097864">,</span>&nbsp;<span class="ident" id="6097866"><a href="/go/parser/parser.go.html#6097538">f</a></span><span class="op" id="6097867">)</span><br>
<span class="lineno"></span><span class="op" id="6097869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6097872">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">2390</span><span class="comment" id="6097952">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6097969">func</span>&nbsp;<span class="op" id="6097974">(</span><span class="ident" id="6097975">p</span>&nbsp;<span class="op" id="6097977">*</span><span class="ident" id="6097978"><a href="/go/parser/parser.go.html#6038167">parser</a></span><span class="op" id="6097984">)</span>&nbsp;<span class="ident" id="6097986">parseFile</span><span class="op" id="6097995">(</span><span class="op" id="6097996">)</span>&nbsp;<span class="op" id="6097998">*</span><span class="ident" id="6097999"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6098002">.</span><span class="ident" id="6098003">File</span>&nbsp;<span class="op" id="6098008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098011">if</span>&nbsp;<span class="ident" id="6098014"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098015">.</span><span class="ident" id="6098016">trace</span>&nbsp;<span class="op" id="6098022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098026">defer</span>&nbsp;<span class="ident" id="6098032"><a href="/go/parser/parser.go.html#6044446">un</a></span><span class="op" id="6098034">(</span><span class="ident" id="6098035"><a href="/go/parser/parser.go.html#6044309">trace</a></span><span class="op" id="6098040">(</span><span class="ident" id="6098041"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098042">,</span>&nbsp;<span class="string" id="6098044">&#34;File&#34;</span><span class="op" id="6098050">)</span><span class="op" id="6098051">)</span><br>
<span class="lineno">2395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098058">//&nbsp;Don&#39;t&nbsp;bother&nbsp;parsing&nbsp;the&nbsp;rest&nbsp;if&nbsp;we&nbsp;had&nbsp;errors&nbsp;scanning&nbsp;the&nbsp;first&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098135">//&nbsp;Likely&nbsp;not&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098175">if</span>&nbsp;<span class="ident" id="6098178"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098179">.</span><span class="ident" id="6098180">errors</span><span class="op" id="6098186">.</span><span class="ident" id="6098187">Len</span><span class="op" id="6098190">(</span><span class="op" id="6098191">)</span>&nbsp;<span class="op" id="6098193">!=</span>&nbsp;<span class="num" id="6098196">0</span>&nbsp;<span class="op" id="6098198">{</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098202">return</span>&nbsp;<span class="ident" id="6098209">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098218">//&nbsp;package&nbsp;clause</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098237">doc</span>&nbsp;<span class="op" id="6098241">:=</span>&nbsp;<span class="ident" id="6098244"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098245">.</span><span class="ident" id="6098246">leadComment</span><br>
<span class="lineno">2405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098259">pos</span>&nbsp;<span class="op" id="6098263">:=</span>&nbsp;<span class="ident" id="6098266"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098267">.</span><span class="ident" id="6098268">expect</span><span class="op" id="6098274">(</span><span class="ident" id="6098275"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6098280">.</span><span class="ident" id="6098281">PACKAGE</span><span class="op" id="6098288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098291">//&nbsp;Go&nbsp;spec:&nbsp;The&nbsp;package&nbsp;clause&nbsp;is&nbsp;not&nbsp;a&nbsp;declaration;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098345">//&nbsp;the&nbsp;package&nbsp;name&nbsp;does&nbsp;not&nbsp;appear&nbsp;in&nbsp;any&nbsp;scope.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098396">ident</span>&nbsp;<span class="op" id="6098402">:=</span>&nbsp;<span class="ident" id="6098405"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098406">.</span><span class="ident" id="6098407">parseIdent</span><span class="op" id="6098417">(</span><span class="op" id="6098418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098421">if</span>&nbsp;<span class="ident" id="6098424"><a href="/go/parser/parser.go.html#6098396">ident</a></span><span class="op" id="6098429">.</span><span class="ident" id="6098430">Name</span>&nbsp;<span class="op" id="6098435">==</span>&nbsp;<span class="string" id="6098438">&#34;_&#34;</span>&nbsp;<span class="op" id="6098442">&amp;&amp;</span>&nbsp;<span class="ident" id="6098445"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098446">.</span><span class="ident" id="6098447">mode</span><span class="op" id="6098451">&amp;</span><span class="ident" id="6098452"><a href="/go/parser/interface.go.html#6033188">DeclarationErrors</a></span>&nbsp;<span class="op" id="6098470">!=</span>&nbsp;<span class="num" id="6098473">0</span>&nbsp;<span class="op" id="6098475">{</span><br>
<span class="lineno">2410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098479"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098480">.</span><span class="builtintype" id="6098481">error</span><span class="op" id="6098486">(</span><span class="ident" id="6098487"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098488">.</span><span class="ident" id="6098489">pos</span><span class="op" id="6098492">,</span>&nbsp;<span class="string" id="6098494">&#34;invalid&nbsp;package&nbsp;name&nbsp;_&#34;</span><span class="op" id="6098518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098524"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098525">.</span><span class="ident" id="6098526">expectSemi</span><span class="op" id="6098536">(</span><span class="op" id="6098537">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098541">//&nbsp;Don&#39;t&nbsp;bother&nbsp;parsing&nbsp;the&nbsp;rest&nbsp;if&nbsp;we&nbsp;had&nbsp;errors&nbsp;parsing&nbsp;the&nbsp;package&nbsp;clause.</span><br>
<span class="lineno">2415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098620">//&nbsp;Likely&nbsp;not&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098660">if</span>&nbsp;<span class="ident" id="6098663"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098664">.</span><span class="ident" id="6098665">errors</span><span class="op" id="6098671">.</span><span class="ident" id="6098672">Len</span><span class="op" id="6098675">(</span><span class="op" id="6098676">)</span>&nbsp;<span class="op" id="6098678">!=</span>&nbsp;<span class="num" id="6098681">0</span>&nbsp;<span class="op" id="6098683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098687">return</span>&nbsp;<span class="ident" id="6098694">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098703"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098704">.</span><span class="ident" id="6098705">openScope</span><span class="op" id="6098714">(</span><span class="op" id="6098715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098718"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098719">.</span><span class="ident" id="6098720">pkgScope</span>&nbsp;<span class="op" id="6098729">=</span>&nbsp;<span class="ident" id="6098731"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098732">.</span><span class="ident" id="6098733">topScope</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098743">var</span>&nbsp;<span class="ident" id="6098747">decls</span>&nbsp;<span class="op" id="6098753">[</span><span class="op" id="6098754">]</span><span class="ident" id="6098755"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6098758">.</span><span class="ident" id="6098759">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098765">if</span>&nbsp;<span class="ident" id="6098768"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098769">.</span><span class="ident" id="6098770">mode</span><span class="op" id="6098774">&amp;</span><span class="ident" id="6098775"><a href="/go/parser/interface.go.html#6032840">PackageClauseOnly</a></span>&nbsp;<span class="op" id="6098793">==</span>&nbsp;<span class="num" id="6098796">0</span>&nbsp;<span class="op" id="6098798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098802">//&nbsp;import&nbsp;decls</span><br>
<span class="lineno">2425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098820">for</span>&nbsp;<span class="ident" id="6098824"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098825">.</span><span class="ident" id="6098826">tok</span>&nbsp;<span class="op" id="6098830">==</span>&nbsp;<span class="ident" id="6098833"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6098838">.</span><span class="ident" id="6098839">IMPORT</span>&nbsp;<span class="op" id="6098846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6098851"><a href="/go/parser/parser.go.html#6098747">decls</a></span>&nbsp;<span class="op" id="6098857">=</span>&nbsp;<span class="builtinfunc" id="6098859">append</span><span class="op" id="6098865">(</span><span class="ident" id="6098866"><a href="/go/parser/parser.go.html#6098747">decls</a></span><span class="op" id="6098871">,</span>&nbsp;<span class="ident" id="6098873"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098874">.</span><span class="ident" id="6098875">parseGenDecl</span><span class="op" id="6098887">(</span><span class="ident" id="6098888"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6098893">.</span><span class="ident" id="6098894">IMPORT</span><span class="op" id="6098900">,</span>&nbsp;<span class="ident" id="6098902"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098903">.</span><span class="ident" id="6098904">parseImportSpec</span><span class="op" id="6098919">)</span><span class="op" id="6098920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6098924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098929">if</span>&nbsp;<span class="ident" id="6098932"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098933">.</span><span class="ident" id="6098934">mode</span><span class="op" id="6098938">&amp;</span><span class="ident" id="6098939"><a href="/go/parser/interface.go.html#6032925">ImportsOnly</a></span>&nbsp;<span class="op" id="6098951">==</span>&nbsp;<span class="num" id="6098954">0</span>&nbsp;<span class="op" id="6098956">{</span><br>
<span class="lineno">2430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6098961">//&nbsp;rest&nbsp;of&nbsp;package&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6098988">for</span>&nbsp;<span class="ident" id="6098992"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6098993">.</span><span class="ident" id="6098994">tok</span>&nbsp;<span class="op" id="6098998">!=</span>&nbsp;<span class="ident" id="6099001"><a href="/go/parser/parser.go.html#6038056">token</a></span><span class="op" id="6099006">.</span><span class="ident" id="6099007">EOF</span>&nbsp;<span class="op" id="6099011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099017"><a href="/go/parser/parser.go.html#6098747">decls</a></span>&nbsp;<span class="op" id="6099023">=</span>&nbsp;<span class="builtinfunc" id="6099025">append</span><span class="op" id="6099031">(</span><span class="ident" id="6099032"><a href="/go/parser/parser.go.html#6098747">decls</a></span><span class="op" id="6099037">,</span>&nbsp;<span class="ident" id="6099039"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099040">.</span><span class="ident" id="6099041">parseDecl</span><span class="op" id="6099050">(</span><span class="ident" id="6099051"><a href="/go/parser/parser.go.html#6051212">syncDecl</a></span><span class="op" id="6099059">)</span><span class="op" id="6099060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099069">}</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099075"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099076">.</span><span class="ident" id="6099077">closeScope</span><span class="op" id="6099087">(</span><span class="op" id="6099088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099091"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6099097">(</span><span class="ident" id="6099098"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099099">.</span><span class="ident" id="6099100">topScope</span>&nbsp;<span class="op" id="6099109">==</span>&nbsp;<span class="ident" id="6099112">nil</span><span class="op" id="6099115">,</span>&nbsp;<span class="string" id="6099117">&#34;unbalanced&nbsp;scopes&#34;</span><span class="op" id="6099136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099139"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6099145">(</span><span class="ident" id="6099146"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099147">.</span><span class="ident" id="6099148">labelScope</span>&nbsp;<span class="op" id="6099159">==</span>&nbsp;<span class="ident" id="6099162">nil</span><span class="op" id="6099165">,</span>&nbsp;<span class="string" id="6099167">&#34;unbalanced&nbsp;label&nbsp;scopes&#34;</span><span class="op" id="6099192">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6099196">//&nbsp;resolve&nbsp;global&nbsp;identifiers&nbsp;within&nbsp;the&nbsp;same&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099248">i</span>&nbsp;<span class="op" id="6099250">:=</span>&nbsp;<span class="num" id="6099253">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099256">for</span>&nbsp;<span class="ident" id="6099260">_</span><span class="op" id="6099261">,</span>&nbsp;<span class="ident" id="6099263">ident</span>&nbsp;<span class="op" id="6099269">:=</span>&nbsp;<span class="keyword" id="6099272">range</span>&nbsp;<span class="ident" id="6099278"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099279">.</span><span class="ident" id="6099280">unresolved</span>&nbsp;<span class="op" id="6099291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6099295">//&nbsp;i&nbsp;&lt;=&nbsp;index&nbsp;for&nbsp;current&nbsp;ident</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099329"><a href="/go/parser/parser.go.html#6049843">assert</a></span><span class="op" id="6099335">(</span><span class="ident" id="6099336"><a href="/go/parser/parser.go.html#6099263">ident</a></span><span class="op" id="6099341">.</span><span class="ident" id="6099342">Obj</span>&nbsp;<span class="op" id="6099346">==</span>&nbsp;<span class="ident" id="6099349"><a href="/go/parser/parser.go.html#6042740">unresolved</a></span><span class="op" id="6099359">,</span>&nbsp;<span class="string" id="6099361">&#34;object&nbsp;already&nbsp;resolved&#34;</span><span class="op" id="6099386">)</span><br>
<span class="lineno">2445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099390"><a href="/go/parser/parser.go.html#6099263">ident</a></span><span class="op" id="6099395">.</span><span class="ident" id="6099396">Obj</span>&nbsp;<span class="op" id="6099400">=</span>&nbsp;<span class="ident" id="6099402"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099403">.</span><span class="ident" id="6099404">pkgScope</span><span class="op" id="6099412">.</span><span class="ident" id="6099413">Lookup</span><span class="op" id="6099419">(</span><span class="ident" id="6099420"><a href="/go/parser/parser.go.html#6099263">ident</a></span><span class="op" id="6099425">.</span><span class="ident" id="6099426">Name</span><span class="op" id="6099430">)</span>&nbsp;<span class="comment" id="6099432">//&nbsp;also&nbsp;removes&nbsp;unresolved&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099470">if</span>&nbsp;<span class="ident" id="6099473"><a href="/go/parser/parser.go.html#6099263">ident</a></span><span class="op" id="6099478">.</span><span class="ident" id="6099479">Obj</span>&nbsp;<span class="op" id="6099483">==</span>&nbsp;<span class="ident" id="6099486">nil</span>&nbsp;<span class="op" id="6099490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099495"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099496">.</span><span class="ident" id="6099497">unresolved</span><span class="op" id="6099507">[</span><span class="ident" id="6099508"><a href="/go/parser/parser.go.html#6099248">i</a></span><span class="op" id="6099509">]</span>&nbsp;<span class="op" id="6099511">=</span>&nbsp;<span class="ident" id="6099513"><a href="/go/parser/parser.go.html#6099263">ident</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099522"><a href="/go/parser/parser.go.html#6099248">i</a></span><span class="op" id="6099523">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099528">}</span><br>
<span class="lineno">2450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6099535">return</span>&nbsp;<span class="op" id="6099542">&amp;</span><span class="ident" id="6099543"><a href="/go/parser/parser.go.html#6038032">ast</a></span><span class="op" id="6099546">.</span><span class="ident" id="6099547">File</span><span class="op" id="6099551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099555">Doc</span><span class="op" id="6099558">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099567"><a href="/go/parser/parser.go.html#6098237">doc</a></span><span class="op" id="6099570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099574">Package</span><span class="op" id="6099581">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099586"><a href="/go/parser/parser.go.html#6098259">pos</a></span><span class="op" id="6099589">,</span><br>
<span class="lineno">2455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099593">Name</span><span class="op" id="6099597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099605"><a href="/go/parser/parser.go.html#6098396">ident</a></span><span class="op" id="6099610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099614">Decls</span><span class="op" id="6099619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099626"><a href="/go/parser/parser.go.html#6098747">decls</a></span><span class="op" id="6099631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099635">Scope</span><span class="op" id="6099640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099647"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099648">.</span><span class="ident" id="6099649">pkgScope</span><span class="op" id="6099657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099661">Imports</span><span class="op" id="6099668">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6099673"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099674">.</span><span class="ident" id="6099675">imports</span><span class="op" id="6099682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099686">Unresolved</span><span class="op" id="6099696">:</span>&nbsp;<span class="ident" id="6099698"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099699">.</span><span class="ident" id="6099700">unresolved</span><span class="op" id="6099710">[</span><span class="num" id="6099711">0</span><span class="op" id="6099712">:</span><span class="ident" id="6099713"><a href="/go/parser/parser.go.html#6099248">i</a></span><span class="op" id="6099714">]</span><span class="op" id="6099715">,</span><br>
<span class="lineno">2460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6099719">Comments</span><span class="op" id="6099727">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6099731"><a href="/go/parser/parser.go.html#6097975">p</a></span><span class="op" id="6099732">.</span><span class="ident" id="6099733">comments</span><span class="op" id="6099741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6099744">}</span><br>
<span class="lineno"></span><span class="op" id="6099746">}</span>
</div>
</body>
</html>
