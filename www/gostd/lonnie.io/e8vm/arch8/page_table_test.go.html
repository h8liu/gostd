<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/arch8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/arch8/console.go.html">console.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu.go.html">cpu.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/cpu_test.go.html">cpu_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/device.go.html">device.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/exception.go.html">exception.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_br_test.go.html">inst_br_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_imm_test.go.html">inst_imm_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_reg_test.go.html">inst_reg_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/int_bus.go.html">int_bus.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt.go.html">interrupt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/interrupt_test.go.html">interrupt_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/machine.go.html">machine.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/multi_core.go.html">multi_core.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page.go.html">page.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table.go.html">page_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_table_test.go.html">page_table_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/page_test.go.html">page_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory.go.html">phy_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/phy_memory_test.go.html">phy_memory_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs.go.html">regs.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/regs_test.go.html">regs_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/run_image.go.html">run_image.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/serial.go.html">serial.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/ticker.go.html">ticker.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory.go.html">virt_memory.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/arch8/virt_memory_test.go.html">virt_memory_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="8026531">package</span>&nbsp;<span class="ident" id="8026539">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8026546">import</span>&nbsp;<span class="op" id="8026553">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8026556">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="8026566">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8026569">func</span>&nbsp;<span class="ident" id="8026574">TestPageTable</span><span class="op" id="8026587">(</span><span class="ident" id="8026588">t</span>&nbsp;<span class="op" id="8026590">*</span><span class="ident" id="8026591">testing</span><span class="op" id="8026598">.</span><span class="ident" id="8026599">T</span><span class="op" id="8026600">)</span>&nbsp;<span class="op" id="8026602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026605">ne</span>&nbsp;<span class="op" id="8026608">:=</span>&nbsp;<span class="keyword" id="8026611">func</span><span class="op" id="8026615">(</span><span class="ident" id="8026616">e</span>&nbsp;<span class="op" id="8026618">*</span><span class="ident" id="8026619">Excep</span><span class="op" id="8026624">)</span>&nbsp;<span class="op" id="8026626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026630">if</span>&nbsp;<span class="ident" id="8026633">e</span>&nbsp;<span class="op" id="8026635">!=</span>&nbsp;<span class="ident" id="8026638">nil</span>&nbsp;<span class="op" id="8026642">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026647">t</span><span class="op" id="8026648">.</span><span class="ident" id="8026649">Fatal</span><span class="op" id="8026654">(</span><span class="ident" id="8026655">e</span><span class="op" id="8026656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026667">as</span>&nbsp;<span class="op" id="8026670">:=</span>&nbsp;<span class="keyword" id="8026673">func</span><span class="op" id="8026677">(</span><span class="ident" id="8026678">cond</span>&nbsp;<span class="builtintype" id="8026683">bool</span><span class="op" id="8026687">)</span>&nbsp;<span class="op" id="8026689">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026693">if</span>&nbsp;<span class="op" id="8026696">!</span><span class="ident" id="8026697">cond</span>&nbsp;<span class="op" id="8026702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026707">t</span><span class="op" id="8026708">.</span><span class="ident" id="8026709">Fail</span><span class="op" id="8026713">(</span><span class="op" id="8026714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026725">m</span>&nbsp;<span class="op" id="8026727">:=</span>&nbsp;<span class="ident" id="8026730">newPhyMemory</span><span class="op" id="8026742">(</span><span class="num" id="8026743">4096</span>&nbsp;<span class="op" id="8026748">*</span>&nbsp;<span class="ident" id="8026750">PageSize</span><span class="op" id="8026758">)</span>&nbsp;<span class="comment" id="8026760">//&nbsp;4&nbsp;2nd&nbsp;level&nbsp;entries</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026785">p8</span>&nbsp;<span class="op" id="8026788">:=</span>&nbsp;<span class="ident" id="8026791">m</span><span class="op" id="8026792">.</span><span class="ident" id="8026793">Page</span><span class="op" id="8026797">(</span><span class="num" id="8026798">8</span><span class="op" id="8026799">)</span>&nbsp;<span class="comment" id="8026801">//&nbsp;page&nbsp;eight</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026816">p9</span>&nbsp;<span class="op" id="8026819">:=</span>&nbsp;<span class="ident" id="8026822">m</span><span class="op" id="8026823">.</span><span class="ident" id="8026824">Page</span><span class="op" id="8026828">(</span><span class="num" id="8026829">9</span><span class="op" id="8026830">)</span>&nbsp;<span class="comment" id="8026832">//&nbsp;page&nbsp;nine</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026847">pte1</span>&nbsp;<span class="op" id="8026852">:=</span>&nbsp;<span class="ident" id="8026855">ptEntry</span><span class="op" id="8026862">(</span><span class="num" id="8026863">0x9000</span><span class="op" id="8026869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026872">pte1</span><span class="op" id="8026876">.</span><span class="ident" id="8026877">setBit</span><span class="op" id="8026883">(</span><span class="ident" id="8026884">pteValid</span><span class="op" id="8026892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026895">p8</span><span class="op" id="8026897">.</span><span class="ident" id="8026898">WriteWord</span><span class="op" id="8026907">(</span><span class="num" id="8026908">0</span><span class="op" id="8026909">,</span>&nbsp;<span class="builtintype" id="8026911">uint32</span><span class="op" id="8026917">(</span><span class="ident" id="8026918">pte1</span><span class="op" id="8026922">)</span><span class="op" id="8026923">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026927">pte2</span>&nbsp;<span class="op" id="8026932">:=</span>&nbsp;<span class="ident" id="8026935">ptEntry</span><span class="op" id="8026942">(</span><span class="num" id="8026943">0xa000</span><span class="op" id="8026949">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026952">pte2</span><span class="op" id="8026956">.</span><span class="ident" id="8026957">setBit</span><span class="op" id="8026963">(</span><span class="ident" id="8026964">pteValid</span><span class="op" id="8026972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026975">for</span>&nbsp;<span class="ident" id="8026979">i</span>&nbsp;<span class="op" id="8026981">:=</span>&nbsp;<span class="builtintype" id="8026984">uint32</span><span class="op" id="8026990">(</span><span class="num" id="8026991">0</span><span class="op" id="8026992">)</span><span class="op" id="8026993">;</span>&nbsp;<span class="ident" id="8026995">i</span>&nbsp;<span class="op" id="8026997">&lt;</span>&nbsp;<span class="num" id="8026999">512</span><span class="op" id="8027002">;</span>&nbsp;<span class="ident" id="8027004">i</span><span class="op" id="8027005">++</span>&nbsp;<span class="op" id="8027008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8027012">//&nbsp;map&nbsp;all&nbsp;pages&nbsp;from&nbsp;0&nbsp;to&nbsp;1023&nbsp;to&nbsp;page&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027057">p9</span><span class="op" id="8027059">.</span><span class="ident" id="8027060">WriteWord</span><span class="op" id="8027069">(</span><span class="ident" id="8027070">i</span><span class="op" id="8027071">*</span><span class="num" id="8027072">4</span><span class="op" id="8027073">,</span>&nbsp;<span class="builtintype" id="8027075">uint32</span><span class="op" id="8027081">(</span><span class="ident" id="8027082">pte2</span><span class="op" id="8027086">)</span><span class="op" id="8027087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027090">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027094">pt</span>&nbsp;<span class="op" id="8027097">:=</span>&nbsp;<span class="ident" id="8027100">newPageTable</span><span class="op" id="8027112">(</span><span class="ident" id="8027113">m</span><span class="op" id="8027114">,</span>&nbsp;<span class="num" id="8027116">0x8000</span><span class="op" id="8027122">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027126">for</span>&nbsp;<span class="ident" id="8027130">i</span>&nbsp;<span class="op" id="8027132">:=</span>&nbsp;<span class="builtintype" id="8027135">uint32</span><span class="op" id="8027141">(</span><span class="num" id="8027142">0</span><span class="op" id="8027143">)</span><span class="op" id="8027144">;</span>&nbsp;<span class="ident" id="8027146">i</span>&nbsp;<span class="op" id="8027148">&lt;</span>&nbsp;<span class="num" id="8027150">512</span><span class="op" id="8027153">;</span>&nbsp;<span class="ident" id="8027155">i</span><span class="op" id="8027156">++</span>&nbsp;<span class="op" id="8027159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027163">ret</span><span class="op" id="8027166">,</span>&nbsp;<span class="ident" id="8027168">e</span>&nbsp;<span class="op" id="8027170">:=</span>&nbsp;<span class="ident" id="8027173">pt</span><span class="op" id="8027175">.</span><span class="ident" id="8027176">Translate</span><span class="op" id="8027185">(</span><span class="ident" id="8027186">i</span><span class="op" id="8027187">*</span><span class="num" id="8027188">0x1000</span><span class="op" id="8027194">+</span><span class="num" id="8027195">0x341</span><span class="op" id="8027200">,</span>&nbsp;<span class="num" id="8027202">0</span><span class="op" id="8027203">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027207">ne</span><span class="op" id="8027209">(</span><span class="ident" id="8027210">e</span><span class="op" id="8027211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027215">as</span><span class="op" id="8027217">(</span><span class="ident" id="8027218">ret</span>&nbsp;<span class="op" id="8027222">==</span>&nbsp;<span class="num" id="8027225">0xa341</span><span class="op" id="8027231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027238">for</span>&nbsp;<span class="ident" id="8027242">i</span>&nbsp;<span class="op" id="8027244">:=</span>&nbsp;<span class="builtintype" id="8027247">uint32</span><span class="op" id="8027253">(</span><span class="num" id="8027254">512</span><span class="op" id="8027257">)</span><span class="op" id="8027258">;</span>&nbsp;<span class="ident" id="8027260">i</span>&nbsp;<span class="op" id="8027262">&lt;</span>&nbsp;<span class="num" id="8027264">2048</span><span class="op" id="8027268">;</span>&nbsp;<span class="ident" id="8027270">i</span><span class="op" id="8027271">++</span>&nbsp;<span class="op" id="8027274">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027278">ret</span><span class="op" id="8027281">,</span>&nbsp;<span class="ident" id="8027283">e</span>&nbsp;<span class="op" id="8027285">:=</span>&nbsp;<span class="ident" id="8027288">pt</span><span class="op" id="8027290">.</span><span class="ident" id="8027291">Translate</span><span class="op" id="8027300">(</span><span class="ident" id="8027301">i</span><span class="op" id="8027302">*</span><span class="num" id="8027303">0x1000</span><span class="op" id="8027309">,</span>&nbsp;<span class="num" id="8027311">0</span><span class="op" id="8027312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027316">as</span><span class="op" id="8027318">(</span><span class="ident" id="8027319">ret</span>&nbsp;<span class="op" id="8027323">==</span>&nbsp;<span class="num" id="8027326">0</span><span class="op" id="8027327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027331">as</span><span class="op" id="8027333">(</span><span class="ident" id="8027334">e</span><span class="op" id="8027335">.</span><span class="ident" id="8027336">Code</span>&nbsp;<span class="op" id="8027341">==</span>&nbsp;<span class="ident" id="8027344">ErrPageFault</span><span class="op" id="8027356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027363">addr</span>&nbsp;<span class="op" id="8027368">:=</span>&nbsp;<span class="builtintype" id="8027371">uint32</span><span class="op" id="8027377">(</span><span class="num" id="8027378">3</span><span class="op" id="8027379">*</span><span class="ident" id="8027380">PageSize</span>&nbsp;<span class="op" id="8027389">+</span>&nbsp;<span class="num" id="8027391">0x23</span><span class="op" id="8027395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027398">_</span><span class="op" id="8027399">,</span>&nbsp;<span class="ident" id="8027401">e</span>&nbsp;<span class="op" id="8027403">:=</span>&nbsp;<span class="ident" id="8027406">pt</span><span class="op" id="8027408">.</span><span class="ident" id="8027409">TranslateRead</span><span class="op" id="8027422">(</span><span class="ident" id="8027423">addr</span><span class="op" id="8027427">,</span>&nbsp;<span class="num" id="8027429">0</span><span class="op" id="8027430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027433">as</span><span class="op" id="8027435">(</span><span class="ident" id="8027436">e</span>&nbsp;<span class="op" id="8027438">==</span>&nbsp;<span class="ident" id="8027441">nil</span><span class="op" id="8027444">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027448">pte2</span><span class="op" id="8027452">.</span><span class="ident" id="8027453">setBit</span><span class="op" id="8027459">(</span><span class="ident" id="8027460">pteReadonly</span><span class="op" id="8027471">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027474">p9</span><span class="op" id="8027476">.</span><span class="ident" id="8027477">WriteWord</span><span class="op" id="8027486">(</span><span class="num" id="8027487">3</span><span class="op" id="8027488">*</span><span class="num" id="8027489">4</span><span class="op" id="8027490">,</span>&nbsp;<span class="builtintype" id="8027492">uint32</span><span class="op" id="8027498">(</span><span class="ident" id="8027499">pte2</span><span class="op" id="8027503">)</span><span class="op" id="8027504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027507">_</span><span class="op" id="8027508">,</span>&nbsp;<span class="ident" id="8027510">e</span>&nbsp;<span class="op" id="8027512">=</span>&nbsp;<span class="ident" id="8027514">pt</span><span class="op" id="8027516">.</span><span class="ident" id="8027517">TranslateRead</span><span class="op" id="8027530">(</span><span class="ident" id="8027531">addr</span><span class="op" id="8027535">,</span>&nbsp;<span class="num" id="8027537">0</span><span class="op" id="8027538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027541">as</span><span class="op" id="8027543">(</span><span class="ident" id="8027544">e</span>&nbsp;<span class="op" id="8027546">==</span>&nbsp;<span class="ident" id="8027549">nil</span><span class="op" id="8027552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027555">_</span><span class="op" id="8027556">,</span>&nbsp;<span class="ident" id="8027558">e</span>&nbsp;<span class="op" id="8027560">=</span>&nbsp;<span class="ident" id="8027562">pt</span><span class="op" id="8027564">.</span><span class="ident" id="8027565">TranslateWrite</span><span class="op" id="8027579">(</span><span class="ident" id="8027580">addr</span><span class="op" id="8027584">,</span>&nbsp;<span class="num" id="8027586">0</span><span class="op" id="8027587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027590">as</span><span class="op" id="8027592">(</span><span class="ident" id="8027593">e</span><span class="op" id="8027594">.</span><span class="ident" id="8027595">Code</span>&nbsp;<span class="op" id="8027600">==</span>&nbsp;<span class="ident" id="8027603">ErrPageReadonly</span><span class="op" id="8027618">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027622">w</span>&nbsp;<span class="op" id="8027624">:=</span>&nbsp;<span class="ident" id="8027627">p9</span><span class="op" id="8027629">.</span><span class="ident" id="8027630">ReadWord</span><span class="op" id="8027638">(</span><span class="num" id="8027639">3</span>&nbsp;<span class="op" id="8027641">*</span>&nbsp;<span class="num" id="8027643">4</span><span class="op" id="8027644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027647">as</span><span class="op" id="8027649">(</span><span class="op" id="8027650">(</span><span class="ident" id="8027651">w</span>&nbsp;<span class="op" id="8027653">&amp;</span>&nbsp;<span class="op" id="8027655">(</span><span class="num" id="8027656">0x1</span>&nbsp;<span class="op" id="8027660">&lt;&lt;</span>&nbsp;<span class="ident" id="8027663">pteUse</span><span class="op" id="8027669">)</span><span class="op" id="8027670">)</span>&nbsp;<span class="op" id="8027672">!=</span>&nbsp;<span class="num" id="8027675">0</span><span class="op" id="8027676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027679">as</span><span class="op" id="8027681">(</span><span class="op" id="8027682">(</span><span class="ident" id="8027683">w</span>&nbsp;<span class="op" id="8027685">&amp;</span>&nbsp;<span class="op" id="8027687">(</span><span class="num" id="8027688">0x1</span>&nbsp;<span class="op" id="8027692">&lt;&lt;</span>&nbsp;<span class="ident" id="8027695">pteDirty</span><span class="op" id="8027703">)</span><span class="op" id="8027704">)</span>&nbsp;<span class="op" id="8027706">==</span>&nbsp;<span class="num" id="8027709">0</span><span class="op" id="8027710">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027714">addr</span>&nbsp;<span class="op" id="8027719">+=</span>&nbsp;<span class="ident" id="8027722">PageSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027732">_</span><span class="op" id="8027733">,</span>&nbsp;<span class="ident" id="8027735">e</span>&nbsp;<span class="op" id="8027737">=</span>&nbsp;<span class="ident" id="8027739">pt</span><span class="op" id="8027741">.</span><span class="ident" id="8027742">TranslateWrite</span><span class="op" id="8027756">(</span><span class="ident" id="8027757">addr</span><span class="op" id="8027761">,</span>&nbsp;<span class="num" id="8027763">0</span><span class="op" id="8027764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027767">as</span><span class="op" id="8027769">(</span><span class="ident" id="8027770">e</span>&nbsp;<span class="op" id="8027772">==</span>&nbsp;<span class="ident" id="8027775">nil</span><span class="op" id="8027778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027781">w</span>&nbsp;<span class="op" id="8027783">=</span>&nbsp;<span class="ident" id="8027785">p9</span><span class="op" id="8027787">.</span><span class="ident" id="8027788">ReadWord</span><span class="op" id="8027796">(</span><span class="num" id="8027797">4</span>&nbsp;<span class="op" id="8027799">*</span>&nbsp;<span class="num" id="8027801">4</span><span class="op" id="8027802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027805">as</span><span class="op" id="8027807">(</span><span class="op" id="8027808">(</span><span class="ident" id="8027809">w</span>&nbsp;<span class="op" id="8027811">&amp;</span>&nbsp;<span class="op" id="8027813">(</span><span class="num" id="8027814">0x1</span>&nbsp;<span class="op" id="8027818">&lt;&lt;</span>&nbsp;<span class="ident" id="8027821">pteDirty</span><span class="op" id="8027829">)</span><span class="op" id="8027830">)</span>&nbsp;<span class="op" id="8027832">!=</span>&nbsp;<span class="num" id="8027835">0</span><span class="op" id="8027836">)</span><br>
<span class="lineno">70</span><span class="op" id="8027838">}</span>
</div>
</body>
</html>
