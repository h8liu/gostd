<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8215389">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8215445">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8215499">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8215550">package</span>&nbsp;<span class="ident" id="8215558">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8215563">import</span>&nbsp;<span class="op" id="8215570">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8215573">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8215580">&#34;os/exec&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8215591">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8215601">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8215604">func</span>&nbsp;<span class="op" id="8215609">(</span><span class="ident" id="8215610">ti</span>&nbsp;<span class="op" id="8215613">*</span><span class="ident" id="8215614">testInterface</span><span class="op" id="8215627">)</span>&nbsp;<span class="ident" id="8215629">setBroadcast</span><span class="op" id="8215641">(</span><span class="ident" id="8215642">suffix</span>&nbsp;<span class="builtintype" id="8215649">int</span><span class="op" id="8215652">)</span>&nbsp;<span class="builtintype" id="8215654">error</span>&nbsp;<span class="op" id="8215660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215663">ti</span><span class="op" id="8215665">.</span><span class="ident" id="8215666">name</span>&nbsp;<span class="op" id="8215671">=</span>&nbsp;<span class="ident" id="8215673">fmt</span><span class="op" id="8215676">.</span><span class="ident" id="8215677">Sprintf</span><span class="op" id="8215684">(</span><span class="string" id="8215685">&#34;gotest%d&#34;</span><span class="op" id="8215695">,</span>&nbsp;<span class="ident" id="8215697">suffix</span><span class="op" id="8215703">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215706">xname</span><span class="op" id="8215711">,</span>&nbsp;<span class="ident" id="8215713">err</span>&nbsp;<span class="op" id="8215717">:=</span>&nbsp;<span class="ident" id="8215720">exec</span><span class="op" id="8215724">.</span><span class="ident" id="8215725">LookPath</span><span class="op" id="8215733">(</span><span class="string" id="8215734">&#34;ip&#34;</span><span class="op" id="8215738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215741">if</span>&nbsp;<span class="ident" id="8215744">err</span>&nbsp;<span class="op" id="8215748">!=</span>&nbsp;<span class="ident" id="8215751">nil</span>&nbsp;<span class="op" id="8215755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8215759">return</span>&nbsp;<span class="ident" id="8215766">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215774">ti</span><span class="op" id="8215776">.</span><span class="ident" id="8215777">setupCmds</span>&nbsp;<span class="op" id="8215787">=</span>&nbsp;<span class="builtinfunc" id="8215789">append</span><span class="op" id="8215795">(</span><span class="ident" id="8215796">ti</span><span class="op" id="8215798">.</span><span class="ident" id="8215799">setupCmds</span><span class="op" id="8215808">,</span>&nbsp;<span class="op" id="8215810">&amp;</span><span class="ident" id="8215811">exec</span><span class="op" id="8215815">.</span><span class="ident" id="8215816">Cmd</span><span class="op" id="8215819">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215823">Path</span><span class="op" id="8215827">:</span>&nbsp;<span class="ident" id="8215829">xname</span><span class="op" id="8215834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215838">Args</span><span class="op" id="8215842">:</span>&nbsp;<span class="op" id="8215844">[</span><span class="op" id="8215845">]</span><span class="builtintype" id="8215846">string</span><span class="op" id="8215852">{</span><span class="string" id="8215853">&#34;ip&#34;</span><span class="op" id="8215857">,</span>&nbsp;<span class="string" id="8215859">&#34;link&#34;</span><span class="op" id="8215865">,</span>&nbsp;<span class="string" id="8215867">&#34;add&#34;</span><span class="op" id="8215872">,</span>&nbsp;<span class="ident" id="8215874">ti</span><span class="op" id="8215876">.</span><span class="ident" id="8215877">name</span><span class="op" id="8215881">,</span>&nbsp;<span class="string" id="8215883">&#34;type&#34;</span><span class="op" id="8215889">,</span>&nbsp;<span class="string" id="8215891">&#34;dummy&#34;</span><span class="op" id="8215898">}</span><span class="op" id="8215899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8215902">}</span><span class="op" id="8215903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215906">ti</span><span class="op" id="8215908">.</span><span class="ident" id="8215909">teardownCmds</span>&nbsp;<span class="op" id="8215922">=</span>&nbsp;<span class="builtinfunc" id="8215924">append</span><span class="op" id="8215930">(</span><span class="ident" id="8215931">ti</span><span class="op" id="8215933">.</span><span class="ident" id="8215934">teardownCmds</span><span class="op" id="8215946">,</span>&nbsp;<span class="op" id="8215948">&amp;</span><span class="ident" id="8215949">exec</span><span class="op" id="8215953">.</span><span class="ident" id="8215954">Cmd</span><span class="op" id="8215957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215961">Path</span><span class="op" id="8215965">:</span>&nbsp;<span class="ident" id="8215967">xname</span><span class="op" id="8215972">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8215976">Args</span><span class="op" id="8215980">:</span>&nbsp;<span class="op" id="8215982">[</span><span class="op" id="8215983">]</span><span class="builtintype" id="8215984">string</span><span class="op" id="8215990">{</span><span class="string" id="8215991">&#34;ip&#34;</span><span class="op" id="8215995">,</span>&nbsp;<span class="string" id="8215997">&#34;link&#34;</span><span class="op" id="8216003">,</span>&nbsp;<span class="string" id="8216005">&#34;delete&#34;</span><span class="op" id="8216013">,</span>&nbsp;<span class="ident" id="8216015">ti</span><span class="op" id="8216017">.</span><span class="ident" id="8216018">name</span><span class="op" id="8216022">,</span>&nbsp;<span class="string" id="8216024">&#34;type&#34;</span><span class="op" id="8216030">,</span>&nbsp;<span class="string" id="8216032">&#34;dummy&#34;</span><span class="op" id="8216039">}</span><span class="op" id="8216040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216043">}</span><span class="op" id="8216044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216047">return</span>&nbsp;<span class="ident" id="8216054">nil</span><br>
<span class="lineno"></span><span class="op" id="8216058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8216061">func</span>&nbsp;<span class="op" id="8216066">(</span><span class="ident" id="8216067">ti</span>&nbsp;<span class="op" id="8216070">*</span><span class="ident" id="8216071">testInterface</span><span class="op" id="8216084">)</span>&nbsp;<span class="ident" id="8216086">setPointToPoint</span><span class="op" id="8216101">(</span><span class="ident" id="8216102">suffix</span>&nbsp;<span class="builtintype" id="8216109">int</span><span class="op" id="8216112">,</span>&nbsp;<span class="ident" id="8216114">local</span><span class="op" id="8216119">,</span>&nbsp;<span class="ident" id="8216121">remote</span>&nbsp;<span class="builtintype" id="8216128">string</span><span class="op" id="8216134">)</span>&nbsp;<span class="builtintype" id="8216136">error</span>&nbsp;<span class="op" id="8216142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216145">ti</span><span class="op" id="8216147">.</span><span class="ident" id="8216148">name</span>&nbsp;<span class="op" id="8216153">=</span>&nbsp;<span class="ident" id="8216155">fmt</span><span class="op" id="8216158">.</span><span class="ident" id="8216159">Sprintf</span><span class="op" id="8216166">(</span><span class="string" id="8216167">&#34;gotest%d&#34;</span><span class="op" id="8216177">,</span>&nbsp;<span class="ident" id="8216179">suffix</span><span class="op" id="8216185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216188">ti</span><span class="op" id="8216190">.</span><span class="ident" id="8216191">local</span>&nbsp;<span class="op" id="8216197">=</span>&nbsp;<span class="ident" id="8216199">local</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216206">ti</span><span class="op" id="8216208">.</span><span class="ident" id="8216209">remote</span>&nbsp;<span class="op" id="8216216">=</span>&nbsp;<span class="ident" id="8216218">remote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216226">xname</span><span class="op" id="8216231">,</span>&nbsp;<span class="ident" id="8216233">err</span>&nbsp;<span class="op" id="8216237">:=</span>&nbsp;<span class="ident" id="8216240">exec</span><span class="op" id="8216244">.</span><span class="ident" id="8216245">LookPath</span><span class="op" id="8216253">(</span><span class="string" id="8216254">&#34;ip&#34;</span><span class="op" id="8216258">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216261">if</span>&nbsp;<span class="ident" id="8216264">err</span>&nbsp;<span class="op" id="8216268">!=</span>&nbsp;<span class="ident" id="8216271">nil</span>&nbsp;<span class="op" id="8216275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216279">return</span>&nbsp;<span class="ident" id="8216286">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216294">ti</span><span class="op" id="8216296">.</span><span class="ident" id="8216297">setupCmds</span>&nbsp;<span class="op" id="8216307">=</span>&nbsp;<span class="builtinfunc" id="8216309">append</span><span class="op" id="8216315">(</span><span class="ident" id="8216316">ti</span><span class="op" id="8216318">.</span><span class="ident" id="8216319">setupCmds</span><span class="op" id="8216328">,</span>&nbsp;<span class="op" id="8216330">&amp;</span><span class="ident" id="8216331">exec</span><span class="op" id="8216335">.</span><span class="ident" id="8216336">Cmd</span><span class="op" id="8216339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216343">Path</span><span class="op" id="8216347">:</span>&nbsp;<span class="ident" id="8216349">xname</span><span class="op" id="8216354">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216358">Args</span><span class="op" id="8216362">:</span>&nbsp;<span class="op" id="8216364">[</span><span class="op" id="8216365">]</span><span class="builtintype" id="8216366">string</span><span class="op" id="8216372">{</span><span class="string" id="8216373">&#34;ip&#34;</span><span class="op" id="8216377">,</span>&nbsp;<span class="string" id="8216379">&#34;tunnel&#34;</span><span class="op" id="8216387">,</span>&nbsp;<span class="string" id="8216389">&#34;add&#34;</span><span class="op" id="8216394">,</span>&nbsp;<span class="ident" id="8216396">ti</span><span class="op" id="8216398">.</span><span class="ident" id="8216399">name</span><span class="op" id="8216403">,</span>&nbsp;<span class="string" id="8216405">&#34;mode&#34;</span><span class="op" id="8216411">,</span>&nbsp;<span class="string" id="8216413">&#34;gre&#34;</span><span class="op" id="8216418">,</span>&nbsp;<span class="string" id="8216420">&#34;local&#34;</span><span class="op" id="8216427">,</span>&nbsp;<span class="ident" id="8216429">local</span><span class="op" id="8216434">,</span>&nbsp;<span class="string" id="8216436">&#34;remote&#34;</span><span class="op" id="8216444">,</span>&nbsp;<span class="ident" id="8216446">remote</span><span class="op" id="8216452">}</span><span class="op" id="8216453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216456">}</span><span class="op" id="8216457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216460">ti</span><span class="op" id="8216462">.</span><span class="ident" id="8216463">teardownCmds</span>&nbsp;<span class="op" id="8216476">=</span>&nbsp;<span class="builtinfunc" id="8216478">append</span><span class="op" id="8216484">(</span><span class="ident" id="8216485">ti</span><span class="op" id="8216487">.</span><span class="ident" id="8216488">teardownCmds</span><span class="op" id="8216500">,</span>&nbsp;<span class="op" id="8216502">&amp;</span><span class="ident" id="8216503">exec</span><span class="op" id="8216507">.</span><span class="ident" id="8216508">Cmd</span><span class="op" id="8216511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216515">Path</span><span class="op" id="8216519">:</span>&nbsp;<span class="ident" id="8216521">xname</span><span class="op" id="8216526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216530">Args</span><span class="op" id="8216534">:</span>&nbsp;<span class="op" id="8216536">[</span><span class="op" id="8216537">]</span><span class="builtintype" id="8216538">string</span><span class="op" id="8216544">{</span><span class="string" id="8216545">&#34;ip&#34;</span><span class="op" id="8216549">,</span>&nbsp;<span class="string" id="8216551">&#34;tunnel&#34;</span><span class="op" id="8216559">,</span>&nbsp;<span class="string" id="8216561">&#34;del&#34;</span><span class="op" id="8216566">,</span>&nbsp;<span class="ident" id="8216568">ti</span><span class="op" id="8216570">.</span><span class="ident" id="8216571">name</span><span class="op" id="8216575">,</span>&nbsp;<span class="string" id="8216577">&#34;mode&#34;</span><span class="op" id="8216583">,</span>&nbsp;<span class="string" id="8216585">&#34;gre&#34;</span><span class="op" id="8216590">,</span>&nbsp;<span class="string" id="8216592">&#34;local&#34;</span><span class="op" id="8216599">,</span>&nbsp;<span class="ident" id="8216601">local</span><span class="op" id="8216606">,</span>&nbsp;<span class="string" id="8216608">&#34;remote&#34;</span><span class="op" id="8216616">,</span>&nbsp;<span class="ident" id="8216618">remote</span><span class="op" id="8216624">}</span><span class="op" id="8216625">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216628">}</span><span class="op" id="8216629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216632">xname</span><span class="op" id="8216637">,</span>&nbsp;<span class="ident" id="8216639">err</span>&nbsp;<span class="op" id="8216643">=</span>&nbsp;<span class="ident" id="8216645">exec</span><span class="op" id="8216649">.</span><span class="ident" id="8216650">LookPath</span><span class="op" id="8216658">(</span><span class="string" id="8216659">&#34;ifconfig&#34;</span><span class="op" id="8216669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216672">if</span>&nbsp;<span class="ident" id="8216675">err</span>&nbsp;<span class="op" id="8216679">!=</span>&nbsp;<span class="ident" id="8216682">nil</span>&nbsp;<span class="op" id="8216686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216690">return</span>&nbsp;<span class="ident" id="8216697">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216702">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216705">ti</span><span class="op" id="8216707">.</span><span class="ident" id="8216708">setupCmds</span>&nbsp;<span class="op" id="8216718">=</span>&nbsp;<span class="builtinfunc" id="8216720">append</span><span class="op" id="8216726">(</span><span class="ident" id="8216727">ti</span><span class="op" id="8216729">.</span><span class="ident" id="8216730">setupCmds</span><span class="op" id="8216739">,</span>&nbsp;<span class="op" id="8216741">&amp;</span><span class="ident" id="8216742">exec</span><span class="op" id="8216746">.</span><span class="ident" id="8216747">Cmd</span><span class="op" id="8216750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216754">Path</span><span class="op" id="8216758">:</span>&nbsp;<span class="ident" id="8216760">xname</span><span class="op" id="8216765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216769">Args</span><span class="op" id="8216773">:</span>&nbsp;<span class="op" id="8216775">[</span><span class="op" id="8216776">]</span><span class="builtintype" id="8216777">string</span><span class="op" id="8216783">{</span><span class="string" id="8216784">&#34;ifconfig&#34;</span><span class="op" id="8216794">,</span>&nbsp;<span class="ident" id="8216796">ti</span><span class="op" id="8216798">.</span><span class="ident" id="8216799">name</span><span class="op" id="8216803">,</span>&nbsp;<span class="string" id="8216805">&#34;inet&#34;</span><span class="op" id="8216811">,</span>&nbsp;<span class="ident" id="8216813">local</span><span class="op" id="8216818">,</span>&nbsp;<span class="string" id="8216820">&#34;dstaddr&#34;</span><span class="op" id="8216829">,</span>&nbsp;<span class="ident" id="8216831">remote</span><span class="op" id="8216837">}</span><span class="op" id="8216838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216841">}</span><span class="op" id="8216842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8216845">return</span>&nbsp;<span class="ident" id="8216852">nil</span><br>
<span class="lineno">55</span><span class="op" id="8216856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8216859">const</span>&nbsp;<span class="op" id="8216865">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216868">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8216889">=</span>&nbsp;<span class="num" id="8216891">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216895">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8216916">=</span>&nbsp;<span class="num" id="8216918">18</span><br>
<span class="lineno">60</span><span class="op" id="8216921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8216924">var</span>&nbsp;<span class="op" id="8216928">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8216931">igmpInterfaceTable</span>&nbsp;<span class="op" id="8216950">=</span>&nbsp;<span class="op" id="8216952">[</span><span class="op" id="8216953">]</span><span class="ident" id="8216954">Interface</span><span class="op" id="8216963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216967">{</span><span class="ident" id="8216968">Name</span><span class="op" id="8216972">:</span>&nbsp;<span class="string" id="8216974">&#34;lo&#34;</span><span class="op" id="8216978">}</span><span class="op" id="8216979">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8216983">{</span><span class="ident" id="8216984">Name</span><span class="op" id="8216988">:</span>&nbsp;<span class="string" id="8216990">&#34;eth0&#34;</span><span class="op" id="8216996">}</span><span class="op" id="8216997">,</span>&nbsp;<span class="op" id="8216999">{</span><span class="ident" id="8217000">Name</span><span class="op" id="8217004">:</span>&nbsp;<span class="string" id="8217006">&#34;eth1&#34;</span><span class="op" id="8217012">}</span><span class="op" id="8217013">,</span>&nbsp;<span class="op" id="8217015">{</span><span class="ident" id="8217016">Name</span><span class="op" id="8217020">:</span>&nbsp;<span class="string" id="8217022">&#34;eth2&#34;</span><span class="op" id="8217028">}</span><span class="op" id="8217029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217033">{</span><span class="ident" id="8217034">Name</span><span class="op" id="8217038">:</span>&nbsp;<span class="string" id="8217040">&#34;eth0.100&#34;</span><span class="op" id="8217050">}</span><span class="op" id="8217051">,</span>&nbsp;<span class="op" id="8217053">{</span><span class="ident" id="8217054">Name</span><span class="op" id="8217058">:</span>&nbsp;<span class="string" id="8217060">&#34;eth0.101&#34;</span><span class="op" id="8217070">}</span><span class="op" id="8217071">,</span>&nbsp;<span class="op" id="8217073">{</span><span class="ident" id="8217074">Name</span><span class="op" id="8217078">:</span>&nbsp;<span class="string" id="8217080">&#34;eth0.102&#34;</span><span class="op" id="8217090">}</span><span class="op" id="8217091">,</span>&nbsp;<span class="op" id="8217093">{</span><span class="ident" id="8217094">Name</span><span class="op" id="8217098">:</span>&nbsp;<span class="string" id="8217100">&#34;eth0.103&#34;</span><span class="op" id="8217110">}</span><span class="op" id="8217111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217115">{</span><span class="ident" id="8217116">Name</span><span class="op" id="8217120">:</span>&nbsp;<span class="string" id="8217122">&#34;device1tap2&#34;</span><span class="op" id="8217135">}</span><span class="op" id="8217136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217142">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8217162">=</span>&nbsp;<span class="op" id="8217164">[</span><span class="op" id="8217165">]</span><span class="ident" id="8217166">Interface</span><span class="op" id="8217175">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217179">{</span><span class="ident" id="8217180">Name</span><span class="op" id="8217184">:</span>&nbsp;<span class="string" id="8217186">&#34;lo&#34;</span><span class="op" id="8217190">}</span><span class="op" id="8217191">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217195">{</span><span class="ident" id="8217196">Name</span><span class="op" id="8217200">:</span>&nbsp;<span class="string" id="8217202">&#34;eth0&#34;</span><span class="op" id="8217208">}</span><span class="op" id="8217209">,</span>&nbsp;<span class="op" id="8217211">{</span><span class="ident" id="8217212">Name</span><span class="op" id="8217216">:</span>&nbsp;<span class="string" id="8217218">&#34;eth1&#34;</span><span class="op" id="8217224">}</span><span class="op" id="8217225">,</span>&nbsp;<span class="op" id="8217227">{</span><span class="ident" id="8217228">Name</span><span class="op" id="8217232">:</span>&nbsp;<span class="string" id="8217234">&#34;eth2&#34;</span><span class="op" id="8217240">}</span><span class="op" id="8217241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217245">{</span><span class="ident" id="8217246">Name</span><span class="op" id="8217250">:</span>&nbsp;<span class="string" id="8217252">&#34;eth0.100&#34;</span><span class="op" id="8217262">}</span><span class="op" id="8217263">,</span>&nbsp;<span class="op" id="8217265">{</span><span class="ident" id="8217266">Name</span><span class="op" id="8217270">:</span>&nbsp;<span class="string" id="8217272">&#34;eth0.101&#34;</span><span class="op" id="8217282">}</span><span class="op" id="8217283">,</span>&nbsp;<span class="op" id="8217285">{</span><span class="ident" id="8217286">Name</span><span class="op" id="8217290">:</span>&nbsp;<span class="string" id="8217292">&#34;eth0.102&#34;</span><span class="op" id="8217302">}</span><span class="op" id="8217303">,</span>&nbsp;<span class="op" id="8217305">{</span><span class="ident" id="8217306">Name</span><span class="op" id="8217310">:</span>&nbsp;<span class="string" id="8217312">&#34;eth0.103&#34;</span><span class="op" id="8217322">}</span><span class="op" id="8217323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217327">{</span><span class="ident" id="8217328">Name</span><span class="op" id="8217332">:</span>&nbsp;<span class="string" id="8217334">&#34;device1tap2&#34;</span><span class="op" id="8217347">}</span><span class="op" id="8217348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217352">{</span><span class="ident" id="8217353">Name</span><span class="op" id="8217357">:</span>&nbsp;<span class="string" id="8217359">&#34;pan0&#34;</span><span class="op" id="8217365">}</span><span class="op" id="8217366">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217369">}</span><br>
<span class="lineno"></span><span class="op" id="8217371">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8217374">func</span>&nbsp;<span class="ident" id="8217379">TestParseProcNet</span><span class="op" id="8217395">(</span><span class="ident" id="8217396">t</span>&nbsp;<span class="op" id="8217398">*</span><span class="ident" id="8217399">testing</span><span class="op" id="8217406">.</span><span class="ident" id="8217407">T</span><span class="op" id="8217408">)</span>&nbsp;<span class="op" id="8217410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217413">defer</span>&nbsp;<span class="keyword" id="8217419">func</span><span class="op" id="8217423">(</span><span class="op" id="8217424">)</span>&nbsp;<span class="op" id="8217426">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217430">if</span>&nbsp;<span class="ident" id="8217433">p</span>&nbsp;<span class="op" id="8217435">:=</span>&nbsp;<span class="builtinfunc" id="8217438">recover</span><span class="op" id="8217445">(</span><span class="op" id="8217446">)</span><span class="op" id="8217447">;</span>&nbsp;<span class="ident" id="8217449">p</span>&nbsp;<span class="op" id="8217451">!=</span>&nbsp;<span class="ident" id="8217454">nil</span>&nbsp;<span class="op" id="8217458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217463">t</span><span class="op" id="8217464">.</span><span class="ident" id="8217465">Fatalf</span><span class="op" id="8217471">(</span><span class="string" id="8217472">&#34;parseProcNetIGMP&nbsp;or&nbsp;parseProtNetIGMP6&nbsp;panicked:&nbsp;%v&#34;</span><span class="op" id="8217524">,</span>&nbsp;<span class="ident" id="8217526">p</span><span class="op" id="8217527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217531">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217534">}</span><span class="op" id="8217535">(</span><span class="op" id="8217536">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217540">var</span>&nbsp;<span class="ident" id="8217544">ifmat4</span>&nbsp;<span class="op" id="8217551">[</span><span class="op" id="8217552">]</span><span class="ident" id="8217553">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217559">for</span>&nbsp;<span class="ident" id="8217563">_</span><span class="op" id="8217564">,</span>&nbsp;<span class="ident" id="8217566">ifi</span>&nbsp;<span class="op" id="8217570">:=</span>&nbsp;<span class="keyword" id="8217573">range</span>&nbsp;<span class="ident" id="8217579">igmpInterfaceTable</span>&nbsp;<span class="op" id="8217598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217602">ifmat</span>&nbsp;<span class="op" id="8217608">:=</span>&nbsp;<span class="ident" id="8217611">parseProcNetIGMP</span><span class="op" id="8217627">(</span><span class="string" id="8217628">&#34;testdata/igmp&#34;</span><span class="op" id="8217643">,</span>&nbsp;<span class="op" id="8217645">&amp;</span><span class="ident" id="8217646">ifi</span><span class="op" id="8217649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217653">ifmat4</span>&nbsp;<span class="op" id="8217660">=</span>&nbsp;<span class="builtinfunc" id="8217662">append</span><span class="op" id="8217668">(</span><span class="ident" id="8217669">ifmat4</span><span class="op" id="8217675">,</span>&nbsp;<span class="ident" id="8217677">ifmat</span><span class="op" id="8217682">...</span><span class="op" id="8217685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217688">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217691">if</span>&nbsp;<span class="builtinfunc" id="8217694">len</span><span class="op" id="8217697">(</span><span class="ident" id="8217698">ifmat4</span><span class="op" id="8217704">)</span>&nbsp;<span class="op" id="8217706">!=</span>&nbsp;<span class="ident" id="8217709">numOfTestIPv4MCAddrs</span>&nbsp;<span class="op" id="8217730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217734">t</span><span class="op" id="8217735">.</span><span class="ident" id="8217736">Fatalf</span><span class="op" id="8217742">(</span><span class="string" id="8217743">&#34;parseProcNetIGMP&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8217795">,</span>&nbsp;<span class="builtinfunc" id="8217797">len</span><span class="op" id="8217800">(</span><span class="ident" id="8217801">ifmat4</span><span class="op" id="8217807">)</span><span class="op" id="8217808">,</span>&nbsp;<span class="ident" id="8217810">numOfTestIPv4MCAddrs</span><span class="op" id="8217830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217837">var</span>&nbsp;<span class="ident" id="8217841">ifmat6</span>&nbsp;<span class="op" id="8217848">[</span><span class="op" id="8217849">]</span><span class="ident" id="8217850">Addr</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217856">for</span>&nbsp;<span class="ident" id="8217860">_</span><span class="op" id="8217861">,</span>&nbsp;<span class="ident" id="8217863">ifi</span>&nbsp;<span class="op" id="8217867">:=</span>&nbsp;<span class="keyword" id="8217870">range</span>&nbsp;<span class="ident" id="8217876">igmp6InterfaceTable</span>&nbsp;<span class="op" id="8217896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217900">ifmat</span>&nbsp;<span class="op" id="8217906">:=</span>&nbsp;<span class="ident" id="8217909">parseProcNetIGMP6</span><span class="op" id="8217926">(</span><span class="string" id="8217927">&#34;testdata/igmp6&#34;</span><span class="op" id="8217943">,</span>&nbsp;<span class="op" id="8217945">&amp;</span><span class="ident" id="8217946">ifi</span><span class="op" id="8217949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8217953">ifmat6</span>&nbsp;<span class="op" id="8217960">=</span>&nbsp;<span class="builtinfunc" id="8217962">append</span><span class="op" id="8217968">(</span><span class="ident" id="8217969">ifmat6</span><span class="op" id="8217975">,</span>&nbsp;<span class="ident" id="8217977">ifmat</span><span class="op" id="8217982">...</span><span class="op" id="8217985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8217988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8217991">if</span>&nbsp;<span class="builtinfunc" id="8217994">len</span><span class="op" id="8217997">(</span><span class="ident" id="8217998">ifmat6</span><span class="op" id="8218004">)</span>&nbsp;<span class="op" id="8218006">!=</span>&nbsp;<span class="ident" id="8218009">numOfTestIPv6MCAddrs</span>&nbsp;<span class="op" id="8218030">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8218034">t</span><span class="op" id="8218035">.</span><span class="ident" id="8218036">Fatalf</span><span class="op" id="8218042">(</span><span class="string" id="8218043">&#34;parseProcNetIGMP6&nbsp;returns&nbsp;%v&nbsp;addresses,&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="8218096">,</span>&nbsp;<span class="builtinfunc" id="8218098">len</span><span class="op" id="8218101">(</span><span class="ident" id="8218102">ifmat6</span><span class="op" id="8218108">)</span><span class="op" id="8218109">,</span>&nbsp;<span class="ident" id="8218111">numOfTestIPv6MCAddrs</span><span class="op" id="8218131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8218134">}</span><br>
<span class="lineno"></span><span class="op" id="8218136">}</span>
</div>
</body>
</html>
