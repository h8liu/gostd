<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7452258">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7452314">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7452368">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7452419">package</span>&nbsp;<span class="ident" id="7452427">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7452433">import</span>&nbsp;<span class="op" id="7452440">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452443">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452452">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452461">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452478">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452493">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452500">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452506">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452519">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452540">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452551">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452562">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452572">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452583">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7452593">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7452596">type</span>&nbsp;<span class="ident" id="7452601">respTest</span>&nbsp;<span class="keyword" id="7452610">struct</span>&nbsp;<span class="op" id="7452617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7452620">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="7452625">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7452633">Resp</span>&nbsp;<span class="ident" id="7452638"><a href="/net/http/response.go.html#3816973">Response</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7452648">Body</span>&nbsp;<span class="builtintype" id="7452653">string</span><br>
<span class="lineno"></span><span class="op" id="7452660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7452663">func</span>&nbsp;<span class="ident" id="7452668">dummyReq</span><span class="op" id="7452676">(</span><span class="ident" id="7452677">method</span>&nbsp;<span class="builtintype" id="7452684">string</span><span class="op" id="7452690">)</span>&nbsp;<span class="op" id="7452692">*</span><span class="ident" id="7452693"><a href="/net/http/request.go.html#3791418">Request</a></span>&nbsp;<span class="op" id="7452701">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7452704">return</span>&nbsp;<span class="op" id="7452711">&amp;</span><span class="ident" id="7452712"><a href="/net/http/request.go.html#3791418">Request</a></span><span class="op" id="7452719">{</span><span class="ident" id="7452720">Method</span><span class="op" id="7452726">:</span>&nbsp;<span class="ident" id="7452728"><a href="/net/http/response_test.go.html#7452677">method</a></span><span class="op" id="7452734">}</span><br>
<span class="lineno"></span><span class="op" id="7452736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7452739">func</span>&nbsp;<span class="ident" id="7452744">dummyReq11</span><span class="op" id="7452754">(</span><span class="ident" id="7452755">method</span>&nbsp;<span class="builtintype" id="7452762">string</span><span class="op" id="7452768">)</span>&nbsp;<span class="op" id="7452770">*</span><span class="ident" id="7452771"><a href="/net/http/request.go.html#3791418">Request</a></span>&nbsp;<span class="op" id="7452779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7452782">return</span>&nbsp;<span class="op" id="7452789">&amp;</span><span class="ident" id="7452790"><a href="/net/http/request.go.html#3791418">Request</a></span><span class="op" id="7452797">{</span><span class="ident" id="7452798">Method</span><span class="op" id="7452804">:</span>&nbsp;<span class="ident" id="7452806"><a href="/net/http/response_test.go.html#7452755">method</a></span><span class="op" id="7452812">,</span>&nbsp;<span class="ident" id="7452814">Proto</span><span class="op" id="7452819">:</span>&nbsp;<span class="string" id="7452821">&#34;HTTP/1.1&#34;</span><span class="op" id="7452831">,</span>&nbsp;<span class="ident" id="7452833">ProtoMajor</span><span class="op" id="7452843">:</span>&nbsp;<span class="num" id="7452845">1</span><span class="op" id="7452846">,</span>&nbsp;<span class="ident" id="7452848">ProtoMinor</span><span class="op" id="7452858">:</span>&nbsp;<span class="num" id="7452860">1</span><span class="op" id="7452861">}</span><br>
<span class="lineno">35</span><span class="op" id="7452863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7452866">var</span>&nbsp;<span class="ident" id="7452870">respTests</span>&nbsp;<span class="op" id="7452880">=</span>&nbsp;<span class="op" id="7452882">[</span><span class="op" id="7452883">]</span><span class="ident" id="7452884"><a href="/net/http/response_test.go.html#7452601">respTest</a></span><span class="op" id="7452892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7452895">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7452942">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452946">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7452968">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7452973">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7452997">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453002">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7453009">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453014">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7453027">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453032"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7453040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453045">Status</span><span class="op" id="7453051">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453057">&#34;200&nbsp;OK&#34;</span><span class="op" id="7453065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453070">StatusCode</span><span class="op" id="7453080">:</span>&nbsp;<span class="num" id="7453082">200</span><span class="op" id="7453085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453090">Proto</span><span class="op" id="7453095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453102">&#34;HTTP/1.0&#34;</span><span class="op" id="7453112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453117">ProtoMajor</span><span class="op" id="7453127">:</span>&nbsp;<span class="num" id="7453129">1</span><span class="op" id="7453130">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453135">ProtoMinor</span><span class="op" id="7453145">:</span>&nbsp;<span class="num" id="7453147">0</span><span class="op" id="7453148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453153">Request</span><span class="op" id="7453160">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7453165"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7453173">(</span><span class="string" id="7453174">&#34;GET&#34;</span><span class="op" id="7453179">)</span><span class="op" id="7453180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453185">Header</span><span class="op" id="7453191">:</span>&nbsp;<span class="ident" id="7453193"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7453199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453205">&#34;Connection&#34;</span><span class="op" id="7453217">:</span>&nbsp;<span class="op" id="7453219">{</span><span class="string" id="7453220">&#34;close&#34;</span><span class="op" id="7453227">}</span><span class="op" id="7453228">,</span>&nbsp;<span class="comment" id="7453230">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453255">}</span><span class="op" id="7453256">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453261">Close</span><span class="op" id="7453266">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7453276">true</span><span class="op" id="7453280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453285">ContentLength</span><span class="op" id="7453298">:</span>&nbsp;<span class="op" id="7453300">-</span><span class="num" id="7453301">1</span><span class="op" id="7453302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453306">}</span><span class="op" id="7453307">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453312">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7453325">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453328">}</span><span class="op" id="7453329">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453333">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453391">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453415">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453419">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7453441">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453446">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7453453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453458">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7453471">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453476"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7453484">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453489">Status</span><span class="op" id="7453495">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453504">&#34;200&nbsp;OK&#34;</span><span class="op" id="7453512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453517">StatusCode</span><span class="op" id="7453527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7453532">200</span><span class="op" id="7453535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453540">Proto</span><span class="op" id="7453545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453555">&#34;HTTP/1.1&#34;</span><span class="op" id="7453565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453570">ProtoMajor</span><span class="op" id="7453580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7453585">1</span><span class="op" id="7453586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453591">ProtoMinor</span><span class="op" id="7453601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7453606">1</span><span class="op" id="7453607">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453612">Header</span><span class="op" id="7453618">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7453627"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7453633">{</span><span class="op" id="7453634">}</span><span class="op" id="7453635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453640">Request</span><span class="op" id="7453647">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7453655"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7453663">(</span><span class="string" id="7453664">&#34;GET&#34;</span><span class="op" id="7453669">)</span><span class="op" id="7453670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453675">Close</span><span class="op" id="7453680">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7453690">true</span><span class="op" id="7453694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453699">ContentLength</span><span class="op" id="7453712">:</span>&nbsp;<span class="op" id="7453714">-</span><span class="num" id="7453715">1</span><span class="op" id="7453716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453720">}</span><span class="op" id="7453721">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453726">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7453739">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453742">}</span><span class="op" id="7453743">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7453747">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7453807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453811">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7453841">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453846">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7453853">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7453858">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="7453886">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453891"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7453899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453904">Status</span><span class="op" id="7453910">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453919">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="7453935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453940">StatusCode</span><span class="op" id="7453950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7453955">204</span><span class="op" id="7453958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453963">Proto</span><span class="op" id="7453968">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7453978">&#34;HTTP/1.1&#34;</span><span class="op" id="7453988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7453993">ProtoMajor</span><span class="op" id="7454003">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7454008">1</span><span class="op" id="7454009">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454014">ProtoMinor</span><span class="op" id="7454024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7454029">1</span><span class="op" id="7454030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454035">Header</span><span class="op" id="7454041">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7454050"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7454056">{</span><span class="op" id="7454057">}</span><span class="op" id="7454058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454063">Request</span><span class="op" id="7454070">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7454078"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7454086">(</span><span class="string" id="7454087">&#34;GET&#34;</span><span class="op" id="7454092">)</span><span class="op" id="7454093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454098">Close</span><span class="op" id="7454103">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7454113">false</span><span class="op" id="7454118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454123">ContentLength</span><span class="op" id="7454136">:</span>&nbsp;<span class="num" id="7454138">0</span><span class="op" id="7454139">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454143">}</span><span class="op" id="7454144">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454149">&#34;&#34;</span><span class="op" id="7454151">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454154">}</span><span class="op" id="7454155">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454159">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454207">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7454229">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454234">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7454259">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454264">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7454288">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454293">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7454300">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454305">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7454318">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454323"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7454331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454336">Status</span><span class="op" id="7454342">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7454348">&#34;200&nbsp;OK&#34;</span><span class="op" id="7454356">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454361">StatusCode</span><span class="op" id="7454371">:</span>&nbsp;<span class="num" id="7454373">200</span><span class="op" id="7454376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454381">Proto</span><span class="op" id="7454386">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7454393">&#34;HTTP/1.0&#34;</span><span class="op" id="7454403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454408">ProtoMajor</span><span class="op" id="7454418">:</span>&nbsp;<span class="num" id="7454420">1</span><span class="op" id="7454421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454426">ProtoMinor</span><span class="op" id="7454436">:</span>&nbsp;<span class="num" id="7454438">0</span><span class="op" id="7454439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454444">Request</span><span class="op" id="7454451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7454456"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7454464">(</span><span class="string" id="7454465">&#34;GET&#34;</span><span class="op" id="7454470">)</span><span class="op" id="7454471">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454476">Header</span><span class="op" id="7454482">:</span>&nbsp;<span class="ident" id="7454484"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7454490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454496">&#34;Connection&#34;</span><span class="op" id="7454508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7454514">{</span><span class="string" id="7454515">&#34;close&#34;</span><span class="op" id="7454522">}</span><span class="op" id="7454523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454529">&#34;Content-Length&#34;</span><span class="op" id="7454545">:</span>&nbsp;<span class="op" id="7454547">{</span><span class="string" id="7454548">&#34;10&#34;</span><span class="op" id="7454552">}</span><span class="op" id="7454553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454558">}</span><span class="op" id="7454559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454564">Close</span><span class="op" id="7454569">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7454579">true</span><span class="op" id="7454583">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454588">ContentLength</span><span class="op" id="7454601">:</span>&nbsp;<span class="num" id="7454603">10</span><span class="op" id="7454605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454609">}</span><span class="op" id="7454610">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454615">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7454628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454631">}</span><span class="op" id="7454632">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7454636">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7454681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454685">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7454707">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454712">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7454745">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454750">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7454757">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454762">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7454771">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454776">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7454794">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454799">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="7454808">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454813">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="7454829">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454834">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7454842">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7454847">&#34;\r\n&#34;</span><span class="op" id="7454853">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454858"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7454866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454871">Status</span><span class="op" id="7454877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7454889">&#34;200&nbsp;OK&#34;</span><span class="op" id="7454897">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454902">StatusCode</span><span class="op" id="7454912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7454920">200</span><span class="op" id="7454923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454928">Proto</span><span class="op" id="7454933">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7454946">&#34;HTTP/1.1&#34;</span><span class="op" id="7454956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454961">ProtoMajor</span><span class="op" id="7454971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7454979">1</span><span class="op" id="7454980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454985">ProtoMinor</span><span class="op" id="7454995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7455003">1</span><span class="op" id="7455004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455009">Request</span><span class="op" id="7455016">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455027"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7455035">(</span><span class="string" id="7455036">&#34;GET&#34;</span><span class="op" id="7455041">)</span><span class="op" id="7455042">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455047">Header</span><span class="op" id="7455053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455065"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7455071">{</span><span class="op" id="7455072">}</span><span class="op" id="7455073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455078">Close</span><span class="op" id="7455083">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455096">false</span><span class="op" id="7455101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455106">ContentLength</span><span class="op" id="7455119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7455124">-</span><span class="num" id="7455125">1</span><span class="op" id="7455126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455131">TransferEncoding</span><span class="op" id="7455147">:</span>&nbsp;<span class="op" id="7455149">[</span><span class="op" id="7455150">]</span><span class="builtintype" id="7455151">string</span><span class="op" id="7455157">{</span><span class="string" id="7455158">&#34;chunked&#34;</span><span class="op" id="7455167">}</span><span class="op" id="7455168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455172">}</span><span class="op" id="7455173">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455178">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="7455200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455203">}</span><span class="op" id="7455204">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455208">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455254">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7455276">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455281">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7455314">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455319">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="7455344">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455349">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7455356">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455361">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="7455370">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455375">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="7455393">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455398">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7455406">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455411">&#34;\r\n&#34;</span><span class="op" id="7455417">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455422"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7455430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455435">Status</span><span class="op" id="7455441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7455453">&#34;200&nbsp;OK&#34;</span><span class="op" id="7455461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455466">StatusCode</span><span class="op" id="7455476">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7455484">200</span><span class="op" id="7455487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455492">Proto</span><span class="op" id="7455497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7455510">&#34;HTTP/1.1&#34;</span><span class="op" id="7455520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455525">ProtoMajor</span><span class="op" id="7455535">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7455543">1</span><span class="op" id="7455544">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455549">ProtoMinor</span><span class="op" id="7455559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7455567">1</span><span class="op" id="7455568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455573">Request</span><span class="op" id="7455580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455591"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7455599">(</span><span class="string" id="7455600">&#34;GET&#34;</span><span class="op" id="7455605">)</span><span class="op" id="7455606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455611">Header</span><span class="op" id="7455617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455629"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7455635">{</span><span class="op" id="7455636">}</span><span class="op" id="7455637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455642">Close</span><span class="op" id="7455647">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7455660">false</span><span class="op" id="7455665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455670">ContentLength</span><span class="op" id="7455683">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7455688">-</span><span class="num" id="7455689">1</span><span class="op" id="7455690">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455695">TransferEncoding</span><span class="op" id="7455711">:</span>&nbsp;<span class="op" id="7455713">[</span><span class="op" id="7455714">]</span><span class="builtintype" id="7455715">string</span><span class="op" id="7455721">{</span><span class="string" id="7455722">&#34;chunked&#34;</span><span class="op" id="7455731">}</span><span class="op" id="7455732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455736">}</span><span class="op" id="7455737">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455742">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7455755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455758">}</span><span class="op" id="7455759">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7455763">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7455814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455818">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7455840">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455845">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="7455878">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7455883">&#34;\r\n&#34;</span><span class="op" id="7455889">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455894"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7455902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455907">Status</span><span class="op" id="7455913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7455925">&#34;200&nbsp;OK&#34;</span><span class="op" id="7455933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455938">StatusCode</span><span class="op" id="7455948">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7455956">200</span><span class="op" id="7455959">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455964">Proto</span><span class="op" id="7455969">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7455982">&#34;HTTP/1.1&#34;</span><span class="op" id="7455992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7455997">ProtoMajor</span><span class="op" id="7456007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456015">1</span><span class="op" id="7456016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456021">ProtoMinor</span><span class="op" id="7456031">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456039">1</span><span class="op" id="7456040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456045">Request</span><span class="op" id="7456052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456063"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7456071">(</span><span class="string" id="7456072">&#34;HEAD&#34;</span><span class="op" id="7456078">)</span><span class="op" id="7456079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456084">Header</span><span class="op" id="7456090">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456102"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7456108">{</span><span class="op" id="7456109">}</span><span class="op" id="7456110">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456115">TransferEncoding</span><span class="op" id="7456131">:</span>&nbsp;<span class="op" id="7456133">[</span><span class="op" id="7456134">]</span><span class="builtintype" id="7456135">string</span><span class="op" id="7456141">{</span><span class="string" id="7456142">&#34;chunked&#34;</span><span class="op" id="7456151">}</span><span class="op" id="7456152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456157">Close</span><span class="op" id="7456162">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456175">false</span><span class="op" id="7456180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456185">ContentLength</span><span class="op" id="7456198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7456203">-</span><span class="num" id="7456204">1</span><span class="op" id="7456205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456209">}</span><span class="op" id="7456210">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456215">&#34;&#34;</span><span class="op" id="7456217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456220">}</span><span class="op" id="7456221">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7456225">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456274">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456278">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7456300">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456305">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7456331">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456336">&#34;\r\n&#34;</span><span class="op" id="7456342">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456347"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7456355">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456360">Status</span><span class="op" id="7456366">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7456378">&#34;200&nbsp;OK&#34;</span><span class="op" id="7456386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456391">StatusCode</span><span class="op" id="7456401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456409">200</span><span class="op" id="7456412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456417">Proto</span><span class="op" id="7456422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7456435">&#34;HTTP/1.0&#34;</span><span class="op" id="7456445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456450">ProtoMajor</span><span class="op" id="7456460">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456468">1</span><span class="op" id="7456469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456474">ProtoMinor</span><span class="op" id="7456484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456492">0</span><span class="op" id="7456493">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456498">Request</span><span class="op" id="7456505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456516"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7456524">(</span><span class="string" id="7456525">&#34;HEAD&#34;</span><span class="op" id="7456531">)</span><span class="op" id="7456532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456537">Header</span><span class="op" id="7456543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456555"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7456561">{</span><span class="string" id="7456562">&#34;Content-Length&#34;</span><span class="op" id="7456578">:</span>&nbsp;<span class="op" id="7456580">{</span><span class="string" id="7456581">&#34;256&#34;</span><span class="op" id="7456586">}</span><span class="op" id="7456587">}</span><span class="op" id="7456588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456593">TransferEncoding</span><span class="op" id="7456609">:</span>&nbsp;<span class="ident" id="7456611">nil</span><span class="op" id="7456614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456619">Close</span><span class="op" id="7456624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456637">true</span><span class="op" id="7456641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456646">ContentLength</span><span class="op" id="7456659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456664">256</span><span class="op" id="7456667">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456671">}</span><span class="op" id="7456672">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456677">&#34;&#34;</span><span class="op" id="7456679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456682">}</span><span class="op" id="7456683">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7456687">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7456750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456754">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7456776">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456781">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="7456807">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7456812">&#34;\r\n&#34;</span><span class="op" id="7456818">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456823"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7456831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456836">Status</span><span class="op" id="7456842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7456854">&#34;200&nbsp;OK&#34;</span><span class="op" id="7456862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456867">StatusCode</span><span class="op" id="7456877">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456885">200</span><span class="op" id="7456888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456893">Proto</span><span class="op" id="7456898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7456911">&#34;HTTP/1.1&#34;</span><span class="op" id="7456921">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456926">ProtoMajor</span><span class="op" id="7456936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456944">1</span><span class="op" id="7456945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456950">ProtoMinor</span><span class="op" id="7456960">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7456968">1</span><span class="op" id="7456969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7456974">Request</span><span class="op" id="7456981">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7456992"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7457000">(</span><span class="string" id="7457001">&#34;HEAD&#34;</span><span class="op" id="7457007">)</span><span class="op" id="7457008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457013">Header</span><span class="op" id="7457019">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457031"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7457037">{</span><span class="string" id="7457038">&#34;Content-Length&#34;</span><span class="op" id="7457054">:</span>&nbsp;<span class="op" id="7457056">{</span><span class="string" id="7457057">&#34;256&#34;</span><span class="op" id="7457062">}</span><span class="op" id="7457063">}</span><span class="op" id="7457064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457069">TransferEncoding</span><span class="op" id="7457085">:</span>&nbsp;<span class="ident" id="7457087">nil</span><span class="op" id="7457090">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457095">Close</span><span class="op" id="7457100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457113">false</span><span class="op" id="7457118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457123">ContentLength</span><span class="op" id="7457136">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7457141">256</span><span class="op" id="7457144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457148">}</span><span class="op" id="7457149">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457154">&#34;&#34;</span><span class="op" id="7457156">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457159">}</span><span class="op" id="7457160">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7457164">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457231">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7457253">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457258">&#34;\r\n&#34;</span><span class="op" id="7457264">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457269"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7457277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457282">Status</span><span class="op" id="7457288">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7457300">&#34;200&nbsp;OK&#34;</span><span class="op" id="7457308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457313">StatusCode</span><span class="op" id="7457323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7457331">200</span><span class="op" id="7457334">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457339">Proto</span><span class="op" id="7457344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7457357">&#34;HTTP/1.0&#34;</span><span class="op" id="7457367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457372">ProtoMajor</span><span class="op" id="7457382">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7457390">1</span><span class="op" id="7457391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457396">ProtoMinor</span><span class="op" id="7457406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7457414">0</span><span class="op" id="7457415">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457420">Request</span><span class="op" id="7457427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457438"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7457446">(</span><span class="string" id="7457447">&#34;HEAD&#34;</span><span class="op" id="7457453">)</span><span class="op" id="7457454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457459">Header</span><span class="op" id="7457465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457477"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7457483">{</span><span class="op" id="7457484">}</span><span class="op" id="7457485">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457490">TransferEncoding</span><span class="op" id="7457506">:</span>&nbsp;<span class="ident" id="7457508">nil</span><span class="op" id="7457511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457516">Close</span><span class="op" id="7457521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457534">true</span><span class="op" id="7457538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457543">ContentLength</span><span class="op" id="7457556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7457561">-</span><span class="num" id="7457562">1</span><span class="op" id="7457563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457567">}</span><span class="op" id="7457568">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457573">&#34;&#34;</span><span class="op" id="7457575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457578">}</span><span class="op" id="7457579">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7457583">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457617">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457621">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7457643">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457648">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7457672">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457677">&#34;\r\n&#34;</span><span class="op" id="7457683">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457688"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7457696">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457701">Status</span><span class="op" id="7457707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7457713">&#34;200&nbsp;OK&#34;</span><span class="op" id="7457721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457726">StatusCode</span><span class="op" id="7457736">:</span>&nbsp;<span class="num" id="7457738">200</span><span class="op" id="7457741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457746">Proto</span><span class="op" id="7457751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7457758">&#34;HTTP/1.1&#34;</span><span class="op" id="7457768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457773">ProtoMajor</span><span class="op" id="7457783">:</span>&nbsp;<span class="num" id="7457785">1</span><span class="op" id="7457786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457791">ProtoMinor</span><span class="op" id="7457801">:</span>&nbsp;<span class="num" id="7457803">1</span><span class="op" id="7457804">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457809">Request</span><span class="op" id="7457816">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457821"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7457829">(</span><span class="string" id="7457830">&#34;GET&#34;</span><span class="op" id="7457835">)</span><span class="op" id="7457836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457841">Header</span><span class="op" id="7457847">:</span>&nbsp;<span class="ident" id="7457849"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7457855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457861">&#34;Content-Length&#34;</span><span class="op" id="7457877">:</span>&nbsp;<span class="op" id="7457879">{</span><span class="string" id="7457880">&#34;0&#34;</span><span class="op" id="7457883">}</span><span class="op" id="7457884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457889">}</span><span class="op" id="7457890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457895">Close</span><span class="op" id="7457900">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7457910">false</span><span class="op" id="7457915">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7457920">ContentLength</span><span class="op" id="7457933">:</span>&nbsp;<span class="num" id="7457935">0</span><span class="op" id="7457936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457940">}</span><span class="op" id="7457941">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7457946">&#34;&#34;</span><span class="op" id="7457948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7457951">}</span><span class="op" id="7457952">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7457956">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7458017">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458049">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="7458072">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458076"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7458084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458089">Status</span><span class="op" id="7458095">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7458104">&#34;303&nbsp;&#34;</span><span class="op" id="7458110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458115">StatusCode</span><span class="op" id="7458125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458130">303</span><span class="op" id="7458133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458138">Proto</span><span class="op" id="7458143">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7458153">&#34;HTTP/1.0&#34;</span><span class="op" id="7458163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458168">ProtoMajor</span><span class="op" id="7458178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458183">1</span><span class="op" id="7458184">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458189">ProtoMinor</span><span class="op" id="7458199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458204">0</span><span class="op" id="7458205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458210">Request</span><span class="op" id="7458217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458225"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7458233">(</span><span class="string" id="7458234">&#34;GET&#34;</span><span class="op" id="7458239">)</span><span class="op" id="7458240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458245">Header</span><span class="op" id="7458251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458260"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7458266">{</span><span class="op" id="7458267">}</span><span class="op" id="7458268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458273">Close</span><span class="op" id="7458278">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458288">true</span><span class="op" id="7458292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458297">ContentLength</span><span class="op" id="7458310">:</span>&nbsp;<span class="op" id="7458312">-</span><span class="num" id="7458313">1</span><span class="op" id="7458314">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458318">}</span><span class="op" id="7458319">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458324">&#34;&#34;</span><span class="op" id="7458326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458329">}</span><span class="op" id="7458330">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7458334">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7458398">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458462">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="7458484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458488"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7458496">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458501">Status</span><span class="op" id="7458507">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7458516">&#34;303&nbsp;&#34;</span><span class="op" id="7458522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458527">StatusCode</span><span class="op" id="7458537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458542">303</span><span class="op" id="7458545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458550">Proto</span><span class="op" id="7458555">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7458565">&#34;HTTP/1.0&#34;</span><span class="op" id="7458575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458580">ProtoMajor</span><span class="op" id="7458590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458595">1</span><span class="op" id="7458596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458601">ProtoMinor</span><span class="op" id="7458611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7458616">0</span><span class="op" id="7458617">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458622">Request</span><span class="op" id="7458629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458637"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7458645">(</span><span class="string" id="7458646">&#34;GET&#34;</span><span class="op" id="7458651">)</span><span class="op" id="7458652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458657">Header</span><span class="op" id="7458663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458672"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7458678">{</span><span class="op" id="7458679">}</span><span class="op" id="7458680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458685">Close</span><span class="op" id="7458690">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7458700">true</span><span class="op" id="7458704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458709">ContentLength</span><span class="op" id="7458722">:</span>&nbsp;<span class="op" id="7458724">-</span><span class="num" id="7458725">1</span><span class="op" id="7458726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458730">}</span><span class="op" id="7458731">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458736">&#34;&#34;</span><span class="op" id="7458738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458741">}</span><span class="op" id="7458742">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7458746">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7458823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7458827">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="7458948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458952"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7458960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7458965">Status</span><span class="op" id="7458971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7458977">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7458998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459003">StatusCode</span><span class="op" id="7459013">:</span>&nbsp;<span class="num" id="7459015">206</span><span class="op" id="7459018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459023">Proto</span><span class="op" id="7459028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7459035">&#34;HTTP/1.1&#34;</span><span class="op" id="7459045">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459050">ProtoMajor</span><span class="op" id="7459060">:</span>&nbsp;<span class="num" id="7459062">1</span><span class="op" id="7459063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459068">ProtoMinor</span><span class="op" id="7459078">:</span>&nbsp;<span class="num" id="7459080">1</span><span class="op" id="7459081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459086">Request</span><span class="op" id="7459093">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7459098"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7459106">(</span><span class="string" id="7459107">&#34;GET&#34;</span><span class="op" id="7459112">)</span><span class="op" id="7459113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459118">Header</span><span class="op" id="7459124">:</span>&nbsp;<span class="ident" id="7459126"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7459132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459138">&#34;Content-Type&#34;</span><span class="op" id="7459152">:</span>&nbsp;<span class="op" id="7459154">[</span><span class="op" id="7459155">]</span><span class="builtintype" id="7459156">string</span><span class="op" id="7459162">{</span><span class="string" id="7459163">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="7459212">}</span><span class="op" id="7459213">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459218">}</span><span class="op" id="7459219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459224">Close</span><span class="op" id="7459229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7459239">true</span><span class="op" id="7459243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459248">ContentLength</span><span class="op" id="7459261">:</span>&nbsp;<span class="op" id="7459263">-</span><span class="num" id="7459264">1</span><span class="op" id="7459265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459269">}</span><span class="op" id="7459270">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459275">&#34;some&nbsp;body&#34;</span><span class="op" id="7459286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459289">}</span><span class="op" id="7459290">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7459294">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459356">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459360">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7459382">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459387">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7459411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459416">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7459423">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459428">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7459441">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459446"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7459454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459459">Status</span><span class="op" id="7459465">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7459471">&#34;200&nbsp;OK&#34;</span><span class="op" id="7459479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459484">StatusCode</span><span class="op" id="7459494">:</span>&nbsp;<span class="num" id="7459496">200</span><span class="op" id="7459499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459504">Proto</span><span class="op" id="7459509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7459516">&#34;HTTP/1.0&#34;</span><span class="op" id="7459526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459531">ProtoMajor</span><span class="op" id="7459541">:</span>&nbsp;<span class="num" id="7459543">1</span><span class="op" id="7459544">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459549">ProtoMinor</span><span class="op" id="7459559">:</span>&nbsp;<span class="num" id="7459561">0</span><span class="op" id="7459562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459567">Header</span><span class="op" id="7459573">:</span>&nbsp;<span class="ident" id="7459575"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7459581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459587">&#34;Connection&#34;</span><span class="op" id="7459599">:</span>&nbsp;<span class="op" id="7459601">{</span><span class="string" id="7459602">&#34;close&#34;</span><span class="op" id="7459609">}</span><span class="op" id="7459610">,</span>&nbsp;<span class="comment" id="7459612">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459637">}</span><span class="op" id="7459638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459643">Close</span><span class="op" id="7459648">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7459658">true</span><span class="op" id="7459662">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459667">ContentLength</span><span class="op" id="7459680">:</span>&nbsp;<span class="op" id="7459682">-</span><span class="num" id="7459683">1</span><span class="op" id="7459684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459688">}</span><span class="op" id="7459689">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459694">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="7459707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459710">}</span><span class="op" id="7459711">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7459715">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7459762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459766">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="7459801">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459806">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="7459852">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459857">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="7459884">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459889">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="7459925">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459930">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7459958">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7459963">&#34;foobar&#34;</span><span class="op" id="7459971">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459976"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7459984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7459989">Status</span><span class="op" id="7459995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7460001">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="7460022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460027">StatusCode</span><span class="op" id="7460037">:</span>&nbsp;<span class="num" id="7460039">206</span><span class="op" id="7460042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460047">Proto</span><span class="op" id="7460052">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7460059">&#34;HTTP/1.1&#34;</span><span class="op" id="7460069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460074">ProtoMajor</span><span class="op" id="7460084">:</span>&nbsp;<span class="num" id="7460086">1</span><span class="op" id="7460087">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460092">ProtoMinor</span><span class="op" id="7460102">:</span>&nbsp;<span class="num" id="7460104">1</span><span class="op" id="7460105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460110">Request</span><span class="op" id="7460117">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7460122"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7460130">(</span><span class="string" id="7460131">&#34;GET&#34;</span><span class="op" id="7460136">)</span><span class="op" id="7460137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460142">Header</span><span class="op" id="7460148">:</span>&nbsp;<span class="ident" id="7460150"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7460156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7460162">&#34;Accept-Ranges&#34;</span><span class="op" id="7460177">:</span>&nbsp;&nbsp;<span class="op" id="7460180">[</span><span class="op" id="7460181">]</span><span class="builtintype" id="7460182">string</span><span class="op" id="7460188">{</span><span class="string" id="7460189">&#34;bytes&#34;</span><span class="op" id="7460196">}</span><span class="op" id="7460197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7460203">&#34;Content-Length&#34;</span><span class="op" id="7460219">:</span>&nbsp;<span class="op" id="7460221">[</span><span class="op" id="7460222">]</span><span class="builtintype" id="7460223">string</span><span class="op" id="7460229">{</span><span class="string" id="7460230">&#34;6&#34;</span><span class="op" id="7460233">}</span><span class="op" id="7460234">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7460240">&#34;Content-Type&#34;</span><span class="op" id="7460254">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7460258">[</span><span class="op" id="7460259">]</span><span class="builtintype" id="7460260">string</span><span class="op" id="7460266">{</span><span class="string" id="7460267">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="7460294">}</span><span class="op" id="7460295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7460301">&#34;Content-Range&#34;</span><span class="op" id="7460316">:</span>&nbsp;&nbsp;<span class="op" id="7460319">[</span><span class="op" id="7460320">]</span><span class="builtintype" id="7460321">string</span><span class="op" id="7460327">{</span><span class="string" id="7460328">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="7460344">}</span><span class="op" id="7460345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460350">}</span><span class="op" id="7460351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460356">ContentLength</span><span class="op" id="7460369">:</span>&nbsp;<span class="num" id="7460371">6</span><span class="op" id="7460372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460376">}</span><span class="op" id="7460377">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7460382">&#34;foobar&#34;</span><span class="op" id="7460390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460393">}</span><span class="op" id="7460394">,</span><br>
<span class="lineno"></span><span class="op" id="7460396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="7460399">func</span>&nbsp;<span class="ident" id="7460404">TestReadResponse</span><span class="op" id="7460420">(</span><span class="ident" id="7460421">t</span>&nbsp;<span class="op" id="7460423">*</span><span class="ident" id="7460424"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7460431">.</span><span class="ident" id="7460432">T</span><span class="op" id="7460433">)</span>&nbsp;<span class="op" id="7460435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460438">for</span>&nbsp;<span class="ident" id="7460442">i</span><span class="op" id="7460443">,</span>&nbsp;<span class="ident" id="7460445">tt</span>&nbsp;<span class="op" id="7460448">:=</span>&nbsp;<span class="keyword" id="7460451">range</span>&nbsp;<span class="ident" id="7460457"><a href="/net/http/response_test.go.html#7452870">respTests</a></span>&nbsp;<span class="op" id="7460467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460471">resp</span><span class="op" id="7460475">,</span>&nbsp;<span class="ident" id="7460477">err</span>&nbsp;<span class="op" id="7460481">:=</span>&nbsp;<span class="ident" id="7460484"><a href="/net/http/response.go.html#3820176">ReadResponse</a></span><span class="op" id="7460496">(</span><span class="ident" id="7460497"><a href="/net/http/response_test.go.html#7452443">bufio</a></span><span class="op" id="7460502">.</span><span class="ident" id="7460503">NewReader</span><span class="op" id="7460512">(</span><span class="ident" id="7460513"><a href="/net/http/response_test.go.html#7452572">strings</a></span><span class="op" id="7460520">.</span><span class="ident" id="7460521">NewReader</span><span class="op" id="7460530">(</span><span class="ident" id="7460531"><a href="/net/http/response_test.go.html#7460445">tt</a></span><span class="op" id="7460533">.</span><span class="ident" id="7460534">Raw</span><span class="op" id="7460537">)</span><span class="op" id="7460538">)</span><span class="op" id="7460539">,</span>&nbsp;<span class="ident" id="7460541"><a href="/net/http/response_test.go.html#7460445">tt</a></span><span class="op" id="7460543">.</span><span class="ident" id="7460544">Resp</span><span class="op" id="7460548">.</span><span class="ident" id="7460549">Request</span><span class="op" id="7460556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460560">if</span>&nbsp;<span class="ident" id="7460563"><a href="/net/http/response_test.go.html#7460477">err</a></span>&nbsp;<span class="op" id="7460567">!=</span>&nbsp;<span class="ident" id="7460570">nil</span>&nbsp;<span class="op" id="7460574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460579"><a href="/net/http/response_test.go.html#7460421">t</a></span><span class="op" id="7460580">.</span><span class="ident" id="7460581">Errorf</span><span class="op" id="7460587">(</span><span class="string" id="7460588">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7460597">,</span>&nbsp;<span class="ident" id="7460599"><a href="/net/http/response_test.go.html#7460442">i</a></span><span class="op" id="7460600">,</span>&nbsp;<span class="ident" id="7460602"><a href="/net/http/response_test.go.html#7460477">err</a></span><span class="op" id="7460605">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460610">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460625">rbody</span>&nbsp;<span class="op" id="7460631">:=</span>&nbsp;<span class="ident" id="7460634"><a href="/net/http/response_test.go.html#7460471">resp</a></span><span class="op" id="7460638">.</span><span class="ident" id="7460639">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460646"><a href="/net/http/response_test.go.html#7460471">resp</a></span><span class="op" id="7460650">.</span><span class="ident" id="7460651">Body</span>&nbsp;<span class="op" id="7460656">=</span>&nbsp;<span class="ident" id="7460658">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460664"><a href="/net/http/response_test.go.html#7464164">diff</a></span><span class="op" id="7460668">(</span><span class="ident" id="7460669"><a href="/net/http/response_test.go.html#7460421">t</a></span><span class="op" id="7460670">,</span>&nbsp;<span class="ident" id="7460672"><a href="/net/http/response_test.go.html#7452493">fmt</a></span><span class="op" id="7460675">.</span><span class="ident" id="7460676">Sprintf</span><span class="op" id="7460683">(</span><span class="string" id="7460684">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="7460698">,</span>&nbsp;<span class="ident" id="7460700"><a href="/net/http/response_test.go.html#7460442">i</a></span><span class="op" id="7460701">)</span><span class="op" id="7460702">,</span>&nbsp;<span class="ident" id="7460704"><a href="/net/http/response_test.go.html#7460471">resp</a></span><span class="op" id="7460708">,</span>&nbsp;<span class="op" id="7460710">&amp;</span><span class="ident" id="7460711"><a href="/net/http/response_test.go.html#7460445">tt</a></span><span class="op" id="7460713">.</span><span class="ident" id="7460714">Resp</span><span class="op" id="7460718">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460722">var</span>&nbsp;<span class="ident" id="7460726">bout</span>&nbsp;<span class="ident" id="7460731"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7460736">.</span><span class="ident" id="7460737">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460746">if</span>&nbsp;<span class="ident" id="7460749"><a href="/net/http/response_test.go.html#7460625">rbody</a></span>&nbsp;<span class="op" id="7460755">!=</span>&nbsp;<span class="ident" id="7460758">nil</span>&nbsp;<span class="op" id="7460762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460767">_</span><span class="op" id="7460768">,</span>&nbsp;<span class="ident" id="7460770"><a href="/net/http/response_test.go.html#7460477">err</a></span>&nbsp;<span class="op" id="7460774">=</span>&nbsp;<span class="ident" id="7460776"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7460778">.</span><span class="ident" id="7460779">Copy</span><span class="op" id="7460783">(</span><span class="op" id="7460784">&amp;</span><span class="ident" id="7460785"><a href="/net/http/response_test.go.html#7460726">bout</a></span><span class="op" id="7460789">,</span>&nbsp;<span class="ident" id="7460791"><a href="/net/http/response_test.go.html#7460625">rbody</a></span><span class="op" id="7460796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460801">if</span>&nbsp;<span class="ident" id="7460804"><a href="/net/http/response_test.go.html#7460477">err</a></span>&nbsp;<span class="op" id="7460808">!=</span>&nbsp;<span class="ident" id="7460811">nil</span>&nbsp;<span class="op" id="7460815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460821"><a href="/net/http/response_test.go.html#7460421">t</a></span><span class="op" id="7460822">.</span><span class="ident" id="7460823">Errorf</span><span class="op" id="7460829">(</span><span class="string" id="7460830">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7460839">,</span>&nbsp;<span class="ident" id="7460841"><a href="/net/http/response_test.go.html#7460442">i</a></span><span class="op" id="7460842">,</span>&nbsp;<span class="ident" id="7460844"><a href="/net/http/response_test.go.html#7460477">err</a></span><span class="op" id="7460847">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460853">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460870"><a href="/net/http/response_test.go.html#7460625">rbody</a></span><span class="op" id="7460875">.</span><span class="ident" id="7460876">Close</span><span class="op" id="7460881">(</span><span class="op" id="7460882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460890">body</span>&nbsp;<span class="op" id="7460895">:=</span>&nbsp;<span class="ident" id="7460898"><a href="/net/http/response_test.go.html#7460726">bout</a></span><span class="op" id="7460902">.</span><span class="ident" id="7460903">String</span><span class="op" id="7460909">(</span><span class="op" id="7460910">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7460914">if</span>&nbsp;<span class="ident" id="7460917"><a href="/net/http/response_test.go.html#7460890">body</a></span>&nbsp;<span class="op" id="7460922">!=</span>&nbsp;<span class="ident" id="7460925"><a href="/net/http/response_test.go.html#7460445">tt</a></span><span class="op" id="7460927">.</span><span class="ident" id="7460928">Body</span>&nbsp;<span class="op" id="7460933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7460938"><a href="/net/http/response_test.go.html#7460421">t</a></span><span class="op" id="7460939">.</span><span class="ident" id="7460940">Errorf</span><span class="op" id="7460946">(</span><span class="string" id="7460947">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7460971">,</span>&nbsp;<span class="ident" id="7460973"><a href="/net/http/response_test.go.html#7460442">i</a></span><span class="op" id="7460974">,</span>&nbsp;<span class="ident" id="7460976"><a href="/net/http/response_test.go.html#7460890">body</a></span><span class="op" id="7460980">,</span>&nbsp;<span class="ident" id="7460982"><a href="/net/http/response_test.go.html#7460445">tt</a></span><span class="op" id="7460984">.</span><span class="ident" id="7460985">Body</span><span class="op" id="7460989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7460996">}</span><br>
<span class="lineno"></span><span class="op" id="7460998">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="7461001">func</span>&nbsp;<span class="ident" id="7461006">TestWriteResponse</span><span class="op" id="7461023">(</span><span class="ident" id="7461024">t</span>&nbsp;<span class="op" id="7461026">*</span><span class="ident" id="7461027"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7461034">.</span><span class="ident" id="7461035">T</span><span class="op" id="7461036">)</span>&nbsp;<span class="op" id="7461038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461041">for</span>&nbsp;<span class="ident" id="7461045">i</span><span class="op" id="7461046">,</span>&nbsp;<span class="ident" id="7461048">tt</span>&nbsp;<span class="op" id="7461051">:=</span>&nbsp;<span class="keyword" id="7461054">range</span>&nbsp;<span class="ident" id="7461060"><a href="/net/http/response_test.go.html#7452870">respTests</a></span>&nbsp;<span class="op" id="7461070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461074">resp</span><span class="op" id="7461078">,</span>&nbsp;<span class="ident" id="7461080">err</span>&nbsp;<span class="op" id="7461084">:=</span>&nbsp;<span class="ident" id="7461087"><a href="/net/http/response.go.html#3820176">ReadResponse</a></span><span class="op" id="7461099">(</span><span class="ident" id="7461100"><a href="/net/http/response_test.go.html#7452443">bufio</a></span><span class="op" id="7461105">.</span><span class="ident" id="7461106">NewReader</span><span class="op" id="7461115">(</span><span class="ident" id="7461116"><a href="/net/http/response_test.go.html#7452572">strings</a></span><span class="op" id="7461123">.</span><span class="ident" id="7461124">NewReader</span><span class="op" id="7461133">(</span><span class="ident" id="7461134"><a href="/net/http/response_test.go.html#7461048">tt</a></span><span class="op" id="7461136">.</span><span class="ident" id="7461137">Raw</span><span class="op" id="7461140">)</span><span class="op" id="7461141">)</span><span class="op" id="7461142">,</span>&nbsp;<span class="ident" id="7461144"><a href="/net/http/response_test.go.html#7461048">tt</a></span><span class="op" id="7461146">.</span><span class="ident" id="7461147">Resp</span><span class="op" id="7461151">.</span><span class="ident" id="7461152">Request</span><span class="op" id="7461159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461163">if</span>&nbsp;<span class="ident" id="7461166"><a href="/net/http/response_test.go.html#7461080">err</a></span>&nbsp;<span class="op" id="7461170">!=</span>&nbsp;<span class="ident" id="7461173">nil</span>&nbsp;<span class="op" id="7461177">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461182"><a href="/net/http/response_test.go.html#7461024">t</a></span><span class="op" id="7461183">.</span><span class="ident" id="7461184">Errorf</span><span class="op" id="7461190">(</span><span class="string" id="7461191">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7461200">,</span>&nbsp;<span class="ident" id="7461202"><a href="/net/http/response_test.go.html#7461045">i</a></span><span class="op" id="7461203">,</span>&nbsp;<span class="ident" id="7461205"><a href="/net/http/response_test.go.html#7461080">err</a></span><span class="op" id="7461208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461213">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461228"><a href="/net/http/response_test.go.html#7461080">err</a></span>&nbsp;<span class="op" id="7461232">=</span>&nbsp;<span class="ident" id="7461234"><a href="/net/http/response_test.go.html#7461074">resp</a></span><span class="op" id="7461238">.</span><span class="ident" id="7461239">Write</span><span class="op" id="7461244">(</span><span class="ident" id="7461245"><a href="/net/http/response_test.go.html#7452506">ioutil</a></span><span class="op" id="7461251">.</span><span class="ident" id="7461252">Discard</span><span class="op" id="7461259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461263">if</span>&nbsp;<span class="ident" id="7461266"><a href="/net/http/response_test.go.html#7461080">err</a></span>&nbsp;<span class="op" id="7461270">!=</span>&nbsp;<span class="ident" id="7461273">nil</span>&nbsp;<span class="op" id="7461277">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461282"><a href="/net/http/response_test.go.html#7461024">t</a></span><span class="op" id="7461283">.</span><span class="ident" id="7461284">Errorf</span><span class="op" id="7461290">(</span><span class="string" id="7461291">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="7461300">,</span>&nbsp;<span class="ident" id="7461302"><a href="/net/http/response_test.go.html#7461045">i</a></span><span class="op" id="7461303">,</span>&nbsp;<span class="ident" id="7461305"><a href="/net/http/response_test.go.html#7461080">err</a></span><span class="op" id="7461308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461313">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461327">}</span><br>
<span class="lineno"></span><span class="op" id="7461329">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7461332">var</span>&nbsp;<span class="ident" id="7461336">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="7461367">=</span>&nbsp;<span class="op" id="7461369">[</span><span class="op" id="7461370">]</span><span class="keyword" id="7461371">struct</span>&nbsp;<span class="op" id="7461378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461381">chunked</span><span class="op" id="7461388">,</span>&nbsp;<span class="ident" id="7461390">compressed</span>&nbsp;<span class="builtintype" id="7461401">bool</span><br>
<span class="lineno"></span><span class="op" id="7461406">}</span><span class="op" id="7461407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461410">{</span><span class="ident" id="7461411">false</span><span class="op" id="7461416">,</span>&nbsp;<span class="ident" id="7461418">false</span><span class="op" id="7461423">}</span><span class="op" id="7461424">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461427">{</span><span class="ident" id="7461428">true</span><span class="op" id="7461432">,</span>&nbsp;<span class="ident" id="7461434">false</span><span class="op" id="7461439">}</span><span class="op" id="7461440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461443">{</span><span class="ident" id="7461444">true</span><span class="op" id="7461448">,</span>&nbsp;<span class="ident" id="7461450">true</span><span class="op" id="7461454">}</span><span class="op" id="7461455">,</span><br>
<span class="lineno"></span><span class="op" id="7461457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7461460">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="7461525">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="7461594">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="7461643">func</span>&nbsp;<span class="ident" id="7461648">TestReadResponseCloseInMiddle</span><span class="op" id="7461677">(</span><span class="ident" id="7461678">t</span>&nbsp;<span class="op" id="7461680">*</span><span class="ident" id="7461681"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7461688">.</span><span class="ident" id="7461689">T</span><span class="op" id="7461690">)</span>&nbsp;<span class="op" id="7461692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461695">for</span>&nbsp;<span class="ident" id="7461699">_</span><span class="op" id="7461700">,</span>&nbsp;<span class="ident" id="7461702">test</span>&nbsp;<span class="op" id="7461707">:=</span>&nbsp;<span class="keyword" id="7461710">range</span>&nbsp;<span class="ident" id="7461716"><a href="/net/http/response_test.go.html#7461336">readResponseCloseInMiddleTests</a></span>&nbsp;<span class="op" id="7461747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461751">fatalf</span>&nbsp;<span class="op" id="7461758">:=</span>&nbsp;<span class="keyword" id="7461761">func</span><span class="op" id="7461765">(</span><span class="ident" id="7461766">format</span>&nbsp;<span class="builtintype" id="7461773">string</span><span class="op" id="7461779">,</span>&nbsp;<span class="ident" id="7461781">args</span>&nbsp;<span class="op" id="7461786">...</span><span class="keyword" id="7461789">interface</span><span class="op" id="7461798">{</span><span class="op" id="7461799">}</span><span class="op" id="7461800">)</span>&nbsp;<span class="op" id="7461802">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461807"><a href="/net/http/response_test.go.html#7461781">args</a></span>&nbsp;<span class="op" id="7461812">=</span>&nbsp;<span class="builtinfunc" id="7461814">append</span><span class="op" id="7461820">(</span><span class="op" id="7461821">[</span><span class="op" id="7461822">]</span><span class="keyword" id="7461823">interface</span><span class="op" id="7461832">{</span><span class="op" id="7461833">}</span><span class="op" id="7461834">{</span><span class="ident" id="7461835"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7461839">.</span><span class="ident" id="7461840">chunked</span><span class="op" id="7461847">,</span>&nbsp;<span class="ident" id="7461849"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7461853">.</span><span class="ident" id="7461854">compressed</span><span class="op" id="7461864">}</span><span class="op" id="7461865">,</span>&nbsp;<span class="ident" id="7461867"><a href="/net/http/response_test.go.html#7461781">args</a></span><span class="op" id="7461871">...</span><span class="op" id="7461874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461879"><a href="/net/http/response_test.go.html#7461678">t</a></span><span class="op" id="7461880">.</span><span class="ident" id="7461881">Fatalf</span><span class="op" id="7461887">(</span><span class="string" id="7461888">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="7461925">+</span><span class="ident" id="7461926"><a href="/net/http/response_test.go.html#7461766">format</a></span><span class="op" id="7461932">,</span>&nbsp;<span class="ident" id="7461934"><a href="/net/http/response_test.go.html#7461781">args</a></span><span class="op" id="7461938">...</span><span class="op" id="7461941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7461945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7461949">checkErr</span>&nbsp;<span class="op" id="7461958">:=</span>&nbsp;<span class="keyword" id="7461961">func</span><span class="op" id="7461965">(</span><span class="ident" id="7461966">err</span>&nbsp;<span class="builtintype" id="7461970">error</span><span class="op" id="7461975">,</span>&nbsp;<span class="ident" id="7461977">msg</span>&nbsp;<span class="builtintype" id="7461981">string</span><span class="op" id="7461987">)</span>&nbsp;<span class="op" id="7461989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7461994">if</span>&nbsp;<span class="ident" id="7461997"><a href="/net/http/response_test.go.html#7461966">err</a></span>&nbsp;<span class="op" id="7462001">==</span>&nbsp;<span class="ident" id="7462004">nil</span>&nbsp;<span class="op" id="7462008">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462014">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462029"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7462035">(</span><span class="ident" id="7462036"><a href="/net/http/response_test.go.html#7461977">msg</a></span><span class="op" id="7462039">+</span><span class="string" id="7462040">&#34;:&nbsp;%v&#34;</span><span class="op" id="7462046">,</span>&nbsp;<span class="ident" id="7462048"><a href="/net/http/response_test.go.html#7461966">err</a></span><span class="op" id="7462051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462059">var</span>&nbsp;<span class="ident" id="7462063">buf</span>&nbsp;<span class="ident" id="7462067"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7462072">.</span><span class="ident" id="7462073">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462082"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462085">.</span><span class="ident" id="7462086">WriteString</span><span class="op" id="7462097">(</span><span class="string" id="7462098">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="7462119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462123">if</span>&nbsp;<span class="ident" id="7462126"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462130">.</span><span class="ident" id="7462131">chunked</span>&nbsp;<span class="op" id="7462139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462144"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462147">.</span><span class="ident" id="7462148">WriteString</span><span class="op" id="7462159">(</span><span class="string" id="7462160">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="7462192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462196">}</span>&nbsp;<span class="keyword" id="7462198">else</span>&nbsp;<span class="op" id="7462203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462208"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462211">.</span><span class="ident" id="7462212">WriteString</span><span class="op" id="7462223">(</span><span class="string" id="7462224">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="7462253">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462261">var</span>&nbsp;<span class="ident" id="7462265">wr</span>&nbsp;<span class="ident" id="7462268"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7462270">.</span><span class="ident" id="7462271">Writer</span>&nbsp;<span class="op" id="7462278">=</span>&nbsp;<span class="op" id="7462280">&amp;</span><span class="ident" id="7462281"><a href="/net/http/response_test.go.html#7462063">buf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462287">if</span>&nbsp;<span class="ident" id="7462290"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462294">.</span><span class="ident" id="7462295">chunked</span>&nbsp;<span class="op" id="7462303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462308"><a href="/net/http/response_test.go.html#7462265">wr</a></span>&nbsp;<span class="op" id="7462311">=</span>&nbsp;<span class="ident" id="7462313"><a href="/net/http/response_test.go.html#7452519">internal</a></span><span class="op" id="7462321">.</span><span class="ident" id="7462322">NewChunkedWriter</span><span class="op" id="7462338">(</span><span class="ident" id="7462339"><a href="/net/http/response_test.go.html#7462265">wr</a></span><span class="op" id="7462341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462345">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462349">if</span>&nbsp;<span class="ident" id="7462352"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462356">.</span><span class="ident" id="7462357">compressed</span>&nbsp;<span class="op" id="7462368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462373"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462376">.</span><span class="ident" id="7462377">WriteString</span><span class="op" id="7462388">(</span><span class="string" id="7462389">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="7462417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462422"><a href="/net/http/response_test.go.html#7462265">wr</a></span>&nbsp;<span class="op" id="7462425">=</span>&nbsp;<span class="ident" id="7462427"><a href="/net/http/response_test.go.html#7452461">gzip</a></span><span class="op" id="7462431">.</span><span class="ident" id="7462432">NewWriter</span><span class="op" id="7462441">(</span><span class="ident" id="7462442"><a href="/net/http/response_test.go.html#7462265">wr</a></span><span class="op" id="7462444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462452"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462455">.</span><span class="ident" id="7462456">WriteString</span><span class="op" id="7462467">(</span><span class="string" id="7462468">&#34;\r\n&#34;</span><span class="op" id="7462474">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462479">chunk</span>&nbsp;<span class="op" id="7462485">:=</span>&nbsp;<span class="ident" id="7462488"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7462493">.</span><span class="ident" id="7462494">Repeat</span><span class="op" id="7462500">(</span><span class="op" id="7462501">[</span><span class="op" id="7462502">]</span><span class="builtintype" id="7462503">byte</span><span class="op" id="7462507">{</span><span class="string" id="7462508">&#39;x&#39;</span><span class="op" id="7462511">}</span><span class="op" id="7462512">,</span>&nbsp;<span class="num" id="7462514">1000</span><span class="op" id="7462518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462522">for</span>&nbsp;<span class="ident" id="7462526">i</span>&nbsp;<span class="op" id="7462528">:=</span>&nbsp;<span class="num" id="7462531">0</span><span class="op" id="7462532">;</span>&nbsp;<span class="ident" id="7462534"><a href="/net/http/response_test.go.html#7462526">i</a></span>&nbsp;<span class="op" id="7462536">&lt;</span>&nbsp;<span class="num" id="7462538">1000</span><span class="op" id="7462542">;</span>&nbsp;<span class="ident" id="7462544"><a href="/net/http/response_test.go.html#7462526">i</a></span><span class="op" id="7462545">++</span>&nbsp;<span class="op" id="7462548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462553">if</span>&nbsp;<span class="ident" id="7462556"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462560">.</span><span class="ident" id="7462561">compressed</span>&nbsp;<span class="op" id="7462572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7462578">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462621">_</span><span class="op" id="7462622">,</span>&nbsp;<span class="ident" id="7462624">err</span>&nbsp;<span class="op" id="7462628">:=</span>&nbsp;<span class="ident" id="7462631"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7462633">.</span><span class="ident" id="7462634">ReadFull</span><span class="op" id="7462642">(</span><span class="ident" id="7462643"><a href="/net/http/response_test.go.html#7452478">rand</a></span><span class="op" id="7462647">.</span><span class="ident" id="7462648">Reader</span><span class="op" id="7462654">,</span>&nbsp;<span class="ident" id="7462656"><a href="/net/http/response_test.go.html#7462479">chunk</a></span><span class="op" id="7462661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462667"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7462675">(</span><span class="ident" id="7462676"><a href="/net/http/response_test.go.html#7462624">err</a></span><span class="op" id="7462679">,</span>&nbsp;<span class="string" id="7462681">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="7462703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462713"><a href="/net/http/response_test.go.html#7462265">wr</a></span><span class="op" id="7462715">.</span><span class="ident" id="7462716">Write</span><span class="op" id="7462721">(</span><span class="ident" id="7462722"><a href="/net/http/response_test.go.html#7462479">chunk</a></span><span class="op" id="7462727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462731">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462735">if</span>&nbsp;<span class="ident" id="7462738"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462742">.</span><span class="ident" id="7462743">compressed</span>&nbsp;<span class="op" id="7462754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462759">err</span>&nbsp;<span class="op" id="7462763">:=</span>&nbsp;<span class="ident" id="7462766"><a href="/net/http/response_test.go.html#7462265">wr</a></span><span class="op" id="7462768">.</span><span class="op" id="7462769">(</span><span class="op" id="7462770">*</span><span class="ident" id="7462771"><a href="/net/http/response_test.go.html#7452461">gzip</a></span><span class="op" id="7462775">.</span><span class="ident" id="7462776">Writer</span><span class="op" id="7462782">)</span><span class="op" id="7462783">.</span><span class="ident" id="7462784">Close</span><span class="op" id="7462789">(</span><span class="op" id="7462790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462795"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7462803">(</span><span class="ident" id="7462804"><a href="/net/http/response_test.go.html#7462759">err</a></span><span class="op" id="7462807">,</span>&nbsp;<span class="string" id="7462809">&#34;compressor&nbsp;close&#34;</span><span class="op" id="7462827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7462835">if</span>&nbsp;<span class="ident" id="7462838"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7462842">.</span><span class="ident" id="7462843">chunked</span>&nbsp;<span class="op" id="7462851">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462856"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462859">.</span><span class="ident" id="7462860">WriteString</span><span class="op" id="7462871">(</span><span class="string" id="7462872">&#34;0\r\n\r\n&#34;</span><span class="op" id="7462883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7462887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462891"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462894">.</span><span class="ident" id="7462895">WriteString</span><span class="op" id="7462906">(</span><span class="string" id="7462907">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7462926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462931">bufr</span>&nbsp;<span class="op" id="7462936">:=</span>&nbsp;<span class="ident" id="7462939"><a href="/net/http/response_test.go.html#7452443">bufio</a></span><span class="op" id="7462944">.</span><span class="ident" id="7462945">NewReader</span><span class="op" id="7462954">(</span><span class="op" id="7462955">&amp;</span><span class="ident" id="7462956"><a href="/net/http/response_test.go.html#7462063">buf</a></span><span class="op" id="7462959">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7462963">resp</span><span class="op" id="7462967">,</span>&nbsp;<span class="ident" id="7462969">err</span>&nbsp;<span class="op" id="7462973">:=</span>&nbsp;<span class="ident" id="7462976"><a href="/net/http/response.go.html#3820176">ReadResponse</a></span><span class="op" id="7462988">(</span><span class="ident" id="7462989"><a href="/net/http/response_test.go.html#7462931">bufr</a></span><span class="op" id="7462993">,</span>&nbsp;<span class="ident" id="7462995"><a href="/net/http/response_test.go.html#7452668">dummyReq</a></span><span class="op" id="7463003">(</span><span class="string" id="7463004">&#34;GET&#34;</span><span class="op" id="7463009">)</span><span class="op" id="7463010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463014"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7463022">(</span><span class="ident" id="7463023"><a href="/net/http/response_test.go.html#7462969">err</a></span><span class="op" id="7463026">,</span>&nbsp;<span class="string" id="7463028">&#34;ReadResponse&#34;</span><span class="op" id="7463042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463046">expectedLength</span>&nbsp;<span class="op" id="7463061">:=</span>&nbsp;<span class="ident" id="7463064">int64</span><span class="op" id="7463069">(</span><span class="op" id="7463070">-</span><span class="num" id="7463071">1</span><span class="op" id="7463072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463076">if</span>&nbsp;<span class="op" id="7463079">!</span><span class="ident" id="7463080"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7463084">.</span><span class="ident" id="7463085">chunked</span>&nbsp;<span class="op" id="7463093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463098"><a href="/net/http/response_test.go.html#7463046">expectedLength</a></span>&nbsp;<span class="op" id="7463113">=</span>&nbsp;<span class="num" id="7463115">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463129">if</span>&nbsp;<span class="ident" id="7463132"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463136">.</span><span class="ident" id="7463137">ContentLength</span>&nbsp;<span class="op" id="7463151">!=</span>&nbsp;<span class="ident" id="7463154"><a href="/net/http/response_test.go.html#7463046">expectedLength</a></span>&nbsp;<span class="op" id="7463169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463174"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7463180">(</span><span class="string" id="7463181">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7463218">,</span>&nbsp;<span class="ident" id="7463220"><a href="/net/http/response_test.go.html#7463046">expectedLength</a></span><span class="op" id="7463234">,</span>&nbsp;<span class="ident" id="7463236"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463240">.</span><span class="ident" id="7463241">ContentLength</span><span class="op" id="7463254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463258">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463262">if</span>&nbsp;<span class="ident" id="7463265"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463269">.</span><span class="ident" id="7463270">Body</span>&nbsp;<span class="op" id="7463275">==</span>&nbsp;<span class="ident" id="7463278">nil</span>&nbsp;<span class="op" id="7463282">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463287"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7463293">(</span><span class="string" id="7463294">&#34;nil&nbsp;body&#34;</span><span class="op" id="7463304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463312">if</span>&nbsp;<span class="ident" id="7463315"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7463319">.</span><span class="ident" id="7463320">compressed</span>&nbsp;<span class="op" id="7463331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463336">gzReader</span><span class="op" id="7463344">,</span>&nbsp;<span class="ident" id="7463346">err</span>&nbsp;<span class="op" id="7463350">:=</span>&nbsp;<span class="ident" id="7463353"><a href="/net/http/response_test.go.html#7452461">gzip</a></span><span class="op" id="7463357">.</span><span class="ident" id="7463358">NewReader</span><span class="op" id="7463367">(</span><span class="ident" id="7463368"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463372">.</span><span class="ident" id="7463373">Body</span><span class="op" id="7463377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463382"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7463390">(</span><span class="ident" id="7463391"><a href="/net/http/response_test.go.html#7463346">err</a></span><span class="op" id="7463394">,</span>&nbsp;<span class="string" id="7463396">&#34;gzip.NewReader&#34;</span><span class="op" id="7463412">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463417"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463421">.</span><span class="ident" id="7463422">Body</span>&nbsp;<span class="op" id="7463427">=</span>&nbsp;<span class="op" id="7463429">&amp;</span><span class="ident" id="7463430"><a href="/net/http/transport.go.html#3948764">readerAndCloser</a></span><span class="op" id="7463445">{</span><span class="ident" id="7463446"><a href="/net/http/response_test.go.html#7463336">gzReader</a></span><span class="op" id="7463454">,</span>&nbsp;<span class="ident" id="7463456"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463460">.</span><span class="ident" id="7463461">Body</span><span class="op" id="7463465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463474">rbuf</span>&nbsp;<span class="op" id="7463479">:=</span>&nbsp;<span class="builtinfunc" id="7463482">make</span><span class="op" id="7463486">(</span><span class="op" id="7463487">[</span><span class="op" id="7463488">]</span><span class="builtintype" id="7463489">byte</span><span class="op" id="7463493">,</span>&nbsp;<span class="num" id="7463495">2500</span><span class="op" id="7463499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463503">n</span><span class="op" id="7463504">,</span>&nbsp;<span class="ident" id="7463506"><a href="/net/http/response_test.go.html#7462969">err</a></span>&nbsp;<span class="op" id="7463510">:=</span>&nbsp;<span class="ident" id="7463513"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7463515">.</span><span class="ident" id="7463516">ReadFull</span><span class="op" id="7463524">(</span><span class="ident" id="7463525"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463529">.</span><span class="ident" id="7463530">Body</span><span class="op" id="7463534">,</span>&nbsp;<span class="ident" id="7463536"><a href="/net/http/response_test.go.html#7463474">rbuf</a></span><span class="op" id="7463540">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463544"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7463552">(</span><span class="ident" id="7463553"><a href="/net/http/response_test.go.html#7462969">err</a></span><span class="op" id="7463556">,</span>&nbsp;<span class="string" id="7463558">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="7463578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463582">if</span>&nbsp;<span class="ident" id="7463585"><a href="/net/http/response_test.go.html#7463503">n</a></span>&nbsp;<span class="op" id="7463587">!=</span>&nbsp;<span class="num" id="7463590">2500</span>&nbsp;<span class="op" id="7463595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463600"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7463606">(</span><span class="string" id="7463607">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="7463636">,</span>&nbsp;<span class="ident" id="7463638"><a href="/net/http/response_test.go.html#7463503">n</a></span><span class="op" id="7463639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463647">if</span>&nbsp;<span class="ident" id="7463650"><a href="/net/http/response_test.go.html#7461702">test</a></span><span class="op" id="7463654">.</span><span class="ident" id="7463655">compressed</span>&nbsp;<span class="op" id="7463666">==</span>&nbsp;<span class="ident" id="7463669">false</span>&nbsp;<span class="op" id="7463675">&amp;&amp;</span>&nbsp;<span class="op" id="7463678">!</span><span class="ident" id="7463679"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7463684">.</span><span class="ident" id="7463685">Equal</span><span class="op" id="7463690">(</span><span class="ident" id="7463691"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7463696">.</span><span class="ident" id="7463697">Repeat</span><span class="op" id="7463703">(</span><span class="op" id="7463704">[</span><span class="op" id="7463705">]</span><span class="builtintype" id="7463706">byte</span><span class="op" id="7463710">{</span><span class="string" id="7463711">&#39;x&#39;</span><span class="op" id="7463714">}</span><span class="op" id="7463715">,</span>&nbsp;<span class="num" id="7463717">2500</span><span class="op" id="7463721">)</span><span class="op" id="7463722">,</span>&nbsp;<span class="ident" id="7463724"><a href="/net/http/response_test.go.html#7463474">rbuf</a></span><span class="op" id="7463728">)</span>&nbsp;<span class="op" id="7463730">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463735"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7463741">(</span><span class="string" id="7463742">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7463781">,</span>&nbsp;<span class="builtintype" id="7463783">string</span><span class="op" id="7463789">(</span><span class="ident" id="7463790"><a href="/net/http/response_test.go.html#7463474">rbuf</a></span><span class="op" id="7463794">)</span><span class="op" id="7463795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7463799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463803"><a href="/net/http/response_test.go.html#7462963">resp</a></span><span class="op" id="7463807">.</span><span class="ident" id="7463808">Body</span><span class="op" id="7463812">.</span><span class="ident" id="7463813">Close</span><span class="op" id="7463818">(</span><span class="op" id="7463819">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463824">rest</span><span class="op" id="7463828">,</span>&nbsp;<span class="ident" id="7463830"><a href="/net/http/response_test.go.html#7462969">err</a></span>&nbsp;<span class="op" id="7463834">:=</span>&nbsp;<span class="ident" id="7463837"><a href="/net/http/response_test.go.html#7452506">ioutil</a></span><span class="op" id="7463843">.</span><span class="ident" id="7463844">ReadAll</span><span class="op" id="7463851">(</span><span class="ident" id="7463852"><a href="/net/http/response_test.go.html#7462931">bufr</a></span><span class="op" id="7463856">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463860"><a href="/net/http/response_test.go.html#7461949">checkErr</a></span><span class="op" id="7463868">(</span><span class="ident" id="7463869"><a href="/net/http/response_test.go.html#7462969">err</a></span><span class="op" id="7463872">,</span>&nbsp;<span class="string" id="7463874">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="7463896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7463900">if</span>&nbsp;<span class="ident" id="7463903">e</span><span class="op" id="7463904">,</span>&nbsp;<span class="ident" id="7463906">g</span>&nbsp;<span class="op" id="7463908">:=</span>&nbsp;<span class="string" id="7463911">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="7463930">,</span>&nbsp;<span class="builtintype" id="7463932">string</span><span class="op" id="7463938">(</span><span class="ident" id="7463939"><a href="/net/http/response_test.go.html#7463824">rest</a></span><span class="op" id="7463943">)</span><span class="op" id="7463944">;</span>&nbsp;<span class="ident" id="7463946"><a href="/net/http/response_test.go.html#7463903">e</a></span>&nbsp;<span class="op" id="7463948">!=</span>&nbsp;<span class="ident" id="7463951"><a href="/net/http/response_test.go.html#7463906">g</a></span>&nbsp;<span class="op" id="7463953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7463958"><a href="/net/http/response_test.go.html#7463906">g</a></span>&nbsp;<span class="op" id="7463960">=</span>&nbsp;<span class="ident" id="7463962"><a href="/net/http/response_test.go.html#7452562">regexp</a></span><span class="op" id="7463968">.</span><span class="ident" id="7463969">MustCompile</span><span class="op" id="7463980">(</span><span class="string" id="7463981">`(xx+)`</span><span class="op" id="7463988">)</span><span class="op" id="7463989">.</span><span class="ident" id="7463990">ReplaceAllStringFunc</span><span class="op" id="7464010">(</span><span class="ident" id="7464011"><a href="/net/http/response_test.go.html#7463906">g</a></span><span class="op" id="7464012">,</span>&nbsp;<span class="keyword" id="7464014">func</span><span class="op" id="7464018">(</span><span class="ident" id="7464019">match</span>&nbsp;<span class="builtintype" id="7464025">string</span><span class="op" id="7464031">)</span>&nbsp;<span class="builtintype" id="7464033">string</span>&nbsp;<span class="op" id="7464040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7464046">return</span>&nbsp;<span class="ident" id="7464053"><a href="/net/http/response_test.go.html#7452493">fmt</a></span><span class="op" id="7464056">.</span><span class="ident" id="7464057">Sprintf</span><span class="op" id="7464064">(</span><span class="string" id="7464065">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="7464082">,</span>&nbsp;<span class="builtinfunc" id="7464084">len</span><span class="op" id="7464087">(</span><span class="ident" id="7464088"><a href="/net/http/response_test.go.html#7464019">match</a></span><span class="op" id="7464093">)</span><span class="op" id="7464094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464099">}</span><span class="op" id="7464100">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464105"><a href="/net/http/response_test.go.html#7461751">fatalf</a></span><span class="op" id="7464111">(</span><span class="string" id="7464112">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7464141">,</span>&nbsp;<span class="ident" id="7464143"><a href="/net/http/response_test.go.html#7463906">g</a></span><span class="op" id="7464144">,</span>&nbsp;<span class="ident" id="7464146"><a href="/net/http/response_test.go.html#7463903">e</a></span><span class="op" id="7464147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464154">}</span><br>
<span class="lineno"></span><span class="op" id="7464156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="7464159">func</span>&nbsp;<span class="ident" id="7464164">diff</span><span class="op" id="7464168">(</span><span class="ident" id="7464169">t</span>&nbsp;<span class="op" id="7464171">*</span><span class="ident" id="7464172"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7464179">.</span><span class="ident" id="7464180">T</span><span class="op" id="7464181">,</span>&nbsp;<span class="ident" id="7464183">prefix</span>&nbsp;<span class="builtintype" id="7464190">string</span><span class="op" id="7464196">,</span>&nbsp;<span class="ident" id="7464198">have</span><span class="op" id="7464202">,</span>&nbsp;<span class="ident" id="7464204">want</span>&nbsp;<span class="keyword" id="7464209">interface</span><span class="op" id="7464218">{</span><span class="op" id="7464219">}</span><span class="op" id="7464220">)</span>&nbsp;<span class="op" id="7464222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464225">hv</span>&nbsp;<span class="op" id="7464228">:=</span>&nbsp;<span class="ident" id="7464231"><a href="/net/http/response_test.go.html#7452551">reflect</a></span><span class="op" id="7464238">.</span><span class="ident" id="7464239">ValueOf</span><span class="op" id="7464246">(</span><span class="ident" id="7464247"><a href="/net/http/response_test.go.html#7464198">have</a></span><span class="op" id="7464251">)</span><span class="op" id="7464252">.</span><span class="ident" id="7464253">Elem</span><span class="op" id="7464257">(</span><span class="op" id="7464258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464261">wv</span>&nbsp;<span class="op" id="7464264">:=</span>&nbsp;<span class="ident" id="7464267"><a href="/net/http/response_test.go.html#7452551">reflect</a></span><span class="op" id="7464274">.</span><span class="ident" id="7464275">ValueOf</span><span class="op" id="7464282">(</span><span class="ident" id="7464283"><a href="/net/http/response_test.go.html#7464204">want</a></span><span class="op" id="7464287">)</span><span class="op" id="7464288">.</span><span class="ident" id="7464289">Elem</span><span class="op" id="7464293">(</span><span class="op" id="7464294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7464297">if</span>&nbsp;<span class="ident" id="7464300"><a href="/net/http/response_test.go.html#7464225">hv</a></span><span class="op" id="7464302">.</span><span class="ident" id="7464303">Type</span><span class="op" id="7464307">(</span><span class="op" id="7464308">)</span>&nbsp;<span class="op" id="7464310">!=</span>&nbsp;<span class="ident" id="7464313"><a href="/net/http/response_test.go.html#7464261">wv</a></span><span class="op" id="7464315">.</span><span class="ident" id="7464316">Type</span><span class="op" id="7464320">(</span><span class="op" id="7464321">)</span>&nbsp;<span class="op" id="7464323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464327"><a href="/net/http/response_test.go.html#7464169">t</a></span><span class="op" id="7464328">.</span><span class="ident" id="7464329">Errorf</span><span class="op" id="7464335">(</span><span class="string" id="7464336">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7464366">,</span>&nbsp;<span class="ident" id="7464368"><a href="/net/http/response_test.go.html#7464183">prefix</a></span><span class="op" id="7464374">,</span>&nbsp;<span class="ident" id="7464376"><a href="/net/http/response_test.go.html#7464225">hv</a></span><span class="op" id="7464378">.</span><span class="ident" id="7464379">Type</span><span class="op" id="7464383">(</span><span class="op" id="7464384">)</span><span class="op" id="7464385">,</span>&nbsp;<span class="ident" id="7464387"><a href="/net/http/response_test.go.html#7464261">wv</a></span><span class="op" id="7464389">.</span><span class="ident" id="7464390">Type</span><span class="op" id="7464394">(</span><span class="op" id="7464395">)</span><span class="op" id="7464396">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7464402">for</span>&nbsp;<span class="ident" id="7464406">i</span>&nbsp;<span class="op" id="7464408">:=</span>&nbsp;<span class="num" id="7464411">0</span><span class="op" id="7464412">;</span>&nbsp;<span class="ident" id="7464414"><a href="/net/http/response_test.go.html#7464406">i</a></span>&nbsp;<span class="op" id="7464416">&lt;</span>&nbsp;<span class="ident" id="7464418"><a href="/net/http/response_test.go.html#7464225">hv</a></span><span class="op" id="7464420">.</span><span class="ident" id="7464421">NumField</span><span class="op" id="7464429">(</span><span class="op" id="7464430">)</span><span class="op" id="7464431">;</span>&nbsp;<span class="ident" id="7464433"><a href="/net/http/response_test.go.html#7464406">i</a></span><span class="op" id="7464434">++</span>&nbsp;<span class="op" id="7464437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464441">hf</span>&nbsp;<span class="op" id="7464444">:=</span>&nbsp;<span class="ident" id="7464447"><a href="/net/http/response_test.go.html#7464225">hv</a></span><span class="op" id="7464449">.</span><span class="ident" id="7464450">Field</span><span class="op" id="7464455">(</span><span class="ident" id="7464456"><a href="/net/http/response_test.go.html#7464406">i</a></span><span class="op" id="7464457">)</span><span class="op" id="7464458">.</span><span class="ident" id="7464459">Interface</span><span class="op" id="7464468">(</span><span class="op" id="7464469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464473">wf</span>&nbsp;<span class="op" id="7464476">:=</span>&nbsp;<span class="ident" id="7464479"><a href="/net/http/response_test.go.html#7464261">wv</a></span><span class="op" id="7464481">.</span><span class="ident" id="7464482">Field</span><span class="op" id="7464487">(</span><span class="ident" id="7464488"><a href="/net/http/response_test.go.html#7464406">i</a></span><span class="op" id="7464489">)</span><span class="op" id="7464490">.</span><span class="ident" id="7464491">Interface</span><span class="op" id="7464500">(</span><span class="op" id="7464501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7464505">if</span>&nbsp;<span class="op" id="7464508">!</span><span class="ident" id="7464509"><a href="/net/http/response_test.go.html#7452551">reflect</a></span><span class="op" id="7464516">.</span><span class="ident" id="7464517">DeepEqual</span><span class="op" id="7464526">(</span><span class="ident" id="7464527"><a href="/net/http/response_test.go.html#7464441">hf</a></span><span class="op" id="7464529">,</span>&nbsp;<span class="ident" id="7464531"><a href="/net/http/response_test.go.html#7464473">wf</a></span><span class="op" id="7464533">)</span>&nbsp;<span class="op" id="7464535">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464540"><a href="/net/http/response_test.go.html#7464169">t</a></span><span class="op" id="7464541">.</span><span class="ident" id="7464542">Errorf</span><span class="op" id="7464548">(</span><span class="string" id="7464549">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7464570">,</span>&nbsp;<span class="ident" id="7464572"><a href="/net/http/response_test.go.html#7464183">prefix</a></span><span class="op" id="7464578">,</span>&nbsp;<span class="ident" id="7464580"><a href="/net/http/response_test.go.html#7464225">hv</a></span><span class="op" id="7464582">.</span><span class="ident" id="7464583">Type</span><span class="op" id="7464587">(</span><span class="op" id="7464588">)</span><span class="op" id="7464589">.</span><span class="ident" id="7464590">Field</span><span class="op" id="7464595">(</span><span class="ident" id="7464596"><a href="/net/http/response_test.go.html#7464406">i</a></span><span class="op" id="7464597">)</span><span class="op" id="7464598">.</span><span class="ident" id="7464599">Name</span><span class="op" id="7464603">,</span>&nbsp;<span class="ident" id="7464605"><a href="/net/http/response_test.go.html#7464441">hf</a></span><span class="op" id="7464607">,</span>&nbsp;<span class="ident" id="7464609"><a href="/net/http/response_test.go.html#7464473">wf</a></span><span class="op" id="7464611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464618">}</span><br>
<span class="lineno"></span><span class="op" id="7464620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="7464623">type</span>&nbsp;<span class="ident" id="7464628">responseLocationTest</span>&nbsp;<span class="keyword" id="7464649">struct</span>&nbsp;<span class="op" id="7464656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464659">location</span>&nbsp;<span class="builtintype" id="7464668">string</span>&nbsp;<span class="comment" id="7464675">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464712">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7464721">string</span>&nbsp;<span class="comment" id="7464728">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464759">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7464768">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7464776">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="7464785">error</span><br>
<span class="lineno">570</span><span class="op" id="7464791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7464794">var</span>&nbsp;<span class="ident" id="7464798">responseLocationTests</span>&nbsp;<span class="op" id="7464820">=</span>&nbsp;<span class="op" id="7464822">[</span><span class="op" id="7464823">]</span><span class="ident" id="7464824"><a href="/net/http/response_test.go.html#7464628">responseLocationTest</a></span><span class="op" id="7464844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464847">{</span><span class="string" id="7464848">&#34;/foo&#34;</span><span class="op" id="7464854">,</span>&nbsp;<span class="string" id="7464856">&#34;http://bar.com/baz&#34;</span><span class="op" id="7464876">,</span>&nbsp;<span class="string" id="7464878">&#34;http://bar.com/foo&#34;</span><span class="op" id="7464898">,</span>&nbsp;<span class="ident" id="7464900">nil</span><span class="op" id="7464903">}</span><span class="op" id="7464904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464907">{</span><span class="string" id="7464908">&#34;http://foo.com/&#34;</span><span class="op" id="7464925">,</span>&nbsp;<span class="string" id="7464927">&#34;http://bar.com/baz&#34;</span><span class="op" id="7464947">,</span>&nbsp;<span class="string" id="7464949">&#34;http://foo.com/&#34;</span><span class="op" id="7464966">,</span>&nbsp;<span class="ident" id="7464968">nil</span><span class="op" id="7464971">}</span><span class="op" id="7464972">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7464975">{</span><span class="string" id="7464976">&#34;&#34;</span><span class="op" id="7464978">,</span>&nbsp;<span class="string" id="7464980">&#34;http://bar.com/baz&#34;</span><span class="op" id="7465000">,</span>&nbsp;<span class="string" id="7465002">&#34;&#34;</span><span class="op" id="7465004">,</span>&nbsp;<span class="ident" id="7465006"><a href="/net/http/response.go.html#3819282">ErrNoLocation</a></span><span class="op" id="7465019">}</span><span class="op" id="7465020">,</span><br>
<span class="lineno"></span><span class="op" id="7465022">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7465025">func</span>&nbsp;<span class="ident" id="7465030">TestLocationResponse</span><span class="op" id="7465050">(</span><span class="ident" id="7465051">t</span>&nbsp;<span class="op" id="7465053">*</span><span class="ident" id="7465054"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7465061">.</span><span class="ident" id="7465062">T</span><span class="op" id="7465063">)</span>&nbsp;<span class="op" id="7465065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465068">for</span>&nbsp;<span class="ident" id="7465072">i</span><span class="op" id="7465073">,</span>&nbsp;<span class="ident" id="7465075">tt</span>&nbsp;<span class="op" id="7465078">:=</span>&nbsp;<span class="keyword" id="7465081">range</span>&nbsp;<span class="ident" id="7465087"><a href="/net/http/response_test.go.html#7464798">responseLocationTests</a></span>&nbsp;<span class="op" id="7465109">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465113">res</span>&nbsp;<span class="op" id="7465117">:=</span>&nbsp;<span class="builtinfunc" id="7465120">new</span><span class="op" id="7465123">(</span><span class="ident" id="7465124"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7465132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465136"><a href="/net/http/response_test.go.html#7465113">res</a></span><span class="op" id="7465139">.</span><span class="ident" id="7465140">Header</span>&nbsp;<span class="op" id="7465147">=</span>&nbsp;<span class="builtinfunc" id="7465149">make</span><span class="op" id="7465153">(</span><span class="ident" id="7465154"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7465160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465164"><a href="/net/http/response_test.go.html#7465113">res</a></span><span class="op" id="7465167">.</span><span class="ident" id="7465168">Header</span><span class="op" id="7465174">.</span><span class="ident" id="7465175">Set</span><span class="op" id="7465178">(</span><span class="string" id="7465179">&#34;Location&#34;</span><span class="op" id="7465189">,</span>&nbsp;<span class="ident" id="7465191"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465193">.</span><span class="ident" id="7465194">location</span><span class="op" id="7465202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465206">if</span>&nbsp;<span class="ident" id="7465209"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465211">.</span><span class="ident" id="7465212">requrl</span>&nbsp;<span class="op" id="7465219">!=</span>&nbsp;<span class="string" id="7465222">&#34;&#34;</span>&nbsp;<span class="op" id="7465225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465230"><a href="/net/http/response_test.go.html#7465113">res</a></span><span class="op" id="7465233">.</span><span class="ident" id="7465234">Request</span>&nbsp;<span class="op" id="7465242">=</span>&nbsp;<span class="op" id="7465244">&amp;</span><span class="ident" id="7465245"><a href="/net/http/request.go.html#3791418">Request</a></span><span class="op" id="7465252">{</span><span class="op" id="7465253">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465258">var</span>&nbsp;<span class="ident" id="7465262">err</span>&nbsp;<span class="builtintype" id="7465266">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465275"><a href="/net/http/response_test.go.html#7465113">res</a></span><span class="op" id="7465278">.</span><span class="ident" id="7465279">Request</span><span class="op" id="7465286">.</span><span class="ident" id="7465287">URL</span><span class="op" id="7465290">,</span>&nbsp;<span class="ident" id="7465292"><a href="/net/http/response_test.go.html#7465262">err</a></span>&nbsp;<span class="op" id="7465296">=</span>&nbsp;<span class="ident" id="7465298"><a href="/net/http/response_test.go.html#7452540">url</a></span><span class="op" id="7465301">.</span><span class="ident" id="7465302">Parse</span><span class="op" id="7465307">(</span><span class="ident" id="7465308"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465310">.</span><span class="ident" id="7465311">requrl</span><span class="op" id="7465317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465322">if</span>&nbsp;<span class="ident" id="7465325"><a href="/net/http/response_test.go.html#7465262">err</a></span>&nbsp;<span class="op" id="7465329">!=</span>&nbsp;<span class="ident" id="7465332">nil</span>&nbsp;<span class="op" id="7465336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465342"><a href="/net/http/response_test.go.html#7465051">t</a></span><span class="op" id="7465343">.</span><span class="ident" id="7465344">Fatalf</span><span class="op" id="7465350">(</span><span class="string" id="7465351">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7465372">,</span>&nbsp;<span class="ident" id="7465374"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465376">.</span><span class="ident" id="7465377">requrl</span><span class="op" id="7465383">,</span>&nbsp;<span class="ident" id="7465385"><a href="/net/http/response_test.go.html#7465262">err</a></span><span class="op" id="7465388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465393">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465402">got</span><span class="op" id="7465405">,</span>&nbsp;<span class="ident" id="7465407">err</span>&nbsp;<span class="op" id="7465411">:=</span>&nbsp;<span class="ident" id="7465414"><a href="/net/http/response_test.go.html#7465113">res</a></span><span class="op" id="7465417">.</span><span class="ident" id="7465418">Location</span><span class="op" id="7465426">(</span><span class="op" id="7465427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465431">if</span>&nbsp;<span class="ident" id="7465434"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465436">.</span><span class="ident" id="7465437">wantErr</span>&nbsp;<span class="op" id="7465445">!=</span>&nbsp;<span class="ident" id="7465448">nil</span>&nbsp;<span class="op" id="7465452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465457">if</span>&nbsp;<span class="ident" id="7465460"><a href="/net/http/response_test.go.html#7465407">err</a></span>&nbsp;<span class="op" id="7465464">==</span>&nbsp;<span class="ident" id="7465467">nil</span>&nbsp;<span class="op" id="7465471">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465477"><a href="/net/http/response_test.go.html#7465051">t</a></span><span class="op" id="7465478">.</span><span class="ident" id="7465479">Errorf</span><span class="op" id="7465485">(</span><span class="string" id="7465486">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7465508">,</span>&nbsp;<span class="ident" id="7465510"><a href="/net/http/response_test.go.html#7465072">i</a></span><span class="op" id="7465511">,</span>&nbsp;<span class="ident" id="7465513"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465515">.</span><span class="ident" id="7465516">wantErr</span><span class="op" id="7465523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465529">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465546">if</span>&nbsp;<span class="ident" id="7465549">g</span><span class="op" id="7465550">,</span>&nbsp;<span class="ident" id="7465552">e</span>&nbsp;<span class="op" id="7465554">:=</span>&nbsp;<span class="ident" id="7465557"><a href="/net/http/response_test.go.html#7465407">err</a></span><span class="op" id="7465560">.</span><span class="ident" id="7465561">Error</span><span class="op" id="7465566">(</span><span class="op" id="7465567">)</span><span class="op" id="7465568">,</span>&nbsp;<span class="ident" id="7465570"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465572">.</span><span class="ident" id="7465573">wantErr</span><span class="op" id="7465580">.</span><span class="ident" id="7465581">Error</span><span class="op" id="7465586">(</span><span class="op" id="7465587">)</span><span class="op" id="7465588">;</span>&nbsp;<span class="ident" id="7465590"><a href="/net/http/response_test.go.html#7465549">g</a></span>&nbsp;<span class="op" id="7465592">!=</span>&nbsp;<span class="ident" id="7465595"><a href="/net/http/response_test.go.html#7465552">e</a></span>&nbsp;<span class="op" id="7465597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465603"><a href="/net/http/response_test.go.html#7465051">t</a></span><span class="op" id="7465604">.</span><span class="ident" id="7465605">Errorf</span><span class="op" id="7465611">(</span><span class="string" id="7465612">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7465633">,</span>&nbsp;<span class="ident" id="7465635"><a href="/net/http/response_test.go.html#7465072">i</a></span><span class="op" id="7465636">,</span>&nbsp;<span class="ident" id="7465638"><a href="/net/http/response_test.go.html#7465549">g</a></span><span class="op" id="7465639">,</span>&nbsp;<span class="ident" id="7465641"><a href="/net/http/response_test.go.html#7465552">e</a></span><span class="op" id="7465642">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465648">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465665">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465680">if</span>&nbsp;<span class="ident" id="7465683"><a href="/net/http/response_test.go.html#7465407">err</a></span>&nbsp;<span class="op" id="7465687">!=</span>&nbsp;<span class="ident" id="7465690">nil</span>&nbsp;<span class="op" id="7465694">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465699"><a href="/net/http/response_test.go.html#7465051">t</a></span><span class="op" id="7465700">.</span><span class="ident" id="7465701">Errorf</span><span class="op" id="7465707">(</span><span class="string" id="7465708">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="7465720">,</span>&nbsp;<span class="ident" id="7465722"><a href="/net/http/response_test.go.html#7465072">i</a></span><span class="op" id="7465723">,</span>&nbsp;<span class="ident" id="7465725"><a href="/net/http/response_test.go.html#7465407">err</a></span><span class="op" id="7465728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465733">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7465748">if</span>&nbsp;<span class="ident" id="7465751">g</span><span class="op" id="7465752">,</span>&nbsp;<span class="ident" id="7465754">e</span>&nbsp;<span class="op" id="7465756">:=</span>&nbsp;<span class="ident" id="7465759"><a href="/net/http/response_test.go.html#7465402">got</a></span><span class="op" id="7465762">.</span><span class="ident" id="7465763">String</span><span class="op" id="7465769">(</span><span class="op" id="7465770">)</span><span class="op" id="7465771">,</span>&nbsp;<span class="ident" id="7465773"><a href="/net/http/response_test.go.html#7465075">tt</a></span><span class="op" id="7465775">.</span><span class="ident" id="7465776">want</span><span class="op" id="7465780">;</span>&nbsp;<span class="ident" id="7465782"><a href="/net/http/response_test.go.html#7465751">g</a></span>&nbsp;<span class="op" id="7465784">!=</span>&nbsp;<span class="ident" id="7465787"><a href="/net/http/response_test.go.html#7465754">e</a></span>&nbsp;<span class="op" id="7465789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465794"><a href="/net/http/response_test.go.html#7465051">t</a></span><span class="op" id="7465795">.</span><span class="ident" id="7465796">Errorf</span><span class="op" id="7465802">(</span><span class="string" id="7465803">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7465829">,</span>&nbsp;<span class="ident" id="7465831"><a href="/net/http/response_test.go.html#7465072">i</a></span><span class="op" id="7465832">,</span>&nbsp;<span class="ident" id="7465834"><a href="/net/http/response_test.go.html#7465751">g</a></span><span class="op" id="7465835">,</span>&nbsp;<span class="ident" id="7465837"><a href="/net/http/response_test.go.html#7465754">e</a></span><span class="op" id="7465838">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7465845">}</span><br>
<span class="lineno"></span><span class="op" id="7465847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7465850">func</span>&nbsp;<span class="ident" id="7465855">TestResponseStatusStutter</span><span class="op" id="7465880">(</span><span class="ident" id="7465881">t</span>&nbsp;<span class="op" id="7465883">*</span><span class="ident" id="7465884"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7465891">.</span><span class="ident" id="7465892">T</span><span class="op" id="7465893">)</span>&nbsp;<span class="op" id="7465895">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465898">r</span>&nbsp;<span class="op" id="7465900">:=</span>&nbsp;<span class="op" id="7465903">&amp;</span><span class="ident" id="7465904"><a href="/net/http/response.go.html#3816973">Response</a></span><span class="op" id="7465912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465916">Status</span><span class="op" id="7465922">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7465928">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="7465945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465949">StatusCode</span><span class="op" id="7465959">:</span>&nbsp;<span class="num" id="7465961">123</span><span class="op" id="7465964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465968">ProtoMajor</span><span class="op" id="7465978">:</span>&nbsp;<span class="num" id="7465980">1</span><span class="op" id="7465981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7465985">ProtoMinor</span><span class="op" id="7465995">:</span>&nbsp;<span class="num" id="7465997">3</span><span class="op" id="7465998">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466004">var</span>&nbsp;<span class="ident" id="7466008">buf</span>&nbsp;<span class="ident" id="7466012"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7466017">.</span><span class="ident" id="7466018">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466026"><a href="/net/http/response_test.go.html#7465898">r</a></span><span class="op" id="7466027">.</span><span class="ident" id="7466028">Write</span><span class="op" id="7466033">(</span><span class="op" id="7466034">&amp;</span><span class="ident" id="7466035"><a href="/net/http/response_test.go.html#7466008">buf</a></span><span class="op" id="7466038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466041">if</span>&nbsp;<span class="ident" id="7466044"><a href="/net/http/response_test.go.html#7452572">strings</a></span><span class="op" id="7466051">.</span><span class="ident" id="7466052">Contains</span><span class="op" id="7466060">(</span><span class="ident" id="7466061"><a href="/net/http/response_test.go.html#7466008">buf</a></span><span class="op" id="7466064">.</span><span class="ident" id="7466065">String</span><span class="op" id="7466071">(</span><span class="op" id="7466072">)</span><span class="op" id="7466073">,</span>&nbsp;<span class="string" id="7466075">&#34;123&nbsp;123&#34;</span><span class="op" id="7466084">)</span>&nbsp;<span class="op" id="7466086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466090"><a href="/net/http/response_test.go.html#7465881">t</a></span><span class="op" id="7466091">.</span><span class="ident" id="7466092">Errorf</span><span class="op" id="7466098">(</span><span class="string" id="7466099">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="7466122">,</span>&nbsp;<span class="ident" id="7466124"><a href="/net/http/response_test.go.html#7466008">buf</a></span><span class="op" id="7466127">.</span><span class="ident" id="7466128">String</span><span class="op" id="7466134">(</span><span class="op" id="7466135">)</span><span class="op" id="7466136">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466139">}</span><br>
<span class="lineno"></span><span class="op" id="7466141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7466144">func</span>&nbsp;<span class="ident" id="7466149">TestResponseContentLengthShortBody</span><span class="op" id="7466183">(</span><span class="ident" id="7466184">t</span>&nbsp;<span class="op" id="7466186">*</span><span class="ident" id="7466187"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7466194">.</span><span class="ident" id="7466195">T</span><span class="op" id="7466196">)</span>&nbsp;<span class="op" id="7466198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466201">const</span>&nbsp;<span class="ident" id="7466207">shortBody</span>&nbsp;<span class="op" id="7466217">=</span>&nbsp;<span class="string" id="7466219">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466249">br</span>&nbsp;<span class="op" id="7466252">:=</span>&nbsp;<span class="ident" id="7466255"><a href="/net/http/response_test.go.html#7452443">bufio</a></span><span class="op" id="7466260">.</span><span class="ident" id="7466261">NewReader</span><span class="op" id="7466270">(</span><span class="ident" id="7466271"><a href="/net/http/response_test.go.html#7452572">strings</a></span><span class="op" id="7466278">.</span><span class="ident" id="7466279">NewReader</span><span class="op" id="7466288">(</span><span class="string" id="7466289">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="7466311">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7466315">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7466341">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7466345">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7466352">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466356"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span><span class="op" id="7466365">)</span><span class="op" id="7466366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466369">res</span><span class="op" id="7466372">,</span>&nbsp;<span class="ident" id="7466374">err</span>&nbsp;<span class="op" id="7466378">:=</span>&nbsp;<span class="ident" id="7466381"><a href="/net/http/response.go.html#3820176">ReadResponse</a></span><span class="op" id="7466393">(</span><span class="ident" id="7466394"><a href="/net/http/response_test.go.html#7466249">br</a></span><span class="op" id="7466396">,</span>&nbsp;<span class="op" id="7466398">&amp;</span><span class="ident" id="7466399"><a href="/net/http/request.go.html#3791418">Request</a></span><span class="op" id="7466406">{</span><span class="ident" id="7466407">Method</span><span class="op" id="7466413">:</span>&nbsp;<span class="string" id="7466415">&#34;GET&#34;</span><span class="op" id="7466420">}</span><span class="op" id="7466421">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466424">if</span>&nbsp;<span class="ident" id="7466427"><a href="/net/http/response_test.go.html#7466374">err</a></span>&nbsp;<span class="op" id="7466431">!=</span>&nbsp;<span class="ident" id="7466434">nil</span>&nbsp;<span class="op" id="7466438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466442"><a href="/net/http/response_test.go.html#7466184">t</a></span><span class="op" id="7466443">.</span><span class="ident" id="7466444">Fatal</span><span class="op" id="7466449">(</span><span class="ident" id="7466450"><a href="/net/http/response_test.go.html#7466374">err</a></span><span class="op" id="7466453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466459">if</span>&nbsp;<span class="ident" id="7466462"><a href="/net/http/response_test.go.html#7466369">res</a></span><span class="op" id="7466465">.</span><span class="ident" id="7466466">ContentLength</span>&nbsp;<span class="op" id="7466480">!=</span>&nbsp;<span class="num" id="7466483">123</span>&nbsp;<span class="op" id="7466487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466491"><a href="/net/http/response_test.go.html#7466184">t</a></span><span class="op" id="7466492">.</span><span class="ident" id="7466493">Fatalf</span><span class="op" id="7466499">(</span><span class="string" id="7466500">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="7466531">,</span>&nbsp;<span class="ident" id="7466533"><a href="/net/http/response_test.go.html#7466369">res</a></span><span class="op" id="7466536">.</span><span class="ident" id="7466537">ContentLength</span><span class="op" id="7466550">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466556">var</span>&nbsp;<span class="ident" id="7466560">buf</span>&nbsp;<span class="ident" id="7466564"><a href="/net/http/response_test.go.html#7452452">bytes</a></span><span class="op" id="7466569">.</span><span class="ident" id="7466570">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466578">n</span><span class="op" id="7466579">,</span>&nbsp;<span class="ident" id="7466581"><a href="/net/http/response_test.go.html#7466374">err</a></span>&nbsp;<span class="op" id="7466585">:=</span>&nbsp;<span class="ident" id="7466588"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7466590">.</span><span class="ident" id="7466591">Copy</span><span class="op" id="7466595">(</span><span class="op" id="7466596">&amp;</span><span class="ident" id="7466597"><a href="/net/http/response_test.go.html#7466560">buf</a></span><span class="op" id="7466600">,</span>&nbsp;<span class="ident" id="7466602"><a href="/net/http/response_test.go.html#7466369">res</a></span><span class="op" id="7466605">.</span><span class="ident" id="7466606">Body</span><span class="op" id="7466610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466613">if</span>&nbsp;<span class="ident" id="7466616"><a href="/net/http/response_test.go.html#7466578">n</a></span>&nbsp;<span class="op" id="7466618">!=</span>&nbsp;<span class="ident" id="7466621">int64</span><span class="op" id="7466626">(</span><span class="builtinfunc" id="7466627">len</span><span class="op" id="7466630">(</span><span class="ident" id="7466631"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span><span class="op" id="7466640">)</span><span class="op" id="7466641">)</span>&nbsp;<span class="op" id="7466643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466647"><a href="/net/http/response_test.go.html#7466184">t</a></span><span class="op" id="7466648">.</span><span class="ident" id="7466649">Errorf</span><span class="op" id="7466655">(</span><span class="string" id="7466656">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="7466691">,</span>&nbsp;<span class="ident" id="7466693"><a href="/net/http/response_test.go.html#7466578">n</a></span><span class="op" id="7466694">,</span>&nbsp;<span class="builtinfunc" id="7466696">len</span><span class="op" id="7466699">(</span><span class="ident" id="7466700"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span><span class="op" id="7466709">)</span><span class="op" id="7466710">,</span>&nbsp;<span class="ident" id="7466712"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span><span class="op" id="7466721">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466727">if</span>&nbsp;<span class="ident" id="7466730"><a href="/net/http/response_test.go.html#7466560">buf</a></span><span class="op" id="7466733">.</span><span class="ident" id="7466734">String</span><span class="op" id="7466740">(</span><span class="op" id="7466741">)</span>&nbsp;<span class="op" id="7466743">!=</span>&nbsp;<span class="ident" id="7466746"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span>&nbsp;<span class="op" id="7466756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466760"><a href="/net/http/response_test.go.html#7466184">t</a></span><span class="op" id="7466761">.</span><span class="ident" id="7466762">Errorf</span><span class="op" id="7466768">(</span><span class="string" id="7466769">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7466792">,</span>&nbsp;<span class="ident" id="7466794"><a href="/net/http/response_test.go.html#7466560">buf</a></span><span class="op" id="7466797">.</span><span class="ident" id="7466798">String</span><span class="op" id="7466804">(</span><span class="op" id="7466805">)</span><span class="op" id="7466806">,</span>&nbsp;<span class="ident" id="7466808"><a href="/net/http/response_test.go.html#7466207">shortBody</a></span><span class="op" id="7466817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7466823">if</span>&nbsp;<span class="ident" id="7466826"><a href="/net/http/response_test.go.html#7466374">err</a></span>&nbsp;<span class="op" id="7466830">!=</span>&nbsp;<span class="ident" id="7466833"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7466835">.</span><span class="ident" id="7466836">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7466853">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466857"><a href="/net/http/response_test.go.html#7466184">t</a></span><span class="op" id="7466858">.</span><span class="ident" id="7466859">Errorf</span><span class="op" id="7466865">(</span><span class="string" id="7466866">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7466913">,</span>&nbsp;<span class="ident" id="7466915"><a href="/net/http/response_test.go.html#7466374">err</a></span><span class="op" id="7466918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7466921">}</span><br>
<span class="lineno"></span><span class="op" id="7466923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7466926">func</span>&nbsp;<span class="ident" id="7466931">TestReadResponseUnexpectedEOF</span><span class="op" id="7466960">(</span><span class="ident" id="7466961">t</span>&nbsp;<span class="op" id="7466963">*</span><span class="ident" id="7466964"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7466971">.</span><span class="ident" id="7466972">T</span><span class="op" id="7466973">)</span>&nbsp;<span class="op" id="7466975">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7466978">br</span>&nbsp;<span class="op" id="7466981">:=</span>&nbsp;<span class="ident" id="7466984"><a href="/net/http/response_test.go.html#7452443">bufio</a></span><span class="op" id="7466989">.</span><span class="ident" id="7466990">NewReader</span><span class="op" id="7466999">(</span><span class="ident" id="7467000"><a href="/net/http/response_test.go.html#7452572">strings</a></span><span class="op" id="7467007">.</span><span class="ident" id="7467008">NewReader</span><span class="op" id="7467017">(</span><span class="string" id="7467018">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="7467055">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7467059">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="7467089">)</span><span class="op" id="7467090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467093">_</span><span class="op" id="7467094">,</span>&nbsp;<span class="ident" id="7467096">err</span>&nbsp;<span class="op" id="7467100">:=</span>&nbsp;<span class="ident" id="7467103"><a href="/net/http/response.go.html#3820176">ReadResponse</a></span><span class="op" id="7467115">(</span><span class="ident" id="7467116"><a href="/net/http/response_test.go.html#7466978">br</a></span><span class="op" id="7467118">,</span>&nbsp;<span class="ident" id="7467120">nil</span><span class="op" id="7467123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7467126">if</span>&nbsp;<span class="ident" id="7467129"><a href="/net/http/response_test.go.html#7467096">err</a></span>&nbsp;<span class="op" id="7467133">!=</span>&nbsp;<span class="ident" id="7467136"><a href="/net/http/response_test.go.html#7452500">io</a></span><span class="op" id="7467138">.</span><span class="ident" id="7467139">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7467156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467160"><a href="/net/http/response_test.go.html#7466961">t</a></span><span class="op" id="7467161">.</span><span class="ident" id="7467162">Errorf</span><span class="op" id="7467168">(</span><span class="string" id="7467169">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="7467214">,</span>&nbsp;<span class="ident" id="7467216"><a href="/net/http/response_test.go.html#7467096">err</a></span><span class="op" id="7467219">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7467222">}</span><br>
<span class="lineno"></span><span class="op" id="7467224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7467227">func</span>&nbsp;<span class="ident" id="7467232">TestNeedsSniff</span><span class="op" id="7467246">(</span><span class="ident" id="7467247">t</span>&nbsp;<span class="op" id="7467249">*</span><span class="ident" id="7467250"><a href="/net/http/response_test.go.html#7452583">testing</a></span><span class="op" id="7467257">.</span><span class="ident" id="7467258">T</span><span class="op" id="7467259">)</span>&nbsp;<span class="op" id="7467261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7467264">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467316">r</span>&nbsp;<span class="op" id="7467318">:=</span>&nbsp;<span class="op" id="7467321">&amp;</span><span class="ident" id="7467322"><a href="/net/http/server.go.html#3833137">response</a></span><span class="op" id="7467330">{</span><span class="op" id="7467331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7467334">if</span>&nbsp;<span class="ident" id="7467337">got</span><span class="op" id="7467340">,</span>&nbsp;<span class="ident" id="7467342">want</span>&nbsp;<span class="op" id="7467347">:=</span>&nbsp;<span class="ident" id="7467350"><a href="/net/http/response_test.go.html#7467316">r</a></span><span class="op" id="7467351">.</span><span class="ident" id="7467352">needsSniff</span><span class="op" id="7467362">(</span><span class="op" id="7467363">)</span><span class="op" id="7467364">,</span>&nbsp;<span class="ident" id="7467366">true</span><span class="op" id="7467370">;</span>&nbsp;<span class="ident" id="7467372"><a href="/net/http/response_test.go.html#7467337">got</a></span>&nbsp;<span class="op" id="7467376">!=</span>&nbsp;<span class="ident" id="7467379"><a href="/net/http/response_test.go.html#7467342">want</a></span>&nbsp;<span class="op" id="7467384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467388"><a href="/net/http/response_test.go.html#7467247">t</a></span><span class="op" id="7467389">.</span><span class="ident" id="7467390">Errorf</span><span class="op" id="7467396">(</span><span class="string" id="7467397">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7467423">,</span>&nbsp;<span class="ident" id="7467425"><a href="/net/http/response_test.go.html#7467337">got</a></span><span class="op" id="7467428">,</span>&nbsp;<span class="ident" id="7467430"><a href="/net/http/response_test.go.html#7467342">want</a></span><span class="op" id="7467434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7467437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7467440">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467494"><a href="/net/http/response_test.go.html#7467316">r</a></span><span class="op" id="7467495">.</span><span class="ident" id="7467496">handlerHeader</span>&nbsp;<span class="op" id="7467510">=</span>&nbsp;<span class="ident" id="7467512"><a href="/net/http/header.go.html#3781581">Header</a></span><span class="op" id="7467518">{</span><span class="string" id="7467519">&#34;Content-Type&#34;</span><span class="op" id="7467533">:</span>&nbsp;<span class="ident" id="7467535">nil</span><span class="op" id="7467538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7467541">if</span>&nbsp;<span class="ident" id="7467544">got</span><span class="op" id="7467547">,</span>&nbsp;<span class="ident" id="7467549">want</span>&nbsp;<span class="op" id="7467554">:=</span>&nbsp;<span class="ident" id="7467557"><a href="/net/http/response_test.go.html#7467316">r</a></span><span class="op" id="7467558">.</span><span class="ident" id="7467559">needsSniff</span><span class="op" id="7467569">(</span><span class="op" id="7467570">)</span><span class="op" id="7467571">,</span>&nbsp;<span class="ident" id="7467573">false</span><span class="op" id="7467578">;</span>&nbsp;<span class="ident" id="7467580"><a href="/net/http/response_test.go.html#7467544">got</a></span>&nbsp;<span class="op" id="7467584">!=</span>&nbsp;<span class="ident" id="7467587"><a href="/net/http/response_test.go.html#7467549">want</a></span>&nbsp;<span class="op" id="7467592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7467596"><a href="/net/http/response_test.go.html#7467247">t</a></span><span class="op" id="7467597">.</span><span class="ident" id="7467598">Errorf</span><span class="op" id="7467604">(</span><span class="string" id="7467605">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7467650">,</span>&nbsp;<span class="ident" id="7467652"><a href="/net/http/response_test.go.html#7467544">got</a></span><span class="op" id="7467655">,</span>&nbsp;<span class="ident" id="7467657"><a href="/net/http/response_test.go.html#7467549">want</a></span><span class="op" id="7467661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7467664">}</span><br>
<span class="lineno"></span><span class="op" id="7467666">}</span>
</div>
</body>
</html>
