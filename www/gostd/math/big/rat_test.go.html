<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7351547">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7351602">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7351656">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7351707">package</span>&nbsp;<span class="ident" id="7351715">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7351720">import</span>&nbsp;<span class="op" id="7351727">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351730">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351739">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351755">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351772">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351788">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351795">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351803">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351814">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7351825">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7351835">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7351838">func</span>&nbsp;<span class="ident" id="7351843">TestZeroRat</span><span class="op" id="7351854">(</span><span class="ident" id="7351855">t</span>&nbsp;<span class="op" id="7351857">*</span><span class="ident" id="7351858">testing</span><span class="op" id="7351865">.</span><span class="ident" id="7351866">T</span><span class="op" id="7351867">)</span>&nbsp;<span class="op" id="7351869">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7351872">var</span>&nbsp;<span class="ident" id="7351876">x</span><span class="op" id="7351877">,</span>&nbsp;<span class="ident" id="7351879">y</span><span class="op" id="7351880">,</span>&nbsp;<span class="ident" id="7351882">z</span>&nbsp;<span class="ident" id="7351884">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351889">y</span><span class="op" id="7351890">.</span><span class="ident" id="7351891">SetFrac64</span><span class="op" id="7351900">(</span><span class="num" id="7351901">0</span><span class="op" id="7351902">,</span>&nbsp;<span class="num" id="7351904">42</span><span class="op" id="7351906">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7351910">if</span>&nbsp;<span class="ident" id="7351913">x</span><span class="op" id="7351914">.</span><span class="ident" id="7351915">Cmp</span><span class="op" id="7351918">(</span><span class="op" id="7351919">&amp;</span><span class="ident" id="7351920">y</span><span class="op" id="7351921">)</span>&nbsp;<span class="op" id="7351923">!=</span>&nbsp;<span class="num" id="7351926">0</span>&nbsp;<span class="op" id="7351928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7351932">t</span><span class="op" id="7351933">.</span><span class="ident" id="7351934">Errorf</span><span class="op" id="7351940">(</span><span class="string" id="7351941">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7351980">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7351983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7351987">if</span>&nbsp;<span class="ident" id="7351990">s</span>&nbsp;<span class="op" id="7351992">:=</span>&nbsp;<span class="ident" id="7351995">x</span><span class="op" id="7351996">.</span><span class="ident" id="7351997">String</span><span class="op" id="7352003">(</span><span class="op" id="7352004">)</span><span class="op" id="7352005">;</span>&nbsp;<span class="ident" id="7352007">s</span>&nbsp;<span class="op" id="7352009">!=</span>&nbsp;<span class="string" id="7352012">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7352018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352022">t</span><span class="op" id="7352023">.</span><span class="ident" id="7352024">Errorf</span><span class="op" id="7352030">(</span><span class="string" id="7352031">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7352053">,</span>&nbsp;<span class="ident" id="7352055">s</span><span class="op" id="7352056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352059">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352063">if</span>&nbsp;<span class="ident" id="7352066">s</span>&nbsp;<span class="op" id="7352068">:=</span>&nbsp;<span class="ident" id="7352071">x</span><span class="op" id="7352072">.</span><span class="ident" id="7352073">RatString</span><span class="op" id="7352082">(</span><span class="op" id="7352083">)</span><span class="op" id="7352084">;</span>&nbsp;<span class="ident" id="7352086">s</span>&nbsp;<span class="op" id="7352088">!=</span>&nbsp;<span class="string" id="7352091">&#34;0&#34;</span>&nbsp;<span class="op" id="7352095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352099">t</span><span class="op" id="7352100">.</span><span class="ident" id="7352101">Errorf</span><span class="op" id="7352107">(</span><span class="string" id="7352108">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7352128">,</span>&nbsp;<span class="ident" id="7352130">s</span><span class="op" id="7352131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352138">z</span><span class="op" id="7352139">.</span><span class="ident" id="7352140">Add</span><span class="op" id="7352143">(</span><span class="op" id="7352144">&amp;</span><span class="ident" id="7352145">x</span><span class="op" id="7352146">,</span>&nbsp;<span class="op" id="7352148">&amp;</span><span class="ident" id="7352149">y</span><span class="op" id="7352150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352153">if</span>&nbsp;<span class="ident" id="7352156">s</span>&nbsp;<span class="op" id="7352158">:=</span>&nbsp;<span class="ident" id="7352161">z</span><span class="op" id="7352162">.</span><span class="ident" id="7352163">RatString</span><span class="op" id="7352172">(</span><span class="op" id="7352173">)</span><span class="op" id="7352174">;</span>&nbsp;<span class="ident" id="7352176">s</span>&nbsp;<span class="op" id="7352178">!=</span>&nbsp;<span class="string" id="7352181">&#34;0&#34;</span>&nbsp;<span class="op" id="7352185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352189">t</span><span class="op" id="7352190">.</span><span class="ident" id="7352191">Errorf</span><span class="op" id="7352197">(</span><span class="string" id="7352198">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7352220">,</span>&nbsp;<span class="ident" id="7352222">s</span><span class="op" id="7352223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352230">z</span><span class="op" id="7352231">.</span><span class="ident" id="7352232">Sub</span><span class="op" id="7352235">(</span><span class="op" id="7352236">&amp;</span><span class="ident" id="7352237">x</span><span class="op" id="7352238">,</span>&nbsp;<span class="op" id="7352240">&amp;</span><span class="ident" id="7352241">y</span><span class="op" id="7352242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352245">if</span>&nbsp;<span class="ident" id="7352248">s</span>&nbsp;<span class="op" id="7352250">:=</span>&nbsp;<span class="ident" id="7352253">z</span><span class="op" id="7352254">.</span><span class="ident" id="7352255">RatString</span><span class="op" id="7352264">(</span><span class="op" id="7352265">)</span><span class="op" id="7352266">;</span>&nbsp;<span class="ident" id="7352268">s</span>&nbsp;<span class="op" id="7352270">!=</span>&nbsp;<span class="string" id="7352273">&#34;0&#34;</span>&nbsp;<span class="op" id="7352277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352281">t</span><span class="op" id="7352282">.</span><span class="ident" id="7352283">Errorf</span><span class="op" id="7352289">(</span><span class="string" id="7352290">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7352312">,</span>&nbsp;<span class="ident" id="7352314">s</span><span class="op" id="7352315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352322">z</span><span class="op" id="7352323">.</span><span class="ident" id="7352324">Mul</span><span class="op" id="7352327">(</span><span class="op" id="7352328">&amp;</span><span class="ident" id="7352329">x</span><span class="op" id="7352330">,</span>&nbsp;<span class="op" id="7352332">&amp;</span><span class="ident" id="7352333">y</span><span class="op" id="7352334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352337">if</span>&nbsp;<span class="ident" id="7352340">s</span>&nbsp;<span class="op" id="7352342">:=</span>&nbsp;<span class="ident" id="7352345">z</span><span class="op" id="7352346">.</span><span class="ident" id="7352347">RatString</span><span class="op" id="7352356">(</span><span class="op" id="7352357">)</span><span class="op" id="7352358">;</span>&nbsp;<span class="ident" id="7352360">s</span>&nbsp;<span class="op" id="7352362">!=</span>&nbsp;<span class="string" id="7352365">&#34;0&#34;</span>&nbsp;<span class="op" id="7352369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352373">t</span><span class="op" id="7352374">.</span><span class="ident" id="7352375">Errorf</span><span class="op" id="7352381">(</span><span class="string" id="7352382">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7352404">,</span>&nbsp;<span class="ident" id="7352406">s</span><span class="op" id="7352407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7352414">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352445">defer</span>&nbsp;<span class="keyword" id="7352451">func</span><span class="op" id="7352455">(</span><span class="op" id="7352456">)</span>&nbsp;<span class="op" id="7352458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7352462">if</span>&nbsp;<span class="ident" id="7352465">s</span>&nbsp;<span class="op" id="7352467">:=</span>&nbsp;<span class="builtinfunc" id="7352470">recover</span><span class="op" id="7352477">(</span><span class="op" id="7352478">)</span><span class="op" id="7352479">;</span>&nbsp;<span class="ident" id="7352481">s</span>&nbsp;<span class="op" id="7352483">==</span>&nbsp;<span class="ident" id="7352486">nil</span>&nbsp;<span class="op" id="7352490">||</span>&nbsp;<span class="ident" id="7352493">s</span><span class="op" id="7352494">.</span><span class="op" id="7352495">(</span><span class="builtintype" id="7352496">string</span><span class="op" id="7352502">)</span>&nbsp;<span class="op" id="7352504">!=</span>&nbsp;<span class="string" id="7352507">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7352526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7352531">panic</span><span class="op" id="7352536">(</span><span class="ident" id="7352537">s</span><span class="op" id="7352538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352542">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352545">}</span><span class="op" id="7352546">(</span><span class="op" id="7352547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352550">z</span><span class="op" id="7352551">.</span><span class="ident" id="7352552">Quo</span><span class="op" id="7352555">(</span><span class="op" id="7352556">&amp;</span><span class="ident" id="7352557">x</span><span class="op" id="7352558">,</span>&nbsp;<span class="op" id="7352560">&amp;</span><span class="ident" id="7352561">y</span><span class="op" id="7352562">)</span><br>
<span class="lineno"></span><span class="op" id="7352564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7352567">var</span>&nbsp;<span class="ident" id="7352571">setStringTests</span>&nbsp;<span class="op" id="7352586">=</span>&nbsp;<span class="op" id="7352588">[</span><span class="op" id="7352589">]</span><span class="keyword" id="7352590">struct</span>&nbsp;<span class="op" id="7352597">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352600">in</span><span class="op" id="7352602">,</span>&nbsp;<span class="ident" id="7352604">out</span>&nbsp;<span class="builtintype" id="7352608">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7352616">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7352624">bool</span><br>
<span class="lineno"></span><span class="op" id="7352629">}</span><span class="op" id="7352630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352633">{</span><span class="string" id="7352634">&#34;0&#34;</span><span class="op" id="7352637">,</span>&nbsp;<span class="string" id="7352639">&#34;0&#34;</span><span class="op" id="7352642">,</span>&nbsp;<span class="builtintype" id="7352644">true</span><span class="op" id="7352648">}</span><span class="op" id="7352649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352652">{</span><span class="string" id="7352653">&#34;-0&#34;</span><span class="op" id="7352657">,</span>&nbsp;<span class="string" id="7352659">&#34;0&#34;</span><span class="op" id="7352662">,</span>&nbsp;<span class="builtintype" id="7352664">true</span><span class="op" id="7352668">}</span><span class="op" id="7352669">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352672">{</span><span class="string" id="7352673">&#34;1&#34;</span><span class="op" id="7352676">,</span>&nbsp;<span class="string" id="7352678">&#34;1&#34;</span><span class="op" id="7352681">,</span>&nbsp;<span class="builtintype" id="7352683">true</span><span class="op" id="7352687">}</span><span class="op" id="7352688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352691">{</span><span class="string" id="7352692">&#34;-1&#34;</span><span class="op" id="7352696">,</span>&nbsp;<span class="string" id="7352698">&#34;-1&#34;</span><span class="op" id="7352702">,</span>&nbsp;<span class="builtintype" id="7352704">true</span><span class="op" id="7352708">}</span><span class="op" id="7352709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352712">{</span><span class="string" id="7352713">&#34;1.&#34;</span><span class="op" id="7352717">,</span>&nbsp;<span class="string" id="7352719">&#34;1&#34;</span><span class="op" id="7352722">,</span>&nbsp;<span class="builtintype" id="7352724">true</span><span class="op" id="7352728">}</span><span class="op" id="7352729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352732">{</span><span class="string" id="7352733">&#34;1e0&#34;</span><span class="op" id="7352738">,</span>&nbsp;<span class="string" id="7352740">&#34;1&#34;</span><span class="op" id="7352743">,</span>&nbsp;<span class="builtintype" id="7352745">true</span><span class="op" id="7352749">}</span><span class="op" id="7352750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352753">{</span><span class="string" id="7352754">&#34;1.e1&#34;</span><span class="op" id="7352760">,</span>&nbsp;<span class="string" id="7352762">&#34;10&#34;</span><span class="op" id="7352766">,</span>&nbsp;<span class="builtintype" id="7352768">true</span><span class="op" id="7352772">}</span><span class="op" id="7352773">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352776">{</span><span class="ident" id="7352777">in</span><span class="op" id="7352779">:</span>&nbsp;<span class="string" id="7352781">&#34;1e&#34;</span><span class="op" id="7352785">,</span>&nbsp;<span class="ident" id="7352787">ok</span><span class="op" id="7352789">:</span>&nbsp;<span class="builtintype" id="7352791">false</span><span class="op" id="7352796">}</span><span class="op" id="7352797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352800">{</span><span class="ident" id="7352801">in</span><span class="op" id="7352803">:</span>&nbsp;<span class="string" id="7352805">&#34;1.e&#34;</span><span class="op" id="7352810">,</span>&nbsp;<span class="ident" id="7352812">ok</span><span class="op" id="7352814">:</span>&nbsp;<span class="builtintype" id="7352816">false</span><span class="op" id="7352821">}</span><span class="op" id="7352822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352825">{</span><span class="ident" id="7352826">in</span><span class="op" id="7352828">:</span>&nbsp;<span class="string" id="7352830">&#34;1e+14e-5&#34;</span><span class="op" id="7352840">,</span>&nbsp;<span class="ident" id="7352842">ok</span><span class="op" id="7352844">:</span>&nbsp;<span class="builtintype" id="7352846">false</span><span class="op" id="7352851">}</span><span class="op" id="7352852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352855">{</span><span class="ident" id="7352856">in</span><span class="op" id="7352858">:</span>&nbsp;<span class="string" id="7352860">&#34;1e4.5&#34;</span><span class="op" id="7352867">,</span>&nbsp;<span class="ident" id="7352869">ok</span><span class="op" id="7352871">:</span>&nbsp;<span class="builtintype" id="7352873">false</span><span class="op" id="7352878">}</span><span class="op" id="7352879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352882">{</span><span class="ident" id="7352883">in</span><span class="op" id="7352885">:</span>&nbsp;<span class="string" id="7352887">&#34;r&#34;</span><span class="op" id="7352890">,</span>&nbsp;<span class="ident" id="7352892">ok</span><span class="op" id="7352894">:</span>&nbsp;<span class="builtintype" id="7352896">false</span><span class="op" id="7352901">}</span><span class="op" id="7352902">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352905">{</span><span class="ident" id="7352906">in</span><span class="op" id="7352908">:</span>&nbsp;<span class="string" id="7352910">&#34;a/b&#34;</span><span class="op" id="7352915">,</span>&nbsp;<span class="ident" id="7352917">ok</span><span class="op" id="7352919">:</span>&nbsp;<span class="builtintype" id="7352921">false</span><span class="op" id="7352926">}</span><span class="op" id="7352927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352930">{</span><span class="ident" id="7352931">in</span><span class="op" id="7352933">:</span>&nbsp;<span class="string" id="7352935">&#34;a.b&#34;</span><span class="op" id="7352940">,</span>&nbsp;<span class="ident" id="7352942">ok</span><span class="op" id="7352944">:</span>&nbsp;<span class="builtintype" id="7352946">false</span><span class="op" id="7352951">}</span><span class="op" id="7352952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352955">{</span><span class="string" id="7352956">&#34;-0.1&#34;</span><span class="op" id="7352962">,</span>&nbsp;<span class="string" id="7352964">&#34;-1/10&#34;</span><span class="op" id="7352971">,</span>&nbsp;<span class="builtintype" id="7352973">true</span><span class="op" id="7352977">}</span><span class="op" id="7352978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7352981">{</span><span class="string" id="7352982">&#34;-.1&#34;</span><span class="op" id="7352987">,</span>&nbsp;<span class="string" id="7352989">&#34;-1/10&#34;</span><span class="op" id="7352996">,</span>&nbsp;<span class="builtintype" id="7352998">true</span><span class="op" id="7353002">}</span><span class="op" id="7353003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353006">{</span><span class="string" id="7353007">&#34;2/4&#34;</span><span class="op" id="7353012">,</span>&nbsp;<span class="string" id="7353014">&#34;1/2&#34;</span><span class="op" id="7353019">,</span>&nbsp;<span class="builtintype" id="7353021">true</span><span class="op" id="7353025">}</span><span class="op" id="7353026">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353029">{</span><span class="string" id="7353030">&#34;.25&#34;</span><span class="op" id="7353035">,</span>&nbsp;<span class="string" id="7353037">&#34;1/4&#34;</span><span class="op" id="7353042">,</span>&nbsp;<span class="builtintype" id="7353044">true</span><span class="op" id="7353048">}</span><span class="op" id="7353049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353052">{</span><span class="string" id="7353053">&#34;-1/5&#34;</span><span class="op" id="7353059">,</span>&nbsp;<span class="string" id="7353061">&#34;-1/5&#34;</span><span class="op" id="7353067">,</span>&nbsp;<span class="builtintype" id="7353069">true</span><span class="op" id="7353073">}</span><span class="op" id="7353074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353077">{</span><span class="string" id="7353078">&#34;8129567.7690E14&#34;</span><span class="op" id="7353095">,</span>&nbsp;<span class="string" id="7353097">&#34;812956776900000000000&#34;</span><span class="op" id="7353120">,</span>&nbsp;<span class="builtintype" id="7353122">true</span><span class="op" id="7353126">}</span><span class="op" id="7353127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353130">{</span><span class="string" id="7353131">&#34;78189e+4&#34;</span><span class="op" id="7353141">,</span>&nbsp;<span class="string" id="7353143">&#34;781890000&#34;</span><span class="op" id="7353154">,</span>&nbsp;<span class="builtintype" id="7353156">true</span><span class="op" id="7353160">}</span><span class="op" id="7353161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353164">{</span><span class="string" id="7353165">&#34;553019.8935e+8&#34;</span><span class="op" id="7353181">,</span>&nbsp;<span class="string" id="7353183">&#34;55301989350000&#34;</span><span class="op" id="7353199">,</span>&nbsp;<span class="builtintype" id="7353201">true</span><span class="op" id="7353205">}</span><span class="op" id="7353206">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353209">{</span><span class="string" id="7353210">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7353245">,</span>&nbsp;<span class="string" id="7353247">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7353290">,</span>&nbsp;<span class="builtintype" id="7353292">true</span><span class="op" id="7353296">}</span><span class="op" id="7353297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353300">{</span><span class="string" id="7353301">&#34;9877861857500000E-7&#34;</span><span class="op" id="7353322">,</span>&nbsp;<span class="string" id="7353324">&#34;3951144743/4&#34;</span><span class="op" id="7353338">,</span>&nbsp;<span class="builtintype" id="7353340">true</span><span class="op" id="7353344">}</span><span class="op" id="7353345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353348">{</span><span class="string" id="7353349">&#34;2169378.417e-3&#34;</span><span class="op" id="7353365">,</span>&nbsp;<span class="string" id="7353367">&#34;2169378417/1000000&#34;</span><span class="op" id="7353387">,</span>&nbsp;<span class="builtintype" id="7353389">true</span><span class="op" id="7353393">}</span><span class="op" id="7353394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353397">{</span><span class="string" id="7353398">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7353436">,</span>&nbsp;<span class="string" id="7353438">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7353476">,</span>&nbsp;<span class="builtintype" id="7353478">true</span><span class="op" id="7353482">}</span><span class="op" id="7353483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353486">{</span><span class="string" id="7353487">&#34;53/70893980658822810696&#34;</span><span class="op" id="7353512">,</span>&nbsp;<span class="string" id="7353514">&#34;53/70893980658822810696&#34;</span><span class="op" id="7353539">,</span>&nbsp;<span class="builtintype" id="7353541">true</span><span class="op" id="7353545">}</span><span class="op" id="7353546">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353549">{</span><span class="string" id="7353550">&#34;106/141787961317645621392&#34;</span><span class="op" id="7353577">,</span>&nbsp;<span class="string" id="7353579">&#34;53/70893980658822810696&#34;</span><span class="op" id="7353604">,</span>&nbsp;<span class="builtintype" id="7353606">true</span><span class="op" id="7353610">}</span><span class="op" id="7353611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353614">{</span><span class="string" id="7353615">&#34;204211327800791583.81095&#34;</span><span class="op" id="7353641">,</span>&nbsp;<span class="string" id="7353643">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7353673">,</span>&nbsp;<span class="builtintype" id="7353675">true</span><span class="op" id="7353679">}</span><span class="op" id="7353680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353683">{</span><span class="ident" id="7353684">in</span><span class="op" id="7353686">:</span>&nbsp;<span class="string" id="7353688">&#34;1/0&#34;</span><span class="op" id="7353693">,</span>&nbsp;<span class="ident" id="7353695">ok</span><span class="op" id="7353697">:</span>&nbsp;<span class="builtintype" id="7353699">false</span><span class="op" id="7353704">}</span><span class="op" id="7353705">,</span><br>
<span class="lineno"></span><span class="op" id="7353707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7353710">func</span>&nbsp;<span class="ident" id="7353715">TestRatSetString</span><span class="op" id="7353731">(</span><span class="ident" id="7353732">t</span>&nbsp;<span class="op" id="7353734">*</span><span class="ident" id="7353735">testing</span><span class="op" id="7353742">.</span><span class="ident" id="7353743">T</span><span class="op" id="7353744">)</span>&nbsp;<span class="op" id="7353746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7353749">for</span>&nbsp;<span class="ident" id="7353753">i</span><span class="op" id="7353754">,</span>&nbsp;<span class="ident" id="7353756">test</span>&nbsp;<span class="op" id="7353761">:=</span>&nbsp;<span class="keyword" id="7353764">range</span>&nbsp;<span class="ident" id="7353770">setStringTests</span>&nbsp;<span class="op" id="7353785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353789">x</span><span class="op" id="7353790">,</span>&nbsp;<span class="ident" id="7353792">ok</span>&nbsp;<span class="op" id="7353795">:=</span>&nbsp;<span class="builtinfunc" id="7353798">new</span><span class="op" id="7353801">(</span><span class="ident" id="7353802">Rat</span><span class="op" id="7353805">)</span><span class="op" id="7353806">.</span><span class="ident" id="7353807">SetString</span><span class="op" id="7353816">(</span><span class="ident" id="7353817">test</span><span class="op" id="7353821">.</span><span class="ident" id="7353822">in</span><span class="op" id="7353824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7353829">if</span>&nbsp;<span class="ident" id="7353832">ok</span>&nbsp;<span class="op" id="7353835">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7353840">if</span>&nbsp;<span class="op" id="7353843">!</span><span class="ident" id="7353844">test</span><span class="op" id="7353848">.</span><span class="ident" id="7353849">ok</span>&nbsp;<span class="op" id="7353852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353858">t</span><span class="op" id="7353859">.</span><span class="ident" id="7353860">Errorf</span><span class="op" id="7353866">(</span><span class="string" id="7353867">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7353903">,</span>&nbsp;<span class="ident" id="7353905">i</span><span class="op" id="7353906">,</span>&nbsp;<span class="ident" id="7353908">test</span><span class="op" id="7353912">.</span><span class="ident" id="7353913">in</span><span class="op" id="7353915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7353920">}</span>&nbsp;<span class="keyword" id="7353922">else</span>&nbsp;<span class="keyword" id="7353927">if</span>&nbsp;<span class="ident" id="7353930">x</span><span class="op" id="7353931">.</span><span class="ident" id="7353932">RatString</span><span class="op" id="7353941">(</span><span class="op" id="7353942">)</span>&nbsp;<span class="op" id="7353944">!=</span>&nbsp;<span class="ident" id="7353947">test</span><span class="op" id="7353951">.</span><span class="ident" id="7353952">out</span>&nbsp;<span class="op" id="7353956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7353962">t</span><span class="op" id="7353963">.</span><span class="ident" id="7353964">Errorf</span><span class="op" id="7353970">(</span><span class="string" id="7353971">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7354005">,</span>&nbsp;<span class="ident" id="7354007">i</span><span class="op" id="7354008">,</span>&nbsp;<span class="ident" id="7354010">test</span><span class="op" id="7354014">.</span><span class="ident" id="7354015">in</span><span class="op" id="7354017">,</span>&nbsp;<span class="ident" id="7354019">x</span><span class="op" id="7354020">.</span><span class="ident" id="7354021">RatString</span><span class="op" id="7354030">(</span><span class="op" id="7354031">)</span><span class="op" id="7354032">,</span>&nbsp;<span class="ident" id="7354034">test</span><span class="op" id="7354038">.</span><span class="ident" id="7354039">out</span><span class="op" id="7354042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354047">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354051">}</span>&nbsp;<span class="keyword" id="7354053">else</span>&nbsp;<span class="keyword" id="7354058">if</span>&nbsp;<span class="ident" id="7354061">x</span>&nbsp;<span class="op" id="7354063">!=</span>&nbsp;<span class="ident" id="7354066">nil</span>&nbsp;<span class="op" id="7354070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354075">t</span><span class="op" id="7354076">.</span><span class="ident" id="7354077">Errorf</span><span class="op" id="7354083">(</span><span class="string" id="7354084">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7354119">,</span>&nbsp;<span class="ident" id="7354121">i</span><span class="op" id="7354122">,</span>&nbsp;<span class="ident" id="7354124">test</span><span class="op" id="7354128">.</span><span class="ident" id="7354129">in</span><span class="op" id="7354131">,</span>&nbsp;<span class="ident" id="7354133">x</span><span class="op" id="7354134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354141">}</span><br>
<span class="lineno"></span><span class="op" id="7354143">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7354146">func</span>&nbsp;<span class="ident" id="7354151">TestRatScan</span><span class="op" id="7354162">(</span><span class="ident" id="7354163">t</span>&nbsp;<span class="op" id="7354165">*</span><span class="ident" id="7354166">testing</span><span class="op" id="7354173">.</span><span class="ident" id="7354174">T</span><span class="op" id="7354175">)</span>&nbsp;<span class="op" id="7354177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354180">var</span>&nbsp;<span class="ident" id="7354184">buf</span>&nbsp;<span class="ident" id="7354188">bytes</span><span class="op" id="7354193">.</span><span class="ident" id="7354194">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354202">for</span>&nbsp;<span class="ident" id="7354206">i</span><span class="op" id="7354207">,</span>&nbsp;<span class="ident" id="7354209">test</span>&nbsp;<span class="op" id="7354214">:=</span>&nbsp;<span class="keyword" id="7354217">range</span>&nbsp;<span class="ident" id="7354223">setStringTests</span>&nbsp;<span class="op" id="7354238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354242">x</span>&nbsp;<span class="op" id="7354244">:=</span>&nbsp;<span class="builtinfunc" id="7354247">new</span><span class="op" id="7354250">(</span><span class="ident" id="7354251">Rat</span><span class="op" id="7354254">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354258">buf</span><span class="op" id="7354261">.</span><span class="ident" id="7354262">Reset</span><span class="op" id="7354267">(</span><span class="op" id="7354268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354272">buf</span><span class="op" id="7354275">.</span><span class="ident" id="7354276">WriteString</span><span class="op" id="7354287">(</span><span class="ident" id="7354288">test</span><span class="op" id="7354292">.</span><span class="ident" id="7354293">in</span><span class="op" id="7354295">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354300">_</span><span class="op" id="7354301">,</span>&nbsp;<span class="ident" id="7354303">err</span>&nbsp;<span class="op" id="7354307">:=</span>&nbsp;<span class="ident" id="7354310">fmt</span><span class="op" id="7354313">.</span><span class="ident" id="7354314">Fscanf</span><span class="op" id="7354320">(</span><span class="op" id="7354321">&amp;</span><span class="ident" id="7354322">buf</span><span class="op" id="7354325">,</span>&nbsp;<span class="string" id="7354327">&#34;%v&#34;</span><span class="op" id="7354331">,</span>&nbsp;<span class="ident" id="7354333">x</span><span class="op" id="7354334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354338">if</span>&nbsp;<span class="ident" id="7354341">err</span>&nbsp;<span class="op" id="7354345">==</span>&nbsp;<span class="ident" id="7354348">nil</span>&nbsp;<span class="op" id="7354352">!=</span>&nbsp;<span class="ident" id="7354355">test</span><span class="op" id="7354359">.</span><span class="ident" id="7354360">ok</span>&nbsp;<span class="op" id="7354363">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354368">if</span>&nbsp;<span class="ident" id="7354371">test</span><span class="op" id="7354375">.</span><span class="ident" id="7354376">ok</span>&nbsp;<span class="op" id="7354379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354385">t</span><span class="op" id="7354386">.</span><span class="ident" id="7354387">Errorf</span><span class="op" id="7354393">(</span><span class="string" id="7354394">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7354409">,</span>&nbsp;<span class="ident" id="7354411">i</span><span class="op" id="7354412">,</span>&nbsp;<span class="ident" id="7354414">err</span><span class="op" id="7354417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354422">}</span>&nbsp;<span class="keyword" id="7354424">else</span>&nbsp;<span class="op" id="7354429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354435">t</span><span class="op" id="7354436">.</span><span class="ident" id="7354437">Errorf</span><span class="op" id="7354443">(</span><span class="string" id="7354444">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7354464">,</span>&nbsp;<span class="ident" id="7354466">i</span><span class="op" id="7354467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354472">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354477">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7354492">if</span>&nbsp;<span class="ident" id="7354495">err</span>&nbsp;<span class="op" id="7354499">==</span>&nbsp;<span class="ident" id="7354502">nil</span>&nbsp;<span class="op" id="7354506">&amp;&amp;</span>&nbsp;<span class="ident" id="7354509">x</span><span class="op" id="7354510">.</span><span class="ident" id="7354511">RatString</span><span class="op" id="7354520">(</span><span class="op" id="7354521">)</span>&nbsp;<span class="op" id="7354523">!=</span>&nbsp;<span class="ident" id="7354526">test</span><span class="op" id="7354530">.</span><span class="ident" id="7354531">out</span>&nbsp;<span class="op" id="7354535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354540">t</span><span class="op" id="7354541">.</span><span class="ident" id="7354542">Errorf</span><span class="op" id="7354548">(</span><span class="string" id="7354549">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7354569">,</span>&nbsp;<span class="ident" id="7354571">i</span><span class="op" id="7354572">,</span>&nbsp;<span class="ident" id="7354574">x</span><span class="op" id="7354575">.</span><span class="ident" id="7354576">RatString</span><span class="op" id="7354585">(</span><span class="op" id="7354586">)</span><span class="op" id="7354587">,</span>&nbsp;<span class="ident" id="7354589">test</span><span class="op" id="7354593">.</span><span class="ident" id="7354594">out</span><span class="op" id="7354597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354601">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354604">}</span><br>
<span class="lineno"></span><span class="op" id="7354606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7354609">var</span>&nbsp;<span class="ident" id="7354613">floatStringTests</span>&nbsp;<span class="op" id="7354630">=</span>&nbsp;<span class="op" id="7354632">[</span><span class="op" id="7354633">]</span><span class="keyword" id="7354634">struct</span>&nbsp;<span class="op" id="7354641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354644">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7354649">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354657">prec</span>&nbsp;<span class="builtintype" id="7354662">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7354667">out</span>&nbsp;&nbsp;<span class="builtintype" id="7354672">string</span><br>
<span class="lineno"></span><span class="op" id="7354679">}</span><span class="op" id="7354680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354683">{</span><span class="string" id="7354684">&#34;0&#34;</span><span class="op" id="7354687">,</span>&nbsp;<span class="num" id="7354689">0</span><span class="op" id="7354690">,</span>&nbsp;<span class="string" id="7354692">&#34;0&#34;</span><span class="op" id="7354695">}</span><span class="op" id="7354696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354699">{</span><span class="string" id="7354700">&#34;0&#34;</span><span class="op" id="7354703">,</span>&nbsp;<span class="num" id="7354705">4</span><span class="op" id="7354706">,</span>&nbsp;<span class="string" id="7354708">&#34;0.0000&#34;</span><span class="op" id="7354716">}</span><span class="op" id="7354717">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354720">{</span><span class="string" id="7354721">&#34;1&#34;</span><span class="op" id="7354724">,</span>&nbsp;<span class="num" id="7354726">0</span><span class="op" id="7354727">,</span>&nbsp;<span class="string" id="7354729">&#34;1&#34;</span><span class="op" id="7354732">}</span><span class="op" id="7354733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354736">{</span><span class="string" id="7354737">&#34;1&#34;</span><span class="op" id="7354740">,</span>&nbsp;<span class="num" id="7354742">2</span><span class="op" id="7354743">,</span>&nbsp;<span class="string" id="7354745">&#34;1.00&#34;</span><span class="op" id="7354751">}</span><span class="op" id="7354752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354755">{</span><span class="string" id="7354756">&#34;-1&#34;</span><span class="op" id="7354760">,</span>&nbsp;<span class="num" id="7354762">0</span><span class="op" id="7354763">,</span>&nbsp;<span class="string" id="7354765">&#34;-1&#34;</span><span class="op" id="7354769">}</span><span class="op" id="7354770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354773">{</span><span class="string" id="7354774">&#34;.25&#34;</span><span class="op" id="7354779">,</span>&nbsp;<span class="num" id="7354781">2</span><span class="op" id="7354782">,</span>&nbsp;<span class="string" id="7354784">&#34;0.25&#34;</span><span class="op" id="7354790">}</span><span class="op" id="7354791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354794">{</span><span class="string" id="7354795">&#34;.25&#34;</span><span class="op" id="7354800">,</span>&nbsp;<span class="num" id="7354802">1</span><span class="op" id="7354803">,</span>&nbsp;<span class="string" id="7354805">&#34;0.3&#34;</span><span class="op" id="7354810">}</span><span class="op" id="7354811">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354814">{</span><span class="string" id="7354815">&#34;.25&#34;</span><span class="op" id="7354820">,</span>&nbsp;<span class="num" id="7354822">3</span><span class="op" id="7354823">,</span>&nbsp;<span class="string" id="7354825">&#34;0.250&#34;</span><span class="op" id="7354832">}</span><span class="op" id="7354833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354836">{</span><span class="string" id="7354837">&#34;-1/3&#34;</span><span class="op" id="7354843">,</span>&nbsp;<span class="num" id="7354845">3</span><span class="op" id="7354846">,</span>&nbsp;<span class="string" id="7354848">&#34;-0.333&#34;</span><span class="op" id="7354856">}</span><span class="op" id="7354857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354860">{</span><span class="string" id="7354861">&#34;-2/3&#34;</span><span class="op" id="7354867">,</span>&nbsp;<span class="num" id="7354869">4</span><span class="op" id="7354870">,</span>&nbsp;<span class="string" id="7354872">&#34;-0.6667&#34;</span><span class="op" id="7354881">}</span><span class="op" id="7354882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354885">{</span><span class="string" id="7354886">&#34;0.96&#34;</span><span class="op" id="7354892">,</span>&nbsp;<span class="num" id="7354894">1</span><span class="op" id="7354895">,</span>&nbsp;<span class="string" id="7354897">&#34;1.0&#34;</span><span class="op" id="7354902">}</span><span class="op" id="7354903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354906">{</span><span class="string" id="7354907">&#34;0.999&#34;</span><span class="op" id="7354914">,</span>&nbsp;<span class="num" id="7354916">2</span><span class="op" id="7354917">,</span>&nbsp;<span class="string" id="7354919">&#34;1.00&#34;</span><span class="op" id="7354925">}</span><span class="op" id="7354926">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354929">{</span><span class="string" id="7354930">&#34;0.9&#34;</span><span class="op" id="7354935">,</span>&nbsp;<span class="num" id="7354937">0</span><span class="op" id="7354938">,</span>&nbsp;<span class="string" id="7354940">&#34;1&#34;</span><span class="op" id="7354943">}</span><span class="op" id="7354944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354947">{</span><span class="string" id="7354948">&#34;.25&#34;</span><span class="op" id="7354953">,</span>&nbsp;<span class="op" id="7354955">-</span><span class="num" id="7354956">1</span><span class="op" id="7354957">,</span>&nbsp;<span class="string" id="7354959">&#34;0&#34;</span><span class="op" id="7354962">}</span><span class="op" id="7354963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7354966">{</span><span class="string" id="7354967">&#34;.55&#34;</span><span class="op" id="7354972">,</span>&nbsp;<span class="op" id="7354974">-</span><span class="num" id="7354975">1</span><span class="op" id="7354976">,</span>&nbsp;<span class="string" id="7354978">&#34;1&#34;</span><span class="op" id="7354981">}</span><span class="op" id="7354982">,</span><br>
<span class="lineno"></span><span class="op" id="7354984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7354987">func</span>&nbsp;<span class="ident" id="7354992">TestFloatString</span><span class="op" id="7355007">(</span><span class="ident" id="7355008">t</span>&nbsp;<span class="op" id="7355010">*</span><span class="ident" id="7355011">testing</span><span class="op" id="7355018">.</span><span class="ident" id="7355019">T</span><span class="op" id="7355020">)</span>&nbsp;<span class="op" id="7355022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355025">for</span>&nbsp;<span class="ident" id="7355029">i</span><span class="op" id="7355030">,</span>&nbsp;<span class="ident" id="7355032">test</span>&nbsp;<span class="op" id="7355037">:=</span>&nbsp;<span class="keyword" id="7355040">range</span>&nbsp;<span class="ident" id="7355046">floatStringTests</span>&nbsp;<span class="op" id="7355063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355067">x</span><span class="op" id="7355068">,</span>&nbsp;<span class="ident" id="7355070">_</span>&nbsp;<span class="op" id="7355072">:=</span>&nbsp;<span class="builtinfunc" id="7355075">new</span><span class="op" id="7355078">(</span><span class="ident" id="7355079">Rat</span><span class="op" id="7355082">)</span><span class="op" id="7355083">.</span><span class="ident" id="7355084">SetString</span><span class="op" id="7355093">(</span><span class="ident" id="7355094">test</span><span class="op" id="7355098">.</span><span class="ident" id="7355099">in</span><span class="op" id="7355101">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355106">if</span>&nbsp;<span class="ident" id="7355109">x</span><span class="op" id="7355110">.</span><span class="ident" id="7355111">FloatString</span><span class="op" id="7355122">(</span><span class="ident" id="7355123">test</span><span class="op" id="7355127">.</span><span class="ident" id="7355128">prec</span><span class="op" id="7355132">)</span>&nbsp;<span class="op" id="7355134">!=</span>&nbsp;<span class="ident" id="7355137">test</span><span class="op" id="7355141">.</span><span class="ident" id="7355142">out</span>&nbsp;<span class="op" id="7355146">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355151">t</span><span class="op" id="7355152">.</span><span class="ident" id="7355153">Errorf</span><span class="op" id="7355159">(</span><span class="string" id="7355160">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7355180">,</span>&nbsp;<span class="ident" id="7355182">i</span><span class="op" id="7355183">,</span>&nbsp;<span class="ident" id="7355185">x</span><span class="op" id="7355186">.</span><span class="ident" id="7355187">FloatString</span><span class="op" id="7355198">(</span><span class="ident" id="7355199">test</span><span class="op" id="7355203">.</span><span class="ident" id="7355204">prec</span><span class="op" id="7355208">)</span><span class="op" id="7355209">,</span>&nbsp;<span class="ident" id="7355211">test</span><span class="op" id="7355215">.</span><span class="ident" id="7355216">out</span><span class="op" id="7355219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355226">}</span><br>
<span class="lineno"></span><span class="op" id="7355228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7355231">func</span>&nbsp;<span class="ident" id="7355236">TestRatSign</span><span class="op" id="7355247">(</span><span class="ident" id="7355248">t</span>&nbsp;<span class="op" id="7355250">*</span><span class="ident" id="7355251">testing</span><span class="op" id="7355258">.</span><span class="ident" id="7355259">T</span><span class="op" id="7355260">)</span>&nbsp;<span class="op" id="7355262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355265">zero</span>&nbsp;<span class="op" id="7355270">:=</span>&nbsp;<span class="ident" id="7355273">NewRat</span><span class="op" id="7355279">(</span><span class="num" id="7355280">0</span><span class="op" id="7355281">,</span>&nbsp;<span class="num" id="7355283">1</span><span class="op" id="7355284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355287">for</span>&nbsp;<span class="ident" id="7355291">_</span><span class="op" id="7355292">,</span>&nbsp;<span class="ident" id="7355294">a</span>&nbsp;<span class="op" id="7355296">:=</span>&nbsp;<span class="keyword" id="7355299">range</span>&nbsp;<span class="ident" id="7355305">setStringTests</span>&nbsp;<span class="op" id="7355320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355324">x</span><span class="op" id="7355325">,</span>&nbsp;<span class="ident" id="7355327">ok</span>&nbsp;<span class="op" id="7355330">:=</span>&nbsp;<span class="builtinfunc" id="7355333">new</span><span class="op" id="7355336">(</span><span class="ident" id="7355337">Rat</span><span class="op" id="7355340">)</span><span class="op" id="7355341">.</span><span class="ident" id="7355342">SetString</span><span class="op" id="7355351">(</span><span class="ident" id="7355352">a</span><span class="op" id="7355353">.</span><span class="ident" id="7355354">in</span><span class="op" id="7355356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355360">if</span>&nbsp;<span class="op" id="7355363">!</span><span class="ident" id="7355364">ok</span>&nbsp;<span class="op" id="7355367">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355372">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355387">s</span>&nbsp;<span class="op" id="7355389">:=</span>&nbsp;<span class="ident" id="7355392">x</span><span class="op" id="7355393">.</span><span class="ident" id="7355394">Sign</span><span class="op" id="7355398">(</span><span class="op" id="7355399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355403">e</span>&nbsp;<span class="op" id="7355405">:=</span>&nbsp;<span class="ident" id="7355408">x</span><span class="op" id="7355409">.</span><span class="ident" id="7355410">Cmp</span><span class="op" id="7355413">(</span><span class="ident" id="7355414">zero</span><span class="op" id="7355418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7355422">if</span>&nbsp;<span class="ident" id="7355425">s</span>&nbsp;<span class="op" id="7355427">!=</span>&nbsp;<span class="ident" id="7355430">e</span>&nbsp;<span class="op" id="7355432">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355437">t</span><span class="op" id="7355438">.</span><span class="ident" id="7355439">Errorf</span><span class="op" id="7355445">(</span><span class="string" id="7355446">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7355474">,</span>&nbsp;<span class="ident" id="7355476">s</span><span class="op" id="7355477">,</span>&nbsp;<span class="ident" id="7355479">e</span><span class="op" id="7355480">,</span>&nbsp;<span class="op" id="7355482">&amp;</span><span class="ident" id="7355483">x</span><span class="op" id="7355484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355491">}</span><br>
<span class="lineno"></span><span class="op" id="7355493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7355496">var</span>&nbsp;<span class="ident" id="7355500">ratCmpTests</span>&nbsp;<span class="op" id="7355512">=</span>&nbsp;<span class="op" id="7355514">[</span><span class="op" id="7355515">]</span><span class="keyword" id="7355516">struct</span>&nbsp;<span class="op" id="7355523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355526">rat1</span><span class="op" id="7355530">,</span>&nbsp;<span class="ident" id="7355532">rat2</span>&nbsp;<span class="builtintype" id="7355537">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7355545">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7355556">int</span><br>
<span class="lineno"></span><span class="op" id="7355560">}</span><span class="op" id="7355561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355564">{</span><span class="string" id="7355565">&#34;0&#34;</span><span class="op" id="7355568">,</span>&nbsp;<span class="string" id="7355570">&#34;0/1&#34;</span><span class="op" id="7355575">,</span>&nbsp;<span class="num" id="7355577">0</span><span class="op" id="7355578">}</span><span class="op" id="7355579">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355582">{</span><span class="string" id="7355583">&#34;1/1&#34;</span><span class="op" id="7355588">,</span>&nbsp;<span class="string" id="7355590">&#34;1&#34;</span><span class="op" id="7355593">,</span>&nbsp;<span class="num" id="7355595">0</span><span class="op" id="7355596">}</span><span class="op" id="7355597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355600">{</span><span class="string" id="7355601">&#34;-1&#34;</span><span class="op" id="7355605">,</span>&nbsp;<span class="string" id="7355607">&#34;-2/2&#34;</span><span class="op" id="7355613">,</span>&nbsp;<span class="num" id="7355615">0</span><span class="op" id="7355616">}</span><span class="op" id="7355617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355620">{</span><span class="string" id="7355621">&#34;1&#34;</span><span class="op" id="7355624">,</span>&nbsp;<span class="string" id="7355626">&#34;0&#34;</span><span class="op" id="7355629">,</span>&nbsp;<span class="num" id="7355631">1</span><span class="op" id="7355632">}</span><span class="op" id="7355633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355636">{</span><span class="string" id="7355637">&#34;0/1&#34;</span><span class="op" id="7355642">,</span>&nbsp;<span class="string" id="7355644">&#34;1/1&#34;</span><span class="op" id="7355649">,</span>&nbsp;<span class="op" id="7355651">-</span><span class="num" id="7355652">1</span><span class="op" id="7355653">}</span><span class="op" id="7355654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355657">{</span><span class="string" id="7355658">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7355685">,</span>&nbsp;<span class="string" id="7355687">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7355714">,</span>&nbsp;<span class="op" id="7355716">-</span><span class="num" id="7355717">1</span><span class="op" id="7355718">}</span><span class="op" id="7355719">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355722">{</span><span class="string" id="7355723">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7355756">,</span>&nbsp;<span class="string" id="7355758">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7355791">,</span>&nbsp;<span class="op" id="7355793">-</span><span class="num" id="7355794">1</span><span class="op" id="7355795">}</span><span class="op" id="7355796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355799">{</span><span class="string" id="7355800">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7355837">,</span>&nbsp;<span class="string" id="7355839">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7355875">,</span>&nbsp;<span class="op" id="7355877">-</span><span class="num" id="7355878">1</span><span class="op" id="7355879">}</span><span class="op" id="7355880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7355883">{</span><span class="string" id="7355884">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7355920">,</span>&nbsp;<span class="string" id="7355922">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7355959">,</span>&nbsp;<span class="num" id="7355961">0</span><span class="op" id="7355962">}</span><span class="op" id="7355963">,</span><br>
<span class="lineno"></span><span class="op" id="7355965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7355968">func</span>&nbsp;<span class="ident" id="7355973">TestRatCmp</span><span class="op" id="7355983">(</span><span class="ident" id="7355984">t</span>&nbsp;<span class="op" id="7355986">*</span><span class="ident" id="7355987">testing</span><span class="op" id="7355994">.</span><span class="ident" id="7355995">T</span><span class="op" id="7355996">)</span>&nbsp;<span class="op" id="7355998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356001">for</span>&nbsp;<span class="ident" id="7356005">i</span><span class="op" id="7356006">,</span>&nbsp;<span class="ident" id="7356008">test</span>&nbsp;<span class="op" id="7356013">:=</span>&nbsp;<span class="keyword" id="7356016">range</span>&nbsp;<span class="ident" id="7356022">ratCmpTests</span>&nbsp;<span class="op" id="7356034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356038">x</span><span class="op" id="7356039">,</span>&nbsp;<span class="ident" id="7356041">_</span>&nbsp;<span class="op" id="7356043">:=</span>&nbsp;<span class="builtinfunc" id="7356046">new</span><span class="op" id="7356049">(</span><span class="ident" id="7356050">Rat</span><span class="op" id="7356053">)</span><span class="op" id="7356054">.</span><span class="ident" id="7356055">SetString</span><span class="op" id="7356064">(</span><span class="ident" id="7356065">test</span><span class="op" id="7356069">.</span><span class="ident" id="7356070">rat1</span><span class="op" id="7356074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356078">y</span><span class="op" id="7356079">,</span>&nbsp;<span class="ident" id="7356081">_</span>&nbsp;<span class="op" id="7356083">:=</span>&nbsp;<span class="builtinfunc" id="7356086">new</span><span class="op" id="7356089">(</span><span class="ident" id="7356090">Rat</span><span class="op" id="7356093">)</span><span class="op" id="7356094">.</span><span class="ident" id="7356095">SetString</span><span class="op" id="7356104">(</span><span class="ident" id="7356105">test</span><span class="op" id="7356109">.</span><span class="ident" id="7356110">rat2</span><span class="op" id="7356114">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356119">out</span>&nbsp;<span class="op" id="7356123">:=</span>&nbsp;<span class="ident" id="7356126">x</span><span class="op" id="7356127">.</span><span class="ident" id="7356128">Cmp</span><span class="op" id="7356131">(</span><span class="ident" id="7356132">y</span><span class="op" id="7356133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356137">if</span>&nbsp;<span class="ident" id="7356140">out</span>&nbsp;<span class="op" id="7356144">!=</span>&nbsp;<span class="ident" id="7356147">test</span><span class="op" id="7356151">.</span><span class="ident" id="7356152">out</span>&nbsp;<span class="op" id="7356156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356161">t</span><span class="op" id="7356162">.</span><span class="ident" id="7356163">Errorf</span><span class="op" id="7356169">(</span><span class="string" id="7356170">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7356197">,</span>&nbsp;<span class="ident" id="7356199">i</span><span class="op" id="7356200">,</span>&nbsp;<span class="ident" id="7356202">out</span><span class="op" id="7356205">,</span>&nbsp;<span class="ident" id="7356207">test</span><span class="op" id="7356211">.</span><span class="ident" id="7356212">out</span><span class="op" id="7356215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356222">}</span><br>
<span class="lineno">205</span><span class="op" id="7356224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356227">func</span>&nbsp;<span class="ident" id="7356232">TestIsInt</span><span class="op" id="7356241">(</span><span class="ident" id="7356242">t</span>&nbsp;<span class="op" id="7356244">*</span><span class="ident" id="7356245">testing</span><span class="op" id="7356252">.</span><span class="ident" id="7356253">T</span><span class="op" id="7356254">)</span>&nbsp;<span class="op" id="7356256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356259">one</span>&nbsp;<span class="op" id="7356263">:=</span>&nbsp;<span class="ident" id="7356266">NewInt</span><span class="op" id="7356272">(</span><span class="num" id="7356273">1</span><span class="op" id="7356274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356277">for</span>&nbsp;<span class="ident" id="7356281">_</span><span class="op" id="7356282">,</span>&nbsp;<span class="ident" id="7356284">a</span>&nbsp;<span class="op" id="7356286">:=</span>&nbsp;<span class="keyword" id="7356289">range</span>&nbsp;<span class="ident" id="7356295">setStringTests</span>&nbsp;<span class="op" id="7356310">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356314">x</span><span class="op" id="7356315">,</span>&nbsp;<span class="ident" id="7356317">ok</span>&nbsp;<span class="op" id="7356320">:=</span>&nbsp;<span class="builtinfunc" id="7356323">new</span><span class="op" id="7356326">(</span><span class="ident" id="7356327">Rat</span><span class="op" id="7356330">)</span><span class="op" id="7356331">.</span><span class="ident" id="7356332">SetString</span><span class="op" id="7356341">(</span><span class="ident" id="7356342">a</span><span class="op" id="7356343">.</span><span class="ident" id="7356344">in</span><span class="op" id="7356346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356350">if</span>&nbsp;<span class="op" id="7356353">!</span><span class="ident" id="7356354">ok</span>&nbsp;<span class="op" id="7356357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356362">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356377">i</span>&nbsp;<span class="op" id="7356379">:=</span>&nbsp;<span class="ident" id="7356382">x</span><span class="op" id="7356383">.</span><span class="ident" id="7356384">IsInt</span><span class="op" id="7356389">(</span><span class="op" id="7356390">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356394">e</span>&nbsp;<span class="op" id="7356396">:=</span>&nbsp;<span class="ident" id="7356399">x</span><span class="op" id="7356400">.</span><span class="ident" id="7356401">Denom</span><span class="op" id="7356406">(</span><span class="op" id="7356407">)</span><span class="op" id="7356408">.</span><span class="ident" id="7356409">Cmp</span><span class="op" id="7356412">(</span><span class="ident" id="7356413">one</span><span class="op" id="7356416">)</span>&nbsp;<span class="op" id="7356418">==</span>&nbsp;<span class="num" id="7356421">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356425">if</span>&nbsp;<span class="ident" id="7356428">i</span>&nbsp;<span class="op" id="7356430">!=</span>&nbsp;<span class="ident" id="7356433">e</span>&nbsp;<span class="op" id="7356435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356440">t</span><span class="op" id="7356441">.</span><span class="ident" id="7356442">Errorf</span><span class="op" id="7356448">(</span><span class="string" id="7356449">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7356479">,</span>&nbsp;<span class="ident" id="7356481">x</span><span class="op" id="7356482">,</span>&nbsp;<span class="ident" id="7356484">i</span><span class="op" id="7356485">,</span>&nbsp;<span class="ident" id="7356487">e</span><span class="op" id="7356488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356495">}</span><br>
<span class="lineno">220</span><span class="op" id="7356497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7356500">func</span>&nbsp;<span class="ident" id="7356505">TestRatAbs</span><span class="op" id="7356515">(</span><span class="ident" id="7356516">t</span>&nbsp;<span class="op" id="7356518">*</span><span class="ident" id="7356519">testing</span><span class="op" id="7356526">.</span><span class="ident" id="7356527">T</span><span class="op" id="7356528">)</span>&nbsp;<span class="op" id="7356530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356533">zero</span>&nbsp;<span class="op" id="7356538">:=</span>&nbsp;<span class="builtinfunc" id="7356541">new</span><span class="op" id="7356544">(</span><span class="ident" id="7356545">Rat</span><span class="op" id="7356548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356551">for</span>&nbsp;<span class="ident" id="7356555">_</span><span class="op" id="7356556">,</span>&nbsp;<span class="ident" id="7356558">a</span>&nbsp;<span class="op" id="7356560">:=</span>&nbsp;<span class="keyword" id="7356563">range</span>&nbsp;<span class="ident" id="7356569">setStringTests</span>&nbsp;<span class="op" id="7356584">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356588">x</span><span class="op" id="7356589">,</span>&nbsp;<span class="ident" id="7356591">ok</span>&nbsp;<span class="op" id="7356594">:=</span>&nbsp;<span class="builtinfunc" id="7356597">new</span><span class="op" id="7356600">(</span><span class="ident" id="7356601">Rat</span><span class="op" id="7356604">)</span><span class="op" id="7356605">.</span><span class="ident" id="7356606">SetString</span><span class="op" id="7356615">(</span><span class="ident" id="7356616">a</span><span class="op" id="7356617">.</span><span class="ident" id="7356618">in</span><span class="op" id="7356620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356624">if</span>&nbsp;<span class="op" id="7356627">!</span><span class="ident" id="7356628">ok</span>&nbsp;<span class="op" id="7356631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356636">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356651">e</span>&nbsp;<span class="op" id="7356653">:=</span>&nbsp;<span class="builtinfunc" id="7356656">new</span><span class="op" id="7356659">(</span><span class="ident" id="7356660">Rat</span><span class="op" id="7356663">)</span><span class="op" id="7356664">.</span><span class="ident" id="7356665">Set</span><span class="op" id="7356668">(</span><span class="ident" id="7356669">x</span><span class="op" id="7356670">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356674">if</span>&nbsp;<span class="ident" id="7356677">e</span><span class="op" id="7356678">.</span><span class="ident" id="7356679">Cmp</span><span class="op" id="7356682">(</span><span class="ident" id="7356683">zero</span><span class="op" id="7356687">)</span>&nbsp;<span class="op" id="7356689">&lt;</span>&nbsp;<span class="num" id="7356691">0</span>&nbsp;<span class="op" id="7356693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356698">e</span><span class="op" id="7356699">.</span><span class="ident" id="7356700">Sub</span><span class="op" id="7356703">(</span><span class="ident" id="7356704">zero</span><span class="op" id="7356708">,</span>&nbsp;<span class="ident" id="7356710">e</span><span class="op" id="7356711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356719">z</span>&nbsp;<span class="op" id="7356721">:=</span>&nbsp;<span class="builtinfunc" id="7356724">new</span><span class="op" id="7356727">(</span><span class="ident" id="7356728">Rat</span><span class="op" id="7356731">)</span><span class="op" id="7356732">.</span><span class="ident" id="7356733">Abs</span><span class="op" id="7356736">(</span><span class="ident" id="7356737">x</span><span class="op" id="7356738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356742">if</span>&nbsp;<span class="ident" id="7356745">z</span><span class="op" id="7356746">.</span><span class="ident" id="7356747">Cmp</span><span class="op" id="7356750">(</span><span class="ident" id="7356751">e</span><span class="op" id="7356752">)</span>&nbsp;<span class="op" id="7356754">!=</span>&nbsp;<span class="num" id="7356757">0</span>&nbsp;<span class="op" id="7356759">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356764">t</span><span class="op" id="7356765">.</span><span class="ident" id="7356766">Errorf</span><span class="op" id="7356772">(</span><span class="string" id="7356773">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7356800">,</span>&nbsp;<span class="ident" id="7356802">x</span><span class="op" id="7356803">,</span>&nbsp;<span class="ident" id="7356805">z</span><span class="op" id="7356806">,</span>&nbsp;<span class="ident" id="7356808">e</span><span class="op" id="7356809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356816">}</span><br>
<span class="lineno"></span><span class="op" id="7356818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7356821">func</span>&nbsp;<span class="ident" id="7356826">TestRatNeg</span><span class="op" id="7356836">(</span><span class="ident" id="7356837">t</span>&nbsp;<span class="op" id="7356839">*</span><span class="ident" id="7356840">testing</span><span class="op" id="7356847">.</span><span class="ident" id="7356848">T</span><span class="op" id="7356849">)</span>&nbsp;<span class="op" id="7356851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356854">zero</span>&nbsp;<span class="op" id="7356859">:=</span>&nbsp;<span class="builtinfunc" id="7356862">new</span><span class="op" id="7356865">(</span><span class="ident" id="7356866">Rat</span><span class="op" id="7356869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356872">for</span>&nbsp;<span class="ident" id="7356876">_</span><span class="op" id="7356877">,</span>&nbsp;<span class="ident" id="7356879">a</span>&nbsp;<span class="op" id="7356881">:=</span>&nbsp;<span class="keyword" id="7356884">range</span>&nbsp;<span class="ident" id="7356890">setStringTests</span>&nbsp;<span class="op" id="7356905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356909">x</span><span class="op" id="7356910">,</span>&nbsp;<span class="ident" id="7356912">ok</span>&nbsp;<span class="op" id="7356915">:=</span>&nbsp;<span class="builtinfunc" id="7356918">new</span><span class="op" id="7356921">(</span><span class="ident" id="7356922">Rat</span><span class="op" id="7356925">)</span><span class="op" id="7356926">.</span><span class="ident" id="7356927">SetString</span><span class="op" id="7356936">(</span><span class="ident" id="7356937">a</span><span class="op" id="7356938">.</span><span class="ident" id="7356939">in</span><span class="op" id="7356941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356945">if</span>&nbsp;<span class="op" id="7356948">!</span><span class="ident" id="7356949">ok</span>&nbsp;<span class="op" id="7356952">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7356957">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7356968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7356972">e</span>&nbsp;<span class="op" id="7356974">:=</span>&nbsp;<span class="builtinfunc" id="7356977">new</span><span class="op" id="7356980">(</span><span class="ident" id="7356981">Rat</span><span class="op" id="7356984">)</span><span class="op" id="7356985">.</span><span class="ident" id="7356986">Sub</span><span class="op" id="7356989">(</span><span class="ident" id="7356990">zero</span><span class="op" id="7356994">,</span>&nbsp;<span class="ident" id="7356996">x</span><span class="op" id="7356997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357001">z</span>&nbsp;<span class="op" id="7357003">:=</span>&nbsp;<span class="builtinfunc" id="7357006">new</span><span class="op" id="7357009">(</span><span class="ident" id="7357010">Rat</span><span class="op" id="7357013">)</span><span class="op" id="7357014">.</span><span class="ident" id="7357015">Neg</span><span class="op" id="7357018">(</span><span class="ident" id="7357019">x</span><span class="op" id="7357020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357024">if</span>&nbsp;<span class="ident" id="7357027">z</span><span class="op" id="7357028">.</span><span class="ident" id="7357029">Cmp</span><span class="op" id="7357032">(</span><span class="ident" id="7357033">e</span><span class="op" id="7357034">)</span>&nbsp;<span class="op" id="7357036">!=</span>&nbsp;<span class="num" id="7357039">0</span>&nbsp;<span class="op" id="7357041">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357046">t</span><span class="op" id="7357047">.</span><span class="ident" id="7357048">Errorf</span><span class="op" id="7357054">(</span><span class="string" id="7357055">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7357082">,</span>&nbsp;<span class="ident" id="7357084">x</span><span class="op" id="7357085">,</span>&nbsp;<span class="ident" id="7357087">z</span><span class="op" id="7357088">,</span>&nbsp;<span class="ident" id="7357090">e</span><span class="op" id="7357091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357098">}</span><br>
<span class="lineno"></span><span class="op" id="7357100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7357103">func</span>&nbsp;<span class="ident" id="7357108">TestRatInv</span><span class="op" id="7357118">(</span><span class="ident" id="7357119">t</span>&nbsp;<span class="op" id="7357121">*</span><span class="ident" id="7357122">testing</span><span class="op" id="7357129">.</span><span class="ident" id="7357130">T</span><span class="op" id="7357131">)</span>&nbsp;<span class="op" id="7357133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357136">zero</span>&nbsp;<span class="op" id="7357141">:=</span>&nbsp;<span class="builtinfunc" id="7357144">new</span><span class="op" id="7357147">(</span><span class="ident" id="7357148">Rat</span><span class="op" id="7357151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357154">for</span>&nbsp;<span class="ident" id="7357158">_</span><span class="op" id="7357159">,</span>&nbsp;<span class="ident" id="7357161">a</span>&nbsp;<span class="op" id="7357163">:=</span>&nbsp;<span class="keyword" id="7357166">range</span>&nbsp;<span class="ident" id="7357172">setStringTests</span>&nbsp;<span class="op" id="7357187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357191">x</span><span class="op" id="7357192">,</span>&nbsp;<span class="ident" id="7357194">ok</span>&nbsp;<span class="op" id="7357197">:=</span>&nbsp;<span class="builtinfunc" id="7357200">new</span><span class="op" id="7357203">(</span><span class="ident" id="7357204">Rat</span><span class="op" id="7357207">)</span><span class="op" id="7357208">.</span><span class="ident" id="7357209">SetString</span><span class="op" id="7357218">(</span><span class="ident" id="7357219">a</span><span class="op" id="7357220">.</span><span class="ident" id="7357221">in</span><span class="op" id="7357223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357227">if</span>&nbsp;<span class="op" id="7357230">!</span><span class="ident" id="7357231">ok</span>&nbsp;<span class="op" id="7357234">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357239">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357254">if</span>&nbsp;<span class="ident" id="7357257">x</span><span class="op" id="7357258">.</span><span class="ident" id="7357259">Cmp</span><span class="op" id="7357262">(</span><span class="ident" id="7357263">zero</span><span class="op" id="7357267">)</span>&nbsp;<span class="op" id="7357269">==</span>&nbsp;<span class="num" id="7357272">0</span>&nbsp;<span class="op" id="7357274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357279">continue</span>&nbsp;<span class="comment" id="7357288">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357316">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357320">e</span>&nbsp;<span class="op" id="7357322">:=</span>&nbsp;<span class="builtinfunc" id="7357325">new</span><span class="op" id="7357328">(</span><span class="ident" id="7357329">Rat</span><span class="op" id="7357332">)</span><span class="op" id="7357333">.</span><span class="ident" id="7357334">SetFrac</span><span class="op" id="7357341">(</span><span class="ident" id="7357342">x</span><span class="op" id="7357343">.</span><span class="ident" id="7357344">Denom</span><span class="op" id="7357349">(</span><span class="op" id="7357350">)</span><span class="op" id="7357351">,</span>&nbsp;<span class="ident" id="7357353">x</span><span class="op" id="7357354">.</span><span class="ident" id="7357355">Num</span><span class="op" id="7357358">(</span><span class="op" id="7357359">)</span><span class="op" id="7357360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357364">z</span>&nbsp;<span class="op" id="7357366">:=</span>&nbsp;<span class="builtinfunc" id="7357369">new</span><span class="op" id="7357372">(</span><span class="ident" id="7357373">Rat</span><span class="op" id="7357376">)</span><span class="op" id="7357377">.</span><span class="ident" id="7357378">Inv</span><span class="op" id="7357381">(</span><span class="ident" id="7357382">x</span><span class="op" id="7357383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357387">if</span>&nbsp;<span class="ident" id="7357390">z</span><span class="op" id="7357391">.</span><span class="ident" id="7357392">Cmp</span><span class="op" id="7357395">(</span><span class="ident" id="7357396">e</span><span class="op" id="7357397">)</span>&nbsp;<span class="op" id="7357399">!=</span>&nbsp;<span class="num" id="7357402">0</span>&nbsp;<span class="op" id="7357404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357409">t</span><span class="op" id="7357410">.</span><span class="ident" id="7357411">Errorf</span><span class="op" id="7357417">(</span><span class="string" id="7357418">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7357445">,</span>&nbsp;<span class="ident" id="7357447">x</span><span class="op" id="7357448">,</span>&nbsp;<span class="ident" id="7357450">z</span><span class="op" id="7357451">,</span>&nbsp;<span class="ident" id="7357453">e</span><span class="op" id="7357454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357458">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357461">}</span><br>
<span class="lineno"></span><span class="op" id="7357463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357466">type</span>&nbsp;<span class="ident" id="7357471">ratBinFun</span>&nbsp;<span class="keyword" id="7357481">func</span><span class="op" id="7357485">(</span><span class="ident" id="7357486">z</span><span class="op" id="7357487">,</span>&nbsp;<span class="ident" id="7357489">x</span><span class="op" id="7357490">,</span>&nbsp;<span class="ident" id="7357492">y</span>&nbsp;<span class="op" id="7357494">*</span><span class="ident" id="7357495">Rat</span><span class="op" id="7357498">)</span>&nbsp;<span class="op" id="7357500">*</span><span class="ident" id="7357501">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7357505">type</span>&nbsp;<span class="ident" id="7357510">ratBinArg</span>&nbsp;<span class="keyword" id="7357520">struct</span>&nbsp;<span class="op" id="7357527">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357530">x</span><span class="op" id="7357531">,</span>&nbsp;<span class="ident" id="7357533">y</span><span class="op" id="7357534">,</span>&nbsp;<span class="ident" id="7357536">z</span>&nbsp;<span class="builtintype" id="7357538">string</span><br>
<span class="lineno"></span><span class="op" id="7357545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357548">func</span>&nbsp;<span class="ident" id="7357553">testRatBin</span><span class="op" id="7357563">(</span><span class="ident" id="7357564">t</span>&nbsp;<span class="op" id="7357566">*</span><span class="ident" id="7357567">testing</span><span class="op" id="7357574">.</span><span class="ident" id="7357575">T</span><span class="op" id="7357576">,</span>&nbsp;<span class="ident" id="7357578">i</span>&nbsp;<span class="builtintype" id="7357580">int</span><span class="op" id="7357583">,</span>&nbsp;<span class="ident" id="7357585">name</span>&nbsp;<span class="builtintype" id="7357590">string</span><span class="op" id="7357596">,</span>&nbsp;<span class="ident" id="7357598">f</span>&nbsp;<span class="ident" id="7357600">ratBinFun</span><span class="op" id="7357609">,</span>&nbsp;<span class="ident" id="7357611">a</span>&nbsp;<span class="ident" id="7357613">ratBinArg</span><span class="op" id="7357622">)</span>&nbsp;<span class="op" id="7357624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357627">x</span><span class="op" id="7357628">,</span>&nbsp;<span class="ident" id="7357630">_</span>&nbsp;<span class="op" id="7357632">:=</span>&nbsp;<span class="builtinfunc" id="7357635">new</span><span class="op" id="7357638">(</span><span class="ident" id="7357639">Rat</span><span class="op" id="7357642">)</span><span class="op" id="7357643">.</span><span class="ident" id="7357644">SetString</span><span class="op" id="7357653">(</span><span class="ident" id="7357654">a</span><span class="op" id="7357655">.</span><span class="ident" id="7357656">x</span><span class="op" id="7357657">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357660">y</span><span class="op" id="7357661">,</span>&nbsp;<span class="ident" id="7357663">_</span>&nbsp;<span class="op" id="7357665">:=</span>&nbsp;<span class="builtinfunc" id="7357668">new</span><span class="op" id="7357671">(</span><span class="ident" id="7357672">Rat</span><span class="op" id="7357675">)</span><span class="op" id="7357676">.</span><span class="ident" id="7357677">SetString</span><span class="op" id="7357686">(</span><span class="ident" id="7357687">a</span><span class="op" id="7357688">.</span><span class="ident" id="7357689">y</span><span class="op" id="7357690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357693">z</span><span class="op" id="7357694">,</span>&nbsp;<span class="ident" id="7357696">_</span>&nbsp;<span class="op" id="7357698">:=</span>&nbsp;<span class="builtinfunc" id="7357701">new</span><span class="op" id="7357704">(</span><span class="ident" id="7357705">Rat</span><span class="op" id="7357708">)</span><span class="op" id="7357709">.</span><span class="ident" id="7357710">SetString</span><span class="op" id="7357719">(</span><span class="ident" id="7357720">a</span><span class="op" id="7357721">.</span><span class="ident" id="7357722">z</span><span class="op" id="7357723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357726">out</span>&nbsp;<span class="op" id="7357730">:=</span>&nbsp;<span class="ident" id="7357733">f</span><span class="op" id="7357734">(</span><span class="builtinfunc" id="7357735">new</span><span class="op" id="7357738">(</span><span class="ident" id="7357739">Rat</span><span class="op" id="7357742">)</span><span class="op" id="7357743">,</span>&nbsp;<span class="ident" id="7357745">x</span><span class="op" id="7357746">,</span>&nbsp;<span class="ident" id="7357748">y</span><span class="op" id="7357749">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7357753">if</span>&nbsp;<span class="ident" id="7357756">out</span><span class="op" id="7357759">.</span><span class="ident" id="7357760">Cmp</span><span class="op" id="7357763">(</span><span class="ident" id="7357764">z</span><span class="op" id="7357765">)</span>&nbsp;<span class="op" id="7357767">!=</span>&nbsp;<span class="num" id="7357770">0</span>&nbsp;<span class="op" id="7357772">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357776">t</span><span class="op" id="7357777">.</span><span class="ident" id="7357778">Errorf</span><span class="op" id="7357784">(</span><span class="string" id="7357785">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7357808">,</span>&nbsp;<span class="ident" id="7357810">name</span><span class="op" id="7357814">,</span>&nbsp;<span class="ident" id="7357816">i</span><span class="op" id="7357817">,</span>&nbsp;<span class="ident" id="7357819">out</span><span class="op" id="7357822">,</span>&nbsp;<span class="ident" id="7357824">z</span><span class="op" id="7357825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357828">}</span><br>
<span class="lineno"></span><span class="op" id="7357830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7357833">var</span>&nbsp;<span class="ident" id="7357837">ratBinTests</span>&nbsp;<span class="op" id="7357849">=</span>&nbsp;<span class="op" id="7357851">[</span><span class="op" id="7357852">]</span><span class="keyword" id="7357853">struct</span>&nbsp;<span class="op" id="7357860">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357863">x</span><span class="op" id="7357864">,</span>&nbsp;<span class="ident" id="7357866">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7357873">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7357881">sum</span><span class="op" id="7357884">,</span>&nbsp;<span class="ident" id="7357886">prod</span>&nbsp;<span class="builtintype" id="7357891">string</span><br>
<span class="lineno"></span><span class="op" id="7357898">}</span><span class="op" id="7357899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357902">{</span><span class="string" id="7357903">&#34;0&#34;</span><span class="op" id="7357906">,</span>&nbsp;<span class="string" id="7357908">&#34;0&#34;</span><span class="op" id="7357911">,</span>&nbsp;<span class="string" id="7357913">&#34;0&#34;</span><span class="op" id="7357916">,</span>&nbsp;<span class="string" id="7357918">&#34;0&#34;</span><span class="op" id="7357921">}</span><span class="op" id="7357922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357925">{</span><span class="string" id="7357926">&#34;0&#34;</span><span class="op" id="7357929">,</span>&nbsp;<span class="string" id="7357931">&#34;1&#34;</span><span class="op" id="7357934">,</span>&nbsp;<span class="string" id="7357936">&#34;1&#34;</span><span class="op" id="7357939">,</span>&nbsp;<span class="string" id="7357941">&#34;0&#34;</span><span class="op" id="7357944">}</span><span class="op" id="7357945">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357948">{</span><span class="string" id="7357949">&#34;-1&#34;</span><span class="op" id="7357953">,</span>&nbsp;<span class="string" id="7357955">&#34;0&#34;</span><span class="op" id="7357958">,</span>&nbsp;<span class="string" id="7357960">&#34;-1&#34;</span><span class="op" id="7357964">,</span>&nbsp;<span class="string" id="7357966">&#34;0&#34;</span><span class="op" id="7357969">}</span><span class="op" id="7357970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357973">{</span><span class="string" id="7357974">&#34;-1&#34;</span><span class="op" id="7357978">,</span>&nbsp;<span class="string" id="7357980">&#34;1&#34;</span><span class="op" id="7357983">,</span>&nbsp;<span class="string" id="7357985">&#34;0&#34;</span><span class="op" id="7357988">,</span>&nbsp;<span class="string" id="7357990">&#34;-1&#34;</span><span class="op" id="7357994">}</span><span class="op" id="7357995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7357998">{</span><span class="string" id="7357999">&#34;1&#34;</span><span class="op" id="7358002">,</span>&nbsp;<span class="string" id="7358004">&#34;1&#34;</span><span class="op" id="7358007">,</span>&nbsp;<span class="string" id="7358009">&#34;2&#34;</span><span class="op" id="7358012">,</span>&nbsp;<span class="string" id="7358014">&#34;1&#34;</span><span class="op" id="7358017">}</span><span class="op" id="7358018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358021">{</span><span class="string" id="7358022">&#34;1/2&#34;</span><span class="op" id="7358027">,</span>&nbsp;<span class="string" id="7358029">&#34;1/2&#34;</span><span class="op" id="7358034">,</span>&nbsp;<span class="string" id="7358036">&#34;1&#34;</span><span class="op" id="7358039">,</span>&nbsp;<span class="string" id="7358041">&#34;1/4&#34;</span><span class="op" id="7358046">}</span><span class="op" id="7358047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358050">{</span><span class="string" id="7358051">&#34;1/4&#34;</span><span class="op" id="7358056">,</span>&nbsp;<span class="string" id="7358058">&#34;1/3&#34;</span><span class="op" id="7358063">,</span>&nbsp;<span class="string" id="7358065">&#34;7/12&#34;</span><span class="op" id="7358071">,</span>&nbsp;<span class="string" id="7358073">&#34;1/12&#34;</span><span class="op" id="7358079">}</span><span class="op" id="7358080">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358083">{</span><span class="string" id="7358084">&#34;2/5&#34;</span><span class="op" id="7358089">,</span>&nbsp;<span class="string" id="7358091">&#34;-14/3&#34;</span><span class="op" id="7358098">,</span>&nbsp;<span class="string" id="7358100">&#34;-64/15&#34;</span><span class="op" id="7358108">,</span>&nbsp;<span class="string" id="7358110">&#34;-28/15&#34;</span><span class="op" id="7358118">}</span><span class="op" id="7358119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358122">{</span><span class="string" id="7358123">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7358150">,</span>&nbsp;<span class="string" id="7358152">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7358180">,</span>&nbsp;<span class="string" id="7358182">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7358248">,</span>&nbsp;<span class="string" id="7358250">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7358300">}</span><span class="op" id="7358301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358304">{</span><span class="string" id="7358305">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7358330">,</span>&nbsp;<span class="string" id="7358332">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7358357">,</span>&nbsp;<span class="string" id="7358359">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7358385">,</span>&nbsp;<span class="string" id="7358387">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7358430">}</span><span class="op" id="7358431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358434">{</span><span class="string" id="7358435">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7358497">,</span>&nbsp;<span class="string" id="7358499">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7358525">,</span>&nbsp;<span class="string" id="7358527">&#34;-27/133467566250814981&#34;</span><span class="op" id="7358551">,</span>&nbsp;<span class="string" id="7358553">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7358636">}</span><span class="op" id="7358637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358640">{</span><span class="string" id="7358641">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7358700">,</span>&nbsp;<span class="string" id="7358702">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7358735">,</span>&nbsp;<span class="string" id="7358737">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7358771">,</span>&nbsp;<span class="string" id="7358773">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7358860">}</span><span class="op" id="7358861">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7358864">{</span><span class="string" id="7358865">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7358890">,</span>&nbsp;<span class="string" id="7358892">&#34;5/2848423294177090248&#34;</span><span class="op" id="7358915">,</span>&nbsp;<span class="string" id="7358917">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7358977">,</span>&nbsp;<span class="string" id="7358979">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7359022">}</span><span class="op" id="7359023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359026">{</span><span class="string" id="7359027">&#34;26946729/330400702820&#34;</span><span class="op" id="7359050">,</span>&nbsp;<span class="string" id="7359052">&#34;41563965/225583428284&#34;</span><span class="op" id="7359075">,</span>&nbsp;<span class="string" id="7359077">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7359121">,</span>&nbsp;<span class="string" id="7359123">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7359164">}</span><span class="op" id="7359165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359168">{</span><span class="string" id="7359169">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7359193">,</span>&nbsp;<span class="string" id="7359195">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7359239">,</span>&nbsp;<span class="string" id="7359241">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7359305">,</span>&nbsp;<span class="string" id="7359307">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7359370">}</span><span class="op" id="7359371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359374">{</span><span class="string" id="7359375">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7359415">,</span>&nbsp;<span class="string" id="7359417">&#34;29/712593081308&#34;</span><span class="op" id="7359434">,</span>&nbsp;<span class="string" id="7359436">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7359499">,</span>&nbsp;<span class="string" id="7359501">&#34;808/45524274987585732633&#34;</span><span class="op" id="7359527">}</span><span class="op" id="7359528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359531">{</span><span class="string" id="7359532">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7359573">,</span>&nbsp;<span class="string" id="7359575">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7359601">,</span>&nbsp;<span class="string" id="7359603">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7359674">,</span>&nbsp;<span class="string" id="7359676">&#34;8967230/3296219033&#34;</span><span class="op" id="7359696">}</span><span class="op" id="7359697">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7359700">{</span><span class="string" id="7359701">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7359748">,</span>&nbsp;<span class="string" id="7359750">&#34;9381566963714/9633539&#34;</span><span class="op" id="7359773">,</span>&nbsp;<span class="string" id="7359775">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7359844">,</span>&nbsp;<span class="string" id="7359846">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7359873">}</span><span class="op" id="7359874">,</span><br>
<span class="lineno"></span><span class="op" id="7359876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359879">func</span>&nbsp;<span class="ident" id="7359884">TestRatBin</span><span class="op" id="7359894">(</span><span class="ident" id="7359895">t</span>&nbsp;<span class="op" id="7359897">*</span><span class="ident" id="7359898">testing</span><span class="op" id="7359905">.</span><span class="ident" id="7359906">T</span><span class="op" id="7359907">)</span>&nbsp;<span class="op" id="7359909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7359912">for</span>&nbsp;<span class="ident" id="7359916">i</span><span class="op" id="7359917">,</span>&nbsp;<span class="ident" id="7359919">test</span>&nbsp;<span class="op" id="7359924">:=</span>&nbsp;<span class="keyword" id="7359927">range</span>&nbsp;<span class="ident" id="7359933">ratBinTests</span>&nbsp;<span class="op" id="7359945">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359949">arg</span>&nbsp;<span class="op" id="7359953">:=</span>&nbsp;<span class="ident" id="7359956">ratBinArg</span><span class="op" id="7359965">{</span><span class="ident" id="7359966">test</span><span class="op" id="7359970">.</span><span class="ident" id="7359971">x</span><span class="op" id="7359972">,</span>&nbsp;<span class="ident" id="7359974">test</span><span class="op" id="7359978">.</span><span class="ident" id="7359979">y</span><span class="op" id="7359980">,</span>&nbsp;<span class="ident" id="7359982">test</span><span class="op" id="7359986">.</span><span class="ident" id="7359987">sum</span><span class="op" id="7359990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7359994">testRatBin</span><span class="op" id="7360004">(</span><span class="ident" id="7360005">t</span><span class="op" id="7360006">,</span>&nbsp;<span class="ident" id="7360008">i</span><span class="op" id="7360009">,</span>&nbsp;<span class="string" id="7360011">&#34;Add&#34;</span><span class="op" id="7360016">,</span>&nbsp;<span class="op" id="7360018">(</span><span class="op" id="7360019">*</span><span class="ident" id="7360020">Rat</span><span class="op" id="7360023">)</span><span class="op" id="7360024">.</span><span class="ident" id="7360025">Add</span><span class="op" id="7360028">,</span>&nbsp;<span class="ident" id="7360030">arg</span><span class="op" id="7360033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360038">arg</span>&nbsp;<span class="op" id="7360042">=</span>&nbsp;<span class="ident" id="7360044">ratBinArg</span><span class="op" id="7360053">{</span><span class="ident" id="7360054">test</span><span class="op" id="7360058">.</span><span class="ident" id="7360059">y</span><span class="op" id="7360060">,</span>&nbsp;<span class="ident" id="7360062">test</span><span class="op" id="7360066">.</span><span class="ident" id="7360067">x</span><span class="op" id="7360068">,</span>&nbsp;<span class="ident" id="7360070">test</span><span class="op" id="7360074">.</span><span class="ident" id="7360075">sum</span><span class="op" id="7360078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360082">testRatBin</span><span class="op" id="7360092">(</span><span class="ident" id="7360093">t</span><span class="op" id="7360094">,</span>&nbsp;<span class="ident" id="7360096">i</span><span class="op" id="7360097">,</span>&nbsp;<span class="string" id="7360099">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7360114">,</span>&nbsp;<span class="op" id="7360116">(</span><span class="op" id="7360117">*</span><span class="ident" id="7360118">Rat</span><span class="op" id="7360121">)</span><span class="op" id="7360122">.</span><span class="ident" id="7360123">Add</span><span class="op" id="7360126">,</span>&nbsp;<span class="ident" id="7360128">arg</span><span class="op" id="7360131">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360136">arg</span>&nbsp;<span class="op" id="7360140">=</span>&nbsp;<span class="ident" id="7360142">ratBinArg</span><span class="op" id="7360151">{</span><span class="ident" id="7360152">test</span><span class="op" id="7360156">.</span><span class="ident" id="7360157">sum</span><span class="op" id="7360160">,</span>&nbsp;<span class="ident" id="7360162">test</span><span class="op" id="7360166">.</span><span class="ident" id="7360167">x</span><span class="op" id="7360168">,</span>&nbsp;<span class="ident" id="7360170">test</span><span class="op" id="7360174">.</span><span class="ident" id="7360175">y</span><span class="op" id="7360176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360180">testRatBin</span><span class="op" id="7360190">(</span><span class="ident" id="7360191">t</span><span class="op" id="7360192">,</span>&nbsp;<span class="ident" id="7360194">i</span><span class="op" id="7360195">,</span>&nbsp;<span class="string" id="7360197">&#34;Sub&#34;</span><span class="op" id="7360202">,</span>&nbsp;<span class="op" id="7360204">(</span><span class="op" id="7360205">*</span><span class="ident" id="7360206">Rat</span><span class="op" id="7360209">)</span><span class="op" id="7360210">.</span><span class="ident" id="7360211">Sub</span><span class="op" id="7360214">,</span>&nbsp;<span class="ident" id="7360216">arg</span><span class="op" id="7360219">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360224">arg</span>&nbsp;<span class="op" id="7360228">=</span>&nbsp;<span class="ident" id="7360230">ratBinArg</span><span class="op" id="7360239">{</span><span class="ident" id="7360240">test</span><span class="op" id="7360244">.</span><span class="ident" id="7360245">sum</span><span class="op" id="7360248">,</span>&nbsp;<span class="ident" id="7360250">test</span><span class="op" id="7360254">.</span><span class="ident" id="7360255">y</span><span class="op" id="7360256">,</span>&nbsp;<span class="ident" id="7360258">test</span><span class="op" id="7360262">.</span><span class="ident" id="7360263">x</span><span class="op" id="7360264">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360268">testRatBin</span><span class="op" id="7360278">(</span><span class="ident" id="7360279">t</span><span class="op" id="7360280">,</span>&nbsp;<span class="ident" id="7360282">i</span><span class="op" id="7360283">,</span>&nbsp;<span class="string" id="7360285">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7360300">,</span>&nbsp;<span class="op" id="7360302">(</span><span class="op" id="7360303">*</span><span class="ident" id="7360304">Rat</span><span class="op" id="7360307">)</span><span class="op" id="7360308">.</span><span class="ident" id="7360309">Sub</span><span class="op" id="7360312">,</span>&nbsp;<span class="ident" id="7360314">arg</span><span class="op" id="7360317">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360322">arg</span>&nbsp;<span class="op" id="7360326">=</span>&nbsp;<span class="ident" id="7360328">ratBinArg</span><span class="op" id="7360337">{</span><span class="ident" id="7360338">test</span><span class="op" id="7360342">.</span><span class="ident" id="7360343">x</span><span class="op" id="7360344">,</span>&nbsp;<span class="ident" id="7360346">test</span><span class="op" id="7360350">.</span><span class="ident" id="7360351">y</span><span class="op" id="7360352">,</span>&nbsp;<span class="ident" id="7360354">test</span><span class="op" id="7360358">.</span><span class="ident" id="7360359">prod</span><span class="op" id="7360363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360367">testRatBin</span><span class="op" id="7360377">(</span><span class="ident" id="7360378">t</span><span class="op" id="7360379">,</span>&nbsp;<span class="ident" id="7360381">i</span><span class="op" id="7360382">,</span>&nbsp;<span class="string" id="7360384">&#34;Mul&#34;</span><span class="op" id="7360389">,</span>&nbsp;<span class="op" id="7360391">(</span><span class="op" id="7360392">*</span><span class="ident" id="7360393">Rat</span><span class="op" id="7360396">)</span><span class="op" id="7360397">.</span><span class="ident" id="7360398">Mul</span><span class="op" id="7360401">,</span>&nbsp;<span class="ident" id="7360403">arg</span><span class="op" id="7360406">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360411">arg</span>&nbsp;<span class="op" id="7360415">=</span>&nbsp;<span class="ident" id="7360417">ratBinArg</span><span class="op" id="7360426">{</span><span class="ident" id="7360427">test</span><span class="op" id="7360431">.</span><span class="ident" id="7360432">y</span><span class="op" id="7360433">,</span>&nbsp;<span class="ident" id="7360435">test</span><span class="op" id="7360439">.</span><span class="ident" id="7360440">x</span><span class="op" id="7360441">,</span>&nbsp;<span class="ident" id="7360443">test</span><span class="op" id="7360447">.</span><span class="ident" id="7360448">prod</span><span class="op" id="7360452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360456">testRatBin</span><span class="op" id="7360466">(</span><span class="ident" id="7360467">t</span><span class="op" id="7360468">,</span>&nbsp;<span class="ident" id="7360470">i</span><span class="op" id="7360471">,</span>&nbsp;<span class="string" id="7360473">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7360488">,</span>&nbsp;<span class="op" id="7360490">(</span><span class="op" id="7360491">*</span><span class="ident" id="7360492">Rat</span><span class="op" id="7360495">)</span><span class="op" id="7360496">.</span><span class="ident" id="7360497">Mul</span><span class="op" id="7360500">,</span>&nbsp;<span class="ident" id="7360502">arg</span><span class="op" id="7360505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360510">if</span>&nbsp;<span class="ident" id="7360513">test</span><span class="op" id="7360517">.</span><span class="ident" id="7360518">x</span>&nbsp;<span class="op" id="7360520">!=</span>&nbsp;<span class="string" id="7360523">&#34;0&#34;</span>&nbsp;<span class="op" id="7360527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360532">arg</span>&nbsp;<span class="op" id="7360536">=</span>&nbsp;<span class="ident" id="7360538">ratBinArg</span><span class="op" id="7360547">{</span><span class="ident" id="7360548">test</span><span class="op" id="7360552">.</span><span class="ident" id="7360553">prod</span><span class="op" id="7360557">,</span>&nbsp;<span class="ident" id="7360559">test</span><span class="op" id="7360563">.</span><span class="ident" id="7360564">x</span><span class="op" id="7360565">,</span>&nbsp;<span class="ident" id="7360567">test</span><span class="op" id="7360571">.</span><span class="ident" id="7360572">y</span><span class="op" id="7360573">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360578">testRatBin</span><span class="op" id="7360588">(</span><span class="ident" id="7360589">t</span><span class="op" id="7360590">,</span>&nbsp;<span class="ident" id="7360592">i</span><span class="op" id="7360593">,</span>&nbsp;<span class="string" id="7360595">&#34;Quo&#34;</span><span class="op" id="7360600">,</span>&nbsp;<span class="op" id="7360602">(</span><span class="op" id="7360603">*</span><span class="ident" id="7360604">Rat</span><span class="op" id="7360607">)</span><span class="op" id="7360608">.</span><span class="ident" id="7360609">Quo</span><span class="op" id="7360612">,</span>&nbsp;<span class="ident" id="7360614">arg</span><span class="op" id="7360617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360626">if</span>&nbsp;<span class="ident" id="7360629">test</span><span class="op" id="7360633">.</span><span class="ident" id="7360634">y</span>&nbsp;<span class="op" id="7360636">!=</span>&nbsp;<span class="string" id="7360639">&#34;0&#34;</span>&nbsp;<span class="op" id="7360643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360648">arg</span>&nbsp;<span class="op" id="7360652">=</span>&nbsp;<span class="ident" id="7360654">ratBinArg</span><span class="op" id="7360663">{</span><span class="ident" id="7360664">test</span><span class="op" id="7360668">.</span><span class="ident" id="7360669">prod</span><span class="op" id="7360673">,</span>&nbsp;<span class="ident" id="7360675">test</span><span class="op" id="7360679">.</span><span class="ident" id="7360680">y</span><span class="op" id="7360681">,</span>&nbsp;<span class="ident" id="7360683">test</span><span class="op" id="7360687">.</span><span class="ident" id="7360688">x</span><span class="op" id="7360689">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360694">testRatBin</span><span class="op" id="7360704">(</span><span class="ident" id="7360705">t</span><span class="op" id="7360706">,</span>&nbsp;<span class="ident" id="7360708">i</span><span class="op" id="7360709">,</span>&nbsp;<span class="string" id="7360711">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7360726">,</span>&nbsp;<span class="op" id="7360728">(</span><span class="op" id="7360729">*</span><span class="ident" id="7360730">Rat</span><span class="op" id="7360733">)</span><span class="op" id="7360734">.</span><span class="ident" id="7360735">Quo</span><span class="op" id="7360738">,</span>&nbsp;<span class="ident" id="7360740">arg</span><span class="op" id="7360743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360750">}</span><br>
<span class="lineno"></span><span class="op" id="7360752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7360755">func</span>&nbsp;<span class="ident" id="7360760">TestIssue820</span><span class="op" id="7360772">(</span><span class="ident" id="7360773">t</span>&nbsp;<span class="op" id="7360775">*</span><span class="ident" id="7360776">testing</span><span class="op" id="7360783">.</span><span class="ident" id="7360784">T</span><span class="op" id="7360785">)</span>&nbsp;<span class="op" id="7360787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360790">x</span>&nbsp;<span class="op" id="7360792">:=</span>&nbsp;<span class="ident" id="7360795">NewRat</span><span class="op" id="7360801">(</span><span class="num" id="7360802">3</span><span class="op" id="7360803">,</span>&nbsp;<span class="num" id="7360805">1</span><span class="op" id="7360806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360809">y</span>&nbsp;<span class="op" id="7360811">:=</span>&nbsp;<span class="ident" id="7360814">NewRat</span><span class="op" id="7360820">(</span><span class="num" id="7360821">2</span><span class="op" id="7360822">,</span>&nbsp;<span class="num" id="7360824">1</span><span class="op" id="7360825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360828">z</span>&nbsp;<span class="op" id="7360830">:=</span>&nbsp;<span class="ident" id="7360833">y</span><span class="op" id="7360834">.</span><span class="ident" id="7360835">Quo</span><span class="op" id="7360838">(</span><span class="ident" id="7360839">x</span><span class="op" id="7360840">,</span>&nbsp;<span class="ident" id="7360842">y</span><span class="op" id="7360843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360846">q</span>&nbsp;<span class="op" id="7360848">:=</span>&nbsp;<span class="ident" id="7360851">NewRat</span><span class="op" id="7360857">(</span><span class="num" id="7360858">3</span><span class="op" id="7360859">,</span>&nbsp;<span class="num" id="7360861">2</span><span class="op" id="7360862">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360865">if</span>&nbsp;<span class="ident" id="7360868">z</span><span class="op" id="7360869">.</span><span class="ident" id="7360870">Cmp</span><span class="op" id="7360873">(</span><span class="ident" id="7360874">q</span><span class="op" id="7360875">)</span>&nbsp;<span class="op" id="7360877">!=</span>&nbsp;<span class="num" id="7360880">0</span>&nbsp;<span class="op" id="7360882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360886">t</span><span class="op" id="7360887">.</span><span class="ident" id="7360888">Errorf</span><span class="op" id="7360894">(</span><span class="string" id="7360895">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7360911">,</span>&nbsp;<span class="ident" id="7360913">z</span><span class="op" id="7360914">,</span>&nbsp;<span class="ident" id="7360916">q</span><span class="op" id="7360917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360924">y</span>&nbsp;<span class="op" id="7360926">=</span>&nbsp;<span class="ident" id="7360928">NewRat</span><span class="op" id="7360934">(</span><span class="num" id="7360935">3</span><span class="op" id="7360936">,</span>&nbsp;<span class="num" id="7360938">1</span><span class="op" id="7360939">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360942">x</span>&nbsp;<span class="op" id="7360944">=</span>&nbsp;<span class="ident" id="7360946">NewRat</span><span class="op" id="7360952">(</span><span class="num" id="7360953">2</span><span class="op" id="7360954">,</span>&nbsp;<span class="num" id="7360956">1</span><span class="op" id="7360957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360960">z</span>&nbsp;<span class="op" id="7360962">=</span>&nbsp;<span class="ident" id="7360964">y</span><span class="op" id="7360965">.</span><span class="ident" id="7360966">Quo</span><span class="op" id="7360969">(</span><span class="ident" id="7360970">x</span><span class="op" id="7360971">,</span>&nbsp;<span class="ident" id="7360973">y</span><span class="op" id="7360974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360977">q</span>&nbsp;<span class="op" id="7360979">=</span>&nbsp;<span class="ident" id="7360981">NewRat</span><span class="op" id="7360987">(</span><span class="num" id="7360988">2</span><span class="op" id="7360989">,</span>&nbsp;<span class="num" id="7360991">3</span><span class="op" id="7360992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360995">if</span>&nbsp;<span class="ident" id="7360998">z</span><span class="op" id="7360999">.</span><span class="ident" id="7361000">Cmp</span><span class="op" id="7361003">(</span><span class="ident" id="7361004">q</span><span class="op" id="7361005">)</span>&nbsp;<span class="op" id="7361007">!=</span>&nbsp;<span class="num" id="7361010">0</span>&nbsp;<span class="op" id="7361012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361016">t</span><span class="op" id="7361017">.</span><span class="ident" id="7361018">Errorf</span><span class="op" id="7361024">(</span><span class="string" id="7361025">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7361041">,</span>&nbsp;<span class="ident" id="7361043">z</span><span class="op" id="7361044">,</span>&nbsp;<span class="ident" id="7361046">q</span><span class="op" id="7361047">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361054">x</span>&nbsp;<span class="op" id="7361056">=</span>&nbsp;<span class="ident" id="7361058">NewRat</span><span class="op" id="7361064">(</span><span class="num" id="7361065">3</span><span class="op" id="7361066">,</span>&nbsp;<span class="num" id="7361068">1</span><span class="op" id="7361069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361072">z</span>&nbsp;<span class="op" id="7361074">=</span>&nbsp;<span class="ident" id="7361076">x</span><span class="op" id="7361077">.</span><span class="ident" id="7361078">Quo</span><span class="op" id="7361081">(</span><span class="ident" id="7361082">x</span><span class="op" id="7361083">,</span>&nbsp;<span class="ident" id="7361085">x</span><span class="op" id="7361086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361089">q</span>&nbsp;<span class="op" id="7361091">=</span>&nbsp;<span class="ident" id="7361093">NewRat</span><span class="op" id="7361099">(</span><span class="num" id="7361100">3</span><span class="op" id="7361101">,</span>&nbsp;<span class="num" id="7361103">3</span><span class="op" id="7361104">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361107">if</span>&nbsp;<span class="ident" id="7361110">z</span><span class="op" id="7361111">.</span><span class="ident" id="7361112">Cmp</span><span class="op" id="7361115">(</span><span class="ident" id="7361116">q</span><span class="op" id="7361117">)</span>&nbsp;<span class="op" id="7361119">!=</span>&nbsp;<span class="num" id="7361122">0</span>&nbsp;<span class="op" id="7361124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361128">t</span><span class="op" id="7361129">.</span><span class="ident" id="7361130">Errorf</span><span class="op" id="7361136">(</span><span class="string" id="7361137">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7361153">,</span>&nbsp;<span class="ident" id="7361155">z</span><span class="op" id="7361156">,</span>&nbsp;<span class="ident" id="7361158">q</span><span class="op" id="7361159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361162">}</span><br>
<span class="lineno"></span><span class="op" id="7361164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7361167">var</span>&nbsp;<span class="ident" id="7361171">setFrac64Tests</span>&nbsp;<span class="op" id="7361186">=</span>&nbsp;<span class="op" id="7361188">[</span><span class="op" id="7361189">]</span><span class="keyword" id="7361190">struct</span>&nbsp;<span class="op" id="7361197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361200">a</span><span class="op" id="7361201">,</span>&nbsp;<span class="ident" id="7361203">b</span>&nbsp;<span class="ident" id="7361205">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361212">out</span>&nbsp;&nbsp;<span class="builtintype" id="7361217">string</span><br>
<span class="lineno"></span><span class="op" id="7361224">}</span><span class="op" id="7361225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361228">{</span><span class="num" id="7361229">0</span><span class="op" id="7361230">,</span>&nbsp;<span class="num" id="7361232">1</span><span class="op" id="7361233">,</span>&nbsp;<span class="string" id="7361235">&#34;0&#34;</span><span class="op" id="7361238">}</span><span class="op" id="7361239">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361242">{</span><span class="num" id="7361243">0</span><span class="op" id="7361244">,</span>&nbsp;<span class="op" id="7361246">-</span><span class="num" id="7361247">1</span><span class="op" id="7361248">,</span>&nbsp;<span class="string" id="7361250">&#34;0&#34;</span><span class="op" id="7361253">}</span><span class="op" id="7361254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361257">{</span><span class="num" id="7361258">1</span><span class="op" id="7361259">,</span>&nbsp;<span class="num" id="7361261">1</span><span class="op" id="7361262">,</span>&nbsp;<span class="string" id="7361264">&#34;1&#34;</span><span class="op" id="7361267">}</span><span class="op" id="7361268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361271">{</span><span class="op" id="7361272">-</span><span class="num" id="7361273">1</span><span class="op" id="7361274">,</span>&nbsp;<span class="num" id="7361276">1</span><span class="op" id="7361277">,</span>&nbsp;<span class="string" id="7361279">&#34;-1&#34;</span><span class="op" id="7361283">}</span><span class="op" id="7361284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361287">{</span><span class="num" id="7361288">1</span><span class="op" id="7361289">,</span>&nbsp;<span class="op" id="7361291">-</span><span class="num" id="7361292">1</span><span class="op" id="7361293">,</span>&nbsp;<span class="string" id="7361295">&#34;-1&#34;</span><span class="op" id="7361299">}</span><span class="op" id="7361300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361303">{</span><span class="op" id="7361304">-</span><span class="num" id="7361305">1</span><span class="op" id="7361306">,</span>&nbsp;<span class="op" id="7361308">-</span><span class="num" id="7361309">1</span><span class="op" id="7361310">,</span>&nbsp;<span class="string" id="7361312">&#34;1&#34;</span><span class="op" id="7361315">}</span><span class="op" id="7361316">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361319">{</span><span class="op" id="7361320">-</span><span class="num" id="7361321">9223372036854775808</span><span class="op" id="7361340">,</span>&nbsp;<span class="op" id="7361342">-</span><span class="num" id="7361343">9223372036854775808</span><span class="op" id="7361362">,</span>&nbsp;<span class="string" id="7361364">&#34;1&#34;</span><span class="op" id="7361367">}</span><span class="op" id="7361368">,</span><br>
<span class="lineno"></span><span class="op" id="7361370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361373">func</span>&nbsp;<span class="ident" id="7361378">TestRatSetFrac64Rat</span><span class="op" id="7361397">(</span><span class="ident" id="7361398">t</span>&nbsp;<span class="op" id="7361400">*</span><span class="ident" id="7361401">testing</span><span class="op" id="7361408">.</span><span class="ident" id="7361409">T</span><span class="op" id="7361410">)</span>&nbsp;<span class="op" id="7361412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361415">for</span>&nbsp;<span class="ident" id="7361419">i</span><span class="op" id="7361420">,</span>&nbsp;<span class="ident" id="7361422">test</span>&nbsp;<span class="op" id="7361427">:=</span>&nbsp;<span class="keyword" id="7361430">range</span>&nbsp;<span class="ident" id="7361436">setFrac64Tests</span>&nbsp;<span class="op" id="7361451">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361455">x</span>&nbsp;<span class="op" id="7361457">:=</span>&nbsp;<span class="builtinfunc" id="7361460">new</span><span class="op" id="7361463">(</span><span class="ident" id="7361464">Rat</span><span class="op" id="7361467">)</span><span class="op" id="7361468">.</span><span class="ident" id="7361469">SetFrac64</span><span class="op" id="7361478">(</span><span class="ident" id="7361479">test</span><span class="op" id="7361483">.</span><span class="ident" id="7361484">a</span><span class="op" id="7361485">,</span>&nbsp;<span class="ident" id="7361487">test</span><span class="op" id="7361491">.</span><span class="ident" id="7361492">b</span><span class="op" id="7361493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361497">if</span>&nbsp;<span class="ident" id="7361500">x</span><span class="op" id="7361501">.</span><span class="ident" id="7361502">RatString</span><span class="op" id="7361511">(</span><span class="op" id="7361512">)</span>&nbsp;<span class="op" id="7361514">!=</span>&nbsp;<span class="ident" id="7361517">test</span><span class="op" id="7361521">.</span><span class="ident" id="7361522">out</span>&nbsp;<span class="op" id="7361526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361531">t</span><span class="op" id="7361532">.</span><span class="ident" id="7361533">Errorf</span><span class="op" id="7361539">(</span><span class="string" id="7361540">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7361560">,</span>&nbsp;<span class="ident" id="7361562">i</span><span class="op" id="7361563">,</span>&nbsp;<span class="ident" id="7361565">x</span><span class="op" id="7361566">.</span><span class="ident" id="7361567">RatString</span><span class="op" id="7361576">(</span><span class="op" id="7361577">)</span><span class="op" id="7361578">,</span>&nbsp;<span class="ident" id="7361580">test</span><span class="op" id="7361584">.</span><span class="ident" id="7361585">out</span><span class="op" id="7361588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361595">}</span><br>
<span class="lineno">390</span><span class="op" id="7361597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361600">func</span>&nbsp;<span class="ident" id="7361605">TestRatGobEncoding</span><span class="op" id="7361623">(</span><span class="ident" id="7361624">t</span>&nbsp;<span class="op" id="7361626">*</span><span class="ident" id="7361627">testing</span><span class="op" id="7361634">.</span><span class="ident" id="7361635">T</span><span class="op" id="7361636">)</span>&nbsp;<span class="op" id="7361638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361641">var</span>&nbsp;<span class="ident" id="7361645">medium</span>&nbsp;<span class="ident" id="7361652">bytes</span><span class="op" id="7361657">.</span><span class="ident" id="7361658">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361666">enc</span>&nbsp;<span class="op" id="7361670">:=</span>&nbsp;<span class="ident" id="7361673">gob</span><span class="op" id="7361676">.</span><span class="ident" id="7361677">NewEncoder</span><span class="op" id="7361687">(</span><span class="op" id="7361688">&amp;</span><span class="ident" id="7361689">medium</span><span class="op" id="7361695">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361698">dec</span>&nbsp;<span class="op" id="7361702">:=</span>&nbsp;<span class="ident" id="7361705">gob</span><span class="op" id="7361708">.</span><span class="ident" id="7361709">NewDecoder</span><span class="op" id="7361719">(</span><span class="op" id="7361720">&amp;</span><span class="ident" id="7361721">medium</span><span class="op" id="7361727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361730">for</span>&nbsp;<span class="ident" id="7361734">_</span><span class="op" id="7361735">,</span>&nbsp;<span class="ident" id="7361737">test</span>&nbsp;<span class="op" id="7361742">:=</span>&nbsp;<span class="keyword" id="7361745">range</span>&nbsp;<span class="ident" id="7361751">encodingTests</span>&nbsp;<span class="op" id="7361765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361769">medium</span><span class="op" id="7361775">.</span><span class="ident" id="7361776">Reset</span><span class="op" id="7361781">(</span><span class="op" id="7361782">)</span>&nbsp;<span class="comment" id="7361784">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361843">var</span>&nbsp;<span class="ident" id="7361847">tx</span>&nbsp;<span class="ident" id="7361850">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361856">tx</span><span class="op" id="7361858">.</span><span class="ident" id="7361859">SetString</span><span class="op" id="7361868">(</span><span class="ident" id="7361869">test</span>&nbsp;<span class="op" id="7361874">+</span>&nbsp;<span class="string" id="7361876">&#34;.14159265&#34;</span><span class="op" id="7361887">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361891">if</span>&nbsp;<span class="ident" id="7361894">err</span>&nbsp;<span class="op" id="7361898">:=</span>&nbsp;<span class="ident" id="7361901">enc</span><span class="op" id="7361904">.</span><span class="ident" id="7361905">Encode</span><span class="op" id="7361911">(</span><span class="op" id="7361912">&amp;</span><span class="ident" id="7361913">tx</span><span class="op" id="7361915">)</span><span class="op" id="7361916">;</span>&nbsp;<span class="ident" id="7361918">err</span>&nbsp;<span class="op" id="7361922">!=</span>&nbsp;<span class="ident" id="7361925">nil</span>&nbsp;<span class="op" id="7361929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361934">t</span><span class="op" id="7361935">.</span><span class="ident" id="7361936">Errorf</span><span class="op" id="7361942">(</span><span class="string" id="7361943">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7361970">,</span>&nbsp;<span class="op" id="7361972">&amp;</span><span class="ident" id="7361973">tx</span><span class="op" id="7361975">,</span>&nbsp;<span class="ident" id="7361977">err</span><span class="op" id="7361980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361988">var</span>&nbsp;<span class="ident" id="7361992">rx</span>&nbsp;<span class="ident" id="7361995">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362001">if</span>&nbsp;<span class="ident" id="7362004">err</span>&nbsp;<span class="op" id="7362008">:=</span>&nbsp;<span class="ident" id="7362011">dec</span><span class="op" id="7362014">.</span><span class="ident" id="7362015">Decode</span><span class="op" id="7362021">(</span><span class="op" id="7362022">&amp;</span><span class="ident" id="7362023">rx</span><span class="op" id="7362025">)</span><span class="op" id="7362026">;</span>&nbsp;<span class="ident" id="7362028">err</span>&nbsp;<span class="op" id="7362032">!=</span>&nbsp;<span class="ident" id="7362035">nil</span>&nbsp;<span class="op" id="7362039">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362044">t</span><span class="op" id="7362045">.</span><span class="ident" id="7362046">Errorf</span><span class="op" id="7362052">(</span><span class="string" id="7362053">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7362080">,</span>&nbsp;<span class="op" id="7362082">&amp;</span><span class="ident" id="7362083">tx</span><span class="op" id="7362085">,</span>&nbsp;<span class="ident" id="7362087">err</span><span class="op" id="7362090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362098">if</span>&nbsp;<span class="ident" id="7362101">rx</span><span class="op" id="7362103">.</span><span class="ident" id="7362104">Cmp</span><span class="op" id="7362107">(</span><span class="op" id="7362108">&amp;</span><span class="ident" id="7362109">tx</span><span class="op" id="7362111">)</span>&nbsp;<span class="op" id="7362113">!=</span>&nbsp;<span class="num" id="7362116">0</span>&nbsp;<span class="op" id="7362118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362123">t</span><span class="op" id="7362124">.</span><span class="ident" id="7362125">Errorf</span><span class="op" id="7362131">(</span><span class="string" id="7362132">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7362175">,</span>&nbsp;<span class="op" id="7362177">&amp;</span><span class="ident" id="7362178">tx</span><span class="op" id="7362180">,</span>&nbsp;<span class="op" id="7362182">&amp;</span><span class="ident" id="7362183">rx</span><span class="op" id="7362185">,</span>&nbsp;<span class="op" id="7362187">&amp;</span><span class="ident" id="7362188">tx</span><span class="op" id="7362190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362194">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362197">}</span><br>
<span class="lineno"></span><span class="op" id="7362199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7362202">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7362297">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7362322">func</span>&nbsp;<span class="ident" id="7362327">TestGobEncodingNilRatInSlice</span><span class="op" id="7362355">(</span><span class="ident" id="7362356">t</span>&nbsp;<span class="op" id="7362358">*</span><span class="ident" id="7362359">testing</span><span class="op" id="7362366">.</span><span class="ident" id="7362367">T</span><span class="op" id="7362368">)</span>&nbsp;<span class="op" id="7362370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362373">buf</span>&nbsp;<span class="op" id="7362377">:=</span>&nbsp;<span class="builtinfunc" id="7362380">new</span><span class="op" id="7362383">(</span><span class="ident" id="7362384">bytes</span><span class="op" id="7362389">.</span><span class="ident" id="7362390">Buffer</span><span class="op" id="7362396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362399">enc</span>&nbsp;<span class="op" id="7362403">:=</span>&nbsp;<span class="ident" id="7362406">gob</span><span class="op" id="7362409">.</span><span class="ident" id="7362410">NewEncoder</span><span class="op" id="7362420">(</span><span class="ident" id="7362421">buf</span><span class="op" id="7362424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362427">dec</span>&nbsp;<span class="op" id="7362431">:=</span>&nbsp;<span class="ident" id="7362434">gob</span><span class="op" id="7362437">.</span><span class="ident" id="7362438">NewDecoder</span><span class="op" id="7362448">(</span><span class="ident" id="7362449">buf</span><span class="op" id="7362452">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362456">var</span>&nbsp;<span class="ident" id="7362460">in</span>&nbsp;<span class="op" id="7362463">=</span>&nbsp;<span class="builtinfunc" id="7362465">make</span><span class="op" id="7362469">(</span><span class="op" id="7362470">[</span><span class="op" id="7362471">]</span><span class="op" id="7362472">*</span><span class="ident" id="7362473">Rat</span><span class="op" id="7362476">,</span>&nbsp;<span class="num" id="7362478">1</span><span class="op" id="7362479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362482">err</span>&nbsp;<span class="op" id="7362486">:=</span>&nbsp;<span class="ident" id="7362489">enc</span><span class="op" id="7362492">.</span><span class="ident" id="7362493">Encode</span><span class="op" id="7362499">(</span><span class="op" id="7362500">&amp;</span><span class="ident" id="7362501">in</span><span class="op" id="7362503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362506">if</span>&nbsp;<span class="ident" id="7362509">err</span>&nbsp;<span class="op" id="7362513">!=</span>&nbsp;<span class="ident" id="7362516">nil</span>&nbsp;<span class="op" id="7362520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362524">t</span><span class="op" id="7362525">.</span><span class="ident" id="7362526">Errorf</span><span class="op" id="7362532">(</span><span class="string" id="7362533">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7362556">,</span>&nbsp;<span class="ident" id="7362558">err</span><span class="op" id="7362561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362564">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362567">var</span>&nbsp;<span class="ident" id="7362571">out</span>&nbsp;<span class="op" id="7362575">[</span><span class="op" id="7362576">]</span><span class="op" id="7362577">*</span><span class="ident" id="7362578">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362583">err</span>&nbsp;<span class="op" id="7362587">=</span>&nbsp;<span class="ident" id="7362589">dec</span><span class="op" id="7362592">.</span><span class="ident" id="7362593">Decode</span><span class="op" id="7362599">(</span><span class="op" id="7362600">&amp;</span><span class="ident" id="7362601">out</span><span class="op" id="7362604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362607">if</span>&nbsp;<span class="ident" id="7362610">err</span>&nbsp;<span class="op" id="7362614">!=</span>&nbsp;<span class="ident" id="7362617">nil</span>&nbsp;<span class="op" id="7362621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362625">t</span><span class="op" id="7362626">.</span><span class="ident" id="7362627">Fatalf</span><span class="op" id="7362633">(</span><span class="string" id="7362634">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7362657">,</span>&nbsp;<span class="ident" id="7362659">err</span><span class="op" id="7362662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362665">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362668">if</span>&nbsp;<span class="builtinfunc" id="7362671">len</span><span class="op" id="7362674">(</span><span class="ident" id="7362675">out</span><span class="op" id="7362678">)</span>&nbsp;<span class="op" id="7362680">!=</span>&nbsp;<span class="num" id="7362683">1</span>&nbsp;<span class="op" id="7362685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362689">t</span><span class="op" id="7362690">.</span><span class="ident" id="7362691">Fatalf</span><span class="op" id="7362697">(</span><span class="string" id="7362698">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7362724">,</span>&nbsp;<span class="builtinfunc" id="7362726">len</span><span class="op" id="7362729">(</span><span class="ident" id="7362730">out</span><span class="op" id="7362733">)</span><span class="op" id="7362734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362740">var</span>&nbsp;<span class="ident" id="7362744">zero</span>&nbsp;<span class="ident" id="7362749">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362754">if</span>&nbsp;<span class="ident" id="7362757">out</span><span class="op" id="7362760">[</span><span class="num" id="7362761">0</span><span class="op" id="7362762">]</span><span class="op" id="7362763">.</span><span class="ident" id="7362764">Cmp</span><span class="op" id="7362767">(</span><span class="op" id="7362768">&amp;</span><span class="ident" id="7362769">zero</span><span class="op" id="7362773">)</span>&nbsp;<span class="op" id="7362775">!=</span>&nbsp;<span class="num" id="7362778">0</span>&nbsp;<span class="op" id="7362780">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362784">t</span><span class="op" id="7362785">.</span><span class="ident" id="7362786">Errorf</span><span class="op" id="7362792">(</span><span class="string" id="7362793">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7362845">,</span>&nbsp;<span class="ident" id="7362847">out</span><span class="op" id="7362850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362853">}</span><br>
<span class="lineno"></span><span class="op" id="7362855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7362858">var</span>&nbsp;<span class="ident" id="7362862">ratNums</span>&nbsp;<span class="op" id="7362870">=</span>&nbsp;<span class="op" id="7362872">[</span><span class="op" id="7362873">]</span><span class="builtintype" id="7362874">string</span><span class="op" id="7362880">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7362883">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7362961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7362964">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7363007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363010">&#34;-141592653589793&#34;</span><span class="op" id="7363028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363031">&#34;-1&#34;</span><span class="op" id="7363035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363038">&#34;0&#34;</span><span class="op" id="7363041">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363044">&#34;1&#34;</span><span class="op" id="7363047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363050">&#34;141592653589793&#34;</span><span class="op" id="7363067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363070">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7363112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363115">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7363192">,</span><br>
<span class="lineno"></span><span class="op" id="7363194">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7363197">var</span>&nbsp;<span class="ident" id="7363201">ratDenoms</span>&nbsp;<span class="op" id="7363211">=</span>&nbsp;<span class="op" id="7363213">[</span><span class="op" id="7363214">]</span><span class="builtintype" id="7363215">string</span><span class="op" id="7363221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363224">&#34;1&#34;</span><span class="op" id="7363227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363230">&#34;718281828459045&#34;</span><span class="op" id="7363247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363250">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7363292">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7363295">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7363372">,</span><br>
<span class="lineno"></span><span class="op" id="7363374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363377">func</span>&nbsp;<span class="ident" id="7363382">TestRatJSONEncoding</span><span class="op" id="7363401">(</span><span class="ident" id="7363402">t</span>&nbsp;<span class="op" id="7363404">*</span><span class="ident" id="7363405">testing</span><span class="op" id="7363412">.</span><span class="ident" id="7363413">T</span><span class="op" id="7363414">)</span>&nbsp;<span class="op" id="7363416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363419">for</span>&nbsp;<span class="ident" id="7363423">_</span><span class="op" id="7363424">,</span>&nbsp;<span class="ident" id="7363426">num</span>&nbsp;<span class="op" id="7363430">:=</span>&nbsp;<span class="keyword" id="7363433">range</span>&nbsp;<span class="ident" id="7363439">ratNums</span>&nbsp;<span class="op" id="7363447">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363451">for</span>&nbsp;<span class="ident" id="7363455">_</span><span class="op" id="7363456">,</span>&nbsp;<span class="ident" id="7363458">denom</span>&nbsp;<span class="op" id="7363464">:=</span>&nbsp;<span class="keyword" id="7363467">range</span>&nbsp;<span class="ident" id="7363473">ratDenoms</span>&nbsp;<span class="op" id="7363483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363488">var</span>&nbsp;<span class="ident" id="7363492">tx</span>&nbsp;<span class="ident" id="7363495">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363502">tx</span><span class="op" id="7363504">.</span><span class="ident" id="7363505">SetString</span><span class="op" id="7363514">(</span><span class="ident" id="7363515">num</span>&nbsp;<span class="op" id="7363519">+</span>&nbsp;<span class="string" id="7363521">&#34;/&#34;</span>&nbsp;<span class="op" id="7363525">+</span>&nbsp;<span class="ident" id="7363527">denom</span><span class="op" id="7363532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363537">b</span><span class="op" id="7363538">,</span>&nbsp;<span class="ident" id="7363540">err</span>&nbsp;<span class="op" id="7363544">:=</span>&nbsp;<span class="ident" id="7363547">json</span><span class="op" id="7363551">.</span><span class="ident" id="7363552">Marshal</span><span class="op" id="7363559">(</span><span class="op" id="7363560">&amp;</span><span class="ident" id="7363561">tx</span><span class="op" id="7363563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363568">if</span>&nbsp;<span class="ident" id="7363571">err</span>&nbsp;<span class="op" id="7363575">!=</span>&nbsp;<span class="ident" id="7363578">nil</span>&nbsp;<span class="op" id="7363582">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363588">t</span><span class="op" id="7363589">.</span><span class="ident" id="7363590">Errorf</span><span class="op" id="7363596">(</span><span class="string" id="7363597">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7363626">,</span>&nbsp;<span class="op" id="7363628">&amp;</span><span class="ident" id="7363629">tx</span><span class="op" id="7363631">,</span>&nbsp;<span class="ident" id="7363633">err</span><span class="op" id="7363636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363642">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363659">var</span>&nbsp;<span class="ident" id="7363663">rx</span>&nbsp;<span class="ident" id="7363666">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363673">if</span>&nbsp;<span class="ident" id="7363676">err</span>&nbsp;<span class="op" id="7363680">:=</span>&nbsp;<span class="ident" id="7363683">json</span><span class="op" id="7363687">.</span><span class="ident" id="7363688">Unmarshal</span><span class="op" id="7363697">(</span><span class="ident" id="7363698">b</span><span class="op" id="7363699">,</span>&nbsp;<span class="op" id="7363701">&amp;</span><span class="ident" id="7363702">rx</span><span class="op" id="7363704">)</span><span class="op" id="7363705">;</span>&nbsp;<span class="ident" id="7363707">err</span>&nbsp;<span class="op" id="7363711">!=</span>&nbsp;<span class="ident" id="7363714">nil</span>&nbsp;<span class="op" id="7363718">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363724">t</span><span class="op" id="7363725">.</span><span class="ident" id="7363726">Errorf</span><span class="op" id="7363732">(</span><span class="string" id="7363733">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7363764">,</span>&nbsp;<span class="op" id="7363766">&amp;</span><span class="ident" id="7363767">tx</span><span class="op" id="7363769">,</span>&nbsp;<span class="ident" id="7363771">err</span><span class="op" id="7363774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363780">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363797">if</span>&nbsp;<span class="ident" id="7363800">rx</span><span class="op" id="7363802">.</span><span class="ident" id="7363803">Cmp</span><span class="op" id="7363806">(</span><span class="op" id="7363807">&amp;</span><span class="ident" id="7363808">tx</span><span class="op" id="7363810">)</span>&nbsp;<span class="op" id="7363812">!=</span>&nbsp;<span class="num" id="7363815">0</span>&nbsp;<span class="op" id="7363817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363823">t</span><span class="op" id="7363824">.</span><span class="ident" id="7363825">Errorf</span><span class="op" id="7363831">(</span><span class="string" id="7363832">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7363876">,</span>&nbsp;<span class="op" id="7363878">&amp;</span><span class="ident" id="7363879">tx</span><span class="op" id="7363881">,</span>&nbsp;<span class="op" id="7363883">&amp;</span><span class="ident" id="7363884">rx</span><span class="op" id="7363886">,</span>&nbsp;<span class="op" id="7363888">&amp;</span><span class="ident" id="7363889">tx</span><span class="op" id="7363891">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363903">}</span><br>
<span class="lineno"></span><span class="op" id="7363905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7363908">func</span>&nbsp;<span class="ident" id="7363913">TestRatXMLEncoding</span><span class="op" id="7363931">(</span><span class="ident" id="7363932">t</span>&nbsp;<span class="op" id="7363934">*</span><span class="ident" id="7363935">testing</span><span class="op" id="7363942">.</span><span class="ident" id="7363943">T</span><span class="op" id="7363944">)</span>&nbsp;<span class="op" id="7363946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363949">for</span>&nbsp;<span class="ident" id="7363953">_</span><span class="op" id="7363954">,</span>&nbsp;<span class="ident" id="7363956">num</span>&nbsp;<span class="op" id="7363960">:=</span>&nbsp;<span class="keyword" id="7363963">range</span>&nbsp;<span class="ident" id="7363969">ratNums</span>&nbsp;<span class="op" id="7363977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363981">for</span>&nbsp;<span class="ident" id="7363985">_</span><span class="op" id="7363986">,</span>&nbsp;<span class="ident" id="7363988">denom</span>&nbsp;<span class="op" id="7363994">:=</span>&nbsp;<span class="keyword" id="7363997">range</span>&nbsp;<span class="ident" id="7364003">ratDenoms</span>&nbsp;<span class="op" id="7364013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364018">var</span>&nbsp;<span class="ident" id="7364022">tx</span>&nbsp;<span class="ident" id="7364025">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364032">tx</span><span class="op" id="7364034">.</span><span class="ident" id="7364035">SetString</span><span class="op" id="7364044">(</span><span class="ident" id="7364045">num</span>&nbsp;<span class="op" id="7364049">+</span>&nbsp;<span class="string" id="7364051">&#34;/&#34;</span>&nbsp;<span class="op" id="7364055">+</span>&nbsp;<span class="ident" id="7364057">denom</span><span class="op" id="7364062">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364067">b</span><span class="op" id="7364068">,</span>&nbsp;<span class="ident" id="7364070">err</span>&nbsp;<span class="op" id="7364074">:=</span>&nbsp;<span class="ident" id="7364077">xml</span><span class="op" id="7364080">.</span><span class="ident" id="7364081">Marshal</span><span class="op" id="7364088">(</span><span class="op" id="7364089">&amp;</span><span class="ident" id="7364090">tx</span><span class="op" id="7364092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364097">if</span>&nbsp;<span class="ident" id="7364100">err</span>&nbsp;<span class="op" id="7364104">!=</span>&nbsp;<span class="ident" id="7364107">nil</span>&nbsp;<span class="op" id="7364111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364117">t</span><span class="op" id="7364118">.</span><span class="ident" id="7364119">Errorf</span><span class="op" id="7364125">(</span><span class="string" id="7364126">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7364155">,</span>&nbsp;<span class="op" id="7364157">&amp;</span><span class="ident" id="7364158">tx</span><span class="op" id="7364160">,</span>&nbsp;<span class="ident" id="7364162">err</span><span class="op" id="7364165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364171">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364183">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364188">var</span>&nbsp;<span class="ident" id="7364192">rx</span>&nbsp;<span class="ident" id="7364195">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364202">if</span>&nbsp;<span class="ident" id="7364205">err</span>&nbsp;<span class="op" id="7364209">:=</span>&nbsp;<span class="ident" id="7364212">xml</span><span class="op" id="7364215">.</span><span class="ident" id="7364216">Unmarshal</span><span class="op" id="7364225">(</span><span class="ident" id="7364226">b</span><span class="op" id="7364227">,</span>&nbsp;<span class="op" id="7364229">&amp;</span><span class="ident" id="7364230">rx</span><span class="op" id="7364232">)</span><span class="op" id="7364233">;</span>&nbsp;<span class="ident" id="7364235">err</span>&nbsp;<span class="op" id="7364239">!=</span>&nbsp;<span class="ident" id="7364242">nil</span>&nbsp;<span class="op" id="7364246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364252">t</span><span class="op" id="7364253">.</span><span class="ident" id="7364254">Errorf</span><span class="op" id="7364260">(</span><span class="string" id="7364261">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7364292">,</span>&nbsp;<span class="op" id="7364294">&amp;</span><span class="ident" id="7364295">tx</span><span class="op" id="7364297">,</span>&nbsp;<span class="ident" id="7364299">err</span><span class="op" id="7364302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364308">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364320">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364325">if</span>&nbsp;<span class="ident" id="7364328">rx</span><span class="op" id="7364330">.</span><span class="ident" id="7364331">Cmp</span><span class="op" id="7364334">(</span><span class="op" id="7364335">&amp;</span><span class="ident" id="7364336">tx</span><span class="op" id="7364338">)</span>&nbsp;<span class="op" id="7364340">!=</span>&nbsp;<span class="num" id="7364343">0</span>&nbsp;<span class="op" id="7364345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364351">t</span><span class="op" id="7364352">.</span><span class="ident" id="7364353">Errorf</span><span class="op" id="7364359">(</span><span class="string" id="7364360">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7364403">,</span>&nbsp;<span class="op" id="7364405">&amp;</span><span class="ident" id="7364406">tx</span><span class="op" id="7364408">,</span>&nbsp;<span class="op" id="7364410">&amp;</span><span class="ident" id="7364411">rx</span><span class="op" id="7364413">,</span>&nbsp;<span class="op" id="7364415">&amp;</span><span class="ident" id="7364416">tx</span><span class="op" id="7364418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364430">}</span><br>
<span class="lineno">500</span><span class="op" id="7364432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7364435">func</span>&nbsp;<span class="ident" id="7364440">TestIssue2379</span><span class="op" id="7364453">(</span><span class="ident" id="7364454">t</span>&nbsp;<span class="op" id="7364456">*</span><span class="ident" id="7364457">testing</span><span class="op" id="7364464">.</span><span class="ident" id="7364465">T</span><span class="op" id="7364466">)</span>&nbsp;<span class="op" id="7364468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364471">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364490">q</span>&nbsp;<span class="op" id="7364492">:=</span>&nbsp;<span class="ident" id="7364495">NewRat</span><span class="op" id="7364501">(</span><span class="num" id="7364502">3</span><span class="op" id="7364503">,</span>&nbsp;<span class="num" id="7364505">2</span><span class="op" id="7364506">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364509">x</span>&nbsp;<span class="op" id="7364511">:=</span>&nbsp;<span class="builtinfunc" id="7364514">new</span><span class="op" id="7364517">(</span><span class="ident" id="7364518">Rat</span><span class="op" id="7364521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364524">x</span><span class="op" id="7364525">.</span><span class="ident" id="7364526">SetFrac</span><span class="op" id="7364533">(</span><span class="ident" id="7364534">NewInt</span><span class="op" id="7364540">(</span><span class="num" id="7364541">3</span><span class="op" id="7364542">)</span><span class="op" id="7364543">,</span>&nbsp;<span class="ident" id="7364545">NewInt</span><span class="op" id="7364551">(</span><span class="num" id="7364552">2</span><span class="op" id="7364553">)</span><span class="op" id="7364554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364557">if</span>&nbsp;<span class="ident" id="7364560">x</span><span class="op" id="7364561">.</span><span class="ident" id="7364562">Cmp</span><span class="op" id="7364565">(</span><span class="ident" id="7364566">q</span><span class="op" id="7364567">)</span>&nbsp;<span class="op" id="7364569">!=</span>&nbsp;<span class="num" id="7364572">0</span>&nbsp;<span class="op" id="7364574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364578">t</span><span class="op" id="7364579">.</span><span class="ident" id="7364580">Errorf</span><span class="op" id="7364586">(</span><span class="string" id="7364587">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7364606">,</span>&nbsp;<span class="ident" id="7364608">x</span><span class="op" id="7364609">,</span>&nbsp;<span class="ident" id="7364611">q</span><span class="op" id="7364612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364615">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364619">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364648">x</span>&nbsp;<span class="op" id="7364650">=</span>&nbsp;<span class="ident" id="7364652">NewRat</span><span class="op" id="7364658">(</span><span class="num" id="7364659">2</span><span class="op" id="7364660">,</span>&nbsp;<span class="num" id="7364662">3</span><span class="op" id="7364663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364666">x</span><span class="op" id="7364667">.</span><span class="ident" id="7364668">SetFrac</span><span class="op" id="7364675">(</span><span class="ident" id="7364676">NewInt</span><span class="op" id="7364682">(</span><span class="num" id="7364683">3</span><span class="op" id="7364684">)</span><span class="op" id="7364685">,</span>&nbsp;<span class="ident" id="7364687">x</span><span class="op" id="7364688">.</span><span class="ident" id="7364689">Num</span><span class="op" id="7364692">(</span><span class="op" id="7364693">)</span><span class="op" id="7364694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364697">if</span>&nbsp;<span class="ident" id="7364700">x</span><span class="op" id="7364701">.</span><span class="ident" id="7364702">Cmp</span><span class="op" id="7364705">(</span><span class="ident" id="7364706">q</span><span class="op" id="7364707">)</span>&nbsp;<span class="op" id="7364709">!=</span>&nbsp;<span class="num" id="7364712">0</span>&nbsp;<span class="op" id="7364714">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364718">t</span><span class="op" id="7364719">.</span><span class="ident" id="7364720">Errorf</span><span class="op" id="7364726">(</span><span class="string" id="7364727">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7364746">,</span>&nbsp;<span class="ident" id="7364748">x</span><span class="op" id="7364749">,</span>&nbsp;<span class="ident" id="7364751">q</span><span class="op" id="7364752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364759">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364790">x</span>&nbsp;<span class="op" id="7364792">=</span>&nbsp;<span class="ident" id="7364794">NewRat</span><span class="op" id="7364800">(</span><span class="num" id="7364801">2</span><span class="op" id="7364802">,</span>&nbsp;<span class="num" id="7364804">3</span><span class="op" id="7364805">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364808">x</span><span class="op" id="7364809">.</span><span class="ident" id="7364810">SetFrac</span><span class="op" id="7364817">(</span><span class="ident" id="7364818">x</span><span class="op" id="7364819">.</span><span class="ident" id="7364820">Denom</span><span class="op" id="7364825">(</span><span class="op" id="7364826">)</span><span class="op" id="7364827">,</span>&nbsp;<span class="ident" id="7364829">NewInt</span><span class="op" id="7364835">(</span><span class="num" id="7364836">2</span><span class="op" id="7364837">)</span><span class="op" id="7364838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364841">if</span>&nbsp;<span class="ident" id="7364844">x</span><span class="op" id="7364845">.</span><span class="ident" id="7364846">Cmp</span><span class="op" id="7364849">(</span><span class="ident" id="7364850">q</span><span class="op" id="7364851">)</span>&nbsp;<span class="op" id="7364853">!=</span>&nbsp;<span class="num" id="7364856">0</span>&nbsp;<span class="op" id="7364858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364862">t</span><span class="op" id="7364863">.</span><span class="ident" id="7364864">Errorf</span><span class="op" id="7364870">(</span><span class="string" id="7364871">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7364890">,</span>&nbsp;<span class="ident" id="7364892">x</span><span class="op" id="7364893">,</span>&nbsp;<span class="ident" id="7364895">q</span><span class="op" id="7364896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364903">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364948">x</span>&nbsp;<span class="op" id="7364950">=</span>&nbsp;<span class="ident" id="7364952">NewRat</span><span class="op" id="7364958">(</span><span class="num" id="7364959">2</span><span class="op" id="7364960">,</span>&nbsp;<span class="num" id="7364962">3</span><span class="op" id="7364963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364966">x</span><span class="op" id="7364967">.</span><span class="ident" id="7364968">SetFrac</span><span class="op" id="7364975">(</span><span class="ident" id="7364976">x</span><span class="op" id="7364977">.</span><span class="ident" id="7364978">Denom</span><span class="op" id="7364983">(</span><span class="op" id="7364984">)</span><span class="op" id="7364985">,</span>&nbsp;<span class="ident" id="7364987">x</span><span class="op" id="7364988">.</span><span class="ident" id="7364989">Num</span><span class="op" id="7364992">(</span><span class="op" id="7364993">)</span><span class="op" id="7364994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364997">if</span>&nbsp;<span class="ident" id="7365000">x</span><span class="op" id="7365001">.</span><span class="ident" id="7365002">Cmp</span><span class="op" id="7365005">(</span><span class="ident" id="7365006">q</span><span class="op" id="7365007">)</span>&nbsp;<span class="op" id="7365009">!=</span>&nbsp;<span class="num" id="7365012">0</span>&nbsp;<span class="op" id="7365014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365018">t</span><span class="op" id="7365019">.</span><span class="ident" id="7365020">Errorf</span><span class="op" id="7365026">(</span><span class="string" id="7365027">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7365046">,</span>&nbsp;<span class="ident" id="7365048">x</span><span class="op" id="7365049">,</span>&nbsp;<span class="ident" id="7365051">q</span><span class="op" id="7365052">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365059">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365105">q</span>&nbsp;<span class="op" id="7365107">=</span>&nbsp;<span class="ident" id="7365109">NewRat</span><span class="op" id="7365115">(</span><span class="num" id="7365116">1</span><span class="op" id="7365117">,</span>&nbsp;<span class="num" id="7365119">1</span><span class="op" id="7365120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365123">x</span>&nbsp;<span class="op" id="7365125">=</span>&nbsp;<span class="builtinfunc" id="7365127">new</span><span class="op" id="7365130">(</span><span class="ident" id="7365131">Rat</span><span class="op" id="7365134">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365137">n</span>&nbsp;<span class="op" id="7365139">:=</span>&nbsp;<span class="ident" id="7365142">NewInt</span><span class="op" id="7365148">(</span><span class="num" id="7365149">7</span><span class="op" id="7365150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365153">x</span><span class="op" id="7365154">.</span><span class="ident" id="7365155">SetFrac</span><span class="op" id="7365162">(</span><span class="ident" id="7365163">n</span><span class="op" id="7365164">,</span>&nbsp;<span class="ident" id="7365166">n</span><span class="op" id="7365167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365170">if</span>&nbsp;<span class="ident" id="7365173">x</span><span class="op" id="7365174">.</span><span class="ident" id="7365175">Cmp</span><span class="op" id="7365178">(</span><span class="ident" id="7365179">q</span><span class="op" id="7365180">)</span>&nbsp;<span class="op" id="7365182">!=</span>&nbsp;<span class="num" id="7365185">0</span>&nbsp;<span class="op" id="7365187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365191">t</span><span class="op" id="7365192">.</span><span class="ident" id="7365193">Errorf</span><span class="op" id="7365199">(</span><span class="string" id="7365200">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7365219">,</span>&nbsp;<span class="ident" id="7365221">x</span><span class="op" id="7365222">,</span>&nbsp;<span class="ident" id="7365224">q</span><span class="op" id="7365225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365228">}</span><br>
<span class="lineno">540</span><span class="op" id="7365230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7365233">func</span>&nbsp;<span class="ident" id="7365238">TestIssue3521</span><span class="op" id="7365251">(</span><span class="ident" id="7365252">t</span>&nbsp;<span class="op" id="7365254">*</span><span class="ident" id="7365255">testing</span><span class="op" id="7365262">.</span><span class="ident" id="7365263">T</span><span class="op" id="7365264">)</span>&nbsp;<span class="op" id="7365266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365269">a</span>&nbsp;<span class="op" id="7365271">:=</span>&nbsp;<span class="builtinfunc" id="7365274">new</span><span class="op" id="7365277">(</span><span class="ident" id="7365278">Int</span><span class="op" id="7365281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365284">b</span>&nbsp;<span class="op" id="7365286">:=</span>&nbsp;<span class="builtinfunc" id="7365289">new</span><span class="op" id="7365292">(</span><span class="ident" id="7365293">Int</span><span class="op" id="7365296">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365299">a</span><span class="op" id="7365300">.</span><span class="ident" id="7365301">SetString</span><span class="op" id="7365310">(</span><span class="string" id="7365311">&#34;64375784358435883458348587&#34;</span><span class="op" id="7365339">,</span>&nbsp;<span class="num" id="7365341">0</span><span class="op" id="7365342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365345">b</span><span class="op" id="7365346">.</span><span class="ident" id="7365347">SetString</span><span class="op" id="7365356">(</span><span class="string" id="7365357">&#34;4789759874531&#34;</span><span class="op" id="7365372">,</span>&nbsp;<span class="num" id="7365374">0</span><span class="op" id="7365375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365379">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365424">zero</span>&nbsp;<span class="op" id="7365429">:=</span>&nbsp;<span class="builtinfunc" id="7365432">new</span><span class="op" id="7365435">(</span><span class="ident" id="7365436">Rat</span><span class="op" id="7365439">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365442">one</span>&nbsp;<span class="op" id="7365446">:=</span>&nbsp;<span class="ident" id="7365449">NewInt</span><span class="op" id="7365455">(</span><span class="num" id="7365456">1</span><span class="op" id="7365457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365460">if</span>&nbsp;<span class="ident" id="7365463">zero</span><span class="op" id="7365467">.</span><span class="ident" id="7365468">Denom</span><span class="op" id="7365473">(</span><span class="op" id="7365474">)</span><span class="op" id="7365475">.</span><span class="ident" id="7365476">Cmp</span><span class="op" id="7365479">(</span><span class="ident" id="7365480">one</span><span class="op" id="7365483">)</span>&nbsp;<span class="op" id="7365485">!=</span>&nbsp;<span class="num" id="7365488">0</span>&nbsp;<span class="op" id="7365490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365494">t</span><span class="op" id="7365495">.</span><span class="ident" id="7365496">Errorf</span><span class="op" id="7365502">(</span><span class="string" id="7365503">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7365522">,</span>&nbsp;<span class="ident" id="7365524">zero</span><span class="op" id="7365528">.</span><span class="ident" id="7365529">Denom</span><span class="op" id="7365534">(</span><span class="op" id="7365535">)</span><span class="op" id="7365536">,</span>&nbsp;<span class="ident" id="7365538">one</span><span class="op" id="7365541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365548">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365609">x</span>&nbsp;<span class="op" id="7365611">:=</span>&nbsp;<span class="builtinfunc" id="7365614">new</span><span class="op" id="7365617">(</span><span class="ident" id="7365618">Rat</span><span class="op" id="7365621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365624">x</span><span class="op" id="7365625">.</span><span class="ident" id="7365626">Denom</span><span class="op" id="7365631">(</span><span class="op" id="7365632">)</span><span class="op" id="7365633">.</span><span class="ident" id="7365634">Set</span><span class="op" id="7365637">(</span><span class="builtinfunc" id="7365638">new</span><span class="op" id="7365641">(</span><span class="ident" id="7365642">Int</span><span class="op" id="7365645">)</span><span class="op" id="7365646">.</span><span class="ident" id="7365647">Neg</span><span class="op" id="7365650">(</span><span class="ident" id="7365651">b</span><span class="op" id="7365652">)</span><span class="op" id="7365653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365656">if</span>&nbsp;<span class="ident" id="7365659">x</span><span class="op" id="7365660">.</span><span class="ident" id="7365661">Cmp</span><span class="op" id="7365664">(</span><span class="ident" id="7365665">zero</span><span class="op" id="7365669">)</span>&nbsp;<span class="op" id="7365671">!=</span>&nbsp;<span class="num" id="7365674">0</span>&nbsp;<span class="op" id="7365676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365680">t</span><span class="op" id="7365681">.</span><span class="ident" id="7365682">Errorf</span><span class="op" id="7365688">(</span><span class="string" id="7365689">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7365709">,</span>&nbsp;<span class="ident" id="7365711">x</span><span class="op" id="7365712">,</span>&nbsp;<span class="ident" id="7365714">zero</span><span class="op" id="7365718">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365725">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365783">x</span><span class="op" id="7365784">.</span><span class="ident" id="7365785">Num</span><span class="op" id="7365788">(</span><span class="op" id="7365789">)</span><span class="op" id="7365790">.</span><span class="ident" id="7365791">Set</span><span class="op" id="7365794">(</span><span class="ident" id="7365795">a</span><span class="op" id="7365796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365799">qab</span>&nbsp;<span class="op" id="7365803">:=</span>&nbsp;<span class="builtinfunc" id="7365806">new</span><span class="op" id="7365809">(</span><span class="ident" id="7365810">Rat</span><span class="op" id="7365813">)</span><span class="op" id="7365814">.</span><span class="ident" id="7365815">SetFrac</span><span class="op" id="7365822">(</span><span class="ident" id="7365823">a</span><span class="op" id="7365824">,</span>&nbsp;<span class="ident" id="7365826">b</span><span class="op" id="7365827">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365830">if</span>&nbsp;<span class="ident" id="7365833">x</span><span class="op" id="7365834">.</span><span class="ident" id="7365835">Cmp</span><span class="op" id="7365838">(</span><span class="ident" id="7365839">qab</span><span class="op" id="7365842">)</span>&nbsp;<span class="op" id="7365844">!=</span>&nbsp;<span class="num" id="7365847">0</span>&nbsp;<span class="op" id="7365849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365853">t</span><span class="op" id="7365854">.</span><span class="ident" id="7365855">Errorf</span><span class="op" id="7365861">(</span><span class="string" id="7365862">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7365882">,</span>&nbsp;<span class="ident" id="7365884">x</span><span class="op" id="7365885">,</span>&nbsp;<span class="ident" id="7365887">qab</span><span class="op" id="7365890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7365897">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365967">x</span><span class="op" id="7365968">.</span><span class="ident" id="7365969">SetFrac64</span><span class="op" id="7365978">(</span><span class="num" id="7365979">10</span><span class="op" id="7365981">,</span>&nbsp;<span class="num" id="7365983">2</span><span class="op" id="7365984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365987">x</span><span class="op" id="7365988">.</span><span class="ident" id="7365989">Denom</span><span class="op" id="7365994">(</span><span class="op" id="7365995">)</span><span class="op" id="7365996">.</span><span class="ident" id="7365997">SetInt64</span><span class="op" id="7366005">(</span><span class="num" id="7366006">3</span><span class="op" id="7366007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366010">q53</span>&nbsp;<span class="op" id="7366014">:=</span>&nbsp;<span class="ident" id="7366017">NewRat</span><span class="op" id="7366023">(</span><span class="num" id="7366024">5</span><span class="op" id="7366025">,</span>&nbsp;<span class="num" id="7366027">3</span><span class="op" id="7366028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366031">if</span>&nbsp;<span class="ident" id="7366034">x</span><span class="op" id="7366035">.</span><span class="ident" id="7366036">Cmp</span><span class="op" id="7366039">(</span><span class="ident" id="7366040">q53</span><span class="op" id="7366043">)</span>&nbsp;<span class="op" id="7366045">!=</span>&nbsp;<span class="num" id="7366048">0</span>&nbsp;<span class="op" id="7366050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366054">t</span><span class="op" id="7366055">.</span><span class="ident" id="7366056">Errorf</span><span class="op" id="7366062">(</span><span class="string" id="7366063">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7366083">,</span>&nbsp;<span class="ident" id="7366085">x</span><span class="op" id="7366086">,</span>&nbsp;<span class="ident" id="7366088">q53</span><span class="op" id="7366091">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366098">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366168">x</span>&nbsp;<span class="op" id="7366170">=</span>&nbsp;<span class="ident" id="7366172">NewRat</span><span class="op" id="7366178">(</span><span class="num" id="7366179">10</span><span class="op" id="7366181">,</span>&nbsp;<span class="num" id="7366183">2</span><span class="op" id="7366184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366187">x</span><span class="op" id="7366188">.</span><span class="ident" id="7366189">Denom</span><span class="op" id="7366194">(</span><span class="op" id="7366195">)</span><span class="op" id="7366196">.</span><span class="ident" id="7366197">SetInt64</span><span class="op" id="7366205">(</span><span class="num" id="7366206">3</span><span class="op" id="7366207">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366210">if</span>&nbsp;<span class="ident" id="7366213">x</span><span class="op" id="7366214">.</span><span class="ident" id="7366215">Cmp</span><span class="op" id="7366218">(</span><span class="ident" id="7366219">q53</span><span class="op" id="7366222">)</span>&nbsp;<span class="op" id="7366224">!=</span>&nbsp;<span class="num" id="7366227">0</span>&nbsp;<span class="op" id="7366229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366233">t</span><span class="op" id="7366234">.</span><span class="ident" id="7366235">Errorf</span><span class="op" id="7366241">(</span><span class="string" id="7366242">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7366262">,</span>&nbsp;<span class="ident" id="7366264">x</span><span class="op" id="7366265">,</span>&nbsp;<span class="ident" id="7366267">q53</span><span class="op" id="7366270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366273">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366277">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366344">x</span><span class="op" id="7366345">.</span><span class="ident" id="7366346">SetFrac</span><span class="op" id="7366353">(</span><span class="ident" id="7366354">a</span><span class="op" id="7366355">,</span>&nbsp;<span class="ident" id="7366357">b</span><span class="op" id="7366358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366361">a</span>&nbsp;<span class="op" id="7366363">=</span>&nbsp;<span class="ident" id="7366365">x</span><span class="op" id="7366366">.</span><span class="ident" id="7366367">Num</span><span class="op" id="7366370">(</span><span class="op" id="7366371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366374">b</span>&nbsp;<span class="op" id="7366376">=</span>&nbsp;<span class="ident" id="7366378">x</span><span class="op" id="7366379">.</span><span class="ident" id="7366380">Denom</span><span class="op" id="7366385">(</span><span class="op" id="7366386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366389">a</span><span class="op" id="7366390">.</span><span class="ident" id="7366391">SetInt64</span><span class="op" id="7366399">(</span><span class="num" id="7366400">5</span><span class="op" id="7366401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366404">b</span><span class="op" id="7366405">.</span><span class="ident" id="7366406">SetInt64</span><span class="op" id="7366414">(</span><span class="num" id="7366415">3</span><span class="op" id="7366416">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366419">if</span>&nbsp;<span class="ident" id="7366422">x</span><span class="op" id="7366423">.</span><span class="ident" id="7366424">Cmp</span><span class="op" id="7366427">(</span><span class="ident" id="7366428">q53</span><span class="op" id="7366431">)</span>&nbsp;<span class="op" id="7366433">!=</span>&nbsp;<span class="num" id="7366436">0</span>&nbsp;<span class="op" id="7366438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366442">t</span><span class="op" id="7366443">.</span><span class="ident" id="7366444">Errorf</span><span class="op" id="7366450">(</span><span class="string" id="7366451">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7366470">,</span>&nbsp;<span class="ident" id="7366472">x</span><span class="op" id="7366473">,</span>&nbsp;<span class="ident" id="7366475">q53</span><span class="op" id="7366478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366481">}</span><br>
<span class="lineno"></span><span class="op" id="7366483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7366486">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7366555">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7366627">var</span>&nbsp;<span class="ident" id="7366631">float64inputs</span>&nbsp;<span class="op" id="7366645">=</span>&nbsp;<span class="op" id="7366647">[</span><span class="op" id="7366648">]</span><span class="builtintype" id="7366649">string</span><span class="op" id="7366655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366658">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7366708">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366778">&#34;5e+125&#34;</span><span class="op" id="7366786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366789">&#34;69e+267&#34;</span><span class="op" id="7366798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366801">&#34;999e-026&#34;</span><span class="op" id="7366811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366814">&#34;7861e-034&#34;</span><span class="op" id="7366825">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366828">&#34;75569e-254&#34;</span><span class="op" id="7366840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366843">&#34;928609e-261&#34;</span><span class="op" id="7366856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366859">&#34;9210917e+080&#34;</span><span class="op" id="7366873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366876">&#34;84863171e+114&#34;</span><span class="op" id="7366891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366894">&#34;653777767e+273&#34;</span><span class="op" id="7366910">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366913">&#34;5232604057e-298&#34;</span><span class="op" id="7366930">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366933">&#34;27235667517e-109&#34;</span><span class="op" id="7366951">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366954">&#34;653532977297e-123&#34;</span><span class="op" id="7366973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366976">&#34;3142213164987e-294&#34;</span><span class="op" id="7366996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7366999">&#34;46202199371337e-072&#34;</span><span class="op" id="7367020">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367023">&#34;231010996856685e-073&#34;</span><span class="op" id="7367045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367048">&#34;9324754620109615e+212&#34;</span><span class="op" id="7367071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367074">&#34;78459735791271921e+049&#34;</span><span class="op" id="7367098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367101">&#34;272104041512242479e+200&#34;</span><span class="op" id="7367126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367129">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7367155">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367158">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7367185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367188">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7367216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367219">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7367248">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367252">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367322">&#34;9e-265&#34;</span><span class="op" id="7367330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367333">&#34;85e-037&#34;</span><span class="op" id="7367342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367345">&#34;623e+100&#34;</span><span class="op" id="7367355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367358">&#34;3571e+263&#34;</span><span class="op" id="7367369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367372">&#34;81661e+153&#34;</span><span class="op" id="7367384">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367387">&#34;920657e-023&#34;</span><span class="op" id="7367400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367403">&#34;4603285e-024&#34;</span><span class="op" id="7367417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367420">&#34;87575437e-309&#34;</span><span class="op" id="7367435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367438">&#34;245540327e+122&#34;</span><span class="op" id="7367454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367457">&#34;6138508175e+120&#34;</span><span class="op" id="7367474">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367477">&#34;83356057653e+193&#34;</span><span class="op" id="7367495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367498">&#34;619534293513e+124&#34;</span><span class="op" id="7367517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367520">&#34;2335141086879e+218&#34;</span><span class="op" id="7367540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367543">&#34;36167929443327e-159&#34;</span><span class="op" id="7367564">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367567">&#34;609610927149051e-255&#34;</span><span class="op" id="7367589">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367592">&#34;3743626360493413e-165&#34;</span><span class="op" id="7367615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367618">&#34;94080055902682397e-242&#34;</span><span class="op" id="7367642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367645">&#34;899810892172646163e+283&#34;</span><span class="op" id="7367670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367673">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7367699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367702">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7367729">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367732">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7367760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367763">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7367792">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7367796">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367866">&#34;5e-20&#34;</span><span class="op" id="7367873">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367876">&#34;67e+14&#34;</span><span class="op" id="7367884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367887">&#34;985e+15&#34;</span><span class="op" id="7367896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367899">&#34;7693e-42&#34;</span><span class="op" id="7367909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367912">&#34;55895e-16&#34;</span><span class="op" id="7367923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367926">&#34;996622e-44&#34;</span><span class="op" id="7367938">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367941">&#34;7038531e-32&#34;</span><span class="op" id="7367954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367957">&#34;60419369e-46&#34;</span><span class="op" id="7367971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367974">&#34;702990899e-20&#34;</span><span class="op" id="7367989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7367992">&#34;6930161142e-48&#34;</span><span class="op" id="7368008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368011">&#34;25933168707e+13&#34;</span><span class="op" id="7368028">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368031">&#34;596428896559e+20&#34;</span><span class="op" id="7368049">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368053">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368123">&#34;3e-23&#34;</span><span class="op" id="7368130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368133">&#34;57e+18&#34;</span><span class="op" id="7368141">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368144">&#34;789e-35&#34;</span><span class="op" id="7368153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368156">&#34;2539e-18&#34;</span><span class="op" id="7368166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368169">&#34;76173e+28&#34;</span><span class="op" id="7368180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368183">&#34;887745e-11&#34;</span><span class="op" id="7368195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368198">&#34;5382571e-37&#34;</span><span class="op" id="7368211">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368214">&#34;82381273e-35&#34;</span><span class="op" id="7368228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368231">&#34;750486563e-38&#34;</span><span class="op" id="7368246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368249">&#34;3752432815e-39&#34;</span><span class="op" id="7368265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368268">&#34;75224575729e-45&#34;</span><span class="op" id="7368285">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368288">&#34;459926601011e+15&#34;</span><span class="op" id="7368306">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368310">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368362">&#34;0&#34;</span><span class="op" id="7368365">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368368">&#34;1&#34;</span><span class="op" id="7368371">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368374">&#34;+1&#34;</span><span class="op" id="7368378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368381">&#34;1e23&#34;</span><span class="op" id="7368387">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368390">&#34;1E23&#34;</span><span class="op" id="7368396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368399">&#34;100000000000000000000000&#34;</span><span class="op" id="7368425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368428">&#34;1e-100&#34;</span><span class="op" id="7368436">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368439">&#34;123456700&#34;</span><span class="op" id="7368450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368453">&#34;99999999999999974834176&#34;</span><span class="op" id="7368478">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368481">&#34;100000000000000000000001&#34;</span><span class="op" id="7368507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368510">&#34;100000000000000008388608&#34;</span><span class="op" id="7368536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368539">&#34;100000000000000016777215&#34;</span><span class="op" id="7368565">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368568">&#34;100000000000000016777216&#34;</span><span class="op" id="7368594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368597">&#34;-1&#34;</span><span class="op" id="7368601">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368604">&#34;-0.1&#34;</span><span class="op" id="7368610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368613">&#34;-0&#34;</span><span class="op" id="7368617">,</span>&nbsp;<span class="comment" id="7368619">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368657">&#34;1e-20&#34;</span><span class="op" id="7368664">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368667">&#34;625e-3&#34;</span><span class="op" id="7368675">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368679">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368699">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7368723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368726">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7368751">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368754">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368783">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7368807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368810">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7368835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368838">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368866">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368888">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7368912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368915">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7368940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7368943">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368970">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7368996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7368999">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7369026">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369030">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369053">&#34;1e308&#34;</span><span class="op" id="7369060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369063">&#34;2e308&#34;</span><span class="op" id="7369070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369073">&#34;1e309&#34;</span><span class="op" id="7369080">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369084">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369102">&#34;1e310&#34;</span><span class="op" id="7369109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369112">&#34;-1e310&#34;</span><span class="op" id="7369120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369123">&#34;1e400&#34;</span><span class="op" id="7369130">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369133">&#34;-1e400&#34;</span><span class="op" id="7369141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369144">&#34;long:1e400000&#34;</span><span class="op" id="7369159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369162">&#34;long:-1e400000&#34;</span><span class="op" id="7369178">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369182">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369199">&#34;1e-305&#34;</span><span class="op" id="7369207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369210">&#34;1e-306&#34;</span><span class="op" id="7369218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369221">&#34;1e-307&#34;</span><span class="op" id="7369229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369232">&#34;1e-308&#34;</span><span class="op" id="7369240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369243">&#34;1e-309&#34;</span><span class="op" id="7369251">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369254">&#34;1e-310&#34;</span><span class="op" id="7369262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369265">&#34;1e-322&#34;</span><span class="op" id="7369273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369276">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369298">&#34;5e-324&#34;</span><span class="op" id="7369306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369309">&#34;4e-324&#34;</span><span class="op" id="7369317">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369320">&#34;3e-324&#34;</span><span class="op" id="7369328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369331">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369345">&#34;2e-324&#34;</span><span class="op" id="7369353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369356">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369374">&#34;1e-350&#34;</span><span class="op" id="7369382">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369385">&#34;long:1e-400000&#34;</span><span class="op" id="7369401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369404">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369432">&#34;-1e-350&#34;</span><span class="op" id="7369441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369444">&#34;long:-1e-400000&#34;</span><span class="op" id="7369461">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369465">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369494">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369553">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369574">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369595">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369626">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369658">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369745">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7369770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369773">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369860">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7369885">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369889">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7369963">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7369987">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7369991">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370034">&#34;22.222222222222222&#34;</span><span class="op" id="7370054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370057">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7370067">+</span>&nbsp;<span class="ident" id="7370069">strings</span><span class="op" id="7370076">.</span><span class="ident" id="7370077">Repeat</span><span class="op" id="7370083">(</span><span class="string" id="7370084">&#34;2&#34;</span><span class="op" id="7370087">,</span>&nbsp;<span class="num" id="7370089">4000</span><span class="op" id="7370093">)</span>&nbsp;<span class="op" id="7370095">+</span>&nbsp;<span class="string" id="7370097">&#34;e+1&#34;</span><span class="op" id="7370102">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370106">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370162">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370188">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7370245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370248">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370286">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7370343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370346">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370377">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7370434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370437">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370503">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7370566">+</span>&nbsp;<span class="ident" id="7370568">strings</span><span class="op" id="7370575">.</span><span class="ident" id="7370576">Repeat</span><span class="op" id="7370582">(</span><span class="string" id="7370583">&#34;0&#34;</span><span class="op" id="7370586">,</span>&nbsp;<span class="num" id="7370588">10000</span><span class="op" id="7370593">)</span>&nbsp;<span class="op" id="7370595">+</span>&nbsp;<span class="string" id="7370597">&#34;1&#34;</span><span class="op" id="7370600">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370604">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370640">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7370688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370691">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370735">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7370783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370786">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370845">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7370890">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7370938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7370941">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371009">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371054">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7371102">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371106">&#34;1152921504606846975&#34;</span><span class="op" id="7371127">,</span>&nbsp;&nbsp;<span class="comment" id="7371130">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371146">&#34;-1152921504606846975&#34;</span><span class="op" id="7371168">,</span>&nbsp;<span class="comment" id="7371170">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371187">&#34;1152921504606846977&#34;</span><span class="op" id="7371208">,</span>&nbsp;&nbsp;<span class="comment" id="7371211">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371227">&#34;-1152921504606846977&#34;</span><span class="op" id="7371249">,</span>&nbsp;<span class="comment" id="7371251">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7371269">&#34;1/3&#34;</span><span class="op" id="7371274">,</span><br>
<span class="lineno"></span><span class="op" id="7371276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7371279">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7371345">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7371405">func</span>&nbsp;<span class="ident" id="7371410">isFinite</span><span class="op" id="7371418">(</span><span class="ident" id="7371419">f</span>&nbsp;<span class="builtintype" id="7371421">float64</span><span class="op" id="7371428">)</span>&nbsp;<span class="builtintype" id="7371430">bool</span>&nbsp;<span class="op" id="7371435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371438">return</span>&nbsp;<span class="ident" id="7371445">math</span><span class="op" id="7371449">.</span><span class="ident" id="7371450">Abs</span><span class="op" id="7371453">(</span><span class="ident" id="7371454">f</span><span class="op" id="7371455">)</span>&nbsp;<span class="op" id="7371457">&lt;=</span>&nbsp;<span class="ident" id="7371460">math</span><span class="op" id="7371464">.</span><span class="ident" id="7371465">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7371476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7371479">func</span>&nbsp;<span class="ident" id="7371484">TestFloat32SpecialCases</span><span class="op" id="7371507">(</span><span class="ident" id="7371508">t</span>&nbsp;<span class="op" id="7371510">*</span><span class="ident" id="7371511">testing</span><span class="op" id="7371518">.</span><span class="ident" id="7371519">T</span><span class="op" id="7371520">)</span>&nbsp;<span class="op" id="7371522">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371525">for</span>&nbsp;<span class="ident" id="7371529">_</span><span class="op" id="7371530">,</span>&nbsp;<span class="ident" id="7371532">input</span>&nbsp;<span class="op" id="7371538">:=</span>&nbsp;<span class="keyword" id="7371541">range</span>&nbsp;<span class="ident" id="7371547">float64inputs</span>&nbsp;<span class="op" id="7371561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371565">if</span>&nbsp;<span class="ident" id="7371568">strings</span><span class="op" id="7371575">.</span><span class="ident" id="7371576">HasPrefix</span><span class="op" id="7371585">(</span><span class="ident" id="7371586">input</span><span class="op" id="7371591">,</span>&nbsp;<span class="string" id="7371593">&#34;long:&#34;</span><span class="op" id="7371600">)</span>&nbsp;<span class="op" id="7371602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371607">if</span>&nbsp;<span class="ident" id="7371610">testing</span><span class="op" id="7371617">.</span><span class="ident" id="7371618">Short</span><span class="op" id="7371623">(</span><span class="op" id="7371624">)</span>&nbsp;<span class="op" id="7371626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371632">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371644">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371649">input</span>&nbsp;<span class="op" id="7371655">=</span>&nbsp;<span class="ident" id="7371657">input</span><span class="op" id="7371662">[</span><span class="builtinfunc" id="7371663">len</span><span class="op" id="7371666">(</span><span class="string" id="7371667">&#34;long:&#34;</span><span class="op" id="7371674">)</span><span class="op" id="7371675">:</span><span class="op" id="7371676">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371680">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371685">r</span><span class="op" id="7371686">,</span>&nbsp;<span class="ident" id="7371688">ok</span>&nbsp;<span class="op" id="7371691">:=</span>&nbsp;<span class="builtinfunc" id="7371694">new</span><span class="op" id="7371697">(</span><span class="ident" id="7371698">Rat</span><span class="op" id="7371701">)</span><span class="op" id="7371702">.</span><span class="ident" id="7371703">SetString</span><span class="op" id="7371712">(</span><span class="ident" id="7371713">input</span><span class="op" id="7371718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371722">if</span>&nbsp;<span class="op" id="7371725">!</span><span class="ident" id="7371726">ok</span>&nbsp;<span class="op" id="7371729">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371734">t</span><span class="op" id="7371735">.</span><span class="ident" id="7371736">Errorf</span><span class="op" id="7371742">(</span><span class="string" id="7371743">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7371769">,</span>&nbsp;<span class="ident" id="7371771">input</span><span class="op" id="7371776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371781">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7371792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7371796">f</span><span class="op" id="7371797">,</span>&nbsp;<span class="ident" id="7371799">exact</span>&nbsp;<span class="op" id="7371805">:=</span>&nbsp;<span class="ident" id="7371808">r</span><span class="op" id="7371809">.</span><span class="ident" id="7371810">Float32</span><span class="op" id="7371817">(</span><span class="op" id="7371818">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371823">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371878">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7371919">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7371981">if</span>&nbsp;<span class="op" id="7371984">!</span><span class="ident" id="7371985">strings</span><span class="op" id="7371992">.</span><span class="ident" id="7371993">Contains</span><span class="op" id="7372001">(</span><span class="ident" id="7372002">input</span><span class="op" id="7372007">,</span>&nbsp;<span class="string" id="7372009">&#34;/&#34;</span><span class="op" id="7372012">)</span>&nbsp;<span class="op" id="7372014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372019">e64</span><span class="op" id="7372022">,</span>&nbsp;<span class="ident" id="7372024">_</span>&nbsp;<span class="op" id="7372026">:=</span>&nbsp;<span class="ident" id="7372029">strconv</span><span class="op" id="7372036">.</span><span class="ident" id="7372037">ParseFloat</span><span class="op" id="7372047">(</span><span class="ident" id="7372048">input</span><span class="op" id="7372053">,</span>&nbsp;<span class="num" id="7372055">32</span><span class="op" id="7372057">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372062">e</span>&nbsp;<span class="op" id="7372064">:=</span>&nbsp;<span class="builtintype" id="7372067">float32</span><span class="op" id="7372074">(</span><span class="ident" id="7372075">e64</span><span class="op" id="7372078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372084">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372127">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372177">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372223">switch</span>&nbsp;<span class="op" id="7372230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372235">case</span>&nbsp;<span class="ident" id="7372240">math</span><span class="op" id="7372244">.</span><span class="ident" id="7372245">Float32bits</span><span class="op" id="7372256">(</span><span class="ident" id="7372257">e</span><span class="op" id="7372258">)</span>&nbsp;<span class="op" id="7372260">==</span>&nbsp;<span class="ident" id="7372263">math</span><span class="op" id="7372267">.</span><span class="ident" id="7372268">Float32bits</span><span class="op" id="7372279">(</span><span class="ident" id="7372280">f</span><span class="op" id="7372281">)</span><span class="op" id="7372282">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372288">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372313">case</span>&nbsp;<span class="ident" id="7372318">f</span>&nbsp;<span class="op" id="7372320">==</span>&nbsp;<span class="num" id="7372323">0</span>&nbsp;<span class="op" id="7372325">&amp;&amp;</span>&nbsp;<span class="ident" id="7372328">r</span><span class="op" id="7372329">.</span><span class="ident" id="7372330">Num</span><span class="op" id="7372333">(</span><span class="op" id="7372334">)</span><span class="op" id="7372335">.</span><span class="ident" id="7372336">BitLen</span><span class="op" id="7372342">(</span><span class="op" id="7372343">)</span>&nbsp;<span class="op" id="7372345">==</span>&nbsp;<span class="num" id="7372348">0</span><span class="op" id="7372349">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372355">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372410">default</span><span class="op" id="7372417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372423">t</span><span class="op" id="7372424">.</span><span class="ident" id="7372425">Errorf</span><span class="op" id="7372431">(</span><span class="string" id="7372432">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7372492">,</span>&nbsp;<span class="ident" id="7372494">input</span><span class="op" id="7372499">,</span>&nbsp;<span class="ident" id="7372501">e</span><span class="op" id="7372502">,</span>&nbsp;<span class="ident" id="7372504">e</span><span class="op" id="7372505">,</span>&nbsp;<span class="ident" id="7372507">f</span><span class="op" id="7372508">,</span>&nbsp;<span class="ident" id="7372510">f</span><span class="op" id="7372511">,</span>&nbsp;<span class="ident" id="7372513">f</span><span class="op" id="7372514">-</span><span class="ident" id="7372515">e</span><span class="op" id="7372516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372530">if</span>&nbsp;<span class="op" id="7372533">!</span><span class="ident" id="7372534">isFinite</span><span class="op" id="7372542">(</span><span class="builtintype" id="7372543">float64</span><span class="op" id="7372550">(</span><span class="ident" id="7372551">f</span><span class="op" id="7372552">)</span><span class="op" id="7372553">)</span>&nbsp;<span class="op" id="7372555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372560">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372576">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372620">if</span>&nbsp;<span class="op" id="7372623">!</span><span class="ident" id="7372624">checkIsBestApprox32</span><span class="op" id="7372643">(</span><span class="ident" id="7372644">t</span><span class="op" id="7372645">,</span>&nbsp;<span class="ident" id="7372647">f</span><span class="op" id="7372648">,</span>&nbsp;<span class="ident" id="7372650">r</span><span class="op" id="7372651">)</span>&nbsp;<span class="op" id="7372653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372658">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372692">t</span><span class="op" id="7372693">.</span><span class="ident" id="7372694">Errorf</span><span class="op" id="7372700">(</span><span class="string" id="7372701">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7372717">,</span>&nbsp;<span class="ident" id="7372719">input</span><span class="op" id="7372724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7372728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372733">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372779">checkNonLossyRoundtrip32</span><span class="op" id="7372803">(</span><span class="ident" id="7372804">t</span><span class="op" id="7372805">,</span>&nbsp;<span class="ident" id="7372807">f</span><span class="op" id="7372808">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7372813">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7372859">if</span>&nbsp;<span class="ident" id="7372862">wasExact</span>&nbsp;<span class="op" id="7372871">:=</span>&nbsp;<span class="builtinfunc" id="7372874">new</span><span class="op" id="7372877">(</span><span class="ident" id="7372878">Rat</span><span class="op" id="7372881">)</span><span class="op" id="7372882">.</span><span class="ident" id="7372883">SetFloat64</span><span class="op" id="7372893">(</span><span class="builtintype" id="7372894">float64</span><span class="op" id="7372901">(</span><span class="ident" id="7372902">f</span><span class="op" id="7372903">)</span><span class="op" id="7372904">)</span><span class="op" id="7372905">.</span><span class="ident" id="7372906">Cmp</span><span class="op" id="7372909">(</span><span class="ident" id="7372910">r</span><span class="op" id="7372911">)</span>&nbsp;<span class="op" id="7372913">==</span>&nbsp;<span class="num" id="7372916">0</span><span class="op" id="7372917">;</span>&nbsp;<span class="ident" id="7372919">wasExact</span>&nbsp;<span class="op" id="7372928">!=</span>&nbsp;<span class="ident" id="7372931">exact</span>&nbsp;<span class="op" id="7372937">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7372942">t</span><span class="op" id="7372943">.</span><span class="ident" id="7372944">Errorf</span><span class="op" id="7372950">(</span><span class="string" id="7372951">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7373000">,</span>&nbsp;<span class="ident" id="7373002">input</span><span class="op" id="7373007">,</span>&nbsp;<span class="ident" id="7373009">exact</span><span class="op" id="7373014">,</span>&nbsp;<span class="ident" id="7373016">wasExact</span><span class="op" id="7373024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373031">}</span><br>
<span class="lineno"></span><span class="op" id="7373033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7373036">func</span>&nbsp;<span class="ident" id="7373041">TestFloat64SpecialCases</span><span class="op" id="7373064">(</span><span class="ident" id="7373065">t</span>&nbsp;<span class="op" id="7373067">*</span><span class="ident" id="7373068">testing</span><span class="op" id="7373075">.</span><span class="ident" id="7373076">T</span><span class="op" id="7373077">)</span>&nbsp;<span class="op" id="7373079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373082">for</span>&nbsp;<span class="ident" id="7373086">_</span><span class="op" id="7373087">,</span>&nbsp;<span class="ident" id="7373089">input</span>&nbsp;<span class="op" id="7373095">:=</span>&nbsp;<span class="keyword" id="7373098">range</span>&nbsp;<span class="ident" id="7373104">float64inputs</span>&nbsp;<span class="op" id="7373118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373122">if</span>&nbsp;<span class="ident" id="7373125">strings</span><span class="op" id="7373132">.</span><span class="ident" id="7373133">HasPrefix</span><span class="op" id="7373142">(</span><span class="ident" id="7373143">input</span><span class="op" id="7373148">,</span>&nbsp;<span class="string" id="7373150">&#34;long:&#34;</span><span class="op" id="7373157">)</span>&nbsp;<span class="op" id="7373159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373164">if</span>&nbsp;<span class="ident" id="7373167">testing</span><span class="op" id="7373174">.</span><span class="ident" id="7373175">Short</span><span class="op" id="7373180">(</span><span class="op" id="7373181">)</span>&nbsp;<span class="op" id="7373183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373189">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373206">input</span>&nbsp;<span class="op" id="7373212">=</span>&nbsp;<span class="ident" id="7373214">input</span><span class="op" id="7373219">[</span><span class="builtinfunc" id="7373220">len</span><span class="op" id="7373223">(</span><span class="string" id="7373224">&#34;long:&#34;</span><span class="op" id="7373231">)</span><span class="op" id="7373232">:</span><span class="op" id="7373233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373242">r</span><span class="op" id="7373243">,</span>&nbsp;<span class="ident" id="7373245">ok</span>&nbsp;<span class="op" id="7373248">:=</span>&nbsp;<span class="builtinfunc" id="7373251">new</span><span class="op" id="7373254">(</span><span class="ident" id="7373255">Rat</span><span class="op" id="7373258">)</span><span class="op" id="7373259">.</span><span class="ident" id="7373260">SetString</span><span class="op" id="7373269">(</span><span class="ident" id="7373270">input</span><span class="op" id="7373275">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373279">if</span>&nbsp;<span class="op" id="7373282">!</span><span class="ident" id="7373283">ok</span>&nbsp;<span class="op" id="7373286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373291">t</span><span class="op" id="7373292">.</span><span class="ident" id="7373293">Errorf</span><span class="op" id="7373299">(</span><span class="string" id="7373300">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7373326">,</span>&nbsp;<span class="ident" id="7373328">input</span><span class="op" id="7373333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373338">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7373349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373353">f</span><span class="op" id="7373354">,</span>&nbsp;<span class="ident" id="7373356">exact</span>&nbsp;<span class="op" id="7373362">:=</span>&nbsp;<span class="ident" id="7373365">r</span><span class="op" id="7373366">.</span><span class="ident" id="7373367">Float64</span><span class="op" id="7373374">(</span><span class="op" id="7373375">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373380">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373435">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373476">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373538">if</span>&nbsp;<span class="op" id="7373541">!</span><span class="ident" id="7373542">strings</span><span class="op" id="7373549">.</span><span class="ident" id="7373550">Contains</span><span class="op" id="7373558">(</span><span class="ident" id="7373559">input</span><span class="op" id="7373564">,</span>&nbsp;<span class="string" id="7373566">&#34;/&#34;</span><span class="op" id="7373569">)</span>&nbsp;<span class="op" id="7373571">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373576">e</span><span class="op" id="7373577">,</span>&nbsp;<span class="ident" id="7373579">_</span>&nbsp;<span class="op" id="7373581">:=</span>&nbsp;<span class="ident" id="7373584">strconv</span><span class="op" id="7373591">.</span><span class="ident" id="7373592">ParseFloat</span><span class="op" id="7373602">(</span><span class="ident" id="7373603">input</span><span class="op" id="7373608">,</span>&nbsp;<span class="num" id="7373610">64</span><span class="op" id="7373612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373618">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373661">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373711">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373757">switch</span>&nbsp;<span class="op" id="7373764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373769">case</span>&nbsp;<span class="ident" id="7373774">math</span><span class="op" id="7373778">.</span><span class="ident" id="7373779">Float64bits</span><span class="op" id="7373790">(</span><span class="ident" id="7373791">e</span><span class="op" id="7373792">)</span>&nbsp;<span class="op" id="7373794">==</span>&nbsp;<span class="ident" id="7373797">math</span><span class="op" id="7373801">.</span><span class="ident" id="7373802">Float64bits</span><span class="op" id="7373813">(</span><span class="ident" id="7373814">f</span><span class="op" id="7373815">)</span><span class="op" id="7373816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373822">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373847">case</span>&nbsp;<span class="ident" id="7373852">f</span>&nbsp;<span class="op" id="7373854">==</span>&nbsp;<span class="num" id="7373857">0</span>&nbsp;<span class="op" id="7373859">&amp;&amp;</span>&nbsp;<span class="ident" id="7373862">r</span><span class="op" id="7373863">.</span><span class="ident" id="7373864">Num</span><span class="op" id="7373867">(</span><span class="op" id="7373868">)</span><span class="op" id="7373869">.</span><span class="ident" id="7373870">BitLen</span><span class="op" id="7373876">(</span><span class="op" id="7373877">)</span>&nbsp;<span class="op" id="7373879">==</span>&nbsp;<span class="num" id="7373882">0</span><span class="op" id="7373883">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7373889">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7373944">default</span><span class="op" id="7373951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7373957">t</span><span class="op" id="7373958">.</span><span class="ident" id="7373959">Errorf</span><span class="op" id="7373965">(</span><span class="string" id="7373966">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7374026">,</span>&nbsp;<span class="ident" id="7374028">input</span><span class="op" id="7374033">,</span>&nbsp;<span class="ident" id="7374035">e</span><span class="op" id="7374036">,</span>&nbsp;<span class="ident" id="7374038">e</span><span class="op" id="7374039">,</span>&nbsp;<span class="ident" id="7374041">f</span><span class="op" id="7374042">,</span>&nbsp;<span class="ident" id="7374044">f</span><span class="op" id="7374045">,</span>&nbsp;<span class="ident" id="7374047">f</span><span class="op" id="7374048">-</span><span class="ident" id="7374049">e</span><span class="op" id="7374050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374064">if</span>&nbsp;<span class="op" id="7374067">!</span><span class="ident" id="7374068">isFinite</span><span class="op" id="7374076">(</span><span class="ident" id="7374077">f</span><span class="op" id="7374078">)</span>&nbsp;<span class="op" id="7374080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374085">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374101">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374145">if</span>&nbsp;<span class="op" id="7374148">!</span><span class="ident" id="7374149">checkIsBestApprox64</span><span class="op" id="7374168">(</span><span class="ident" id="7374169">t</span><span class="op" id="7374170">,</span>&nbsp;<span class="ident" id="7374172">f</span><span class="op" id="7374173">,</span>&nbsp;<span class="ident" id="7374175">r</span><span class="op" id="7374176">)</span>&nbsp;<span class="op" id="7374178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374183">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374217">t</span><span class="op" id="7374218">.</span><span class="ident" id="7374219">Errorf</span><span class="op" id="7374225">(</span><span class="string" id="7374226">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7374242">,</span>&nbsp;<span class="ident" id="7374244">input</span><span class="op" id="7374249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374258">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374304">checkNonLossyRoundtrip64</span><span class="op" id="7374328">(</span><span class="ident" id="7374329">t</span><span class="op" id="7374330">,</span>&nbsp;<span class="ident" id="7374332">f</span><span class="op" id="7374333">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374338">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374384">if</span>&nbsp;<span class="ident" id="7374387">wasExact</span>&nbsp;<span class="op" id="7374396">:=</span>&nbsp;<span class="builtinfunc" id="7374399">new</span><span class="op" id="7374402">(</span><span class="ident" id="7374403">Rat</span><span class="op" id="7374406">)</span><span class="op" id="7374407">.</span><span class="ident" id="7374408">SetFloat64</span><span class="op" id="7374418">(</span><span class="ident" id="7374419">f</span><span class="op" id="7374420">)</span><span class="op" id="7374421">.</span><span class="ident" id="7374422">Cmp</span><span class="op" id="7374425">(</span><span class="ident" id="7374426">r</span><span class="op" id="7374427">)</span>&nbsp;<span class="op" id="7374429">==</span>&nbsp;<span class="num" id="7374432">0</span><span class="op" id="7374433">;</span>&nbsp;<span class="ident" id="7374435">wasExact</span>&nbsp;<span class="op" id="7374444">!=</span>&nbsp;<span class="ident" id="7374447">exact</span>&nbsp;<span class="op" id="7374453">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374458">t</span><span class="op" id="7374459">.</span><span class="ident" id="7374460">Errorf</span><span class="op" id="7374466">(</span><span class="string" id="7374467">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7374516">,</span>&nbsp;<span class="ident" id="7374518">input</span><span class="op" id="7374523">,</span>&nbsp;<span class="ident" id="7374525">exact</span><span class="op" id="7374530">,</span>&nbsp;<span class="ident" id="7374532">wasExact</span><span class="op" id="7374540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374547">}</span><br>
<span class="lineno"></span><span class="op" id="7374549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7374552">func</span>&nbsp;<span class="ident" id="7374557">TestFloat32Distribution</span><span class="op" id="7374580">(</span><span class="ident" id="7374581">t</span>&nbsp;<span class="op" id="7374583">*</span><span class="ident" id="7374584">testing</span><span class="op" id="7374591">.</span><span class="ident" id="7374592">T</span><span class="op" id="7374593">)</span>&nbsp;<span class="op" id="7374595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374598">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374658">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7374718">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374770">var</span>&nbsp;<span class="ident" id="7374774">add</span>&nbsp;<span class="op" id="7374778">=</span>&nbsp;<span class="op" id="7374780">[</span><span class="op" id="7374781">]</span><span class="ident" id="7374782">int64</span><span class="op" id="7374787">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374791">0</span><span class="op" id="7374792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374796">1</span><span class="op" id="7374797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374801">3</span><span class="op" id="7374802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374806">5</span><span class="op" id="7374807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374811">7</span><span class="op" id="7374812">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374816">9</span><span class="op" id="7374817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7374821">11</span><span class="op" id="7374823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374829">var</span>&nbsp;<span class="ident" id="7374833">winc</span><span class="op" id="7374837">,</span>&nbsp;<span class="ident" id="7374839">einc</span>&nbsp;<span class="op" id="7374844">=</span>&nbsp;<span class="ident" id="7374846">uint64</span><span class="op" id="7374852">(</span><span class="num" id="7374853">1</span><span class="op" id="7374854">)</span><span class="op" id="7374855">,</span>&nbsp;<span class="num" id="7374857">1</span>&nbsp;<span class="comment" id="7374859">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374891">if</span>&nbsp;<span class="ident" id="7374894">testing</span><span class="op" id="7374901">.</span><span class="ident" id="7374902">Short</span><span class="op" id="7374907">(</span><span class="op" id="7374908">)</span>&nbsp;<span class="op" id="7374910">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7374914">winc</span><span class="op" id="7374918">,</span>&nbsp;<span class="ident" id="7374920">einc</span>&nbsp;<span class="op" id="7374925">=</span>&nbsp;<span class="num" id="7374927">5</span><span class="op" id="7374928">,</span>&nbsp;<span class="num" id="7374930">15</span>&nbsp;<span class="comment" id="7374933">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7374966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7374970">for</span>&nbsp;<span class="ident" id="7374974">_</span><span class="op" id="7374975">,</span>&nbsp;<span class="ident" id="7374977">sign</span>&nbsp;<span class="op" id="7374982">:=</span>&nbsp;<span class="keyword" id="7374985">range</span>&nbsp;<span class="string" id="7374991">&#34;+-&#34;</span>&nbsp;<span class="op" id="7374996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375000">for</span>&nbsp;<span class="ident" id="7375004">_</span><span class="op" id="7375005">,</span>&nbsp;<span class="ident" id="7375007">a</span>&nbsp;<span class="op" id="7375009">:=</span>&nbsp;<span class="keyword" id="7375012">range</span>&nbsp;<span class="ident" id="7375018">add</span>&nbsp;<span class="op" id="7375022">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375027">for</span>&nbsp;<span class="ident" id="7375031">wid</span>&nbsp;<span class="op" id="7375035">:=</span>&nbsp;<span class="ident" id="7375038">uint64</span><span class="op" id="7375044">(</span><span class="num" id="7375045">0</span><span class="op" id="7375046">)</span><span class="op" id="7375047">;</span>&nbsp;<span class="ident" id="7375049">wid</span>&nbsp;<span class="op" id="7375053">&lt;</span>&nbsp;<span class="num" id="7375055">30</span><span class="op" id="7375057">;</span>&nbsp;<span class="ident" id="7375059">wid</span>&nbsp;<span class="op" id="7375063">+=</span>&nbsp;<span class="ident" id="7375066">winc</span>&nbsp;<span class="op" id="7375071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375077">b</span>&nbsp;<span class="op" id="7375079">:=</span>&nbsp;<span class="num" id="7375082">1</span><span class="op" id="7375083">&lt;&lt;</span><span class="ident" id="7375085">wid</span>&nbsp;<span class="op" id="7375089">+</span>&nbsp;<span class="ident" id="7375091">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375097">if</span>&nbsp;<span class="ident" id="7375100">sign</span>&nbsp;<span class="op" id="7375105">==</span>&nbsp;<span class="string" id="7375108">&#39;-&#39;</span>&nbsp;<span class="op" id="7375112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375119">b</span>&nbsp;<span class="op" id="7375121">=</span>&nbsp;<span class="op" id="7375123">-</span><span class="ident" id="7375124">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375130">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375136">for</span>&nbsp;<span class="ident" id="7375140">exp</span>&nbsp;<span class="op" id="7375144">:=</span>&nbsp;<span class="op" id="7375147">-</span><span class="num" id="7375148">150</span><span class="op" id="7375151">;</span>&nbsp;<span class="ident" id="7375153">exp</span>&nbsp;<span class="op" id="7375157">&lt;</span>&nbsp;<span class="num" id="7375159">150</span><span class="op" id="7375162">;</span>&nbsp;<span class="ident" id="7375164">exp</span>&nbsp;<span class="op" id="7375168">+=</span>&nbsp;<span class="ident" id="7375171">einc</span>&nbsp;<span class="op" id="7375176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375183">num</span><span class="op" id="7375186">,</span>&nbsp;<span class="ident" id="7375188">den</span>&nbsp;<span class="op" id="7375192">:=</span>&nbsp;<span class="ident" id="7375195">NewInt</span><span class="op" id="7375201">(</span><span class="ident" id="7375202">b</span><span class="op" id="7375203">)</span><span class="op" id="7375204">,</span>&nbsp;<span class="ident" id="7375206">NewInt</span><span class="op" id="7375212">(</span><span class="num" id="7375213">1</span><span class="op" id="7375214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375221">if</span>&nbsp;<span class="ident" id="7375224">exp</span>&nbsp;<span class="op" id="7375228">&gt;</span>&nbsp;<span class="num" id="7375230">0</span>&nbsp;<span class="op" id="7375232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375240">num</span><span class="op" id="7375243">.</span><span class="ident" id="7375244">Lsh</span><span class="op" id="7375247">(</span><span class="ident" id="7375248">num</span><span class="op" id="7375251">,</span>&nbsp;<span class="builtintype" id="7375253">uint</span><span class="op" id="7375257">(</span><span class="ident" id="7375258">exp</span><span class="op" id="7375261">)</span><span class="op" id="7375262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375269">}</span>&nbsp;<span class="keyword" id="7375271">else</span>&nbsp;<span class="op" id="7375276">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375284">den</span><span class="op" id="7375287">.</span><span class="ident" id="7375288">Lsh</span><span class="op" id="7375291">(</span><span class="ident" id="7375292">den</span><span class="op" id="7375295">,</span>&nbsp;<span class="builtintype" id="7375297">uint</span><span class="op" id="7375301">(</span><span class="op" id="7375302">-</span><span class="ident" id="7375303">exp</span><span class="op" id="7375306">)</span><span class="op" id="7375307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375321">r</span>&nbsp;<span class="op" id="7375323">:=</span>&nbsp;<span class="builtinfunc" id="7375326">new</span><span class="op" id="7375329">(</span><span class="ident" id="7375330">Rat</span><span class="op" id="7375333">)</span><span class="op" id="7375334">.</span><span class="ident" id="7375335">SetFrac</span><span class="op" id="7375342">(</span><span class="ident" id="7375343">num</span><span class="op" id="7375346">,</span>&nbsp;<span class="ident" id="7375348">den</span><span class="op" id="7375351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375358">f</span><span class="op" id="7375359">,</span>&nbsp;<span class="ident" id="7375361">_</span>&nbsp;<span class="op" id="7375363">:=</span>&nbsp;<span class="ident" id="7375366">r</span><span class="op" id="7375367">.</span><span class="ident" id="7375368">Float32</span><span class="op" id="7375375">(</span><span class="op" id="7375376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375384">if</span>&nbsp;<span class="op" id="7375387">!</span><span class="ident" id="7375388">checkIsBestApprox32</span><span class="op" id="7375407">(</span><span class="ident" id="7375408">t</span><span class="op" id="7375409">,</span>&nbsp;<span class="ident" id="7375411">f</span><span class="op" id="7375412">,</span>&nbsp;<span class="ident" id="7375414">r</span><span class="op" id="7375415">)</span>&nbsp;<span class="op" id="7375417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375425">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375462">t</span><span class="op" id="7375463">.</span><span class="ident" id="7375464">Errorf</span><span class="op" id="7375470">(</span><span class="string" id="7375471">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7375534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375543">b</span><span class="op" id="7375544">,</span>&nbsp;<span class="ident" id="7375546">exp</span><span class="op" id="7375549">,</span>&nbsp;<span class="ident" id="7375551">f</span><span class="op" id="7375552">,</span>&nbsp;<span class="ident" id="7375554">f</span><span class="op" id="7375555">,</span>&nbsp;<span class="ident" id="7375557">math</span><span class="op" id="7375561">.</span><span class="ident" id="7375562">Ldexp</span><span class="op" id="7375567">(</span><span class="builtintype" id="7375568">float64</span><span class="op" id="7375575">(</span><span class="ident" id="7375576">b</span><span class="op" id="7375577">)</span><span class="op" id="7375578">,</span>&nbsp;<span class="ident" id="7375580">exp</span><span class="op" id="7375583">)</span><span class="op" id="7375584">,</span>&nbsp;<span class="ident" id="7375586">r</span><span class="op" id="7375587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375594">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7375602">checkNonLossyRoundtrip32</span><span class="op" id="7375626">(</span><span class="ident" id="7375627">t</span><span class="op" id="7375628">,</span>&nbsp;<span class="ident" id="7375630">f</span><span class="op" id="7375631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375646">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375649">}</span><br>
<span class="lineno"></span><span class="op" id="7375651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7375654">func</span>&nbsp;<span class="ident" id="7375659">TestFloat64Distribution</span><span class="op" id="7375682">(</span><span class="ident" id="7375683">t</span>&nbsp;<span class="op" id="7375685">*</span><span class="ident" id="7375686">testing</span><span class="op" id="7375693">.</span><span class="ident" id="7375694">T</span><span class="op" id="7375695">)</span>&nbsp;<span class="op" id="7375697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375700">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375760">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7375820">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375872">var</span>&nbsp;<span class="ident" id="7375876">add</span>&nbsp;<span class="op" id="7375880">=</span>&nbsp;<span class="op" id="7375882">[</span><span class="op" id="7375883">]</span><span class="ident" id="7375884">int64</span><span class="op" id="7375889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375893">0</span><span class="op" id="7375894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375898">1</span><span class="op" id="7375899">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375903">3</span><span class="op" id="7375904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375908">5</span><span class="op" id="7375909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375913">7</span><span class="op" id="7375914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375918">9</span><span class="op" id="7375919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7375923">11</span><span class="op" id="7375925">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7375928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375931">var</span>&nbsp;<span class="ident" id="7375935">winc</span><span class="op" id="7375939">,</span>&nbsp;<span class="ident" id="7375941">einc</span>&nbsp;<span class="op" id="7375946">=</span>&nbsp;<span class="ident" id="7375948">uint64</span><span class="op" id="7375954">(</span><span class="num" id="7375955">1</span><span class="op" id="7375956">)</span><span class="op" id="7375957">,</span>&nbsp;<span class="num" id="7375959">1</span>&nbsp;<span class="comment" id="7375961">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7375992">if</span>&nbsp;<span class="ident" id="7375995">testing</span><span class="op" id="7376002">.</span><span class="ident" id="7376003">Short</span><span class="op" id="7376008">(</span><span class="op" id="7376009">)</span>&nbsp;<span class="op" id="7376011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376015">winc</span><span class="op" id="7376019">,</span>&nbsp;<span class="ident" id="7376021">einc</span>&nbsp;<span class="op" id="7376026">=</span>&nbsp;<span class="num" id="7376028">10</span><span class="op" id="7376030">,</span>&nbsp;<span class="num" id="7376032">500</span>&nbsp;<span class="comment" id="7376036">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376069">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376073">for</span>&nbsp;<span class="ident" id="7376077">_</span><span class="op" id="7376078">,</span>&nbsp;<span class="ident" id="7376080">sign</span>&nbsp;<span class="op" id="7376085">:=</span>&nbsp;<span class="keyword" id="7376088">range</span>&nbsp;<span class="string" id="7376094">&#34;+-&#34;</span>&nbsp;<span class="op" id="7376099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376103">for</span>&nbsp;<span class="ident" id="7376107">_</span><span class="op" id="7376108">,</span>&nbsp;<span class="ident" id="7376110">a</span>&nbsp;<span class="op" id="7376112">:=</span>&nbsp;<span class="keyword" id="7376115">range</span>&nbsp;<span class="ident" id="7376121">add</span>&nbsp;<span class="op" id="7376125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376130">for</span>&nbsp;<span class="ident" id="7376134">wid</span>&nbsp;<span class="op" id="7376138">:=</span>&nbsp;<span class="ident" id="7376141">uint64</span><span class="op" id="7376147">(</span><span class="num" id="7376148">0</span><span class="op" id="7376149">)</span><span class="op" id="7376150">;</span>&nbsp;<span class="ident" id="7376152">wid</span>&nbsp;<span class="op" id="7376156">&lt;</span>&nbsp;<span class="num" id="7376158">60</span><span class="op" id="7376160">;</span>&nbsp;<span class="ident" id="7376162">wid</span>&nbsp;<span class="op" id="7376166">+=</span>&nbsp;<span class="ident" id="7376169">winc</span>&nbsp;<span class="op" id="7376174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376180">b</span>&nbsp;<span class="op" id="7376182">:=</span>&nbsp;<span class="num" id="7376185">1</span><span class="op" id="7376186">&lt;&lt;</span><span class="ident" id="7376188">wid</span>&nbsp;<span class="op" id="7376192">+</span>&nbsp;<span class="ident" id="7376194">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376200">if</span>&nbsp;<span class="ident" id="7376203">sign</span>&nbsp;<span class="op" id="7376208">==</span>&nbsp;<span class="string" id="7376211">&#39;-&#39;</span>&nbsp;<span class="op" id="7376215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376222">b</span>&nbsp;<span class="op" id="7376224">=</span>&nbsp;<span class="op" id="7376226">-</span><span class="ident" id="7376227">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376239">for</span>&nbsp;<span class="ident" id="7376243">exp</span>&nbsp;<span class="op" id="7376247">:=</span>&nbsp;<span class="op" id="7376250">-</span><span class="num" id="7376251">1100</span><span class="op" id="7376255">;</span>&nbsp;<span class="ident" id="7376257">exp</span>&nbsp;<span class="op" id="7376261">&lt;</span>&nbsp;<span class="num" id="7376263">1100</span><span class="op" id="7376267">;</span>&nbsp;<span class="ident" id="7376269">exp</span>&nbsp;<span class="op" id="7376273">+=</span>&nbsp;<span class="ident" id="7376276">einc</span>&nbsp;<span class="op" id="7376281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376288">num</span><span class="op" id="7376291">,</span>&nbsp;<span class="ident" id="7376293">den</span>&nbsp;<span class="op" id="7376297">:=</span>&nbsp;<span class="ident" id="7376300">NewInt</span><span class="op" id="7376306">(</span><span class="ident" id="7376307">b</span><span class="op" id="7376308">)</span><span class="op" id="7376309">,</span>&nbsp;<span class="ident" id="7376311">NewInt</span><span class="op" id="7376317">(</span><span class="num" id="7376318">1</span><span class="op" id="7376319">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376326">if</span>&nbsp;<span class="ident" id="7376329">exp</span>&nbsp;<span class="op" id="7376333">&gt;</span>&nbsp;<span class="num" id="7376335">0</span>&nbsp;<span class="op" id="7376337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376345">num</span><span class="op" id="7376348">.</span><span class="ident" id="7376349">Lsh</span><span class="op" id="7376352">(</span><span class="ident" id="7376353">num</span><span class="op" id="7376356">,</span>&nbsp;<span class="builtintype" id="7376358">uint</span><span class="op" id="7376362">(</span><span class="ident" id="7376363">exp</span><span class="op" id="7376366">)</span><span class="op" id="7376367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376374">}</span>&nbsp;<span class="keyword" id="7376376">else</span>&nbsp;<span class="op" id="7376381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376389">den</span><span class="op" id="7376392">.</span><span class="ident" id="7376393">Lsh</span><span class="op" id="7376396">(</span><span class="ident" id="7376397">den</span><span class="op" id="7376400">,</span>&nbsp;<span class="builtintype" id="7376402">uint</span><span class="op" id="7376406">(</span><span class="op" id="7376407">-</span><span class="ident" id="7376408">exp</span><span class="op" id="7376411">)</span><span class="op" id="7376412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376419">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376426">r</span>&nbsp;<span class="op" id="7376428">:=</span>&nbsp;<span class="builtinfunc" id="7376431">new</span><span class="op" id="7376434">(</span><span class="ident" id="7376435">Rat</span><span class="op" id="7376438">)</span><span class="op" id="7376439">.</span><span class="ident" id="7376440">SetFrac</span><span class="op" id="7376447">(</span><span class="ident" id="7376448">num</span><span class="op" id="7376451">,</span>&nbsp;<span class="ident" id="7376453">den</span><span class="op" id="7376456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376463">f</span><span class="op" id="7376464">,</span>&nbsp;<span class="ident" id="7376466">_</span>&nbsp;<span class="op" id="7376468">:=</span>&nbsp;<span class="ident" id="7376471">r</span><span class="op" id="7376472">.</span><span class="ident" id="7376473">Float64</span><span class="op" id="7376480">(</span><span class="op" id="7376481">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376489">if</span>&nbsp;<span class="op" id="7376492">!</span><span class="ident" id="7376493">checkIsBestApprox64</span><span class="op" id="7376512">(</span><span class="ident" id="7376513">t</span><span class="op" id="7376514">,</span>&nbsp;<span class="ident" id="7376516">f</span><span class="op" id="7376517">,</span>&nbsp;<span class="ident" id="7376519">r</span><span class="op" id="7376520">)</span>&nbsp;<span class="op" id="7376522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7376530">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376567">t</span><span class="op" id="7376568">.</span><span class="ident" id="7376569">Errorf</span><span class="op" id="7376575">(</span><span class="string" id="7376576">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7376639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376648">b</span><span class="op" id="7376649">,</span>&nbsp;<span class="ident" id="7376651">exp</span><span class="op" id="7376654">,</span>&nbsp;<span class="ident" id="7376656">f</span><span class="op" id="7376657">,</span>&nbsp;<span class="ident" id="7376659">f</span><span class="op" id="7376660">,</span>&nbsp;<span class="ident" id="7376662">math</span><span class="op" id="7376666">.</span><span class="ident" id="7376667">Ldexp</span><span class="op" id="7376672">(</span><span class="builtintype" id="7376673">float64</span><span class="op" id="7376680">(</span><span class="ident" id="7376681">b</span><span class="op" id="7376682">)</span><span class="op" id="7376683">,</span>&nbsp;<span class="ident" id="7376685">exp</span><span class="op" id="7376688">)</span><span class="op" id="7376689">,</span>&nbsp;<span class="ident" id="7376691">r</span><span class="op" id="7376692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7376707">checkNonLossyRoundtrip64</span><span class="op" id="7376731">(</span><span class="ident" id="7376732">t</span><span class="op" id="7376733">,</span>&nbsp;<span class="ident" id="7376735">f</span><span class="op" id="7376736">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7376754">}</span><br>
<span class="lineno"></span><span class="op" id="7376756">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7376759">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7376831">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7376847">func</span>&nbsp;<span class="ident" id="7376852">TestSetFloat64NonFinite</span><span class="op" id="7376875">(</span><span class="ident" id="7376876">t</span>&nbsp;<span class="op" id="7376878">*</span><span class="ident" id="7376879">testing</span><span class="op" id="7376886">.</span><span class="ident" id="7376887">T</span><span class="op" id="7376888">)</span>&nbsp;<span class="op" id="7376890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376893">for</span>&nbsp;<span class="ident" id="7376897">_</span><span class="op" id="7376898">,</span>&nbsp;<span class="ident" id="7376900">f</span>&nbsp;<span class="op" id="7376902">:=</span>&nbsp;<span class="keyword" id="7376905">range</span>&nbsp;<span class="op" id="7376911">[</span><span class="op" id="7376912">]</span><span class="builtintype" id="7376913">float64</span><span class="op" id="7376920">{</span><span class="ident" id="7376921">math</span><span class="op" id="7376925">.</span><span class="ident" id="7376926">NaN</span><span class="op" id="7376929">(</span><span class="op" id="7376930">)</span><span class="op" id="7376931">,</span>&nbsp;<span class="ident" id="7376933">math</span><span class="op" id="7376937">.</span><span class="ident" id="7376938">Inf</span><span class="op" id="7376941">(</span><span class="op" id="7376942">+</span><span class="num" id="7376943">1</span><span class="op" id="7376944">)</span><span class="op" id="7376945">,</span>&nbsp;<span class="ident" id="7376947">math</span><span class="op" id="7376951">.</span><span class="ident" id="7376952">Inf</span><span class="op" id="7376955">(</span><span class="op" id="7376956">-</span><span class="num" id="7376957">1</span><span class="op" id="7376958">)</span><span class="op" id="7376959">}</span>&nbsp;<span class="op" id="7376961">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376965">var</span>&nbsp;<span class="ident" id="7376969">r</span>&nbsp;<span class="ident" id="7376971">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7376977">if</span>&nbsp;<span class="ident" id="7376980">r2</span>&nbsp;<span class="op" id="7376983">:=</span>&nbsp;<span class="ident" id="7376986">r</span><span class="op" id="7376987">.</span><span class="ident" id="7376988">SetFloat64</span><span class="op" id="7376998">(</span><span class="ident" id="7376999">f</span><span class="op" id="7377000">)</span><span class="op" id="7377001">;</span>&nbsp;<span class="ident" id="7377003">r2</span>&nbsp;<span class="op" id="7377006">!=</span>&nbsp;<span class="ident" id="7377009">nil</span>&nbsp;<span class="op" id="7377013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377018">t</span><span class="op" id="7377019">.</span><span class="ident" id="7377020">Errorf</span><span class="op" id="7377026">(</span><span class="string" id="7377027">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7377060">,</span>&nbsp;<span class="ident" id="7377062">f</span><span class="op" id="7377063">,</span>&nbsp;<span class="ident" id="7377065">r2</span><span class="op" id="7377067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377074">}</span><br>
<span class="lineno">1015</span><span class="op" id="7377076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7377079">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7377152">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7377179">func</span>&nbsp;<span class="ident" id="7377184">checkNonLossyRoundtrip32</span><span class="op" id="7377208">(</span><span class="ident" id="7377209">t</span>&nbsp;<span class="op" id="7377211">*</span><span class="ident" id="7377212">testing</span><span class="op" id="7377219">.</span><span class="ident" id="7377220">T</span><span class="op" id="7377221">,</span>&nbsp;<span class="ident" id="7377223">f</span>&nbsp;<span class="builtintype" id="7377225">float32</span><span class="op" id="7377232">)</span>&nbsp;<span class="op" id="7377234">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377237">if</span>&nbsp;<span class="op" id="7377240">!</span><span class="ident" id="7377241">isFinite</span><span class="op" id="7377249">(</span><span class="builtintype" id="7377250">float64</span><span class="op" id="7377257">(</span><span class="ident" id="7377258">f</span><span class="op" id="7377259">)</span><span class="op" id="7377260">)</span>&nbsp;<span class="op" id="7377262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377266">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377277">r</span>&nbsp;<span class="op" id="7377279">:=</span>&nbsp;<span class="builtinfunc" id="7377282">new</span><span class="op" id="7377285">(</span><span class="ident" id="7377286">Rat</span><span class="op" id="7377289">)</span><span class="op" id="7377290">.</span><span class="ident" id="7377291">SetFloat64</span><span class="op" id="7377301">(</span><span class="builtintype" id="7377302">float64</span><span class="op" id="7377309">(</span><span class="ident" id="7377310">f</span><span class="op" id="7377311">)</span><span class="op" id="7377312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377315">if</span>&nbsp;<span class="ident" id="7377318">r</span>&nbsp;<span class="op" id="7377320">==</span>&nbsp;<span class="ident" id="7377323">nil</span>&nbsp;<span class="op" id="7377327">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377331">t</span><span class="op" id="7377332">.</span><span class="ident" id="7377333">Errorf</span><span class="op" id="7377339">(</span><span class="string" id="7377340">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7377381">,</span>&nbsp;<span class="ident" id="7377383">f</span><span class="op" id="7377384">,</span>&nbsp;<span class="ident" id="7377386">f</span><span class="op" id="7377387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377391">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377402">f2</span><span class="op" id="7377404">,</span>&nbsp;<span class="ident" id="7377406">exact</span>&nbsp;<span class="op" id="7377412">:=</span>&nbsp;<span class="ident" id="7377415">r</span><span class="op" id="7377416">.</span><span class="ident" id="7377417">Float32</span><span class="op" id="7377424">(</span><span class="op" id="7377425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377428">if</span>&nbsp;<span class="ident" id="7377431">f</span>&nbsp;<span class="op" id="7377433">!=</span>&nbsp;<span class="ident" id="7377436">f2</span>&nbsp;<span class="op" id="7377439">||</span>&nbsp;<span class="op" id="7377442">!</span><span class="ident" id="7377443">exact</span>&nbsp;<span class="op" id="7377449">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377453">t</span><span class="op" id="7377454">.</span><span class="ident" id="7377455">Errorf</span><span class="op" id="7377461">(</span><span class="string" id="7377462">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7377545">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377550">f</span><span class="op" id="7377551">,</span>&nbsp;<span class="ident" id="7377553">f2</span><span class="op" id="7377555">,</span>&nbsp;<span class="ident" id="7377557">f2</span><span class="op" id="7377559">,</span>&nbsp;<span class="ident" id="7377561">exact</span><span class="op" id="7377566">,</span>&nbsp;<span class="ident" id="7377568">f</span><span class="op" id="7377569">,</span>&nbsp;<span class="ident" id="7377571">f</span><span class="op" id="7377572">,</span>&nbsp;<span class="builtintype" id="7377574">true</span><span class="op" id="7377578">,</span>&nbsp;<span class="ident" id="7377580">f2</span><span class="op" id="7377582">-</span><span class="ident" id="7377583">f</span><span class="op" id="7377584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377587">}</span><br>
<span class="lineno"></span><span class="op" id="7377589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7377592">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7377665">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7377692">func</span>&nbsp;<span class="ident" id="7377697">checkNonLossyRoundtrip64</span><span class="op" id="7377721">(</span><span class="ident" id="7377722">t</span>&nbsp;<span class="op" id="7377724">*</span><span class="ident" id="7377725">testing</span><span class="op" id="7377732">.</span><span class="ident" id="7377733">T</span><span class="op" id="7377734">,</span>&nbsp;<span class="ident" id="7377736">f</span>&nbsp;<span class="builtintype" id="7377738">float64</span><span class="op" id="7377745">)</span>&nbsp;<span class="op" id="7377747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377750">if</span>&nbsp;<span class="op" id="7377753">!</span><span class="ident" id="7377754">isFinite</span><span class="op" id="7377762">(</span><span class="ident" id="7377763">f</span><span class="op" id="7377764">)</span>&nbsp;<span class="op" id="7377766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377770">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377781">r</span>&nbsp;<span class="op" id="7377783">:=</span>&nbsp;<span class="builtinfunc" id="7377786">new</span><span class="op" id="7377789">(</span><span class="ident" id="7377790">Rat</span><span class="op" id="7377793">)</span><span class="op" id="7377794">.</span><span class="ident" id="7377795">SetFloat64</span><span class="op" id="7377805">(</span><span class="ident" id="7377806">f</span><span class="op" id="7377807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377810">if</span>&nbsp;<span class="ident" id="7377813">r</span>&nbsp;<span class="op" id="7377815">==</span>&nbsp;<span class="ident" id="7377818">nil</span>&nbsp;<span class="op" id="7377822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377826">t</span><span class="op" id="7377827">.</span><span class="ident" id="7377828">Errorf</span><span class="op" id="7377834">(</span><span class="string" id="7377835">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7377867">,</span>&nbsp;<span class="ident" id="7377869">f</span><span class="op" id="7377870">,</span>&nbsp;<span class="ident" id="7377872">f</span><span class="op" id="7377873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377877">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7377885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377888">f2</span><span class="op" id="7377890">,</span>&nbsp;<span class="ident" id="7377892">exact</span>&nbsp;<span class="op" id="7377898">:=</span>&nbsp;<span class="ident" id="7377901">r</span><span class="op" id="7377902">.</span><span class="ident" id="7377903">Float64</span><span class="op" id="7377910">(</span><span class="op" id="7377911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7377914">if</span>&nbsp;<span class="ident" id="7377917">f</span>&nbsp;<span class="op" id="7377919">!=</span>&nbsp;<span class="ident" id="7377922">f2</span>&nbsp;<span class="op" id="7377925">||</span>&nbsp;<span class="op" id="7377928">!</span><span class="ident" id="7377929">exact</span>&nbsp;<span class="op" id="7377935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7377939">t</span><span class="op" id="7377940">.</span><span class="ident" id="7377941">Errorf</span><span class="op" id="7377947">(</span><span class="string" id="7377948">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7378022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378027">f</span><span class="op" id="7378028">,</span>&nbsp;<span class="ident" id="7378030">f2</span><span class="op" id="7378032">,</span>&nbsp;<span class="ident" id="7378034">f2</span><span class="op" id="7378036">,</span>&nbsp;<span class="ident" id="7378038">exact</span><span class="op" id="7378043">,</span>&nbsp;<span class="ident" id="7378045">f</span><span class="op" id="7378046">,</span>&nbsp;<span class="ident" id="7378048">f</span><span class="op" id="7378049">,</span>&nbsp;<span class="builtintype" id="7378051">true</span><span class="op" id="7378055">,</span>&nbsp;<span class="ident" id="7378057">f2</span><span class="op" id="7378059">-</span><span class="ident" id="7378060">f</span><span class="op" id="7378061">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378064">}</span><br>
<span class="lineno"></span><span class="op" id="7378066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7378069">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7378127">func</span>&nbsp;<span class="ident" id="7378132">delta</span><span class="op" id="7378137">(</span><span class="ident" id="7378138">r</span>&nbsp;<span class="op" id="7378140">*</span><span class="ident" id="7378141">Rat</span><span class="op" id="7378144">,</span>&nbsp;<span class="ident" id="7378146">f</span>&nbsp;<span class="builtintype" id="7378148">float64</span><span class="op" id="7378155">)</span>&nbsp;<span class="op" id="7378157">*</span><span class="ident" id="7378158">Rat</span>&nbsp;<span class="op" id="7378162">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378165">d</span>&nbsp;<span class="op" id="7378167">:=</span>&nbsp;<span class="builtinfunc" id="7378170">new</span><span class="op" id="7378173">(</span><span class="ident" id="7378174">Rat</span><span class="op" id="7378177">)</span><span class="op" id="7378178">.</span><span class="ident" id="7378179">Sub</span><span class="op" id="7378182">(</span><span class="ident" id="7378183">r</span><span class="op" id="7378184">,</span>&nbsp;<span class="builtinfunc" id="7378186">new</span><span class="op" id="7378189">(</span><span class="ident" id="7378190">Rat</span><span class="op" id="7378193">)</span><span class="op" id="7378194">.</span><span class="ident" id="7378195">SetFloat64</span><span class="op" id="7378205">(</span><span class="ident" id="7378206">f</span><span class="op" id="7378207">)</span><span class="op" id="7378208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378211">return</span>&nbsp;<span class="ident" id="7378218">d</span><span class="op" id="7378219">.</span><span class="ident" id="7378220">Abs</span><span class="op" id="7378223">(</span><span class="ident" id="7378224">d</span><span class="op" id="7378225">)</span><br>
<span class="lineno"></span><span class="op" id="7378227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7378230">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7378296">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7378319">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7378347">func</span>&nbsp;<span class="ident" id="7378352">checkIsBestApprox32</span><span class="op" id="7378371">(</span><span class="ident" id="7378372">t</span>&nbsp;<span class="op" id="7378374">*</span><span class="ident" id="7378375">testing</span><span class="op" id="7378382">.</span><span class="ident" id="7378383">T</span><span class="op" id="7378384">,</span>&nbsp;<span class="ident" id="7378386">f</span>&nbsp;<span class="builtintype" id="7378388">float32</span><span class="op" id="7378395">,</span>&nbsp;<span class="ident" id="7378397">r</span>&nbsp;<span class="op" id="7378399">*</span><span class="ident" id="7378400">Rat</span><span class="op" id="7378403">)</span>&nbsp;<span class="builtintype" id="7378405">bool</span>&nbsp;<span class="op" id="7378410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378413">if</span>&nbsp;<span class="ident" id="7378416">math</span><span class="op" id="7378420">.</span><span class="ident" id="7378421">Abs</span><span class="op" id="7378424">(</span><span class="builtintype" id="7378425">float64</span><span class="op" id="7378432">(</span><span class="ident" id="7378433">f</span><span class="op" id="7378434">)</span><span class="op" id="7378435">)</span>&nbsp;<span class="op" id="7378437">&gt;=</span>&nbsp;<span class="ident" id="7378440">math</span><span class="op" id="7378444">.</span><span class="ident" id="7378445">MaxFloat32</span>&nbsp;<span class="op" id="7378456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378460">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378531">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378579">return</span>&nbsp;<span class="builtintype" id="7378586">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7378592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378596">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378663">f0</span>&nbsp;<span class="op" id="7378666">:=</span>&nbsp;<span class="ident" id="7378669">math</span><span class="op" id="7378673">.</span><span class="ident" id="7378674">Nextafter32</span><span class="op" id="7378685">(</span><span class="ident" id="7378686">f</span><span class="op" id="7378687">,</span>&nbsp;<span class="builtintype" id="7378689">float32</span><span class="op" id="7378696">(</span><span class="ident" id="7378697">math</span><span class="op" id="7378701">.</span><span class="ident" id="7378702">Inf</span><span class="op" id="7378705">(</span><span class="op" id="7378706">-</span><span class="num" id="7378707">1</span><span class="op" id="7378708">)</span><span class="op" id="7378709">)</span><span class="op" id="7378710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378713">f1</span>&nbsp;<span class="op" id="7378716">:=</span>&nbsp;<span class="ident" id="7378719">math</span><span class="op" id="7378723">.</span><span class="ident" id="7378724">Nextafter32</span><span class="op" id="7378735">(</span><span class="ident" id="7378736">f</span><span class="op" id="7378737">,</span>&nbsp;<span class="builtintype" id="7378739">float32</span><span class="op" id="7378746">(</span><span class="ident" id="7378747">math</span><span class="op" id="7378751">.</span><span class="ident" id="7378752">Inf</span><span class="op" id="7378755">(</span><span class="op" id="7378756">+</span><span class="num" id="7378757">1</span><span class="op" id="7378758">)</span><span class="op" id="7378759">)</span><span class="op" id="7378760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7378764">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378829">df</span>&nbsp;<span class="op" id="7378832">:=</span>&nbsp;<span class="ident" id="7378835">delta</span><span class="op" id="7378840">(</span><span class="ident" id="7378841">r</span><span class="op" id="7378842">,</span>&nbsp;<span class="builtintype" id="7378844">float64</span><span class="op" id="7378851">(</span><span class="ident" id="7378852">f</span><span class="op" id="7378853">)</span><span class="op" id="7378854">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378857">df0</span>&nbsp;<span class="op" id="7378861">:=</span>&nbsp;<span class="ident" id="7378864">delta</span><span class="op" id="7378869">(</span><span class="ident" id="7378870">r</span><span class="op" id="7378871">,</span>&nbsp;<span class="builtintype" id="7378873">float64</span><span class="op" id="7378880">(</span><span class="ident" id="7378881">f0</span><span class="op" id="7378883">)</span><span class="op" id="7378884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378887">df1</span>&nbsp;<span class="op" id="7378891">:=</span>&nbsp;<span class="ident" id="7378894">delta</span><span class="op" id="7378899">(</span><span class="ident" id="7378900">r</span><span class="op" id="7378901">,</span>&nbsp;<span class="builtintype" id="7378903">float64</span><span class="op" id="7378910">(</span><span class="ident" id="7378911">f1</span><span class="op" id="7378913">)</span><span class="op" id="7378914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7378917">if</span>&nbsp;<span class="ident" id="7378920">df</span><span class="op" id="7378922">.</span><span class="ident" id="7378923">Cmp</span><span class="op" id="7378926">(</span><span class="ident" id="7378927">df0</span><span class="op" id="7378930">)</span>&nbsp;<span class="op" id="7378932">&gt;</span>&nbsp;<span class="num" id="7378934">0</span>&nbsp;<span class="op" id="7378936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7378940">t</span><span class="op" id="7378941">.</span><span class="ident" id="7378942">Errorf</span><span class="op" id="7378948">(</span><span class="string" id="7378949">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7379018">,</span>&nbsp;<span class="ident" id="7379020">r</span><span class="op" id="7379021">,</span>&nbsp;<span class="ident" id="7379023">f</span><span class="op" id="7379024">,</span>&nbsp;<span class="ident" id="7379026">f</span><span class="op" id="7379027">,</span>&nbsp;<span class="ident" id="7379029">f0</span><span class="op" id="7379031">,</span>&nbsp;<span class="ident" id="7379033">f0</span><span class="op" id="7379035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379039">return</span>&nbsp;<span class="builtintype" id="7379046">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379056">if</span>&nbsp;<span class="ident" id="7379059">df</span><span class="op" id="7379061">.</span><span class="ident" id="7379062">Cmp</span><span class="op" id="7379065">(</span><span class="ident" id="7379066">df1</span><span class="op" id="7379069">)</span>&nbsp;<span class="op" id="7379071">&gt;</span>&nbsp;<span class="num" id="7379073">0</span>&nbsp;<span class="op" id="7379075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379079">t</span><span class="op" id="7379080">.</span><span class="ident" id="7379081">Errorf</span><span class="op" id="7379087">(</span><span class="string" id="7379088">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7379153">,</span>&nbsp;<span class="ident" id="7379155">r</span><span class="op" id="7379156">,</span>&nbsp;<span class="ident" id="7379158">f</span><span class="op" id="7379159">,</span>&nbsp;<span class="ident" id="7379161">f</span><span class="op" id="7379162">,</span>&nbsp;<span class="ident" id="7379164">f1</span><span class="op" id="7379166">,</span>&nbsp;<span class="ident" id="7379168">f1</span><span class="op" id="7379170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379174">return</span>&nbsp;<span class="builtintype" id="7379181">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379188">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379191">if</span>&nbsp;<span class="ident" id="7379194">df</span><span class="op" id="7379196">.</span><span class="ident" id="7379197">Cmp</span><span class="op" id="7379200">(</span><span class="ident" id="7379201">df0</span><span class="op" id="7379204">)</span>&nbsp;<span class="op" id="7379206">==</span>&nbsp;<span class="num" id="7379209">0</span>&nbsp;<span class="op" id="7379211">&amp;&amp;</span>&nbsp;<span class="op" id="7379214">!</span><span class="ident" id="7379215">isEven32</span><span class="op" id="7379223">(</span><span class="ident" id="7379224">f</span><span class="op" id="7379225">)</span>&nbsp;<span class="op" id="7379227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379231">t</span><span class="op" id="7379232">.</span><span class="ident" id="7379233">Errorf</span><span class="op" id="7379239">(</span><span class="string" id="7379240">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7379317">,</span>&nbsp;<span class="ident" id="7379319">r</span><span class="op" id="7379320">,</span>&nbsp;<span class="ident" id="7379322">f</span><span class="op" id="7379323">,</span>&nbsp;<span class="ident" id="7379325">f</span><span class="op" id="7379326">,</span>&nbsp;<span class="ident" id="7379328">f0</span><span class="op" id="7379330">,</span>&nbsp;<span class="ident" id="7379332">f0</span><span class="op" id="7379334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379338">return</span>&nbsp;<span class="builtintype" id="7379345">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379355">if</span>&nbsp;<span class="ident" id="7379358">df</span><span class="op" id="7379360">.</span><span class="ident" id="7379361">Cmp</span><span class="op" id="7379364">(</span><span class="ident" id="7379365">df1</span><span class="op" id="7379368">)</span>&nbsp;<span class="op" id="7379370">==</span>&nbsp;<span class="num" id="7379373">0</span>&nbsp;<span class="op" id="7379375">&amp;&amp;</span>&nbsp;<span class="op" id="7379378">!</span><span class="ident" id="7379379">isEven32</span><span class="op" id="7379387">(</span><span class="ident" id="7379388">f</span><span class="op" id="7379389">)</span>&nbsp;<span class="op" id="7379391">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379395">t</span><span class="op" id="7379396">.</span><span class="ident" id="7379397">Errorf</span><span class="op" id="7379403">(</span><span class="string" id="7379404">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7379481">,</span>&nbsp;<span class="ident" id="7379483">r</span><span class="op" id="7379484">,</span>&nbsp;<span class="ident" id="7379486">f</span><span class="op" id="7379487">,</span>&nbsp;<span class="ident" id="7379489">f</span><span class="op" id="7379490">,</span>&nbsp;<span class="ident" id="7379492">f1</span><span class="op" id="7379494">,</span>&nbsp;<span class="ident" id="7379496">f1</span><span class="op" id="7379498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379502">return</span>&nbsp;<span class="builtintype" id="7379509">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379519">return</span>&nbsp;<span class="builtintype" id="7379526">true</span><br>
<span class="lineno"></span><span class="op" id="7379531">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7379534">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7379600">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7379623">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7379651">func</span>&nbsp;<span class="ident" id="7379656">checkIsBestApprox64</span><span class="op" id="7379675">(</span><span class="ident" id="7379676">t</span>&nbsp;<span class="op" id="7379678">*</span><span class="ident" id="7379679">testing</span><span class="op" id="7379686">.</span><span class="ident" id="7379687">T</span><span class="op" id="7379688">,</span>&nbsp;<span class="ident" id="7379690">f</span>&nbsp;<span class="builtintype" id="7379692">float64</span><span class="op" id="7379699">,</span>&nbsp;<span class="ident" id="7379701">r</span>&nbsp;<span class="op" id="7379703">*</span><span class="ident" id="7379704">Rat</span><span class="op" id="7379707">)</span>&nbsp;<span class="builtintype" id="7379709">bool</span>&nbsp;<span class="op" id="7379714">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379717">if</span>&nbsp;<span class="ident" id="7379720">math</span><span class="op" id="7379724">.</span><span class="ident" id="7379725">Abs</span><span class="op" id="7379728">(</span><span class="ident" id="7379729">f</span><span class="op" id="7379730">)</span>&nbsp;<span class="op" id="7379732">&gt;=</span>&nbsp;<span class="ident" id="7379735">math</span><span class="op" id="7379739">.</span><span class="ident" id="7379740">MaxFloat64</span>&nbsp;<span class="op" id="7379751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379755">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379826">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7379874">return</span>&nbsp;<span class="builtintype" id="7379881">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7379887">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7379891">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379958">f0</span>&nbsp;<span class="op" id="7379961">:=</span>&nbsp;<span class="ident" id="7379964">math</span><span class="op" id="7379968">.</span><span class="ident" id="7379969">Nextafter</span><span class="op" id="7379978">(</span><span class="ident" id="7379979">f</span><span class="op" id="7379980">,</span>&nbsp;<span class="ident" id="7379982">math</span><span class="op" id="7379986">.</span><span class="ident" id="7379987">Inf</span><span class="op" id="7379990">(</span><span class="op" id="7379991">-</span><span class="num" id="7379992">1</span><span class="op" id="7379993">)</span><span class="op" id="7379994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7379997">f1</span>&nbsp;<span class="op" id="7380000">:=</span>&nbsp;<span class="ident" id="7380003">math</span><span class="op" id="7380007">.</span><span class="ident" id="7380008">Nextafter</span><span class="op" id="7380017">(</span><span class="ident" id="7380018">f</span><span class="op" id="7380019">,</span>&nbsp;<span class="ident" id="7380021">math</span><span class="op" id="7380025">.</span><span class="ident" id="7380026">Inf</span><span class="op" id="7380029">(</span><span class="op" id="7380030">+</span><span class="num" id="7380031">1</span><span class="op" id="7380032">)</span><span class="op" id="7380033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7380037">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380102">df</span>&nbsp;<span class="op" id="7380105">:=</span>&nbsp;<span class="ident" id="7380108">delta</span><span class="op" id="7380113">(</span><span class="ident" id="7380114">r</span><span class="op" id="7380115">,</span>&nbsp;<span class="ident" id="7380117">f</span><span class="op" id="7380118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380121">df0</span>&nbsp;<span class="op" id="7380125">:=</span>&nbsp;<span class="ident" id="7380128">delta</span><span class="op" id="7380133">(</span><span class="ident" id="7380134">r</span><span class="op" id="7380135">,</span>&nbsp;<span class="ident" id="7380137">f0</span><span class="op" id="7380139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380142">df1</span>&nbsp;<span class="op" id="7380146">:=</span>&nbsp;<span class="ident" id="7380149">delta</span><span class="op" id="7380154">(</span><span class="ident" id="7380155">r</span><span class="op" id="7380156">,</span>&nbsp;<span class="ident" id="7380158">f1</span><span class="op" id="7380160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380163">if</span>&nbsp;<span class="ident" id="7380166">df</span><span class="op" id="7380168">.</span><span class="ident" id="7380169">Cmp</span><span class="op" id="7380172">(</span><span class="ident" id="7380173">df0</span><span class="op" id="7380176">)</span>&nbsp;<span class="op" id="7380178">&gt;</span>&nbsp;<span class="num" id="7380180">0</span>&nbsp;<span class="op" id="7380182">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380186">t</span><span class="op" id="7380187">.</span><span class="ident" id="7380188">Errorf</span><span class="op" id="7380194">(</span><span class="string" id="7380195">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7380264">,</span>&nbsp;<span class="ident" id="7380266">r</span><span class="op" id="7380267">,</span>&nbsp;<span class="ident" id="7380269">f</span><span class="op" id="7380270">,</span>&nbsp;<span class="ident" id="7380272">f</span><span class="op" id="7380273">,</span>&nbsp;<span class="ident" id="7380275">f0</span><span class="op" id="7380277">,</span>&nbsp;<span class="ident" id="7380279">f0</span><span class="op" id="7380281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380285">return</span>&nbsp;<span class="builtintype" id="7380292">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380302">if</span>&nbsp;<span class="ident" id="7380305">df</span><span class="op" id="7380307">.</span><span class="ident" id="7380308">Cmp</span><span class="op" id="7380311">(</span><span class="ident" id="7380312">df1</span><span class="op" id="7380315">)</span>&nbsp;<span class="op" id="7380317">&gt;</span>&nbsp;<span class="num" id="7380319">0</span>&nbsp;<span class="op" id="7380321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380325">t</span><span class="op" id="7380326">.</span><span class="ident" id="7380327">Errorf</span><span class="op" id="7380333">(</span><span class="string" id="7380334">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7380399">,</span>&nbsp;<span class="ident" id="7380401">r</span><span class="op" id="7380402">,</span>&nbsp;<span class="ident" id="7380404">f</span><span class="op" id="7380405">,</span>&nbsp;<span class="ident" id="7380407">f</span><span class="op" id="7380408">,</span>&nbsp;<span class="ident" id="7380410">f1</span><span class="op" id="7380412">,</span>&nbsp;<span class="ident" id="7380414">f1</span><span class="op" id="7380416">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380420">return</span>&nbsp;<span class="builtintype" id="7380427">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380437">if</span>&nbsp;<span class="ident" id="7380440">df</span><span class="op" id="7380442">.</span><span class="ident" id="7380443">Cmp</span><span class="op" id="7380446">(</span><span class="ident" id="7380447">df0</span><span class="op" id="7380450">)</span>&nbsp;<span class="op" id="7380452">==</span>&nbsp;<span class="num" id="7380455">0</span>&nbsp;<span class="op" id="7380457">&amp;&amp;</span>&nbsp;<span class="op" id="7380460">!</span><span class="ident" id="7380461">isEven64</span><span class="op" id="7380469">(</span><span class="ident" id="7380470">f</span><span class="op" id="7380471">)</span>&nbsp;<span class="op" id="7380473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380477">t</span><span class="op" id="7380478">.</span><span class="ident" id="7380479">Errorf</span><span class="op" id="7380485">(</span><span class="string" id="7380486">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7380563">,</span>&nbsp;<span class="ident" id="7380565">r</span><span class="op" id="7380566">,</span>&nbsp;<span class="ident" id="7380568">f</span><span class="op" id="7380569">,</span>&nbsp;<span class="ident" id="7380571">f</span><span class="op" id="7380572">,</span>&nbsp;<span class="ident" id="7380574">f0</span><span class="op" id="7380576">,</span>&nbsp;<span class="ident" id="7380578">f0</span><span class="op" id="7380580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380584">return</span>&nbsp;<span class="builtintype" id="7380591">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380601">if</span>&nbsp;<span class="ident" id="7380604">df</span><span class="op" id="7380606">.</span><span class="ident" id="7380607">Cmp</span><span class="op" id="7380610">(</span><span class="ident" id="7380611">df1</span><span class="op" id="7380614">)</span>&nbsp;<span class="op" id="7380616">==</span>&nbsp;<span class="num" id="7380619">0</span>&nbsp;<span class="op" id="7380621">&amp;&amp;</span>&nbsp;<span class="op" id="7380624">!</span><span class="ident" id="7380625">isEven64</span><span class="op" id="7380633">(</span><span class="ident" id="7380634">f</span><span class="op" id="7380635">)</span>&nbsp;<span class="op" id="7380637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380641">t</span><span class="op" id="7380642">.</span><span class="ident" id="7380643">Errorf</span><span class="op" id="7380649">(</span><span class="string" id="7380650">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7380727">,</span>&nbsp;<span class="ident" id="7380729">r</span><span class="op" id="7380730">,</span>&nbsp;<span class="ident" id="7380732">f</span><span class="op" id="7380733">,</span>&nbsp;<span class="ident" id="7380735">f</span><span class="op" id="7380736">,</span>&nbsp;<span class="ident" id="7380738">f1</span><span class="op" id="7380740">,</span>&nbsp;<span class="ident" id="7380742">f1</span><span class="op" id="7380744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380748">return</span>&nbsp;<span class="builtintype" id="7380755">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7380762">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7380765">return</span>&nbsp;<span class="builtintype" id="7380772">true</span><br>
<span class="lineno"></span><span class="op" id="7380777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7380780">func</span>&nbsp;<span class="ident" id="7380785">isEven32</span><span class="op" id="7380793">(</span><span class="ident" id="7380794">f</span>&nbsp;<span class="builtintype" id="7380796">float32</span><span class="op" id="7380803">)</span>&nbsp;<span class="builtintype" id="7380805">bool</span>&nbsp;<span class="op" id="7380810">{</span>&nbsp;<span class="keyword" id="7380812">return</span>&nbsp;<span class="ident" id="7380819">math</span><span class="op" id="7380823">.</span><span class="ident" id="7380824">Float32bits</span><span class="op" id="7380835">(</span><span class="ident" id="7380836">f</span><span class="op" id="7380837">)</span><span class="op" id="7380838">&amp;</span><span class="num" id="7380839">1</span>&nbsp;<span class="op" id="7380841">==</span>&nbsp;<span class="num" id="7380844">0</span>&nbsp;<span class="op" id="7380846">}</span><br>
<span class="lineno"></span><span class="keyword" id="7380848">func</span>&nbsp;<span class="ident" id="7380853">isEven64</span><span class="op" id="7380861">(</span><span class="ident" id="7380862">f</span>&nbsp;<span class="builtintype" id="7380864">float64</span><span class="op" id="7380871">)</span>&nbsp;<span class="builtintype" id="7380873">bool</span>&nbsp;<span class="op" id="7380878">{</span>&nbsp;<span class="keyword" id="7380880">return</span>&nbsp;<span class="ident" id="7380887">math</span><span class="op" id="7380891">.</span><span class="ident" id="7380892">Float64bits</span><span class="op" id="7380903">(</span><span class="ident" id="7380904">f</span><span class="op" id="7380905">)</span><span class="op" id="7380906">&amp;</span><span class="num" id="7380907">1</span>&nbsp;<span class="op" id="7380909">==</span>&nbsp;<span class="num" id="7380912">0</span>&nbsp;<span class="op" id="7380914">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7380917">func</span>&nbsp;<span class="ident" id="7380922">TestIsFinite</span><span class="op" id="7380934">(</span><span class="ident" id="7380935">t</span>&nbsp;<span class="op" id="7380937">*</span><span class="ident" id="7380938">testing</span><span class="op" id="7380945">.</span><span class="ident" id="7380946">T</span><span class="op" id="7380947">)</span>&nbsp;<span class="op" id="7380949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7380952">finites</span>&nbsp;<span class="op" id="7380960">:=</span>&nbsp;<span class="op" id="7380963">[</span><span class="op" id="7380964">]</span><span class="builtintype" id="7380965">float64</span><span class="op" id="7380972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7380976">1.0</span>&nbsp;<span class="op" id="7380980">/</span>&nbsp;<span class="num" id="7380982">3</span><span class="op" id="7380983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="7380987">4891559871276714924261e+222</span><span class="op" id="7381014">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381018">math</span><span class="op" id="7381022">.</span><span class="ident" id="7381023">MaxFloat64</span><span class="op" id="7381033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381037">math</span><span class="op" id="7381041">.</span><span class="ident" id="7381042">SmallestNonzeroFloat64</span><span class="op" id="7381064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381068">-</span><span class="ident" id="7381069">math</span><span class="op" id="7381073">.</span><span class="ident" id="7381074">MaxFloat64</span><span class="op" id="7381084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381088">-</span><span class="ident" id="7381089">math</span><span class="op" id="7381093">.</span><span class="ident" id="7381094">SmallestNonzeroFloat64</span><span class="op" id="7381116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381119">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381122">for</span>&nbsp;<span class="ident" id="7381126">_</span><span class="op" id="7381127">,</span>&nbsp;<span class="ident" id="7381129">f</span>&nbsp;<span class="op" id="7381131">:=</span>&nbsp;<span class="keyword" id="7381134">range</span>&nbsp;<span class="ident" id="7381140">finites</span>&nbsp;<span class="op" id="7381148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381152">if</span>&nbsp;<span class="op" id="7381155">!</span><span class="ident" id="7381156">isFinite</span><span class="op" id="7381164">(</span><span class="ident" id="7381165">f</span><span class="op" id="7381166">)</span>&nbsp;<span class="op" id="7381168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381173">t</span><span class="op" id="7381174">.</span><span class="ident" id="7381175">Errorf</span><span class="op" id="7381181">(</span><span class="string" id="7381182">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7381202">,</span>&nbsp;<span class="ident" id="7381204">f</span><span class="op" id="7381205">,</span>&nbsp;<span class="ident" id="7381207">f</span><span class="op" id="7381208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381215">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381218">nonfinites</span>&nbsp;<span class="op" id="7381229">:=</span>&nbsp;<span class="op" id="7381232">[</span><span class="op" id="7381233">]</span><span class="builtintype" id="7381234">float64</span><span class="op" id="7381241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381245">math</span><span class="op" id="7381249">.</span><span class="ident" id="7381250">NaN</span><span class="op" id="7381253">(</span><span class="op" id="7381254">)</span><span class="op" id="7381255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381259">math</span><span class="op" id="7381263">.</span><span class="ident" id="7381264">Inf</span><span class="op" id="7381267">(</span><span class="op" id="7381268">-</span><span class="num" id="7381269">1</span><span class="op" id="7381270">)</span><span class="op" id="7381271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381275">math</span><span class="op" id="7381279">.</span><span class="ident" id="7381280">Inf</span><span class="op" id="7381283">(</span><span class="op" id="7381284">+</span><span class="num" id="7381285">1</span><span class="op" id="7381286">)</span><span class="op" id="7381287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381290">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381293">for</span>&nbsp;<span class="ident" id="7381297">_</span><span class="op" id="7381298">,</span>&nbsp;<span class="ident" id="7381300">f</span>&nbsp;<span class="op" id="7381302">:=</span>&nbsp;<span class="keyword" id="7381305">range</span>&nbsp;<span class="ident" id="7381311">nonfinites</span>&nbsp;<span class="op" id="7381322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7381326">if</span>&nbsp;<span class="ident" id="7381329">isFinite</span><span class="op" id="7381337">(</span><span class="ident" id="7381338">f</span><span class="op" id="7381339">)</span>&nbsp;<span class="op" id="7381341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7381346">t</span><span class="op" id="7381347">.</span><span class="ident" id="7381348">Errorf</span><span class="op" id="7381354">(</span><span class="string" id="7381355">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7381375">,</span>&nbsp;<span class="ident" id="7381377">f</span><span class="op" id="7381378">,</span>&nbsp;<span class="ident" id="7381380">f</span><span class="op" id="7381381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7381388">}</span><br>
<span class="lineno">1160</span><span class="op" id="7381390">}</span>
</div>
</body>
</html>
