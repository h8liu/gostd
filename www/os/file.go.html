<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2212229">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2212284">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2212338">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2212389">//&nbsp;Package&nbsp;os&nbsp;provides&nbsp;a&nbsp;platform-independent&nbsp;interface&nbsp;to&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span><span class="comment" id="2212465">//&nbsp;functionality.&nbsp;The&nbsp;design&nbsp;is&nbsp;Unix-like,&nbsp;although&nbsp;the&nbsp;error&nbsp;handling&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2212539">//&nbsp;Go-like;&nbsp;failing&nbsp;calls&nbsp;return&nbsp;values&nbsp;of&nbsp;type&nbsp;error&nbsp;rather&nbsp;than&nbsp;error&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2212620">//&nbsp;Often,&nbsp;more&nbsp;information&nbsp;is&nbsp;available&nbsp;within&nbsp;the&nbsp;error.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="2212691">//&nbsp;if&nbsp;a&nbsp;call&nbsp;that&nbsp;takes&nbsp;a&nbsp;file&nbsp;name&nbsp;fails,&nbsp;such&nbsp;as&nbsp;Open&nbsp;or&nbsp;Stat,&nbsp;the&nbsp;error</span><br>
<span class="lineno">10</span><span class="comment" id="2212766">//&nbsp;will&nbsp;include&nbsp;the&nbsp;failing&nbsp;file&nbsp;name&nbsp;when&nbsp;printed&nbsp;and&nbsp;will&nbsp;be&nbsp;of&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="2212837">//&nbsp;*PathError,&nbsp;which&nbsp;may&nbsp;be&nbsp;unpacked&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="2212896">//</span><br>
<span class="lineno"></span><span class="comment" id="2212899">//&nbsp;The&nbsp;os&nbsp;interface&nbsp;is&nbsp;intended&nbsp;to&nbsp;be&nbsp;uniform&nbsp;across&nbsp;all&nbsp;operating&nbsp;systems.</span><br>
<span class="lineno"></span><span class="comment" id="2212975">//&nbsp;Features&nbsp;not&nbsp;generally&nbsp;available&nbsp;appear&nbsp;in&nbsp;the&nbsp;system-specific&nbsp;package&nbsp;syscall.</span><br>
<span class="lineno">15</span><span class="comment" id="2213058">//</span><br>
<span class="lineno"></span><span class="comment" id="2213061">//&nbsp;Here&nbsp;is&nbsp;a&nbsp;simple&nbsp;example,&nbsp;opening&nbsp;a&nbsp;file&nbsp;and&nbsp;reading&nbsp;some&nbsp;of&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="2213129">//</span><br>
<span class="lineno"></span><span class="comment" id="2213132">//&nbsp;&nbsp;&nbsp;&nbspfile,&nbsp;err&nbsp;:=&nbsp;os.Open(&#34;file.go&#34;)&nbsp;//&nbsp;For&nbsp;read&nbsp;access.</span><br>
<span class="lineno"></span><span class="comment" id="2213187">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">20</span><span class="comment" id="2213206">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2213225">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="2213230">//</span><br>
<span class="lineno"></span><span class="comment" id="2213233">//&nbsp;If&nbsp;the&nbsp;open&nbsp;fails,&nbsp;the&nbsp;error&nbsp;string&nbsp;will&nbsp;be&nbsp;self-explanatory,&nbsp;like</span><br>
<span class="lineno"></span><span class="comment" id="2213303">//</span><br>
<span class="lineno">25</span><span class="comment" id="2213306">//&nbsp;&nbsp;&nbsp;&nbspopen&nbsp;file.go:&nbsp;no&nbsp;such&nbsp;file&nbsp;or&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2213349">//</span><br>
<span class="lineno"></span><span class="comment" id="2213352">//&nbsp;The&nbsp;file&#39;s&nbsp;data&nbsp;can&nbsp;then&nbsp;be&nbsp;read&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.&nbsp;Read&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2213420">//&nbsp;Write&nbsp;take&nbsp;their&nbsp;byte&nbsp;counts&nbsp;from&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;argument&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2213491">//</span><br>
<span class="lineno">30</span><span class="comment" id="2213494">//&nbsp;&nbsp;&nbsp;&nbspdata&nbsp;:=&nbsp;make([]byte,&nbsp;100)</span><br>
<span class="lineno"></span><span class="comment" id="2213523">//&nbsp;&nbsp;&nbsp;&nbspcount,&nbsp;err&nbsp;:=&nbsp;file.Read(data)</span><br>
<span class="lineno"></span><span class="comment" id="2213556">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="2213575">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplog.Fatal(err)</span><br>
<span class="lineno"></span><span class="comment" id="2213594">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno">35</span><span class="comment" id="2213599">//&nbsp;&nbsp;&nbsp;&nbspfmt.Printf(&#34;read&nbsp;%d&nbsp;bytes:&nbsp;%q\n&#34;,&nbsp;count,&nbsp;data[:count])</span><br>
<span class="lineno"></span><span class="comment" id="2213657">//</span><br>
<span class="lineno"></span><span class="keyword" id="2213660">package</span>&nbsp;<span class="ident" id="2213668">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2213672">import</span>&nbsp;<span class="op" id="2213679">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2213682">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2213688">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2213698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2213701">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;as&nbsp;presented&nbsp;to&nbsp;Open.</span><br>
<span class="lineno">45</span><span class="keyword" id="2213760">func</span>&nbsp;<span class="op" id="2213765">(</span><span class="ident" id="2213766">f</span>&nbsp;<span class="op" id="2213768">*</span><span class="ident" id="2213769">File</span><span class="op" id="2213773">)</span>&nbsp;<span class="ident" id="2213775">Name</span><span class="op" id="2213779">(</span><span class="op" id="2213780">)</span>&nbsp;<span class="builtintype" id="2213782">string</span>&nbsp;<span class="op" id="2213789">{</span>&nbsp;<span class="keyword" id="2213791">return</span>&nbsp;<span class="ident" id="2213798">f</span><span class="op" id="2213799">.</span><span class="ident" id="2213800">name</span>&nbsp;<span class="op" id="2213805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2213808">//&nbsp;Stdin,&nbsp;Stdout,&nbsp;and&nbsp;Stderr&nbsp;are&nbsp;open&nbsp;Files&nbsp;pointing&nbsp;to&nbsp;the&nbsp;standard&nbsp;input,</span><br>
<span class="lineno"></span><span class="comment" id="2213884">//&nbsp;standard&nbsp;output,&nbsp;and&nbsp;standard&nbsp;error&nbsp;file&nbsp;descriptors.</span><br>
<span class="lineno"></span><span class="keyword" id="2213941">var</span>&nbsp;<span class="op" id="2213945">(</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2213948">Stdin</span>&nbsp;&nbsp;<span class="op" id="2213955">=</span>&nbsp;<span class="ident" id="2213957">NewFile</span><span class="op" id="2213964">(</span><span class="builtintype" id="2213965">uintptr</span><span class="op" id="2213972">(</span><span class="ident" id="2213973">syscall</span><span class="op" id="2213980">.</span><span class="ident" id="2213981">Stdin</span><span class="op" id="2213986">)</span><span class="op" id="2213987">,</span>&nbsp;<span class="string" id="2213989">&#34;/dev/stdin&#34;</span><span class="op" id="2214001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214004">Stdout</span>&nbsp;<span class="op" id="2214011">=</span>&nbsp;<span class="ident" id="2214013">NewFile</span><span class="op" id="2214020">(</span><span class="builtintype" id="2214021">uintptr</span><span class="op" id="2214028">(</span><span class="ident" id="2214029">syscall</span><span class="op" id="2214036">.</span><span class="ident" id="2214037">Stdout</span><span class="op" id="2214043">)</span><span class="op" id="2214044">,</span>&nbsp;<span class="string" id="2214046">&#34;/dev/stdout&#34;</span><span class="op" id="2214059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214062">Stderr</span>&nbsp;<span class="op" id="2214069">=</span>&nbsp;<span class="ident" id="2214071">NewFile</span><span class="op" id="2214078">(</span><span class="builtintype" id="2214079">uintptr</span><span class="op" id="2214086">(</span><span class="ident" id="2214087">syscall</span><span class="op" id="2214094">.</span><span class="ident" id="2214095">Stderr</span><span class="op" id="2214101">)</span><span class="op" id="2214102">,</span>&nbsp;<span class="string" id="2214104">&#34;/dev/stderr&#34;</span><span class="op" id="2214117">)</span><br>
<span class="lineno"></span><span class="op" id="2214119">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="2214122">//&nbsp;Flags&nbsp;to&nbsp;Open&nbsp;wrapping&nbsp;those&nbsp;of&nbsp;the&nbsp;underlying&nbsp;system.&nbsp;Not&nbsp;all&nbsp;flags</span><br>
<span class="lineno"></span><span class="comment" id="2214194">//&nbsp;may&nbsp;be&nbsp;implemented&nbsp;on&nbsp;a&nbsp;given&nbsp;system.</span><br>
<span class="lineno"></span><span class="keyword" id="2214235">const</span>&nbsp;<span class="op" id="2214241">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214244">O_RDONLY</span>&nbsp;<span class="builtintype" id="2214253">int</span>&nbsp;<span class="op" id="2214257">=</span>&nbsp;<span class="ident" id="2214259">syscall</span><span class="op" id="2214266">.</span><span class="ident" id="2214267">O_RDONLY</span>&nbsp;<span class="comment" id="2214276">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214305">O_WRONLY</span>&nbsp;<span class="builtintype" id="2214314">int</span>&nbsp;<span class="op" id="2214318">=</span>&nbsp;<span class="ident" id="2214320">syscall</span><span class="op" id="2214327">.</span><span class="ident" id="2214328">O_WRONLY</span>&nbsp;<span class="comment" id="2214337">//&nbsp;open&nbsp;the&nbsp;file&nbsp;write-only.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214367">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2214376">int</span>&nbsp;<span class="op" id="2214380">=</span>&nbsp;<span class="ident" id="2214382">syscall</span><span class="op" id="2214389">.</span><span class="ident" id="2214390">O_RDWR</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2214399">//&nbsp;open&nbsp;the&nbsp;file&nbsp;read-write.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214429">O_APPEND</span>&nbsp;<span class="builtintype" id="2214438">int</span>&nbsp;<span class="op" id="2214442">=</span>&nbsp;<span class="ident" id="2214444">syscall</span><span class="op" id="2214451">.</span><span class="ident" id="2214452">O_APPEND</span>&nbsp;<span class="comment" id="2214461">//&nbsp;append&nbsp;data&nbsp;to&nbsp;the&nbsp;file&nbsp;when&nbsp;writing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214503">O_CREATE</span>&nbsp;<span class="builtintype" id="2214512">int</span>&nbsp;<span class="op" id="2214516">=</span>&nbsp;<span class="ident" id="2214518">syscall</span><span class="op" id="2214525">.</span><span class="ident" id="2214526">O_CREAT</span>&nbsp;&nbsp;<span class="comment" id="2214535">//&nbsp;create&nbsp;a&nbsp;new&nbsp;file&nbsp;if&nbsp;none&nbsp;exists.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214573">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2214582">int</span>&nbsp;<span class="op" id="2214586">=</span>&nbsp;<span class="ident" id="2214588">syscall</span><span class="op" id="2214595">.</span><span class="ident" id="2214596">O_EXCL</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2214605">//&nbsp;used&nbsp;with&nbsp;O_CREATE,&nbsp;file&nbsp;must&nbsp;not&nbsp;exist</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214649">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2214658">int</span>&nbsp;<span class="op" id="2214662">=</span>&nbsp;<span class="ident" id="2214664">syscall</span><span class="op" id="2214671">.</span><span class="ident" id="2214672">O_SYNC</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2214681">//&nbsp;open&nbsp;for&nbsp;synchronous&nbsp;I/O.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214711">O_TRUNC</span>&nbsp;&nbsp;<span class="builtintype" id="2214720">int</span>&nbsp;<span class="op" id="2214724">=</span>&nbsp;<span class="ident" id="2214726">syscall</span><span class="op" id="2214733">.</span><span class="ident" id="2214734">O_TRUNC</span>&nbsp;&nbsp;<span class="comment" id="2214743">//&nbsp;if&nbsp;possible,&nbsp;truncate&nbsp;file&nbsp;when&nbsp;opened.</span><br>
<span class="lineno"></span><span class="op" id="2214786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2214789">//&nbsp;Seek&nbsp;whence&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2214812">const</span>&nbsp;<span class="op" id="2214818">(</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214821">SEEK_SET</span>&nbsp;<span class="builtintype" id="2214830">int</span>&nbsp;<span class="op" id="2214834">=</span>&nbsp;<span class="num" id="2214836">0</span>&nbsp;<span class="comment" id="2214838">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214882">SEEK_CUR</span>&nbsp;<span class="builtintype" id="2214891">int</span>&nbsp;<span class="op" id="2214895">=</span>&nbsp;<span class="num" id="2214897">1</span>&nbsp;<span class="comment" id="2214899">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2214939">SEEK_END</span>&nbsp;<span class="builtintype" id="2214948">int</span>&nbsp;<span class="op" id="2214952">=</span>&nbsp;<span class="num" id="2214954">2</span>&nbsp;<span class="comment" id="2214956">//&nbsp;seek&nbsp;relative&nbsp;to&nbsp;the&nbsp;end</span><br>
<span class="lineno"></span><span class="op" id="2214984">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2214987">//&nbsp;LinkError&nbsp;records&nbsp;an&nbsp;error&nbsp;during&nbsp;a&nbsp;link&nbsp;or&nbsp;symlink&nbsp;or&nbsp;rename</span><br>
<span class="lineno"></span><span class="comment" id="2215052">//&nbsp;system&nbsp;call&nbsp;and&nbsp;the&nbsp;paths&nbsp;that&nbsp;caused&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="2215097">type</span>&nbsp;<span class="ident" id="2215102">LinkError</span>&nbsp;<span class="keyword" id="2215112">struct</span>&nbsp;<span class="op" id="2215119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215122">Op</span>&nbsp;&nbsp;<span class="builtintype" id="2215126">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215134">Old</span>&nbsp;<span class="builtintype" id="2215138">string</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215146">New</span>&nbsp;<span class="builtintype" id="2215150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215158">Err</span>&nbsp;<span class="builtintype" id="2215162">error</span><br>
<span class="lineno"></span><span class="op" id="2215168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2215171">func</span>&nbsp;<span class="op" id="2215176">(</span><span class="ident" id="2215177">e</span>&nbsp;<span class="op" id="2215179">*</span><span class="ident" id="2215180">LinkError</span><span class="op" id="2215189">)</span>&nbsp;<span class="ident" id="2215191">Error</span><span class="op" id="2215196">(</span><span class="op" id="2215197">)</span>&nbsp;<span class="builtintype" id="2215199">string</span>&nbsp;<span class="op" id="2215206">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215209">return</span>&nbsp;<span class="ident" id="2215216">e</span><span class="op" id="2215217">.</span><span class="ident" id="2215218">Op</span>&nbsp;<span class="op" id="2215221">+</span>&nbsp;<span class="string" id="2215223">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2215227">+</span>&nbsp;<span class="ident" id="2215229">e</span><span class="op" id="2215230">.</span><span class="ident" id="2215231">Old</span>&nbsp;<span class="op" id="2215235">+</span>&nbsp;<span class="string" id="2215237">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="2215241">+</span>&nbsp;<span class="ident" id="2215243">e</span><span class="op" id="2215244">.</span><span class="ident" id="2215245">New</span>&nbsp;<span class="op" id="2215249">+</span>&nbsp;<span class="string" id="2215251">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2215256">+</span>&nbsp;<span class="ident" id="2215258">e</span><span class="op" id="2215259">.</span><span class="ident" id="2215260">Err</span><span class="op" id="2215263">.</span><span class="ident" id="2215264">Error</span><span class="op" id="2215269">(</span><span class="op" id="2215270">)</span><br>
<span class="lineno"></span><span class="op" id="2215272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2215275">//&nbsp;Read&nbsp;reads&nbsp;up&nbsp;to&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2215323">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span><span class="comment" id="2215384">//&nbsp;EOF&nbsp;is&nbsp;signaled&nbsp;by&nbsp;a&nbsp;zero&nbsp;count&nbsp;with&nbsp;err&nbsp;set&nbsp;to&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2215443">func</span>&nbsp;<span class="op" id="2215448">(</span><span class="ident" id="2215449">f</span>&nbsp;<span class="op" id="2215451">*</span><span class="ident" id="2215452">File</span><span class="op" id="2215456">)</span>&nbsp;<span class="ident" id="2215458">Read</span><span class="op" id="2215462">(</span><span class="ident" id="2215463">b</span>&nbsp;<span class="op" id="2215465">[</span><span class="op" id="2215466">]</span><span class="builtintype" id="2215467">byte</span><span class="op" id="2215471">)</span>&nbsp;<span class="op" id="2215473">(</span><span class="ident" id="2215474">n</span>&nbsp;<span class="builtintype" id="2215476">int</span><span class="op" id="2215479">,</span>&nbsp;<span class="ident" id="2215481">err</span>&nbsp;<span class="builtintype" id="2215485">error</span><span class="op" id="2215490">)</span>&nbsp;<span class="op" id="2215492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215495">if</span>&nbsp;<span class="ident" id="2215498">f</span>&nbsp;<span class="op" id="2215500">==</span>&nbsp;<span class="ident" id="2215503">nil</span>&nbsp;<span class="op" id="2215507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215511">return</span>&nbsp;<span class="num" id="2215518">0</span><span class="op" id="2215519">,</span>&nbsp;<span class="ident" id="2215521">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2215533">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215536">n</span><span class="op" id="2215537">,</span>&nbsp;<span class="ident" id="2215539">e</span>&nbsp;<span class="op" id="2215541">:=</span>&nbsp;<span class="ident" id="2215544">f</span><span class="op" id="2215545">.</span><span class="ident" id="2215546">read</span><span class="op" id="2215550">(</span><span class="ident" id="2215551">b</span><span class="op" id="2215552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215555">if</span>&nbsp;<span class="ident" id="2215558">n</span>&nbsp;<span class="op" id="2215560">&lt;</span>&nbsp;<span class="num" id="2215562">0</span>&nbsp;<span class="op" id="2215564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215568">n</span>&nbsp;<span class="op" id="2215570">=</span>&nbsp;<span class="num" id="2215572">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2215575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215578">if</span>&nbsp;<span class="ident" id="2215581">n</span>&nbsp;<span class="op" id="2215583">==</span>&nbsp;<span class="num" id="2215586">0</span>&nbsp;<span class="op" id="2215588">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2215591">len</span><span class="op" id="2215594">(</span><span class="ident" id="2215595">b</span><span class="op" id="2215596">)</span>&nbsp;<span class="op" id="2215598">&gt;</span>&nbsp;<span class="num" id="2215600">0</span>&nbsp;<span class="op" id="2215602">&amp;&amp;</span>&nbsp;<span class="ident" id="2215605">e</span>&nbsp;<span class="op" id="2215607">==</span>&nbsp;<span class="ident" id="2215610">nil</span>&nbsp;<span class="op" id="2215614">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215618">return</span>&nbsp;<span class="num" id="2215625">0</span><span class="op" id="2215626">,</span>&nbsp;<span class="ident" id="2215628">io</span><span class="op" id="2215630">.</span><span class="ident" id="2215631">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2215636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215639">if</span>&nbsp;<span class="ident" id="2215642">e</span>&nbsp;<span class="op" id="2215644">!=</span>&nbsp;<span class="ident" id="2215647">nil</span>&nbsp;<span class="op" id="2215651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2215655">err</span>&nbsp;<span class="op" id="2215659">=</span>&nbsp;<span class="op" id="2215661">&amp;</span><span class="ident" id="2215662">PathError</span><span class="op" id="2215671">{</span><span class="string" id="2215672">&#34;read&#34;</span><span class="op" id="2215678">,</span>&nbsp;<span class="ident" id="2215680">f</span><span class="op" id="2215681">.</span><span class="ident" id="2215682">name</span><span class="op" id="2215686">,</span>&nbsp;<span class="ident" id="2215688">e</span><span class="op" id="2215689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2215692">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2215695">return</span>&nbsp;<span class="ident" id="2215702">n</span><span class="op" id="2215703">,</span>&nbsp;<span class="ident" id="2215705">err</span><br>
<span class="lineno"></span><span class="op" id="2215709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2215712">//&nbsp;ReadAt&nbsp;reads&nbsp;len(b)&nbsp;bytes&nbsp;from&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2215784">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;read&nbsp;and&nbsp;the&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">110</span><span class="comment" id="2215846">//&nbsp;ReadAt&nbsp;always&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;&lt;&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="comment" id="2215904">//&nbsp;At&nbsp;end&nbsp;of&nbsp;file,&nbsp;that&nbsp;error&nbsp;is&nbsp;io.EOF.</span><br>
<span class="lineno"></span><span class="keyword" id="2215945">func</span>&nbsp;<span class="op" id="2215950">(</span><span class="ident" id="2215951">f</span>&nbsp;<span class="op" id="2215953">*</span><span class="ident" id="2215954">File</span><span class="op" id="2215958">)</span>&nbsp;<span class="ident" id="2215960">ReadAt</span><span class="op" id="2215966">(</span><span class="ident" id="2215967">b</span>&nbsp;<span class="op" id="2215969">[</span><span class="op" id="2215970">]</span><span class="builtintype" id="2215971">byte</span><span class="op" id="2215975">,</span>&nbsp;<span class="ident" id="2215977">off</span>&nbsp;<span class="ident" id="2215981">int64</span><span class="op" id="2215986">)</span>&nbsp;<span class="op" id="2215988">(</span><span class="ident" id="2215989">n</span>&nbsp;<span class="builtintype" id="2215991">int</span><span class="op" id="2215994">,</span>&nbsp;<span class="ident" id="2215996">err</span>&nbsp;<span class="builtintype" id="2216000">error</span><span class="op" id="2216005">)</span>&nbsp;<span class="op" id="2216007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216010">if</span>&nbsp;<span class="ident" id="2216013">f</span>&nbsp;<span class="op" id="2216015">==</span>&nbsp;<span class="ident" id="2216018">nil</span>&nbsp;<span class="op" id="2216022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216026">return</span>&nbsp;<span class="num" id="2216033">0</span><span class="op" id="2216034">,</span>&nbsp;<span class="ident" id="2216036">ErrInvalid</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216051">for</span>&nbsp;<span class="builtinfunc" id="2216055">len</span><span class="op" id="2216058">(</span><span class="ident" id="2216059">b</span><span class="op" id="2216060">)</span>&nbsp;<span class="op" id="2216062">&gt;</span>&nbsp;<span class="num" id="2216064">0</span>&nbsp;<span class="op" id="2216066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216070">m</span><span class="op" id="2216071">,</span>&nbsp;<span class="ident" id="2216073">e</span>&nbsp;<span class="op" id="2216075">:=</span>&nbsp;<span class="ident" id="2216078">f</span><span class="op" id="2216079">.</span><span class="ident" id="2216080">pread</span><span class="op" id="2216085">(</span><span class="ident" id="2216086">b</span><span class="op" id="2216087">,</span>&nbsp;<span class="ident" id="2216089">off</span><span class="op" id="2216092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216096">if</span>&nbsp;<span class="ident" id="2216099">m</span>&nbsp;<span class="op" id="2216101">==</span>&nbsp;<span class="num" id="2216104">0</span>&nbsp;<span class="op" id="2216106">&amp;&amp;</span>&nbsp;<span class="ident" id="2216109">e</span>&nbsp;<span class="op" id="2216111">==</span>&nbsp;<span class="ident" id="2216114">nil</span>&nbsp;<span class="op" id="2216118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216123">return</span>&nbsp;<span class="ident" id="2216130">n</span><span class="op" id="2216131">,</span>&nbsp;<span class="ident" id="2216133">io</span><span class="op" id="2216135">.</span><span class="ident" id="2216136">EOF</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216146">if</span>&nbsp;<span class="ident" id="2216149">e</span>&nbsp;<span class="op" id="2216151">!=</span>&nbsp;<span class="ident" id="2216154">nil</span>&nbsp;<span class="op" id="2216158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216163">err</span>&nbsp;<span class="op" id="2216167">=</span>&nbsp;<span class="op" id="2216169">&amp;</span><span class="ident" id="2216170">PathError</span><span class="op" id="2216179">{</span><span class="string" id="2216180">&#34;read&#34;</span><span class="op" id="2216186">,</span>&nbsp;<span class="ident" id="2216188">f</span><span class="op" id="2216189">.</span><span class="ident" id="2216190">name</span><span class="op" id="2216194">,</span>&nbsp;<span class="ident" id="2216196">e</span><span class="op" id="2216197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216202">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216210">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216214">n</span>&nbsp;<span class="op" id="2216216">+=</span>&nbsp;<span class="ident" id="2216219">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216223">b</span>&nbsp;<span class="op" id="2216225">=</span>&nbsp;<span class="ident" id="2216227">b</span><span class="op" id="2216228">[</span><span class="ident" id="2216229">m</span><span class="op" id="2216230">:</span><span class="op" id="2216231">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216235">off</span>&nbsp;<span class="op" id="2216239">+=</span>&nbsp;<span class="ident" id="2216242">int64</span><span class="op" id="2216247">(</span><span class="ident" id="2216248">m</span><span class="op" id="2216249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216255">return</span><br>
<span class="lineno">130</span><span class="op" id="2216262">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2216265">//&nbsp;Write&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="2216307">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2216371">//&nbsp;Write&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno">135</span><span class="keyword" id="2216422">func</span>&nbsp;<span class="op" id="2216427">(</span><span class="ident" id="2216428">f</span>&nbsp;<span class="op" id="2216430">*</span><span class="ident" id="2216431">File</span><span class="op" id="2216435">)</span>&nbsp;<span class="ident" id="2216437">Write</span><span class="op" id="2216442">(</span><span class="ident" id="2216443">b</span>&nbsp;<span class="op" id="2216445">[</span><span class="op" id="2216446">]</span><span class="builtintype" id="2216447">byte</span><span class="op" id="2216451">)</span>&nbsp;<span class="op" id="2216453">(</span><span class="ident" id="2216454">n</span>&nbsp;<span class="builtintype" id="2216456">int</span><span class="op" id="2216459">,</span>&nbsp;<span class="ident" id="2216461">err</span>&nbsp;<span class="builtintype" id="2216465">error</span><span class="op" id="2216470">)</span>&nbsp;<span class="op" id="2216472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216475">if</span>&nbsp;<span class="ident" id="2216478">f</span>&nbsp;<span class="op" id="2216480">==</span>&nbsp;<span class="ident" id="2216483">nil</span>&nbsp;<span class="op" id="2216487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216491">return</span>&nbsp;<span class="num" id="2216498">0</span><span class="op" id="2216499">,</span>&nbsp;<span class="ident" id="2216501">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216516">n</span><span class="op" id="2216517">,</span>&nbsp;<span class="ident" id="2216519">e</span>&nbsp;<span class="op" id="2216521">:=</span>&nbsp;<span class="ident" id="2216524">f</span><span class="op" id="2216525">.</span><span class="ident" id="2216526">write</span><span class="op" id="2216531">(</span><span class="ident" id="2216532">b</span><span class="op" id="2216533">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216536">if</span>&nbsp;<span class="ident" id="2216539">n</span>&nbsp;<span class="op" id="2216541">&lt;</span>&nbsp;<span class="num" id="2216543">0</span>&nbsp;<span class="op" id="2216545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216549">n</span>&nbsp;<span class="op" id="2216551">=</span>&nbsp;<span class="num" id="2216553">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216559">if</span>&nbsp;<span class="ident" id="2216562">n</span>&nbsp;<span class="op" id="2216564">!=</span>&nbsp;<span class="builtinfunc" id="2216567">len</span><span class="op" id="2216570">(</span><span class="ident" id="2216571">b</span><span class="op" id="2216572">)</span>&nbsp;<span class="op" id="2216574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216578">err</span>&nbsp;<span class="op" id="2216582">=</span>&nbsp;<span class="ident" id="2216584">io</span><span class="op" id="2216586">.</span><span class="ident" id="2216587">ErrShortWrite</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216606">epipecheck</span><span class="op" id="2216616">(</span><span class="ident" id="2216617">f</span><span class="op" id="2216618">,</span>&nbsp;<span class="ident" id="2216620">e</span><span class="op" id="2216621">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216625">if</span>&nbsp;<span class="ident" id="2216628">e</span>&nbsp;<span class="op" id="2216630">!=</span>&nbsp;<span class="ident" id="2216633">nil</span>&nbsp;<span class="op" id="2216637">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2216641">err</span>&nbsp;<span class="op" id="2216645">=</span>&nbsp;<span class="op" id="2216647">&amp;</span><span class="ident" id="2216648">PathError</span><span class="op" id="2216657">{</span><span class="string" id="2216658">&#34;write&#34;</span><span class="op" id="2216665">,</span>&nbsp;<span class="ident" id="2216667">f</span><span class="op" id="2216668">.</span><span class="ident" id="2216669">name</span><span class="op" id="2216673">,</span>&nbsp;<span class="ident" id="2216675">e</span><span class="op" id="2216676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216682">return</span>&nbsp;<span class="ident" id="2216689">n</span><span class="op" id="2216690">,</span>&nbsp;<span class="ident" id="2216692">err</span><br>
<span class="lineno"></span><span class="op" id="2216696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="2216699">//&nbsp;WriteAt&nbsp;writes&nbsp;len(b)&nbsp;bytes&nbsp;to&nbsp;the&nbsp;File&nbsp;starting&nbsp;at&nbsp;byte&nbsp;offset&nbsp;off.</span><br>
<span class="lineno"></span><span class="comment" id="2216771">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="comment" id="2216835">//&nbsp;WriteAt&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;when&nbsp;n&nbsp;!=&nbsp;len(b).</span><br>
<span class="lineno"></span><span class="keyword" id="2216888">func</span>&nbsp;<span class="op" id="2216893">(</span><span class="ident" id="2216894">f</span>&nbsp;<span class="op" id="2216896">*</span><span class="ident" id="2216897">File</span><span class="op" id="2216901">)</span>&nbsp;<span class="ident" id="2216903">WriteAt</span><span class="op" id="2216910">(</span><span class="ident" id="2216911">b</span>&nbsp;<span class="op" id="2216913">[</span><span class="op" id="2216914">]</span><span class="builtintype" id="2216915">byte</span><span class="op" id="2216919">,</span>&nbsp;<span class="ident" id="2216921">off</span>&nbsp;<span class="ident" id="2216925">int64</span><span class="op" id="2216930">)</span>&nbsp;<span class="op" id="2216932">(</span><span class="ident" id="2216933">n</span>&nbsp;<span class="builtintype" id="2216935">int</span><span class="op" id="2216938">,</span>&nbsp;<span class="ident" id="2216940">err</span>&nbsp;<span class="builtintype" id="2216944">error</span><span class="op" id="2216949">)</span>&nbsp;<span class="op" id="2216951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216954">if</span>&nbsp;<span class="ident" id="2216957">f</span>&nbsp;<span class="op" id="2216959">==</span>&nbsp;<span class="ident" id="2216962">nil</span>&nbsp;<span class="op" id="2216966">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216970">return</span>&nbsp;<span class="num" id="2216977">0</span><span class="op" id="2216978">,</span>&nbsp;<span class="ident" id="2216980">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2216992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2216995">for</span>&nbsp;<span class="builtinfunc" id="2216999">len</span><span class="op" id="2217002">(</span><span class="ident" id="2217003">b</span><span class="op" id="2217004">)</span>&nbsp;<span class="op" id="2217006">&gt;</span>&nbsp;<span class="num" id="2217008">0</span>&nbsp;<span class="op" id="2217010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217014">m</span><span class="op" id="2217015">,</span>&nbsp;<span class="ident" id="2217017">e</span>&nbsp;<span class="op" id="2217019">:=</span>&nbsp;<span class="ident" id="2217022">f</span><span class="op" id="2217023">.</span><span class="ident" id="2217024">pwrite</span><span class="op" id="2217030">(</span><span class="ident" id="2217031">b</span><span class="op" id="2217032">,</span>&nbsp;<span class="ident" id="2217034">off</span><span class="op" id="2217037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217041">if</span>&nbsp;<span class="ident" id="2217044">e</span>&nbsp;<span class="op" id="2217046">!=</span>&nbsp;<span class="ident" id="2217049">nil</span>&nbsp;<span class="op" id="2217053">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217058">err</span>&nbsp;<span class="op" id="2217062">=</span>&nbsp;<span class="op" id="2217064">&amp;</span><span class="ident" id="2217065">PathError</span><span class="op" id="2217074">{</span><span class="string" id="2217075">&#34;write&#34;</span><span class="op" id="2217082">,</span>&nbsp;<span class="ident" id="2217084">f</span><span class="op" id="2217085">.</span><span class="ident" id="2217086">name</span><span class="op" id="2217090">,</span>&nbsp;<span class="ident" id="2217092">e</span><span class="op" id="2217093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217098">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217110">n</span>&nbsp;<span class="op" id="2217112">+=</span>&nbsp;<span class="ident" id="2217115">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217119">b</span>&nbsp;<span class="op" id="2217121">=</span>&nbsp;<span class="ident" id="2217123">b</span><span class="op" id="2217124">[</span><span class="ident" id="2217125">m</span><span class="op" id="2217126">:</span><span class="op" id="2217127">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217131">off</span>&nbsp;<span class="op" id="2217135">+=</span>&nbsp;<span class="ident" id="2217138">int64</span><span class="op" id="2217143">(</span><span class="ident" id="2217144">m</span><span class="op" id="2217145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217151">return</span><br>
<span class="lineno"></span><span class="op" id="2217158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="2217161">//&nbsp;Seek&nbsp;sets&nbsp;the&nbsp;offset&nbsp;for&nbsp;the&nbsp;next&nbsp;Read&nbsp;or&nbsp;Write&nbsp;on&nbsp;file&nbsp;to&nbsp;offset,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="2217243">//&nbsp;according&nbsp;to&nbsp;whence:&nbsp;0&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;origin&nbsp;of&nbsp;the&nbsp;file,&nbsp;1&nbsp;means</span><br>
<span class="lineno"></span><span class="comment" id="2217319">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;offset,&nbsp;and&nbsp;2&nbsp;means&nbsp;relative&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span><span class="comment" id="2217387">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;new&nbsp;offset&nbsp;and&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2217438">func</span>&nbsp;<span class="op" id="2217443">(</span><span class="ident" id="2217444">f</span>&nbsp;<span class="op" id="2217446">*</span><span class="ident" id="2217447">File</span><span class="op" id="2217451">)</span>&nbsp;<span class="ident" id="2217453">Seek</span><span class="op" id="2217457">(</span><span class="ident" id="2217458">offset</span>&nbsp;<span class="ident" id="2217465">int64</span><span class="op" id="2217470">,</span>&nbsp;<span class="ident" id="2217472">whence</span>&nbsp;<span class="builtintype" id="2217479">int</span><span class="op" id="2217482">)</span>&nbsp;<span class="op" id="2217484">(</span><span class="ident" id="2217485">ret</span>&nbsp;<span class="ident" id="2217489">int64</span><span class="op" id="2217494">,</span>&nbsp;<span class="ident" id="2217496">err</span>&nbsp;<span class="builtintype" id="2217500">error</span><span class="op" id="2217505">)</span>&nbsp;<span class="op" id="2217507">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217510">if</span>&nbsp;<span class="ident" id="2217513">f</span>&nbsp;<span class="op" id="2217515">==</span>&nbsp;<span class="ident" id="2217518">nil</span>&nbsp;<span class="op" id="2217522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217526">return</span>&nbsp;<span class="num" id="2217533">0</span><span class="op" id="2217534">,</span>&nbsp;<span class="ident" id="2217536">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217551">r</span><span class="op" id="2217552">,</span>&nbsp;<span class="ident" id="2217554">e</span>&nbsp;<span class="op" id="2217556">:=</span>&nbsp;<span class="ident" id="2217559">f</span><span class="op" id="2217560">.</span><span class="ident" id="2217561">seek</span><span class="op" id="2217565">(</span><span class="ident" id="2217566">offset</span><span class="op" id="2217572">,</span>&nbsp;<span class="ident" id="2217574">whence</span><span class="op" id="2217580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217583">if</span>&nbsp;<span class="ident" id="2217586">e</span>&nbsp;<span class="op" id="2217588">==</span>&nbsp;<span class="ident" id="2217591">nil</span>&nbsp;<span class="op" id="2217595">&amp;&amp;</span>&nbsp;<span class="ident" id="2217598">f</span><span class="op" id="2217599">.</span><span class="ident" id="2217600">dirinfo</span>&nbsp;<span class="op" id="2217608">!=</span>&nbsp;<span class="ident" id="2217611">nil</span>&nbsp;<span class="op" id="2217615">&amp;&amp;</span>&nbsp;<span class="ident" id="2217618">r</span>&nbsp;<span class="op" id="2217620">!=</span>&nbsp;<span class="num" id="2217623">0</span>&nbsp;<span class="op" id="2217625">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2217629">e</span>&nbsp;<span class="op" id="2217631">=</span>&nbsp;<span class="ident" id="2217633">syscall</span><span class="op" id="2217640">.</span><span class="ident" id="2217641">EISDIR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217652">if</span>&nbsp;<span class="ident" id="2217655">e</span>&nbsp;<span class="op" id="2217657">!=</span>&nbsp;<span class="ident" id="2217660">nil</span>&nbsp;<span class="op" id="2217664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217668">return</span>&nbsp;<span class="num" id="2217675">0</span><span class="op" id="2217676">,</span>&nbsp;<span class="op" id="2217678">&amp;</span><span class="ident" id="2217679">PathError</span><span class="op" id="2217688">{</span><span class="string" id="2217689">&#34;seek&#34;</span><span class="op" id="2217695">,</span>&nbsp;<span class="ident" id="2217697">f</span><span class="op" id="2217698">.</span><span class="ident" id="2217699">name</span><span class="op" id="2217703">,</span>&nbsp;<span class="ident" id="2217705">e</span><span class="op" id="2217706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217709">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217712">return</span>&nbsp;<span class="ident" id="2217719">r</span><span class="op" id="2217720">,</span>&nbsp;<span class="ident" id="2217722">nil</span><br>
<span class="lineno"></span><span class="op" id="2217726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2217729">//&nbsp;WriteString&nbsp;is&nbsp;like&nbsp;Write,&nbsp;but&nbsp;writes&nbsp;the&nbsp;contents&nbsp;of&nbsp;string&nbsp;s&nbsp;rather&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="2217807">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno">195</span><span class="keyword" id="2217828">func</span>&nbsp;<span class="op" id="2217833">(</span><span class="ident" id="2217834">f</span>&nbsp;<span class="op" id="2217836">*</span><span class="ident" id="2217837">File</span><span class="op" id="2217841">)</span>&nbsp;<span class="ident" id="2217843">WriteString</span><span class="op" id="2217854">(</span><span class="ident" id="2217855">s</span>&nbsp;<span class="builtintype" id="2217857">string</span><span class="op" id="2217863">)</span>&nbsp;<span class="op" id="2217865">(</span><span class="ident" id="2217866">ret</span>&nbsp;<span class="builtintype" id="2217870">int</span><span class="op" id="2217873">,</span>&nbsp;<span class="ident" id="2217875">err</span>&nbsp;<span class="builtintype" id="2217879">error</span><span class="op" id="2217884">)</span>&nbsp;<span class="op" id="2217886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217889">if</span>&nbsp;<span class="ident" id="2217892">f</span>&nbsp;<span class="op" id="2217894">==</span>&nbsp;<span class="ident" id="2217897">nil</span>&nbsp;<span class="op" id="2217901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217905">return</span>&nbsp;<span class="num" id="2217912">0</span><span class="op" id="2217913">,</span>&nbsp;<span class="ident" id="2217915">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2217927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2217930">return</span>&nbsp;<span class="ident" id="2217937">f</span><span class="op" id="2217938">.</span><span class="ident" id="2217939">Write</span><span class="op" id="2217944">(</span><span class="op" id="2217945">[</span><span class="op" id="2217946">]</span><span class="builtintype" id="2217947">byte</span><span class="op" id="2217951">(</span><span class="ident" id="2217952">s</span><span class="op" id="2217953">)</span><span class="op" id="2217954">)</span><br>
<span class="lineno">200</span><span class="op" id="2217956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2217959">//&nbsp;Mkdir&nbsp;creates&nbsp;a&nbsp;new&nbsp;directory&nbsp;with&nbsp;the&nbsp;specified&nbsp;name&nbsp;and&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span><span class="comment" id="2218037">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2218093">func</span>&nbsp;<span class="ident" id="2218098">Mkdir</span><span class="op" id="2218103">(</span><span class="ident" id="2218104">name</span>&nbsp;<span class="builtintype" id="2218109">string</span><span class="op" id="2218115">,</span>&nbsp;<span class="ident" id="2218117">perm</span>&nbsp;<span class="ident" id="2218122">FileMode</span><span class="op" id="2218130">)</span>&nbsp;<span class="builtintype" id="2218132">error</span>&nbsp;<span class="op" id="2218138">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2218141">e</span>&nbsp;<span class="op" id="2218143">:=</span>&nbsp;<span class="ident" id="2218146">syscall</span><span class="op" id="2218153">.</span><span class="ident" id="2218154">Mkdir</span><span class="op" id="2218159">(</span><span class="ident" id="2218160">name</span><span class="op" id="2218164">,</span>&nbsp;<span class="ident" id="2218166">syscallMode</span><span class="op" id="2218177">(</span><span class="ident" id="2218178">perm</span><span class="op" id="2218182">)</span><span class="op" id="2218183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218186">if</span>&nbsp;<span class="ident" id="2218189">e</span>&nbsp;<span class="op" id="2218191">!=</span>&nbsp;<span class="ident" id="2218194">nil</span>&nbsp;<span class="op" id="2218198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218202">return</span>&nbsp;<span class="op" id="2218209">&amp;</span><span class="ident" id="2218210">PathError</span><span class="op" id="2218219">{</span><span class="string" id="2218220">&#34;mkdir&#34;</span><span class="op" id="2218227">,</span>&nbsp;<span class="ident" id="2218229">name</span><span class="op" id="2218233">,</span>&nbsp;<span class="ident" id="2218235">e</span><span class="op" id="2218236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2218239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218242">return</span>&nbsp;<span class="ident" id="2218249">nil</span><br>
<span class="lineno">210</span><span class="op" id="2218253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2218256">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2218327">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2218383">func</span>&nbsp;<span class="ident" id="2218388">Chdir</span><span class="op" id="2218393">(</span><span class="ident" id="2218394">dir</span>&nbsp;<span class="builtintype" id="2218398">string</span><span class="op" id="2218404">)</span>&nbsp;<span class="builtintype" id="2218406">error</span>&nbsp;<span class="op" id="2218412">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218415">if</span>&nbsp;<span class="ident" id="2218418">e</span>&nbsp;<span class="op" id="2218420">:=</span>&nbsp;<span class="ident" id="2218423">syscall</span><span class="op" id="2218430">.</span><span class="ident" id="2218431">Chdir</span><span class="op" id="2218436">(</span><span class="ident" id="2218437">dir</span><span class="op" id="2218440">)</span><span class="op" id="2218441">;</span>&nbsp;<span class="ident" id="2218443">e</span>&nbsp;<span class="op" id="2218445">!=</span>&nbsp;<span class="ident" id="2218448">nil</span>&nbsp;<span class="op" id="2218452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218456">return</span>&nbsp;<span class="op" id="2218463">&amp;</span><span class="ident" id="2218464">PathError</span><span class="op" id="2218473">{</span><span class="string" id="2218474">&#34;chdir&#34;</span><span class="op" id="2218481">,</span>&nbsp;<span class="ident" id="2218483">dir</span><span class="op" id="2218486">,</span>&nbsp;<span class="ident" id="2218488">e</span><span class="op" id="2218489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2218492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218495">return</span>&nbsp;<span class="ident" id="2218502">nil</span><br>
<span class="lineno"></span><span class="op" id="2218506">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="2218509">//&nbsp;Chdir&nbsp;changes&nbsp;the&nbsp;current&nbsp;working&nbsp;directory&nbsp;to&nbsp;the&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="2218569">//&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="2218599">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2218655">func</span>&nbsp;<span class="op" id="2218660">(</span><span class="ident" id="2218661">f</span>&nbsp;<span class="op" id="2218663">*</span><span class="ident" id="2218664">File</span><span class="op" id="2218668">)</span>&nbsp;<span class="ident" id="2218670">Chdir</span><span class="op" id="2218675">(</span><span class="op" id="2218676">)</span>&nbsp;<span class="builtintype" id="2218678">error</span>&nbsp;<span class="op" id="2218684">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218687">if</span>&nbsp;<span class="ident" id="2218690">f</span>&nbsp;<span class="op" id="2218692">==</span>&nbsp;<span class="ident" id="2218695">nil</span>&nbsp;<span class="op" id="2218699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218703">return</span>&nbsp;<span class="ident" id="2218710">ErrInvalid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2218722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218725">if</span>&nbsp;<span class="ident" id="2218728">e</span>&nbsp;<span class="op" id="2218730">:=</span>&nbsp;<span class="ident" id="2218733">syscall</span><span class="op" id="2218740">.</span><span class="ident" id="2218741">Fchdir</span><span class="op" id="2218747">(</span><span class="ident" id="2218748">f</span><span class="op" id="2218749">.</span><span class="ident" id="2218750">fd</span><span class="op" id="2218752">)</span><span class="op" id="2218753">;</span>&nbsp;<span class="ident" id="2218755">e</span>&nbsp;<span class="op" id="2218757">!=</span>&nbsp;<span class="ident" id="2218760">nil</span>&nbsp;<span class="op" id="2218764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218768">return</span>&nbsp;<span class="op" id="2218775">&amp;</span><span class="ident" id="2218776">PathError</span><span class="op" id="2218785">{</span><span class="string" id="2218786">&#34;chdir&#34;</span><span class="op" id="2218793">,</span>&nbsp;<span class="ident" id="2218795">f</span><span class="op" id="2218796">.</span><span class="ident" id="2218797">name</span><span class="op" id="2218801">,</span>&nbsp;<span class="ident" id="2218803">e</span><span class="op" id="2218804">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2218807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2218810">return</span>&nbsp;<span class="ident" id="2218817">nil</span><br>
<span class="lineno"></span><span class="op" id="2218821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2218824">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;for&nbsp;reading.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on</span><br>
<span class="lineno">235</span><span class="comment" id="2218893">//&nbsp;the&nbsp;returned&nbsp;file&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;reading;&nbsp;the&nbsp;associated&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="2218959">//&nbsp;descriptor&nbsp;has&nbsp;mode&nbsp;O_RDONLY.</span><br>
<span class="lineno"></span><span class="comment" id="2218992">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2219048">func</span>&nbsp;<span class="ident" id="2219053">Open</span><span class="op" id="2219057">(</span><span class="ident" id="2219058">name</span>&nbsp;<span class="builtintype" id="2219063">string</span><span class="op" id="2219069">)</span>&nbsp;<span class="op" id="2219071">(</span><span class="ident" id="2219072">file</span>&nbsp;<span class="op" id="2219077">*</span><span class="ident" id="2219078">File</span><span class="op" id="2219082">,</span>&nbsp;<span class="ident" id="2219084">err</span>&nbsp;<span class="builtintype" id="2219088">error</span><span class="op" id="2219093">)</span>&nbsp;<span class="op" id="2219095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2219098">return</span>&nbsp;<span class="ident" id="2219105">OpenFile</span><span class="op" id="2219113">(</span><span class="ident" id="2219114">name</span><span class="op" id="2219118">,</span>&nbsp;<span class="ident" id="2219120">O_RDONLY</span><span class="op" id="2219128">,</span>&nbsp;<span class="num" id="2219130">0</span><span class="op" id="2219131">)</span><br>
<span class="lineno">240</span><span class="op" id="2219133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2219136">//&nbsp;Create&nbsp;creates&nbsp;the&nbsp;named&nbsp;file&nbsp;mode&nbsp;0666&nbsp;(before&nbsp;umask),&nbsp;truncating</span><br>
<span class="lineno"></span><span class="comment" id="2219206">//&nbsp;it&nbsp;if&nbsp;it&nbsp;already&nbsp;exists.&nbsp;&nbsp;If&nbsp;successful,&nbsp;methods&nbsp;on&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2219274">//&nbsp;File&nbsp;can&nbsp;be&nbsp;used&nbsp;for&nbsp;I/O;&nbsp;the&nbsp;associated&nbsp;file&nbsp;descriptor&nbsp;has&nbsp;mode</span><br>
<span class="lineno">245</span><span class="comment" id="2219343">//&nbsp;O_RDWR.</span><br>
<span class="lineno"></span><span class="comment" id="2219354">//&nbsp;If&nbsp;there&nbsp;is&nbsp;an&nbsp;error,&nbsp;it&nbsp;will&nbsp;be&nbsp;of&nbsp;type&nbsp;*PathError.</span><br>
<span class="lineno"></span><span class="keyword" id="2219410">func</span>&nbsp;<span class="ident" id="2219415">Create</span><span class="op" id="2219421">(</span><span class="ident" id="2219422">name</span>&nbsp;<span class="builtintype" id="2219427">string</span><span class="op" id="2219433">)</span>&nbsp;<span class="op" id="2219435">(</span><span class="ident" id="2219436">file</span>&nbsp;<span class="op" id="2219441">*</span><span class="ident" id="2219442">File</span><span class="op" id="2219446">,</span>&nbsp;<span class="ident" id="2219448">err</span>&nbsp;<span class="builtintype" id="2219452">error</span><span class="op" id="2219457">)</span>&nbsp;<span class="op" id="2219459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2219462">return</span>&nbsp;<span class="ident" id="2219469">OpenFile</span><span class="op" id="2219477">(</span><span class="ident" id="2219478">name</span><span class="op" id="2219482">,</span>&nbsp;<span class="ident" id="2219484">O_RDWR</span><span class="op" id="2219490">|</span><span class="ident" id="2219491">O_CREATE</span><span class="op" id="2219499">|</span><span class="ident" id="2219500">O_TRUNC</span><span class="op" id="2219507">,</span>&nbsp;<span class="num" id="2219509">0666</span><span class="op" id="2219513">)</span><br>
<span class="lineno"></span><span class="op" id="2219515">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="2219518">//&nbsp;lstat&nbsp;is&nbsp;overridden&nbsp;in&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="2219551">var</span>&nbsp;<span class="ident" id="2219555">lstat</span>&nbsp;<span class="op" id="2219561">=</span>&nbsp;<span class="ident" id="2219563">Lstat</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2219570">//&nbsp;Rename&nbsp;renames&nbsp;(moves)&nbsp;a&nbsp;file.&nbsp;OS-specific&nbsp;restrictions&nbsp;might&nbsp;apply.</span><br>
<span class="lineno">255</span><span class="keyword" id="2219642">func</span>&nbsp;<span class="ident" id="2219647">Rename</span><span class="op" id="2219653">(</span><span class="ident" id="2219654">oldpath</span><span class="op" id="2219661">,</span>&nbsp;<span class="ident" id="2219663">newpath</span>&nbsp;<span class="builtintype" id="2219671">string</span><span class="op" id="2219677">)</span>&nbsp;<span class="builtintype" id="2219679">error</span>&nbsp;<span class="op" id="2219685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2219688">return</span>&nbsp;<span class="ident" id="2219695">rename</span><span class="op" id="2219701">(</span><span class="ident" id="2219702">oldpath</span><span class="op" id="2219709">,</span>&nbsp;<span class="ident" id="2219711">newpath</span><span class="op" id="2219718">)</span><br>
<span class="lineno"></span><span class="op" id="2219720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2219723">//&nbsp;Many&nbsp;functions&nbsp;in&nbsp;package&nbsp;syscall&nbsp;return&nbsp;a&nbsp;count&nbsp;of&nbsp;-1&nbsp;instead&nbsp;of&nbsp;0.</span><br>
<span class="lineno">260</span><span class="comment" id="2219795">//&nbsp;Using&nbsp;fixCount(call())&nbsp;instead&nbsp;of&nbsp;call()&nbsp;corrects&nbsp;the&nbsp;count.</span><br>
<span class="lineno"></span><span class="keyword" id="2219859">func</span>&nbsp;<span class="ident" id="2219864">fixCount</span><span class="op" id="2219872">(</span><span class="ident" id="2219873">n</span>&nbsp;<span class="builtintype" id="2219875">int</span><span class="op" id="2219878">,</span>&nbsp;<span class="ident" id="2219880">err</span>&nbsp;<span class="builtintype" id="2219884">error</span><span class="op" id="2219889">)</span>&nbsp;<span class="op" id="2219891">(</span><span class="builtintype" id="2219892">int</span><span class="op" id="2219895">,</span>&nbsp;<span class="builtintype" id="2219897">error</span><span class="op" id="2219902">)</span>&nbsp;<span class="op" id="2219904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2219907">if</span>&nbsp;<span class="ident" id="2219910">n</span>&nbsp;<span class="op" id="2219912">&lt;</span>&nbsp;<span class="num" id="2219914">0</span>&nbsp;<span class="op" id="2219916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2219920">n</span>&nbsp;<span class="op" id="2219922">=</span>&nbsp;<span class="num" id="2219924">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2219927">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2219930">return</span>&nbsp;<span class="ident" id="2219937">n</span><span class="op" id="2219938">,</span>&nbsp;<span class="ident" id="2219940">err</span><br>
<span class="lineno"></span><span class="op" id="2219944">}</span>
</div>
</body>
</html>
