<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html" class="current">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1762761">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1762816">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1762870">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1762921">package</span>&nbsp;<span class="ident" id="1762929">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1762938">import</span>&nbsp;<span class="string" id="1762945">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1762955">//&nbsp;The&nbsp;code&nbsp;in&nbsp;this&nbsp;file&nbsp;implements&nbsp;stack&nbsp;trace&nbsp;walking&nbsp;for&nbsp;all&nbsp;architectures.</span><br>
<span class="lineno">10</span><span class="comment" id="1763034">//&nbsp;The&nbsp;most&nbsp;important&nbsp;fact&nbsp;about&nbsp;a&nbsp;given&nbsp;architecture&nbsp;is&nbsp;whether&nbsp;it&nbsp;uses&nbsp;a&nbsp;link&nbsp;register.</span><br>
<span class="lineno"></span><span class="comment" id="1763124">//&nbsp;On&nbsp;systems&nbsp;with&nbsp;link&nbsp;registers,&nbsp;the&nbsp;prologue&nbsp;for&nbsp;a&nbsp;non-leaf&nbsp;function&nbsp;stores&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1763207">//&nbsp;incoming&nbsp;value&nbsp;of&nbsp;LR&nbsp;at&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;newly&nbsp;allocated&nbsp;stack&nbsp;frame.</span><br>
<span class="lineno"></span><span class="comment" id="1763281">//&nbsp;On&nbsp;systems&nbsp;without&nbsp;link&nbsp;registers,&nbsp;the&nbsp;architecture&nbsp;pushes&nbsp;a&nbsp;return&nbsp;PC&nbsp;during</span><br>
<span class="lineno"></span><span class="comment" id="1763362">//&nbsp;the&nbsp;call&nbsp;instruction,&nbsp;so&nbsp;the&nbsp;return&nbsp;PC&nbsp;ends&nbsp;up&nbsp;above&nbsp;the&nbsp;stack&nbsp;frame.</span><br>
<span class="lineno">15</span><span class="comment" id="1763435">//&nbsp;In&nbsp;this&nbsp;file,&nbsp;the&nbsp;return&nbsp;PC&nbsp;is&nbsp;always&nbsp;called&nbsp;LR,&nbsp;no&nbsp;matter&nbsp;how&nbsp;it&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="1763515">//</span><br>
<span class="lineno"></span><span class="comment" id="1763518">//&nbsp;To&nbsp;date,&nbsp;the&nbsp;opposite&nbsp;of&nbsp;a&nbsp;link&nbsp;register&nbsp;architecture&nbsp;is&nbsp;an&nbsp;x86&nbsp;architecture.</span><br>
<span class="lineno"></span><span class="comment" id="1763599">//&nbsp;This&nbsp;code&nbsp;may&nbsp;need&nbsp;to&nbsp;change&nbsp;if&nbsp;some&nbsp;other&nbsp;kind&nbsp;of&nbsp;non-link-register</span><br>
<span class="lineno"></span><span class="comment" id="1763671">//&nbsp;architecture&nbsp;comes&nbsp;along.</span><br>
<span class="lineno">20</span><span class="comment" id="1763700">//</span><br>
<span class="lineno"></span><span class="comment" id="1763703">//&nbsp;The&nbsp;other&nbsp;important&nbsp;fact&nbsp;is&nbsp;the&nbsp;size&nbsp;of&nbsp;a&nbsp;pointer:&nbsp;on&nbsp;32-bit&nbsp;systems&nbsp;the&nbsp;LR</span><br>
<span class="lineno"></span><span class="comment" id="1763782">//&nbsp;takes&nbsp;up&nbsp;only&nbsp;4&nbsp;bytes&nbsp;on&nbsp;the&nbsp;stack,&nbsp;while&nbsp;on&nbsp;64-bit&nbsp;systems&nbsp;it&nbsp;takes&nbsp;up&nbsp;8&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="comment" id="1763866">//&nbsp;Typically&nbsp;this&nbsp;is&nbsp;ptrSize.</span><br>
<span class="lineno"></span><span class="comment" id="1763896">//</span><br>
<span class="lineno">25</span><span class="comment" id="1763899">//&nbsp;As&nbsp;an&nbsp;exception,&nbsp;amd64p32&nbsp;has&nbsp;ptrSize&nbsp;==&nbsp;4&nbsp;but&nbsp;the&nbsp;CALL&nbsp;instruction&nbsp;still</span><br>
<span class="lineno"></span><span class="comment" id="1763976">//&nbsp;stores&nbsp;an&nbsp;8-byte&nbsp;return&nbsp;PC&nbsp;onto&nbsp;the&nbsp;stack.&nbsp;To&nbsp;accommodate&nbsp;this,&nbsp;we&nbsp;use&nbsp;regSize</span><br>
<span class="lineno"></span><span class="comment" id="1764058">//&nbsp;as&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;architecture-pushed&nbsp;return&nbsp;PC.</span><br>
<span class="lineno"></span><span class="comment" id="1764111">//</span><br>
<span class="lineno"></span><span class="comment" id="1764114">//&nbsp;usesLR&nbsp;is&nbsp;defined&nbsp;below.&nbsp;ptrSize&nbsp;and&nbsp;regSize&nbsp;are&nbsp;defined&nbsp;in&nbsp;stubs.go.</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="1764188">const</span>&nbsp;<span class="ident" id="1764194">usesLR</span>&nbsp;<span class="op" id="1764201">=</span>&nbsp;<span class="ident" id="1764203"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span>&nbsp;<span class="op" id="1764210">!=</span>&nbsp;<span class="string" id="1764213">&#34;amd64&#34;</span>&nbsp;<span class="op" id="1764221">&amp;&amp;</span>&nbsp;<span class="ident" id="1764224"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span>&nbsp;<span class="op" id="1764231">!=</span>&nbsp;<span class="string" id="1764234">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="1764245">&amp;&amp;</span>&nbsp;<span class="ident" id="1764248"><a href="/gostd/runtime/extern.go.html#1533781">GOARCH</a></span>&nbsp;<span class="op" id="1764255">!=</span>&nbsp;<span class="string" id="1764258">&#34;386&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1764265">var</span>&nbsp;<span class="op" id="1764269">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1764272">//&nbsp;initialized&nbsp;in&nbsp;tracebackinit</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764305">deferprocPC</span>&nbsp;<span class="builtintype" id="1764317">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764326">goexitPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1764338">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764347">jmpdeferPC</span>&nbsp;&nbsp;<span class="builtintype" id="1764359">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764368">mcallPC</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1764380">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764389">morestackPC</span>&nbsp;<span class="builtintype" id="1764401">uintptr</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764410">mstartPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1764422">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764431">newprocPC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1764443">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764452">rt0_goPC</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1764464">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764473">sigpanicPC</span>&nbsp;&nbsp;<span class="builtintype" id="1764485">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764495">externalthreadhandlerp</span>&nbsp;<span class="builtintype" id="1764518">uintptr</span>&nbsp;<span class="comment" id="1764526">//&nbsp;initialized&nbsp;elsewhere</span><br>
<span class="lineno"></span><span class="op" id="1764551">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1764554">func</span>&nbsp;<span class="ident" id="1764559">tracebackinit</span><span class="op" id="1764572">(</span><span class="op" id="1764573">)</span>&nbsp;<span class="op" id="1764575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1764578">//&nbsp;Go&nbsp;variable&nbsp;initialization&nbsp;happens&nbsp;late&nbsp;during&nbsp;runtime&nbsp;startup.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1764646">//&nbsp;Instead&nbsp;of&nbsp;initializing&nbsp;the&nbsp;variables&nbsp;above&nbsp;in&nbsp;the&nbsp;declarations,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1764715">//&nbsp;schedinit&nbsp;calls&nbsp;this&nbsp;function&nbsp;so&nbsp;that&nbsp;the&nbsp;variables&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1764775">//&nbsp;initialized&nbsp;and&nbsp;available&nbsp;earlier&nbsp;in&nbsp;the&nbsp;startup&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764838"><a href="/gostd/runtime/traceback.go.html#1764305">deferprocPC</a></span>&nbsp;<span class="op" id="1764850">=</span>&nbsp;<span class="ident" id="1764852"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1764858">(</span><span class="ident" id="1764859"><a href="/gostd/runtime/panic.go.html#1652626">deferproc</a></span><span class="op" id="1764868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764871"><a href="/gostd/runtime/traceback.go.html#1764326">goexitPC</a></span>&nbsp;<span class="op" id="1764880">=</span>&nbsp;<span class="ident" id="1764882"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1764888">(</span><span class="ident" id="1764889"><a href="/gostd/runtime/stubs.go.html#1744644">goexit</a></span><span class="op" id="1764895">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764898"><a href="/gostd/runtime/traceback.go.html#1764347">jmpdeferPC</a></span>&nbsp;<span class="op" id="1764909">=</span>&nbsp;<span class="ident" id="1764911"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1764917">(</span><span class="ident" id="1764918"><a href="/gostd/runtime/stubs.go.html#1743800">jmpdefer</a></span><span class="op" id="1764926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764929"><a href="/gostd/runtime/traceback.go.html#1764368">mcallPC</a></span>&nbsp;<span class="op" id="1764937">=</span>&nbsp;<span class="ident" id="1764939"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1764945">(</span><span class="ident" id="1764946"><a href="/gostd/runtime/stubs.go.html#1739644">mcall</a></span><span class="op" id="1764951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764954"><a href="/gostd/runtime/traceback.go.html#1764389">morestackPC</a></span>&nbsp;<span class="op" id="1764966">=</span>&nbsp;<span class="ident" id="1764968"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1764974">(</span><span class="ident" id="1764975"><a href="/gostd/runtime/stubs.go.html#1746793">morestack</a></span><span class="op" id="1764984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1764987"><a href="/gostd/runtime/traceback.go.html#1764410">mstartPC</a></span>&nbsp;<span class="op" id="1764996">=</span>&nbsp;<span class="ident" id="1764998"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1765004">(</span><span class="ident" id="1765005"><a href="/gostd/runtime/stubs.go.html#1746810">mstart</a></span><span class="op" id="1765011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765014"><a href="/gostd/runtime/traceback.go.html#1764431">newprocPC</a></span>&nbsp;<span class="op" id="1765024">=</span>&nbsp;<span class="ident" id="1765026"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1765032">(</span><span class="ident" id="1765033"><a href="/gostd/runtime/stubs.go.html#1746778">newproc</a></span><span class="op" id="1765040">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765043"><a href="/gostd/runtime/traceback.go.html#1764452">rt0_goPC</a></span>&nbsp;<span class="op" id="1765052">=</span>&nbsp;<span class="ident" id="1765054"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1765060">(</span><span class="ident" id="1765061"><a href="/gostd/runtime/stubs.go.html#1746824">rt0_go</a></span><span class="op" id="1765067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765070"><a href="/gostd/runtime/traceback.go.html#1764473">sigpanicPC</a></span>&nbsp;<span class="op" id="1765081">=</span>&nbsp;<span class="ident" id="1765083"><a href="/gostd/runtime/proc.go.html#1675458">funcPC</a></span><span class="op" id="1765089">(</span><span class="ident" id="1765090"><a href="/gostd/runtime/sigpanic_unix.go.html#1707909">sigpanic</a></span><span class="op" id="1765098">)</span><br>
<span class="lineno"></span><span class="op" id="1765100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1765103">//&nbsp;Traceback&nbsp;over&nbsp;the&nbsp;deferred&nbsp;function&nbsp;calls.</span><br>
<span class="lineno">65</span><span class="comment" id="1765150">//&nbsp;Report&nbsp;them&nbsp;like&nbsp;calls&nbsp;that&nbsp;have&nbsp;been&nbsp;invoked&nbsp;but&nbsp;not&nbsp;started&nbsp;executing&nbsp;yet.</span><br>
<span class="lineno"></span><span class="keyword" id="1765230">func</span>&nbsp;<span class="ident" id="1765235">tracebackdefers</span><span class="op" id="1765250">(</span><span class="ident" id="1765251">gp</span>&nbsp;<span class="op" id="1765254">*</span><span class="ident" id="1765255"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1765256">,</span>&nbsp;<span class="ident" id="1765258">callback</span>&nbsp;<span class="keyword" id="1765267">func</span><span class="op" id="1765271">(</span><span class="op" id="1765272">*</span><span class="ident" id="1765273"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><span class="op" id="1765281">,</span>&nbsp;<span class="ident" id="1765283"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1765289">.</span><span class="ident" id="1765290">Pointer</span><span class="op" id="1765297">)</span>&nbsp;<span class="builtintype" id="1765299">bool</span><span class="op" id="1765303">,</span>&nbsp;<span class="ident" id="1765305">v</span>&nbsp;<span class="ident" id="1765307"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1765313">.</span><span class="ident" id="1765314">Pointer</span><span class="op" id="1765321">)</span>&nbsp;<span class="op" id="1765323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765326">var</span>&nbsp;<span class="ident" id="1765330">frame</span>&nbsp;<span class="ident" id="1765336"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765346">for</span>&nbsp;<span class="ident" id="1765350">d</span>&nbsp;<span class="op" id="1765352">:=</span>&nbsp;<span class="ident" id="1765355"><a href="/gostd/runtime/traceback.go.html#1765251">gp</a></span><span class="op" id="1765357">.</span><span class="ident" id="1765358"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><span class="op" id="1765364">;</span>&nbsp;<span class="ident" id="1765366"><a href="/gostd/runtime/traceback.go.html#1765350">d</a></span>&nbsp;<span class="op" id="1765368">!=</span>&nbsp;<span class="builtintype" id="1765371">nil</span><span class="op" id="1765374">;</span>&nbsp;<span class="ident" id="1765376"><a href="/gostd/runtime/traceback.go.html#1765350">d</a></span>&nbsp;<span class="op" id="1765378">=</span>&nbsp;<span class="ident" id="1765380"><a href="/gostd/runtime/traceback.go.html#1765350">d</a></span><span class="op" id="1765381">.</span><span class="ident" id="1765382"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span>&nbsp;<span class="op" id="1765387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765391">fn</span>&nbsp;<span class="op" id="1765394">:=</span>&nbsp;<span class="ident" id="1765397"><a href="/gostd/runtime/traceback.go.html#1765350">d</a></span><span class="op" id="1765398">.</span><span class="ident" id="1765399"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790769">fn</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765404">if</span>&nbsp;<span class="ident" id="1765407"><a href="/gostd/runtime/traceback.go.html#1765391">fn</a></span>&nbsp;<span class="op" id="1765410">==</span>&nbsp;<span class="builtintype" id="1765413">nil</span>&nbsp;<span class="op" id="1765417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1765422">//&nbsp;Defer&nbsp;of&nbsp;nil&nbsp;function.&nbsp;Args&nbsp;don&#39;t&nbsp;matter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765470"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765475">.</span><span class="ident" id="1765476"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1765479">=</span>&nbsp;<span class="num" id="1765481">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765486"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765491">.</span><span class="ident" id="1765492"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span>&nbsp;<span class="op" id="1765495">=</span>&nbsp;<span class="builtintype" id="1765497">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765504"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765509">.</span><span class="ident" id="1765510"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791035">argp</a></span>&nbsp;<span class="op" id="1765515">=</span>&nbsp;<span class="num" id="1765517">0</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765522"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765527">.</span><span class="ident" id="1765528"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791049">arglen</a></span>&nbsp;<span class="op" id="1765535">=</span>&nbsp;<span class="num" id="1765537">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765542"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765547">.</span><span class="ident" id="1765548"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791065">argmap</a></span>&nbsp;<span class="op" id="1765555">=</span>&nbsp;<span class="builtintype" id="1765557">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1765563">}</span>&nbsp;<span class="keyword" id="1765565">else</span>&nbsp;<span class="op" id="1765570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765575"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765580">.</span><span class="ident" id="1765581"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1765584">=</span>&nbsp;<span class="builtintype" id="1765586">uintptr</span><span class="op" id="1765593">(</span><span class="ident" id="1765594"><a href="/gostd/runtime/traceback.go.html#1765391">fn</a></span><span class="op" id="1765596">.</span><span class="ident" id="1765597"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786342">fn</a></span><span class="op" id="1765599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765604">f</span>&nbsp;<span class="op" id="1765606">:=</span>&nbsp;<span class="ident" id="1765609"><a href="/gostd/runtime/symtab.go.html#1753026">findfunc</a></span><span class="op" id="1765617">(</span><span class="ident" id="1765618"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765623">.</span><span class="ident" id="1765624"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1765626">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765631">if</span>&nbsp;<span class="ident" id="1765634"><a href="/gostd/runtime/traceback.go.html#1765604">f</a></span>&nbsp;<span class="op" id="1765636">==</span>&nbsp;<span class="builtintype" id="1765639">nil</span>&nbsp;<span class="op" id="1765643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1765649">print</span><span class="op" id="1765654">(</span><span class="string" id="1765655">&#34;runtime:&nbsp;unknown&nbsp;pc&nbsp;in&nbsp;defer&nbsp;&#34;</span><span class="op" id="1765686">,</span>&nbsp;<span class="ident" id="1765688"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1765691">(</span><span class="ident" id="1765692"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765697">.</span><span class="ident" id="1765698"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1765700">)</span><span class="op" id="1765701">,</span>&nbsp;<span class="string" id="1765703">&#34;\n&#34;</span><span class="op" id="1765707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765713"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1765720">(</span><span class="string" id="1765721">&#34;unknown&nbsp;pc&#34;</span><span class="op" id="1765733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1765738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765743"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765748">.</span><span class="ident" id="1765749"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span>&nbsp;<span class="op" id="1765752">=</span>&nbsp;<span class="ident" id="1765754"><a href="/gostd/runtime/traceback.go.html#1765604">f</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765759"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765764">.</span><span class="ident" id="1765765"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791035">argp</a></span>&nbsp;<span class="op" id="1765770">=</span>&nbsp;<span class="builtintype" id="1765772">uintptr</span><span class="op" id="1765779">(</span><span class="ident" id="1765780"><a href="/gostd/runtime/panic.go.html#1655239">deferArgs</a></span><span class="op" id="1765789">(</span><span class="ident" id="1765790"><a href="/gostd/runtime/traceback.go.html#1765350">d</a></span><span class="op" id="1765791">)</span><span class="op" id="1765792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765797"><a href="/gostd/runtime/traceback.go.html#1778116">setArgInfo</a></span><span class="op" id="1765807">(</span><span class="op" id="1765808">&amp;</span><span class="ident" id="1765809"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765814">,</span>&nbsp;<span class="ident" id="1765816"><a href="/gostd/runtime/traceback.go.html#1765604">f</a></span><span class="op" id="1765817">,</span>&nbsp;<span class="builtintype" id="1765819">true</span><span class="op" id="1765823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1765827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1765831"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765836">.</span><span class="ident" id="1765837"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790967">continpc</a></span>&nbsp;<span class="op" id="1765846">=</span>&nbsp;<span class="ident" id="1765848"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765853">.</span><span class="ident" id="1765854"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765859">if</span>&nbsp;<span class="op" id="1765862">!</span><span class="ident" id="1765863"><a href="/gostd/runtime/traceback.go.html#1765258">callback</a></span><span class="op" id="1765871">(</span><span class="op" id="1765872">(</span><span class="op" id="1765873">*</span><span class="ident" id="1765874"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><span class="op" id="1765882">)</span><span class="op" id="1765883">(</span><span class="ident" id="1765884"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1765892">(</span><span class="ident" id="1765893"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1765899">.</span><span class="ident" id="1765900">Pointer</span><span class="op" id="1765907">(</span><span class="op" id="1765908">&amp;</span><span class="ident" id="1765909"><a href="/gostd/runtime/traceback.go.html#1765330">frame</a></span><span class="op" id="1765914">)</span><span class="op" id="1765915">)</span><span class="op" id="1765916">)</span><span class="op" id="1765917">,</span>&nbsp;<span class="ident" id="1765919"><a href="/gostd/runtime/traceback.go.html#1765305">v</a></span><span class="op" id="1765920">)</span>&nbsp;<span class="op" id="1765922">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1765927">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1765936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1765939">}</span><br>
<span class="lineno"></span><span class="op" id="1765941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="1765944">//&nbsp;Generic&nbsp;traceback.&nbsp;&nbsp;Handles&nbsp;runtime&nbsp;stack&nbsp;prints&nbsp;(pcbuf&nbsp;==&nbsp;nil),</span><br>
<span class="lineno"></span><span class="comment" id="1766012">//&nbsp;the&nbsp;runtime.Callers&nbsp;function&nbsp;(pcbuf&nbsp;!=&nbsp;nil),&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;garbage</span><br>
<span class="lineno"></span><span class="comment" id="1766083">//&nbsp;collector&nbsp;(callback&nbsp;!=&nbsp;nil).&nbsp;&nbsp;A&nbsp;little&nbsp;clunky&nbsp;to&nbsp;merge&nbsp;these,&nbsp;but&nbsp;avoids</span><br>
<span class="lineno"></span><span class="comment" id="1766159">//&nbsp;duplicating&nbsp;the&nbsp;code&nbsp;and&nbsp;all&nbsp;its&nbsp;subtlety.</span><br>
<span class="lineno"></span><span class="keyword" id="1766205">func</span>&nbsp;<span class="ident" id="1766210">gentraceback</span><span class="op" id="1766222">(</span><span class="ident" id="1766223">pc0</span>&nbsp;<span class="builtintype" id="1766227">uintptr</span><span class="op" id="1766234">,</span>&nbsp;<span class="ident" id="1766236">sp0</span>&nbsp;<span class="builtintype" id="1766240">uintptr</span><span class="op" id="1766247">,</span>&nbsp;<span class="ident" id="1766249">lr0</span>&nbsp;<span class="builtintype" id="1766253">uintptr</span><span class="op" id="1766260">,</span>&nbsp;<span class="ident" id="1766262">gp</span>&nbsp;<span class="op" id="1766265">*</span><span class="ident" id="1766266"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1766267">,</span>&nbsp;<span class="ident" id="1766269">skip</span>&nbsp;<span class="builtintype" id="1766274">int</span><span class="op" id="1766277">,</span>&nbsp;<span class="ident" id="1766279">pcbuf</span>&nbsp;<span class="op" id="1766285">*</span><span class="builtintype" id="1766286">uintptr</span><span class="op" id="1766293">,</span>&nbsp;<span class="ident" id="1766295">max</span>&nbsp;<span class="builtintype" id="1766299">int</span><span class="op" id="1766302">,</span>&nbsp;<span class="ident" id="1766304">callback</span>&nbsp;<span class="keyword" id="1766313">func</span><span class="op" id="1766317">(</span><span class="op" id="1766318">*</span><span class="ident" id="1766319"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><span class="op" id="1766327">,</span>&nbsp;<span class="ident" id="1766329"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1766335">.</span><span class="ident" id="1766336">Pointer</span><span class="op" id="1766343">)</span>&nbsp;<span class="builtintype" id="1766345">bool</span><span class="op" id="1766349">,</span>&nbsp;<span class="ident" id="1766351">v</span>&nbsp;<span class="ident" id="1766353"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1766359">.</span><span class="ident" id="1766360">Pointer</span><span class="op" id="1766367">,</span>&nbsp;<span class="ident" id="1766369">flags</span>&nbsp;<span class="builtintype" id="1766375">uint</span><span class="op" id="1766379">)</span>&nbsp;<span class="builtintype" id="1766381">int</span>&nbsp;<span class="op" id="1766385">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1766388">if</span>&nbsp;<span class="ident" id="1766391"><a href="/gostd/runtime/traceback.go.html#1764326">goexitPC</a></span>&nbsp;<span class="op" id="1766400">==</span>&nbsp;<span class="num" id="1766403">0</span>&nbsp;<span class="op" id="1766405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1766409"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1766416">(</span><span class="string" id="1766417">&#34;gentraceback&nbsp;before&nbsp;goexitPC&nbsp;initialization&#34;</span><span class="op" id="1766462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1766465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1766468">g</span>&nbsp;<span class="op" id="1766470">:=</span>&nbsp;<span class="ident" id="1766473"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1766477">(</span><span class="op" id="1766478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1766481">if</span>&nbsp;<span class="ident" id="1766484"><a href="/gostd/runtime/traceback.go.html#1766468">g</a></span>&nbsp;<span class="op" id="1766486">==</span>&nbsp;<span class="ident" id="1766489"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span>&nbsp;<span class="op" id="1766492">&amp;&amp;</span>&nbsp;<span class="ident" id="1766495"><a href="/gostd/runtime/traceback.go.html#1766468">g</a></span>&nbsp;<span class="op" id="1766497">==</span>&nbsp;<span class="ident" id="1766500"><a href="/gostd/runtime/traceback.go.html#1766468">g</a></span><span class="op" id="1766501">.</span><span class="ident" id="1766502"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1766503">.</span><span class="ident" id="1766504"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1766509">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766513">//&nbsp;The&nbsp;starting&nbsp;sp&nbsp;has&nbsp;been&nbsp;passed&nbsp;in&nbsp;as&nbsp;a&nbsp;uintptr,&nbsp;and&nbsp;the&nbsp;caller&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766586">//&nbsp;have&nbsp;other&nbsp;uintptr-typed&nbsp;stack&nbsp;references&nbsp;as&nbsp;well.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766642">//&nbsp;If&nbsp;during&nbsp;one&nbsp;of&nbsp;the&nbsp;calls&nbsp;that&nbsp;got&nbsp;us&nbsp;here&nbsp;or&nbsp;during&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766712">//&nbsp;callbacks&nbsp;below&nbsp;the&nbsp;stack&nbsp;must&nbsp;be&nbsp;grown,&nbsp;all&nbsp;these&nbsp;uintptr&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766787">//&nbsp;to&nbsp;the&nbsp;stack&nbsp;will&nbsp;not&nbsp;be&nbsp;updated,&nbsp;and&nbsp;gentraceback&nbsp;will&nbsp;continue</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766857">//&nbsp;to&nbsp;inspect&nbsp;the&nbsp;old&nbsp;stack&nbsp;memory,&nbsp;which&nbsp;may&nbsp;no&nbsp;longer&nbsp;be&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1766925">//&nbsp;Even&nbsp;if&nbsp;all&nbsp;the&nbsp;variables&nbsp;were&nbsp;updated&nbsp;correctly,&nbsp;it&nbsp;is&nbsp;not&nbsp;clear&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767001">//&nbsp;we&nbsp;want&nbsp;to&nbsp;expose&nbsp;a&nbsp;traceback&nbsp;that&nbsp;begins&nbsp;on&nbsp;one&nbsp;stack&nbsp;and&nbsp;ends</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767070">//&nbsp;on&nbsp;another&nbsp;stack.&nbsp;That&nbsp;could&nbsp;confuse&nbsp;callers&nbsp;quite&nbsp;a&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767133">//&nbsp;Instead,&nbsp;we&nbsp;require&nbsp;that&nbsp;gentraceback&nbsp;and&nbsp;any&nbsp;other&nbsp;function&nbsp;that</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767204">//&nbsp;accepts&nbsp;an&nbsp;sp&nbsp;for&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;(typically&nbsp;obtained&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767272">//&nbsp;calling&nbsp;getcallersp)&nbsp;must&nbsp;not&nbsp;run&nbsp;on&nbsp;that&nbsp;goroutine&#39;s&nbsp;stack&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1767341">//&nbsp;instead&nbsp;on&nbsp;the&nbsp;g0&nbsp;stack.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767371"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1767378">(</span><span class="string" id="1767379">&#34;gentraceback&nbsp;cannot&nbsp;trace&nbsp;user&nbsp;goroutine&nbsp;on&nbsp;its&nbsp;own&nbsp;stack&#34;</span><span class="op" id="1767438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767441">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767444">gotraceback</span>&nbsp;<span class="op" id="1767456">:=</span>&nbsp;<span class="ident" id="1767459"><a href="/gostd/runtime/stubs.go.html#1746702">gotraceback</a></span><span class="op" id="1767470">(</span><span class="builtintype" id="1767471">nil</span><span class="op" id="1767474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767477">if</span>&nbsp;<span class="ident" id="1767480"><a href="/gostd/runtime/traceback.go.html#1766223">pc0</a></span>&nbsp;<span class="op" id="1767484">==</span>&nbsp;<span class="op" id="1767487">^</span><span class="builtintype" id="1767488">uintptr</span><span class="op" id="1767495">(</span><span class="num" id="1767496">0</span><span class="op" id="1767497">)</span>&nbsp;<span class="op" id="1767499">&amp;&amp;</span>&nbsp;<span class="ident" id="1767502"><a href="/gostd/runtime/traceback.go.html#1766236">sp0</a></span>&nbsp;<span class="op" id="1767506">==</span>&nbsp;<span class="op" id="1767509">^</span><span class="builtintype" id="1767510">uintptr</span><span class="op" id="1767517">(</span><span class="num" id="1767518">0</span><span class="op" id="1767519">)</span>&nbsp;<span class="op" id="1767521">{</span>&nbsp;<span class="comment" id="1767523">//&nbsp;Signal&nbsp;to&nbsp;fetch&nbsp;saved&nbsp;values&nbsp;from&nbsp;gp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767566">if</span>&nbsp;<span class="ident" id="1767569"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767571">.</span><span class="ident" id="1767572"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787383">syscallsp</a></span>&nbsp;<span class="op" id="1767582">!=</span>&nbsp;<span class="num" id="1767585">0</span>&nbsp;<span class="op" id="1767587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767592"><a href="/gostd/runtime/traceback.go.html#1766223">pc0</a></span>&nbsp;<span class="op" id="1767596">=</span>&nbsp;<span class="ident" id="1767598"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767600">.</span><span class="ident" id="1767601"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787402">syscallpc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767614"><a href="/gostd/runtime/traceback.go.html#1766236">sp0</a></span>&nbsp;<span class="op" id="1767618">=</span>&nbsp;<span class="ident" id="1767620"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767622">.</span><span class="ident" id="1767623"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787383">syscallsp</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767636">if</span>&nbsp;<span class="ident" id="1767639"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1767646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767652"><a href="/gostd/runtime/traceback.go.html#1766249">lr0</a></span>&nbsp;<span class="op" id="1767656">=</span>&nbsp;<span class="num" id="1767658">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767667">}</span>&nbsp;<span class="keyword" id="1767669">else</span>&nbsp;<span class="op" id="1767674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767679"><a href="/gostd/runtime/traceback.go.html#1766223">pc0</a></span>&nbsp;<span class="op" id="1767683">=</span>&nbsp;<span class="ident" id="1767685"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767687">.</span><span class="ident" id="1767688"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787370">sched</a></span><span class="op" id="1767693">.</span><span class="ident" id="1767694"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786678">pc</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767700"><a href="/gostd/runtime/traceback.go.html#1766236">sp0</a></span>&nbsp;<span class="op" id="1767704">=</span>&nbsp;<span class="ident" id="1767706"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767708">.</span><span class="ident" id="1767709"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787370">sched</a></span><span class="op" id="1767714">.</span><span class="ident" id="1767715"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786666">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767721">if</span>&nbsp;<span class="ident" id="1767724"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1767731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767737"><a href="/gostd/runtime/traceback.go.html#1766249">lr0</a></span>&nbsp;<span class="op" id="1767741">=</span>&nbsp;<span class="ident" id="1767743"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767745">.</span><span class="ident" id="1767746"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787370">sched</a></span><span class="op" id="1767751">.</span><span class="ident" id="1767752"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786730">lr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767762">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767769">nprint</span>&nbsp;<span class="op" id="1767776">:=</span>&nbsp;<span class="num" id="1767779">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767782">var</span>&nbsp;<span class="ident" id="1767786">frame</span>&nbsp;<span class="ident" id="1767792"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767802"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1767807">.</span><span class="ident" id="1767808"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1767811">=</span>&nbsp;<span class="ident" id="1767813"><a href="/gostd/runtime/traceback.go.html#1766223">pc0</a></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767818"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1767823">.</span><span class="ident" id="1767824"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1767827">=</span>&nbsp;<span class="ident" id="1767829"><a href="/gostd/runtime/traceback.go.html#1766236">sp0</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767834">if</span>&nbsp;<span class="ident" id="1767837"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1767844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767848"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1767853">.</span><span class="ident" id="1767854"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1767857">=</span>&nbsp;<span class="ident" id="1767859"><a href="/gostd/runtime/traceback.go.html#1766249">lr0</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1767864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767867">waspanic</span>&nbsp;<span class="op" id="1767876">:=</span>&nbsp;<span class="builtintype" id="1767879">false</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767886">wasnewproc</span>&nbsp;<span class="op" id="1767897">:=</span>&nbsp;<span class="builtintype" id="1767900">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767907">printing</span>&nbsp;<span class="op" id="1767916">:=</span>&nbsp;<span class="ident" id="1767919"><a href="/gostd/runtime/traceback.go.html#1766279">pcbuf</a></span>&nbsp;<span class="op" id="1767925">==</span>&nbsp;<span class="builtintype" id="1767928">nil</span>&nbsp;<span class="op" id="1767932">&amp;&amp;</span>&nbsp;<span class="ident" id="1767935"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1767944">==</span>&nbsp;<span class="builtintype" id="1767947">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1767952">_defer</span>&nbsp;<span class="op" id="1767959">:=</span>&nbsp;<span class="ident" id="1767962"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1767964">.</span><span class="ident" id="1767965"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1767974">for</span>&nbsp;<span class="ident" id="1767978"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1767985">!=</span>&nbsp;<span class="builtintype" id="1767988">nil</span>&nbsp;<span class="op" id="1767992">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1767995">uintptr</span><span class="op" id="1768002">(</span><span class="ident" id="1768003"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1768009">.</span><span class="ident" id="1768010"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span><span class="op" id="1768014">)</span>&nbsp;<span class="op" id="1768016">==</span>&nbsp;<span class="ident" id="1768019"><a href="/gostd/runtime/stubs.go.html#1746734">_NoArgs</a></span>&nbsp;<span class="op" id="1768027">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768031"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1768038">=</span>&nbsp;<span class="ident" id="1768040"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1768046">.</span><span class="ident" id="1768047"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768057">//&nbsp;If&nbsp;the&nbsp;PC&nbsp;is&nbsp;zero,&nbsp;it&#39;s&nbsp;likely&nbsp;a&nbsp;nil&nbsp;function&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768113">//&nbsp;Start&nbsp;in&nbsp;the&nbsp;caller&#39;s&nbsp;frame.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768146">if</span>&nbsp;<span class="ident" id="1768149"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768154">.</span><span class="ident" id="1768155"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1768158">==</span>&nbsp;<span class="num" id="1768161">0</span>&nbsp;<span class="op" id="1768163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768167">if</span>&nbsp;<span class="ident" id="1768170"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1768177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768182"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768187">.</span><span class="ident" id="1768188"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1768191">=</span>&nbsp;<span class="op" id="1768193">*</span><span class="op" id="1768194">(</span><span class="op" id="1768195">*</span><span class="builtintype" id="1768196">uintptr</span><span class="op" id="1768203">)</span><span class="op" id="1768204">(</span><span class="ident" id="1768205"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1768211">.</span><span class="ident" id="1768212">Pointer</span><span class="op" id="1768219">(</span><span class="ident" id="1768220"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768225">.</span><span class="ident" id="1768226"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><span class="op" id="1768228">)</span><span class="op" id="1768229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768234"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768239">.</span><span class="ident" id="1768240"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1768243">=</span>&nbsp;<span class="num" id="1768245">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768249">}</span>&nbsp;<span class="keyword" id="1768251">else</span>&nbsp;<span class="op" id="1768256">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768261"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768266">.</span><span class="ident" id="1768267"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1768270">=</span>&nbsp;<span class="builtintype" id="1768272">uintptr</span><span class="op" id="1768279">(</span><span class="op" id="1768280">*</span><span class="op" id="1768281">(</span><span class="op" id="1768282">*</span><span class="ident" id="1768283"><a href="/gostd/runtime/arch_amd64.go.html#1480663">uintreg</a></span><span class="op" id="1768290">)</span><span class="op" id="1768291">(</span><span class="ident" id="1768292"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1768298">.</span><span class="ident" id="1768299">Pointer</span><span class="op" id="1768306">(</span><span class="ident" id="1768307"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768312">.</span><span class="ident" id="1768313"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><span class="op" id="1768315">)</span><span class="op" id="1768316">)</span><span class="op" id="1768317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768322"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768327">.</span><span class="ident" id="1768328"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1768331">+=</span>&nbsp;<span class="ident" id="1768334"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768351">f</span>&nbsp;<span class="op" id="1768353">:=</span>&nbsp;<span class="ident" id="1768356"><a href="/gostd/runtime/symtab.go.html#1753026">findfunc</a></span><span class="op" id="1768364">(</span><span class="ident" id="1768365"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768370">.</span><span class="ident" id="1768371"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1768373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768376">if</span>&nbsp;<span class="ident" id="1768379"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span>&nbsp;<span class="op" id="1768381">==</span>&nbsp;<span class="builtintype" id="1768384">nil</span>&nbsp;<span class="op" id="1768388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768392">if</span>&nbsp;<span class="ident" id="1768395"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1768404">!=</span>&nbsp;<span class="builtintype" id="1768407">nil</span>&nbsp;<span class="op" id="1768411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1768416">print</span><span class="op" id="1768421">(</span><span class="string" id="1768422">&#34;runtime:&nbsp;unknown&nbsp;pc&nbsp;&#34;</span><span class="op" id="1768444">,</span>&nbsp;<span class="ident" id="1768446"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1768449">(</span><span class="ident" id="1768450"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768455">.</span><span class="ident" id="1768456"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1768458">)</span><span class="op" id="1768459">,</span>&nbsp;<span class="string" id="1768461">&#34;\n&#34;</span><span class="op" id="1768465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768470"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1768477">(</span><span class="string" id="1768478">&#34;unknown&nbsp;pc&#34;</span><span class="op" id="1768490">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768498">return</span>&nbsp;<span class="num" id="1768505">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1768508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768511"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768516">.</span><span class="ident" id="1768517"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span>&nbsp;<span class="op" id="1768520">=</span>&nbsp;<span class="ident" id="1768522"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768526">n</span>&nbsp;<span class="op" id="1768528">:=</span>&nbsp;<span class="num" id="1768531">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768534">for</span>&nbsp;<span class="ident" id="1768538"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span>&nbsp;<span class="op" id="1768540">&lt;</span>&nbsp;<span class="ident" id="1768542"><a href="/gostd/runtime/traceback.go.html#1766295">max</a></span>&nbsp;<span class="op" id="1768546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768550">//&nbsp;Typically:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768566">//&nbsp;&nbsp;&nbsp;&nbsp;pc&nbsp;is&nbsp;the&nbsp;PC&nbsp;of&nbsp;the&nbsp;running&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768609">//&nbsp;&nbsp;&nbsp;&nbsp;sp&nbsp;is&nbsp;the&nbsp;stack&nbsp;pointer&nbsp;at&nbsp;that&nbsp;program&nbsp;counter.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768663">//&nbsp;&nbsp;&nbsp;&nbsp;fp&nbsp;is&nbsp;the&nbsp;frame&nbsp;pointer&nbsp;(caller&#39;s&nbsp;stack&nbsp;pointer)&nbsp;at&nbsp;that&nbsp;program&nbsp;counter,&nbsp;or&nbsp;nil&nbsp;if&nbsp;unknown.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768761">//&nbsp;&nbsp;&nbsp;&nbsp;stk&nbsp;is&nbsp;the&nbsp;stack&nbsp;containing&nbsp;sp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768798">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;caller&#39;s&nbsp;program&nbsp;counter&nbsp;is&nbsp;lr,&nbsp;unless&nbsp;lr&nbsp;is&nbsp;zero,&nbsp;in&nbsp;which&nbsp;case&nbsp;it&nbsp;is&nbsp;*(uintptr*)sp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1768893"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span>&nbsp;<span class="op" id="1768895">=</span>&nbsp;<span class="ident" id="1768897"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768902">.</span><span class="ident" id="1768903"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768909">//&nbsp;Found&nbsp;an&nbsp;actual&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1768940">//&nbsp;Derive&nbsp;frame&nbsp;pointer&nbsp;and&nbsp;link&nbsp;register.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1768985">if</span>&nbsp;<span class="ident" id="1768988"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1768993">.</span><span class="ident" id="1768994"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1768997">==</span>&nbsp;<span class="num" id="1769000">0</span>&nbsp;<span class="op" id="1769002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769007"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769012">.</span><span class="ident" id="1769013"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1769016">=</span>&nbsp;<span class="ident" id="1769018"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769023">.</span><span class="ident" id="1769024"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1769027">+</span>&nbsp;<span class="builtintype" id="1769029">uintptr</span><span class="op" id="1769036">(</span><span class="ident" id="1769037"><a href="/gostd/runtime/symtab.go.html#1755159">funcspdelta</a></span><span class="op" id="1769048">(</span><span class="ident" id="1769049"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1769050">,</span>&nbsp;<span class="ident" id="1769052"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769057">.</span><span class="ident" id="1769058"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1769060">)</span><span class="op" id="1769061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769066">if</span>&nbsp;<span class="op" id="1769069">!</span><span class="ident" id="1769070"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1769077">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769083">//&nbsp;On&nbsp;x86,&nbsp;call&nbsp;instruction&nbsp;pushes&nbsp;return&nbsp;PC&nbsp;before&nbsp;entering&nbsp;new&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769162"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769167">.</span><span class="ident" id="1769168"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1769171">+=</span>&nbsp;<span class="ident" id="1769174"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769193">var</span>&nbsp;<span class="ident" id="1769197">flr</span>&nbsp;<span class="op" id="1769201">*</span><span class="ident" id="1769202"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789537">_func</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769210">if</span>&nbsp;<span class="ident" id="1769213"><a href="/gostd/runtime/traceback.go.html#1783923">topofstack</a></span><span class="op" id="1769223">(</span><span class="ident" id="1769224"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1769225">)</span>&nbsp;<span class="op" id="1769227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769232"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769237">.</span><span class="ident" id="1769238"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769241">=</span>&nbsp;<span class="num" id="1769243">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769248"><a href="/gostd/runtime/traceback.go.html#1769197">flr</a></span>&nbsp;<span class="op" id="1769252">=</span>&nbsp;<span class="builtintype" id="1769254">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769260">}</span>&nbsp;<span class="keyword" id="1769262">else</span>&nbsp;<span class="keyword" id="1769267">if</span>&nbsp;<span class="ident" id="1769270"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1769277">&amp;&amp;</span>&nbsp;<span class="ident" id="1769280"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1769281">.</span><span class="ident" id="1769282"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1769288">==</span>&nbsp;<span class="ident" id="1769291"><a href="/gostd/runtime/traceback.go.html#1764347">jmpdeferPC</a></span>&nbsp;<span class="op" id="1769302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769307">//&nbsp;jmpdefer&nbsp;modifies&nbsp;SP/LR/PC&nbsp;non-atomically.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769356">//&nbsp;If&nbsp;a&nbsp;profiling&nbsp;interrupt&nbsp;arrives&nbsp;during&nbsp;jmpdefer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769412">//&nbsp;the&nbsp;stack&nbsp;unwind&nbsp;may&nbsp;see&nbsp;a&nbsp;mismatched&nbsp;register&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769469">//&nbsp;and&nbsp;get&nbsp;confused.&nbsp;Stop&nbsp;if&nbsp;we&nbsp;see&nbsp;PC&nbsp;within&nbsp;jmpdefer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769527">//&nbsp;to&nbsp;avoid&nbsp;that&nbsp;confusion.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1769558">//&nbsp;See&nbsp;golang.org/issue/8153.</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769591">if</span>&nbsp;<span class="ident" id="1769594"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1769603">!=</span>&nbsp;<span class="builtintype" id="1769606">nil</span>&nbsp;<span class="op" id="1769610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769616"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1769623">(</span><span class="string" id="1769624">&#34;traceback_arm:&nbsp;found&nbsp;jmpdefer&nbsp;when&nbsp;tracing&nbsp;with&nbsp;callback&#34;</span><span class="op" id="1769682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769692"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769697">.</span><span class="ident" id="1769698"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769701">=</span>&nbsp;<span class="num" id="1769703">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769707">}</span>&nbsp;<span class="keyword" id="1769709">else</span>&nbsp;<span class="op" id="1769714">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769719">if</span>&nbsp;<span class="ident" id="1769722"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1769729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769735">if</span>&nbsp;<span class="ident" id="1769738"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span>&nbsp;<span class="op" id="1769740">==</span>&nbsp;<span class="num" id="1769743">0</span>&nbsp;<span class="op" id="1769745">&amp;&amp;</span>&nbsp;<span class="ident" id="1769748"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769753">.</span><span class="ident" id="1769754"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1769757">&lt;</span>&nbsp;<span class="ident" id="1769759"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769764">.</span><span class="ident" id="1769765"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1769768">||</span>&nbsp;<span class="ident" id="1769771"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769776">.</span><span class="ident" id="1769777"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769780">==</span>&nbsp;<span class="num" id="1769783">0</span>&nbsp;<span class="op" id="1769785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769792"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769797">.</span><span class="ident" id="1769798"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769801">=</span>&nbsp;<span class="op" id="1769803">*</span><span class="op" id="1769804">(</span><span class="op" id="1769805">*</span><span class="builtintype" id="1769806">uintptr</span><span class="op" id="1769813">)</span><span class="op" id="1769814">(</span><span class="ident" id="1769815"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1769821">.</span><span class="ident" id="1769822">Pointer</span><span class="op" id="1769829">(</span><span class="ident" id="1769830"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769835">.</span><span class="ident" id="1769836"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><span class="op" id="1769838">)</span><span class="op" id="1769839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769850">}</span>&nbsp;<span class="keyword" id="1769852">else</span>&nbsp;<span class="op" id="1769857">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769863">if</span>&nbsp;<span class="ident" id="1769866"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769871">.</span><span class="ident" id="1769872"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769875">==</span>&nbsp;<span class="num" id="1769878">0</span>&nbsp;<span class="op" id="1769880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769887"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769892">.</span><span class="ident" id="1769893"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1769896">=</span>&nbsp;<span class="builtintype" id="1769898">uintptr</span><span class="op" id="1769905">(</span><span class="op" id="1769906">*</span><span class="op" id="1769907">(</span><span class="op" id="1769908">*</span><span class="ident" id="1769909"><a href="/gostd/runtime/arch_amd64.go.html#1480663">uintreg</a></span><span class="op" id="1769916">)</span><span class="op" id="1769917">(</span><span class="ident" id="1769918"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1769924">.</span><span class="ident" id="1769925">Pointer</span><span class="op" id="1769932">(</span><span class="ident" id="1769933"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769938">.</span><span class="ident" id="1769939"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1769942">-</span>&nbsp;<span class="ident" id="1769944"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><span class="op" id="1769951">)</span><span class="op" id="1769952">)</span><span class="op" id="1769953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1769964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1769969"><a href="/gostd/runtime/traceback.go.html#1769197">flr</a></span>&nbsp;<span class="op" id="1769973">=</span>&nbsp;<span class="ident" id="1769975"><a href="/gostd/runtime/symtab.go.html#1753026">findfunc</a></span><span class="op" id="1769983">(</span><span class="ident" id="1769984"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1769989">.</span><span class="ident" id="1769990"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span><span class="op" id="1769992">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1769997">if</span>&nbsp;<span class="ident" id="1770000"><a href="/gostd/runtime/traceback.go.html#1769197">flr</a></span>&nbsp;<span class="op" id="1770004">==</span>&nbsp;<span class="builtintype" id="1770007">nil</span>&nbsp;<span class="op" id="1770011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770017">//&nbsp;This&nbsp;happens&nbsp;if&nbsp;you&nbsp;get&nbsp;a&nbsp;profiling&nbsp;interrupt&nbsp;at&nbsp;just&nbsp;the&nbsp;wrong&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770094">//&nbsp;In&nbsp;that&nbsp;context&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;stop&nbsp;early.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770143">//&nbsp;But&nbsp;if&nbsp;callback&nbsp;is&nbsp;set,&nbsp;we&#39;re&nbsp;doing&nbsp;a&nbsp;garbage&nbsp;collection&nbsp;and&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770216">//&nbsp;get&nbsp;everything,&nbsp;so&nbsp;crash&nbsp;loudly.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1770256">if</span>&nbsp;<span class="ident" id="1770259"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1770268">!=</span>&nbsp;<span class="builtintype" id="1770271">nil</span>&nbsp;<span class="op" id="1770275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1770282">print</span><span class="op" id="1770287">(</span><span class="string" id="1770288">&#34;runtime:&nbsp;unexpected&nbsp;return&nbsp;pc&nbsp;for&nbsp;&#34;</span><span class="op" id="1770324">,</span>&nbsp;<span class="ident" id="1770326"><a href="/gostd/runtime/symtab.go.html#1754530">gofuncname</a></span><span class="op" id="1770336">(</span><span class="ident" id="1770337"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1770338">)</span><span class="op" id="1770339">,</span>&nbsp;<span class="string" id="1770341">&#34;&nbsp;called&nbsp;from&nbsp;&#34;</span><span class="op" id="1770356">,</span>&nbsp;<span class="ident" id="1770358"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1770361">(</span><span class="ident" id="1770362"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770367">.</span><span class="ident" id="1770368"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span><span class="op" id="1770370">)</span><span class="op" id="1770371">,</span>&nbsp;<span class="string" id="1770373">&#34;\n&#34;</span><span class="op" id="1770377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770384"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1770391">(</span><span class="string" id="1770392">&#34;unknown&nbsp;caller&nbsp;pc&#34;</span><span class="op" id="1770411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1770417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1770422">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1770426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770431"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770436">.</span><span class="ident" id="1770437"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791021">varp</a></span>&nbsp;<span class="op" id="1770442">=</span>&nbsp;<span class="ident" id="1770444"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770449">.</span><span class="ident" id="1770450"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1770455">if</span>&nbsp;<span class="op" id="1770458">!</span><span class="ident" id="1770459"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1770466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770471">//&nbsp;On&nbsp;x86,&nbsp;call&nbsp;instruction&nbsp;pushes&nbsp;return&nbsp;PC&nbsp;before&nbsp;entering&nbsp;new&nbsp;function.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770549"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770554">.</span><span class="ident" id="1770555"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791021">varp</a></span>&nbsp;<span class="op" id="1770560">-=</span>&nbsp;<span class="ident" id="1770563"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1770573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770578">//&nbsp;Derive&nbsp;size&nbsp;of&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770609">//&nbsp;Most&nbsp;functions&nbsp;have&nbsp;a&nbsp;fixed-size&nbsp;argument&nbsp;block,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770663">//&nbsp;so&nbsp;we&nbsp;can&nbsp;use&nbsp;metadata&nbsp;about&nbsp;the&nbsp;function&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770713">//&nbsp;Not&nbsp;all,&nbsp;though:&nbsp;there&nbsp;are&nbsp;some&nbsp;variadic&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770769">//&nbsp;in&nbsp;package&nbsp;runtime&nbsp;and&nbsp;reflect,&nbsp;and&nbsp;for&nbsp;those&nbsp;we&nbsp;use&nbsp;call-specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1770841">//&nbsp;metadata&nbsp;recorded&nbsp;by&nbsp;f&#39;s&nbsp;caller.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1770879">if</span>&nbsp;<span class="ident" id="1770882"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1770891">!=</span>&nbsp;<span class="builtintype" id="1770894">nil</span>&nbsp;<span class="op" id="1770898">||</span>&nbsp;<span class="ident" id="1770901"><a href="/gostd/runtime/traceback.go.html#1767907">printing</a></span>&nbsp;<span class="op" id="1770910">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770915"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770920">.</span><span class="ident" id="1770921"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791035">argp</a></span>&nbsp;<span class="op" id="1770926">=</span>&nbsp;<span class="ident" id="1770928"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770933">.</span><span class="ident" id="1770934"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1770940">if</span>&nbsp;<span class="ident" id="1770943"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1770950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770956"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1770961">.</span><span class="ident" id="1770962"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791035">argp</a></span>&nbsp;<span class="op" id="1770967">+=</span>&nbsp;<span class="ident" id="1770970"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1770981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1770986"><a href="/gostd/runtime/traceback.go.html#1778116">setArgInfo</a></span><span class="op" id="1770996">(</span><span class="op" id="1770997">&amp;</span><span class="ident" id="1770998"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1771003">,</span>&nbsp;<span class="ident" id="1771005"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1771006">,</span>&nbsp;<span class="ident" id="1771008"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1771017">!=</span>&nbsp;<span class="builtintype" id="1771020">nil</span><span class="op" id="1771023">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1771027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771032">//&nbsp;Determine&nbsp;function&nbsp;SP&nbsp;where&nbsp;deferproc&nbsp;would&nbsp;find&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1771101">var</span>&nbsp;<span class="ident" id="1771105">sparg</span>&nbsp;<span class="builtintype" id="1771111">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1771121">if</span>&nbsp;<span class="ident" id="1771124"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1771131">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771136">//&nbsp;On&nbsp;link&nbsp;register&nbsp;architectures,&nbsp;that&#39;s&nbsp;the&nbsp;standard&nbsp;bottom-of-stack&nbsp;plus&nbsp;1&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771222">//&nbsp;for&nbsp;the&nbsp;saved&nbsp;LR.&nbsp;If&nbsp;the&nbsp;previous&nbsp;frame&nbsp;was&nbsp;a&nbsp;direct&nbsp;call&nbsp;to&nbsp;newproc/deferproc,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771308">//&nbsp;however,&nbsp;the&nbsp;SP&nbsp;is&nbsp;three&nbsp;words&nbsp;lower&nbsp;than&nbsp;normal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771364">//&nbsp;If&nbsp;the&nbsp;function&nbsp;has&nbsp;no&nbsp;frame&nbsp;at&nbsp;all&nbsp;-&nbsp;perhaps&nbsp;it&nbsp;just&nbsp;started,&nbsp;or&nbsp;perhaps</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771444">//&nbsp;it&nbsp;is&nbsp;a&nbsp;leaf&nbsp;with&nbsp;no&nbsp;local&nbsp;variables&nbsp;-&nbsp;then&nbsp;we&nbsp;cannot&nbsp;possibly&nbsp;find&nbsp;its</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771522">//&nbsp;SP&nbsp;in&nbsp;a&nbsp;defer,&nbsp;and&nbsp;we&nbsp;might&nbsp;confuse&nbsp;its&nbsp;SP&nbsp;for&nbsp;its&nbsp;caller&#39;s&nbsp;SP,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771595">//&nbsp;leave&nbsp;sparg=0&nbsp;in&nbsp;that&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1771629">if</span>&nbsp;<span class="ident" id="1771632"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1771637">.</span><span class="ident" id="1771638"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1771641">!=</span>&nbsp;<span class="ident" id="1771644"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1771649">.</span><span class="ident" id="1771650"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1771653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1771659"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1771665">=</span>&nbsp;<span class="ident" id="1771667"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1771672">.</span><span class="ident" id="1771673"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1771676">+</span>&nbsp;<span class="ident" id="1771678"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1771690">if</span>&nbsp;<span class="ident" id="1771693"><a href="/gostd/runtime/traceback.go.html#1767886">wasnewproc</a></span>&nbsp;<span class="op" id="1771704">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1771711"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1771717">+=</span>&nbsp;<span class="num" id="1771720">3</span>&nbsp;<span class="op" id="1771722">*</span>&nbsp;<span class="ident" id="1771724"><a href="/gostd/runtime/stubs.go.html#1738497">regSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1771736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1771741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1771745">}</span>&nbsp;<span class="keyword" id="1771747">else</span>&nbsp;<span class="op" id="1771752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771757">//&nbsp;On&nbsp;x86&nbsp;that&#39;s&nbsp;the&nbsp;standard&nbsp;bottom-of-stack,&nbsp;so&nbsp;SP&nbsp;exactly.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771822">//&nbsp;If&nbsp;the&nbsp;previous&nbsp;frame&nbsp;was&nbsp;a&nbsp;direct&nbsp;call&nbsp;to&nbsp;newproc/deferproc,&nbsp;however,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1771899">//&nbsp;the&nbsp;SP&nbsp;is&nbsp;two&nbsp;words&nbsp;lower&nbsp;than&nbsp;normal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1771944"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1771950">=</span>&nbsp;<span class="ident" id="1771952"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1771957">.</span><span class="ident" id="1771958"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1771964">if</span>&nbsp;<span class="ident" id="1771967"><a href="/gostd/runtime/traceback.go.html#1767886">wasnewproc</a></span>&nbsp;<span class="op" id="1771978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1771984"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1771990">+=</span>&nbsp;<span class="num" id="1771993">2</span>&nbsp;<span class="op" id="1771995">*</span>&nbsp;<span class="ident" id="1771997"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1772008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1772012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772017">//&nbsp;Determine&nbsp;frame&#39;s&nbsp;&#39;continuation&nbsp;PC&#39;,&nbsp;where&nbsp;it&nbsp;can&nbsp;continue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772082">//&nbsp;Normally&nbsp;this&nbsp;is&nbsp;the&nbsp;return&nbsp;address&nbsp;on&nbsp;the&nbsp;stack,&nbsp;but&nbsp;if&nbsp;sigpanic</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772153">//&nbsp;is&nbsp;immediately&nbsp;below&nbsp;this&nbsp;function&nbsp;on&nbsp;the&nbsp;stack,&nbsp;then&nbsp;the&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772222">//&nbsp;stopped&nbsp;executing&nbsp;due&nbsp;to&nbsp;a&nbsp;trap,&nbsp;and&nbsp;frame.pc&nbsp;is&nbsp;probably&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772289">//&nbsp;a&nbsp;safe&nbsp;point&nbsp;for&nbsp;looking&nbsp;up&nbsp;liveness&nbsp;information.&nbsp;In&nbsp;this&nbsp;panicking&nbsp;case,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772368">//&nbsp;the&nbsp;function&nbsp;either&nbsp;doesn&#39;t&nbsp;return&nbsp;at&nbsp;all&nbsp;(if&nbsp;it&nbsp;has&nbsp;no&nbsp;defers&nbsp;or&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772446">//&nbsp;defers&nbsp;do&nbsp;not&nbsp;recover)&nbsp;or&nbsp;it&nbsp;returns&nbsp;from&nbsp;one&nbsp;of&nbsp;the&nbsp;calls&nbsp;to</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772513">//&nbsp;deferproc&nbsp;a&nbsp;second&nbsp;time&nbsp;(if&nbsp;the&nbsp;corresponding&nbsp;deferred&nbsp;func&nbsp;recovers).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772589">//&nbsp;It&nbsp;suffices&nbsp;to&nbsp;assume&nbsp;that&nbsp;the&nbsp;most&nbsp;recent&nbsp;deferproc&nbsp;is&nbsp;the&nbsp;one&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772663">//&nbsp;returns;&nbsp;everything&nbsp;live&nbsp;at&nbsp;earlier&nbsp;deferprocs&nbsp;is&nbsp;still&nbsp;live&nbsp;at&nbsp;that&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1772742"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1772747">.</span><span class="ident" id="1772748"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790967">continpc</a></span>&nbsp;<span class="op" id="1772757">=</span>&nbsp;<span class="ident" id="1772759"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1772764">.</span><span class="ident" id="1772765"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1772770">if</span>&nbsp;<span class="ident" id="1772773"><a href="/gostd/runtime/traceback.go.html#1767867">waspanic</a></span>&nbsp;<span class="op" id="1772782">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1772787">if</span>&nbsp;<span class="ident" id="1772790"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1772797">!=</span>&nbsp;<span class="builtintype" id="1772800">nil</span>&nbsp;<span class="op" id="1772804">&amp;&amp;</span>&nbsp;<span class="ident" id="1772807"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1772813">.</span><span class="ident" id="1772814"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span>&nbsp;<span class="op" id="1772819">==</span>&nbsp;<span class="ident" id="1772822"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1772828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1772834"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1772839">.</span><span class="ident" id="1772840"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790967">continpc</a></span>&nbsp;<span class="op" id="1772849">=</span>&nbsp;<span class="ident" id="1772851"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1772857">.</span><span class="ident" id="1772858"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790757">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1772864">}</span>&nbsp;<span class="keyword" id="1772866">else</span>&nbsp;<span class="op" id="1772871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1772877"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1772882">.</span><span class="ident" id="1772883"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790967">continpc</a></span>&nbsp;<span class="op" id="1772892">=</span>&nbsp;<span class="num" id="1772894">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1772899">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1772903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1772908">//&nbsp;Unwind&nbsp;our&nbsp;local&nbsp;defer&nbsp;stack&nbsp;past&nbsp;this&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1772959">for</span>&nbsp;<span class="ident" id="1772963"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1772970">!=</span>&nbsp;<span class="builtintype" id="1772973">nil</span>&nbsp;<span class="op" id="1772977">&amp;&amp;</span>&nbsp;<span class="op" id="1772980">(</span><span class="ident" id="1772981"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1772987">.</span><span class="ident" id="1772988"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span>&nbsp;<span class="op" id="1772993">==</span>&nbsp;<span class="ident" id="1772996"><a href="/gostd/runtime/traceback.go.html#1771105">sparg</a></span>&nbsp;<span class="op" id="1773002">||</span>&nbsp;<span class="ident" id="1773005"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1773011">.</span><span class="ident" id="1773012"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span>&nbsp;<span class="op" id="1773017">==</span>&nbsp;<span class="ident" id="1773020"><a href="/gostd/runtime/stubs.go.html#1746734">_NoArgs</a></span><span class="op" id="1773027">)</span>&nbsp;<span class="op" id="1773029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773034"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1773041">=</span>&nbsp;<span class="ident" id="1773043"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1773049">.</span><span class="ident" id="1773050"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773062">if</span>&nbsp;<span class="ident" id="1773065"><a href="/gostd/runtime/traceback.go.html#1766269">skip</a></span>&nbsp;<span class="op" id="1773070">&gt;</span>&nbsp;<span class="num" id="1773072">0</span>&nbsp;<span class="op" id="1773074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773079"><a href="/gostd/runtime/traceback.go.html#1766269">skip</a></span><span class="op" id="1773083">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773089">goto</span>&nbsp;<span class="ident" id="1773094"><a href="/gostd/runtime/traceback.go.html#1774286">skipped</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773109">if</span>&nbsp;<span class="ident" id="1773112"><a href="/gostd/runtime/traceback.go.html#1766279">pcbuf</a></span>&nbsp;<span class="op" id="1773118">!=</span>&nbsp;<span class="builtintype" id="1773121">nil</span>&nbsp;<span class="op" id="1773125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773130">(</span><span class="op" id="1773131">*</span><span class="op" id="1773132">[</span><span class="num" id="1773133">1</span>&nbsp;<span class="op" id="1773135">&lt;&lt;</span>&nbsp;<span class="num" id="1773138">20</span><span class="op" id="1773140">]</span><span class="builtintype" id="1773141">uintptr</span><span class="op" id="1773148">)</span><span class="op" id="1773149">(</span><span class="ident" id="1773150"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1773156">.</span><span class="ident" id="1773157">Pointer</span><span class="op" id="1773164">(</span><span class="ident" id="1773165"><a href="/gostd/runtime/traceback.go.html#1766279">pcbuf</a></span><span class="op" id="1773170">)</span><span class="op" id="1773171">)</span><span class="op" id="1773172">[</span><span class="ident" id="1773173"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span><span class="op" id="1773174">]</span>&nbsp;<span class="op" id="1773176">=</span>&nbsp;<span class="ident" id="1773178"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773183">.</span><span class="ident" id="1773184"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773189">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773193">if</span>&nbsp;<span class="ident" id="1773196"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1773205">!=</span>&nbsp;<span class="builtintype" id="1773208">nil</span>&nbsp;<span class="op" id="1773212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773217">if</span>&nbsp;<span class="op" id="1773220">!</span><span class="ident" id="1773221"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span><span class="op" id="1773229">(</span><span class="op" id="1773230">(</span><span class="op" id="1773231">*</span><span class="ident" id="1773232"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><span class="op" id="1773240">)</span><span class="op" id="1773241">(</span><span class="ident" id="1773242"><a href="/gostd/runtime/stubs.go.html#1743320">noescape</a></span><span class="op" id="1773250">(</span><span class="ident" id="1773251"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1773257">.</span><span class="ident" id="1773258">Pointer</span><span class="op" id="1773265">(</span><span class="op" id="1773266">&amp;</span><span class="ident" id="1773267"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773272">)</span><span class="op" id="1773273">)</span><span class="op" id="1773274">)</span><span class="op" id="1773275">,</span>&nbsp;<span class="ident" id="1773277"><a href="/gostd/runtime/traceback.go.html#1766351">v</a></span><span class="op" id="1773278">)</span>&nbsp;<span class="op" id="1773280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773286">return</span>&nbsp;<span class="ident" id="1773293"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773302">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773306">if</span>&nbsp;<span class="ident" id="1773309"><a href="/gostd/runtime/traceback.go.html#1767907">printing</a></span>&nbsp;<span class="op" id="1773318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773323">if</span>&nbsp;<span class="op" id="1773326">(</span><span class="ident" id="1773327"><a href="/gostd/runtime/traceback.go.html#1766369">flags</a></span><span class="op" id="1773332">&amp;</span><span class="ident" id="1773333"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791092">_TraceRuntimeFrames</a></span><span class="op" id="1773352">)</span>&nbsp;<span class="op" id="1773354">!=</span>&nbsp;<span class="num" id="1773357">0</span>&nbsp;<span class="op" id="1773359">||</span>&nbsp;<span class="ident" id="1773362"><a href="/gostd/runtime/traceback.go.html#1780992">showframe</a></span><span class="op" id="1773371">(</span><span class="ident" id="1773372"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1773373">,</span>&nbsp;<span class="ident" id="1773375"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1773377">)</span>&nbsp;<span class="op" id="1773379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1773385">//&nbsp;Print&nbsp;during&nbsp;crash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1773412">//&nbsp;&nbsp;&nbsp;&nbsp;main(0x1,&nbsp;0x2,&nbsp;0x3)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1773439">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/home/rsc/go/src/runtime/x.go:23&nbsp;+0xf</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1773485">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773492">tracepc</span>&nbsp;<span class="op" id="1773500">:=</span>&nbsp;<span class="ident" id="1773503"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773508">.</span><span class="ident" id="1773509"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="comment" id="1773512">//&nbsp;back&nbsp;up&nbsp;to&nbsp;CALL&nbsp;instruction&nbsp;for&nbsp;funcline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773561">if</span>&nbsp;<span class="op" id="1773564">(</span><span class="ident" id="1773565"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span>&nbsp;<span class="op" id="1773567">&gt;</span>&nbsp;<span class="num" id="1773569">0</span>&nbsp;<span class="op" id="1773571">||</span>&nbsp;<span class="ident" id="1773574"><a href="/gostd/runtime/traceback.go.html#1766369">flags</a></span><span class="op" id="1773579">&amp;</span><span class="ident" id="1773580"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791122">_TraceTrap</a></span>&nbsp;<span class="op" id="1773591">==</span>&nbsp;<span class="num" id="1773594">0</span><span class="op" id="1773595">)</span>&nbsp;<span class="op" id="1773597">&amp;&amp;</span>&nbsp;<span class="ident" id="1773600"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773605">.</span><span class="ident" id="1773606"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1773609">&gt;</span>&nbsp;<span class="ident" id="1773611"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1773612">.</span><span class="ident" id="1773613"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1773619">&amp;&amp;</span>&nbsp;<span class="op" id="1773622">!</span><span class="ident" id="1773623"><a href="/gostd/runtime/traceback.go.html#1767867">waspanic</a></span>&nbsp;<span class="op" id="1773632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773639"><a href="/gostd/runtime/traceback.go.html#1773492">tracepc</a></span><span class="op" id="1773646">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773653">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1773659">print</span><span class="op" id="1773664">(</span><span class="ident" id="1773665"><a href="/gostd/runtime/symtab.go.html#1754530">gofuncname</a></span><span class="op" id="1773675">(</span><span class="ident" id="1773676"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1773677">)</span><span class="op" id="1773678">,</span>&nbsp;<span class="string" id="1773680">&#34;(&#34;</span><span class="op" id="1773683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773689">argp</span>&nbsp;<span class="op" id="1773694">:=</span>&nbsp;<span class="op" id="1773697">(</span><span class="op" id="1773698">*</span><span class="op" id="1773699">[</span><span class="num" id="1773700">100</span><span class="op" id="1773703">]</span><span class="builtintype" id="1773704">uintptr</span><span class="op" id="1773711">)</span><span class="op" id="1773712">(</span><span class="ident" id="1773713"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1773719">.</span><span class="ident" id="1773720">Pointer</span><span class="op" id="1773727">(</span><span class="ident" id="1773728"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773733">.</span><span class="ident" id="1773734"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791035">argp</a></span><span class="op" id="1773738">)</span><span class="op" id="1773739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773745">for</span>&nbsp;<span class="ident" id="1773749">i</span>&nbsp;<span class="op" id="1773751">:=</span>&nbsp;<span class="builtintype" id="1773754">uintptr</span><span class="op" id="1773761">(</span><span class="num" id="1773762">0</span><span class="op" id="1773763">)</span><span class="op" id="1773764">;</span>&nbsp;<span class="ident" id="1773766"><a href="/gostd/runtime/traceback.go.html#1773749">i</a></span>&nbsp;<span class="op" id="1773768">&lt;</span>&nbsp;<span class="ident" id="1773770"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1773775">.</span><span class="ident" id="1773776"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791049">arglen</a></span><span class="op" id="1773782">/</span><span class="ident" id="1773783"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1773790">;</span>&nbsp;<span class="ident" id="1773792"><a href="/gostd/runtime/traceback.go.html#1773749">i</a></span><span class="op" id="1773793">++</span>&nbsp;<span class="op" id="1773796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773803">if</span>&nbsp;<span class="ident" id="1773806"><a href="/gostd/runtime/traceback.go.html#1773749">i</a></span>&nbsp;<span class="op" id="1773808">&gt;=</span>&nbsp;<span class="num" id="1773811">10</span>&nbsp;<span class="op" id="1773814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1773822">print</span><span class="op" id="1773827">(</span><span class="string" id="1773828">&#34;,&nbsp;...&#34;</span><span class="op" id="1773835">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773843">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773861">if</span>&nbsp;<span class="ident" id="1773864"><a href="/gostd/runtime/traceback.go.html#1773749">i</a></span>&nbsp;<span class="op" id="1773866">!=</span>&nbsp;<span class="num" id="1773869">0</span>&nbsp;<span class="op" id="1773871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1773879">print</span><span class="op" id="1773884">(</span><span class="string" id="1773885">&#34;,&nbsp;&#34;</span><span class="op" id="1773889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773896">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1773903">print</span><span class="op" id="1773908">(</span><span class="ident" id="1773909"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1773912">(</span><span class="ident" id="1773913"><a href="/gostd/runtime/traceback.go.html#1773689">argp</a></span><span class="op" id="1773917">[</span><span class="ident" id="1773918"><a href="/gostd/runtime/traceback.go.html#1773749">i</a></span><span class="op" id="1773919">]</span><span class="op" id="1773920">)</span><span class="op" id="1773921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1773927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1773933">print</span><span class="op" id="1773938">(</span><span class="string" id="1773939">&#34;)\n&#34;</span><span class="op" id="1773944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1773950">var</span>&nbsp;<span class="ident" id="1773954">file</span>&nbsp;<span class="builtintype" id="1773959">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1773970">line</span>&nbsp;<span class="op" id="1773975">:=</span>&nbsp;<span class="ident" id="1773978"><a href="/gostd/runtime/symtab.go.html#1755049">funcline</a></span><span class="op" id="1773986">(</span><span class="ident" id="1773987"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1773988">,</span>&nbsp;<span class="ident" id="1773990"><a href="/gostd/runtime/traceback.go.html#1773492">tracepc</a></span><span class="op" id="1773997">,</span>&nbsp;<span class="op" id="1773999">&amp;</span><span class="ident" id="1774000"><a href="/gostd/runtime/traceback.go.html#1773954">file</a></span><span class="op" id="1774004">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1774010">print</span><span class="op" id="1774015">(</span><span class="string" id="1774016">&#34;\t&#34;</span><span class="op" id="1774020">,</span>&nbsp;<span class="ident" id="1774022"><a href="/gostd/runtime/traceback.go.html#1773954">file</a></span><span class="op" id="1774026">,</span>&nbsp;<span class="string" id="1774028">&#34;:&#34;</span><span class="op" id="1774031">,</span>&nbsp;<span class="ident" id="1774033"><a href="/gostd/runtime/traceback.go.html#1773970">line</a></span><span class="op" id="1774037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774043">if</span>&nbsp;<span class="ident" id="1774046"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774051">.</span><span class="ident" id="1774052"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1774055">&gt;</span>&nbsp;<span class="ident" id="1774057"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774058">.</span><span class="ident" id="1774059"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1774065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1774072">print</span><span class="op" id="1774077">(</span><span class="string" id="1774078">&#34;&nbsp;+&#34;</span><span class="op" id="1774082">,</span>&nbsp;<span class="ident" id="1774084"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1774087">(</span><span class="ident" id="1774088"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774093">.</span><span class="ident" id="1774094"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1774096">-</span><span class="ident" id="1774097"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774098">.</span><span class="ident" id="1774099"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span><span class="op" id="1774104">)</span><span class="op" id="1774105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774117">if</span>&nbsp;<span class="ident" id="1774120"><a href="/gostd/runtime/traceback.go.html#1766468">g</a></span><span class="op" id="1774121">.</span><span class="ident" id="1774122"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1774123">.</span><span class="ident" id="1774124"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1774133">&gt;</span>&nbsp;<span class="num" id="1774135">0</span>&nbsp;<span class="op" id="1774137">&amp;&amp;</span>&nbsp;<span class="ident" id="1774140"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span>&nbsp;<span class="op" id="1774143">==</span>&nbsp;<span class="ident" id="1774146"><a href="/gostd/runtime/traceback.go.html#1766468">g</a></span><span class="op" id="1774147">.</span><span class="ident" id="1774148"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1774149">.</span><span class="ident" id="1774150"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1774155">||</span>&nbsp;<span class="ident" id="1774158"><a href="/gostd/runtime/traceback.go.html#1767444">gotraceback</a></span>&nbsp;<span class="op" id="1774170">&gt;=</span>&nbsp;<span class="num" id="1774173">2</span>&nbsp;<span class="op" id="1774175">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1774182">print</span><span class="op" id="1774187">(</span><span class="string" id="1774188">&#34;&nbsp;fp=&#34;</span><span class="op" id="1774194">,</span>&nbsp;<span class="ident" id="1774196"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1774199">(</span><span class="ident" id="1774200"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774205">.</span><span class="ident" id="1774206"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span><span class="op" id="1774208">)</span><span class="op" id="1774209">,</span>&nbsp;<span class="string" id="1774211">&#34;&nbsp;sp=&#34;</span><span class="op" id="1774217">,</span>&nbsp;<span class="ident" id="1774219"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1774222">(</span><span class="ident" id="1774223"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774228">.</span><span class="ident" id="1774229"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><span class="op" id="1774231">)</span><span class="op" id="1774232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1774244">print</span><span class="op" id="1774249">(</span><span class="string" id="1774250">&#34;\n&#34;</span><span class="op" id="1774254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774260"><a href="/gostd/runtime/traceback.go.html#1767769">nprint</a></span><span class="op" id="1774266">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774272">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774280"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span><span class="op" id="1774281">++</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774286">skipped</span><span class="op" id="1774293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774297"><a href="/gostd/runtime/traceback.go.html#1767867">waspanic</a></span>&nbsp;<span class="op" id="1774306">=</span>&nbsp;<span class="ident" id="1774308"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774309">.</span><span class="ident" id="1774310"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1774316">==</span>&nbsp;<span class="ident" id="1774319"><a href="/gostd/runtime/traceback.go.html#1764473">sigpanicPC</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774332"><a href="/gostd/runtime/traceback.go.html#1767886">wasnewproc</a></span>&nbsp;<span class="op" id="1774343">=</span>&nbsp;<span class="ident" id="1774345"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774346">.</span><span class="ident" id="1774347"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1774353">==</span>&nbsp;<span class="ident" id="1774356"><a href="/gostd/runtime/traceback.go.html#1764431">newprocPC</a></span>&nbsp;<span class="op" id="1774366">||</span>&nbsp;<span class="ident" id="1774369"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774370">.</span><span class="ident" id="1774371"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1774377">==</span>&nbsp;<span class="ident" id="1774380"><a href="/gostd/runtime/traceback.go.html#1764305">deferprocPC</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1774395">//&nbsp;Do&nbsp;not&nbsp;unwind&nbsp;past&nbsp;the&nbsp;bottom&nbsp;of&nbsp;the&nbsp;stack.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774444">if</span>&nbsp;<span class="ident" id="1774447"><a href="/gostd/runtime/traceback.go.html#1769197">flr</a></span>&nbsp;<span class="op" id="1774451">==</span>&nbsp;<span class="builtintype" id="1774454">nil</span>&nbsp;<span class="op" id="1774458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774463">break</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1774476">//&nbsp;Unwind&nbsp;to&nbsp;next&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774503"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774508">.</span><span class="ident" id="1774509"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span>&nbsp;<span class="op" id="1774512">=</span>&nbsp;<span class="ident" id="1774514"><a href="/gostd/runtime/traceback.go.html#1769197">flr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774520"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774525">.</span><span class="ident" id="1774526"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1774529">=</span>&nbsp;<span class="ident" id="1774531"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774536">.</span><span class="ident" id="1774537"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774542"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774547">.</span><span class="ident" id="1774548"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1774551">=</span>&nbsp;<span class="num" id="1774553">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774557"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774562">.</span><span class="ident" id="1774563"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1774566">=</span>&nbsp;<span class="ident" id="1774568"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774573">.</span><span class="ident" id="1774574"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774579"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774584">.</span><span class="ident" id="1774585"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791009">fp</a></span>&nbsp;<span class="op" id="1774588">=</span>&nbsp;<span class="num" id="1774590">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774594"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774599">.</span><span class="ident" id="1774600"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791065">argmap</a></span>&nbsp;<span class="op" id="1774607">=</span>&nbsp;<span class="builtintype" id="1774609">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1774616">//&nbsp;On&nbsp;link&nbsp;register&nbsp;architectures,&nbsp;sighandler&nbsp;saves&nbsp;the&nbsp;LR&nbsp;on&nbsp;stack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1774686">//&nbsp;before&nbsp;faking&nbsp;a&nbsp;call&nbsp;to&nbsp;sigpanic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774725">if</span>&nbsp;<span class="ident" id="1774728"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1774735">&amp;&amp;</span>&nbsp;<span class="ident" id="1774738"><a href="/gostd/runtime/traceback.go.html#1767867">waspanic</a></span>&nbsp;<span class="op" id="1774747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774752">x</span>&nbsp;<span class="op" id="1774754">:=</span>&nbsp;<span class="op" id="1774757">*</span><span class="op" id="1774758">(</span><span class="op" id="1774759">*</span><span class="builtintype" id="1774760">uintptr</span><span class="op" id="1774767">)</span><span class="op" id="1774768">(</span><span class="ident" id="1774769"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1774775">.</span><span class="ident" id="1774776">Pointer</span><span class="op" id="1774783">(</span><span class="ident" id="1774784"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774789">.</span><span class="ident" id="1774790"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><span class="op" id="1774792">)</span><span class="op" id="1774793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774798"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774803">.</span><span class="ident" id="1774804"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span>&nbsp;<span class="op" id="1774807">+=</span>&nbsp;<span class="ident" id="1774810"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774821"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span>&nbsp;<span class="op" id="1774823">=</span>&nbsp;<span class="ident" id="1774825"><a href="/gostd/runtime/symtab.go.html#1753026">findfunc</a></span><span class="op" id="1774833">(</span><span class="ident" id="1774834"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774839">.</span><span class="ident" id="1774840"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span><span class="op" id="1774842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774847"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774852">.</span><span class="ident" id="1774853"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790944">fn</a></span>&nbsp;<span class="op" id="1774856">=</span>&nbsp;<span class="ident" id="1774858"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774863">if</span>&nbsp;<span class="ident" id="1774866"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span>&nbsp;<span class="op" id="1774868">==</span>&nbsp;<span class="builtintype" id="1774871">nil</span>&nbsp;<span class="op" id="1774875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774881"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774886">.</span><span class="ident" id="1774887"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790955">pc</a></span>&nbsp;<span class="op" id="1774890">=</span>&nbsp;<span class="ident" id="1774892"><a href="/gostd/runtime/traceback.go.html#1774752">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774897">}</span>&nbsp;<span class="keyword" id="1774899">else</span>&nbsp;<span class="keyword" id="1774904">if</span>&nbsp;<span class="ident" id="1774907"><a href="/gostd/runtime/traceback.go.html#1768351">f</a></span><span class="op" id="1774908">.</span><span class="ident" id="1774909"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789595">frame</a></span>&nbsp;<span class="op" id="1774915">==</span>&nbsp;<span class="num" id="1774918">0</span>&nbsp;<span class="op" id="1774920">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774926"><a href="/gostd/runtime/traceback.go.html#1767786">frame</a></span><span class="op" id="1774931">.</span><span class="ident" id="1774932"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790985">lr</a></span>&nbsp;<span class="op" id="1774935">=</span>&nbsp;<span class="ident" id="1774937"><a href="/gostd/runtime/traceback.go.html#1774752">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1774949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1774953">if</span>&nbsp;<span class="ident" id="1774956"><a href="/gostd/runtime/traceback.go.html#1766279">pcbuf</a></span>&nbsp;<span class="op" id="1774962">==</span>&nbsp;<span class="builtintype" id="1774965">nil</span>&nbsp;<span class="op" id="1774969">&amp;&amp;</span>&nbsp;<span class="ident" id="1774972"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1774981">==</span>&nbsp;<span class="builtintype" id="1774984">nil</span>&nbsp;<span class="op" id="1774988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1774992"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span>&nbsp;<span class="op" id="1774994">=</span>&nbsp;<span class="ident" id="1774996"><a href="/gostd/runtime/traceback.go.html#1767769">nprint</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1775004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775008">//&nbsp;If&nbsp;callback&nbsp;!=&nbsp;nil,&nbsp;we&#39;re&nbsp;being&nbsp;called&nbsp;to&nbsp;gather&nbsp;stack&nbsp;information&nbsp;during</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775086">//&nbsp;garbage&nbsp;collection&nbsp;or&nbsp;stack&nbsp;growth.&nbsp;In&nbsp;that&nbsp;context,&nbsp;require&nbsp;that&nbsp;we&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775164">//&nbsp;up&nbsp;the&nbsp;entire&nbsp;defer&nbsp;stack.&nbsp;If&nbsp;not,&nbsp;then&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;somewhere&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775241">//&nbsp;garbage&nbsp;collection&nbsp;or&nbsp;stack&nbsp;growth&nbsp;may&nbsp;not&nbsp;have&nbsp;seen&nbsp;the&nbsp;correct&nbsp;picture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775318">//&nbsp;of&nbsp;the&nbsp;stack.&nbsp;Crash&nbsp;now&nbsp;instead&nbsp;of&nbsp;silently&nbsp;executing&nbsp;the&nbsp;garbage&nbsp;collection</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775399">//&nbsp;or&nbsp;stack&nbsp;copy&nbsp;incorrectly&nbsp;and&nbsp;setting&nbsp;up&nbsp;for&nbsp;a&nbsp;mysterious&nbsp;crash&nbsp;later.</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775474">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775478">//&nbsp;Note&nbsp;that&nbsp;panic&nbsp;!=&nbsp;nil&nbsp;is&nbsp;okay&nbsp;here:&nbsp;there&nbsp;can&nbsp;be&nbsp;leftover&nbsp;panics,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775549">//&nbsp;because&nbsp;the&nbsp;defers&nbsp;on&nbsp;the&nbsp;panic&nbsp;stack&nbsp;do&nbsp;not&nbsp;nest&nbsp;in&nbsp;frame&nbsp;order&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775621">//&nbsp;they&nbsp;do&nbsp;on&nbsp;the&nbsp;defer&nbsp;stack.&nbsp;If&nbsp;you&nbsp;have:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775666">//</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775670">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;1&nbsp;defers&nbsp;d1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775692">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;2&nbsp;defers&nbsp;d2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775714">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;3&nbsp;defers&nbsp;d3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775736">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;4&nbsp;panics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775755">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;4&#39;s&nbsp;panic&nbsp;starts&nbsp;running&nbsp;defers</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775797">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;5,&nbsp;running&nbsp;d3,&nbsp;defers&nbsp;d4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775832">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;5&nbsp;panics</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775851">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;5&#39;s&nbsp;panic&nbsp;starts&nbsp;running&nbsp;defers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775893">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;6,&nbsp;running&nbsp;d4,&nbsp;garbage&nbsp;collects</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775935">//&nbsp;&nbsp;&nbsp;&nbsp;frame&nbsp;6,&nbsp;running&nbsp;d2,&nbsp;garbage&nbsp;collects</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775977">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1775981">//&nbsp;During&nbsp;the&nbsp;execution&nbsp;of&nbsp;d4,&nbsp;the&nbsp;panic&nbsp;stack&nbsp;is&nbsp;d4&nbsp;-&gt;&nbsp;d3,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776048">//&nbsp;is&nbsp;nested&nbsp;properly,&nbsp;and&nbsp;we&#39;ll&nbsp;treat&nbsp;frame&nbsp;3&nbsp;as&nbsp;resumable,&nbsp;because&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776121">//&nbsp;can&nbsp;find&nbsp;d3.&nbsp;(And&nbsp;in&nbsp;fact&nbsp;frame&nbsp;3&nbsp;is&nbsp;resumable.&nbsp;If&nbsp;d4&nbsp;recovers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776188">//&nbsp;and&nbsp;frame&nbsp;5&nbsp;continues&nbsp;running,&nbsp;d3,&nbsp;d3&nbsp;can&nbsp;recover&nbsp;and&nbsp;we&#39;ll</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776252">//&nbsp;resume&nbsp;execution&nbsp;in&nbsp;(returning&nbsp;from)&nbsp;frame&nbsp;3.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776303">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776307">//&nbsp;During&nbsp;the&nbsp;execution&nbsp;of&nbsp;d2,&nbsp;however,&nbsp;the&nbsp;panic&nbsp;stack&nbsp;is&nbsp;d2&nbsp;-&gt;&nbsp;d3,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776377">//&nbsp;which&nbsp;is&nbsp;inverted.&nbsp;The&nbsp;scan&nbsp;will&nbsp;match&nbsp;d2&nbsp;to&nbsp;frame&nbsp;2&nbsp;but&nbsp;having</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776445">//&nbsp;d2&nbsp;on&nbsp;the&nbsp;stack&nbsp;until&nbsp;then&nbsp;means&nbsp;it&nbsp;will&nbsp;not&nbsp;match&nbsp;d3&nbsp;to&nbsp;frame&nbsp;3.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776515">//&nbsp;This&nbsp;is&nbsp;okay:&nbsp;if&nbsp;we&#39;re&nbsp;running&nbsp;d2,&nbsp;then&nbsp;all&nbsp;the&nbsp;defers&nbsp;after&nbsp;d2&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776588">//&nbsp;completed&nbsp;and&nbsp;their&nbsp;corresponding&nbsp;frames&nbsp;are&nbsp;dead.&nbsp;Not&nbsp;finding&nbsp;d3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776658">//&nbsp;for&nbsp;frame&nbsp;3&nbsp;means&nbsp;we&#39;ll&nbsp;set&nbsp;frame&nbsp;3&#39;s&nbsp;continpc&nbsp;==&nbsp;0,&nbsp;which&nbsp;is&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776732">//&nbsp;(frame&nbsp;3&nbsp;is&nbsp;dead).&nbsp;At&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;walk&nbsp;the&nbsp;panic&nbsp;stack&nbsp;can&nbsp;thus</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776803">//&nbsp;contain&nbsp;defers&nbsp;(d3&nbsp;in&nbsp;this&nbsp;case)&nbsp;for&nbsp;dead&nbsp;frames.&nbsp;The&nbsp;inversion&nbsp;here</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776876">//&nbsp;always&nbsp;indicates&nbsp;a&nbsp;dead&nbsp;frame,&nbsp;and&nbsp;the&nbsp;effect&nbsp;of&nbsp;the&nbsp;inversion&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1776950">//&nbsp;scan&nbsp;is&nbsp;to&nbsp;hide&nbsp;those&nbsp;dead&nbsp;frames,&nbsp;so&nbsp;the&nbsp;scan&nbsp;is&nbsp;still&nbsp;okay:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777016">//&nbsp;what&#39;s&nbsp;left&nbsp;on&nbsp;the&nbsp;panic&nbsp;stack&nbsp;are&nbsp;exactly&nbsp;(and&nbsp;only)&nbsp;the&nbsp;dead&nbsp;frames.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777091">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777095">//&nbsp;We&nbsp;require&nbsp;callback&nbsp;!=&nbsp;nil&nbsp;here&nbsp;because&nbsp;only&nbsp;when&nbsp;callback&nbsp;!=&nbsp;nil</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777165">//&nbsp;do&nbsp;we&nbsp;know&nbsp;that&nbsp;gentraceback&nbsp;is&nbsp;being&nbsp;called&nbsp;in&nbsp;a&nbsp;&#34;must&nbsp;be&nbsp;correct&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777237">//&nbsp;context&nbsp;as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;&#34;best&nbsp;effort&#34;&nbsp;context.&nbsp;The&nbsp;tracebacks&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777308">//&nbsp;callbacks&nbsp;only&nbsp;happen&nbsp;when&nbsp;everything&nbsp;is&nbsp;stopped&nbsp;nicely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777369">//&nbsp;At&nbsp;other&nbsp;times,&nbsp;such&nbsp;as&nbsp;when&nbsp;gathering&nbsp;a&nbsp;stack&nbsp;for&nbsp;a&nbsp;profiling&nbsp;signal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777443">//&nbsp;or&nbsp;when&nbsp;printing&nbsp;a&nbsp;traceback&nbsp;during&nbsp;a&nbsp;crash,&nbsp;everything&nbsp;may&nbsp;not&nbsp;be</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777514">//&nbsp;stopped&nbsp;nicely,&nbsp;and&nbsp;the&nbsp;stack&nbsp;walk&nbsp;may&nbsp;not&nbsp;be&nbsp;able&nbsp;to&nbsp;complete.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777582">//&nbsp;It&#39;s&nbsp;okay&nbsp;in&nbsp;those&nbsp;situations&nbsp;not&nbsp;to&nbsp;use&nbsp;up&nbsp;the&nbsp;entire&nbsp;defer&nbsp;stack:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1777654">//&nbsp;incomplete&nbsp;information&nbsp;then&nbsp;is&nbsp;still&nbsp;better&nbsp;than&nbsp;nothing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1777716">if</span>&nbsp;<span class="ident" id="1777719"><a href="/gostd/runtime/traceback.go.html#1766304">callback</a></span>&nbsp;<span class="op" id="1777728">!=</span>&nbsp;<span class="builtintype" id="1777731">nil</span>&nbsp;<span class="op" id="1777735">&amp;&amp;</span>&nbsp;<span class="ident" id="1777738"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span>&nbsp;<span class="op" id="1777740">&lt;</span>&nbsp;<span class="ident" id="1777742"><a href="/gostd/runtime/traceback.go.html#1766295">max</a></span>&nbsp;<span class="op" id="1777746">&amp;&amp;</span>&nbsp;<span class="ident" id="1777749"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1777756">!=</span>&nbsp;<span class="builtintype" id="1777759">nil</span>&nbsp;<span class="op" id="1777763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1777767">if</span>&nbsp;<span class="ident" id="1777770"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1777777">!=</span>&nbsp;<span class="builtintype" id="1777780">nil</span>&nbsp;<span class="op" id="1777784">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1777789">print</span><span class="op" id="1777794">(</span><span class="string" id="1777795">&#34;runtime:&nbsp;g&#34;</span><span class="op" id="1777807">,</span>&nbsp;<span class="ident" id="1777809"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1777811">.</span><span class="ident" id="1777812"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787464">goid</a></span><span class="op" id="1777816">,</span>&nbsp;<span class="string" id="1777818">&#34;:&nbsp;leftover&nbsp;defer&nbsp;argp=&#34;</span><span class="op" id="1777842">,</span>&nbsp;<span class="ident" id="1777844"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1777847">(</span><span class="ident" id="1777848"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1777854">.</span><span class="ident" id="1777855"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span><span class="op" id="1777859">)</span><span class="op" id="1777860">,</span>&nbsp;<span class="string" id="1777862">&#34;&nbsp;pc=&#34;</span><span class="op" id="1777868">,</span>&nbsp;<span class="ident" id="1777870"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1777873">(</span><span class="ident" id="1777874"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1777880">.</span><span class="ident" id="1777881"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790757">pc</a></span><span class="op" id="1777883">)</span><span class="op" id="1777884">,</span>&nbsp;<span class="string" id="1777886">&#34;\n&#34;</span><span class="op" id="1777890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1777894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1777898">for</span>&nbsp;<span class="ident" id="1777902"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1777909">=</span>&nbsp;<span class="ident" id="1777911"><a href="/gostd/runtime/traceback.go.html#1766262">gp</a></span><span class="op" id="1777913">.</span><span class="ident" id="1777914"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787354">_defer</a></span><span class="op" id="1777920">;</span>&nbsp;<span class="ident" id="1777922"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1777929">!=</span>&nbsp;<span class="builtintype" id="1777932">nil</span><span class="op" id="1777935">;</span>&nbsp;<span class="ident" id="1777937"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span>&nbsp;<span class="op" id="1777944">=</span>&nbsp;<span class="ident" id="1777946"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1777952">.</span><span class="ident" id="1777953"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790798">link</a></span>&nbsp;<span class="op" id="1777958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1777963">print</span><span class="op" id="1777968">(</span><span class="string" id="1777969">&#34;\tdefer&nbsp;&#34;</span><span class="op" id="1777979">,</span>&nbsp;<span class="ident" id="1777981"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1777987">,</span>&nbsp;<span class="string" id="1777989">&#34;&nbsp;argp=&#34;</span><span class="op" id="1777997">,</span>&nbsp;<span class="ident" id="1777999"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1778002">(</span><span class="ident" id="1778003"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1778009">.</span><span class="ident" id="1778010"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790743">argp</a></span><span class="op" id="1778014">)</span><span class="op" id="1778015">,</span>&nbsp;<span class="string" id="1778017">&#34;&nbsp;pc=&#34;</span><span class="op" id="1778023">,</span>&nbsp;<span class="ident" id="1778025"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1778028">(</span><span class="ident" id="1778029"><a href="/gostd/runtime/traceback.go.html#1767952">_defer</a></span><span class="op" id="1778035">.</span><span class="ident" id="1778036"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790757">pc</a></span><span class="op" id="1778038">)</span><span class="op" id="1778039">,</span>&nbsp;<span class="string" id="1778041">&#34;\n&#34;</span><span class="op" id="1778045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778049">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778053"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1778060">(</span><span class="string" id="1778061">&#34;traceback&nbsp;has&nbsp;leftover&nbsp;defers&#34;</span><span class="op" id="1778092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778099">return</span>&nbsp;<span class="ident" id="1778106"><a href="/gostd/runtime/traceback.go.html#1768526">n</a></span><br>
<span class="lineno"></span><span class="op" id="1778108">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="1778111">func</span>&nbsp;<span class="ident" id="1778116">setArgInfo</span><span class="op" id="1778126">(</span><span class="ident" id="1778127">frame</span>&nbsp;<span class="op" id="1778133">*</span><span class="ident" id="1778134"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790925">stkframe</a></span><span class="op" id="1778142">,</span>&nbsp;<span class="ident" id="1778144">f</span>&nbsp;<span class="op" id="1778146">*</span><span class="ident" id="1778147"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789537">_func</a></span><span class="op" id="1778152">,</span>&nbsp;<span class="ident" id="1778154">needArgMap</span>&nbsp;<span class="builtintype" id="1778165">bool</span><span class="op" id="1778169">)</span>&nbsp;<span class="op" id="1778171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778174"><a href="/gostd/runtime/traceback.go.html#1778127">frame</a></span><span class="op" id="1778179">.</span><span class="ident" id="1778180"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791049">arglen</a></span>&nbsp;<span class="op" id="1778187">=</span>&nbsp;<span class="builtintype" id="1778189">uintptr</span><span class="op" id="1778196">(</span><span class="ident" id="1778197"><a href="/gostd/runtime/traceback.go.html#1778144">f</a></span><span class="op" id="1778198">.</span><span class="ident" id="1778199"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789583">args</a></span><span class="op" id="1778203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778206">if</span>&nbsp;<span class="ident" id="1778209"><a href="/gostd/runtime/traceback.go.html#1778154">needArgMap</a></span>&nbsp;<span class="op" id="1778220">&amp;&amp;</span>&nbsp;<span class="ident" id="1778223"><a href="/gostd/runtime/traceback.go.html#1778144">f</a></span><span class="op" id="1778224">.</span><span class="ident" id="1778225"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789583">args</a></span>&nbsp;<span class="op" id="1778230">==</span>&nbsp;<span class="ident" id="1778233"><a href="/gostd/runtime/symtab.go.html#1749704">_ArgsSizeUnknown</a></span>&nbsp;<span class="op" id="1778250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1778254">//&nbsp;Extract&nbsp;argument&nbsp;bitmaps&nbsp;for&nbsp;reflect&nbsp;stubs&nbsp;from&nbsp;the&nbsp;calls&nbsp;they&nbsp;made&nbsp;to&nbsp;reflect.</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778339">switch</span>&nbsp;<span class="ident" id="1778346"><a href="/gostd/runtime/symtab.go.html#1754530">gofuncname</a></span><span class="op" id="1778356">(</span><span class="ident" id="1778357"><a href="/gostd/runtime/traceback.go.html#1778144">f</a></span><span class="op" id="1778358">)</span>&nbsp;<span class="op" id="1778360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778364">case</span>&nbsp;<span class="string" id="1778369">&#34;reflect.makeFuncStub&#34;</span><span class="op" id="1778391">,</span>&nbsp;<span class="string" id="1778393">&#34;reflect.methodValueCall&#34;</span><span class="op" id="1778418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778423">arg0</span>&nbsp;<span class="op" id="1778428">:=</span>&nbsp;<span class="ident" id="1778431"><a href="/gostd/runtime/traceback.go.html#1778127">frame</a></span><span class="op" id="1778436">.</span><span class="ident" id="1778437"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790997">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778443">if</span>&nbsp;<span class="ident" id="1778446"><a href="/gostd/runtime/traceback.go.html#1764194">usesLR</a></span>&nbsp;<span class="op" id="1778453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778459"><a href="/gostd/runtime/traceback.go.html#1778423">arg0</a></span>&nbsp;<span class="op" id="1778464">+=</span>&nbsp;<span class="ident" id="1778467"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778483">fn</span>&nbsp;<span class="op" id="1778486">:=</span>&nbsp;<span class="op" id="1778489">*</span><span class="op" id="1778490">(</span><span class="op" id="1778491">*</span><span class="op" id="1778492">*</span><span class="op" id="1778493">[</span><span class="num" id="1778494">2</span><span class="op" id="1778495">]</span><span class="builtintype" id="1778496">uintptr</span><span class="op" id="1778503">)</span><span class="op" id="1778504">(</span><span class="ident" id="1778505"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1778511">.</span><span class="ident" id="1778512">Pointer</span><span class="op" id="1778519">(</span><span class="ident" id="1778520"><a href="/gostd/runtime/traceback.go.html#1778423">arg0</a></span><span class="op" id="1778524">)</span><span class="op" id="1778525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778530">if</span>&nbsp;<span class="ident" id="1778533"><a href="/gostd/runtime/traceback.go.html#1778483">fn</a></span><span class="op" id="1778535">[</span><span class="num" id="1778536">0</span><span class="op" id="1778537">]</span>&nbsp;<span class="op" id="1778539">!=</span>&nbsp;<span class="ident" id="1778542"><a href="/gostd/runtime/traceback.go.html#1778144">f</a></span><span class="op" id="1778543">.</span><span class="ident" id="1778544"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1778550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1778556">print</span><span class="op" id="1778561">(</span><span class="string" id="1778562">&#34;runtime:&nbsp;confused&nbsp;by&nbsp;&#34;</span><span class="op" id="1778585">,</span>&nbsp;<span class="ident" id="1778587"><a href="/gostd/runtime/symtab.go.html#1754530">gofuncname</a></span><span class="op" id="1778597">(</span><span class="ident" id="1778598"><a href="/gostd/runtime/traceback.go.html#1778144">f</a></span><span class="op" id="1778599">)</span><span class="op" id="1778600">,</span>&nbsp;<span class="string" id="1778602">&#34;\n&#34;</span><span class="op" id="1778606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778612"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1778619">(</span><span class="string" id="1778620">&#34;reflect&nbsp;mismatch&#34;</span><span class="op" id="1778638">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778648">bv</span>&nbsp;<span class="op" id="1778651">:=</span>&nbsp;<span class="op" id="1778654">(</span><span class="op" id="1778655">*</span><span class="ident" id="1778656"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795437">bitvector</a></span><span class="op" id="1778665">)</span><span class="op" id="1778666">(</span><span class="ident" id="1778667"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1778673">.</span><span class="ident" id="1778674">Pointer</span><span class="op" id="1778681">(</span><span class="ident" id="1778682"><a href="/gostd/runtime/traceback.go.html#1778483">fn</a></span><span class="op" id="1778684">[</span><span class="num" id="1778685">1</span><span class="op" id="1778686">]</span><span class="op" id="1778687">)</span><span class="op" id="1778688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778693"><a href="/gostd/runtime/traceback.go.html#1778127">frame</a></span><span class="op" id="1778698">.</span><span class="ident" id="1778699"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791049">arglen</a></span>&nbsp;<span class="op" id="1778706">=</span>&nbsp;<span class="builtintype" id="1778708">uintptr</span><span class="op" id="1778715">(</span><span class="ident" id="1778716"><a href="/gostd/runtime/traceback.go.html#1778648">bv</a></span><span class="op" id="1778718">.</span><span class="ident" id="1778719"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1795457">n</a></span>&nbsp;<span class="op" id="1778721">/</span>&nbsp;<span class="num" id="1778723">2</span>&nbsp;<span class="op" id="1778725">*</span>&nbsp;<span class="ident" id="1778727"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1778734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778739"><a href="/gostd/runtime/traceback.go.html#1778127">frame</a></span><span class="op" id="1778744">.</span><span class="ident" id="1778745"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791065">argmap</a></span>&nbsp;<span class="op" id="1778752">=</span>&nbsp;<span class="ident" id="1778754"><a href="/gostd/runtime/traceback.go.html#1778648">bv</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778759">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1778762">}</span><br>
<span class="lineno"></span><span class="op" id="1778764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1778767">func</span>&nbsp;<span class="ident" id="1778772">printcreatedby</span><span class="op" id="1778786">(</span><span class="ident" id="1778787">gp</span>&nbsp;<span class="op" id="1778790">*</span><span class="ident" id="1778791"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1778792">)</span>&nbsp;<span class="op" id="1778794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1778797">//&nbsp;Show&nbsp;what&nbsp;created&nbsp;goroutine,&nbsp;except&nbsp;main&nbsp;goroutine&nbsp;(goid&nbsp;1).</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778862">pc</span>&nbsp;<span class="op" id="1778865">:=</span>&nbsp;<span class="ident" id="1778868"><a href="/gostd/runtime/traceback.go.html#1778787">gp</a></span><span class="op" id="1778870">.</span><span class="ident" id="1778871"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787740">gopc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778877">f</span>&nbsp;<span class="op" id="1778879">:=</span>&nbsp;<span class="ident" id="1778882"><a href="/gostd/runtime/symtab.go.html#1753026">findfunc</a></span><span class="op" id="1778890">(</span><span class="ident" id="1778891"><a href="/gostd/runtime/traceback.go.html#1778862">pc</a></span><span class="op" id="1778893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1778896">if</span>&nbsp;<span class="ident" id="1778899"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span>&nbsp;<span class="op" id="1778901">!=</span>&nbsp;<span class="builtintype" id="1778904">nil</span>&nbsp;<span class="op" id="1778908">&amp;&amp;</span>&nbsp;<span class="ident" id="1778911"><a href="/gostd/runtime/traceback.go.html#1780992">showframe</a></span><span class="op" id="1778920">(</span><span class="ident" id="1778921"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1778922">,</span>&nbsp;<span class="ident" id="1778924"><a href="/gostd/runtime/traceback.go.html#1778787">gp</a></span><span class="op" id="1778926">)</span>&nbsp;<span class="op" id="1778928">&amp;&amp;</span>&nbsp;<span class="ident" id="1778931"><a href="/gostd/runtime/traceback.go.html#1778787">gp</a></span><span class="op" id="1778933">.</span><span class="ident" id="1778934"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787464">goid</a></span>&nbsp;<span class="op" id="1778939">!=</span>&nbsp;<span class="num" id="1778942">1</span>&nbsp;<span class="op" id="1778944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1778948">print</span><span class="op" id="1778953">(</span><span class="string" id="1778954">&#34;created&nbsp;by&nbsp;&#34;</span><span class="op" id="1778967">,</span>&nbsp;<span class="ident" id="1778969"><a href="/gostd/runtime/symtab.go.html#1754530">gofuncname</a></span><span class="op" id="1778979">(</span><span class="ident" id="1778980"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1778981">)</span><span class="op" id="1778982">,</span>&nbsp;<span class="string" id="1778984">&#34;\n&#34;</span><span class="op" id="1778988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1778992">tracepc</span>&nbsp;<span class="op" id="1779000">:=</span>&nbsp;<span class="ident" id="1779003"><a href="/gostd/runtime/traceback.go.html#1778862">pc</a></span>&nbsp;<span class="comment" id="1779006">//&nbsp;back&nbsp;up&nbsp;to&nbsp;CALL&nbsp;instruction&nbsp;for&nbsp;funcline.</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1779053">if</span>&nbsp;<span class="ident" id="1779056"><a href="/gostd/runtime/traceback.go.html#1778862">pc</a></span>&nbsp;<span class="op" id="1779059">&gt;</span>&nbsp;<span class="ident" id="1779061"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1779062">.</span><span class="ident" id="1779063"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1779069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1779074"><a href="/gostd/runtime/traceback.go.html#1778992">tracepc</a></span>&nbsp;<span class="op" id="1779082">-=</span>&nbsp;<span class="ident" id="1779085"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791816">_PCQuantum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1779098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1779102">var</span>&nbsp;<span class="ident" id="1779106">file</span>&nbsp;<span class="builtintype" id="1779111">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1779120">line</span>&nbsp;<span class="op" id="1779125">:=</span>&nbsp;<span class="ident" id="1779128"><a href="/gostd/runtime/symtab.go.html#1755049">funcline</a></span><span class="op" id="1779136">(</span><span class="ident" id="1779137"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1779138">,</span>&nbsp;<span class="ident" id="1779140"><a href="/gostd/runtime/traceback.go.html#1778992">tracepc</a></span><span class="op" id="1779147">,</span>&nbsp;<span class="op" id="1779149">&amp;</span><span class="ident" id="1779150"><a href="/gostd/runtime/traceback.go.html#1779106">file</a></span><span class="op" id="1779154">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1779158">print</span><span class="op" id="1779163">(</span><span class="string" id="1779164">&#34;\t&#34;</span><span class="op" id="1779168">,</span>&nbsp;<span class="ident" id="1779170"><a href="/gostd/runtime/traceback.go.html#1779106">file</a></span><span class="op" id="1779174">,</span>&nbsp;<span class="string" id="1779176">&#34;:&#34;</span><span class="op" id="1779179">,</span>&nbsp;<span class="ident" id="1779181"><a href="/gostd/runtime/traceback.go.html#1779120">line</a></span><span class="op" id="1779185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1779189">if</span>&nbsp;<span class="ident" id="1779192"><a href="/gostd/runtime/traceback.go.html#1778862">pc</a></span>&nbsp;<span class="op" id="1779195">&gt;</span>&nbsp;<span class="ident" id="1779197"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1779198">.</span><span class="ident" id="1779199"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span>&nbsp;<span class="op" id="1779205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1779210">print</span><span class="op" id="1779215">(</span><span class="string" id="1779216">&#34;&nbsp;+&#34;</span><span class="op" id="1779220">,</span>&nbsp;<span class="ident" id="1779222"><a href="/gostd/runtime/print1.go.html#1664817">hex</a></span><span class="op" id="1779225">(</span><span class="ident" id="1779226"><a href="/gostd/runtime/traceback.go.html#1778862">pc</a></span><span class="op" id="1779228">-</span><span class="ident" id="1779229"><a href="/gostd/runtime/traceback.go.html#1778877">f</a></span><span class="op" id="1779230">.</span><span class="ident" id="1779231"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span><span class="op" id="1779236">)</span><span class="op" id="1779237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1779241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1779245">print</span><span class="op" id="1779250">(</span><span class="string" id="1779251">&#34;\n&#34;</span><span class="op" id="1779255">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1779258">}</span><br>
<span class="lineno"></span><span class="op" id="1779260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1779263">func</span>&nbsp;<span class="ident" id="1779268">traceback</span><span class="op" id="1779277">(</span><span class="ident" id="1779278">pc</span>&nbsp;<span class="builtintype" id="1779281">uintptr</span><span class="op" id="1779288">,</span>&nbsp;<span class="ident" id="1779290">sp</span>&nbsp;<span class="builtintype" id="1779293">uintptr</span><span class="op" id="1779300">,</span>&nbsp;<span class="ident" id="1779302">lr</span>&nbsp;<span class="builtintype" id="1779305">uintptr</span><span class="op" id="1779312">,</span>&nbsp;<span class="ident" id="1779314">gp</span>&nbsp;<span class="op" id="1779317">*</span><span class="ident" id="1779318"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1779319">)</span>&nbsp;<span class="op" id="1779321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1779324"><a href="/gostd/runtime/traceback.go.html#1779881">traceback1</a></span><span class="op" id="1779334">(</span><span class="ident" id="1779335"><a href="/gostd/runtime/traceback.go.html#1779278">pc</a></span><span class="op" id="1779337">,</span>&nbsp;<span class="ident" id="1779339"><a href="/gostd/runtime/traceback.go.html#1779290">sp</a></span><span class="op" id="1779341">,</span>&nbsp;<span class="ident" id="1779343"><a href="/gostd/runtime/traceback.go.html#1779302">lr</a></span><span class="op" id="1779345">,</span>&nbsp;<span class="ident" id="1779347"><a href="/gostd/runtime/traceback.go.html#1779314">gp</a></span><span class="op" id="1779349">,</span>&nbsp;<span class="num" id="1779351">0</span><span class="op" id="1779352">)</span><br>
<span class="lineno">495</span><span class="op" id="1779354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1779357">//&nbsp;tracebacktrap&nbsp;is&nbsp;like&nbsp;traceback&nbsp;but&nbsp;expects&nbsp;that&nbsp;the&nbsp;PC&nbsp;and&nbsp;SP&nbsp;were&nbsp;obtained</span><br>
<span class="lineno"></span><span class="comment" id="1779437">//&nbsp;from&nbsp;a&nbsp;trap,&nbsp;not&nbsp;from&nbsp;gp-&gt;sched&nbsp;or&nbsp;gp-&gt;syscallpc/gp-&gt;syscallsp&nbsp;or&nbsp;getcallerpc/getcallersp.</span><br>
<span class="lineno"></span><span class="comment" id="1779531">//&nbsp;Because&nbsp;they&nbsp;are&nbsp;from&nbsp;a&nbsp;trap&nbsp;instead&nbsp;of&nbsp;from&nbsp;a&nbsp;saved&nbsp;pair,</span><br>
<span class="lineno">500</span><span class="comment" id="1779593">//&nbsp;the&nbsp;initial&nbsp;PC&nbsp;must&nbsp;not&nbsp;be&nbsp;rewound&nbsp;to&nbsp;the&nbsp;previous&nbsp;instruction.</span><br>
<span class="lineno"></span><span class="comment" id="1779660">//&nbsp;(All&nbsp;the&nbsp;saved&nbsp;pairs&nbsp;record&nbsp;a&nbsp;PC&nbsp;that&nbsp;is&nbsp;a&nbsp;return&nbsp;address,&nbsp;so&nbsp;we</span><br>
<span class="lineno"></span><span class="comment" id="1779728">//&nbsp;rewind&nbsp;it&nbsp;into&nbsp;the&nbsp;CALL&nbsp;instruction.)</span><br>
<span class="lineno"></span><span class="keyword" id="1779769">func</span>&nbsp;<span class="ident" id="1779774">tracebacktrap</span><span class="op" id="1779787">(</span><span class="ident" id="1779788">pc</span>&nbsp;<span class="builtintype" id="1779791">uintptr</span><span class="op" id="1779798">,</span>&nbsp;<span class="ident" id="1779800">sp</span>&nbsp;<span class="builtintype" id="1779803">uintptr</span><span class="op" id="1779810">,</span>&nbsp;<span class="ident" id="1779812">lr</span>&nbsp;<span class="builtintype" id="1779815">uintptr</span><span class="op" id="1779822">,</span>&nbsp;<span class="ident" id="1779824">gp</span>&nbsp;<span class="op" id="1779827">*</span><span class="ident" id="1779828"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1779829">)</span>&nbsp;<span class="op" id="1779831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1779834"><a href="/gostd/runtime/traceback.go.html#1779881">traceback1</a></span><span class="op" id="1779844">(</span><span class="ident" id="1779845"><a href="/gostd/runtime/traceback.go.html#1779788">pc</a></span><span class="op" id="1779847">,</span>&nbsp;<span class="ident" id="1779849"><a href="/gostd/runtime/traceback.go.html#1779800">sp</a></span><span class="op" id="1779851">,</span>&nbsp;<span class="ident" id="1779853"><a href="/gostd/runtime/traceback.go.html#1779812">lr</a></span><span class="op" id="1779855">,</span>&nbsp;<span class="ident" id="1779857"><a href="/gostd/runtime/traceback.go.html#1779824">gp</a></span><span class="op" id="1779859">,</span>&nbsp;<span class="ident" id="1779861"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791122">_TraceTrap</a></span><span class="op" id="1779871">)</span><br>
<span class="lineno">505</span><span class="op" id="1779873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1779876">func</span>&nbsp;<span class="ident" id="1779881">traceback1</span><span class="op" id="1779891">(</span><span class="ident" id="1779892">pc</span>&nbsp;<span class="builtintype" id="1779895">uintptr</span><span class="op" id="1779902">,</span>&nbsp;<span class="ident" id="1779904">sp</span>&nbsp;<span class="builtintype" id="1779907">uintptr</span><span class="op" id="1779914">,</span>&nbsp;<span class="ident" id="1779916">lr</span>&nbsp;<span class="builtintype" id="1779919">uintptr</span><span class="op" id="1779926">,</span>&nbsp;<span class="ident" id="1779928">gp</span>&nbsp;<span class="op" id="1779931">*</span><span class="ident" id="1779932"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1779933">,</span>&nbsp;<span class="ident" id="1779935">flags</span>&nbsp;<span class="builtintype" id="1779941">uint</span><span class="op" id="1779945">)</span>&nbsp;<span class="op" id="1779947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1779950">var</span>&nbsp;<span class="ident" id="1779954">n</span>&nbsp;<span class="builtintype" id="1779956">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1779961">if</span>&nbsp;<span class="ident" id="1779964"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1779975">(</span><span class="ident" id="1779976"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1779978">)</span><span class="op" id="1779979">&amp;^</span><span class="ident" id="1779981"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="op" id="1779988">==</span>&nbsp;<span class="ident" id="1779991"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785814">_Gsyscall</a></span>&nbsp;<span class="op" id="1780001">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1780005">//&nbsp;Override&nbsp;registers&nbsp;if&nbsp;blocked&nbsp;in&nbsp;system&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780056"><a href="/gostd/runtime/traceback.go.html#1779892">pc</a></span>&nbsp;<span class="op" id="1780059">=</span>&nbsp;<span class="ident" id="1780061"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1780063">.</span><span class="ident" id="1780064"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787402">syscallpc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780076"><a href="/gostd/runtime/traceback.go.html#1779904">sp</a></span>&nbsp;<span class="op" id="1780079">=</span>&nbsp;<span class="ident" id="1780081"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1780083">.</span><span class="ident" id="1780084"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787383">syscallsp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780096"><a href="/gostd/runtime/traceback.go.html#1779935">flags</a></span>&nbsp;<span class="op" id="1780102">&amp;^=</span>&nbsp;<span class="ident" id="1780106"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791122">_TraceTrap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1780118">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1780121">//&nbsp;Print&nbsp;traceback.&nbsp;By&nbsp;default,&nbsp;omits&nbsp;runtime&nbsp;frames.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1780176">//&nbsp;If&nbsp;that&nbsp;means&nbsp;we&nbsp;print&nbsp;nothing&nbsp;at&nbsp;all,&nbsp;repeat&nbsp;forcing&nbsp;all&nbsp;frames&nbsp;printed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780254"><a href="/gostd/runtime/traceback.go.html#1779954">n</a></span>&nbsp;<span class="op" id="1780256">=</span>&nbsp;<span class="ident" id="1780258"><a href="/gostd/runtime/traceback.go.html#1766210">gentraceback</a></span><span class="op" id="1780270">(</span><span class="ident" id="1780271"><a href="/gostd/runtime/traceback.go.html#1779892">pc</a></span><span class="op" id="1780273">,</span>&nbsp;<span class="ident" id="1780275"><a href="/gostd/runtime/traceback.go.html#1779904">sp</a></span><span class="op" id="1780277">,</span>&nbsp;<span class="ident" id="1780279"><a href="/gostd/runtime/traceback.go.html#1779916">lr</a></span><span class="op" id="1780281">,</span>&nbsp;<span class="ident" id="1780283"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1780285">,</span>&nbsp;<span class="num" id="1780287">0</span><span class="op" id="1780288">,</span>&nbsp;<span class="builtintype" id="1780290">nil</span><span class="op" id="1780293">,</span>&nbsp;<span class="ident" id="1780295"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791143">_TracebackMaxFrames</a></span><span class="op" id="1780314">,</span>&nbsp;<span class="builtintype" id="1780316">nil</span><span class="op" id="1780319">,</span>&nbsp;<span class="builtintype" id="1780321">nil</span><span class="op" id="1780324">,</span>&nbsp;<span class="ident" id="1780326"><a href="/gostd/runtime/traceback.go.html#1779935">flags</a></span><span class="op" id="1780331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780334">if</span>&nbsp;<span class="ident" id="1780337"><a href="/gostd/runtime/traceback.go.html#1779954">n</a></span>&nbsp;<span class="op" id="1780339">==</span>&nbsp;<span class="num" id="1780342">0</span>&nbsp;<span class="op" id="1780344">&amp;&amp;</span>&nbsp;<span class="op" id="1780347">(</span><span class="ident" id="1780348"><a href="/gostd/runtime/traceback.go.html#1779935">flags</a></span><span class="op" id="1780353">&amp;</span><span class="ident" id="1780354"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791092">_TraceRuntimeFrames</a></span><span class="op" id="1780373">)</span>&nbsp;<span class="op" id="1780375">==</span>&nbsp;<span class="num" id="1780378">0</span>&nbsp;<span class="op" id="1780380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780384"><a href="/gostd/runtime/traceback.go.html#1779954">n</a></span>&nbsp;<span class="op" id="1780386">=</span>&nbsp;<span class="ident" id="1780388"><a href="/gostd/runtime/traceback.go.html#1766210">gentraceback</a></span><span class="op" id="1780400">(</span><span class="ident" id="1780401"><a href="/gostd/runtime/traceback.go.html#1779892">pc</a></span><span class="op" id="1780403">,</span>&nbsp;<span class="ident" id="1780405"><a href="/gostd/runtime/traceback.go.html#1779904">sp</a></span><span class="op" id="1780407">,</span>&nbsp;<span class="ident" id="1780409"><a href="/gostd/runtime/traceback.go.html#1779916">lr</a></span><span class="op" id="1780411">,</span>&nbsp;<span class="ident" id="1780413"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1780415">,</span>&nbsp;<span class="num" id="1780417">0</span><span class="op" id="1780418">,</span>&nbsp;<span class="builtintype" id="1780420">nil</span><span class="op" id="1780423">,</span>&nbsp;<span class="ident" id="1780425"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791143">_TracebackMaxFrames</a></span><span class="op" id="1780444">,</span>&nbsp;<span class="builtintype" id="1780446">nil</span><span class="op" id="1780449">,</span>&nbsp;<span class="builtintype" id="1780451">nil</span><span class="op" id="1780454">,</span>&nbsp;<span class="ident" id="1780456"><a href="/gostd/runtime/traceback.go.html#1779935">flags</a></span><span class="op" id="1780461">|</span><span class="ident" id="1780462"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791092">_TraceRuntimeFrames</a></span><span class="op" id="1780481">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1780484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780487">if</span>&nbsp;<span class="ident" id="1780490"><a href="/gostd/runtime/traceback.go.html#1779954">n</a></span>&nbsp;<span class="op" id="1780492">==</span>&nbsp;<span class="ident" id="1780495"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791143">_TracebackMaxFrames</a></span>&nbsp;<span class="op" id="1780515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1780519">print</span><span class="op" id="1780524">(</span><span class="string" id="1780525">&#34;...additional&nbsp;frames&nbsp;elided...\n&#34;</span><span class="op" id="1780559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1780562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780565"><a href="/gostd/runtime/traceback.go.html#1778772">printcreatedby</a></span><span class="op" id="1780579">(</span><span class="ident" id="1780580"><a href="/gostd/runtime/traceback.go.html#1779928">gp</a></span><span class="op" id="1780582">)</span><br>
<span class="lineno">525</span><span class="op" id="1780584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1780587">func</span>&nbsp;<span class="ident" id="1780592">callers</span><span class="op" id="1780599">(</span><span class="ident" id="1780600">skip</span>&nbsp;<span class="builtintype" id="1780605">int</span><span class="op" id="1780608">,</span>&nbsp;<span class="ident" id="1780610">pcbuf</span>&nbsp;<span class="op" id="1780616">*</span><span class="builtintype" id="1780617">uintptr</span><span class="op" id="1780624">,</span>&nbsp;<span class="ident" id="1780626">m</span>&nbsp;<span class="builtintype" id="1780628">int</span><span class="op" id="1780631">)</span>&nbsp;<span class="builtintype" id="1780633">int</span>&nbsp;<span class="op" id="1780637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780640">sp</span>&nbsp;<span class="op" id="1780643">:=</span>&nbsp;<span class="ident" id="1780646"><a href="/gostd/runtime/stubs.go.html#1746458">getcallersp</a></span><span class="op" id="1780657">(</span><span class="ident" id="1780658"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1780664">.</span><span class="ident" id="1780665">Pointer</span><span class="op" id="1780672">(</span><span class="op" id="1780673">&amp;</span><span class="ident" id="1780674"><a href="/gostd/runtime/traceback.go.html#1780600">skip</a></span><span class="op" id="1780678">)</span><span class="op" id="1780679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780682">pc</span>&nbsp;<span class="op" id="1780685">:=</span>&nbsp;<span class="builtintype" id="1780688">uintptr</span><span class="op" id="1780695">(</span><span class="ident" id="1780696"><a href="/gostd/runtime/stubs.go.html#1746397">getcallerpc</a></span><span class="op" id="1780707">(</span><span class="ident" id="1780708"><a href="/gostd/runtime/traceback.go.html#1762945">unsafe</a></span><span class="op" id="1780714">.</span><span class="ident" id="1780715">Pointer</span><span class="op" id="1780722">(</span><span class="op" id="1780723">&amp;</span><span class="ident" id="1780724"><a href="/gostd/runtime/traceback.go.html#1780600">skip</a></span><span class="op" id="1780728">)</span><span class="op" id="1780729">)</span><span class="op" id="1780730">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780733">var</span>&nbsp;<span class="ident" id="1780737">n</span>&nbsp;<span class="builtintype" id="1780739">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780744"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1780747">(</span><span class="keyword" id="1780748">func</span><span class="op" id="1780752">(</span><span class="op" id="1780753">)</span>&nbsp;<span class="op" id="1780755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1780759"><a href="/gostd/runtime/traceback.go.html#1780737">n</a></span>&nbsp;<span class="op" id="1780761">=</span>&nbsp;<span class="ident" id="1780763"><a href="/gostd/runtime/traceback.go.html#1766210">gentraceback</a></span><span class="op" id="1780775">(</span><span class="ident" id="1780776"><a href="/gostd/runtime/traceback.go.html#1780682">pc</a></span><span class="op" id="1780778">,</span>&nbsp;<span class="ident" id="1780780"><a href="/gostd/runtime/traceback.go.html#1780640">sp</a></span><span class="op" id="1780782">,</span>&nbsp;<span class="num" id="1780784">0</span><span class="op" id="1780785">,</span>&nbsp;<span class="ident" id="1780787"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1780791">(</span><span class="op" id="1780792">)</span><span class="op" id="1780793">,</span>&nbsp;<span class="ident" id="1780795"><a href="/gostd/runtime/traceback.go.html#1780600">skip</a></span><span class="op" id="1780799">,</span>&nbsp;<span class="ident" id="1780801"><a href="/gostd/runtime/traceback.go.html#1780610">pcbuf</a></span><span class="op" id="1780806">,</span>&nbsp;<span class="ident" id="1780808"><a href="/gostd/runtime/traceback.go.html#1780626">m</a></span><span class="op" id="1780809">,</span>&nbsp;<span class="builtintype" id="1780811">nil</span><span class="op" id="1780814">,</span>&nbsp;<span class="builtintype" id="1780816">nil</span><span class="op" id="1780819">,</span>&nbsp;<span class="num" id="1780821">0</span><span class="op" id="1780822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1780825">}</span><span class="op" id="1780826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780829">return</span>&nbsp;<span class="ident" id="1780836"><a href="/gostd/runtime/traceback.go.html#1780737">n</a></span><br>
<span class="lineno">535</span><span class="op" id="1780838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1780841">func</span>&nbsp;<span class="ident" id="1780846">gcallers</span><span class="op" id="1780854">(</span><span class="ident" id="1780855">gp</span>&nbsp;<span class="op" id="1780858">*</span><span class="ident" id="1780859"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1780860">,</span>&nbsp;<span class="ident" id="1780862">skip</span>&nbsp;<span class="builtintype" id="1780867">int</span><span class="op" id="1780870">,</span>&nbsp;<span class="ident" id="1780872">pcbuf</span>&nbsp;<span class="op" id="1780878">*</span><span class="builtintype" id="1780879">uintptr</span><span class="op" id="1780886">,</span>&nbsp;<span class="ident" id="1780888">m</span>&nbsp;<span class="builtintype" id="1780890">int</span><span class="op" id="1780893">)</span>&nbsp;<span class="builtintype" id="1780895">int</span>&nbsp;<span class="op" id="1780899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1780902">return</span>&nbsp;<span class="ident" id="1780909"><a href="/gostd/runtime/traceback.go.html#1766210">gentraceback</a></span><span class="op" id="1780921">(</span><span class="op" id="1780922">^</span><span class="builtintype" id="1780923">uintptr</span><span class="op" id="1780930">(</span><span class="num" id="1780931">0</span><span class="op" id="1780932">)</span><span class="op" id="1780933">,</span>&nbsp;<span class="op" id="1780935">^</span><span class="builtintype" id="1780936">uintptr</span><span class="op" id="1780943">(</span><span class="num" id="1780944">0</span><span class="op" id="1780945">)</span><span class="op" id="1780946">,</span>&nbsp;<span class="num" id="1780948">0</span><span class="op" id="1780949">,</span>&nbsp;<span class="ident" id="1780951"><a href="/gostd/runtime/traceback.go.html#1780855">gp</a></span><span class="op" id="1780953">,</span>&nbsp;<span class="ident" id="1780955"><a href="/gostd/runtime/traceback.go.html#1780862">skip</a></span><span class="op" id="1780959">,</span>&nbsp;<span class="ident" id="1780961"><a href="/gostd/runtime/traceback.go.html#1780872">pcbuf</a></span><span class="op" id="1780966">,</span>&nbsp;<span class="ident" id="1780968"><a href="/gostd/runtime/traceback.go.html#1780888">m</a></span><span class="op" id="1780969">,</span>&nbsp;<span class="builtintype" id="1780971">nil</span><span class="op" id="1780974">,</span>&nbsp;<span class="builtintype" id="1780976">nil</span><span class="op" id="1780979">,</span>&nbsp;<span class="num" id="1780981">0</span><span class="op" id="1780982">)</span><br>
<span class="lineno"></span><span class="op" id="1780984">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span><span class="keyword" id="1780987">func</span>&nbsp;<span class="ident" id="1780992">showframe</span><span class="op" id="1781001">(</span><span class="ident" id="1781002">f</span>&nbsp;<span class="op" id="1781004">*</span><span class="ident" id="1781005"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789537">_func</a></span><span class="op" id="1781010">,</span>&nbsp;<span class="ident" id="1781012">gp</span>&nbsp;<span class="op" id="1781015">*</span><span class="ident" id="1781016"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1781017">)</span>&nbsp;<span class="builtintype" id="1781019">bool</span>&nbsp;<span class="op" id="1781024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781027">g</span>&nbsp;<span class="op" id="1781029">:=</span>&nbsp;<span class="ident" id="1781032"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1781036">(</span><span class="op" id="1781037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781040">if</span>&nbsp;<span class="ident" id="1781043"><a href="/gostd/runtime/traceback.go.html#1781027">g</a></span><span class="op" id="1781044">.</span><span class="ident" id="1781045"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1781046">.</span><span class="ident" id="1781047"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787978">throwing</a></span>&nbsp;<span class="op" id="1781056">&gt;</span>&nbsp;<span class="num" id="1781058">0</span>&nbsp;<span class="op" id="1781060">&amp;&amp;</span>&nbsp;<span class="ident" id="1781063"><a href="/gostd/runtime/traceback.go.html#1781012">gp</a></span>&nbsp;<span class="op" id="1781066">!=</span>&nbsp;<span class="builtintype" id="1781069">nil</span>&nbsp;<span class="op" id="1781073">&amp;&amp;</span>&nbsp;<span class="op" id="1781076">(</span><span class="ident" id="1781077"><a href="/gostd/runtime/traceback.go.html#1781012">gp</a></span>&nbsp;<span class="op" id="1781080">==</span>&nbsp;<span class="ident" id="1781083"><a href="/gostd/runtime/traceback.go.html#1781027">g</a></span><span class="op" id="1781084">.</span><span class="ident" id="1781085"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1781086">.</span><span class="ident" id="1781087"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1781092">||</span>&nbsp;<span class="ident" id="1781095"><a href="/gostd/runtime/traceback.go.html#1781012">gp</a></span>&nbsp;<span class="op" id="1781098">==</span>&nbsp;<span class="ident" id="1781101"><a href="/gostd/runtime/traceback.go.html#1781027">g</a></span><span class="op" id="1781102">.</span><span class="ident" id="1781103"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1781104">.</span><span class="ident" id="1781105"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787921">caughtsig</a></span><span class="op" id="1781114">)</span>&nbsp;<span class="op" id="1781116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781120">return</span>&nbsp;<span class="builtintype" id="1781127">true</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781136">traceback</span>&nbsp;<span class="op" id="1781146">:=</span>&nbsp;<span class="ident" id="1781149"><a href="/gostd/runtime/stubs.go.html#1746702">gotraceback</a></span><span class="op" id="1781160">(</span><span class="builtintype" id="1781161">nil</span><span class="op" id="1781164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781167">name</span>&nbsp;<span class="op" id="1781172">:=</span>&nbsp;<span class="ident" id="1781175"><a href="/gostd/runtime/stubs.go.html#1744608">gostringnocopy</a></span><span class="op" id="1781189">(</span><span class="ident" id="1781190"><a href="/gostd/runtime/symtab.go.html#1754391">funcname</a></span><span class="op" id="1781198">(</span><span class="ident" id="1781199"><a href="/gostd/runtime/traceback.go.html#1781002">f</a></span><span class="op" id="1781200">)</span><span class="op" id="1781201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1781205">//&nbsp;Special&nbsp;case:&nbsp;always&nbsp;show&nbsp;runtime.panic&nbsp;frame,&nbsp;so&nbsp;that&nbsp;we&nbsp;can</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1781271">//&nbsp;see&nbsp;where&nbsp;a&nbsp;panic&nbsp;started&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;a&nbsp;stack&nbsp;trace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1781333">//&nbsp;See&nbsp;golang.org/issue/5832.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781364">if</span>&nbsp;<span class="ident" id="1781367"><a href="/gostd/runtime/traceback.go.html#1781167">name</a></span>&nbsp;<span class="op" id="1781372">==</span>&nbsp;<span class="string" id="1781375">&#34;runtime.panic&#34;</span>&nbsp;<span class="op" id="1781391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781395">return</span>&nbsp;<span class="builtintype" id="1781402">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1781408">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781412">return</span>&nbsp;<span class="ident" id="1781419"><a href="/gostd/runtime/traceback.go.html#1781136">traceback</a></span>&nbsp;<span class="op" id="1781429">&gt;</span>&nbsp;<span class="num" id="1781431">1</span>&nbsp;<span class="op" id="1781433">||</span>&nbsp;<span class="ident" id="1781436"><a href="/gostd/runtime/traceback.go.html#1781002">f</a></span>&nbsp;<span class="op" id="1781438">!=</span>&nbsp;<span class="builtintype" id="1781441">nil</span>&nbsp;<span class="op" id="1781445">&amp;&amp;</span>&nbsp;<span class="ident" id="1781448"><a href="/gostd/runtime/string.go.html#1738001">contains</a></span><span class="op" id="1781456">(</span><span class="ident" id="1781457"><a href="/gostd/runtime/traceback.go.html#1781167">name</a></span><span class="op" id="1781461">,</span>&nbsp;<span class="string" id="1781463">&#34;.&#34;</span><span class="op" id="1781466">)</span>&nbsp;<span class="op" id="1781468">&amp;&amp;</span>&nbsp;<span class="op" id="1781471">(</span><span class="op" id="1781472">!</span><span class="ident" id="1781473"><a href="/gostd/runtime/string.go.html#1738063">hasprefix</a></span><span class="op" id="1781482">(</span><span class="ident" id="1781483"><a href="/gostd/runtime/traceback.go.html#1781167">name</a></span><span class="op" id="1781487">,</span>&nbsp;<span class="string" id="1781489">&#34;runtime.&#34;</span><span class="op" id="1781499">)</span>&nbsp;<span class="op" id="1781501">||</span>&nbsp;<span class="ident" id="1781504"><a href="/gostd/runtime/traceback.go.html#1781671">isExportedRuntime</a></span><span class="op" id="1781521">(</span><span class="ident" id="1781522"><a href="/gostd/runtime/traceback.go.html#1781167">name</a></span><span class="op" id="1781526">)</span><span class="op" id="1781527">)</span><br>
<span class="lineno"></span><span class="op" id="1781529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1781532">//&nbsp;isExportedRuntime&nbsp;reports&nbsp;whether&nbsp;name&nbsp;is&nbsp;an&nbsp;exported&nbsp;runtime&nbsp;function.</span><br>
<span class="lineno">560</span><span class="comment" id="1781607">//&nbsp;It&nbsp;is&nbsp;only&nbsp;for&nbsp;runtime&nbsp;functions,&nbsp;so&nbsp;ASCII&nbsp;A-Z&nbsp;is&nbsp;fine.</span><br>
<span class="lineno"></span><span class="keyword" id="1781666">func</span>&nbsp;<span class="ident" id="1781671">isExportedRuntime</span><span class="op" id="1781688">(</span><span class="ident" id="1781689">name</span>&nbsp;<span class="builtintype" id="1781694">string</span><span class="op" id="1781700">)</span>&nbsp;<span class="builtintype" id="1781702">bool</span>&nbsp;<span class="op" id="1781707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781710">const</span>&nbsp;<span class="ident" id="1781716">n</span>&nbsp;<span class="op" id="1781718">=</span>&nbsp;<span class="builtinfunc" id="1781720">len</span><span class="op" id="1781723">(</span><span class="string" id="1781724">&#34;runtime.&#34;</span><span class="op" id="1781734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1781737">return</span>&nbsp;<span class="builtinfunc" id="1781744">len</span><span class="op" id="1781747">(</span><span class="ident" id="1781748"><a href="/gostd/runtime/traceback.go.html#1781689">name</a></span><span class="op" id="1781752">)</span>&nbsp;<span class="op" id="1781754">&gt;</span>&nbsp;<span class="ident" id="1781756"><a href="/gostd/runtime/traceback.go.html#1781716">n</a></span>&nbsp;<span class="op" id="1781758">&amp;&amp;</span>&nbsp;<span class="ident" id="1781761"><a href="/gostd/runtime/traceback.go.html#1781689">name</a></span><span class="op" id="1781765">[</span><span class="op" id="1781766">:</span><span class="ident" id="1781767"><a href="/gostd/runtime/traceback.go.html#1781716">n</a></span><span class="op" id="1781768">]</span>&nbsp;<span class="op" id="1781770">==</span>&nbsp;<span class="string" id="1781773">&#34;runtime.&#34;</span>&nbsp;<span class="op" id="1781784">&amp;&amp;</span>&nbsp;<span class="string" id="1781787">&#39;A&#39;</span>&nbsp;<span class="op" id="1781791">&lt;=</span>&nbsp;<span class="ident" id="1781794"><a href="/gostd/runtime/traceback.go.html#1781689">name</a></span><span class="op" id="1781798">[</span><span class="ident" id="1781799"><a href="/gostd/runtime/traceback.go.html#1781716">n</a></span><span class="op" id="1781800">]</span>&nbsp;<span class="op" id="1781802">&amp;&amp;</span>&nbsp;<span class="ident" id="1781805"><a href="/gostd/runtime/traceback.go.html#1781689">name</a></span><span class="op" id="1781809">[</span><span class="ident" id="1781810"><a href="/gostd/runtime/traceback.go.html#1781716">n</a></span><span class="op" id="1781811">]</span>&nbsp;<span class="op" id="1781813">&lt;=</span>&nbsp;<span class="string" id="1781816">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="1781820">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="keyword" id="1781823">var</span>&nbsp;<span class="ident" id="1781827">gStatusStrings</span>&nbsp;<span class="op" id="1781842">=</span>&nbsp;<span class="op" id="1781844">[</span><span class="op" id="1781845">...</span><span class="op" id="1781848">]</span><span class="builtintype" id="1781849">string</span><span class="op" id="1781855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781858"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785756">_Gidle</a></span><span class="op" id="1781864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1781871">&#34;idle&#34;</span><span class="op" id="1781877">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781880"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785773">_Grunnable</a></span><span class="op" id="1781890">:</span>&nbsp;&nbsp;<span class="string" id="1781893">&#34;runnable&#34;</span><span class="op" id="1781903">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781906"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785794">_Grunning</a></span><span class="op" id="1781915">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="1781919">&#34;running&#34;</span><span class="op" id="1781928">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781931"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785814">_Gsyscall</a></span><span class="op" id="1781940">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="1781944">&#34;syscall&#34;</span><span class="op" id="1781953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781956"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785834">_Gwaiting</a></span><span class="op" id="1781965">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="1781969">&#34;waiting&#34;</span><span class="op" id="1781978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1781981"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785882">_Gdead</a></span><span class="op" id="1781987">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1781994">&#34;dead&#34;</span><span class="op" id="1782000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782003"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785899">_Genqueue</a></span><span class="op" id="1782012">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="1782016">&#34;enqueue&#34;</span><span class="op" id="1782025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782028"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785919">_Gcopystack</a></span><span class="op" id="1782039">:</span>&nbsp;<span class="string" id="1782041">&#34;copystack&#34;</span><span class="op" id="1782052">,</span><br>
<span class="lineno">575</span><span class="op" id="1782054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1782057">var</span>&nbsp;<span class="ident" id="1782061">gScanStatusStrings</span>&nbsp;<span class="op" id="1782080">=</span>&nbsp;<span class="op" id="1782082">[</span><span class="op" id="1782083">...</span><span class="op" id="1782086">]</span><span class="builtintype" id="1782087">string</span><span class="op" id="1782093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="1782096">0</span><span class="op" id="1782097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1782108">&#34;scan&#34;</span><span class="op" id="1782114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782117"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785773">_Grunnable</a></span><span class="op" id="1782127">:</span>&nbsp;<span class="string" id="1782129">&#34;scanrunnable&#34;</span><span class="op" id="1782143">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782146"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785794">_Grunning</a></span><span class="op" id="1782155">:</span>&nbsp;&nbsp;<span class="string" id="1782158">&#34;scanrunning&#34;</span><span class="op" id="1782171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782174"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785814">_Gsyscall</a></span><span class="op" id="1782183">:</span>&nbsp;&nbsp;<span class="string" id="1782186">&#34;scansyscall&#34;</span><span class="op" id="1782199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782202"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785834">_Gwaiting</a></span><span class="op" id="1782211">:</span>&nbsp;&nbsp;<span class="string" id="1782214">&#34;scanwaiting&#34;</span><span class="op" id="1782227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782230"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785882">_Gdead</a></span><span class="op" id="1782236">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1782242">&#34;scandead&#34;</span><span class="op" id="1782252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782255"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785899">_Genqueue</a></span><span class="op" id="1782264">:</span>&nbsp;&nbsp;<span class="string" id="1782267">&#34;scanenqueue&#34;</span><span class="op" id="1782280">,</span><br>
<span class="lineno">585</span><span class="op" id="1782282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1782285">func</span>&nbsp;<span class="ident" id="1782290">goroutineheader</span><span class="op" id="1782305">(</span><span class="ident" id="1782306">gp</span>&nbsp;<span class="op" id="1782309">*</span><span class="ident" id="1782310"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1782311">)</span>&nbsp;<span class="op" id="1782313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782316">gpstatus</span>&nbsp;<span class="op" id="1782325">:=</span>&nbsp;<span class="ident" id="1782328"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1782339">(</span><span class="ident" id="1782340"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1782342">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1782346">//&nbsp;Basic&nbsp;string&nbsp;status</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782370">var</span>&nbsp;<span class="ident" id="1782374">status</span>&nbsp;<span class="builtintype" id="1782381">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782389">if</span>&nbsp;<span class="num" id="1782392">0</span>&nbsp;<span class="op" id="1782394">&lt;=</span>&nbsp;<span class="ident" id="1782397"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782406">&amp;&amp;</span>&nbsp;<span class="ident" id="1782409"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782418">&lt;</span>&nbsp;<span class="builtintype" id="1782420">uint32</span><span class="op" id="1782426">(</span><span class="builtinfunc" id="1782427">len</span><span class="op" id="1782430">(</span><span class="ident" id="1782431"><a href="/gostd/runtime/traceback.go.html#1781827">gStatusStrings</a></span><span class="op" id="1782445">)</span><span class="op" id="1782446">)</span>&nbsp;<span class="op" id="1782448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782452"><a href="/gostd/runtime/traceback.go.html#1782374">status</a></span>&nbsp;<span class="op" id="1782459">=</span>&nbsp;<span class="ident" id="1782461"><a href="/gostd/runtime/traceback.go.html#1781827">gStatusStrings</a></span><span class="op" id="1782475">[</span><span class="ident" id="1782476"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span><span class="op" id="1782484">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782487">}</span>&nbsp;<span class="keyword" id="1782489">else</span>&nbsp;<span class="keyword" id="1782494">if</span>&nbsp;<span class="ident" id="1782497"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span><span class="op" id="1782505">&amp;</span><span class="ident" id="1782506"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="op" id="1782513">!=</span>&nbsp;<span class="num" id="1782516">0</span>&nbsp;<span class="op" id="1782518">&amp;&amp;</span>&nbsp;<span class="num" id="1782521">0</span>&nbsp;<span class="op" id="1782523">&lt;=</span>&nbsp;<span class="ident" id="1782526"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span><span class="op" id="1782534">&amp;^</span><span class="ident" id="1782536"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="op" id="1782543">&amp;&amp;</span>&nbsp;<span class="ident" id="1782546"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span><span class="op" id="1782554">&amp;^</span><span class="ident" id="1782556"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="op" id="1782563">&lt;</span>&nbsp;<span class="builtintype" id="1782565">uint32</span><span class="op" id="1782571">(</span><span class="builtinfunc" id="1782572">len</span><span class="op" id="1782575">(</span><span class="ident" id="1782576"><a href="/gostd/runtime/traceback.go.html#1781827">gStatusStrings</a></span><span class="op" id="1782590">)</span><span class="op" id="1782591">)</span>&nbsp;<span class="op" id="1782593">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782597"><a href="/gostd/runtime/traceback.go.html#1782374">status</a></span>&nbsp;<span class="op" id="1782604">=</span>&nbsp;<span class="ident" id="1782606"><a href="/gostd/runtime/traceback.go.html#1781827">gStatusStrings</a></span><span class="op" id="1782620">[</span><span class="ident" id="1782621"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span><span class="op" id="1782629">&amp;^</span><span class="ident" id="1782631"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span><span class="op" id="1782637">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782640">}</span>&nbsp;<span class="keyword" id="1782642">else</span>&nbsp;<span class="op" id="1782647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782651"><a href="/gostd/runtime/traceback.go.html#1782374">status</a></span>&nbsp;<span class="op" id="1782658">=</span>&nbsp;<span class="string" id="1782660">&#34;???&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1782671">//&nbsp;Override.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782685">if</span>&nbsp;<span class="op" id="1782688">(</span><span class="ident" id="1782689"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782698">==</span>&nbsp;<span class="ident" id="1782701"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785834">_Gwaiting</a></span>&nbsp;<span class="op" id="1782711">||</span>&nbsp;<span class="ident" id="1782714"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782723">==</span>&nbsp;<span class="ident" id="1782726"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786043">_Gscanwaiting</a></span><span class="op" id="1782739">)</span>&nbsp;<span class="op" id="1782741">&amp;&amp;</span>&nbsp;<span class="ident" id="1782744"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1782746">.</span><span class="ident" id="1782747"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787493">waitreason</a></span>&nbsp;<span class="op" id="1782758">!=</span>&nbsp;<span class="string" id="1782761">&#34;&#34;</span>&nbsp;<span class="op" id="1782764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782768"><a href="/gostd/runtime/traceback.go.html#1782374">status</a></span>&nbsp;<span class="op" id="1782775">=</span>&nbsp;<span class="ident" id="1782777"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1782779">.</span><span class="ident" id="1782780"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787493">waitreason</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1782792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1782796">//&nbsp;approx&nbsp;time&nbsp;the&nbsp;G&nbsp;is&nbsp;blocked,&nbsp;in&nbsp;minutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782841">var</span>&nbsp;<span class="ident" id="1782845">waitfor</span>&nbsp;<span class="builtintype" id="1782853">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782860"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782869">&amp;^=</span>&nbsp;<span class="ident" id="1782873"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="comment" id="1782880">//&nbsp;drop&nbsp;the&nbsp;scan&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1782902">if</span>&nbsp;<span class="op" id="1782905">(</span><span class="ident" id="1782906"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782915">==</span>&nbsp;<span class="ident" id="1782918"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785834">_Gwaiting</a></span>&nbsp;<span class="op" id="1782928">||</span>&nbsp;<span class="ident" id="1782931"><a href="/gostd/runtime/traceback.go.html#1782316">gpstatus</a></span>&nbsp;<span class="op" id="1782940">==</span>&nbsp;<span class="ident" id="1782943"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785814">_Gsyscall</a></span><span class="op" id="1782952">)</span>&nbsp;<span class="op" id="1782954">&amp;&amp;</span>&nbsp;<span class="ident" id="1782957"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1782959">.</span><span class="ident" id="1782960"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787476">waitsince</a></span>&nbsp;<span class="op" id="1782970">!=</span>&nbsp;<span class="num" id="1782973">0</span>&nbsp;<span class="op" id="1782975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1782979"><a href="/gostd/runtime/traceback.go.html#1782845">waitfor</a></span>&nbsp;<span class="op" id="1782987">=</span>&nbsp;<span class="op" id="1782989">(</span><span class="ident" id="1782990"><a href="/gostd/runtime/stubs.go.html#1743936">nanotime</a></span><span class="op" id="1782998">(</span><span class="op" id="1782999">)</span>&nbsp;<span class="op" id="1783001">-</span>&nbsp;<span class="ident" id="1783003"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1783005">.</span><span class="ident" id="1783006"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787476">waitsince</a></span><span class="op" id="1783015">)</span>&nbsp;<span class="op" id="1783017">/</span>&nbsp;<span class="num" id="1783019">60e9</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783028">print</span><span class="op" id="1783033">(</span><span class="string" id="1783034">&#34;goroutine&nbsp;&#34;</span><span class="op" id="1783046">,</span>&nbsp;<span class="ident" id="1783048"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1783050">.</span><span class="ident" id="1783051"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787464">goid</a></span><span class="op" id="1783055">,</span>&nbsp;<span class="string" id="1783057">&#34;&nbsp;[&#34;</span><span class="op" id="1783061">,</span>&nbsp;<span class="ident" id="1783063"><a href="/gostd/runtime/traceback.go.html#1782374">status</a></span><span class="op" id="1783069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783072">if</span>&nbsp;<span class="ident" id="1783075"><a href="/gostd/runtime/traceback.go.html#1782845">waitfor</a></span>&nbsp;<span class="op" id="1783083">&gt;=</span>&nbsp;<span class="num" id="1783086">1</span>&nbsp;<span class="op" id="1783088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783092">print</span><span class="op" id="1783097">(</span><span class="string" id="1783098">&#34;,&nbsp;&#34;</span><span class="op" id="1783102">,</span>&nbsp;<span class="ident" id="1783104"><a href="/gostd/runtime/traceback.go.html#1782845">waitfor</a></span><span class="op" id="1783111">,</span>&nbsp;<span class="string" id="1783113">&#34;&nbsp;minutes&#34;</span><span class="op" id="1783123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783126">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783129">if</span>&nbsp;<span class="ident" id="1783132"><a href="/gostd/runtime/traceback.go.html#1782306">gp</a></span><span class="op" id="1783134">.</span><span class="ident" id="1783135"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787649">lockedm</a></span>&nbsp;<span class="op" id="1783143">!=</span>&nbsp;<span class="builtintype" id="1783146">nil</span>&nbsp;<span class="op" id="1783150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783154">print</span><span class="op" id="1783159">(</span><span class="string" id="1783160">&#34;,&nbsp;locked&nbsp;to&nbsp;thread&#34;</span><span class="op" id="1783180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783186">print</span><span class="op" id="1783191">(</span><span class="string" id="1783192">&#34;]:\n&#34;</span><span class="op" id="1783198">)</span><br>
<span class="lineno"></span><span class="op" id="1783200">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span><span class="keyword" id="1783203">func</span>&nbsp;<span class="ident" id="1783208">tracebackothers</span><span class="op" id="1783223">(</span><span class="ident" id="1783224">me</span>&nbsp;<span class="op" id="1783227">*</span><span class="ident" id="1783228"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1783229">)</span>&nbsp;<span class="op" id="1783231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783234">level</span>&nbsp;<span class="op" id="1783240">:=</span>&nbsp;<span class="ident" id="1783243"><a href="/gostd/runtime/stubs.go.html#1746702">gotraceback</a></span><span class="op" id="1783254">(</span><span class="builtintype" id="1783255">nil</span><span class="op" id="1783258">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1783262">//&nbsp;Show&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;first,&nbsp;if&nbsp;we&nbsp;haven&#39;t&nbsp;already.</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783323">g</span>&nbsp;<span class="op" id="1783325">:=</span>&nbsp;<span class="ident" id="1783328"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1783332">(</span><span class="op" id="1783333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783336">gp</span>&nbsp;<span class="op" id="1783339">:=</span>&nbsp;<span class="ident" id="1783342"><a href="/gostd/runtime/traceback.go.html#1783323">g</a></span><span class="op" id="1783343">.</span><span class="ident" id="1783344"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1783345">.</span><span class="ident" id="1783346"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783352">if</span>&nbsp;<span class="ident" id="1783355"><a href="/gostd/runtime/traceback.go.html#1783336">gp</a></span>&nbsp;<span class="op" id="1783358">!=</span>&nbsp;<span class="builtintype" id="1783361">nil</span>&nbsp;<span class="op" id="1783365">&amp;&amp;</span>&nbsp;<span class="ident" id="1783368"><a href="/gostd/runtime/traceback.go.html#1783336">gp</a></span>&nbsp;<span class="op" id="1783371">!=</span>&nbsp;<span class="ident" id="1783374"><a href="/gostd/runtime/traceback.go.html#1783224">me</a></span>&nbsp;<span class="op" id="1783377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783381">print</span><span class="op" id="1783386">(</span><span class="string" id="1783387">&#34;\n&#34;</span><span class="op" id="1783391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783395"><a href="/gostd/runtime/traceback.go.html#1782290">goroutineheader</a></span><span class="op" id="1783410">(</span><span class="ident" id="1783411"><a href="/gostd/runtime/traceback.go.html#1783336">gp</a></span><span class="op" id="1783413">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783417"><a href="/gostd/runtime/traceback.go.html#1779268">traceback</a></span><span class="op" id="1783426">(</span><span class="op" id="1783427">^</span><span class="builtintype" id="1783428">uintptr</span><span class="op" id="1783435">(</span><span class="num" id="1783436">0</span><span class="op" id="1783437">)</span><span class="op" id="1783438">,</span>&nbsp;<span class="op" id="1783440">^</span><span class="builtintype" id="1783441">uintptr</span><span class="op" id="1783448">(</span><span class="num" id="1783449">0</span><span class="op" id="1783450">)</span><span class="op" id="1783451">,</span>&nbsp;<span class="num" id="1783453">0</span><span class="op" id="1783454">,</span>&nbsp;<span class="ident" id="1783456"><a href="/gostd/runtime/traceback.go.html#1783336">gp</a></span><span class="op" id="1783458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783465"><a href="/gostd/runtime/lock_futex.go.html#1585337">lock</a></span><span class="op" id="1783469">(</span><span class="op" id="1783470">&amp;</span><span class="ident" id="1783471"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1803629">allglock</a></span><span class="op" id="1783479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783482">for</span>&nbsp;<span class="ident" id="1783486">_</span><span class="op" id="1783487">,</span>&nbsp;<span class="ident" id="1783489">gp</span>&nbsp;<span class="op" id="1783492">:=</span>&nbsp;<span class="keyword" id="1783495">range</span>&nbsp;<span class="ident" id="1783501"><a href="/gostd/runtime/mprof.go.html#1633530">allgs</a></span>&nbsp;<span class="op" id="1783507">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783511">if</span>&nbsp;<span class="ident" id="1783514"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span>&nbsp;<span class="op" id="1783517">==</span>&nbsp;<span class="ident" id="1783520"><a href="/gostd/runtime/traceback.go.html#1783224">me</a></span>&nbsp;<span class="op" id="1783523">||</span>&nbsp;<span class="ident" id="1783526"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span>&nbsp;<span class="op" id="1783529">==</span>&nbsp;<span class="ident" id="1783532"><a href="/gostd/runtime/traceback.go.html#1783323">g</a></span><span class="op" id="1783533">.</span><span class="ident" id="1783534"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1783535">.</span><span class="ident" id="1783536"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span>&nbsp;<span class="op" id="1783541">||</span>&nbsp;<span class="ident" id="1783544"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1783555">(</span><span class="ident" id="1783556"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783558">)</span>&nbsp;<span class="op" id="1783560">==</span>&nbsp;<span class="ident" id="1783563"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785882">_Gdead</a></span>&nbsp;<span class="op" id="1783570">||</span>&nbsp;<span class="ident" id="1783573"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783575">.</span><span class="ident" id="1783576"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787526">issystem</a></span>&nbsp;<span class="op" id="1783585">&amp;&amp;</span>&nbsp;<span class="ident" id="1783588"><a href="/gostd/runtime/traceback.go.html#1783234">level</a></span>&nbsp;<span class="op" id="1783594">&lt;</span>&nbsp;<span class="num" id="1783596">2</span>&nbsp;<span class="op" id="1783598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783603">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783618">print</span><span class="op" id="1783623">(</span><span class="string" id="1783624">&#34;\n&#34;</span><span class="op" id="1783628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783632"><a href="/gostd/runtime/traceback.go.html#1782290">goroutineheader</a></span><span class="op" id="1783647">(</span><span class="ident" id="1783648"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783650">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783654">if</span>&nbsp;<span class="ident" id="1783657"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1783668">(</span><span class="ident" id="1783669"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783671">)</span><span class="op" id="1783672">&amp;^</span><span class="ident" id="1783674"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785941">_Gscan</a></span>&nbsp;<span class="op" id="1783681">==</span>&nbsp;<span class="ident" id="1783684"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785794">_Grunning</a></span>&nbsp;<span class="op" id="1783694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1783699">print</span><span class="op" id="1783704">(</span><span class="string" id="1783705">&#34;\tgoroutine&nbsp;running&nbsp;on&nbsp;other&nbsp;thread;&nbsp;stack&nbsp;unavailable\n&#34;</span><span class="op" id="1783763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783768"><a href="/gostd/runtime/traceback.go.html#1778772">printcreatedby</a></span><span class="op" id="1783782">(</span><span class="ident" id="1783783"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783789">}</span>&nbsp;<span class="keyword" id="1783791">else</span>&nbsp;<span class="op" id="1783796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783801"><a href="/gostd/runtime/traceback.go.html#1779268">traceback</a></span><span class="op" id="1783810">(</span><span class="op" id="1783811">^</span><span class="builtintype" id="1783812">uintptr</span><span class="op" id="1783819">(</span><span class="num" id="1783820">0</span><span class="op" id="1783821">)</span><span class="op" id="1783822">,</span>&nbsp;<span class="op" id="1783824">^</span><span class="builtintype" id="1783825">uintptr</span><span class="op" id="1783832">(</span><span class="num" id="1783833">0</span><span class="op" id="1783834">)</span><span class="op" id="1783835">,</span>&nbsp;<span class="num" id="1783837">0</span><span class="op" id="1783838">,</span>&nbsp;<span class="ident" id="1783840"><a href="/gostd/runtime/traceback.go.html#1783489">gp</a></span><span class="op" id="1783842">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1783849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783852"><a href="/gostd/runtime/lock_futex.go.html#1586629">unlock</a></span><span class="op" id="1783858">(</span><span class="op" id="1783859">&amp;</span><span class="ident" id="1783860"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1803629">allglock</a></span><span class="op" id="1783868">)</span><br>
<span class="lineno"></span><span class="op" id="1783870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="comment" id="1783873">//&nbsp;Does&nbsp;f&nbsp;mark&nbsp;the&nbsp;top&nbsp;of&nbsp;a&nbsp;goroutine&nbsp;stack?</span><br>
<span class="lineno"></span><span class="keyword" id="1783918">func</span>&nbsp;<span class="ident" id="1783923">topofstack</span><span class="op" id="1783933">(</span><span class="ident" id="1783934">f</span>&nbsp;<span class="op" id="1783936">*</span><span class="ident" id="1783937"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789537">_func</a></span><span class="op" id="1783942">)</span>&nbsp;<span class="builtintype" id="1783944">bool</span>&nbsp;<span class="op" id="1783949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783952">pc</span>&nbsp;<span class="op" id="1783955">:=</span>&nbsp;<span class="ident" id="1783958"><a href="/gostd/runtime/traceback.go.html#1783934">f</a></span><span class="op" id="1783959">.</span><span class="ident" id="1783960"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1789553">entry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1783967">return</span>&nbsp;<span class="ident" id="1783974"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1783977">==</span>&nbsp;<span class="ident" id="1783980"><a href="/gostd/runtime/traceback.go.html#1764326">goexitPC</a></span>&nbsp;<span class="op" id="1783989">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1783994"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1783997">==</span>&nbsp;<span class="ident" id="1784000"><a href="/gostd/runtime/traceback.go.html#1764410">mstartPC</a></span>&nbsp;<span class="op" id="1784009">||</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1784014"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1784017">==</span>&nbsp;<span class="ident" id="1784020"><a href="/gostd/runtime/traceback.go.html#1764368">mcallPC</a></span>&nbsp;<span class="op" id="1784028">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1784033"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1784036">==</span>&nbsp;<span class="ident" id="1784039"><a href="/gostd/runtime/traceback.go.html#1764389">morestackPC</a></span>&nbsp;<span class="op" id="1784051">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1784056"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1784059">==</span>&nbsp;<span class="ident" id="1784062"><a href="/gostd/runtime/traceback.go.html#1764452">rt0_goPC</a></span>&nbsp;<span class="op" id="1784071">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1784076"><a href="/gostd/runtime/traceback.go.html#1764495">externalthreadhandlerp</a></span>&nbsp;<span class="op" id="1784099">!=</span>&nbsp;<span class="num" id="1784102">0</span>&nbsp;<span class="op" id="1784104">&amp;&amp;</span>&nbsp;<span class="ident" id="1784107"><a href="/gostd/runtime/traceback.go.html#1783952">pc</a></span>&nbsp;<span class="op" id="1784110">==</span>&nbsp;<span class="ident" id="1784113"><a href="/gostd/runtime/traceback.go.html#1764495">externalthreadhandlerp</a></span><br>
<span class="lineno"></span><span class="op" id="1784136">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
