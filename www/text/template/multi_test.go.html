<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8092499">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8092554">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8092608">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8092659">package</span>&nbsp;<span class="ident" id="8092667">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8092677">//&nbsp;Tests&nbsp;for&nbsp;mulitple-template&nbsp;parsing&nbsp;and&nbsp;execution.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8092732">import</span>&nbsp;<span class="op" id="8092739">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8092742">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8092751">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8092758">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8092769">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8092780">&#34;text/template/parse&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8092802">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8092805">const</span>&nbsp;<span class="op" id="8092811">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092814">noError</span>&nbsp;&nbsp;<span class="op" id="8092823">=</span>&nbsp;<span class="ident" id="8092825">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092831">hasError</span>&nbsp;<span class="op" id="8092840">=</span>&nbsp;<span class="ident" id="8092842">false</span><br>
<span class="lineno">20</span><span class="op" id="8092848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8092851">type</span>&nbsp;<span class="ident" id="8092856">multiParseTest</span>&nbsp;<span class="keyword" id="8092871">struct</span>&nbsp;<span class="op" id="8092878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092881">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092889">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092897">input</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092905">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092913">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8092921">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092927">names</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8092935">[</span><span class="op" id="8092936">]</span><span class="builtintype" id="8092937">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092945">results</span>&nbsp;<span class="op" id="8092953">[</span><span class="op" id="8092954">]</span><span class="builtintype" id="8092955">string</span><br>
<span class="lineno"></span><span class="op" id="8092962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8092965">var</span>&nbsp;<span class="ident" id="8092969">multiParseTests</span>&nbsp;<span class="op" id="8092985">=</span>&nbsp;<span class="op" id="8092987">[</span><span class="op" id="8092988">]</span><span class="ident" id="8092989"><a href="/text/template/multi_test.go.html#8092856">multiParseTest</a></span><span class="op" id="8093003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093006">{</span><span class="string" id="8093007">&#34;empty&#34;</span><span class="op" id="8093014">,</span>&nbsp;<span class="string" id="8093016">&#34;&#34;</span><span class="op" id="8093018">,</span>&nbsp;<span class="ident" id="8093020"><a href="/text/template/multi_test.go.html#8092814">noError</a></span><span class="op" id="8093027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093031">nil</span><span class="op" id="8093034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093038">nil</span><span class="op" id="8093041">}</span><span class="op" id="8093042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093045">{</span><span class="string" id="8093046">&#34;one&#34;</span><span class="op" id="8093051">,</span>&nbsp;<span class="string" id="8093053">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;{{end}}`</span><span class="op" id="8093083">,</span>&nbsp;<span class="ident" id="8093085"><a href="/text/template/multi_test.go.html#8092814">noError</a></span><span class="op" id="8093092">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093096">[</span><span class="op" id="8093097">]</span><span class="builtintype" id="8093098">string</span><span class="op" id="8093104">{</span><span class="string" id="8093105">&#34;foo&#34;</span><span class="op" id="8093110">}</span><span class="op" id="8093111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093115">[</span><span class="op" id="8093116">]</span><span class="builtintype" id="8093117">string</span><span class="op" id="8093123">{</span><span class="string" id="8093124">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8093131">}</span><span class="op" id="8093132">}</span><span class="op" id="8093133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093136">{</span><span class="string" id="8093137">&#34;two&#34;</span><span class="op" id="8093142">,</span>&nbsp;<span class="string" id="8093144">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;{{end}}{{define&nbsp;&#34;bar&#34;}}&nbsp;BAR&nbsp;{{end}}`</span><span class="op" id="8093202">,</span>&nbsp;<span class="ident" id="8093204"><a href="/text/template/multi_test.go.html#8092814">noError</a></span><span class="op" id="8093211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093215">[</span><span class="op" id="8093216">]</span><span class="builtintype" id="8093217">string</span><span class="op" id="8093223">{</span><span class="string" id="8093224">&#34;foo&#34;</span><span class="op" id="8093229">,</span>&nbsp;<span class="string" id="8093231">&#34;bar&#34;</span><span class="op" id="8093236">}</span><span class="op" id="8093237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093241">[</span><span class="op" id="8093242">]</span><span class="builtintype" id="8093243">string</span><span class="op" id="8093249">{</span><span class="string" id="8093250">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="8093257">,</span>&nbsp;<span class="string" id="8093259">&#34;&nbsp;BAR&nbsp;&#34;</span><span class="op" id="8093266">}</span><span class="op" id="8093267">}</span><span class="op" id="8093268">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093271">//&nbsp;errors</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093282">{</span><span class="string" id="8093283">&#34;missing&nbsp;end&#34;</span><span class="op" id="8093296">,</span>&nbsp;<span class="string" id="8093298">`{{define&nbsp;&#34;foo&#34;}}&nbsp;FOO&nbsp;`</span><span class="op" id="8093321">,</span>&nbsp;<span class="ident" id="8093323"><a href="/text/template/multi_test.go.html#8092831">hasError</a></span><span class="op" id="8093331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093335">nil</span><span class="op" id="8093338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093342">nil</span><span class="op" id="8093345">}</span><span class="op" id="8093346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093349">{</span><span class="string" id="8093350">&#34;malformed&nbsp;name&#34;</span><span class="op" id="8093366">,</span>&nbsp;<span class="string" id="8093368">`{{define&nbsp;&#34;foo}}&nbsp;FOO&nbsp;`</span><span class="op" id="8093390">,</span>&nbsp;<span class="ident" id="8093392"><a href="/text/template/multi_test.go.html#8092831">hasError</a></span><span class="op" id="8093400">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093404">nil</span><span class="op" id="8093407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093411">nil</span><span class="op" id="8093414">}</span><span class="op" id="8093415">,</span><br>
<span class="lineno"></span><span class="op" id="8093417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8093420">func</span>&nbsp;<span class="ident" id="8093425">TestMultiParse</span><span class="op" id="8093439">(</span><span class="ident" id="8093440">t</span>&nbsp;<span class="op" id="8093442">*</span><span class="ident" id="8093443"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8093450">.</span><span class="ident" id="8093451">T</span><span class="op" id="8093452">)</span>&nbsp;<span class="op" id="8093454">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093457">for</span>&nbsp;<span class="ident" id="8093461">_</span><span class="op" id="8093462">,</span>&nbsp;<span class="ident" id="8093464">test</span>&nbsp;<span class="op" id="8093469">:=</span>&nbsp;<span class="keyword" id="8093472">range</span>&nbsp;<span class="ident" id="8093478"><a href="/text/template/multi_test.go.html#8092969">multiParseTests</a></span>&nbsp;<span class="op" id="8093494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093498">template</span><span class="op" id="8093506">,</span>&nbsp;<span class="ident" id="8093508">err</span>&nbsp;<span class="op" id="8093512">:=</span>&nbsp;<span class="ident" id="8093515"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8093518">(</span><span class="string" id="8093519">&#34;root&#34;</span><span class="op" id="8093525">)</span><span class="op" id="8093526">.</span><span class="ident" id="8093527">Parse</span><span class="op" id="8093532">(</span><span class="ident" id="8093533"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093537">.</span><span class="ident" id="8093538">input</span><span class="op" id="8093543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093547">switch</span>&nbsp;<span class="op" id="8093554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093558">case</span>&nbsp;<span class="ident" id="8093563"><a href="/text/template/multi_test.go.html#8093508">err</a></span>&nbsp;<span class="op" id="8093567">==</span>&nbsp;<span class="ident" id="8093570">nil</span>&nbsp;<span class="op" id="8093574">&amp;&amp;</span>&nbsp;<span class="op" id="8093577">!</span><span class="ident" id="8093578"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093582">.</span><span class="ident" id="8093583">ok</span><span class="op" id="8093585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093590"><a href="/text/template/multi_test.go.html#8093440">t</a></span><span class="op" id="8093591">.</span><span class="ident" id="8093592">Errorf</span><span class="op" id="8093598">(</span><span class="string" id="8093599">&#34;%q:&nbsp;expected&nbsp;error;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8093629">,</span>&nbsp;<span class="ident" id="8093631"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093635">.</span><span class="ident" id="8093636">name</span><span class="op" id="8093640">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093645">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093656">case</span>&nbsp;<span class="ident" id="8093661"><a href="/text/template/multi_test.go.html#8093508">err</a></span>&nbsp;<span class="op" id="8093665">!=</span>&nbsp;<span class="ident" id="8093668">nil</span>&nbsp;<span class="op" id="8093672">&amp;&amp;</span>&nbsp;<span class="ident" id="8093675"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093679">.</span><span class="ident" id="8093680">ok</span><span class="op" id="8093682">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093687"><a href="/text/template/multi_test.go.html#8093440">t</a></span><span class="op" id="8093688">.</span><span class="ident" id="8093689">Errorf</span><span class="op" id="8093695">(</span><span class="string" id="8093696">&#34;%q:&nbsp;unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8093722">,</span>&nbsp;<span class="ident" id="8093724"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093728">.</span><span class="ident" id="8093729">name</span><span class="op" id="8093733">,</span>&nbsp;<span class="ident" id="8093735"><a href="/text/template/multi_test.go.html#8093508">err</a></span><span class="op" id="8093738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093743">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093754">case</span>&nbsp;<span class="ident" id="8093759"><a href="/text/template/multi_test.go.html#8093508">err</a></span>&nbsp;<span class="op" id="8093763">!=</span>&nbsp;<span class="ident" id="8093766">nil</span>&nbsp;<span class="op" id="8093770">&amp;&amp;</span>&nbsp;<span class="op" id="8093773">!</span><span class="ident" id="8093774"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093778">.</span><span class="ident" id="8093779">ok</span><span class="op" id="8093781">:</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093786">//&nbsp;expected&nbsp;error,&nbsp;got&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093816">if</span>&nbsp;<span class="op" id="8093819">*</span><span class="ident" id="8093820"><a href="/text/template/exec_test.go.html#8058506">debug</a></span>&nbsp;<span class="op" id="8093826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093832"><a href="/text/template/multi_test.go.html#8092751">fmt</a></span><span class="op" id="8093835">.</span><span class="ident" id="8093836">Printf</span><span class="op" id="8093842">(</span><span class="string" id="8093843">&#34;%s:&nbsp;%s\n\t%s\n&#34;</span><span class="op" id="8093859">,</span>&nbsp;<span class="ident" id="8093861"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093865">.</span><span class="ident" id="8093866">name</span><span class="op" id="8093870">,</span>&nbsp;<span class="ident" id="8093872"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093876">.</span><span class="ident" id="8093877">input</span><span class="op" id="8093882">,</span>&nbsp;<span class="ident" id="8093884"><a href="/text/template/multi_test.go.html#8093508">err</a></span><span class="op" id="8093887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093897">continue</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093912">if</span>&nbsp;<span class="ident" id="8093915"><a href="/text/template/multi_test.go.html#8093498">template</a></span>&nbsp;<span class="op" id="8093924">==</span>&nbsp;<span class="ident" id="8093927">nil</span>&nbsp;<span class="op" id="8093931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093936">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093951">if</span>&nbsp;<span class="builtinfunc" id="8093954">len</span><span class="op" id="8093957">(</span><span class="ident" id="8093958"><a href="/text/template/multi_test.go.html#8093498">template</a></span><span class="op" id="8093966">.</span><span class="ident" id="8093967">tmpl</span><span class="op" id="8093971">)</span>&nbsp;<span class="op" id="8093973">!=</span>&nbsp;<span class="builtinfunc" id="8093976">len</span><span class="op" id="8093979">(</span><span class="ident" id="8093980"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8093984">.</span><span class="ident" id="8093985">names</span><span class="op" id="8093990">)</span><span class="op" id="8093991">+</span><span class="num" id="8093992">1</span>&nbsp;<span class="op" id="8093994">{</span>&nbsp;<span class="comment" id="8093996">//&nbsp;+1&nbsp;for&nbsp;root</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094014"><a href="/text/template/multi_test.go.html#8093440">t</a></span><span class="op" id="8094015">.</span><span class="ident" id="8094016">Errorf</span><span class="op" id="8094022">(</span><span class="string" id="8094023">&#34;%s:&nbsp;wrong&nbsp;number&nbsp;of&nbsp;templates;&nbsp;wanted&nbsp;%d&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8094072">,</span>&nbsp;<span class="ident" id="8094074"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094078">.</span><span class="ident" id="8094079">name</span><span class="op" id="8094083">,</span>&nbsp;<span class="builtinfunc" id="8094085">len</span><span class="op" id="8094088">(</span><span class="ident" id="8094089"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094093">.</span><span class="ident" id="8094094">names</span><span class="op" id="8094099">)</span><span class="op" id="8094100">,</span>&nbsp;<span class="builtinfunc" id="8094102">len</span><span class="op" id="8094105">(</span><span class="ident" id="8094106"><a href="/text/template/multi_test.go.html#8093498">template</a></span><span class="op" id="8094114">.</span><span class="ident" id="8094115">tmpl</span><span class="op" id="8094119">)</span><span class="op" id="8094120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094125">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094140">for</span>&nbsp;<span class="ident" id="8094144">i</span><span class="op" id="8094145">,</span>&nbsp;<span class="ident" id="8094147">name</span>&nbsp;<span class="op" id="8094152">:=</span>&nbsp;<span class="keyword" id="8094155">range</span>&nbsp;<span class="ident" id="8094161"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094165">.</span><span class="ident" id="8094166">names</span>&nbsp;<span class="op" id="8094172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094177">tmpl</span><span class="op" id="8094181">,</span>&nbsp;<span class="ident" id="8094183">ok</span>&nbsp;<span class="op" id="8094186">:=</span>&nbsp;<span class="ident" id="8094189"><a href="/text/template/multi_test.go.html#8093498">template</a></span><span class="op" id="8094197">.</span><span class="ident" id="8094198">tmpl</span><span class="op" id="8094202">[</span><span class="ident" id="8094203"><a href="/text/template/multi_test.go.html#8094147">name</a></span><span class="op" id="8094207">]</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094212">if</span>&nbsp;<span class="op" id="8094215">!</span><span class="ident" id="8094216"><a href="/text/template/multi_test.go.html#8094183">ok</a></span>&nbsp;<span class="op" id="8094219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094225"><a href="/text/template/multi_test.go.html#8093440">t</a></span><span class="op" id="8094226">.</span><span class="ident" id="8094227">Errorf</span><span class="op" id="8094233">(</span><span class="string" id="8094234">&#34;%s:&nbsp;can&#39;t&nbsp;find&nbsp;template&nbsp;%q&#34;</span><span class="op" id="8094262">,</span>&nbsp;<span class="ident" id="8094264"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094268">.</span><span class="ident" id="8094269">name</span><span class="op" id="8094273">,</span>&nbsp;<span class="ident" id="8094275"><a href="/text/template/multi_test.go.html#8094147">name</a></span><span class="op" id="8094279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094285">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094302">result</span>&nbsp;<span class="op" id="8094309">:=</span>&nbsp;<span class="ident" id="8094312"><a href="/text/template/multi_test.go.html#8094177">tmpl</a></span><span class="op" id="8094316">.</span><span class="ident" id="8094317">Root</span><span class="op" id="8094321">.</span><span class="ident" id="8094322">String</span><span class="op" id="8094328">(</span><span class="op" id="8094329">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094334">if</span>&nbsp;<span class="ident" id="8094337"><a href="/text/template/multi_test.go.html#8094302">result</a></span>&nbsp;<span class="op" id="8094344">!=</span>&nbsp;<span class="ident" id="8094347"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094351">.</span><span class="ident" id="8094352">results</span><span class="op" id="8094359">[</span><span class="ident" id="8094360"><a href="/text/template/multi_test.go.html#8094144">i</a></span><span class="op" id="8094361">]</span>&nbsp;<span class="op" id="8094363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094369"><a href="/text/template/multi_test.go.html#8093440">t</a></span><span class="op" id="8094370">.</span><span class="ident" id="8094371">Errorf</span><span class="op" id="8094377">(</span><span class="string" id="8094378">&#34;%s=(%q):&nbsp;got\n\t%v\nexpected\n\t%v&#34;</span><span class="op" id="8094414">,</span>&nbsp;<span class="ident" id="8094416"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094420">.</span><span class="ident" id="8094421">name</span><span class="op" id="8094425">,</span>&nbsp;<span class="ident" id="8094427"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094431">.</span><span class="ident" id="8094432">input</span><span class="op" id="8094437">,</span>&nbsp;<span class="ident" id="8094439"><a href="/text/template/multi_test.go.html#8094302">result</a></span><span class="op" id="8094445">,</span>&nbsp;<span class="ident" id="8094447"><a href="/text/template/multi_test.go.html#8093464">test</a></span><span class="op" id="8094451">.</span><span class="ident" id="8094452">results</span><span class="op" id="8094459">[</span><span class="ident" id="8094460"><a href="/text/template/multi_test.go.html#8094144">i</a></span><span class="op" id="8094461">]</span><span class="op" id="8094462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094474">}</span><br>
<span class="lineno">85</span><span class="op" id="8094476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094479">var</span>&nbsp;<span class="ident" id="8094483">multiExecTests</span>&nbsp;<span class="op" id="8094498">=</span>&nbsp;<span class="op" id="8094500">[</span><span class="op" id="8094501">]</span><span class="ident" id="8094502"><a href="/text/template/exec_test.go.html#8062764">execTest</a></span><span class="op" id="8094510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094513">{</span><span class="string" id="8094514">&#34;empty&#34;</span><span class="op" id="8094521">,</span>&nbsp;<span class="string" id="8094523">&#34;&#34;</span><span class="op" id="8094525">,</span>&nbsp;<span class="string" id="8094527">&#34;&#34;</span><span class="op" id="8094529">,</span>&nbsp;<span class="ident" id="8094531">nil</span><span class="op" id="8094534">,</span>&nbsp;<span class="ident" id="8094536">true</span><span class="op" id="8094540">}</span><span class="op" id="8094541">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094544">{</span><span class="string" id="8094545">&#34;text&#34;</span><span class="op" id="8094551">,</span>&nbsp;<span class="string" id="8094553">&#34;some&nbsp;text&#34;</span><span class="op" id="8094564">,</span>&nbsp;<span class="string" id="8094566">&#34;some&nbsp;text&#34;</span><span class="op" id="8094577">,</span>&nbsp;<span class="ident" id="8094579">nil</span><span class="op" id="8094582">,</span>&nbsp;<span class="ident" id="8094584">true</span><span class="op" id="8094588">}</span><span class="op" id="8094589">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094592">{</span><span class="string" id="8094593">&#34;invoke&nbsp;x&#34;</span><span class="op" id="8094603">,</span>&nbsp;<span class="string" id="8094605">`{{template&nbsp;&#34;x&#34;&nbsp;.SI}}`</span><span class="op" id="8094627">,</span>&nbsp;<span class="string" id="8094629">&#34;TEXT&#34;</span><span class="op" id="8094635">,</span>&nbsp;<span class="ident" id="8094637"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094641">,</span>&nbsp;<span class="ident" id="8094643">true</span><span class="op" id="8094647">}</span><span class="op" id="8094648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094651">{</span><span class="string" id="8094652">&#34;invoke&nbsp;x&nbsp;no&nbsp;args&#34;</span><span class="op" id="8094670">,</span>&nbsp;<span class="string" id="8094672">`{{template&nbsp;&#34;x&#34;}}`</span><span class="op" id="8094690">,</span>&nbsp;<span class="string" id="8094692">&#34;TEXT&#34;</span><span class="op" id="8094698">,</span>&nbsp;<span class="ident" id="8094700"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094704">,</span>&nbsp;<span class="ident" id="8094706">true</span><span class="op" id="8094710">}</span><span class="op" id="8094711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094714">{</span><span class="string" id="8094715">&#34;invoke&nbsp;dot&nbsp;int&#34;</span><span class="op" id="8094731">,</span>&nbsp;<span class="string" id="8094733">`{{template&nbsp;&#34;dot&#34;&nbsp;.I}}`</span><span class="op" id="8094756">,</span>&nbsp;<span class="string" id="8094758">&#34;17&#34;</span><span class="op" id="8094762">,</span>&nbsp;<span class="ident" id="8094764"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094768">,</span>&nbsp;<span class="ident" id="8094770">true</span><span class="op" id="8094774">}</span><span class="op" id="8094775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094778">{</span><span class="string" id="8094779">&#34;invoke&nbsp;dot&nbsp;[]int&#34;</span><span class="op" id="8094797">,</span>&nbsp;<span class="string" id="8094799">`{{template&nbsp;&#34;dot&#34;&nbsp;.SI}}`</span><span class="op" id="8094823">,</span>&nbsp;<span class="string" id="8094825">&#34;[3&nbsp;4&nbsp;5]&#34;</span><span class="op" id="8094834">,</span>&nbsp;<span class="ident" id="8094836"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094840">,</span>&nbsp;<span class="ident" id="8094842">true</span><span class="op" id="8094846">}</span><span class="op" id="8094847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094850">{</span><span class="string" id="8094851">&#34;invoke&nbsp;dotV&#34;</span><span class="op" id="8094864">,</span>&nbsp;<span class="string" id="8094866">`{{template&nbsp;&#34;dotV&#34;&nbsp;.U}}`</span><span class="op" id="8094890">,</span>&nbsp;<span class="string" id="8094892">&#34;v&#34;</span><span class="op" id="8094895">,</span>&nbsp;<span class="ident" id="8094897"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094901">,</span>&nbsp;<span class="ident" id="8094903">true</span><span class="op" id="8094907">}</span><span class="op" id="8094908">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094911">{</span><span class="string" id="8094912">&#34;invoke&nbsp;nested&nbsp;int&#34;</span><span class="op" id="8094931">,</span>&nbsp;<span class="string" id="8094933">`{{template&nbsp;&#34;nested&#34;&nbsp;.I}}`</span><span class="op" id="8094959">,</span>&nbsp;<span class="string" id="8094961">&#34;17&#34;</span><span class="op" id="8094965">,</span>&nbsp;<span class="ident" id="8094967"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8094971">,</span>&nbsp;<span class="ident" id="8094973">true</span><span class="op" id="8094977">}</span><span class="op" id="8094978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094981">{</span><span class="string" id="8094982">&#34;variable&nbsp;declared&nbsp;by&nbsp;template&#34;</span><span class="op" id="8095013">,</span>&nbsp;<span class="string" id="8095015">`{{template&nbsp;&#34;nested&#34;&nbsp;$x:=.SI}},{{index&nbsp;$x&nbsp;1}}`</span><span class="op" id="8095061">,</span>&nbsp;<span class="string" id="8095063">&#34;[3&nbsp;4&nbsp;5],4&#34;</span><span class="op" id="8095074">,</span>&nbsp;<span class="ident" id="8095076"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8095080">,</span>&nbsp;<span class="ident" id="8095082">true</span><span class="op" id="8095086">}</span><span class="op" id="8095087">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095091">//&nbsp;User-defined&nbsp;function:&nbsp;test&nbsp;argument&nbsp;evaluator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095143">{</span><span class="string" id="8095144">&#34;testFunc&nbsp;literal&#34;</span><span class="op" id="8095162">,</span>&nbsp;<span class="string" id="8095164">`{{oneArg&nbsp;&#34;joe&#34;}}`</span><span class="op" id="8095182">,</span>&nbsp;<span class="string" id="8095184">&#34;oneArg=joe&#34;</span><span class="op" id="8095196">,</span>&nbsp;<span class="ident" id="8095198"><a href="/text/template/exec_test.go.html#8060143">tVal</a></span><span class="op" id="8095202">,</span>&nbsp;<span class="ident" id="8095204">true</span><span class="op" id="8095208">}</span><span class="op" id="8095209">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095212">{</span><span class="string" id="8095213">&#34;testFunc&nbsp;.&#34;</span><span class="op" id="8095225">,</span>&nbsp;<span class="string" id="8095227">`{{oneArg&nbsp;.}}`</span><span class="op" id="8095241">,</span>&nbsp;<span class="string" id="8095243">&#34;oneArg=joe&#34;</span><span class="op" id="8095255">,</span>&nbsp;<span class="string" id="8095257">&#34;joe&#34;</span><span class="op" id="8095262">,</span>&nbsp;<span class="ident" id="8095264">true</span><span class="op" id="8095268">}</span><span class="op" id="8095269">,</span><br>
<span class="lineno"></span><span class="op" id="8095271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8095274">//&nbsp;These&nbsp;strings&nbsp;are&nbsp;also&nbsp;in&nbsp;testdata/*.</span><br>
<span class="lineno"></span><span class="keyword" id="8095315">const</span>&nbsp;<span class="ident" id="8095321">multiText1</span>&nbsp;<span class="op" id="8095332">=</span>&nbsp;<span class="string" id="8095334">`<br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;x&#34;}}TEXT{{end}}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;dotV&#34;}}{{.V}}{{end}}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095398">const</span>&nbsp;<span class="ident" id="8095404">multiText2</span>&nbsp;<span class="op" id="8095415">=</span>&nbsp;<span class="string" id="8095417">`<br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;dot&#34;}}{{.}}{{end}}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp{{define&nbsp;&#34;nested&#34;}}{{template&nbsp;&#34;dot&#34;&nbsp;.}}{{end}}<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095500">func</span>&nbsp;<span class="ident" id="8095505">TestMultiExecute</span><span class="op" id="8095521">(</span><span class="ident" id="8095522">t</span>&nbsp;<span class="op" id="8095524">*</span><span class="ident" id="8095525"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8095532">.</span><span class="ident" id="8095533">T</span><span class="op" id="8095534">)</span>&nbsp;<span class="op" id="8095536">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8095539">//&nbsp;Declare&nbsp;a&nbsp;couple&nbsp;of&nbsp;templates&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095580">template</span><span class="op" id="8095588">,</span>&nbsp;<span class="ident" id="8095590">err</span>&nbsp;<span class="op" id="8095594">:=</span>&nbsp;<span class="ident" id="8095597"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8095600">(</span><span class="string" id="8095601">&#34;root&#34;</span><span class="op" id="8095607">)</span><span class="op" id="8095608">.</span><span class="ident" id="8095609">Parse</span><span class="op" id="8095614">(</span><span class="ident" id="8095615"><a href="/text/template/multi_test.go.html#8095321">multiText1</a></span><span class="op" id="8095625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095628">if</span>&nbsp;<span class="ident" id="8095631"><a href="/text/template/multi_test.go.html#8095590">err</a></span>&nbsp;<span class="op" id="8095635">!=</span>&nbsp;<span class="ident" id="8095638">nil</span>&nbsp;<span class="op" id="8095642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095646"><a href="/text/template/multi_test.go.html#8095522">t</a></span><span class="op" id="8095647">.</span><span class="ident" id="8095648">Fatalf</span><span class="op" id="8095654">(</span><span class="string" id="8095655">&#34;parse&nbsp;error&nbsp;for&nbsp;1:&nbsp;%s&#34;</span><span class="op" id="8095678">,</span>&nbsp;<span class="ident" id="8095680"><a href="/text/template/multi_test.go.html#8095590">err</a></span><span class="op" id="8095683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095686">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095689">_</span><span class="op" id="8095690">,</span>&nbsp;<span class="ident" id="8095692"><a href="/text/template/multi_test.go.html#8095590">err</a></span>&nbsp;<span class="op" id="8095696">=</span>&nbsp;<span class="ident" id="8095698"><a href="/text/template/multi_test.go.html#8095580">template</a></span><span class="op" id="8095706">.</span><span class="ident" id="8095707">Parse</span><span class="op" id="8095712">(</span><span class="ident" id="8095713"><a href="/text/template/multi_test.go.html#8095404">multiText2</a></span><span class="op" id="8095723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095726">if</span>&nbsp;<span class="ident" id="8095729"><a href="/text/template/multi_test.go.html#8095590">err</a></span>&nbsp;<span class="op" id="8095733">!=</span>&nbsp;<span class="ident" id="8095736">nil</span>&nbsp;<span class="op" id="8095740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095744"><a href="/text/template/multi_test.go.html#8095522">t</a></span><span class="op" id="8095745">.</span><span class="ident" id="8095746">Fatalf</span><span class="op" id="8095752">(</span><span class="string" id="8095753">&#34;parse&nbsp;error&nbsp;for&nbsp;2:&nbsp;%s&#34;</span><span class="op" id="8095776">,</span>&nbsp;<span class="ident" id="8095778"><a href="/text/template/multi_test.go.html#8095590">err</a></span><span class="op" id="8095781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095787"><a href="/text/template/exec_test.go.html#8081010">testExecute</a></span><span class="op" id="8095798">(</span><span class="ident" id="8095799"><a href="/text/template/multi_test.go.html#8094483">multiExecTests</a></span><span class="op" id="8095813">,</span>&nbsp;<span class="ident" id="8095815"><a href="/text/template/multi_test.go.html#8095580">template</a></span><span class="op" id="8095823">,</span>&nbsp;<span class="ident" id="8095825"><a href="/text/template/multi_test.go.html#8095522">t</a></span><span class="op" id="8095826">)</span><br>
<span class="lineno">125</span><span class="op" id="8095828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095831">func</span>&nbsp;<span class="ident" id="8095836">TestParseFiles</span><span class="op" id="8095850">(</span><span class="ident" id="8095851">t</span>&nbsp;<span class="op" id="8095853">*</span><span class="ident" id="8095854"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8095861">.</span><span class="ident" id="8095862">T</span><span class="op" id="8095863">)</span>&nbsp;<span class="op" id="8095865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095868">_</span><span class="op" id="8095869">,</span>&nbsp;<span class="ident" id="8095871">err</span>&nbsp;<span class="op" id="8095875">:=</span>&nbsp;<span class="ident" id="8095878"><a href="/text/template/helper.go.html#3577013">ParseFiles</a></span><span class="op" id="8095888">(</span><span class="string" id="8095889">&#34;DOES&nbsp;NOT&nbsp;EXIST&#34;</span><span class="op" id="8095905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095908">if</span>&nbsp;<span class="ident" id="8095911"><a href="/text/template/multi_test.go.html#8095871">err</a></span>&nbsp;<span class="op" id="8095915">==</span>&nbsp;<span class="ident" id="8095918">nil</span>&nbsp;<span class="op" id="8095922">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095926"><a href="/text/template/multi_test.go.html#8095851">t</a></span><span class="op" id="8095927">.</span><span class="ident" id="8095928">Error</span><span class="op" id="8095933">(</span><span class="string" id="8095934">&#34;expected&nbsp;error&nbsp;for&nbsp;non-existent&nbsp;file;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8095982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095988">template</span>&nbsp;<span class="op" id="8095997">:=</span>&nbsp;<span class="ident" id="8096000"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8096003">(</span><span class="string" id="8096004">&#34;root&#34;</span><span class="op" id="8096010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096013">_</span><span class="op" id="8096014">,</span>&nbsp;<span class="ident" id="8096016"><a href="/text/template/multi_test.go.html#8095871">err</a></span>&nbsp;<span class="op" id="8096020">=</span>&nbsp;<span class="ident" id="8096022"><a href="/text/template/multi_test.go.html#8095988">template</a></span><span class="op" id="8096030">.</span><span class="ident" id="8096031">ParseFiles</span><span class="op" id="8096041">(</span><span class="string" id="8096042">&#34;testdata/file1.tmpl&#34;</span><span class="op" id="8096063">,</span>&nbsp;<span class="string" id="8096065">&#34;testdata/file2.tmpl&#34;</span><span class="op" id="8096086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096089">if</span>&nbsp;<span class="ident" id="8096092"><a href="/text/template/multi_test.go.html#8095871">err</a></span>&nbsp;<span class="op" id="8096096">!=</span>&nbsp;<span class="ident" id="8096099">nil</span>&nbsp;<span class="op" id="8096103">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096107"><a href="/text/template/multi_test.go.html#8095851">t</a></span><span class="op" id="8096108">.</span><span class="ident" id="8096109">Fatalf</span><span class="op" id="8096115">(</span><span class="string" id="8096116">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="8096141">,</span>&nbsp;<span class="ident" id="8096143"><a href="/text/template/multi_test.go.html#8095871">err</a></span><span class="op" id="8096146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096152"><a href="/text/template/exec_test.go.html#8081010">testExecute</a></span><span class="op" id="8096163">(</span><span class="ident" id="8096164"><a href="/text/template/multi_test.go.html#8094483">multiExecTests</a></span><span class="op" id="8096178">,</span>&nbsp;<span class="ident" id="8096180"><a href="/text/template/multi_test.go.html#8095988">template</a></span><span class="op" id="8096188">,</span>&nbsp;<span class="ident" id="8096190"><a href="/text/template/multi_test.go.html#8095851">t</a></span><span class="op" id="8096191">)</span><br>
<span class="lineno"></span><span class="op" id="8096193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8096196">func</span>&nbsp;<span class="ident" id="8096201">TestParseGlob</span><span class="op" id="8096214">(</span><span class="ident" id="8096215">t</span>&nbsp;<span class="op" id="8096217">*</span><span class="ident" id="8096218"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8096225">.</span><span class="ident" id="8096226">T</span><span class="op" id="8096227">)</span>&nbsp;<span class="op" id="8096229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096232">_</span><span class="op" id="8096233">,</span>&nbsp;<span class="ident" id="8096235">err</span>&nbsp;<span class="op" id="8096239">:=</span>&nbsp;<span class="ident" id="8096242"><a href="/text/template/helper.go.html#3578904">ParseGlob</a></span><span class="op" id="8096251">(</span><span class="string" id="8096252">&#34;DOES&nbsp;NOT&nbsp;EXIST&#34;</span><span class="op" id="8096268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096271">if</span>&nbsp;<span class="ident" id="8096274"><a href="/text/template/multi_test.go.html#8096235">err</a></span>&nbsp;<span class="op" id="8096278">==</span>&nbsp;<span class="ident" id="8096281">nil</span>&nbsp;<span class="op" id="8096285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096289"><a href="/text/template/multi_test.go.html#8096215">t</a></span><span class="op" id="8096290">.</span><span class="ident" id="8096291">Error</span><span class="op" id="8096296">(</span><span class="string" id="8096297">&#34;expected&nbsp;error&nbsp;for&nbsp;non-existent&nbsp;file;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8096345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096348">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096351">_</span><span class="op" id="8096352">,</span>&nbsp;<span class="ident" id="8096354"><a href="/text/template/multi_test.go.html#8096235">err</a></span>&nbsp;<span class="op" id="8096358">=</span>&nbsp;<span class="ident" id="8096360"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8096363">(</span><span class="string" id="8096364">&#34;error&#34;</span><span class="op" id="8096371">)</span><span class="op" id="8096372">.</span><span class="ident" id="8096373">ParseGlob</span><span class="op" id="8096382">(</span><span class="string" id="8096383">&#34;[x&#34;</span><span class="op" id="8096387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096390">if</span>&nbsp;<span class="ident" id="8096393"><a href="/text/template/multi_test.go.html#8096235">err</a></span>&nbsp;<span class="op" id="8096397">==</span>&nbsp;<span class="ident" id="8096400">nil</span>&nbsp;<span class="op" id="8096404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096408"><a href="/text/template/multi_test.go.html#8096215">t</a></span><span class="op" id="8096409">.</span><span class="ident" id="8096410">Error</span><span class="op" id="8096415">(</span><span class="string" id="8096416">&#34;expected&nbsp;error&nbsp;for&nbsp;bad&nbsp;pattern;&nbsp;got&nbsp;none&#34;</span><span class="op" id="8096458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096464">template</span>&nbsp;<span class="op" id="8096473">:=</span>&nbsp;<span class="ident" id="8096476"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8096479">(</span><span class="string" id="8096480">&#34;root&#34;</span><span class="op" id="8096486">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096489">_</span><span class="op" id="8096490">,</span>&nbsp;<span class="ident" id="8096492"><a href="/text/template/multi_test.go.html#8096235">err</a></span>&nbsp;<span class="op" id="8096496">=</span>&nbsp;<span class="ident" id="8096498"><a href="/text/template/multi_test.go.html#8096464">template</a></span><span class="op" id="8096506">.</span><span class="ident" id="8096507">ParseGlob</span><span class="op" id="8096516">(</span><span class="string" id="8096517">&#34;testdata/file*.tmpl&#34;</span><span class="op" id="8096538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096541">if</span>&nbsp;<span class="ident" id="8096544"><a href="/text/template/multi_test.go.html#8096235">err</a></span>&nbsp;<span class="op" id="8096548">!=</span>&nbsp;<span class="ident" id="8096551">nil</span>&nbsp;<span class="op" id="8096555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096559"><a href="/text/template/multi_test.go.html#8096215">t</a></span><span class="op" id="8096560">.</span><span class="ident" id="8096561">Fatalf</span><span class="op" id="8096567">(</span><span class="string" id="8096568">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="8096593">,</span>&nbsp;<span class="ident" id="8096595"><a href="/text/template/multi_test.go.html#8096235">err</a></span><span class="op" id="8096598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096604"><a href="/text/template/exec_test.go.html#8081010">testExecute</a></span><span class="op" id="8096615">(</span><span class="ident" id="8096616"><a href="/text/template/multi_test.go.html#8094483">multiExecTests</a></span><span class="op" id="8096630">,</span>&nbsp;<span class="ident" id="8096632"><a href="/text/template/multi_test.go.html#8096464">template</a></span><span class="op" id="8096640">,</span>&nbsp;<span class="ident" id="8096642"><a href="/text/template/multi_test.go.html#8096215">t</a></span><span class="op" id="8096643">)</span><br>
<span class="lineno">155</span><span class="op" id="8096645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8096648">//&nbsp;In&nbsp;these&nbsp;tests,&nbsp;actual&nbsp;content&nbsp;(not&nbsp;just&nbsp;template&nbsp;definitions)&nbsp;comes&nbsp;from&nbsp;the&nbsp;parsed&nbsp;files.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096744">var</span>&nbsp;<span class="ident" id="8096748">templateFileExecTests</span>&nbsp;<span class="op" id="8096770">=</span>&nbsp;<span class="op" id="8096772">[</span><span class="op" id="8096773">]</span><span class="ident" id="8096774"><a href="/text/template/exec_test.go.html#8062764">execTest</a></span><span class="op" id="8096782">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096785">{</span><span class="string" id="8096786">&#34;test&#34;</span><span class="op" id="8096792">,</span>&nbsp;<span class="string" id="8096794">`{{template&nbsp;&#34;tmpl1.tmpl&#34;}}{{template&nbsp;&#34;tmpl2.tmpl&#34;}}`</span><span class="op" id="8096846">,</span>&nbsp;<span class="string" id="8096848">&#34;template1\n\ny\ntemplate2\n\nx\n&#34;</span><span class="op" id="8096882">,</span>&nbsp;<span class="num" id="8096884">0</span><span class="op" id="8096885">,</span>&nbsp;<span class="ident" id="8096887">true</span><span class="op" id="8096891">}</span><span class="op" id="8096892">,</span><br>
<span class="lineno"></span><span class="op" id="8096894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096897">func</span>&nbsp;<span class="ident" id="8096902">TestParseFilesWithData</span><span class="op" id="8096924">(</span><span class="ident" id="8096925">t</span>&nbsp;<span class="op" id="8096927">*</span><span class="ident" id="8096928"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8096935">.</span><span class="ident" id="8096936">T</span><span class="op" id="8096937">)</span>&nbsp;<span class="op" id="8096939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096942">template</span><span class="op" id="8096950">,</span>&nbsp;<span class="ident" id="8096952">err</span>&nbsp;<span class="op" id="8096956">:=</span>&nbsp;<span class="ident" id="8096959"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8096962">(</span><span class="string" id="8096963">&#34;root&#34;</span><span class="op" id="8096969">)</span><span class="op" id="8096970">.</span><span class="ident" id="8096971">ParseFiles</span><span class="op" id="8096981">(</span><span class="string" id="8096982">&#34;testdata/tmpl1.tmpl&#34;</span><span class="op" id="8097003">,</span>&nbsp;<span class="string" id="8097005">&#34;testdata/tmpl2.tmpl&#34;</span><span class="op" id="8097026">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097029">if</span>&nbsp;<span class="ident" id="8097032"><a href="/text/template/multi_test.go.html#8096952">err</a></span>&nbsp;<span class="op" id="8097036">!=</span>&nbsp;<span class="ident" id="8097039">nil</span>&nbsp;<span class="op" id="8097043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097047"><a href="/text/template/multi_test.go.html#8096925">t</a></span><span class="op" id="8097048">.</span><span class="ident" id="8097049">Fatalf</span><span class="op" id="8097055">(</span><span class="string" id="8097056">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="8097081">,</span>&nbsp;<span class="ident" id="8097083"><a href="/text/template/multi_test.go.html#8096952">err</a></span><span class="op" id="8097086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097092"><a href="/text/template/exec_test.go.html#8081010">testExecute</a></span><span class="op" id="8097103">(</span><span class="ident" id="8097104"><a href="/text/template/multi_test.go.html#8096748">templateFileExecTests</a></span><span class="op" id="8097125">,</span>&nbsp;<span class="ident" id="8097127"><a href="/text/template/multi_test.go.html#8096942">template</a></span><span class="op" id="8097135">,</span>&nbsp;<span class="ident" id="8097137"><a href="/text/template/multi_test.go.html#8096925">t</a></span><span class="op" id="8097138">)</span><br>
<span class="lineno"></span><span class="op" id="8097140">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="8097143">func</span>&nbsp;<span class="ident" id="8097148">TestParseGlobWithData</span><span class="op" id="8097169">(</span><span class="ident" id="8097170">t</span>&nbsp;<span class="op" id="8097172">*</span><span class="ident" id="8097173"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8097180">.</span><span class="ident" id="8097181">T</span><span class="op" id="8097182">)</span>&nbsp;<span class="op" id="8097184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097187">template</span><span class="op" id="8097195">,</span>&nbsp;<span class="ident" id="8097197">err</span>&nbsp;<span class="op" id="8097201">:=</span>&nbsp;<span class="ident" id="8097204"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8097207">(</span><span class="string" id="8097208">&#34;root&#34;</span><span class="op" id="8097214">)</span><span class="op" id="8097215">.</span><span class="ident" id="8097216">ParseGlob</span><span class="op" id="8097225">(</span><span class="string" id="8097226">&#34;testdata/tmpl*.tmpl&#34;</span><span class="op" id="8097247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097250">if</span>&nbsp;<span class="ident" id="8097253"><a href="/text/template/multi_test.go.html#8097197">err</a></span>&nbsp;<span class="op" id="8097257">!=</span>&nbsp;<span class="ident" id="8097260">nil</span>&nbsp;<span class="op" id="8097264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097268"><a href="/text/template/multi_test.go.html#8097170">t</a></span><span class="op" id="8097269">.</span><span class="ident" id="8097270">Fatalf</span><span class="op" id="8097276">(</span><span class="string" id="8097277">&#34;error&nbsp;parsing&nbsp;files:&nbsp;%v&#34;</span><span class="op" id="8097302">,</span>&nbsp;<span class="ident" id="8097304"><a href="/text/template/multi_test.go.html#8097197">err</a></span><span class="op" id="8097307">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097313"><a href="/text/template/exec_test.go.html#8081010">testExecute</a></span><span class="op" id="8097324">(</span><span class="ident" id="8097325"><a href="/text/template/multi_test.go.html#8096748">templateFileExecTests</a></span><span class="op" id="8097346">,</span>&nbsp;<span class="ident" id="8097348"><a href="/text/template/multi_test.go.html#8097187">template</a></span><span class="op" id="8097356">,</span>&nbsp;<span class="ident" id="8097358"><a href="/text/template/multi_test.go.html#8097170">t</a></span><span class="op" id="8097359">)</span><br>
<span class="lineno"></span><span class="op" id="8097361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8097364">const</span>&nbsp;<span class="op" id="8097370">(</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097373">cloneText1</span>&nbsp;<span class="op" id="8097384">=</span>&nbsp;<span class="string" id="8097386">`{{define&nbsp;&#34;a&#34;}}{{template&nbsp;&#34;b&#34;}}{{template&nbsp;&#34;c&#34;}}{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097443">cloneText2</span>&nbsp;<span class="op" id="8097454">=</span>&nbsp;<span class="string" id="8097456">`{{define&nbsp;&#34;b&#34;}}b{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097482">cloneText3</span>&nbsp;<span class="op" id="8097493">=</span>&nbsp;<span class="string" id="8097495">`{{define&nbsp;&#34;c&#34;}}root{{end}}`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097524">cloneText4</span>&nbsp;<span class="op" id="8097535">=</span>&nbsp;<span class="string" id="8097537">`{{define&nbsp;&#34;c&#34;}}clone{{end}}`</span><br>
<span class="lineno"></span><span class="op" id="8097566">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="8097569">func</span>&nbsp;<span class="ident" id="8097574">TestClone</span><span class="op" id="8097583">(</span><span class="ident" id="8097584">t</span>&nbsp;<span class="op" id="8097586">*</span><span class="ident" id="8097587"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8097594">.</span><span class="ident" id="8097595">T</span><span class="op" id="8097596">)</span>&nbsp;<span class="op" id="8097598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8097601">//&nbsp;Create&nbsp;some&nbsp;templates&nbsp;and&nbsp;clone&nbsp;the&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097647">root</span><span class="op" id="8097651">,</span>&nbsp;<span class="ident" id="8097653">err</span>&nbsp;<span class="op" id="8097657">:=</span>&nbsp;<span class="ident" id="8097660"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8097663">(</span><span class="string" id="8097664">&#34;root&#34;</span><span class="op" id="8097670">)</span><span class="op" id="8097671">.</span><span class="ident" id="8097672">Parse</span><span class="op" id="8097677">(</span><span class="ident" id="8097678"><a href="/text/template/multi_test.go.html#8097373">cloneText1</a></span><span class="op" id="8097688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097691">if</span>&nbsp;<span class="ident" id="8097694"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097698">!=</span>&nbsp;<span class="ident" id="8097701">nil</span>&nbsp;<span class="op" id="8097705">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097709"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8097710">.</span><span class="ident" id="8097711">Fatal</span><span class="op" id="8097716">(</span><span class="ident" id="8097717"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8097720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097726">_</span><span class="op" id="8097727">,</span>&nbsp;<span class="ident" id="8097729"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097733">=</span>&nbsp;<span class="ident" id="8097735"><a href="/text/template/multi_test.go.html#8097647">root</a></span><span class="op" id="8097739">.</span><span class="ident" id="8097740">Parse</span><span class="op" id="8097745">(</span><span class="ident" id="8097746"><a href="/text/template/multi_test.go.html#8097443">cloneText2</a></span><span class="op" id="8097756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097759">if</span>&nbsp;<span class="ident" id="8097762"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097766">!=</span>&nbsp;<span class="ident" id="8097769">nil</span>&nbsp;<span class="op" id="8097773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097777"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8097778">.</span><span class="ident" id="8097779">Fatal</span><span class="op" id="8097784">(</span><span class="ident" id="8097785"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8097788">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097791">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097794">clone</span>&nbsp;<span class="op" id="8097800">:=</span>&nbsp;<span class="ident" id="8097803"><a href="/text/template/helper.go.html#3576619">Must</a></span><span class="op" id="8097807">(</span><span class="ident" id="8097808"><a href="/text/template/multi_test.go.html#8097647">root</a></span><span class="op" id="8097812">.</span><span class="ident" id="8097813">Clone</span><span class="op" id="8097818">(</span><span class="op" id="8097819">)</span><span class="op" id="8097820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8097823">//&nbsp;Add&nbsp;variants&nbsp;to&nbsp;both.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097849">_</span><span class="op" id="8097850">,</span>&nbsp;<span class="ident" id="8097852"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097856">=</span>&nbsp;<span class="ident" id="8097858"><a href="/text/template/multi_test.go.html#8097647">root</a></span><span class="op" id="8097862">.</span><span class="ident" id="8097863">Parse</span><span class="op" id="8097868">(</span><span class="ident" id="8097869"><a href="/text/template/multi_test.go.html#8097482">cloneText3</a></span><span class="op" id="8097879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097882">if</span>&nbsp;<span class="ident" id="8097885"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097889">!=</span>&nbsp;<span class="ident" id="8097892">nil</span>&nbsp;<span class="op" id="8097896">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097900"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8097901">.</span><span class="ident" id="8097902">Fatal</span><span class="op" id="8097907">(</span><span class="ident" id="8097908"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8097911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097917">_</span><span class="op" id="8097918">,</span>&nbsp;<span class="ident" id="8097920"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097924">=</span>&nbsp;<span class="ident" id="8097926"><a href="/text/template/multi_test.go.html#8097794">clone</a></span><span class="op" id="8097931">.</span><span class="ident" id="8097932">Parse</span><span class="op" id="8097937">(</span><span class="ident" id="8097938"><a href="/text/template/multi_test.go.html#8097524">cloneText4</a></span><span class="op" id="8097948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097951">if</span>&nbsp;<span class="ident" id="8097954"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8097958">!=</span>&nbsp;<span class="ident" id="8097961">nil</span>&nbsp;<span class="op" id="8097965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097969"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8097970">.</span><span class="ident" id="8097971">Fatal</span><span class="op" id="8097976">(</span><span class="ident" id="8097977"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8097980">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8097986">//&nbsp;Verify&nbsp;that&nbsp;the&nbsp;clone&nbsp;is&nbsp;self-consistent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098032">for</span>&nbsp;<span class="ident" id="8098036">k</span><span class="op" id="8098037">,</span>&nbsp;<span class="ident" id="8098039">v</span>&nbsp;<span class="op" id="8098041">:=</span>&nbsp;<span class="keyword" id="8098044">range</span>&nbsp;<span class="ident" id="8098050"><a href="/text/template/multi_test.go.html#8097794">clone</a></span><span class="op" id="8098055">.</span><span class="ident" id="8098056">tmpl</span>&nbsp;<span class="op" id="8098061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098065">if</span>&nbsp;<span class="ident" id="8098068"><a href="/text/template/multi_test.go.html#8098036">k</a></span>&nbsp;<span class="op" id="8098070">==</span>&nbsp;<span class="ident" id="8098073"><a href="/text/template/multi_test.go.html#8097794">clone</a></span><span class="op" id="8098078">.</span><span class="ident" id="8098079">name</span>&nbsp;<span class="op" id="8098084">&amp;&amp;</span>&nbsp;<span class="ident" id="8098087"><a href="/text/template/multi_test.go.html#8098039">v</a></span><span class="op" id="8098088">.</span><span class="ident" id="8098089">tmpl</span><span class="op" id="8098093">[</span><span class="ident" id="8098094"><a href="/text/template/multi_test.go.html#8098036">k</a></span><span class="op" id="8098095">]</span>&nbsp;<span class="op" id="8098097">!=</span>&nbsp;<span class="ident" id="8098100"><a href="/text/template/multi_test.go.html#8097794">clone</a></span>&nbsp;<span class="op" id="8098106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098111"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098112">.</span><span class="ident" id="8098113">Error</span><span class="op" id="8098118">(</span><span class="string" id="8098119">&#34;clone&nbsp;does&nbsp;not&nbsp;contain&nbsp;root&#34;</span><span class="op" id="8098148">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098156">if</span>&nbsp;<span class="ident" id="8098159"><a href="/text/template/multi_test.go.html#8098039">v</a></span>&nbsp;<span class="op" id="8098161">!=</span>&nbsp;<span class="ident" id="8098164"><a href="/text/template/multi_test.go.html#8098039">v</a></span><span class="op" id="8098165">.</span><span class="ident" id="8098166">tmpl</span><span class="op" id="8098170">[</span><span class="ident" id="8098171"><a href="/text/template/multi_test.go.html#8098039">v</a></span><span class="op" id="8098172">.</span><span class="ident" id="8098173">name</span><span class="op" id="8098177">]</span>&nbsp;<span class="op" id="8098179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098184"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098185">.</span><span class="ident" id="8098186">Errorf</span><span class="op" id="8098192">(</span><span class="string" id="8098193">&#34;clone&nbsp;does&nbsp;not&nbsp;contain&nbsp;self&nbsp;for&nbsp;%q&#34;</span><span class="op" id="8098229">,</span>&nbsp;<span class="ident" id="8098231"><a href="/text/template/multi_test.go.html#8098036">k</a></span><span class="op" id="8098232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098239">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098242">//&nbsp;Execute&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098260">var</span>&nbsp;<span class="ident" id="8098264">b</span>&nbsp;<span class="ident" id="8098266"><a href="/text/template/multi_test.go.html#8092742">bytes</a></span><span class="op" id="8098271">.</span><span class="ident" id="8098272">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098280"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8098284">=</span>&nbsp;<span class="ident" id="8098286"><a href="/text/template/multi_test.go.html#8097647">root</a></span><span class="op" id="8098290">.</span><span class="ident" id="8098291">ExecuteTemplate</span><span class="op" id="8098306">(</span><span class="op" id="8098307">&amp;</span><span class="ident" id="8098308"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098309">,</span>&nbsp;<span class="string" id="8098311">&#34;a&#34;</span><span class="op" id="8098314">,</span>&nbsp;<span class="num" id="8098316">0</span><span class="op" id="8098317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098320">if</span>&nbsp;<span class="ident" id="8098323"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8098327">!=</span>&nbsp;<span class="ident" id="8098330">nil</span>&nbsp;<span class="op" id="8098334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098338"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098339">.</span><span class="ident" id="8098340">Fatal</span><span class="op" id="8098345">(</span><span class="ident" id="8098346"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8098349">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098355">if</span>&nbsp;<span class="ident" id="8098358"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098359">.</span><span class="ident" id="8098360">String</span><span class="op" id="8098366">(</span><span class="op" id="8098367">)</span>&nbsp;<span class="op" id="8098369">!=</span>&nbsp;<span class="string" id="8098372">&#34;broot&#34;</span>&nbsp;<span class="op" id="8098380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098384"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098385">.</span><span class="ident" id="8098386">Errorf</span><span class="op" id="8098392">(</span><span class="string" id="8098393">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8098413">,</span>&nbsp;<span class="string" id="8098415">&#34;broot&#34;</span><span class="op" id="8098422">,</span>&nbsp;<span class="ident" id="8098424"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098425">.</span><span class="ident" id="8098426">String</span><span class="op" id="8098432">(</span><span class="op" id="8098433">)</span><span class="op" id="8098434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098440">//&nbsp;Execute&nbsp;copy.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098458"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098459">.</span><span class="ident" id="8098460">Reset</span><span class="op" id="8098465">(</span><span class="op" id="8098466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098469"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8098473">=</span>&nbsp;<span class="ident" id="8098475"><a href="/text/template/multi_test.go.html#8097794">clone</a></span><span class="op" id="8098480">.</span><span class="ident" id="8098481">ExecuteTemplate</span><span class="op" id="8098496">(</span><span class="op" id="8098497">&amp;</span><span class="ident" id="8098498"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098499">,</span>&nbsp;<span class="string" id="8098501">&#34;a&#34;</span><span class="op" id="8098504">,</span>&nbsp;<span class="num" id="8098506">0</span><span class="op" id="8098507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098510">if</span>&nbsp;<span class="ident" id="8098513"><a href="/text/template/multi_test.go.html#8097653">err</a></span>&nbsp;<span class="op" id="8098517">!=</span>&nbsp;<span class="ident" id="8098520">nil</span>&nbsp;<span class="op" id="8098524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098528"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098529">.</span><span class="ident" id="8098530">Fatal</span><span class="op" id="8098535">(</span><span class="ident" id="8098536"><a href="/text/template/multi_test.go.html#8097653">err</a></span><span class="op" id="8098539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098542">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098545">if</span>&nbsp;<span class="ident" id="8098548"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098549">.</span><span class="ident" id="8098550">String</span><span class="op" id="8098556">(</span><span class="op" id="8098557">)</span>&nbsp;<span class="op" id="8098559">!=</span>&nbsp;<span class="string" id="8098562">&#34;bclone&#34;</span>&nbsp;<span class="op" id="8098571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098575"><a href="/text/template/multi_test.go.html#8097584">t</a></span><span class="op" id="8098576">.</span><span class="ident" id="8098577">Errorf</span><span class="op" id="8098583">(</span><span class="string" id="8098584">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8098604">,</span>&nbsp;<span class="string" id="8098606">&#34;bclone&#34;</span><span class="op" id="8098614">,</span>&nbsp;<span class="ident" id="8098616"><a href="/text/template/multi_test.go.html#8098264">b</a></span><span class="op" id="8098617">.</span><span class="ident" id="8098618">String</span><span class="op" id="8098624">(</span><span class="op" id="8098625">)</span><span class="op" id="8098626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098629">}</span><br>
<span class="lineno"></span><span class="op" id="8098631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8098634">func</span>&nbsp;<span class="ident" id="8098639">TestAddParseTree</span><span class="op" id="8098655">(</span><span class="ident" id="8098656">t</span>&nbsp;<span class="op" id="8098658">*</span><span class="ident" id="8098659"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8098666">.</span><span class="ident" id="8098667">T</span><span class="op" id="8098668">)</span>&nbsp;<span class="op" id="8098670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098673">//&nbsp;Create&nbsp;some&nbsp;templates.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098700">root</span><span class="op" id="8098704">,</span>&nbsp;<span class="ident" id="8098706">err</span>&nbsp;<span class="op" id="8098710">:=</span>&nbsp;<span class="ident" id="8098713"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8098716">(</span><span class="string" id="8098717">&#34;root&#34;</span><span class="op" id="8098723">)</span><span class="op" id="8098724">.</span><span class="ident" id="8098725">Parse</span><span class="op" id="8098730">(</span><span class="ident" id="8098731"><a href="/text/template/multi_test.go.html#8097373">cloneText1</a></span><span class="op" id="8098741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098744">if</span>&nbsp;<span class="ident" id="8098747"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098751">!=</span>&nbsp;<span class="ident" id="8098754">nil</span>&nbsp;<span class="op" id="8098758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098762"><a href="/text/template/multi_test.go.html#8098656">t</a></span><span class="op" id="8098763">.</span><span class="ident" id="8098764">Fatal</span><span class="op" id="8098769">(</span><span class="ident" id="8098770"><a href="/text/template/multi_test.go.html#8098706">err</a></span><span class="op" id="8098773">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098779">_</span><span class="op" id="8098780">,</span>&nbsp;<span class="ident" id="8098782"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098786">=</span>&nbsp;<span class="ident" id="8098788"><a href="/text/template/multi_test.go.html#8098700">root</a></span><span class="op" id="8098792">.</span><span class="ident" id="8098793">Parse</span><span class="op" id="8098798">(</span><span class="ident" id="8098799"><a href="/text/template/multi_test.go.html#8097443">cloneText2</a></span><span class="op" id="8098809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098812">if</span>&nbsp;<span class="ident" id="8098815"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098819">!=</span>&nbsp;<span class="ident" id="8098822">nil</span>&nbsp;<span class="op" id="8098826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098830"><a href="/text/template/multi_test.go.html#8098656">t</a></span><span class="op" id="8098831">.</span><span class="ident" id="8098832">Fatal</span><span class="op" id="8098837">(</span><span class="ident" id="8098838"><a href="/text/template/multi_test.go.html#8098706">err</a></span><span class="op" id="8098841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098844">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8098847">//&nbsp;Add&nbsp;a&nbsp;new&nbsp;parse&nbsp;tree.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098873">tree</span><span class="op" id="8098877">,</span>&nbsp;<span class="ident" id="8098879"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098883">:=</span>&nbsp;<span class="ident" id="8098886"><a href="/text/template/multi_test.go.html#8092780">parse</a></span><span class="op" id="8098891">.</span><span class="ident" id="8098892">Parse</span><span class="op" id="8098897">(</span><span class="string" id="8098898">&#34;cloneText3&#34;</span><span class="op" id="8098910">,</span>&nbsp;<span class="ident" id="8098912"><a href="/text/template/multi_test.go.html#8097482">cloneText3</a></span><span class="op" id="8098922">,</span>&nbsp;<span class="string" id="8098924">&#34;&#34;</span><span class="op" id="8098926">,</span>&nbsp;<span class="string" id="8098928">&#34;&#34;</span><span class="op" id="8098930">,</span>&nbsp;<span class="ident" id="8098932">nil</span><span class="op" id="8098935">,</span>&nbsp;<span class="ident" id="8098937"><a href="/text/template/funcs.go.html#3561814">builtins</a></span><span class="op" id="8098945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8098948">if</span>&nbsp;<span class="ident" id="8098951"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098955">!=</span>&nbsp;<span class="ident" id="8098958">nil</span>&nbsp;<span class="op" id="8098962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098966"><a href="/text/template/multi_test.go.html#8098656">t</a></span><span class="op" id="8098967">.</span><span class="ident" id="8098968">Fatal</span><span class="op" id="8098973">(</span><span class="ident" id="8098974"><a href="/text/template/multi_test.go.html#8098706">err</a></span><span class="op" id="8098977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8098980">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8098983">added</span><span class="op" id="8098988">,</span>&nbsp;<span class="ident" id="8098990"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8098994">:=</span>&nbsp;<span class="ident" id="8098997"><a href="/text/template/multi_test.go.html#8098700">root</a></span><span class="op" id="8099001">.</span><span class="ident" id="8099002">AddParseTree</span><span class="op" id="8099014">(</span><span class="string" id="8099015">&#34;c&#34;</span><span class="op" id="8099018">,</span>&nbsp;<span class="ident" id="8099020"><a href="/text/template/multi_test.go.html#8098873">tree</a></span><span class="op" id="8099024">[</span><span class="string" id="8099025">&#34;c&#34;</span><span class="op" id="8099028">]</span><span class="op" id="8099029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8099032">//&nbsp;Execute.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099045">var</span>&nbsp;<span class="ident" id="8099049">b</span>&nbsp;<span class="ident" id="8099051"><a href="/text/template/multi_test.go.html#8092742">bytes</a></span><span class="op" id="8099056">.</span><span class="ident" id="8099057">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099065"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8099069">=</span>&nbsp;<span class="ident" id="8099071"><a href="/text/template/multi_test.go.html#8098983">added</a></span><span class="op" id="8099076">.</span><span class="ident" id="8099077">ExecuteTemplate</span><span class="op" id="8099092">(</span><span class="op" id="8099093">&amp;</span><span class="ident" id="8099094"><a href="/text/template/multi_test.go.html#8099049">b</a></span><span class="op" id="8099095">,</span>&nbsp;<span class="string" id="8099097">&#34;a&#34;</span><span class="op" id="8099100">,</span>&nbsp;<span class="num" id="8099102">0</span><span class="op" id="8099103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099106">if</span>&nbsp;<span class="ident" id="8099109"><a href="/text/template/multi_test.go.html#8098706">err</a></span>&nbsp;<span class="op" id="8099113">!=</span>&nbsp;<span class="ident" id="8099116">nil</span>&nbsp;<span class="op" id="8099120">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099124"><a href="/text/template/multi_test.go.html#8098656">t</a></span><span class="op" id="8099125">.</span><span class="ident" id="8099126">Fatal</span><span class="op" id="8099131">(</span><span class="ident" id="8099132"><a href="/text/template/multi_test.go.html#8098706">err</a></span><span class="op" id="8099135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099141">if</span>&nbsp;<span class="ident" id="8099144"><a href="/text/template/multi_test.go.html#8099049">b</a></span><span class="op" id="8099145">.</span><span class="ident" id="8099146">String</span><span class="op" id="8099152">(</span><span class="op" id="8099153">)</span>&nbsp;<span class="op" id="8099155">!=</span>&nbsp;<span class="string" id="8099158">&#34;broot&#34;</span>&nbsp;<span class="op" id="8099166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099170"><a href="/text/template/multi_test.go.html#8098656">t</a></span><span class="op" id="8099171">.</span><span class="ident" id="8099172">Errorf</span><span class="op" id="8099178">(</span><span class="string" id="8099179">&#34;expected&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8099199">,</span>&nbsp;<span class="string" id="8099201">&#34;broot&#34;</span><span class="op" id="8099208">,</span>&nbsp;<span class="ident" id="8099210"><a href="/text/template/multi_test.go.html#8099049">b</a></span><span class="op" id="8099211">.</span><span class="ident" id="8099212">String</span><span class="op" id="8099218">(</span><span class="op" id="8099219">)</span><span class="op" id="8099220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099223">}</span><br>
<span class="lineno">260</span><span class="op" id="8099225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8099228">//&nbsp;Issue&nbsp;7032</span><br>
<span class="lineno"></span><span class="keyword" id="8099242">func</span>&nbsp;<span class="ident" id="8099247">TestAddParseTreeToUnparsedTemplate</span><span class="op" id="8099281">(</span><span class="ident" id="8099282">t</span>&nbsp;<span class="op" id="8099284">*</span><span class="ident" id="8099285"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8099292">.</span><span class="ident" id="8099293">T</span><span class="op" id="8099294">)</span>&nbsp;<span class="op" id="8099296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099299">master</span>&nbsp;<span class="op" id="8099306">:=</span>&nbsp;<span class="string" id="8099309">&#34;{{define&nbsp;\&#34;master\&#34;}}{{end}}&#34;</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099341">tmpl</span>&nbsp;<span class="op" id="8099346">:=</span>&nbsp;<span class="ident" id="8099349"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8099352">(</span><span class="string" id="8099353">&#34;master&#34;</span><span class="op" id="8099361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099364">tree</span><span class="op" id="8099368">,</span>&nbsp;<span class="ident" id="8099370">err</span>&nbsp;<span class="op" id="8099374">:=</span>&nbsp;<span class="ident" id="8099377"><a href="/text/template/multi_test.go.html#8092780">parse</a></span><span class="op" id="8099382">.</span><span class="ident" id="8099383">Parse</span><span class="op" id="8099388">(</span><span class="string" id="8099389">&#34;master&#34;</span><span class="op" id="8099397">,</span>&nbsp;<span class="ident" id="8099399"><a href="/text/template/multi_test.go.html#8099299">master</a></span><span class="op" id="8099405">,</span>&nbsp;<span class="string" id="8099407">&#34;&#34;</span><span class="op" id="8099409">,</span>&nbsp;<span class="string" id="8099411">&#34;&#34;</span><span class="op" id="8099413">,</span>&nbsp;<span class="ident" id="8099415">nil</span><span class="op" id="8099418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099421">if</span>&nbsp;<span class="ident" id="8099424"><a href="/text/template/multi_test.go.html#8099370">err</a></span>&nbsp;<span class="op" id="8099428">!=</span>&nbsp;<span class="ident" id="8099431">nil</span>&nbsp;<span class="op" id="8099435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099439"><a href="/text/template/multi_test.go.html#8099282">t</a></span><span class="op" id="8099440">.</span><span class="ident" id="8099441">Fatalf</span><span class="op" id="8099447">(</span><span class="string" id="8099448">&#34;unexpected&nbsp;parse&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="8099474">,</span>&nbsp;<span class="ident" id="8099476"><a href="/text/template/multi_test.go.html#8099370">err</a></span><span class="op" id="8099479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099482">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099485">masterTree</span>&nbsp;<span class="op" id="8099496">:=</span>&nbsp;<span class="ident" id="8099499"><a href="/text/template/multi_test.go.html#8099364">tree</a></span><span class="op" id="8099503">[</span><span class="string" id="8099504">&#34;master&#34;</span><span class="op" id="8099512">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099515"><a href="/text/template/multi_test.go.html#8099341">tmpl</a></span><span class="op" id="8099519">.</span><span class="ident" id="8099520">AddParseTree</span><span class="op" id="8099532">(</span><span class="string" id="8099533">&#34;master&#34;</span><span class="op" id="8099541">,</span>&nbsp;<span class="ident" id="8099543"><a href="/text/template/multi_test.go.html#8099485">masterTree</a></span><span class="op" id="8099553">)</span>&nbsp;<span class="comment" id="8099555">//&nbsp;used&nbsp;to&nbsp;panic</span><br>
<span class="lineno"></span><span class="op" id="8099572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8099575">func</span>&nbsp;<span class="ident" id="8099580">TestRedefinition</span><span class="op" id="8099596">(</span><span class="ident" id="8099597">t</span>&nbsp;<span class="op" id="8099599">*</span><span class="ident" id="8099600"><a href="/text/template/multi_test.go.html#8092769">testing</a></span><span class="op" id="8099607">.</span><span class="ident" id="8099608">T</span><span class="op" id="8099609">)</span>&nbsp;<span class="op" id="8099611">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099614">var</span>&nbsp;<span class="ident" id="8099618">tmpl</span>&nbsp;<span class="op" id="8099623">*</span><span class="ident" id="8099624"><a href="/text/template/template.go.html#3580507">Template</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099634">var</span>&nbsp;<span class="ident" id="8099638">err</span>&nbsp;<span class="builtintype" id="8099642">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099649">if</span>&nbsp;<span class="ident" id="8099652"><a href="/text/template/multi_test.go.html#8099618">tmpl</a></span><span class="op" id="8099656">,</span>&nbsp;<span class="ident" id="8099658"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8099662">=</span>&nbsp;<span class="ident" id="8099664"><a href="/text/template/template.go.html#3580659">New</a></span><span class="op" id="8099667">(</span><span class="string" id="8099668">&#34;tmpl1&#34;</span><span class="op" id="8099675">)</span><span class="op" id="8099676">.</span><span class="ident" id="8099677">Parse</span><span class="op" id="8099682">(</span><span class="string" id="8099683">`{{define&nbsp;&#34;test&#34;}}foo{{end}}`</span><span class="op" id="8099712">)</span><span class="op" id="8099713">;</span>&nbsp;<span class="ident" id="8099715"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8099719">!=</span>&nbsp;<span class="ident" id="8099722">nil</span>&nbsp;<span class="op" id="8099726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099730"><a href="/text/template/multi_test.go.html#8099597">t</a></span><span class="op" id="8099731">.</span><span class="ident" id="8099732">Fatalf</span><span class="op" id="8099738">(</span><span class="string" id="8099739">&#34;parse&nbsp;1:&nbsp;%v&#34;</span><span class="op" id="8099752">,</span>&nbsp;<span class="ident" id="8099754"><a href="/text/template/multi_test.go.html#8099638">err</a></span><span class="op" id="8099757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099760">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099763">if</span>&nbsp;<span class="ident" id="8099766">_</span><span class="op" id="8099767">,</span>&nbsp;<span class="ident" id="8099769"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8099773">=</span>&nbsp;<span class="ident" id="8099775"><a href="/text/template/multi_test.go.html#8099618">tmpl</a></span><span class="op" id="8099779">.</span><span class="ident" id="8099780">Parse</span><span class="op" id="8099785">(</span><span class="string" id="8099786">`{{define&nbsp;&#34;test&#34;}}bar{{end}}`</span><span class="op" id="8099815">)</span><span class="op" id="8099816">;</span>&nbsp;<span class="ident" id="8099818"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8099822">==</span>&nbsp;<span class="ident" id="8099825">nil</span>&nbsp;<span class="op" id="8099829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099833"><a href="/text/template/multi_test.go.html#8099597">t</a></span><span class="op" id="8099834">.</span><span class="ident" id="8099835">Fatal</span><span class="op" id="8099840">(</span><span class="string" id="8099841">&#34;expected&nbsp;error&#34;</span><span class="op" id="8099857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099863">if</span>&nbsp;<span class="op" id="8099866">!</span><span class="ident" id="8099867"><a href="/text/template/multi_test.go.html#8092758">strings</a></span><span class="op" id="8099874">.</span><span class="ident" id="8099875">Contains</span><span class="op" id="8099883">(</span><span class="ident" id="8099884"><a href="/text/template/multi_test.go.html#8099638">err</a></span><span class="op" id="8099887">.</span><span class="ident" id="8099888">Error</span><span class="op" id="8099893">(</span><span class="op" id="8099894">)</span><span class="op" id="8099895">,</span>&nbsp;<span class="string" id="8099897">&#34;redefinition&#34;</span><span class="op" id="8099911">)</span>&nbsp;<span class="op" id="8099913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8099917"><a href="/text/template/multi_test.go.html#8099597">t</a></span><span class="op" id="8099918">.</span><span class="ident" id="8099919">Fatalf</span><span class="op" id="8099925">(</span><span class="string" id="8099926">&#34;expected&nbsp;redefinition&nbsp;error;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8099963">,</span>&nbsp;<span class="ident" id="8099965"><a href="/text/template/multi_test.go.html#8099638">err</a></span><span class="op" id="8099968">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8099971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8099974">if</span>&nbsp;<span class="ident" id="8099977">_</span><span class="op" id="8099978">,</span>&nbsp;<span class="ident" id="8099980"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8099984">=</span>&nbsp;<span class="ident" id="8099986"><a href="/text/template/multi_test.go.html#8099618">tmpl</a></span><span class="op" id="8099990">.</span><span class="ident" id="8099991">New</span><span class="op" id="8099994">(</span><span class="string" id="8099995">&#34;tmpl2&#34;</span><span class="op" id="8100002">)</span><span class="op" id="8100003">.</span><span class="ident" id="8100004">Parse</span><span class="op" id="8100009">(</span><span class="string" id="8100010">`{{define&nbsp;&#34;test&#34;}}bar{{end}}`</span><span class="op" id="8100039">)</span><span class="op" id="8100040">;</span>&nbsp;<span class="ident" id="8100042"><a href="/text/template/multi_test.go.html#8099638">err</a></span>&nbsp;<span class="op" id="8100046">==</span>&nbsp;<span class="ident" id="8100049">nil</span>&nbsp;<span class="op" id="8100053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100057"><a href="/text/template/multi_test.go.html#8099597">t</a></span><span class="op" id="8100058">.</span><span class="ident" id="8100059">Fatal</span><span class="op" id="8100064">(</span><span class="string" id="8100065">&#34;expected&nbsp;error&#34;</span><span class="op" id="8100081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8100087">if</span>&nbsp;<span class="op" id="8100090">!</span><span class="ident" id="8100091"><a href="/text/template/multi_test.go.html#8092758">strings</a></span><span class="op" id="8100098">.</span><span class="ident" id="8100099">Contains</span><span class="op" id="8100107">(</span><span class="ident" id="8100108"><a href="/text/template/multi_test.go.html#8099638">err</a></span><span class="op" id="8100111">.</span><span class="ident" id="8100112">Error</span><span class="op" id="8100117">(</span><span class="op" id="8100118">)</span><span class="op" id="8100119">,</span>&nbsp;<span class="string" id="8100121">&#34;redefinition&#34;</span><span class="op" id="8100135">)</span>&nbsp;<span class="op" id="8100137">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8100141"><a href="/text/template/multi_test.go.html#8099597">t</a></span><span class="op" id="8100142">.</span><span class="ident" id="8100143">Fatalf</span><span class="op" id="8100149">(</span><span class="string" id="8100150">&#34;expected&nbsp;redefinition&nbsp;error;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8100187">,</span>&nbsp;<span class="ident" id="8100189"><a href="/text/template/multi_test.go.html#8099638">err</a></span><span class="op" id="8100192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8100195">}</span><br>
<span class="lineno"></span><span class="op" id="8100197">}</span>
</div>
</body>
</html>
