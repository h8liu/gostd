<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5919344">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5919399">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5919453">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5919504">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5919582">package</span>&nbsp;<span class="ident" id="5919590">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5919598">import</span>&nbsp;<span class="op" id="5919605">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5919608">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5919614">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="5919624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5919627">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="5919643">func</span>&nbsp;<span class="ident" id="5919648">signal_disable</span><span class="op" id="5919662">(</span><span class="builtintype" id="5919663">uint32</span><span class="op" id="5919669">)</span><br>
<span class="lineno"></span><span class="keyword" id="5919671">func</span>&nbsp;<span class="ident" id="5919676">signal_enable</span><span class="op" id="5919689">(</span><span class="builtintype" id="5919690">uint32</span><span class="op" id="5919696">)</span><br>
<span class="lineno"></span><span class="keyword" id="5919698">func</span>&nbsp;<span class="ident" id="5919703">signal_recv</span><span class="op" id="5919714">(</span><span class="op" id="5919715">)</span>&nbsp;<span class="builtintype" id="5919717">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5919725">func</span>&nbsp;<span class="ident" id="5919730">loop</span><span class="op" id="5919734">(</span><span class="op" id="5919735">)</span>&nbsp;<span class="op" id="5919737">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5919740">for</span>&nbsp;<span class="op" id="5919744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5919748">process</span><span class="op" id="5919755">(</span><span class="ident" id="5919756">syscall</span><span class="op" id="5919763">.</span><span class="ident" id="5919764">Signal</span><span class="op" id="5919770">(</span><span class="ident" id="5919771">signal_recv</span><span class="op" id="5919782">(</span><span class="op" id="5919783">)</span><span class="op" id="5919784">)</span><span class="op" id="5919785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5919788">}</span><br>
<span class="lineno"></span><span class="op" id="5919790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5919793">func</span>&nbsp;<span class="ident" id="5919798">init</span><span class="op" id="5919802">(</span><span class="op" id="5919803">)</span>&nbsp;<span class="op" id="5919805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5919808">signal_enable</span><span class="op" id="5919821">(</span><span class="num" id="5919822">0</span><span class="op" id="5919823">)</span>&nbsp;<span class="comment" id="5919825">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5919853">go</span>&nbsp;<span class="ident" id="5919856">loop</span><span class="op" id="5919860">(</span><span class="op" id="5919861">)</span><br>
<span class="lineno"></span><span class="op" id="5919863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5919866">const</span>&nbsp;<span class="op" id="5919872">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5919875">numSig</span>&nbsp;<span class="op" id="5919882">=</span>&nbsp;<span class="num" id="5919884">65</span>&nbsp;<span class="comment" id="5919887">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="5919913">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5919916">func</span>&nbsp;<span class="ident" id="5919921">signum</span><span class="op" id="5919927">(</span><span class="ident" id="5919928">sig</span>&nbsp;<span class="ident" id="5919932">os</span><span class="op" id="5919934">.</span><span class="ident" id="5919935">Signal</span><span class="op" id="5919941">)</span>&nbsp;<span class="builtintype" id="5919943">int</span>&nbsp;<span class="op" id="5919947">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5919950">switch</span>&nbsp;<span class="ident" id="5919957">sig</span>&nbsp;<span class="op" id="5919961">:=</span>&nbsp;<span class="ident" id="5919964">sig</span><span class="op" id="5919967">.</span><span class="op" id="5919968">(</span><span class="keyword" id="5919969">type</span><span class="op" id="5919973">)</span>&nbsp;<span class="op" id="5919975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5919978">case</span>&nbsp;<span class="ident" id="5919983">syscall</span><span class="op" id="5919990">.</span><span class="ident" id="5919991">Signal</span><span class="op" id="5919997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5920001">i</span>&nbsp;<span class="op" id="5920003">:=</span>&nbsp;<span class="builtintype" id="5920006">int</span><span class="op" id="5920009">(</span><span class="ident" id="5920010">sig</span><span class="op" id="5920013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5920017">if</span>&nbsp;<span class="ident" id="5920020">i</span>&nbsp;<span class="op" id="5920022">&lt;</span>&nbsp;<span class="num" id="5920024">0</span>&nbsp;<span class="op" id="5920026">||</span>&nbsp;<span class="ident" id="5920029">i</span>&nbsp;<span class="op" id="5920031">&gt;=</span>&nbsp;<span class="ident" id="5920034">numSig</span>&nbsp;<span class="op" id="5920041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5920046">return</span>&nbsp;<span class="op" id="5920053">-</span><span class="num" id="5920054">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5920058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5920062">return</span>&nbsp;<span class="ident" id="5920069">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5920072">default</span><span class="op" id="5920079">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5920083">return</span>&nbsp;<span class="op" id="5920090">-</span><span class="num" id="5920091">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5920094">}</span><br>
<span class="lineno">45</span><span class="op" id="5920096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5920099">func</span>&nbsp;<span class="ident" id="5920104">enableSignal</span><span class="op" id="5920116">(</span><span class="ident" id="5920117">sig</span>&nbsp;<span class="builtintype" id="5920121">int</span><span class="op" id="5920124">)</span>&nbsp;<span class="op" id="5920126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5920129">signal_enable</span><span class="op" id="5920142">(</span><span class="builtintype" id="5920143">uint32</span><span class="op" id="5920149">(</span><span class="ident" id="5920150">sig</span><span class="op" id="5920153">)</span><span class="op" id="5920154">)</span><br>
<span class="lineno"></span><span class="op" id="5920156">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5920159">func</span>&nbsp;<span class="ident" id="5920164">disableSignal</span><span class="op" id="5920177">(</span><span class="ident" id="5920178">sig</span>&nbsp;<span class="builtintype" id="5920182">int</span><span class="op" id="5920185">)</span>&nbsp;<span class="op" id="5920187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5920190">signal_disable</span><span class="op" id="5920204">(</span><span class="builtintype" id="5920205">uint32</span><span class="op" id="5920211">(</span><span class="ident" id="5920212">sig</span><span class="op" id="5920215">)</span><span class="op" id="5920216">)</span><br>
<span class="lineno"></span><span class="op" id="5920218">}</span>
</div>
</body>
</html>
