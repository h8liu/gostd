<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5072131">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5072186">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5072240">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5072291">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="5072351">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="5072410">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5072456">//</span><br>
<span class="lineno"></span><span class="keyword" id="5072459">package</span>&nbsp;<span class="ident" id="5072467">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5072476">import</span>&nbsp;<span class="op" id="5072483">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072486">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072495">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072502">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072514">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072531">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072542">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5072553">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5072568">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5072571">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5072644">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5072717">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5072791">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="5072815">//</span><br>
<span class="lineno"></span><span class="keyword" id="5072818">type</span>&nbsp;<span class="ident" id="5072823">ErrorHandler</span>&nbsp;<span class="keyword" id="5072836">func</span><span class="op" id="5072840">(</span><span class="ident" id="5072841">pos</span>&nbsp;<span class="ident" id="5072845">token</span><span class="op" id="5072850">.</span><span class="ident" id="5072851">Position</span><span class="op" id="5072859">,</span>&nbsp;<span class="ident" id="5072861">msg</span>&nbsp;<span class="builtintype" id="5072865">string</span><span class="op" id="5072871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5072874">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="5072939">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="5073001">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="5073059">//</span><br>
<span class="lineno"></span><span class="keyword" id="5073062">type</span>&nbsp;<span class="ident" id="5073067">Scanner</span>&nbsp;<span class="keyword" id="5073075">struct</span>&nbsp;<span class="op" id="5073082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5073085">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073105">file</span>&nbsp;<span class="op" id="5073110">*</span><span class="ident" id="5073111">token</span><span class="op" id="5073116">.</span><span class="ident" id="5073117">File</span>&nbsp;&nbsp;<span class="comment" id="5073123">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073146">dir</span>&nbsp;&nbsp;<span class="builtintype" id="5073151">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5073164">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073201">src</span>&nbsp;&nbsp;<span class="op" id="5073206">[</span><span class="op" id="5073207">]</span><span class="builtintype" id="5073208">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5073219">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073230">err</span>&nbsp;&nbsp;<span class="ident" id="5073235">ErrorHandler</span>&nbsp;<span class="comment" id="5073248">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073276">mode</span>&nbsp;<span class="ident" id="5073281">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5073294">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5073313">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073332">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5073343">rune</span>&nbsp;<span class="comment" id="5073348">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073370">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5073381">int</span>&nbsp;&nbsp;<span class="comment" id="5073386">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073407">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5073418">int</span>&nbsp;&nbsp;<span class="comment" id="5073423">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073477">lineOffset</span>&nbsp;<span class="builtintype" id="5073488">int</span>&nbsp;&nbsp;<span class="comment" id="5073493">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073517">insertSemi</span>&nbsp;<span class="builtintype" id="5073528">bool</span>&nbsp;<span class="comment" id="5073533">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5073577">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073609">ErrorCount</span>&nbsp;<span class="builtintype" id="5073620">int</span>&nbsp;<span class="comment" id="5073624">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="5073656">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5073659">const</span>&nbsp;<span class="ident" id="5073665">bom</span>&nbsp;<span class="op" id="5073669">=</span>&nbsp;<span class="num" id="5073671">0xFEFF</span>&nbsp;<span class="comment" id="5073678">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5073738">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="5073779">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="5073810">//</span><br>
<span class="lineno"></span><span class="keyword" id="5073813">func</span>&nbsp;<span class="op" id="5073818">(</span><span class="ident" id="5073819">s</span>&nbsp;<span class="op" id="5073821">*</span><span class="ident" id="5073822">Scanner</span><span class="op" id="5073829">)</span>&nbsp;<span class="ident" id="5073831">next</span><span class="op" id="5073835">(</span><span class="op" id="5073836">)</span>&nbsp;<span class="op" id="5073838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5073841">if</span>&nbsp;<span class="ident" id="5073844">s</span><span class="op" id="5073845">.</span><span class="ident" id="5073846">rdOffset</span>&nbsp;<span class="op" id="5073855">&lt;</span>&nbsp;<span class="builtinfunc" id="5073857">len</span><span class="op" id="5073860">(</span><span class="ident" id="5073861">s</span><span class="op" id="5073862">.</span><span class="ident" id="5073863">src</span><span class="op" id="5073866">)</span>&nbsp;<span class="op" id="5073868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073872">s</span><span class="op" id="5073873">.</span><span class="ident" id="5073874">offset</span>&nbsp;<span class="op" id="5073881">=</span>&nbsp;<span class="ident" id="5073883">s</span><span class="op" id="5073884">.</span><span class="ident" id="5073885">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5073896">if</span>&nbsp;<span class="ident" id="5073899">s</span><span class="op" id="5073900">.</span><span class="ident" id="5073901">ch</span>&nbsp;<span class="op" id="5073904">==</span>&nbsp;<span class="string" id="5073907">&#39;\n&#39;</span>&nbsp;<span class="op" id="5073912">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073917">s</span><span class="op" id="5073918">.</span><span class="ident" id="5073919">lineOffset</span>&nbsp;<span class="op" id="5073930">=</span>&nbsp;<span class="ident" id="5073932">s</span><span class="op" id="5073933">.</span><span class="ident" id="5073934">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073944">s</span><span class="op" id="5073945">.</span><span class="ident" id="5073946">file</span><span class="op" id="5073950">.</span><span class="ident" id="5073951">AddLine</span><span class="op" id="5073958">(</span><span class="ident" id="5073959">s</span><span class="op" id="5073960">.</span><span class="ident" id="5073961">offset</span><span class="op" id="5073967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5073971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5073975">r</span><span class="op" id="5073976">,</span>&nbsp;<span class="ident" id="5073978">w</span>&nbsp;<span class="op" id="5073980">:=</span>&nbsp;<span class="builtintype" id="5073983">rune</span><span class="op" id="5073987">(</span><span class="ident" id="5073988">s</span><span class="op" id="5073989">.</span><span class="ident" id="5073990">src</span><span class="op" id="5073993">[</span><span class="ident" id="5073994">s</span><span class="op" id="5073995">.</span><span class="ident" id="5073996">rdOffset</span><span class="op" id="5074004">]</span><span class="op" id="5074005">)</span><span class="op" id="5074006">,</span>&nbsp;<span class="num" id="5074008">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5074012">switch</span>&nbsp;<span class="op" id="5074019">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5074023">case</span>&nbsp;<span class="ident" id="5074028">r</span>&nbsp;<span class="op" id="5074030">==</span>&nbsp;<span class="num" id="5074033">0</span><span class="op" id="5074034">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074039">s</span><span class="op" id="5074040">.</span><span class="builtintype" id="5074041">error</span><span class="op" id="5074046">(</span><span class="ident" id="5074047">s</span><span class="op" id="5074048">.</span><span class="ident" id="5074049">offset</span><span class="op" id="5074055">,</span>&nbsp;<span class="string" id="5074057">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="5074080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5074084">case</span>&nbsp;<span class="ident" id="5074089">r</span>&nbsp;<span class="op" id="5074091">&gt;=</span>&nbsp;<span class="num" id="5074094">0x80</span><span class="op" id="5074098">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5074103">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074119">r</span><span class="op" id="5074120">,</span>&nbsp;<span class="ident" id="5074122">w</span>&nbsp;<span class="op" id="5074124">=</span>&nbsp;<span class="ident" id="5074126">utf8</span><span class="op" id="5074130">.</span><span class="ident" id="5074131">DecodeRune</span><span class="op" id="5074141">(</span><span class="ident" id="5074142">s</span><span class="op" id="5074143">.</span><span class="ident" id="5074144">src</span><span class="op" id="5074147">[</span><span class="ident" id="5074148">s</span><span class="op" id="5074149">.</span><span class="ident" id="5074150">rdOffset</span><span class="op" id="5074158">:</span><span class="op" id="5074159">]</span><span class="op" id="5074160">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5074165">if</span>&nbsp;<span class="ident" id="5074168">r</span>&nbsp;<span class="op" id="5074170">==</span>&nbsp;<span class="ident" id="5074173">utf8</span><span class="op" id="5074177">.</span><span class="ident" id="5074178">RuneError</span>&nbsp;<span class="op" id="5074188">&amp;&amp;</span>&nbsp;<span class="ident" id="5074191">w</span>&nbsp;<span class="op" id="5074193">==</span>&nbsp;<span class="num" id="5074196">1</span>&nbsp;<span class="op" id="5074198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074204">s</span><span class="op" id="5074205">.</span><span class="builtintype" id="5074206">error</span><span class="op" id="5074211">(</span><span class="ident" id="5074212">s</span><span class="op" id="5074213">.</span><span class="ident" id="5074214">offset</span><span class="op" id="5074220">,</span>&nbsp;<span class="string" id="5074222">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="5074246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074251">}</span>&nbsp;<span class="keyword" id="5074253">else</span>&nbsp;<span class="keyword" id="5074258">if</span>&nbsp;<span class="ident" id="5074261">r</span>&nbsp;<span class="op" id="5074263">==</span>&nbsp;<span class="ident" id="5074266">bom</span>&nbsp;<span class="op" id="5074270">&amp;&amp;</span>&nbsp;<span class="ident" id="5074273">s</span><span class="op" id="5074274">.</span><span class="ident" id="5074275">offset</span>&nbsp;<span class="op" id="5074282">&gt;</span>&nbsp;<span class="num" id="5074284">0</span>&nbsp;<span class="op" id="5074286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074292">s</span><span class="op" id="5074293">.</span><span class="builtintype" id="5074294">error</span><span class="op" id="5074299">(</span><span class="ident" id="5074300">s</span><span class="op" id="5074301">.</span><span class="ident" id="5074302">offset</span><span class="op" id="5074308">,</span>&nbsp;<span class="string" id="5074310">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="5074335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074340">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074348">s</span><span class="op" id="5074349">.</span><span class="ident" id="5074350">rdOffset</span>&nbsp;<span class="op" id="5074359">+=</span>&nbsp;<span class="ident" id="5074362">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074366">s</span><span class="op" id="5074367">.</span><span class="ident" id="5074368">ch</span>&nbsp;<span class="op" id="5074371">=</span>&nbsp;<span class="ident" id="5074373">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074376">}</span>&nbsp;<span class="keyword" id="5074378">else</span>&nbsp;<span class="op" id="5074383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074387">s</span><span class="op" id="5074388">.</span><span class="ident" id="5074389">offset</span>&nbsp;<span class="op" id="5074396">=</span>&nbsp;<span class="builtinfunc" id="5074398">len</span><span class="op" id="5074401">(</span><span class="ident" id="5074402">s</span><span class="op" id="5074403">.</span><span class="ident" id="5074404">src</span><span class="op" id="5074407">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5074411">if</span>&nbsp;<span class="ident" id="5074414">s</span><span class="op" id="5074415">.</span><span class="ident" id="5074416">ch</span>&nbsp;<span class="op" id="5074419">==</span>&nbsp;<span class="string" id="5074422">&#39;\n&#39;</span>&nbsp;<span class="op" id="5074427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074432">s</span><span class="op" id="5074433">.</span><span class="ident" id="5074434">lineOffset</span>&nbsp;<span class="op" id="5074445">=</span>&nbsp;<span class="ident" id="5074447">s</span><span class="op" id="5074448">.</span><span class="ident" id="5074449">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074459">s</span><span class="op" id="5074460">.</span><span class="ident" id="5074461">file</span><span class="op" id="5074465">.</span><span class="ident" id="5074466">AddLine</span><span class="op" id="5074473">(</span><span class="ident" id="5074474">s</span><span class="op" id="5074475">.</span><span class="ident" id="5074476">offset</span><span class="op" id="5074482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074490">s</span><span class="op" id="5074491">.</span><span class="ident" id="5074492">ch</span>&nbsp;<span class="op" id="5074495">=</span>&nbsp;<span class="op" id="5074497">-</span><span class="num" id="5074498">1</span>&nbsp;<span class="comment" id="5074500">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5074508">}</span><br>
<span class="lineno"></span><span class="op" id="5074510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5074513">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="5074555">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="5074589">//</span><br>
<span class="lineno"></span><span class="keyword" id="5074592">type</span>&nbsp;<span class="ident" id="5074597">Mode</span>&nbsp;<span class="builtintype" id="5074602">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5074608">const</span>&nbsp;<span class="op" id="5074614">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074617">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5074633">Mode</span>&nbsp;<span class="op" id="5074638">=</span>&nbsp;<span class="num" id="5074640">1</span>&nbsp;<span class="op" id="5074642">&lt;&lt;</span>&nbsp;<span class="ident" id="5074645">iota</span>&nbsp;<span class="comment" id="5074650">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5074688">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5074721">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="5074782">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5074785">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5074856">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="5074927">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="5074999">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5075069">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5075140">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="5075195">//</span><br>
<span class="lineno">105</span><span class="comment" id="5075198">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5075269">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="5075339">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="5075413">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="5075453">//</span><br>
<span class="lineno">110</span><span class="comment" id="5075456">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="5075531">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5075547">//</span><br>
<span class="lineno"></span><span class="keyword" id="5075550">func</span>&nbsp;<span class="op" id="5075555">(</span><span class="ident" id="5075556">s</span>&nbsp;<span class="op" id="5075558">*</span><span class="ident" id="5075559">Scanner</span><span class="op" id="5075566">)</span>&nbsp;<span class="ident" id="5075568">Init</span><span class="op" id="5075572">(</span><span class="ident" id="5075573">file</span>&nbsp;<span class="op" id="5075578">*</span><span class="ident" id="5075579">token</span><span class="op" id="5075584">.</span><span class="ident" id="5075585">File</span><span class="op" id="5075589">,</span>&nbsp;<span class="ident" id="5075591">src</span>&nbsp;<span class="op" id="5075595">[</span><span class="op" id="5075596">]</span><span class="builtintype" id="5075597">byte</span><span class="op" id="5075601">,</span>&nbsp;<span class="ident" id="5075603">err</span>&nbsp;<span class="ident" id="5075607">ErrorHandler</span><span class="op" id="5075619">,</span>&nbsp;<span class="ident" id="5075621">mode</span>&nbsp;<span class="ident" id="5075626">Mode</span><span class="op" id="5075630">)</span>&nbsp;<span class="op" id="5075632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5075635">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5075703">if</span>&nbsp;<span class="ident" id="5075706">file</span><span class="op" id="5075710">.</span><span class="ident" id="5075711">Size</span><span class="op" id="5075715">(</span><span class="op" id="5075716">)</span>&nbsp;<span class="op" id="5075718">!=</span>&nbsp;<span class="builtinfunc" id="5075721">len</span><span class="op" id="5075724">(</span><span class="ident" id="5075725">src</span><span class="op" id="5075728">)</span>&nbsp;<span class="op" id="5075730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5075734">panic</span><span class="op" id="5075739">(</span><span class="ident" id="5075740">fmt</span><span class="op" id="5075743">.</span><span class="ident" id="5075744">Sprintf</span><span class="op" id="5075751">(</span><span class="string" id="5075752">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="5075796">,</span>&nbsp;<span class="ident" id="5075798">file</span><span class="op" id="5075802">.</span><span class="ident" id="5075803">Size</span><span class="op" id="5075807">(</span><span class="op" id="5075808">)</span><span class="op" id="5075809">,</span>&nbsp;<span class="builtinfunc" id="5075811">len</span><span class="op" id="5075814">(</span><span class="ident" id="5075815">src</span><span class="op" id="5075818">)</span><span class="op" id="5075819">)</span><span class="op" id="5075820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5075823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075826">s</span><span class="op" id="5075827">.</span><span class="ident" id="5075828">file</span>&nbsp;<span class="op" id="5075833">=</span>&nbsp;<span class="ident" id="5075835">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075841">s</span><span class="op" id="5075842">.</span><span class="ident" id="5075843">dir</span><span class="op" id="5075846">,</span>&nbsp;<span class="ident" id="5075848">_</span>&nbsp;<span class="op" id="5075850">=</span>&nbsp;<span class="ident" id="5075852">filepath</span><span class="op" id="5075860">.</span><span class="ident" id="5075861">Split</span><span class="op" id="5075866">(</span><span class="ident" id="5075867">file</span><span class="op" id="5075871">.</span><span class="ident" id="5075872">Name</span><span class="op" id="5075876">(</span><span class="op" id="5075877">)</span><span class="op" id="5075878">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075881">s</span><span class="op" id="5075882">.</span><span class="ident" id="5075883">src</span>&nbsp;<span class="op" id="5075887">=</span>&nbsp;<span class="ident" id="5075889">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075894">s</span><span class="op" id="5075895">.</span><span class="ident" id="5075896">err</span>&nbsp;<span class="op" id="5075900">=</span>&nbsp;<span class="ident" id="5075902">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075907">s</span><span class="op" id="5075908">.</span><span class="ident" id="5075909">mode</span>&nbsp;<span class="op" id="5075914">=</span>&nbsp;<span class="ident" id="5075916">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075923">s</span><span class="op" id="5075924">.</span><span class="ident" id="5075925">ch</span>&nbsp;<span class="op" id="5075928">=</span>&nbsp;<span class="string" id="5075930">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075935">s</span><span class="op" id="5075936">.</span><span class="ident" id="5075937">offset</span>&nbsp;<span class="op" id="5075944">=</span>&nbsp;<span class="num" id="5075946">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075949">s</span><span class="op" id="5075950">.</span><span class="ident" id="5075951">rdOffset</span>&nbsp;<span class="op" id="5075960">=</span>&nbsp;<span class="num" id="5075962">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075965">s</span><span class="op" id="5075966">.</span><span class="ident" id="5075967">lineOffset</span>&nbsp;<span class="op" id="5075978">=</span>&nbsp;<span class="num" id="5075980">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075983">s</span><span class="op" id="5075984">.</span><span class="ident" id="5075985">insertSemi</span>&nbsp;<span class="op" id="5075996">=</span>&nbsp;<span class="builtintype" id="5075998">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076005">s</span><span class="op" id="5076006">.</span><span class="ident" id="5076007">ErrorCount</span>&nbsp;<span class="op" id="5076018">=</span>&nbsp;<span class="num" id="5076020">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076024">s</span><span class="op" id="5076025">.</span><span class="ident" id="5076026">next</span><span class="op" id="5076030">(</span><span class="op" id="5076031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076034">if</span>&nbsp;<span class="ident" id="5076037">s</span><span class="op" id="5076038">.</span><span class="ident" id="5076039">ch</span>&nbsp;<span class="op" id="5076042">==</span>&nbsp;<span class="ident" id="5076045">bom</span>&nbsp;<span class="op" id="5076049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076053">s</span><span class="op" id="5076054">.</span><span class="ident" id="5076055">next</span><span class="op" id="5076059">(</span><span class="op" id="5076060">)</span>&nbsp;<span class="comment" id="5076062">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5076095">}</span><br>
<span class="lineno">135</span><span class="op" id="5076097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5076100">func</span>&nbsp;<span class="op" id="5076105">(</span><span class="ident" id="5076106">s</span>&nbsp;<span class="op" id="5076108">*</span><span class="ident" id="5076109">Scanner</span><span class="op" id="5076116">)</span>&nbsp;<span class="builtintype" id="5076118">error</span><span class="op" id="5076123">(</span><span class="ident" id="5076124">offs</span>&nbsp;<span class="builtintype" id="5076129">int</span><span class="op" id="5076132">,</span>&nbsp;<span class="ident" id="5076134">msg</span>&nbsp;<span class="builtintype" id="5076138">string</span><span class="op" id="5076144">)</span>&nbsp;<span class="op" id="5076146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076149">if</span>&nbsp;<span class="ident" id="5076152">s</span><span class="op" id="5076153">.</span><span class="ident" id="5076154">err</span>&nbsp;<span class="op" id="5076158">!=</span>&nbsp;<span class="ident" id="5076161">nil</span>&nbsp;<span class="op" id="5076165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076169">s</span><span class="op" id="5076170">.</span><span class="ident" id="5076171">err</span><span class="op" id="5076174">(</span><span class="ident" id="5076175">s</span><span class="op" id="5076176">.</span><span class="ident" id="5076177">file</span><span class="op" id="5076181">.</span><span class="ident" id="5076182">Position</span><span class="op" id="5076190">(</span><span class="ident" id="5076191">s</span><span class="op" id="5076192">.</span><span class="ident" id="5076193">file</span><span class="op" id="5076197">.</span><span class="ident" id="5076198">Pos</span><span class="op" id="5076201">(</span><span class="ident" id="5076202">offs</span><span class="op" id="5076206">)</span><span class="op" id="5076207">)</span><span class="op" id="5076208">,</span>&nbsp;<span class="ident" id="5076210">msg</span><span class="op" id="5076213">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5076216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076219">s</span><span class="op" id="5076220">.</span><span class="ident" id="5076221">ErrorCount</span><span class="op" id="5076231">++</span><br>
<span class="lineno"></span><span class="op" id="5076234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5076237">var</span>&nbsp;<span class="ident" id="5076241">prefix</span>&nbsp;<span class="op" id="5076248">=</span>&nbsp;<span class="op" id="5076250">[</span><span class="op" id="5076251">]</span><span class="builtintype" id="5076252">byte</span><span class="op" id="5076256">(</span><span class="string" id="5076257">&#34;//line&nbsp;&#34;</span><span class="op" id="5076266">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="5076269">func</span>&nbsp;<span class="op" id="5076274">(</span><span class="ident" id="5076275">s</span>&nbsp;<span class="op" id="5076277">*</span><span class="ident" id="5076278">Scanner</span><span class="op" id="5076285">)</span>&nbsp;<span class="ident" id="5076287">interpretLineComment</span><span class="op" id="5076307">(</span><span class="ident" id="5076308">text</span>&nbsp;<span class="op" id="5076313">[</span><span class="op" id="5076314">]</span><span class="builtintype" id="5076315">byte</span><span class="op" id="5076319">)</span>&nbsp;<span class="op" id="5076321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076324">if</span>&nbsp;<span class="ident" id="5076327">bytes</span><span class="op" id="5076332">.</span><span class="ident" id="5076333">HasPrefix</span><span class="op" id="5076342">(</span><span class="ident" id="5076343">text</span><span class="op" id="5076347">,</span>&nbsp;<span class="ident" id="5076349">prefix</span><span class="op" id="5076355">)</span>&nbsp;<span class="op" id="5076357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5076361">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076403">if</span>&nbsp;<span class="ident" id="5076406">i</span>&nbsp;<span class="op" id="5076408">:=</span>&nbsp;<span class="ident" id="5076411">bytes</span><span class="op" id="5076416">.</span><span class="ident" id="5076417">LastIndex</span><span class="op" id="5076426">(</span><span class="ident" id="5076427">text</span><span class="op" id="5076431">,</span>&nbsp;<span class="op" id="5076433">[</span><span class="op" id="5076434">]</span><span class="builtintype" id="5076435">byte</span><span class="op" id="5076439">{</span><span class="string" id="5076440">&#39;:&#39;</span><span class="op" id="5076443">}</span><span class="op" id="5076444">)</span><span class="op" id="5076445">;</span>&nbsp;<span class="ident" id="5076447">i</span>&nbsp;<span class="op" id="5076449">&gt;</span>&nbsp;<span class="num" id="5076451">0</span>&nbsp;<span class="op" id="5076453">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076458">if</span>&nbsp;<span class="ident" id="5076461">line</span><span class="op" id="5076465">,</span>&nbsp;<span class="ident" id="5076467">err</span>&nbsp;<span class="op" id="5076471">:=</span>&nbsp;<span class="ident" id="5076474">strconv</span><span class="op" id="5076481">.</span><span class="ident" id="5076482">Atoi</span><span class="op" id="5076486">(</span><span class="builtintype" id="5076487">string</span><span class="op" id="5076493">(</span><span class="ident" id="5076494">text</span><span class="op" id="5076498">[</span><span class="ident" id="5076499">i</span><span class="op" id="5076500">+</span><span class="num" id="5076501">1</span><span class="op" id="5076502">:</span><span class="op" id="5076503">]</span><span class="op" id="5076504">)</span><span class="op" id="5076505">)</span><span class="op" id="5076506">;</span>&nbsp;<span class="ident" id="5076508">err</span>&nbsp;<span class="op" id="5076512">==</span>&nbsp;<span class="ident" id="5076515">nil</span>&nbsp;<span class="op" id="5076519">&amp;&amp;</span>&nbsp;<span class="ident" id="5076522">line</span>&nbsp;<span class="op" id="5076527">&gt;</span>&nbsp;<span class="num" id="5076529">0</span>&nbsp;<span class="op" id="5076531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5076537">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076579">filename</span>&nbsp;<span class="op" id="5076588">:=</span>&nbsp;<span class="builtintype" id="5076591">string</span><span class="op" id="5076597">(</span><span class="ident" id="5076598">bytes</span><span class="op" id="5076603">.</span><span class="ident" id="5076604">TrimSpace</span><span class="op" id="5076613">(</span><span class="ident" id="5076614">text</span><span class="op" id="5076618">[</span><span class="builtinfunc" id="5076619">len</span><span class="op" id="5076622">(</span><span class="ident" id="5076623">prefix</span><span class="op" id="5076629">)</span><span class="op" id="5076630">:</span><span class="ident" id="5076631">i</span><span class="op" id="5076632">]</span><span class="op" id="5076633">)</span><span class="op" id="5076634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076640">if</span>&nbsp;<span class="ident" id="5076643">filename</span>&nbsp;<span class="op" id="5076652">!=</span>&nbsp;<span class="string" id="5076655">&#34;&#34;</span>&nbsp;<span class="op" id="5076658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076665">filename</span>&nbsp;<span class="op" id="5076674">=</span>&nbsp;<span class="ident" id="5076676">filepath</span><span class="op" id="5076684">.</span><span class="ident" id="5076685">Clean</span><span class="op" id="5076690">(</span><span class="ident" id="5076691">filename</span><span class="op" id="5076699">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5076706">if</span>&nbsp;<span class="op" id="5076709">!</span><span class="ident" id="5076710">filepath</span><span class="op" id="5076718">.</span><span class="ident" id="5076719">IsAbs</span><span class="op" id="5076724">(</span><span class="ident" id="5076725">filename</span><span class="op" id="5076733">)</span>&nbsp;<span class="op" id="5076735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5076743">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076796">filename</span>&nbsp;<span class="op" id="5076805">=</span>&nbsp;<span class="ident" id="5076807">filepath</span><span class="op" id="5076815">.</span><span class="ident" id="5076816">Join</span><span class="op" id="5076820">(</span><span class="ident" id="5076821">s</span><span class="op" id="5076822">.</span><span class="ident" id="5076823">dir</span><span class="op" id="5076826">,</span>&nbsp;<span class="ident" id="5076828">filename</span><span class="op" id="5076836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5076843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5076849">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5076855">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5076886">s</span><span class="op" id="5076887">.</span><span class="ident" id="5076888">file</span><span class="op" id="5076892">.</span><span class="ident" id="5076893">AddLineInfo</span><span class="op" id="5076904">(</span><span class="ident" id="5076905">s</span><span class="op" id="5076906">.</span><span class="ident" id="5076907">lineOffset</span><span class="op" id="5076917">+</span><span class="builtinfunc" id="5076918">len</span><span class="op" id="5076921">(</span><span class="ident" id="5076922">text</span><span class="op" id="5076926">)</span><span class="op" id="5076927">+</span><span class="num" id="5076928">1</span><span class="op" id="5076929">,</span>&nbsp;<span class="ident" id="5076931">filename</span><span class="op" id="5076939">,</span>&nbsp;<span class="ident" id="5076941">line</span><span class="op" id="5076945">)</span>&nbsp;<span class="comment" id="5076947">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077008">}</span><br>
<span class="lineno">165</span><span class="op" id="5077010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5077013">func</span>&nbsp;<span class="op" id="5077018">(</span><span class="ident" id="5077019">s</span>&nbsp;<span class="op" id="5077021">*</span><span class="ident" id="5077022">Scanner</span><span class="op" id="5077029">)</span>&nbsp;<span class="ident" id="5077031">scanComment</span><span class="op" id="5077042">(</span><span class="op" id="5077043">)</span>&nbsp;<span class="builtintype" id="5077045">string</span>&nbsp;<span class="op" id="5077052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077055">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077116">offs</span>&nbsp;<span class="op" id="5077121">:=</span>&nbsp;<span class="ident" id="5077124">s</span><span class="op" id="5077125">.</span><span class="ident" id="5077126">offset</span>&nbsp;<span class="op" id="5077133">-</span>&nbsp;<span class="num" id="5077135">1</span>&nbsp;<span class="comment" id="5077137">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077165">hasCR</span>&nbsp;<span class="op" id="5077171">:=</span>&nbsp;<span class="builtintype" id="5077174">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077182">if</span>&nbsp;<span class="ident" id="5077185">s</span><span class="op" id="5077186">.</span><span class="ident" id="5077187">ch</span>&nbsp;<span class="op" id="5077190">==</span>&nbsp;<span class="string" id="5077193">&#39;/&#39;</span>&nbsp;<span class="op" id="5077197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077201">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077220">s</span><span class="op" id="5077221">.</span><span class="ident" id="5077222">next</span><span class="op" id="5077226">(</span><span class="op" id="5077227">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077231">for</span>&nbsp;<span class="ident" id="5077235">s</span><span class="op" id="5077236">.</span><span class="ident" id="5077237">ch</span>&nbsp;<span class="op" id="5077240">!=</span>&nbsp;<span class="string" id="5077243">&#39;\n&#39;</span>&nbsp;<span class="op" id="5077248">&amp;&amp;</span>&nbsp;<span class="ident" id="5077251">s</span><span class="op" id="5077252">.</span><span class="ident" id="5077253">ch</span>&nbsp;<span class="op" id="5077256">&gt;=</span>&nbsp;<span class="num" id="5077259">0</span>&nbsp;<span class="op" id="5077261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077266">if</span>&nbsp;<span class="ident" id="5077269">s</span><span class="op" id="5077270">.</span><span class="ident" id="5077271">ch</span>&nbsp;<span class="op" id="5077274">==</span>&nbsp;<span class="string" id="5077277">&#39;\r&#39;</span>&nbsp;<span class="op" id="5077282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077288">hasCR</span>&nbsp;<span class="op" id="5077294">=</span>&nbsp;<span class="builtintype" id="5077296">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077309">s</span><span class="op" id="5077310">.</span><span class="ident" id="5077311">next</span><span class="op" id="5077315">(</span><span class="op" id="5077316">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077324">if</span>&nbsp;<span class="ident" id="5077327">offs</span>&nbsp;<span class="op" id="5077332">==</span>&nbsp;<span class="ident" id="5077335">s</span><span class="op" id="5077336">.</span><span class="ident" id="5077337">lineOffset</span>&nbsp;<span class="op" id="5077348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077353">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077411">s</span><span class="op" id="5077412">.</span><span class="ident" id="5077413">interpretLineComment</span><span class="op" id="5077433">(</span><span class="ident" id="5077434">s</span><span class="op" id="5077435">.</span><span class="ident" id="5077436">src</span><span class="op" id="5077439">[</span><span class="ident" id="5077440">offs</span><span class="op" id="5077444">:</span><span class="ident" id="5077445">s</span><span class="op" id="5077446">.</span><span class="ident" id="5077447">offset</span><span class="op" id="5077453">]</span><span class="op" id="5077454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077458">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077462">goto</span>&nbsp;<span class="ident" id="5077467">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077477">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077498">s</span><span class="op" id="5077499">.</span><span class="ident" id="5077500">next</span><span class="op" id="5077504">(</span><span class="op" id="5077505">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077508">for</span>&nbsp;<span class="ident" id="5077512">s</span><span class="op" id="5077513">.</span><span class="ident" id="5077514">ch</span>&nbsp;<span class="op" id="5077517">&gt;=</span>&nbsp;<span class="num" id="5077520">0</span>&nbsp;<span class="op" id="5077522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077526">ch</span>&nbsp;<span class="op" id="5077529">:=</span>&nbsp;<span class="ident" id="5077532">s</span><span class="op" id="5077533">.</span><span class="ident" id="5077534">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077539">if</span>&nbsp;<span class="ident" id="5077542">ch</span>&nbsp;<span class="op" id="5077545">==</span>&nbsp;<span class="string" id="5077548">&#39;\r&#39;</span>&nbsp;<span class="op" id="5077553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077558">hasCR</span>&nbsp;<span class="op" id="5077564">=</span>&nbsp;<span class="builtintype" id="5077566">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077573">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077577">s</span><span class="op" id="5077578">.</span><span class="ident" id="5077579">next</span><span class="op" id="5077583">(</span><span class="op" id="5077584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077588">if</span>&nbsp;<span class="ident" id="5077591">ch</span>&nbsp;<span class="op" id="5077594">==</span>&nbsp;<span class="string" id="5077597">&#39;*&#39;</span>&nbsp;<span class="op" id="5077601">&amp;&amp;</span>&nbsp;<span class="ident" id="5077604">s</span><span class="op" id="5077605">.</span><span class="ident" id="5077606">ch</span>&nbsp;<span class="op" id="5077609">==</span>&nbsp;<span class="string" id="5077612">&#39;/&#39;</span>&nbsp;<span class="op" id="5077616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077621">s</span><span class="op" id="5077622">.</span><span class="ident" id="5077623">next</span><span class="op" id="5077627">(</span><span class="op" id="5077628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077633">goto</span>&nbsp;<span class="ident" id="5077638">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077645">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077652">s</span><span class="op" id="5077653">.</span><span class="builtintype" id="5077654">error</span><span class="op" id="5077659">(</span><span class="ident" id="5077660">offs</span><span class="op" id="5077664">,</span>&nbsp;<span class="string" id="5077666">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5077690">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5077693">exit</span><span class="op" id="5077697">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077700">lit</span>&nbsp;<span class="op" id="5077704">:=</span>&nbsp;<span class="ident" id="5077707">s</span><span class="op" id="5077708">.</span><span class="ident" id="5077709">src</span><span class="op" id="5077712">[</span><span class="ident" id="5077713">offs</span><span class="op" id="5077717">:</span><span class="ident" id="5077718">s</span><span class="op" id="5077719">.</span><span class="ident" id="5077720">offset</span><span class="op" id="5077726">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077729">if</span>&nbsp;<span class="ident" id="5077732">hasCR</span>&nbsp;<span class="op" id="5077738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077742">lit</span>&nbsp;<span class="op" id="5077746">=</span>&nbsp;<span class="ident" id="5077748">stripCR</span><span class="op" id="5077755">(</span><span class="ident" id="5077756">lit</span><span class="op" id="5077759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5077762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077766">return</span>&nbsp;<span class="builtintype" id="5077773">string</span><span class="op" id="5077779">(</span><span class="ident" id="5077780">lit</span><span class="op" id="5077783">)</span><br>
<span class="lineno"></span><span class="op" id="5077785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5077788">func</span>&nbsp;<span class="op" id="5077793">(</span><span class="ident" id="5077794">s</span>&nbsp;<span class="op" id="5077796">*</span><span class="ident" id="5077797">Scanner</span><span class="op" id="5077804">)</span>&nbsp;<span class="ident" id="5077806">findLineEnd</span><span class="op" id="5077817">(</span><span class="op" id="5077818">)</span>&nbsp;<span class="builtintype" id="5077820">bool</span>&nbsp;<span class="op" id="5077825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077828">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5077862">defer</span>&nbsp;<span class="keyword" id="5077868">func</span><span class="op" id="5077872">(</span><span class="ident" id="5077873">offs</span>&nbsp;<span class="builtintype" id="5077878">int</span><span class="op" id="5077881">)</span>&nbsp;<span class="op" id="5077883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5077887">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077953">s</span><span class="op" id="5077954">.</span><span class="ident" id="5077955">ch</span>&nbsp;<span class="op" id="5077958">=</span>&nbsp;<span class="string" id="5077960">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077966">s</span><span class="op" id="5077967">.</span><span class="ident" id="5077968">offset</span>&nbsp;<span class="op" id="5077975">=</span>&nbsp;<span class="ident" id="5077977">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5077984">s</span><span class="op" id="5077985">.</span><span class="ident" id="5077986">rdOffset</span>&nbsp;<span class="op" id="5077995">=</span>&nbsp;<span class="ident" id="5077997">offs</span>&nbsp;<span class="op" id="5078002">+</span>&nbsp;<span class="num" id="5078004">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078008">s</span><span class="op" id="5078009">.</span><span class="ident" id="5078010">next</span><span class="op" id="5078014">(</span><span class="op" id="5078015">)</span>&nbsp;<span class="comment" id="5078017">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078047">}</span><span class="op" id="5078048">(</span><span class="ident" id="5078049">s</span><span class="op" id="5078050">.</span><span class="ident" id="5078051">offset</span>&nbsp;<span class="op" id="5078058">-</span>&nbsp;<span class="num" id="5078060">1</span><span class="op" id="5078061">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5078065">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078132">for</span>&nbsp;<span class="ident" id="5078136">s</span><span class="op" id="5078137">.</span><span class="ident" id="5078138">ch</span>&nbsp;<span class="op" id="5078141">==</span>&nbsp;<span class="string" id="5078144">&#39;/&#39;</span>&nbsp;<span class="op" id="5078148">||</span>&nbsp;<span class="ident" id="5078151">s</span><span class="op" id="5078152">.</span><span class="ident" id="5078153">ch</span>&nbsp;<span class="op" id="5078156">==</span>&nbsp;<span class="string" id="5078159">&#39;*&#39;</span>&nbsp;<span class="op" id="5078163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078167">if</span>&nbsp;<span class="ident" id="5078170">s</span><span class="op" id="5078171">.</span><span class="ident" id="5078172">ch</span>&nbsp;<span class="op" id="5078175">==</span>&nbsp;<span class="string" id="5078178">&#39;/&#39;</span>&nbsp;<span class="op" id="5078182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5078187">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078233">return</span>&nbsp;<span class="builtintype" id="5078240">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078247">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5078251">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078291">s</span><span class="op" id="5078292">.</span><span class="ident" id="5078293">next</span><span class="op" id="5078297">(</span><span class="op" id="5078298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078302">for</span>&nbsp;<span class="ident" id="5078306">s</span><span class="op" id="5078307">.</span><span class="ident" id="5078308">ch</span>&nbsp;<span class="op" id="5078311">&gt;=</span>&nbsp;<span class="num" id="5078314">0</span>&nbsp;<span class="op" id="5078316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078321">ch</span>&nbsp;<span class="op" id="5078324">:=</span>&nbsp;<span class="ident" id="5078327">s</span><span class="op" id="5078328">.</span><span class="ident" id="5078329">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078335">if</span>&nbsp;<span class="ident" id="5078338">ch</span>&nbsp;<span class="op" id="5078341">==</span>&nbsp;<span class="string" id="5078344">&#39;\n&#39;</span>&nbsp;<span class="op" id="5078349">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078355">return</span>&nbsp;<span class="builtintype" id="5078362">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078375">s</span><span class="op" id="5078376">.</span><span class="ident" id="5078377">next</span><span class="op" id="5078381">(</span><span class="op" id="5078382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078387">if</span>&nbsp;<span class="ident" id="5078390">ch</span>&nbsp;<span class="op" id="5078393">==</span>&nbsp;<span class="string" id="5078396">&#39;*&#39;</span>&nbsp;<span class="op" id="5078400">&amp;&amp;</span>&nbsp;<span class="ident" id="5078403">s</span><span class="op" id="5078404">.</span><span class="ident" id="5078405">ch</span>&nbsp;<span class="op" id="5078408">==</span>&nbsp;<span class="string" id="5078411">&#39;/&#39;</span>&nbsp;<span class="op" id="5078415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078421">s</span><span class="op" id="5078422">.</span><span class="ident" id="5078423">next</span><span class="op" id="5078427">(</span><span class="op" id="5078428">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078434">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078451">s</span><span class="op" id="5078452">.</span><span class="ident" id="5078453">skipWhitespace</span><span class="op" id="5078467">(</span><span class="op" id="5078468">)</span>&nbsp;<span class="comment" id="5078470">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078495">if</span>&nbsp;<span class="ident" id="5078498">s</span><span class="op" id="5078499">.</span><span class="ident" id="5078500">ch</span>&nbsp;<span class="op" id="5078503">&lt;</span>&nbsp;<span class="num" id="5078505">0</span>&nbsp;<span class="op" id="5078507">||</span>&nbsp;<span class="ident" id="5078510">s</span><span class="op" id="5078511">.</span><span class="ident" id="5078512">ch</span>&nbsp;<span class="op" id="5078515">==</span>&nbsp;<span class="string" id="5078518">&#39;\n&#39;</span>&nbsp;<span class="op" id="5078523">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078528">return</span>&nbsp;<span class="builtintype" id="5078535">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078546">if</span>&nbsp;<span class="ident" id="5078549">s</span><span class="op" id="5078550">.</span><span class="ident" id="5078551">ch</span>&nbsp;<span class="op" id="5078554">!=</span>&nbsp;<span class="string" id="5078557">&#39;/&#39;</span>&nbsp;<span class="op" id="5078561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5078566">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078590">return</span>&nbsp;<span class="builtintype" id="5078597">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078609">s</span><span class="op" id="5078610">.</span><span class="ident" id="5078611">next</span><span class="op" id="5078615">(</span><span class="op" id="5078616">)</span>&nbsp;<span class="comment" id="5078618">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5078634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078638">return</span>&nbsp;<span class="builtintype" id="5078645">false</span><br>
<span class="lineno">255</span><span class="op" id="5078651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5078654">func</span>&nbsp;<span class="ident" id="5078659">isLetter</span><span class="op" id="5078667">(</span><span class="ident" id="5078668">ch</span>&nbsp;<span class="builtintype" id="5078671">rune</span><span class="op" id="5078675">)</span>&nbsp;<span class="builtintype" id="5078677">bool</span>&nbsp;<span class="op" id="5078682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078685">return</span>&nbsp;<span class="string" id="5078692">&#39;a&#39;</span>&nbsp;<span class="op" id="5078696">&lt;=</span>&nbsp;<span class="ident" id="5078699">ch</span>&nbsp;<span class="op" id="5078702">&amp;&amp;</span>&nbsp;<span class="ident" id="5078705">ch</span>&nbsp;<span class="op" id="5078708">&lt;=</span>&nbsp;<span class="string" id="5078711">&#39;z&#39;</span>&nbsp;<span class="op" id="5078715">||</span>&nbsp;<span class="string" id="5078718">&#39;A&#39;</span>&nbsp;<span class="op" id="5078722">&lt;=</span>&nbsp;<span class="ident" id="5078725">ch</span>&nbsp;<span class="op" id="5078728">&amp;&amp;</span>&nbsp;<span class="ident" id="5078731">ch</span>&nbsp;<span class="op" id="5078734">&lt;=</span>&nbsp;<span class="string" id="5078737">&#39;Z&#39;</span>&nbsp;<span class="op" id="5078741">||</span>&nbsp;<span class="ident" id="5078744">ch</span>&nbsp;<span class="op" id="5078747">==</span>&nbsp;<span class="string" id="5078750">&#39;_&#39;</span>&nbsp;<span class="op" id="5078754">||</span>&nbsp;<span class="ident" id="5078757">ch</span>&nbsp;<span class="op" id="5078760">&gt;=</span>&nbsp;<span class="num" id="5078763">0x80</span>&nbsp;<span class="op" id="5078768">&amp;&amp;</span>&nbsp;<span class="ident" id="5078771">unicode</span><span class="op" id="5078778">.</span><span class="ident" id="5078779">IsLetter</span><span class="op" id="5078787">(</span><span class="ident" id="5078788">ch</span><span class="op" id="5078790">)</span><br>
<span class="lineno"></span><span class="op" id="5078792">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="5078795">func</span>&nbsp;<span class="ident" id="5078800">isDigit</span><span class="op" id="5078807">(</span><span class="ident" id="5078808">ch</span>&nbsp;<span class="builtintype" id="5078811">rune</span><span class="op" id="5078815">)</span>&nbsp;<span class="builtintype" id="5078817">bool</span>&nbsp;<span class="op" id="5078822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078825">return</span>&nbsp;<span class="string" id="5078832">&#39;0&#39;</span>&nbsp;<span class="op" id="5078836">&lt;=</span>&nbsp;<span class="ident" id="5078839">ch</span>&nbsp;<span class="op" id="5078842">&amp;&amp;</span>&nbsp;<span class="ident" id="5078845">ch</span>&nbsp;<span class="op" id="5078848">&lt;=</span>&nbsp;<span class="string" id="5078851">&#39;9&#39;</span>&nbsp;<span class="op" id="5078855">||</span>&nbsp;<span class="ident" id="5078858">ch</span>&nbsp;<span class="op" id="5078861">&gt;=</span>&nbsp;<span class="num" id="5078864">0x80</span>&nbsp;<span class="op" id="5078869">&amp;&amp;</span>&nbsp;<span class="ident" id="5078872">unicode</span><span class="op" id="5078879">.</span><span class="ident" id="5078880">IsDigit</span><span class="op" id="5078887">(</span><span class="ident" id="5078888">ch</span><span class="op" id="5078890">)</span><br>
<span class="lineno"></span><span class="op" id="5078892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="5078895">func</span>&nbsp;<span class="op" id="5078900">(</span><span class="ident" id="5078901">s</span>&nbsp;<span class="op" id="5078903">*</span><span class="ident" id="5078904">Scanner</span><span class="op" id="5078911">)</span>&nbsp;<span class="ident" id="5078913">scanIdentifier</span><span class="op" id="5078927">(</span><span class="op" id="5078928">)</span>&nbsp;<span class="builtintype" id="5078930">string</span>&nbsp;<span class="op" id="5078937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078940">offs</span>&nbsp;<span class="op" id="5078945">:=</span>&nbsp;<span class="ident" id="5078948">s</span><span class="op" id="5078949">.</span><span class="ident" id="5078950">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5078958">for</span>&nbsp;<span class="ident" id="5078962">isLetter</span><span class="op" id="5078970">(</span><span class="ident" id="5078971">s</span><span class="op" id="5078972">.</span><span class="ident" id="5078973">ch</span><span class="op" id="5078975">)</span>&nbsp;<span class="op" id="5078977">||</span>&nbsp;<span class="ident" id="5078980">isDigit</span><span class="op" id="5078987">(</span><span class="ident" id="5078988">s</span><span class="op" id="5078989">.</span><span class="ident" id="5078990">ch</span><span class="op" id="5078992">)</span>&nbsp;<span class="op" id="5078994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5078998">s</span><span class="op" id="5078999">.</span><span class="ident" id="5079000">next</span><span class="op" id="5079004">(</span><span class="op" id="5079005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079008">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079011">return</span>&nbsp;<span class="builtintype" id="5079018">string</span><span class="op" id="5079024">(</span><span class="ident" id="5079025">s</span><span class="op" id="5079026">.</span><span class="ident" id="5079027">src</span><span class="op" id="5079030">[</span><span class="ident" id="5079031">offs</span><span class="op" id="5079035">:</span><span class="ident" id="5079036">s</span><span class="op" id="5079037">.</span><span class="ident" id="5079038">offset</span><span class="op" id="5079044">]</span><span class="op" id="5079045">)</span><br>
<span class="lineno"></span><span class="op" id="5079047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5079050">func</span>&nbsp;<span class="ident" id="5079055">digitVal</span><span class="op" id="5079063">(</span><span class="ident" id="5079064">ch</span>&nbsp;<span class="builtintype" id="5079067">rune</span><span class="op" id="5079071">)</span>&nbsp;<span class="builtintype" id="5079073">int</span>&nbsp;<span class="op" id="5079077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079080">switch</span>&nbsp;<span class="op" id="5079087">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079090">case</span>&nbsp;<span class="string" id="5079095">&#39;0&#39;</span>&nbsp;<span class="op" id="5079099">&lt;=</span>&nbsp;<span class="ident" id="5079102">ch</span>&nbsp;<span class="op" id="5079105">&amp;&amp;</span>&nbsp;<span class="ident" id="5079108">ch</span>&nbsp;<span class="op" id="5079111">&lt;=</span>&nbsp;<span class="string" id="5079114">&#39;9&#39;</span><span class="op" id="5079117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079121">return</span>&nbsp;<span class="builtintype" id="5079128">int</span><span class="op" id="5079131">(</span><span class="ident" id="5079132">ch</span>&nbsp;<span class="op" id="5079135">-</span>&nbsp;<span class="string" id="5079137">&#39;0&#39;</span><span class="op" id="5079140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079143">case</span>&nbsp;<span class="string" id="5079148">&#39;a&#39;</span>&nbsp;<span class="op" id="5079152">&lt;=</span>&nbsp;<span class="ident" id="5079155">ch</span>&nbsp;<span class="op" id="5079158">&amp;&amp;</span>&nbsp;<span class="ident" id="5079161">ch</span>&nbsp;<span class="op" id="5079164">&lt;=</span>&nbsp;<span class="string" id="5079167">&#39;f&#39;</span><span class="op" id="5079170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079174">return</span>&nbsp;<span class="builtintype" id="5079181">int</span><span class="op" id="5079184">(</span><span class="ident" id="5079185">ch</span>&nbsp;<span class="op" id="5079188">-</span>&nbsp;<span class="string" id="5079190">&#39;a&#39;</span>&nbsp;<span class="op" id="5079194">+</span>&nbsp;<span class="num" id="5079196">10</span><span class="op" id="5079198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079201">case</span>&nbsp;<span class="string" id="5079206">&#39;A&#39;</span>&nbsp;<span class="op" id="5079210">&lt;=</span>&nbsp;<span class="ident" id="5079213">ch</span>&nbsp;<span class="op" id="5079216">&amp;&amp;</span>&nbsp;<span class="ident" id="5079219">ch</span>&nbsp;<span class="op" id="5079222">&lt;=</span>&nbsp;<span class="string" id="5079225">&#39;F&#39;</span><span class="op" id="5079228">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079232">return</span>&nbsp;<span class="builtintype" id="5079239">int</span><span class="op" id="5079242">(</span><span class="ident" id="5079243">ch</span>&nbsp;<span class="op" id="5079246">-</span>&nbsp;<span class="string" id="5079248">&#39;A&#39;</span>&nbsp;<span class="op" id="5079252">+</span>&nbsp;<span class="num" id="5079254">10</span><span class="op" id="5079256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079262">return</span>&nbsp;<span class="num" id="5079269">16</span>&nbsp;<span class="comment" id="5079272">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="5079307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="5079310">func</span>&nbsp;<span class="op" id="5079315">(</span><span class="ident" id="5079316">s</span>&nbsp;<span class="op" id="5079318">*</span><span class="ident" id="5079319">Scanner</span><span class="op" id="5079326">)</span>&nbsp;<span class="ident" id="5079328">scanMantissa</span><span class="op" id="5079340">(</span><span class="ident" id="5079341">base</span>&nbsp;<span class="builtintype" id="5079346">int</span><span class="op" id="5079349">)</span>&nbsp;<span class="op" id="5079351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079354">for</span>&nbsp;<span class="ident" id="5079358">digitVal</span><span class="op" id="5079366">(</span><span class="ident" id="5079367">s</span><span class="op" id="5079368">.</span><span class="ident" id="5079369">ch</span><span class="op" id="5079371">)</span>&nbsp;<span class="op" id="5079373">&lt;</span>&nbsp;<span class="ident" id="5079375">base</span>&nbsp;<span class="op" id="5079380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079384">s</span><span class="op" id="5079385">.</span><span class="ident" id="5079386">next</span><span class="op" id="5079390">(</span><span class="op" id="5079391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079394">}</span><br>
<span class="lineno"></span><span class="op" id="5079396">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="5079399">func</span>&nbsp;<span class="op" id="5079404">(</span><span class="ident" id="5079405">s</span>&nbsp;<span class="op" id="5079407">*</span><span class="ident" id="5079408">Scanner</span><span class="op" id="5079415">)</span>&nbsp;<span class="ident" id="5079417">scanNumber</span><span class="op" id="5079427">(</span><span class="ident" id="5079428">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="5079445">bool</span><span class="op" id="5079449">)</span>&nbsp;<span class="op" id="5079451">(</span><span class="ident" id="5079452">token</span><span class="op" id="5079457">.</span><span class="ident" id="5079458">Token</span><span class="op" id="5079463">,</span>&nbsp;<span class="builtintype" id="5079465">string</span><span class="op" id="5079471">)</span>&nbsp;<span class="op" id="5079473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5079476">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079500">offs</span>&nbsp;<span class="op" id="5079505">:=</span>&nbsp;<span class="ident" id="5079508">s</span><span class="op" id="5079509">.</span><span class="ident" id="5079510">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079518">tok</span>&nbsp;<span class="op" id="5079522">:=</span>&nbsp;<span class="ident" id="5079525">token</span><span class="op" id="5079530">.</span><span class="ident" id="5079531">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079537">if</span>&nbsp;<span class="ident" id="5079540">seenDecimalPoint</span>&nbsp;<span class="op" id="5079557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079561">offs</span><span class="op" id="5079565">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079570">tok</span>&nbsp;<span class="op" id="5079574">=</span>&nbsp;<span class="ident" id="5079576">token</span><span class="op" id="5079581">.</span><span class="ident" id="5079582">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079590">s</span><span class="op" id="5079591">.</span><span class="ident" id="5079592">scanMantissa</span><span class="op" id="5079604">(</span><span class="num" id="5079605">10</span><span class="op" id="5079607">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079611">goto</span>&nbsp;<span class="ident" id="5079616">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079630">if</span>&nbsp;<span class="ident" id="5079633">s</span><span class="op" id="5079634">.</span><span class="ident" id="5079635">ch</span>&nbsp;<span class="op" id="5079638">==</span>&nbsp;<span class="string" id="5079641">&#39;0&#39;</span>&nbsp;<span class="op" id="5079645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5079649">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079667">offs</span>&nbsp;<span class="op" id="5079672">:=</span>&nbsp;<span class="ident" id="5079675">s</span><span class="op" id="5079676">.</span><span class="ident" id="5079677">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079686">s</span><span class="op" id="5079687">.</span><span class="ident" id="5079688">next</span><span class="op" id="5079692">(</span><span class="op" id="5079693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079697">if</span>&nbsp;<span class="ident" id="5079700">s</span><span class="op" id="5079701">.</span><span class="ident" id="5079702">ch</span>&nbsp;<span class="op" id="5079705">==</span>&nbsp;<span class="string" id="5079708">&#39;x&#39;</span>&nbsp;<span class="op" id="5079712">||</span>&nbsp;<span class="ident" id="5079715">s</span><span class="op" id="5079716">.</span><span class="ident" id="5079717">ch</span>&nbsp;<span class="op" id="5079720">==</span>&nbsp;<span class="string" id="5079723">&#39;X&#39;</span>&nbsp;<span class="op" id="5079727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5079732">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079754">s</span><span class="op" id="5079755">.</span><span class="ident" id="5079756">next</span><span class="op" id="5079760">(</span><span class="op" id="5079761">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079766">s</span><span class="op" id="5079767">.</span><span class="ident" id="5079768">scanMantissa</span><span class="op" id="5079780">(</span><span class="num" id="5079781">16</span><span class="op" id="5079783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079788">if</span>&nbsp;<span class="ident" id="5079791">s</span><span class="op" id="5079792">.</span><span class="ident" id="5079793">offset</span><span class="op" id="5079799">-</span><span class="ident" id="5079800">offs</span>&nbsp;<span class="op" id="5079805">&lt;=</span>&nbsp;<span class="num" id="5079808">2</span>&nbsp;<span class="op" id="5079810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5079816">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079849">s</span><span class="op" id="5079850">.</span><span class="builtintype" id="5079851">error</span><span class="op" id="5079856">(</span><span class="ident" id="5079857">offs</span><span class="op" id="5079861">,</span>&nbsp;<span class="string" id="5079863">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="5079891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079896">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5079900">}</span>&nbsp;<span class="keyword" id="5079902">else</span>&nbsp;<span class="op" id="5079907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5079912">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079937">seenDecimalDigit</span>&nbsp;<span class="op" id="5079954">:=</span>&nbsp;<span class="builtintype" id="5079957">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5079966">s</span><span class="op" id="5079967">.</span><span class="ident" id="5079968">scanMantissa</span><span class="op" id="5079980">(</span><span class="num" id="5079981">8</span><span class="op" id="5079982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5079987">if</span>&nbsp;<span class="ident" id="5079990">s</span><span class="op" id="5079991">.</span><span class="ident" id="5079992">ch</span>&nbsp;<span class="op" id="5079995">==</span>&nbsp;<span class="string" id="5079998">&#39;8&#39;</span>&nbsp;<span class="op" id="5080002">||</span>&nbsp;<span class="ident" id="5080005">s</span><span class="op" id="5080006">.</span><span class="ident" id="5080007">ch</span>&nbsp;<span class="op" id="5080010">==</span>&nbsp;<span class="string" id="5080013">&#39;9&#39;</span>&nbsp;<span class="op" id="5080017">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5080023">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080057">seenDecimalDigit</span>&nbsp;<span class="op" id="5080074">=</span>&nbsp;<span class="builtintype" id="5080076">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080085">s</span><span class="op" id="5080086">.</span><span class="ident" id="5080087">scanMantissa</span><span class="op" id="5080099">(</span><span class="num" id="5080100">10</span><span class="op" id="5080102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080112">if</span>&nbsp;<span class="ident" id="5080115">s</span><span class="op" id="5080116">.</span><span class="ident" id="5080117">ch</span>&nbsp;<span class="op" id="5080120">==</span>&nbsp;<span class="string" id="5080123">&#39;.&#39;</span>&nbsp;<span class="op" id="5080127">||</span>&nbsp;<span class="ident" id="5080130">s</span><span class="op" id="5080131">.</span><span class="ident" id="5080132">ch</span>&nbsp;<span class="op" id="5080135">==</span>&nbsp;<span class="string" id="5080138">&#39;e&#39;</span>&nbsp;<span class="op" id="5080142">||</span>&nbsp;<span class="ident" id="5080145">s</span><span class="op" id="5080146">.</span><span class="ident" id="5080147">ch</span>&nbsp;<span class="op" id="5080150">==</span>&nbsp;<span class="string" id="5080153">&#39;E&#39;</span>&nbsp;<span class="op" id="5080157">||</span>&nbsp;<span class="ident" id="5080160">s</span><span class="op" id="5080161">.</span><span class="ident" id="5080162">ch</span>&nbsp;<span class="op" id="5080165">==</span>&nbsp;<span class="string" id="5080168">&#39;i&#39;</span>&nbsp;<span class="op" id="5080172">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080178">goto</span>&nbsp;<span class="ident" id="5080183">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5080200">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080216">if</span>&nbsp;<span class="ident" id="5080219">seenDecimalDigit</span>&nbsp;<span class="op" id="5080236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080242">s</span><span class="op" id="5080243">.</span><span class="builtintype" id="5080244">error</span><span class="op" id="5080249">(</span><span class="ident" id="5080250">offs</span><span class="op" id="5080254">,</span>&nbsp;<span class="string" id="5080256">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="5080278">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080291">goto</span>&nbsp;<span class="ident" id="5080296">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5080306">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080331">s</span><span class="op" id="5080332">.</span><span class="ident" id="5080333">scanMantissa</span><span class="op" id="5080345">(</span><span class="num" id="5080346">10</span><span class="op" id="5080348">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5080351">fraction</span><span class="op" id="5080359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080362">if</span>&nbsp;<span class="ident" id="5080365">s</span><span class="op" id="5080366">.</span><span class="ident" id="5080367">ch</span>&nbsp;<span class="op" id="5080370">==</span>&nbsp;<span class="string" id="5080373">&#39;.&#39;</span>&nbsp;<span class="op" id="5080377">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080381">tok</span>&nbsp;<span class="op" id="5080385">=</span>&nbsp;<span class="ident" id="5080387">token</span><span class="op" id="5080392">.</span><span class="ident" id="5080393">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080401">s</span><span class="op" id="5080402">.</span><span class="ident" id="5080403">next</span><span class="op" id="5080407">(</span><span class="op" id="5080408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080412">s</span><span class="op" id="5080413">.</span><span class="ident" id="5080414">scanMantissa</span><span class="op" id="5080426">(</span><span class="num" id="5080427">10</span><span class="op" id="5080429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="5080435">exponent</span><span class="op" id="5080443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080446">if</span>&nbsp;<span class="ident" id="5080449">s</span><span class="op" id="5080450">.</span><span class="ident" id="5080451">ch</span>&nbsp;<span class="op" id="5080454">==</span>&nbsp;<span class="string" id="5080457">&#39;e&#39;</span>&nbsp;<span class="op" id="5080461">||</span>&nbsp;<span class="ident" id="5080464">s</span><span class="op" id="5080465">.</span><span class="ident" id="5080466">ch</span>&nbsp;<span class="op" id="5080469">==</span>&nbsp;<span class="string" id="5080472">&#39;E&#39;</span>&nbsp;<span class="op" id="5080476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080480">tok</span>&nbsp;<span class="op" id="5080484">=</span>&nbsp;<span class="ident" id="5080486">token</span><span class="op" id="5080491">.</span><span class="ident" id="5080492">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080500">s</span><span class="op" id="5080501">.</span><span class="ident" id="5080502">next</span><span class="op" id="5080506">(</span><span class="op" id="5080507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080511">if</span>&nbsp;<span class="ident" id="5080514">s</span><span class="op" id="5080515">.</span><span class="ident" id="5080516">ch</span>&nbsp;<span class="op" id="5080519">==</span>&nbsp;<span class="string" id="5080522">&#39;-&#39;</span>&nbsp;<span class="op" id="5080526">||</span>&nbsp;<span class="ident" id="5080529">s</span><span class="op" id="5080530">.</span><span class="ident" id="5080531">ch</span>&nbsp;<span class="op" id="5080534">==</span>&nbsp;<span class="string" id="5080537">&#39;+&#39;</span>&nbsp;<span class="op" id="5080541">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080546">s</span><span class="op" id="5080547">.</span><span class="ident" id="5080548">next</span><span class="op" id="5080552">(</span><span class="op" id="5080553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080561">s</span><span class="op" id="5080562">.</span><span class="ident" id="5080563">scanMantissa</span><span class="op" id="5080575">(</span><span class="num" id="5080576">10</span><span class="op" id="5080578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080581">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080585">if</span>&nbsp;<span class="ident" id="5080588">s</span><span class="op" id="5080589">.</span><span class="ident" id="5080590">ch</span>&nbsp;<span class="op" id="5080593">==</span>&nbsp;<span class="string" id="5080596">&#39;i&#39;</span>&nbsp;<span class="op" id="5080600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080604">tok</span>&nbsp;<span class="op" id="5080608">=</span>&nbsp;<span class="ident" id="5080610">token</span><span class="op" id="5080615">.</span><span class="ident" id="5080616">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080623">s</span><span class="op" id="5080624">.</span><span class="ident" id="5080625">next</span><span class="op" id="5080629">(</span><span class="op" id="5080630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5080633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="5080636">exit</span><span class="op" id="5080640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080643">return</span>&nbsp;<span class="ident" id="5080650">tok</span><span class="op" id="5080653">,</span>&nbsp;<span class="builtintype" id="5080655">string</span><span class="op" id="5080661">(</span><span class="ident" id="5080662">s</span><span class="op" id="5080663">.</span><span class="ident" id="5080664">src</span><span class="op" id="5080667">[</span><span class="ident" id="5080668">offs</span><span class="op" id="5080672">:</span><span class="ident" id="5080673">s</span><span class="op" id="5080674">.</span><span class="ident" id="5080675">offset</span><span class="op" id="5080681">]</span><span class="op" id="5080682">)</span><br>
<span class="lineno"></span><span class="op" id="5080684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5080687">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="5080754">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="5080825">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="5080890">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5080910">func</span>&nbsp;<span class="op" id="5080915">(</span><span class="ident" id="5080916">s</span>&nbsp;<span class="op" id="5080918">*</span><span class="ident" id="5080919">Scanner</span><span class="op" id="5080926">)</span>&nbsp;<span class="ident" id="5080928">scanEscape</span><span class="op" id="5080938">(</span><span class="ident" id="5080939">quote</span>&nbsp;<span class="builtintype" id="5080945">rune</span><span class="op" id="5080949">)</span>&nbsp;<span class="builtintype" id="5080951">bool</span>&nbsp;<span class="op" id="5080956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5080959">offs</span>&nbsp;<span class="op" id="5080964">:=</span>&nbsp;<span class="ident" id="5080967">s</span><span class="op" id="5080968">.</span><span class="ident" id="5080969">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080978">var</span>&nbsp;<span class="ident" id="5080982">n</span>&nbsp;<span class="builtintype" id="5080984">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5080989">var</span>&nbsp;<span class="ident" id="5080993">base</span><span class="op" id="5080997">,</span>&nbsp;<span class="ident" id="5080999">max</span>&nbsp;<span class="builtintype" id="5081003">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081011">switch</span>&nbsp;<span class="ident" id="5081018">s</span><span class="op" id="5081019">.</span><span class="ident" id="5081020">ch</span>&nbsp;<span class="op" id="5081023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081026">case</span>&nbsp;<span class="string" id="5081031">&#39;a&#39;</span><span class="op" id="5081034">,</span>&nbsp;<span class="string" id="5081036">&#39;b&#39;</span><span class="op" id="5081039">,</span>&nbsp;<span class="string" id="5081041">&#39;f&#39;</span><span class="op" id="5081044">,</span>&nbsp;<span class="string" id="5081046">&#39;n&#39;</span><span class="op" id="5081049">,</span>&nbsp;<span class="string" id="5081051">&#39;r&#39;</span><span class="op" id="5081054">,</span>&nbsp;<span class="string" id="5081056">&#39;t&#39;</span><span class="op" id="5081059">,</span>&nbsp;<span class="string" id="5081061">&#39;v&#39;</span><span class="op" id="5081064">,</span>&nbsp;<span class="string" id="5081066">&#39;\\&#39;</span><span class="op" id="5081070">,</span>&nbsp;<span class="ident" id="5081072">quote</span><span class="op" id="5081077">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081081">s</span><span class="op" id="5081082">.</span><span class="ident" id="5081083">next</span><span class="op" id="5081087">(</span><span class="op" id="5081088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081092">return</span>&nbsp;<span class="builtintype" id="5081099">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081105">case</span>&nbsp;<span class="string" id="5081110">&#39;0&#39;</span><span class="op" id="5081113">,</span>&nbsp;<span class="string" id="5081115">&#39;1&#39;</span><span class="op" id="5081118">,</span>&nbsp;<span class="string" id="5081120">&#39;2&#39;</span><span class="op" id="5081123">,</span>&nbsp;<span class="string" id="5081125">&#39;3&#39;</span><span class="op" id="5081128">,</span>&nbsp;<span class="string" id="5081130">&#39;4&#39;</span><span class="op" id="5081133">,</span>&nbsp;<span class="string" id="5081135">&#39;5&#39;</span><span class="op" id="5081138">,</span>&nbsp;<span class="string" id="5081140">&#39;6&#39;</span><span class="op" id="5081143">,</span>&nbsp;<span class="string" id="5081145">&#39;7&#39;</span><span class="op" id="5081148">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081152">n</span><span class="op" id="5081153">,</span>&nbsp;<span class="ident" id="5081155">base</span><span class="op" id="5081159">,</span>&nbsp;<span class="ident" id="5081161">max</span>&nbsp;<span class="op" id="5081165">=</span>&nbsp;<span class="num" id="5081167">3</span><span class="op" id="5081168">,</span>&nbsp;<span class="num" id="5081170">8</span><span class="op" id="5081171">,</span>&nbsp;<span class="num" id="5081173">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081178">case</span>&nbsp;<span class="string" id="5081183">&#39;x&#39;</span><span class="op" id="5081186">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081190">s</span><span class="op" id="5081191">.</span><span class="ident" id="5081192">next</span><span class="op" id="5081196">(</span><span class="op" id="5081197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081201">n</span><span class="op" id="5081202">,</span>&nbsp;<span class="ident" id="5081204">base</span><span class="op" id="5081208">,</span>&nbsp;<span class="ident" id="5081210">max</span>&nbsp;<span class="op" id="5081214">=</span>&nbsp;<span class="num" id="5081216">2</span><span class="op" id="5081217">,</span>&nbsp;<span class="num" id="5081219">16</span><span class="op" id="5081221">,</span>&nbsp;<span class="num" id="5081223">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081228">case</span>&nbsp;<span class="string" id="5081233">&#39;u&#39;</span><span class="op" id="5081236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081240">s</span><span class="op" id="5081241">.</span><span class="ident" id="5081242">next</span><span class="op" id="5081246">(</span><span class="op" id="5081247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081251">n</span><span class="op" id="5081252">,</span>&nbsp;<span class="ident" id="5081254">base</span><span class="op" id="5081258">,</span>&nbsp;<span class="ident" id="5081260">max</span>&nbsp;<span class="op" id="5081264">=</span>&nbsp;<span class="num" id="5081266">4</span><span class="op" id="5081267">,</span>&nbsp;<span class="num" id="5081269">16</span><span class="op" id="5081271">,</span>&nbsp;<span class="ident" id="5081273">unicode</span><span class="op" id="5081280">.</span><span class="ident" id="5081281">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081290">case</span>&nbsp;<span class="string" id="5081295">&#39;U&#39;</span><span class="op" id="5081298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081302">s</span><span class="op" id="5081303">.</span><span class="ident" id="5081304">next</span><span class="op" id="5081308">(</span><span class="op" id="5081309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081313">n</span><span class="op" id="5081314">,</span>&nbsp;<span class="ident" id="5081316">base</span><span class="op" id="5081320">,</span>&nbsp;<span class="ident" id="5081322">max</span>&nbsp;<span class="op" id="5081326">=</span>&nbsp;<span class="num" id="5081328">8</span><span class="op" id="5081329">,</span>&nbsp;<span class="num" id="5081331">16</span><span class="op" id="5081333">,</span>&nbsp;<span class="ident" id="5081335">unicode</span><span class="op" id="5081342">.</span><span class="ident" id="5081343">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081352">default</span><span class="op" id="5081359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081363">msg</span>&nbsp;<span class="op" id="5081367">:=</span>&nbsp;<span class="string" id="5081370">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081398">if</span>&nbsp;<span class="ident" id="5081401">s</span><span class="op" id="5081402">.</span><span class="ident" id="5081403">ch</span>&nbsp;<span class="op" id="5081406">&lt;</span>&nbsp;<span class="num" id="5081408">0</span>&nbsp;<span class="op" id="5081410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081415">msg</span>&nbsp;<span class="op" id="5081419">=</span>&nbsp;<span class="string" id="5081421">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081460">s</span><span class="op" id="5081461">.</span><span class="builtintype" id="5081462">error</span><span class="op" id="5081467">(</span><span class="ident" id="5081468">offs</span><span class="op" id="5081472">,</span>&nbsp;<span class="ident" id="5081474">msg</span><span class="op" id="5081477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081481">return</span>&nbsp;<span class="builtintype" id="5081488">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081499">var</span>&nbsp;<span class="ident" id="5081503">x</span>&nbsp;<span class="builtintype" id="5081505">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081513">for</span>&nbsp;<span class="ident" id="5081517">n</span>&nbsp;<span class="op" id="5081519">&gt;</span>&nbsp;<span class="num" id="5081521">0</span>&nbsp;<span class="op" id="5081523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081527">d</span>&nbsp;<span class="op" id="5081529">:=</span>&nbsp;<span class="builtintype" id="5081532">uint32</span><span class="op" id="5081538">(</span><span class="ident" id="5081539">digitVal</span><span class="op" id="5081547">(</span><span class="ident" id="5081548">s</span><span class="op" id="5081549">.</span><span class="ident" id="5081550">ch</span><span class="op" id="5081552">)</span><span class="op" id="5081553">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081557">if</span>&nbsp;<span class="ident" id="5081560">d</span>&nbsp;<span class="op" id="5081562">&gt;=</span>&nbsp;<span class="ident" id="5081565">base</span>&nbsp;<span class="op" id="5081570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081575">msg</span>&nbsp;<span class="op" id="5081579">:=</span>&nbsp;<span class="ident" id="5081582">fmt</span><span class="op" id="5081585">.</span><span class="ident" id="5081586">Sprintf</span><span class="op" id="5081593">(</span><span class="string" id="5081594">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="5081636">,</span>&nbsp;<span class="ident" id="5081638">s</span><span class="op" id="5081639">.</span><span class="ident" id="5081640">ch</span><span class="op" id="5081642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081647">if</span>&nbsp;<span class="ident" id="5081650">s</span><span class="op" id="5081651">.</span><span class="ident" id="5081652">ch</span>&nbsp;<span class="op" id="5081655">&lt;</span>&nbsp;<span class="num" id="5081657">0</span>&nbsp;<span class="op" id="5081659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081665">msg</span>&nbsp;<span class="op" id="5081669">=</span>&nbsp;<span class="string" id="5081671">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081707">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081712">s</span><span class="op" id="5081713">.</span><span class="builtintype" id="5081714">error</span><span class="op" id="5081719">(</span><span class="ident" id="5081720">s</span><span class="op" id="5081721">.</span><span class="ident" id="5081722">offset</span><span class="op" id="5081728">,</span>&nbsp;<span class="ident" id="5081730">msg</span><span class="op" id="5081733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081738">return</span>&nbsp;<span class="builtintype" id="5081745">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081757">x</span>&nbsp;<span class="op" id="5081759">=</span>&nbsp;<span class="ident" id="5081761">x</span><span class="op" id="5081762">*</span><span class="ident" id="5081763">base</span>&nbsp;<span class="op" id="5081768">+</span>&nbsp;<span class="ident" id="5081770">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081774">s</span><span class="op" id="5081775">.</span><span class="ident" id="5081776">next</span><span class="op" id="5081780">(</span><span class="op" id="5081781">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081785">n</span><span class="op" id="5081786">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081794">if</span>&nbsp;<span class="ident" id="5081797">x</span>&nbsp;<span class="op" id="5081799">&gt;</span>&nbsp;<span class="ident" id="5081801">max</span>&nbsp;<span class="op" id="5081805">||</span>&nbsp;<span class="num" id="5081808">0xD800</span>&nbsp;<span class="op" id="5081815">&lt;=</span>&nbsp;<span class="ident" id="5081818">x</span>&nbsp;<span class="op" id="5081820">&amp;&amp;</span>&nbsp;<span class="ident" id="5081823">x</span>&nbsp;<span class="op" id="5081825">&lt;</span>&nbsp;<span class="num" id="5081827">0xE000</span>&nbsp;<span class="op" id="5081834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5081838">s</span><span class="op" id="5081839">.</span><span class="builtintype" id="5081840">error</span><span class="op" id="5081845">(</span><span class="ident" id="5081846">offs</span><span class="op" id="5081850">,</span>&nbsp;<span class="string" id="5081852">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="5081899">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081903">return</span>&nbsp;<span class="builtintype" id="5081910">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5081917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5081921">return</span>&nbsp;<span class="builtintype" id="5081928">true</span><br>
<span class="lineno"></span><span class="op" id="5081933">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="5081936">func</span>&nbsp;<span class="op" id="5081941">(</span><span class="ident" id="5081942">s</span>&nbsp;<span class="op" id="5081944">*</span><span class="ident" id="5081945">Scanner</span><span class="op" id="5081952">)</span>&nbsp;<span class="ident" id="5081954">scanRune</span><span class="op" id="5081962">(</span><span class="op" id="5081963">)</span>&nbsp;<span class="builtintype" id="5081965">string</span>&nbsp;<span class="op" id="5081972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5081975">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082009">offs</span>&nbsp;<span class="op" id="5082014">:=</span>&nbsp;<span class="ident" id="5082017">s</span><span class="op" id="5082018">.</span><span class="ident" id="5082019">offset</span>&nbsp;<span class="op" id="5082026">-</span>&nbsp;<span class="num" id="5082028">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082032">valid</span>&nbsp;<span class="op" id="5082038">:=</span>&nbsp;<span class="builtintype" id="5082041">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082047">n</span>&nbsp;<span class="op" id="5082049">:=</span>&nbsp;<span class="num" id="5082052">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082055">for</span>&nbsp;<span class="op" id="5082059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082063">ch</span>&nbsp;<span class="op" id="5082066">:=</span>&nbsp;<span class="ident" id="5082069">s</span><span class="op" id="5082070">.</span><span class="ident" id="5082071">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082076">if</span>&nbsp;<span class="ident" id="5082079">ch</span>&nbsp;<span class="op" id="5082082">==</span>&nbsp;<span class="string" id="5082085">&#39;\n&#39;</span>&nbsp;<span class="op" id="5082090">||</span>&nbsp;<span class="ident" id="5082093">ch</span>&nbsp;<span class="op" id="5082096">&lt;</span>&nbsp;<span class="num" id="5082098">0</span>&nbsp;<span class="op" id="5082100">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5082105">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082158">if</span>&nbsp;<span class="ident" id="5082161">valid</span>&nbsp;<span class="op" id="5082167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082173">s</span><span class="op" id="5082174">.</span><span class="builtintype" id="5082175">error</span><span class="op" id="5082180">(</span><span class="ident" id="5082181">offs</span><span class="op" id="5082185">,</span>&nbsp;<span class="string" id="5082187">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5082216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082222">valid</span>&nbsp;<span class="op" id="5082228">=</span>&nbsp;<span class="builtintype" id="5082230">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082239">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082244">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082256">s</span><span class="op" id="5082257">.</span><span class="ident" id="5082258">next</span><span class="op" id="5082262">(</span><span class="op" id="5082263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082267">if</span>&nbsp;<span class="ident" id="5082270">ch</span>&nbsp;<span class="op" id="5082273">==</span>&nbsp;<span class="string" id="5082276">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="5082281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082286">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082298">n</span><span class="op" id="5082299">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082304">if</span>&nbsp;<span class="ident" id="5082307">ch</span>&nbsp;<span class="op" id="5082310">==</span>&nbsp;<span class="string" id="5082313">&#39;\\&#39;</span>&nbsp;<span class="op" id="5082318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082323">if</span>&nbsp;<span class="op" id="5082326">!</span><span class="ident" id="5082327">s</span><span class="op" id="5082328">.</span><span class="ident" id="5082329">scanEscape</span><span class="op" id="5082339">(</span><span class="string" id="5082340">&#39;\&#39;&#39;</span><span class="op" id="5082344">)</span>&nbsp;<span class="op" id="5082346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082352">valid</span>&nbsp;<span class="op" id="5082358">=</span>&nbsp;<span class="builtintype" id="5082360">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5082374">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082420">if</span>&nbsp;<span class="ident" id="5082423">valid</span>&nbsp;<span class="op" id="5082429">&amp;&amp;</span>&nbsp;<span class="ident" id="5082432">n</span>&nbsp;<span class="op" id="5082434">!=</span>&nbsp;<span class="num" id="5082437">1</span>&nbsp;<span class="op" id="5082439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082443">s</span><span class="op" id="5082444">.</span><span class="builtintype" id="5082445">error</span><span class="op" id="5082450">(</span><span class="ident" id="5082451">offs</span><span class="op" id="5082455">,</span>&nbsp;<span class="string" id="5082457">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="5082479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082486">return</span>&nbsp;<span class="builtintype" id="5082493">string</span><span class="op" id="5082499">(</span><span class="ident" id="5082500">s</span><span class="op" id="5082501">.</span><span class="ident" id="5082502">src</span><span class="op" id="5082505">[</span><span class="ident" id="5082506">offs</span><span class="op" id="5082510">:</span><span class="ident" id="5082511">s</span><span class="op" id="5082512">.</span><span class="ident" id="5082513">offset</span><span class="op" id="5082519">]</span><span class="op" id="5082520">)</span><br>
<span class="lineno">455</span><span class="op" id="5082522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5082525">func</span>&nbsp;<span class="op" id="5082530">(</span><span class="ident" id="5082531">s</span>&nbsp;<span class="op" id="5082533">*</span><span class="ident" id="5082534">Scanner</span><span class="op" id="5082541">)</span>&nbsp;<span class="ident" id="5082543">scanString</span><span class="op" id="5082553">(</span><span class="op" id="5082554">)</span>&nbsp;<span class="builtintype" id="5082556">string</span>&nbsp;<span class="op" id="5082563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5082566">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082599">offs</span>&nbsp;<span class="op" id="5082604">:=</span>&nbsp;<span class="ident" id="5082607">s</span><span class="op" id="5082608">.</span><span class="ident" id="5082609">offset</span>&nbsp;<span class="op" id="5082616">-</span>&nbsp;<span class="num" id="5082618">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082622">for</span>&nbsp;<span class="op" id="5082626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082630">ch</span>&nbsp;<span class="op" id="5082633">:=</span>&nbsp;<span class="ident" id="5082636">s</span><span class="op" id="5082637">.</span><span class="ident" id="5082638">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082643">if</span>&nbsp;<span class="ident" id="5082646">ch</span>&nbsp;<span class="op" id="5082649">==</span>&nbsp;<span class="string" id="5082652">&#39;\n&#39;</span>&nbsp;<span class="op" id="5082657">||</span>&nbsp;<span class="ident" id="5082660">ch</span>&nbsp;<span class="op" id="5082663">&lt;</span>&nbsp;<span class="num" id="5082665">0</span>&nbsp;<span class="op" id="5082667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082672">s</span><span class="op" id="5082673">.</span><span class="builtintype" id="5082674">error</span><span class="op" id="5082679">(</span><span class="ident" id="5082680">offs</span><span class="op" id="5082684">,</span>&nbsp;<span class="string" id="5082686">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5082717">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082722">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082734">s</span><span class="op" id="5082735">.</span><span class="ident" id="5082736">next</span><span class="op" id="5082740">(</span><span class="op" id="5082741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082745">if</span>&nbsp;<span class="ident" id="5082748">ch</span>&nbsp;<span class="op" id="5082751">==</span>&nbsp;<span class="string" id="5082754">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5082758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082763">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082775">if</span>&nbsp;<span class="ident" id="5082778">ch</span>&nbsp;<span class="op" id="5082781">==</span>&nbsp;<span class="string" id="5082784">&#39;\\&#39;</span>&nbsp;<span class="op" id="5082789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082794">s</span><span class="op" id="5082795">.</span><span class="ident" id="5082796">scanEscape</span><span class="op" id="5082806">(</span><span class="string" id="5082807">&#39;&#34;&#39;</span><span class="op" id="5082810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082817">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082821">return</span>&nbsp;<span class="builtintype" id="5082828">string</span><span class="op" id="5082834">(</span><span class="ident" id="5082835">s</span><span class="op" id="5082836">.</span><span class="ident" id="5082837">src</span><span class="op" id="5082840">[</span><span class="ident" id="5082841">offs</span><span class="op" id="5082845">:</span><span class="ident" id="5082846">s</span><span class="op" id="5082847">.</span><span class="ident" id="5082848">offset</span><span class="op" id="5082854">]</span><span class="op" id="5082855">)</span><br>
<span class="lineno"></span><span class="op" id="5082857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5082860">func</span>&nbsp;<span class="ident" id="5082865">stripCR</span><span class="op" id="5082872">(</span><span class="ident" id="5082873">b</span>&nbsp;<span class="op" id="5082875">[</span><span class="op" id="5082876">]</span><span class="builtintype" id="5082877">byte</span><span class="op" id="5082881">)</span>&nbsp;<span class="op" id="5082883">[</span><span class="op" id="5082884">]</span><span class="builtintype" id="5082885">byte</span>&nbsp;<span class="op" id="5082890">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082893">c</span>&nbsp;<span class="op" id="5082895">:=</span>&nbsp;<span class="builtinfunc" id="5082898">make</span><span class="op" id="5082902">(</span><span class="op" id="5082903">[</span><span class="op" id="5082904">]</span><span class="builtintype" id="5082905">byte</span><span class="op" id="5082909">,</span>&nbsp;<span class="builtinfunc" id="5082911">len</span><span class="op" id="5082914">(</span><span class="ident" id="5082915">b</span><span class="op" id="5082916">)</span><span class="op" id="5082917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082920">i</span>&nbsp;<span class="op" id="5082922">:=</span>&nbsp;<span class="num" id="5082925">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082928">for</span>&nbsp;<span class="ident" id="5082932">_</span><span class="op" id="5082933">,</span>&nbsp;<span class="ident" id="5082935">ch</span>&nbsp;<span class="op" id="5082938">:=</span>&nbsp;<span class="keyword" id="5082941">range</span>&nbsp;<span class="ident" id="5082947">b</span>&nbsp;<span class="op" id="5082949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082953">if</span>&nbsp;<span class="ident" id="5082956">ch</span>&nbsp;<span class="op" id="5082959">!=</span>&nbsp;<span class="string" id="5082962">&#39;\r&#39;</span>&nbsp;<span class="op" id="5082967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082972">c</span><span class="op" id="5082973">[</span><span class="ident" id="5082974">i</span><span class="op" id="5082975">]</span>&nbsp;<span class="op" id="5082977">=</span>&nbsp;<span class="ident" id="5082979">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5082985">i</span><span class="op" id="5082986">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5082994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5082997">return</span>&nbsp;<span class="ident" id="5083004">c</span><span class="op" id="5083005">[</span><span class="op" id="5083006">:</span><span class="ident" id="5083007">i</span><span class="op" id="5083008">]</span><br>
<span class="lineno"></span><span class="op" id="5083010">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="5083013">func</span>&nbsp;<span class="op" id="5083018">(</span><span class="ident" id="5083019">s</span>&nbsp;<span class="op" id="5083021">*</span><span class="ident" id="5083022">Scanner</span><span class="op" id="5083029">)</span>&nbsp;<span class="ident" id="5083031">scanRawString</span><span class="op" id="5083044">(</span><span class="op" id="5083045">)</span>&nbsp;<span class="builtintype" id="5083047">string</span>&nbsp;<span class="op" id="5083054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5083057">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083090">offs</span>&nbsp;<span class="op" id="5083095">:=</span>&nbsp;<span class="ident" id="5083098">s</span><span class="op" id="5083099">.</span><span class="ident" id="5083100">offset</span>&nbsp;<span class="op" id="5083107">-</span>&nbsp;<span class="num" id="5083109">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083113">hasCR</span>&nbsp;<span class="op" id="5083119">:=</span>&nbsp;<span class="builtintype" id="5083122">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083129">for</span>&nbsp;<span class="op" id="5083133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083137">ch</span>&nbsp;<span class="op" id="5083140">:=</span>&nbsp;<span class="ident" id="5083143">s</span><span class="op" id="5083144">.</span><span class="ident" id="5083145">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083150">if</span>&nbsp;<span class="ident" id="5083153">ch</span>&nbsp;<span class="op" id="5083156">&lt;</span>&nbsp;<span class="num" id="5083158">0</span>&nbsp;<span class="op" id="5083160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083165">s</span><span class="op" id="5083166">.</span><span class="builtintype" id="5083167">error</span><span class="op" id="5083172">(</span><span class="ident" id="5083173">offs</span><span class="op" id="5083177">,</span>&nbsp;<span class="string" id="5083179">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="5083214">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083219">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083231">s</span><span class="op" id="5083232">.</span><span class="ident" id="5083233">next</span><span class="op" id="5083237">(</span><span class="op" id="5083238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083242">if</span>&nbsp;<span class="ident" id="5083245">ch</span>&nbsp;<span class="op" id="5083248">==</span>&nbsp;<span class="string" id="5083251">&#39;`&#39;</span>&nbsp;<span class="op" id="5083255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083260">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083272">if</span>&nbsp;<span class="ident" id="5083275">ch</span>&nbsp;<span class="op" id="5083278">==</span>&nbsp;<span class="string" id="5083281">&#39;\r&#39;</span>&nbsp;<span class="op" id="5083286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083291">hasCR</span>&nbsp;<span class="op" id="5083297">=</span>&nbsp;<span class="builtintype" id="5083299">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083309">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083313">lit</span>&nbsp;<span class="op" id="5083317">:=</span>&nbsp;<span class="ident" id="5083320">s</span><span class="op" id="5083321">.</span><span class="ident" id="5083322">src</span><span class="op" id="5083325">[</span><span class="ident" id="5083326">offs</span><span class="op" id="5083330">:</span><span class="ident" id="5083331">s</span><span class="op" id="5083332">.</span><span class="ident" id="5083333">offset</span><span class="op" id="5083339">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083342">if</span>&nbsp;<span class="ident" id="5083345">hasCR</span>&nbsp;<span class="op" id="5083351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083355">lit</span>&nbsp;<span class="op" id="5083359">=</span>&nbsp;<span class="ident" id="5083361">stripCR</span><span class="op" id="5083368">(</span><span class="ident" id="5083369">lit</span><span class="op" id="5083372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083375">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083379">return</span>&nbsp;<span class="builtintype" id="5083386">string</span><span class="op" id="5083392">(</span><span class="ident" id="5083393">lit</span><span class="op" id="5083396">)</span><br>
<span class="lineno"></span><span class="op" id="5083398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5083401">func</span>&nbsp;<span class="op" id="5083406">(</span><span class="ident" id="5083407">s</span>&nbsp;<span class="op" id="5083409">*</span><span class="ident" id="5083410">Scanner</span><span class="op" id="5083417">)</span>&nbsp;<span class="ident" id="5083419">skipWhitespace</span><span class="op" id="5083433">(</span><span class="op" id="5083434">)</span>&nbsp;<span class="op" id="5083436">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083439">for</span>&nbsp;<span class="ident" id="5083443">s</span><span class="op" id="5083444">.</span><span class="ident" id="5083445">ch</span>&nbsp;<span class="op" id="5083448">==</span>&nbsp;<span class="string" id="5083451">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5083455">||</span>&nbsp;<span class="ident" id="5083458">s</span><span class="op" id="5083459">.</span><span class="ident" id="5083460">ch</span>&nbsp;<span class="op" id="5083463">==</span>&nbsp;<span class="string" id="5083466">&#39;\t&#39;</span>&nbsp;<span class="op" id="5083471">||</span>&nbsp;<span class="ident" id="5083474">s</span><span class="op" id="5083475">.</span><span class="ident" id="5083476">ch</span>&nbsp;<span class="op" id="5083479">==</span>&nbsp;<span class="string" id="5083482">&#39;\n&#39;</span>&nbsp;<span class="op" id="5083487">&amp;&amp;</span>&nbsp;<span class="op" id="5083490">!</span><span class="ident" id="5083491">s</span><span class="op" id="5083492">.</span><span class="ident" id="5083493">insertSemi</span>&nbsp;<span class="op" id="5083504">||</span>&nbsp;<span class="ident" id="5083507">s</span><span class="op" id="5083508">.</span><span class="ident" id="5083509">ch</span>&nbsp;<span class="op" id="5083512">==</span>&nbsp;<span class="string" id="5083515">&#39;\r&#39;</span>&nbsp;<span class="op" id="5083520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083524">s</span><span class="op" id="5083525">.</span><span class="ident" id="5083526">next</span><span class="op" id="5083530">(</span><span class="op" id="5083531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083534">}</span><br>
<span class="lineno"></span><span class="op" id="5083536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="5083539">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="5083610">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="5083682">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="5083745">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="5083814">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="5083881">func</span>&nbsp;<span class="op" id="5083886">(</span><span class="ident" id="5083887">s</span>&nbsp;<span class="op" id="5083889">*</span><span class="ident" id="5083890">Scanner</span><span class="op" id="5083897">)</span>&nbsp;<span class="ident" id="5083899">switch2</span><span class="op" id="5083906">(</span><span class="ident" id="5083907">tok0</span><span class="op" id="5083911">,</span>&nbsp;<span class="ident" id="5083913">tok1</span>&nbsp;<span class="ident" id="5083918">token</span><span class="op" id="5083923">.</span><span class="ident" id="5083924">Token</span><span class="op" id="5083929">)</span>&nbsp;<span class="ident" id="5083931">token</span><span class="op" id="5083936">.</span><span class="ident" id="5083937">Token</span>&nbsp;<span class="op" id="5083943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083946">if</span>&nbsp;<span class="ident" id="5083949">s</span><span class="op" id="5083950">.</span><span class="ident" id="5083951">ch</span>&nbsp;<span class="op" id="5083954">==</span>&nbsp;<span class="string" id="5083957">&#39;=&#39;</span>&nbsp;<span class="op" id="5083961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5083965">s</span><span class="op" id="5083966">.</span><span class="ident" id="5083967">next</span><span class="op" id="5083971">(</span><span class="op" id="5083972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083976">return</span>&nbsp;<span class="ident" id="5083983">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5083989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5083992">return</span>&nbsp;<span class="ident" id="5083999">tok0</span><br>
<span class="lineno"></span><span class="op" id="5084004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5084007">func</span>&nbsp;<span class="op" id="5084012">(</span><span class="ident" id="5084013">s</span>&nbsp;<span class="op" id="5084015">*</span><span class="ident" id="5084016">Scanner</span><span class="op" id="5084023">)</span>&nbsp;<span class="ident" id="5084025">switch3</span><span class="op" id="5084032">(</span><span class="ident" id="5084033">tok0</span><span class="op" id="5084037">,</span>&nbsp;<span class="ident" id="5084039">tok1</span>&nbsp;<span class="ident" id="5084044">token</span><span class="op" id="5084049">.</span><span class="ident" id="5084050">Token</span><span class="op" id="5084055">,</span>&nbsp;<span class="ident" id="5084057">ch2</span>&nbsp;<span class="builtintype" id="5084061">rune</span><span class="op" id="5084065">,</span>&nbsp;<span class="ident" id="5084067">tok2</span>&nbsp;<span class="ident" id="5084072">token</span><span class="op" id="5084077">.</span><span class="ident" id="5084078">Token</span><span class="op" id="5084083">)</span>&nbsp;<span class="ident" id="5084085">token</span><span class="op" id="5084090">.</span><span class="ident" id="5084091">Token</span>&nbsp;<span class="op" id="5084097">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084100">if</span>&nbsp;<span class="ident" id="5084103">s</span><span class="op" id="5084104">.</span><span class="ident" id="5084105">ch</span>&nbsp;<span class="op" id="5084108">==</span>&nbsp;<span class="string" id="5084111">&#39;=&#39;</span>&nbsp;<span class="op" id="5084115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5084119">s</span><span class="op" id="5084120">.</span><span class="ident" id="5084121">next</span><span class="op" id="5084125">(</span><span class="op" id="5084126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084130">return</span>&nbsp;<span class="ident" id="5084137">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5084143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084146">if</span>&nbsp;<span class="ident" id="5084149">s</span><span class="op" id="5084150">.</span><span class="ident" id="5084151">ch</span>&nbsp;<span class="op" id="5084154">==</span>&nbsp;<span class="ident" id="5084157">ch2</span>&nbsp;<span class="op" id="5084161">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5084165">s</span><span class="op" id="5084166">.</span><span class="ident" id="5084167">next</span><span class="op" id="5084171">(</span><span class="op" id="5084172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084176">return</span>&nbsp;<span class="ident" id="5084183">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5084189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084192">return</span>&nbsp;<span class="ident" id="5084199">tok0</span><br>
<span class="lineno"></span><span class="op" id="5084204">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="5084207">func</span>&nbsp;<span class="op" id="5084212">(</span><span class="ident" id="5084213">s</span>&nbsp;<span class="op" id="5084215">*</span><span class="ident" id="5084216">Scanner</span><span class="op" id="5084223">)</span>&nbsp;<span class="ident" id="5084225">switch4</span><span class="op" id="5084232">(</span><span class="ident" id="5084233">tok0</span><span class="op" id="5084237">,</span>&nbsp;<span class="ident" id="5084239">tok1</span>&nbsp;<span class="ident" id="5084244">token</span><span class="op" id="5084249">.</span><span class="ident" id="5084250">Token</span><span class="op" id="5084255">,</span>&nbsp;<span class="ident" id="5084257">ch2</span>&nbsp;<span class="builtintype" id="5084261">rune</span><span class="op" id="5084265">,</span>&nbsp;<span class="ident" id="5084267">tok2</span><span class="op" id="5084271">,</span>&nbsp;<span class="ident" id="5084273">tok3</span>&nbsp;<span class="ident" id="5084278">token</span><span class="op" id="5084283">.</span><span class="ident" id="5084284">Token</span><span class="op" id="5084289">)</span>&nbsp;<span class="ident" id="5084291">token</span><span class="op" id="5084296">.</span><span class="ident" id="5084297">Token</span>&nbsp;<span class="op" id="5084303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084306">if</span>&nbsp;<span class="ident" id="5084309">s</span><span class="op" id="5084310">.</span><span class="ident" id="5084311">ch</span>&nbsp;<span class="op" id="5084314">==</span>&nbsp;<span class="string" id="5084317">&#39;=&#39;</span>&nbsp;<span class="op" id="5084321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5084325">s</span><span class="op" id="5084326">.</span><span class="ident" id="5084327">next</span><span class="op" id="5084331">(</span><span class="op" id="5084332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084336">return</span>&nbsp;<span class="ident" id="5084343">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5084349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084352">if</span>&nbsp;<span class="ident" id="5084355">s</span><span class="op" id="5084356">.</span><span class="ident" id="5084357">ch</span>&nbsp;<span class="op" id="5084360">==</span>&nbsp;<span class="ident" id="5084363">ch2</span>&nbsp;<span class="op" id="5084367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5084371">s</span><span class="op" id="5084372">.</span><span class="ident" id="5084373">next</span><span class="op" id="5084377">(</span><span class="op" id="5084378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084382">if</span>&nbsp;<span class="ident" id="5084385">s</span><span class="op" id="5084386">.</span><span class="ident" id="5084387">ch</span>&nbsp;<span class="op" id="5084390">==</span>&nbsp;<span class="string" id="5084393">&#39;=&#39;</span>&nbsp;<span class="op" id="5084397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5084402">s</span><span class="op" id="5084403">.</span><span class="ident" id="5084404">next</span><span class="op" id="5084408">(</span><span class="op" id="5084409">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084414">return</span>&nbsp;<span class="ident" id="5084421">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5084428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084432">return</span>&nbsp;<span class="ident" id="5084439">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5084445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084448">return</span>&nbsp;<span class="ident" id="5084455">tok0</span><br>
<span class="lineno">565</span><span class="op" id="5084460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5084463">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="5084535">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5084607">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="5084621">//</span><br>
<span class="lineno"></span><span class="comment" id="5084624">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="5084700">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="5084778">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="5084810">//</span><br>
<span class="lineno">575</span><span class="comment" id="5084813">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="5084887">//</span><br>
<span class="lineno"></span><span class="comment" id="5084890">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="5084953">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="5085022">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="5085088">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="5085099">//</span><br>
<span class="lineno"></span><span class="comment" id="5085102">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5085171">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="5085195">//</span><br>
<span class="lineno">585</span><span class="comment" id="5085198">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5085259">//</span><br>
<span class="lineno"></span><span class="comment" id="5085262">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5085326">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="5085389">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="5085452">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5085514">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="5085576">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="5085629">//</span><br>
<span class="lineno"></span><span class="comment" id="5085632">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="5085692">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="5085752">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="5085790">//</span><br>
<span class="lineno"></span><span class="keyword" id="5085793">func</span>&nbsp;<span class="op" id="5085798">(</span><span class="ident" id="5085799">s</span>&nbsp;<span class="op" id="5085801">*</span><span class="ident" id="5085802">Scanner</span><span class="op" id="5085809">)</span>&nbsp;<span class="ident" id="5085811">Scan</span><span class="op" id="5085815">(</span><span class="op" id="5085816">)</span>&nbsp;<span class="op" id="5085818">(</span><span class="ident" id="5085819">pos</span>&nbsp;<span class="ident" id="5085823">token</span><span class="op" id="5085828">.</span><span class="ident" id="5085829">Pos</span><span class="op" id="5085832">,</span>&nbsp;<span class="ident" id="5085834">tok</span>&nbsp;<span class="ident" id="5085838">token</span><span class="op" id="5085843">.</span><span class="ident" id="5085844">Token</span><span class="op" id="5085849">,</span>&nbsp;<span class="ident" id="5085851">lit</span>&nbsp;<span class="builtintype" id="5085855">string</span><span class="op" id="5085861">)</span>&nbsp;<span class="op" id="5085863">{</span><br>
<span class="lineno"></span><span class="ident" id="5085865">scanAgain</span><span class="op" id="5085874">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085877">s</span><span class="op" id="5085878">.</span><span class="ident" id="5085879">skipWhitespace</span><span class="op" id="5085893">(</span><span class="op" id="5085894">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085898">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085922">pos</span>&nbsp;<span class="op" id="5085926">=</span>&nbsp;<span class="ident" id="5085928">s</span><span class="op" id="5085929">.</span><span class="ident" id="5085930">file</span><span class="op" id="5085934">.</span><span class="ident" id="5085935">Pos</span><span class="op" id="5085938">(</span><span class="ident" id="5085939">s</span><span class="op" id="5085940">.</span><span class="ident" id="5085941">offset</span><span class="op" id="5085947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5085951">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5085977">insertSemi</span>&nbsp;<span class="op" id="5085988">:=</span>&nbsp;<span class="builtintype" id="5085991">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5085998">switch</span>&nbsp;<span class="ident" id="5086005">ch</span>&nbsp;<span class="op" id="5086008">:=</span>&nbsp;<span class="ident" id="5086011">s</span><span class="op" id="5086012">.</span><span class="ident" id="5086013">ch</span><span class="op" id="5086015">;</span>&nbsp;<span class="op" id="5086017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086020">case</span>&nbsp;<span class="ident" id="5086025">isLetter</span><span class="op" id="5086033">(</span><span class="ident" id="5086034">ch</span><span class="op" id="5086036">)</span><span class="op" id="5086037">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086041">lit</span>&nbsp;<span class="op" id="5086045">=</span>&nbsp;<span class="ident" id="5086047">s</span><span class="op" id="5086048">.</span><span class="ident" id="5086049">scanIdentifier</span><span class="op" id="5086063">(</span><span class="op" id="5086064">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086068">if</span>&nbsp;<span class="builtinfunc" id="5086071">len</span><span class="op" id="5086074">(</span><span class="ident" id="5086075">lit</span><span class="op" id="5086078">)</span>&nbsp;<span class="op" id="5086080">&gt;</span>&nbsp;<span class="num" id="5086082">1</span>&nbsp;<span class="op" id="5086084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086089">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086156">tok</span>&nbsp;<span class="op" id="5086160">=</span>&nbsp;<span class="ident" id="5086162">token</span><span class="op" id="5086167">.</span><span class="ident" id="5086168">Lookup</span><span class="op" id="5086174">(</span><span class="ident" id="5086175">lit</span><span class="op" id="5086178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086183">switch</span>&nbsp;<span class="ident" id="5086190">tok</span>&nbsp;<span class="op" id="5086194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086199">case</span>&nbsp;<span class="ident" id="5086204">token</span><span class="op" id="5086209">.</span><span class="ident" id="5086210">IDENT</span><span class="op" id="5086215">,</span>&nbsp;<span class="ident" id="5086217">token</span><span class="op" id="5086222">.</span><span class="ident" id="5086223">BREAK</span><span class="op" id="5086228">,</span>&nbsp;<span class="ident" id="5086230">token</span><span class="op" id="5086235">.</span><span class="ident" id="5086236">CONTINUE</span><span class="op" id="5086244">,</span>&nbsp;<span class="ident" id="5086246">token</span><span class="op" id="5086251">.</span><span class="ident" id="5086252">FALLTHROUGH</span><span class="op" id="5086263">,</span>&nbsp;<span class="ident" id="5086265">token</span><span class="op" id="5086270">.</span><span class="ident" id="5086271">RETURN</span><span class="op" id="5086277">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086283">insertSemi</span>&nbsp;<span class="op" id="5086294">=</span>&nbsp;<span class="builtintype" id="5086296">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086308">}</span>&nbsp;<span class="keyword" id="5086310">else</span>&nbsp;<span class="op" id="5086315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086320">insertSemi</span>&nbsp;<span class="op" id="5086331">=</span>&nbsp;<span class="builtintype" id="5086333">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086341">tok</span>&nbsp;<span class="op" id="5086345">=</span>&nbsp;<span class="ident" id="5086347">token</span><span class="op" id="5086352">.</span><span class="ident" id="5086353">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086364">case</span>&nbsp;<span class="string" id="5086369">&#39;0&#39;</span>&nbsp;<span class="op" id="5086373">&lt;=</span>&nbsp;<span class="ident" id="5086376">ch</span>&nbsp;<span class="op" id="5086379">&amp;&amp;</span>&nbsp;<span class="ident" id="5086382">ch</span>&nbsp;<span class="op" id="5086385">&lt;=</span>&nbsp;<span class="string" id="5086388">&#39;9&#39;</span><span class="op" id="5086391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086395">insertSemi</span>&nbsp;<span class="op" id="5086406">=</span>&nbsp;<span class="builtintype" id="5086408">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086415">tok</span><span class="op" id="5086418">,</span>&nbsp;<span class="ident" id="5086420">lit</span>&nbsp;<span class="op" id="5086424">=</span>&nbsp;<span class="ident" id="5086426">s</span><span class="op" id="5086427">.</span><span class="ident" id="5086428">scanNumber</span><span class="op" id="5086438">(</span><span class="builtintype" id="5086439">false</span><span class="op" id="5086444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086447">default</span><span class="op" id="5086454">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086458">s</span><span class="op" id="5086459">.</span><span class="ident" id="5086460">next</span><span class="op" id="5086464">(</span><span class="op" id="5086465">)</span>&nbsp;<span class="comment" id="5086467">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086493">switch</span>&nbsp;<span class="ident" id="5086500">ch</span>&nbsp;<span class="op" id="5086503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086507">case</span>&nbsp;<span class="op" id="5086512">-</span><span class="num" id="5086513">1</span><span class="op" id="5086514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086519">if</span>&nbsp;<span class="ident" id="5086522">s</span><span class="op" id="5086523">.</span><span class="ident" id="5086524">insertSemi</span>&nbsp;<span class="op" id="5086535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086541">s</span><span class="op" id="5086542">.</span><span class="ident" id="5086543">insertSemi</span>&nbsp;<span class="op" id="5086554">=</span>&nbsp;<span class="builtintype" id="5086556">false</span>&nbsp;<span class="comment" id="5086562">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086582">return</span>&nbsp;<span class="ident" id="5086589">pos</span><span class="op" id="5086592">,</span>&nbsp;<span class="ident" id="5086594">token</span><span class="op" id="5086599">.</span><span class="ident" id="5086600">SEMICOLON</span><span class="op" id="5086609">,</span>&nbsp;<span class="string" id="5086611">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5086619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086624">tok</span>&nbsp;<span class="op" id="5086628">=</span>&nbsp;<span class="ident" id="5086630">token</span><span class="op" id="5086635">.</span><span class="ident" id="5086636">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086642">case</span>&nbsp;<span class="string" id="5086647">&#39;\n&#39;</span><span class="op" id="5086651">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086656">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086701">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5086747">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086777">s</span><span class="op" id="5086778">.</span><span class="ident" id="5086779">insertSemi</span>&nbsp;<span class="op" id="5086790">=</span>&nbsp;<span class="builtintype" id="5086792">false</span>&nbsp;<span class="comment" id="5086798">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086821">return</span>&nbsp;<span class="ident" id="5086828">pos</span><span class="op" id="5086831">,</span>&nbsp;<span class="ident" id="5086833">token</span><span class="op" id="5086838">.</span><span class="ident" id="5086839">SEMICOLON</span><span class="op" id="5086848">,</span>&nbsp;<span class="string" id="5086850">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086857">case</span>&nbsp;<span class="string" id="5086862">&#39;&#34;&#39;</span><span class="op" id="5086865">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086870">insertSemi</span>&nbsp;<span class="op" id="5086881">=</span>&nbsp;<span class="builtintype" id="5086883">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086891">tok</span>&nbsp;<span class="op" id="5086895">=</span>&nbsp;<span class="ident" id="5086897">token</span><span class="op" id="5086902">.</span><span class="ident" id="5086903">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086913">lit</span>&nbsp;<span class="op" id="5086917">=</span>&nbsp;<span class="ident" id="5086919">s</span><span class="op" id="5086920">.</span><span class="ident" id="5086921">scanString</span><span class="op" id="5086931">(</span><span class="op" id="5086932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5086936">case</span>&nbsp;<span class="string" id="5086941">&#39;\&#39;&#39;</span><span class="op" id="5086945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086950">insertSemi</span>&nbsp;<span class="op" id="5086961">=</span>&nbsp;<span class="builtintype" id="5086963">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086971">tok</span>&nbsp;<span class="op" id="5086975">=</span>&nbsp;<span class="ident" id="5086977">token</span><span class="op" id="5086982">.</span><span class="ident" id="5086983">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5086991">lit</span>&nbsp;<span class="op" id="5086995">=</span>&nbsp;<span class="ident" id="5086997">s</span><span class="op" id="5086998">.</span><span class="ident" id="5086999">scanRune</span><span class="op" id="5087007">(</span><span class="op" id="5087008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087012">case</span>&nbsp;<span class="string" id="5087017">&#39;`&#39;</span><span class="op" id="5087020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087025">insertSemi</span>&nbsp;<span class="op" id="5087036">=</span>&nbsp;<span class="builtintype" id="5087038">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087046">tok</span>&nbsp;<span class="op" id="5087050">=</span>&nbsp;<span class="ident" id="5087052">token</span><span class="op" id="5087057">.</span><span class="ident" id="5087058">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087068">lit</span>&nbsp;<span class="op" id="5087072">=</span>&nbsp;<span class="ident" id="5087074">s</span><span class="op" id="5087075">.</span><span class="ident" id="5087076">scanRawString</span><span class="op" id="5087089">(</span><span class="op" id="5087090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087094">case</span>&nbsp;<span class="string" id="5087099">&#39;:&#39;</span><span class="op" id="5087102">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087107">tok</span>&nbsp;<span class="op" id="5087111">=</span>&nbsp;<span class="ident" id="5087113">s</span><span class="op" id="5087114">.</span><span class="ident" id="5087115">switch2</span><span class="op" id="5087122">(</span><span class="ident" id="5087123">token</span><span class="op" id="5087128">.</span><span class="ident" id="5087129">COLON</span><span class="op" id="5087134">,</span>&nbsp;<span class="ident" id="5087136">token</span><span class="op" id="5087141">.</span><span class="ident" id="5087142">DEFINE</span><span class="op" id="5087148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087152">case</span>&nbsp;<span class="string" id="5087157">&#39;.&#39;</span><span class="op" id="5087160">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087165">if</span>&nbsp;<span class="string" id="5087168">&#39;0&#39;</span>&nbsp;<span class="op" id="5087172">&lt;=</span>&nbsp;<span class="ident" id="5087175">s</span><span class="op" id="5087176">.</span><span class="ident" id="5087177">ch</span>&nbsp;<span class="op" id="5087180">&amp;&amp;</span>&nbsp;<span class="ident" id="5087183">s</span><span class="op" id="5087184">.</span><span class="ident" id="5087185">ch</span>&nbsp;<span class="op" id="5087188">&lt;=</span>&nbsp;<span class="string" id="5087191">&#39;9&#39;</span>&nbsp;<span class="op" id="5087195">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087201">insertSemi</span>&nbsp;<span class="op" id="5087212">=</span>&nbsp;<span class="builtintype" id="5087214">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087223">tok</span><span class="op" id="5087226">,</span>&nbsp;<span class="ident" id="5087228">lit</span>&nbsp;<span class="op" id="5087232">=</span>&nbsp;<span class="ident" id="5087234">s</span><span class="op" id="5087235">.</span><span class="ident" id="5087236">scanNumber</span><span class="op" id="5087246">(</span><span class="builtintype" id="5087247">true</span><span class="op" id="5087251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087256">}</span>&nbsp;<span class="keyword" id="5087258">else</span>&nbsp;<span class="keyword" id="5087263">if</span>&nbsp;<span class="ident" id="5087266">s</span><span class="op" id="5087267">.</span><span class="ident" id="5087268">ch</span>&nbsp;<span class="op" id="5087271">==</span>&nbsp;<span class="string" id="5087274">&#39;.&#39;</span>&nbsp;<span class="op" id="5087278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087284">s</span><span class="op" id="5087285">.</span><span class="ident" id="5087286">next</span><span class="op" id="5087290">(</span><span class="op" id="5087291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087297">if</span>&nbsp;<span class="ident" id="5087300">s</span><span class="op" id="5087301">.</span><span class="ident" id="5087302">ch</span>&nbsp;<span class="op" id="5087305">==</span>&nbsp;<span class="string" id="5087308">&#39;.&#39;</span>&nbsp;<span class="op" id="5087312">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087319">s</span><span class="op" id="5087320">.</span><span class="ident" id="5087321">next</span><span class="op" id="5087325">(</span><span class="op" id="5087326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087333">tok</span>&nbsp;<span class="op" id="5087337">=</span>&nbsp;<span class="ident" id="5087339">token</span><span class="op" id="5087344">.</span><span class="ident" id="5087345">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087363">}</span>&nbsp;<span class="keyword" id="5087365">else</span>&nbsp;<span class="op" id="5087370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087376">tok</span>&nbsp;<span class="op" id="5087380">=</span>&nbsp;<span class="ident" id="5087382">token</span><span class="op" id="5087387">.</span><span class="ident" id="5087388">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087402">case</span>&nbsp;<span class="string" id="5087407">&#39;,&#39;</span><span class="op" id="5087410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087415">tok</span>&nbsp;<span class="op" id="5087419">=</span>&nbsp;<span class="ident" id="5087421">token</span><span class="op" id="5087426">.</span><span class="ident" id="5087427">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087435">case</span>&nbsp;<span class="string" id="5087440">&#39;;&#39;</span><span class="op" id="5087443">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087448">tok</span>&nbsp;<span class="op" id="5087452">=</span>&nbsp;<span class="ident" id="5087454">token</span><span class="op" id="5087459">.</span><span class="ident" id="5087460">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087473">lit</span>&nbsp;<span class="op" id="5087477">=</span>&nbsp;<span class="string" id="5087479">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087485">case</span>&nbsp;<span class="string" id="5087490">&#39;(&#39;</span><span class="op" id="5087493">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087498">tok</span>&nbsp;<span class="op" id="5087502">=</span>&nbsp;<span class="ident" id="5087504">token</span><span class="op" id="5087509">.</span><span class="ident" id="5087510">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087519">case</span>&nbsp;<span class="string" id="5087524">&#39;)&#39;</span><span class="op" id="5087527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087532">insertSemi</span>&nbsp;<span class="op" id="5087543">=</span>&nbsp;<span class="builtintype" id="5087545">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087553">tok</span>&nbsp;<span class="op" id="5087557">=</span>&nbsp;<span class="ident" id="5087559">token</span><span class="op" id="5087564">.</span><span class="ident" id="5087565">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087574">case</span>&nbsp;<span class="string" id="5087579">&#39;[&#39;</span><span class="op" id="5087582">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087587">tok</span>&nbsp;<span class="op" id="5087591">=</span>&nbsp;<span class="ident" id="5087593">token</span><span class="op" id="5087598">.</span><span class="ident" id="5087599">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087608">case</span>&nbsp;<span class="string" id="5087613">&#39;]&#39;</span><span class="op" id="5087616">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087621">insertSemi</span>&nbsp;<span class="op" id="5087632">=</span>&nbsp;<span class="builtintype" id="5087634">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087642">tok</span>&nbsp;<span class="op" id="5087646">=</span>&nbsp;<span class="ident" id="5087648">token</span><span class="op" id="5087653">.</span><span class="ident" id="5087654">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087663">case</span>&nbsp;<span class="string" id="5087668">&#39;{&#39;</span><span class="op" id="5087671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087676">tok</span>&nbsp;<span class="op" id="5087680">=</span>&nbsp;<span class="ident" id="5087682">token</span><span class="op" id="5087687">.</span><span class="ident" id="5087688">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087697">case</span>&nbsp;<span class="string" id="5087702">&#39;}&#39;</span><span class="op" id="5087705">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087710">insertSemi</span>&nbsp;<span class="op" id="5087721">=</span>&nbsp;<span class="builtintype" id="5087723">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087731">tok</span>&nbsp;<span class="op" id="5087735">=</span>&nbsp;<span class="ident" id="5087737">token</span><span class="op" id="5087742">.</span><span class="ident" id="5087743">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087752">case</span>&nbsp;<span class="string" id="5087757">&#39;+&#39;</span><span class="op" id="5087760">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087765">tok</span>&nbsp;<span class="op" id="5087769">=</span>&nbsp;<span class="ident" id="5087771">s</span><span class="op" id="5087772">.</span><span class="ident" id="5087773">switch3</span><span class="op" id="5087780">(</span><span class="ident" id="5087781">token</span><span class="op" id="5087786">.</span><span class="ident" id="5087787">ADD</span><span class="op" id="5087790">,</span>&nbsp;<span class="ident" id="5087792">token</span><span class="op" id="5087797">.</span><span class="ident" id="5087798">ADD_ASSIGN</span><span class="op" id="5087808">,</span>&nbsp;<span class="string" id="5087810">&#39;+&#39;</span><span class="op" id="5087813">,</span>&nbsp;<span class="ident" id="5087815">token</span><span class="op" id="5087820">.</span><span class="ident" id="5087821">INC</span><span class="op" id="5087824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087829">if</span>&nbsp;<span class="ident" id="5087832">tok</span>&nbsp;<span class="op" id="5087836">==</span>&nbsp;<span class="ident" id="5087839">token</span><span class="op" id="5087844">.</span><span class="ident" id="5087845">INC</span>&nbsp;<span class="op" id="5087849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087855">insertSemi</span>&nbsp;<span class="op" id="5087866">=</span>&nbsp;<span class="builtintype" id="5087868">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5087876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087880">case</span>&nbsp;<span class="string" id="5087885">&#39;-&#39;</span><span class="op" id="5087888">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087893">tok</span>&nbsp;<span class="op" id="5087897">=</span>&nbsp;<span class="ident" id="5087899">s</span><span class="op" id="5087900">.</span><span class="ident" id="5087901">switch3</span><span class="op" id="5087908">(</span><span class="ident" id="5087909">token</span><span class="op" id="5087914">.</span><span class="ident" id="5087915">SUB</span><span class="op" id="5087918">,</span>&nbsp;<span class="ident" id="5087920">token</span><span class="op" id="5087925">.</span><span class="ident" id="5087926">SUB_ASSIGN</span><span class="op" id="5087936">,</span>&nbsp;<span class="string" id="5087938">&#39;-&#39;</span><span class="op" id="5087941">,</span>&nbsp;<span class="ident" id="5087943">token</span><span class="op" id="5087948">.</span><span class="ident" id="5087949">DEC</span><span class="op" id="5087952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5087957">if</span>&nbsp;<span class="ident" id="5087960">tok</span>&nbsp;<span class="op" id="5087964">==</span>&nbsp;<span class="ident" id="5087967">token</span><span class="op" id="5087972">.</span><span class="ident" id="5087973">DEC</span>&nbsp;<span class="op" id="5087977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5087983">insertSemi</span>&nbsp;<span class="op" id="5087994">=</span>&nbsp;<span class="builtintype" id="5087996">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088008">case</span>&nbsp;<span class="string" id="5088013">&#39;*&#39;</span><span class="op" id="5088016">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088021">tok</span>&nbsp;<span class="op" id="5088025">=</span>&nbsp;<span class="ident" id="5088027">s</span><span class="op" id="5088028">.</span><span class="ident" id="5088029">switch2</span><span class="op" id="5088036">(</span><span class="ident" id="5088037">token</span><span class="op" id="5088042">.</span><span class="ident" id="5088043">MUL</span><span class="op" id="5088046">,</span>&nbsp;<span class="ident" id="5088048">token</span><span class="op" id="5088053">.</span><span class="ident" id="5088054">MUL_ASSIGN</span><span class="op" id="5088064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088068">case</span>&nbsp;<span class="string" id="5088073">&#39;/&#39;</span><span class="op" id="5088076">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088081">if</span>&nbsp;<span class="ident" id="5088084">s</span><span class="op" id="5088085">.</span><span class="ident" id="5088086">ch</span>&nbsp;<span class="op" id="5088089">==</span>&nbsp;<span class="string" id="5088092">&#39;/&#39;</span>&nbsp;<span class="op" id="5088096">||</span>&nbsp;<span class="ident" id="5088099">s</span><span class="op" id="5088100">.</span><span class="ident" id="5088101">ch</span>&nbsp;<span class="op" id="5088104">==</span>&nbsp;<span class="string" id="5088107">&#39;*&#39;</span>&nbsp;<span class="op" id="5088111">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088117">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088132">if</span>&nbsp;<span class="ident" id="5088135">s</span><span class="op" id="5088136">.</span><span class="ident" id="5088137">insertSemi</span>&nbsp;<span class="op" id="5088148">&amp;&amp;</span>&nbsp;<span class="ident" id="5088151">s</span><span class="op" id="5088152">.</span><span class="ident" id="5088153">findLineEnd</span><span class="op" id="5088164">(</span><span class="op" id="5088165">)</span>&nbsp;<span class="op" id="5088167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088174">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088229">s</span><span class="op" id="5088230">.</span><span class="ident" id="5088231">ch</span>&nbsp;<span class="op" id="5088234">=</span>&nbsp;<span class="string" id="5088236">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088245">s</span><span class="op" id="5088246">.</span><span class="ident" id="5088247">offset</span>&nbsp;<span class="op" id="5088254">=</span>&nbsp;<span class="ident" id="5088256">s</span><span class="op" id="5088257">.</span><span class="ident" id="5088258">file</span><span class="op" id="5088262">.</span><span class="ident" id="5088263">Offset</span><span class="op" id="5088269">(</span><span class="ident" id="5088270">pos</span><span class="op" id="5088273">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088280">s</span><span class="op" id="5088281">.</span><span class="ident" id="5088282">rdOffset</span>&nbsp;<span class="op" id="5088291">=</span>&nbsp;<span class="ident" id="5088293">s</span><span class="op" id="5088294">.</span><span class="ident" id="5088295">offset</span>&nbsp;<span class="op" id="5088302">+</span>&nbsp;<span class="num" id="5088304">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088311">s</span><span class="op" id="5088312">.</span><span class="ident" id="5088313">insertSemi</span>&nbsp;<span class="op" id="5088324">=</span>&nbsp;<span class="builtintype" id="5088326">false</span>&nbsp;<span class="comment" id="5088332">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088357">return</span>&nbsp;<span class="ident" id="5088364">pos</span><span class="op" id="5088367">,</span>&nbsp;<span class="ident" id="5088369">token</span><span class="op" id="5088374">.</span><span class="ident" id="5088375">SEMICOLON</span><span class="op" id="5088384">,</span>&nbsp;<span class="string" id="5088386">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088401">lit</span>&nbsp;<span class="op" id="5088405">=</span>&nbsp;<span class="ident" id="5088407">s</span><span class="op" id="5088408">.</span><span class="ident" id="5088409">scanComment</span><span class="op" id="5088420">(</span><span class="op" id="5088421">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088427">if</span>&nbsp;<span class="ident" id="5088430">s</span><span class="op" id="5088431">.</span><span class="ident" id="5088432">mode</span><span class="op" id="5088436">&amp;</span><span class="ident" id="5088437">ScanComments</span>&nbsp;<span class="op" id="5088450">==</span>&nbsp;<span class="num" id="5088453">0</span>&nbsp;<span class="op" id="5088455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5088462">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088483">s</span><span class="op" id="5088484">.</span><span class="ident" id="5088485">insertSemi</span>&nbsp;<span class="op" id="5088496">=</span>&nbsp;<span class="builtintype" id="5088498">false</span>&nbsp;<span class="comment" id="5088504">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088529">goto</span>&nbsp;<span class="ident" id="5088534">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088548">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088554">tok</span>&nbsp;<span class="op" id="5088558">=</span>&nbsp;<span class="ident" id="5088560">token</span><span class="op" id="5088565">.</span><span class="ident" id="5088566">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088577">}</span>&nbsp;<span class="keyword" id="5088579">else</span>&nbsp;<span class="op" id="5088584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088590">tok</span>&nbsp;<span class="op" id="5088594">=</span>&nbsp;<span class="ident" id="5088596">s</span><span class="op" id="5088597">.</span><span class="ident" id="5088598">switch2</span><span class="op" id="5088605">(</span><span class="ident" id="5088606">token</span><span class="op" id="5088611">.</span><span class="ident" id="5088612">QUO</span><span class="op" id="5088615">,</span>&nbsp;<span class="ident" id="5088617">token</span><span class="op" id="5088622">.</span><span class="ident" id="5088623">QUO_ASSIGN</span><span class="op" id="5088633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088642">case</span>&nbsp;<span class="string" id="5088647">&#39;%&#39;</span><span class="op" id="5088650">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088655">tok</span>&nbsp;<span class="op" id="5088659">=</span>&nbsp;<span class="ident" id="5088661">s</span><span class="op" id="5088662">.</span><span class="ident" id="5088663">switch2</span><span class="op" id="5088670">(</span><span class="ident" id="5088671">token</span><span class="op" id="5088676">.</span><span class="ident" id="5088677">REM</span><span class="op" id="5088680">,</span>&nbsp;<span class="ident" id="5088682">token</span><span class="op" id="5088687">.</span><span class="ident" id="5088688">REM_ASSIGN</span><span class="op" id="5088698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088702">case</span>&nbsp;<span class="string" id="5088707">&#39;^&#39;</span><span class="op" id="5088710">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088715">tok</span>&nbsp;<span class="op" id="5088719">=</span>&nbsp;<span class="ident" id="5088721">s</span><span class="op" id="5088722">.</span><span class="ident" id="5088723">switch2</span><span class="op" id="5088730">(</span><span class="ident" id="5088731">token</span><span class="op" id="5088736">.</span><span class="ident" id="5088737">XOR</span><span class="op" id="5088740">,</span>&nbsp;<span class="ident" id="5088742">token</span><span class="op" id="5088747">.</span><span class="ident" id="5088748">XOR_ASSIGN</span><span class="op" id="5088758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088762">case</span>&nbsp;<span class="string" id="5088767">&#39;&lt;&#39;</span><span class="op" id="5088770">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088775">if</span>&nbsp;<span class="ident" id="5088778">s</span><span class="op" id="5088779">.</span><span class="ident" id="5088780">ch</span>&nbsp;<span class="op" id="5088783">==</span>&nbsp;<span class="string" id="5088786">&#39;-&#39;</span>&nbsp;<span class="op" id="5088790">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088796">s</span><span class="op" id="5088797">.</span><span class="ident" id="5088798">next</span><span class="op" id="5088802">(</span><span class="op" id="5088803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088809">tok</span>&nbsp;<span class="op" id="5088813">=</span>&nbsp;<span class="ident" id="5088815">token</span><span class="op" id="5088820">.</span><span class="ident" id="5088821">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088830">}</span>&nbsp;<span class="keyword" id="5088832">else</span>&nbsp;<span class="op" id="5088837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088843">tok</span>&nbsp;<span class="op" id="5088847">=</span>&nbsp;<span class="ident" id="5088849">s</span><span class="op" id="5088850">.</span><span class="ident" id="5088851">switch4</span><span class="op" id="5088858">(</span><span class="ident" id="5088859">token</span><span class="op" id="5088864">.</span><span class="ident" id="5088865">LSS</span><span class="op" id="5088868">,</span>&nbsp;<span class="ident" id="5088870">token</span><span class="op" id="5088875">.</span><span class="ident" id="5088876">LEQ</span><span class="op" id="5088879">,</span>&nbsp;<span class="string" id="5088881">&#39;&lt;&#39;</span><span class="op" id="5088884">,</span>&nbsp;<span class="ident" id="5088886">token</span><span class="op" id="5088891">.</span><span class="ident" id="5088892">SHL</span><span class="op" id="5088895">,</span>&nbsp;<span class="ident" id="5088897">token</span><span class="op" id="5088902">.</span><span class="ident" id="5088903">SHL_ASSIGN</span><span class="op" id="5088913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5088918">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5088922">case</span>&nbsp;<span class="string" id="5088927">&#39;&gt;&#39;</span><span class="op" id="5088930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5088935">tok</span>&nbsp;<span class="op" id="5088939">=</span>&nbsp;<span class="ident" id="5088941">s</span><span class="op" id="5088942">.</span><span class="ident" id="5088943">switch4</span><span class="op" id="5088950">(</span><span class="ident" id="5088951">token</span><span class="op" id="5088956">.</span><span class="ident" id="5088957">GTR</span><span class="op" id="5088960">,</span>&nbsp;<span class="ident" id="5088962">token</span><span class="op" id="5088967">.</span><span class="ident" id="5088968">GEQ</span><span class="op" id="5088971">,</span>&nbsp;<span class="string" id="5088973">&#39;&gt;&#39;</span><span class="op" id="5088976">,</span>&nbsp;<span class="ident" id="5088978">token</span><span class="op" id="5088983">.</span><span class="ident" id="5088984">SHR</span><span class="op" id="5088987">,</span>&nbsp;<span class="ident" id="5088989">token</span><span class="op" id="5088994">.</span><span class="ident" id="5088995">SHR_ASSIGN</span><span class="op" id="5089005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089009">case</span>&nbsp;<span class="string" id="5089014">&#39;=&#39;</span><span class="op" id="5089017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089022">tok</span>&nbsp;<span class="op" id="5089026">=</span>&nbsp;<span class="ident" id="5089028">s</span><span class="op" id="5089029">.</span><span class="ident" id="5089030">switch2</span><span class="op" id="5089037">(</span><span class="ident" id="5089038">token</span><span class="op" id="5089043">.</span><span class="ident" id="5089044">ASSIGN</span><span class="op" id="5089050">,</span>&nbsp;<span class="ident" id="5089052">token</span><span class="op" id="5089057">.</span><span class="ident" id="5089058">EQL</span><span class="op" id="5089061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089065">case</span>&nbsp;<span class="string" id="5089070">&#39;!&#39;</span><span class="op" id="5089073">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089078">tok</span>&nbsp;<span class="op" id="5089082">=</span>&nbsp;<span class="ident" id="5089084">s</span><span class="op" id="5089085">.</span><span class="ident" id="5089086">switch2</span><span class="op" id="5089093">(</span><span class="ident" id="5089094">token</span><span class="op" id="5089099">.</span><span class="ident" id="5089100">NOT</span><span class="op" id="5089103">,</span>&nbsp;<span class="ident" id="5089105">token</span><span class="op" id="5089110">.</span><span class="ident" id="5089111">NEQ</span><span class="op" id="5089114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089118">case</span>&nbsp;<span class="string" id="5089123">&#39;&amp;&#39;</span><span class="op" id="5089126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089131">if</span>&nbsp;<span class="ident" id="5089134">s</span><span class="op" id="5089135">.</span><span class="ident" id="5089136">ch</span>&nbsp;<span class="op" id="5089139">==</span>&nbsp;<span class="string" id="5089142">&#39;^&#39;</span>&nbsp;<span class="op" id="5089146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089152">s</span><span class="op" id="5089153">.</span><span class="ident" id="5089154">next</span><span class="op" id="5089158">(</span><span class="op" id="5089159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089165">tok</span>&nbsp;<span class="op" id="5089169">=</span>&nbsp;<span class="ident" id="5089171">s</span><span class="op" id="5089172">.</span><span class="ident" id="5089173">switch2</span><span class="op" id="5089180">(</span><span class="ident" id="5089181">token</span><span class="op" id="5089186">.</span><span class="ident" id="5089187">AND_NOT</span><span class="op" id="5089194">,</span>&nbsp;<span class="ident" id="5089196">token</span><span class="op" id="5089201">.</span><span class="ident" id="5089202">AND_NOT_ASSIGN</span><span class="op" id="5089216">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089221">}</span>&nbsp;<span class="keyword" id="5089223">else</span>&nbsp;<span class="op" id="5089228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089234">tok</span>&nbsp;<span class="op" id="5089238">=</span>&nbsp;<span class="ident" id="5089240">s</span><span class="op" id="5089241">.</span><span class="ident" id="5089242">switch3</span><span class="op" id="5089249">(</span><span class="ident" id="5089250">token</span><span class="op" id="5089255">.</span><span class="ident" id="5089256">AND</span><span class="op" id="5089259">,</span>&nbsp;<span class="ident" id="5089261">token</span><span class="op" id="5089266">.</span><span class="ident" id="5089267">AND_ASSIGN</span><span class="op" id="5089277">,</span>&nbsp;<span class="string" id="5089279">&#39;&amp;&#39;</span><span class="op" id="5089282">,</span>&nbsp;<span class="ident" id="5089284">token</span><span class="op" id="5089289">.</span><span class="ident" id="5089290">LAND</span><span class="op" id="5089294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089303">case</span>&nbsp;<span class="string" id="5089308">&#39;|&#39;</span><span class="op" id="5089311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089316">tok</span>&nbsp;<span class="op" id="5089320">=</span>&nbsp;<span class="ident" id="5089322">s</span><span class="op" id="5089323">.</span><span class="ident" id="5089324">switch3</span><span class="op" id="5089331">(</span><span class="ident" id="5089332">token</span><span class="op" id="5089337">.</span><span class="ident" id="5089338">OR</span><span class="op" id="5089340">,</span>&nbsp;<span class="ident" id="5089342">token</span><span class="op" id="5089347">.</span><span class="ident" id="5089348">OR_ASSIGN</span><span class="op" id="5089357">,</span>&nbsp;<span class="string" id="5089359">&#39;|&#39;</span><span class="op" id="5089362">,</span>&nbsp;<span class="ident" id="5089364">token</span><span class="op" id="5089369">.</span><span class="ident" id="5089370">LOR</span><span class="op" id="5089373">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089377">default</span><span class="op" id="5089384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5089389">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089439">if</span>&nbsp;<span class="ident" id="5089442">ch</span>&nbsp;<span class="op" id="5089445">!=</span>&nbsp;<span class="ident" id="5089448">bom</span>&nbsp;<span class="op" id="5089452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089458">s</span><span class="op" id="5089459">.</span><span class="builtintype" id="5089460">error</span><span class="op" id="5089465">(</span><span class="ident" id="5089466">s</span><span class="op" id="5089467">.</span><span class="ident" id="5089468">file</span><span class="op" id="5089472">.</span><span class="ident" id="5089473">Offset</span><span class="op" id="5089479">(</span><span class="ident" id="5089480">pos</span><span class="op" id="5089483">)</span><span class="op" id="5089484">,</span>&nbsp;<span class="ident" id="5089486">fmt</span><span class="op" id="5089489">.</span><span class="ident" id="5089490">Sprintf</span><span class="op" id="5089497">(</span><span class="string" id="5089498">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="5089521">,</span>&nbsp;<span class="ident" id="5089523">ch</span><span class="op" id="5089525">)</span><span class="op" id="5089526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089531">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089536">insertSemi</span>&nbsp;<span class="op" id="5089547">=</span>&nbsp;<span class="ident" id="5089549">s</span><span class="op" id="5089550">.</span><span class="ident" id="5089551">insertSemi</span>&nbsp;<span class="comment" id="5089562">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089593">tok</span>&nbsp;<span class="op" id="5089597">=</span>&nbsp;<span class="ident" id="5089599">token</span><span class="op" id="5089604">.</span><span class="ident" id="5089605">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089616">lit</span>&nbsp;<span class="op" id="5089620">=</span>&nbsp;<span class="builtintype" id="5089622">string</span><span class="op" id="5089628">(</span><span class="ident" id="5089629">ch</span><span class="op" id="5089631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089638">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089641">if</span>&nbsp;<span class="ident" id="5089644">s</span><span class="op" id="5089645">.</span><span class="ident" id="5089646">mode</span><span class="op" id="5089650">&amp;</span><span class="ident" id="5089651">dontInsertSemis</span>&nbsp;<span class="op" id="5089667">==</span>&nbsp;<span class="num" id="5089670">0</span>&nbsp;<span class="op" id="5089672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5089676">s</span><span class="op" id="5089677">.</span><span class="ident" id="5089678">insertSemi</span>&nbsp;<span class="op" id="5089689">=</span>&nbsp;<span class="ident" id="5089691">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5089703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5089707">return</span><br>
<span class="lineno">760</span><span class="op" id="5089714">}</span>
</div>
</body>
</html>
