<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os/signal</h2>
<ul>
<li><a href="/gostd/os/signal/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/os/signal/signal.go.html">signal.go</a></li>
<li><a href="/gostd/os/signal/signal_test.go.html">signal_test.go</a></li>
<li><a href="/gostd/os/signal/signal_unix.go.html">signal_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5761849">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5761904">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5761958">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5762009">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5762087">package</span>&nbsp;<span class="ident" id="5762095">signal</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5762103">import</span>&nbsp;<span class="op" id="5762110">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5762113">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5762119">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="5762129">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5762132">//&nbsp;In&nbsp;assembly.</span><br>
<span class="lineno">15</span><span class="keyword" id="5762148">func</span>&nbsp;<span class="ident" id="5762153">signal_disable</span><span class="op" id="5762167">(</span><span class="builtintype" id="5762168">uint32</span><span class="op" id="5762174">)</span><br>
<span class="lineno"></span><span class="keyword" id="5762176">func</span>&nbsp;<span class="ident" id="5762181">signal_enable</span><span class="op" id="5762194">(</span><span class="builtintype" id="5762195">uint32</span><span class="op" id="5762201">)</span><br>
<span class="lineno"></span><span class="keyword" id="5762203">func</span>&nbsp;<span class="ident" id="5762208">signal_recv</span><span class="op" id="5762219">(</span><span class="op" id="5762220">)</span>&nbsp;<span class="builtintype" id="5762222">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5762230">func</span>&nbsp;<span class="ident" id="5762235">loop</span><span class="op" id="5762239">(</span><span class="op" id="5762240">)</span>&nbsp;<span class="op" id="5762242">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762245">for</span>&nbsp;<span class="op" id="5762249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762253">process</span><span class="op" id="5762260">(</span><span class="ident" id="5762261">syscall</span><span class="op" id="5762268">.</span><span class="ident" id="5762269">Signal</span><span class="op" id="5762275">(</span><span class="ident" id="5762276">signal_recv</span><span class="op" id="5762287">(</span><span class="op" id="5762288">)</span><span class="op" id="5762289">)</span><span class="op" id="5762290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5762293">}</span><br>
<span class="lineno"></span><span class="op" id="5762295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="5762298">func</span>&nbsp;<span class="ident" id="5762303">init</span><span class="op" id="5762307">(</span><span class="op" id="5762308">)</span>&nbsp;<span class="op" id="5762310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762313">signal_enable</span><span class="op" id="5762326">(</span><span class="num" id="5762327">0</span><span class="op" id="5762328">)</span>&nbsp;<span class="comment" id="5762330">//&nbsp;first&nbsp;call&nbsp;-&nbsp;initialize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762358">go</span>&nbsp;<span class="ident" id="5762361">loop</span><span class="op" id="5762365">(</span><span class="op" id="5762366">)</span><br>
<span class="lineno"></span><span class="op" id="5762368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="5762371">const</span>&nbsp;<span class="op" id="5762377">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762380">numSig</span>&nbsp;<span class="op" id="5762387">=</span>&nbsp;<span class="num" id="5762389">65</span>&nbsp;<span class="comment" id="5762392">//&nbsp;max&nbsp;across&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="op" id="5762418">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5762421">func</span>&nbsp;<span class="ident" id="5762426">signum</span><span class="op" id="5762432">(</span><span class="ident" id="5762433">sig</span>&nbsp;<span class="ident" id="5762437">os</span><span class="op" id="5762439">.</span><span class="ident" id="5762440">Signal</span><span class="op" id="5762446">)</span>&nbsp;<span class="builtintype" id="5762448">int</span>&nbsp;<span class="op" id="5762452">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762455">switch</span>&nbsp;<span class="ident" id="5762462">sig</span>&nbsp;<span class="op" id="5762466">:=</span>&nbsp;<span class="ident" id="5762469">sig</span><span class="op" id="5762472">.</span><span class="op" id="5762473">(</span><span class="keyword" id="5762474">type</span><span class="op" id="5762478">)</span>&nbsp;<span class="op" id="5762480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762483">case</span>&nbsp;<span class="ident" id="5762488">syscall</span><span class="op" id="5762495">.</span><span class="ident" id="5762496">Signal</span><span class="op" id="5762502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762506">i</span>&nbsp;<span class="op" id="5762508">:=</span>&nbsp;<span class="builtintype" id="5762511">int</span><span class="op" id="5762514">(</span><span class="ident" id="5762515">sig</span><span class="op" id="5762518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762522">if</span>&nbsp;<span class="ident" id="5762525">i</span>&nbsp;<span class="op" id="5762527">&lt;</span>&nbsp;<span class="num" id="5762529">0</span>&nbsp;<span class="op" id="5762531">||</span>&nbsp;<span class="ident" id="5762534">i</span>&nbsp;<span class="op" id="5762536">&gt;=</span>&nbsp;<span class="ident" id="5762539">numSig</span>&nbsp;<span class="op" id="5762546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762551">return</span>&nbsp;<span class="op" id="5762558">-</span><span class="num" id="5762559">1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5762563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762567">return</span>&nbsp;<span class="ident" id="5762574">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762577">default</span><span class="op" id="5762584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5762588">return</span>&nbsp;<span class="op" id="5762595">-</span><span class="num" id="5762596">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5762599">}</span><br>
<span class="lineno">45</span><span class="op" id="5762601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5762604">func</span>&nbsp;<span class="ident" id="5762609">enableSignal</span><span class="op" id="5762621">(</span><span class="ident" id="5762622">sig</span>&nbsp;<span class="builtintype" id="5762626">int</span><span class="op" id="5762629">)</span>&nbsp;<span class="op" id="5762631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762634">signal_enable</span><span class="op" id="5762647">(</span><span class="builtintype" id="5762648">uint32</span><span class="op" id="5762654">(</span><span class="ident" id="5762655">sig</span><span class="op" id="5762658">)</span><span class="op" id="5762659">)</span><br>
<span class="lineno"></span><span class="op" id="5762661">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5762664">func</span>&nbsp;<span class="ident" id="5762669">disableSignal</span><span class="op" id="5762682">(</span><span class="ident" id="5762683">sig</span>&nbsp;<span class="builtintype" id="5762687">int</span><span class="op" id="5762690">)</span>&nbsp;<span class="op" id="5762692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5762695">signal_disable</span><span class="op" id="5762709">(</span><span class="builtintype" id="5762710">uint32</span><span class="op" id="5762716">(</span><span class="ident" id="5762717">sig</span><span class="op" id="5762720">)</span><span class="op" id="5762721">)</span><br>
<span class="lineno"></span><span class="op" id="5762723">}</span>
</div>
</body>
</html>
