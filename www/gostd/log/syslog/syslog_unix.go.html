<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2932761">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2932816">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2932870">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2932921">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2932954">package</span>&nbsp;<span class="ident" id="2932962">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2932970">import</span>&nbsp;<span class="op" id="2932977">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2932980">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2932990">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="2932996">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2932999">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="2933068">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2933114">func</span>&nbsp;<span class="ident" id="2933119">unixSyslog</span><span class="op" id="2933129">(</span><span class="op" id="2933130">)</span>&nbsp;<span class="op" id="2933132">(</span><span class="ident" id="2933133">conn</span>&nbsp;<span class="ident" id="2933138">serverConn</span><span class="op" id="2933148">,</span>&nbsp;<span class="ident" id="2933150">err</span>&nbsp;<span class="builtintype" id="2933154">error</span><span class="op" id="2933159">)</span>&nbsp;<span class="op" id="2933161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933164">logTypes</span>&nbsp;<span class="op" id="2933173">:=</span>&nbsp;<span class="op" id="2933176">[</span><span class="op" id="2933177">]</span><span class="builtintype" id="2933178">string</span><span class="op" id="2933184">{</span><span class="string" id="2933185">&#34;unixgram&#34;</span><span class="op" id="2933195">,</span>&nbsp;<span class="string" id="2933197">&#34;unix&#34;</span><span class="op" id="2933203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933206">logPaths</span>&nbsp;<span class="op" id="2933215">:=</span>&nbsp;<span class="op" id="2933218">[</span><span class="op" id="2933219">]</span><span class="builtintype" id="2933220">string</span><span class="op" id="2933226">{</span><span class="string" id="2933227">&#34;/dev/log&#34;</span><span class="op" id="2933237">,</span>&nbsp;<span class="string" id="2933239">&#34;/var/run/syslog&#34;</span><span class="op" id="2933256">,</span>&nbsp;<span class="string" id="2933258">&#34;/var/run/log&#34;</span><span class="op" id="2933272">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933275">for</span>&nbsp;<span class="ident" id="2933279">_</span><span class="op" id="2933280">,</span>&nbsp;<span class="ident" id="2933282">network</span>&nbsp;<span class="op" id="2933290">:=</span>&nbsp;<span class="keyword" id="2933293">range</span>&nbsp;<span class="ident" id="2933299">logTypes</span>&nbsp;<span class="op" id="2933308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933312">for</span>&nbsp;<span class="ident" id="2933316">_</span><span class="op" id="2933317">,</span>&nbsp;<span class="ident" id="2933319">path</span>&nbsp;<span class="op" id="2933324">:=</span>&nbsp;<span class="keyword" id="2933327">range</span>&nbsp;<span class="ident" id="2933333">logPaths</span>&nbsp;<span class="op" id="2933342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2933347">conn</span><span class="op" id="2933351">,</span>&nbsp;<span class="ident" id="2933353">err</span>&nbsp;<span class="op" id="2933357">:=</span>&nbsp;<span class="ident" id="2933360">net</span><span class="op" id="2933363">.</span><span class="ident" id="2933364">Dial</span><span class="op" id="2933368">(</span><span class="ident" id="2933369">network</span><span class="op" id="2933376">,</span>&nbsp;<span class="ident" id="2933378">path</span><span class="op" id="2933382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933387">if</span>&nbsp;<span class="ident" id="2933390">err</span>&nbsp;<span class="op" id="2933394">!=</span>&nbsp;<span class="ident" id="2933397">nil</span>&nbsp;<span class="op" id="2933401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933407">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933419">}</span>&nbsp;<span class="keyword" id="2933421">else</span>&nbsp;<span class="op" id="2933426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933432">return</span>&nbsp;<span class="op" id="2933439">&amp;</span><span class="ident" id="2933440">netConn</span><span class="op" id="2933447">{</span><span class="ident" id="2933448">conn</span><span class="op" id="2933452">:</span>&nbsp;<span class="ident" id="2933454">conn</span><span class="op" id="2933458">,</span>&nbsp;<span class="ident" id="2933460">local</span><span class="op" id="2933465">:</span>&nbsp;<span class="builtintype" id="2933467">true</span><span class="op" id="2933471">}</span><span class="op" id="2933472">,</span>&nbsp;<span class="ident" id="2933474">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2933488">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2933491">return</span>&nbsp;<span class="ident" id="2933498">nil</span><span class="op" id="2933501">,</span>&nbsp;<span class="ident" id="2933503">errors</span><span class="op" id="2933509">.</span><span class="ident" id="2933510">New</span><span class="op" id="2933513">(</span><span class="string" id="2933514">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="2933542">)</span><br>
<span class="lineno"></span><span class="op" id="2933544">}</span>
</div>
</body>
</html>
