<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5330937">package</span>&nbsp;<span class="ident" id="5330945">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5330951">import</span>&nbsp;<span class="op" id="5330958">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5330961">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5330983">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5330986">var</span>&nbsp;<span class="op" id="5330990">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5330993">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331014">opBrMap</span>&nbsp;<span class="op" id="5331022">=</span>&nbsp;<span class="keyword" id="5331024">map</span><span class="op" id="5331027">[</span><span class="builtintype" id="5331028">string</span><span class="op" id="5331034">]</span><span class="builtintype" id="5331035">uint32</span><span class="op" id="5331041">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5331045">&#34;bne&#34;</span><span class="op" id="5331050">:</span>&nbsp;<span class="num" id="5331052">32</span><span class="op" id="5331054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5331058">&#34;beq&#34;</span><span class="op" id="5331063">:</span>&nbsp;<span class="num" id="5331065">33</span><span class="op" id="5331067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331070">}</span><br>
<span class="lineno"></span><span class="op" id="5331072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5331075">func</span>&nbsp;<span class="ident" id="5331080">makeInstBr</span><span class="op" id="5331090">(</span><span class="ident" id="5331091">op</span><span class="op" id="5331093">,</span>&nbsp;<span class="ident" id="5331095">s1</span><span class="op" id="5331097">,</span>&nbsp;<span class="ident" id="5331099">s2</span>&nbsp;<span class="builtintype" id="5331102">uint32</span><span class="op" id="5331108">)</span>&nbsp;<span class="op" id="5331110">*</span><span class="ident" id="5331111"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span>&nbsp;<span class="op" id="5331116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331119">ret</span>&nbsp;<span class="op" id="5331123">:=</span>&nbsp;<span class="op" id="5331126">(</span><span class="ident" id="5331127"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331091">op</a></span>&nbsp;<span class="op" id="5331130">&amp;</span>&nbsp;<span class="num" id="5331132">0xff</span><span class="op" id="5331136">)</span>&nbsp;<span class="op" id="5331138">&lt;&lt;</span>&nbsp;<span class="num" id="5331141">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331145"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331119">ret</a></span>&nbsp;<span class="op" id="5331149">|=</span>&nbsp;<span class="op" id="5331152">(</span><span class="ident" id="5331153"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331095">s1</a></span>&nbsp;<span class="op" id="5331156">&amp;</span>&nbsp;<span class="num" id="5331158">0x7</span><span class="op" id="5331161">)</span>&nbsp;<span class="op" id="5331163">&lt;&lt;</span>&nbsp;<span class="num" id="5331166">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331170"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331119">ret</a></span>&nbsp;<span class="op" id="5331174">|=</span>&nbsp;<span class="op" id="5331177">(</span><span class="ident" id="5331178"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331099">s2</a></span>&nbsp;<span class="op" id="5331181">&amp;</span>&nbsp;<span class="num" id="5331183">0x7</span><span class="op" id="5331186">)</span>&nbsp;<span class="op" id="5331188">&lt;&lt;</span>&nbsp;<span class="num" id="5331191">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331195">return</span>&nbsp;<span class="op" id="5331202">&amp;</span><span class="ident" id="5331203"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5331207">{</span><span class="ident" id="5331208">inst</span><span class="op" id="5331212">:</span>&nbsp;<span class="ident" id="5331214"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331119">ret</a></span><span class="op" id="5331217">}</span><br>
<span class="lineno">20</span><span class="op" id="5331219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5331222">func</span>&nbsp;<span class="ident" id="5331227">parseInstBr</span><span class="op" id="5331238">(</span><span class="ident" id="5331239">p</span>&nbsp;<span class="op" id="5331241">*</span><span class="ident" id="5331242"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5331248">,</span>&nbsp;<span class="ident" id="5331250">ops</span>&nbsp;<span class="op" id="5331254">[</span><span class="op" id="5331255">]</span><span class="op" id="5331256">*</span><span class="ident" id="5331257"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5330961">lex8</a></span><span class="op" id="5331261">.</span><span class="ident" id="5331262">Token</span><span class="op" id="5331267">)</span>&nbsp;<span class="op" id="5331269">(</span><span class="op" id="5331270">*</span><span class="ident" id="5331271"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5331275">,</span>&nbsp;<span class="builtintype" id="5331277">bool</span><span class="op" id="5331281">)</span>&nbsp;<span class="op" id="5331283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331286">op0</span>&nbsp;<span class="op" id="5331290">:=</span>&nbsp;<span class="ident" id="5331293"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331250">ops</a></span><span class="op" id="5331296">[</span><span class="num" id="5331297">0</span><span class="op" id="5331298">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331301">opName</span>&nbsp;<span class="op" id="5331308">:=</span>&nbsp;<span class="ident" id="5331311"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331286">op0</a></span><span class="op" id="5331314">.</span><span class="ident" id="5331315">Lit</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331320">args</span>&nbsp;<span class="op" id="5331325">:=</span>&nbsp;<span class="ident" id="5331328"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331250">ops</a></span><span class="op" id="5331331">[</span><span class="num" id="5331332">1</span><span class="op" id="5331333">:</span><span class="op" id="5331334">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331338">var</span>&nbsp;<span class="op" id="5331342">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331346">op</span><span class="op" id="5331348">,</span>&nbsp;<span class="ident" id="5331350">s1</span><span class="op" id="5331352">,</span>&nbsp;<span class="ident" id="5331354">s2</span>&nbsp;<span class="builtintype" id="5331357">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331366">lab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5331377">string</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331386">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5331397">*</span><span class="ident" id="5331398"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5330961">lex8</a></span><span class="op" id="5331402">.</span><span class="ident" id="5331403">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331412">found</span>&nbsp;<span class="builtintype" id="5331418">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331424">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331428">if</span>&nbsp;<span class="ident" id="5331431"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331346">op</a></span><span class="op" id="5331433">,</span>&nbsp;<span class="ident" id="5331435"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331412">found</a></span>&nbsp;<span class="op" id="5331441">=</span>&nbsp;<span class="ident" id="5331443"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331014">opBrMap</a></span><span class="op" id="5331450">[</span><span class="ident" id="5331451"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331301">opName</a></span><span class="op" id="5331457">]</span><span class="op" id="5331458">;</span>&nbsp;<span class="ident" id="5331460"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331412">found</a></span>&nbsp;<span class="op" id="5331466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331470">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;label</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331492">if</span>&nbsp;<span class="ident" id="5331495"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#5345685">argCount</a></span><span class="op" id="5331503">(</span><span class="ident" id="5331504"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331239">p</a></span><span class="op" id="5331505">,</span>&nbsp;<span class="ident" id="5331507"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331250">ops</a></span><span class="op" id="5331510">,</span>&nbsp;<span class="num" id="5331512">3</span><span class="op" id="5331513">)</span>&nbsp;<span class="op" id="5331515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331520"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331350">s1</a></span>&nbsp;<span class="op" id="5331523">=</span>&nbsp;<span class="ident" id="5331525"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5331533">(</span><span class="ident" id="5331534"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331239">p</a></span><span class="op" id="5331535">,</span>&nbsp;<span class="ident" id="5331537"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331320">args</a></span><span class="op" id="5331541">[</span><span class="num" id="5331542">0</span><span class="op" id="5331543">]</span><span class="op" id="5331544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331549"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331354">s2</a></span>&nbsp;<span class="op" id="5331552">=</span>&nbsp;<span class="ident" id="5331554"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5331562">(</span><span class="ident" id="5331563"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331239">p</a></span><span class="op" id="5331564">,</span>&nbsp;<span class="ident" id="5331566"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331320">args</a></span><span class="op" id="5331570">[</span><span class="num" id="5331571">1</span><span class="op" id="5331572">]</span><span class="op" id="5331573">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331578"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331386">symTok</a></span>&nbsp;<span class="op" id="5331585">=</span>&nbsp;<span class="ident" id="5331587"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331320">args</a></span><span class="op" id="5331591">[</span><span class="num" id="5331592">2</span><span class="op" id="5331593">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331598">if</span>&nbsp;<span class="ident" id="5331601"><a href="/lonnie.io/e8vm/asm8/parse_label.go.html#5348879">parseLabel</a></span><span class="op" id="5331611">(</span><span class="ident" id="5331612"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331239">p</a></span><span class="op" id="5331613">,</span>&nbsp;<span class="ident" id="5331615"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331386">symTok</a></span><span class="op" id="5331621">)</span>&nbsp;<span class="op" id="5331623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331629"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331366">lab</a></span>&nbsp;<span class="op" id="5331633">=</span>&nbsp;<span class="ident" id="5331635"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331386">symTok</a></span><span class="op" id="5331641">.</span><span class="ident" id="5331642">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331649">}</span>&nbsp;<span class="keyword" id="5331651">else</span>&nbsp;<span class="op" id="5331656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331662"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331239">p</a></span><span class="op" id="5331663">.</span><span class="ident" id="5331664">err</span><span class="op" id="5331667">(</span><span class="ident" id="5331668"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331386">symTok</a></span><span class="op" id="5331674">.</span><span class="ident" id="5331675">Pos</span><span class="op" id="5331678">,</span>&nbsp;<span class="string" id="5331680">&#34;expects&nbsp;a&nbsp;label&nbsp;for&nbsp;%s&#34;</span><span class="op" id="5331704">,</span>&nbsp;<span class="ident" id="5331706"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331301">opName</a></span><span class="op" id="5331712">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331724">}</span>&nbsp;<span class="keyword" id="5331726">else</span>&nbsp;<span class="op" id="5331731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331735">return</span>&nbsp;<span class="ident" id="5331742">nil</span><span class="op" id="5331745">,</span>&nbsp;<span class="ident" id="5331747">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5331754">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331758">ret</span>&nbsp;<span class="op" id="5331762">:=</span>&nbsp;<span class="ident" id="5331765"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331080">makeInstBr</a></span><span class="op" id="5331775">(</span><span class="ident" id="5331776"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331346">op</a></span><span class="op" id="5331778">,</span>&nbsp;<span class="ident" id="5331780"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331350">s1</a></span><span class="op" id="5331782">,</span>&nbsp;<span class="ident" id="5331784"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331354">s2</a></span><span class="op" id="5331786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331789"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331758">ret</a></span><span class="op" id="5331792">.</span><span class="ident" id="5331793">symbol</span>&nbsp;<span class="op" id="5331800">=</span>&nbsp;<span class="ident" id="5331802"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331366">lab</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331807"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331758">ret</a></span><span class="op" id="5331810">.</span><span class="ident" id="5331811">fill</span>&nbsp;<span class="op" id="5331816">=</span>&nbsp;<span class="ident" id="5331818"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330516">fillLabel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331829"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331758">ret</a></span><span class="op" id="5331832">.</span><span class="ident" id="5331833">symTok</span>&nbsp;<span class="op" id="5331840">=</span>&nbsp;<span class="ident" id="5331842"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331386">symTok</a></span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5331851">return</span>&nbsp;<span class="ident" id="5331858"><a href="/lonnie.io/e8vm/asm8/inst_br.go.html#5331758">ret</a></span><span class="op" id="5331861">,</span>&nbsp;<span class="ident" id="5331863">true</span><br>
<span class="lineno"></span><span class="op" id="5331868">}</span>
</div>
</body>
</html>
