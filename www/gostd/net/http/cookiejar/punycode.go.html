<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6284296">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6284351">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6284405">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6284456">package</span>&nbsp;<span class="ident" id="6284464">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6284475">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6284538">import</span>&nbsp;<span class="op" id="6284545">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6284548">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6284555">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6284566">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="6284581">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="6284584">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="6284638">//</span><br>
<span class="lineno"></span><span class="comment" id="6284641">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="6284720">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="6284770">const</span>&nbsp;<span class="op" id="6284776">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284779">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284791">int32</span>&nbsp;<span class="op" id="6284797">=</span>&nbsp;<span class="num" id="6284799">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284803">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284815">int32</span>&nbsp;<span class="op" id="6284821">=</span>&nbsp;<span class="num" id="6284823">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284828">initialBias</span>&nbsp;<span class="builtintype" id="6284840">int32</span>&nbsp;<span class="op" id="6284846">=</span>&nbsp;<span class="num" id="6284848">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284852">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284864">int32</span>&nbsp;<span class="op" id="6284870">=</span>&nbsp;<span class="num" id="6284872">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284877">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284889">int32</span>&nbsp;<span class="op" id="6284895">=</span>&nbsp;<span class="num" id="6284897">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284901">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284913">int32</span>&nbsp;<span class="op" id="6284919">=</span>&nbsp;<span class="num" id="6284921">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6284925">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6284937">int32</span>&nbsp;<span class="op" id="6284943">=</span>&nbsp;<span class="num" id="6284945">1</span><br>
<span class="lineno"></span><span class="op" id="6284947">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6284950">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="6285028">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="6285043">//</span><br>
<span class="lineno"></span><span class="comment" id="6285046">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="6285118">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="6285198">func</span>&nbsp;<span class="ident" id="6285203">encode</span><span class="op" id="6285209">(</span><span class="ident" id="6285210">prefix</span><span class="op" id="6285216">,</span>&nbsp;<span class="ident" id="6285218">s</span>&nbsp;<span class="builtintype" id="6285220">string</span><span class="op" id="6285226">)</span>&nbsp;<span class="op" id="6285228">(</span><span class="builtintype" id="6285229">string</span><span class="op" id="6285235">,</span>&nbsp;<span class="builtintype" id="6285237">error</span><span class="op" id="6285242">)</span>&nbsp;<span class="op" id="6285244">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285247">output</span>&nbsp;<span class="op" id="6285254">:=</span>&nbsp;<span class="builtinfunc" id="6285257">make</span><span class="op" id="6285261">(</span><span class="op" id="6285262">[</span><span class="op" id="6285263">]</span><span class="builtintype" id="6285264">byte</span><span class="op" id="6285268">,</span>&nbsp;<span class="builtinfunc" id="6285270">len</span><span class="op" id="6285273">(</span><span class="ident" id="6285274">prefix</span><span class="op" id="6285280">)</span><span class="op" id="6285281">,</span>&nbsp;<span class="builtinfunc" id="6285283">len</span><span class="op" id="6285286">(</span><span class="ident" id="6285287">prefix</span><span class="op" id="6285293">)</span><span class="op" id="6285294">+</span><span class="num" id="6285295">1</span><span class="op" id="6285296">+</span><span class="num" id="6285297">2</span><span class="op" id="6285298">*</span><span class="builtinfunc" id="6285299">len</span><span class="op" id="6285302">(</span><span class="ident" id="6285303">s</span><span class="op" id="6285304">)</span><span class="op" id="6285305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6285308">copy</span><span class="op" id="6285312">(</span><span class="ident" id="6285313">output</span><span class="op" id="6285319">,</span>&nbsp;<span class="ident" id="6285321">prefix</span><span class="op" id="6285327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285330">delta</span><span class="op" id="6285335">,</span>&nbsp;<span class="ident" id="6285337">n</span><span class="op" id="6285338">,</span>&nbsp;<span class="ident" id="6285340">bias</span>&nbsp;<span class="op" id="6285345">:=</span>&nbsp;<span class="builtintype" id="6285348">int32</span><span class="op" id="6285353">(</span><span class="num" id="6285354">0</span><span class="op" id="6285355">)</span><span class="op" id="6285356">,</span>&nbsp;<span class="ident" id="6285358">initialN</span><span class="op" id="6285366">,</span>&nbsp;<span class="ident" id="6285368">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285381">b</span><span class="op" id="6285382">,</span>&nbsp;<span class="ident" id="6285384">remaining</span>&nbsp;<span class="op" id="6285394">:=</span>&nbsp;<span class="builtintype" id="6285397">int32</span><span class="op" id="6285402">(</span><span class="num" id="6285403">0</span><span class="op" id="6285404">)</span><span class="op" id="6285405">,</span>&nbsp;<span class="builtintype" id="6285407">int32</span><span class="op" id="6285412">(</span><span class="num" id="6285413">0</span><span class="op" id="6285414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285417">for</span>&nbsp;<span class="ident" id="6285421">_</span><span class="op" id="6285422">,</span>&nbsp;<span class="ident" id="6285424">r</span>&nbsp;<span class="op" id="6285426">:=</span>&nbsp;<span class="keyword" id="6285429">range</span>&nbsp;<span class="ident" id="6285435">s</span>&nbsp;<span class="op" id="6285437">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285441">if</span>&nbsp;<span class="ident" id="6285444">r</span>&nbsp;<span class="op" id="6285446">&lt;</span>&nbsp;<span class="num" id="6285448">0x80</span>&nbsp;<span class="op" id="6285453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285458">b</span><span class="op" id="6285459">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285465">output</span>&nbsp;<span class="op" id="6285472">=</span>&nbsp;<span class="builtinfunc" id="6285474">append</span><span class="op" id="6285480">(</span><span class="ident" id="6285481">output</span><span class="op" id="6285487">,</span>&nbsp;<span class="builtintype" id="6285489">byte</span><span class="op" id="6285493">(</span><span class="ident" id="6285494">r</span><span class="op" id="6285495">)</span><span class="op" id="6285496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285500">}</span>&nbsp;<span class="keyword" id="6285502">else</span>&nbsp;<span class="op" id="6285507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285512">remaining</span><span class="op" id="6285521">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285532">h</span>&nbsp;<span class="op" id="6285534">:=</span>&nbsp;<span class="ident" id="6285537">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285540">if</span>&nbsp;<span class="ident" id="6285543">b</span>&nbsp;<span class="op" id="6285545">&gt;</span>&nbsp;<span class="num" id="6285547">0</span>&nbsp;<span class="op" id="6285549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285553">output</span>&nbsp;<span class="op" id="6285560">=</span>&nbsp;<span class="builtinfunc" id="6285562">append</span><span class="op" id="6285568">(</span><span class="ident" id="6285569">output</span><span class="op" id="6285575">,</span>&nbsp;<span class="string" id="6285577">&#39;-&#39;</span><span class="op" id="6285580">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285586">for</span>&nbsp;<span class="ident" id="6285590">remaining</span>&nbsp;<span class="op" id="6285600">!=</span>&nbsp;<span class="num" id="6285603">0</span>&nbsp;<span class="op" id="6285605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285609">m</span>&nbsp;<span class="op" id="6285611">:=</span>&nbsp;<span class="builtintype" id="6285614">int32</span><span class="op" id="6285619">(</span><span class="num" id="6285620">0x7fffffff</span><span class="op" id="6285630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285634">for</span>&nbsp;<span class="ident" id="6285638">_</span><span class="op" id="6285639">,</span>&nbsp;<span class="ident" id="6285641">r</span>&nbsp;<span class="op" id="6285643">:=</span>&nbsp;<span class="keyword" id="6285646">range</span>&nbsp;<span class="ident" id="6285652">s</span>&nbsp;<span class="op" id="6285654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285659">if</span>&nbsp;<span class="ident" id="6285662">m</span>&nbsp;<span class="op" id="6285664">&gt;</span>&nbsp;<span class="ident" id="6285666">r</span>&nbsp;<span class="op" id="6285668">&amp;&amp;</span>&nbsp;<span class="ident" id="6285671">r</span>&nbsp;<span class="op" id="6285673">&gt;=</span>&nbsp;<span class="ident" id="6285676">n</span>&nbsp;<span class="op" id="6285678">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285684">m</span>&nbsp;<span class="op" id="6285686">=</span>&nbsp;<span class="ident" id="6285688">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285701">delta</span>&nbsp;<span class="op" id="6285707">+=</span>&nbsp;<span class="op" id="6285710">(</span><span class="ident" id="6285711">m</span>&nbsp;<span class="op" id="6285713">-</span>&nbsp;<span class="ident" id="6285715">n</span><span class="op" id="6285716">)</span>&nbsp;<span class="op" id="6285718">*</span>&nbsp;<span class="op" id="6285720">(</span><span class="ident" id="6285721">h</span>&nbsp;<span class="op" id="6285723">+</span>&nbsp;<span class="num" id="6285725">1</span><span class="op" id="6285726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285730">if</span>&nbsp;<span class="ident" id="6285733">delta</span>&nbsp;<span class="op" id="6285739">&lt;</span>&nbsp;<span class="num" id="6285741">0</span>&nbsp;<span class="op" id="6285743">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285748">return</span>&nbsp;<span class="string" id="6285755">&#34;&#34;</span><span class="op" id="6285757">,</span>&nbsp;<span class="ident" id="6285759">fmt</span><span class="op" id="6285762">.</span><span class="ident" id="6285763">Errorf</span><span class="op" id="6285769">(</span><span class="string" id="6285770">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6285799">,</span>&nbsp;<span class="ident" id="6285801">s</span><span class="op" id="6285802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285810">n</span>&nbsp;<span class="op" id="6285812">=</span>&nbsp;<span class="ident" id="6285814">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285818">for</span>&nbsp;<span class="ident" id="6285822">_</span><span class="op" id="6285823">,</span>&nbsp;<span class="ident" id="6285825">r</span>&nbsp;<span class="op" id="6285827">:=</span>&nbsp;<span class="keyword" id="6285830">range</span>&nbsp;<span class="ident" id="6285836">s</span>&nbsp;<span class="op" id="6285838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285843">if</span>&nbsp;<span class="ident" id="6285846">r</span>&nbsp;<span class="op" id="6285848">&lt;</span>&nbsp;<span class="ident" id="6285850">n</span>&nbsp;<span class="op" id="6285852">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6285858">delta</span><span class="op" id="6285863">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285870">if</span>&nbsp;<span class="ident" id="6285873">delta</span>&nbsp;<span class="op" id="6285879">&lt;</span>&nbsp;<span class="num" id="6285881">0</span>&nbsp;<span class="op" id="6285883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285890">return</span>&nbsp;<span class="string" id="6285897">&#34;&#34;</span><span class="op" id="6285899">,</span>&nbsp;<span class="ident" id="6285901">fmt</span><span class="op" id="6285904">.</span><span class="ident" id="6285905">Errorf</span><span class="op" id="6285911">(</span><span class="string" id="6285912">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="6285941">,</span>&nbsp;<span class="ident" id="6285943">s</span><span class="op" id="6285944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285956">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6285968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285973">if</span>&nbsp;<span class="ident" id="6285976">r</span>&nbsp;<span class="op" id="6285978">&gt;</span>&nbsp;<span class="ident" id="6285980">n</span>&nbsp;<span class="op" id="6285982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6285988">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286005">q</span>&nbsp;<span class="op" id="6286007">:=</span>&nbsp;<span class="ident" id="6286010">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286019">for</span>&nbsp;<span class="ident" id="6286023">k</span>&nbsp;<span class="op" id="6286025">:=</span>&nbsp;<span class="ident" id="6286028">base</span><span class="op" id="6286032">;</span>&nbsp;<span class="op" id="6286034">;</span>&nbsp;<span class="ident" id="6286036">k</span>&nbsp;<span class="op" id="6286038">+=</span>&nbsp;<span class="ident" id="6286041">base</span>&nbsp;<span class="op" id="6286046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286052">t</span>&nbsp;<span class="op" id="6286054">:=</span>&nbsp;<span class="ident" id="6286057">k</span>&nbsp;<span class="op" id="6286059">-</span>&nbsp;<span class="ident" id="6286061">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286070">if</span>&nbsp;<span class="ident" id="6286073">t</span>&nbsp;<span class="op" id="6286075">&lt;</span>&nbsp;<span class="ident" id="6286077">tmin</span>&nbsp;<span class="op" id="6286082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286089">t</span>&nbsp;<span class="op" id="6286091">=</span>&nbsp;<span class="ident" id="6286093">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286102">}</span>&nbsp;<span class="keyword" id="6286104">else</span>&nbsp;<span class="keyword" id="6286109">if</span>&nbsp;<span class="ident" id="6286112">t</span>&nbsp;<span class="op" id="6286114">&gt;</span>&nbsp;<span class="ident" id="6286116">tmax</span>&nbsp;<span class="op" id="6286121">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286128">t</span>&nbsp;<span class="op" id="6286130">=</span>&nbsp;<span class="ident" id="6286132">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286147">if</span>&nbsp;<span class="ident" id="6286150">q</span>&nbsp;<span class="op" id="6286152">&lt;</span>&nbsp;<span class="ident" id="6286154">t</span>&nbsp;<span class="op" id="6286156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286163">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286173">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286179">output</span>&nbsp;<span class="op" id="6286186">=</span>&nbsp;<span class="builtinfunc" id="6286188">append</span><span class="op" id="6286194">(</span><span class="ident" id="6286195">output</span><span class="op" id="6286201">,</span>&nbsp;<span class="ident" id="6286203">encodeDigit</span><span class="op" id="6286214">(</span><span class="ident" id="6286215">t</span><span class="op" id="6286216">+</span><span class="op" id="6286217">(</span><span class="ident" id="6286218">q</span><span class="op" id="6286219">-</span><span class="ident" id="6286220">t</span><span class="op" id="6286221">)</span><span class="op" id="6286222">%</span><span class="op" id="6286223">(</span><span class="ident" id="6286224">base</span><span class="op" id="6286228">-</span><span class="ident" id="6286229">t</span><span class="op" id="6286230">)</span><span class="op" id="6286231">)</span><span class="op" id="6286232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286238">q</span>&nbsp;<span class="op" id="6286240">=</span>&nbsp;<span class="op" id="6286242">(</span><span class="ident" id="6286243">q</span>&nbsp;<span class="op" id="6286245">-</span>&nbsp;<span class="ident" id="6286247">t</span><span class="op" id="6286248">)</span>&nbsp;<span class="op" id="6286250">/</span>&nbsp;<span class="op" id="6286252">(</span><span class="ident" id="6286253">base</span>&nbsp;<span class="op" id="6286258">-</span>&nbsp;<span class="ident" id="6286260">t</span><span class="op" id="6286261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286271">output</span>&nbsp;<span class="op" id="6286278">=</span>&nbsp;<span class="builtinfunc" id="6286280">append</span><span class="op" id="6286286">(</span><span class="ident" id="6286287">output</span><span class="op" id="6286293">,</span>&nbsp;<span class="ident" id="6286295">encodeDigit</span><span class="op" id="6286306">(</span><span class="ident" id="6286307">q</span><span class="op" id="6286308">)</span><span class="op" id="6286309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286314">bias</span>&nbsp;<span class="op" id="6286319">=</span>&nbsp;<span class="ident" id="6286321">adapt</span><span class="op" id="6286326">(</span><span class="ident" id="6286327">delta</span><span class="op" id="6286332">,</span>&nbsp;<span class="ident" id="6286334">h</span><span class="op" id="6286335">+</span><span class="num" id="6286336">1</span><span class="op" id="6286337">,</span>&nbsp;<span class="ident" id="6286339">h</span>&nbsp;<span class="op" id="6286341">==</span>&nbsp;<span class="ident" id="6286344">b</span><span class="op" id="6286345">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286350">delta</span>&nbsp;<span class="op" id="6286356">=</span>&nbsp;<span class="num" id="6286358">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286363">h</span><span class="op" id="6286364">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286370">remaining</span><span class="op" id="6286379">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286388">delta</span><span class="op" id="6286393">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286398">n</span><span class="op" id="6286399">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286406">return</span>&nbsp;<span class="builtintype" id="6286413">string</span><span class="op" id="6286419">(</span><span class="ident" id="6286420">output</span><span class="op" id="6286426">)</span><span class="op" id="6286427">,</span>&nbsp;<span class="builtintype" id="6286429">nil</span><br>
<span class="lineno"></span><span class="op" id="6286433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="6286436">func</span>&nbsp;<span class="ident" id="6286441">encodeDigit</span><span class="op" id="6286452">(</span><span class="ident" id="6286453">digit</span>&nbsp;<span class="builtintype" id="6286459">int32</span><span class="op" id="6286464">)</span>&nbsp;<span class="builtintype" id="6286466">byte</span>&nbsp;<span class="op" id="6286471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286474">switch</span>&nbsp;<span class="op" id="6286481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286484">case</span>&nbsp;<span class="num" id="6286489">0</span>&nbsp;<span class="op" id="6286491">&lt;=</span>&nbsp;<span class="ident" id="6286494">digit</span>&nbsp;<span class="op" id="6286500">&amp;&amp;</span>&nbsp;<span class="ident" id="6286503">digit</span>&nbsp;<span class="op" id="6286509">&lt;</span>&nbsp;<span class="num" id="6286511">26</span><span class="op" id="6286513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286517">return</span>&nbsp;<span class="builtintype" id="6286524">byte</span><span class="op" id="6286528">(</span><span class="ident" id="6286529">digit</span>&nbsp;<span class="op" id="6286535">+</span>&nbsp;<span class="string" id="6286537">&#39;a&#39;</span><span class="op" id="6286540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286543">case</span>&nbsp;<span class="num" id="6286548">26</span>&nbsp;<span class="op" id="6286551">&lt;=</span>&nbsp;<span class="ident" id="6286554">digit</span>&nbsp;<span class="op" id="6286560">&amp;&amp;</span>&nbsp;<span class="ident" id="6286563">digit</span>&nbsp;<span class="op" id="6286569">&lt;</span>&nbsp;<span class="num" id="6286571">36</span><span class="op" id="6286573">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286577">return</span>&nbsp;<span class="builtintype" id="6286584">byte</span><span class="op" id="6286588">(</span><span class="ident" id="6286589">digit</span>&nbsp;<span class="op" id="6286595">+</span>&nbsp;<span class="op" id="6286597">(</span><span class="string" id="6286598">&#39;0&#39;</span>&nbsp;<span class="op" id="6286602">-</span>&nbsp;<span class="num" id="6286604">26</span><span class="op" id="6286606">)</span><span class="op" id="6286607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6286613">panic</span><span class="op" id="6286618">(</span><span class="string" id="6286619">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="6286667">)</span><br>
<span class="lineno"></span><span class="op" id="6286669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6286672">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="6286739">func</span>&nbsp;<span class="ident" id="6286744">adapt</span><span class="op" id="6286749">(</span><span class="ident" id="6286750">delta</span><span class="op" id="6286755">,</span>&nbsp;<span class="ident" id="6286757">numPoints</span>&nbsp;<span class="builtintype" id="6286767">int32</span><span class="op" id="6286772">,</span>&nbsp;<span class="ident" id="6286774">firstTime</span>&nbsp;<span class="builtintype" id="6286784">bool</span><span class="op" id="6286788">)</span>&nbsp;<span class="builtintype" id="6286790">int32</span>&nbsp;<span class="op" id="6286796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286799">if</span>&nbsp;<span class="ident" id="6286802">firstTime</span>&nbsp;<span class="op" id="6286812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286816">delta</span>&nbsp;<span class="op" id="6286822">/=</span>&nbsp;<span class="ident" id="6286825">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286831">}</span>&nbsp;<span class="keyword" id="6286833">else</span>&nbsp;<span class="op" id="6286838">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286842">delta</span>&nbsp;<span class="op" id="6286848">/=</span>&nbsp;<span class="num" id="6286851">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286857">delta</span>&nbsp;<span class="op" id="6286863">+=</span>&nbsp;<span class="ident" id="6286866">delta</span>&nbsp;<span class="op" id="6286872">/</span>&nbsp;<span class="ident" id="6286874">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286885">k</span>&nbsp;<span class="op" id="6286887">:=</span>&nbsp;<span class="builtintype" id="6286890">int32</span><span class="op" id="6286895">(</span><span class="num" id="6286896">0</span><span class="op" id="6286897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286900">for</span>&nbsp;<span class="ident" id="6286904">delta</span>&nbsp;<span class="op" id="6286910">&gt;</span>&nbsp;<span class="op" id="6286912">(</span><span class="op" id="6286913">(</span><span class="ident" id="6286914">base</span><span class="op" id="6286918">-</span><span class="ident" id="6286919">tmin</span><span class="op" id="6286923">)</span><span class="op" id="6286924">*</span><span class="ident" id="6286925">tmax</span><span class="op" id="6286929">)</span><span class="op" id="6286930">/</span><span class="num" id="6286931">2</span>&nbsp;<span class="op" id="6286933">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286937">delta</span>&nbsp;<span class="op" id="6286943">/=</span>&nbsp;<span class="ident" id="6286946">base</span>&nbsp;<span class="op" id="6286951">-</span>&nbsp;<span class="ident" id="6286953">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6286960">k</span>&nbsp;<span class="op" id="6286962">+=</span>&nbsp;<span class="ident" id="6286965">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6286971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6286974">return</span>&nbsp;<span class="ident" id="6286981">k</span>&nbsp;<span class="op" id="6286983">+</span>&nbsp;<span class="op" id="6286985">(</span><span class="ident" id="6286986">base</span><span class="op" id="6286990">-</span><span class="ident" id="6286991">tmin</span><span class="op" id="6286995">+</span><span class="num" id="6286996">1</span><span class="op" id="6286997">)</span><span class="op" id="6286998">*</span><span class="ident" id="6286999">delta</span><span class="op" id="6287004">/</span><span class="op" id="6287005">(</span><span class="ident" id="6287006">delta</span><span class="op" id="6287011">+</span><span class="ident" id="6287012">skew</span><span class="op" id="6287016">)</span><br>
<span class="lineno"></span><span class="op" id="6287018">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6287021">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6287098">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6287147">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="6287201">const</span>&nbsp;<span class="ident" id="6287207">acePrefix</span>&nbsp;<span class="op" id="6287217">=</span>&nbsp;<span class="string" id="6287219">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6287227">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="6287304">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6287374">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="6287408">func</span>&nbsp;<span class="ident" id="6287413">toASCII</span><span class="op" id="6287420">(</span><span class="ident" id="6287421">s</span>&nbsp;<span class="builtintype" id="6287423">string</span><span class="op" id="6287429">)</span>&nbsp;<span class="op" id="6287431">(</span><span class="builtintype" id="6287432">string</span><span class="op" id="6287438">,</span>&nbsp;<span class="builtintype" id="6287440">error</span><span class="op" id="6287445">)</span>&nbsp;<span class="op" id="6287447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287450">if</span>&nbsp;<span class="ident" id="6287453">ascii</span><span class="op" id="6287458">(</span><span class="ident" id="6287459">s</span><span class="op" id="6287460">)</span>&nbsp;<span class="op" id="6287462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287466">return</span>&nbsp;<span class="ident" id="6287473">s</span><span class="op" id="6287474">,</span>&nbsp;<span class="builtintype" id="6287476">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6287484">labels</span>&nbsp;<span class="op" id="6287491">:=</span>&nbsp;<span class="ident" id="6287494">strings</span><span class="op" id="6287501">.</span><span class="ident" id="6287502">Split</span><span class="op" id="6287507">(</span><span class="ident" id="6287508">s</span><span class="op" id="6287509">,</span>&nbsp;<span class="string" id="6287511">&#34;.&#34;</span><span class="op" id="6287514">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287517">for</span>&nbsp;<span class="ident" id="6287521">i</span><span class="op" id="6287522">,</span>&nbsp;<span class="ident" id="6287524">label</span>&nbsp;<span class="op" id="6287530">:=</span>&nbsp;<span class="keyword" id="6287533">range</span>&nbsp;<span class="ident" id="6287539">labels</span>&nbsp;<span class="op" id="6287546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287550">if</span>&nbsp;<span class="op" id="6287553">!</span><span class="ident" id="6287554">ascii</span><span class="op" id="6287559">(</span><span class="ident" id="6287560">label</span><span class="op" id="6287565">)</span>&nbsp;<span class="op" id="6287567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6287572">a</span><span class="op" id="6287573">,</span>&nbsp;<span class="ident" id="6287575">err</span>&nbsp;<span class="op" id="6287579">:=</span>&nbsp;<span class="ident" id="6287582">encode</span><span class="op" id="6287588">(</span><span class="ident" id="6287589">acePrefix</span><span class="op" id="6287598">,</span>&nbsp;<span class="ident" id="6287600">label</span><span class="op" id="6287605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287610">if</span>&nbsp;<span class="ident" id="6287613">err</span>&nbsp;<span class="op" id="6287617">!=</span>&nbsp;<span class="builtintype" id="6287620">nil</span>&nbsp;<span class="op" id="6287624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287630">return</span>&nbsp;<span class="string" id="6287637">&#34;&#34;</span><span class="op" id="6287639">,</span>&nbsp;<span class="ident" id="6287641">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6287653">labels</span><span class="op" id="6287659">[</span><span class="ident" id="6287660">i</span><span class="op" id="6287661">]</span>&nbsp;<span class="op" id="6287663">=</span>&nbsp;<span class="ident" id="6287665">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287672">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287675">return</span>&nbsp;<span class="ident" id="6287682">strings</span><span class="op" id="6287689">.</span><span class="ident" id="6287690">Join</span><span class="op" id="6287694">(</span><span class="ident" id="6287695">labels</span><span class="op" id="6287701">,</span>&nbsp;<span class="string" id="6287703">&#34;.&#34;</span><span class="op" id="6287706">)</span><span class="op" id="6287707">,</span>&nbsp;<span class="builtintype" id="6287709">nil</span><br>
<span class="lineno">150</span><span class="op" id="6287713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6287716">func</span>&nbsp;<span class="ident" id="6287721">ascii</span><span class="op" id="6287726">(</span><span class="ident" id="6287727">s</span>&nbsp;<span class="builtintype" id="6287729">string</span><span class="op" id="6287735">)</span>&nbsp;<span class="builtintype" id="6287737">bool</span>&nbsp;<span class="op" id="6287742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287745">for</span>&nbsp;<span class="ident" id="6287749">i</span>&nbsp;<span class="op" id="6287751">:=</span>&nbsp;<span class="num" id="6287754">0</span><span class="op" id="6287755">;</span>&nbsp;<span class="ident" id="6287757">i</span>&nbsp;<span class="op" id="6287759">&lt;</span>&nbsp;<span class="builtinfunc" id="6287761">len</span><span class="op" id="6287764">(</span><span class="ident" id="6287765">s</span><span class="op" id="6287766">)</span><span class="op" id="6287767">;</span>&nbsp;<span class="ident" id="6287769">i</span><span class="op" id="6287770">++</span>&nbsp;<span class="op" id="6287773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287777">if</span>&nbsp;<span class="ident" id="6287780">s</span><span class="op" id="6287781">[</span><span class="ident" id="6287782">i</span><span class="op" id="6287783">]</span>&nbsp;<span class="op" id="6287785">&gt;=</span>&nbsp;<span class="ident" id="6287788">utf8</span><span class="op" id="6287792">.</span><span class="ident" id="6287793">RuneSelf</span>&nbsp;<span class="op" id="6287802">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287807">return</span>&nbsp;<span class="builtintype" id="6287814">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6287825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6287828">return</span>&nbsp;<span class="builtintype" id="6287835">true</span><br>
<span class="lineno"></span><span class="op" id="6287840">}</span>
</div>
</body>
</html>
