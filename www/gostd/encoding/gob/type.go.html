<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html" class="current">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5407717">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5407772">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5407826">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5407877">package</span>&nbsp;<span class="ident" id="5407885">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5407890">import</span>&nbsp;<span class="op" id="5407897">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407900">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407912">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407922">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407929">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407935">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407946">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407954">&#34;sync/atomic&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407969">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5407980">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5407995">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5407998">//&nbsp;userTypeInfo&nbsp;stores&nbsp;the&nbsp;information&nbsp;associated&nbsp;with&nbsp;a&nbsp;type&nbsp;the&nbsp;user&nbsp;has&nbsp;handed</span><br>
<span class="lineno">20</span><span class="comment" id="5408080">//&nbsp;to&nbsp;the&nbsp;package.&nbsp;&nbsp;It&#39;s&nbsp;computed&nbsp;once&nbsp;and&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;keyed&nbsp;by&nbsp;reflection</span><br>
<span class="lineno"></span><span class="comment" id="5408159">//&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5408168">type</span>&nbsp;<span class="ident" id="5408173">userTypeInfo</span>&nbsp;<span class="keyword" id="5408186">struct</span>&nbsp;<span class="op" id="5408193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408196">user</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408208"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5408215">.</span><span class="ident" id="5408216"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span>&nbsp;<span class="comment" id="5408221">//&nbsp;the&nbsp;type&nbsp;the&nbsp;user&nbsp;handed&nbsp;us</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408253">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408265"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5408272">.</span><span class="ident" id="5408273"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span>&nbsp;<span class="comment" id="5408278">//&nbsp;the&nbsp;base&nbsp;type&nbsp;after&nbsp;all&nbsp;indirections</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408319">indir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5408331">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408344">//&nbsp;number&nbsp;of&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408394">externalEnc</span>&nbsp;<span class="builtintype" id="5408406">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408419">//&nbsp;xGob,&nbsp;xBinary,&nbsp;or&nbsp;xText</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408447">externalDec</span>&nbsp;<span class="builtintype" id="5408459">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408472">//&nbsp;xGob,&nbsp;xBinary&nbsp;or&nbsp;xText</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408499">encIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5408511">int8</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408524">//&nbsp;number&nbsp;of&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;receiver&nbsp;type;&nbsp;may&nbsp;be&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408595">decIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5408607">int8</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408620">//&nbsp;number&nbsp;of&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;receiver&nbsp;type;&nbsp;may&nbsp;be&nbsp;negative</span><br>
<span class="lineno">30</span><span class="op" id="5408690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5408693">//&nbsp;externalEncoding&nbsp;bits</span><br>
<span class="lineno"></span><span class="keyword" id="5408718">const</span>&nbsp;<span class="op" id="5408724">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408727">xGob</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5408735">=</span>&nbsp;<span class="num" id="5408737">1</span>&nbsp;<span class="op" id="5408739">+</span>&nbsp;<span class="ident" id="5408741">iota</span>&nbsp;<span class="comment" id="5408746">//&nbsp;GobEncoder&nbsp;or&nbsp;GobDecoder</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408775">xBinary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408794">//&nbsp;encoding.BinaryMarshaler&nbsp;or&nbsp;encoding.BinaryUnmarshaler</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5408853">xText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408872">//&nbsp;encoding.TextMarshaler&nbsp;or&nbsp;encoding.TextUnmarshaler</span><br>
<span class="lineno"></span><span class="op" id="5408926">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5408929">var</span>&nbsp;<span class="op" id="5408933">(</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408936">//&nbsp;Protected&nbsp;by&nbsp;an&nbsp;RWMutex&nbsp;because&nbsp;we&nbsp;read&nbsp;it&nbsp;a&nbsp;lot&nbsp;and&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5408999">//&nbsp;it&nbsp;only&nbsp;when&nbsp;we&nbsp;see&nbsp;a&nbsp;new&nbsp;type,&nbsp;typically&nbsp;when&nbsp;compiling.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409061">userTypeLock</span>&nbsp;&nbsp;<span class="ident" id="5409075"><a href="/gostd/encoding/gob/type.go.html#5407946">sync</a></span><span class="op" id="5409079">.</span><span class="ident" id="5409080"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409089">userTypeCache</span>&nbsp;<span class="op" id="5409103">=</span>&nbsp;<span class="builtinfunc" id="5409105">make</span><span class="op" id="5409109">(</span><span class="keyword" id="5409110">map</span><span class="op" id="5409113">[</span><span class="ident" id="5409114"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5409121">.</span><span class="ident" id="5409122"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5409126">]</span><span class="op" id="5409127">*</span><span class="ident" id="5409128"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5409140">)</span><br>
<span class="lineno"></span><span class="op" id="5409142">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="5409145">//&nbsp;validType&nbsp;returns,&nbsp;and&nbsp;saves,&nbsp;the&nbsp;information&nbsp;associated&nbsp;with&nbsp;user-provided&nbsp;type&nbsp;rt.</span><br>
<span class="lineno"></span><span class="comment" id="5409233">//&nbsp;If&nbsp;the&nbsp;user&nbsp;type&nbsp;is&nbsp;not&nbsp;valid,&nbsp;err&nbsp;will&nbsp;be&nbsp;non-nil.&nbsp;&nbsp;To&nbsp;be&nbsp;used&nbsp;when&nbsp;the&nbsp;error&nbsp;handler</span><br>
<span class="lineno"></span><span class="comment" id="5409323">//&nbsp;is&nbsp;not&nbsp;set&nbsp;up.</span><br>
<span class="lineno"></span><span class="keyword" id="5409341">func</span>&nbsp;<span class="ident" id="5409346">validUserType</span><span class="op" id="5409359">(</span><span class="ident" id="5409360">rt</span>&nbsp;<span class="ident" id="5409363"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5409370">.</span><span class="ident" id="5409371"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5409375">)</span>&nbsp;<span class="op" id="5409377">(</span><span class="ident" id="5409378">ut</span>&nbsp;<span class="op" id="5409381">*</span><span class="ident" id="5409382"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5409394">,</span>&nbsp;<span class="ident" id="5409396">err</span>&nbsp;<span class="builtintype" id="5409400">error</span><span class="op" id="5409405">)</span>&nbsp;<span class="op" id="5409407">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409410"><a href="/gostd/encoding/gob/type.go.html#5409061">userTypeLock</a></span><span class="op" id="5409422">.</span><span class="ident" id="5409423"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="5409428">(</span><span class="op" id="5409429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409432"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span>&nbsp;<span class="op" id="5409435">=</span>&nbsp;<span class="ident" id="5409437"><a href="/gostd/encoding/gob/type.go.html#5409089">userTypeCache</a></span><span class="op" id="5409450">[</span><span class="ident" id="5409451"><a href="/gostd/encoding/gob/type.go.html#5409360">rt</a></span><span class="op" id="5409453">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409456"><a href="/gostd/encoding/gob/type.go.html#5409061">userTypeLock</a></span><span class="op" id="5409468">.</span><span class="ident" id="5409469"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="5409476">(</span><span class="op" id="5409477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5409480">if</span>&nbsp;<span class="ident" id="5409483"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span>&nbsp;<span class="op" id="5409486">!=</span>&nbsp;<span class="builtintype" id="5409489">nil</span>&nbsp;<span class="op" id="5409493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5409497">return</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5409505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409508">//&nbsp;Now&nbsp;set&nbsp;the&nbsp;value&nbsp;under&nbsp;the&nbsp;write&nbsp;lock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409552"><a href="/gostd/encoding/gob/type.go.html#5409061">userTypeLock</a></span><span class="op" id="5409564">.</span><span class="ident" id="5409565"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="5409569">(</span><span class="op" id="5409570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5409573">defer</span>&nbsp;<span class="ident" id="5409579"><a href="/gostd/encoding/gob/type.go.html#5409061">userTypeLock</a></span><span class="op" id="5409591">.</span><span class="ident" id="5409592"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="5409598">(</span><span class="op" id="5409599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5409602">if</span>&nbsp;<span class="ident" id="5409605"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span>&nbsp;<span class="op" id="5409608">=</span>&nbsp;<span class="ident" id="5409610"><a href="/gostd/encoding/gob/type.go.html#5409089">userTypeCache</a></span><span class="op" id="5409623">[</span><span class="ident" id="5409624"><a href="/gostd/encoding/gob/type.go.html#5409360">rt</a></span><span class="op" id="5409626">]</span><span class="op" id="5409627">;</span>&nbsp;<span class="ident" id="5409629"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span>&nbsp;<span class="op" id="5409632">!=</span>&nbsp;<span class="builtintype" id="5409635">nil</span>&nbsp;<span class="op" id="5409639">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409643">//&nbsp;Lost&nbsp;the&nbsp;race;&nbsp;not&nbsp;a&nbsp;problem.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5409678">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5409686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409689"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span>&nbsp;<span class="op" id="5409692">=</span>&nbsp;<span class="builtinfunc" id="5409694">new</span><span class="op" id="5409697">(</span><span class="ident" id="5409698"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5409710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409713"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5409715">.</span><span class="ident" id="5409716"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span>&nbsp;<span class="op" id="5409721">=</span>&nbsp;<span class="ident" id="5409723"><a href="/gostd/encoding/gob/type.go.html#5409360">rt</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5409727"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5409729">.</span><span class="ident" id="5409730"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span>&nbsp;<span class="op" id="5409735">=</span>&nbsp;<span class="ident" id="5409737"><a href="/gostd/encoding/gob/type.go.html#5409360">rt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409741">//&nbsp;A&nbsp;type&nbsp;that&nbsp;is&nbsp;just&nbsp;a&nbsp;cycle&nbsp;of&nbsp;pointers&nbsp;(such&nbsp;as&nbsp;type&nbsp;T&nbsp;*T)&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409812">//&nbsp;be&nbsp;represented&nbsp;in&nbsp;gobs,&nbsp;which&nbsp;need&nbsp;some&nbsp;concrete&nbsp;data.&nbsp;&nbsp;We&nbsp;use&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409881">//&nbsp;cycle&nbsp;detection&nbsp;algorithm&nbsp;from&nbsp;Knuth,&nbsp;Vol&nbsp;2,&nbsp;Section&nbsp;3.1,&nbsp;Ex&nbsp;6,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5409949">//&nbsp;pp&nbsp;539-540.&nbsp;&nbsp;As&nbsp;we&nbsp;step&nbsp;through&nbsp;indirections,&nbsp;run&nbsp;another&nbsp;type&nbsp;at</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410019">//&nbsp;half&nbsp;speed.&nbsp;If&nbsp;they&nbsp;meet&nbsp;up,&nbsp;there&#39;s&nbsp;a&nbsp;cycle.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410069">slowpoke</span>&nbsp;<span class="op" id="5410078">:=</span>&nbsp;<span class="ident" id="5410081"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410083">.</span><span class="ident" id="5410084"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span>&nbsp;<span class="comment" id="5410089">//&nbsp;walks&nbsp;half&nbsp;as&nbsp;fast&nbsp;as&nbsp;ut.base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410123">for</span>&nbsp;<span class="op" id="5410127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410131">pt</span>&nbsp;<span class="op" id="5410134">:=</span>&nbsp;<span class="ident" id="5410137"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410139">.</span><span class="ident" id="5410140"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410147">if</span>&nbsp;<span class="ident" id="5410150"><a href="/gostd/encoding/gob/type.go.html#5410131">pt</a></span><span class="op" id="5410152">.</span><span class="ident" id="5410153"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5410157">(</span><span class="op" id="5410158">)</span>&nbsp;<span class="op" id="5410160">!=</span>&nbsp;<span class="ident" id="5410163"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5410170">.</span><span class="ident" id="5410171"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5410175">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410180">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410192"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410194">.</span><span class="ident" id="5410195"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span>&nbsp;<span class="op" id="5410200">=</span>&nbsp;<span class="ident" id="5410202"><a href="/gostd/encoding/gob/type.go.html#5410131">pt</a></span><span class="op" id="5410204">.</span><span class="ident" id="5410205"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5410209">(</span><span class="op" id="5410210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410214">if</span>&nbsp;<span class="ident" id="5410217"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410219">.</span><span class="ident" id="5410220"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span>&nbsp;<span class="op" id="5410225">==</span>&nbsp;<span class="ident" id="5410228"><a href="/gostd/encoding/gob/type.go.html#5410069">slowpoke</a></span>&nbsp;<span class="op" id="5410237">{</span>&nbsp;<span class="comment" id="5410239">//&nbsp;ut.base&nbsp;lapped&nbsp;slowpoke</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410269">//&nbsp;recursive&nbsp;pointer&nbsp;type.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410299">return</span>&nbsp;<span class="builtintype" id="5410306">nil</span><span class="op" id="5410309">,</span>&nbsp;<span class="ident" id="5410311"><a href="/gostd/encoding/gob/type.go.html#5407912">errors</a></span><span class="op" id="5410317">.</span><span class="ident" id="5410318"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5410321">(</span><span class="string" id="5410322">&#34;can&#39;t&nbsp;represent&nbsp;recursive&nbsp;pointer&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="5410364">+</span>&nbsp;<span class="ident" id="5410366"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410368">.</span><span class="ident" id="5410369"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5410373">.</span><span class="ident" id="5410374"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5410380">(</span><span class="op" id="5410381">)</span><span class="op" id="5410382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410390">if</span>&nbsp;<span class="ident" id="5410393"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410395">.</span><span class="ident" id="5410396"><a href="/gostd/encoding/gob/type.go.html#5408319">indir</a></span><span class="op" id="5410401">%</span><span class="num" id="5410402">2</span>&nbsp;<span class="op" id="5410404">==</span>&nbsp;<span class="num" id="5410407">0</span>&nbsp;<span class="op" id="5410409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410414"><a href="/gostd/encoding/gob/type.go.html#5410069">slowpoke</a></span>&nbsp;<span class="op" id="5410423">=</span>&nbsp;<span class="ident" id="5410425"><a href="/gostd/encoding/gob/type.go.html#5410069">slowpoke</a></span><span class="op" id="5410433">.</span><span class="ident" id="5410434"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5410438">(</span><span class="op" id="5410439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410443">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410447"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410449">.</span><span class="ident" id="5410450"><a href="/gostd/encoding/gob/type.go.html#5408319">indir</a></span><span class="op" id="5410455">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5410463">if</span>&nbsp;<span class="ident" id="5410466">ok</span><span class="op" id="5410468">,</span>&nbsp;<span class="ident" id="5410470">indir</span>&nbsp;<span class="op" id="5410476">:=</span>&nbsp;<span class="ident" id="5410479"><a href="/gostd/encoding/gob/type.go.html#5412194">implementsInterface</a></span><span class="op" id="5410498">(</span><span class="ident" id="5410499"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410501">.</span><span class="ident" id="5410502"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5410506">,</span>&nbsp;<span class="ident" id="5410508"><a href="/gostd/encoding/gob/type.go.html#5411488">gobEncoderInterfaceType</a></span><span class="op" id="5410531">)</span><span class="op" id="5410532">;</span>&nbsp;<span class="ident" id="5410534"><a href="/gostd/encoding/gob/type.go.html#5410466">ok</a></span>&nbsp;<span class="op" id="5410537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410541"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410543">.</span><span class="ident" id="5410544"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span><span class="op" id="5410555">,</span>&nbsp;<span class="ident" id="5410557"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410559">.</span><span class="ident" id="5410560"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span>&nbsp;<span class="op" id="5410569">=</span>&nbsp;<span class="ident" id="5410571"><a href="/gostd/encoding/gob/type.go.html#5408727">xGob</a></span><span class="op" id="5410575">,</span>&nbsp;<span class="ident" id="5410577"><a href="/gostd/encoding/gob/type.go.html#5410470">indir</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410584">}</span>&nbsp;<span class="keyword" id="5410586">else</span>&nbsp;<span class="keyword" id="5410591">if</span>&nbsp;<span class="ident" id="5410594">ok</span><span class="op" id="5410596">,</span>&nbsp;<span class="ident" id="5410598">indir</span>&nbsp;<span class="op" id="5410604">:=</span>&nbsp;<span class="ident" id="5410607"><a href="/gostd/encoding/gob/type.go.html#5412194">implementsInterface</a></span><span class="op" id="5410626">(</span><span class="ident" id="5410627"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410629">.</span><span class="ident" id="5410630"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5410634">,</span>&nbsp;<span class="ident" id="5410636"><a href="/gostd/encoding/gob/type.go.html#5411640">binaryMarshalerInterfaceType</a></span><span class="op" id="5410664">)</span><span class="op" id="5410665">;</span>&nbsp;<span class="ident" id="5410667"><a href="/gostd/encoding/gob/type.go.html#5410594">ok</a></span>&nbsp;<span class="op" id="5410670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5410674"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410676">.</span><span class="ident" id="5410677"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span><span class="op" id="5410688">,</span>&nbsp;<span class="ident" id="5410690"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5410692">.</span><span class="ident" id="5410693"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span>&nbsp;<span class="op" id="5410702">=</span>&nbsp;<span class="ident" id="5410704"><a href="/gostd/encoding/gob/type.go.html#5408775">xBinary</a></span><span class="op" id="5410711">,</span>&nbsp;<span class="ident" id="5410713"><a href="/gostd/encoding/gob/type.go.html#5410598">indir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5410720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410724">//&nbsp;NOTE(rsc):&nbsp;Would&nbsp;like&nbsp;to&nbsp;allow&nbsp;MarshalText&nbsp;here,&nbsp;but&nbsp;results&nbsp;in&nbsp;incompatibility</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410808">//&nbsp;with&nbsp;older&nbsp;encodings&nbsp;for&nbsp;net.IP.&nbsp;See&nbsp;golang.org/issue/6760.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410872">//&nbsp;}&nbsp;else&nbsp;if&nbsp;ok,&nbsp;indir&nbsp;:=&nbsp;implementsInterface(ut.user,&nbsp;textMarshalerInterfaceType);&nbsp;ok&nbsp;{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5410962">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ut.externalEnc,&nbsp;ut.encIndir&nbsp;=&nbsp;xText,&nbsp;indir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411010">//&nbsp;}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411017">if</span>&nbsp;<span class="ident" id="5411020">ok</span><span class="op" id="5411022">,</span>&nbsp;<span class="ident" id="5411024">indir</span>&nbsp;<span class="op" id="5411030">:=</span>&nbsp;<span class="ident" id="5411033"><a href="/gostd/encoding/gob/type.go.html#5412194">implementsInterface</a></span><span class="op" id="5411052">(</span><span class="ident" id="5411053"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411055">.</span><span class="ident" id="5411056"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5411060">,</span>&nbsp;<span class="ident" id="5411062"><a href="/gostd/encoding/gob/type.go.html#5411564">gobDecoderInterfaceType</a></span><span class="op" id="5411085">)</span><span class="op" id="5411086">;</span>&nbsp;<span class="ident" id="5411088"><a href="/gostd/encoding/gob/type.go.html#5411020">ok</a></span>&nbsp;<span class="op" id="5411091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411095"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411097">.</span><span class="ident" id="5411098"><a href="/gostd/encoding/gob/type.go.html#5408447">externalDec</a></span><span class="op" id="5411109">,</span>&nbsp;<span class="ident" id="5411111"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411113">.</span><span class="ident" id="5411114"><a href="/gostd/encoding/gob/type.go.html#5408595">decIndir</a></span>&nbsp;<span class="op" id="5411123">=</span>&nbsp;<span class="ident" id="5411125"><a href="/gostd/encoding/gob/type.go.html#5408727">xGob</a></span><span class="op" id="5411129">,</span>&nbsp;<span class="ident" id="5411131"><a href="/gostd/encoding/gob/type.go.html#5411024">indir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411138">}</span>&nbsp;<span class="keyword" id="5411140">else</span>&nbsp;<span class="keyword" id="5411145">if</span>&nbsp;<span class="ident" id="5411148">ok</span><span class="op" id="5411150">,</span>&nbsp;<span class="ident" id="5411152">indir</span>&nbsp;<span class="op" id="5411158">:=</span>&nbsp;<span class="ident" id="5411161"><a href="/gostd/encoding/gob/type.go.html#5412194">implementsInterface</a></span><span class="op" id="5411180">(</span><span class="ident" id="5411181"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411183">.</span><span class="ident" id="5411184"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5411188">,</span>&nbsp;<span class="ident" id="5411190"><a href="/gostd/encoding/gob/type.go.html#5411730">binaryUnmarshalerInterfaceType</a></span><span class="op" id="5411220">)</span><span class="op" id="5411221">;</span>&nbsp;<span class="ident" id="5411223"><a href="/gostd/encoding/gob/type.go.html#5411148">ok</a></span>&nbsp;<span class="op" id="5411226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411230"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411232">.</span><span class="ident" id="5411233"><a href="/gostd/encoding/gob/type.go.html#5408447">externalDec</a></span><span class="op" id="5411244">,</span>&nbsp;<span class="ident" id="5411246"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><span class="op" id="5411248">.</span><span class="ident" id="5411249"><a href="/gostd/encoding/gob/type.go.html#5408595">decIndir</a></span>&nbsp;<span class="op" id="5411258">=</span>&nbsp;<span class="ident" id="5411260"><a href="/gostd/encoding/gob/type.go.html#5408775">xBinary</a></span><span class="op" id="5411267">,</span>&nbsp;<span class="ident" id="5411269"><a href="/gostd/encoding/gob/type.go.html#5411152">indir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411276">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411280">//&nbsp;See&nbsp;note&nbsp;above.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411300">//&nbsp;}&nbsp;else&nbsp;if&nbsp;ok,&nbsp;indir&nbsp;:=&nbsp;implementsInterface(ut.user,&nbsp;textUnmarshalerInterfaceType);&nbsp;ok&nbsp;{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411392">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ut.externalDec,&nbsp;ut.decIndir&nbsp;=&nbsp;xText,&nbsp;indir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5411440">//&nbsp;}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411447"><a href="/gostd/encoding/gob/type.go.html#5409089">userTypeCache</a></span><span class="op" id="5411460">[</span><span class="ident" id="5411461"><a href="/gostd/encoding/gob/type.go.html#5409360">rt</a></span><span class="op" id="5411463">]</span>&nbsp;<span class="op" id="5411465">=</span>&nbsp;<span class="ident" id="5411467"><a href="/gostd/encoding/gob/type.go.html#5409378">ut</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5411471">return</span><br>
<span class="lineno"></span><span class="op" id="5411478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="5411481">var</span>&nbsp;<span class="op" id="5411485">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411488">gobEncoderInterfaceType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411519">=</span>&nbsp;<span class="ident" id="5411521"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411528">.</span><span class="ident" id="5411529"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411535">(</span><span class="op" id="5411536">(</span><span class="op" id="5411537">*</span><span class="ident" id="5411538"><a href="/gostd/encoding/gob/type.go.html#5431074">GobEncoder</a></span><span class="op" id="5411548">)</span><span class="op" id="5411549">(</span><span class="builtintype" id="5411550">nil</span><span class="op" id="5411553">)</span><span class="op" id="5411554">)</span><span class="op" id="5411555">.</span><span class="ident" id="5411556"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411560">(</span><span class="op" id="5411561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411564">gobDecoderInterfaceType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411595">=</span>&nbsp;<span class="ident" id="5411597"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411604">.</span><span class="ident" id="5411605"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411611">(</span><span class="op" id="5411612">(</span><span class="op" id="5411613">*</span><span class="ident" id="5411614"><a href="/gostd/encoding/gob/type.go.html#5431422">GobDecoder</a></span><span class="op" id="5411624">)</span><span class="op" id="5411625">(</span><span class="builtintype" id="5411626">nil</span><span class="op" id="5411629">)</span><span class="op" id="5411630">)</span><span class="op" id="5411631">.</span><span class="ident" id="5411632"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411636">(</span><span class="op" id="5411637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411640">binaryMarshalerInterfaceType</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5411671">=</span>&nbsp;<span class="ident" id="5411673"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411680">.</span><span class="ident" id="5411681"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411687">(</span><span class="op" id="5411688">(</span><span class="op" id="5411689">*</span><span class="ident" id="5411690"><a href="/gostd/encoding/gob/type.go.html#5407900">encoding</a></span><span class="op" id="5411698">.</span><span class="ident" id="5411699"><a href="/gostd/encoding/encoding.go.html#4050692">BinaryMarshaler</a></span><span class="op" id="5411714">)</span><span class="op" id="5411715">(</span><span class="builtintype" id="5411716">nil</span><span class="op" id="5411719">)</span><span class="op" id="5411720">)</span><span class="op" id="5411721">.</span><span class="ident" id="5411722"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411726">(</span><span class="op" id="5411727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411730">binaryUnmarshalerInterfaceType</span>&nbsp;<span class="op" id="5411761">=</span>&nbsp;<span class="ident" id="5411763"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411770">.</span><span class="ident" id="5411771"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411777">(</span><span class="op" id="5411778">(</span><span class="op" id="5411779">*</span><span class="ident" id="5411780"><a href="/gostd/encoding/gob/type.go.html#5407900">encoding</a></span><span class="op" id="5411788">.</span><span class="ident" id="5411789"><a href="/gostd/encoding/encoding.go.html#4051062">BinaryUnmarshaler</a></span><span class="op" id="5411806">)</span><span class="op" id="5411807">(</span><span class="builtintype" id="5411808">nil</span><span class="op" id="5411811">)</span><span class="op" id="5411812">)</span><span class="op" id="5411813">.</span><span class="ident" id="5411814"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411818">(</span><span class="op" id="5411819">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411822">textMarshalerInterfaceType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5411853">=</span>&nbsp;<span class="ident" id="5411855"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411862">.</span><span class="ident" id="5411863"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411869">(</span><span class="op" id="5411870">(</span><span class="op" id="5411871">*</span><span class="ident" id="5411872"><a href="/gostd/encoding/gob/type.go.html#5407900">encoding</a></span><span class="op" id="5411880">.</span><span class="ident" id="5411881"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="5411894">)</span><span class="op" id="5411895">(</span><span class="builtintype" id="5411896">nil</span><span class="op" id="5411899">)</span><span class="op" id="5411900">)</span><span class="op" id="5411901">.</span><span class="ident" id="5411902"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411906">(</span><span class="op" id="5411907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5411910">textUnmarshalerInterfaceType</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5411941">=</span>&nbsp;<span class="ident" id="5411943"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5411950">.</span><span class="ident" id="5411951"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5411957">(</span><span class="op" id="5411958">(</span><span class="op" id="5411959">*</span><span class="ident" id="5411960"><a href="/gostd/encoding/gob/type.go.html#5407900">encoding</a></span><span class="op" id="5411968">.</span><span class="ident" id="5411969"><a href="/gostd/encoding/encoding.go.html#4051689">TextUnmarshaler</a></span><span class="op" id="5411984">)</span><span class="op" id="5411985">(</span><span class="builtintype" id="5411986">nil</span><span class="op" id="5411989">)</span><span class="op" id="5411990">)</span><span class="op" id="5411991">.</span><span class="ident" id="5411992"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5411996">(</span><span class="op" id="5411997">)</span><br>
<span class="lineno"></span><span class="op" id="5411999">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412002">//&nbsp;implementsInterface&nbsp;reports&nbsp;whether&nbsp;the&nbsp;type&nbsp;implements&nbsp;the</span><br>
<span class="lineno">125</span><span class="comment" id="5412065">//&nbsp;gobEncoder/gobDecoder&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="5412101">//&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;indirections&nbsp;required&nbsp;to&nbsp;get&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5412170">//&nbsp;implementation.</span><br>
<span class="lineno"></span><span class="keyword" id="5412189">func</span>&nbsp;<span class="ident" id="5412194">implementsInterface</span><span class="op" id="5412213">(</span><span class="ident" id="5412214">typ</span><span class="op" id="5412217">,</span>&nbsp;<span class="ident" id="5412219">gobEncDecType</span>&nbsp;<span class="ident" id="5412233"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5412240">.</span><span class="ident" id="5412241"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5412245">)</span>&nbsp;<span class="op" id="5412247">(</span><span class="ident" id="5412248">success</span>&nbsp;<span class="builtintype" id="5412256">bool</span><span class="op" id="5412260">,</span>&nbsp;<span class="ident" id="5412262">indir</span>&nbsp;<span class="builtintype" id="5412268">int8</span><span class="op" id="5412272">)</span>&nbsp;<span class="op" id="5412274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412277">if</span>&nbsp;<span class="ident" id="5412280"><a href="/gostd/encoding/gob/type.go.html#5412214">typ</a></span>&nbsp;<span class="op" id="5412284">==</span>&nbsp;<span class="builtintype" id="5412287">nil</span>&nbsp;<span class="op" id="5412291">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412295">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412306">rt</span>&nbsp;<span class="op" id="5412309">:=</span>&nbsp;<span class="ident" id="5412312"><a href="/gostd/encoding/gob/type.go.html#5412214">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5412317">//&nbsp;The&nbsp;type&nbsp;might&nbsp;be&nbsp;a&nbsp;pointer&nbsp;and&nbsp;we&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5412369">//&nbsp;dereferencing&nbsp;to&nbsp;the&nbsp;base&nbsp;type&nbsp;until&nbsp;we&nbsp;find&nbsp;an&nbsp;implementation.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412437">for</span>&nbsp;<span class="op" id="5412441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412445">if</span>&nbsp;<span class="ident" id="5412448"><a href="/gostd/encoding/gob/type.go.html#5412306">rt</a></span><span class="op" id="5412450">.</span><span class="ident" id="5412451"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="5412461">(</span><span class="ident" id="5412462"><a href="/gostd/encoding/gob/type.go.html#5412219">gobEncDecType</a></span><span class="op" id="5412475">)</span>&nbsp;<span class="op" id="5412477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412482">return</span>&nbsp;<span class="builtintype" id="5412489">true</span><span class="op" id="5412493">,</span>&nbsp;<span class="ident" id="5412495"><a href="/gostd/encoding/gob/type.go.html#5412262">indir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412507">if</span>&nbsp;<span class="ident" id="5412510">p</span>&nbsp;<span class="op" id="5412512">:=</span>&nbsp;<span class="ident" id="5412515"><a href="/gostd/encoding/gob/type.go.html#5412306">rt</a></span><span class="op" id="5412517">;</span>&nbsp;<span class="ident" id="5412519"><a href="/gostd/encoding/gob/type.go.html#5412510">p</a></span><span class="op" id="5412520">.</span><span class="ident" id="5412521"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5412525">(</span><span class="op" id="5412526">)</span>&nbsp;<span class="op" id="5412528">==</span>&nbsp;<span class="ident" id="5412531"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5412538">.</span><span class="ident" id="5412539"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5412543">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412548"><a href="/gostd/encoding/gob/type.go.html#5412262">indir</a></span><span class="op" id="5412553">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412559">if</span>&nbsp;<span class="ident" id="5412562"><a href="/gostd/encoding/gob/type.go.html#5412262">indir</a></span>&nbsp;<span class="op" id="5412568">&gt;</span>&nbsp;<span class="num" id="5412570">100</span>&nbsp;<span class="op" id="5412574">{</span>&nbsp;<span class="comment" id="5412576">//&nbsp;insane&nbsp;number&nbsp;of&nbsp;indirections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412613">return</span>&nbsp;<span class="builtintype" id="5412620">false</span><span class="op" id="5412625">,</span>&nbsp;<span class="num" id="5412627">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5412637"><a href="/gostd/encoding/gob/type.go.html#5412306">rt</a></span>&nbsp;<span class="op" id="5412640">=</span>&nbsp;<span class="ident" id="5412642"><a href="/gostd/encoding/gob/type.go.html#5412510">p</a></span><span class="op" id="5412643">.</span><span class="ident" id="5412644"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5412648">(</span><span class="op" id="5412649">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412654">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412669">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5412679">//&nbsp;No&nbsp;luck&nbsp;yet,&nbsp;but&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;base&nbsp;type&nbsp;(non-pointer),&nbsp;the&nbsp;pointer&nbsp;might&nbsp;satisfy.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412765">if</span>&nbsp;<span class="ident" id="5412768"><a href="/gostd/encoding/gob/type.go.html#5412214">typ</a></span><span class="op" id="5412771">.</span><span class="ident" id="5412772"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5412776">(</span><span class="op" id="5412777">)</span>&nbsp;<span class="op" id="5412779">!=</span>&nbsp;<span class="ident" id="5412782"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5412789">.</span><span class="ident" id="5412790"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5412794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5412798">//&nbsp;Not&nbsp;a&nbsp;pointer,&nbsp;but&nbsp;does&nbsp;the&nbsp;pointer&nbsp;work?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412845">if</span>&nbsp;<span class="ident" id="5412848"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5412855">.</span><span class="ident" id="5412856"><a href="/gostd/reflect/type.go.html#2809042">PtrTo</a></span><span class="op" id="5412861">(</span><span class="ident" id="5412862"><a href="/gostd/encoding/gob/type.go.html#5412214">typ</a></span><span class="op" id="5412865">)</span><span class="op" id="5412866">.</span><span class="ident" id="5412867"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="5412877">(</span><span class="ident" id="5412878"><a href="/gostd/encoding/gob/type.go.html#5412219">gobEncDecType</a></span><span class="op" id="5412891">)</span>&nbsp;<span class="op" id="5412893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412898">return</span>&nbsp;<span class="builtintype" id="5412905">true</span><span class="op" id="5412909">,</span>&nbsp;<span class="op" id="5412911">-</span><span class="num" id="5412912">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412916">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5412919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5412922">return</span>&nbsp;<span class="builtintype" id="5412929">false</span><span class="op" id="5412934">,</span>&nbsp;<span class="num" id="5412936">0</span><br>
<span class="lineno"></span><span class="op" id="5412938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5412941">//&nbsp;userType&nbsp;returns,&nbsp;and&nbsp;saves,&nbsp;the&nbsp;information&nbsp;associated&nbsp;with&nbsp;user-provided&nbsp;type&nbsp;rt.</span><br>
<span class="lineno">160</span><span class="comment" id="5413028">//&nbsp;If&nbsp;the&nbsp;user&nbsp;type&nbsp;is&nbsp;not&nbsp;valid,&nbsp;it&nbsp;calls&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5413078">func</span>&nbsp;<span class="ident" id="5413083">userType</span><span class="op" id="5413091">(</span><span class="ident" id="5413092">rt</span>&nbsp;<span class="ident" id="5413095"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5413102">.</span><span class="ident" id="5413103"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5413107">)</span>&nbsp;<span class="op" id="5413109">*</span><span class="ident" id="5413110"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span>&nbsp;<span class="op" id="5413123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413126">ut</span><span class="op" id="5413128">,</span>&nbsp;<span class="ident" id="5413130">err</span>&nbsp;<span class="op" id="5413134">:=</span>&nbsp;<span class="ident" id="5413137"><a href="/gostd/encoding/gob/type.go.html#5409346">validUserType</a></span><span class="op" id="5413150">(</span><span class="ident" id="5413151"><a href="/gostd/encoding/gob/type.go.html#5413092">rt</a></span><span class="op" id="5413153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5413156">if</span>&nbsp;<span class="ident" id="5413159"><a href="/gostd/encoding/gob/type.go.html#5413130">err</a></span>&nbsp;<span class="op" id="5413163">!=</span>&nbsp;<span class="builtintype" id="5413166">nil</span>&nbsp;<span class="op" id="5413170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413174"><a href="/gostd/encoding/gob/error.go.html#5407351">error_</a></span><span class="op" id="5413180">(</span><span class="ident" id="5413181"><a href="/gostd/encoding/gob/type.go.html#5413130">err</a></span><span class="op" id="5413184">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5413187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5413190">return</span>&nbsp;<span class="ident" id="5413197"><a href="/gostd/encoding/gob/type.go.html#5413126">ut</a></span><br>
<span class="lineno"></span><span class="op" id="5413200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5413203">//&nbsp;A&nbsp;typeId&nbsp;represents&nbsp;a&nbsp;gob&nbsp;Type&nbsp;as&nbsp;an&nbsp;integer&nbsp;that&nbsp;can&nbsp;be&nbsp;passed&nbsp;on&nbsp;the&nbsp;wire.</span><br>
<span class="lineno">170</span><span class="comment" id="5413283">//&nbsp;Internally,&nbsp;typeIds&nbsp;are&nbsp;used&nbsp;as&nbsp;keys&nbsp;to&nbsp;a&nbsp;map&nbsp;to&nbsp;recover&nbsp;the&nbsp;underlying&nbsp;type&nbsp;info.</span><br>
<span class="lineno"></span><span class="keyword" id="5413369">type</span>&nbsp;<span class="ident" id="5413374">typeId</span>&nbsp;<span class="builtintype" id="5413381">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413388">var</span>&nbsp;<span class="ident" id="5413392">nextId</span>&nbsp;<span class="ident" id="5413399"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5413412">//&nbsp;incremented&nbsp;for&nbsp;each&nbsp;new&nbsp;type&nbsp;we&nbsp;build</span><br>
<span class="lineno"></span><span class="keyword" id="5413454">var</span>&nbsp;<span class="ident" id="5413458">typeLock</span>&nbsp;<span class="ident" id="5413467"><a href="/gostd/encoding/gob/type.go.html#5407946">sync</a></span><span class="op" id="5413471">.</span><span class="ident" id="5413472"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;<span class="comment" id="5413478">//&nbsp;set&nbsp;while&nbsp;building&nbsp;a&nbsp;type</span><br>
<span class="lineno">175</span><span class="keyword" id="5413507">const</span>&nbsp;<span class="ident" id="5413513">firstUserId</span>&nbsp;<span class="op" id="5413525">=</span>&nbsp;<span class="num" id="5413527">64</span>&nbsp;&nbsp;<span class="comment" id="5413531">//&nbsp;lowest&nbsp;id&nbsp;number&nbsp;granted&nbsp;to&nbsp;user</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413568">type</span>&nbsp;<span class="ident" id="5413573">gobType</span>&nbsp;<span class="keyword" id="5413581">interface</span>&nbsp;<span class="op" id="5413591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413594">id</span><span class="op" id="5413596">(</span><span class="op" id="5413597">)</span>&nbsp;<span class="ident" id="5413599"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413607">setId</span><span class="op" id="5413612">(</span><span class="ident" id="5413613">id</span>&nbsp;<span class="ident" id="5413616"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5413622">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413625">name</span><span class="op" id="5413629">(</span><span class="op" id="5413630">)</span>&nbsp;<span class="builtintype" id="5413632">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5413640">string</span><span class="op" id="5413646">(</span><span class="op" id="5413647">)</span>&nbsp;<span class="builtintype" id="5413649">string</span>&nbsp;<span class="comment" id="5413656">//&nbsp;not&nbsp;public;&nbsp;only&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5413691">safeString</span><span class="op" id="5413701">(</span><span class="ident" id="5413702">seen</span>&nbsp;<span class="keyword" id="5413707">map</span><span class="op" id="5413710">[</span><span class="ident" id="5413711"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5413717">]</span><span class="builtintype" id="5413718">bool</span><span class="op" id="5413722">)</span>&nbsp;<span class="builtintype" id="5413724">string</span><br>
<span class="lineno"></span><span class="op" id="5413731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="5413734">var</span>&nbsp;<span class="ident" id="5413738">types</span>&nbsp;<span class="op" id="5413744">=</span>&nbsp;<span class="builtinfunc" id="5413746">make</span><span class="op" id="5413750">(</span><span class="keyword" id="5413751">map</span><span class="op" id="5413754">[</span><span class="ident" id="5413755"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5413762">.</span><span class="ident" id="5413763"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5413767">]</span><span class="ident" id="5413768"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5413775">)</span><br>
<span class="lineno"></span><span class="keyword" id="5413777">var</span>&nbsp;<span class="ident" id="5413781">idToType</span>&nbsp;<span class="op" id="5413790">=</span>&nbsp;<span class="builtinfunc" id="5413792">make</span><span class="op" id="5413796">(</span><span class="keyword" id="5413797">map</span><span class="op" id="5413800">[</span><span class="ident" id="5413801"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5413807">]</span><span class="ident" id="5413808"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5413815">)</span><br>
<span class="lineno"></span><span class="keyword" id="5413817">var</span>&nbsp;<span class="ident" id="5413821">builtinIdToType</span>&nbsp;<span class="keyword" id="5413837">map</span><span class="op" id="5413840">[</span><span class="ident" id="5413841"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5413847">]</span><span class="ident" id="5413848"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span>&nbsp;<span class="comment" id="5413856">//&nbsp;set&nbsp;in&nbsp;init()&nbsp;after&nbsp;builtins&nbsp;are&nbsp;established</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5413905">func</span>&nbsp;<span class="ident" id="5413910">setTypeId</span><span class="op" id="5413919">(</span><span class="ident" id="5413920">typ</span>&nbsp;<span class="ident" id="5413924"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5413931">)</span>&nbsp;<span class="op" id="5413933">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5413936">//&nbsp;When&nbsp;building&nbsp;recursive&nbsp;types,&nbsp;someone&nbsp;may&nbsp;get&nbsp;there&nbsp;before&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414004">if</span>&nbsp;<span class="ident" id="5414007"><a href="/gostd/encoding/gob/type.go.html#5413920">typ</a></span><span class="op" id="5414010">.</span><span class="ident" id="5414011"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5414013">(</span><span class="op" id="5414014">)</span>&nbsp;<span class="op" id="5414016">!=</span>&nbsp;<span class="num" id="5414019">0</span>&nbsp;<span class="op" id="5414021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414025">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5414033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5414036"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><span class="op" id="5414042">++</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5414046"><a href="/gostd/encoding/gob/type.go.html#5413920">typ</a></span><span class="op" id="5414049">.</span><span class="ident" id="5414050"><a href="/gostd/encoding/gob/type.go.html#5413607">setId</a></span><span class="op" id="5414055">(</span><span class="ident" id="5414056"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><span class="op" id="5414062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5414065"><a href="/gostd/encoding/gob/type.go.html#5413781">idToType</a></span><span class="op" id="5414073">[</span><span class="ident" id="5414074"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><span class="op" id="5414080">]</span>&nbsp;<span class="op" id="5414082">=</span>&nbsp;<span class="ident" id="5414084"><a href="/gostd/encoding/gob/type.go.html#5413920">typ</a></span><br>
<span class="lineno"></span><span class="op" id="5414088">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5414091">func</span>&nbsp;<span class="op" id="5414096">(</span><span class="ident" id="5414097">t</span>&nbsp;<span class="ident" id="5414099"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5414105">)</span>&nbsp;<span class="ident" id="5414107">gobType</span><span class="op" id="5414114">(</span><span class="op" id="5414115">)</span>&nbsp;<span class="ident" id="5414117"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span>&nbsp;<span class="op" id="5414125">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414128">if</span>&nbsp;<span class="ident" id="5414131"><a href="/gostd/encoding/gob/type.go.html#5414097">t</a></span>&nbsp;<span class="op" id="5414133">==</span>&nbsp;<span class="num" id="5414136">0</span>&nbsp;<span class="op" id="5414138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414142">return</span>&nbsp;<span class="builtintype" id="5414149">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5414154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414157">return</span>&nbsp;<span class="ident" id="5414164"><a href="/gostd/encoding/gob/type.go.html#5413781">idToType</a></span><span class="op" id="5414172">[</span><span class="ident" id="5414173"><a href="/gostd/encoding/gob/type.go.html#5414097">t</a></span><span class="op" id="5414174">]</span><br>
<span class="lineno"></span><span class="op" id="5414176">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="5414179">//&nbsp;string&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;the&nbsp;type&nbsp;associated&nbsp;with&nbsp;the&nbsp;typeId.</span><br>
<span class="lineno"></span><span class="keyword" id="5414263">func</span>&nbsp;<span class="op" id="5414268">(</span><span class="ident" id="5414269">t</span>&nbsp;<span class="ident" id="5414271"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5414277">)</span>&nbsp;<span class="builtintype" id="5414279">string</span><span class="op" id="5414285">(</span><span class="op" id="5414286">)</span>&nbsp;<span class="builtintype" id="5414288">string</span>&nbsp;<span class="op" id="5414295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414298">if</span>&nbsp;<span class="ident" id="5414301"><a href="/gostd/encoding/gob/type.go.html#5414269">t</a></span><span class="op" id="5414302">.</span><span class="ident" id="5414303"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5414310">(</span><span class="op" id="5414311">)</span>&nbsp;<span class="op" id="5414313">==</span>&nbsp;<span class="builtintype" id="5414316">nil</span>&nbsp;<span class="op" id="5414320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414324">return</span>&nbsp;<span class="string" id="5414331">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5414340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414343">return</span>&nbsp;<span class="ident" id="5414350"><a href="/gostd/encoding/gob/type.go.html#5414269">t</a></span><span class="op" id="5414351">.</span><span class="ident" id="5414352"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5414359">(</span><span class="op" id="5414360">)</span><span class="op" id="5414361">.</span><span class="builtintype" id="5414362"><a href="/gostd/encoding/gob/type.go.html#5413640">string</a></span><span class="op" id="5414368">(</span><span class="op" id="5414369">)</span><br>
<span class="lineno"></span><span class="op" id="5414371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414374">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;type&nbsp;associated&nbsp;with&nbsp;the&nbsp;typeId.</span><br>
<span class="lineno">215</span><span class="keyword" id="5414439">func</span>&nbsp;<span class="op" id="5414444">(</span><span class="ident" id="5414445">t</span>&nbsp;<span class="ident" id="5414447"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5414453">)</span>&nbsp;<span class="ident" id="5414455">name</span><span class="op" id="5414459">(</span><span class="op" id="5414460">)</span>&nbsp;<span class="builtintype" id="5414462">string</span>&nbsp;<span class="op" id="5414469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414472">if</span>&nbsp;<span class="ident" id="5414475"><a href="/gostd/encoding/gob/type.go.html#5414445">t</a></span><span class="op" id="5414476">.</span><span class="ident" id="5414477"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5414484">(</span><span class="op" id="5414485">)</span>&nbsp;<span class="op" id="5414487">==</span>&nbsp;<span class="builtintype" id="5414490">nil</span>&nbsp;<span class="op" id="5414494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414498">return</span>&nbsp;<span class="string" id="5414505">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5414514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5414517">return</span>&nbsp;<span class="ident" id="5414524"><a href="/gostd/encoding/gob/type.go.html#5414445">t</a></span><span class="op" id="5414525">.</span><span class="ident" id="5414526"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5414533">(</span><span class="op" id="5414534">)</span><span class="op" id="5414535">.</span><span class="ident" id="5414536"><a href="/gostd/encoding/gob/type.go.html#5413625">name</a></span><span class="op" id="5414540">(</span><span class="op" id="5414541">)</span><br>
<span class="lineno">220</span><span class="op" id="5414543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5414546">//&nbsp;CommonType&nbsp;holds&nbsp;elements&nbsp;of&nbsp;all&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="5414589">//&nbsp;It&nbsp;is&nbsp;a&nbsp;historical&nbsp;artifact,&nbsp;kept&nbsp;for&nbsp;binary&nbsp;compatibility&nbsp;and&nbsp;exported</span><br>
<span class="lineno"></span><span class="comment" id="5414664">//&nbsp;only&nbsp;for&nbsp;the&nbsp;benefit&nbsp;of&nbsp;the&nbsp;package&#39;s&nbsp;encoding&nbsp;of&nbsp;type&nbsp;descriptors.&nbsp;It&nbsp;is</span><br>
<span class="lineno">225</span><span class="comment" id="5414741">//&nbsp;not&nbsp;intended&nbsp;for&nbsp;direct&nbsp;use&nbsp;by&nbsp;clients.</span><br>
<span class="lineno"></span><span class="keyword" id="5414784">type</span>&nbsp;<span class="ident" id="5414789">CommonType</span>&nbsp;<span class="keyword" id="5414800">struct</span>&nbsp;<span class="op" id="5414807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5414810">Name</span>&nbsp;<span class="builtintype" id="5414815">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5414823">Id</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5414828"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span><span class="op" id="5414835">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="5414838">func</span>&nbsp;<span class="op" id="5414843">(</span><span class="ident" id="5414844">t</span>&nbsp;<span class="op" id="5414846">*</span><span class="ident" id="5414847"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5414857">)</span>&nbsp;<span class="ident" id="5414859">id</span><span class="op" id="5414861">(</span><span class="op" id="5414862">)</span>&nbsp;<span class="ident" id="5414864"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span>&nbsp;<span class="op" id="5414871">{</span>&nbsp;<span class="keyword" id="5414873">return</span>&nbsp;<span class="ident" id="5414880"><a href="/gostd/encoding/gob/type.go.html#5414844">t</a></span><span class="op" id="5414881">.</span><span class="ident" id="5414882"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span>&nbsp;<span class="op" id="5414885">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5414888">func</span>&nbsp;<span class="op" id="5414893">(</span><span class="ident" id="5414894">t</span>&nbsp;<span class="op" id="5414896">*</span><span class="ident" id="5414897"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5414907">)</span>&nbsp;<span class="ident" id="5414909">setId</span><span class="op" id="5414914">(</span><span class="ident" id="5414915">id</span>&nbsp;<span class="ident" id="5414918"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5414924">)</span>&nbsp;<span class="op" id="5414926">{</span>&nbsp;<span class="ident" id="5414928"><a href="/gostd/encoding/gob/type.go.html#5414894">t</a></span><span class="op" id="5414929">.</span><span class="ident" id="5414930"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span>&nbsp;<span class="op" id="5414933">=</span>&nbsp;<span class="ident" id="5414935"><a href="/gostd/encoding/gob/type.go.html#5414915">id</a></span>&nbsp;<span class="op" id="5414938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="5414941">func</span>&nbsp;<span class="op" id="5414946">(</span><span class="ident" id="5414947">t</span>&nbsp;<span class="op" id="5414949">*</span><span class="ident" id="5414950"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5414960">)</span>&nbsp;<span class="builtintype" id="5414962">string</span><span class="op" id="5414968">(</span><span class="op" id="5414969">)</span>&nbsp;<span class="builtintype" id="5414971">string</span>&nbsp;<span class="op" id="5414978">{</span>&nbsp;<span class="keyword" id="5414980">return</span>&nbsp;<span class="ident" id="5414987"><a href="/gostd/encoding/gob/type.go.html#5414947">t</a></span><span class="op" id="5414988">.</span><span class="ident" id="5414989"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span>&nbsp;<span class="op" id="5414994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5414997">func</span>&nbsp;<span class="op" id="5415002">(</span><span class="ident" id="5415003">t</span>&nbsp;<span class="op" id="5415005">*</span><span class="ident" id="5415006"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5415016">)</span>&nbsp;<span class="ident" id="5415018">safeString</span><span class="op" id="5415028">(</span><span class="ident" id="5415029">seen</span>&nbsp;<span class="keyword" id="5415034">map</span><span class="op" id="5415037">[</span><span class="ident" id="5415038"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5415044">]</span><span class="builtintype" id="5415045">bool</span><span class="op" id="5415049">)</span>&nbsp;<span class="builtintype" id="5415051">string</span>&nbsp;<span class="op" id="5415058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5415061">return</span>&nbsp;<span class="ident" id="5415068"><a href="/gostd/encoding/gob/type.go.html#5415003">t</a></span><span class="op" id="5415069">.</span><span class="ident" id="5415070"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span><span class="op" id="5415075">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="5415078">func</span>&nbsp;<span class="op" id="5415083">(</span><span class="ident" id="5415084">t</span>&nbsp;<span class="op" id="5415086">*</span><span class="ident" id="5415087"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5415097">)</span>&nbsp;<span class="ident" id="5415099">name</span><span class="op" id="5415103">(</span><span class="op" id="5415104">)</span>&nbsp;<span class="builtintype" id="5415106">string</span>&nbsp;<span class="op" id="5415113">{</span>&nbsp;<span class="keyword" id="5415115">return</span>&nbsp;<span class="ident" id="5415122"><a href="/gostd/encoding/gob/type.go.html#5415084">t</a></span><span class="op" id="5415123">.</span><span class="ident" id="5415124"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span>&nbsp;<span class="op" id="5415129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5415132">//&nbsp;Create&nbsp;and&nbsp;check&nbsp;predefined&nbsp;types</span><br>
<span class="lineno"></span><span class="comment" id="5415169">//&nbsp;The&nbsp;string&nbsp;for&nbsp;tBytes&nbsp;is&nbsp;&#34;bytes&#34;&nbsp;not&nbsp;&#34;[]byte&#34;&nbsp;to&nbsp;signify&nbsp;its&nbsp;specialness.</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="keyword" id="5415247">var</span>&nbsp;<span class="op" id="5415251">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5415254">//&nbsp;Primordial&nbsp;types,&nbsp;needed&nbsp;during&nbsp;initialization.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5415306">//&nbsp;Always&nbsp;passed&nbsp;as&nbsp;pointers&nbsp;so&nbsp;the&nbsp;interface{}&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5415360">//&nbsp;goes&nbsp;through&nbsp;without&nbsp;losing&nbsp;its&nbsp;interfaceness.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415411">tBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415422">=</span>&nbsp;<span class="ident" id="5415424"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415437">(</span><span class="string" id="5415438">&#34;bool&#34;</span><span class="op" id="5415444">,</span>&nbsp;<span class="op" id="5415446">(</span><span class="op" id="5415447">*</span><span class="builtintype" id="5415448">bool</span><span class="op" id="5415452">)</span><span class="op" id="5415453">(</span><span class="builtintype" id="5415454">nil</span><span class="op" id="5415457">)</span><span class="op" id="5415458">,</span>&nbsp;<span class="num" id="5415460">1</span><span class="op" id="5415461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415464">tInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415475">=</span>&nbsp;<span class="ident" id="5415477"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415490">(</span><span class="string" id="5415491">&#34;int&#34;</span><span class="op" id="5415496">,</span>&nbsp;<span class="op" id="5415498">(</span><span class="op" id="5415499">*</span><span class="builtintype" id="5415500">int</span><span class="op" id="5415503">)</span><span class="op" id="5415504">(</span><span class="builtintype" id="5415505">nil</span><span class="op" id="5415508">)</span><span class="op" id="5415509">,</span>&nbsp;<span class="num" id="5415511">2</span><span class="op" id="5415512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415515">tUint</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415526">=</span>&nbsp;<span class="ident" id="5415528"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415541">(</span><span class="string" id="5415542">&#34;uint&#34;</span><span class="op" id="5415548">,</span>&nbsp;<span class="op" id="5415550">(</span><span class="op" id="5415551">*</span><span class="builtintype" id="5415552">uint</span><span class="op" id="5415556">)</span><span class="op" id="5415557">(</span><span class="builtintype" id="5415558">nil</span><span class="op" id="5415561">)</span><span class="op" id="5415562">,</span>&nbsp;<span class="num" id="5415564">3</span><span class="op" id="5415565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415568">tFloat</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415579">=</span>&nbsp;<span class="ident" id="5415581"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415594">(</span><span class="string" id="5415595">&#34;float&#34;</span><span class="op" id="5415602">,</span>&nbsp;<span class="op" id="5415604">(</span><span class="op" id="5415605">*</span><span class="builtintype" id="5415606">float64</span><span class="op" id="5415613">)</span><span class="op" id="5415614">(</span><span class="builtintype" id="5415615">nil</span><span class="op" id="5415618">)</span><span class="op" id="5415619">,</span>&nbsp;<span class="num" id="5415621">4</span><span class="op" id="5415622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415625">tBytes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415636">=</span>&nbsp;<span class="ident" id="5415638"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415651">(</span><span class="string" id="5415652">&#34;bytes&#34;</span><span class="op" id="5415659">,</span>&nbsp;<span class="op" id="5415661">(</span><span class="op" id="5415662">*</span><span class="op" id="5415663">[</span><span class="op" id="5415664">]</span><span class="builtintype" id="5415665">byte</span><span class="op" id="5415669">)</span><span class="op" id="5415670">(</span><span class="builtintype" id="5415671">nil</span><span class="op" id="5415674">)</span><span class="op" id="5415675">,</span>&nbsp;<span class="num" id="5415677">5</span><span class="op" id="5415678">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415681">tString</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5415692">=</span>&nbsp;<span class="ident" id="5415694"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415707">(</span><span class="string" id="5415708">&#34;string&#34;</span><span class="op" id="5415716">,</span>&nbsp;<span class="op" id="5415718">(</span><span class="op" id="5415719">*</span><span class="builtintype" id="5415720">string</span><span class="op" id="5415726">)</span><span class="op" id="5415727">(</span><span class="builtintype" id="5415728">nil</span><span class="op" id="5415731">)</span><span class="op" id="5415732">,</span>&nbsp;<span class="num" id="5415734">6</span><span class="op" id="5415735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415738">tComplex</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5415749">=</span>&nbsp;<span class="ident" id="5415751"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415764">(</span><span class="string" id="5415765">&#34;complex&#34;</span><span class="op" id="5415774">,</span>&nbsp;<span class="op" id="5415776">(</span><span class="op" id="5415777">*</span><span class="builtintype" id="5415778">complex128</span><span class="op" id="5415788">)</span><span class="op" id="5415789">(</span><span class="builtintype" id="5415790">nil</span><span class="op" id="5415793">)</span><span class="op" id="5415794">,</span>&nbsp;<span class="num" id="5415796">7</span><span class="op" id="5415797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415800">tInterface</span>&nbsp;<span class="op" id="5415811">=</span>&nbsp;<span class="ident" id="5415813"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415826">(</span><span class="string" id="5415827">&#34;interface&#34;</span><span class="op" id="5415838">,</span>&nbsp;<span class="op" id="5415840">(</span><span class="op" id="5415841">*</span><span class="keyword" id="5415842">interface</span><span class="op" id="5415851">{</span><span class="op" id="5415852">}</span><span class="op" id="5415853">)</span><span class="op" id="5415854">(</span><span class="builtintype" id="5415855">nil</span><span class="op" id="5415858">)</span><span class="op" id="5415859">,</span>&nbsp;<span class="num" id="5415861">8</span><span class="op" id="5415862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5415865">//&nbsp;Reserve&nbsp;some&nbsp;Ids&nbsp;for&nbsp;compatible&nbsp;expansion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415911">tReserved7</span>&nbsp;<span class="op" id="5415922">=</span>&nbsp;<span class="ident" id="5415924"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5415937">(</span><span class="string" id="5415938">&#34;_reserved1&#34;</span><span class="op" id="5415950">,</span>&nbsp;<span class="op" id="5415952">(</span><span class="op" id="5415953">*</span><span class="keyword" id="5415954">struct</span><span class="op" id="5415960">{</span>&nbsp;<span class="ident" id="5415962">r7</span>&nbsp;<span class="builtintype" id="5415965">int</span>&nbsp;<span class="op" id="5415969">}</span><span class="op" id="5415970">)</span><span class="op" id="5415971">(</span><span class="builtintype" id="5415972">nil</span><span class="op" id="5415975">)</span><span class="op" id="5415976">,</span>&nbsp;<span class="num" id="5415978">9</span><span class="op" id="5415979">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5415982">tReserved6</span>&nbsp;<span class="op" id="5415993">=</span>&nbsp;<span class="ident" id="5415995"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416008">(</span><span class="string" id="5416009">&#34;_reserved1&#34;</span><span class="op" id="5416021">,</span>&nbsp;<span class="op" id="5416023">(</span><span class="op" id="5416024">*</span><span class="keyword" id="5416025">struct</span><span class="op" id="5416031">{</span>&nbsp;<span class="ident" id="5416033">r6</span>&nbsp;<span class="builtintype" id="5416036">int</span>&nbsp;<span class="op" id="5416040">}</span><span class="op" id="5416041">)</span><span class="op" id="5416042">(</span><span class="builtintype" id="5416043">nil</span><span class="op" id="5416046">)</span><span class="op" id="5416047">,</span>&nbsp;<span class="num" id="5416049">10</span><span class="op" id="5416051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416054">tReserved5</span>&nbsp;<span class="op" id="5416065">=</span>&nbsp;<span class="ident" id="5416067"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416080">(</span><span class="string" id="5416081">&#34;_reserved1&#34;</span><span class="op" id="5416093">,</span>&nbsp;<span class="op" id="5416095">(</span><span class="op" id="5416096">*</span><span class="keyword" id="5416097">struct</span><span class="op" id="5416103">{</span>&nbsp;<span class="ident" id="5416105">r5</span>&nbsp;<span class="builtintype" id="5416108">int</span>&nbsp;<span class="op" id="5416112">}</span><span class="op" id="5416113">)</span><span class="op" id="5416114">(</span><span class="builtintype" id="5416115">nil</span><span class="op" id="5416118">)</span><span class="op" id="5416119">,</span>&nbsp;<span class="num" id="5416121">11</span><span class="op" id="5416123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416126">tReserved4</span>&nbsp;<span class="op" id="5416137">=</span>&nbsp;<span class="ident" id="5416139"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416152">(</span><span class="string" id="5416153">&#34;_reserved1&#34;</span><span class="op" id="5416165">,</span>&nbsp;<span class="op" id="5416167">(</span><span class="op" id="5416168">*</span><span class="keyword" id="5416169">struct</span><span class="op" id="5416175">{</span>&nbsp;<span class="ident" id="5416177">r4</span>&nbsp;<span class="builtintype" id="5416180">int</span>&nbsp;<span class="op" id="5416184">}</span><span class="op" id="5416185">)</span><span class="op" id="5416186">(</span><span class="builtintype" id="5416187">nil</span><span class="op" id="5416190">)</span><span class="op" id="5416191">,</span>&nbsp;<span class="num" id="5416193">12</span><span class="op" id="5416195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416198">tReserved3</span>&nbsp;<span class="op" id="5416209">=</span>&nbsp;<span class="ident" id="5416211"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416224">(</span><span class="string" id="5416225">&#34;_reserved1&#34;</span><span class="op" id="5416237">,</span>&nbsp;<span class="op" id="5416239">(</span><span class="op" id="5416240">*</span><span class="keyword" id="5416241">struct</span><span class="op" id="5416247">{</span>&nbsp;<span class="ident" id="5416249">r3</span>&nbsp;<span class="builtintype" id="5416252">int</span>&nbsp;<span class="op" id="5416256">}</span><span class="op" id="5416257">)</span><span class="op" id="5416258">(</span><span class="builtintype" id="5416259">nil</span><span class="op" id="5416262">)</span><span class="op" id="5416263">,</span>&nbsp;<span class="num" id="5416265">13</span><span class="op" id="5416267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416270">tReserved2</span>&nbsp;<span class="op" id="5416281">=</span>&nbsp;<span class="ident" id="5416283"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416296">(</span><span class="string" id="5416297">&#34;_reserved1&#34;</span><span class="op" id="5416309">,</span>&nbsp;<span class="op" id="5416311">(</span><span class="op" id="5416312">*</span><span class="keyword" id="5416313">struct</span><span class="op" id="5416319">{</span>&nbsp;<span class="ident" id="5416321">r2</span>&nbsp;<span class="builtintype" id="5416324">int</span>&nbsp;<span class="op" id="5416328">}</span><span class="op" id="5416329">)</span><span class="op" id="5416330">(</span><span class="builtintype" id="5416331">nil</span><span class="op" id="5416334">)</span><span class="op" id="5416335">,</span>&nbsp;<span class="num" id="5416337">14</span><span class="op" id="5416339">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416342">tReserved1</span>&nbsp;<span class="op" id="5416353">=</span>&nbsp;<span class="ident" id="5416355"><a href="/gostd/encoding/gob/type.go.html#5425982">bootstrapType</a></span><span class="op" id="5416368">(</span><span class="string" id="5416369">&#34;_reserved1&#34;</span><span class="op" id="5416381">,</span>&nbsp;<span class="op" id="5416383">(</span><span class="op" id="5416384">*</span><span class="keyword" id="5416385">struct</span><span class="op" id="5416391">{</span>&nbsp;<span class="ident" id="5416393">r1</span>&nbsp;<span class="builtintype" id="5416396">int</span>&nbsp;<span class="op" id="5416400">}</span><span class="op" id="5416401">)</span><span class="op" id="5416402">(</span><span class="builtintype" id="5416403">nil</span><span class="op" id="5416406">)</span><span class="op" id="5416407">,</span>&nbsp;<span class="num" id="5416409">15</span><span class="op" id="5416411">)</span><br>
<span class="lineno"></span><span class="op" id="5416413">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5416416">//&nbsp;Predefined&nbsp;because&nbsp;it&#39;s&nbsp;needed&nbsp;by&nbsp;the&nbsp;Decoder</span><br>
<span class="lineno"></span><span class="keyword" id="5416465">var</span>&nbsp;<span class="ident" id="5416469">tWireType</span>&nbsp;<span class="op" id="5416479">=</span>&nbsp;<span class="ident" id="5416481"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416496">(</span><span class="ident" id="5416497"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416504">.</span><span class="ident" id="5416505"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416511">(</span><span class="ident" id="5416512"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5416520">{</span><span class="op" id="5416521">}</span><span class="op" id="5416522">)</span><span class="op" id="5416523">)</span><span class="op" id="5416524">.</span><span class="ident" id="5416525"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><br>
<span class="lineno">270</span><span class="keyword" id="5416528">var</span>&nbsp;<span class="ident" id="5416532">wireTypeUserInfo</span>&nbsp;<span class="op" id="5416549">*</span><span class="ident" id="5416550"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span>&nbsp;<span class="comment" id="5416563">//&nbsp;userTypeInfo&nbsp;of&nbsp;(*wireType)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5416595">func</span>&nbsp;<span class="ident" id="5416600">init</span><span class="op" id="5416604">(</span><span class="op" id="5416605">)</span>&nbsp;<span class="op" id="5416607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5416610">//&nbsp;Some&nbsp;magic&nbsp;numbers&nbsp;to&nbsp;make&nbsp;sure&nbsp;there&nbsp;are&nbsp;no&nbsp;surprises.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416670"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416677">(</span><span class="num" id="5416678">16</span><span class="op" id="5416680">,</span>&nbsp;<span class="ident" id="5416682"><a href="/gostd/encoding/gob/type.go.html#5416469">tWireType</a></span><span class="op" id="5416691">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416694"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416701">(</span><span class="num" id="5416702">17</span><span class="op" id="5416704">,</span>&nbsp;<span class="ident" id="5416706"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416721">(</span><span class="ident" id="5416722"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416729">.</span><span class="ident" id="5416730"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416736">(</span><span class="ident" id="5416737"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5416746">{</span><span class="op" id="5416747">}</span><span class="op" id="5416748">)</span><span class="op" id="5416749">)</span><span class="op" id="5416750">.</span><span class="ident" id="5416751"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5416753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416756"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416763">(</span><span class="num" id="5416764">18</span><span class="op" id="5416766">,</span>&nbsp;<span class="ident" id="5416768"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416783">(</span><span class="ident" id="5416784"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416791">.</span><span class="ident" id="5416792"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416798">(</span><span class="ident" id="5416799"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5416809">{</span><span class="op" id="5416810">}</span><span class="op" id="5416811">)</span><span class="op" id="5416812">)</span><span class="op" id="5416813">.</span><span class="ident" id="5416814"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5416816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416819"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416826">(</span><span class="num" id="5416827">19</span><span class="op" id="5416829">,</span>&nbsp;<span class="ident" id="5416831"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416846">(</span><span class="ident" id="5416847"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416854">.</span><span class="ident" id="5416855"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416861">(</span><span class="ident" id="5416862"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5416871">{</span><span class="op" id="5416872">}</span><span class="op" id="5416873">)</span><span class="op" id="5416874">)</span><span class="op" id="5416875">.</span><span class="ident" id="5416876"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5416878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416881"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416888">(</span><span class="num" id="5416889">20</span><span class="op" id="5416891">,</span>&nbsp;<span class="ident" id="5416893"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416908">(</span><span class="ident" id="5416909"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416916">.</span><span class="ident" id="5416917"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416923">(</span><span class="ident" id="5416924"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><span class="op" id="5416934">{</span><span class="op" id="5416935">}</span><span class="op" id="5416936">)</span><span class="op" id="5416937">)</span><span class="op" id="5416938">.</span><span class="ident" id="5416939"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5416941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5416944"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5416951">(</span><span class="num" id="5416952">21</span><span class="op" id="5416954">,</span>&nbsp;<span class="ident" id="5416956"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5416971">(</span><span class="ident" id="5416972"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5416979">.</span><span class="ident" id="5416980"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5416986">(</span><span class="ident" id="5416987"><a href="/gostd/encoding/gob/type.go.html#5419910">fieldType</a></span><span class="op" id="5416996">{</span><span class="op" id="5416997">}</span><span class="op" id="5416998">)</span><span class="op" id="5416999">)</span><span class="op" id="5417000">.</span><span class="ident" id="5417001"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5417003">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417006"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5417013">(</span><span class="num" id="5417014">23</span><span class="op" id="5417016">,</span>&nbsp;<span class="ident" id="5417018"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5417033">(</span><span class="ident" id="5417034"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5417041">.</span><span class="ident" id="5417042"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5417048">(</span><span class="ident" id="5417049"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5417056">{</span><span class="op" id="5417057">}</span><span class="op" id="5417058">)</span><span class="op" id="5417059">)</span><span class="op" id="5417060">.</span><span class="ident" id="5417061"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5417063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417067"><a href="/gostd/encoding/gob/type.go.html#5413821">builtinIdToType</a></span>&nbsp;<span class="op" id="5417083">=</span>&nbsp;<span class="builtinfunc" id="5417085">make</span><span class="op" id="5417089">(</span><span class="keyword" id="5417090">map</span><span class="op" id="5417093">[</span><span class="ident" id="5417094"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5417100">]</span><span class="ident" id="5417101"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5417108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417111">for</span>&nbsp;<span class="ident" id="5417115">k</span><span class="op" id="5417116">,</span>&nbsp;<span class="ident" id="5417118">v</span>&nbsp;<span class="op" id="5417120">:=</span>&nbsp;<span class="keyword" id="5417123">range</span>&nbsp;<span class="ident" id="5417129"><a href="/gostd/encoding/gob/type.go.html#5413781">idToType</a></span>&nbsp;<span class="op" id="5417138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417142"><a href="/gostd/encoding/gob/type.go.html#5413821">builtinIdToType</a></span><span class="op" id="5417157">[</span><span class="ident" id="5417158"><a href="/gostd/encoding/gob/type.go.html#5417115">k</a></span><span class="op" id="5417159">]</span>&nbsp;<span class="op" id="5417161">=</span>&nbsp;<span class="ident" id="5417163"><a href="/gostd/encoding/gob/type.go.html#5417118">v</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5417166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5417170">//&nbsp;Move&nbsp;the&nbsp;id&nbsp;space&nbsp;upwards&nbsp;to&nbsp;allow&nbsp;for&nbsp;growth&nbsp;in&nbsp;the&nbsp;predefined&nbsp;world</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5417244">//&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417281">if</span>&nbsp;<span class="ident" id="5417284"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span>&nbsp;<span class="op" id="5417291">&gt;</span>&nbsp;<span class="ident" id="5417293"><a href="/gostd/encoding/gob/type.go.html#5413513">firstUserId</a></span>&nbsp;<span class="op" id="5417305">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5417309">panic</span><span class="op" id="5417314">(</span><span class="ident" id="5417315"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5417318">.</span><span class="ident" id="5417319"><a href="/gostd/fmt/print.go.html#2146029">Sprintln</a></span><span class="op" id="5417327">(</span><span class="string" id="5417328">&#34;nextId&nbsp;too&nbsp;large:&#34;</span><span class="op" id="5417347">,</span>&nbsp;<span class="ident" id="5417349"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><span class="op" id="5417355">)</span><span class="op" id="5417356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5417359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417362"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span>&nbsp;<span class="op" id="5417369">=</span>&nbsp;<span class="ident" id="5417371"><a href="/gostd/encoding/gob/type.go.html#5413513">firstUserId</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417384"><a href="/gostd/encoding/gob/type.go.html#5434386">registerBasics</a></span><span class="op" id="5417398">(</span><span class="op" id="5417399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417402"><a href="/gostd/encoding/gob/type.go.html#5416532">wireTypeUserInfo</a></span>&nbsp;<span class="op" id="5417419">=</span>&nbsp;<span class="ident" id="5417421"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5417429">(</span><span class="ident" id="5417430"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5417437">.</span><span class="ident" id="5417438"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5417444">(</span><span class="op" id="5417445">(</span><span class="op" id="5417446">*</span><span class="ident" id="5417447"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5417455">)</span><span class="op" id="5417456">(</span><span class="builtintype" id="5417457">nil</span><span class="op" id="5417460">)</span><span class="op" id="5417461">)</span><span class="op" id="5417462">)</span><br>
<span class="lineno">295</span><span class="op" id="5417464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5417467">//&nbsp;Array&nbsp;type</span><br>
<span class="lineno"></span><span class="keyword" id="5417481">type</span>&nbsp;<span class="ident" id="5417486">arrayType</span>&nbsp;<span class="keyword" id="5417496">struct</span>&nbsp;<span class="op" id="5417503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417506"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417518">Elem</span>&nbsp;<span class="ident" id="5417523"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417531">Len</span>&nbsp;&nbsp;<span class="builtintype" id="5417536">int</span><br>
<span class="lineno"></span><span class="op" id="5417540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5417543">func</span>&nbsp;<span class="ident" id="5417548">newArrayType</span><span class="op" id="5417560">(</span><span class="ident" id="5417561">name</span>&nbsp;<span class="builtintype" id="5417566">string</span><span class="op" id="5417572">)</span>&nbsp;<span class="op" id="5417574">*</span><span class="ident" id="5417575"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span>&nbsp;<span class="op" id="5417585">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417588">a</span>&nbsp;<span class="op" id="5417590">:=</span>&nbsp;<span class="op" id="5417593">&amp;</span><span class="ident" id="5417594"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5417603">{</span><span class="ident" id="5417604"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5417614">{</span><span class="ident" id="5417615"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5417619">:</span>&nbsp;<span class="ident" id="5417621"><a href="/gostd/encoding/gob/type.go.html#5417561">name</a></span><span class="op" id="5417625">}</span><span class="op" id="5417626">,</span>&nbsp;<span class="num" id="5417628">0</span><span class="op" id="5417629">,</span>&nbsp;<span class="num" id="5417631">0</span><span class="op" id="5417632">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417635">return</span>&nbsp;<span class="ident" id="5417642"><a href="/gostd/encoding/gob/type.go.html#5417588">a</a></span><br>
<span class="lineno"></span><span class="op" id="5417644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5417647">func</span>&nbsp;<span class="op" id="5417652">(</span><span class="ident" id="5417653">a</span>&nbsp;<span class="op" id="5417655">*</span><span class="ident" id="5417656"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5417665">)</span>&nbsp;<span class="ident" id="5417667">init</span><span class="op" id="5417671">(</span><span class="ident" id="5417672">elem</span>&nbsp;<span class="ident" id="5417677"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5417684">,</span>&nbsp;<span class="builtinfunc" id="5417686">len</span>&nbsp;<span class="builtintype" id="5417690">int</span><span class="op" id="5417693">)</span>&nbsp;<span class="op" id="5417695">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5417698">//&nbsp;Set&nbsp;our&nbsp;type&nbsp;id&nbsp;before&nbsp;evaluating&nbsp;the&nbsp;element&#39;s,&nbsp;in&nbsp;case&nbsp;it&#39;s&nbsp;our&nbsp;own.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417773"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5417782">(</span><span class="ident" id="5417783"><a href="/gostd/encoding/gob/type.go.html#5417653">a</a></span><span class="op" id="5417784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417787"><a href="/gostd/encoding/gob/type.go.html#5417653">a</a></span><span class="op" id="5417788">.</span><span class="ident" id="5417789"><a href="/gostd/encoding/gob/type.go.html#5417518">Elem</a></span>&nbsp;<span class="op" id="5417794">=</span>&nbsp;<span class="ident" id="5417796"><a href="/gostd/encoding/gob/type.go.html#5417672">elem</a></span><span class="op" id="5417800">.</span><span class="ident" id="5417801"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5417803">(</span><span class="op" id="5417804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417807"><a href="/gostd/encoding/gob/type.go.html#5417653">a</a></span><span class="op" id="5417808">.</span><span class="ident" id="5417809"><a href="/gostd/encoding/gob/type.go.html#5417531">Len</a></span>&nbsp;<span class="op" id="5417813">=</span>&nbsp;<span class="builtinfunc" id="5417815"><a href="/gostd/encoding/gob/type.go.html#5417686">len</a></span><br>
<span class="lineno"></span><span class="op" id="5417819">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="5417822">func</span>&nbsp;<span class="op" id="5417827">(</span><span class="ident" id="5417828">a</span>&nbsp;<span class="op" id="5417830">*</span><span class="ident" id="5417831"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5417840">)</span>&nbsp;<span class="ident" id="5417842">safeString</span><span class="op" id="5417852">(</span><span class="ident" id="5417853">seen</span>&nbsp;<span class="keyword" id="5417858">map</span><span class="op" id="5417861">[</span><span class="ident" id="5417862"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5417868">]</span><span class="builtintype" id="5417869">bool</span><span class="op" id="5417873">)</span>&nbsp;<span class="builtintype" id="5417875">string</span>&nbsp;<span class="op" id="5417882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417885">if</span>&nbsp;<span class="ident" id="5417888"><a href="/gostd/encoding/gob/type.go.html#5417853">seen</a></span><span class="op" id="5417892">[</span><span class="ident" id="5417893"><a href="/gostd/encoding/gob/type.go.html#5417828">a</a></span><span class="op" id="5417894">.</span><span class="ident" id="5417895"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5417897">]</span>&nbsp;<span class="op" id="5417899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417903">return</span>&nbsp;<span class="ident" id="5417910"><a href="/gostd/encoding/gob/type.go.html#5417828">a</a></span><span class="op" id="5417911">.</span><span class="ident" id="5417912"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5417918">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5417921"><a href="/gostd/encoding/gob/type.go.html#5417853">seen</a></span><span class="op" id="5417925">[</span><span class="ident" id="5417926"><a href="/gostd/encoding/gob/type.go.html#5417828">a</a></span><span class="op" id="5417927">.</span><span class="ident" id="5417928"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5417930">]</span>&nbsp;<span class="op" id="5417932">=</span>&nbsp;<span class="builtintype" id="5417934">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5417940">return</span>&nbsp;<span class="ident" id="5417947"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5417950">.</span><span class="ident" id="5417951"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5417958">(</span><span class="string" id="5417959">&#34;[%d]%s&#34;</span><span class="op" id="5417967">,</span>&nbsp;<span class="ident" id="5417969"><a href="/gostd/encoding/gob/type.go.html#5417828">a</a></span><span class="op" id="5417970">.</span><span class="ident" id="5417971"><a href="/gostd/encoding/gob/type.go.html#5417531">Len</a></span><span class="op" id="5417974">,</span>&nbsp;<span class="ident" id="5417976"><a href="/gostd/encoding/gob/type.go.html#5417828">a</a></span><span class="op" id="5417977">.</span><span class="ident" id="5417978"><a href="/gostd/encoding/gob/type.go.html#5417518">Elem</a></span><span class="op" id="5417982">.</span><span class="ident" id="5417983"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5417990">(</span><span class="op" id="5417991">)</span><span class="op" id="5417992">.</span><span class="ident" id="5417993"><a href="/gostd/encoding/gob/type.go.html#5413691">safeString</a></span><span class="op" id="5418003">(</span><span class="ident" id="5418004"><a href="/gostd/encoding/gob/type.go.html#5417853">seen</a></span><span class="op" id="5418008">)</span><span class="op" id="5418009">)</span><br>
<span class="lineno"></span><span class="op" id="5418011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5418014">func</span>&nbsp;<span class="op" id="5418019">(</span><span class="ident" id="5418020">a</span>&nbsp;<span class="op" id="5418022">*</span><span class="ident" id="5418023"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5418032">)</span>&nbsp;<span class="builtintype" id="5418034">string</span><span class="op" id="5418040">(</span><span class="op" id="5418041">)</span>&nbsp;<span class="builtintype" id="5418043">string</span>&nbsp;<span class="op" id="5418050">{</span>&nbsp;<span class="keyword" id="5418052">return</span>&nbsp;<span class="ident" id="5418059"><a href="/gostd/encoding/gob/type.go.html#5418020">a</a></span><span class="op" id="5418060">.</span><span class="ident" id="5418061"><a href="/gostd/encoding/gob/type.go.html#5417842">safeString</a></span><span class="op" id="5418071">(</span><span class="builtinfunc" id="5418072">make</span><span class="op" id="5418076">(</span><span class="keyword" id="5418077">map</span><span class="op" id="5418080">[</span><span class="ident" id="5418081"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5418087">]</span><span class="builtintype" id="5418088">bool</span><span class="op" id="5418092">)</span><span class="op" id="5418093">)</span>&nbsp;<span class="op" id="5418095">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="comment" id="5418098">//&nbsp;GobEncoder&nbsp;type&nbsp;(something&nbsp;that&nbsp;implements&nbsp;the&nbsp;GobEncoder&nbsp;interface)</span><br>
<span class="lineno"></span><span class="keyword" id="5418170">type</span>&nbsp;<span class="ident" id="5418175">gobEncoderType</span>&nbsp;<span class="keyword" id="5418190">struct</span>&nbsp;<span class="op" id="5418197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418200"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><br>
<span class="lineno"></span><span class="op" id="5418211">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="5418214">func</span>&nbsp;<span class="ident" id="5418219">newGobEncoderType</span><span class="op" id="5418236">(</span><span class="ident" id="5418237">name</span>&nbsp;<span class="builtintype" id="5418242">string</span><span class="op" id="5418248">)</span>&nbsp;<span class="op" id="5418250">*</span><span class="ident" id="5418251"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span>&nbsp;<span class="op" id="5418266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418269">g</span>&nbsp;<span class="op" id="5418271">:=</span>&nbsp;<span class="op" id="5418274">&amp;</span><span class="ident" id="5418275"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><span class="op" id="5418289">{</span><span class="ident" id="5418290"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5418300">{</span><span class="ident" id="5418301"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5418305">:</span>&nbsp;<span class="ident" id="5418307"><a href="/gostd/encoding/gob/type.go.html#5418237">name</a></span><span class="op" id="5418311">}</span><span class="op" id="5418312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418315"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5418324">(</span><span class="ident" id="5418325"><a href="/gostd/encoding/gob/type.go.html#5418269">g</a></span><span class="op" id="5418326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5418329">return</span>&nbsp;<span class="ident" id="5418336"><a href="/gostd/encoding/gob/type.go.html#5418269">g</a></span><br>
<span class="lineno">335</span><span class="op" id="5418338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5418341">func</span>&nbsp;<span class="op" id="5418346">(</span><span class="ident" id="5418347">g</span>&nbsp;<span class="op" id="5418349">*</span><span class="ident" id="5418350"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><span class="op" id="5418364">)</span>&nbsp;<span class="ident" id="5418366">safeString</span><span class="op" id="5418376">(</span><span class="ident" id="5418377">seen</span>&nbsp;<span class="keyword" id="5418382">map</span><span class="op" id="5418385">[</span><span class="ident" id="5418386"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5418392">]</span><span class="builtintype" id="5418393">bool</span><span class="op" id="5418397">)</span>&nbsp;<span class="builtintype" id="5418399">string</span>&nbsp;<span class="op" id="5418406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5418409">return</span>&nbsp;<span class="ident" id="5418416"><a href="/gostd/encoding/gob/type.go.html#5418347">g</a></span><span class="op" id="5418417">.</span><span class="ident" id="5418418"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span><span class="op" id="5418423">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="5418426">func</span>&nbsp;<span class="op" id="5418431">(</span><span class="ident" id="5418432">g</span>&nbsp;<span class="op" id="5418434">*</span><span class="ident" id="5418435"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><span class="op" id="5418449">)</span>&nbsp;<span class="builtintype" id="5418451">string</span><span class="op" id="5418457">(</span><span class="op" id="5418458">)</span>&nbsp;<span class="builtintype" id="5418460">string</span>&nbsp;<span class="op" id="5418467">{</span>&nbsp;<span class="keyword" id="5418469">return</span>&nbsp;<span class="ident" id="5418476"><a href="/gostd/encoding/gob/type.go.html#5418432">g</a></span><span class="op" id="5418477">.</span><span class="ident" id="5418478"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span>&nbsp;<span class="op" id="5418483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5418486">//&nbsp;Map&nbsp;type</span><br>
<span class="lineno"></span><span class="keyword" id="5418498">type</span>&nbsp;<span class="ident" id="5418503">mapType</span>&nbsp;<span class="keyword" id="5418511">struct</span>&nbsp;<span class="op" id="5418518">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418521"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418533">Key</span>&nbsp;&nbsp;<span class="ident" id="5418538"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418546">Elem</span>&nbsp;<span class="ident" id="5418551"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span><span class="op" id="5418558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="5418561">func</span>&nbsp;<span class="ident" id="5418566">newMapType</span><span class="op" id="5418576">(</span><span class="ident" id="5418577">name</span>&nbsp;<span class="builtintype" id="5418582">string</span><span class="op" id="5418588">)</span>&nbsp;<span class="op" id="5418590">*</span><span class="ident" id="5418591"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span>&nbsp;<span class="op" id="5418599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418602">m</span>&nbsp;<span class="op" id="5418604">:=</span>&nbsp;<span class="op" id="5418607">&amp;</span><span class="ident" id="5418608"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5418615">{</span><span class="ident" id="5418616"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5418626">{</span><span class="ident" id="5418627"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5418631">:</span>&nbsp;<span class="ident" id="5418633"><a href="/gostd/encoding/gob/type.go.html#5418577">name</a></span><span class="op" id="5418637">}</span><span class="op" id="5418638">,</span>&nbsp;<span class="num" id="5418640">0</span><span class="op" id="5418641">,</span>&nbsp;<span class="num" id="5418643">0</span><span class="op" id="5418644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5418647">return</span>&nbsp;<span class="ident" id="5418654"><a href="/gostd/encoding/gob/type.go.html#5418602">m</a></span><br>
<span class="lineno"></span><span class="op" id="5418656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="5418659">func</span>&nbsp;<span class="op" id="5418664">(</span><span class="ident" id="5418665">m</span>&nbsp;<span class="op" id="5418667">*</span><span class="ident" id="5418668"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5418675">)</span>&nbsp;<span class="ident" id="5418677">init</span><span class="op" id="5418681">(</span><span class="ident" id="5418682">key</span><span class="op" id="5418685">,</span>&nbsp;<span class="ident" id="5418687">elem</span>&nbsp;<span class="ident" id="5418692"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5418699">)</span>&nbsp;<span class="op" id="5418701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5418704">//&nbsp;Set&nbsp;our&nbsp;type&nbsp;id&nbsp;before&nbsp;evaluating&nbsp;the&nbsp;element&#39;s,&nbsp;in&nbsp;case&nbsp;it&#39;s&nbsp;our&nbsp;own.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418779"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5418788">(</span><span class="ident" id="5418789"><a href="/gostd/encoding/gob/type.go.html#5418665">m</a></span><span class="op" id="5418790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418793"><a href="/gostd/encoding/gob/type.go.html#5418665">m</a></span><span class="op" id="5418794">.</span><span class="ident" id="5418795"><a href="/gostd/encoding/gob/type.go.html#5418533">Key</a></span>&nbsp;<span class="op" id="5418799">=</span>&nbsp;<span class="ident" id="5418801"><a href="/gostd/encoding/gob/type.go.html#5418682">key</a></span><span class="op" id="5418804">.</span><span class="ident" id="5418805"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5418807">(</span><span class="op" id="5418808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418811"><a href="/gostd/encoding/gob/type.go.html#5418665">m</a></span><span class="op" id="5418812">.</span><span class="ident" id="5418813"><a href="/gostd/encoding/gob/type.go.html#5418546">Elem</a></span>&nbsp;<span class="op" id="5418818">=</span>&nbsp;<span class="ident" id="5418820"><a href="/gostd/encoding/gob/type.go.html#5418687">elem</a></span><span class="op" id="5418824">.</span><span class="ident" id="5418825"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5418827">(</span><span class="op" id="5418828">)</span><br>
<span class="lineno">360</span><span class="op" id="5418830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5418833">func</span>&nbsp;<span class="op" id="5418838">(</span><span class="ident" id="5418839">m</span>&nbsp;<span class="op" id="5418841">*</span><span class="ident" id="5418842"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5418849">)</span>&nbsp;<span class="ident" id="5418851">safeString</span><span class="op" id="5418861">(</span><span class="ident" id="5418862">seen</span>&nbsp;<span class="keyword" id="5418867">map</span><span class="op" id="5418870">[</span><span class="ident" id="5418871"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5418877">]</span><span class="builtintype" id="5418878">bool</span><span class="op" id="5418882">)</span>&nbsp;<span class="builtintype" id="5418884">string</span>&nbsp;<span class="op" id="5418891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5418894">if</span>&nbsp;<span class="ident" id="5418897"><a href="/gostd/encoding/gob/type.go.html#5418862">seen</a></span><span class="op" id="5418901">[</span><span class="ident" id="5418902"><a href="/gostd/encoding/gob/type.go.html#5418839">m</a></span><span class="op" id="5418903">.</span><span class="ident" id="5418904"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5418906">]</span>&nbsp;<span class="op" id="5418908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5418912">return</span>&nbsp;<span class="ident" id="5418919"><a href="/gostd/encoding/gob/type.go.html#5418839">m</a></span><span class="op" id="5418920">.</span><span class="ident" id="5418921"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5418927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418930"><a href="/gostd/encoding/gob/type.go.html#5418862">seen</a></span><span class="op" id="5418934">[</span><span class="ident" id="5418935"><a href="/gostd/encoding/gob/type.go.html#5418839">m</a></span><span class="op" id="5418936">.</span><span class="ident" id="5418937"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5418939">]</span>&nbsp;<span class="op" id="5418941">=</span>&nbsp;<span class="builtintype" id="5418943">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418949">key</span>&nbsp;<span class="op" id="5418953">:=</span>&nbsp;<span class="ident" id="5418956"><a href="/gostd/encoding/gob/type.go.html#5418839">m</a></span><span class="op" id="5418957">.</span><span class="ident" id="5418958"><a href="/gostd/encoding/gob/type.go.html#5418533">Key</a></span><span class="op" id="5418961">.</span><span class="ident" id="5418962"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5418969">(</span><span class="op" id="5418970">)</span><span class="op" id="5418971">.</span><span class="ident" id="5418972"><a href="/gostd/encoding/gob/type.go.html#5413691">safeString</a></span><span class="op" id="5418982">(</span><span class="ident" id="5418983"><a href="/gostd/encoding/gob/type.go.html#5418862">seen</a></span><span class="op" id="5418987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5418990">elem</span>&nbsp;<span class="op" id="5418995">:=</span>&nbsp;<span class="ident" id="5418998"><a href="/gostd/encoding/gob/type.go.html#5418839">m</a></span><span class="op" id="5418999">.</span><span class="ident" id="5419000"><a href="/gostd/encoding/gob/type.go.html#5418546">Elem</a></span><span class="op" id="5419004">.</span><span class="ident" id="5419005"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5419012">(</span><span class="op" id="5419013">)</span><span class="op" id="5419014">.</span><span class="ident" id="5419015"><a href="/gostd/encoding/gob/type.go.html#5413691">safeString</a></span><span class="op" id="5419025">(</span><span class="ident" id="5419026"><a href="/gostd/encoding/gob/type.go.html#5418862">seen</a></span><span class="op" id="5419030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419033">return</span>&nbsp;<span class="ident" id="5419040"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5419043">.</span><span class="ident" id="5419044"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5419051">(</span><span class="string" id="5419052">&#34;map[%s]%s&#34;</span><span class="op" id="5419063">,</span>&nbsp;<span class="ident" id="5419065"><a href="/gostd/encoding/gob/type.go.html#5418949">key</a></span><span class="op" id="5419068">,</span>&nbsp;<span class="ident" id="5419070"><a href="/gostd/encoding/gob/type.go.html#5418990">elem</a></span><span class="op" id="5419074">)</span><br>
<span class="lineno">370</span><span class="op" id="5419076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5419079">func</span>&nbsp;<span class="op" id="5419084">(</span><span class="ident" id="5419085">m</span>&nbsp;<span class="op" id="5419087">*</span><span class="ident" id="5419088"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5419095">)</span>&nbsp;<span class="builtintype" id="5419097">string</span><span class="op" id="5419103">(</span><span class="op" id="5419104">)</span>&nbsp;<span class="builtintype" id="5419106">string</span>&nbsp;<span class="op" id="5419113">{</span>&nbsp;<span class="keyword" id="5419115">return</span>&nbsp;<span class="ident" id="5419122"><a href="/gostd/encoding/gob/type.go.html#5419085">m</a></span><span class="op" id="5419123">.</span><span class="ident" id="5419124"><a href="/gostd/encoding/gob/type.go.html#5418851">safeString</a></span><span class="op" id="5419134">(</span><span class="builtinfunc" id="5419135">make</span><span class="op" id="5419139">(</span><span class="keyword" id="5419140">map</span><span class="op" id="5419143">[</span><span class="ident" id="5419144"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5419150">]</span><span class="builtintype" id="5419151">bool</span><span class="op" id="5419155">)</span><span class="op" id="5419156">)</span>&nbsp;<span class="op" id="5419158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5419161">//&nbsp;Slice&nbsp;type</span><br>
<span class="lineno">375</span><span class="keyword" id="5419175">type</span>&nbsp;<span class="ident" id="5419180">sliceType</span>&nbsp;<span class="keyword" id="5419190">struct</span>&nbsp;<span class="op" id="5419197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419200"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419212">Elem</span>&nbsp;<span class="ident" id="5419217"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno"></span><span class="op" id="5419224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="5419227">func</span>&nbsp;<span class="ident" id="5419232">newSliceType</span><span class="op" id="5419244">(</span><span class="ident" id="5419245">name</span>&nbsp;<span class="builtintype" id="5419250">string</span><span class="op" id="5419256">)</span>&nbsp;<span class="op" id="5419258">*</span><span class="ident" id="5419259"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span>&nbsp;<span class="op" id="5419269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419272">s</span>&nbsp;<span class="op" id="5419274">:=</span>&nbsp;<span class="op" id="5419277">&amp;</span><span class="ident" id="5419278"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5419287">{</span><span class="ident" id="5419288"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5419298">{</span><span class="ident" id="5419299"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5419303">:</span>&nbsp;<span class="ident" id="5419305"><a href="/gostd/encoding/gob/type.go.html#5419245">name</a></span><span class="op" id="5419309">}</span><span class="op" id="5419310">,</span>&nbsp;<span class="num" id="5419312">0</span><span class="op" id="5419313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419316">return</span>&nbsp;<span class="ident" id="5419323"><a href="/gostd/encoding/gob/type.go.html#5419272">s</a></span><br>
<span class="lineno"></span><span class="op" id="5419325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="5419328">func</span>&nbsp;<span class="op" id="5419333">(</span><span class="ident" id="5419334">s</span>&nbsp;<span class="op" id="5419336">*</span><span class="ident" id="5419337"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5419346">)</span>&nbsp;<span class="ident" id="5419348">init</span><span class="op" id="5419352">(</span><span class="ident" id="5419353">elem</span>&nbsp;<span class="ident" id="5419358"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5419365">)</span>&nbsp;<span class="op" id="5419367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5419370">//&nbsp;Set&nbsp;our&nbsp;type&nbsp;id&nbsp;before&nbsp;evaluating&nbsp;the&nbsp;element&#39;s,&nbsp;in&nbsp;case&nbsp;it&#39;s&nbsp;our&nbsp;own.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419445"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5419454">(</span><span class="ident" id="5419455"><a href="/gostd/encoding/gob/type.go.html#5419334">s</a></span><span class="op" id="5419456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5419459">//&nbsp;See&nbsp;the&nbsp;comments&nbsp;about&nbsp;ids&nbsp;in&nbsp;newTypeObject.&nbsp;Only&nbsp;slices&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5419524">//&nbsp;structs&nbsp;have&nbsp;mutual&nbsp;recursion.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419559">if</span>&nbsp;<span class="ident" id="5419562"><a href="/gostd/encoding/gob/type.go.html#5419353">elem</a></span><span class="op" id="5419566">.</span><span class="ident" id="5419567"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5419569">(</span><span class="op" id="5419570">)</span>&nbsp;<span class="op" id="5419572">==</span>&nbsp;<span class="num" id="5419575">0</span>&nbsp;<span class="op" id="5419577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419581"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5419590">(</span><span class="ident" id="5419591"><a href="/gostd/encoding/gob/type.go.html#5419353">elem</a></span><span class="op" id="5419595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5419598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419601"><a href="/gostd/encoding/gob/type.go.html#5419334">s</a></span><span class="op" id="5419602">.</span><span class="ident" id="5419603"><a href="/gostd/encoding/gob/type.go.html#5419212">Elem</a></span>&nbsp;<span class="op" id="5419608">=</span>&nbsp;<span class="ident" id="5419610"><a href="/gostd/encoding/gob/type.go.html#5419353">elem</a></span><span class="op" id="5419614">.</span><span class="ident" id="5419615"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5419617">(</span><span class="op" id="5419618">)</span><br>
<span class="lineno"></span><span class="op" id="5419620">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="5419623">func</span>&nbsp;<span class="op" id="5419628">(</span><span class="ident" id="5419629">s</span>&nbsp;<span class="op" id="5419631">*</span><span class="ident" id="5419632"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5419641">)</span>&nbsp;<span class="ident" id="5419643">safeString</span><span class="op" id="5419653">(</span><span class="ident" id="5419654">seen</span>&nbsp;<span class="keyword" id="5419659">map</span><span class="op" id="5419662">[</span><span class="ident" id="5419663"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5419669">]</span><span class="builtintype" id="5419670">bool</span><span class="op" id="5419674">)</span>&nbsp;<span class="builtintype" id="5419676">string</span>&nbsp;<span class="op" id="5419683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419686">if</span>&nbsp;<span class="ident" id="5419689"><a href="/gostd/encoding/gob/type.go.html#5419654">seen</a></span><span class="op" id="5419693">[</span><span class="ident" id="5419694"><a href="/gostd/encoding/gob/type.go.html#5419629">s</a></span><span class="op" id="5419695">.</span><span class="ident" id="5419696"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5419698">]</span>&nbsp;<span class="op" id="5419700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419704">return</span>&nbsp;<span class="ident" id="5419711"><a href="/gostd/encoding/gob/type.go.html#5419629">s</a></span><span class="op" id="5419712">.</span><span class="ident" id="5419713"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5419719">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419722"><a href="/gostd/encoding/gob/type.go.html#5419654">seen</a></span><span class="op" id="5419726">[</span><span class="ident" id="5419727"><a href="/gostd/encoding/gob/type.go.html#5419629">s</a></span><span class="op" id="5419728">.</span><span class="ident" id="5419729"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5419731">]</span>&nbsp;<span class="op" id="5419733">=</span>&nbsp;<span class="builtintype" id="5419735">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5419741">return</span>&nbsp;<span class="ident" id="5419748"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5419751">.</span><span class="ident" id="5419752"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5419759">(</span><span class="string" id="5419760">&#34;[]%s&#34;</span><span class="op" id="5419766">,</span>&nbsp;<span class="ident" id="5419768"><a href="/gostd/encoding/gob/type.go.html#5419629">s</a></span><span class="op" id="5419769">.</span><span class="ident" id="5419770"><a href="/gostd/encoding/gob/type.go.html#5419212">Elem</a></span><span class="op" id="5419774">.</span><span class="ident" id="5419775"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5419782">(</span><span class="op" id="5419783">)</span><span class="op" id="5419784">.</span><span class="ident" id="5419785"><a href="/gostd/encoding/gob/type.go.html#5413691">safeString</a></span><span class="op" id="5419795">(</span><span class="ident" id="5419796"><a href="/gostd/encoding/gob/type.go.html#5419654">seen</a></span><span class="op" id="5419800">)</span><span class="op" id="5419801">)</span><br>
<span class="lineno"></span><span class="op" id="5419803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5419806">func</span>&nbsp;<span class="op" id="5419811">(</span><span class="ident" id="5419812">s</span>&nbsp;<span class="op" id="5419814">*</span><span class="ident" id="5419815"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5419824">)</span>&nbsp;<span class="builtintype" id="5419826">string</span><span class="op" id="5419832">(</span><span class="op" id="5419833">)</span>&nbsp;<span class="builtintype" id="5419835">string</span>&nbsp;<span class="op" id="5419842">{</span>&nbsp;<span class="keyword" id="5419844">return</span>&nbsp;<span class="ident" id="5419851"><a href="/gostd/encoding/gob/type.go.html#5419812">s</a></span><span class="op" id="5419852">.</span><span class="ident" id="5419853"><a href="/gostd/encoding/gob/type.go.html#5419643">safeString</a></span><span class="op" id="5419863">(</span><span class="builtinfunc" id="5419864">make</span><span class="op" id="5419868">(</span><span class="keyword" id="5419869">map</span><span class="op" id="5419872">[</span><span class="ident" id="5419873"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5419879">]</span><span class="builtintype" id="5419880">bool</span><span class="op" id="5419884">)</span><span class="op" id="5419885">)</span>&nbsp;<span class="op" id="5419887">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="5419890">//&nbsp;Struct&nbsp;type</span><br>
<span class="lineno"></span><span class="keyword" id="5419905">type</span>&nbsp;<span class="ident" id="5419910">fieldType</span>&nbsp;<span class="keyword" id="5419920">struct</span>&nbsp;<span class="op" id="5419927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419930">Name</span>&nbsp;<span class="builtintype" id="5419935">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419943">Id</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5419948"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno">410</span><span class="op" id="5419955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5419958">type</span>&nbsp;<span class="ident" id="5419963">structType</span>&nbsp;<span class="keyword" id="5419974">struct</span>&nbsp;<span class="op" id="5419981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419984"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5419996">Field</span>&nbsp;<span class="op" id="5420002">[</span><span class="op" id="5420003">]</span><span class="op" id="5420004">*</span><span class="ident" id="5420005"><a href="/gostd/encoding/gob/type.go.html#5419910">fieldType</a></span><br>
<span class="lineno">415</span><span class="op" id="5420015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5420018">func</span>&nbsp;<span class="op" id="5420023">(</span><span class="ident" id="5420024">s</span>&nbsp;<span class="op" id="5420026">*</span><span class="ident" id="5420027"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><span class="op" id="5420037">)</span>&nbsp;<span class="ident" id="5420039">safeString</span><span class="op" id="5420049">(</span><span class="ident" id="5420050">seen</span>&nbsp;<span class="keyword" id="5420055">map</span><span class="op" id="5420058">[</span><span class="ident" id="5420059"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5420065">]</span><span class="builtintype" id="5420066">bool</span><span class="op" id="5420070">)</span>&nbsp;<span class="builtintype" id="5420072">string</span>&nbsp;<span class="op" id="5420079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420082">if</span>&nbsp;<span class="ident" id="5420085"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span>&nbsp;<span class="op" id="5420087">==</span>&nbsp;<span class="builtintype" id="5420090">nil</span>&nbsp;<span class="op" id="5420094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420098">return</span>&nbsp;<span class="string" id="5420105">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5420114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420117">if</span>&nbsp;<span class="ident" id="5420120">_</span><span class="op" id="5420121">,</span>&nbsp;<span class="ident" id="5420123">ok</span>&nbsp;<span class="op" id="5420126">:=</span>&nbsp;<span class="ident" id="5420129"><a href="/gostd/encoding/gob/type.go.html#5420050">seen</a></span><span class="op" id="5420133">[</span><span class="ident" id="5420134"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span><span class="op" id="5420135">.</span><span class="ident" id="5420136"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5420138">]</span><span class="op" id="5420139">;</span>&nbsp;<span class="ident" id="5420141"><a href="/gostd/encoding/gob/type.go.html#5420123">ok</a></span>&nbsp;<span class="op" id="5420144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420148">return</span>&nbsp;<span class="ident" id="5420155"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span><span class="op" id="5420156">.</span><span class="ident" id="5420157"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5420163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420166"><a href="/gostd/encoding/gob/type.go.html#5420050">seen</a></span><span class="op" id="5420170">[</span><span class="ident" id="5420171"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span><span class="op" id="5420172">.</span><span class="ident" id="5420173"><a href="/gostd/encoding/gob/type.go.html#5414823">Id</a></span><span class="op" id="5420175">]</span>&nbsp;<span class="op" id="5420177">=</span>&nbsp;<span class="builtintype" id="5420179">true</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420185">str</span>&nbsp;<span class="op" id="5420189">:=</span>&nbsp;<span class="ident" id="5420192"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span><span class="op" id="5420193">.</span><span class="ident" id="5420194"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span>&nbsp;<span class="op" id="5420199">+</span>&nbsp;<span class="string" id="5420201">&#34;&nbsp;=&nbsp;struct&nbsp;{&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420217">for</span>&nbsp;<span class="ident" id="5420221">_</span><span class="op" id="5420222">,</span>&nbsp;<span class="ident" id="5420224">f</span>&nbsp;<span class="op" id="5420226">:=</span>&nbsp;<span class="keyword" id="5420229">range</span>&nbsp;<span class="ident" id="5420235"><a href="/gostd/encoding/gob/type.go.html#5420024">s</a></span><span class="op" id="5420236">.</span><span class="ident" id="5420237"><a href="/gostd/encoding/gob/type.go.html#5419996">Field</a></span>&nbsp;<span class="op" id="5420243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420247"><a href="/gostd/encoding/gob/type.go.html#5420185">str</a></span>&nbsp;<span class="op" id="5420251">+=</span>&nbsp;<span class="ident" id="5420254"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5420257">.</span><span class="ident" id="5420258"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5420265">(</span><span class="string" id="5420266">&#34;%s&nbsp;%s;&nbsp;&#34;</span><span class="op" id="5420275">,</span>&nbsp;<span class="ident" id="5420277"><a href="/gostd/encoding/gob/type.go.html#5420224">f</a></span><span class="op" id="5420278">.</span><span class="ident" id="5420279"><a href="/gostd/encoding/gob/type.go.html#5419930">Name</a></span><span class="op" id="5420283">,</span>&nbsp;<span class="ident" id="5420285"><a href="/gostd/encoding/gob/type.go.html#5420224">f</a></span><span class="op" id="5420286">.</span><span class="ident" id="5420287"><a href="/gostd/encoding/gob/type.go.html#5419943">Id</a></span><span class="op" id="5420289">.</span><span class="ident" id="5420290"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5420297">(</span><span class="op" id="5420298">)</span><span class="op" id="5420299">.</span><span class="ident" id="5420300"><a href="/gostd/encoding/gob/type.go.html#5413691">safeString</a></span><span class="op" id="5420310">(</span><span class="ident" id="5420311"><a href="/gostd/encoding/gob/type.go.html#5420050">seen</a></span><span class="op" id="5420315">)</span><span class="op" id="5420316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5420319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420322"><a href="/gostd/encoding/gob/type.go.html#5420185">str</a></span>&nbsp;<span class="op" id="5420326">+=</span>&nbsp;<span class="string" id="5420329">&#34;}&#34;</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420334">return</span>&nbsp;<span class="ident" id="5420341"><a href="/gostd/encoding/gob/type.go.html#5420185">str</a></span><br>
<span class="lineno"></span><span class="op" id="5420345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5420348">func</span>&nbsp;<span class="op" id="5420353">(</span><span class="ident" id="5420354">s</span>&nbsp;<span class="op" id="5420356">*</span><span class="ident" id="5420357"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><span class="op" id="5420367">)</span>&nbsp;<span class="builtintype" id="5420369">string</span><span class="op" id="5420375">(</span><span class="op" id="5420376">)</span>&nbsp;<span class="builtintype" id="5420378">string</span>&nbsp;<span class="op" id="5420385">{</span>&nbsp;<span class="keyword" id="5420387">return</span>&nbsp;<span class="ident" id="5420394"><a href="/gostd/encoding/gob/type.go.html#5420354">s</a></span><span class="op" id="5420395">.</span><span class="ident" id="5420396"><a href="/gostd/encoding/gob/type.go.html#5420039">safeString</a></span><span class="op" id="5420406">(</span><span class="builtinfunc" id="5420407">make</span><span class="op" id="5420411">(</span><span class="keyword" id="5420412">map</span><span class="op" id="5420415">[</span><span class="ident" id="5420416"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5420422">]</span><span class="builtintype" id="5420423">bool</span><span class="op" id="5420427">)</span><span class="op" id="5420428">)</span>&nbsp;<span class="op" id="5420430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span><span class="keyword" id="5420433">func</span>&nbsp;<span class="ident" id="5420438">newStructType</span><span class="op" id="5420451">(</span><span class="ident" id="5420452">name</span>&nbsp;<span class="builtintype" id="5420457">string</span><span class="op" id="5420463">)</span>&nbsp;<span class="op" id="5420465">*</span><span class="ident" id="5420466"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span>&nbsp;<span class="op" id="5420477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420480">s</span>&nbsp;<span class="op" id="5420482">:=</span>&nbsp;<span class="op" id="5420485">&amp;</span><span class="ident" id="5420486"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><span class="op" id="5420496">{</span><span class="ident" id="5420497"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5420507">{</span><span class="ident" id="5420508"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5420512">:</span>&nbsp;<span class="ident" id="5420514"><a href="/gostd/encoding/gob/type.go.html#5420452">name</a></span><span class="op" id="5420518">}</span><span class="op" id="5420519">,</span>&nbsp;<span class="builtintype" id="5420521">nil</span><span class="op" id="5420524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5420527">//&nbsp;For&nbsp;historical&nbsp;reasons&nbsp;we&nbsp;set&nbsp;the&nbsp;id&nbsp;here&nbsp;rather&nbsp;than&nbsp;init.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5420591">//&nbsp;See&nbsp;the&nbsp;comment&nbsp;in&nbsp;newTypeObject&nbsp;for&nbsp;details.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5420641"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5420650">(</span><span class="ident" id="5420651"><a href="/gostd/encoding/gob/type.go.html#5420480">s</a></span><span class="op" id="5420652">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5420655">return</span>&nbsp;<span class="ident" id="5420662"><a href="/gostd/encoding/gob/type.go.html#5420480">s</a></span><br>
<span class="lineno"></span><span class="op" id="5420664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5420667">//&nbsp;newTypeObject&nbsp;allocates&nbsp;a&nbsp;gobType&nbsp;for&nbsp;the&nbsp;reflection&nbsp;type&nbsp;rt.</span><br>
<span class="lineno"></span><span class="comment" id="5420732">//&nbsp;Unless&nbsp;ut&nbsp;represents&nbsp;a&nbsp;GobEncoder,&nbsp;rt&nbsp;should&nbsp;be&nbsp;the&nbsp;base&nbsp;type</span><br>
<span class="lineno">445</span><span class="comment" id="5420797">//&nbsp;of&nbsp;ut.</span><br>
<span class="lineno"></span><span class="comment" id="5420807">//&nbsp;This&nbsp;is&nbsp;only&nbsp;called&nbsp;from&nbsp;the&nbsp;encoding&nbsp;side.&nbsp;The&nbsp;decoding&nbsp;side</span><br>
<span class="lineno"></span><span class="comment" id="5420872">//&nbsp;works&nbsp;through&nbsp;typeIds&nbsp;and&nbsp;userTypeInfos&nbsp;alone.</span><br>
<span class="lineno"></span><span class="keyword" id="5420922">func</span>&nbsp;<span class="ident" id="5420927">newTypeObject</span><span class="op" id="5420940">(</span><span class="ident" id="5420941">name</span>&nbsp;<span class="builtintype" id="5420946">string</span><span class="op" id="5420952">,</span>&nbsp;<span class="ident" id="5420954">ut</span>&nbsp;<span class="op" id="5420957">*</span><span class="ident" id="5420958"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5420970">,</span>&nbsp;<span class="ident" id="5420972">rt</span>&nbsp;<span class="ident" id="5420975"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5420982">.</span><span class="ident" id="5420983"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5420987">)</span>&nbsp;<span class="op" id="5420989">(</span><span class="ident" id="5420990"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5420997">,</span>&nbsp;<span class="builtintype" id="5420999">error</span><span class="op" id="5421004">)</span>&nbsp;<span class="op" id="5421006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5421009">//&nbsp;Does&nbsp;this&nbsp;type&nbsp;implement&nbsp;GobEncoder?</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421050">if</span>&nbsp;<span class="ident" id="5421053"><a href="/gostd/encoding/gob/type.go.html#5420954">ut</a></span><span class="op" id="5421055">.</span><span class="ident" id="5421056"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5421068">!=</span>&nbsp;<span class="num" id="5421071">0</span>&nbsp;<span class="op" id="5421073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421077">return</span>&nbsp;<span class="ident" id="5421084"><a href="/gostd/encoding/gob/type.go.html#5418219">newGobEncoderType</a></span><span class="op" id="5421101">(</span><span class="ident" id="5421102"><a href="/gostd/encoding/gob/type.go.html#5420941">name</a></span><span class="op" id="5421106">)</span><span class="op" id="5421107">,</span>&nbsp;<span class="builtintype" id="5421109">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5421114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421117">var</span>&nbsp;<span class="ident" id="5421121">err</span>&nbsp;<span class="builtintype" id="5421125">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421132">var</span>&nbsp;<span class="ident" id="5421136">type0</span><span class="op" id="5421141">,</span>&nbsp;<span class="ident" id="5421143">type1</span>&nbsp;<span class="ident" id="5421149"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421158">defer</span>&nbsp;<span class="keyword" id="5421164">func</span><span class="op" id="5421168">(</span><span class="op" id="5421169">)</span>&nbsp;<span class="op" id="5421171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421175">if</span>&nbsp;<span class="ident" id="5421178"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5421182">!=</span>&nbsp;<span class="builtintype" id="5421185">nil</span>&nbsp;<span class="op" id="5421189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5421194">delete</span><span class="op" id="5421200">(</span><span class="ident" id="5421201"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5421206">,</span>&nbsp;<span class="ident" id="5421208"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5421210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5421214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5421217">}</span><span class="op" id="5421218">(</span><span class="op" id="5421219">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5421222">//&nbsp;Install&nbsp;the&nbsp;top-level&nbsp;type&nbsp;before&nbsp;the&nbsp;subtypes&nbsp;(e.g.&nbsp;struct&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5421293">//&nbsp;fields)&nbsp;so&nbsp;recursive&nbsp;types&nbsp;can&nbsp;be&nbsp;constructed&nbsp;safely.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421351">switch</span>&nbsp;<span class="ident" id="5421358">t</span>&nbsp;<span class="op" id="5421360">:=</span>&nbsp;<span class="ident" id="5421363"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5421365">;</span>&nbsp;<span class="ident" id="5421367"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5421368">.</span><span class="ident" id="5421369"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5421373">(</span><span class="op" id="5421374">)</span>&nbsp;<span class="op" id="5421376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5421379">//&nbsp;All&nbsp;basic&nbsp;types&nbsp;are&nbsp;easy:&nbsp;they&nbsp;are&nbsp;predefined.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421430">case</span>&nbsp;<span class="ident" id="5421435"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421442">.</span><span class="ident" id="5421443"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="5421447">:</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421451">return</span>&nbsp;<span class="ident" id="5421458"><a href="/gostd/encoding/gob/type.go.html#5415411">tBool</a></span><span class="op" id="5421463">.</span><span class="ident" id="5421464"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421471">(</span><span class="op" id="5421472">)</span><span class="op" id="5421473">,</span>&nbsp;<span class="builtintype" id="5421475">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421481">case</span>&nbsp;<span class="ident" id="5421486"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421493">.</span><span class="ident" id="5421494"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="5421497">,</span>&nbsp;<span class="ident" id="5421499"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421506">.</span><span class="ident" id="5421507"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="5421511">,</span>&nbsp;<span class="ident" id="5421513"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421520">.</span><span class="ident" id="5421521"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="5421526">,</span>&nbsp;<span class="ident" id="5421528"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421535">.</span><span class="ident" id="5421536"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="5421541">,</span>&nbsp;<span class="ident" id="5421543"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421550">.</span><span class="ident" id="5421551"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="5421556">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421560">return</span>&nbsp;<span class="ident" id="5421567"><a href="/gostd/encoding/gob/type.go.html#5415464">tInt</a></span><span class="op" id="5421571">.</span><span class="ident" id="5421572"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421579">(</span><span class="op" id="5421580">)</span><span class="op" id="5421581">,</span>&nbsp;<span class="builtintype" id="5421583">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421589">case</span>&nbsp;<span class="ident" id="5421594"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421601">.</span><span class="ident" id="5421602"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="5421606">,</span>&nbsp;<span class="ident" id="5421608"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421615">.</span><span class="ident" id="5421616"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="5421621">,</span>&nbsp;<span class="ident" id="5421623"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421630">.</span><span class="ident" id="5421631"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="5421637">,</span>&nbsp;<span class="ident" id="5421639"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421646">.</span><span class="ident" id="5421647"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="5421653">,</span>&nbsp;<span class="ident" id="5421655"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421662">.</span><span class="ident" id="5421663"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="5421669">,</span>&nbsp;<span class="ident" id="5421671"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421678">.</span><span class="ident" id="5421679"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="5421686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421690">return</span>&nbsp;<span class="ident" id="5421697"><a href="/gostd/encoding/gob/type.go.html#5415515">tUint</a></span><span class="op" id="5421702">.</span><span class="ident" id="5421703"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421710">(</span><span class="op" id="5421711">)</span><span class="op" id="5421712">,</span>&nbsp;<span class="builtintype" id="5421714">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421720">case</span>&nbsp;<span class="ident" id="5421725"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421732">.</span><span class="ident" id="5421733"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="5421740">,</span>&nbsp;<span class="ident" id="5421742"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421749">.</span><span class="ident" id="5421750"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="5421757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421761">return</span>&nbsp;<span class="ident" id="5421768"><a href="/gostd/encoding/gob/type.go.html#5415568">tFloat</a></span><span class="op" id="5421774">.</span><span class="ident" id="5421775"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421782">(</span><span class="op" id="5421783">)</span><span class="op" id="5421784">,</span>&nbsp;<span class="builtintype" id="5421786">nil</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421792">case</span>&nbsp;<span class="ident" id="5421797"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421804">.</span><span class="ident" id="5421805"><a href="/gostd/reflect/type.go.html#2787999">Complex64</a></span><span class="op" id="5421814">,</span>&nbsp;<span class="ident" id="5421816"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421823">.</span><span class="ident" id="5421824"><a href="/gostd/reflect/type.go.html#2788010">Complex128</a></span><span class="op" id="5421834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421838">return</span>&nbsp;<span class="ident" id="5421845"><a href="/gostd/encoding/gob/type.go.html#5415738">tComplex</a></span><span class="op" id="5421853">.</span><span class="ident" id="5421854"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421861">(</span><span class="op" id="5421862">)</span><span class="op" id="5421863">,</span>&nbsp;<span class="builtintype" id="5421865">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421871">case</span>&nbsp;<span class="ident" id="5421876"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421883">.</span><span class="ident" id="5421884"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="5421890">:</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421894">return</span>&nbsp;<span class="ident" id="5421901"><a href="/gostd/encoding/gob/type.go.html#5415681">tString</a></span><span class="op" id="5421908">.</span><span class="ident" id="5421909"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421916">(</span><span class="op" id="5421917">)</span><span class="op" id="5421918">,</span>&nbsp;<span class="builtintype" id="5421920">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421926">case</span>&nbsp;<span class="ident" id="5421931"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421938">.</span><span class="ident" id="5421939"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="5421948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421952">return</span>&nbsp;<span class="ident" id="5421959"><a href="/gostd/encoding/gob/type.go.html#5415800">tInterface</a></span><span class="op" id="5421969">.</span><span class="ident" id="5421970"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5421977">(</span><span class="op" id="5421978">)</span><span class="op" id="5421979">,</span>&nbsp;<span class="builtintype" id="5421981">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5421987">case</span>&nbsp;<span class="ident" id="5421992"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5421999">.</span><span class="ident" id="5422000"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="5422005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422009">at</span>&nbsp;<span class="op" id="5422012">:=</span>&nbsp;<span class="ident" id="5422015"><a href="/gostd/encoding/gob/type.go.html#5417548">newArrayType</a></span><span class="op" id="5422027">(</span><span class="ident" id="5422028"><a href="/gostd/encoding/gob/type.go.html#5420941">name</a></span><span class="op" id="5422032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422036"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5422041">[</span><span class="ident" id="5422042"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5422044">]</span>&nbsp;<span class="op" id="5422046">=</span>&nbsp;<span class="ident" id="5422048"><a href="/gostd/encoding/gob/type.go.html#5422009">at</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422053"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5422058">,</span>&nbsp;<span class="ident" id="5422060"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422064">=</span>&nbsp;<span class="ident" id="5422066"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5422077">(</span><span class="string" id="5422078">&#34;&#34;</span><span class="op" id="5422080">,</span>&nbsp;<span class="ident" id="5422082"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5422083">.</span><span class="ident" id="5422084"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5422088">(</span><span class="op" id="5422089">)</span><span class="op" id="5422090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422094">if</span>&nbsp;<span class="ident" id="5422097"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422101">!=</span>&nbsp;<span class="builtintype" id="5422104">nil</span>&nbsp;<span class="op" id="5422108">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422113">return</span>&nbsp;<span class="builtintype" id="5422120">nil</span><span class="op" id="5422123">,</span>&nbsp;<span class="ident" id="5422125"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5422131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422135">//&nbsp;Historical&nbsp;aside:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422158">//&nbsp;For&nbsp;arrays,&nbsp;maps,&nbsp;and&nbsp;slices,&nbsp;we&nbsp;set&nbsp;the&nbsp;type&nbsp;id&nbsp;after&nbsp;the&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422231">//&nbsp;are&nbsp;constructed.&nbsp;This&nbsp;is&nbsp;to&nbsp;retain&nbsp;the&nbsp;order&nbsp;of&nbsp;type&nbsp;id&nbsp;allocation&nbsp;after</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422309">//&nbsp;a&nbsp;fix&nbsp;made&nbsp;to&nbsp;handle&nbsp;recursive&nbsp;types,&nbsp;which&nbsp;changed&nbsp;the&nbsp;order&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422379">//&nbsp;which&nbsp;types&nbsp;are&nbsp;built.&nbsp;&nbsp;Delaying&nbsp;the&nbsp;setting&nbsp;in&nbsp;this&nbsp;way&nbsp;preserves</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422451">//&nbsp;type&nbsp;ids&nbsp;while&nbsp;allowing&nbsp;recursive&nbsp;types&nbsp;to&nbsp;be&nbsp;described.&nbsp;Structs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422522">//&nbsp;done&nbsp;below,&nbsp;were&nbsp;already&nbsp;handling&nbsp;recursion&nbsp;correctly&nbsp;so&nbsp;they</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422589">//&nbsp;assign&nbsp;the&nbsp;top-level&nbsp;id&nbsp;before&nbsp;those&nbsp;of&nbsp;the&nbsp;field.</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422645"><a href="/gostd/encoding/gob/type.go.html#5422009">at</a></span><span class="op" id="5422647">.</span><span class="ident" id="5422648"><a href="/gostd/encoding/gob/type.go.html#5417667">init</a></span><span class="op" id="5422652">(</span><span class="ident" id="5422653"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5422658">,</span>&nbsp;<span class="ident" id="5422660"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5422661">.</span><span class="ident" id="5422662"><a href="/gostd/reflect/type.go.html#2786440">Len</a></span><span class="op" id="5422665">(</span><span class="op" id="5422666">)</span><span class="op" id="5422667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422671">return</span>&nbsp;<span class="ident" id="5422678"><a href="/gostd/encoding/gob/type.go.html#5422009">at</a></span><span class="op" id="5422680">,</span>&nbsp;<span class="builtintype" id="5422682">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422688">case</span>&nbsp;<span class="ident" id="5422693"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5422700">.</span><span class="ident" id="5422701"><a href="/gostd/reflect/type.go.html#2788052">Map</a></span><span class="op" id="5422704">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422708">mt</span>&nbsp;<span class="op" id="5422711">:=</span>&nbsp;<span class="ident" id="5422714"><a href="/gostd/encoding/gob/type.go.html#5418566">newMapType</a></span><span class="op" id="5422724">(</span><span class="ident" id="5422725"><a href="/gostd/encoding/gob/type.go.html#5420941">name</a></span><span class="op" id="5422729">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422733"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5422738">[</span><span class="ident" id="5422739"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5422741">]</span>&nbsp;<span class="op" id="5422743">=</span>&nbsp;<span class="ident" id="5422745"><a href="/gostd/encoding/gob/type.go.html#5422708">mt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422750"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5422755">,</span>&nbsp;<span class="ident" id="5422757"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422761">=</span>&nbsp;<span class="ident" id="5422763"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5422774">(</span><span class="string" id="5422775">&#34;&#34;</span><span class="op" id="5422777">,</span>&nbsp;<span class="ident" id="5422779"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5422780">.</span><span class="ident" id="5422781"><a href="/gostd/reflect/type.go.html#2786340">Key</a></span><span class="op" id="5422784">(</span><span class="op" id="5422785">)</span><span class="op" id="5422786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422790">if</span>&nbsp;<span class="ident" id="5422793"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422797">!=</span>&nbsp;<span class="builtintype" id="5422800">nil</span>&nbsp;<span class="op" id="5422804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422809">return</span>&nbsp;<span class="builtintype" id="5422816">nil</span><span class="op" id="5422819">,</span>&nbsp;<span class="ident" id="5422821"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5422827">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422831"><a href="/gostd/encoding/gob/type.go.html#5421143">type1</a></span><span class="op" id="5422836">,</span>&nbsp;<span class="ident" id="5422838"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422842">=</span>&nbsp;<span class="ident" id="5422844"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5422855">(</span><span class="string" id="5422856">&#34;&#34;</span><span class="op" id="5422858">,</span>&nbsp;<span class="ident" id="5422860"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5422861">.</span><span class="ident" id="5422862"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5422866">(</span><span class="op" id="5422867">)</span><span class="op" id="5422868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422872">if</span>&nbsp;<span class="ident" id="5422875"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5422879">!=</span>&nbsp;<span class="builtintype" id="5422882">nil</span>&nbsp;<span class="op" id="5422886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422891">return</span>&nbsp;<span class="builtintype" id="5422898">nil</span><span class="op" id="5422901">,</span>&nbsp;<span class="ident" id="5422903"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5422909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5422913"><a href="/gostd/encoding/gob/type.go.html#5422708">mt</a></span><span class="op" id="5422915">.</span><span class="ident" id="5422916"><a href="/gostd/encoding/gob/type.go.html#5418677">init</a></span><span class="op" id="5422920">(</span><span class="ident" id="5422921"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5422926">,</span>&nbsp;<span class="ident" id="5422928"><a href="/gostd/encoding/gob/type.go.html#5421143">type1</a></span><span class="op" id="5422933">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422937">return</span>&nbsp;<span class="ident" id="5422944"><a href="/gostd/encoding/gob/type.go.html#5422708">mt</a></span><span class="op" id="5422946">,</span>&nbsp;<span class="builtintype" id="5422948">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5422954">case</span>&nbsp;<span class="ident" id="5422959"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5422966">.</span><span class="ident" id="5422967"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="5422972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5422976">//&nbsp;[]byte&nbsp;==&nbsp;[]uint8&nbsp;is&nbsp;a&nbsp;special&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423017">if</span>&nbsp;<span class="ident" id="5423020"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5423021">.</span><span class="ident" id="5423022"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5423026">(</span><span class="op" id="5423027">)</span><span class="op" id="5423028">.</span><span class="ident" id="5423029"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5423033">(</span><span class="op" id="5423034">)</span>&nbsp;<span class="op" id="5423036">==</span>&nbsp;<span class="ident" id="5423039"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5423046">.</span><span class="ident" id="5423047"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="5423053">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423058">return</span>&nbsp;<span class="ident" id="5423065"><a href="/gostd/encoding/gob/type.go.html#5415625">tBytes</a></span><span class="op" id="5423071">.</span><span class="ident" id="5423072"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5423079">(</span><span class="op" id="5423080">)</span><span class="op" id="5423081">,</span>&nbsp;<span class="builtintype" id="5423083">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423093">st</span>&nbsp;<span class="op" id="5423096">:=</span>&nbsp;<span class="ident" id="5423099"><a href="/gostd/encoding/gob/type.go.html#5419232">newSliceType</a></span><span class="op" id="5423111">(</span><span class="ident" id="5423112"><a href="/gostd/encoding/gob/type.go.html#5420941">name</a></span><span class="op" id="5423116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423120"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5423125">[</span><span class="ident" id="5423126"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5423128">]</span>&nbsp;<span class="op" id="5423130">=</span>&nbsp;<span class="ident" id="5423132"><a href="/gostd/encoding/gob/type.go.html#5423093">st</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423137"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5423142">,</span>&nbsp;<span class="ident" id="5423144"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5423148">=</span>&nbsp;<span class="ident" id="5423150"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5423161">(</span><span class="ident" id="5423162"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5423163">.</span><span class="ident" id="5423164"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5423168">(</span><span class="op" id="5423169">)</span><span class="op" id="5423170">.</span><span class="ident" id="5423171"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5423175">(</span><span class="op" id="5423176">)</span><span class="op" id="5423177">,</span>&nbsp;<span class="ident" id="5423179"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5423180">.</span><span class="ident" id="5423181"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5423185">(</span><span class="op" id="5423186">)</span><span class="op" id="5423187">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423191">if</span>&nbsp;<span class="ident" id="5423194"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span>&nbsp;<span class="op" id="5423198">!=</span>&nbsp;<span class="builtintype" id="5423201">nil</span>&nbsp;<span class="op" id="5423205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423210">return</span>&nbsp;<span class="builtintype" id="5423217">nil</span><span class="op" id="5423220">,</span>&nbsp;<span class="ident" id="5423222"><a href="/gostd/encoding/gob/type.go.html#5421121">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423232"><a href="/gostd/encoding/gob/type.go.html#5423093">st</a></span><span class="op" id="5423234">.</span><span class="ident" id="5423235"><a href="/gostd/encoding/gob/type.go.html#5419348">init</a></span><span class="op" id="5423239">(</span><span class="ident" id="5423240"><a href="/gostd/encoding/gob/type.go.html#5421136">type0</a></span><span class="op" id="5423245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423249">return</span>&nbsp;<span class="ident" id="5423256"><a href="/gostd/encoding/gob/type.go.html#5423093">st</a></span><span class="op" id="5423258">,</span>&nbsp;<span class="builtintype" id="5423260">nil</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423266">case</span>&nbsp;<span class="ident" id="5423271"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5423278">.</span><span class="ident" id="5423279"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span><span class="op" id="5423285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423289">st</span>&nbsp;<span class="op" id="5423292">:=</span>&nbsp;<span class="ident" id="5423295"><a href="/gostd/encoding/gob/type.go.html#5420438">newStructType</a></span><span class="op" id="5423308">(</span><span class="ident" id="5423309"><a href="/gostd/encoding/gob/type.go.html#5420941">name</a></span><span class="op" id="5423313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423317"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5423322">[</span><span class="ident" id="5423323"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5423325">]</span>&nbsp;<span class="op" id="5423327">=</span>&nbsp;<span class="ident" id="5423329"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423334"><a href="/gostd/encoding/gob/type.go.html#5413781">idToType</a></span><span class="op" id="5423342">[</span><span class="ident" id="5423343"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><span class="op" id="5423345">.</span><span class="ident" id="5423346"><a href="/gostd/encoding/gob/type.go.html#5414859">id</a></span><span class="op" id="5423348">(</span><span class="op" id="5423349">)</span><span class="op" id="5423350">]</span>&nbsp;<span class="op" id="5423352">=</span>&nbsp;<span class="ident" id="5423354"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423359">for</span>&nbsp;<span class="ident" id="5423363">i</span>&nbsp;<span class="op" id="5423365">:=</span>&nbsp;<span class="num" id="5423368">0</span><span class="op" id="5423369">;</span>&nbsp;<span class="ident" id="5423371"><a href="/gostd/encoding/gob/type.go.html#5423363">i</a></span>&nbsp;<span class="op" id="5423373">&lt;</span>&nbsp;<span class="ident" id="5423375"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5423376">.</span><span class="ident" id="5423377"><a href="/gostd/reflect/type.go.html#2786550">NumField</a></span><span class="op" id="5423385">(</span><span class="op" id="5423386">)</span><span class="op" id="5423387">;</span>&nbsp;<span class="ident" id="5423389"><a href="/gostd/encoding/gob/type.go.html#5423363">i</a></span><span class="op" id="5423390">++</span>&nbsp;<span class="op" id="5423393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423398">f</span>&nbsp;<span class="op" id="5423400">:=</span>&nbsp;<span class="ident" id="5423403"><a href="/gostd/encoding/gob/type.go.html#5421358">t</a></span><span class="op" id="5423404">.</span><span class="ident" id="5423405"><a href="/gostd/reflect/type.go.html#2785427">Field</a></span><span class="op" id="5423410">(</span><span class="ident" id="5423411"><a href="/gostd/encoding/gob/type.go.html#5423363">i</a></span><span class="op" id="5423412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423417">if</span>&nbsp;<span class="op" id="5423420">!</span><span class="ident" id="5423421"><a href="/gostd/encoding/gob/type.go.html#5424524">isSent</a></span><span class="op" id="5423427">(</span><span class="op" id="5423428">&amp;</span><span class="ident" id="5423429"><a href="/gostd/encoding/gob/type.go.html#5423398">f</a></span><span class="op" id="5423430">)</span>&nbsp;<span class="op" id="5423432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423438">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423450">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423455">typ</span>&nbsp;<span class="op" id="5423459">:=</span>&nbsp;<span class="ident" id="5423462"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5423470">(</span><span class="ident" id="5423471"><a href="/gostd/encoding/gob/type.go.html#5423398">f</a></span><span class="op" id="5423472">.</span><span class="ident" id="5423473"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><span class="op" id="5423477">)</span><span class="op" id="5423478">.</span><span class="ident" id="5423479"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423487">tname</span>&nbsp;<span class="op" id="5423493">:=</span>&nbsp;<span class="ident" id="5423496"><a href="/gostd/encoding/gob/type.go.html#5423455">typ</a></span><span class="op" id="5423499">.</span><span class="ident" id="5423500"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5423504">(</span><span class="op" id="5423505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423510">if</span>&nbsp;<span class="ident" id="5423513"><a href="/gostd/encoding/gob/type.go.html#5423487">tname</a></span>&nbsp;<span class="op" id="5423519">==</span>&nbsp;<span class="string" id="5423522">&#34;&#34;</span>&nbsp;<span class="op" id="5423525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423531">t</span>&nbsp;<span class="op" id="5423533">:=</span>&nbsp;<span class="ident" id="5423536"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5423544">(</span><span class="ident" id="5423545"><a href="/gostd/encoding/gob/type.go.html#5423398">f</a></span><span class="op" id="5423546">.</span><span class="ident" id="5423547"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><span class="op" id="5423551">)</span><span class="op" id="5423552">.</span><span class="ident" id="5423553"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423562"><a href="/gostd/encoding/gob/type.go.html#5423487">tname</a></span>&nbsp;<span class="op" id="5423568">=</span>&nbsp;<span class="ident" id="5423570"><a href="/gostd/encoding/gob/type.go.html#5423531">t</a></span><span class="op" id="5423571">.</span><span class="ident" id="5423572"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5423578">(</span><span class="op" id="5423579">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423589">gt</span><span class="op" id="5423591">,</span>&nbsp;<span class="ident" id="5423593">err</span>&nbsp;<span class="op" id="5423597">:=</span>&nbsp;<span class="ident" id="5423600"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5423611">(</span><span class="ident" id="5423612"><a href="/gostd/encoding/gob/type.go.html#5423487">tname</a></span><span class="op" id="5423617">,</span>&nbsp;<span class="ident" id="5423619"><a href="/gostd/encoding/gob/type.go.html#5423398">f</a></span><span class="op" id="5423620">.</span><span class="ident" id="5423621"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><span class="op" id="5423625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423630">if</span>&nbsp;<span class="ident" id="5423633"><a href="/gostd/encoding/gob/type.go.html#5423593">err</a></span>&nbsp;<span class="op" id="5423637">!=</span>&nbsp;<span class="builtintype" id="5423640">nil</span>&nbsp;<span class="op" id="5423644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423650">return</span>&nbsp;<span class="builtintype" id="5423657">nil</span><span class="op" id="5423660">,</span>&nbsp;<span class="ident" id="5423662"><a href="/gostd/encoding/gob/type.go.html#5423593">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423669">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5423674">//&nbsp;Some&nbsp;mutually&nbsp;recursive&nbsp;types&nbsp;can&nbsp;cause&nbsp;us&nbsp;to&nbsp;be&nbsp;here&nbsp;while</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5423740">//&nbsp;still&nbsp;defining&nbsp;the&nbsp;element.&nbsp;Fix&nbsp;the&nbsp;element&nbsp;type&nbsp;id&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5423804">//&nbsp;We&nbsp;could&nbsp;do&nbsp;this&nbsp;more&nbsp;neatly&nbsp;by&nbsp;setting&nbsp;the&nbsp;id&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5423873">//&nbsp;building&nbsp;every&nbsp;type,&nbsp;but&nbsp;that&nbsp;would&nbsp;break&nbsp;binary&nbsp;compatibility.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5423943">if</span>&nbsp;<span class="ident" id="5423946"><a href="/gostd/encoding/gob/type.go.html#5423589">gt</a></span><span class="op" id="5423948">.</span><span class="ident" id="5423949"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5423951">(</span><span class="op" id="5423952">)</span>&nbsp;<span class="op" id="5423954">==</span>&nbsp;<span class="num" id="5423957">0</span>&nbsp;<span class="op" id="5423959">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423965"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5423974">(</span><span class="ident" id="5423975"><a href="/gostd/encoding/gob/type.go.html#5423589">gt</a></span><span class="op" id="5423977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5423982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5423987"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><span class="op" id="5423989">.</span><span class="ident" id="5423990"><a href="/gostd/encoding/gob/type.go.html#5419996">Field</a></span>&nbsp;<span class="op" id="5423996">=</span>&nbsp;<span class="builtinfunc" id="5423998">append</span><span class="op" id="5424004">(</span><span class="ident" id="5424005"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><span class="op" id="5424007">.</span><span class="ident" id="5424008"><a href="/gostd/encoding/gob/type.go.html#5419996">Field</a></span><span class="op" id="5424013">,</span>&nbsp;<span class="op" id="5424015">&amp;</span><span class="ident" id="5424016"><a href="/gostd/encoding/gob/type.go.html#5419910">fieldType</a></span><span class="op" id="5424025">{</span><span class="ident" id="5424026"><a href="/gostd/encoding/gob/type.go.html#5423398">f</a></span><span class="op" id="5424027">.</span><span class="ident" id="5424028"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="5424032">,</span>&nbsp;<span class="ident" id="5424034"><a href="/gostd/encoding/gob/type.go.html#5423589">gt</a></span><span class="op" id="5424036">.</span><span class="ident" id="5424037"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5424039">(</span><span class="op" id="5424040">)</span><span class="op" id="5424041">}</span><span class="op" id="5424042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5424046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424050">return</span>&nbsp;<span class="ident" id="5424057"><a href="/gostd/encoding/gob/type.go.html#5423289">st</a></span><span class="op" id="5424059">,</span>&nbsp;<span class="builtintype" id="5424061">nil</span><br>
<span class="lineno">560</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424067">default</span><span class="op" id="5424074">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424078">return</span>&nbsp;<span class="builtintype" id="5424085">nil</span><span class="op" id="5424088">,</span>&nbsp;<span class="ident" id="5424090"><a href="/gostd/encoding/gob/type.go.html#5407912">errors</a></span><span class="op" id="5424096">.</span><span class="ident" id="5424097"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="5424100">(</span><span class="string" id="5424101">&#34;gob&nbsp;NewTypeObject&nbsp;can&#39;t&nbsp;handle&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="5424141">+</span>&nbsp;<span class="ident" id="5424143"><a href="/gostd/encoding/gob/type.go.html#5420972">rt</a></span><span class="op" id="5424145">.</span><span class="ident" id="5424146"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5424152">(</span><span class="op" id="5424153">)</span><span class="op" id="5424154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5424157">}</span><br>
<span class="lineno"></span><span class="op" id="5424159">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="comment" id="5424162">//&nbsp;isExported&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;an&nbsp;exported&nbsp;-&nbsp;upper&nbsp;case&nbsp;-&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5424233">func</span>&nbsp;<span class="ident" id="5424238">isExported</span><span class="op" id="5424248">(</span><span class="ident" id="5424249">name</span>&nbsp;<span class="builtintype" id="5424254">string</span><span class="op" id="5424260">)</span>&nbsp;<span class="builtintype" id="5424262">bool</span>&nbsp;<span class="op" id="5424267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5424270">rune</span><span class="op" id="5424274">,</span>&nbsp;<span class="ident" id="5424276">_</span>&nbsp;<span class="op" id="5424278">:=</span>&nbsp;<span class="ident" id="5424281"><a href="/gostd/encoding/gob/type.go.html#5407980">utf8</a></span><span class="op" id="5424285">.</span><span class="ident" id="5424286"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="5424304">(</span><span class="ident" id="5424305"><a href="/gostd/encoding/gob/type.go.html#5424249">name</a></span><span class="op" id="5424309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424312">return</span>&nbsp;<span class="ident" id="5424319"><a href="/gostd/encoding/gob/type.go.html#5407969">unicode</a></span><span class="op" id="5424326">.</span><span class="ident" id="5424327"><a href="/gostd/unicode/letter.go.html#1826318">IsUpper</a></span><span class="op" id="5424334">(</span><span class="builtintype" id="5424335"><a href="/gostd/encoding/gob/type.go.html#5424270">rune</a></span><span class="op" id="5424339">)</span><br>
<span class="lineno">570</span><span class="op" id="5424341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5424344">//&nbsp;isSent&nbsp;reports&nbsp;whether&nbsp;this&nbsp;struct&nbsp;field&nbsp;is&nbsp;to&nbsp;be&nbsp;transmitted.</span><br>
<span class="lineno"></span><span class="comment" id="5424410">//&nbsp;It&nbsp;will&nbsp;be&nbsp;transmitted&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;exported&nbsp;and&nbsp;not&nbsp;a&nbsp;chan&nbsp;or&nbsp;func&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5424488">//&nbsp;or&nbsp;pointer&nbsp;to&nbsp;chan&nbsp;or&nbsp;func.</span><br>
<span class="lineno">575</span><span class="keyword" id="5424519">func</span>&nbsp;<span class="ident" id="5424524">isSent</span><span class="op" id="5424530">(</span><span class="ident" id="5424531">field</span>&nbsp;<span class="op" id="5424537">*</span><span class="ident" id="5424538"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5424545">.</span><span class="ident" id="5424546"><a href="/gostd/reflect/type.go.html#2800749">StructField</a></span><span class="op" id="5424557">)</span>&nbsp;<span class="builtintype" id="5424559">bool</span>&nbsp;<span class="op" id="5424564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424567">if</span>&nbsp;<span class="op" id="5424570">!</span><span class="ident" id="5424571"><a href="/gostd/encoding/gob/type.go.html#5424238">isExported</a></span><span class="op" id="5424581">(</span><span class="ident" id="5424582"><a href="/gostd/encoding/gob/type.go.html#5424531">field</a></span><span class="op" id="5424587">.</span><span class="ident" id="5424588"><a href="/gostd/reflect/type.go.html#2801001">Name</a></span><span class="op" id="5424592">)</span>&nbsp;<span class="op" id="5424594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424598">return</span>&nbsp;<span class="builtintype" id="5424605">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5424612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5424615">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;chan&nbsp;or&nbsp;func&nbsp;or&nbsp;pointer&nbsp;thereto,&nbsp;don&#39;t&nbsp;send&nbsp;it.</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5424685">//&nbsp;That&nbsp;is,&nbsp;treat&nbsp;it&nbsp;like&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5424733">typ</span>&nbsp;<span class="op" id="5424737">:=</span>&nbsp;<span class="ident" id="5424740"><a href="/gostd/encoding/gob/type.go.html#5424531">field</a></span><span class="op" id="5424745">.</span><span class="ident" id="5424746"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424752">for</span>&nbsp;<span class="ident" id="5424756"><a href="/gostd/encoding/gob/type.go.html#5424733">typ</a></span><span class="op" id="5424759">.</span><span class="ident" id="5424760"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5424764">(</span><span class="op" id="5424765">)</span>&nbsp;<span class="op" id="5424767">==</span>&nbsp;<span class="ident" id="5424770"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5424777">.</span><span class="ident" id="5424778"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5424782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5424786"><a href="/gostd/encoding/gob/type.go.html#5424733">typ</a></span>&nbsp;<span class="op" id="5424790">=</span>&nbsp;<span class="ident" id="5424792"><a href="/gostd/encoding/gob/type.go.html#5424733">typ</a></span><span class="op" id="5424795">.</span><span class="ident" id="5424796"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5424800">(</span><span class="op" id="5424801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5424804">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424807">if</span>&nbsp;<span class="ident" id="5424810"><a href="/gostd/encoding/gob/type.go.html#5424733">typ</a></span><span class="op" id="5424813">.</span><span class="ident" id="5424814"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5424818">(</span><span class="op" id="5424819">)</span>&nbsp;<span class="op" id="5424821">==</span>&nbsp;<span class="ident" id="5424824"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5424831">.</span><span class="ident" id="5424832"><a href="/gostd/reflect/type.go.html#2788029">Chan</a></span>&nbsp;<span class="op" id="5424837">||</span>&nbsp;<span class="ident" id="5424840"><a href="/gostd/encoding/gob/type.go.html#5424733">typ</a></span><span class="op" id="5424843">.</span><span class="ident" id="5424844"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5424848">(</span><span class="op" id="5424849">)</span>&nbsp;<span class="op" id="5424851">==</span>&nbsp;<span class="ident" id="5424854"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5424861">.</span><span class="ident" id="5424862"><a href="/gostd/reflect/type.go.html#2788035">Func</a></span>&nbsp;<span class="op" id="5424867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424871">return</span>&nbsp;<span class="builtintype" id="5424878">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5424885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5424888">return</span>&nbsp;<span class="builtintype" id="5424895">true</span><br>
<span class="lineno"></span><span class="op" id="5424900">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="5424903">//&nbsp;getBaseType&nbsp;returns&nbsp;the&nbsp;Gob&nbsp;type&nbsp;describing&nbsp;the&nbsp;given&nbsp;reflect.Type&#39;s&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5424986">//&nbsp;typeLock&nbsp;must&nbsp;be&nbsp;held.</span><br>
<span class="lineno"></span><span class="keyword" id="5425012">func</span>&nbsp;<span class="ident" id="5425017">getBaseType</span><span class="op" id="5425028">(</span><span class="ident" id="5425029">name</span>&nbsp;<span class="builtintype" id="5425034">string</span><span class="op" id="5425040">,</span>&nbsp;<span class="ident" id="5425042">rt</span>&nbsp;<span class="ident" id="5425045"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5425052">.</span><span class="ident" id="5425053"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5425057">)</span>&nbsp;<span class="op" id="5425059">(</span><span class="ident" id="5425060"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5425067">,</span>&nbsp;<span class="builtintype" id="5425069">error</span><span class="op" id="5425074">)</span>&nbsp;<span class="op" id="5425076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5425079">ut</span>&nbsp;<span class="op" id="5425082">:=</span>&nbsp;<span class="ident" id="5425085"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5425093">(</span><span class="ident" id="5425094"><a href="/gostd/encoding/gob/type.go.html#5425042">rt</a></span><span class="op" id="5425096">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425099">return</span>&nbsp;<span class="ident" id="5425106"><a href="/gostd/encoding/gob/type.go.html#5425393">getType</a></span><span class="op" id="5425113">(</span><span class="ident" id="5425114"><a href="/gostd/encoding/gob/type.go.html#5425029">name</a></span><span class="op" id="5425118">,</span>&nbsp;<span class="ident" id="5425120"><a href="/gostd/encoding/gob/type.go.html#5425079">ut</a></span><span class="op" id="5425122">,</span>&nbsp;<span class="ident" id="5425124"><a href="/gostd/encoding/gob/type.go.html#5425079">ut</a></span><span class="op" id="5425126">.</span><span class="ident" id="5425127"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5425131">)</span><br>
<span class="lineno"></span><span class="op" id="5425133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5425136">//&nbsp;getType&nbsp;returns&nbsp;the&nbsp;Gob&nbsp;type&nbsp;describing&nbsp;the&nbsp;given&nbsp;reflect.Type.</span><br>
<span class="lineno"></span><span class="comment" id="5425203">//&nbsp;Should&nbsp;be&nbsp;called&nbsp;only&nbsp;when&nbsp;handling&nbsp;GobEncoders/Decoders,</span><br>
<span class="lineno">600</span><span class="comment" id="5425264">//&nbsp;which&nbsp;may&nbsp;be&nbsp;pointers.&nbsp;&nbsp;All&nbsp;other&nbsp;types&nbsp;are&nbsp;handled&nbsp;through&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5425331">//&nbsp;base&nbsp;type,&nbsp;never&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="5425362">//&nbsp;typeLock&nbsp;must&nbsp;be&nbsp;held.</span><br>
<span class="lineno"></span><span class="keyword" id="5425388">func</span>&nbsp;<span class="ident" id="5425393">getType</span><span class="op" id="5425400">(</span><span class="ident" id="5425401">name</span>&nbsp;<span class="builtintype" id="5425406">string</span><span class="op" id="5425412">,</span>&nbsp;<span class="ident" id="5425414">ut</span>&nbsp;<span class="op" id="5425417">*</span><span class="ident" id="5425418"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5425430">,</span>&nbsp;<span class="ident" id="5425432">rt</span>&nbsp;<span class="ident" id="5425435"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5425442">.</span><span class="ident" id="5425443"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5425447">)</span>&nbsp;<span class="op" id="5425449">(</span><span class="ident" id="5425450"><a href="/gostd/encoding/gob/type.go.html#5413573">gobType</a></span><span class="op" id="5425457">,</span>&nbsp;<span class="builtintype" id="5425459">error</span><span class="op" id="5425464">)</span>&nbsp;<span class="op" id="5425466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5425469">typ</span><span class="op" id="5425472">,</span>&nbsp;<span class="ident" id="5425474">present</span>&nbsp;<span class="op" id="5425482">:=</span>&nbsp;<span class="ident" id="5425485"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5425490">[</span><span class="ident" id="5425491"><a href="/gostd/encoding/gob/type.go.html#5425432">rt</a></span><span class="op" id="5425493">]</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425496">if</span>&nbsp;<span class="ident" id="5425499"><a href="/gostd/encoding/gob/type.go.html#5425474">present</a></span>&nbsp;<span class="op" id="5425507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425511">return</span>&nbsp;<span class="ident" id="5425518"><a href="/gostd/encoding/gob/type.go.html#5425469">typ</a></span><span class="op" id="5425521">,</span>&nbsp;<span class="builtintype" id="5425523">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5425528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5425531"><a href="/gostd/encoding/gob/type.go.html#5425469">typ</a></span><span class="op" id="5425534">,</span>&nbsp;<span class="ident" id="5425536">err</span>&nbsp;<span class="op" id="5425540">:=</span>&nbsp;<span class="ident" id="5425543"><a href="/gostd/encoding/gob/type.go.html#5420927">newTypeObject</a></span><span class="op" id="5425556">(</span><span class="ident" id="5425557"><a href="/gostd/encoding/gob/type.go.html#5425401">name</a></span><span class="op" id="5425561">,</span>&nbsp;<span class="ident" id="5425563"><a href="/gostd/encoding/gob/type.go.html#5425414">ut</a></span><span class="op" id="5425565">,</span>&nbsp;<span class="ident" id="5425567"><a href="/gostd/encoding/gob/type.go.html#5425432">rt</a></span><span class="op" id="5425569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425572">if</span>&nbsp;<span class="ident" id="5425575"><a href="/gostd/encoding/gob/type.go.html#5425536">err</a></span>&nbsp;<span class="op" id="5425579">==</span>&nbsp;<span class="builtintype" id="5425582">nil</span>&nbsp;<span class="op" id="5425586">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5425590"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5425595">[</span><span class="ident" id="5425596"><a href="/gostd/encoding/gob/type.go.html#5425432">rt</a></span><span class="op" id="5425598">]</span>&nbsp;<span class="op" id="5425600">=</span>&nbsp;<span class="ident" id="5425602"><a href="/gostd/encoding/gob/type.go.html#5425469">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5425607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425610">return</span>&nbsp;<span class="ident" id="5425617"><a href="/gostd/encoding/gob/type.go.html#5425469">typ</a></span><span class="op" id="5425620">,</span>&nbsp;<span class="ident" id="5425622"><a href="/gostd/encoding/gob/type.go.html#5425536">err</a></span><br>
<span class="lineno"></span><span class="op" id="5425626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span><span class="keyword" id="5425629">func</span>&nbsp;<span class="ident" id="5425634">checkId</span><span class="op" id="5425641">(</span><span class="ident" id="5425642">want</span><span class="op" id="5425646">,</span>&nbsp;<span class="ident" id="5425648">got</span>&nbsp;<span class="ident" id="5425652"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5425658">)</span>&nbsp;<span class="op" id="5425660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5425663">if</span>&nbsp;<span class="ident" id="5425666"><a href="/gostd/encoding/gob/type.go.html#5425642">want</a></span>&nbsp;<span class="op" id="5425671">!=</span>&nbsp;<span class="ident" id="5425674"><a href="/gostd/encoding/gob/type.go.html#5425648">got</a></span>&nbsp;<span class="op" id="5425678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5425682"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5425685">.</span><span class="ident" id="5425686"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5425693">(</span><span class="ident" id="5425694"><a href="/gostd/encoding/gob/type.go.html#5407929">os</a></span><span class="op" id="5425696">.</span><span class="ident" id="5425697"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5425703">,</span>&nbsp;<span class="string" id="5425705">&#34;checkId:&nbsp;%d&nbsp;should&nbsp;be&nbsp;%d\n&#34;</span><span class="op" id="5425733">,</span>&nbsp;<span class="builtintype" id="5425735">int</span><span class="op" id="5425738">(</span><span class="ident" id="5425739"><a href="/gostd/encoding/gob/type.go.html#5425648">got</a></span><span class="op" id="5425742">)</span><span class="op" id="5425743">,</span>&nbsp;<span class="builtintype" id="5425745">int</span><span class="op" id="5425748">(</span><span class="ident" id="5425749"><a href="/gostd/encoding/gob/type.go.html#5425642">want</a></span><span class="op" id="5425753">)</span><span class="op" id="5425754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5425758">panic</span><span class="op" id="5425763">(</span><span class="string" id="5425764">&#34;bootstrap&nbsp;type&nbsp;wrong&nbsp;id:&nbsp;&#34;</span>&nbsp;<span class="op" id="5425792">+</span>&nbsp;<span class="ident" id="5425794"><a href="/gostd/encoding/gob/type.go.html#5425648">got</a></span><span class="op" id="5425797">.</span><span class="ident" id="5425798"><a href="/gostd/encoding/gob/type.go.html#5414455">name</a></span><span class="op" id="5425802">(</span><span class="op" id="5425803">)</span>&nbsp;<span class="op" id="5425805">+</span>&nbsp;<span class="string" id="5425807">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="5425811">+</span>&nbsp;<span class="ident" id="5425813"><a href="/gostd/encoding/gob/type.go.html#5425648">got</a></span><span class="op" id="5425816">.</span><span class="builtintype" id="5425817"><a href="/gostd/encoding/gob/type.go.html#5414279">string</a></span><span class="op" id="5425823">(</span><span class="op" id="5425824">)</span>&nbsp;<span class="op" id="5425826">+</span>&nbsp;<span class="string" id="5425828">&#34;&nbsp;not&nbsp;&#34;</span>&nbsp;<span class="op" id="5425836">+</span>&nbsp;<span class="ident" id="5425838"><a href="/gostd/encoding/gob/type.go.html#5425642">want</a></span><span class="op" id="5425842">.</span><span class="builtintype" id="5425843"><a href="/gostd/encoding/gob/type.go.html#5414279">string</a></span><span class="op" id="5425849">(</span><span class="op" id="5425850">)</span><span class="op" id="5425851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5425854">}</span><br>
<span class="lineno">620</span><span class="op" id="5425856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5425859">//&nbsp;used&nbsp;for&nbsp;building&nbsp;the&nbsp;basic&nbsp;types;&nbsp;called&nbsp;only&nbsp;from&nbsp;init().&nbsp;&nbsp;the&nbsp;incoming</span><br>
<span class="lineno"></span><span class="comment" id="5425936">//&nbsp;interface&nbsp;always&nbsp;refers&nbsp;to&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="5425977">func</span>&nbsp;<span class="ident" id="5425982">bootstrapType</span><span class="op" id="5425995">(</span><span class="ident" id="5425996">name</span>&nbsp;<span class="builtintype" id="5426001">string</span><span class="op" id="5426007">,</span>&nbsp;<span class="ident" id="5426009">e</span>&nbsp;<span class="keyword" id="5426011">interface</span><span class="op" id="5426020">{</span><span class="op" id="5426021">}</span><span class="op" id="5426022">,</span>&nbsp;<span class="ident" id="5426024">expect</span>&nbsp;<span class="ident" id="5426031"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><span class="op" id="5426037">)</span>&nbsp;<span class="ident" id="5426039"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span>&nbsp;<span class="op" id="5426046">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426049">rt</span>&nbsp;<span class="op" id="5426052">:=</span>&nbsp;<span class="ident" id="5426055"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5426062">.</span><span class="ident" id="5426063"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5426069">(</span><span class="ident" id="5426070"><a href="/gostd/encoding/gob/type.go.html#5426009">e</a></span><span class="op" id="5426071">)</span><span class="op" id="5426072">.</span><span class="ident" id="5426073"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5426077">(</span><span class="op" id="5426078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426081">_</span><span class="op" id="5426082">,</span>&nbsp;<span class="ident" id="5426084">present</span>&nbsp;<span class="op" id="5426092">:=</span>&nbsp;<span class="ident" id="5426095"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5426100">[</span><span class="ident" id="5426101"><a href="/gostd/encoding/gob/type.go.html#5426049">rt</a></span><span class="op" id="5426103">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5426106">if</span>&nbsp;<span class="ident" id="5426109"><a href="/gostd/encoding/gob/type.go.html#5426084">present</a></span>&nbsp;<span class="op" id="5426117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5426121">panic</span><span class="op" id="5426126">(</span><span class="string" id="5426127">&#34;bootstrap&nbsp;type&nbsp;already&nbsp;present:&nbsp;&#34;</span>&nbsp;<span class="op" id="5426162">+</span>&nbsp;<span class="ident" id="5426164"><a href="/gostd/encoding/gob/type.go.html#5425996">name</a></span>&nbsp;<span class="op" id="5426169">+</span>&nbsp;<span class="string" id="5426171">&#34;,&nbsp;&#34;</span>&nbsp;<span class="op" id="5426176">+</span>&nbsp;<span class="ident" id="5426178"><a href="/gostd/encoding/gob/type.go.html#5426049">rt</a></span><span class="op" id="5426180">.</span><span class="ident" id="5426181"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5426187">(</span><span class="op" id="5426188">)</span><span class="op" id="5426189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5426192">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426195">typ</span>&nbsp;<span class="op" id="5426199">:=</span>&nbsp;<span class="op" id="5426202">&amp;</span><span class="ident" id="5426203"><a href="/gostd/encoding/gob/type.go.html#5414789">CommonType</a></span><span class="op" id="5426213">{</span><span class="ident" id="5426214"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><span class="op" id="5426218">:</span>&nbsp;<span class="ident" id="5426220"><a href="/gostd/encoding/gob/type.go.html#5425996">name</a></span><span class="op" id="5426224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426227"><a href="/gostd/encoding/gob/type.go.html#5413738">types</a></span><span class="op" id="5426232">[</span><span class="ident" id="5426233"><a href="/gostd/encoding/gob/type.go.html#5426049">rt</a></span><span class="op" id="5426235">]</span>&nbsp;<span class="op" id="5426237">=</span>&nbsp;<span class="ident" id="5426239"><a href="/gostd/encoding/gob/type.go.html#5426195">typ</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426244"><a href="/gostd/encoding/gob/type.go.html#5413910">setTypeId</a></span><span class="op" id="5426253">(</span><span class="ident" id="5426254"><a href="/gostd/encoding/gob/type.go.html#5426195">typ</a></span><span class="op" id="5426257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426260"><a href="/gostd/encoding/gob/type.go.html#5425634">checkId</a></span><span class="op" id="5426267">(</span><span class="ident" id="5426268"><a href="/gostd/encoding/gob/type.go.html#5426024">expect</a></span><span class="op" id="5426274">,</span>&nbsp;<span class="ident" id="5426276"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><span class="op" id="5426282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5426285"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5426293">(</span><span class="ident" id="5426294"><a href="/gostd/encoding/gob/type.go.html#5426049">rt</a></span><span class="op" id="5426296">)</span>&nbsp;<span class="comment" id="5426298">//&nbsp;might&nbsp;as&nbsp;well&nbsp;cache&nbsp;it&nbsp;now</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5426329">return</span>&nbsp;<span class="ident" id="5426336"><a href="/gostd/encoding/gob/type.go.html#5413392">nextId</a></span><br>
<span class="lineno"></span><span class="op" id="5426343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5426346">//&nbsp;Representation&nbsp;of&nbsp;the&nbsp;information&nbsp;we&nbsp;send&nbsp;and&nbsp;receive&nbsp;about&nbsp;this&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5426420">//&nbsp;Each&nbsp;value&nbsp;we&nbsp;send&nbsp;is&nbsp;preceded&nbsp;by&nbsp;its&nbsp;type&nbsp;definition:&nbsp;an&nbsp;encoded&nbsp;int.</span><br>
<span class="lineno">640</span><span class="comment" id="5426494">//&nbsp;However,&nbsp;the&nbsp;very&nbsp;first&nbsp;time&nbsp;we&nbsp;send&nbsp;the&nbsp;value,&nbsp;we&nbsp;first&nbsp;send&nbsp;the&nbsp;pair</span><br>
<span class="lineno"></span><span class="comment" id="5426568">//&nbsp;(-id,&nbsp;wireType).</span><br>
<span class="lineno"></span><span class="comment" id="5426588">//&nbsp;For&nbsp;bootstrapping&nbsp;purposes,&nbsp;we&nbsp;assume&nbsp;that&nbsp;the&nbsp;recipient&nbsp;knows&nbsp;how</span><br>
<span class="lineno"></span><span class="comment" id="5426658">//&nbsp;to&nbsp;decode&nbsp;a&nbsp;wireType;&nbsp;it&nbsp;is&nbsp;exactly&nbsp;the&nbsp;wireType&nbsp;struct&nbsp;here,&nbsp;interpreted</span><br>
<span class="lineno"></span><span class="comment" id="5426735">//&nbsp;using&nbsp;the&nbsp;gob&nbsp;rules&nbsp;for&nbsp;sending&nbsp;a&nbsp;structure,&nbsp;except&nbsp;that&nbsp;we&nbsp;assume&nbsp;the</span><br>
<span class="lineno">645</span><span class="comment" id="5426809">//&nbsp;ids&nbsp;for&nbsp;wireType&nbsp;and&nbsp;structType&nbsp;etc.&nbsp;are&nbsp;known.&nbsp;&nbsp;The&nbsp;relevant&nbsp;pieces</span><br>
<span class="lineno"></span><span class="comment" id="5426881">//&nbsp;are&nbsp;built&nbsp;in&nbsp;encode.go&#39;s&nbsp;init()&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="5426926">//&nbsp;To&nbsp;maintain&nbsp;binary&nbsp;compatibility,&nbsp;if&nbsp;you&nbsp;extend&nbsp;this&nbsp;type,&nbsp;always&nbsp;put</span><br>
<span class="lineno"></span><span class="comment" id="5426999">//&nbsp;the&nbsp;new&nbsp;fields&nbsp;last.</span><br>
<span class="lineno"></span><span class="keyword" id="5427023">type</span>&nbsp;<span class="ident" id="5427028">wireType</span>&nbsp;<span class="keyword" id="5427037">struct</span>&nbsp;<span class="op" id="5427044">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427047">ArrayT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427064">*</span><span class="ident" id="5427065"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427076">SliceT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427093">*</span><span class="ident" id="5427094"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427105">StructT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427122">*</span><span class="ident" id="5427123"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427135">MapT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427152">*</span><span class="ident" id="5427153"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427162">GobEncoderT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427179">*</span><span class="ident" id="5427180"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427196">BinaryMarshalerT</span>&nbsp;<span class="op" id="5427213">*</span><span class="ident" id="5427214"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427230">TextMarshalerT</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5427247">*</span><span class="ident" id="5427248"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><br>
<span class="lineno"></span><span class="op" id="5427263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5427266">func</span>&nbsp;<span class="op" id="5427271">(</span><span class="ident" id="5427272">w</span>&nbsp;<span class="op" id="5427274">*</span><span class="ident" id="5427275"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5427283">)</span>&nbsp;<span class="builtintype" id="5427285">string</span><span class="op" id="5427291">(</span><span class="op" id="5427292">)</span>&nbsp;<span class="builtintype" id="5427294">string</span>&nbsp;<span class="op" id="5427301">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427304">const</span>&nbsp;<span class="ident" id="5427310">unknown</span>&nbsp;<span class="op" id="5427318">=</span>&nbsp;<span class="string" id="5427320">&#34;unknown&nbsp;type&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427336">if</span>&nbsp;<span class="ident" id="5427339"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span>&nbsp;<span class="op" id="5427341">==</span>&nbsp;<span class="builtintype" id="5427344">nil</span>&nbsp;<span class="op" id="5427348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427352">return</span>&nbsp;<span class="ident" id="5427359"><a href="/gostd/encoding/gob/type.go.html#5427310">unknown</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427371">switch</span>&nbsp;<span class="op" id="5427378">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427381">case</span>&nbsp;<span class="ident" id="5427386"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427387">.</span><span class="ident" id="5427388"><a href="/gostd/encoding/gob/type.go.html#5427047">ArrayT</a></span>&nbsp;<span class="op" id="5427395">!=</span>&nbsp;<span class="builtintype" id="5427398">nil</span><span class="op" id="5427401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427405">return</span>&nbsp;<span class="ident" id="5427412"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427413">.</span><span class="ident" id="5427414"><a href="/gostd/encoding/gob/type.go.html#5427047">ArrayT</a></span><span class="op" id="5427420">.</span><span class="ident" id="5427421"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427427">case</span>&nbsp;<span class="ident" id="5427432"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427433">.</span><span class="ident" id="5427434"><a href="/gostd/encoding/gob/type.go.html#5427076">SliceT</a></span>&nbsp;<span class="op" id="5427441">!=</span>&nbsp;<span class="builtintype" id="5427444">nil</span><span class="op" id="5427447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427451">return</span>&nbsp;<span class="ident" id="5427458"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427459">.</span><span class="ident" id="5427460"><a href="/gostd/encoding/gob/type.go.html#5427076">SliceT</a></span><span class="op" id="5427466">.</span><span class="ident" id="5427467"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427473">case</span>&nbsp;<span class="ident" id="5427478"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427479">.</span><span class="ident" id="5427480"><a href="/gostd/encoding/gob/type.go.html#5427105">StructT</a></span>&nbsp;<span class="op" id="5427488">!=</span>&nbsp;<span class="builtintype" id="5427491">nil</span><span class="op" id="5427494">:</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427498">return</span>&nbsp;<span class="ident" id="5427505"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427506">.</span><span class="ident" id="5427507"><a href="/gostd/encoding/gob/type.go.html#5427105">StructT</a></span><span class="op" id="5427514">.</span><span class="ident" id="5427515"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427521">case</span>&nbsp;<span class="ident" id="5427526"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427527">.</span><span class="ident" id="5427528"><a href="/gostd/encoding/gob/type.go.html#5427135">MapT</a></span>&nbsp;<span class="op" id="5427533">!=</span>&nbsp;<span class="builtintype" id="5427536">nil</span><span class="op" id="5427539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427543">return</span>&nbsp;<span class="ident" id="5427550"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427551">.</span><span class="ident" id="5427552"><a href="/gostd/encoding/gob/type.go.html#5427135">MapT</a></span><span class="op" id="5427556">.</span><span class="ident" id="5427557"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427563">case</span>&nbsp;<span class="ident" id="5427568"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427569">.</span><span class="ident" id="5427570"><a href="/gostd/encoding/gob/type.go.html#5427162">GobEncoderT</a></span>&nbsp;<span class="op" id="5427582">!=</span>&nbsp;<span class="builtintype" id="5427585">nil</span><span class="op" id="5427588">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427592">return</span>&nbsp;<span class="ident" id="5427599"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427600">.</span><span class="ident" id="5427601"><a href="/gostd/encoding/gob/type.go.html#5427162">GobEncoderT</a></span><span class="op" id="5427612">.</span><span class="ident" id="5427613"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427619">case</span>&nbsp;<span class="ident" id="5427624"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427625">.</span><span class="ident" id="5427626"><a href="/gostd/encoding/gob/type.go.html#5427196">BinaryMarshalerT</a></span>&nbsp;<span class="op" id="5427643">!=</span>&nbsp;<span class="builtintype" id="5427646">nil</span><span class="op" id="5427649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427653">return</span>&nbsp;<span class="ident" id="5427660"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427661">.</span><span class="ident" id="5427662"><a href="/gostd/encoding/gob/type.go.html#5427196">BinaryMarshalerT</a></span><span class="op" id="5427678">.</span><span class="ident" id="5427679"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427685">case</span>&nbsp;<span class="ident" id="5427690"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427691">.</span><span class="ident" id="5427692"><a href="/gostd/encoding/gob/type.go.html#5427230">TextMarshalerT</a></span>&nbsp;<span class="op" id="5427707">!=</span>&nbsp;<span class="builtintype" id="5427710">nil</span><span class="op" id="5427713">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427717">return</span>&nbsp;<span class="ident" id="5427724"><a href="/gostd/encoding/gob/type.go.html#5427272">w</a></span><span class="op" id="5427725">.</span><span class="ident" id="5427726"><a href="/gostd/encoding/gob/type.go.html#5427230">TextMarshalerT</a></span><span class="op" id="5427740">.</span><span class="ident" id="5427741"><a href="/gostd/encoding/gob/type.go.html#5414810">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427747">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5427750">return</span>&nbsp;<span class="ident" id="5427757"><a href="/gostd/encoding/gob/type.go.html#5427310">unknown</a></span><br>
<span class="lineno"></span><span class="op" id="5427765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5427768">type</span>&nbsp;<span class="ident" id="5427773">typeInfo</span>&nbsp;<span class="keyword" id="5427782">struct</span>&nbsp;<span class="op" id="5427789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427792">id</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427800"><a href="/gostd/encoding/gob/type.go.html#5413374">typeId</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427808">encInit</span>&nbsp;<span class="ident" id="5427816"><a href="/gostd/encoding/gob/type.go.html#5407946">sync</a></span><span class="op" id="5427820">.</span><span class="ident" id="5427821"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5427829">//&nbsp;protects&nbsp;creation&nbsp;of&nbsp;encoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427862">encoder</span>&nbsp;<span class="ident" id="5427870"><a href="/gostd/encoding/gob/type.go.html#5407954">atomic</a></span><span class="op" id="5427876">.</span><span class="ident" id="5427877"><a href="/gostd/sync/atomic/value.go.html#1469477">Value</a></span>&nbsp;<span class="comment" id="5427883">//&nbsp;*encEngine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5427898">wire</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5427906">*</span><span class="ident" id="5427907"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><br>
<span class="lineno"></span><span class="op" id="5427916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="comment" id="5427919">//&nbsp;typeInfoMap&nbsp;is&nbsp;an&nbsp;atomic&nbsp;pointer&nbsp;to&nbsp;map[reflect.Type]*typeInfo.</span><br>
<span class="lineno"></span><span class="comment" id="5427986">//&nbsp;It&#39;s&nbsp;updated&nbsp;copy-on-write.&nbsp;Readers&nbsp;just&nbsp;do&nbsp;an&nbsp;atomic&nbsp;load</span><br>
<span class="lineno"></span><span class="comment" id="5428048">//&nbsp;to&nbsp;get&nbsp;the&nbsp;current&nbsp;version&nbsp;of&nbsp;the&nbsp;map.&nbsp;Writers&nbsp;make&nbsp;a&nbsp;full&nbsp;copy&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5428118">//&nbsp;the&nbsp;map&nbsp;and&nbsp;atomically&nbsp;update&nbsp;the&nbsp;pointer&nbsp;to&nbsp;point&nbsp;to&nbsp;the&nbsp;new&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="5428188">//&nbsp;Under&nbsp;heavy&nbsp;read&nbsp;contention,&nbsp;this&nbsp;is&nbsp;significantly&nbsp;faster&nbsp;than&nbsp;a&nbsp;map</span><br>
<span class="lineno">695</span><span class="comment" id="5428260">//&nbsp;protected&nbsp;by&nbsp;a&nbsp;mutex.</span><br>
<span class="lineno"></span><span class="keyword" id="5428285">var</span>&nbsp;<span class="ident" id="5428289">typeInfoMap</span>&nbsp;<span class="ident" id="5428301"><a href="/gostd/encoding/gob/type.go.html#5407954">atomic</a></span><span class="op" id="5428307">.</span><span class="ident" id="5428308"><a href="/gostd/sync/atomic/value.go.html#1469477">Value</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5428315">func</span>&nbsp;<span class="ident" id="5428320">lookupTypeInfo</span><span class="op" id="5428334">(</span><span class="ident" id="5428335">rt</span>&nbsp;<span class="ident" id="5428338"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5428345">.</span><span class="ident" id="5428346"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5428350">)</span>&nbsp;<span class="op" id="5428352">*</span><span class="ident" id="5428353"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span>&nbsp;<span class="op" id="5428362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5428365">m</span><span class="op" id="5428366">,</span>&nbsp;<span class="ident" id="5428368">_</span>&nbsp;<span class="op" id="5428370">:=</span>&nbsp;<span class="ident" id="5428373"><a href="/gostd/encoding/gob/type.go.html#5428289">typeInfoMap</a></span><span class="op" id="5428384">.</span><span class="ident" id="5428385"><a href="/gostd/sync/atomic/value.go.html#1469775">Load</a></span><span class="op" id="5428389">(</span><span class="op" id="5428390">)</span><span class="op" id="5428391">.</span><span class="op" id="5428392">(</span><span class="keyword" id="5428393">map</span><span class="op" id="5428396">[</span><span class="ident" id="5428397"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5428404">.</span><span class="ident" id="5428405"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5428409">]</span><span class="op" id="5428410">*</span><span class="ident" id="5428411"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5428419">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428422">return</span>&nbsp;<span class="ident" id="5428429"><a href="/gostd/encoding/gob/type.go.html#5428365">m</a></span><span class="op" id="5428430">[</span><span class="ident" id="5428431"><a href="/gostd/encoding/gob/type.go.html#5428335">rt</a></span><span class="op" id="5428433">]</span><br>
<span class="lineno"></span><span class="op" id="5428435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5428438">func</span>&nbsp;<span class="ident" id="5428443">getTypeInfo</span><span class="op" id="5428454">(</span><span class="ident" id="5428455">ut</span>&nbsp;<span class="op" id="5428458">*</span><span class="ident" id="5428459"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5428471">)</span>&nbsp;<span class="op" id="5428473">(</span><span class="op" id="5428474">*</span><span class="ident" id="5428475"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5428483">,</span>&nbsp;<span class="builtintype" id="5428485">error</span><span class="op" id="5428490">)</span>&nbsp;<span class="op" id="5428492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5428495">rt</span>&nbsp;<span class="op" id="5428498">:=</span>&nbsp;<span class="ident" id="5428501"><a href="/gostd/encoding/gob/type.go.html#5428455">ut</a></span><span class="op" id="5428503">.</span><span class="ident" id="5428504"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428510">if</span>&nbsp;<span class="ident" id="5428513"><a href="/gostd/encoding/gob/type.go.html#5428455">ut</a></span><span class="op" id="5428515">.</span><span class="ident" id="5428516"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5428528">!=</span>&nbsp;<span class="num" id="5428531">0</span>&nbsp;<span class="op" id="5428533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5428537">//&nbsp;We&nbsp;want&nbsp;the&nbsp;user&nbsp;type,&nbsp;not&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5428584"><a href="/gostd/encoding/gob/type.go.html#5428495">rt</a></span>&nbsp;<span class="op" id="5428587">=</span>&nbsp;<span class="ident" id="5428589"><a href="/gostd/encoding/gob/type.go.html#5428455">ut</a></span><span class="op" id="5428591">.</span><span class="ident" id="5428592"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5428598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428601">if</span>&nbsp;<span class="ident" id="5428604">info</span>&nbsp;<span class="op" id="5428609">:=</span>&nbsp;<span class="ident" id="5428612"><a href="/gostd/encoding/gob/type.go.html#5428320">lookupTypeInfo</a></span><span class="op" id="5428626">(</span><span class="ident" id="5428627"><a href="/gostd/encoding/gob/type.go.html#5428495">rt</a></span><span class="op" id="5428629">)</span><span class="op" id="5428630">;</span>&nbsp;<span class="ident" id="5428632"><a href="/gostd/encoding/gob/type.go.html#5428604">info</a></span>&nbsp;<span class="op" id="5428637">!=</span>&nbsp;<span class="builtintype" id="5428640">nil</span>&nbsp;<span class="op" id="5428644">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428648">return</span>&nbsp;<span class="ident" id="5428655"><a href="/gostd/encoding/gob/type.go.html#5428604">info</a></span><span class="op" id="5428659">,</span>&nbsp;<span class="builtintype" id="5428661">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5428666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428669">return</span>&nbsp;<span class="ident" id="5428676"><a href="/gostd/encoding/gob/type.go.html#5428807">buildTypeInfo</a></span><span class="op" id="5428689">(</span><span class="ident" id="5428690"><a href="/gostd/encoding/gob/type.go.html#5428455">ut</a></span><span class="op" id="5428692">,</span>&nbsp;<span class="ident" id="5428694"><a href="/gostd/encoding/gob/type.go.html#5428495">rt</a></span><span class="op" id="5428696">)</span><br>
<span class="lineno"></span><span class="op" id="5428698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">715</span><span class="comment" id="5428701">//&nbsp;buildTypeInfo&nbsp;constructs&nbsp;the&nbsp;type&nbsp;information&nbsp;for&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5428763">//&nbsp;and&nbsp;stores&nbsp;it&nbsp;in&nbsp;the&nbsp;type&nbsp;info&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="5428802">func</span>&nbsp;<span class="ident" id="5428807">buildTypeInfo</span><span class="op" id="5428820">(</span><span class="ident" id="5428821">ut</span>&nbsp;<span class="op" id="5428824">*</span><span class="ident" id="5428825"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5428837">,</span>&nbsp;<span class="ident" id="5428839">rt</span>&nbsp;<span class="ident" id="5428842"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5428849">.</span><span class="ident" id="5428850"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5428854">)</span>&nbsp;<span class="op" id="5428856">(</span><span class="op" id="5428857">*</span><span class="ident" id="5428858"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5428866">,</span>&nbsp;<span class="builtintype" id="5428868">error</span><span class="op" id="5428873">)</span>&nbsp;<span class="op" id="5428875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5428878"><a href="/gostd/encoding/gob/type.go.html#5413458">typeLock</a></span><span class="op" id="5428886">.</span><span class="ident" id="5428887"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5428891">(</span><span class="op" id="5428892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428895">defer</span>&nbsp;<span class="ident" id="5428901"><a href="/gostd/encoding/gob/type.go.html#5413458">typeLock</a></span><span class="op" id="5428909">.</span><span class="ident" id="5428910"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5428916">(</span><span class="op" id="5428917">)</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428921">if</span>&nbsp;<span class="ident" id="5428924">info</span>&nbsp;<span class="op" id="5428929">:=</span>&nbsp;<span class="ident" id="5428932"><a href="/gostd/encoding/gob/type.go.html#5428320">lookupTypeInfo</a></span><span class="op" id="5428946">(</span><span class="ident" id="5428947"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5428949">)</span><span class="op" id="5428950">;</span>&nbsp;<span class="ident" id="5428952"><a href="/gostd/encoding/gob/type.go.html#5428924">info</a></span>&nbsp;<span class="op" id="5428957">!=</span>&nbsp;<span class="builtintype" id="5428960">nil</span>&nbsp;<span class="op" id="5428964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5428968">return</span>&nbsp;<span class="ident" id="5428975"><a href="/gostd/encoding/gob/type.go.html#5428924">info</a></span><span class="op" id="5428979">,</span>&nbsp;<span class="builtintype" id="5428981">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5428986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5428990">gt</span><span class="op" id="5428992">,</span>&nbsp;<span class="ident" id="5428994">err</span>&nbsp;<span class="op" id="5428998">:=</span>&nbsp;<span class="ident" id="5429001"><a href="/gostd/encoding/gob/type.go.html#5425017">getBaseType</a></span><span class="op" id="5429012">(</span><span class="ident" id="5429013"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5429015">.</span><span class="ident" id="5429016"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5429020">(</span><span class="op" id="5429021">)</span><span class="op" id="5429022">,</span>&nbsp;<span class="ident" id="5429024"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5429026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429029">if</span>&nbsp;<span class="ident" id="5429032"><a href="/gostd/encoding/gob/type.go.html#5428994">err</a></span>&nbsp;<span class="op" id="5429036">!=</span>&nbsp;<span class="builtintype" id="5429039">nil</span>&nbsp;<span class="op" id="5429043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429047">return</span>&nbsp;<span class="builtintype" id="5429054">nil</span><span class="op" id="5429057">,</span>&nbsp;<span class="ident" id="5429059"><a href="/gostd/encoding/gob/type.go.html#5428994">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429067">info</span>&nbsp;<span class="op" id="5429072">:=</span>&nbsp;<span class="op" id="5429075">&amp;</span><span class="ident" id="5429076"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5429084">{</span><span class="ident" id="5429085"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5429087">:</span>&nbsp;<span class="ident" id="5429089"><a href="/gostd/encoding/gob/type.go.html#5428990">gt</a></span><span class="op" id="5429091">.</span><span class="ident" id="5429092"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5429094">(</span><span class="op" id="5429095">)</span><span class="op" id="5429096">}</span><br>
<span class="lineno">730</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429100">if</span>&nbsp;<span class="ident" id="5429103"><a href="/gostd/encoding/gob/type.go.html#5428821">ut</a></span><span class="op" id="5429105">.</span><span class="ident" id="5429106"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5429118">!=</span>&nbsp;<span class="num" id="5429121">0</span>&nbsp;<span class="op" id="5429123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429127">userType</span><span class="op" id="5429135">,</span>&nbsp;<span class="ident" id="5429137">err</span>&nbsp;<span class="op" id="5429141">:=</span>&nbsp;<span class="ident" id="5429144"><a href="/gostd/encoding/gob/type.go.html#5425393">getType</a></span><span class="op" id="5429151">(</span><span class="ident" id="5429152"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5429154">.</span><span class="ident" id="5429155"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5429159">(</span><span class="op" id="5429160">)</span><span class="op" id="5429161">,</span>&nbsp;<span class="ident" id="5429163"><a href="/gostd/encoding/gob/type.go.html#5428821">ut</a></span><span class="op" id="5429165">,</span>&nbsp;<span class="ident" id="5429167"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5429169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429173">if</span>&nbsp;<span class="ident" id="5429176"><a href="/gostd/encoding/gob/type.go.html#5429137">err</a></span>&nbsp;<span class="op" id="5429180">!=</span>&nbsp;<span class="builtintype" id="5429183">nil</span>&nbsp;<span class="op" id="5429187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429192">return</span>&nbsp;<span class="builtintype" id="5429199">nil</span><span class="op" id="5429202">,</span>&nbsp;<span class="ident" id="5429204"><a href="/gostd/encoding/gob/type.go.html#5429137">err</a></span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429214">gt</span>&nbsp;<span class="op" id="5429217">:=</span>&nbsp;<span class="ident" id="5429220"><a href="/gostd/encoding/gob/type.go.html#5429127">userType</a></span><span class="op" id="5429228">.</span><span class="ident" id="5429229"><a href="/gostd/encoding/gob/type.go.html#5413594">id</a></span><span class="op" id="5429231">(</span><span class="op" id="5429232">)</span><span class="op" id="5429233">.</span><span class="ident" id="5429234"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5429241">(</span><span class="op" id="5429242">)</span><span class="op" id="5429243">.</span><span class="op" id="5429244">(</span><span class="op" id="5429245">*</span><span class="ident" id="5429246"><a href="/gostd/encoding/gob/type.go.html#5418175">gobEncoderType</a></span><span class="op" id="5429260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429264">switch</span>&nbsp;<span class="ident" id="5429271"><a href="/gostd/encoding/gob/type.go.html#5428821">ut</a></span><span class="op" id="5429273">.</span><span class="ident" id="5429274"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5429286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429290">case</span>&nbsp;<span class="ident" id="5429295"><a href="/gostd/encoding/gob/type.go.html#5408727">xGob</a></span><span class="op" id="5429299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429304"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429308">.</span><span class="ident" id="5429309"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429314">=</span>&nbsp;<span class="op" id="5429316">&amp;</span><span class="ident" id="5429317"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429325">{</span><span class="ident" id="5429326"><a href="/gostd/encoding/gob/type.go.html#5427162">GobEncoderT</a></span><span class="op" id="5429337">:</span>&nbsp;<span class="ident" id="5429339"><a href="/gostd/encoding/gob/type.go.html#5429214">gt</a></span><span class="op" id="5429341">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429345">case</span>&nbsp;<span class="ident" id="5429350"><a href="/gostd/encoding/gob/type.go.html#5408775">xBinary</a></span><span class="op" id="5429357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429362"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429366">.</span><span class="ident" id="5429367"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429372">=</span>&nbsp;<span class="op" id="5429374">&amp;</span><span class="ident" id="5429375"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429383">{</span><span class="ident" id="5429384"><a href="/gostd/encoding/gob/type.go.html#5427196">BinaryMarshalerT</a></span><span class="op" id="5429400">:</span>&nbsp;<span class="ident" id="5429402"><a href="/gostd/encoding/gob/type.go.html#5429214">gt</a></span><span class="op" id="5429404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429408">case</span>&nbsp;<span class="ident" id="5429413"><a href="/gostd/encoding/gob/type.go.html#5408853">xText</a></span><span class="op" id="5429418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429423"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429427">.</span><span class="ident" id="5429428"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429433">=</span>&nbsp;<span class="op" id="5429435">&amp;</span><span class="ident" id="5429436"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429444">{</span><span class="ident" id="5429445"><a href="/gostd/encoding/gob/type.go.html#5427230">TextMarshalerT</a></span><span class="op" id="5429459">:</span>&nbsp;<span class="ident" id="5429461"><a href="/gostd/encoding/gob/type.go.html#5429214">gt</a></span><span class="op" id="5429463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429467">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429471"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span>&nbsp;<span class="op" id="5429474">=</span>&nbsp;<span class="ident" id="5429476"><a href="/gostd/encoding/gob/type.go.html#5428821">ut</a></span><span class="op" id="5429478">.</span><span class="ident" id="5429479"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429485">}</span>&nbsp;<span class="keyword" id="5429487">else</span>&nbsp;<span class="op" id="5429492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429496">t</span>&nbsp;<span class="op" id="5429498">:=</span>&nbsp;<span class="ident" id="5429501"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429505">.</span><span class="ident" id="5429506"><a href="/gostd/encoding/gob/type.go.html#5427792">id</a></span><span class="op" id="5429508">.</span><span class="ident" id="5429509"><a href="/gostd/encoding/gob/type.go.html#5414107">gobType</a></span><span class="op" id="5429516">(</span><span class="op" id="5429517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429521">switch</span>&nbsp;<span class="ident" id="5429528">typ</span>&nbsp;<span class="op" id="5429532">:=</span>&nbsp;<span class="ident" id="5429535"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5429537">;</span>&nbsp;<span class="ident" id="5429539"><a href="/gostd/encoding/gob/type.go.html#5429528">typ</a></span><span class="op" id="5429542">.</span><span class="ident" id="5429543"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5429547">(</span><span class="op" id="5429548">)</span>&nbsp;<span class="op" id="5429550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429554">case</span>&nbsp;<span class="ident" id="5429559"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5429566">.</span><span class="ident" id="5429567"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="5429572">:</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429577"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429581">.</span><span class="ident" id="5429582"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429587">=</span>&nbsp;<span class="op" id="5429589">&amp;</span><span class="ident" id="5429590"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429598">{</span><span class="ident" id="5429599"><a href="/gostd/encoding/gob/type.go.html#5427047">ArrayT</a></span><span class="op" id="5429605">:</span>&nbsp;<span class="ident" id="5429607"><a href="/gostd/encoding/gob/type.go.html#5429496">t</a></span><span class="op" id="5429608">.</span><span class="op" id="5429609">(</span><span class="op" id="5429610">*</span><span class="ident" id="5429611"><a href="/gostd/encoding/gob/type.go.html#5417486">arrayType</a></span><span class="op" id="5429620">)</span><span class="op" id="5429621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429625">case</span>&nbsp;<span class="ident" id="5429630"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5429637">.</span><span class="ident" id="5429638"><a href="/gostd/reflect/type.go.html#2788052">Map</a></span><span class="op" id="5429641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429646"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429650">.</span><span class="ident" id="5429651"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429656">=</span>&nbsp;<span class="op" id="5429658">&amp;</span><span class="ident" id="5429659"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429667">{</span><span class="ident" id="5429668"><a href="/gostd/encoding/gob/type.go.html#5427135">MapT</a></span><span class="op" id="5429672">:</span>&nbsp;<span class="ident" id="5429674"><a href="/gostd/encoding/gob/type.go.html#5429496">t</a></span><span class="op" id="5429675">.</span><span class="op" id="5429676">(</span><span class="op" id="5429677">*</span><span class="ident" id="5429678"><a href="/gostd/encoding/gob/type.go.html#5418503">mapType</a></span><span class="op" id="5429685">)</span><span class="op" id="5429686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429690">case</span>&nbsp;<span class="ident" id="5429695"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5429702">.</span><span class="ident" id="5429703"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="5429708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5429713">//&nbsp;[]byte&nbsp;==&nbsp;[]uint8&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;handled&nbsp;separately</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429774">if</span>&nbsp;<span class="ident" id="5429777"><a href="/gostd/encoding/gob/type.go.html#5429528">typ</a></span><span class="op" id="5429780">.</span><span class="ident" id="5429781"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5429785">(</span><span class="op" id="5429786">)</span><span class="op" id="5429787">.</span><span class="ident" id="5429788"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5429792">(</span><span class="op" id="5429793">)</span>&nbsp;<span class="op" id="5429795">!=</span>&nbsp;<span class="ident" id="5429798"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5429805">.</span><span class="ident" id="5429806"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="5429812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429818"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429822">.</span><span class="ident" id="5429823"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429828">=</span>&nbsp;<span class="op" id="5429830">&amp;</span><span class="ident" id="5429831"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429839">{</span><span class="ident" id="5429840"><a href="/gostd/encoding/gob/type.go.html#5427076">SliceT</a></span><span class="op" id="5429846">:</span>&nbsp;<span class="ident" id="5429848"><a href="/gostd/encoding/gob/type.go.html#5429496">t</a></span><span class="op" id="5429849">.</span><span class="op" id="5429850">(</span><span class="op" id="5429851">*</span><span class="ident" id="5429852"><a href="/gostd/encoding/gob/type.go.html#5419180">sliceType</a></span><span class="op" id="5429861">)</span><span class="op" id="5429862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5429871">case</span>&nbsp;<span class="ident" id="5429876"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5429883">.</span><span class="ident" id="5429884"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span><span class="op" id="5429890">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5429895"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5429899">.</span><span class="ident" id="5429900"><a href="/gostd/encoding/gob/type.go.html#5427898">wire</a></span>&nbsp;<span class="op" id="5429905">=</span>&nbsp;<span class="op" id="5429907">&amp;</span><span class="ident" id="5429908"><a href="/gostd/encoding/gob/type.go.html#5427028">wireType</a></span><span class="op" id="5429916">{</span><span class="ident" id="5429917"><a href="/gostd/encoding/gob/type.go.html#5427105">StructT</a></span><span class="op" id="5429924">:</span>&nbsp;<span class="ident" id="5429926"><a href="/gostd/encoding/gob/type.go.html#5429496">t</a></span><span class="op" id="5429927">.</span><span class="op" id="5429928">(</span><span class="op" id="5429929">*</span><span class="ident" id="5429930"><a href="/gostd/encoding/gob/type.go.html#5419963">structType</a></span><span class="op" id="5429940">)</span><span class="op" id="5429941">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5429948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5429952">//&nbsp;Create&nbsp;new&nbsp;map&nbsp;with&nbsp;old&nbsp;contents&nbsp;plus&nbsp;new&nbsp;entry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430005">newm</span>&nbsp;<span class="op" id="5430010">:=</span>&nbsp;<span class="builtinfunc" id="5430013">make</span><span class="op" id="5430017">(</span><span class="keyword" id="5430018">map</span><span class="op" id="5430021">[</span><span class="ident" id="5430022"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5430029">.</span><span class="ident" id="5430030"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5430034">]</span><span class="op" id="5430035">*</span><span class="ident" id="5430036"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5430044">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430047">m</span><span class="op" id="5430048">,</span>&nbsp;<span class="ident" id="5430050">_</span>&nbsp;<span class="op" id="5430052">:=</span>&nbsp;<span class="ident" id="5430055"><a href="/gostd/encoding/gob/type.go.html#5428289">typeInfoMap</a></span><span class="op" id="5430066">.</span><span class="ident" id="5430067"><a href="/gostd/sync/atomic/value.go.html#1469775">Load</a></span><span class="op" id="5430071">(</span><span class="op" id="5430072">)</span><span class="op" id="5430073">.</span><span class="op" id="5430074">(</span><span class="keyword" id="5430075">map</span><span class="op" id="5430078">[</span><span class="ident" id="5430079"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5430086">.</span><span class="ident" id="5430087"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5430091">]</span><span class="op" id="5430092">*</span><span class="ident" id="5430093"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5430101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5430104">for</span>&nbsp;<span class="ident" id="5430108">k</span><span class="op" id="5430109">,</span>&nbsp;<span class="ident" id="5430111">v</span>&nbsp;<span class="op" id="5430113">:=</span>&nbsp;<span class="keyword" id="5430116">range</span>&nbsp;<span class="ident" id="5430122"><a href="/gostd/encoding/gob/type.go.html#5430047">m</a></span>&nbsp;<span class="op" id="5430124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430128"><a href="/gostd/encoding/gob/type.go.html#5430005">newm</a></span><span class="op" id="5430132">[</span><span class="ident" id="5430133"><a href="/gostd/encoding/gob/type.go.html#5430108">k</a></span><span class="op" id="5430134">]</span>&nbsp;<span class="op" id="5430136">=</span>&nbsp;<span class="ident" id="5430138"><a href="/gostd/encoding/gob/type.go.html#5430111">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5430141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430144"><a href="/gostd/encoding/gob/type.go.html#5430005">newm</a></span><span class="op" id="5430148">[</span><span class="ident" id="5430149"><a href="/gostd/encoding/gob/type.go.html#5428839">rt</a></span><span class="op" id="5430151">]</span>&nbsp;<span class="op" id="5430153">=</span>&nbsp;<span class="ident" id="5430155"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430161"><a href="/gostd/encoding/gob/type.go.html#5428289">typeInfoMap</a></span><span class="op" id="5430172">.</span><span class="ident" id="5430173"><a href="/gostd/sync/atomic/value.go.html#1470285">Store</a></span><span class="op" id="5430178">(</span><span class="ident" id="5430179"><a href="/gostd/encoding/gob/type.go.html#5430005">newm</a></span><span class="op" id="5430183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5430186">return</span>&nbsp;<span class="ident" id="5430193"><a href="/gostd/encoding/gob/type.go.html#5429067">info</a></span><span class="op" id="5430197">,</span>&nbsp;<span class="builtintype" id="5430199">nil</span><br>
<span class="lineno"></span><span class="op" id="5430203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5430206">//&nbsp;Called&nbsp;only&nbsp;when&nbsp;a&nbsp;panic&nbsp;is&nbsp;acceptable&nbsp;and&nbsp;unexpected.</span><br>
<span class="lineno">775</span><span class="keyword" id="5430264">func</span>&nbsp;<span class="ident" id="5430269">mustGetTypeInfo</span><span class="op" id="5430284">(</span><span class="ident" id="5430285">rt</span>&nbsp;<span class="ident" id="5430288"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5430295">.</span><span class="ident" id="5430296"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5430300">)</span>&nbsp;<span class="op" id="5430302">*</span><span class="ident" id="5430303"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span>&nbsp;<span class="op" id="5430312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5430315">t</span><span class="op" id="5430316">,</span>&nbsp;<span class="ident" id="5430318">err</span>&nbsp;<span class="op" id="5430322">:=</span>&nbsp;<span class="ident" id="5430325"><a href="/gostd/encoding/gob/type.go.html#5428443">getTypeInfo</a></span><span class="op" id="5430336">(</span><span class="ident" id="5430337"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5430345">(</span><span class="ident" id="5430346"><a href="/gostd/encoding/gob/type.go.html#5430285">rt</a></span><span class="op" id="5430348">)</span><span class="op" id="5430349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5430352">if</span>&nbsp;<span class="ident" id="5430355"><a href="/gostd/encoding/gob/type.go.html#5430318">err</a></span>&nbsp;<span class="op" id="5430359">!=</span>&nbsp;<span class="builtintype" id="5430362">nil</span>&nbsp;<span class="op" id="5430366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5430370">panic</span><span class="op" id="5430375">(</span><span class="string" id="5430376">&#34;getTypeInfo:&nbsp;&#34;</span>&nbsp;<span class="op" id="5430392">+</span>&nbsp;<span class="ident" id="5430394"><a href="/gostd/encoding/gob/type.go.html#5430318">err</a></span><span class="op" id="5430397">.</span><span class="ident" id="5430398">Error</span><span class="op" id="5430403">(</span><span class="op" id="5430404">)</span><span class="op" id="5430405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5430408">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5430411">return</span>&nbsp;<span class="ident" id="5430418"><a href="/gostd/encoding/gob/type.go.html#5430315">t</a></span><br>
<span class="lineno"></span><span class="op" id="5430420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5430423">//&nbsp;GobEncoder&nbsp;is&nbsp;the&nbsp;interface&nbsp;describing&nbsp;data&nbsp;that&nbsp;provides&nbsp;its&nbsp;own</span><br>
<span class="lineno"></span><span class="comment" id="5430492">//&nbsp;representation&nbsp;for&nbsp;encoding&nbsp;values&nbsp;for&nbsp;transmission&nbsp;to&nbsp;a&nbsp;GobDecoder.</span><br>
<span class="lineno">785</span><span class="comment" id="5430564">//&nbsp;A&nbsp;type&nbsp;that&nbsp;implements&nbsp;GobEncoder&nbsp;and&nbsp;GobDecoder&nbsp;has&nbsp;complete</span><br>
<span class="lineno"></span><span class="comment" id="5430629">//&nbsp;control&nbsp;over&nbsp;the&nbsp;representation&nbsp;of&nbsp;its&nbsp;data&nbsp;and&nbsp;may&nbsp;therefore</span><br>
<span class="lineno"></span><span class="comment" id="5430694">//&nbsp;contain&nbsp;things&nbsp;such&nbsp;as&nbsp;private&nbsp;fields,&nbsp;channels,&nbsp;and&nbsp;functions,</span><br>
<span class="lineno"></span><span class="comment" id="5430761">//&nbsp;which&nbsp;are&nbsp;not&nbsp;usually&nbsp;transmissible&nbsp;in&nbsp;gob&nbsp;streams.</span><br>
<span class="lineno"></span><span class="comment" id="5430816">//</span><br>
<span class="lineno">790</span><span class="comment" id="5430819">//&nbsp;Note:&nbsp;Since&nbsp;gobs&nbsp;can&nbsp;be&nbsp;stored&nbsp;permanently,&nbsp;It&nbsp;is&nbsp;good&nbsp;design</span><br>
<span class="lineno"></span><span class="comment" id="5430884">//&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;encoding&nbsp;used&nbsp;by&nbsp;a&nbsp;GobEncoder&nbsp;is&nbsp;stable&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5430951">//&nbsp;software&nbsp;evolves.&nbsp;&nbsp;For&nbsp;instance,&nbsp;it&nbsp;might&nbsp;make&nbsp;sense&nbsp;for&nbsp;GobEncode</span><br>
<span class="lineno"></span><span class="comment" id="5431021">//&nbsp;to&nbsp;include&nbsp;a&nbsp;version&nbsp;number&nbsp;in&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="keyword" id="5431069">type</span>&nbsp;<span class="ident" id="5431074">GobEncoder</span>&nbsp;<span class="keyword" id="5431085">interface</span>&nbsp;<span class="op" id="5431095">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431098">//&nbsp;GobEncode&nbsp;returns&nbsp;a&nbsp;byte&nbsp;slice&nbsp;representing&nbsp;the&nbsp;encoding&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431166">//&nbsp;receiver&nbsp;for&nbsp;transmission&nbsp;to&nbsp;a&nbsp;GobDecoder,&nbsp;usually&nbsp;of&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431233">//&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431252">GobEncode</span><span class="op" id="5431261">(</span><span class="op" id="5431262">)</span>&nbsp;<span class="op" id="5431264">(</span><span class="op" id="5431265">[</span><span class="op" id="5431266">]</span><span class="builtintype" id="5431267">byte</span><span class="op" id="5431271">,</span>&nbsp;<span class="builtintype" id="5431273">error</span><span class="op" id="5431278">)</span><br>
<span class="lineno"></span><span class="op" id="5431280">}</span><br>
<span class="lineno">800</span><br>
<span class="lineno"></span><span class="comment" id="5431283">//&nbsp;GobDecoder&nbsp;is&nbsp;the&nbsp;interface&nbsp;describing&nbsp;data&nbsp;that&nbsp;provides&nbsp;its&nbsp;own</span><br>
<span class="lineno"></span><span class="comment" id="5431352">//&nbsp;routine&nbsp;for&nbsp;decoding&nbsp;transmitted&nbsp;values&nbsp;sent&nbsp;by&nbsp;a&nbsp;GobEncoder.</span><br>
<span class="lineno"></span><span class="keyword" id="5431417">type</span>&nbsp;<span class="ident" id="5431422">GobDecoder</span>&nbsp;<span class="keyword" id="5431433">interface</span>&nbsp;<span class="op" id="5431443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431446">//&nbsp;GobDecode&nbsp;overwrites&nbsp;the&nbsp;receiver,&nbsp;which&nbsp;must&nbsp;be&nbsp;a&nbsp;pointer,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431510">//&nbsp;with&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;byte&nbsp;slice,&nbsp;which&nbsp;was&nbsp;written</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431578">//&nbsp;by&nbsp;GobEncode,&nbsp;usually&nbsp;for&nbsp;the&nbsp;same&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431632">GobDecode</span><span class="op" id="5431641">(</span><span class="op" id="5431642">[</span><span class="op" id="5431643">]</span><span class="builtintype" id="5431644">byte</span><span class="op" id="5431648">)</span>&nbsp;<span class="builtintype" id="5431650">error</span><br>
<span class="lineno"></span><span class="op" id="5431656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span><span class="keyword" id="5431659">var</span>&nbsp;<span class="op" id="5431663">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431666">registerLock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431685"><a href="/gostd/encoding/gob/type.go.html#5407946">sync</a></span><span class="op" id="5431689">.</span><span class="ident" id="5431690"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431699">nameToConcreteType</span>&nbsp;<span class="op" id="5431718">=</span>&nbsp;<span class="builtinfunc" id="5431720">make</span><span class="op" id="5431724">(</span><span class="keyword" id="5431725">map</span><span class="op" id="5431728">[</span><span class="builtintype" id="5431729">string</span><span class="op" id="5431735">]</span><span class="ident" id="5431736"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5431743">.</span><span class="ident" id="5431744"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5431748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5431751">concreteTypeToName</span>&nbsp;<span class="op" id="5431770">=</span>&nbsp;<span class="builtinfunc" id="5431772">make</span><span class="op" id="5431776">(</span><span class="keyword" id="5431777">map</span><span class="op" id="5431780">[</span><span class="ident" id="5431781"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5431788">.</span><span class="ident" id="5431789"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5431793">]</span><span class="builtintype" id="5431794">string</span><span class="op" id="5431800">)</span><br>
<span class="lineno"></span><span class="op" id="5431802">)</span><br>
<span class="lineno">815</span><br>
<span class="lineno"></span><span class="comment" id="5431805">//&nbsp;RegisterName&nbsp;is&nbsp;like&nbsp;Register&nbsp;but&nbsp;uses&nbsp;the&nbsp;provided&nbsp;name&nbsp;rather&nbsp;than&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5431881">//&nbsp;type&#39;s&nbsp;default.</span><br>
<span class="lineno"></span><span class="keyword" id="5431900">func</span>&nbsp;<span class="ident" id="5431905">RegisterName</span><span class="op" id="5431917">(</span><span class="ident" id="5431918">name</span>&nbsp;<span class="builtintype" id="5431923">string</span><span class="op" id="5431929">,</span>&nbsp;<span class="ident" id="5431931">value</span>&nbsp;<span class="keyword" id="5431937">interface</span><span class="op" id="5431946">{</span><span class="op" id="5431947">}</span><span class="op" id="5431948">)</span>&nbsp;<span class="op" id="5431950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5431953">if</span>&nbsp;<span class="ident" id="5431956"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span>&nbsp;<span class="op" id="5431961">==</span>&nbsp;<span class="string" id="5431964">&#34;&#34;</span>&nbsp;<span class="op" id="5431967">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5431971">//&nbsp;reserved&nbsp;for&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5431993">panic</span><span class="op" id="5431998">(</span><span class="string" id="5431999">&#34;attempt&nbsp;to&nbsp;register&nbsp;empty&nbsp;name&#34;</span><span class="op" id="5432031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5432034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5432037"><a href="/gostd/encoding/gob/type.go.html#5431666">registerLock</a></span><span class="op" id="5432049">.</span><span class="ident" id="5432050"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="5432054">(</span><span class="op" id="5432055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5432058">defer</span>&nbsp;<span class="ident" id="5432064"><a href="/gostd/encoding/gob/type.go.html#5431666">registerLock</a></span><span class="op" id="5432076">.</span><span class="ident" id="5432077"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="5432083">(</span><span class="op" id="5432084">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5432087">ut</span>&nbsp;<span class="op" id="5432090">:=</span>&nbsp;<span class="ident" id="5432093"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5432101">(</span><span class="ident" id="5432102"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5432109">.</span><span class="ident" id="5432110"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5432116">(</span><span class="ident" id="5432117"><a href="/gostd/encoding/gob/type.go.html#5431931">value</a></span><span class="op" id="5432122">)</span><span class="op" id="5432123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5432126">//&nbsp;Check&nbsp;for&nbsp;incompatible&nbsp;duplicates.&nbsp;The&nbsp;name&nbsp;must&nbsp;refer&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5432192">//&nbsp;same&nbsp;user&nbsp;type,&nbsp;and&nbsp;vice&nbsp;versa.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5432228">if</span>&nbsp;<span class="ident" id="5432231">t</span><span class="op" id="5432232">,</span>&nbsp;<span class="ident" id="5432234">ok</span>&nbsp;<span class="op" id="5432237">:=</span>&nbsp;<span class="ident" id="5432240"><a href="/gostd/encoding/gob/type.go.html#5431699">nameToConcreteType</a></span><span class="op" id="5432258">[</span><span class="ident" id="5432259"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span><span class="op" id="5432263">]</span><span class="op" id="5432264">;</span>&nbsp;<span class="ident" id="5432266"><a href="/gostd/encoding/gob/type.go.html#5432234">ok</a></span>&nbsp;<span class="op" id="5432269">&amp;&amp;</span>&nbsp;<span class="ident" id="5432272"><a href="/gostd/encoding/gob/type.go.html#5432231">t</a></span>&nbsp;<span class="op" id="5432274">!=</span>&nbsp;<span class="ident" id="5432277"><a href="/gostd/encoding/gob/type.go.html#5432087">ut</a></span><span class="op" id="5432279">.</span><span class="ident" id="5432280"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span>&nbsp;<span class="op" id="5432285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5432289">panic</span><span class="op" id="5432294">(</span><span class="ident" id="5432295"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5432298">.</span><span class="ident" id="5432299"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5432306">(</span><span class="string" id="5432307">&#34;gob:&nbsp;registering&nbsp;duplicate&nbsp;types&nbsp;for&nbsp;%q:&nbsp;%s&nbsp;!=&nbsp;%s&#34;</span><span class="op" id="5432358">,</span>&nbsp;<span class="ident" id="5432360"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span><span class="op" id="5432364">,</span>&nbsp;<span class="ident" id="5432366"><a href="/gostd/encoding/gob/type.go.html#5432231">t</a></span><span class="op" id="5432367">,</span>&nbsp;<span class="ident" id="5432369"><a href="/gostd/encoding/gob/type.go.html#5432087">ut</a></span><span class="op" id="5432371">.</span><span class="ident" id="5432372"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5432376">)</span><span class="op" id="5432377">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5432380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5432383">if</span>&nbsp;<span class="ident" id="5432386">n</span><span class="op" id="5432387">,</span>&nbsp;<span class="ident" id="5432389">ok</span>&nbsp;<span class="op" id="5432392">:=</span>&nbsp;<span class="ident" id="5432395"><a href="/gostd/encoding/gob/type.go.html#5431751">concreteTypeToName</a></span><span class="op" id="5432413">[</span><span class="ident" id="5432414"><a href="/gostd/encoding/gob/type.go.html#5432087">ut</a></span><span class="op" id="5432416">.</span><span class="ident" id="5432417"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5432421">]</span><span class="op" id="5432422">;</span>&nbsp;<span class="ident" id="5432424"><a href="/gostd/encoding/gob/type.go.html#5432389">ok</a></span>&nbsp;<span class="op" id="5432427">&amp;&amp;</span>&nbsp;<span class="ident" id="5432430"><a href="/gostd/encoding/gob/type.go.html#5432386">n</a></span>&nbsp;<span class="op" id="5432432">!=</span>&nbsp;<span class="ident" id="5432435"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span>&nbsp;<span class="op" id="5432440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5432444">panic</span><span class="op" id="5432449">(</span><span class="ident" id="5432450"><a href="/gostd/encoding/gob/type.go.html#5407922">fmt</a></span><span class="op" id="5432453">.</span><span class="ident" id="5432454"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5432461">(</span><span class="string" id="5432462">&#34;gob:&nbsp;registering&nbsp;duplicate&nbsp;names&nbsp;for&nbsp;%s:&nbsp;%q&nbsp;!=&nbsp;%q&#34;</span><span class="op" id="5432513">,</span>&nbsp;<span class="ident" id="5432515"><a href="/gostd/encoding/gob/type.go.html#5432087">ut</a></span><span class="op" id="5432517">.</span><span class="ident" id="5432518"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><span class="op" id="5432522">,</span>&nbsp;<span class="ident" id="5432524"><a href="/gostd/encoding/gob/type.go.html#5432386">n</a></span><span class="op" id="5432525">,</span>&nbsp;<span class="ident" id="5432527"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span><span class="op" id="5432531">)</span><span class="op" id="5432532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5432535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5432538">//&nbsp;Store&nbsp;the&nbsp;name&nbsp;and&nbsp;type&nbsp;provided&nbsp;by&nbsp;the&nbsp;user....</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5432591"><a href="/gostd/encoding/gob/type.go.html#5431699">nameToConcreteType</a></span><span class="op" id="5432609">[</span><span class="ident" id="5432610"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span><span class="op" id="5432614">]</span>&nbsp;<span class="op" id="5432616">=</span>&nbsp;<span class="ident" id="5432618"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5432625">.</span><span class="ident" id="5432626"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5432632">(</span><span class="ident" id="5432633"><a href="/gostd/encoding/gob/type.go.html#5431931">value</a></span><span class="op" id="5432638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5432641">//&nbsp;but&nbsp;the&nbsp;flattened&nbsp;type&nbsp;in&nbsp;the&nbsp;type&nbsp;table,&nbsp;since&nbsp;that&#39;s&nbsp;what&nbsp;decode&nbsp;needs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5432719"><a href="/gostd/encoding/gob/type.go.html#5431751">concreteTypeToName</a></span><span class="op" id="5432737">[</span><span class="ident" id="5432738"><a href="/gostd/encoding/gob/type.go.html#5432087">ut</a></span><span class="op" id="5432740">.</span><span class="ident" id="5432741"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5432745">]</span>&nbsp;<span class="op" id="5432747">=</span>&nbsp;<span class="ident" id="5432749"><a href="/gostd/encoding/gob/type.go.html#5431918">name</a></span><br>
<span class="lineno"></span><span class="op" id="5432754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="5432757">//&nbsp;Register&nbsp;records&nbsp;a&nbsp;type,&nbsp;identified&nbsp;by&nbsp;a&nbsp;value&nbsp;for&nbsp;that&nbsp;type,&nbsp;under&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="5432832">//&nbsp;internal&nbsp;type&nbsp;name.&nbsp;&nbsp;That&nbsp;name&nbsp;will&nbsp;identify&nbsp;the&nbsp;concrete&nbsp;type&nbsp;of&nbsp;a&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="5432909">//&nbsp;sent&nbsp;or&nbsp;received&nbsp;as&nbsp;an&nbsp;interface&nbsp;variable.&nbsp;&nbsp;Only&nbsp;types&nbsp;that&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="5432980">//&nbsp;transferred&nbsp;as&nbsp;implementations&nbsp;of&nbsp;interface&nbsp;values&nbsp;need&nbsp;to&nbsp;be&nbsp;registered.</span><br>
<span class="lineno"></span><span class="comment" id="5433057">//&nbsp;Expecting&nbsp;to&nbsp;be&nbsp;used&nbsp;only&nbsp;during&nbsp;initialization,&nbsp;it&nbsp;panics&nbsp;if&nbsp;the&nbsp;mapping</span><br>
<span class="lineno">845</span><span class="comment" id="5433134">//&nbsp;between&nbsp;types&nbsp;and&nbsp;names&nbsp;is&nbsp;not&nbsp;a&nbsp;bijection.</span><br>
<span class="lineno"></span><span class="keyword" id="5433181">func</span>&nbsp;<span class="ident" id="5433186">Register</span><span class="op" id="5433194">(</span><span class="ident" id="5433195">value</span>&nbsp;<span class="keyword" id="5433201">interface</span><span class="op" id="5433210">{</span><span class="op" id="5433211">}</span><span class="op" id="5433212">)</span>&nbsp;<span class="op" id="5433214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433217">//&nbsp;Default&nbsp;to&nbsp;printed&nbsp;representation&nbsp;for&nbsp;unnamed&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5433273">rt</span>&nbsp;<span class="op" id="5433276">:=</span>&nbsp;<span class="ident" id="5433279"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5433286">.</span><span class="ident" id="5433287"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="5433293">(</span><span class="ident" id="5433294"><a href="/gostd/encoding/gob/type.go.html#5433195">value</a></span><span class="op" id="5433299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5433302">name</span>&nbsp;<span class="op" id="5433307">:=</span>&nbsp;<span class="ident" id="5433310"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5433312">.</span><span class="ident" id="5433313"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5433319">(</span><span class="op" id="5433320">)</span><br>
<span class="lineno">850</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433324">//&nbsp;But&nbsp;for&nbsp;named&nbsp;types&nbsp;(or&nbsp;pointers&nbsp;to&nbsp;them),&nbsp;qualify&nbsp;with&nbsp;import&nbsp;path&nbsp;(but&nbsp;see&nbsp;inner&nbsp;comment).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433421">//&nbsp;Dereference&nbsp;one&nbsp;pointer&nbsp;looking&nbsp;for&nbsp;a&nbsp;named&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5433475">star</span>&nbsp;<span class="op" id="5433480">:=</span>&nbsp;<span class="string" id="5433483">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5433487">if</span>&nbsp;<span class="ident" id="5433490"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5433492">.</span><span class="ident" id="5433493"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5433497">(</span><span class="op" id="5433498">)</span>&nbsp;<span class="op" id="5433500">==</span>&nbsp;<span class="string" id="5433503">&#34;&#34;</span>&nbsp;<span class="op" id="5433506">{</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5433510">if</span>&nbsp;<span class="ident" id="5433513">pt</span>&nbsp;<span class="op" id="5433516">:=</span>&nbsp;<span class="ident" id="5433519"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5433521">;</span>&nbsp;<span class="ident" id="5433523"><a href="/gostd/encoding/gob/type.go.html#5433513">pt</a></span><span class="op" id="5433525">.</span><span class="ident" id="5433526"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5433530">(</span><span class="op" id="5433531">)</span>&nbsp;<span class="op" id="5433533">==</span>&nbsp;<span class="ident" id="5433536"><a href="/gostd/encoding/gob/type.go.html#5407935">reflect</a></span><span class="op" id="5433543">.</span><span class="ident" id="5433544"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5433548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5433553"><a href="/gostd/encoding/gob/type.go.html#5433475">star</a></span>&nbsp;<span class="op" id="5433558">=</span>&nbsp;<span class="string" id="5433560">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433567">//&nbsp;NOTE:&nbsp;The&nbsp;following&nbsp;line&nbsp;should&nbsp;be&nbsp;rt&nbsp;=&nbsp;pt.Elem()&nbsp;to&nbsp;implement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433636">//&nbsp;what&nbsp;the&nbsp;comment&nbsp;above&nbsp;claims,&nbsp;but&nbsp;fixing&nbsp;it&nbsp;would&nbsp;break&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433713">//&nbsp;with&nbsp;existing&nbsp;gobs.</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433739">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433745">//&nbsp;Given&nbsp;package&nbsp;p&nbsp;imported&nbsp;as&nbsp;&#34;full/p&#34;&nbsp;with&nbsp;these&nbsp;definitions:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433812">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433832">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;T1&nbsp;struct&nbsp;{&nbsp;...&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433865">//&nbsp;this&nbsp;table&nbsp;shows&nbsp;the&nbsp;intended&nbsp;and&nbsp;actual&nbsp;strings&nbsp;used&nbsp;by&nbsp;gob&nbsp;to</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433935">//&nbsp;name&nbsp;the&nbsp;types:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433957">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5433963">//&nbsp;Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Correct&nbsp;string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Actual&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5434012">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5434018">//&nbsp;T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full/p.T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;full/p.T1</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5434063">//&nbsp;*T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*full/p.T1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*p.T1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5434104">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5434110">//&nbsp;The&nbsp;missing&nbsp;full&nbsp;path&nbsp;cannot&nbsp;be&nbsp;fixed&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;gob&nbsp;decoders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434194"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span>&nbsp;<span class="op" id="5434197">=</span>&nbsp;<span class="ident" id="5434199"><a href="/gostd/encoding/gob/type.go.html#5433513">pt</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5434204">}</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5434207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5434210">if</span>&nbsp;<span class="ident" id="5434213"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5434215">.</span><span class="ident" id="5434216"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5434220">(</span><span class="op" id="5434221">)</span>&nbsp;<span class="op" id="5434223">!=</span>&nbsp;<span class="string" id="5434226">&#34;&#34;</span>&nbsp;<span class="op" id="5434229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5434233">if</span>&nbsp;<span class="ident" id="5434236"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5434238">.</span><span class="ident" id="5434239"><a href="/gostd/reflect/type.go.html#2783125">PkgPath</a></span><span class="op" id="5434246">(</span><span class="op" id="5434247">)</span>&nbsp;<span class="op" id="5434249">==</span>&nbsp;<span class="string" id="5434252">&#34;&#34;</span>&nbsp;<span class="op" id="5434255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434260"><a href="/gostd/encoding/gob/type.go.html#5433302">name</a></span>&nbsp;<span class="op" id="5434265">=</span>&nbsp;<span class="ident" id="5434267"><a href="/gostd/encoding/gob/type.go.html#5433475">star</a></span>&nbsp;<span class="op" id="5434272">+</span>&nbsp;<span class="ident" id="5434274"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5434276">.</span><span class="ident" id="5434277"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5434281">(</span><span class="op" id="5434282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5434286">}</span>&nbsp;<span class="keyword" id="5434288">else</span>&nbsp;<span class="op" id="5434293">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434298"><a href="/gostd/encoding/gob/type.go.html#5433302">name</a></span>&nbsp;<span class="op" id="5434303">=</span>&nbsp;<span class="ident" id="5434305"><a href="/gostd/encoding/gob/type.go.html#5433475">star</a></span>&nbsp;<span class="op" id="5434310">+</span>&nbsp;<span class="ident" id="5434312"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5434314">.</span><span class="ident" id="5434315"><a href="/gostd/reflect/type.go.html#2783125">PkgPath</a></span><span class="op" id="5434322">(</span><span class="op" id="5434323">)</span>&nbsp;<span class="op" id="5434325">+</span>&nbsp;<span class="string" id="5434327">&#34;.&#34;</span>&nbsp;<span class="op" id="5434331">+</span>&nbsp;<span class="ident" id="5434333"><a href="/gostd/encoding/gob/type.go.html#5433273">rt</a></span><span class="op" id="5434335">.</span><span class="ident" id="5434336"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="5434340">(</span><span class="op" id="5434341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5434345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5434348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434352"><a href="/gostd/encoding/gob/type.go.html#5431905">RegisterName</a></span><span class="op" id="5434364">(</span><span class="ident" id="5434365"><a href="/gostd/encoding/gob/type.go.html#5433302">name</a></span><span class="op" id="5434369">,</span>&nbsp;<span class="ident" id="5434371"><a href="/gostd/encoding/gob/type.go.html#5433195">value</a></span><span class="op" id="5434376">)</span><br>
<span class="lineno">885</span><span class="op" id="5434378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5434381">func</span>&nbsp;<span class="ident" id="5434386">registerBasics</span><span class="op" id="5434400">(</span><span class="op" id="5434401">)</span>&nbsp;<span class="op" id="5434403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434406"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434414">(</span><span class="builtintype" id="5434415">int</span><span class="op" id="5434418">(</span><span class="num" id="5434419">0</span><span class="op" id="5434420">)</span><span class="op" id="5434421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434424"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434432">(</span><span class="builtintype" id="5434433">int8</span><span class="op" id="5434437">(</span><span class="num" id="5434438">0</span><span class="op" id="5434439">)</span><span class="op" id="5434440">)</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434443"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434451">(</span><span class="builtintype" id="5434452">int16</span><span class="op" id="5434457">(</span><span class="num" id="5434458">0</span><span class="op" id="5434459">)</span><span class="op" id="5434460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434463"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434471">(</span><span class="builtintype" id="5434472">int32</span><span class="op" id="5434477">(</span><span class="num" id="5434478">0</span><span class="op" id="5434479">)</span><span class="op" id="5434480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434483"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434491">(</span><span class="builtintype" id="5434492">int64</span><span class="op" id="5434497">(</span><span class="num" id="5434498">0</span><span class="op" id="5434499">)</span><span class="op" id="5434500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434503"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434511">(</span><span class="builtintype" id="5434512">uint</span><span class="op" id="5434516">(</span><span class="num" id="5434517">0</span><span class="op" id="5434518">)</span><span class="op" id="5434519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434522"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434530">(</span><span class="builtintype" id="5434531">uint8</span><span class="op" id="5434536">(</span><span class="num" id="5434537">0</span><span class="op" id="5434538">)</span><span class="op" id="5434539">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434542"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434550">(</span><span class="builtintype" id="5434551">uint16</span><span class="op" id="5434557">(</span><span class="num" id="5434558">0</span><span class="op" id="5434559">)</span><span class="op" id="5434560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434563"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434571">(</span><span class="builtintype" id="5434572">uint32</span><span class="op" id="5434578">(</span><span class="num" id="5434579">0</span><span class="op" id="5434580">)</span><span class="op" id="5434581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434584"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434592">(</span><span class="builtintype" id="5434593">uint64</span><span class="op" id="5434599">(</span><span class="num" id="5434600">0</span><span class="op" id="5434601">)</span><span class="op" id="5434602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434605"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434613">(</span><span class="builtintype" id="5434614">float32</span><span class="op" id="5434621">(</span><span class="num" id="5434622">0</span><span class="op" id="5434623">)</span><span class="op" id="5434624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434627"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434635">(</span><span class="builtintype" id="5434636">float64</span><span class="op" id="5434643">(</span><span class="num" id="5434644">0</span><span class="op" id="5434645">)</span><span class="op" id="5434646">)</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434649"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434657">(</span><span class="builtintype" id="5434658">complex64</span><span class="op" id="5434667">(</span><span class="num" id="5434668">0i</span><span class="op" id="5434670">)</span><span class="op" id="5434671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434674"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434682">(</span><span class="builtintype" id="5434683">complex128</span><span class="op" id="5434693">(</span><span class="num" id="5434694">0i</span><span class="op" id="5434696">)</span><span class="op" id="5434697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434700"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434708">(</span><span class="builtintype" id="5434709">uintptr</span><span class="op" id="5434716">(</span><span class="num" id="5434717">0</span><span class="op" id="5434718">)</span><span class="op" id="5434719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434722"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434730">(</span><span class="builtintype" id="5434731">false</span><span class="op" id="5434736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434739"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434747">(</span><span class="string" id="5434748">&#34;&#34;</span><span class="op" id="5434750">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434753"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434761">(</span><span class="op" id="5434762">[</span><span class="op" id="5434763">]</span><span class="builtintype" id="5434764">byte</span><span class="op" id="5434768">(</span><span class="builtintype" id="5434769">nil</span><span class="op" id="5434772">)</span><span class="op" id="5434773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434776"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434784">(</span><span class="op" id="5434785">[</span><span class="op" id="5434786">]</span><span class="builtintype" id="5434787">int</span><span class="op" id="5434790">(</span><span class="builtintype" id="5434791">nil</span><span class="op" id="5434794">)</span><span class="op" id="5434795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434798"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434806">(</span><span class="op" id="5434807">[</span><span class="op" id="5434808">]</span><span class="builtintype" id="5434809">int8</span><span class="op" id="5434813">(</span><span class="builtintype" id="5434814">nil</span><span class="op" id="5434817">)</span><span class="op" id="5434818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434821"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434829">(</span><span class="op" id="5434830">[</span><span class="op" id="5434831">]</span><span class="builtintype" id="5434832">int16</span><span class="op" id="5434837">(</span><span class="builtintype" id="5434838">nil</span><span class="op" id="5434841">)</span><span class="op" id="5434842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434845"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434853">(</span><span class="op" id="5434854">[</span><span class="op" id="5434855">]</span><span class="builtintype" id="5434856">int32</span><span class="op" id="5434861">(</span><span class="builtintype" id="5434862">nil</span><span class="op" id="5434865">)</span><span class="op" id="5434866">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434869"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434877">(</span><span class="op" id="5434878">[</span><span class="op" id="5434879">]</span><span class="builtintype" id="5434880">int64</span><span class="op" id="5434885">(</span><span class="builtintype" id="5434886">nil</span><span class="op" id="5434889">)</span><span class="op" id="5434890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434893"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434901">(</span><span class="op" id="5434902">[</span><span class="op" id="5434903">]</span><span class="builtintype" id="5434904">uint</span><span class="op" id="5434908">(</span><span class="builtintype" id="5434909">nil</span><span class="op" id="5434912">)</span><span class="op" id="5434913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434916"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434924">(</span><span class="op" id="5434925">[</span><span class="op" id="5434926">]</span><span class="builtintype" id="5434927">uint8</span><span class="op" id="5434932">(</span><span class="builtintype" id="5434933">nil</span><span class="op" id="5434936">)</span><span class="op" id="5434937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434940"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434948">(</span><span class="op" id="5434949">[</span><span class="op" id="5434950">]</span><span class="builtintype" id="5434951">uint16</span><span class="op" id="5434957">(</span><span class="builtintype" id="5434958">nil</span><span class="op" id="5434961">)</span><span class="op" id="5434962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434965"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434973">(</span><span class="op" id="5434974">[</span><span class="op" id="5434975">]</span><span class="builtintype" id="5434976">uint32</span><span class="op" id="5434982">(</span><span class="builtintype" id="5434983">nil</span><span class="op" id="5434986">)</span><span class="op" id="5434987">)</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5434990"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5434998">(</span><span class="op" id="5434999">[</span><span class="op" id="5435000">]</span><span class="builtintype" id="5435001">uint64</span><span class="op" id="5435007">(</span><span class="builtintype" id="5435008">nil</span><span class="op" id="5435011">)</span><span class="op" id="5435012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435015"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435023">(</span><span class="op" id="5435024">[</span><span class="op" id="5435025">]</span><span class="builtintype" id="5435026">float32</span><span class="op" id="5435033">(</span><span class="builtintype" id="5435034">nil</span><span class="op" id="5435037">)</span><span class="op" id="5435038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435041"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435049">(</span><span class="op" id="5435050">[</span><span class="op" id="5435051">]</span><span class="builtintype" id="5435052">float64</span><span class="op" id="5435059">(</span><span class="builtintype" id="5435060">nil</span><span class="op" id="5435063">)</span><span class="op" id="5435064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435067"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435075">(</span><span class="op" id="5435076">[</span><span class="op" id="5435077">]</span><span class="builtintype" id="5435078">complex64</span><span class="op" id="5435087">(</span><span class="builtintype" id="5435088">nil</span><span class="op" id="5435091">)</span><span class="op" id="5435092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435095"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435103">(</span><span class="op" id="5435104">[</span><span class="op" id="5435105">]</span><span class="builtintype" id="5435106">complex128</span><span class="op" id="5435116">(</span><span class="builtintype" id="5435117">nil</span><span class="op" id="5435120">)</span><span class="op" id="5435121">)</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435124"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435132">(</span><span class="op" id="5435133">[</span><span class="op" id="5435134">]</span><span class="builtintype" id="5435135">uintptr</span><span class="op" id="5435142">(</span><span class="builtintype" id="5435143">nil</span><span class="op" id="5435146">)</span><span class="op" id="5435147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435150"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435158">(</span><span class="op" id="5435159">[</span><span class="op" id="5435160">]</span><span class="builtintype" id="5435161">bool</span><span class="op" id="5435165">(</span><span class="builtintype" id="5435166">nil</span><span class="op" id="5435169">)</span><span class="op" id="5435170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5435173"><a href="/gostd/encoding/gob/type.go.html#5433186">Register</a></span><span class="op" id="5435181">(</span><span class="op" id="5435182">[</span><span class="op" id="5435183">]</span><span class="builtintype" id="5435184">string</span><span class="op" id="5435190">(</span><span class="builtintype" id="5435191">nil</span><span class="op" id="5435194">)</span><span class="op" id="5435195">)</span><br>
<span class="lineno"></span><span class="op" id="5435197">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
