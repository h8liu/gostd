<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6896091">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6896146">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6896200">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6896251">package</span>&nbsp;<span class="ident" id="6896259">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6896264">import</span>&nbsp;<span class="op" id="6896271">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6896274">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6896283">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6896294">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6896304">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6896307">type</span>&nbsp;<span class="ident" id="6896312">typeT</span>&nbsp;<span class="keyword" id="6896318">struct</span>&nbsp;<span class="op" id="6896325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896328">id</span>&nbsp;&nbsp;<span class="ident" id="6896332"><a href="/encoding/gob/type.go.html#5930234">typeId</a></span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896340">str</span>&nbsp;<span class="builtintype" id="6896344">string</span><br>
<span class="lineno"></span><span class="op" id="6896351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6896354">var</span>&nbsp;<span class="ident" id="6896358">basicTypes</span>&nbsp;<span class="op" id="6896369">=</span>&nbsp;<span class="op" id="6896371">[</span><span class="op" id="6896372">]</span><span class="ident" id="6896373"><a href="/encoding/gob/type_test.go.html#6896312">typeT</a></span><span class="op" id="6896378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896381">{</span><span class="ident" id="6896382"><a href="/encoding/gob/type.go.html#5932271">tBool</a></span><span class="op" id="6896387">,</span>&nbsp;<span class="string" id="6896389">&#34;bool&#34;</span><span class="op" id="6896395">}</span><span class="op" id="6896396">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896399">{</span><span class="ident" id="6896400"><a href="/encoding/gob/type.go.html#5932324">tInt</a></span><span class="op" id="6896404">,</span>&nbsp;<span class="string" id="6896406">&#34;int&#34;</span><span class="op" id="6896411">}</span><span class="op" id="6896412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896415">{</span><span class="ident" id="6896416"><a href="/encoding/gob/type.go.html#5932375">tUint</a></span><span class="op" id="6896421">,</span>&nbsp;<span class="string" id="6896423">&#34;uint&#34;</span><span class="op" id="6896429">}</span><span class="op" id="6896430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896433">{</span><span class="ident" id="6896434"><a href="/encoding/gob/type.go.html#5932428">tFloat</a></span><span class="op" id="6896440">,</span>&nbsp;<span class="string" id="6896442">&#34;float&#34;</span><span class="op" id="6896449">}</span><span class="op" id="6896450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896453">{</span><span class="ident" id="6896454"><a href="/encoding/gob/type.go.html#5932485">tBytes</a></span><span class="op" id="6896460">,</span>&nbsp;<span class="string" id="6896462">&#34;bytes&#34;</span><span class="op" id="6896469">}</span><span class="op" id="6896470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896473">{</span><span class="ident" id="6896474"><a href="/encoding/gob/type.go.html#5932541">tString</a></span><span class="op" id="6896481">,</span>&nbsp;<span class="string" id="6896483">&#34;string&#34;</span><span class="op" id="6896491">}</span><span class="op" id="6896492">,</span><br>
<span class="lineno">25</span><span class="op" id="6896494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6896497">func</span>&nbsp;<span class="ident" id="6896502">getTypeUnlocked</span><span class="op" id="6896517">(</span><span class="ident" id="6896518">name</span>&nbsp;<span class="builtintype" id="6896523">string</span><span class="op" id="6896529">,</span>&nbsp;<span class="ident" id="6896531">rt</span>&nbsp;<span class="ident" id="6896534"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6896541">.</span><span class="ident" id="6896542">Type</span><span class="op" id="6896546">)</span>&nbsp;<span class="ident" id="6896548"><a href="/encoding/gob/type.go.html#5930433">gobType</a></span>&nbsp;<span class="op" id="6896556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896559"><a href="/encoding/gob/type.go.html#5930318">typeLock</a></span><span class="op" id="6896567">.</span><span class="ident" id="6896568">Lock</span><span class="op" id="6896572">(</span><span class="op" id="6896573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896576">defer</span>&nbsp;<span class="ident" id="6896582"><a href="/encoding/gob/type.go.html#5930318">typeLock</a></span><span class="op" id="6896590">.</span><span class="ident" id="6896591">Unlock</span><span class="op" id="6896597">(</span><span class="op" id="6896598">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896601">t</span><span class="op" id="6896602">,</span>&nbsp;<span class="ident" id="6896604">err</span>&nbsp;<span class="op" id="6896608">:=</span>&nbsp;<span class="ident" id="6896611"><a href="/encoding/gob/type.go.html#5941877">getBaseType</a></span><span class="op" id="6896622">(</span><span class="ident" id="6896623"><a href="/encoding/gob/type_test.go.html#6896518">name</a></span><span class="op" id="6896627">,</span>&nbsp;<span class="ident" id="6896629"><a href="/encoding/gob/type_test.go.html#6896531">rt</a></span><span class="op" id="6896631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896634">if</span>&nbsp;<span class="ident" id="6896637"><a href="/encoding/gob/type_test.go.html#6896604">err</a></span>&nbsp;<span class="op" id="6896641">!=</span>&nbsp;<span class="ident" id="6896644">nil</span>&nbsp;<span class="op" id="6896648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6896652">panic</span><span class="op" id="6896657">(</span><span class="string" id="6896658">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="6896678">+</span>&nbsp;<span class="ident" id="6896680"><a href="/encoding/gob/type_test.go.html#6896604">err</a></span><span class="op" id="6896683">.</span><span class="ident" id="6896684">Error</span><span class="op" id="6896689">(</span><span class="op" id="6896690">)</span><span class="op" id="6896691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896697">return</span>&nbsp;<span class="ident" id="6896704"><a href="/encoding/gob/type_test.go.html#6896601">t</a></span><br>
<span class="lineno">35</span><span class="op" id="6896706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6896709">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="6896726">func</span>&nbsp;<span class="ident" id="6896731">TestBasic</span><span class="op" id="6896740">(</span><span class="ident" id="6896741">t</span>&nbsp;<span class="op" id="6896743">*</span><span class="ident" id="6896744"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6896751">.</span><span class="ident" id="6896752">T</span><span class="op" id="6896753">)</span>&nbsp;<span class="op" id="6896755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896758">for</span>&nbsp;<span class="ident" id="6896762">_</span><span class="op" id="6896763">,</span>&nbsp;<span class="ident" id="6896765">tt</span>&nbsp;<span class="op" id="6896768">:=</span>&nbsp;<span class="keyword" id="6896771">range</span>&nbsp;<span class="ident" id="6896777"><a href="/encoding/gob/type_test.go.html#6896358">basicTypes</a></span>&nbsp;<span class="op" id="6896788">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896792">if</span>&nbsp;<span class="ident" id="6896795"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896797">.</span><span class="ident" id="6896798">id</span><span class="op" id="6896800">.</span><span class="builtintype" id="6896801">string</span><span class="op" id="6896807">(</span><span class="op" id="6896808">)</span>&nbsp;<span class="op" id="6896810">!=</span>&nbsp;<span class="ident" id="6896813"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896815">.</span><span class="ident" id="6896816">str</span>&nbsp;<span class="op" id="6896820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896825"><a href="/encoding/gob/type_test.go.html#6896741">t</a></span><span class="op" id="6896826">.</span><span class="ident" id="6896827">Errorf</span><span class="op" id="6896833">(</span><span class="string" id="6896834">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6896865">,</span>&nbsp;<span class="ident" id="6896867"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896869">.</span><span class="ident" id="6896870">str</span><span class="op" id="6896873">,</span>&nbsp;<span class="ident" id="6896875"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896877">.</span><span class="ident" id="6896878">id</span><span class="op" id="6896880">.</span><span class="builtintype" id="6896881">string</span><span class="op" id="6896887">(</span><span class="op" id="6896888">)</span><span class="op" id="6896889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6896897">if</span>&nbsp;<span class="ident" id="6896900"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896902">.</span><span class="ident" id="6896903">id</span>&nbsp;<span class="op" id="6896906">==</span>&nbsp;<span class="num" id="6896909">0</span>&nbsp;<span class="op" id="6896911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6896916"><a href="/encoding/gob/type_test.go.html#6896741">t</a></span><span class="op" id="6896917">.</span><span class="ident" id="6896918">Errorf</span><span class="op" id="6896924">(</span><span class="string" id="6896925">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="6896944">,</span>&nbsp;<span class="ident" id="6896946"><a href="/encoding/gob/type_test.go.html#6896765">tt</a></span><span class="op" id="6896948">.</span><span class="ident" id="6896949">str</span><span class="op" id="6896952">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6896959">}</span><br>
<span class="lineno"></span><span class="op" id="6896961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6896964">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="6897032">func</span>&nbsp;<span class="ident" id="6897037">TestReregistration</span><span class="op" id="6897055">(</span><span class="ident" id="6897056">t</span>&nbsp;<span class="op" id="6897058">*</span><span class="ident" id="6897059"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6897066">.</span><span class="ident" id="6897067">T</span><span class="op" id="6897068">)</span>&nbsp;<span class="op" id="6897070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897073">newtyp</span>&nbsp;<span class="op" id="6897080">:=</span>&nbsp;<span class="ident" id="6897083"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897098">(</span><span class="string" id="6897099">&#34;int&#34;</span><span class="op" id="6897104">,</span>&nbsp;<span class="ident" id="6897106"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897113">.</span><span class="ident" id="6897114">TypeOf</span><span class="op" id="6897120">(</span><span class="builtintype" id="6897121">int</span><span class="op" id="6897124">(</span><span class="num" id="6897125">0</span><span class="op" id="6897126">)</span><span class="op" id="6897127">)</span><span class="op" id="6897128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897131">if</span>&nbsp;<span class="ident" id="6897134"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span>&nbsp;<span class="op" id="6897141">!=</span>&nbsp;<span class="ident" id="6897144"><a href="/encoding/gob/type.go.html#5932324">tInt</a></span><span class="op" id="6897148">.</span><span class="ident" id="6897149">gobType</span><span class="op" id="6897156">(</span><span class="op" id="6897157">)</span>&nbsp;<span class="op" id="6897159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897163"><a href="/encoding/gob/type_test.go.html#6897056">t</a></span><span class="op" id="6897164">.</span><span class="ident" id="6897165">Errorf</span><span class="op" id="6897171">(</span><span class="string" id="6897172">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6897207">,</span>&nbsp;<span class="ident" id="6897209"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span><span class="op" id="6897215">.</span><span class="builtintype" id="6897216">string</span><span class="op" id="6897222">(</span><span class="op" id="6897223">)</span><span class="op" id="6897224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897227">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897230"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span>&nbsp;<span class="op" id="6897237">=</span>&nbsp;<span class="ident" id="6897239"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897254">(</span><span class="string" id="6897255">&#34;uint&#34;</span><span class="op" id="6897261">,</span>&nbsp;<span class="ident" id="6897263"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897270">.</span><span class="ident" id="6897271">TypeOf</span><span class="op" id="6897277">(</span><span class="builtintype" id="6897278">uint</span><span class="op" id="6897282">(</span><span class="num" id="6897283">0</span><span class="op" id="6897284">)</span><span class="op" id="6897285">)</span><span class="op" id="6897286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897289">if</span>&nbsp;<span class="ident" id="6897292"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span>&nbsp;<span class="op" id="6897299">!=</span>&nbsp;<span class="ident" id="6897302"><a href="/encoding/gob/type.go.html#5932375">tUint</a></span><span class="op" id="6897307">.</span><span class="ident" id="6897308">gobType</span><span class="op" id="6897315">(</span><span class="op" id="6897316">)</span>&nbsp;<span class="op" id="6897318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897322"><a href="/encoding/gob/type_test.go.html#6897056">t</a></span><span class="op" id="6897323">.</span><span class="ident" id="6897324">Errorf</span><span class="op" id="6897330">(</span><span class="string" id="6897331">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6897366">,</span>&nbsp;<span class="ident" id="6897368"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span><span class="op" id="6897374">.</span><span class="builtintype" id="6897375">string</span><span class="op" id="6897381">(</span><span class="op" id="6897382">)</span><span class="op" id="6897383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897389"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span>&nbsp;<span class="op" id="6897396">=</span>&nbsp;<span class="ident" id="6897398"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897413">(</span><span class="string" id="6897414">&#34;string&#34;</span><span class="op" id="6897422">,</span>&nbsp;<span class="ident" id="6897424"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897431">.</span><span class="ident" id="6897432">TypeOf</span><span class="op" id="6897438">(</span><span class="string" id="6897439">&#34;hello&#34;</span><span class="op" id="6897446">)</span><span class="op" id="6897447">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897450">if</span>&nbsp;<span class="ident" id="6897453"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span>&nbsp;<span class="op" id="6897460">!=</span>&nbsp;<span class="ident" id="6897463"><a href="/encoding/gob/type.go.html#5932541">tString</a></span><span class="op" id="6897470">.</span><span class="ident" id="6897471">gobType</span><span class="op" id="6897478">(</span><span class="op" id="6897479">)</span>&nbsp;<span class="op" id="6897481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897485"><a href="/encoding/gob/type_test.go.html#6897056">t</a></span><span class="op" id="6897486">.</span><span class="ident" id="6897487">Errorf</span><span class="op" id="6897493">(</span><span class="string" id="6897494">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6897529">,</span>&nbsp;<span class="ident" id="6897531"><a href="/encoding/gob/type_test.go.html#6897073">newtyp</a></span><span class="op" id="6897537">.</span><span class="builtintype" id="6897538">string</span><span class="op" id="6897544">(</span><span class="op" id="6897545">)</span><span class="op" id="6897546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897549">}</span><br>
<span class="lineno"></span><span class="op" id="6897551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6897554">func</span>&nbsp;<span class="ident" id="6897559">TestArrayType</span><span class="op" id="6897572">(</span><span class="ident" id="6897573">t</span>&nbsp;<span class="op" id="6897575">*</span><span class="ident" id="6897576"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6897583">.</span><span class="ident" id="6897584">T</span><span class="op" id="6897585">)</span>&nbsp;<span class="op" id="6897587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897590">var</span>&nbsp;<span class="ident" id="6897594">a3</span>&nbsp;<span class="op" id="6897597">[</span><span class="num" id="6897598">3</span><span class="op" id="6897599">]</span><span class="builtintype" id="6897600">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897605">a3int</span>&nbsp;<span class="op" id="6897611">:=</span>&nbsp;<span class="ident" id="6897614"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897629">(</span><span class="string" id="6897630">&#34;foo&#34;</span><span class="op" id="6897635">,</span>&nbsp;<span class="ident" id="6897637"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897644">.</span><span class="ident" id="6897645">TypeOf</span><span class="op" id="6897651">(</span><span class="ident" id="6897652"><a href="/encoding/gob/type_test.go.html#6897594">a3</a></span><span class="op" id="6897654">)</span><span class="op" id="6897655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897658">newa3int</span>&nbsp;<span class="op" id="6897667">:=</span>&nbsp;<span class="ident" id="6897670"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897685">(</span><span class="string" id="6897686">&#34;bar&#34;</span><span class="op" id="6897691">,</span>&nbsp;<span class="ident" id="6897693"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897700">.</span><span class="ident" id="6897701">TypeOf</span><span class="op" id="6897707">(</span><span class="ident" id="6897708"><a href="/encoding/gob/type_test.go.html#6897594">a3</a></span><span class="op" id="6897710">)</span><span class="op" id="6897711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897714">if</span>&nbsp;<span class="ident" id="6897717"><a href="/encoding/gob/type_test.go.html#6897605">a3int</a></span>&nbsp;<span class="op" id="6897723">!=</span>&nbsp;<span class="ident" id="6897726"><a href="/encoding/gob/type_test.go.html#6897658">newa3int</a></span>&nbsp;<span class="op" id="6897735">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897739"><a href="/encoding/gob/type_test.go.html#6897573">t</a></span><span class="op" id="6897740">.</span><span class="ident" id="6897741">Errorf</span><span class="op" id="6897747">(</span><span class="string" id="6897748">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6897796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897802">var</span>&nbsp;<span class="ident" id="6897806">a4</span>&nbsp;<span class="op" id="6897809">[</span><span class="num" id="6897810">4</span><span class="op" id="6897811">]</span><span class="builtintype" id="6897812">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897817">a4int</span>&nbsp;<span class="op" id="6897823">:=</span>&nbsp;<span class="ident" id="6897826"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6897841">(</span><span class="string" id="6897842">&#34;goo&#34;</span><span class="op" id="6897847">,</span>&nbsp;<span class="ident" id="6897849"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6897856">.</span><span class="ident" id="6897857">TypeOf</span><span class="op" id="6897863">(</span><span class="ident" id="6897864"><a href="/encoding/gob/type_test.go.html#6897806">a4</a></span><span class="op" id="6897866">)</span><span class="op" id="6897867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897870">if</span>&nbsp;<span class="ident" id="6897873"><a href="/encoding/gob/type_test.go.html#6897605">a3int</a></span>&nbsp;<span class="op" id="6897879">==</span>&nbsp;<span class="ident" id="6897882"><a href="/encoding/gob/type_test.go.html#6897817">a4int</a></span>&nbsp;<span class="op" id="6897888">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897892"><a href="/encoding/gob/type_test.go.html#6897573">t</a></span><span class="op" id="6897893">.</span><span class="ident" id="6897894">Errorf</span><span class="op" id="6897900">(</span><span class="string" id="6897901">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="6897953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6897956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6897959">var</span>&nbsp;<span class="ident" id="6897963">b3</span>&nbsp;<span class="op" id="6897966">[</span><span class="num" id="6897967">3</span><span class="op" id="6897968">]</span><span class="builtintype" id="6897969">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6897975">a3bool</span>&nbsp;<span class="op" id="6897982">:=</span>&nbsp;<span class="ident" id="6897985"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898000">(</span><span class="string" id="6898001">&#34;&#34;</span><span class="op" id="6898003">,</span>&nbsp;<span class="ident" id="6898005"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898012">.</span><span class="ident" id="6898013">TypeOf</span><span class="op" id="6898019">(</span><span class="ident" id="6898020"><a href="/encoding/gob/type_test.go.html#6897963">b3</a></span><span class="op" id="6898022">)</span><span class="op" id="6898023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898026">if</span>&nbsp;<span class="ident" id="6898029"><a href="/encoding/gob/type_test.go.html#6897605">a3int</a></span>&nbsp;<span class="op" id="6898035">==</span>&nbsp;<span class="ident" id="6898038"><a href="/encoding/gob/type_test.go.html#6897975">a3bool</a></span>&nbsp;<span class="op" id="6898045">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898049"><a href="/encoding/gob/type_test.go.html#6897573">t</a></span><span class="op" id="6898050">.</span><span class="ident" id="6898051">Errorf</span><span class="op" id="6898057">(</span><span class="string" id="6898058">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="6898111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898117">str</span>&nbsp;<span class="op" id="6898121">:=</span>&nbsp;<span class="ident" id="6898124"><a href="/encoding/gob/type_test.go.html#6897975">a3bool</a></span><span class="op" id="6898130">.</span><span class="builtintype" id="6898131">string</span><span class="op" id="6898137">(</span><span class="op" id="6898138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898141">expected</span>&nbsp;<span class="op" id="6898150">:=</span>&nbsp;<span class="string" id="6898153">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898164">if</span>&nbsp;<span class="ident" id="6898167"><a href="/encoding/gob/type_test.go.html#6898117">str</a></span>&nbsp;<span class="op" id="6898171">!=</span>&nbsp;<span class="ident" id="6898174"><a href="/encoding/gob/type_test.go.html#6898141">expected</a></span>&nbsp;<span class="op" id="6898183">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898187"><a href="/encoding/gob/type_test.go.html#6897573">t</a></span><span class="op" id="6898188">.</span><span class="ident" id="6898189">Errorf</span><span class="op" id="6898195">(</span><span class="string" id="6898196">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6898230">,</span>&nbsp;<span class="ident" id="6898232"><a href="/encoding/gob/type_test.go.html#6898117">str</a></span><span class="op" id="6898235">,</span>&nbsp;<span class="ident" id="6898237"><a href="/encoding/gob/type_test.go.html#6898141">expected</a></span><span class="op" id="6898245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898248">}</span><br>
<span class="lineno"></span><span class="op" id="6898250">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6898253">func</span>&nbsp;<span class="ident" id="6898258">TestSliceType</span><span class="op" id="6898271">(</span><span class="ident" id="6898272">t</span>&nbsp;<span class="op" id="6898274">*</span><span class="ident" id="6898275"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6898282">.</span><span class="ident" id="6898283">T</span><span class="op" id="6898284">)</span>&nbsp;<span class="op" id="6898286">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898289">var</span>&nbsp;<span class="ident" id="6898293">s</span>&nbsp;<span class="op" id="6898295">[</span><span class="op" id="6898296">]</span><span class="builtintype" id="6898297">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898302">sint</span>&nbsp;<span class="op" id="6898307">:=</span>&nbsp;<span class="ident" id="6898310"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898325">(</span><span class="string" id="6898326">&#34;slice&#34;</span><span class="op" id="6898333">,</span>&nbsp;<span class="ident" id="6898335"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898342">.</span><span class="ident" id="6898343">TypeOf</span><span class="op" id="6898349">(</span><span class="ident" id="6898350"><a href="/encoding/gob/type_test.go.html#6898293">s</a></span><span class="op" id="6898351">)</span><span class="op" id="6898352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898355">var</span>&nbsp;<span class="ident" id="6898359">news</span>&nbsp;<span class="op" id="6898364">[</span><span class="op" id="6898365">]</span><span class="builtintype" id="6898366">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898371">newsint</span>&nbsp;<span class="op" id="6898379">:=</span>&nbsp;<span class="ident" id="6898382"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898397">(</span><span class="string" id="6898398">&#34;slice1&#34;</span><span class="op" id="6898406">,</span>&nbsp;<span class="ident" id="6898408"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898415">.</span><span class="ident" id="6898416">TypeOf</span><span class="op" id="6898422">(</span><span class="ident" id="6898423"><a href="/encoding/gob/type_test.go.html#6898359">news</a></span><span class="op" id="6898427">)</span><span class="op" id="6898428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898431">if</span>&nbsp;<span class="ident" id="6898434"><a href="/encoding/gob/type_test.go.html#6898302">sint</a></span>&nbsp;<span class="op" id="6898439">!=</span>&nbsp;<span class="ident" id="6898442"><a href="/encoding/gob/type_test.go.html#6898371">newsint</a></span>&nbsp;<span class="op" id="6898450">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898454"><a href="/encoding/gob/type_test.go.html#6898272">t</a></span><span class="op" id="6898455">.</span><span class="ident" id="6898456">Errorf</span><span class="op" id="6898462">(</span><span class="string" id="6898463">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6898510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898516">var</span>&nbsp;<span class="ident" id="6898520">b</span>&nbsp;<span class="op" id="6898522">[</span><span class="op" id="6898523">]</span><span class="builtintype" id="6898524">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898530">sbool</span>&nbsp;<span class="op" id="6898536">:=</span>&nbsp;<span class="ident" id="6898539"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898554">(</span><span class="string" id="6898555">&#34;&#34;</span><span class="op" id="6898557">,</span>&nbsp;<span class="ident" id="6898559"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898566">.</span><span class="ident" id="6898567">TypeOf</span><span class="op" id="6898573">(</span><span class="ident" id="6898574"><a href="/encoding/gob/type_test.go.html#6898520">b</a></span><span class="op" id="6898575">)</span><span class="op" id="6898576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898579">if</span>&nbsp;<span class="ident" id="6898582"><a href="/encoding/gob/type_test.go.html#6898530">sbool</a></span>&nbsp;<span class="op" id="6898588">==</span>&nbsp;<span class="ident" id="6898591"><a href="/encoding/gob/type_test.go.html#6898302">sint</a></span>&nbsp;<span class="op" id="6898596">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898600"><a href="/encoding/gob/type_test.go.html#6898272">t</a></span><span class="op" id="6898601">.</span><span class="ident" id="6898602">Errorf</span><span class="op" id="6898608">(</span><span class="string" id="6898609">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="6898660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898666">str</span>&nbsp;<span class="op" id="6898670">:=</span>&nbsp;<span class="ident" id="6898673"><a href="/encoding/gob/type_test.go.html#6898530">sbool</a></span><span class="op" id="6898678">.</span><span class="builtintype" id="6898679">string</span><span class="op" id="6898685">(</span><span class="op" id="6898686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898689">expected</span>&nbsp;<span class="op" id="6898698">:=</span>&nbsp;<span class="string" id="6898701">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898711">if</span>&nbsp;<span class="ident" id="6898714"><a href="/encoding/gob/type_test.go.html#6898666">str</a></span>&nbsp;<span class="op" id="6898718">!=</span>&nbsp;<span class="ident" id="6898721"><a href="/encoding/gob/type_test.go.html#6898689">expected</a></span>&nbsp;<span class="op" id="6898730">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898734"><a href="/encoding/gob/type_test.go.html#6898272">t</a></span><span class="op" id="6898735">.</span><span class="ident" id="6898736">Errorf</span><span class="op" id="6898742">(</span><span class="string" id="6898743">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6898777">,</span>&nbsp;<span class="ident" id="6898779"><a href="/encoding/gob/type_test.go.html#6898666">str</a></span><span class="op" id="6898782">,</span>&nbsp;<span class="ident" id="6898784"><a href="/encoding/gob/type_test.go.html#6898689">expected</a></span><span class="op" id="6898792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6898795">}</span><br>
<span class="lineno"></span><span class="op" id="6898797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6898800">func</span>&nbsp;<span class="ident" id="6898805">TestMapType</span><span class="op" id="6898816">(</span><span class="ident" id="6898817">t</span>&nbsp;<span class="op" id="6898819">*</span><span class="ident" id="6898820"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6898827">.</span><span class="ident" id="6898828">T</span><span class="op" id="6898829">)</span>&nbsp;<span class="op" id="6898831">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898834">var</span>&nbsp;<span class="ident" id="6898838">m</span>&nbsp;<span class="keyword" id="6898840">map</span><span class="op" id="6898843">[</span><span class="builtintype" id="6898844">string</span><span class="op" id="6898850">]</span><span class="builtintype" id="6898851">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898856">mapStringInt</span>&nbsp;<span class="op" id="6898869">:=</span>&nbsp;<span class="ident" id="6898872"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898887">(</span><span class="string" id="6898888">&#34;map&#34;</span><span class="op" id="6898893">,</span>&nbsp;<span class="ident" id="6898895"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898902">.</span><span class="ident" id="6898903">TypeOf</span><span class="op" id="6898909">(</span><span class="ident" id="6898910"><a href="/encoding/gob/type_test.go.html#6898838">m</a></span><span class="op" id="6898911">)</span><span class="op" id="6898912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6898915">var</span>&nbsp;<span class="ident" id="6898919">newm</span>&nbsp;<span class="keyword" id="6898924">map</span><span class="op" id="6898927">[</span><span class="builtintype" id="6898928">string</span><span class="op" id="6898934">]</span><span class="builtintype" id="6898935">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6898940">newMapStringInt</span>&nbsp;<span class="op" id="6898956">:=</span>&nbsp;<span class="ident" id="6898959"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6898974">(</span><span class="string" id="6898975">&#34;map1&#34;</span><span class="op" id="6898981">,</span>&nbsp;<span class="ident" id="6898983"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6898990">.</span><span class="ident" id="6898991">TypeOf</span><span class="op" id="6898997">(</span><span class="ident" id="6898998"><a href="/encoding/gob/type_test.go.html#6898919">newm</a></span><span class="op" id="6899002">)</span><span class="op" id="6899003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6899006">if</span>&nbsp;<span class="ident" id="6899009"><a href="/encoding/gob/type_test.go.html#6898856">mapStringInt</a></span>&nbsp;<span class="op" id="6899022">!=</span>&nbsp;<span class="ident" id="6899025"><a href="/encoding/gob/type_test.go.html#6898940">newMapStringInt</a></span>&nbsp;<span class="op" id="6899041">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899045"><a href="/encoding/gob/type_test.go.html#6898817">t</a></span><span class="op" id="6899046">.</span><span class="ident" id="6899047">Errorf</span><span class="op" id="6899053">(</span><span class="string" id="6899054">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6899110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6899116">var</span>&nbsp;<span class="ident" id="6899120">b</span>&nbsp;<span class="keyword" id="6899122">map</span><span class="op" id="6899125">[</span><span class="builtintype" id="6899126">string</span><span class="op" id="6899132">]</span><span class="builtintype" id="6899133">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899139">mapStringBool</span>&nbsp;<span class="op" id="6899153">:=</span>&nbsp;<span class="ident" id="6899156"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6899171">(</span><span class="string" id="6899172">&#34;&#34;</span><span class="op" id="6899174">,</span>&nbsp;<span class="ident" id="6899176"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6899183">.</span><span class="ident" id="6899184">TypeOf</span><span class="op" id="6899190">(</span><span class="ident" id="6899191"><a href="/encoding/gob/type_test.go.html#6899120">b</a></span><span class="op" id="6899192">)</span><span class="op" id="6899193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6899196">if</span>&nbsp;<span class="ident" id="6899199"><a href="/encoding/gob/type_test.go.html#6899139">mapStringBool</a></span>&nbsp;<span class="op" id="6899213">==</span>&nbsp;<span class="ident" id="6899216"><a href="/encoding/gob/type_test.go.html#6898856">mapStringInt</a></span>&nbsp;<span class="op" id="6899229">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899233"><a href="/encoding/gob/type_test.go.html#6898817">t</a></span><span class="op" id="6899234">.</span><span class="ident" id="6899235">Errorf</span><span class="op" id="6899241">(</span><span class="string" id="6899242">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="6899311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899317">str</span>&nbsp;<span class="op" id="6899321">:=</span>&nbsp;<span class="ident" id="6899324"><a href="/encoding/gob/type_test.go.html#6899139">mapStringBool</a></span><span class="op" id="6899337">.</span><span class="builtintype" id="6899338">string</span><span class="op" id="6899344">(</span><span class="op" id="6899345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899348">expected</span>&nbsp;<span class="op" id="6899357">:=</span>&nbsp;<span class="string" id="6899360">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6899379">if</span>&nbsp;<span class="ident" id="6899382"><a href="/encoding/gob/type_test.go.html#6899317">str</a></span>&nbsp;<span class="op" id="6899386">!=</span>&nbsp;<span class="ident" id="6899389"><a href="/encoding/gob/type_test.go.html#6899348">expected</a></span>&nbsp;<span class="op" id="6899398">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899402"><a href="/encoding/gob/type_test.go.html#6898817">t</a></span><span class="op" id="6899403">.</span><span class="ident" id="6899404">Errorf</span><span class="op" id="6899410">(</span><span class="string" id="6899411">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6899443">,</span>&nbsp;<span class="ident" id="6899445"><a href="/encoding/gob/type_test.go.html#6899317">str</a></span><span class="op" id="6899448">,</span>&nbsp;<span class="ident" id="6899450"><a href="/encoding/gob/type_test.go.html#6899348">expected</a></span><span class="op" id="6899458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6899461">}</span><br>
<span class="lineno"></span><span class="op" id="6899463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6899466">type</span>&nbsp;<span class="ident" id="6899471">Bar</span>&nbsp;<span class="keyword" id="6899475">struct</span>&nbsp;<span class="op" id="6899482">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899485">X</span>&nbsp;<span class="builtintype" id="6899487">string</span><br>
<span class="lineno"></span><span class="op" id="6899494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6899497">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="6899578">type</span>&nbsp;<span class="ident" id="6899583">Foo</span>&nbsp;<span class="keyword" id="6899587">struct</span>&nbsp;<span class="op" id="6899594">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899597">A</span>&nbsp;<span class="builtintype" id="6899599">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899604">B</span>&nbsp;<span class="builtintype" id="6899606">int32</span>&nbsp;<span class="comment" id="6899612">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899632">C</span>&nbsp;<span class="builtintype" id="6899634">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899642">D</span>&nbsp;<span class="op" id="6899644">[</span><span class="op" id="6899645">]</span><span class="builtintype" id="6899646">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899652">E</span>&nbsp;<span class="op" id="6899654">*</span><span class="builtintype" id="6899655">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6899666">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899690">F</span>&nbsp;<span class="op" id="6899692">*</span><span class="op" id="6899693">*</span><span class="op" id="6899694">*</span><span class="op" id="6899695">*</span><span class="builtintype" id="6899696">float64</span>&nbsp;<span class="comment" id="6899704">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899728">G</span>&nbsp;<span class="op" id="6899730">*</span><span class="ident" id="6899731"><a href="/encoding/gob/type_test.go.html#6899471">Bar</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899736">H</span>&nbsp;<span class="op" id="6899738">*</span><span class="ident" id="6899739"><a href="/encoding/gob/type_test.go.html#6899471">Bar</a></span>&nbsp;<span class="comment" id="6899743">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899798">I</span>&nbsp;<span class="op" id="6899800">*</span><span class="ident" id="6899801"><a href="/encoding/gob/type_test.go.html#6899583">Foo</a></span>&nbsp;<span class="comment" id="6899805">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="6899825">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="6899828">func</span>&nbsp;<span class="ident" id="6899833">TestStructType</span><span class="op" id="6899847">(</span><span class="ident" id="6899848">t</span>&nbsp;<span class="op" id="6899850">*</span><span class="ident" id="6899851"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6899858">.</span><span class="ident" id="6899859">T</span><span class="op" id="6899860">)</span>&nbsp;<span class="op" id="6899862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899865">sstruct</span>&nbsp;<span class="op" id="6899873">:=</span>&nbsp;<span class="ident" id="6899876"><a href="/encoding/gob/type_test.go.html#6896502">getTypeUnlocked</a></span><span class="op" id="6899891">(</span><span class="string" id="6899892">&#34;Foo&#34;</span><span class="op" id="6899897">,</span>&nbsp;<span class="ident" id="6899899"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6899906">.</span><span class="ident" id="6899907">TypeOf</span><span class="op" id="6899913">(</span><span class="ident" id="6899914"><a href="/encoding/gob/type_test.go.html#6899583">Foo</a></span><span class="op" id="6899917">{</span><span class="op" id="6899918">}</span><span class="op" id="6899919">)</span><span class="op" id="6899920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6899923">str</span>&nbsp;<span class="op" id="6899927">:=</span>&nbsp;<span class="ident" id="6899930"><a href="/encoding/gob/type_test.go.html#6899865">sstruct</a></span><span class="op" id="6899937">.</span><span class="builtintype" id="6899938">string</span><span class="op" id="6899944">(</span><span class="op" id="6899945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6899948">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900005">expected</span>&nbsp;<span class="op" id="6900014">:=</span>&nbsp;<span class="string" id="6900017">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900132">if</span>&nbsp;<span class="ident" id="6900135"><a href="/encoding/gob/type_test.go.html#6899923">str</a></span>&nbsp;<span class="op" id="6900139">!=</span>&nbsp;<span class="ident" id="6900142"><a href="/encoding/gob/type_test.go.html#6900005">expected</a></span>&nbsp;<span class="op" id="6900151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900155"><a href="/encoding/gob/type_test.go.html#6899848">t</a></span><span class="op" id="6900156">.</span><span class="ident" id="6900157">Errorf</span><span class="op" id="6900163">(</span><span class="string" id="6900164">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6900199">,</span>&nbsp;<span class="ident" id="6900201"><a href="/encoding/gob/type_test.go.html#6899923">str</a></span><span class="op" id="6900204">,</span>&nbsp;<span class="ident" id="6900206"><a href="/encoding/gob/type_test.go.html#6900005">expected</a></span><span class="op" id="6900214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900217">}</span><br>
<span class="lineno"></span><span class="op" id="6900219">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6900222">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="6900299">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="6900336">func</span>&nbsp;<span class="ident" id="6900341">TestRegistration</span><span class="op" id="6900357">(</span><span class="ident" id="6900358">t</span>&nbsp;<span class="op" id="6900360">*</span><span class="ident" id="6900361"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6900368">.</span><span class="ident" id="6900369">T</span><span class="op" id="6900370">)</span>&nbsp;<span class="op" id="6900372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900375">type</span>&nbsp;<span class="ident" id="6900380">T</span>&nbsp;<span class="keyword" id="6900382">struct</span><span class="op" id="6900388">{</span>&nbsp;<span class="ident" id="6900390">a</span>&nbsp;<span class="builtintype" id="6900392">int</span>&nbsp;<span class="op" id="6900396">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900399"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6900407">(</span><span class="builtinfunc" id="6900408">new</span><span class="op" id="6900411">(</span><span class="ident" id="6900412"><a href="/encoding/gob/type_test.go.html#6900380">T</a></span><span class="op" id="6900413">)</span><span class="op" id="6900414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900417"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6900425">(</span><span class="builtinfunc" id="6900426">new</span><span class="op" id="6900429">(</span><span class="ident" id="6900430"><a href="/encoding/gob/type_test.go.html#6900380">T</a></span><span class="op" id="6900431">)</span><span class="op" id="6900432">)</span><br>
<span class="lineno"></span><span class="op" id="6900434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6900437">type</span>&nbsp;<span class="ident" id="6900442">N1</span>&nbsp;<span class="keyword" id="6900445">struct</span><span class="op" id="6900451">{</span><span class="op" id="6900452">}</span><br>
<span class="lineno">165</span><span class="keyword" id="6900454">type</span>&nbsp;<span class="ident" id="6900459">N2</span>&nbsp;<span class="keyword" id="6900462">struct</span><span class="op" id="6900468">{</span><span class="op" id="6900469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6900472">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="6900508">func</span>&nbsp;<span class="ident" id="6900513">TestRegistrationNaming</span><span class="op" id="6900535">(</span><span class="ident" id="6900536">t</span>&nbsp;<span class="op" id="6900538">*</span><span class="ident" id="6900539"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6900546">.</span><span class="ident" id="6900547">T</span><span class="op" id="6900548">)</span>&nbsp;<span class="op" id="6900550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900553">testCases</span>&nbsp;<span class="op" id="6900563">:=</span>&nbsp;<span class="op" id="6900566">[</span><span class="op" id="6900567">]</span><span class="keyword" id="6900568">struct</span>&nbsp;<span class="op" id="6900575">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900579">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6900584">interface</span><span class="op" id="6900593">{</span><span class="op" id="6900594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900598">name</span>&nbsp;<span class="builtintype" id="6900603">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900611">}</span><span class="op" id="6900612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900616">{</span><span class="op" id="6900617">&amp;</span><span class="ident" id="6900618"><a href="/encoding/gob/type_test.go.html#6900442">N1</a></span><span class="op" id="6900620">{</span><span class="op" id="6900621">}</span><span class="op" id="6900622">,</span>&nbsp;<span class="string" id="6900624">&#34;*gob.N1&#34;</span><span class="op" id="6900633">}</span><span class="op" id="6900634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900638">{</span><span class="ident" id="6900639"><a href="/encoding/gob/type_test.go.html#6900459">N2</a></span><span class="op" id="6900641">{</span><span class="op" id="6900642">}</span><span class="op" id="6900643">,</span>&nbsp;<span class="string" id="6900645">&#34;encoding/gob.N2&#34;</span><span class="op" id="6900662">}</span><span class="op" id="6900663">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900670">for</span>&nbsp;<span class="ident" id="6900674">_</span><span class="op" id="6900675">,</span>&nbsp;<span class="ident" id="6900677">tc</span>&nbsp;<span class="op" id="6900680">:=</span>&nbsp;<span class="keyword" id="6900683">range</span>&nbsp;<span class="ident" id="6900689"><a href="/encoding/gob/type_test.go.html#6900553">testCases</a></span>&nbsp;<span class="op" id="6900699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900703"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6900711">(</span><span class="ident" id="6900712"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6900714">.</span><span class="ident" id="6900715">t</span><span class="op" id="6900716">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900721">tct</span>&nbsp;<span class="op" id="6900725">:=</span>&nbsp;<span class="ident" id="6900728"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6900735">.</span><span class="ident" id="6900736">TypeOf</span><span class="op" id="6900742">(</span><span class="ident" id="6900743"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6900745">.</span><span class="ident" id="6900746">t</span><span class="op" id="6900747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900751"><a href="/encoding/gob/type.go.html#5948526">registerLock</a></span><span class="op" id="6900763">.</span><span class="ident" id="6900764">RLock</span><span class="op" id="6900769">(</span><span class="op" id="6900770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900774">ct</span>&nbsp;<span class="op" id="6900777">:=</span>&nbsp;<span class="ident" id="6900780"><a href="/encoding/gob/type.go.html#5948559">nameToConcreteType</a></span><span class="op" id="6900798">[</span><span class="ident" id="6900799"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6900801">.</span><span class="ident" id="6900802">name</span><span class="op" id="6900806">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900810"><a href="/encoding/gob/type.go.html#5948526">registerLock</a></span><span class="op" id="6900822">.</span><span class="ident" id="6900823">RUnlock</span><span class="op" id="6900830">(</span><span class="op" id="6900831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900835">if</span>&nbsp;<span class="ident" id="6900838"><a href="/encoding/gob/type_test.go.html#6900774">ct</a></span>&nbsp;<span class="op" id="6900841">!=</span>&nbsp;<span class="ident" id="6900844"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span>&nbsp;<span class="op" id="6900848">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6900853"><a href="/encoding/gob/type_test.go.html#6900536">t</a></span><span class="op" id="6900854">.</span><span class="ident" id="6900855">Errorf</span><span class="op" id="6900861">(</span><span class="string" id="6900862">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6900900">,</span>&nbsp;<span class="ident" id="6900902"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6900904">.</span><span class="ident" id="6900905">name</span><span class="op" id="6900909">,</span>&nbsp;<span class="ident" id="6900911"><a href="/encoding/gob/type_test.go.html#6900774">ct</a></span><span class="op" id="6900913">,</span>&nbsp;<span class="ident" id="6900915"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span><span class="op" id="6900918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6900922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6900926">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6900978">if</span>&nbsp;<span class="ident" id="6900981"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span><span class="op" id="6900984">.</span><span class="ident" id="6900985">Kind</span><span class="op" id="6900989">(</span><span class="op" id="6900990">)</span>&nbsp;<span class="op" id="6900992">==</span>&nbsp;<span class="ident" id="6900995"><a href="/encoding/gob/type_test.go.html#6896283">reflect</a></span><span class="op" id="6901002">.</span><span class="ident" id="6901003">Ptr</span>&nbsp;<span class="op" id="6901007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901012"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span>&nbsp;<span class="op" id="6901016">=</span>&nbsp;<span class="ident" id="6901018"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span><span class="op" id="6901021">.</span><span class="ident" id="6901022">Elem</span><span class="op" id="6901026">(</span><span class="op" id="6901027">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901035">if</span>&nbsp;<span class="ident" id="6901038">n</span>&nbsp;<span class="op" id="6901040">:=</span>&nbsp;<span class="ident" id="6901043"><a href="/encoding/gob/type.go.html#5948611">concreteTypeToName</a></span><span class="op" id="6901061">[</span><span class="ident" id="6901062"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span><span class="op" id="6901065">]</span><span class="op" id="6901066">;</span>&nbsp;<span class="ident" id="6901068"><a href="/encoding/gob/type_test.go.html#6901038">n</a></span>&nbsp;<span class="op" id="6901070">!=</span>&nbsp;<span class="ident" id="6901073"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6901075">.</span><span class="ident" id="6901076">name</span>&nbsp;<span class="op" id="6901081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901086"><a href="/encoding/gob/type_test.go.html#6900536">t</a></span><span class="op" id="6901087">.</span><span class="ident" id="6901088">Errorf</span><span class="op" id="6901094">(</span><span class="string" id="6901095">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6901135">,</span>&nbsp;<span class="ident" id="6901137"><a href="/encoding/gob/type_test.go.html#6900721">tct</a></span><span class="op" id="6901140">,</span>&nbsp;<span class="ident" id="6901142"><a href="/encoding/gob/type_test.go.html#6901038">n</a></span><span class="op" id="6901143">,</span>&nbsp;<span class="ident" id="6901145"><a href="/encoding/gob/type_test.go.html#6900677">tc</a></span><span class="op" id="6901147">.</span><span class="ident" id="6901148">name</span><span class="op" id="6901152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901159">}</span><br>
<span class="lineno">195</span><span class="op" id="6901161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6901164">func</span>&nbsp;<span class="ident" id="6901169">TestStressParallel</span><span class="op" id="6901187">(</span><span class="ident" id="6901188">t</span>&nbsp;<span class="op" id="6901190">*</span><span class="ident" id="6901191"><a href="/encoding/gob/type_test.go.html#6896294">testing</a></span><span class="op" id="6901198">.</span><span class="ident" id="6901199">T</span><span class="op" id="6901200">)</span>&nbsp;<span class="op" id="6901202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901205">type</span>&nbsp;<span class="ident" id="6901210">T2</span>&nbsp;<span class="keyword" id="6901213">struct</span><span class="op" id="6901219">{</span>&nbsp;<span class="ident" id="6901221">A</span>&nbsp;<span class="builtintype" id="6901223">int</span>&nbsp;<span class="op" id="6901227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901230">c</span>&nbsp;<span class="op" id="6901232">:=</span>&nbsp;<span class="builtinfunc" id="6901235">make</span><span class="op" id="6901239">(</span><span class="keyword" id="6901240">chan</span>&nbsp;<span class="builtintype" id="6901245">bool</span><span class="op" id="6901249">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901252">const</span>&nbsp;<span class="ident" id="6901258">N</span>&nbsp;<span class="op" id="6901260">=</span>&nbsp;<span class="num" id="6901262">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901266">for</span>&nbsp;<span class="ident" id="6901270">i</span>&nbsp;<span class="op" id="6901272">:=</span>&nbsp;<span class="num" id="6901275">0</span><span class="op" id="6901276">;</span>&nbsp;<span class="ident" id="6901278"><a href="/encoding/gob/type_test.go.html#6901270">i</a></span>&nbsp;<span class="op" id="6901280">&lt;</span>&nbsp;<span class="ident" id="6901282"><a href="/encoding/gob/type_test.go.html#6901258">N</a></span><span class="op" id="6901283">;</span>&nbsp;<span class="ident" id="6901285"><a href="/encoding/gob/type_test.go.html#6901270">i</a></span><span class="op" id="6901286">++</span>&nbsp;<span class="op" id="6901289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901293">go</span>&nbsp;<span class="keyword" id="6901296">func</span><span class="op" id="6901300">(</span><span class="op" id="6901301">)</span>&nbsp;<span class="op" id="6901303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901308">p</span>&nbsp;<span class="op" id="6901310">:=</span>&nbsp;<span class="builtinfunc" id="6901313">new</span><span class="op" id="6901316">(</span><span class="ident" id="6901317"><a href="/encoding/gob/type_test.go.html#6901210">T2</a></span><span class="op" id="6901319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901324"><a href="/encoding/gob/type.go.html#5950046">Register</a></span><span class="op" id="6901332">(</span><span class="ident" id="6901333"><a href="/encoding/gob/type_test.go.html#6901308">p</a></span><span class="op" id="6901334">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901339">b</span>&nbsp;<span class="op" id="6901341">:=</span>&nbsp;<span class="builtinfunc" id="6901344">new</span><span class="op" id="6901347">(</span><span class="ident" id="6901348"><a href="/encoding/gob/type_test.go.html#6896274">bytes</a></span><span class="op" id="6901353">.</span><span class="ident" id="6901354">Buffer</span><span class="op" id="6901360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901365">enc</span>&nbsp;<span class="op" id="6901369">:=</span>&nbsp;<span class="ident" id="6901372"><a href="/encoding/gob/encoder.go.html#5916795">NewEncoder</a></span><span class="op" id="6901382">(</span><span class="ident" id="6901383"><a href="/encoding/gob/type_test.go.html#6901339">b</a></span><span class="op" id="6901384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901389">err</span>&nbsp;<span class="op" id="6901393">:=</span>&nbsp;<span class="ident" id="6901396"><a href="/encoding/gob/type_test.go.html#6901365">enc</a></span><span class="op" id="6901399">.</span><span class="ident" id="6901400">Encode</span><span class="op" id="6901406">(</span><span class="ident" id="6901407"><a href="/encoding/gob/type_test.go.html#6901308">p</a></span><span class="op" id="6901408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901413">if</span>&nbsp;<span class="ident" id="6901416"><a href="/encoding/gob/type_test.go.html#6901389">err</a></span>&nbsp;<span class="op" id="6901420">!=</span>&nbsp;<span class="ident" id="6901423">nil</span>&nbsp;<span class="op" id="6901427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901433"><a href="/encoding/gob/type_test.go.html#6901188">t</a></span><span class="op" id="6901434">.</span><span class="ident" id="6901435">Error</span><span class="op" id="6901440">(</span><span class="string" id="6901441">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6901456">,</span>&nbsp;<span class="ident" id="6901458"><a href="/encoding/gob/type_test.go.html#6901389">err</a></span><span class="op" id="6901461">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901471">dec</span>&nbsp;<span class="op" id="6901475">:=</span>&nbsp;<span class="ident" id="6901478"><a href="/encoding/gob/decoder.go.html#5864380">NewDecoder</a></span><span class="op" id="6901488">(</span><span class="ident" id="6901489"><a href="/encoding/gob/type_test.go.html#6901339">b</a></span><span class="op" id="6901490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901495"><a href="/encoding/gob/type_test.go.html#6901389">err</a></span>&nbsp;<span class="op" id="6901499">=</span>&nbsp;<span class="ident" id="6901501"><a href="/encoding/gob/type_test.go.html#6901471">dec</a></span><span class="op" id="6901504">.</span><span class="ident" id="6901505">Decode</span><span class="op" id="6901511">(</span><span class="ident" id="6901512"><a href="/encoding/gob/type_test.go.html#6901308">p</a></span><span class="op" id="6901513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901518">if</span>&nbsp;<span class="ident" id="6901521"><a href="/encoding/gob/type_test.go.html#6901389">err</a></span>&nbsp;<span class="op" id="6901525">!=</span>&nbsp;<span class="ident" id="6901528">nil</span>&nbsp;<span class="op" id="6901532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901538"><a href="/encoding/gob/type_test.go.html#6901188">t</a></span><span class="op" id="6901539">.</span><span class="ident" id="6901540">Error</span><span class="op" id="6901545">(</span><span class="string" id="6901546">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="6901561">,</span>&nbsp;<span class="ident" id="6901563"><a href="/encoding/gob/type_test.go.html#6901389">err</a></span><span class="op" id="6901566">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6901576"><a href="/encoding/gob/type_test.go.html#6901230">c</a></span>&nbsp;<span class="op" id="6901578">&lt;-</span>&nbsp;<span class="builtintype" id="6901581">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901588">}</span><span class="op" id="6901589">(</span><span class="op" id="6901590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6901596">for</span>&nbsp;<span class="ident" id="6901600">i</span>&nbsp;<span class="op" id="6901602">:=</span>&nbsp;<span class="num" id="6901605">0</span><span class="op" id="6901606">;</span>&nbsp;<span class="ident" id="6901608"><a href="/encoding/gob/type_test.go.html#6901600">i</a></span>&nbsp;<span class="op" id="6901610">&lt;</span>&nbsp;<span class="ident" id="6901612"><a href="/encoding/gob/type_test.go.html#6901258">N</a></span><span class="op" id="6901613">;</span>&nbsp;<span class="ident" id="6901615"><a href="/encoding/gob/type_test.go.html#6901600">i</a></span><span class="op" id="6901616">++</span>&nbsp;<span class="op" id="6901619">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901623">&lt;-</span><span class="ident" id="6901625"><a href="/encoding/gob/type_test.go.html#6901230">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6901628">}</span><br>
<span class="lineno"></span><span class="op" id="6901630">}</span>
</div>
</body>
</html>
