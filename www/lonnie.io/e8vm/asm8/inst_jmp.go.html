<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="6042088">package</span>&nbsp;<span class="ident" id="6042096">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042102">import</span>&nbsp;<span class="op" id="6042109">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6042112">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="6042134">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042137">var</span>&nbsp;<span class="ident" id="6042141">opJmpMap</span>&nbsp;<span class="op" id="6042150">=</span>&nbsp;<span class="keyword" id="6042152">map</span><span class="op" id="6042155">[</span><span class="builtintype" id="6042156">string</span><span class="op" id="6042162">]</span><span class="builtintype" id="6042163">uint32</span><span class="op" id="6042169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6042172">&#34;j&#34;</span><span class="op" id="6042175">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="6042179">2</span><span class="op" id="6042180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6042183">&#34;jal&#34;</span><span class="op" id="6042188">:</span>&nbsp;<span class="num" id="6042190">3</span><span class="op" id="6042191">,</span><br>
<span class="lineno">10</span><span class="op" id="6042193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6042196">func</span>&nbsp;<span class="ident" id="6042201">isValidSymbol</span><span class="op" id="6042214">(</span><span class="ident" id="6042215">sym</span>&nbsp;<span class="builtintype" id="6042219">string</span><span class="op" id="6042225">)</span>&nbsp;<span class="builtintype" id="6042227">bool</span>&nbsp;<span class="op" id="6042232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042235">return</span>&nbsp;<span class="builtintype" id="6042242">true</span><br>
<span class="lineno"></span><span class="op" id="6042247">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6042250">func</span>&nbsp;<span class="ident" id="6042255">parseInstJmp</span><span class="op" id="6042267">(</span><span class="ident" id="6042268">p</span>&nbsp;<span class="op" id="6042270">*</span><span class="ident" id="6042271"><a href="/lonnie.io/e8vm/asm8/parser.go.html#6059818">parser</a></span><span class="op" id="6042277">,</span>&nbsp;<span class="ident" id="6042279">ops</span>&nbsp;<span class="op" id="6042283">[</span><span class="op" id="6042284">]</span><span class="op" id="6042285">*</span><span class="ident" id="6042286"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042112">lex8</a></span><span class="op" id="6042290">.</span><span class="ident" id="6042291">Token</span><span class="op" id="6042296">)</span>&nbsp;<span class="op" id="6042298">(</span><span class="op" id="6042299">*</span><span class="ident" id="6042300"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6042304">,</span>&nbsp;<span class="builtintype" id="6042306">bool</span><span class="op" id="6042310">)</span>&nbsp;<span class="op" id="6042312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042315">op0</span>&nbsp;<span class="op" id="6042319">:=</span>&nbsp;<span class="ident" id="6042322"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042325">[</span><span class="num" id="6042326">0</span><span class="op" id="6042327">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042330">opName</span>&nbsp;<span class="op" id="6042337">:=</span>&nbsp;<span class="ident" id="6042340"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042315">op0</a></span><span class="op" id="6042343">.</span><span class="ident" id="6042344">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042349">var</span>&nbsp;<span class="ident" id="6042353">op</span>&nbsp;<span class="builtintype" id="6042356">uint32</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042365">//&nbsp;op&nbsp;sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042376">switch</span>&nbsp;<span class="ident" id="6042383"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042330">opName</a></span>&nbsp;<span class="op" id="6042390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042393">case</span>&nbsp;<span class="string" id="6042398">&#34;j&#34;</span><span class="op" id="6042401">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042405"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042353">op</a></span>&nbsp;<span class="op" id="6042408">=</span>&nbsp;<span class="num" id="6042410">2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042413">case</span>&nbsp;<span class="string" id="6042418">&#34;jal&#34;</span><span class="op" id="6042423">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042427"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042353">op</a></span>&nbsp;<span class="op" id="6042430">=</span>&nbsp;<span class="num" id="6042432">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042435">default</span><span class="op" id="6042442">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042446">return</span>&nbsp;<span class="ident" id="6042453">nil</span><span class="op" id="6042456">,</span>&nbsp;<span class="builtintype" id="6042458">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042465">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042469">var</span>&nbsp;<span class="ident" id="6042473">pack</span><span class="op" id="6042477">,</span>&nbsp;<span class="ident" id="6042479">sym</span>&nbsp;<span class="builtintype" id="6042483">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042491">var</span>&nbsp;<span class="ident" id="6042495">fill</span>&nbsp;<span class="builtintype" id="6042500">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042505">var</span>&nbsp;<span class="ident" id="6042509">symTok</span>&nbsp;<span class="op" id="6042516">*</span><span class="ident" id="6042517"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042112">lex8</a></span><span class="op" id="6042521">.</span><span class="ident" id="6042522">Token</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042530">if</span>&nbsp;<span class="ident" id="6042533"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#6052672">argCount</a></span><span class="op" id="6042541">(</span><span class="ident" id="6042542"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042268">p</a></span><span class="op" id="6042543">,</span>&nbsp;<span class="ident" id="6042545"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042548">,</span>&nbsp;<span class="num" id="6042550">1</span><span class="op" id="6042551">)</span>&nbsp;<span class="op" id="6042553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042557"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042509">symTok</a></span>&nbsp;<span class="op" id="6042564">=</span>&nbsp;<span class="ident" id="6042566"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042569">[</span><span class="num" id="6042570">1</span><span class="op" id="6042571">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042575">if</span>&nbsp;<span class="ident" id="6042578"><a href="/lonnie.io/e8vm/asm8/parse_label.go.html#6055866">parseLabel</a></span><span class="op" id="6042588">(</span><span class="ident" id="6042589"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042268">p</a></span><span class="op" id="6042590">,</span>&nbsp;<span class="ident" id="6042592"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042595">[</span><span class="num" id="6042596">1</span><span class="op" id="6042597">]</span><span class="op" id="6042598">)</span>&nbsp;<span class="op" id="6042600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042605"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042479">sym</a></span>&nbsp;<span class="op" id="6042609">=</span>&nbsp;<span class="ident" id="6042611"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042614">[</span><span class="num" id="6042615">1</span><span class="op" id="6042616">]</span><span class="op" id="6042617">.</span><span class="ident" id="6042618">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042625"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042495">fill</a></span>&nbsp;<span class="op" id="6042630">=</span>&nbsp;<span class="ident" id="6042632"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037503">fillLabel</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042644">}</span>&nbsp;<span class="keyword" id="6042646">else</span>&nbsp;<span class="op" id="6042651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042656"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042473">pack</a></span><span class="op" id="6042660">,</span>&nbsp;<span class="ident" id="6042662"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042479">sym</a></span>&nbsp;<span class="op" id="6042666">=</span>&nbsp;<span class="ident" id="6042668"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#6057343">parseSym</a></span><span class="op" id="6042676">(</span><span class="ident" id="6042677"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042268">p</a></span><span class="op" id="6042678">,</span>&nbsp;<span class="ident" id="6042680"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042279">ops</a></span><span class="op" id="6042683">[</span><span class="num" id="6042684">1</span><span class="op" id="6042685">]</span><span class="op" id="6042686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042691"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042495">fill</a></span>&nbsp;<span class="op" id="6042696">=</span>&nbsp;<span class="ident" id="6042698"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037419">fillLink</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042712">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042716">ret</span>&nbsp;<span class="op" id="6042720">:=</span>&nbsp;<span class="op" id="6042723">&amp;</span><span class="ident" id="6042724"><a href="/lonnie.io/e8vm/asm8/inst.go.html#6037298">inst</a></span><span class="op" id="6042728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042732">inst</span><span class="op" id="6042736">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6042740">(</span><span class="ident" id="6042741"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042353">op</a></span>&nbsp;<span class="op" id="6042744">&amp;</span>&nbsp;<span class="num" id="6042746">0x3</span><span class="op" id="6042749">)</span>&nbsp;<span class="op" id="6042751">&lt;&lt;</span>&nbsp;<span class="num" id="6042754">30</span><span class="op" id="6042756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042760">pack</span><span class="op" id="6042764">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6042768"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042473">pack</a></span><span class="op" id="6042772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042776">symbol</span><span class="op" id="6042782">:</span>&nbsp;<span class="ident" id="6042784"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042479">sym</a></span><span class="op" id="6042787">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042791">fill</span><span class="op" id="6042795">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6042799"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042495">fill</a></span><span class="op" id="6042803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042807">symTok</span><span class="op" id="6042813">:</span>&nbsp;<span class="ident" id="6042815"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042509">symTok</a></span><span class="op" id="6042821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042827">return</span>&nbsp;<span class="ident" id="6042834"><a href="/lonnie.io/e8vm/asm8/inst_jmp.go.html#6042716">ret</a></span><span class="op" id="6042837">,</span>&nbsp;<span class="builtintype" id="6042839">true</span><br>
<span class="lineno"></span><span class="op" id="6042844">}</span>
</div>
</body>
</html>
