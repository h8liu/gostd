<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5895379">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5895434">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5895488">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5895539">//go:generate&nbsp;go&nbsp;run&nbsp;encgen.go&nbsp;-output&nbsp;enc_helpers.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5895594">package</span>&nbsp;<span class="ident" id="5895602">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5895607">import</span>&nbsp;<span class="op" id="5895614">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5895617">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5895629">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5895637">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="5895647">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5895650">const</span>&nbsp;<span class="ident" id="5895656">uint64Size</span>&nbsp;<span class="op" id="5895667">=</span>&nbsp;<span class="num" id="5895669">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5895672">type</span>&nbsp;<span class="ident" id="5895677">encHelper</span>&nbsp;<span class="keyword" id="5895687">func</span><span class="op" id="5895691">(</span><span class="ident" id="5895692">state</span>&nbsp;<span class="op" id="5895698">*</span><span class="ident" id="5895699"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5895711">,</span>&nbsp;<span class="ident" id="5895713">v</span>&nbsp;<span class="ident" id="5895715"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5895722">.</span><span class="ident" id="5895723">Value</span><span class="op" id="5895728">)</span>&nbsp;<span class="builtintype" id="5895730">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5895736">//&nbsp;encoderState&nbsp;is&nbsp;the&nbsp;global&nbsp;execution&nbsp;state&nbsp;of&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;encoder.</span><br>
<span class="lineno">20</span><span class="comment" id="5895813">//&nbsp;Field&nbsp;numbers&nbsp;are&nbsp;delta&nbsp;encoded&nbsp;and&nbsp;always&nbsp;increase.&nbsp;The&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5895879">//&nbsp;number&nbsp;is&nbsp;initialized&nbsp;to&nbsp;-1&nbsp;so&nbsp;0&nbsp;comes&nbsp;out&nbsp;as&nbsp;delta(1).&nbsp;A&nbsp;delta&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5895949">//&nbsp;0&nbsp;terminates&nbsp;the&nbsp;structure.</span><br>
<span class="lineno"></span><span class="keyword" id="5895980">type</span>&nbsp;<span class="ident" id="5895985">encoderState</span>&nbsp;<span class="keyword" id="5895998">struct</span>&nbsp;<span class="op" id="5896005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896008">enc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5896017">*</span><span class="ident" id="5896018"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896027">b</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5896036">*</span><span class="ident" id="5896037"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896048">sendZero</span>&nbsp;<span class="builtintype" id="5896057">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5896078">//&nbsp;encoding&nbsp;an&nbsp;array&nbsp;element&nbsp;or&nbsp;map&nbsp;key/value&nbsp;pair;&nbsp;send&nbsp;zero&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896148">fieldnum</span>&nbsp;<span class="builtintype" id="5896157">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5896178">//&nbsp;the&nbsp;last&nbsp;field&nbsp;number&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896213">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5896222">[</span><span class="num" id="5896223">1</span>&nbsp;<span class="op" id="5896225">+</span>&nbsp;<span class="ident" id="5896227"><a href="/encoding/gob/encode.go.html#5895656">uint64Size</a></span><span class="op" id="5896237">]</span><span class="builtintype" id="5896238">byte</span>&nbsp;<span class="comment" id="5896243">//&nbsp;buffer&nbsp;used&nbsp;by&nbsp;the&nbsp;encoder;&nbsp;here&nbsp;to&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896301">next</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5896310">*</span><span class="ident" id="5896311"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5896331">//&nbsp;for&nbsp;free&nbsp;list</span><br>
<span class="lineno">30</span><span class="op" id="5896348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5896351">//&nbsp;encBuffer&nbsp;is&nbsp;an&nbsp;extremely&nbsp;simple,&nbsp;fast&nbsp;implementation&nbsp;of&nbsp;a&nbsp;write-only&nbsp;byte&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5896437">//&nbsp;It&nbsp;never&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error,&nbsp;but&nbsp;Write&nbsp;returns&nbsp;an&nbsp;error&nbsp;value&nbsp;so&nbsp;it&nbsp;matches&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5896532">type</span>&nbsp;<span class="ident" id="5896537">encBuffer</span>&nbsp;<span class="keyword" id="5896547">struct</span>&nbsp;<span class="op" id="5896554">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896557">data</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5896565">[</span><span class="op" id="5896566">]</span><span class="builtintype" id="5896567">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896573">scratch</span>&nbsp;<span class="op" id="5896581">[</span><span class="num" id="5896582">64</span><span class="op" id="5896584">]</span><span class="builtintype" id="5896585">byte</span><br>
<span class="lineno"></span><span class="op" id="5896590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5896593">func</span>&nbsp;<span class="op" id="5896598">(</span><span class="ident" id="5896599">e</span>&nbsp;<span class="op" id="5896601">*</span><span class="ident" id="5896602"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896611">)</span>&nbsp;<span class="ident" id="5896613">WriteByte</span><span class="op" id="5896622">(</span><span class="ident" id="5896623">c</span>&nbsp;<span class="builtintype" id="5896625">byte</span><span class="op" id="5896629">)</span>&nbsp;<span class="op" id="5896631">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896634"><a href="/encoding/gob/encode.go.html#5896599">e</a></span><span class="op" id="5896635">.</span><span class="ident" id="5896636">data</span>&nbsp;<span class="op" id="5896641">=</span>&nbsp;<span class="builtinfunc" id="5896643">append</span><span class="op" id="5896649">(</span><span class="ident" id="5896650"><a href="/encoding/gob/encode.go.html#5896599">e</a></span><span class="op" id="5896651">.</span><span class="ident" id="5896652">data</span><span class="op" id="5896656">,</span>&nbsp;<span class="ident" id="5896658"><a href="/encoding/gob/encode.go.html#5896623">c</a></span><span class="op" id="5896659">)</span><br>
<span class="lineno"></span><span class="op" id="5896661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5896664">func</span>&nbsp;<span class="op" id="5896669">(</span><span class="ident" id="5896670">e</span>&nbsp;<span class="op" id="5896672">*</span><span class="ident" id="5896673"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896682">)</span>&nbsp;<span class="ident" id="5896684">Write</span><span class="op" id="5896689">(</span><span class="ident" id="5896690">p</span>&nbsp;<span class="op" id="5896692">[</span><span class="op" id="5896693">]</span><span class="builtintype" id="5896694">byte</span><span class="op" id="5896698">)</span>&nbsp;<span class="op" id="5896700">(</span><span class="builtintype" id="5896701">int</span><span class="op" id="5896704">,</span>&nbsp;<span class="builtintype" id="5896706">error</span><span class="op" id="5896711">)</span>&nbsp;<span class="op" id="5896713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896716"><a href="/encoding/gob/encode.go.html#5896670">e</a></span><span class="op" id="5896717">.</span><span class="ident" id="5896718">data</span>&nbsp;<span class="op" id="5896723">=</span>&nbsp;<span class="builtinfunc" id="5896725">append</span><span class="op" id="5896731">(</span><span class="ident" id="5896732"><a href="/encoding/gob/encode.go.html#5896670">e</a></span><span class="op" id="5896733">.</span><span class="ident" id="5896734">data</span><span class="op" id="5896738">,</span>&nbsp;<span class="ident" id="5896740"><a href="/encoding/gob/encode.go.html#5896690">p</a></span><span class="op" id="5896741">...</span><span class="op" id="5896744">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896747">return</span>&nbsp;<span class="builtinfunc" id="5896754">len</span><span class="op" id="5896757">(</span><span class="ident" id="5896758"><a href="/encoding/gob/encode.go.html#5896690">p</a></span><span class="op" id="5896759">)</span><span class="op" id="5896760">,</span>&nbsp;<span class="ident" id="5896762">nil</span><br>
<span class="lineno"></span><span class="op" id="5896766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5896769">func</span>&nbsp;<span class="op" id="5896774">(</span><span class="ident" id="5896775">e</span>&nbsp;<span class="op" id="5896777">*</span><span class="ident" id="5896778"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896787">)</span>&nbsp;<span class="ident" id="5896789">WriteString</span><span class="op" id="5896800">(</span><span class="ident" id="5896801">s</span>&nbsp;<span class="builtintype" id="5896803">string</span><span class="op" id="5896809">)</span>&nbsp;<span class="op" id="5896811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896814"><a href="/encoding/gob/encode.go.html#5896775">e</a></span><span class="op" id="5896815">.</span><span class="ident" id="5896816">data</span>&nbsp;<span class="op" id="5896821">=</span>&nbsp;<span class="builtinfunc" id="5896823">append</span><span class="op" id="5896829">(</span><span class="ident" id="5896830"><a href="/encoding/gob/encode.go.html#5896775">e</a></span><span class="op" id="5896831">.</span><span class="ident" id="5896832">data</span><span class="op" id="5896836">,</span>&nbsp;<span class="ident" id="5896838"><a href="/encoding/gob/encode.go.html#5896801">s</a></span><span class="op" id="5896839">...</span><span class="op" id="5896842">)</span><br>
<span class="lineno">50</span><span class="op" id="5896844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5896847">func</span>&nbsp;<span class="op" id="5896852">(</span><span class="ident" id="5896853">e</span>&nbsp;<span class="op" id="5896855">*</span><span class="ident" id="5896856"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896865">)</span>&nbsp;<span class="ident" id="5896867">Len</span><span class="op" id="5896870">(</span><span class="op" id="5896871">)</span>&nbsp;<span class="builtintype" id="5896873">int</span>&nbsp;<span class="op" id="5896877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896880">return</span>&nbsp;<span class="builtinfunc" id="5896887">len</span><span class="op" id="5896890">(</span><span class="ident" id="5896891"><a href="/encoding/gob/encode.go.html#5896853">e</a></span><span class="op" id="5896892">.</span><span class="ident" id="5896893">data</span><span class="op" id="5896897">)</span><br>
<span class="lineno"></span><span class="op" id="5896899">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5896902">func</span>&nbsp;<span class="op" id="5896907">(</span><span class="ident" id="5896908">e</span>&nbsp;<span class="op" id="5896910">*</span><span class="ident" id="5896911"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896920">)</span>&nbsp;<span class="ident" id="5896922">Bytes</span><span class="op" id="5896927">(</span><span class="op" id="5896928">)</span>&nbsp;<span class="op" id="5896930">[</span><span class="op" id="5896931">]</span><span class="builtintype" id="5896932">byte</span>&nbsp;<span class="op" id="5896937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5896940">return</span>&nbsp;<span class="ident" id="5896947"><a href="/encoding/gob/encode.go.html#5896908">e</a></span><span class="op" id="5896948">.</span><span class="ident" id="5896949">data</span><br>
<span class="lineno"></span><span class="op" id="5896954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5896957">func</span>&nbsp;<span class="op" id="5896962">(</span><span class="ident" id="5896963">e</span>&nbsp;<span class="op" id="5896965">*</span><span class="ident" id="5896966"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5896975">)</span>&nbsp;<span class="ident" id="5896977">Reset</span><span class="op" id="5896982">(</span><span class="op" id="5896983">)</span>&nbsp;<span class="op" id="5896985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5896988"><a href="/encoding/gob/encode.go.html#5896963">e</a></span><span class="op" id="5896989">.</span><span class="ident" id="5896990">data</span>&nbsp;<span class="op" id="5896995">=</span>&nbsp;<span class="ident" id="5896997"><a href="/encoding/gob/encode.go.html#5896963">e</a></span><span class="op" id="5896998">.</span><span class="ident" id="5896999">data</span><span class="op" id="5897003">[</span><span class="num" id="5897004">0</span><span class="op" id="5897005">:</span><span class="num" id="5897006">0</span><span class="op" id="5897007">]</span><br>
<span class="lineno"></span><span class="op" id="5897009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5897012">func</span>&nbsp;<span class="op" id="5897017">(</span><span class="ident" id="5897018">enc</span>&nbsp;<span class="op" id="5897022">*</span><span class="ident" id="5897023"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5897030">)</span>&nbsp;<span class="ident" id="5897032">newEncoderState</span><span class="op" id="5897047">(</span><span class="ident" id="5897048">b</span>&nbsp;<span class="op" id="5897050">*</span><span class="ident" id="5897051"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5897060">)</span>&nbsp;<span class="op" id="5897062">*</span><span class="ident" id="5897063"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span>&nbsp;<span class="op" id="5897076">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897079">e</span>&nbsp;<span class="op" id="5897081">:=</span>&nbsp;<span class="ident" id="5897084"><a href="/encoding/gob/encode.go.html#5897018">enc</a></span><span class="op" id="5897087">.</span><span class="ident" id="5897088">freeList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897098">if</span>&nbsp;<span class="ident" id="5897101"><a href="/encoding/gob/encode.go.html#5897079">e</a></span>&nbsp;<span class="op" id="5897103">==</span>&nbsp;<span class="ident" id="5897106">nil</span>&nbsp;<span class="op" id="5897110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897114"><a href="/encoding/gob/encode.go.html#5897079">e</a></span>&nbsp;<span class="op" id="5897116">=</span>&nbsp;<span class="builtinfunc" id="5897118">new</span><span class="op" id="5897121">(</span><span class="ident" id="5897122"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5897134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897138"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><span class="op" id="5897139">.</span><span class="ident" id="5897140">enc</span>&nbsp;<span class="op" id="5897144">=</span>&nbsp;<span class="ident" id="5897146"><a href="/encoding/gob/encode.go.html#5897018">enc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897151">}</span>&nbsp;<span class="keyword" id="5897153">else</span>&nbsp;<span class="op" id="5897158">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897162"><a href="/encoding/gob/encode.go.html#5897018">enc</a></span><span class="op" id="5897165">.</span><span class="ident" id="5897166">freeList</span>&nbsp;<span class="op" id="5897175">=</span>&nbsp;<span class="ident" id="5897177"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><span class="op" id="5897178">.</span><span class="ident" id="5897179">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897188"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><span class="op" id="5897189">.</span><span class="ident" id="5897190">sendZero</span>&nbsp;<span class="op" id="5897199">=</span>&nbsp;<span class="builtintype" id="5897201">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897208"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><span class="op" id="5897209">.</span><span class="ident" id="5897210">fieldnum</span>&nbsp;<span class="op" id="5897219">=</span>&nbsp;<span class="num" id="5897221">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897224"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><span class="op" id="5897225">.</span><span class="ident" id="5897226">b</span>&nbsp;<span class="op" id="5897228">=</span>&nbsp;<span class="ident" id="5897230"><a href="/encoding/gob/encode.go.html#5897048">b</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897233">if</span>&nbsp;<span class="builtinfunc" id="5897236">len</span><span class="op" id="5897239">(</span><span class="ident" id="5897240"><a href="/encoding/gob/encode.go.html#5897048">b</a></span><span class="op" id="5897241">.</span><span class="ident" id="5897242">data</span><span class="op" id="5897246">)</span>&nbsp;<span class="op" id="5897248">==</span>&nbsp;<span class="num" id="5897251">0</span>&nbsp;<span class="op" id="5897253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897257"><a href="/encoding/gob/encode.go.html#5897048">b</a></span><span class="op" id="5897258">.</span><span class="ident" id="5897259">data</span>&nbsp;<span class="op" id="5897264">=</span>&nbsp;<span class="ident" id="5897266"><a href="/encoding/gob/encode.go.html#5897048">b</a></span><span class="op" id="5897267">.</span><span class="ident" id="5897268">scratch</span><span class="op" id="5897275">[</span><span class="num" id="5897276">0</span><span class="op" id="5897277">:</span><span class="num" id="5897278">0</span><span class="op" id="5897279">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897285">return</span>&nbsp;<span class="ident" id="5897292"><a href="/encoding/gob/encode.go.html#5897079">e</a></span><br>
<span class="lineno"></span><span class="op" id="5897294">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="5897297">func</span>&nbsp;<span class="op" id="5897302">(</span><span class="ident" id="5897303">enc</span>&nbsp;<span class="op" id="5897307">*</span><span class="ident" id="5897308"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5897315">)</span>&nbsp;<span class="ident" id="5897317">freeEncoderState</span><span class="op" id="5897333">(</span><span class="ident" id="5897334">e</span>&nbsp;<span class="op" id="5897336">*</span><span class="ident" id="5897337"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5897349">)</span>&nbsp;<span class="op" id="5897351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897354"><a href="/encoding/gob/encode.go.html#5897334">e</a></span><span class="op" id="5897355">.</span><span class="ident" id="5897356">next</span>&nbsp;<span class="op" id="5897361">=</span>&nbsp;<span class="ident" id="5897363"><a href="/encoding/gob/encode.go.html#5897303">enc</a></span><span class="op" id="5897366">.</span><span class="ident" id="5897367">freeList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897377"><a href="/encoding/gob/encode.go.html#5897303">enc</a></span><span class="op" id="5897380">.</span><span class="ident" id="5897381">freeList</span>&nbsp;<span class="op" id="5897390">=</span>&nbsp;<span class="ident" id="5897392"><a href="/encoding/gob/encode.go.html#5897334">e</a></span><br>
<span class="lineno"></span><span class="op" id="5897394">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="5897397">//&nbsp;Unsigned&nbsp;integers&nbsp;have&nbsp;a&nbsp;two-state&nbsp;encoding.&nbsp;&nbsp;If&nbsp;the&nbsp;number&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="5897468">//&nbsp;than&nbsp;128&nbsp;(0&nbsp;through&nbsp;0x7F),&nbsp;its&nbsp;value&nbsp;is&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span><span class="comment" id="5897529">//&nbsp;Otherwise&nbsp;the&nbsp;value&nbsp;is&nbsp;written&nbsp;in&nbsp;big-endian&nbsp;byte&nbsp;order&nbsp;preceded</span><br>
<span class="lineno"></span><span class="comment" id="5897597">//&nbsp;by&nbsp;the&nbsp;byte&nbsp;length,&nbsp;negated.</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5897630">//&nbsp;encodeUint&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;unsigned&nbsp;integer&nbsp;to&nbsp;state.b.</span><br>
<span class="lineno"></span><span class="keyword" id="5897691">func</span>&nbsp;<span class="op" id="5897696">(</span><span class="ident" id="5897697">state</span>&nbsp;<span class="op" id="5897703">*</span><span class="ident" id="5897704"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5897716">)</span>&nbsp;<span class="ident" id="5897718">encodeUint</span><span class="op" id="5897728">(</span><span class="ident" id="5897729">x</span>&nbsp;<span class="ident" id="5897731">uint64</span><span class="op" id="5897737">)</span>&nbsp;<span class="op" id="5897739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897742">if</span>&nbsp;<span class="ident" id="5897745"><a href="/encoding/gob/encode.go.html#5897729">x</a></span>&nbsp;<span class="op" id="5897747">&lt;=</span>&nbsp;<span class="num" id="5897750">0x7F</span>&nbsp;<span class="op" id="5897755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897759"><a href="/encoding/gob/encode.go.html#5897697">state</a></span><span class="op" id="5897764">.</span><span class="ident" id="5897765">b</span><span class="op" id="5897766">.</span><span class="ident" id="5897767">WriteByte</span><span class="op" id="5897776">(</span><span class="builtintype" id="5897777">uint8</span><span class="op" id="5897782">(</span><span class="ident" id="5897783"><a href="/encoding/gob/encode.go.html#5897729">x</a></span><span class="op" id="5897784">)</span><span class="op" id="5897785">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897789">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897800">i</span>&nbsp;<span class="op" id="5897802">:=</span>&nbsp;<span class="ident" id="5897805"><a href="/encoding/gob/encode.go.html#5895656">uint64Size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5897817">for</span>&nbsp;<span class="ident" id="5897821"><a href="/encoding/gob/encode.go.html#5897729">x</a></span>&nbsp;<span class="op" id="5897823">&gt;</span>&nbsp;<span class="num" id="5897825">0</span>&nbsp;<span class="op" id="5897827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897831"><a href="/encoding/gob/encode.go.html#5897697">state</a></span><span class="op" id="5897836">.</span><span class="ident" id="5897837">buf</span><span class="op" id="5897840">[</span><span class="ident" id="5897841"><a href="/encoding/gob/encode.go.html#5897800">i</a></span><span class="op" id="5897842">]</span>&nbsp;<span class="op" id="5897844">=</span>&nbsp;<span class="builtintype" id="5897846">uint8</span><span class="op" id="5897851">(</span><span class="ident" id="5897852"><a href="/encoding/gob/encode.go.html#5897729">x</a></span><span class="op" id="5897853">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897857"><a href="/encoding/gob/encode.go.html#5897729">x</a></span>&nbsp;<span class="op" id="5897859">&gt;&gt;=</span>&nbsp;<span class="num" id="5897863">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897867"><a href="/encoding/gob/encode.go.html#5897800">i</a></span><span class="op" id="5897868">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5897872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897875"><a href="/encoding/gob/encode.go.html#5897697">state</a></span><span class="op" id="5897880">.</span><span class="ident" id="5897881">buf</span><span class="op" id="5897884">[</span><span class="ident" id="5897885"><a href="/encoding/gob/encode.go.html#5897800">i</a></span><span class="op" id="5897886">]</span>&nbsp;<span class="op" id="5897888">=</span>&nbsp;<span class="builtintype" id="5897890">uint8</span><span class="op" id="5897895">(</span><span class="ident" id="5897896"><a href="/encoding/gob/encode.go.html#5897800">i</a></span>&nbsp;<span class="op" id="5897898">-</span>&nbsp;<span class="ident" id="5897900"><a href="/encoding/gob/encode.go.html#5895656">uint64Size</a></span><span class="op" id="5897910">)</span>&nbsp;<span class="comment" id="5897912">//&nbsp;=&nbsp;loop&nbsp;count,&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5897938"><a href="/encoding/gob/encode.go.html#5897697">state</a></span><span class="op" id="5897943">.</span><span class="ident" id="5897944">b</span><span class="op" id="5897945">.</span><span class="ident" id="5897946">Write</span><span class="op" id="5897951">(</span><span class="ident" id="5897952"><a href="/encoding/gob/encode.go.html#5897697">state</a></span><span class="op" id="5897957">.</span><span class="ident" id="5897958">buf</span><span class="op" id="5897961">[</span><span class="ident" id="5897962"><a href="/encoding/gob/encode.go.html#5897800">i</a></span>&nbsp;<span class="op" id="5897964">:</span>&nbsp;<span class="ident" id="5897966"><a href="/encoding/gob/encode.go.html#5895656">uint64Size</a></span><span class="op" id="5897976">+</span><span class="num" id="5897977">1</span><span class="op" id="5897978">]</span><span class="op" id="5897979">)</span><br>
<span class="lineno">105</span><span class="op" id="5897981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5897984">//&nbsp;encodeInt&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;signed&nbsp;integer&nbsp;to&nbsp;state.w.</span><br>
<span class="lineno"></span><span class="comment" id="5898042">//&nbsp;The&nbsp;low&nbsp;bit&nbsp;of&nbsp;the&nbsp;encoding&nbsp;says&nbsp;whether&nbsp;to&nbsp;bit&nbsp;complement&nbsp;the&nbsp;(other&nbsp;bits&nbsp;of&nbsp;the)</span><br>
<span class="lineno"></span><span class="comment" id="5898128">//&nbsp;uint&nbsp;to&nbsp;recover&nbsp;the&nbsp;int.</span><br>
<span class="lineno">110</span><span class="keyword" id="5898156">func</span>&nbsp;<span class="op" id="5898161">(</span><span class="ident" id="5898162">state</span>&nbsp;<span class="op" id="5898168">*</span><span class="ident" id="5898169"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5898181">)</span>&nbsp;<span class="ident" id="5898183">encodeInt</span><span class="op" id="5898192">(</span><span class="ident" id="5898193">i</span>&nbsp;<span class="ident" id="5898195">int64</span><span class="op" id="5898200">)</span>&nbsp;<span class="op" id="5898202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898205">var</span>&nbsp;<span class="ident" id="5898209">x</span>&nbsp;<span class="ident" id="5898211">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898219">if</span>&nbsp;<span class="ident" id="5898222"><a href="/encoding/gob/encode.go.html#5898193">i</a></span>&nbsp;<span class="op" id="5898224">&lt;</span>&nbsp;<span class="num" id="5898226">0</span>&nbsp;<span class="op" id="5898228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898232"><a href="/encoding/gob/encode.go.html#5898209">x</a></span>&nbsp;<span class="op" id="5898234">=</span>&nbsp;<span class="ident" id="5898236">uint64</span><span class="op" id="5898242">(</span><span class="op" id="5898243">^</span><span class="ident" id="5898244"><a href="/encoding/gob/encode.go.html#5898193">i</a></span><span class="op" id="5898245">&lt;&lt;</span><span class="num" id="5898247">1</span><span class="op" id="5898248">)</span>&nbsp;<span class="op" id="5898250">|</span>&nbsp;<span class="num" id="5898252">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5898255">}</span>&nbsp;<span class="keyword" id="5898257">else</span>&nbsp;<span class="op" id="5898262">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898266"><a href="/encoding/gob/encode.go.html#5898209">x</a></span>&nbsp;<span class="op" id="5898268">=</span>&nbsp;<span class="ident" id="5898270">uint64</span><span class="op" id="5898276">(</span><span class="ident" id="5898277"><a href="/encoding/gob/encode.go.html#5898193">i</a></span>&nbsp;<span class="op" id="5898279">&lt;&lt;</span>&nbsp;<span class="num" id="5898282">1</span><span class="op" id="5898283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5898286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898289"><a href="/encoding/gob/encode.go.html#5898162">state</a></span><span class="op" id="5898294">.</span><span class="ident" id="5898295">encodeUint</span><span class="op" id="5898305">(</span><span class="ident" id="5898306">uint64</span><span class="op" id="5898312">(</span><span class="ident" id="5898313"><a href="/encoding/gob/encode.go.html#5898209">x</a></span><span class="op" id="5898314">)</span><span class="op" id="5898315">)</span><br>
<span class="lineno"></span><span class="op" id="5898317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5898320">//&nbsp;encOp&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;an&nbsp;encoding&nbsp;operator&nbsp;for&nbsp;a&nbsp;given&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5898388">type</span>&nbsp;<span class="ident" id="5898393">encOp</span>&nbsp;<span class="keyword" id="5898399">func</span><span class="op" id="5898403">(</span><span class="ident" id="5898404">i</span>&nbsp;<span class="op" id="5898406">*</span><span class="ident" id="5898407"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5898415">,</span>&nbsp;<span class="ident" id="5898417">state</span>&nbsp;<span class="op" id="5898423">*</span><span class="ident" id="5898424"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5898436">,</span>&nbsp;<span class="ident" id="5898438">v</span>&nbsp;<span class="ident" id="5898440"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5898447">.</span><span class="ident" id="5898448">Value</span><span class="op" id="5898453">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5898456">//&nbsp;The&nbsp;&#39;instructions&#39;&nbsp;of&nbsp;the&nbsp;encoding&nbsp;machine</span><br>
<span class="lineno"></span><span class="keyword" id="5898502">type</span>&nbsp;<span class="ident" id="5898507">encInstr</span>&nbsp;<span class="keyword" id="5898516">struct</span>&nbsp;<span class="op" id="5898523">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898526">op</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5898532"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898539">field</span>&nbsp;<span class="builtintype" id="5898545">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5898551">//&nbsp;field&nbsp;number&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898577">index</span>&nbsp;<span class="op" id="5898583">[</span><span class="op" id="5898584">]</span><span class="builtintype" id="5898585">int</span>&nbsp;<span class="comment" id="5898589">//&nbsp;struct&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898606">indir</span>&nbsp;<span class="builtintype" id="5898612">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5898618">//&nbsp;how&nbsp;many&nbsp;pointer&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;struct</span><br>
<span class="lineno"></span><span class="op" id="5898684">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5898687">//&nbsp;update&nbsp;emits&nbsp;a&nbsp;field&nbsp;number&nbsp;and&nbsp;updates&nbsp;the&nbsp;state&nbsp;to&nbsp;record&nbsp;its&nbsp;value&nbsp;for&nbsp;delta&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="5898780">//&nbsp;If&nbsp;the&nbsp;instruction&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;it&nbsp;does&nbsp;nothing</span><br>
<span class="lineno"></span><span class="keyword" id="5898834">func</span>&nbsp;<span class="op" id="5898839">(</span><span class="ident" id="5898840">state</span>&nbsp;<span class="op" id="5898846">*</span><span class="ident" id="5898847"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5898859">)</span>&nbsp;<span class="ident" id="5898861">update</span><span class="op" id="5898867">(</span><span class="ident" id="5898868">instr</span>&nbsp;<span class="op" id="5898874">*</span><span class="ident" id="5898875"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5898883">)</span>&nbsp;<span class="op" id="5898885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5898888">if</span>&nbsp;<span class="ident" id="5898891"><a href="/encoding/gob/encode.go.html#5898868">instr</a></span>&nbsp;<span class="op" id="5898897">!=</span>&nbsp;<span class="ident" id="5898900">nil</span>&nbsp;<span class="op" id="5898904">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898908"><a href="/encoding/gob/encode.go.html#5898840">state</a></span><span class="op" id="5898913">.</span><span class="ident" id="5898914">encodeUint</span><span class="op" id="5898924">(</span><span class="ident" id="5898925">uint64</span><span class="op" id="5898931">(</span><span class="ident" id="5898932"><a href="/encoding/gob/encode.go.html#5898868">instr</a></span><span class="op" id="5898937">.</span><span class="ident" id="5898938">field</span>&nbsp;<span class="op" id="5898944">-</span>&nbsp;<span class="ident" id="5898946"><a href="/encoding/gob/encode.go.html#5898840">state</a></span><span class="op" id="5898951">.</span><span class="ident" id="5898952">fieldnum</span><span class="op" id="5898960">)</span><span class="op" id="5898961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5898965"><a href="/encoding/gob/encode.go.html#5898840">state</a></span><span class="op" id="5898970">.</span><span class="ident" id="5898971">fieldnum</span>&nbsp;<span class="op" id="5898980">=</span>&nbsp;<span class="ident" id="5898982"><a href="/encoding/gob/encode.go.html#5898868">instr</a></span><span class="op" id="5898987">.</span><span class="ident" id="5898988">field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5898995">}</span><br>
<span class="lineno"></span><span class="op" id="5898997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="5899000">//&nbsp;Each&nbsp;encoder&nbsp;for&nbsp;a&nbsp;composite&nbsp;is&nbsp;responsible&nbsp;for&nbsp;handling&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5899064">//&nbsp;indirections&nbsp;associated&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="5899132">//&nbsp;If&nbsp;any&nbsp;pointer&nbsp;so&nbsp;reached&nbsp;is&nbsp;nil,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5899199">//&nbsp;data&nbsp;item&nbsp;is&nbsp;zero,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;Single&nbsp;values&nbsp;-&nbsp;ints,</span><br>
<span class="lineno"></span><span class="comment" id="5899266">//&nbsp;strings&nbsp;etc.&nbsp;-&nbsp;are&nbsp;indirected&nbsp;before&nbsp;calling&nbsp;their&nbsp;encoders.</span><br>
<span class="lineno">145</span><span class="comment" id="5899330">//&nbsp;Otherwise,&nbsp;the&nbsp;output&nbsp;(for&nbsp;a&nbsp;scalar)&nbsp;is&nbsp;the&nbsp;field&nbsp;number,&nbsp;as&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5899397">//&nbsp;encoded&nbsp;integer,&nbsp;followed&nbsp;by&nbsp;the&nbsp;field&nbsp;data&nbsp;in&nbsp;its&nbsp;appropriate</span><br>
<span class="lineno"></span><span class="comment" id="5899463">//&nbsp;format.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5899475">//&nbsp;encIndirect&nbsp;dereferences&nbsp;pv&nbsp;indir&nbsp;times&nbsp;and&nbsp;returns&nbsp;the&nbsp;result.</span><br>
<span class="lineno">150</span><span class="keyword" id="5899542">func</span>&nbsp;<span class="ident" id="5899547">encIndirect</span><span class="op" id="5899558">(</span><span class="ident" id="5899559">pv</span>&nbsp;<span class="ident" id="5899562"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5899569">.</span><span class="ident" id="5899570">Value</span><span class="op" id="5899575">,</span>&nbsp;<span class="ident" id="5899577">indir</span>&nbsp;<span class="builtintype" id="5899583">int</span><span class="op" id="5899586">)</span>&nbsp;<span class="ident" id="5899588"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5899595">.</span><span class="ident" id="5899596">Value</span>&nbsp;<span class="op" id="5899602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899605">for</span>&nbsp;<span class="op" id="5899609">;</span>&nbsp;<span class="ident" id="5899611"><a href="/encoding/gob/encode.go.html#5899577">indir</a></span>&nbsp;<span class="op" id="5899617">&gt;</span>&nbsp;<span class="num" id="5899619">0</span><span class="op" id="5899620">;</span>&nbsp;<span class="ident" id="5899622"><a href="/encoding/gob/encode.go.html#5899577">indir</a></span><span class="op" id="5899627">--</span>&nbsp;<span class="op" id="5899630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899634">if</span>&nbsp;<span class="ident" id="5899637"><a href="/encoding/gob/encode.go.html#5899559">pv</a></span><span class="op" id="5899639">.</span><span class="ident" id="5899640">IsNil</span><span class="op" id="5899645">(</span><span class="op" id="5899646">)</span>&nbsp;<span class="op" id="5899648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899653">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899661">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899665"><a href="/encoding/gob/encode.go.html#5899559">pv</a></span>&nbsp;<span class="op" id="5899668">=</span>&nbsp;<span class="ident" id="5899670"><a href="/encoding/gob/encode.go.html#5899559">pv</a></span><span class="op" id="5899672">.</span><span class="ident" id="5899673">Elem</span><span class="op" id="5899677">(</span><span class="op" id="5899678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899684">return</span>&nbsp;<span class="ident" id="5899691"><a href="/encoding/gob/encode.go.html#5899559">pv</a></span><br>
<span class="lineno"></span><span class="op" id="5899694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5899697">//&nbsp;encBool&nbsp;encodes&nbsp;the&nbsp;bool&nbsp;referenced&nbsp;by&nbsp;v&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;0&nbsp;or&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="5899764">func</span>&nbsp;<span class="ident" id="5899769">encBool</span><span class="op" id="5899776">(</span><span class="ident" id="5899777">i</span>&nbsp;<span class="op" id="5899779">*</span><span class="ident" id="5899780"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5899788">,</span>&nbsp;<span class="ident" id="5899790">state</span>&nbsp;<span class="op" id="5899796">*</span><span class="ident" id="5899797"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5899809">,</span>&nbsp;<span class="ident" id="5899811">v</span>&nbsp;<span class="ident" id="5899813"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5899820">.</span><span class="ident" id="5899821">Value</span><span class="op" id="5899826">)</span>&nbsp;<span class="op" id="5899828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899831">b</span>&nbsp;<span class="op" id="5899833">:=</span>&nbsp;<span class="ident" id="5899836"><a href="/encoding/gob/encode.go.html#5899811">v</a></span><span class="op" id="5899837">.</span><span class="ident" id="5899838">Bool</span><span class="op" id="5899842">(</span><span class="op" id="5899843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899846">if</span>&nbsp;<span class="ident" id="5899849"><a href="/encoding/gob/encode.go.html#5899831">b</a></span>&nbsp;<span class="op" id="5899851">||</span>&nbsp;<span class="ident" id="5899854"><a href="/encoding/gob/encode.go.html#5899790">state</a></span><span class="op" id="5899859">.</span><span class="ident" id="5899860">sendZero</span>&nbsp;<span class="op" id="5899869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899873"><a href="/encoding/gob/encode.go.html#5899790">state</a></span><span class="op" id="5899878">.</span><span class="ident" id="5899879">update</span><span class="op" id="5899885">(</span><span class="ident" id="5899886"><a href="/encoding/gob/encode.go.html#5899777">i</a></span><span class="op" id="5899887">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5899891">if</span>&nbsp;<span class="ident" id="5899894"><a href="/encoding/gob/encode.go.html#5899831">b</a></span>&nbsp;<span class="op" id="5899896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899901"><a href="/encoding/gob/encode.go.html#5899790">state</a></span><span class="op" id="5899906">.</span><span class="ident" id="5899907">encodeUint</span><span class="op" id="5899917">(</span><span class="num" id="5899918">1</span><span class="op" id="5899919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899923">}</span>&nbsp;<span class="keyword" id="5899925">else</span>&nbsp;<span class="op" id="5899930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5899935"><a href="/encoding/gob/encode.go.html#5899790">state</a></span><span class="op" id="5899940">.</span><span class="ident" id="5899941">encodeUint</span><span class="op" id="5899951">(</span><span class="num" id="5899952">0</span><span class="op" id="5899953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899957">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5899960">}</span><br>
<span class="lineno"></span><span class="op" id="5899962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5899965">//&nbsp;encInt&nbsp;encodes&nbsp;the&nbsp;signed&nbsp;integer&nbsp;(int&nbsp;int8&nbsp;int16&nbsp;int32&nbsp;int64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5900048">func</span>&nbsp;<span class="ident" id="5900053">encInt</span><span class="op" id="5900059">(</span><span class="ident" id="5900060">i</span>&nbsp;<span class="op" id="5900062">*</span><span class="ident" id="5900063"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5900071">,</span>&nbsp;<span class="ident" id="5900073">state</span>&nbsp;<span class="op" id="5900079">*</span><span class="ident" id="5900080"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5900092">,</span>&nbsp;<span class="ident" id="5900094">v</span>&nbsp;<span class="ident" id="5900096"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5900103">.</span><span class="ident" id="5900104">Value</span><span class="op" id="5900109">)</span>&nbsp;<span class="op" id="5900111">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900114">value</span>&nbsp;<span class="op" id="5900120">:=</span>&nbsp;<span class="ident" id="5900123"><a href="/encoding/gob/encode.go.html#5900094">v</a></span><span class="op" id="5900124">.</span><span class="ident" id="5900125">Int</span><span class="op" id="5900128">(</span><span class="op" id="5900129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900132">if</span>&nbsp;<span class="ident" id="5900135"><a href="/encoding/gob/encode.go.html#5900114">value</a></span>&nbsp;<span class="op" id="5900141">!=</span>&nbsp;<span class="num" id="5900144">0</span>&nbsp;<span class="op" id="5900146">||</span>&nbsp;<span class="ident" id="5900149"><a href="/encoding/gob/encode.go.html#5900073">state</a></span><span class="op" id="5900154">.</span><span class="ident" id="5900155">sendZero</span>&nbsp;<span class="op" id="5900164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900168"><a href="/encoding/gob/encode.go.html#5900073">state</a></span><span class="op" id="5900173">.</span><span class="ident" id="5900174">update</span><span class="op" id="5900180">(</span><span class="ident" id="5900181"><a href="/encoding/gob/encode.go.html#5900060">i</a></span><span class="op" id="5900182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900186"><a href="/encoding/gob/encode.go.html#5900073">state</a></span><span class="op" id="5900191">.</span><span class="ident" id="5900192">encodeInt</span><span class="op" id="5900201">(</span><span class="ident" id="5900202"><a href="/encoding/gob/encode.go.html#5900114">value</a></span><span class="op" id="5900207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900210">}</span><br>
<span class="lineno">180</span><span class="op" id="5900212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5900215">//&nbsp;encUint&nbsp;encodes&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;(uint&nbsp;uint8&nbsp;uint16&nbsp;uint32&nbsp;uint64&nbsp;uintptr)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5900314">func</span>&nbsp;<span class="ident" id="5900319">encUint</span><span class="op" id="5900326">(</span><span class="ident" id="5900327">i</span>&nbsp;<span class="op" id="5900329">*</span><span class="ident" id="5900330"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5900338">,</span>&nbsp;<span class="ident" id="5900340">state</span>&nbsp;<span class="op" id="5900346">*</span><span class="ident" id="5900347"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5900359">,</span>&nbsp;<span class="ident" id="5900361">v</span>&nbsp;<span class="ident" id="5900363"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5900370">.</span><span class="ident" id="5900371">Value</span><span class="op" id="5900376">)</span>&nbsp;<span class="op" id="5900378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900381">value</span>&nbsp;<span class="op" id="5900387">:=</span>&nbsp;<span class="ident" id="5900390"><a href="/encoding/gob/encode.go.html#5900361">v</a></span><span class="op" id="5900391">.</span><span class="ident" id="5900392">Uint</span><span class="op" id="5900396">(</span><span class="op" id="5900397">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900400">if</span>&nbsp;<span class="ident" id="5900403"><a href="/encoding/gob/encode.go.html#5900381">value</a></span>&nbsp;<span class="op" id="5900409">!=</span>&nbsp;<span class="num" id="5900412">0</span>&nbsp;<span class="op" id="5900414">||</span>&nbsp;<span class="ident" id="5900417"><a href="/encoding/gob/encode.go.html#5900340">state</a></span><span class="op" id="5900422">.</span><span class="ident" id="5900423">sendZero</span>&nbsp;<span class="op" id="5900432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900436"><a href="/encoding/gob/encode.go.html#5900340">state</a></span><span class="op" id="5900441">.</span><span class="ident" id="5900442">update</span><span class="op" id="5900448">(</span><span class="ident" id="5900449"><a href="/encoding/gob/encode.go.html#5900327">i</a></span><span class="op" id="5900450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900454"><a href="/encoding/gob/encode.go.html#5900340">state</a></span><span class="op" id="5900459">.</span><span class="ident" id="5900460">encodeUint</span><span class="op" id="5900470">(</span><span class="ident" id="5900471"><a href="/encoding/gob/encode.go.html#5900381">value</a></span><span class="op" id="5900476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900479">}</span><br>
<span class="lineno"></span><span class="op" id="5900481">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5900484">//&nbsp;floatBits&nbsp;returns&nbsp;a&nbsp;uint64&nbsp;holding&nbsp;the&nbsp;bits&nbsp;of&nbsp;a&nbsp;floating-point&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="5900559">//&nbsp;Floating-point&nbsp;numbers&nbsp;are&nbsp;transmitted&nbsp;as&nbsp;uint64s&nbsp;holding&nbsp;the&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="5900629">//&nbsp;of&nbsp;the&nbsp;underlying&nbsp;representation.&nbsp;&nbsp;They&nbsp;are&nbsp;sent&nbsp;byte-reversed,&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5900701">//&nbsp;the&nbsp;exponent&nbsp;end&nbsp;coming&nbsp;out&nbsp;first,&nbsp;so&nbsp;integer&nbsp;floating&nbsp;point&nbsp;numbers</span><br>
<span class="lineno">195</span><span class="comment" id="5900773">//&nbsp;(for&nbsp;example)&nbsp;transmit&nbsp;more&nbsp;compactly.&nbsp;&nbsp;This&nbsp;routine&nbsp;does&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5900838">//&nbsp;swizzling.</span><br>
<span class="lineno"></span><span class="keyword" id="5900852">func</span>&nbsp;<span class="ident" id="5900857">floatBits</span><span class="op" id="5900866">(</span><span class="ident" id="5900867">f</span>&nbsp;<span class="builtintype" id="5900869">float64</span><span class="op" id="5900876">)</span>&nbsp;<span class="ident" id="5900878">uint64</span>&nbsp;<span class="op" id="5900885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900888">u</span>&nbsp;<span class="op" id="5900890">:=</span>&nbsp;<span class="ident" id="5900893"><a href="/encoding/gob/encode.go.html#5895629">math</a></span><span class="op" id="5900897">.</span><span class="ident" id="5900898">Float64bits</span><span class="op" id="5900909">(</span><span class="ident" id="5900910"><a href="/encoding/gob/encode.go.html#5900867">f</a></span><span class="op" id="5900911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900914">var</span>&nbsp;<span class="ident" id="5900918">v</span>&nbsp;<span class="ident" id="5900920">uint64</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900928">for</span>&nbsp;<span class="ident" id="5900932">i</span>&nbsp;<span class="op" id="5900934">:=</span>&nbsp;<span class="num" id="5900937">0</span><span class="op" id="5900938">;</span>&nbsp;<span class="ident" id="5900940"><a href="/encoding/gob/encode.go.html#5900932">i</a></span>&nbsp;<span class="op" id="5900942">&lt;</span>&nbsp;<span class="num" id="5900944">8</span><span class="op" id="5900945">;</span>&nbsp;<span class="ident" id="5900947"><a href="/encoding/gob/encode.go.html#5900932">i</a></span><span class="op" id="5900948">++</span>&nbsp;<span class="op" id="5900951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900955"><a href="/encoding/gob/encode.go.html#5900918">v</a></span>&nbsp;<span class="op" id="5900957">&lt;&lt;=</span>&nbsp;<span class="num" id="5900961">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900965"><a href="/encoding/gob/encode.go.html#5900918">v</a></span>&nbsp;<span class="op" id="5900967">|=</span>&nbsp;<span class="ident" id="5900970"><a href="/encoding/gob/encode.go.html#5900888">u</a></span>&nbsp;<span class="op" id="5900972">&amp;</span>&nbsp;<span class="num" id="5900974">0xFF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5900981"><a href="/encoding/gob/encode.go.html#5900888">u</a></span>&nbsp;<span class="op" id="5900983">&gt;&gt;=</span>&nbsp;<span class="num" id="5900987">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5900990">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5900993">return</span>&nbsp;<span class="ident" id="5901000"><a href="/encoding/gob/encode.go.html#5900918">v</a></span><br>
<span class="lineno"></span><span class="op" id="5901002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5901005">//&nbsp;encFloat&nbsp;encodes&nbsp;the&nbsp;floating&nbsp;point&nbsp;value&nbsp;(float32&nbsp;float64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5901085">func</span>&nbsp;<span class="ident" id="5901090">encFloat</span><span class="op" id="5901098">(</span><span class="ident" id="5901099">i</span>&nbsp;<span class="op" id="5901101">*</span><span class="ident" id="5901102"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5901110">,</span>&nbsp;<span class="ident" id="5901112">state</span>&nbsp;<span class="op" id="5901118">*</span><span class="ident" id="5901119"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5901131">,</span>&nbsp;<span class="ident" id="5901133">v</span>&nbsp;<span class="ident" id="5901135"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5901142">.</span><span class="ident" id="5901143">Value</span><span class="op" id="5901148">)</span>&nbsp;<span class="op" id="5901150">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901153">f</span>&nbsp;<span class="op" id="5901155">:=</span>&nbsp;<span class="ident" id="5901158"><a href="/encoding/gob/encode.go.html#5901133">v</a></span><span class="op" id="5901159">.</span><span class="ident" id="5901160">Float</span><span class="op" id="5901165">(</span><span class="op" id="5901166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901169">if</span>&nbsp;<span class="ident" id="5901172"><a href="/encoding/gob/encode.go.html#5901153">f</a></span>&nbsp;<span class="op" id="5901174">!=</span>&nbsp;<span class="num" id="5901177">0</span>&nbsp;<span class="op" id="5901179">||</span>&nbsp;<span class="ident" id="5901182"><a href="/encoding/gob/encode.go.html#5901112">state</a></span><span class="op" id="5901187">.</span><span class="ident" id="5901188">sendZero</span>&nbsp;<span class="op" id="5901197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901201">bits</span>&nbsp;<span class="op" id="5901206">:=</span>&nbsp;<span class="ident" id="5901209"><a href="/encoding/gob/encode.go.html#5900857">floatBits</a></span><span class="op" id="5901218">(</span><span class="ident" id="5901219"><a href="/encoding/gob/encode.go.html#5901153">f</a></span><span class="op" id="5901220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901224"><a href="/encoding/gob/encode.go.html#5901112">state</a></span><span class="op" id="5901229">.</span><span class="ident" id="5901230">update</span><span class="op" id="5901236">(</span><span class="ident" id="5901237"><a href="/encoding/gob/encode.go.html#5901099">i</a></span><span class="op" id="5901238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901242"><a href="/encoding/gob/encode.go.html#5901112">state</a></span><span class="op" id="5901247">.</span><span class="ident" id="5901248">encodeUint</span><span class="op" id="5901258">(</span><span class="ident" id="5901259"><a href="/encoding/gob/encode.go.html#5901201">bits</a></span><span class="op" id="5901263">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5901266">}</span><br>
<span class="lineno"></span><span class="op" id="5901268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5901271">//&nbsp;encComplex&nbsp;encodes&nbsp;the&nbsp;complex&nbsp;value&nbsp;(complex64&nbsp;complex128)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5901351">//&nbsp;Complex&nbsp;numbers&nbsp;are&nbsp;just&nbsp;a&nbsp;pair&nbsp;of&nbsp;floating-point&nbsp;numbers,&nbsp;real&nbsp;part&nbsp;first.</span><br>
<span class="lineno">220</span><span class="keyword" id="5901430">func</span>&nbsp;<span class="ident" id="5901435">encComplex</span><span class="op" id="5901445">(</span><span class="ident" id="5901446">i</span>&nbsp;<span class="op" id="5901448">*</span><span class="ident" id="5901449"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5901457">,</span>&nbsp;<span class="ident" id="5901459">state</span>&nbsp;<span class="op" id="5901465">*</span><span class="ident" id="5901466"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5901478">,</span>&nbsp;<span class="ident" id="5901480">v</span>&nbsp;<span class="ident" id="5901482"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5901489">.</span><span class="ident" id="5901490">Value</span><span class="op" id="5901495">)</span>&nbsp;<span class="op" id="5901497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901500">c</span>&nbsp;<span class="op" id="5901502">:=</span>&nbsp;<span class="ident" id="5901505"><a href="/encoding/gob/encode.go.html#5901480">v</a></span><span class="op" id="5901506">.</span><span class="ident" id="5901507">Complex</span><span class="op" id="5901514">(</span><span class="op" id="5901515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901518">if</span>&nbsp;<span class="ident" id="5901521"><a href="/encoding/gob/encode.go.html#5901500">c</a></span>&nbsp;<span class="op" id="5901523">!=</span>&nbsp;<span class="num" id="5901526">0</span><span class="op" id="5901527">+</span><span class="num" id="5901528">0i</span>&nbsp;<span class="op" id="5901531">||</span>&nbsp;<span class="ident" id="5901534"><a href="/encoding/gob/encode.go.html#5901459">state</a></span><span class="op" id="5901539">.</span><span class="ident" id="5901540">sendZero</span>&nbsp;<span class="op" id="5901549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901553">rpart</span>&nbsp;<span class="op" id="5901559">:=</span>&nbsp;<span class="ident" id="5901562"><a href="/encoding/gob/encode.go.html#5900857">floatBits</a></span><span class="op" id="5901571">(</span><span class="builtinfunc" id="5901572">real</span><span class="op" id="5901576">(</span><span class="ident" id="5901577"><a href="/encoding/gob/encode.go.html#5901500">c</a></span><span class="op" id="5901578">)</span><span class="op" id="5901579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901583">ipart</span>&nbsp;<span class="op" id="5901589">:=</span>&nbsp;<span class="ident" id="5901592"><a href="/encoding/gob/encode.go.html#5900857">floatBits</a></span><span class="op" id="5901601">(</span><span class="builtinfunc" id="5901602">imag</span><span class="op" id="5901606">(</span><span class="ident" id="5901607"><a href="/encoding/gob/encode.go.html#5901500">c</a></span><span class="op" id="5901608">)</span><span class="op" id="5901609">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901613"><a href="/encoding/gob/encode.go.html#5901459">state</a></span><span class="op" id="5901618">.</span><span class="ident" id="5901619">update</span><span class="op" id="5901625">(</span><span class="ident" id="5901626"><a href="/encoding/gob/encode.go.html#5901446">i</a></span><span class="op" id="5901627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901631"><a href="/encoding/gob/encode.go.html#5901459">state</a></span><span class="op" id="5901636">.</span><span class="ident" id="5901637">encodeUint</span><span class="op" id="5901647">(</span><span class="ident" id="5901648"><a href="/encoding/gob/encode.go.html#5901553">rpart</a></span><span class="op" id="5901653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901657"><a href="/encoding/gob/encode.go.html#5901459">state</a></span><span class="op" id="5901662">.</span><span class="ident" id="5901663">encodeUint</span><span class="op" id="5901673">(</span><span class="ident" id="5901674"><a href="/encoding/gob/encode.go.html#5901583">ipart</a></span><span class="op" id="5901679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5901682">}</span><br>
<span class="lineno"></span><span class="op" id="5901684">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="5901687">//&nbsp;encUint8Array&nbsp;encodes&nbsp;the&nbsp;byte&nbsp;array&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5901744">//&nbsp;Byte&nbsp;arrays&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5901819">func</span>&nbsp;<span class="ident" id="5901824">encUint8Array</span><span class="op" id="5901837">(</span><span class="ident" id="5901838">i</span>&nbsp;<span class="op" id="5901840">*</span><span class="ident" id="5901841"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5901849">,</span>&nbsp;<span class="ident" id="5901851">state</span>&nbsp;<span class="op" id="5901857">*</span><span class="ident" id="5901858"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5901870">,</span>&nbsp;<span class="ident" id="5901872">v</span>&nbsp;<span class="ident" id="5901874"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5901881">.</span><span class="ident" id="5901882">Value</span><span class="op" id="5901887">)</span>&nbsp;<span class="op" id="5901889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901892">b</span>&nbsp;<span class="op" id="5901894">:=</span>&nbsp;<span class="ident" id="5901897"><a href="/encoding/gob/encode.go.html#5901872">v</a></span><span class="op" id="5901898">.</span><span class="ident" id="5901899">Bytes</span><span class="op" id="5901904">(</span><span class="op" id="5901905">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5901908">if</span>&nbsp;<span class="builtinfunc" id="5901911">len</span><span class="op" id="5901914">(</span><span class="ident" id="5901915"><a href="/encoding/gob/encode.go.html#5901892">b</a></span><span class="op" id="5901916">)</span>&nbsp;<span class="op" id="5901918">&gt;</span>&nbsp;<span class="num" id="5901920">0</span>&nbsp;<span class="op" id="5901922">||</span>&nbsp;<span class="ident" id="5901925"><a href="/encoding/gob/encode.go.html#5901851">state</a></span><span class="op" id="5901930">.</span><span class="ident" id="5901931">sendZero</span>&nbsp;<span class="op" id="5901940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901944"><a href="/encoding/gob/encode.go.html#5901851">state</a></span><span class="op" id="5901949">.</span><span class="ident" id="5901950">update</span><span class="op" id="5901956">(</span><span class="ident" id="5901957"><a href="/encoding/gob/encode.go.html#5901838">i</a></span><span class="op" id="5901958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901962"><a href="/encoding/gob/encode.go.html#5901851">state</a></span><span class="op" id="5901967">.</span><span class="ident" id="5901968">encodeUint</span><span class="op" id="5901978">(</span><span class="ident" id="5901979">uint64</span><span class="op" id="5901985">(</span><span class="builtinfunc" id="5901986">len</span><span class="op" id="5901989">(</span><span class="ident" id="5901990"><a href="/encoding/gob/encode.go.html#5901892">b</a></span><span class="op" id="5901991">)</span><span class="op" id="5901992">)</span><span class="op" id="5901993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5901997"><a href="/encoding/gob/encode.go.html#5901851">state</a></span><span class="op" id="5902002">.</span><span class="ident" id="5902003">b</span><span class="op" id="5902004">.</span><span class="ident" id="5902005">Write</span><span class="op" id="5902010">(</span><span class="ident" id="5902011"><a href="/encoding/gob/encode.go.html#5901892">b</a></span><span class="op" id="5902012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902015">}</span><br>
<span class="lineno">240</span><span class="op" id="5902017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5902020">//&nbsp;encString&nbsp;encodes&nbsp;the&nbsp;string&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5902069">//&nbsp;Strings&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5902140">func</span>&nbsp;<span class="ident" id="5902145">encString</span><span class="op" id="5902154">(</span><span class="ident" id="5902155">i</span>&nbsp;<span class="op" id="5902157">*</span><span class="ident" id="5902158"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5902166">,</span>&nbsp;<span class="ident" id="5902168">state</span>&nbsp;<span class="op" id="5902174">*</span><span class="ident" id="5902175"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5902187">,</span>&nbsp;<span class="ident" id="5902189">v</span>&nbsp;<span class="ident" id="5902191"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5902198">.</span><span class="ident" id="5902199">Value</span><span class="op" id="5902204">)</span>&nbsp;<span class="op" id="5902206">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902209">s</span>&nbsp;<span class="op" id="5902211">:=</span>&nbsp;<span class="ident" id="5902214"><a href="/encoding/gob/encode.go.html#5902189">v</a></span><span class="op" id="5902215">.</span><span class="ident" id="5902216">String</span><span class="op" id="5902222">(</span><span class="op" id="5902223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902226">if</span>&nbsp;<span class="builtinfunc" id="5902229">len</span><span class="op" id="5902232">(</span><span class="ident" id="5902233"><a href="/encoding/gob/encode.go.html#5902209">s</a></span><span class="op" id="5902234">)</span>&nbsp;<span class="op" id="5902236">&gt;</span>&nbsp;<span class="num" id="5902238">0</span>&nbsp;<span class="op" id="5902240">||</span>&nbsp;<span class="ident" id="5902243"><a href="/encoding/gob/encode.go.html#5902168">state</a></span><span class="op" id="5902248">.</span><span class="ident" id="5902249">sendZero</span>&nbsp;<span class="op" id="5902258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902262"><a href="/encoding/gob/encode.go.html#5902168">state</a></span><span class="op" id="5902267">.</span><span class="ident" id="5902268">update</span><span class="op" id="5902274">(</span><span class="ident" id="5902275"><a href="/encoding/gob/encode.go.html#5902155">i</a></span><span class="op" id="5902276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902280"><a href="/encoding/gob/encode.go.html#5902168">state</a></span><span class="op" id="5902285">.</span><span class="ident" id="5902286">encodeUint</span><span class="op" id="5902296">(</span><span class="ident" id="5902297">uint64</span><span class="op" id="5902303">(</span><span class="builtinfunc" id="5902304">len</span><span class="op" id="5902307">(</span><span class="ident" id="5902308"><a href="/encoding/gob/encode.go.html#5902209">s</a></span><span class="op" id="5902309">)</span><span class="op" id="5902310">)</span><span class="op" id="5902311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902315"><a href="/encoding/gob/encode.go.html#5902168">state</a></span><span class="op" id="5902320">.</span><span class="ident" id="5902321">b</span><span class="op" id="5902322">.</span><span class="ident" id="5902323">WriteString</span><span class="op" id="5902334">(</span><span class="ident" id="5902335"><a href="/encoding/gob/encode.go.html#5902209">s</a></span><span class="op" id="5902336">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5902339">}</span><br>
<span class="lineno"></span><span class="op" id="5902341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5902344">//&nbsp;encStructTerminator&nbsp;encodes&nbsp;the&nbsp;end&nbsp;of&nbsp;an&nbsp;encoded&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5902404">//&nbsp;as&nbsp;delta&nbsp;field&nbsp;number&nbsp;of&nbsp;0.</span><br>
<span class="lineno">255</span><span class="keyword" id="5902435">func</span>&nbsp;<span class="ident" id="5902440">encStructTerminator</span><span class="op" id="5902459">(</span><span class="ident" id="5902460">i</span>&nbsp;<span class="op" id="5902462">*</span><span class="ident" id="5902463"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5902471">,</span>&nbsp;<span class="ident" id="5902473">state</span>&nbsp;<span class="op" id="5902479">*</span><span class="ident" id="5902480"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5902492">,</span>&nbsp;<span class="ident" id="5902494">v</span>&nbsp;<span class="ident" id="5902496"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5902503">.</span><span class="ident" id="5902504">Value</span><span class="op" id="5902509">)</span>&nbsp;<span class="op" id="5902511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902514"><a href="/encoding/gob/encode.go.html#5902473">state</a></span><span class="op" id="5902519">.</span><span class="ident" id="5902520">encodeUint</span><span class="op" id="5902530">(</span><span class="num" id="5902531">0</span><span class="op" id="5902532">)</span><br>
<span class="lineno"></span><span class="op" id="5902534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5902537">//&nbsp;Execution&nbsp;engine</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="5902558">//&nbsp;encEngine&nbsp;an&nbsp;array&nbsp;of&nbsp;instructions&nbsp;indexed&nbsp;by&nbsp;field&nbsp;number&nbsp;of&nbsp;the&nbsp;encoding</span><br>
<span class="lineno"></span><span class="comment" id="5902636">//&nbsp;data,&nbsp;typically&nbsp;a&nbsp;struct.&nbsp;&nbsp;It&nbsp;is&nbsp;executed&nbsp;top&nbsp;to&nbsp;bottom,&nbsp;walking&nbsp;the&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="5902716">type</span>&nbsp;<span class="ident" id="5902721">encEngine</span>&nbsp;<span class="keyword" id="5902731">struct</span>&nbsp;<span class="op" id="5902738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5902741">instr</span>&nbsp;<span class="op" id="5902747">[</span><span class="op" id="5902748">]</span><span class="ident" id="5902749"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><br>
<span class="lineno">265</span><span class="op" id="5902758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5902761">const</span>&nbsp;<span class="ident" id="5902767">singletonField</span>&nbsp;<span class="op" id="5902782">=</span>&nbsp;<span class="num" id="5902784">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5902787">//&nbsp;valid&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;a&nbsp;non-nil&nbsp;pointer.</span><br>
<span class="lineno">270</span><span class="comment" id="5902854">//&nbsp;(Slices,&nbsp;maps,&nbsp;and&nbsp;chans&nbsp;take&nbsp;care&nbsp;of&nbsp;themselves.)</span><br>
<span class="lineno"></span><span class="keyword" id="5902908">func</span>&nbsp;<span class="ident" id="5902913">valid</span><span class="op" id="5902918">(</span><span class="ident" id="5902919">v</span>&nbsp;<span class="ident" id="5902921"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5902928">.</span><span class="ident" id="5902929">Value</span><span class="op" id="5902934">)</span>&nbsp;<span class="builtintype" id="5902936">bool</span>&nbsp;<span class="op" id="5902941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902944">switch</span>&nbsp;<span class="ident" id="5902951"><a href="/encoding/gob/encode.go.html#5902919">v</a></span><span class="op" id="5902952">.</span><span class="ident" id="5902953">Kind</span><span class="op" id="5902957">(</span><span class="op" id="5902958">)</span>&nbsp;<span class="op" id="5902960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902963">case</span>&nbsp;<span class="ident" id="5902968"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5902975">.</span><span class="ident" id="5902976">Invalid</span><span class="op" id="5902983">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5902987">return</span>&nbsp;<span class="builtintype" id="5902994">false</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903001">case</span>&nbsp;<span class="ident" id="5903006"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5903013">.</span><span class="ident" id="5903014">Ptr</span><span class="op" id="5903017">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903021">return</span>&nbsp;<span class="op" id="5903028">!</span><span class="ident" id="5903029"><a href="/encoding/gob/encode.go.html#5902919">v</a></span><span class="op" id="5903030">.</span><span class="ident" id="5903031">IsNil</span><span class="op" id="5903036">(</span><span class="op" id="5903037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903043">return</span>&nbsp;<span class="builtintype" id="5903050">true</span><br>
<span class="lineno"></span><span class="op" id="5903055">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="5903058">//&nbsp;encodeSingle&nbsp;encodes&nbsp;a&nbsp;single&nbsp;top-level&nbsp;non-struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5903119">func</span>&nbsp;<span class="op" id="5903124">(</span><span class="ident" id="5903125">enc</span>&nbsp;<span class="op" id="5903129">*</span><span class="ident" id="5903130"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5903137">)</span>&nbsp;<span class="ident" id="5903139">encodeSingle</span><span class="op" id="5903151">(</span><span class="ident" id="5903152">b</span>&nbsp;<span class="op" id="5903154">*</span><span class="ident" id="5903155"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5903164">,</span>&nbsp;<span class="ident" id="5903166">engine</span>&nbsp;<span class="op" id="5903173">*</span><span class="ident" id="5903174"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5903183">,</span>&nbsp;<span class="ident" id="5903185">value</span>&nbsp;<span class="ident" id="5903191"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5903198">.</span><span class="ident" id="5903199">Value</span><span class="op" id="5903204">)</span>&nbsp;<span class="op" id="5903206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903209">state</span>&nbsp;<span class="op" id="5903215">:=</span>&nbsp;<span class="ident" id="5903218"><a href="/encoding/gob/encode.go.html#5903125">enc</a></span><span class="op" id="5903221">.</span><span class="ident" id="5903222">newEncoderState</span><span class="op" id="5903237">(</span><span class="ident" id="5903238"><a href="/encoding/gob/encode.go.html#5903152">b</a></span><span class="op" id="5903239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903242">defer</span>&nbsp;<span class="ident" id="5903248"><a href="/encoding/gob/encode.go.html#5903125">enc</a></span><span class="op" id="5903251">.</span><span class="ident" id="5903252">freeEncoderState</span><span class="op" id="5903268">(</span><span class="ident" id="5903269"><a href="/encoding/gob/encode.go.html#5903209">state</a></span><span class="op" id="5903274">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903277"><a href="/encoding/gob/encode.go.html#5903209">state</a></span><span class="op" id="5903282">.</span><span class="ident" id="5903283">fieldnum</span>&nbsp;<span class="op" id="5903292">=</span>&nbsp;<span class="ident" id="5903294"><a href="/encoding/gob/encode.go.html#5902767">singletonField</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903310">//&nbsp;There&nbsp;is&nbsp;no&nbsp;surrounding&nbsp;struct&nbsp;to&nbsp;frame&nbsp;the&nbsp;transmission,&nbsp;so&nbsp;we&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903383">//&nbsp;generate&nbsp;data&nbsp;even&nbsp;if&nbsp;the&nbsp;item&nbsp;is&nbsp;zero.&nbsp;&nbsp;To&nbsp;do&nbsp;this,&nbsp;set&nbsp;sendZero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903454"><a href="/encoding/gob/encode.go.html#5903209">state</a></span><span class="op" id="5903459">.</span><span class="ident" id="5903460">sendZero</span>&nbsp;<span class="op" id="5903469">=</span>&nbsp;<span class="builtintype" id="5903471">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903477">instr</span>&nbsp;<span class="op" id="5903483">:=</span>&nbsp;<span class="op" id="5903486">&amp;</span><span class="ident" id="5903487"><a href="/encoding/gob/encode.go.html#5903166">engine</a></span><span class="op" id="5903493">.</span><span class="ident" id="5903494">instr</span><span class="op" id="5903499">[</span><span class="ident" id="5903500"><a href="/encoding/gob/encode.go.html#5902767">singletonField</a></span><span class="op" id="5903514">]</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903517">if</span>&nbsp;<span class="ident" id="5903520"><a href="/encoding/gob/encode.go.html#5903477">instr</a></span><span class="op" id="5903525">.</span><span class="ident" id="5903526">indir</span>&nbsp;<span class="op" id="5903532">&gt;</span>&nbsp;<span class="num" id="5903534">0</span>&nbsp;<span class="op" id="5903536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903540"><a href="/encoding/gob/encode.go.html#5903185">value</a></span>&nbsp;<span class="op" id="5903546">=</span>&nbsp;<span class="ident" id="5903548"><a href="/encoding/gob/encode.go.html#5899547">encIndirect</a></span><span class="op" id="5903559">(</span><span class="ident" id="5903560"><a href="/encoding/gob/encode.go.html#5903185">value</a></span><span class="op" id="5903565">,</span>&nbsp;<span class="ident" id="5903567"><a href="/encoding/gob/encode.go.html#5903477">instr</a></span><span class="op" id="5903572">.</span><span class="ident" id="5903573">indir</span><span class="op" id="5903578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903584">if</span>&nbsp;<span class="ident" id="5903587"><a href="/encoding/gob/encode.go.html#5902913">valid</a></span><span class="op" id="5903592">(</span><span class="ident" id="5903593"><a href="/encoding/gob/encode.go.html#5903185">value</a></span><span class="op" id="5903598">)</span>&nbsp;<span class="op" id="5903600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903604"><a href="/encoding/gob/encode.go.html#5903477">instr</a></span><span class="op" id="5903609">.</span><span class="ident" id="5903610">op</span><span class="op" id="5903612">(</span><span class="ident" id="5903613"><a href="/encoding/gob/encode.go.html#5903477">instr</a></span><span class="op" id="5903618">,</span>&nbsp;<span class="ident" id="5903620"><a href="/encoding/gob/encode.go.html#5903209">state</a></span><span class="op" id="5903625">,</span>&nbsp;<span class="ident" id="5903627"><a href="/encoding/gob/encode.go.html#5903185">value</a></span><span class="op" id="5903632">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903635">}</span><br>
<span class="lineno"></span><span class="op" id="5903637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5903640">//&nbsp;encodeStruct&nbsp;encodes&nbsp;a&nbsp;single&nbsp;struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5903687">func</span>&nbsp;<span class="op" id="5903692">(</span><span class="ident" id="5903693">enc</span>&nbsp;<span class="op" id="5903697">*</span><span class="ident" id="5903698"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5903705">)</span>&nbsp;<span class="ident" id="5903707">encodeStruct</span><span class="op" id="5903719">(</span><span class="ident" id="5903720">b</span>&nbsp;<span class="op" id="5903722">*</span><span class="ident" id="5903723"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5903732">,</span>&nbsp;<span class="ident" id="5903734">engine</span>&nbsp;<span class="op" id="5903741">*</span><span class="ident" id="5903742"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5903751">,</span>&nbsp;<span class="ident" id="5903753">value</span>&nbsp;<span class="ident" id="5903759"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5903766">.</span><span class="ident" id="5903767">Value</span><span class="op" id="5903772">)</span>&nbsp;<span class="op" id="5903774">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903777">if</span>&nbsp;<span class="op" id="5903780">!</span><span class="ident" id="5903781"><a href="/encoding/gob/encode.go.html#5902913">valid</a></span><span class="op" id="5903786">(</span><span class="ident" id="5903787"><a href="/encoding/gob/encode.go.html#5903753">value</a></span><span class="op" id="5903792">)</span>&nbsp;<span class="op" id="5903794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5903806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903809">state</span>&nbsp;<span class="op" id="5903815">:=</span>&nbsp;<span class="ident" id="5903818"><a href="/encoding/gob/encode.go.html#5903693">enc</a></span><span class="op" id="5903821">.</span><span class="ident" id="5903822">newEncoderState</span><span class="op" id="5903837">(</span><span class="ident" id="5903838"><a href="/encoding/gob/encode.go.html#5903720">b</a></span><span class="op" id="5903839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903842">defer</span>&nbsp;<span class="ident" id="5903848"><a href="/encoding/gob/encode.go.html#5903693">enc</a></span><span class="op" id="5903851">.</span><span class="ident" id="5903852">freeEncoderState</span><span class="op" id="5903868">(</span><span class="ident" id="5903869"><a href="/encoding/gob/encode.go.html#5903809">state</a></span><span class="op" id="5903874">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903877"><a href="/encoding/gob/encode.go.html#5903809">state</a></span><span class="op" id="5903882">.</span><span class="ident" id="5903883">fieldnum</span>&nbsp;<span class="op" id="5903892">=</span>&nbsp;<span class="op" id="5903894">-</span><span class="num" id="5903895">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903898">for</span>&nbsp;<span class="ident" id="5903902">i</span>&nbsp;<span class="op" id="5903904">:=</span>&nbsp;<span class="num" id="5903907">0</span><span class="op" id="5903908">;</span>&nbsp;<span class="ident" id="5903910"><a href="/encoding/gob/encode.go.html#5903902">i</a></span>&nbsp;<span class="op" id="5903912">&lt;</span>&nbsp;<span class="builtinfunc" id="5903914">len</span><span class="op" id="5903917">(</span><span class="ident" id="5903918"><a href="/encoding/gob/encode.go.html#5903734">engine</a></span><span class="op" id="5903924">.</span><span class="ident" id="5903925">instr</span><span class="op" id="5903930">)</span><span class="op" id="5903931">;</span>&nbsp;<span class="ident" id="5903933"><a href="/encoding/gob/encode.go.html#5903902">i</a></span><span class="op" id="5903934">++</span>&nbsp;<span class="op" id="5903937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5903941">instr</span>&nbsp;<span class="op" id="5903947">:=</span>&nbsp;<span class="op" id="5903950">&amp;</span><span class="ident" id="5903951"><a href="/encoding/gob/encode.go.html#5903734">engine</a></span><span class="op" id="5903957">.</span><span class="ident" id="5903958">instr</span><span class="op" id="5903963">[</span><span class="ident" id="5903964"><a href="/encoding/gob/encode.go.html#5903902">i</a></span><span class="op" id="5903965">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5903969">if</span>&nbsp;<span class="ident" id="5903972"><a href="/encoding/gob/encode.go.html#5903902">i</a></span>&nbsp;<span class="op" id="5903974">&gt;=</span>&nbsp;<span class="ident" id="5903977"><a href="/encoding/gob/encode.go.html#5903753">value</a></span><span class="op" id="5903982">.</span><span class="ident" id="5903983">NumField</span><span class="op" id="5903991">(</span><span class="op" id="5903992">)</span>&nbsp;<span class="op" id="5903994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5903999">//&nbsp;encStructTerminator</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904025"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904030">.</span><span class="ident" id="5904031">op</span><span class="op" id="5904033">(</span><span class="ident" id="5904034"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904039">,</span>&nbsp;<span class="ident" id="5904041"><a href="/encoding/gob/encode.go.html#5903809">state</a></span><span class="op" id="5904046">,</span>&nbsp;<span class="ident" id="5904048"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5904055">.</span><span class="ident" id="5904056">Value</span><span class="op" id="5904061">{</span><span class="op" id="5904062">}</span><span class="op" id="5904063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904068">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904080">field</span>&nbsp;<span class="op" id="5904086">:=</span>&nbsp;<span class="ident" id="5904089"><a href="/encoding/gob/encode.go.html#5903753">value</a></span><span class="op" id="5904094">.</span><span class="ident" id="5904095">FieldByIndex</span><span class="op" id="5904107">(</span><span class="ident" id="5904108"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904113">.</span><span class="ident" id="5904114">index</span><span class="op" id="5904119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904123">if</span>&nbsp;<span class="ident" id="5904126"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904131">.</span><span class="ident" id="5904132">indir</span>&nbsp;<span class="op" id="5904138">&gt;</span>&nbsp;<span class="num" id="5904140">0</span>&nbsp;<span class="op" id="5904142">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904147"><a href="/encoding/gob/encode.go.html#5904080">field</a></span>&nbsp;<span class="op" id="5904153">=</span>&nbsp;<span class="ident" id="5904155"><a href="/encoding/gob/encode.go.html#5899547">encIndirect</a></span><span class="op" id="5904166">(</span><span class="ident" id="5904167"><a href="/encoding/gob/encode.go.html#5904080">field</a></span><span class="op" id="5904172">,</span>&nbsp;<span class="ident" id="5904174"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904179">.</span><span class="ident" id="5904180">indir</span><span class="op" id="5904185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904190">//&nbsp;TODO:&nbsp;Is&nbsp;field&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904262">if</span>&nbsp;<span class="op" id="5904265">!</span><span class="ident" id="5904266"><a href="/encoding/gob/encode.go.html#5902913">valid</a></span><span class="op" id="5904271">(</span><span class="ident" id="5904272"><a href="/encoding/gob/encode.go.html#5904080">field</a></span><span class="op" id="5904277">)</span>&nbsp;<span class="op" id="5904279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904285">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904297">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904305"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904310">.</span><span class="ident" id="5904311">op</span><span class="op" id="5904313">(</span><span class="ident" id="5904314"><a href="/encoding/gob/encode.go.html#5903941">instr</a></span><span class="op" id="5904319">,</span>&nbsp;<span class="ident" id="5904321"><a href="/encoding/gob/encode.go.html#5903809">state</a></span><span class="op" id="5904326">,</span>&nbsp;<span class="ident" id="5904328"><a href="/encoding/gob/encode.go.html#5904080">field</a></span><span class="op" id="5904333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904336">}</span><br>
<span class="lineno"></span><span class="op" id="5904338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="5904341">//&nbsp;encodeArray&nbsp;encodes&nbsp;an&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5904374">func</span>&nbsp;<span class="op" id="5904379">(</span><span class="ident" id="5904380">enc</span>&nbsp;<span class="op" id="5904384">*</span><span class="ident" id="5904385"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5904392">)</span>&nbsp;<span class="ident" id="5904394">encodeArray</span><span class="op" id="5904405">(</span><span class="ident" id="5904406">b</span>&nbsp;<span class="op" id="5904408">*</span><span class="ident" id="5904409"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5904418">,</span>&nbsp;<span class="ident" id="5904420">value</span>&nbsp;<span class="ident" id="5904426"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5904433">.</span><span class="ident" id="5904434">Value</span><span class="op" id="5904439">,</span>&nbsp;<span class="ident" id="5904441">op</span>&nbsp;<span class="ident" id="5904444"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5904449">,</span>&nbsp;<span class="ident" id="5904451">elemIndir</span>&nbsp;<span class="builtintype" id="5904461">int</span><span class="op" id="5904464">,</span>&nbsp;<span class="ident" id="5904466">length</span>&nbsp;<span class="builtintype" id="5904473">int</span><span class="op" id="5904476">,</span>&nbsp;<span class="ident" id="5904478">helper</span>&nbsp;<span class="ident" id="5904485"><a href="/encoding/gob/encode.go.html#5895677">encHelper</a></span><span class="op" id="5904494">)</span>&nbsp;<span class="op" id="5904496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904499">state</span>&nbsp;<span class="op" id="5904505">:=</span>&nbsp;<span class="ident" id="5904508"><a href="/encoding/gob/encode.go.html#5904380">enc</a></span><span class="op" id="5904511">.</span><span class="ident" id="5904512">newEncoderState</span><span class="op" id="5904527">(</span><span class="ident" id="5904528"><a href="/encoding/gob/encode.go.html#5904406">b</a></span><span class="op" id="5904529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904532">defer</span>&nbsp;<span class="ident" id="5904538"><a href="/encoding/gob/encode.go.html#5904380">enc</a></span><span class="op" id="5904541">.</span><span class="ident" id="5904542">freeEncoderState</span><span class="op" id="5904558">(</span><span class="ident" id="5904559"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904567"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904572">.</span><span class="ident" id="5904573">fieldnum</span>&nbsp;<span class="op" id="5904582">=</span>&nbsp;<span class="op" id="5904584">-</span><span class="num" id="5904585">1</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904588"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904593">.</span><span class="ident" id="5904594">sendZero</span>&nbsp;<span class="op" id="5904603">=</span>&nbsp;<span class="builtintype" id="5904605">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904611"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904616">.</span><span class="ident" id="5904617">encodeUint</span><span class="op" id="5904627">(</span><span class="ident" id="5904628">uint64</span><span class="op" id="5904634">(</span><span class="ident" id="5904635"><a href="/encoding/gob/encode.go.html#5904466">length</a></span><span class="op" id="5904641">)</span><span class="op" id="5904642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904645">if</span>&nbsp;<span class="ident" id="5904648"><a href="/encoding/gob/encode.go.html#5904478">helper</a></span>&nbsp;<span class="op" id="5904655">!=</span>&nbsp;<span class="ident" id="5904658">nil</span>&nbsp;<span class="op" id="5904662">&amp;&amp;</span>&nbsp;<span class="ident" id="5904665"><a href="/encoding/gob/encode.go.html#5904478">helper</a></span><span class="op" id="5904671">(</span><span class="ident" id="5904672"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904677">,</span>&nbsp;<span class="ident" id="5904679"><a href="/encoding/gob/encode.go.html#5904420">value</a></span><span class="op" id="5904684">)</span>&nbsp;<span class="op" id="5904686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904690">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904698">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904701">for</span>&nbsp;<span class="ident" id="5904705">i</span>&nbsp;<span class="op" id="5904707">:=</span>&nbsp;<span class="num" id="5904710">0</span><span class="op" id="5904711">;</span>&nbsp;<span class="ident" id="5904713"><a href="/encoding/gob/encode.go.html#5904705">i</a></span>&nbsp;<span class="op" id="5904715">&lt;</span>&nbsp;<span class="ident" id="5904717"><a href="/encoding/gob/encode.go.html#5904466">length</a></span><span class="op" id="5904723">;</span>&nbsp;<span class="ident" id="5904725"><a href="/encoding/gob/encode.go.html#5904705">i</a></span><span class="op" id="5904726">++</span>&nbsp;<span class="op" id="5904729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904733">elem</span>&nbsp;<span class="op" id="5904738">:=</span>&nbsp;<span class="ident" id="5904741"><a href="/encoding/gob/encode.go.html#5904420">value</a></span><span class="op" id="5904746">.</span><span class="ident" id="5904747">Index</span><span class="op" id="5904752">(</span><span class="ident" id="5904753"><a href="/encoding/gob/encode.go.html#5904705">i</a></span><span class="op" id="5904754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904758">if</span>&nbsp;<span class="ident" id="5904761"><a href="/encoding/gob/encode.go.html#5904451">elemIndir</a></span>&nbsp;<span class="op" id="5904771">&gt;</span>&nbsp;<span class="num" id="5904773">0</span>&nbsp;<span class="op" id="5904775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904780"><a href="/encoding/gob/encode.go.html#5904733">elem</a></span>&nbsp;<span class="op" id="5904785">=</span>&nbsp;<span class="ident" id="5904787"><a href="/encoding/gob/encode.go.html#5899547">encIndirect</a></span><span class="op" id="5904798">(</span><span class="ident" id="5904799"><a href="/encoding/gob/encode.go.html#5904733">elem</a></span><span class="op" id="5904803">,</span>&nbsp;<span class="ident" id="5904805"><a href="/encoding/gob/encode.go.html#5904451">elemIndir</a></span><span class="op" id="5904814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5904819">//&nbsp;TODO:&nbsp;Is&nbsp;elem&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5904890">if</span>&nbsp;<span class="op" id="5904893">!</span><span class="ident" id="5904894"><a href="/encoding/gob/encode.go.html#5902913">valid</a></span><span class="op" id="5904899">(</span><span class="ident" id="5904900"><a href="/encoding/gob/encode.go.html#5904733">elem</a></span><span class="op" id="5904904">)</span>&nbsp;<span class="op" id="5904906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904912"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5904918">(</span><span class="string" id="5904919">&#34;encodeArray:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5904945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5904958"><a href="/encoding/gob/encode.go.html#5904441">op</a></span><span class="op" id="5904960">(</span><span class="ident" id="5904961">nil</span><span class="op" id="5904964">,</span>&nbsp;<span class="ident" id="5904966"><a href="/encoding/gob/encode.go.html#5904499">state</a></span><span class="op" id="5904971">,</span>&nbsp;<span class="ident" id="5904973"><a href="/encoding/gob/encode.go.html#5904733">elem</a></span><span class="op" id="5904977">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5904980">}</span><br>
<span class="lineno"></span><span class="op" id="5904982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5904985">//&nbsp;encodeReflectValue&nbsp;is&nbsp;a&nbsp;helper&nbsp;for&nbsp;maps.&nbsp;It&nbsp;encodes&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5905053">func</span>&nbsp;<span class="ident" id="5905058">encodeReflectValue</span><span class="op" id="5905076">(</span><span class="ident" id="5905077">state</span>&nbsp;<span class="op" id="5905083">*</span><span class="ident" id="5905084"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5905096">,</span>&nbsp;<span class="ident" id="5905098">v</span>&nbsp;<span class="ident" id="5905100"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5905107">.</span><span class="ident" id="5905108">Value</span><span class="op" id="5905113">,</span>&nbsp;<span class="ident" id="5905115">op</span>&nbsp;<span class="ident" id="5905118"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5905123">,</span>&nbsp;<span class="ident" id="5905125">indir</span>&nbsp;<span class="builtintype" id="5905131">int</span><span class="op" id="5905134">)</span>&nbsp;<span class="op" id="5905136">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905139">for</span>&nbsp;<span class="ident" id="5905143">i</span>&nbsp;<span class="op" id="5905145">:=</span>&nbsp;<span class="num" id="5905148">0</span><span class="op" id="5905149">;</span>&nbsp;<span class="ident" id="5905151"><a href="/encoding/gob/encode.go.html#5905143">i</a></span>&nbsp;<span class="op" id="5905153">&lt;</span>&nbsp;<span class="ident" id="5905155"><a href="/encoding/gob/encode.go.html#5905125">indir</a></span>&nbsp;<span class="op" id="5905161">&amp;&amp;</span>&nbsp;<span class="ident" id="5905164"><a href="/encoding/gob/encode.go.html#5905098">v</a></span><span class="op" id="5905165">.</span><span class="ident" id="5905166">IsValid</span><span class="op" id="5905173">(</span><span class="op" id="5905174">)</span><span class="op" id="5905175">;</span>&nbsp;<span class="ident" id="5905177"><a href="/encoding/gob/encode.go.html#5905143">i</a></span><span class="op" id="5905178">++</span>&nbsp;<span class="op" id="5905181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905185"><a href="/encoding/gob/encode.go.html#5905098">v</a></span>&nbsp;<span class="op" id="5905187">=</span>&nbsp;<span class="ident" id="5905189"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5905196">.</span><span class="ident" id="5905197">Indirect</span><span class="op" id="5905205">(</span><span class="ident" id="5905206"><a href="/encoding/gob/encode.go.html#5905098">v</a></span><span class="op" id="5905207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905213">if</span>&nbsp;<span class="op" id="5905216">!</span><span class="ident" id="5905217"><a href="/encoding/gob/encode.go.html#5905098">v</a></span><span class="op" id="5905218">.</span><span class="ident" id="5905219">IsValid</span><span class="op" id="5905226">(</span><span class="op" id="5905227">)</span>&nbsp;<span class="op" id="5905229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905233"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5905239">(</span><span class="string" id="5905240">&#34;encodeReflectValue:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5905273">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905279"><a href="/encoding/gob/encode.go.html#5905115">op</a></span><span class="op" id="5905281">(</span><span class="ident" id="5905282">nil</span><span class="op" id="5905285">,</span>&nbsp;<span class="ident" id="5905287"><a href="/encoding/gob/encode.go.html#5905077">state</a></span><span class="op" id="5905292">,</span>&nbsp;<span class="ident" id="5905294"><a href="/encoding/gob/encode.go.html#5905098">v</a></span><span class="op" id="5905295">)</span><br>
<span class="lineno"></span><span class="op" id="5905297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5905300">//&nbsp;encodeMap&nbsp;encodes&nbsp;a&nbsp;map&nbsp;as&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;key:value&nbsp;pairs.</span><br>
<span class="lineno">360</span><span class="keyword" id="5905374">func</span>&nbsp;<span class="op" id="5905379">(</span><span class="ident" id="5905380">enc</span>&nbsp;<span class="op" id="5905384">*</span><span class="ident" id="5905385"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5905392">)</span>&nbsp;<span class="ident" id="5905394">encodeMap</span><span class="op" id="5905403">(</span><span class="ident" id="5905404">b</span>&nbsp;<span class="op" id="5905406">*</span><span class="ident" id="5905407"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5905416">,</span>&nbsp;<span class="ident" id="5905418">mv</span>&nbsp;<span class="ident" id="5905421"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5905428">.</span><span class="ident" id="5905429">Value</span><span class="op" id="5905434">,</span>&nbsp;<span class="ident" id="5905436">keyOp</span><span class="op" id="5905441">,</span>&nbsp;<span class="ident" id="5905443">elemOp</span>&nbsp;<span class="ident" id="5905450"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5905455">,</span>&nbsp;<span class="ident" id="5905457">keyIndir</span><span class="op" id="5905465">,</span>&nbsp;<span class="ident" id="5905467">elemIndir</span>&nbsp;<span class="builtintype" id="5905477">int</span><span class="op" id="5905480">)</span>&nbsp;<span class="op" id="5905482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905485">state</span>&nbsp;<span class="op" id="5905491">:=</span>&nbsp;<span class="ident" id="5905494"><a href="/encoding/gob/encode.go.html#5905380">enc</a></span><span class="op" id="5905497">.</span><span class="ident" id="5905498">newEncoderState</span><span class="op" id="5905513">(</span><span class="ident" id="5905514"><a href="/encoding/gob/encode.go.html#5905404">b</a></span><span class="op" id="5905515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905518"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905523">.</span><span class="ident" id="5905524">fieldnum</span>&nbsp;<span class="op" id="5905533">=</span>&nbsp;<span class="op" id="5905535">-</span><span class="num" id="5905536">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905539"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905544">.</span><span class="ident" id="5905545">sendZero</span>&nbsp;<span class="op" id="5905554">=</span>&nbsp;<span class="builtintype" id="5905556">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905562">keys</span>&nbsp;<span class="op" id="5905567">:=</span>&nbsp;<span class="ident" id="5905570"><a href="/encoding/gob/encode.go.html#5905418">mv</a></span><span class="op" id="5905572">.</span><span class="ident" id="5905573">MapKeys</span><span class="op" id="5905580">(</span><span class="op" id="5905581">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905584"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905589">.</span><span class="ident" id="5905590">encodeUint</span><span class="op" id="5905600">(</span><span class="ident" id="5905601">uint64</span><span class="op" id="5905607">(</span><span class="builtinfunc" id="5905608">len</span><span class="op" id="5905611">(</span><span class="ident" id="5905612"><a href="/encoding/gob/encode.go.html#5905562">keys</a></span><span class="op" id="5905616">)</span><span class="op" id="5905617">)</span><span class="op" id="5905618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5905621">for</span>&nbsp;<span class="ident" id="5905625">_</span><span class="op" id="5905626">,</span>&nbsp;<span class="ident" id="5905628">key</span>&nbsp;<span class="op" id="5905632">:=</span>&nbsp;<span class="keyword" id="5905635">range</span>&nbsp;<span class="ident" id="5905641"><a href="/encoding/gob/encode.go.html#5905562">keys</a></span>&nbsp;<span class="op" id="5905646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905650"><a href="/encoding/gob/encode.go.html#5905058">encodeReflectValue</a></span><span class="op" id="5905668">(</span><span class="ident" id="5905669"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905674">,</span>&nbsp;<span class="ident" id="5905676"><a href="/encoding/gob/encode.go.html#5905628">key</a></span><span class="op" id="5905679">,</span>&nbsp;<span class="ident" id="5905681"><a href="/encoding/gob/encode.go.html#5905436">keyOp</a></span><span class="op" id="5905686">,</span>&nbsp;<span class="ident" id="5905688"><a href="/encoding/gob/encode.go.html#5905457">keyIndir</a></span><span class="op" id="5905696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905700"><a href="/encoding/gob/encode.go.html#5905058">encodeReflectValue</a></span><span class="op" id="5905718">(</span><span class="ident" id="5905719"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905724">,</span>&nbsp;<span class="ident" id="5905726"><a href="/encoding/gob/encode.go.html#5905418">mv</a></span><span class="op" id="5905728">.</span><span class="ident" id="5905729">MapIndex</span><span class="op" id="5905737">(</span><span class="ident" id="5905738"><a href="/encoding/gob/encode.go.html#5905628">key</a></span><span class="op" id="5905741">)</span><span class="op" id="5905742">,</span>&nbsp;<span class="ident" id="5905744"><a href="/encoding/gob/encode.go.html#5905443">elemOp</a></span><span class="op" id="5905750">,</span>&nbsp;<span class="ident" id="5905752"><a href="/encoding/gob/encode.go.html#5905467">elemIndir</a></span><span class="op" id="5905761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5905764">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5905767"><a href="/encoding/gob/encode.go.html#5905380">enc</a></span><span class="op" id="5905770">.</span><span class="ident" id="5905771">freeEncoderState</span><span class="op" id="5905787">(</span><span class="ident" id="5905788"><a href="/encoding/gob/encode.go.html#5905485">state</a></span><span class="op" id="5905793">)</span><br>
<span class="lineno"></span><span class="op" id="5905795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5905798">//&nbsp;encodeInterface&nbsp;encodes&nbsp;the&nbsp;interface&nbsp;value&nbsp;iv.</span><br>
<span class="lineno"></span><span class="comment" id="5905849">//&nbsp;To&nbsp;send&nbsp;an&nbsp;interface,&nbsp;we&nbsp;send&nbsp;a&nbsp;string&nbsp;identifying&nbsp;the&nbsp;concrete&nbsp;type,&nbsp;followed</span><br>
<span class="lineno">375</span><span class="comment" id="5905931">//&nbsp;by&nbsp;the&nbsp;type&nbsp;identifier&nbsp;(which&nbsp;might&nbsp;require&nbsp;defining&nbsp;that&nbsp;type&nbsp;right&nbsp;now),&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="5906018">//&nbsp;by&nbsp;the&nbsp;concrete&nbsp;value.&nbsp;&nbsp;A&nbsp;nil&nbsp;value&nbsp;gets&nbsp;sent&nbsp;as&nbsp;the&nbsp;empty&nbsp;string&nbsp;for&nbsp;the&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="5906101">//&nbsp;followed&nbsp;by&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5906126">func</span>&nbsp;<span class="op" id="5906131">(</span><span class="ident" id="5906132">enc</span>&nbsp;<span class="op" id="5906136">*</span><span class="ident" id="5906137"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5906144">)</span>&nbsp;<span class="ident" id="5906146">encodeInterface</span><span class="op" id="5906161">(</span><span class="ident" id="5906162">b</span>&nbsp;<span class="op" id="5906164">*</span><span class="ident" id="5906165"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5906174">,</span>&nbsp;<span class="ident" id="5906176">iv</span>&nbsp;<span class="ident" id="5906179"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5906186">.</span><span class="ident" id="5906187">Value</span><span class="op" id="5906192">)</span>&nbsp;<span class="op" id="5906194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5906197">//&nbsp;Gobs&nbsp;can&nbsp;encode&nbsp;nil&nbsp;interface&nbsp;values&nbsp;but&nbsp;not&nbsp;typed&nbsp;interface</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5906262">//&nbsp;values&nbsp;holding&nbsp;nil&nbsp;pointers,&nbsp;since&nbsp;nil&nbsp;pointers&nbsp;point&nbsp;to&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906333">elem</span>&nbsp;<span class="op" id="5906338">:=</span>&nbsp;<span class="ident" id="5906341"><a href="/encoding/gob/encode.go.html#5906176">iv</a></span><span class="op" id="5906343">.</span><span class="ident" id="5906344">Elem</span><span class="op" id="5906348">(</span><span class="op" id="5906349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5906352">if</span>&nbsp;<span class="ident" id="5906355"><a href="/encoding/gob/encode.go.html#5906333">elem</a></span><span class="op" id="5906359">.</span><span class="ident" id="5906360">Kind</span><span class="op" id="5906364">(</span><span class="op" id="5906365">)</span>&nbsp;<span class="op" id="5906367">==</span>&nbsp;<span class="ident" id="5906370"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5906377">.</span><span class="ident" id="5906378">Ptr</span>&nbsp;<span class="op" id="5906382">&amp;&amp;</span>&nbsp;<span class="ident" id="5906385"><a href="/encoding/gob/encode.go.html#5906333">elem</a></span><span class="op" id="5906389">.</span><span class="ident" id="5906390">IsNil</span><span class="op" id="5906395">(</span><span class="op" id="5906396">)</span>&nbsp;<span class="op" id="5906398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906402"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5906408">(</span><span class="string" id="5906409">&#34;gob:&nbsp;cannot&nbsp;encode&nbsp;nil&nbsp;pointer&nbsp;of&nbsp;type&nbsp;%s&nbsp;inside&nbsp;interface&#34;</span><span class="op" id="5906469">,</span>&nbsp;<span class="ident" id="5906471"><a href="/encoding/gob/encode.go.html#5906176">iv</a></span><span class="op" id="5906473">.</span><span class="ident" id="5906474">Elem</span><span class="op" id="5906478">(</span><span class="op" id="5906479">)</span><span class="op" id="5906480">.</span><span class="ident" id="5906481">Type</span><span class="op" id="5906485">(</span><span class="op" id="5906486">)</span><span class="op" id="5906487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5906490">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906493">state</span>&nbsp;<span class="op" id="5906499">:=</span>&nbsp;<span class="ident" id="5906502"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5906505">.</span><span class="ident" id="5906506">newEncoderState</span><span class="op" id="5906521">(</span><span class="ident" id="5906522"><a href="/encoding/gob/encode.go.html#5906162">b</a></span><span class="op" id="5906523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906526"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906531">.</span><span class="ident" id="5906532">fieldnum</span>&nbsp;<span class="op" id="5906541">=</span>&nbsp;<span class="op" id="5906543">-</span><span class="num" id="5906544">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906547"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906552">.</span><span class="ident" id="5906553">sendZero</span>&nbsp;<span class="op" id="5906562">=</span>&nbsp;<span class="builtintype" id="5906564">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5906570">if</span>&nbsp;<span class="ident" id="5906573"><a href="/encoding/gob/encode.go.html#5906176">iv</a></span><span class="op" id="5906575">.</span><span class="ident" id="5906576">IsNil</span><span class="op" id="5906581">(</span><span class="op" id="5906582">)</span>&nbsp;<span class="op" id="5906584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906588"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906593">.</span><span class="ident" id="5906594">encodeUint</span><span class="op" id="5906604">(</span><span class="num" id="5906605">0</span><span class="op" id="5906606">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5906610">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5906618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906622">ut</span>&nbsp;<span class="op" id="5906625">:=</span>&nbsp;<span class="ident" id="5906628"><a href="/encoding/gob/type.go.html#5929943">userType</a></span><span class="op" id="5906636">(</span><span class="ident" id="5906637"><a href="/encoding/gob/encode.go.html#5906176">iv</a></span><span class="op" id="5906639">.</span><span class="ident" id="5906640">Elem</span><span class="op" id="5906644">(</span><span class="op" id="5906645">)</span><span class="op" id="5906646">.</span><span class="ident" id="5906647">Type</span><span class="op" id="5906651">(</span><span class="op" id="5906652">)</span><span class="op" id="5906653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906656"><a href="/encoding/gob/type.go.html#5948526">registerLock</a></span><span class="op" id="5906668">.</span><span class="ident" id="5906669">RLock</span><span class="op" id="5906674">(</span><span class="op" id="5906675">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906678">name</span><span class="op" id="5906682">,</span>&nbsp;<span class="ident" id="5906684">ok</span>&nbsp;<span class="op" id="5906687">:=</span>&nbsp;<span class="ident" id="5906690"><a href="/encoding/gob/type.go.html#5948611">concreteTypeToName</a></span><span class="op" id="5906708">[</span><span class="ident" id="5906709"><a href="/encoding/gob/encode.go.html#5906622">ut</a></span><span class="op" id="5906711">.</span><span class="ident" id="5906712">base</span><span class="op" id="5906716">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906719"><a href="/encoding/gob/type.go.html#5948526">registerLock</a></span><span class="op" id="5906731">.</span><span class="ident" id="5906732">RUnlock</span><span class="op" id="5906739">(</span><span class="op" id="5906740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5906743">if</span>&nbsp;<span class="op" id="5906746">!</span><span class="ident" id="5906747"><a href="/encoding/gob/encode.go.html#5906684">ok</a></span>&nbsp;<span class="op" id="5906750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906754"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5906760">(</span><span class="string" id="5906761">&#34;type&nbsp;not&nbsp;registered&nbsp;for&nbsp;interface:&nbsp;%s&#34;</span><span class="op" id="5906800">,</span>&nbsp;<span class="ident" id="5906802"><a href="/encoding/gob/encode.go.html#5906622">ut</a></span><span class="op" id="5906804">.</span><span class="ident" id="5906805">base</span><span class="op" id="5906809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5906812">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5906815">//&nbsp;Send&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906834"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906839">.</span><span class="ident" id="5906840">encodeUint</span><span class="op" id="5906850">(</span><span class="ident" id="5906851">uint64</span><span class="op" id="5906857">(</span><span class="builtinfunc" id="5906858">len</span><span class="op" id="5906861">(</span><span class="ident" id="5906862"><a href="/encoding/gob/encode.go.html#5906678">name</a></span><span class="op" id="5906866">)</span><span class="op" id="5906867">)</span><span class="op" id="5906868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906871"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906876">.</span><span class="ident" id="5906877">b</span><span class="op" id="5906878">.</span><span class="ident" id="5906879">WriteString</span><span class="op" id="5906890">(</span><span class="ident" id="5906891"><a href="/encoding/gob/encode.go.html#5906678">name</a></span><span class="op" id="5906895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5906898">//&nbsp;Define&nbsp;the&nbsp;type&nbsp;id&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5906935"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5906938">.</span><span class="ident" id="5906939">sendTypeDescriptor</span><span class="op" id="5906957">(</span><span class="ident" id="5906958"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5906961">.</span><span class="ident" id="5906962">writer</span><span class="op" id="5906968">(</span><span class="op" id="5906969">)</span><span class="op" id="5906970">,</span>&nbsp;<span class="ident" id="5906972"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5906977">,</span>&nbsp;<span class="ident" id="5906979"><a href="/encoding/gob/encode.go.html#5906622">ut</a></span><span class="op" id="5906981">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5906984">//&nbsp;Send&nbsp;the&nbsp;type&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907006"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907009">.</span><span class="ident" id="5907010">sendTypeId</span><span class="op" id="5907020">(</span><span class="ident" id="5907021"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5907026">,</span>&nbsp;<span class="ident" id="5907028"><a href="/encoding/gob/encode.go.html#5906622">ut</a></span><span class="op" id="5907030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5907033">//&nbsp;Encode&nbsp;the&nbsp;value&nbsp;into&nbsp;a&nbsp;new&nbsp;buffer.&nbsp;&nbsp;Any&nbsp;nested&nbsp;type&nbsp;definitions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5907102">//&nbsp;should&nbsp;be&nbsp;written&nbsp;to&nbsp;b,&nbsp;before&nbsp;the&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907156"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907159">.</span><span class="ident" id="5907160">pushWriter</span><span class="op" id="5907170">(</span><span class="ident" id="5907171"><a href="/encoding/gob/encode.go.html#5906162">b</a></span><span class="op" id="5907172">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907175">data</span>&nbsp;<span class="op" id="5907180">:=</span>&nbsp;<span class="builtinfunc" id="5907183">new</span><span class="op" id="5907186">(</span><span class="ident" id="5907187"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5907196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907199"><a href="/encoding/gob/encode.go.html#5907175">data</a></span><span class="op" id="5907203">.</span><span class="ident" id="5907204">Write</span><span class="op" id="5907209">(</span><span class="ident" id="5907210"><a href="/encoding/gob/encoder.go.html#5916675">spaceForLength</a></span><span class="op" id="5907224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907227"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907230">.</span><span class="ident" id="5907231">encode</span><span class="op" id="5907237">(</span><span class="ident" id="5907238"><a href="/encoding/gob/encode.go.html#5907175">data</a></span><span class="op" id="5907242">,</span>&nbsp;<span class="ident" id="5907244"><a href="/encoding/gob/encode.go.html#5906333">elem</a></span><span class="op" id="5907248">,</span>&nbsp;<span class="ident" id="5907250"><a href="/encoding/gob/encode.go.html#5906622">ut</a></span><span class="op" id="5907252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907255">if</span>&nbsp;<span class="ident" id="5907258"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907261">.</span><span class="ident" id="5907262">err</span>&nbsp;<span class="op" id="5907266">!=</span>&nbsp;<span class="ident" id="5907269">nil</span>&nbsp;<span class="op" id="5907273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907277"><a href="/encoding/gob/error.go.html#5924211">error_</a></span><span class="op" id="5907283">(</span><span class="ident" id="5907284"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907287">.</span><span class="ident" id="5907288">err</span><span class="op" id="5907291">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5907294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907297"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907300">.</span><span class="ident" id="5907301">popWriter</span><span class="op" id="5907310">(</span><span class="op" id="5907311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907314"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907317">.</span><span class="ident" id="5907318">writeMessage</span><span class="op" id="5907330">(</span><span class="ident" id="5907331"><a href="/encoding/gob/encode.go.html#5906162">b</a></span><span class="op" id="5907332">,</span>&nbsp;<span class="ident" id="5907334"><a href="/encoding/gob/encode.go.html#5907175">data</a></span><span class="op" id="5907338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907341">if</span>&nbsp;<span class="ident" id="5907344"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907347">.</span><span class="ident" id="5907348">err</span>&nbsp;<span class="op" id="5907352">!=</span>&nbsp;<span class="ident" id="5907355">nil</span>&nbsp;<span class="op" id="5907359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907363"><a href="/encoding/gob/error.go.html#5924211">error_</a></span><span class="op" id="5907369">(</span><span class="ident" id="5907370"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907373">.</span><span class="ident" id="5907374">err</span><span class="op" id="5907377">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5907380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5907383"><a href="/encoding/gob/encode.go.html#5906132">enc</a></span><span class="op" id="5907386">.</span><span class="ident" id="5907387">freeEncoderState</span><span class="op" id="5907403">(</span><span class="ident" id="5907404"><a href="/encoding/gob/encode.go.html#5906493">state</a></span><span class="op" id="5907409">)</span><br>
<span class="lineno"></span><span class="op" id="5907411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5907414">//&nbsp;isZero&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;the&nbsp;zero&nbsp;of&nbsp;its&nbsp;type.</span><br>
<span class="lineno">425</span><span class="keyword" id="5907475">func</span>&nbsp;<span class="ident" id="5907480">isZero</span><span class="op" id="5907486">(</span><span class="ident" id="5907487">val</span>&nbsp;<span class="ident" id="5907491"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907498">.</span><span class="ident" id="5907499">Value</span><span class="op" id="5907504">)</span>&nbsp;<span class="builtintype" id="5907506">bool</span>&nbsp;<span class="op" id="5907511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907514">switch</span>&nbsp;<span class="ident" id="5907521"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907524">.</span><span class="ident" id="5907525">Kind</span><span class="op" id="5907529">(</span><span class="op" id="5907530">)</span>&nbsp;<span class="op" id="5907532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907535">case</span>&nbsp;<span class="ident" id="5907540"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907547">.</span><span class="ident" id="5907548">Array</span><span class="op" id="5907553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907557">for</span>&nbsp;<span class="ident" id="5907561">i</span>&nbsp;<span class="op" id="5907563">:=</span>&nbsp;<span class="num" id="5907566">0</span><span class="op" id="5907567">;</span>&nbsp;<span class="ident" id="5907569"><a href="/encoding/gob/encode.go.html#5907561">i</a></span>&nbsp;<span class="op" id="5907571">&lt;</span>&nbsp;<span class="ident" id="5907573"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907576">.</span><span class="ident" id="5907577">Len</span><span class="op" id="5907580">(</span><span class="op" id="5907581">)</span><span class="op" id="5907582">;</span>&nbsp;<span class="ident" id="5907584"><a href="/encoding/gob/encode.go.html#5907561">i</a></span><span class="op" id="5907585">++</span>&nbsp;<span class="op" id="5907588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907593">if</span>&nbsp;<span class="op" id="5907596">!</span><span class="ident" id="5907597"><a href="/encoding/gob/encode.go.html#5907480">isZero</a></span><span class="op" id="5907603">(</span><span class="ident" id="5907604"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907607">.</span><span class="ident" id="5907608">Index</span><span class="op" id="5907613">(</span><span class="ident" id="5907614"><a href="/encoding/gob/encode.go.html#5907561">i</a></span><span class="op" id="5907615">)</span><span class="op" id="5907616">)</span>&nbsp;<span class="op" id="5907618">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907624">return</span>&nbsp;<span class="builtintype" id="5907631">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5907640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5907644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907648">return</span>&nbsp;<span class="builtintype" id="5907655">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907661">case</span>&nbsp;<span class="ident" id="5907666"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907673">.</span><span class="ident" id="5907674">Map</span><span class="op" id="5907677">,</span>&nbsp;<span class="ident" id="5907679"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907686">.</span><span class="ident" id="5907687">Slice</span><span class="op" id="5907692">,</span>&nbsp;<span class="ident" id="5907694"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907701">.</span><span class="ident" id="5907702">String</span><span class="op" id="5907708">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907712">return</span>&nbsp;<span class="ident" id="5907719"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907722">.</span><span class="ident" id="5907723">Len</span><span class="op" id="5907726">(</span><span class="op" id="5907727">)</span>&nbsp;<span class="op" id="5907729">==</span>&nbsp;<span class="num" id="5907732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907735">case</span>&nbsp;<span class="ident" id="5907740"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907747">.</span><span class="ident" id="5907748">Bool</span><span class="op" id="5907752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907756">return</span>&nbsp;<span class="op" id="5907763">!</span><span class="ident" id="5907764"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907767">.</span><span class="ident" id="5907768">Bool</span><span class="op" id="5907772">(</span><span class="op" id="5907773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907776">case</span>&nbsp;<span class="ident" id="5907781"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907788">.</span><span class="ident" id="5907789">Complex64</span><span class="op" id="5907798">,</span>&nbsp;<span class="ident" id="5907800"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907807">.</span><span class="ident" id="5907808">Complex128</span><span class="op" id="5907818">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907822">return</span>&nbsp;<span class="ident" id="5907829"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907832">.</span><span class="ident" id="5907833">Complex</span><span class="op" id="5907840">(</span><span class="op" id="5907841">)</span>&nbsp;<span class="op" id="5907843">==</span>&nbsp;<span class="num" id="5907846">0</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907849">case</span>&nbsp;<span class="ident" id="5907854"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907861">.</span><span class="ident" id="5907862">Chan</span><span class="op" id="5907866">,</span>&nbsp;<span class="ident" id="5907868"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907875">.</span><span class="ident" id="5907876">Func</span><span class="op" id="5907880">,</span>&nbsp;<span class="ident" id="5907882"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907889">.</span><span class="ident" id="5907890">Interface</span><span class="op" id="5907899">,</span>&nbsp;<span class="ident" id="5907901"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907908">.</span><span class="ident" id="5907909">Ptr</span><span class="op" id="5907912">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907916">return</span>&nbsp;<span class="ident" id="5907923"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5907926">.</span><span class="ident" id="5907927">IsNil</span><span class="op" id="5907932">(</span><span class="op" id="5907933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5907936">case</span>&nbsp;<span class="ident" id="5907941"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907948">.</span><span class="ident" id="5907949">Int</span><span class="op" id="5907952">,</span>&nbsp;<span class="ident" id="5907954"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907961">.</span><span class="ident" id="5907962">Int8</span><span class="op" id="5907966">,</span>&nbsp;<span class="ident" id="5907968"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907975">.</span><span class="ident" id="5907976">Int16</span><span class="op" id="5907981">,</span>&nbsp;<span class="ident" id="5907983"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5907990">.</span><span class="ident" id="5907991">Int32</span><span class="op" id="5907996">,</span>&nbsp;<span class="ident" id="5907998"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908005">.</span><span class="ident" id="5908006">Int64</span><span class="op" id="5908011">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908015">return</span>&nbsp;<span class="ident" id="5908022"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908025">.</span><span class="ident" id="5908026">Int</span><span class="op" id="5908029">(</span><span class="op" id="5908030">)</span>&nbsp;<span class="op" id="5908032">==</span>&nbsp;<span class="num" id="5908035">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908038">case</span>&nbsp;<span class="ident" id="5908043"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908050">.</span><span class="ident" id="5908051">Float32</span><span class="op" id="5908058">,</span>&nbsp;<span class="ident" id="5908060"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908067">.</span><span class="ident" id="5908068">Float64</span><span class="op" id="5908075">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908079">return</span>&nbsp;<span class="ident" id="5908086"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908089">.</span><span class="ident" id="5908090">Float</span><span class="op" id="5908095">(</span><span class="op" id="5908096">)</span>&nbsp;<span class="op" id="5908098">==</span>&nbsp;<span class="num" id="5908101">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908104">case</span>&nbsp;<span class="ident" id="5908109"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908116">.</span><span class="ident" id="5908117">Uint</span><span class="op" id="5908121">,</span>&nbsp;<span class="ident" id="5908123"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908130">.</span><span class="ident" id="5908131">Uint8</span><span class="op" id="5908136">,</span>&nbsp;<span class="ident" id="5908138"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908145">.</span><span class="ident" id="5908146">Uint16</span><span class="op" id="5908152">,</span>&nbsp;<span class="ident" id="5908154"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908161">.</span><span class="ident" id="5908162">Uint32</span><span class="op" id="5908168">,</span>&nbsp;<span class="ident" id="5908170"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908177">.</span><span class="ident" id="5908178">Uint64</span><span class="op" id="5908184">,</span>&nbsp;<span class="ident" id="5908186"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908193">.</span><span class="ident" id="5908194">Uintptr</span><span class="op" id="5908201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908205">return</span>&nbsp;<span class="ident" id="5908212"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908215">.</span><span class="ident" id="5908216">Uint</span><span class="op" id="5908220">(</span><span class="op" id="5908221">)</span>&nbsp;<span class="op" id="5908223">==</span>&nbsp;<span class="num" id="5908226">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908229">case</span>&nbsp;<span class="ident" id="5908234"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908241">.</span><span class="ident" id="5908242">Struct</span><span class="op" id="5908248">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908252">for</span>&nbsp;<span class="ident" id="5908256">i</span>&nbsp;<span class="op" id="5908258">:=</span>&nbsp;<span class="num" id="5908261">0</span><span class="op" id="5908262">;</span>&nbsp;<span class="ident" id="5908264"><a href="/encoding/gob/encode.go.html#5908256">i</a></span>&nbsp;<span class="op" id="5908266">&lt;</span>&nbsp;<span class="ident" id="5908268"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908271">.</span><span class="ident" id="5908272">NumField</span><span class="op" id="5908280">(</span><span class="op" id="5908281">)</span><span class="op" id="5908282">;</span>&nbsp;<span class="ident" id="5908284"><a href="/encoding/gob/encode.go.html#5908256">i</a></span><span class="op" id="5908285">++</span>&nbsp;<span class="op" id="5908288">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908293">if</span>&nbsp;<span class="op" id="5908296">!</span><span class="ident" id="5908297"><a href="/encoding/gob/encode.go.html#5907480">isZero</a></span><span class="op" id="5908303">(</span><span class="ident" id="5908304"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908307">.</span><span class="ident" id="5908308">Field</span><span class="op" id="5908313">(</span><span class="ident" id="5908314"><a href="/encoding/gob/encode.go.html#5908256">i</a></span><span class="op" id="5908315">)</span><span class="op" id="5908316">)</span>&nbsp;<span class="op" id="5908318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908324">return</span>&nbsp;<span class="builtintype" id="5908331">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5908340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5908344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908348">return</span>&nbsp;<span class="builtintype" id="5908355">true</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5908361">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5908364">panic</span><span class="op" id="5908369">(</span><span class="string" id="5908370">&#34;unknown&nbsp;type&nbsp;in&nbsp;isZero&nbsp;&#34;</span>&nbsp;<span class="op" id="5908396">+</span>&nbsp;<span class="ident" id="5908398"><a href="/encoding/gob/encode.go.html#5907487">val</a></span><span class="op" id="5908401">.</span><span class="ident" id="5908402">Type</span><span class="op" id="5908406">(</span><span class="op" id="5908407">)</span><span class="op" id="5908408">.</span><span class="ident" id="5908409">String</span><span class="op" id="5908415">(</span><span class="op" id="5908416">)</span><span class="op" id="5908417">)</span><br>
<span class="lineno"></span><span class="op" id="5908419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5908422">//&nbsp;encGobEncoder&nbsp;encodes&nbsp;a&nbsp;value&nbsp;that&nbsp;implements&nbsp;the&nbsp;GobEncoder&nbsp;interface.</span><br>
<span class="lineno">460</span><span class="comment" id="5908497">//&nbsp;The&nbsp;data&nbsp;is&nbsp;sent&nbsp;as&nbsp;a&nbsp;byte&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5908534">func</span>&nbsp;<span class="op" id="5908539">(</span><span class="ident" id="5908540">enc</span>&nbsp;<span class="op" id="5908544">*</span><span class="ident" id="5908545"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5908552">)</span>&nbsp;<span class="ident" id="5908554">encodeGobEncoder</span><span class="op" id="5908570">(</span><span class="ident" id="5908571">b</span>&nbsp;<span class="op" id="5908573">*</span><span class="ident" id="5908574"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5908583">,</span>&nbsp;<span class="ident" id="5908585">ut</span>&nbsp;<span class="op" id="5908588">*</span><span class="ident" id="5908589"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5908601">,</span>&nbsp;<span class="ident" id="5908603">v</span>&nbsp;<span class="ident" id="5908605"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5908612">.</span><span class="ident" id="5908613">Value</span><span class="op" id="5908618">)</span>&nbsp;<span class="op" id="5908620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5908623">//&nbsp;TODO:&nbsp;should&nbsp;we&nbsp;catch&nbsp;panics&nbsp;from&nbsp;the&nbsp;called&nbsp;method?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908681">var</span>&nbsp;<span class="ident" id="5908685">data</span>&nbsp;<span class="op" id="5908690">[</span><span class="op" id="5908691">]</span><span class="builtintype" id="5908692">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908698">var</span>&nbsp;<span class="ident" id="5908702">err</span>&nbsp;<span class="builtintype" id="5908706">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5908713">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;one&nbsp;of&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908744">switch</span>&nbsp;<span class="ident" id="5908751"><a href="/encoding/gob/encode.go.html#5908585">ut</a></span><span class="op" id="5908753">.</span><span class="ident" id="5908754">externalEnc</span>&nbsp;<span class="op" id="5908766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908769">case</span>&nbsp;<span class="ident" id="5908774"><a href="/encoding/gob/type.go.html#5925587">xGob</a></span><span class="op" id="5908778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5908782"><a href="/encoding/gob/encode.go.html#5908685">data</a></span><span class="op" id="5908786">,</span>&nbsp;<span class="ident" id="5908788"><a href="/encoding/gob/encode.go.html#5908702">err</a></span>&nbsp;<span class="op" id="5908792">=</span>&nbsp;<span class="ident" id="5908794"><a href="/encoding/gob/encode.go.html#5908603">v</a></span><span class="op" id="5908795">.</span><span class="ident" id="5908796">Interface</span><span class="op" id="5908805">(</span><span class="op" id="5908806">)</span><span class="op" id="5908807">.</span><span class="op" id="5908808">(</span><span class="ident" id="5908809"><a href="/encoding/gob/type.go.html#5947934">GobEncoder</a></span><span class="op" id="5908819">)</span><span class="op" id="5908820">.</span><span class="ident" id="5908821">GobEncode</span><span class="op" id="5908830">(</span><span class="op" id="5908831">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908834">case</span>&nbsp;<span class="ident" id="5908839"><a href="/encoding/gob/type.go.html#5925635">xBinary</a></span><span class="op" id="5908846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5908850"><a href="/encoding/gob/encode.go.html#5908685">data</a></span><span class="op" id="5908854">,</span>&nbsp;<span class="ident" id="5908856"><a href="/encoding/gob/encode.go.html#5908702">err</a></span>&nbsp;<span class="op" id="5908860">=</span>&nbsp;<span class="ident" id="5908862"><a href="/encoding/gob/encode.go.html#5908603">v</a></span><span class="op" id="5908863">.</span><span class="ident" id="5908864">Interface</span><span class="op" id="5908873">(</span><span class="op" id="5908874">)</span><span class="op" id="5908875">.</span><span class="op" id="5908876">(</span><span class="ident" id="5908877"><a href="/encoding/gob/encode.go.html#5895617">encoding</a></span><span class="op" id="5908885">.</span><span class="ident" id="5908886">BinaryMarshaler</span><span class="op" id="5908901">)</span><span class="op" id="5908902">.</span><span class="ident" id="5908903">MarshalBinary</span><span class="op" id="5908916">(</span><span class="op" id="5908917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5908920">case</span>&nbsp;<span class="ident" id="5908925"><a href="/encoding/gob/type.go.html#5925713">xText</a></span><span class="op" id="5908930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5908934"><a href="/encoding/gob/encode.go.html#5908685">data</a></span><span class="op" id="5908938">,</span>&nbsp;<span class="ident" id="5908940"><a href="/encoding/gob/encode.go.html#5908702">err</a></span>&nbsp;<span class="op" id="5908944">=</span>&nbsp;<span class="ident" id="5908946"><a href="/encoding/gob/encode.go.html#5908603">v</a></span><span class="op" id="5908947">.</span><span class="ident" id="5908948">Interface</span><span class="op" id="5908957">(</span><span class="op" id="5908958">)</span><span class="op" id="5908959">.</span><span class="op" id="5908960">(</span><span class="ident" id="5908961"><a href="/encoding/gob/encode.go.html#5895617">encoding</a></span><span class="op" id="5908969">.</span><span class="ident" id="5908970">TextMarshaler</span><span class="op" id="5908983">)</span><span class="op" id="5908984">.</span><span class="ident" id="5908985">MarshalText</span><span class="op" id="5908996">(</span><span class="op" id="5908997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5909000">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5909003">if</span>&nbsp;<span class="ident" id="5909006"><a href="/encoding/gob/encode.go.html#5908702">err</a></span>&nbsp;<span class="op" id="5909010">!=</span>&nbsp;<span class="ident" id="5909013">nil</span>&nbsp;<span class="op" id="5909017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909021"><a href="/encoding/gob/error.go.html#5924211">error_</a></span><span class="op" id="5909027">(</span><span class="ident" id="5909028"><a href="/encoding/gob/encode.go.html#5908702">err</a></span><span class="op" id="5909031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5909034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909037">state</span>&nbsp;<span class="op" id="5909043">:=</span>&nbsp;<span class="ident" id="5909046"><a href="/encoding/gob/encode.go.html#5908540">enc</a></span><span class="op" id="5909049">.</span><span class="ident" id="5909050">newEncoderState</span><span class="op" id="5909065">(</span><span class="ident" id="5909066"><a href="/encoding/gob/encode.go.html#5908571">b</a></span><span class="op" id="5909067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909070"><a href="/encoding/gob/encode.go.html#5909037">state</a></span><span class="op" id="5909075">.</span><span class="ident" id="5909076">fieldnum</span>&nbsp;<span class="op" id="5909085">=</span>&nbsp;<span class="op" id="5909087">-</span><span class="num" id="5909088">1</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909091"><a href="/encoding/gob/encode.go.html#5909037">state</a></span><span class="op" id="5909096">.</span><span class="ident" id="5909097">encodeUint</span><span class="op" id="5909107">(</span><span class="ident" id="5909108">uint64</span><span class="op" id="5909114">(</span><span class="builtinfunc" id="5909115">len</span><span class="op" id="5909118">(</span><span class="ident" id="5909119"><a href="/encoding/gob/encode.go.html#5908685">data</a></span><span class="op" id="5909123">)</span><span class="op" id="5909124">)</span><span class="op" id="5909125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909128"><a href="/encoding/gob/encode.go.html#5909037">state</a></span><span class="op" id="5909133">.</span><span class="ident" id="5909134">b</span><span class="op" id="5909135">.</span><span class="ident" id="5909136">Write</span><span class="op" id="5909141">(</span><span class="ident" id="5909142"><a href="/encoding/gob/encode.go.html#5908685">data</a></span><span class="op" id="5909146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909149"><a href="/encoding/gob/encode.go.html#5908540">enc</a></span><span class="op" id="5909152">.</span><span class="ident" id="5909153">freeEncoderState</span><span class="op" id="5909169">(</span><span class="ident" id="5909170"><a href="/encoding/gob/encode.go.html#5909037">state</a></span><span class="op" id="5909175">)</span><br>
<span class="lineno"></span><span class="op" id="5909177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="5909180">var</span>&nbsp;<span class="ident" id="5909184">encOpTable</span>&nbsp;<span class="op" id="5909195">=</span>&nbsp;<span class="op" id="5909197">[</span><span class="op" id="5909198">...</span><span class="op" id="5909201">]</span><span class="ident" id="5909202"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5909207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909210"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909217">.</span><span class="ident" id="5909218">Bool</span><span class="op" id="5909222">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909230"><a href="/encoding/gob/encode.go.html#5899769">encBool</a></span><span class="op" id="5909237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909240"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909247">.</span><span class="ident" id="5909248">Int</span><span class="op" id="5909251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909260"><a href="/encoding/gob/encode.go.html#5900053">encInt</a></span><span class="op" id="5909266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909269"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909276">.</span><span class="ident" id="5909277">Int8</span><span class="op" id="5909281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909289"><a href="/encoding/gob/encode.go.html#5900053">encInt</a></span><span class="op" id="5909295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909298"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909305">.</span><span class="ident" id="5909306">Int16</span><span class="op" id="5909311">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909318"><a href="/encoding/gob/encode.go.html#5900053">encInt</a></span><span class="op" id="5909324">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909327"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909334">.</span><span class="ident" id="5909335">Int32</span><span class="op" id="5909340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909347"><a href="/encoding/gob/encode.go.html#5900053">encInt</a></span><span class="op" id="5909353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909356"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909363">.</span><span class="ident" id="5909364">Int64</span><span class="op" id="5909369">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909376"><a href="/encoding/gob/encode.go.html#5900053">encInt</a></span><span class="op" id="5909382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909385"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909392">.</span><span class="ident" id="5909393">Uint</span><span class="op" id="5909397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909405"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909415"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909422">.</span><span class="ident" id="5909423">Uint8</span><span class="op" id="5909428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909435"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909445"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909452">.</span><span class="ident" id="5909453">Uint16</span><span class="op" id="5909459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909465"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909472">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909475"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909482">.</span><span class="ident" id="5909483">Uint32</span><span class="op" id="5909489">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909495"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909502">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909505"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909512">.</span><span class="ident" id="5909513">Uint64</span><span class="op" id="5909519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909525"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909535"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909542">.</span><span class="ident" id="5909543">Uintptr</span><span class="op" id="5909550">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909555"><a href="/encoding/gob/encode.go.html#5900319">encUint</a></span><span class="op" id="5909562">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909565"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909572">.</span><span class="ident" id="5909573">Float32</span><span class="op" id="5909580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909585"><a href="/encoding/gob/encode.go.html#5901090">encFloat</a></span><span class="op" id="5909593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909596"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909603">.</span><span class="ident" id="5909604">Float64</span><span class="op" id="5909611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909616"><a href="/encoding/gob/encode.go.html#5901090">encFloat</a></span><span class="op" id="5909624">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909627"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909634">.</span><span class="ident" id="5909635">Complex64</span><span class="op" id="5909644">:</span>&nbsp;&nbsp;<span class="ident" id="5909647"><a href="/encoding/gob/encode.go.html#5901435">encComplex</a></span><span class="op" id="5909657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909660"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909667">.</span><span class="ident" id="5909668">Complex128</span><span class="op" id="5909678">:</span>&nbsp;<span class="ident" id="5909680"><a href="/encoding/gob/encode.go.html#5901435">encComplex</a></span><span class="op" id="5909690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909693"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909700">.</span><span class="ident" id="5909701">String</span><span class="op" id="5909707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5909713"><a href="/encoding/gob/encode.go.html#5902145">encString</a></span><span class="op" id="5909722">,</span><br>
<span class="lineno"></span><span class="op" id="5909724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="comment" id="5909727">//&nbsp;encOpFor&nbsp;returns&nbsp;(a&nbsp;pointer&nbsp;to)&nbsp;the&nbsp;encoding&nbsp;op&nbsp;for&nbsp;the&nbsp;base&nbsp;type&nbsp;under&nbsp;rt&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5909809">//&nbsp;the&nbsp;indirection&nbsp;count&nbsp;to&nbsp;reach&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5909847">func</span>&nbsp;<span class="ident" id="5909852">encOpFor</span><span class="op" id="5909860">(</span><span class="ident" id="5909861">rt</span>&nbsp;<span class="ident" id="5909864"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909871">.</span><span class="ident" id="5909872">Type</span><span class="op" id="5909876">,</span>&nbsp;<span class="ident" id="5909878">inProgress</span>&nbsp;<span class="keyword" id="5909889">map</span><span class="op" id="5909892">[</span><span class="ident" id="5909893"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5909900">.</span><span class="ident" id="5909901">Type</span><span class="op" id="5909905">]</span><span class="op" id="5909906">*</span><span class="ident" id="5909907"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5909912">,</span>&nbsp;<span class="ident" id="5909914">building</span>&nbsp;<span class="keyword" id="5909923">map</span><span class="op" id="5909926">[</span><span class="op" id="5909927">*</span><span class="ident" id="5909928"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5909936">]</span><span class="builtintype" id="5909937">bool</span><span class="op" id="5909941">)</span>&nbsp;<span class="op" id="5909943">(</span><span class="op" id="5909944">*</span><span class="ident" id="5909945"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5909950">,</span>&nbsp;<span class="builtintype" id="5909952">int</span><span class="op" id="5909955">)</span>&nbsp;<span class="op" id="5909957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5909960">ut</span>&nbsp;<span class="op" id="5909963">:=</span>&nbsp;<span class="ident" id="5909966"><a href="/encoding/gob/type.go.html#5929943">userType</a></span><span class="op" id="5909974">(</span><span class="ident" id="5909975"><a href="/encoding/gob/encode.go.html#5909861">rt</a></span><span class="op" id="5909977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5909980">//&nbsp;If&nbsp;the&nbsp;type&nbsp;implements&nbsp;GobEncoder,&nbsp;we&nbsp;handle&nbsp;it&nbsp;without&nbsp;further&nbsp;processing.</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910060">if</span>&nbsp;<span class="ident" id="5910063"><a href="/encoding/gob/encode.go.html#5909960">ut</a></span><span class="op" id="5910065">.</span><span class="ident" id="5910066">externalEnc</span>&nbsp;<span class="op" id="5910078">!=</span>&nbsp;<span class="num" id="5910081">0</span>&nbsp;<span class="op" id="5910083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910087">return</span>&nbsp;<span class="ident" id="5910094"><a href="/encoding/gob/encode.go.html#5912752">gobEncodeOpFor</a></span><span class="op" id="5910108">(</span><span class="ident" id="5910109"><a href="/encoding/gob/encode.go.html#5909960">ut</a></span><span class="op" id="5910111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5910114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5910117">//&nbsp;If&nbsp;this&nbsp;type&nbsp;is&nbsp;already&nbsp;in&nbsp;progress,&nbsp;it&#39;s&nbsp;a&nbsp;recursive&nbsp;type&nbsp;(e.g.&nbsp;map[string]*T).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5910202">//&nbsp;Return&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;op&nbsp;we&#39;re&nbsp;already&nbsp;building.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910259">if</span>&nbsp;<span class="ident" id="5910262">opPtr</span>&nbsp;<span class="op" id="5910268">:=</span>&nbsp;<span class="ident" id="5910271"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5910281">[</span><span class="ident" id="5910282"><a href="/encoding/gob/encode.go.html#5909861">rt</a></span><span class="op" id="5910284">]</span><span class="op" id="5910285">;</span>&nbsp;<span class="ident" id="5910287"><a href="/encoding/gob/encode.go.html#5910262">opPtr</a></span>&nbsp;<span class="op" id="5910293">!=</span>&nbsp;<span class="ident" id="5910296">nil</span>&nbsp;<span class="op" id="5910300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910304">return</span>&nbsp;<span class="ident" id="5910311"><a href="/encoding/gob/encode.go.html#5910262">opPtr</a></span><span class="op" id="5910316">,</span>&nbsp;<span class="ident" id="5910318"><a href="/encoding/gob/encode.go.html#5909960">ut</a></span><span class="op" id="5910320">.</span><span class="ident" id="5910321">indir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5910328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910331">typ</span>&nbsp;<span class="op" id="5910335">:=</span>&nbsp;<span class="ident" id="5910338"><a href="/encoding/gob/encode.go.html#5909960">ut</a></span><span class="op" id="5910340">.</span><span class="ident" id="5910341">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910347">indir</span>&nbsp;<span class="op" id="5910353">:=</span>&nbsp;<span class="ident" id="5910356"><a href="/encoding/gob/encode.go.html#5909960">ut</a></span><span class="op" id="5910358">.</span><span class="ident" id="5910359">indir</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910366">k</span>&nbsp;<span class="op" id="5910368">:=</span>&nbsp;<span class="ident" id="5910371"><a href="/encoding/gob/encode.go.html#5910331">typ</a></span><span class="op" id="5910374">.</span><span class="ident" id="5910375">Kind</span><span class="op" id="5910379">(</span><span class="op" id="5910380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910383">var</span>&nbsp;<span class="ident" id="5910387">op</span>&nbsp;<span class="ident" id="5910390"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910397">if</span>&nbsp;<span class="builtintype" id="5910400">int</span><span class="op" id="5910403">(</span><span class="ident" id="5910404"><a href="/encoding/gob/encode.go.html#5910366">k</a></span><span class="op" id="5910405">)</span>&nbsp;<span class="op" id="5910407">&lt;</span>&nbsp;<span class="builtinfunc" id="5910409">len</span><span class="op" id="5910412">(</span><span class="ident" id="5910413"><a href="/encoding/gob/encode.go.html#5909184">encOpTable</a></span><span class="op" id="5910423">)</span>&nbsp;<span class="op" id="5910425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910429"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5910432">=</span>&nbsp;<span class="ident" id="5910434"><a href="/encoding/gob/encode.go.html#5909184">encOpTable</a></span><span class="op" id="5910444">[</span><span class="ident" id="5910445"><a href="/encoding/gob/encode.go.html#5910366">k</a></span><span class="op" id="5910446">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5910449">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910452">if</span>&nbsp;<span class="ident" id="5910455"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5910458">==</span>&nbsp;<span class="ident" id="5910461">nil</span>&nbsp;<span class="op" id="5910465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910469"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5910479">[</span><span class="ident" id="5910480"><a href="/encoding/gob/encode.go.html#5909861">rt</a></span><span class="op" id="5910482">]</span>&nbsp;<span class="op" id="5910484">=</span>&nbsp;<span class="op" id="5910486">&amp;</span><span class="ident" id="5910487"><a href="/encoding/gob/encode.go.html#5910387">op</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5910492">//&nbsp;Special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910511">switch</span>&nbsp;<span class="ident" id="5910518">t</span>&nbsp;<span class="op" id="5910520">:=</span>&nbsp;<span class="ident" id="5910523"><a href="/encoding/gob/encode.go.html#5910331">typ</a></span><span class="op" id="5910526">;</span>&nbsp;<span class="ident" id="5910528"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5910529">.</span><span class="ident" id="5910530">Kind</span><span class="op" id="5910534">(</span><span class="op" id="5910535">)</span>&nbsp;<span class="op" id="5910537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910541">case</span>&nbsp;<span class="ident" id="5910546"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5910553">.</span><span class="ident" id="5910554">Slice</span><span class="op" id="5910559">:</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910564">if</span>&nbsp;<span class="ident" id="5910567"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5910568">.</span><span class="ident" id="5910569">Elem</span><span class="op" id="5910573">(</span><span class="op" id="5910574">)</span><span class="op" id="5910575">.</span><span class="ident" id="5910576">Kind</span><span class="op" id="5910580">(</span><span class="op" id="5910581">)</span>&nbsp;<span class="op" id="5910583">==</span>&nbsp;<span class="ident" id="5910586"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5910593">.</span><span class="ident" id="5910594">Uint8</span>&nbsp;<span class="op" id="5910600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910606"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5910609">=</span>&nbsp;<span class="ident" id="5910611"><a href="/encoding/gob/encode.go.html#5901824">encUint8Array</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910629">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5910638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5910643">//&nbsp;Slices&nbsp;have&nbsp;a&nbsp;header;&nbsp;we&nbsp;decode&nbsp;it&nbsp;to&nbsp;find&nbsp;the&nbsp;underlying&nbsp;array.</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910714">elemOp</span><span class="op" id="5910720">,</span>&nbsp;<span class="ident" id="5910722">elemIndir</span>&nbsp;<span class="op" id="5910732">:=</span>&nbsp;<span class="ident" id="5910735"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5910743">(</span><span class="ident" id="5910744"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5910745">.</span><span class="ident" id="5910746">Elem</span><span class="op" id="5910750">(</span><span class="op" id="5910751">)</span><span class="op" id="5910752">,</span>&nbsp;<span class="ident" id="5910754"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5910764">,</span>&nbsp;<span class="ident" id="5910766"><a href="/encoding/gob/encode.go.html#5909914">building</a></span><span class="op" id="5910774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910779">helper</span>&nbsp;<span class="op" id="5910786">:=</span>&nbsp;<span class="ident" id="5910789"><a href="/encoding/gob/enc_helpers.go.html#5886121">encSliceHelper</a></span><span class="op" id="5910803">[</span><span class="ident" id="5910804"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5910805">.</span><span class="ident" id="5910806">Elem</span><span class="op" id="5910810">(</span><span class="op" id="5910811">)</span><span class="op" id="5910812">.</span><span class="ident" id="5910813">Kind</span><span class="op" id="5910817">(</span><span class="op" id="5910818">)</span><span class="op" id="5910819">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910824"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5910827">=</span>&nbsp;<span class="keyword" id="5910829">func</span><span class="op" id="5910833">(</span><span class="ident" id="5910834">i</span>&nbsp;<span class="op" id="5910836">*</span><span class="ident" id="5910837"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5910845">,</span>&nbsp;<span class="ident" id="5910847">state</span>&nbsp;<span class="op" id="5910853">*</span><span class="ident" id="5910854"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5910866">,</span>&nbsp;<span class="ident" id="5910868">slice</span>&nbsp;<span class="ident" id="5910874"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5910881">.</span><span class="ident" id="5910882">Value</span><span class="op" id="5910887">)</span>&nbsp;<span class="op" id="5910889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910895">if</span>&nbsp;<span class="op" id="5910898">!</span><span class="ident" id="5910899"><a href="/encoding/gob/encode.go.html#5910847">state</a></span><span class="op" id="5910904">.</span><span class="ident" id="5910905">sendZero</span>&nbsp;<span class="op" id="5910914">&amp;&amp;</span>&nbsp;<span class="ident" id="5910917"><a href="/encoding/gob/encode.go.html#5910868">slice</a></span><span class="op" id="5910922">.</span><span class="ident" id="5910923">Len</span><span class="op" id="5910926">(</span><span class="op" id="5910927">)</span>&nbsp;<span class="op" id="5910929">==</span>&nbsp;<span class="num" id="5910932">0</span>&nbsp;<span class="op" id="5910934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5910941">return</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5910952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910958"><a href="/encoding/gob/encode.go.html#5910847">state</a></span><span class="op" id="5910963">.</span><span class="ident" id="5910964">update</span><span class="op" id="5910970">(</span><span class="ident" id="5910971"><a href="/encoding/gob/encode.go.html#5910834">i</a></span><span class="op" id="5910972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5910978"><a href="/encoding/gob/encode.go.html#5910847">state</a></span><span class="op" id="5910983">.</span><span class="ident" id="5910984">enc</span><span class="op" id="5910987">.</span><span class="ident" id="5910988">encodeArray</span><span class="op" id="5910999">(</span><span class="ident" id="5911000"><a href="/encoding/gob/encode.go.html#5910847">state</a></span><span class="op" id="5911005">.</span><span class="ident" id="5911006">b</span><span class="op" id="5911007">,</span>&nbsp;<span class="ident" id="5911009"><a href="/encoding/gob/encode.go.html#5910868">slice</a></span><span class="op" id="5911014">,</span>&nbsp;<span class="op" id="5911016">*</span><span class="ident" id="5911017"><a href="/encoding/gob/encode.go.html#5910714">elemOp</a></span><span class="op" id="5911023">,</span>&nbsp;<span class="ident" id="5911025"><a href="/encoding/gob/encode.go.html#5910722">elemIndir</a></span><span class="op" id="5911034">,</span>&nbsp;<span class="ident" id="5911036"><a href="/encoding/gob/encode.go.html#5910868">slice</a></span><span class="op" id="5911041">.</span><span class="ident" id="5911042">Len</span><span class="op" id="5911045">(</span><span class="op" id="5911046">)</span><span class="op" id="5911047">,</span>&nbsp;<span class="ident" id="5911049"><a href="/encoding/gob/encode.go.html#5910779">helper</a></span><span class="op" id="5911055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5911060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5911064">case</span>&nbsp;<span class="ident" id="5911069"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5911076">.</span><span class="ident" id="5911077">Array</span><span class="op" id="5911082">:</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5911087">//&nbsp;True&nbsp;arrays&nbsp;have&nbsp;size&nbsp;in&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911128">elemOp</span><span class="op" id="5911134">,</span>&nbsp;<span class="ident" id="5911136">elemIndir</span>&nbsp;<span class="op" id="5911146">:=</span>&nbsp;<span class="ident" id="5911149"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5911157">(</span><span class="ident" id="5911158"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5911159">.</span><span class="ident" id="5911160">Elem</span><span class="op" id="5911164">(</span><span class="op" id="5911165">)</span><span class="op" id="5911166">,</span>&nbsp;<span class="ident" id="5911168"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5911178">,</span>&nbsp;<span class="ident" id="5911180"><a href="/encoding/gob/encode.go.html#5909914">building</a></span><span class="op" id="5911188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911193">helper</span>&nbsp;<span class="op" id="5911200">:=</span>&nbsp;<span class="ident" id="5911203"><a href="/encoding/gob/enc_helpers.go.html#5885479">encArrayHelper</a></span><span class="op" id="5911217">[</span><span class="ident" id="5911218"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5911219">.</span><span class="ident" id="5911220">Elem</span><span class="op" id="5911224">(</span><span class="op" id="5911225">)</span><span class="op" id="5911226">.</span><span class="ident" id="5911227">Kind</span><span class="op" id="5911231">(</span><span class="op" id="5911232">)</span><span class="op" id="5911233">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911238"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5911241">=</span>&nbsp;<span class="keyword" id="5911243">func</span><span class="op" id="5911247">(</span><span class="ident" id="5911248">i</span>&nbsp;<span class="op" id="5911250">*</span><span class="ident" id="5911251"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5911259">,</span>&nbsp;<span class="ident" id="5911261">state</span>&nbsp;<span class="op" id="5911267">*</span><span class="ident" id="5911268"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5911280">,</span>&nbsp;<span class="ident" id="5911282">array</span>&nbsp;<span class="ident" id="5911288"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5911295">.</span><span class="ident" id="5911296">Value</span><span class="op" id="5911301">)</span>&nbsp;<span class="op" id="5911303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911309"><a href="/encoding/gob/encode.go.html#5911261">state</a></span><span class="op" id="5911314">.</span><span class="ident" id="5911315">update</span><span class="op" id="5911321">(</span><span class="ident" id="5911322"><a href="/encoding/gob/encode.go.html#5911248">i</a></span><span class="op" id="5911323">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911329"><a href="/encoding/gob/encode.go.html#5911261">state</a></span><span class="op" id="5911334">.</span><span class="ident" id="5911335">enc</span><span class="op" id="5911338">.</span><span class="ident" id="5911339">encodeArray</span><span class="op" id="5911350">(</span><span class="ident" id="5911351"><a href="/encoding/gob/encode.go.html#5911261">state</a></span><span class="op" id="5911356">.</span><span class="ident" id="5911357">b</span><span class="op" id="5911358">,</span>&nbsp;<span class="ident" id="5911360"><a href="/encoding/gob/encode.go.html#5911282">array</a></span><span class="op" id="5911365">,</span>&nbsp;<span class="op" id="5911367">*</span><span class="ident" id="5911368"><a href="/encoding/gob/encode.go.html#5911128">elemOp</a></span><span class="op" id="5911374">,</span>&nbsp;<span class="ident" id="5911376"><a href="/encoding/gob/encode.go.html#5911136">elemIndir</a></span><span class="op" id="5911385">,</span>&nbsp;<span class="ident" id="5911387"><a href="/encoding/gob/encode.go.html#5911282">array</a></span><span class="op" id="5911392">.</span><span class="ident" id="5911393">Len</span><span class="op" id="5911396">(</span><span class="op" id="5911397">)</span><span class="op" id="5911398">,</span>&nbsp;<span class="ident" id="5911400"><a href="/encoding/gob/encode.go.html#5911193">helper</a></span><span class="op" id="5911406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5911411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5911415">case</span>&nbsp;<span class="ident" id="5911420"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5911427">.</span><span class="ident" id="5911428">Map</span><span class="op" id="5911431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911436">keyOp</span><span class="op" id="5911441">,</span>&nbsp;<span class="ident" id="5911443">keyIndir</span>&nbsp;<span class="op" id="5911452">:=</span>&nbsp;<span class="ident" id="5911455"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5911463">(</span><span class="ident" id="5911464"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5911465">.</span><span class="ident" id="5911466">Key</span><span class="op" id="5911469">(</span><span class="op" id="5911470">)</span><span class="op" id="5911471">,</span>&nbsp;<span class="ident" id="5911473"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5911483">,</span>&nbsp;<span class="ident" id="5911485"><a href="/encoding/gob/encode.go.html#5909914">building</a></span><span class="op" id="5911493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911498">elemOp</span><span class="op" id="5911504">,</span>&nbsp;<span class="ident" id="5911506">elemIndir</span>&nbsp;<span class="op" id="5911516">:=</span>&nbsp;<span class="ident" id="5911519"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5911527">(</span><span class="ident" id="5911528"><a href="/encoding/gob/encode.go.html#5910518">t</a></span><span class="op" id="5911529">.</span><span class="ident" id="5911530">Elem</span><span class="op" id="5911534">(</span><span class="op" id="5911535">)</span><span class="op" id="5911536">,</span>&nbsp;<span class="ident" id="5911538"><a href="/encoding/gob/encode.go.html#5909878">inProgress</a></span><span class="op" id="5911548">,</span>&nbsp;<span class="ident" id="5911550"><a href="/encoding/gob/encode.go.html#5909914">building</a></span><span class="op" id="5911558">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911563"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5911566">=</span>&nbsp;<span class="keyword" id="5911568">func</span><span class="op" id="5911572">(</span><span class="ident" id="5911573">i</span>&nbsp;<span class="op" id="5911575">*</span><span class="ident" id="5911576"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5911584">,</span>&nbsp;<span class="ident" id="5911586">state</span>&nbsp;<span class="op" id="5911592">*</span><span class="ident" id="5911593"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5911605">,</span>&nbsp;<span class="ident" id="5911607">mv</span>&nbsp;<span class="ident" id="5911610"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5911617">.</span><span class="ident" id="5911618">Value</span><span class="op" id="5911623">)</span>&nbsp;<span class="op" id="5911625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5911631">//&nbsp;We&nbsp;send&nbsp;zero-length&nbsp;(but&nbsp;non-nil)&nbsp;maps&nbsp;because&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5911689">//&nbsp;receiver&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;map.&nbsp;&nbsp;(Maps&nbsp;don&#39;t&nbsp;use&nbsp;append.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5911758">if</span>&nbsp;<span class="op" id="5911761">!</span><span class="ident" id="5911762"><a href="/encoding/gob/encode.go.html#5911586">state</a></span><span class="op" id="5911767">.</span><span class="ident" id="5911768">sendZero</span>&nbsp;<span class="op" id="5911777">&amp;&amp;</span>&nbsp;<span class="ident" id="5911780"><a href="/encoding/gob/encode.go.html#5911607">mv</a></span><span class="op" id="5911782">.</span><span class="ident" id="5911783">IsNil</span><span class="op" id="5911788">(</span><span class="op" id="5911789">)</span>&nbsp;<span class="op" id="5911791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5911798">return</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5911809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911815"><a href="/encoding/gob/encode.go.html#5911586">state</a></span><span class="op" id="5911820">.</span><span class="ident" id="5911821">update</span><span class="op" id="5911827">(</span><span class="ident" id="5911828"><a href="/encoding/gob/encode.go.html#5911573">i</a></span><span class="op" id="5911829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5911835"><a href="/encoding/gob/encode.go.html#5911586">state</a></span><span class="op" id="5911840">.</span><span class="ident" id="5911841">enc</span><span class="op" id="5911844">.</span><span class="ident" id="5911845">encodeMap</span><span class="op" id="5911854">(</span><span class="ident" id="5911855"><a href="/encoding/gob/encode.go.html#5911586">state</a></span><span class="op" id="5911860">.</span><span class="ident" id="5911861">b</span><span class="op" id="5911862">,</span>&nbsp;<span class="ident" id="5911864"><a href="/encoding/gob/encode.go.html#5911607">mv</a></span><span class="op" id="5911866">,</span>&nbsp;<span class="op" id="5911868">*</span><span class="ident" id="5911869"><a href="/encoding/gob/encode.go.html#5911436">keyOp</a></span><span class="op" id="5911874">,</span>&nbsp;<span class="op" id="5911876">*</span><span class="ident" id="5911877"><a href="/encoding/gob/encode.go.html#5911498">elemOp</a></span><span class="op" id="5911883">,</span>&nbsp;<span class="ident" id="5911885"><a href="/encoding/gob/encode.go.html#5911443">keyIndir</a></span><span class="op" id="5911893">,</span>&nbsp;<span class="ident" id="5911895"><a href="/encoding/gob/encode.go.html#5911506">elemIndir</a></span><span class="op" id="5911904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5911909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5911913">case</span>&nbsp;<span class="ident" id="5911918"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5911925">.</span><span class="ident" id="5911926">Struct</span><span class="op" id="5911932">:</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5911937">//&nbsp;Generate&nbsp;a&nbsp;closure&nbsp;that&nbsp;calls&nbsp;out&nbsp;to&nbsp;the&nbsp;engine&nbsp;for&nbsp;the&nbsp;nested&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912012"><a href="/encoding/gob/encode.go.html#5914479">getEncEngine</a></span><span class="op" id="5912024">(</span><span class="ident" id="5912025"><a href="/encoding/gob/type.go.html#5929943">userType</a></span><span class="op" id="5912033">(</span><span class="ident" id="5912034"><a href="/encoding/gob/encode.go.html#5910331">typ</a></span><span class="op" id="5912037">)</span><span class="op" id="5912038">,</span>&nbsp;<span class="ident" id="5912040"><a href="/encoding/gob/encode.go.html#5909914">building</a></span><span class="op" id="5912048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912053">info</span>&nbsp;<span class="op" id="5912058">:=</span>&nbsp;<span class="ident" id="5912061"><a href="/encoding/gob/type.go.html#5947129">mustGetTypeInfo</a></span><span class="op" id="5912076">(</span><span class="ident" id="5912077"><a href="/encoding/gob/encode.go.html#5910331">typ</a></span><span class="op" id="5912080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912085"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5912088">=</span>&nbsp;<span class="keyword" id="5912090">func</span><span class="op" id="5912094">(</span><span class="ident" id="5912095">i</span>&nbsp;<span class="op" id="5912097">*</span><span class="ident" id="5912098"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5912106">,</span>&nbsp;<span class="ident" id="5912108">state</span>&nbsp;<span class="op" id="5912114">*</span><span class="ident" id="5912115"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5912127">,</span>&nbsp;<span class="ident" id="5912129">sv</span>&nbsp;<span class="ident" id="5912132"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5912139">.</span><span class="ident" id="5912140">Value</span><span class="op" id="5912145">)</span>&nbsp;<span class="op" id="5912147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912153"><a href="/encoding/gob/encode.go.html#5912108">state</a></span><span class="op" id="5912158">.</span><span class="ident" id="5912159">update</span><span class="op" id="5912165">(</span><span class="ident" id="5912166"><a href="/encoding/gob/encode.go.html#5912095">i</a></span><span class="op" id="5912167">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5912173">//&nbsp;indirect&nbsp;through&nbsp;info&nbsp;to&nbsp;delay&nbsp;evaluation&nbsp;for&nbsp;recursive&nbsp;structs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912244">enc</span>&nbsp;<span class="op" id="5912248">:=</span>&nbsp;<span class="ident" id="5912251"><a href="/encoding/gob/encode.go.html#5912053">info</a></span><span class="op" id="5912255">.</span><span class="ident" id="5912256">encoder</span><span class="op" id="5912263">.</span><span class="ident" id="5912264">Load</span><span class="op" id="5912268">(</span><span class="op" id="5912269">)</span><span class="op" id="5912270">.</span><span class="op" id="5912271">(</span><span class="op" id="5912272">*</span><span class="ident" id="5912273"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5912282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912288"><a href="/encoding/gob/encode.go.html#5912108">state</a></span><span class="op" id="5912293">.</span><span class="ident" id="5912294">enc</span><span class="op" id="5912297">.</span><span class="ident" id="5912298">encodeStruct</span><span class="op" id="5912310">(</span><span class="ident" id="5912311"><a href="/encoding/gob/encode.go.html#5912108">state</a></span><span class="op" id="5912316">.</span><span class="ident" id="5912317">b</span><span class="op" id="5912318">,</span>&nbsp;<span class="ident" id="5912320"><a href="/encoding/gob/encode.go.html#5912244">enc</a></span><span class="op" id="5912323">,</span>&nbsp;<span class="ident" id="5912325"><a href="/encoding/gob/encode.go.html#5912129">sv</a></span><span class="op" id="5912327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912336">case</span>&nbsp;<span class="ident" id="5912341"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5912348">.</span><span class="ident" id="5912349">Interface</span><span class="op" id="5912358">:</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912363"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5912366">=</span>&nbsp;<span class="keyword" id="5912368">func</span><span class="op" id="5912372">(</span><span class="ident" id="5912373">i</span>&nbsp;<span class="op" id="5912375">*</span><span class="ident" id="5912376"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5912384">,</span>&nbsp;<span class="ident" id="5912386">state</span>&nbsp;<span class="op" id="5912392">*</span><span class="ident" id="5912393"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5912405">,</span>&nbsp;<span class="ident" id="5912407">iv</span>&nbsp;<span class="ident" id="5912410"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5912417">.</span><span class="ident" id="5912418">Value</span><span class="op" id="5912423">)</span>&nbsp;<span class="op" id="5912425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912431">if</span>&nbsp;<span class="op" id="5912434">!</span><span class="ident" id="5912435"><a href="/encoding/gob/encode.go.html#5912386">state</a></span><span class="op" id="5912440">.</span><span class="ident" id="5912441">sendZero</span>&nbsp;<span class="op" id="5912450">&amp;&amp;</span>&nbsp;<span class="op" id="5912453">(</span><span class="op" id="5912454">!</span><span class="ident" id="5912455"><a href="/encoding/gob/encode.go.html#5912407">iv</a></span><span class="op" id="5912457">.</span><span class="ident" id="5912458">IsValid</span><span class="op" id="5912465">(</span><span class="op" id="5912466">)</span>&nbsp;<span class="op" id="5912468">||</span>&nbsp;<span class="ident" id="5912471"><a href="/encoding/gob/encode.go.html#5912407">iv</a></span><span class="op" id="5912473">.</span><span class="ident" id="5912474">IsNil</span><span class="op" id="5912479">(</span><span class="op" id="5912480">)</span><span class="op" id="5912481">)</span>&nbsp;<span class="op" id="5912483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912490">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912507"><a href="/encoding/gob/encode.go.html#5912386">state</a></span><span class="op" id="5912512">.</span><span class="ident" id="5912513">update</span><span class="op" id="5912519">(</span><span class="ident" id="5912520"><a href="/encoding/gob/encode.go.html#5912373">i</a></span><span class="op" id="5912521">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912527"><a href="/encoding/gob/encode.go.html#5912386">state</a></span><span class="op" id="5912532">.</span><span class="ident" id="5912533">enc</span><span class="op" id="5912536">.</span><span class="ident" id="5912537">encodeInterface</span><span class="op" id="5912552">(</span><span class="ident" id="5912553"><a href="/encoding/gob/encode.go.html#5912386">state</a></span><span class="op" id="5912558">.</span><span class="ident" id="5912559">b</span><span class="op" id="5912560">,</span>&nbsp;<span class="ident" id="5912562"><a href="/encoding/gob/encode.go.html#5912407">iv</a></span><span class="op" id="5912564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912579">if</span>&nbsp;<span class="ident" id="5912582"><a href="/encoding/gob/encode.go.html#5910387">op</a></span>&nbsp;<span class="op" id="5912585">==</span>&nbsp;<span class="ident" id="5912588">nil</span>&nbsp;<span class="op" id="5912592">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912596"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5912602">(</span><span class="string" id="5912603">&#34;can&#39;t&nbsp;happen:&nbsp;encode&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5912633">,</span>&nbsp;<span class="ident" id="5912635"><a href="/encoding/gob/encode.go.html#5909861">rt</a></span><span class="op" id="5912637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912643">return</span>&nbsp;<span class="op" id="5912650">&amp;</span><span class="ident" id="5912651"><a href="/encoding/gob/encode.go.html#5910387">op</a></span><span class="op" id="5912653">,</span>&nbsp;<span class="ident" id="5912655"><a href="/encoding/gob/encode.go.html#5910347">indir</a></span><br>
<span class="lineno"></span><span class="op" id="5912661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5912664">//&nbsp;gobEncodeOpFor&nbsp;returns&nbsp;the&nbsp;op&nbsp;for&nbsp;a&nbsp;type&nbsp;that&nbsp;is&nbsp;known&nbsp;to&nbsp;implement&nbsp;GobEncoder.</span><br>
<span class="lineno"></span><span class="keyword" id="5912747">func</span>&nbsp;<span class="ident" id="5912752">gobEncodeOpFor</span><span class="op" id="5912766">(</span><span class="ident" id="5912767">ut</span>&nbsp;<span class="op" id="5912770">*</span><span class="ident" id="5912771"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5912783">)</span>&nbsp;<span class="op" id="5912785">(</span><span class="op" id="5912786">*</span><span class="ident" id="5912787"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5912792">,</span>&nbsp;<span class="builtintype" id="5912794">int</span><span class="op" id="5912797">)</span>&nbsp;<span class="op" id="5912799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912802">rt</span>&nbsp;<span class="op" id="5912805">:=</span>&nbsp;<span class="ident" id="5912808"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5912810">.</span><span class="ident" id="5912811">user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912817">if</span>&nbsp;<span class="ident" id="5912820"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5912822">.</span><span class="ident" id="5912823">encIndir</span>&nbsp;<span class="op" id="5912832">==</span>&nbsp;<span class="op" id="5912835">-</span><span class="num" id="5912836">1</span>&nbsp;<span class="op" id="5912838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912842"><a href="/encoding/gob/encode.go.html#5912802">rt</a></span>&nbsp;<span class="op" id="5912845">=</span>&nbsp;<span class="ident" id="5912847"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5912854">.</span><span class="ident" id="5912855">PtrTo</span><span class="op" id="5912860">(</span><span class="ident" id="5912861"><a href="/encoding/gob/encode.go.html#5912802">rt</a></span><span class="op" id="5912863">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912866">}</span>&nbsp;<span class="keyword" id="5912868">else</span>&nbsp;<span class="keyword" id="5912873">if</span>&nbsp;<span class="ident" id="5912876"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5912878">.</span><span class="ident" id="5912879">encIndir</span>&nbsp;<span class="op" id="5912888">&gt;</span>&nbsp;<span class="num" id="5912890">0</span>&nbsp;<span class="op" id="5912892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912896">for</span>&nbsp;<span class="ident" id="5912900">i</span>&nbsp;<span class="op" id="5912902">:=</span>&nbsp;<span class="builtintype" id="5912905">int8</span><span class="op" id="5912909">(</span><span class="num" id="5912910">0</span><span class="op" id="5912911">)</span><span class="op" id="5912912">;</span>&nbsp;<span class="ident" id="5912914"><a href="/encoding/gob/encode.go.html#5912900">i</a></span>&nbsp;<span class="op" id="5912916">&lt;</span>&nbsp;<span class="ident" id="5912918"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5912920">.</span><span class="ident" id="5912921">encIndir</span><span class="op" id="5912929">;</span>&nbsp;<span class="ident" id="5912931"><a href="/encoding/gob/encode.go.html#5912900">i</a></span><span class="op" id="5912932">++</span>&nbsp;<span class="op" id="5912935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912940"><a href="/encoding/gob/encode.go.html#5912802">rt</a></span>&nbsp;<span class="op" id="5912943">=</span>&nbsp;<span class="ident" id="5912945"><a href="/encoding/gob/encode.go.html#5912802">rt</a></span><span class="op" id="5912947">.</span><span class="ident" id="5912948">Elem</span><span class="op" id="5912952">(</span><span class="op" id="5912953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5912960">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5912963">var</span>&nbsp;<span class="ident" id="5912967">op</span>&nbsp;<span class="ident" id="5912970"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5912977"><a href="/encoding/gob/encode.go.html#5912967">op</a></span>&nbsp;<span class="op" id="5912980">=</span>&nbsp;<span class="keyword" id="5912982">func</span><span class="op" id="5912986">(</span><span class="ident" id="5912987">i</span>&nbsp;<span class="op" id="5912989">*</span><span class="ident" id="5912990"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5912998">,</span>&nbsp;<span class="ident" id="5913000">state</span>&nbsp;<span class="op" id="5913006">*</span><span class="ident" id="5913007"><a href="/encoding/gob/encode.go.html#5895985">encoderState</a></span><span class="op" id="5913019">,</span>&nbsp;<span class="ident" id="5913021">v</span>&nbsp;<span class="ident" id="5913023"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5913030">.</span><span class="ident" id="5913031">Value</span><span class="op" id="5913036">)</span>&nbsp;<span class="op" id="5913038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913042">if</span>&nbsp;<span class="ident" id="5913045"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5913047">.</span><span class="ident" id="5913048">encIndir</span>&nbsp;<span class="op" id="5913057">==</span>&nbsp;<span class="op" id="5913060">-</span><span class="num" id="5913061">1</span>&nbsp;<span class="op" id="5913063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5913068">//&nbsp;Need&nbsp;to&nbsp;climb&nbsp;up&nbsp;one&nbsp;level&nbsp;to&nbsp;turn&nbsp;value&nbsp;into&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913129">if</span>&nbsp;<span class="op" id="5913132">!</span><span class="ident" id="5913133"><a href="/encoding/gob/encode.go.html#5913021">v</a></span><span class="op" id="5913134">.</span><span class="ident" id="5913135">CanAddr</span><span class="op" id="5913142">(</span><span class="op" id="5913143">)</span>&nbsp;<span class="op" id="5913145">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913151"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5913157">(</span><span class="string" id="5913158">&#34;unaddressable&nbsp;value&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5913190">,</span>&nbsp;<span class="ident" id="5913192"><a href="/encoding/gob/encode.go.html#5912802">rt</a></span><span class="op" id="5913194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913204"><a href="/encoding/gob/encode.go.html#5913021">v</a></span>&nbsp;<span class="op" id="5913206">=</span>&nbsp;<span class="ident" id="5913208"><a href="/encoding/gob/encode.go.html#5913021">v</a></span><span class="op" id="5913209">.</span><span class="ident" id="5913210">Addr</span><span class="op" id="5913214">(</span><span class="op" id="5913215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913223">if</span>&nbsp;<span class="op" id="5913226">!</span><span class="ident" id="5913227"><a href="/encoding/gob/encode.go.html#5913000">state</a></span><span class="op" id="5913232">.</span><span class="ident" id="5913233">sendZero</span>&nbsp;<span class="op" id="5913242">&amp;&amp;</span>&nbsp;<span class="ident" id="5913245"><a href="/encoding/gob/encode.go.html#5907480">isZero</a></span><span class="op" id="5913251">(</span><span class="ident" id="5913252"><a href="/encoding/gob/encode.go.html#5913021">v</a></span><span class="op" id="5913253">)</span>&nbsp;<span class="op" id="5913255">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913260">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913273"><a href="/encoding/gob/encode.go.html#5913000">state</a></span><span class="op" id="5913278">.</span><span class="ident" id="5913279">update</span><span class="op" id="5913285">(</span><span class="ident" id="5913286"><a href="/encoding/gob/encode.go.html#5912987">i</a></span><span class="op" id="5913287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913291"><a href="/encoding/gob/encode.go.html#5913000">state</a></span><span class="op" id="5913296">.</span><span class="ident" id="5913297">enc</span><span class="op" id="5913300">.</span><span class="ident" id="5913301">encodeGobEncoder</span><span class="op" id="5913317">(</span><span class="ident" id="5913318"><a href="/encoding/gob/encode.go.html#5913000">state</a></span><span class="op" id="5913323">.</span><span class="ident" id="5913324">b</span><span class="op" id="5913325">,</span>&nbsp;<span class="ident" id="5913327"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5913329">,</span>&nbsp;<span class="ident" id="5913331"><a href="/encoding/gob/encode.go.html#5913021">v</a></span><span class="op" id="5913332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913335">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913338">return</span>&nbsp;<span class="op" id="5913345">&amp;</span><span class="ident" id="5913346"><a href="/encoding/gob/encode.go.html#5912967">op</a></span><span class="op" id="5913348">,</span>&nbsp;<span class="builtintype" id="5913350">int</span><span class="op" id="5913353">(</span><span class="ident" id="5913354"><a href="/encoding/gob/encode.go.html#5912767">ut</a></span><span class="op" id="5913356">.</span><span class="ident" id="5913357">encIndir</span><span class="op" id="5913365">)</span>&nbsp;<span class="comment" id="5913367">//&nbsp;encIndir:&nbsp;op&nbsp;will&nbsp;get&nbsp;called&nbsp;with&nbsp;p&nbsp;==&nbsp;address&nbsp;of&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="5913430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5913433">//&nbsp;compileEnc&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5913487">func</span>&nbsp;<span class="ident" id="5913492">compileEnc</span><span class="op" id="5913502">(</span><span class="ident" id="5913503">ut</span>&nbsp;<span class="op" id="5913506">*</span><span class="ident" id="5913507"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5913519">,</span>&nbsp;<span class="ident" id="5913521">building</span>&nbsp;<span class="keyword" id="5913530">map</span><span class="op" id="5913533">[</span><span class="op" id="5913534">*</span><span class="ident" id="5913535"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5913543">]</span><span class="builtintype" id="5913544">bool</span><span class="op" id="5913548">)</span>&nbsp;<span class="op" id="5913550">*</span><span class="ident" id="5913551"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span>&nbsp;<span class="op" id="5913561">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913564">srt</span>&nbsp;<span class="op" id="5913568">:=</span>&nbsp;<span class="ident" id="5913571"><a href="/encoding/gob/encode.go.html#5913503">ut</a></span><span class="op" id="5913573">.</span><span class="ident" id="5913574">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913580">engine</span>&nbsp;<span class="op" id="5913587">:=</span>&nbsp;<span class="builtinfunc" id="5913590">new</span><span class="op" id="5913593">(</span><span class="ident" id="5913594"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5913603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913606">seen</span>&nbsp;<span class="op" id="5913611">:=</span>&nbsp;<span class="builtinfunc" id="5913614">make</span><span class="op" id="5913618">(</span><span class="keyword" id="5913619">map</span><span class="op" id="5913622">[</span><span class="ident" id="5913623"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5913630">.</span><span class="ident" id="5913631">Type</span><span class="op" id="5913635">]</span><span class="op" id="5913636">*</span><span class="ident" id="5913637"><a href="/encoding/gob/encode.go.html#5898393">encOp</a></span><span class="op" id="5913642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913645">rt</span>&nbsp;<span class="op" id="5913648">:=</span>&nbsp;<span class="ident" id="5913651"><a href="/encoding/gob/encode.go.html#5913503">ut</a></span><span class="op" id="5913653">.</span><span class="ident" id="5913654">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913660">if</span>&nbsp;<span class="ident" id="5913663"><a href="/encoding/gob/encode.go.html#5913503">ut</a></span><span class="op" id="5913665">.</span><span class="ident" id="5913666">externalEnc</span>&nbsp;<span class="op" id="5913678">!=</span>&nbsp;<span class="num" id="5913681">0</span>&nbsp;<span class="op" id="5913683">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913687"><a href="/encoding/gob/encode.go.html#5913645">rt</a></span>&nbsp;<span class="op" id="5913690">=</span>&nbsp;<span class="ident" id="5913692"><a href="/encoding/gob/encode.go.html#5913503">ut</a></span><span class="op" id="5913694">.</span><span class="ident" id="5913695">user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913704">if</span>&nbsp;<span class="ident" id="5913707"><a href="/encoding/gob/encode.go.html#5913503">ut</a></span><span class="op" id="5913709">.</span><span class="ident" id="5913710">externalEnc</span>&nbsp;<span class="op" id="5913722">==</span>&nbsp;<span class="num" id="5913725">0</span>&nbsp;<span class="op" id="5913727">&amp;&amp;</span>&nbsp;<span class="ident" id="5913730"><a href="/encoding/gob/encode.go.html#5913564">srt</a></span><span class="op" id="5913733">.</span><span class="ident" id="5913734">Kind</span><span class="op" id="5913738">(</span><span class="op" id="5913739">)</span>&nbsp;<span class="op" id="5913741">==</span>&nbsp;<span class="ident" id="5913744"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5913751">.</span><span class="ident" id="5913752">Struct</span>&nbsp;<span class="op" id="5913759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913763">for</span>&nbsp;<span class="ident" id="5913767">fieldNum</span><span class="op" id="5913775">,</span>&nbsp;<span class="ident" id="5913777">wireFieldNum</span>&nbsp;<span class="op" id="5913790">:=</span>&nbsp;<span class="num" id="5913793">0</span><span class="op" id="5913794">,</span>&nbsp;<span class="num" id="5913796">0</span><span class="op" id="5913797">;</span>&nbsp;<span class="ident" id="5913799"><a href="/encoding/gob/encode.go.html#5913767">fieldNum</a></span>&nbsp;<span class="op" id="5913808">&lt;</span>&nbsp;<span class="ident" id="5913810"><a href="/encoding/gob/encode.go.html#5913564">srt</a></span><span class="op" id="5913813">.</span><span class="ident" id="5913814">NumField</span><span class="op" id="5913822">(</span><span class="op" id="5913823">)</span><span class="op" id="5913824">;</span>&nbsp;<span class="ident" id="5913826"><a href="/encoding/gob/encode.go.html#5913767">fieldNum</a></span><span class="op" id="5913834">++</span>&nbsp;<span class="op" id="5913837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913842">f</span>&nbsp;<span class="op" id="5913844">:=</span>&nbsp;<span class="ident" id="5913847"><a href="/encoding/gob/encode.go.html#5913564">srt</a></span><span class="op" id="5913850">.</span><span class="ident" id="5913851">Field</span><span class="op" id="5913856">(</span><span class="ident" id="5913857"><a href="/encoding/gob/encode.go.html#5913767">fieldNum</a></span><span class="op" id="5913865">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913870">if</span>&nbsp;<span class="op" id="5913873">!</span><span class="ident" id="5913874"><a href="/encoding/gob/type.go.html#5941384">isSent</a></span><span class="op" id="5913880">(</span><span class="op" id="5913881">&amp;</span><span class="ident" id="5913882"><a href="/encoding/gob/encode.go.html#5913842">f</a></span><span class="op" id="5913883">)</span>&nbsp;<span class="op" id="5913885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5913891">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5913903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913908">op</span><span class="op" id="5913910">,</span>&nbsp;<span class="ident" id="5913912">indir</span>&nbsp;<span class="op" id="5913918">:=</span>&nbsp;<span class="ident" id="5913921"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5913929">(</span><span class="ident" id="5913930"><a href="/encoding/gob/encode.go.html#5913842">f</a></span><span class="op" id="5913931">.</span><span class="ident" id="5913932">Type</span><span class="op" id="5913936">,</span>&nbsp;<span class="ident" id="5913938"><a href="/encoding/gob/encode.go.html#5913606">seen</a></span><span class="op" id="5913942">,</span>&nbsp;<span class="ident" id="5913944"><a href="/encoding/gob/encode.go.html#5913521">building</a></span><span class="op" id="5913952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5913957"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5913963">.</span><span class="ident" id="5913964">instr</span>&nbsp;<span class="op" id="5913970">=</span>&nbsp;<span class="builtinfunc" id="5913972">append</span><span class="op" id="5913978">(</span><span class="ident" id="5913979"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5913985">.</span><span class="ident" id="5913986">instr</span><span class="op" id="5913991">,</span>&nbsp;<span class="ident" id="5913993"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5914001">{</span><span class="op" id="5914002">*</span><span class="ident" id="5914003"><a href="/encoding/gob/encode.go.html#5913908">op</a></span><span class="op" id="5914005">,</span>&nbsp;<span class="ident" id="5914007"><a href="/encoding/gob/encode.go.html#5913777">wireFieldNum</a></span><span class="op" id="5914019">,</span>&nbsp;<span class="ident" id="5914021"><a href="/encoding/gob/encode.go.html#5913842">f</a></span><span class="op" id="5914022">.</span><span class="ident" id="5914023">Index</span><span class="op" id="5914028">,</span>&nbsp;<span class="ident" id="5914030"><a href="/encoding/gob/encode.go.html#5913912">indir</a></span><span class="op" id="5914035">}</span><span class="op" id="5914036">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914041"><a href="/encoding/gob/encode.go.html#5913777">wireFieldNum</a></span><span class="op" id="5914053">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914062">if</span>&nbsp;<span class="ident" id="5914065"><a href="/encoding/gob/encode.go.html#5913564">srt</a></span><span class="op" id="5914068">.</span><span class="ident" id="5914069">NumField</span><span class="op" id="5914077">(</span><span class="op" id="5914078">)</span>&nbsp;<span class="op" id="5914080">&gt;</span>&nbsp;<span class="num" id="5914082">0</span>&nbsp;<span class="op" id="5914084">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5914087">len</span><span class="op" id="5914090">(</span><span class="ident" id="5914091"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5914097">.</span><span class="ident" id="5914098">instr</span><span class="op" id="5914103">)</span>&nbsp;<span class="op" id="5914105">==</span>&nbsp;<span class="num" id="5914108">0</span>&nbsp;<span class="op" id="5914110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914115"><a href="/encoding/gob/error.go.html#5924041">errorf</a></span><span class="op" id="5914121">(</span><span class="string" id="5914122">&#34;type&nbsp;%s&nbsp;has&nbsp;no&nbsp;exported&nbsp;fields&#34;</span><span class="op" id="5914154">,</span>&nbsp;<span class="ident" id="5914156"><a href="/encoding/gob/encode.go.html#5913645">rt</a></span><span class="op" id="5914158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914162">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914166"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5914172">.</span><span class="ident" id="5914173">instr</span>&nbsp;<span class="op" id="5914179">=</span>&nbsp;<span class="builtinfunc" id="5914181">append</span><span class="op" id="5914187">(</span><span class="ident" id="5914188"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5914194">.</span><span class="ident" id="5914195">instr</span><span class="op" id="5914200">,</span>&nbsp;<span class="ident" id="5914202"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5914210">{</span><span class="ident" id="5914211"><a href="/encoding/gob/encode.go.html#5902440">encStructTerminator</a></span><span class="op" id="5914230">,</span>&nbsp;<span class="num" id="5914232">0</span><span class="op" id="5914233">,</span>&nbsp;<span class="ident" id="5914235">nil</span><span class="op" id="5914238">,</span>&nbsp;<span class="num" id="5914240">0</span><span class="op" id="5914241">}</span><span class="op" id="5914242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914245">}</span>&nbsp;<span class="keyword" id="5914247">else</span>&nbsp;<span class="op" id="5914252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914256"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5914262">.</span><span class="ident" id="5914263">instr</span>&nbsp;<span class="op" id="5914269">=</span>&nbsp;<span class="builtinfunc" id="5914271">make</span><span class="op" id="5914275">(</span><span class="op" id="5914276">[</span><span class="op" id="5914277">]</span><span class="ident" id="5914278"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5914286">,</span>&nbsp;<span class="num" id="5914288">1</span><span class="op" id="5914289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914293">op</span><span class="op" id="5914295">,</span>&nbsp;<span class="ident" id="5914297">indir</span>&nbsp;<span class="op" id="5914303">:=</span>&nbsp;<span class="ident" id="5914306"><a href="/encoding/gob/encode.go.html#5909852">encOpFor</a></span><span class="op" id="5914314">(</span><span class="ident" id="5914315"><a href="/encoding/gob/encode.go.html#5913645">rt</a></span><span class="op" id="5914317">,</span>&nbsp;<span class="ident" id="5914319"><a href="/encoding/gob/encode.go.html#5913606">seen</a></span><span class="op" id="5914323">,</span>&nbsp;<span class="ident" id="5914325"><a href="/encoding/gob/encode.go.html#5913521">building</a></span><span class="op" id="5914333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914337"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><span class="op" id="5914343">.</span><span class="ident" id="5914344">instr</span><span class="op" id="5914349">[</span><span class="num" id="5914350">0</span><span class="op" id="5914351">]</span>&nbsp;<span class="op" id="5914353">=</span>&nbsp;<span class="ident" id="5914355"><a href="/encoding/gob/encode.go.html#5898507">encInstr</a></span><span class="op" id="5914363">{</span><span class="op" id="5914364">*</span><span class="ident" id="5914365"><a href="/encoding/gob/encode.go.html#5914293">op</a></span><span class="op" id="5914367">,</span>&nbsp;<span class="ident" id="5914369"><a href="/encoding/gob/encode.go.html#5902767">singletonField</a></span><span class="op" id="5914383">,</span>&nbsp;<span class="ident" id="5914385">nil</span><span class="op" id="5914388">,</span>&nbsp;<span class="ident" id="5914390"><a href="/encoding/gob/encode.go.html#5914297">indir</a></span><span class="op" id="5914395">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914401">return</span>&nbsp;<span class="ident" id="5914408"><a href="/encoding/gob/encode.go.html#5913580">engine</a></span><br>
<span class="lineno"></span><span class="op" id="5914415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5914418">//&nbsp;getEncEngine&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno">650</span><span class="keyword" id="5914474">func</span>&nbsp;<span class="ident" id="5914479">getEncEngine</span><span class="op" id="5914491">(</span><span class="ident" id="5914492">ut</span>&nbsp;<span class="op" id="5914495">*</span><span class="ident" id="5914496"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5914508">,</span>&nbsp;<span class="ident" id="5914510">building</span>&nbsp;<span class="keyword" id="5914519">map</span><span class="op" id="5914522">[</span><span class="op" id="5914523">*</span><span class="ident" id="5914524"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5914532">]</span><span class="builtintype" id="5914533">bool</span><span class="op" id="5914537">)</span>&nbsp;<span class="op" id="5914539">*</span><span class="ident" id="5914540"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span>&nbsp;<span class="op" id="5914550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914553">info</span><span class="op" id="5914557">,</span>&nbsp;<span class="ident" id="5914559">err</span>&nbsp;<span class="op" id="5914563">:=</span>&nbsp;<span class="ident" id="5914566"><a href="/encoding/gob/type.go.html#5945303">getTypeInfo</a></span><span class="op" id="5914577">(</span><span class="ident" id="5914578"><a href="/encoding/gob/encode.go.html#5914492">ut</a></span><span class="op" id="5914580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914583">if</span>&nbsp;<span class="ident" id="5914586"><a href="/encoding/gob/encode.go.html#5914559">err</a></span>&nbsp;<span class="op" id="5914590">!=</span>&nbsp;<span class="ident" id="5914593">nil</span>&nbsp;<span class="op" id="5914597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914601"><a href="/encoding/gob/error.go.html#5924211">error_</a></span><span class="op" id="5914607">(</span><span class="ident" id="5914608"><a href="/encoding/gob/encode.go.html#5914559">err</a></span><span class="op" id="5914611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914614">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914617">enc</span><span class="op" id="5914620">,</span>&nbsp;<span class="ident" id="5914622">ok</span>&nbsp;<span class="op" id="5914625">:=</span>&nbsp;<span class="ident" id="5914628"><a href="/encoding/gob/encode.go.html#5914553">info</a></span><span class="op" id="5914632">.</span><span class="ident" id="5914633">encoder</span><span class="op" id="5914640">.</span><span class="ident" id="5914641">Load</span><span class="op" id="5914645">(</span><span class="op" id="5914646">)</span><span class="op" id="5914647">.</span><span class="op" id="5914648">(</span><span class="op" id="5914649">*</span><span class="ident" id="5914650"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5914659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914662">if</span>&nbsp;<span class="op" id="5914665">!</span><span class="ident" id="5914666"><a href="/encoding/gob/encode.go.html#5914622">ok</a></span>&nbsp;<span class="op" id="5914669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914673"><a href="/encoding/gob/encode.go.html#5914617">enc</a></span>&nbsp;<span class="op" id="5914677">=</span>&nbsp;<span class="ident" id="5914679"><a href="/encoding/gob/encode.go.html#5914737">buildEncEngine</a></span><span class="op" id="5914693">(</span><span class="ident" id="5914694"><a href="/encoding/gob/encode.go.html#5914553">info</a></span><span class="op" id="5914698">,</span>&nbsp;<span class="ident" id="5914700"><a href="/encoding/gob/encode.go.html#5914492">ut</a></span><span class="op" id="5914702">,</span>&nbsp;<span class="ident" id="5914704"><a href="/encoding/gob/encode.go.html#5914510">building</a></span><span class="op" id="5914712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914718">return</span>&nbsp;<span class="ident" id="5914725"><a href="/encoding/gob/encode.go.html#5914617">enc</a></span><br>
<span class="lineno">660</span><span class="op" id="5914729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5914732">func</span>&nbsp;<span class="ident" id="5914737">buildEncEngine</span><span class="op" id="5914751">(</span><span class="ident" id="5914752">info</span>&nbsp;<span class="op" id="5914757">*</span><span class="ident" id="5914758"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5914766">,</span>&nbsp;<span class="ident" id="5914768">ut</span>&nbsp;<span class="op" id="5914771">*</span><span class="ident" id="5914772"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5914784">,</span>&nbsp;<span class="ident" id="5914786">building</span>&nbsp;<span class="keyword" id="5914795">map</span><span class="op" id="5914798">[</span><span class="op" id="5914799">*</span><span class="ident" id="5914800"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5914808">]</span><span class="builtintype" id="5914809">bool</span><span class="op" id="5914813">)</span>&nbsp;<span class="op" id="5914815">*</span><span class="ident" id="5914816"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span>&nbsp;<span class="op" id="5914826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5914829">//&nbsp;Check&nbsp;for&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914860">if</span>&nbsp;<span class="ident" id="5914863"><a href="/encoding/gob/encode.go.html#5914786">building</a></span>&nbsp;<span class="op" id="5914872">!=</span>&nbsp;<span class="ident" id="5914875">nil</span>&nbsp;<span class="op" id="5914879">&amp;&amp;</span>&nbsp;<span class="ident" id="5914882"><a href="/encoding/gob/encode.go.html#5914786">building</a></span><span class="op" id="5914890">[</span><span class="ident" id="5914891"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5914895">]</span>&nbsp;<span class="op" id="5914897">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914901">return</span>&nbsp;<span class="ident" id="5914908">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5914913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914916"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5914920">.</span><span class="ident" id="5914921">encInit</span><span class="op" id="5914928">.</span><span class="ident" id="5914929">Lock</span><span class="op" id="5914933">(</span><span class="op" id="5914934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5914937">defer</span>&nbsp;<span class="ident" id="5914943"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5914947">.</span><span class="ident" id="5914948">encInit</span><span class="op" id="5914955">.</span><span class="ident" id="5914956">Unlock</span><span class="op" id="5914962">(</span><span class="op" id="5914963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5914966">enc</span><span class="op" id="5914969">,</span>&nbsp;<span class="ident" id="5914971">ok</span>&nbsp;<span class="op" id="5914974">:=</span>&nbsp;<span class="ident" id="5914977"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5914981">.</span><span class="ident" id="5914982">encoder</span><span class="op" id="5914989">.</span><span class="ident" id="5914990">Load</span><span class="op" id="5914994">(</span><span class="op" id="5914995">)</span><span class="op" id="5914996">.</span><span class="op" id="5914997">(</span><span class="op" id="5914998">*</span><span class="ident" id="5914999"><a href="/encoding/gob/encode.go.html#5902721">encEngine</a></span><span class="op" id="5915008">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915011">if</span>&nbsp;<span class="op" id="5915014">!</span><span class="ident" id="5915015"><a href="/encoding/gob/encode.go.html#5914971">ok</a></span>&nbsp;<span class="op" id="5915018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915022">if</span>&nbsp;<span class="ident" id="5915025"><a href="/encoding/gob/encode.go.html#5914786">building</a></span>&nbsp;<span class="op" id="5915034">==</span>&nbsp;<span class="ident" id="5915037">nil</span>&nbsp;<span class="op" id="5915041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915046"><a href="/encoding/gob/encode.go.html#5914786">building</a></span>&nbsp;<span class="op" id="5915055">=</span>&nbsp;<span class="builtinfunc" id="5915057">make</span><span class="op" id="5915061">(</span><span class="keyword" id="5915062">map</span><span class="op" id="5915065">[</span><span class="op" id="5915066">*</span><span class="ident" id="5915067"><a href="/encoding/gob/type.go.html#5944633">typeInfo</a></span><span class="op" id="5915075">]</span><span class="builtintype" id="5915076">bool</span><span class="op" id="5915080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915088"><a href="/encoding/gob/encode.go.html#5914786">building</a></span><span class="op" id="5915096">[</span><span class="ident" id="5915097"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5915101">]</span>&nbsp;<span class="op" id="5915103">=</span>&nbsp;<span class="builtintype" id="5915105">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915112"><a href="/encoding/gob/encode.go.html#5914966">enc</a></span>&nbsp;<span class="op" id="5915116">=</span>&nbsp;<span class="ident" id="5915118"><a href="/encoding/gob/encode.go.html#5913492">compileEnc</a></span><span class="op" id="5915128">(</span><span class="ident" id="5915129"><a href="/encoding/gob/encode.go.html#5914768">ut</a></span><span class="op" id="5915131">,</span>&nbsp;<span class="ident" id="5915133"><a href="/encoding/gob/encode.go.html#5914786">building</a></span><span class="op" id="5915141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915145"><a href="/encoding/gob/encode.go.html#5914752">info</a></span><span class="op" id="5915149">.</span><span class="ident" id="5915150">encoder</span><span class="op" id="5915157">.</span><span class="ident" id="5915158">Store</span><span class="op" id="5915163">(</span><span class="ident" id="5915164"><a href="/encoding/gob/encode.go.html#5914966">enc</a></span><span class="op" id="5915167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915173">return</span>&nbsp;<span class="ident" id="5915180"><a href="/encoding/gob/encode.go.html#5914966">enc</a></span><br>
<span class="lineno"></span><span class="op" id="5915184">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5915187">func</span>&nbsp;<span class="op" id="5915192">(</span><span class="ident" id="5915193">enc</span>&nbsp;<span class="op" id="5915197">*</span><span class="ident" id="5915198"><a href="/encoding/gob/encoder.go.html#5915950">Encoder</a></span><span class="op" id="5915205">)</span>&nbsp;<span class="ident" id="5915207">encode</span><span class="op" id="5915213">(</span><span class="ident" id="5915214">b</span>&nbsp;<span class="op" id="5915216">*</span><span class="ident" id="5915217"><a href="/encoding/gob/encode.go.html#5896537">encBuffer</a></span><span class="op" id="5915226">,</span>&nbsp;<span class="ident" id="5915228">value</span>&nbsp;<span class="ident" id="5915234"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5915241">.</span><span class="ident" id="5915242">Value</span><span class="op" id="5915247">,</span>&nbsp;<span class="ident" id="5915249">ut</span>&nbsp;<span class="op" id="5915252">*</span><span class="ident" id="5915253"><a href="/encoding/gob/type.go.html#5925033">userTypeInfo</a></span><span class="op" id="5915265">)</span>&nbsp;<span class="op" id="5915267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915270">defer</span>&nbsp;<span class="ident" id="5915276"><a href="/encoding/gob/error.go.html#5924439">catchError</a></span><span class="op" id="5915286">(</span><span class="op" id="5915287">&amp;</span><span class="ident" id="5915288"><a href="/encoding/gob/encode.go.html#5915193">enc</a></span><span class="op" id="5915291">.</span><span class="ident" id="5915292">err</span><span class="op" id="5915295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915298">engine</span>&nbsp;<span class="op" id="5915305">:=</span>&nbsp;<span class="ident" id="5915308"><a href="/encoding/gob/encode.go.html#5914479">getEncEngine</a></span><span class="op" id="5915320">(</span><span class="ident" id="5915321"><a href="/encoding/gob/encode.go.html#5915249">ut</a></span><span class="op" id="5915323">,</span>&nbsp;<span class="ident" id="5915325">nil</span><span class="op" id="5915328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915331">indir</span>&nbsp;<span class="op" id="5915337">:=</span>&nbsp;<span class="ident" id="5915340"><a href="/encoding/gob/encode.go.html#5915249">ut</a></span><span class="op" id="5915342">.</span><span class="ident" id="5915343">indir</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915350">if</span>&nbsp;<span class="ident" id="5915353"><a href="/encoding/gob/encode.go.html#5915249">ut</a></span><span class="op" id="5915355">.</span><span class="ident" id="5915356">externalEnc</span>&nbsp;<span class="op" id="5915368">!=</span>&nbsp;<span class="num" id="5915371">0</span>&nbsp;<span class="op" id="5915373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915377"><a href="/encoding/gob/encode.go.html#5915331">indir</a></span>&nbsp;<span class="op" id="5915383">=</span>&nbsp;<span class="builtintype" id="5915385">int</span><span class="op" id="5915388">(</span><span class="ident" id="5915389"><a href="/encoding/gob/encode.go.html#5915249">ut</a></span><span class="op" id="5915391">.</span><span class="ident" id="5915392">encIndir</span><span class="op" id="5915400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915403">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915406">for</span>&nbsp;<span class="ident" id="5915410">i</span>&nbsp;<span class="op" id="5915412">:=</span>&nbsp;<span class="num" id="5915415">0</span><span class="op" id="5915416">;</span>&nbsp;<span class="ident" id="5915418"><a href="/encoding/gob/encode.go.html#5915410">i</a></span>&nbsp;<span class="op" id="5915420">&lt;</span>&nbsp;<span class="ident" id="5915422"><a href="/encoding/gob/encode.go.html#5915331">indir</a></span><span class="op" id="5915427">;</span>&nbsp;<span class="ident" id="5915429"><a href="/encoding/gob/encode.go.html#5915410">i</a></span><span class="op" id="5915430">++</span>&nbsp;<span class="op" id="5915433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915437"><a href="/encoding/gob/encode.go.html#5915228">value</a></span>&nbsp;<span class="op" id="5915443">=</span>&nbsp;<span class="ident" id="5915445"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5915452">.</span><span class="ident" id="5915453">Indirect</span><span class="op" id="5915461">(</span><span class="ident" id="5915462"><a href="/encoding/gob/encode.go.html#5915228">value</a></span><span class="op" id="5915467">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5915473">if</span>&nbsp;<span class="ident" id="5915476"><a href="/encoding/gob/encode.go.html#5915249">ut</a></span><span class="op" id="5915478">.</span><span class="ident" id="5915479">externalEnc</span>&nbsp;<span class="op" id="5915491">==</span>&nbsp;<span class="num" id="5915494">0</span>&nbsp;<span class="op" id="5915496">&amp;&amp;</span>&nbsp;<span class="ident" id="5915499"><a href="/encoding/gob/encode.go.html#5915228">value</a></span><span class="op" id="5915504">.</span><span class="ident" id="5915505">Type</span><span class="op" id="5915509">(</span><span class="op" id="5915510">)</span><span class="op" id="5915511">.</span><span class="ident" id="5915512">Kind</span><span class="op" id="5915516">(</span><span class="op" id="5915517">)</span>&nbsp;<span class="op" id="5915519">==</span>&nbsp;<span class="ident" id="5915522"><a href="/encoding/gob/encode.go.html#5895637">reflect</a></span><span class="op" id="5915529">.</span><span class="ident" id="5915530">Struct</span>&nbsp;<span class="op" id="5915537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915541"><a href="/encoding/gob/encode.go.html#5915193">enc</a></span><span class="op" id="5915544">.</span><span class="ident" id="5915545">encodeStruct</span><span class="op" id="5915557">(</span><span class="ident" id="5915558"><a href="/encoding/gob/encode.go.html#5915214">b</a></span><span class="op" id="5915559">,</span>&nbsp;<span class="ident" id="5915561"><a href="/encoding/gob/encode.go.html#5915298">engine</a></span><span class="op" id="5915567">,</span>&nbsp;<span class="ident" id="5915569"><a href="/encoding/gob/encode.go.html#5915228">value</a></span><span class="op" id="5915574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915577">}</span>&nbsp;<span class="keyword" id="5915579">else</span>&nbsp;<span class="op" id="5915584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5915588"><a href="/encoding/gob/encode.go.html#5915193">enc</a></span><span class="op" id="5915591">.</span><span class="ident" id="5915592">encodeSingle</span><span class="op" id="5915604">(</span><span class="ident" id="5915605"><a href="/encoding/gob/encode.go.html#5915214">b</a></span><span class="op" id="5915606">,</span>&nbsp;<span class="ident" id="5915608"><a href="/encoding/gob/encode.go.html#5915298">engine</a></span><span class="op" id="5915614">,</span>&nbsp;<span class="ident" id="5915616"><a href="/encoding/gob/encode.go.html#5915228">value</a></span><span class="op" id="5915621">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5915624">}</span><br>
<span class="lineno"></span><span class="op" id="5915626">}</span>
</div>
</body>
</html>
