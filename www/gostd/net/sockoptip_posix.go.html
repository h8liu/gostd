<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3254842">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3254898">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3254952">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3255003">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3255068">package</span>&nbsp;<span class="ident" id="3255076">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3255081">import</span>&nbsp;<span class="op" id="3255088">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3255091">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3255097">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3255107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3255110">func</span>&nbsp;<span class="ident" id="3255115">joinIPv4Group</span><span class="op" id="3255128">(</span><span class="ident" id="3255129">fd</span>&nbsp;<span class="op" id="3255132">*</span><span class="ident" id="3255133">netFD</span><span class="op" id="3255138">,</span>&nbsp;<span class="ident" id="3255140">ifi</span>&nbsp;<span class="op" id="3255144">*</span><span class="ident" id="3255145">Interface</span><span class="op" id="3255154">,</span>&nbsp;<span class="ident" id="3255156">ip</span>&nbsp;<span class="ident" id="3255159">IP</span><span class="op" id="3255161">)</span>&nbsp;<span class="builtintype" id="3255163">error</span>&nbsp;<span class="op" id="3255169">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255172">mreq</span>&nbsp;<span class="op" id="3255177">:=</span>&nbsp;<span class="op" id="3255180">&amp;</span><span class="ident" id="3255181">syscall</span><span class="op" id="3255188">.</span><span class="ident" id="3255189">IPMreq</span><span class="op" id="3255195">{</span><span class="ident" id="3255196">Multiaddr</span><span class="op" id="3255205">:</span>&nbsp;<span class="op" id="3255207">[</span><span class="num" id="3255208">4</span><span class="op" id="3255209">]</span><span class="builtintype" id="3255210">byte</span><span class="op" id="3255214">{</span><span class="ident" id="3255215">ip</span><span class="op" id="3255217">[</span><span class="num" id="3255218">0</span><span class="op" id="3255219">]</span><span class="op" id="3255220">,</span>&nbsp;<span class="ident" id="3255222">ip</span><span class="op" id="3255224">[</span><span class="num" id="3255225">1</span><span class="op" id="3255226">]</span><span class="op" id="3255227">,</span>&nbsp;<span class="ident" id="3255229">ip</span><span class="op" id="3255231">[</span><span class="num" id="3255232">2</span><span class="op" id="3255233">]</span><span class="op" id="3255234">,</span>&nbsp;<span class="ident" id="3255236">ip</span><span class="op" id="3255238">[</span><span class="num" id="3255239">3</span><span class="op" id="3255240">]</span><span class="op" id="3255241">}</span><span class="op" id="3255242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255245">if</span>&nbsp;<span class="ident" id="3255248">err</span>&nbsp;<span class="op" id="3255252">:=</span>&nbsp;<span class="ident" id="3255255">setIPv4MreqToInterface</span><span class="op" id="3255277">(</span><span class="ident" id="3255278">mreq</span><span class="op" id="3255282">,</span>&nbsp;<span class="ident" id="3255284">ifi</span><span class="op" id="3255287">)</span><span class="op" id="3255288">;</span>&nbsp;<span class="ident" id="3255290">err</span>&nbsp;<span class="op" id="3255294">!=</span>&nbsp;<span class="ident" id="3255297">nil</span>&nbsp;<span class="op" id="3255301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255305">return</span>&nbsp;<span class="ident" id="3255312">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255320">if</span>&nbsp;<span class="ident" id="3255323">err</span>&nbsp;<span class="op" id="3255327">:=</span>&nbsp;<span class="ident" id="3255330">fd</span><span class="op" id="3255332">.</span><span class="ident" id="3255333">incref</span><span class="op" id="3255339">(</span><span class="op" id="3255340">)</span><span class="op" id="3255341">;</span>&nbsp;<span class="ident" id="3255343">err</span>&nbsp;<span class="op" id="3255347">!=</span>&nbsp;<span class="ident" id="3255350">nil</span>&nbsp;<span class="op" id="3255354">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255358">return</span>&nbsp;<span class="ident" id="3255365">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255373">defer</span>&nbsp;<span class="ident" id="3255379">fd</span><span class="op" id="3255381">.</span><span class="ident" id="3255382">decref</span><span class="op" id="3255388">(</span><span class="op" id="3255389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255392">return</span>&nbsp;<span class="ident" id="3255399">os</span><span class="op" id="3255401">.</span><span class="ident" id="3255402">NewSyscallError</span><span class="op" id="3255417">(</span><span class="string" id="3255418">&#34;setsockopt&#34;</span><span class="op" id="3255430">,</span>&nbsp;<span class="ident" id="3255432">syscall</span><span class="op" id="3255439">.</span><span class="ident" id="3255440">SetsockoptIPMreq</span><span class="op" id="3255456">(</span><span class="ident" id="3255457">fd</span><span class="op" id="3255459">.</span><span class="ident" id="3255460">sysfd</span><span class="op" id="3255465">,</span>&nbsp;<span class="ident" id="3255467">syscall</span><span class="op" id="3255474">.</span><span class="ident" id="3255475">IPPROTO_IP</span><span class="op" id="3255485">,</span>&nbsp;<span class="ident" id="3255487">syscall</span><span class="op" id="3255494">.</span><span class="ident" id="3255495">IP_ADD_MEMBERSHIP</span><span class="op" id="3255512">,</span>&nbsp;<span class="ident" id="3255514">mreq</span><span class="op" id="3255518">)</span><span class="op" id="3255519">)</span><br>
<span class="lineno"></span><span class="op" id="3255521">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3255524">func</span>&nbsp;<span class="ident" id="3255529">setIPv6MulticastInterface</span><span class="op" id="3255554">(</span><span class="ident" id="3255555">fd</span>&nbsp;<span class="op" id="3255558">*</span><span class="ident" id="3255559">netFD</span><span class="op" id="3255564">,</span>&nbsp;<span class="ident" id="3255566">ifi</span>&nbsp;<span class="op" id="3255570">*</span><span class="ident" id="3255571">Interface</span><span class="op" id="3255580">)</span>&nbsp;<span class="builtintype" id="3255582">error</span>&nbsp;<span class="op" id="3255588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255591">var</span>&nbsp;<span class="ident" id="3255595">v</span>&nbsp;<span class="builtintype" id="3255597">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255602">if</span>&nbsp;<span class="ident" id="3255605">ifi</span>&nbsp;<span class="op" id="3255609">!=</span>&nbsp;<span class="ident" id="3255612">nil</span>&nbsp;<span class="op" id="3255616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3255620">v</span>&nbsp;<span class="op" id="3255622">=</span>&nbsp;<span class="ident" id="3255624">ifi</span><span class="op" id="3255627">.</span><span class="ident" id="3255628">Index</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255638">if</span>&nbsp;<span class="ident" id="3255641">err</span>&nbsp;<span class="op" id="3255645">:=</span>&nbsp;<span class="ident" id="3255648">fd</span><span class="op" id="3255650">.</span><span class="ident" id="3255651">incref</span><span class="op" id="3255657">(</span><span class="op" id="3255658">)</span><span class="op" id="3255659">;</span>&nbsp;<span class="ident" id="3255661">err</span>&nbsp;<span class="op" id="3255665">!=</span>&nbsp;<span class="ident" id="3255668">nil</span>&nbsp;<span class="op" id="3255672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255676">return</span>&nbsp;<span class="ident" id="3255683">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255691">defer</span>&nbsp;<span class="ident" id="3255697">fd</span><span class="op" id="3255699">.</span><span class="ident" id="3255700">decref</span><span class="op" id="3255706">(</span><span class="op" id="3255707">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255710">return</span>&nbsp;<span class="ident" id="3255717">os</span><span class="op" id="3255719">.</span><span class="ident" id="3255720">NewSyscallError</span><span class="op" id="3255735">(</span><span class="string" id="3255736">&#34;setsockopt&#34;</span><span class="op" id="3255748">,</span>&nbsp;<span class="ident" id="3255750">syscall</span><span class="op" id="3255757">.</span><span class="ident" id="3255758">SetsockoptInt</span><span class="op" id="3255771">(</span><span class="ident" id="3255772">fd</span><span class="op" id="3255774">.</span><span class="ident" id="3255775">sysfd</span><span class="op" id="3255780">,</span>&nbsp;<span class="ident" id="3255782">syscall</span><span class="op" id="3255789">.</span><span class="ident" id="3255790">IPPROTO_IPV6</span><span class="op" id="3255802">,</span>&nbsp;<span class="ident" id="3255804">syscall</span><span class="op" id="3255811">.</span><span class="ident" id="3255812">IPV6_MULTICAST_IF</span><span class="op" id="3255829">,</span>&nbsp;<span class="ident" id="3255831">v</span><span class="op" id="3255832">)</span><span class="op" id="3255833">)</span><br>
<span class="lineno"></span><span class="op" id="3255835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3255838">func</span>&nbsp;<span class="ident" id="3255843">setIPv6MulticastLoopback</span><span class="op" id="3255867">(</span><span class="ident" id="3255868">fd</span>&nbsp;<span class="op" id="3255871">*</span><span class="ident" id="3255872">netFD</span><span class="op" id="3255877">,</span>&nbsp;<span class="ident" id="3255879">v</span>&nbsp;<span class="builtintype" id="3255881">bool</span><span class="op" id="3255885">)</span>&nbsp;<span class="builtintype" id="3255887">error</span>&nbsp;<span class="op" id="3255893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255896">if</span>&nbsp;<span class="ident" id="3255899">err</span>&nbsp;<span class="op" id="3255903">:=</span>&nbsp;<span class="ident" id="3255906">fd</span><span class="op" id="3255908">.</span><span class="ident" id="3255909">incref</span><span class="op" id="3255915">(</span><span class="op" id="3255916">)</span><span class="op" id="3255917">;</span>&nbsp;<span class="ident" id="3255919">err</span>&nbsp;<span class="op" id="3255923">!=</span>&nbsp;<span class="ident" id="3255926">nil</span>&nbsp;<span class="op" id="3255930">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255934">return</span>&nbsp;<span class="ident" id="3255941">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3255946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255949">defer</span>&nbsp;<span class="ident" id="3255955">fd</span><span class="op" id="3255957">.</span><span class="ident" id="3255958">decref</span><span class="op" id="3255964">(</span><span class="op" id="3255965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3255968">return</span>&nbsp;<span class="ident" id="3255975">os</span><span class="op" id="3255977">.</span><span class="ident" id="3255978">NewSyscallError</span><span class="op" id="3255993">(</span><span class="string" id="3255994">&#34;setsockopt&#34;</span><span class="op" id="3256006">,</span>&nbsp;<span class="ident" id="3256008">syscall</span><span class="op" id="3256015">.</span><span class="ident" id="3256016">SetsockoptInt</span><span class="op" id="3256029">(</span><span class="ident" id="3256030">fd</span><span class="op" id="3256032">.</span><span class="ident" id="3256033">sysfd</span><span class="op" id="3256038">,</span>&nbsp;<span class="ident" id="3256040">syscall</span><span class="op" id="3256047">.</span><span class="ident" id="3256048">IPPROTO_IPV6</span><span class="op" id="3256060">,</span>&nbsp;<span class="ident" id="3256062">syscall</span><span class="op" id="3256069">.</span><span class="ident" id="3256070">IPV6_MULTICAST_LOOP</span><span class="op" id="3256089">,</span>&nbsp;<span class="ident" id="3256091">boolint</span><span class="op" id="3256098">(</span><span class="ident" id="3256099">v</span><span class="op" id="3256100">)</span><span class="op" id="3256101">)</span><span class="op" id="3256102">)</span><br>
<span class="lineno"></span><span class="op" id="3256104">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3256107">func</span>&nbsp;<span class="ident" id="3256112">joinIPv6Group</span><span class="op" id="3256125">(</span><span class="ident" id="3256126">fd</span>&nbsp;<span class="op" id="3256129">*</span><span class="ident" id="3256130">netFD</span><span class="op" id="3256135">,</span>&nbsp;<span class="ident" id="3256137">ifi</span>&nbsp;<span class="op" id="3256141">*</span><span class="ident" id="3256142">Interface</span><span class="op" id="3256151">,</span>&nbsp;<span class="ident" id="3256153">ip</span>&nbsp;<span class="ident" id="3256156">IP</span><span class="op" id="3256158">)</span>&nbsp;<span class="builtintype" id="3256160">error</span>&nbsp;<span class="op" id="3256166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256169">mreq</span>&nbsp;<span class="op" id="3256174">:=</span>&nbsp;<span class="op" id="3256177">&amp;</span><span class="ident" id="3256178">syscall</span><span class="op" id="3256185">.</span><span class="ident" id="3256186">IPv6Mreq</span><span class="op" id="3256194">{</span><span class="op" id="3256195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3256198">copy</span><span class="op" id="3256202">(</span><span class="ident" id="3256203">mreq</span><span class="op" id="3256207">.</span><span class="ident" id="3256208">Multiaddr</span><span class="op" id="3256217">[</span><span class="op" id="3256218">:</span><span class="op" id="3256219">]</span><span class="op" id="3256220">,</span>&nbsp;<span class="ident" id="3256222">ip</span><span class="op" id="3256224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256227">if</span>&nbsp;<span class="ident" id="3256230">ifi</span>&nbsp;<span class="op" id="3256234">!=</span>&nbsp;<span class="ident" id="3256237">nil</span>&nbsp;<span class="op" id="3256241">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3256245">mreq</span><span class="op" id="3256249">.</span><span class="ident" id="3256250">Interface</span>&nbsp;<span class="op" id="3256260">=</span>&nbsp;<span class="builtintype" id="3256262">uint32</span><span class="op" id="3256268">(</span><span class="ident" id="3256269">ifi</span><span class="op" id="3256272">.</span><span class="ident" id="3256273">Index</span><span class="op" id="3256278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256284">if</span>&nbsp;<span class="ident" id="3256287">err</span>&nbsp;<span class="op" id="3256291">:=</span>&nbsp;<span class="ident" id="3256294">fd</span><span class="op" id="3256296">.</span><span class="ident" id="3256297">incref</span><span class="op" id="3256303">(</span><span class="op" id="3256304">)</span><span class="op" id="3256305">;</span>&nbsp;<span class="ident" id="3256307">err</span>&nbsp;<span class="op" id="3256311">!=</span>&nbsp;<span class="ident" id="3256314">nil</span>&nbsp;<span class="op" id="3256318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256322">return</span>&nbsp;<span class="ident" id="3256329">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3256334">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256337">defer</span>&nbsp;<span class="ident" id="3256343">fd</span><span class="op" id="3256345">.</span><span class="ident" id="3256346">decref</span><span class="op" id="3256352">(</span><span class="op" id="3256353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3256356">return</span>&nbsp;<span class="ident" id="3256363">os</span><span class="op" id="3256365">.</span><span class="ident" id="3256366">NewSyscallError</span><span class="op" id="3256381">(</span><span class="string" id="3256382">&#34;setsockopt&#34;</span><span class="op" id="3256394">,</span>&nbsp;<span class="ident" id="3256396">syscall</span><span class="op" id="3256403">.</span><span class="ident" id="3256404">SetsockoptIPv6Mreq</span><span class="op" id="3256422">(</span><span class="ident" id="3256423">fd</span><span class="op" id="3256425">.</span><span class="ident" id="3256426">sysfd</span><span class="op" id="3256431">,</span>&nbsp;<span class="ident" id="3256433">syscall</span><span class="op" id="3256440">.</span><span class="ident" id="3256441">IPPROTO_IPV6</span><span class="op" id="3256453">,</span>&nbsp;<span class="ident" id="3256455">syscall</span><span class="op" id="3256462">.</span><span class="ident" id="3256463">IPV6_JOIN_GROUP</span><span class="op" id="3256478">,</span>&nbsp;<span class="ident" id="3256480">mreq</span><span class="op" id="3256484">)</span><span class="op" id="3256485">)</span><br>
<span class="lineno"></span><span class="op" id="3256487">}</span>
</div>
</body>
</html>
