<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5340267">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5340323">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5340377">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5340428">package</span>&nbsp;<span class="ident" id="5340436">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5340442">import</span>&nbsp;<span class="string" id="5340449">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5340458">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="5340510">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="5340552">func</span>&nbsp;<span class="ident" id="5340557">Compact</span><span class="op" id="5340564">(</span><span class="ident" id="5340565">dst</span>&nbsp;<span class="op" id="5340569">*</span><span class="ident" id="5340570">bytes</span><span class="op" id="5340575">.</span><span class="ident" id="5340576">Buffer</span><span class="op" id="5340582">,</span>&nbsp;<span class="ident" id="5340584">src</span>&nbsp;<span class="op" id="5340588">[</span><span class="op" id="5340589">]</span><span class="builtintype" id="5340590">byte</span><span class="op" id="5340594">)</span>&nbsp;<span class="builtintype" id="5340596">error</span>&nbsp;<span class="op" id="5340602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340605">return</span>&nbsp;<span class="ident" id="5340612">compact</span><span class="op" id="5340619">(</span><span class="ident" id="5340620">dst</span><span class="op" id="5340623">,</span>&nbsp;<span class="ident" id="5340625">src</span><span class="op" id="5340628">,</span>&nbsp;<span class="builtintype" id="5340630">false</span><span class="op" id="5340635">)</span><br>
<span class="lineno"></span><span class="op" id="5340637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5340640">func</span>&nbsp;<span class="ident" id="5340645">compact</span><span class="op" id="5340652">(</span><span class="ident" id="5340653">dst</span>&nbsp;<span class="op" id="5340657">*</span><span class="ident" id="5340658">bytes</span><span class="op" id="5340663">.</span><span class="ident" id="5340664">Buffer</span><span class="op" id="5340670">,</span>&nbsp;<span class="ident" id="5340672">src</span>&nbsp;<span class="op" id="5340676">[</span><span class="op" id="5340677">]</span><span class="builtintype" id="5340678">byte</span><span class="op" id="5340682">,</span>&nbsp;<span class="ident" id="5340684">escape</span>&nbsp;<span class="builtintype" id="5340691">bool</span><span class="op" id="5340695">)</span>&nbsp;<span class="builtintype" id="5340697">error</span>&nbsp;<span class="op" id="5340703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340706">origLen</span>&nbsp;<span class="op" id="5340714">:=</span>&nbsp;<span class="ident" id="5340717">dst</span><span class="op" id="5340720">.</span><span class="ident" id="5340721">Len</span><span class="op" id="5340724">(</span><span class="op" id="5340725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340728">var</span>&nbsp;<span class="ident" id="5340732">scan</span>&nbsp;<span class="ident" id="5340737">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340746">scan</span><span class="op" id="5340750">.</span><span class="ident" id="5340751">reset</span><span class="op" id="5340756">(</span><span class="op" id="5340757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340760">start</span>&nbsp;<span class="op" id="5340766">:=</span>&nbsp;<span class="num" id="5340769">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340772">for</span>&nbsp;<span class="ident" id="5340776">i</span><span class="op" id="5340777">,</span>&nbsp;<span class="ident" id="5340779">c</span>&nbsp;<span class="op" id="5340781">:=</span>&nbsp;<span class="keyword" id="5340784">range</span>&nbsp;<span class="ident" id="5340790">src</span>&nbsp;<span class="op" id="5340794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340798">if</span>&nbsp;<span class="ident" id="5340801">escape</span>&nbsp;<span class="op" id="5340808">&amp;&amp;</span>&nbsp;<span class="op" id="5340811">(</span><span class="ident" id="5340812">c</span>&nbsp;<span class="op" id="5340814">==</span>&nbsp;<span class="string" id="5340817">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="5340821">||</span>&nbsp;<span class="ident" id="5340824">c</span>&nbsp;<span class="op" id="5340826">==</span>&nbsp;<span class="string" id="5340829">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="5340833">||</span>&nbsp;<span class="ident" id="5340836">c</span>&nbsp;<span class="op" id="5340838">==</span>&nbsp;<span class="string" id="5340841">&#39;&amp;&#39;</span><span class="op" id="5340844">)</span>&nbsp;<span class="op" id="5340846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5340851">if</span>&nbsp;<span class="ident" id="5340854">start</span>&nbsp;<span class="op" id="5340860">&lt;</span>&nbsp;<span class="ident" id="5340862">i</span>&nbsp;<span class="op" id="5340864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340870">dst</span><span class="op" id="5340873">.</span><span class="ident" id="5340874">Write</span><span class="op" id="5340879">(</span><span class="ident" id="5340880">src</span><span class="op" id="5340883">[</span><span class="ident" id="5340884">start</span><span class="op" id="5340889">:</span><span class="ident" id="5340890">i</span><span class="op" id="5340891">]</span><span class="op" id="5340892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5340897">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340902">dst</span><span class="op" id="5340905">.</span><span class="ident" id="5340906">WriteString</span><span class="op" id="5340917">(</span><span class="string" id="5340918">`\u00`</span><span class="op" id="5340924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340929">dst</span><span class="op" id="5340932">.</span><span class="ident" id="5340933">WriteByte</span><span class="op" id="5340942">(</span><span class="ident" id="5340943">hex</span><span class="op" id="5340946">[</span><span class="ident" id="5340947">c</span><span class="op" id="5340948">&gt;&gt;</span><span class="num" id="5340950">4</span><span class="op" id="5340951">]</span><span class="op" id="5340952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340957">dst</span><span class="op" id="5340960">.</span><span class="ident" id="5340961">WriteByte</span><span class="op" id="5340970">(</span><span class="ident" id="5340971">hex</span><span class="op" id="5340974">[</span><span class="ident" id="5340975">c</span><span class="op" id="5340976">&amp;</span><span class="num" id="5340977">0xF</span><span class="op" id="5340980">]</span><span class="op" id="5340981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5340986">start</span>&nbsp;<span class="op" id="5340992">=</span>&nbsp;<span class="ident" id="5340994">i</span>&nbsp;<span class="op" id="5340996">+</span>&nbsp;<span class="num" id="5340998">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341002">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5341006">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341062">if</span>&nbsp;<span class="ident" id="5341065">c</span>&nbsp;<span class="op" id="5341067">==</span>&nbsp;<span class="num" id="5341070">0xE2</span>&nbsp;<span class="op" id="5341075">&amp;&amp;</span>&nbsp;<span class="ident" id="5341078">i</span><span class="op" id="5341079">+</span><span class="num" id="5341080">2</span>&nbsp;<span class="op" id="5341082">&lt;</span>&nbsp;<span class="builtinfunc" id="5341084">len</span><span class="op" id="5341087">(</span><span class="ident" id="5341088">src</span><span class="op" id="5341091">)</span>&nbsp;<span class="op" id="5341093">&amp;&amp;</span>&nbsp;<span class="ident" id="5341096">src</span><span class="op" id="5341099">[</span><span class="ident" id="5341100">i</span><span class="op" id="5341101">+</span><span class="num" id="5341102">1</span><span class="op" id="5341103">]</span>&nbsp;<span class="op" id="5341105">==</span>&nbsp;<span class="num" id="5341108">0x80</span>&nbsp;<span class="op" id="5341113">&amp;&amp;</span>&nbsp;<span class="ident" id="5341116">src</span><span class="op" id="5341119">[</span><span class="ident" id="5341120">i</span><span class="op" id="5341121">+</span><span class="num" id="5341122">2</span><span class="op" id="5341123">]</span><span class="op" id="5341124">&amp;^</span><span class="num" id="5341126">1</span>&nbsp;<span class="op" id="5341128">==</span>&nbsp;<span class="num" id="5341131">0xA8</span>&nbsp;<span class="op" id="5341136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341141">if</span>&nbsp;<span class="ident" id="5341144">start</span>&nbsp;<span class="op" id="5341150">&lt;</span>&nbsp;<span class="ident" id="5341152">i</span>&nbsp;<span class="op" id="5341154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341160">dst</span><span class="op" id="5341163">.</span><span class="ident" id="5341164">Write</span><span class="op" id="5341169">(</span><span class="ident" id="5341170">src</span><span class="op" id="5341173">[</span><span class="ident" id="5341174">start</span><span class="op" id="5341179">:</span><span class="ident" id="5341180">i</span><span class="op" id="5341181">]</span><span class="op" id="5341182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341187">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341192">dst</span><span class="op" id="5341195">.</span><span class="ident" id="5341196">WriteString</span><span class="op" id="5341207">(</span><span class="string" id="5341208">`\u202`</span><span class="op" id="5341215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341220">dst</span><span class="op" id="5341223">.</span><span class="ident" id="5341224">WriteByte</span><span class="op" id="5341233">(</span><span class="ident" id="5341234">hex</span><span class="op" id="5341237">[</span><span class="ident" id="5341238">src</span><span class="op" id="5341241">[</span><span class="ident" id="5341242">i</span><span class="op" id="5341243">+</span><span class="num" id="5341244">2</span><span class="op" id="5341245">]</span><span class="op" id="5341246">&amp;</span><span class="num" id="5341247">0xF</span><span class="op" id="5341250">]</span><span class="op" id="5341251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341256">start</span>&nbsp;<span class="op" id="5341262">=</span>&nbsp;<span class="ident" id="5341264">i</span>&nbsp;<span class="op" id="5341266">+</span>&nbsp;<span class="num" id="5341268">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341276">v</span>&nbsp;<span class="op" id="5341278">:=</span>&nbsp;<span class="ident" id="5341281">scan</span><span class="op" id="5341285">.</span><span class="ident" id="5341286">step</span><span class="op" id="5341290">(</span><span class="op" id="5341291">&amp;</span><span class="ident" id="5341292">scan</span><span class="op" id="5341296">,</span>&nbsp;<span class="builtintype" id="5341298">int</span><span class="op" id="5341301">(</span><span class="ident" id="5341302">c</span><span class="op" id="5341303">)</span><span class="op" id="5341304">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341308">if</span>&nbsp;<span class="ident" id="5341311">v</span>&nbsp;<span class="op" id="5341313">&gt;=</span>&nbsp;<span class="ident" id="5341316">scanSkipSpace</span>&nbsp;<span class="op" id="5341330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341335">if</span>&nbsp;<span class="ident" id="5341338">v</span>&nbsp;<span class="op" id="5341340">==</span>&nbsp;<span class="ident" id="5341343">scanError</span>&nbsp;<span class="op" id="5341353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341359">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341373">if</span>&nbsp;<span class="ident" id="5341376">start</span>&nbsp;<span class="op" id="5341382">&lt;</span>&nbsp;<span class="ident" id="5341384">i</span>&nbsp;<span class="op" id="5341386">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341392">dst</span><span class="op" id="5341395">.</span><span class="ident" id="5341396">Write</span><span class="op" id="5341401">(</span><span class="ident" id="5341402">src</span><span class="op" id="5341405">[</span><span class="ident" id="5341406">start</span><span class="op" id="5341411">:</span><span class="ident" id="5341412">i</span><span class="op" id="5341413">]</span><span class="op" id="5341414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341424">start</span>&nbsp;<span class="op" id="5341430">=</span>&nbsp;<span class="ident" id="5341432">i</span>&nbsp;<span class="op" id="5341434">+</span>&nbsp;<span class="num" id="5341436">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341443">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341446">if</span>&nbsp;<span class="ident" id="5341449">scan</span><span class="op" id="5341453">.</span><span class="ident" id="5341454">eof</span><span class="op" id="5341457">(</span><span class="op" id="5341458">)</span>&nbsp;<span class="op" id="5341460">==</span>&nbsp;<span class="ident" id="5341463">scanError</span>&nbsp;<span class="op" id="5341473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341477">dst</span><span class="op" id="5341480">.</span><span class="ident" id="5341481">Truncate</span><span class="op" id="5341489">(</span><span class="ident" id="5341490">origLen</span><span class="op" id="5341497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341501">return</span>&nbsp;<span class="ident" id="5341508">scan</span><span class="op" id="5341512">.</span><span class="ident" id="5341513">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341521">if</span>&nbsp;<span class="ident" id="5341524">start</span>&nbsp;<span class="op" id="5341530">&lt;</span>&nbsp;<span class="builtinfunc" id="5341532">len</span><span class="op" id="5341535">(</span><span class="ident" id="5341536">src</span><span class="op" id="5341539">)</span>&nbsp;<span class="op" id="5341541">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341545">dst</span><span class="op" id="5341548">.</span><span class="ident" id="5341549">Write</span><span class="op" id="5341554">(</span><span class="ident" id="5341555">src</span><span class="op" id="5341558">[</span><span class="ident" id="5341559">start</span><span class="op" id="5341564">:</span><span class="op" id="5341565">]</span><span class="op" id="5341566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341572">return</span>&nbsp;<span class="ident" id="5341579">nil</span><br>
<span class="lineno"></span><span class="op" id="5341583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5341586">func</span>&nbsp;<span class="ident" id="5341591">newline</span><span class="op" id="5341598">(</span><span class="ident" id="5341599">dst</span>&nbsp;<span class="op" id="5341603">*</span><span class="ident" id="5341604">bytes</span><span class="op" id="5341609">.</span><span class="ident" id="5341610">Buffer</span><span class="op" id="5341616">,</span>&nbsp;<span class="ident" id="5341618">prefix</span><span class="op" id="5341624">,</span>&nbsp;<span class="ident" id="5341626">indent</span>&nbsp;<span class="builtintype" id="5341633">string</span><span class="op" id="5341639">,</span>&nbsp;<span class="ident" id="5341641">depth</span>&nbsp;<span class="builtintype" id="5341647">int</span><span class="op" id="5341650">)</span>&nbsp;<span class="op" id="5341652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341655">dst</span><span class="op" id="5341658">.</span><span class="ident" id="5341659">WriteByte</span><span class="op" id="5341668">(</span><span class="string" id="5341669">&#39;\n&#39;</span><span class="op" id="5341673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341676">dst</span><span class="op" id="5341679">.</span><span class="ident" id="5341680">WriteString</span><span class="op" id="5341691">(</span><span class="ident" id="5341692">prefix</span><span class="op" id="5341698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5341701">for</span>&nbsp;<span class="ident" id="5341705">i</span>&nbsp;<span class="op" id="5341707">:=</span>&nbsp;<span class="num" id="5341710">0</span><span class="op" id="5341711">;</span>&nbsp;<span class="ident" id="5341713">i</span>&nbsp;<span class="op" id="5341715">&lt;</span>&nbsp;<span class="ident" id="5341717">depth</span><span class="op" id="5341722">;</span>&nbsp;<span class="ident" id="5341724">i</span><span class="op" id="5341725">++</span>&nbsp;<span class="op" id="5341728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5341732">dst</span><span class="op" id="5341735">.</span><span class="ident" id="5341736">WriteString</span><span class="op" id="5341747">(</span><span class="ident" id="5341748">indent</span><span class="op" id="5341754">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5341757">}</span><br>
<span class="lineno"></span><span class="op" id="5341759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5341762">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="5341829">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="5341888">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="5341951">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="5342009">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="5342072">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5342132">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="5342185">func</span>&nbsp;<span class="ident" id="5342190">Indent</span><span class="op" id="5342196">(</span><span class="ident" id="5342197">dst</span>&nbsp;<span class="op" id="5342201">*</span><span class="ident" id="5342202">bytes</span><span class="op" id="5342207">.</span><span class="ident" id="5342208">Buffer</span><span class="op" id="5342214">,</span>&nbsp;<span class="ident" id="5342216">src</span>&nbsp;<span class="op" id="5342220">[</span><span class="op" id="5342221">]</span><span class="builtintype" id="5342222">byte</span><span class="op" id="5342226">,</span>&nbsp;<span class="ident" id="5342228">prefix</span><span class="op" id="5342234">,</span>&nbsp;<span class="ident" id="5342236">indent</span>&nbsp;<span class="builtintype" id="5342243">string</span><span class="op" id="5342249">)</span>&nbsp;<span class="builtintype" id="5342251">error</span>&nbsp;<span class="op" id="5342257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342260">origLen</span>&nbsp;<span class="op" id="5342268">:=</span>&nbsp;<span class="ident" id="5342271">dst</span><span class="op" id="5342274">.</span><span class="ident" id="5342275">Len</span><span class="op" id="5342278">(</span><span class="op" id="5342279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342282">var</span>&nbsp;<span class="ident" id="5342286">scan</span>&nbsp;<span class="ident" id="5342291">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342300">scan</span><span class="op" id="5342304">.</span><span class="ident" id="5342305">reset</span><span class="op" id="5342310">(</span><span class="op" id="5342311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342314">needIndent</span>&nbsp;<span class="op" id="5342325">:=</span>&nbsp;<span class="builtintype" id="5342328">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342335">depth</span>&nbsp;<span class="op" id="5342341">:=</span>&nbsp;<span class="num" id="5342344">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342347">for</span>&nbsp;<span class="ident" id="5342351">_</span><span class="op" id="5342352">,</span>&nbsp;<span class="ident" id="5342354">c</span>&nbsp;<span class="op" id="5342356">:=</span>&nbsp;<span class="keyword" id="5342359">range</span>&nbsp;<span class="ident" id="5342365">src</span>&nbsp;<span class="op" id="5342369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342373">scan</span><span class="op" id="5342377">.</span><span class="ident" id="5342378">bytes</span><span class="op" id="5342383">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342388">v</span>&nbsp;<span class="op" id="5342390">:=</span>&nbsp;<span class="ident" id="5342393">scan</span><span class="op" id="5342397">.</span><span class="ident" id="5342398">step</span><span class="op" id="5342402">(</span><span class="op" id="5342403">&amp;</span><span class="ident" id="5342404">scan</span><span class="op" id="5342408">,</span>&nbsp;<span class="builtintype" id="5342410">int</span><span class="op" id="5342413">(</span><span class="ident" id="5342414">c</span><span class="op" id="5342415">)</span><span class="op" id="5342416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342420">if</span>&nbsp;<span class="ident" id="5342423">v</span>&nbsp;<span class="op" id="5342425">==</span>&nbsp;<span class="ident" id="5342428">scanSkipSpace</span>&nbsp;<span class="op" id="5342442">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342447">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342462">if</span>&nbsp;<span class="ident" id="5342465">v</span>&nbsp;<span class="op" id="5342467">==</span>&nbsp;<span class="ident" id="5342470">scanError</span>&nbsp;<span class="op" id="5342480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342485">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342493">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342497">if</span>&nbsp;<span class="ident" id="5342500">needIndent</span>&nbsp;<span class="op" id="5342511">&amp;&amp;</span>&nbsp;<span class="ident" id="5342514">v</span>&nbsp;<span class="op" id="5342516">!=</span>&nbsp;<span class="ident" id="5342519">scanEndObject</span>&nbsp;<span class="op" id="5342533">&amp;&amp;</span>&nbsp;<span class="ident" id="5342536">v</span>&nbsp;<span class="op" id="5342538">!=</span>&nbsp;<span class="ident" id="5342541">scanEndArray</span>&nbsp;<span class="op" id="5342554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342559">needIndent</span>&nbsp;<span class="op" id="5342570">=</span>&nbsp;<span class="builtintype" id="5342572">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342581">depth</span><span class="op" id="5342586">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342592">newline</span><span class="op" id="5342599">(</span><span class="ident" id="5342600">dst</span><span class="op" id="5342603">,</span>&nbsp;<span class="ident" id="5342605">prefix</span><span class="op" id="5342611">,</span>&nbsp;<span class="ident" id="5342613">indent</span><span class="op" id="5342619">,</span>&nbsp;<span class="ident" id="5342621">depth</span><span class="op" id="5342626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342630">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342635">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342678">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342735">if</span>&nbsp;<span class="ident" id="5342738">v</span>&nbsp;<span class="op" id="5342740">==</span>&nbsp;<span class="ident" id="5342743">scanContinue</span>&nbsp;<span class="op" id="5342756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342761">dst</span><span class="op" id="5342764">.</span><span class="ident" id="5342765">WriteByte</span><span class="op" id="5342774">(</span><span class="ident" id="5342775">c</span><span class="op" id="5342776">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342781">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5342792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342797">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342839">switch</span>&nbsp;<span class="ident" id="5342846">c</span>&nbsp;<span class="op" id="5342848">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342852">case</span>&nbsp;<span class="string" id="5342857">&#39;{&#39;</span><span class="op" id="5342860">,</span>&nbsp;<span class="string" id="5342862">&#39;[&#39;</span><span class="op" id="5342865">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5342870">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342948">needIndent</span>&nbsp;<span class="op" id="5342959">=</span>&nbsp;<span class="builtintype" id="5342961">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5342969">dst</span><span class="op" id="5342972">.</span><span class="ident" id="5342973">WriteByte</span><span class="op" id="5342982">(</span><span class="ident" id="5342983">c</span><span class="op" id="5342984">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5342989">case</span>&nbsp;<span class="string" id="5342994">&#39;,&#39;</span><span class="op" id="5342997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343002">dst</span><span class="op" id="5343005">.</span><span class="ident" id="5343006">WriteByte</span><span class="op" id="5343015">(</span><span class="ident" id="5343016">c</span><span class="op" id="5343017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343022">newline</span><span class="op" id="5343029">(</span><span class="ident" id="5343030">dst</span><span class="op" id="5343033">,</span>&nbsp;<span class="ident" id="5343035">prefix</span><span class="op" id="5343041">,</span>&nbsp;<span class="ident" id="5343043">indent</span><span class="op" id="5343049">,</span>&nbsp;<span class="ident" id="5343051">depth</span><span class="op" id="5343056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343061">case</span>&nbsp;<span class="string" id="5343066">&#39;:&#39;</span><span class="op" id="5343069">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343074">dst</span><span class="op" id="5343077">.</span><span class="ident" id="5343078">WriteByte</span><span class="op" id="5343087">(</span><span class="ident" id="5343088">c</span><span class="op" id="5343089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343094">dst</span><span class="op" id="5343097">.</span><span class="ident" id="5343098">WriteByte</span><span class="op" id="5343107">(</span><span class="string" id="5343108">&#39;&nbsp;&#39;</span><span class="op" id="5343111">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343116">case</span>&nbsp;<span class="string" id="5343121">&#39;}&#39;</span><span class="op" id="5343124">,</span>&nbsp;<span class="string" id="5343126">&#39;]&#39;</span><span class="op" id="5343129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343134">if</span>&nbsp;<span class="ident" id="5343137">needIndent</span>&nbsp;<span class="op" id="5343148">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5343154">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343199">needIndent</span>&nbsp;<span class="op" id="5343210">=</span>&nbsp;<span class="builtintype" id="5343212">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343221">}</span>&nbsp;<span class="keyword" id="5343223">else</span>&nbsp;<span class="op" id="5343228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343234">depth</span><span class="op" id="5343239">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343246">newline</span><span class="op" id="5343253">(</span><span class="ident" id="5343254">dst</span><span class="op" id="5343257">,</span>&nbsp;<span class="ident" id="5343259">prefix</span><span class="op" id="5343265">,</span>&nbsp;<span class="ident" id="5343267">indent</span><span class="op" id="5343273">,</span>&nbsp;<span class="ident" id="5343275">depth</span><span class="op" id="5343280">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343290">dst</span><span class="op" id="5343293">.</span><span class="ident" id="5343294">WriteByte</span><span class="op" id="5343303">(</span><span class="ident" id="5343304">c</span><span class="op" id="5343305">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343310">default</span><span class="op" id="5343317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343322">dst</span><span class="op" id="5343325">.</span><span class="ident" id="5343326">WriteByte</span><span class="op" id="5343335">(</span><span class="ident" id="5343336">c</span><span class="op" id="5343337">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343347">if</span>&nbsp;<span class="ident" id="5343350">scan</span><span class="op" id="5343354">.</span><span class="ident" id="5343355">eof</span><span class="op" id="5343358">(</span><span class="op" id="5343359">)</span>&nbsp;<span class="op" id="5343361">==</span>&nbsp;<span class="ident" id="5343364">scanError</span>&nbsp;<span class="op" id="5343374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5343378">dst</span><span class="op" id="5343381">.</span><span class="ident" id="5343382">Truncate</span><span class="op" id="5343390">(</span><span class="ident" id="5343391">origLen</span><span class="op" id="5343398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343402">return</span>&nbsp;<span class="ident" id="5343409">scan</span><span class="op" id="5343413">.</span><span class="ident" id="5343414">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5343419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5343422">return</span>&nbsp;<span class="ident" id="5343429">nil</span><br>
<span class="lineno"></span><span class="op" id="5343433">}</span>
</div>
</body>
</html>
