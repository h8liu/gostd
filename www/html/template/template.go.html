<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3330592">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3330647">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3330701">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3330752">package</span>&nbsp;<span class="ident" id="3330760">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330770">import</span>&nbsp;<span class="op" id="3330777">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330780">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330787">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330793">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330806">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330823">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330831">&#34;text/template&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3330848">&#34;text/template/parse&#34;</span><br>
<span class="lineno">15</span><span class="op" id="3330870">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3330873">//&nbsp;Template&nbsp;is&nbsp;a&nbsp;specialized&nbsp;Template&nbsp;from&nbsp;&#34;text/template&#34;&nbsp;that&nbsp;produces&nbsp;a&nbsp;safe</span><br>
<span class="lineno"></span><span class="comment" id="3330953">//&nbsp;HTML&nbsp;document&nbsp;fragment.</span><br>
<span class="lineno"></span><span class="keyword" id="3330980">type</span>&nbsp;<span class="ident" id="3330985">Template</span>&nbsp;<span class="keyword" id="3330994">struct</span>&nbsp;<span class="op" id="3331001">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331004">//&nbsp;Sticky&nbsp;error&nbsp;if&nbsp;escaping&nbsp;fails.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331040">escapeErr</span>&nbsp;<span class="builtintype" id="3331050">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331057">//&nbsp;We&nbsp;could&nbsp;embed&nbsp;the&nbsp;text/template&nbsp;field,&nbsp;but&nbsp;it&#39;s&nbsp;safer&nbsp;not&nbsp;to&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331131">//&nbsp;we&nbsp;need&nbsp;to&nbsp;keep&nbsp;our&nbsp;version&nbsp;of&nbsp;the&nbsp;name&nbsp;space&nbsp;and&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331200">//&nbsp;template&#39;s&nbsp;in&nbsp;sync.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331224">text</span>&nbsp;<span class="op" id="3331229">*</span><span class="ident" id="3331230"><a href="/html/template/template.go.html#3330831">template</a></span><span class="op" id="3331238">.</span><span class="ident" id="3331239">Template</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331249">//&nbsp;The&nbsp;underlying&nbsp;template&#39;s&nbsp;parse&nbsp;tree,&nbsp;updated&nbsp;to&nbsp;be&nbsp;HTML-safe.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331316">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3331327">*</span><span class="ident" id="3331328"><a href="/html/template/template.go.html#3330848">parse</a></span><span class="op" id="3331333">.</span><span class="ident" id="3331334">Tree</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3331340">*</span><span class="ident" id="3331341"><a href="/html/template/template.go.html#3331597">nameSpace</a></span>&nbsp;<span class="comment" id="3331351">//&nbsp;common&nbsp;to&nbsp;all&nbsp;associated&nbsp;templates</span><br>
<span class="lineno"></span><span class="op" id="3331389">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="3331392">//&nbsp;escapeOK&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;value&nbsp;used&nbsp;to&nbsp;indicate&nbsp;valid&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="keyword" id="3331457">var</span>&nbsp;<span class="ident" id="3331461">escapeOK</span>&nbsp;<span class="op" id="3331470">=</span>&nbsp;<span class="ident" id="3331472"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3331475">.</span><span class="ident" id="3331476">Errorf</span><span class="op" id="3331482">(</span><span class="string" id="3331483">&#34;template&nbsp;escaped&nbsp;correctly&#34;</span><span class="op" id="3331511">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3331514">//&nbsp;nameSpace&nbsp;is&nbsp;the&nbsp;data&nbsp;structure&nbsp;shared&nbsp;by&nbsp;all&nbsp;templates&nbsp;in&nbsp;an&nbsp;association.</span><br>
<span class="lineno">35</span><span class="keyword" id="3331592">type</span>&nbsp;<span class="ident" id="3331597">nameSpace</span>&nbsp;<span class="keyword" id="3331607">struct</span>&nbsp;<span class="op" id="3331614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331617">mu</span>&nbsp;&nbsp;<span class="ident" id="3331621"><a href="/html/template/template.go.html#3330823">sync</a></span><span class="op" id="3331625">.</span><span class="ident" id="3331626">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331633">set</span>&nbsp;<span class="keyword" id="3331637">map</span><span class="op" id="3331640">[</span><span class="builtintype" id="3331641">string</span><span class="op" id="3331647">]</span><span class="op" id="3331648">*</span><span class="ident" id="3331649"><a href="/html/template/template.go.html#3330985">Template</a></span><br>
<span class="lineno"></span><span class="op" id="3331658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="3331661">//&nbsp;Templates&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;templates&nbsp;associated&nbsp;with&nbsp;t,&nbsp;including&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="3331738">//&nbsp;itself.</span><br>
<span class="lineno"></span><span class="keyword" id="3331749">func</span>&nbsp;<span class="op" id="3331754">(</span><span class="ident" id="3331755">t</span>&nbsp;<span class="op" id="3331757">*</span><span class="ident" id="3331758"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3331766">)</span>&nbsp;<span class="ident" id="3331768">Templates</span><span class="op" id="3331777">(</span><span class="op" id="3331778">)</span>&nbsp;<span class="op" id="3331780">[</span><span class="op" id="3331781">]</span><span class="op" id="3331782">*</span><span class="ident" id="3331783"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3331792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331795">ns</span>&nbsp;<span class="op" id="3331798">:=</span>&nbsp;<span class="ident" id="3331801"><a href="/html/template/template.go.html#3331755">t</a></span><span class="op" id="3331802">.</span><span class="ident" id="3331803">nameSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331814"><a href="/html/template/template.go.html#3331795">ns</a></span><span class="op" id="3331816">.</span><span class="ident" id="3331817">mu</span><span class="op" id="3331819">.</span><span class="ident" id="3331820">Lock</span><span class="op" id="3331824">(</span><span class="op" id="3331825">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3331828">defer</span>&nbsp;<span class="ident" id="3331834"><a href="/html/template/template.go.html#3331795">ns</a></span><span class="op" id="3331836">.</span><span class="ident" id="3331837">mu</span><span class="op" id="3331839">.</span><span class="ident" id="3331840">Unlock</span><span class="op" id="3331846">(</span><span class="op" id="3331847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3331850">//&nbsp;Return&nbsp;a&nbsp;slice&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;expose&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331897">m</span>&nbsp;<span class="op" id="3331899">:=</span>&nbsp;<span class="builtinfunc" id="3331902">make</span><span class="op" id="3331906">(</span><span class="op" id="3331907">[</span><span class="op" id="3331908">]</span><span class="op" id="3331909">*</span><span class="ident" id="3331910"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3331918">,</span>&nbsp;<span class="num" id="3331920">0</span><span class="op" id="3331921">,</span>&nbsp;<span class="builtinfunc" id="3331923">len</span><span class="op" id="3331926">(</span><span class="ident" id="3331927"><a href="/html/template/template.go.html#3331795">ns</a></span><span class="op" id="3331929">.</span><span class="ident" id="3331930">set</span><span class="op" id="3331933">)</span><span class="op" id="3331934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3331937">for</span>&nbsp;<span class="ident" id="3331941">_</span><span class="op" id="3331942">,</span>&nbsp;<span class="ident" id="3331944">v</span>&nbsp;<span class="op" id="3331946">:=</span>&nbsp;<span class="keyword" id="3331949">range</span>&nbsp;<span class="ident" id="3331955"><a href="/html/template/template.go.html#3331795">ns</a></span><span class="op" id="3331957">.</span><span class="ident" id="3331958">set</span>&nbsp;<span class="op" id="3331962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3331966"><a href="/html/template/template.go.html#3331897">m</a></span>&nbsp;<span class="op" id="3331968">=</span>&nbsp;<span class="builtinfunc" id="3331970">append</span><span class="op" id="3331976">(</span><span class="ident" id="3331977"><a href="/html/template/template.go.html#3331897">m</a></span><span class="op" id="3331978">,</span>&nbsp;<span class="ident" id="3331980"><a href="/html/template/template.go.html#3331944">v</a></span><span class="op" id="3331981">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3331984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3331987">return</span>&nbsp;<span class="ident" id="3331994"><a href="/html/template/template.go.html#3331897">m</a></span><br>
<span class="lineno"></span><span class="op" id="3331996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3331999">//&nbsp;escape&nbsp;escapes&nbsp;all&nbsp;associated&nbsp;templates.</span><br>
<span class="lineno">55</span><span class="keyword" id="3332043">func</span>&nbsp;<span class="op" id="3332048">(</span><span class="ident" id="3332049">t</span>&nbsp;<span class="op" id="3332051">*</span><span class="ident" id="3332052"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3332060">)</span>&nbsp;<span class="ident" id="3332062">escape</span><span class="op" id="3332068">(</span><span class="op" id="3332069">)</span>&nbsp;<span class="builtintype" id="3332071">error</span>&nbsp;<span class="op" id="3332077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3332080"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332081">.</span><span class="ident" id="3332082">nameSpace</span><span class="op" id="3332091">.</span><span class="ident" id="3332092">mu</span><span class="op" id="3332094">.</span><span class="ident" id="3332095">Lock</span><span class="op" id="3332099">(</span><span class="op" id="3332100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332103">defer</span>&nbsp;<span class="ident" id="3332109"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332110">.</span><span class="ident" id="3332111">nameSpace</span><span class="op" id="3332120">.</span><span class="ident" id="3332121">mu</span><span class="op" id="3332123">.</span><span class="ident" id="3332124">Unlock</span><span class="op" id="3332130">(</span><span class="op" id="3332131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332134">if</span>&nbsp;<span class="ident" id="3332137"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332138">.</span><span class="ident" id="3332139">escapeErr</span>&nbsp;<span class="op" id="3332149">==</span>&nbsp;<span class="ident" id="3332152">nil</span>&nbsp;<span class="op" id="3332156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332160">if</span>&nbsp;<span class="ident" id="3332163">err</span>&nbsp;<span class="op" id="3332167">:=</span>&nbsp;<span class="ident" id="3332170"><a href="/html/template/escape.go.html#3288601">escapeTemplate</a></span><span class="op" id="3332184">(</span><span class="ident" id="3332185"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332186">,</span>&nbsp;<span class="ident" id="3332188"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332189">.</span><span class="ident" id="3332190">text</span><span class="op" id="3332194">.</span><span class="ident" id="3332195">Root</span><span class="op" id="3332199">,</span>&nbsp;<span class="ident" id="3332201"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332202">.</span><span class="ident" id="3332203">Name</span><span class="op" id="3332207">(</span><span class="op" id="3332208">)</span><span class="op" id="3332209">)</span><span class="op" id="3332210">;</span>&nbsp;<span class="ident" id="3332212"><a href="/html/template/template.go.html#3332163">err</a></span>&nbsp;<span class="op" id="3332216">!=</span>&nbsp;<span class="ident" id="3332219">nil</span>&nbsp;<span class="op" id="3332223">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332228">return</span>&nbsp;<span class="ident" id="3332235"><a href="/html/template/template.go.html#3332163">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3332241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3332244">}</span>&nbsp;<span class="keyword" id="3332246">else</span>&nbsp;<span class="keyword" id="3332251">if</span>&nbsp;<span class="ident" id="3332254"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332255">.</span><span class="ident" id="3332256">escapeErr</span>&nbsp;<span class="op" id="3332266">!=</span>&nbsp;<span class="ident" id="3332269"><a href="/html/template/template.go.html#3331461">escapeOK</a></span>&nbsp;<span class="op" id="3332278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332282">return</span>&nbsp;<span class="ident" id="3332289"><a href="/html/template/template.go.html#3332049">t</a></span><span class="op" id="3332290">.</span><span class="ident" id="3332291">escapeErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3332302">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332305">return</span>&nbsp;<span class="ident" id="3332312">nil</span><br>
<span class="lineno"></span><span class="op" id="3332316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3332319">//&nbsp;Execute&nbsp;applies&nbsp;a&nbsp;parsed&nbsp;template&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object,</span><br>
<span class="lineno"></span><span class="comment" id="3332386">//&nbsp;writing&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno">70</span><span class="comment" id="3332415">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="3332483">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3332556">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="3332578">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="3332628">func</span>&nbsp;<span class="op" id="3332633">(</span><span class="ident" id="3332634">t</span>&nbsp;<span class="op" id="3332636">*</span><span class="ident" id="3332637"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3332645">)</span>&nbsp;<span class="ident" id="3332647">Execute</span><span class="op" id="3332654">(</span><span class="ident" id="3332655">wr</span>&nbsp;<span class="ident" id="3332658"><a href="/html/template/template.go.html#3330787">io</a></span><span class="op" id="3332660">.</span><span class="ident" id="3332661">Writer</span><span class="op" id="3332667">,</span>&nbsp;<span class="ident" id="3332669">data</span>&nbsp;<span class="keyword" id="3332674">interface</span><span class="op" id="3332683">{</span><span class="op" id="3332684">}</span><span class="op" id="3332685">)</span>&nbsp;<span class="builtintype" id="3332687">error</span>&nbsp;<span class="op" id="3332693">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332696">if</span>&nbsp;<span class="ident" id="3332699">err</span>&nbsp;<span class="op" id="3332703">:=</span>&nbsp;<span class="ident" id="3332706"><a href="/html/template/template.go.html#3332634">t</a></span><span class="op" id="3332707">.</span><span class="ident" id="3332708">escape</span><span class="op" id="3332714">(</span><span class="op" id="3332715">)</span><span class="op" id="3332716">;</span>&nbsp;<span class="ident" id="3332718"><a href="/html/template/template.go.html#3332699">err</a></span>&nbsp;<span class="op" id="3332722">!=</span>&nbsp;<span class="ident" id="3332725">nil</span>&nbsp;<span class="op" id="3332729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332733">return</span>&nbsp;<span class="ident" id="3332740"><a href="/html/template/template.go.html#3332699">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3332745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3332748">return</span>&nbsp;<span class="ident" id="3332755"><a href="/html/template/template.go.html#3332634">t</a></span><span class="op" id="3332756">.</span><span class="ident" id="3332757">text</span><span class="op" id="3332761">.</span><span class="ident" id="3332762">Execute</span><span class="op" id="3332769">(</span><span class="ident" id="3332770"><a href="/html/template/template.go.html#3332655">wr</a></span><span class="op" id="3332772">,</span>&nbsp;<span class="ident" id="3332774"><a href="/html/template/template.go.html#3332669">data</a></span><span class="op" id="3332778">)</span><br>
<span class="lineno"></span><span class="op" id="3332780">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3332783">//&nbsp;ExecuteTemplate&nbsp;applies&nbsp;the&nbsp;template&nbsp;associated&nbsp;with&nbsp;t&nbsp;that&nbsp;has&nbsp;the&nbsp;given</span><br>
<span class="lineno"></span><span class="comment" id="3332860">//&nbsp;name&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno"></span><span class="comment" id="3332926">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="3332994">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno">85</span><span class="comment" id="3333067">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="3333089">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="3333139">func</span>&nbsp;<span class="op" id="3333144">(</span><span class="ident" id="3333145">t</span>&nbsp;<span class="op" id="3333147">*</span><span class="ident" id="3333148"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3333156">)</span>&nbsp;<span class="ident" id="3333158">ExecuteTemplate</span><span class="op" id="3333173">(</span><span class="ident" id="3333174">wr</span>&nbsp;<span class="ident" id="3333177"><a href="/html/template/template.go.html#3330787">io</a></span><span class="op" id="3333179">.</span><span class="ident" id="3333180">Writer</span><span class="op" id="3333186">,</span>&nbsp;<span class="ident" id="3333188">name</span>&nbsp;<span class="builtintype" id="3333193">string</span><span class="op" id="3333199">,</span>&nbsp;<span class="ident" id="3333201">data</span>&nbsp;<span class="keyword" id="3333206">interface</span><span class="op" id="3333215">{</span><span class="op" id="3333216">}</span><span class="op" id="3333217">)</span>&nbsp;<span class="builtintype" id="3333219">error</span>&nbsp;<span class="op" id="3333225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3333228">tmpl</span><span class="op" id="3333232">,</span>&nbsp;<span class="ident" id="3333234">err</span>&nbsp;<span class="op" id="3333238">:=</span>&nbsp;<span class="ident" id="3333241"><a href="/html/template/template.go.html#3333145">t</a></span><span class="op" id="3333242">.</span><span class="ident" id="3333243">lookupAndEscapeTemplate</span><span class="op" id="3333266">(</span><span class="ident" id="3333267"><a href="/html/template/template.go.html#3333188">name</a></span><span class="op" id="3333271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333274">if</span>&nbsp;<span class="ident" id="3333277"><a href="/html/template/template.go.html#3333234">err</a></span>&nbsp;<span class="op" id="3333281">!=</span>&nbsp;<span class="ident" id="3333284">nil</span>&nbsp;<span class="op" id="3333288">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333292">return</span>&nbsp;<span class="ident" id="3333299"><a href="/html/template/template.go.html#3333234">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3333304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333307">return</span>&nbsp;<span class="ident" id="3333314"><a href="/html/template/template.go.html#3333228">tmpl</a></span><span class="op" id="3333318">.</span><span class="ident" id="3333319">text</span><span class="op" id="3333323">.</span><span class="ident" id="3333324">Execute</span><span class="op" id="3333331">(</span><span class="ident" id="3333332"><a href="/html/template/template.go.html#3333174">wr</a></span><span class="op" id="3333334">,</span>&nbsp;<span class="ident" id="3333336"><a href="/html/template/template.go.html#3333201">data</a></span><span class="op" id="3333340">)</span><br>
<span class="lineno"></span><span class="op" id="3333342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3333345">//&nbsp;lookupAndEscapeTemplate&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="3333421">//&nbsp;is&nbsp;escaped,&nbsp;or&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be.&nbsp;It&nbsp;returns&nbsp;the&nbsp;named</span><br>
<span class="lineno"></span><span class="comment" id="3333494">//&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="3333507">func</span>&nbsp;<span class="op" id="3333512">(</span><span class="ident" id="3333513">t</span>&nbsp;<span class="op" id="3333515">*</span><span class="ident" id="3333516"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3333524">)</span>&nbsp;<span class="ident" id="3333526">lookupAndEscapeTemplate</span><span class="op" id="3333549">(</span><span class="ident" id="3333550">name</span>&nbsp;<span class="builtintype" id="3333555">string</span><span class="op" id="3333561">)</span>&nbsp;<span class="op" id="3333563">(</span><span class="ident" id="3333564">tmpl</span>&nbsp;<span class="op" id="3333569">*</span><span class="ident" id="3333570"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3333578">,</span>&nbsp;<span class="ident" id="3333580">err</span>&nbsp;<span class="builtintype" id="3333584">error</span><span class="op" id="3333589">)</span>&nbsp;<span class="op" id="3333591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3333594"><a href="/html/template/template.go.html#3333513">t</a></span><span class="op" id="3333595">.</span><span class="ident" id="3333596">nameSpace</span><span class="op" id="3333605">.</span><span class="ident" id="3333606">mu</span><span class="op" id="3333608">.</span><span class="ident" id="3333609">Lock</span><span class="op" id="3333613">(</span><span class="op" id="3333614">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333617">defer</span>&nbsp;<span class="ident" id="3333623"><a href="/html/template/template.go.html#3333513">t</a></span><span class="op" id="3333624">.</span><span class="ident" id="3333625">nameSpace</span><span class="op" id="3333634">.</span><span class="ident" id="3333635">mu</span><span class="op" id="3333637">.</span><span class="ident" id="3333638">Unlock</span><span class="op" id="3333644">(</span><span class="op" id="3333645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3333648"><a href="/html/template/template.go.html#3333564">tmpl</a></span>&nbsp;<span class="op" id="3333653">=</span>&nbsp;<span class="ident" id="3333655"><a href="/html/template/template.go.html#3333513">t</a></span><span class="op" id="3333656">.</span><span class="ident" id="3333657">set</span><span class="op" id="3333660">[</span><span class="ident" id="3333661"><a href="/html/template/template.go.html#3333550">name</a></span><span class="op" id="3333665">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333668">if</span>&nbsp;<span class="ident" id="3333671"><a href="/html/template/template.go.html#3333564">tmpl</a></span>&nbsp;<span class="op" id="3333676">==</span>&nbsp;<span class="ident" id="3333679">nil</span>&nbsp;<span class="op" id="3333683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333687">return</span>&nbsp;<span class="ident" id="3333694">nil</span><span class="op" id="3333697">,</span>&nbsp;<span class="ident" id="3333699"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3333702">.</span><span class="ident" id="3333703">Errorf</span><span class="op" id="3333709">(</span><span class="string" id="3333710">&#34;html/template:&nbsp;%q&nbsp;is&nbsp;undefined&#34;</span><span class="op" id="3333742">,</span>&nbsp;<span class="ident" id="3333744"><a href="/html/template/template.go.html#3333550">name</a></span><span class="op" id="3333748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3333751">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333754">if</span>&nbsp;<span class="ident" id="3333757"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3333761">.</span><span class="ident" id="3333762">escapeErr</span>&nbsp;<span class="op" id="3333772">!=</span>&nbsp;<span class="ident" id="3333775">nil</span>&nbsp;<span class="op" id="3333779">&amp;&amp;</span>&nbsp;<span class="ident" id="3333782"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3333786">.</span><span class="ident" id="3333787">escapeErr</span>&nbsp;<span class="op" id="3333797">!=</span>&nbsp;<span class="ident" id="3333800"><a href="/html/template/template.go.html#3331461">escapeOK</a></span>&nbsp;<span class="op" id="3333809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333813">return</span>&nbsp;<span class="ident" id="3333820">nil</span><span class="op" id="3333823">,</span>&nbsp;<span class="ident" id="3333825"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3333829">.</span><span class="ident" id="3333830">escapeErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3333841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333844">if</span>&nbsp;<span class="ident" id="3333847"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3333851">.</span><span class="ident" id="3333852">text</span><span class="op" id="3333856">.</span><span class="ident" id="3333857">Tree</span>&nbsp;<span class="op" id="3333862">==</span>&nbsp;<span class="ident" id="3333865">nil</span>&nbsp;<span class="op" id="3333869">||</span>&nbsp;<span class="ident" id="3333872"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3333876">.</span><span class="ident" id="3333877">text</span><span class="op" id="3333881">.</span><span class="ident" id="3333882">Root</span>&nbsp;<span class="op" id="3333887">==</span>&nbsp;<span class="ident" id="3333890">nil</span>&nbsp;<span class="op" id="3333894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333898">return</span>&nbsp;<span class="ident" id="3333905">nil</span><span class="op" id="3333908">,</span>&nbsp;<span class="ident" id="3333910"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3333913">.</span><span class="ident" id="3333914">Errorf</span><span class="op" id="3333920">(</span><span class="string" id="3333921">&#34;html/template:&nbsp;%q&nbsp;is&nbsp;an&nbsp;incomplete&nbsp;template&#34;</span><span class="op" id="3333966">,</span>&nbsp;<span class="ident" id="3333968"><a href="/html/template/template.go.html#3333550">name</a></span><span class="op" id="3333972">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3333975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3333978">if</span>&nbsp;<span class="ident" id="3333981"><a href="/html/template/template.go.html#3333513">t</a></span><span class="op" id="3333982">.</span><span class="ident" id="3333983">text</span><span class="op" id="3333987">.</span><span class="ident" id="3333988">Lookup</span><span class="op" id="3333994">(</span><span class="ident" id="3333995"><a href="/html/template/template.go.html#3333550">name</a></span><span class="op" id="3333999">)</span>&nbsp;<span class="op" id="3334001">==</span>&nbsp;<span class="ident" id="3334004">nil</span>&nbsp;<span class="op" id="3334008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3334012">panic</span><span class="op" id="3334017">(</span><span class="string" id="3334018">&#34;html/template&nbsp;internal&nbsp;error:&nbsp;template&nbsp;escaping&nbsp;out&nbsp;of&nbsp;sync&#34;</span><span class="op" id="3334079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3334082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3334085">if</span>&nbsp;<span class="ident" id="3334088"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3334092">.</span><span class="ident" id="3334093">escapeErr</span>&nbsp;<span class="op" id="3334103">==</span>&nbsp;<span class="ident" id="3334106">nil</span>&nbsp;<span class="op" id="3334110">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3334114"><a href="/html/template/template.go.html#3333580">err</a></span>&nbsp;<span class="op" id="3334118">=</span>&nbsp;<span class="ident" id="3334120"><a href="/html/template/escape.go.html#3288601">escapeTemplate</a></span><span class="op" id="3334134">(</span><span class="ident" id="3334135"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3334139">,</span>&nbsp;<span class="ident" id="3334141"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3334145">.</span><span class="ident" id="3334146">text</span><span class="op" id="3334150">.</span><span class="ident" id="3334151">Root</span><span class="op" id="3334155">,</span>&nbsp;<span class="ident" id="3334157"><a href="/html/template/template.go.html#3333550">name</a></span><span class="op" id="3334161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3334164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3334167">return</span>&nbsp;<span class="ident" id="3334174"><a href="/html/template/template.go.html#3333564">tmpl</a></span><span class="op" id="3334178">,</span>&nbsp;<span class="ident" id="3334180"><a href="/html/template/template.go.html#3333580">err</a></span><br>
<span class="lineno"></span><span class="op" id="3334184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3334187">//&nbsp;Parse&nbsp;parses&nbsp;a&nbsp;string&nbsp;into&nbsp;a&nbsp;template.&nbsp;Nested&nbsp;template&nbsp;definitions</span><br>
<span class="lineno"></span><span class="comment" id="3334257">//&nbsp;will&nbsp;be&nbsp;associated&nbsp;with&nbsp;the&nbsp;top-level&nbsp;template&nbsp;t.&nbsp;Parse&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3334323">//&nbsp;called&nbsp;multiple&nbsp;times&nbsp;to&nbsp;parse&nbsp;definitions&nbsp;of&nbsp;templates&nbsp;to&nbsp;associate</span><br>
<span class="lineno"></span><span class="comment" id="3334395">//&nbsp;with&nbsp;t.&nbsp;It&nbsp;is&nbsp;an&nbsp;error&nbsp;if&nbsp;a&nbsp;resulting&nbsp;template&nbsp;is&nbsp;non-empty&nbsp;(contains</span><br>
<span class="lineno"></span><span class="comment" id="3334468">//&nbsp;content&nbsp;other&nbsp;than&nbsp;template&nbsp;definitions)&nbsp;and&nbsp;would&nbsp;replace&nbsp;a</span><br>
<span class="lineno">125</span><span class="comment" id="3334532">//&nbsp;non-empty&nbsp;template&nbsp;with&nbsp;the&nbsp;same&nbsp;name.&nbsp;&nbsp;(In&nbsp;multiple&nbsp;calls&nbsp;to&nbsp;Parse</span><br>
<span class="lineno"></span><span class="comment" id="3334603">//&nbsp;with&nbsp;the&nbsp;same&nbsp;receiver&nbsp;template,&nbsp;only&nbsp;one&nbsp;call&nbsp;can&nbsp;contain&nbsp;text</span><br>
<span class="lineno"></span><span class="comment" id="3334670">//&nbsp;other&nbsp;than&nbsp;space,&nbsp;comments,&nbsp;and&nbsp;template&nbsp;definitions.)</span><br>
<span class="lineno"></span><span class="keyword" id="3334728">func</span>&nbsp;<span class="op" id="3334733">(</span><span class="ident" id="3334734">t</span>&nbsp;<span class="op" id="3334736">*</span><span class="ident" id="3334737"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3334745">)</span>&nbsp;<span class="ident" id="3334747">Parse</span><span class="op" id="3334752">(</span><span class="ident" id="3334753">src</span>&nbsp;<span class="builtintype" id="3334757">string</span><span class="op" id="3334763">)</span>&nbsp;<span class="op" id="3334765">(</span><span class="op" id="3334766">*</span><span class="ident" id="3334767"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3334775">,</span>&nbsp;<span class="builtintype" id="3334777">error</span><span class="op" id="3334782">)</span>&nbsp;<span class="op" id="3334784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3334787"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3334788">.</span><span class="ident" id="3334789">nameSpace</span><span class="op" id="3334798">.</span><span class="ident" id="3334799">mu</span><span class="op" id="3334801">.</span><span class="ident" id="3334802">Lock</span><span class="op" id="3334806">(</span><span class="op" id="3334807">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3334810"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3334811">.</span><span class="ident" id="3334812">escapeErr</span>&nbsp;<span class="op" id="3334822">=</span>&nbsp;<span class="ident" id="3334824">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3334829"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3334830">.</span><span class="ident" id="3334831">nameSpace</span><span class="op" id="3334840">.</span><span class="ident" id="3334841">mu</span><span class="op" id="3334843">.</span><span class="ident" id="3334844">Unlock</span><span class="op" id="3334850">(</span><span class="op" id="3334851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3334854">ret</span><span class="op" id="3334857">,</span>&nbsp;<span class="ident" id="3334859">err</span>&nbsp;<span class="op" id="3334863">:=</span>&nbsp;<span class="ident" id="3334866"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3334867">.</span><span class="ident" id="3334868">text</span><span class="op" id="3334872">.</span><span class="ident" id="3334873">Parse</span><span class="op" id="3334878">(</span><span class="ident" id="3334879"><a href="/html/template/template.go.html#3334753">src</a></span><span class="op" id="3334882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3334885">if</span>&nbsp;<span class="ident" id="3334888"><a href="/html/template/template.go.html#3334859">err</a></span>&nbsp;<span class="op" id="3334892">!=</span>&nbsp;<span class="ident" id="3334895">nil</span>&nbsp;<span class="op" id="3334899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3334903">return</span>&nbsp;<span class="ident" id="3334910">nil</span><span class="op" id="3334913">,</span>&nbsp;<span class="ident" id="3334915"><a href="/html/template/template.go.html#3334859">err</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3334920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3334923">//&nbsp;In&nbsp;general,&nbsp;all&nbsp;the&nbsp;named&nbsp;templates&nbsp;might&nbsp;have&nbsp;changed&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3334993">//&nbsp;Regardless,&nbsp;some&nbsp;new&nbsp;ones&nbsp;may&nbsp;have&nbsp;been&nbsp;defined.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3335046">//&nbsp;The&nbsp;template.Template&nbsp;set&nbsp;has&nbsp;been&nbsp;updated;&nbsp;update&nbsp;ours.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335107"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3335108">.</span><span class="ident" id="3335109">nameSpace</span><span class="op" id="3335118">.</span><span class="ident" id="3335119">mu</span><span class="op" id="3335121">.</span><span class="ident" id="3335122">Lock</span><span class="op" id="3335126">(</span><span class="op" id="3335127">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335130">defer</span>&nbsp;<span class="ident" id="3335136"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3335137">.</span><span class="ident" id="3335138">nameSpace</span><span class="op" id="3335147">.</span><span class="ident" id="3335148">mu</span><span class="op" id="3335150">.</span><span class="ident" id="3335151">Unlock</span><span class="op" id="3335157">(</span><span class="op" id="3335158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335161">for</span>&nbsp;<span class="ident" id="3335165">_</span><span class="op" id="3335166">,</span>&nbsp;<span class="ident" id="3335168">v</span>&nbsp;<span class="op" id="3335170">:=</span>&nbsp;<span class="keyword" id="3335173">range</span>&nbsp;<span class="ident" id="3335179"><a href="/html/template/template.go.html#3334854">ret</a></span><span class="op" id="3335182">.</span><span class="ident" id="3335183">Templates</span><span class="op" id="3335192">(</span><span class="op" id="3335193">)</span>&nbsp;<span class="op" id="3335195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335199">name</span>&nbsp;<span class="op" id="3335204">:=</span>&nbsp;<span class="ident" id="3335207"><a href="/html/template/template.go.html#3335168">v</a></span><span class="op" id="3335208">.</span><span class="ident" id="3335209">Name</span><span class="op" id="3335213">(</span><span class="op" id="3335214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335218">tmpl</span>&nbsp;<span class="op" id="3335223">:=</span>&nbsp;<span class="ident" id="3335226"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3335227">.</span><span class="ident" id="3335228">set</span><span class="op" id="3335231">[</span><span class="ident" id="3335232"><a href="/html/template/template.go.html#3335199">name</a></span><span class="op" id="3335236">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335240">if</span>&nbsp;<span class="ident" id="3335243"><a href="/html/template/template.go.html#3335218">tmpl</a></span>&nbsp;<span class="op" id="3335248">==</span>&nbsp;<span class="ident" id="3335251">nil</span>&nbsp;<span class="op" id="3335255">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335260"><a href="/html/template/template.go.html#3335218">tmpl</a></span>&nbsp;<span class="op" id="3335265">=</span>&nbsp;<span class="ident" id="3335267"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3335268">.</span><span class="builtinfunc" id="3335269">new</span><span class="op" id="3335272">(</span><span class="ident" id="3335273"><a href="/html/template/template.go.html#3335199">name</a></span><span class="op" id="3335277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3335281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3335285">//&nbsp;Restore&nbsp;our&nbsp;record&nbsp;of&nbsp;this&nbsp;text/template&nbsp;to&nbsp;its&nbsp;unescaped&nbsp;original&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335364"><a href="/html/template/template.go.html#3335218">tmpl</a></span><span class="op" id="3335368">.</span><span class="ident" id="3335369">escapeErr</span>&nbsp;<span class="op" id="3335379">=</span>&nbsp;<span class="ident" id="3335381">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335387"><a href="/html/template/template.go.html#3335218">tmpl</a></span><span class="op" id="3335391">.</span><span class="ident" id="3335392">text</span>&nbsp;<span class="op" id="3335397">=</span>&nbsp;<span class="ident" id="3335399"><a href="/html/template/template.go.html#3335168">v</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335403"><a href="/html/template/template.go.html#3335218">tmpl</a></span><span class="op" id="3335407">.</span><span class="ident" id="3335408">Tree</span>&nbsp;<span class="op" id="3335413">=</span>&nbsp;<span class="ident" id="3335415"><a href="/html/template/template.go.html#3335168">v</a></span><span class="op" id="3335416">.</span><span class="ident" id="3335417">Tree</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3335423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335426">return</span>&nbsp;<span class="ident" id="3335433"><a href="/html/template/template.go.html#3334734">t</a></span><span class="op" id="3335434">,</span>&nbsp;<span class="ident" id="3335436">nil</span><br>
<span class="lineno"></span><span class="op" id="3335440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3335443">//&nbsp;AddParseTree&nbsp;creates&nbsp;a&nbsp;new&nbsp;template&nbsp;with&nbsp;the&nbsp;name&nbsp;and&nbsp;parse&nbsp;tree</span><br>
<span class="lineno"></span><span class="comment" id="3335511">//&nbsp;and&nbsp;associates&nbsp;it&nbsp;with&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="3335540">//</span><br>
<span class="lineno"></span><span class="comment" id="3335543">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;t&nbsp;has&nbsp;already&nbsp;been&nbsp;executed.</span><br>
<span class="lineno"></span><span class="keyword" id="3335598">func</span>&nbsp;<span class="op" id="3335603">(</span><span class="ident" id="3335604">t</span>&nbsp;<span class="op" id="3335606">*</span><span class="ident" id="3335607"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3335615">)</span>&nbsp;<span class="ident" id="3335617">AddParseTree</span><span class="op" id="3335629">(</span><span class="ident" id="3335630">name</span>&nbsp;<span class="builtintype" id="3335635">string</span><span class="op" id="3335641">,</span>&nbsp;<span class="ident" id="3335643">tree</span>&nbsp;<span class="op" id="3335648">*</span><span class="ident" id="3335649"><a href="/html/template/template.go.html#3330848">parse</a></span><span class="op" id="3335654">.</span><span class="ident" id="3335655">Tree</span><span class="op" id="3335659">)</span>&nbsp;<span class="op" id="3335661">(</span><span class="op" id="3335662">*</span><span class="ident" id="3335663"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3335671">,</span>&nbsp;<span class="builtintype" id="3335673">error</span><span class="op" id="3335678">)</span>&nbsp;<span class="op" id="3335680">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335683"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335684">.</span><span class="ident" id="3335685">nameSpace</span><span class="op" id="3335694">.</span><span class="ident" id="3335695">mu</span><span class="op" id="3335697">.</span><span class="ident" id="3335698">Lock</span><span class="op" id="3335702">(</span><span class="op" id="3335703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335706">defer</span>&nbsp;<span class="ident" id="3335712"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335713">.</span><span class="ident" id="3335714">nameSpace</span><span class="op" id="3335723">.</span><span class="ident" id="3335724">mu</span><span class="op" id="3335726">.</span><span class="ident" id="3335727">Unlock</span><span class="op" id="3335733">(</span><span class="op" id="3335734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335737">if</span>&nbsp;<span class="ident" id="3335740"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335741">.</span><span class="ident" id="3335742">escapeErr</span>&nbsp;<span class="op" id="3335752">!=</span>&nbsp;<span class="ident" id="3335755">nil</span>&nbsp;<span class="op" id="3335759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335763">return</span>&nbsp;<span class="ident" id="3335770">nil</span><span class="op" id="3335773">,</span>&nbsp;<span class="ident" id="3335775"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3335778">.</span><span class="ident" id="3335779">Errorf</span><span class="op" id="3335785">(</span><span class="string" id="3335786">&#34;html/template:&nbsp;cannot&nbsp;AddParseTree&nbsp;to&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="3335850">,</span>&nbsp;<span class="ident" id="3335852"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335853">.</span><span class="ident" id="3335854">Name</span><span class="op" id="3335858">(</span><span class="op" id="3335859">)</span><span class="op" id="3335860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3335863">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335866">text</span><span class="op" id="3335870">,</span>&nbsp;<span class="ident" id="3335872">err</span>&nbsp;<span class="op" id="3335876">:=</span>&nbsp;<span class="ident" id="3335879"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335880">.</span><span class="ident" id="3335881">text</span><span class="op" id="3335885">.</span><span class="ident" id="3335886">AddParseTree</span><span class="op" id="3335898">(</span><span class="ident" id="3335899"><a href="/html/template/template.go.html#3335630">name</a></span><span class="op" id="3335903">,</span>&nbsp;<span class="ident" id="3335905"><a href="/html/template/template.go.html#3335643">tree</a></span><span class="op" id="3335909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335912">if</span>&nbsp;<span class="ident" id="3335915"><a href="/html/template/template.go.html#3335872">err</a></span>&nbsp;<span class="op" id="3335919">!=</span>&nbsp;<span class="ident" id="3335922">nil</span>&nbsp;<span class="op" id="3335926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3335930">return</span>&nbsp;<span class="ident" id="3335937">nil</span><span class="op" id="3335940">,</span>&nbsp;<span class="ident" id="3335942"><a href="/html/template/template.go.html#3335872">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3335947">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335950">ret</span>&nbsp;<span class="op" id="3335954">:=</span>&nbsp;<span class="op" id="3335957">&amp;</span><span class="ident" id="3335958"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3335966">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335970">nil</span><span class="op" id="3335973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335977"><a href="/html/template/template.go.html#3335866">text</a></span><span class="op" id="3335981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335985"><a href="/html/template/template.go.html#3335866">text</a></span><span class="op" id="3335989">.</span><span class="ident" id="3335990">Tree</span><span class="op" id="3335994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3335998"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3335999">.</span><span class="ident" id="3336000">nameSpace</span><span class="op" id="3336009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336012">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336015"><a href="/html/template/template.go.html#3335604">t</a></span><span class="op" id="3336016">.</span><span class="ident" id="3336017">set</span><span class="op" id="3336020">[</span><span class="ident" id="3336021"><a href="/html/template/template.go.html#3335630">name</a></span><span class="op" id="3336025">]</span>&nbsp;<span class="op" id="3336027">=</span>&nbsp;<span class="ident" id="3336029"><a href="/html/template/template.go.html#3335950">ret</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336034">return</span>&nbsp;<span class="ident" id="3336041"><a href="/html/template/template.go.html#3335950">ret</a></span><span class="op" id="3336044">,</span>&nbsp;<span class="ident" id="3336046">nil</span><br>
<span class="lineno"></span><span class="op" id="3336050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3336053">//&nbsp;Clone&nbsp;returns&nbsp;a&nbsp;duplicate&nbsp;of&nbsp;the&nbsp;template,&nbsp;including&nbsp;all&nbsp;associated</span><br>
<span class="lineno">180</span><span class="comment" id="3336124">//&nbsp;templates.&nbsp;The&nbsp;actual&nbsp;representation&nbsp;is&nbsp;not&nbsp;copied,&nbsp;but&nbsp;the&nbsp;name&nbsp;space&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3336201">//&nbsp;associated&nbsp;templates&nbsp;is,&nbsp;so&nbsp;further&nbsp;calls&nbsp;to&nbsp;Parse&nbsp;in&nbsp;the&nbsp;copy&nbsp;will&nbsp;add</span><br>
<span class="lineno"></span><span class="comment" id="3336276">//&nbsp;templates&nbsp;to&nbsp;the&nbsp;copy&nbsp;but&nbsp;not&nbsp;to&nbsp;the&nbsp;original.&nbsp;Clone&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;prepare</span><br>
<span class="lineno"></span><span class="comment" id="3336355">//&nbsp;common&nbsp;templates&nbsp;and&nbsp;use&nbsp;them&nbsp;with&nbsp;variant&nbsp;definitions&nbsp;for&nbsp;other&nbsp;templates</span><br>
<span class="lineno"></span><span class="comment" id="3336433">//&nbsp;by&nbsp;adding&nbsp;the&nbsp;variants&nbsp;after&nbsp;the&nbsp;clone&nbsp;is&nbsp;made.</span><br>
<span class="lineno">185</span><span class="comment" id="3336484">//</span><br>
<span class="lineno"></span><span class="comment" id="3336487">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;t&nbsp;has&nbsp;already&nbsp;been&nbsp;executed.</span><br>
<span class="lineno"></span><span class="keyword" id="3336542">func</span>&nbsp;<span class="op" id="3336547">(</span><span class="ident" id="3336548">t</span>&nbsp;<span class="op" id="3336550">*</span><span class="ident" id="3336551"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3336559">)</span>&nbsp;<span class="ident" id="3336561">Clone</span><span class="op" id="3336566">(</span><span class="op" id="3336567">)</span>&nbsp;<span class="op" id="3336569">(</span><span class="op" id="3336570">*</span><span class="ident" id="3336571"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3336579">,</span>&nbsp;<span class="builtintype" id="3336581">error</span><span class="op" id="3336586">)</span>&nbsp;<span class="op" id="3336588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336591"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3336592">.</span><span class="ident" id="3336593">nameSpace</span><span class="op" id="3336602">.</span><span class="ident" id="3336603">mu</span><span class="op" id="3336605">.</span><span class="ident" id="3336606">Lock</span><span class="op" id="3336610">(</span><span class="op" id="3336611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336614">defer</span>&nbsp;<span class="ident" id="3336620"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3336621">.</span><span class="ident" id="3336622">nameSpace</span><span class="op" id="3336631">.</span><span class="ident" id="3336632">mu</span><span class="op" id="3336634">.</span><span class="ident" id="3336635">Unlock</span><span class="op" id="3336641">(</span><span class="op" id="3336642">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336645">if</span>&nbsp;<span class="ident" id="3336648"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3336649">.</span><span class="ident" id="3336650">escapeErr</span>&nbsp;<span class="op" id="3336660">!=</span>&nbsp;<span class="ident" id="3336663">nil</span>&nbsp;<span class="op" id="3336667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336671">return</span>&nbsp;<span class="ident" id="3336678">nil</span><span class="op" id="3336681">,</span>&nbsp;<span class="ident" id="3336683"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3336686">.</span><span class="ident" id="3336687">Errorf</span><span class="op" id="3336693">(</span><span class="string" id="3336694">&#34;html/template:&nbsp;cannot&nbsp;Clone&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="3336748">,</span>&nbsp;<span class="ident" id="3336750"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3336751">.</span><span class="ident" id="3336752">Name</span><span class="op" id="3336756">(</span><span class="op" id="3336757">)</span><span class="op" id="3336758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336764">textClone</span><span class="op" id="3336773">,</span>&nbsp;<span class="ident" id="3336775">err</span>&nbsp;<span class="op" id="3336779">:=</span>&nbsp;<span class="ident" id="3336782"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3336783">.</span><span class="ident" id="3336784">text</span><span class="op" id="3336788">.</span><span class="ident" id="3336789">Clone</span><span class="op" id="3336794">(</span><span class="op" id="3336795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336798">if</span>&nbsp;<span class="ident" id="3336801"><a href="/html/template/template.go.html#3336775">err</a></span>&nbsp;<span class="op" id="3336805">!=</span>&nbsp;<span class="ident" id="3336808">nil</span>&nbsp;<span class="op" id="3336812">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336816">return</span>&nbsp;<span class="ident" id="3336823">nil</span><span class="op" id="3336826">,</span>&nbsp;<span class="ident" id="3336828"><a href="/html/template/template.go.html#3336775">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336836">ret</span>&nbsp;<span class="op" id="3336840">:=</span>&nbsp;<span class="op" id="3336843">&amp;</span><span class="ident" id="3336844"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3336852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336856">nil</span><span class="op" id="3336859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336863"><a href="/html/template/template.go.html#3336764">textClone</a></span><span class="op" id="3336872">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336876"><a href="/html/template/template.go.html#3336764">textClone</a></span><span class="op" id="3336885">.</span><span class="ident" id="3336886">Tree</span><span class="op" id="3336890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336894">&amp;</span><span class="ident" id="3336895"><a href="/html/template/template.go.html#3331597">nameSpace</a></span><span class="op" id="3336904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336909">set</span><span class="op" id="3336912">:</span>&nbsp;<span class="builtinfunc" id="3336914">make</span><span class="op" id="3336918">(</span><span class="keyword" id="3336919">map</span><span class="op" id="3336922">[</span><span class="builtintype" id="3336923">string</span><span class="op" id="3336929">]</span><span class="op" id="3336930">*</span><span class="ident" id="3336931"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3336939">)</span><span class="op" id="3336940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336944">}</span><span class="op" id="3336945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3336948">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3336951">for</span>&nbsp;<span class="ident" id="3336955">_</span><span class="op" id="3336956">,</span>&nbsp;<span class="ident" id="3336958">x</span>&nbsp;<span class="op" id="3336960">:=</span>&nbsp;<span class="keyword" id="3336963">range</span>&nbsp;<span class="ident" id="3336969"><a href="/html/template/template.go.html#3336764">textClone</a></span><span class="op" id="3336978">.</span><span class="ident" id="3336979">Templates</span><span class="op" id="3336988">(</span><span class="op" id="3336989">)</span>&nbsp;<span class="op" id="3336991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3336995">name</span>&nbsp;<span class="op" id="3337000">:=</span>&nbsp;<span class="ident" id="3337003"><a href="/html/template/template.go.html#3336958">x</a></span><span class="op" id="3337004">.</span><span class="ident" id="3337005">Name</span><span class="op" id="3337009">(</span><span class="op" id="3337010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337014">src</span>&nbsp;<span class="op" id="3337018">:=</span>&nbsp;<span class="ident" id="3337021"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3337022">.</span><span class="ident" id="3337023">set</span><span class="op" id="3337026">[</span><span class="ident" id="3337027"><a href="/html/template/template.go.html#3336995">name</a></span><span class="op" id="3337031">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337035">if</span>&nbsp;<span class="ident" id="3337038"><a href="/html/template/template.go.html#3337014">src</a></span>&nbsp;<span class="op" id="3337042">==</span>&nbsp;<span class="ident" id="3337045">nil</span>&nbsp;<span class="op" id="3337049">||</span>&nbsp;<span class="ident" id="3337052"><a href="/html/template/template.go.html#3337014">src</a></span><span class="op" id="3337055">.</span><span class="ident" id="3337056">escapeErr</span>&nbsp;<span class="op" id="3337066">!=</span>&nbsp;<span class="ident" id="3337069">nil</span>&nbsp;<span class="op" id="3337073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337078">return</span>&nbsp;<span class="ident" id="3337085">nil</span><span class="op" id="3337088">,</span>&nbsp;<span class="ident" id="3337090"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3337093">.</span><span class="ident" id="3337094">Errorf</span><span class="op" id="3337100">(</span><span class="string" id="3337101">&#34;html/template:&nbsp;cannot&nbsp;Clone&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="3337155">,</span>&nbsp;<span class="ident" id="3337157"><a href="/html/template/template.go.html#3336548">t</a></span><span class="op" id="3337158">.</span><span class="ident" id="3337159">Name</span><span class="op" id="3337163">(</span><span class="op" id="3337164">)</span><span class="op" id="3337165">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337173"><a href="/html/template/template.go.html#3336958">x</a></span><span class="op" id="3337174">.</span><span class="ident" id="3337175">Tree</span>&nbsp;<span class="op" id="3337180">=</span>&nbsp;<span class="ident" id="3337182"><a href="/html/template/template.go.html#3336958">x</a></span><span class="op" id="3337183">.</span><span class="ident" id="3337184">Tree</span><span class="op" id="3337188">.</span><span class="ident" id="3337189">Copy</span><span class="op" id="3337193">(</span><span class="op" id="3337194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337198"><a href="/html/template/template.go.html#3336836">ret</a></span><span class="op" id="3337201">.</span><span class="ident" id="3337202">set</span><span class="op" id="3337205">[</span><span class="ident" id="3337206"><a href="/html/template/template.go.html#3336995">name</a></span><span class="op" id="3337210">]</span>&nbsp;<span class="op" id="3337212">=</span>&nbsp;<span class="op" id="3337214">&amp;</span><span class="ident" id="3337215"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337228">nil</span><span class="op" id="3337231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337236"><a href="/html/template/template.go.html#3336958">x</a></span><span class="op" id="3337237">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337242"><a href="/html/template/template.go.html#3336958">x</a></span><span class="op" id="3337243">.</span><span class="ident" id="3337244">Tree</span><span class="op" id="3337248">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337253"><a href="/html/template/template.go.html#3336836">ret</a></span><span class="op" id="3337256">.</span><span class="ident" id="3337257">nameSpace</span><span class="op" id="3337266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337276">return</span>&nbsp;<span class="ident" id="3337283"><a href="/html/template/template.go.html#3336836">ret</a></span><span class="op" id="3337286">,</span>&nbsp;<span class="ident" id="3337288">nil</span><br>
<span class="lineno">220</span><span class="op" id="3337292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3337295">//&nbsp;New&nbsp;allocates&nbsp;a&nbsp;new&nbsp;HTML&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="3337353">func</span>&nbsp;<span class="ident" id="3337358">New</span><span class="op" id="3337361">(</span><span class="ident" id="3337362">name</span>&nbsp;<span class="builtintype" id="3337367">string</span><span class="op" id="3337373">)</span>&nbsp;<span class="op" id="3337375">*</span><span class="ident" id="3337376"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3337385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337388">tmpl</span>&nbsp;<span class="op" id="3337393">:=</span>&nbsp;<span class="op" id="3337396">&amp;</span><span class="ident" id="3337397"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337405">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337409">nil</span><span class="op" id="3337412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337416"><a href="/html/template/template.go.html#3330831">template</a></span><span class="op" id="3337424">.</span><span class="ident" id="3337425">New</span><span class="op" id="3337428">(</span><span class="ident" id="3337429"><a href="/html/template/template.go.html#3337362">name</a></span><span class="op" id="3337433">)</span><span class="op" id="3337434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337438">nil</span><span class="op" id="3337441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337445">&amp;</span><span class="ident" id="3337446"><a href="/html/template/template.go.html#3331597">nameSpace</a></span><span class="op" id="3337455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337460">set</span><span class="op" id="3337463">:</span>&nbsp;<span class="builtinfunc" id="3337465">make</span><span class="op" id="3337469">(</span><span class="keyword" id="3337470">map</span><span class="op" id="3337473">[</span><span class="builtintype" id="3337474">string</span><span class="op" id="3337480">]</span><span class="op" id="3337481">*</span><span class="ident" id="3337482"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337490">)</span><span class="op" id="3337491">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337495">}</span><span class="op" id="3337496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3337499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337502"><a href="/html/template/template.go.html#3337388">tmpl</a></span><span class="op" id="3337506">.</span><span class="ident" id="3337507">set</span><span class="op" id="3337510">[</span><span class="ident" id="3337511"><a href="/html/template/template.go.html#3337362">name</a></span><span class="op" id="3337515">]</span>&nbsp;<span class="op" id="3337517">=</span>&nbsp;<span class="ident" id="3337519"><a href="/html/template/template.go.html#3337388">tmpl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337525">return</span>&nbsp;<span class="ident" id="3337532"><a href="/html/template/template.go.html#3337388">tmpl</a></span><br>
<span class="lineno"></span><span class="op" id="3337537">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="3337540">//&nbsp;New&nbsp;allocates&nbsp;a&nbsp;new&nbsp;HTML&nbsp;template&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3337607">//&nbsp;and&nbsp;with&nbsp;the&nbsp;same&nbsp;delimiters.&nbsp;The&nbsp;association,&nbsp;which&nbsp;is&nbsp;transitive,</span><br>
<span class="lineno"></span><span class="comment" id="3337678">//&nbsp;allows&nbsp;one&nbsp;template&nbsp;to&nbsp;invoke&nbsp;another&nbsp;with&nbsp;a&nbsp;{{template}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="keyword" id="3337747">func</span>&nbsp;<span class="op" id="3337752">(</span><span class="ident" id="3337753">t</span>&nbsp;<span class="op" id="3337755">*</span><span class="ident" id="3337756"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337764">)</span>&nbsp;<span class="ident" id="3337766">New</span><span class="op" id="3337769">(</span><span class="ident" id="3337770">name</span>&nbsp;<span class="builtintype" id="3337775">string</span><span class="op" id="3337781">)</span>&nbsp;<span class="op" id="3337783">*</span><span class="ident" id="3337784"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3337793">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337796"><a href="/html/template/template.go.html#3337753">t</a></span><span class="op" id="3337797">.</span><span class="ident" id="3337798">nameSpace</span><span class="op" id="3337807">.</span><span class="ident" id="3337808">mu</span><span class="op" id="3337810">.</span><span class="ident" id="3337811">Lock</span><span class="op" id="3337815">(</span><span class="op" id="3337816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337819">defer</span>&nbsp;<span class="ident" id="3337825"><a href="/html/template/template.go.html#3337753">t</a></span><span class="op" id="3337826">.</span><span class="ident" id="3337827">nameSpace</span><span class="op" id="3337836">.</span><span class="ident" id="3337837">mu</span><span class="op" id="3337839">.</span><span class="ident" id="3337840">Unlock</span><span class="op" id="3337846">(</span><span class="op" id="3337847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3337850">return</span>&nbsp;<span class="ident" id="3337857"><a href="/html/template/template.go.html#3337753">t</a></span><span class="op" id="3337858">.</span><span class="builtinfunc" id="3337859">new</span><span class="op" id="3337862">(</span><span class="ident" id="3337863"><a href="/html/template/template.go.html#3337770">name</a></span><span class="op" id="3337867">)</span><br>
<span class="lineno"></span><span class="op" id="3337869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="3337872">//&nbsp;new&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;New,&nbsp;without&nbsp;the&nbsp;lock.</span><br>
<span class="lineno"></span><span class="keyword" id="3337927">func</span>&nbsp;<span class="op" id="3337932">(</span><span class="ident" id="3337933">t</span>&nbsp;<span class="op" id="3337935">*</span><span class="ident" id="3337936"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337944">)</span>&nbsp;<span class="builtinfunc" id="3337946">new</span><span class="op" id="3337949">(</span><span class="ident" id="3337950">name</span>&nbsp;<span class="builtintype" id="3337955">string</span><span class="op" id="3337961">)</span>&nbsp;<span class="op" id="3337963">*</span><span class="ident" id="3337964"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3337973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337976">tmpl</span>&nbsp;<span class="op" id="3337981">:=</span>&nbsp;<span class="op" id="3337984">&amp;</span><span class="ident" id="3337985"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3337993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3337997">nil</span><span class="op" id="3338000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3338004"><a href="/html/template/template.go.html#3337933">t</a></span><span class="op" id="3338005">.</span><span class="ident" id="3338006">text</span><span class="op" id="3338010">.</span><span class="ident" id="3338011">New</span><span class="op" id="3338014">(</span><span class="ident" id="3338015"><a href="/html/template/template.go.html#3337950">name</a></span><span class="op" id="3338019">)</span><span class="op" id="3338020">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3338024">nil</span><span class="op" id="3338027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3338031"><a href="/html/template/template.go.html#3337933">t</a></span><span class="op" id="3338032">.</span><span class="ident" id="3338033">nameSpace</span><span class="op" id="3338042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3338045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3338048"><a href="/html/template/template.go.html#3337976">tmpl</a></span><span class="op" id="3338052">.</span><span class="ident" id="3338053">set</span><span class="op" id="3338056">[</span><span class="ident" id="3338057"><a href="/html/template/template.go.html#3337950">name</a></span><span class="op" id="3338061">]</span>&nbsp;<span class="op" id="3338063">=</span>&nbsp;<span class="ident" id="3338065"><a href="/html/template/template.go.html#3337976">tmpl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3338071">return</span>&nbsp;<span class="ident" id="3338078"><a href="/html/template/template.go.html#3337976">tmpl</a></span><br>
<span class="lineno">255</span><span class="op" id="3338083">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3338086">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="3338128">func</span>&nbsp;<span class="op" id="3338133">(</span><span class="ident" id="3338134">t</span>&nbsp;<span class="op" id="3338136">*</span><span class="ident" id="3338137"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3338145">)</span>&nbsp;<span class="ident" id="3338147">Name</span><span class="op" id="3338151">(</span><span class="op" id="3338152">)</span>&nbsp;<span class="builtintype" id="3338154">string</span>&nbsp;<span class="op" id="3338161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3338164">return</span>&nbsp;<span class="ident" id="3338171"><a href="/html/template/template.go.html#3338134">t</a></span><span class="op" id="3338172">.</span><span class="ident" id="3338173">text</span><span class="op" id="3338177">.</span><span class="ident" id="3338178">Name</span><span class="op" id="3338182">(</span><span class="op" id="3338183">)</span><br>
<span class="lineno">260</span><span class="op" id="3338185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3338188">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3338257">//&nbsp;functions.&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two</span><br>
<span class="lineno"></span><span class="comment" id="3338332">//&nbsp;return&nbsp;values&nbsp;of&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the</span><br>
<span class="lineno">265</span><span class="comment" id="3338406">//&nbsp;second&nbsp;(error)&nbsp;argument&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution</span><br>
<span class="lineno"></span><span class="comment" id="3338482">//&nbsp;terminates&nbsp;and&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.&nbsp;FuncMap&nbsp;has&nbsp;the&nbsp;same&nbsp;base&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="3338559">//&nbsp;as&nbsp;FuncMap&nbsp;in&nbsp;&#34;text/template&#34;,&nbsp;copied&nbsp;here&nbsp;so&nbsp;clients&nbsp;need&nbsp;not&nbsp;import</span><br>
<span class="lineno"></span><span class="comment" id="3338632">//&nbsp;&#34;text/template&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3338652">type</span>&nbsp;<span class="ident" id="3338657">FuncMap</span>&nbsp;<span class="keyword" id="3338665">map</span><span class="op" id="3338668">[</span><span class="builtintype" id="3338669">string</span><span class="op" id="3338675">]</span><span class="keyword" id="3338676">interface</span><span class="op" id="3338685">{</span><span class="op" id="3338686">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="3338689">//&nbsp;Funcs&nbsp;adds&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;argument&nbsp;map&nbsp;to&nbsp;the&nbsp;template&#39;s&nbsp;function&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="3338768">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;a&nbsp;value&nbsp;in&nbsp;the&nbsp;map&nbsp;is&nbsp;not&nbsp;a&nbsp;function&nbsp;with&nbsp;appropriate&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="3338845">//&nbsp;type.&nbsp;However,&nbsp;it&nbsp;is&nbsp;legal&nbsp;to&nbsp;overwrite&nbsp;elements&nbsp;of&nbsp;the&nbsp;map.&nbsp;The&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="3338920">//&nbsp;value&nbsp;is&nbsp;the&nbsp;template,&nbsp;so&nbsp;calls&nbsp;can&nbsp;be&nbsp;chained.</span><br>
<span class="lineno">275</span><span class="keyword" id="3338971">func</span>&nbsp;<span class="op" id="3338976">(</span><span class="ident" id="3338977">t</span>&nbsp;<span class="op" id="3338979">*</span><span class="ident" id="3338980"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3338988">)</span>&nbsp;<span class="ident" id="3338990">Funcs</span><span class="op" id="3338995">(</span><span class="ident" id="3338996">funcMap</span>&nbsp;<span class="ident" id="3339004"><a href="/html/template/template.go.html#3338657">FuncMap</a></span><span class="op" id="3339011">)</span>&nbsp;<span class="op" id="3339013">*</span><span class="ident" id="3339014"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3339023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3339026"><a href="/html/template/template.go.html#3338977">t</a></span><span class="op" id="3339027">.</span><span class="ident" id="3339028">text</span><span class="op" id="3339032">.</span><span class="ident" id="3339033">Funcs</span><span class="op" id="3339038">(</span><span class="ident" id="3339039"><a href="/html/template/template.go.html#3330831">template</a></span><span class="op" id="3339047">.</span><span class="ident" id="3339048">FuncMap</span><span class="op" id="3339055">(</span><span class="ident" id="3339056"><a href="/html/template/template.go.html#3338996">funcMap</a></span><span class="op" id="3339063">)</span><span class="op" id="3339064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3339067">return</span>&nbsp;<span class="ident" id="3339074"><a href="/html/template/template.go.html#3338977">t</a></span><br>
<span class="lineno"></span><span class="op" id="3339076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="3339079">//&nbsp;Delims&nbsp;sets&nbsp;the&nbsp;action&nbsp;delimiters&nbsp;to&nbsp;the&nbsp;specified&nbsp;strings,&nbsp;to&nbsp;be&nbsp;used&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="3339156">//&nbsp;subsequent&nbsp;calls&nbsp;to&nbsp;Parse,&nbsp;ParseFiles,&nbsp;or&nbsp;ParseGlob.&nbsp;Nested&nbsp;template</span><br>
<span class="lineno"></span><span class="comment" id="3339228">//&nbsp;definitions&nbsp;will&nbsp;inherit&nbsp;the&nbsp;settings.&nbsp;An&nbsp;empty&nbsp;delimiter&nbsp;stands&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3339304">//&nbsp;corresponding&nbsp;default:&nbsp;{{&nbsp;or&nbsp;}}.</span><br>
<span class="lineno"></span><span class="comment" id="3339340">//&nbsp;The&nbsp;return&nbsp;value&nbsp;is&nbsp;the&nbsp;template,&nbsp;so&nbsp;calls&nbsp;can&nbsp;be&nbsp;chained.</span><br>
<span class="lineno">285</span><span class="keyword" id="3339402">func</span>&nbsp;<span class="op" id="3339407">(</span><span class="ident" id="3339408">t</span>&nbsp;<span class="op" id="3339410">*</span><span class="ident" id="3339411"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3339419">)</span>&nbsp;<span class="ident" id="3339421">Delims</span><span class="op" id="3339427">(</span><span class="ident" id="3339428">left</span><span class="op" id="3339432">,</span>&nbsp;<span class="ident" id="3339434">right</span>&nbsp;<span class="builtintype" id="3339440">string</span><span class="op" id="3339446">)</span>&nbsp;<span class="op" id="3339448">*</span><span class="ident" id="3339449"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3339458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3339461"><a href="/html/template/template.go.html#3339408">t</a></span><span class="op" id="3339462">.</span><span class="ident" id="3339463">text</span><span class="op" id="3339467">.</span><span class="ident" id="3339468">Delims</span><span class="op" id="3339474">(</span><span class="ident" id="3339475"><a href="/html/template/template.go.html#3339428">left</a></span><span class="op" id="3339479">,</span>&nbsp;<span class="ident" id="3339481"><a href="/html/template/template.go.html#3339434">right</a></span><span class="op" id="3339486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3339489">return</span>&nbsp;<span class="ident" id="3339496"><a href="/html/template/template.go.html#3339408">t</a></span><br>
<span class="lineno"></span><span class="op" id="3339498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="comment" id="3339501">//&nbsp;Lookup&nbsp;returns&nbsp;the&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;that&nbsp;is&nbsp;associated&nbsp;with&nbsp;t,</span><br>
<span class="lineno"></span><span class="comment" id="3339579">//&nbsp;or&nbsp;nil&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="3339619">func</span>&nbsp;<span class="op" id="3339624">(</span><span class="ident" id="3339625">t</span>&nbsp;<span class="op" id="3339627">*</span><span class="ident" id="3339628"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3339636">)</span>&nbsp;<span class="ident" id="3339638">Lookup</span><span class="op" id="3339644">(</span><span class="ident" id="3339645">name</span>&nbsp;<span class="builtintype" id="3339650">string</span><span class="op" id="3339656">)</span>&nbsp;<span class="op" id="3339658">*</span><span class="ident" id="3339659"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3339668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3339671"><a href="/html/template/template.go.html#3339625">t</a></span><span class="op" id="3339672">.</span><span class="ident" id="3339673">nameSpace</span><span class="op" id="3339682">.</span><span class="ident" id="3339683">mu</span><span class="op" id="3339685">.</span><span class="ident" id="3339686">Lock</span><span class="op" id="3339690">(</span><span class="op" id="3339691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3339694">defer</span>&nbsp;<span class="ident" id="3339700"><a href="/html/template/template.go.html#3339625">t</a></span><span class="op" id="3339701">.</span><span class="ident" id="3339702">nameSpace</span><span class="op" id="3339711">.</span><span class="ident" id="3339712">mu</span><span class="op" id="3339714">.</span><span class="ident" id="3339715">Unlock</span><span class="op" id="3339721">(</span><span class="op" id="3339722">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3339725">return</span>&nbsp;<span class="ident" id="3339732"><a href="/html/template/template.go.html#3339625">t</a></span><span class="op" id="3339733">.</span><span class="ident" id="3339734">set</span><span class="op" id="3339737">[</span><span class="ident" id="3339738"><a href="/html/template/template.go.html#3339645">name</a></span><span class="op" id="3339742">]</span><br>
<span class="lineno"></span><span class="op" id="3339744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3339747">//&nbsp;Must&nbsp;is&nbsp;a&nbsp;helper&nbsp;that&nbsp;wraps&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;function&nbsp;returning&nbsp;(*Template,&nbsp;error)</span><br>
<span class="lineno"></span><span class="comment" id="3339828">//&nbsp;and&nbsp;panics&nbsp;if&nbsp;the&nbsp;error&nbsp;is&nbsp;non-nil.&nbsp;It&nbsp;is&nbsp;intended&nbsp;for&nbsp;use&nbsp;in&nbsp;variable&nbsp;initializations</span><br>
<span class="lineno">300</span><span class="comment" id="3339918">//&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3339929">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;t&nbsp;=&nbsp;template.Must(template.New(&#34;name&#34;).Parse(&#34;html&#34;))</span><br>
<span class="lineno"></span><span class="keyword" id="3339990">func</span>&nbsp;<span class="ident" id="3339995">Must</span><span class="op" id="3339999">(</span><span class="ident" id="3340000">t</span>&nbsp;<span class="op" id="3340002">*</span><span class="ident" id="3340003"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340011">,</span>&nbsp;<span class="ident" id="3340013">err</span>&nbsp;<span class="builtintype" id="3340017">error</span><span class="op" id="3340022">)</span>&nbsp;<span class="op" id="3340024">*</span><span class="ident" id="3340025"><a href="/html/template/template.go.html#3330985">Template</a></span>&nbsp;<span class="op" id="3340034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3340037">if</span>&nbsp;<span class="ident" id="3340040"><a href="/html/template/template.go.html#3340013">err</a></span>&nbsp;<span class="op" id="3340044">!=</span>&nbsp;<span class="ident" id="3340047">nil</span>&nbsp;<span class="op" id="3340051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3340055">panic</span><span class="op" id="3340060">(</span><span class="ident" id="3340061"><a href="/html/template/template.go.html#3340013">err</a></span><span class="op" id="3340064">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3340067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3340070">return</span>&nbsp;<span class="ident" id="3340077"><a href="/html/template/template.go.html#3340000">t</a></span><br>
<span class="lineno"></span><span class="op" id="3340079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3340082">//&nbsp;ParseFiles&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from</span><br>
<span class="lineno">310</span><span class="comment" id="3340160">//&nbsp;the&nbsp;named&nbsp;files.&nbsp;The&nbsp;returned&nbsp;template&#39;s&nbsp;name&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3340239">//&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the&nbsp;first&nbsp;file.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="3340312">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;*Template&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3340384">func</span>&nbsp;<span class="ident" id="3340389">ParseFiles</span><span class="op" id="3340399">(</span><span class="ident" id="3340400">filenames</span>&nbsp;<span class="op" id="3340410">...</span><span class="builtintype" id="3340413">string</span><span class="op" id="3340419">)</span>&nbsp;<span class="op" id="3340421">(</span><span class="op" id="3340422">*</span><span class="ident" id="3340423"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340431">,</span>&nbsp;<span class="builtintype" id="3340433">error</span><span class="op" id="3340438">)</span>&nbsp;<span class="op" id="3340440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3340443">return</span>&nbsp;<span class="ident" id="3340450"><a href="/html/template/template.go.html#3340937">parseFiles</a></span><span class="op" id="3340460">(</span><span class="ident" id="3340461">nil</span><span class="op" id="3340464">,</span>&nbsp;<span class="ident" id="3340466"><a href="/html/template/template.go.html#3340400">filenames</a></span><span class="op" id="3340475">...</span><span class="op" id="3340478">)</span><br>
<span class="lineno">315</span><span class="op" id="3340480">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3340483">//&nbsp;ParseFiles&nbsp;parses&nbsp;the&nbsp;named&nbsp;files&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3340564">//&nbsp;t.&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;template&nbsp;is&nbsp;nil;</span><br>
<span class="lineno"></span><span class="comment" id="3340638">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;t.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno">320</span><span class="keyword" id="3340693">func</span>&nbsp;<span class="op" id="3340698">(</span><span class="ident" id="3340699">t</span>&nbsp;<span class="op" id="3340701">*</span><span class="ident" id="3340702"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340710">)</span>&nbsp;<span class="ident" id="3340712">ParseFiles</span><span class="op" id="3340722">(</span><span class="ident" id="3340723">filenames</span>&nbsp;<span class="op" id="3340733">...</span><span class="builtintype" id="3340736">string</span><span class="op" id="3340742">)</span>&nbsp;<span class="op" id="3340744">(</span><span class="op" id="3340745">*</span><span class="ident" id="3340746"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340754">,</span>&nbsp;<span class="builtintype" id="3340756">error</span><span class="op" id="3340761">)</span>&nbsp;<span class="op" id="3340763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3340766">return</span>&nbsp;<span class="ident" id="3340773"><a href="/html/template/template.go.html#3340937">parseFiles</a></span><span class="op" id="3340783">(</span><span class="ident" id="3340784"><a href="/html/template/template.go.html#3340699">t</a></span><span class="op" id="3340785">,</span>&nbsp;<span class="ident" id="3340787"><a href="/html/template/template.go.html#3340723">filenames</a></span><span class="op" id="3340796">...</span><span class="op" id="3340799">)</span><br>
<span class="lineno"></span><span class="op" id="3340801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3340804">//&nbsp;parseFiles&nbsp;is&nbsp;the&nbsp;helper&nbsp;for&nbsp;the&nbsp;method&nbsp;and&nbsp;function.&nbsp;If&nbsp;the&nbsp;argument</span><br>
<span class="lineno">325</span><span class="comment" id="3340877">//&nbsp;template&nbsp;is&nbsp;nil,&nbsp;it&nbsp;is&nbsp;created&nbsp;from&nbsp;the&nbsp;first&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="3340932">func</span>&nbsp;<span class="ident" id="3340937">parseFiles</span><span class="op" id="3340947">(</span><span class="ident" id="3340948">t</span>&nbsp;<span class="op" id="3340950">*</span><span class="ident" id="3340951"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340959">,</span>&nbsp;<span class="ident" id="3340961">filenames</span>&nbsp;<span class="op" id="3340971">...</span><span class="builtintype" id="3340974">string</span><span class="op" id="3340980">)</span>&nbsp;<span class="op" id="3340982">(</span><span class="op" id="3340983">*</span><span class="ident" id="3340984"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3340992">,</span>&nbsp;<span class="builtintype" id="3340994">error</span><span class="op" id="3340999">)</span>&nbsp;<span class="op" id="3341001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341004">if</span>&nbsp;<span class="builtinfunc" id="3341007">len</span><span class="op" id="3341010">(</span><span class="ident" id="3341011"><a href="/html/template/template.go.html#3340961">filenames</a></span><span class="op" id="3341020">)</span>&nbsp;<span class="op" id="3341022">==</span>&nbsp;<span class="num" id="3341025">0</span>&nbsp;<span class="op" id="3341027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341031">//&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem,&nbsp;but&nbsp;be&nbsp;consistent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341077">return</span>&nbsp;<span class="ident" id="3341084">nil</span><span class="op" id="3341087">,</span>&nbsp;<span class="ident" id="3341089"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3341092">.</span><span class="ident" id="3341093">Errorf</span><span class="op" id="3341099">(</span><span class="string" id="3341100">&#34;html/template:&nbsp;no&nbsp;files&nbsp;named&nbsp;in&nbsp;call&nbsp;to&nbsp;ParseFiles&#34;</span><span class="op" id="3341153">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341159">for</span>&nbsp;<span class="ident" id="3341163">_</span><span class="op" id="3341164">,</span>&nbsp;<span class="ident" id="3341166">filename</span>&nbsp;<span class="op" id="3341175">:=</span>&nbsp;<span class="keyword" id="3341178">range</span>&nbsp;<span class="ident" id="3341184"><a href="/html/template/template.go.html#3340961">filenames</a></span>&nbsp;<span class="op" id="3341194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341198">b</span><span class="op" id="3341199">,</span>&nbsp;<span class="ident" id="3341201">err</span>&nbsp;<span class="op" id="3341205">:=</span>&nbsp;<span class="ident" id="3341208"><a href="/html/template/template.go.html#3330793">ioutil</a></span><span class="op" id="3341214">.</span><span class="ident" id="3341215">ReadFile</span><span class="op" id="3341223">(</span><span class="ident" id="3341224"><a href="/html/template/template.go.html#3341166">filename</a></span><span class="op" id="3341232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341236">if</span>&nbsp;<span class="ident" id="3341239"><a href="/html/template/template.go.html#3341201">err</a></span>&nbsp;<span class="op" id="3341243">!=</span>&nbsp;<span class="ident" id="3341246">nil</span>&nbsp;<span class="op" id="3341250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341255">return</span>&nbsp;<span class="ident" id="3341262">nil</span><span class="op" id="3341265">,</span>&nbsp;<span class="ident" id="3341267"><a href="/html/template/template.go.html#3341201">err</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341277">s</span>&nbsp;<span class="op" id="3341279">:=</span>&nbsp;<span class="builtintype" id="3341282">string</span><span class="op" id="3341288">(</span><span class="ident" id="3341289"><a href="/html/template/template.go.html#3341198">b</a></span><span class="op" id="3341290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341294">name</span>&nbsp;<span class="op" id="3341299">:=</span>&nbsp;<span class="ident" id="3341302"><a href="/html/template/template.go.html#3330806">filepath</a></span><span class="op" id="3341310">.</span><span class="ident" id="3341311">Base</span><span class="op" id="3341315">(</span><span class="ident" id="3341316"><a href="/html/template/template.go.html#3341166">filename</a></span><span class="op" id="3341324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341328">//&nbsp;First&nbsp;template&nbsp;becomes&nbsp;return&nbsp;value&nbsp;if&nbsp;not&nbsp;already&nbsp;defined,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341393">//&nbsp;and&nbsp;we&nbsp;use&nbsp;that&nbsp;one&nbsp;for&nbsp;subsequent&nbsp;New&nbsp;calls&nbsp;to&nbsp;associate</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341456">//&nbsp;all&nbsp;the&nbsp;templates&nbsp;together.&nbsp;Also,&nbsp;if&nbsp;this&nbsp;file&nbsp;has&nbsp;the&nbsp;same&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341526">//&nbsp;as&nbsp;t,&nbsp;this&nbsp;file&nbsp;becomes&nbsp;the&nbsp;contents&nbsp;of&nbsp;t,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341577">//&nbsp;&nbsp;t,&nbsp;err&nbsp;:=&nbsp;New(name).Funcs(xxx).ParseFiles(name)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341631">//&nbsp;works.&nbsp;Otherwise&nbsp;we&nbsp;create&nbsp;a&nbsp;new&nbsp;template&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341697">var</span>&nbsp;<span class="ident" id="3341701">tmpl</span>&nbsp;<span class="op" id="3341706">*</span><span class="ident" id="3341707"><a href="/html/template/template.go.html#3330985">Template</a></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341718">if</span>&nbsp;<span class="ident" id="3341721"><a href="/html/template/template.go.html#3340948">t</a></span>&nbsp;<span class="op" id="3341723">==</span>&nbsp;<span class="ident" id="3341726">nil</span>&nbsp;<span class="op" id="3341730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341735"><a href="/html/template/template.go.html#3340948">t</a></span>&nbsp;<span class="op" id="3341737">=</span>&nbsp;<span class="ident" id="3341739"><a href="/html/template/template.go.html#3337358">New</a></span><span class="op" id="3341742">(</span><span class="ident" id="3341743"><a href="/html/template/template.go.html#3341294">name</a></span><span class="op" id="3341747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341755">if</span>&nbsp;<span class="ident" id="3341758"><a href="/html/template/template.go.html#3341294">name</a></span>&nbsp;<span class="op" id="3341763">==</span>&nbsp;<span class="ident" id="3341766"><a href="/html/template/template.go.html#3340948">t</a></span><span class="op" id="3341767">.</span><span class="ident" id="3341768">Name</span><span class="op" id="3341772">(</span><span class="op" id="3341773">)</span>&nbsp;<span class="op" id="3341775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341780"><a href="/html/template/template.go.html#3341701">tmpl</a></span>&nbsp;<span class="op" id="3341785">=</span>&nbsp;<span class="ident" id="3341787"><a href="/html/template/template.go.html#3340948">t</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341791">}</span>&nbsp;<span class="keyword" id="3341793">else</span>&nbsp;<span class="op" id="3341798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341803"><a href="/html/template/template.go.html#3341701">tmpl</a></span>&nbsp;<span class="op" id="3341808">=</span>&nbsp;<span class="ident" id="3341810"><a href="/html/template/template.go.html#3340948">t</a></span><span class="op" id="3341811">.</span><span class="ident" id="3341812">New</span><span class="op" id="3341815">(</span><span class="ident" id="3341816"><a href="/html/template/template.go.html#3341294">name</a></span><span class="op" id="3341820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341828">_</span><span class="op" id="3341829">,</span>&nbsp;<span class="ident" id="3341831"><a href="/html/template/template.go.html#3341201">err</a></span>&nbsp;<span class="op" id="3341835">=</span>&nbsp;<span class="ident" id="3341837"><a href="/html/template/template.go.html#3341701">tmpl</a></span><span class="op" id="3341841">.</span><span class="ident" id="3341842">Parse</span><span class="op" id="3341847">(</span><span class="ident" id="3341848"><a href="/html/template/template.go.html#3341277">s</a></span><span class="op" id="3341849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341853">if</span>&nbsp;<span class="ident" id="3341856"><a href="/html/template/template.go.html#3341201">err</a></span>&nbsp;<span class="op" id="3341860">!=</span>&nbsp;<span class="ident" id="3341863">nil</span>&nbsp;<span class="op" id="3341867">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341872">return</span>&nbsp;<span class="ident" id="3341879">nil</span><span class="op" id="3341882">,</span>&nbsp;<span class="ident" id="3341884"><a href="/html/template/template.go.html#3341201">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341896">return</span>&nbsp;<span class="ident" id="3341903"><a href="/html/template/template.go.html#3340948">t</a></span><span class="op" id="3341904">,</span>&nbsp;<span class="ident" id="3341906">nil</span><br>
<span class="lineno"></span><span class="op" id="3341910">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="3341913">//&nbsp;ParseGlob&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3341994">//&nbsp;files&nbsp;identified&nbsp;by&nbsp;the&nbsp;pattern,&nbsp;which&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="3342070">//&nbsp;returned&nbsp;template&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3342146">//&nbsp;first&nbsp;file&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.&nbsp;ParseGlob&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling</span><br>
<span class="lineno">365</span><span class="comment" id="3342219">//&nbsp;ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="3342280">func</span>&nbsp;<span class="ident" id="3342285">ParseGlob</span><span class="op" id="3342294">(</span><span class="ident" id="3342295">pattern</span>&nbsp;<span class="builtintype" id="3342303">string</span><span class="op" id="3342309">)</span>&nbsp;<span class="op" id="3342311">(</span><span class="op" id="3342312">*</span><span class="ident" id="3342313"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3342321">,</span>&nbsp;<span class="builtintype" id="3342323">error</span><span class="op" id="3342328">)</span>&nbsp;<span class="op" id="3342330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342333">return</span>&nbsp;<span class="ident" id="3342340"><a href="/html/template/template.go.html#3342858">parseGlob</a></span><span class="op" id="3342349">(</span><span class="ident" id="3342350">nil</span><span class="op" id="3342353">,</span>&nbsp;<span class="ident" id="3342355"><a href="/html/template/template.go.html#3342295">pattern</a></span><span class="op" id="3342362">)</span><br>
<span class="lineno"></span><span class="op" id="3342364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="3342367">//&nbsp;ParseGlob&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;in&nbsp;the&nbsp;files&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3342443">//&nbsp;pattern&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with&nbsp;t.&nbsp;The&nbsp;pattern&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3342516">//&nbsp;processed&nbsp;by&nbsp;filepath.Glob&nbsp;and&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;ParseGlob&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3342593">//&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;t.ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3342669">//&nbsp;pattern.</span><br>
<span class="lineno">375</span><span class="keyword" id="3342681">func</span>&nbsp;<span class="op" id="3342686">(</span><span class="ident" id="3342687">t</span>&nbsp;<span class="op" id="3342689">*</span><span class="ident" id="3342690"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3342698">)</span>&nbsp;<span class="ident" id="3342700">ParseGlob</span><span class="op" id="3342709">(</span><span class="ident" id="3342710">pattern</span>&nbsp;<span class="builtintype" id="3342718">string</span><span class="op" id="3342724">)</span>&nbsp;<span class="op" id="3342726">(</span><span class="op" id="3342727">*</span><span class="ident" id="3342728"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3342736">,</span>&nbsp;<span class="builtintype" id="3342738">error</span><span class="op" id="3342743">)</span>&nbsp;<span class="op" id="3342745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342748">return</span>&nbsp;<span class="ident" id="3342755"><a href="/html/template/template.go.html#3342858">parseGlob</a></span><span class="op" id="3342764">(</span><span class="ident" id="3342765"><a href="/html/template/template.go.html#3342687">t</a></span><span class="op" id="3342766">,</span>&nbsp;<span class="ident" id="3342768"><a href="/html/template/template.go.html#3342710">pattern</a></span><span class="op" id="3342775">)</span><br>
<span class="lineno"></span><span class="op" id="3342777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3342780">//&nbsp;parseGlob&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;function&nbsp;and&nbsp;method&nbsp;ParseGlob.</span><br>
<span class="lineno">380</span><span class="keyword" id="3342853">func</span>&nbsp;<span class="ident" id="3342858">parseGlob</span><span class="op" id="3342867">(</span><span class="ident" id="3342868">t</span>&nbsp;<span class="op" id="3342870">*</span><span class="ident" id="3342871"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3342879">,</span>&nbsp;<span class="ident" id="3342881">pattern</span>&nbsp;<span class="builtintype" id="3342889">string</span><span class="op" id="3342895">)</span>&nbsp;<span class="op" id="3342897">(</span><span class="op" id="3342898">*</span><span class="ident" id="3342899"><a href="/html/template/template.go.html#3330985">Template</a></span><span class="op" id="3342907">,</span>&nbsp;<span class="builtintype" id="3342909">error</span><span class="op" id="3342914">)</span>&nbsp;<span class="op" id="3342916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342919">filenames</span><span class="op" id="3342928">,</span>&nbsp;<span class="ident" id="3342930">err</span>&nbsp;<span class="op" id="3342934">:=</span>&nbsp;<span class="ident" id="3342937"><a href="/html/template/template.go.html#3330806">filepath</a></span><span class="op" id="3342945">.</span><span class="ident" id="3342946">Glob</span><span class="op" id="3342950">(</span><span class="ident" id="3342951"><a href="/html/template/template.go.html#3342881">pattern</a></span><span class="op" id="3342958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342961">if</span>&nbsp;<span class="ident" id="3342964"><a href="/html/template/template.go.html#3342930">err</a></span>&nbsp;<span class="op" id="3342968">!=</span>&nbsp;<span class="ident" id="3342971">nil</span>&nbsp;<span class="op" id="3342975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342979">return</span>&nbsp;<span class="ident" id="3342986">nil</span><span class="op" id="3342989">,</span>&nbsp;<span class="ident" id="3342991"><a href="/html/template/template.go.html#3342930">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342996">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342999">if</span>&nbsp;<span class="builtinfunc" id="3343002">len</span><span class="op" id="3343005">(</span><span class="ident" id="3343006"><a href="/html/template/template.go.html#3342919">filenames</a></span><span class="op" id="3343015">)</span>&nbsp;<span class="op" id="3343017">==</span>&nbsp;<span class="num" id="3343020">0</span>&nbsp;<span class="op" id="3343022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343026">return</span>&nbsp;<span class="ident" id="3343033">nil</span><span class="op" id="3343036">,</span>&nbsp;<span class="ident" id="3343038"><a href="/html/template/template.go.html#3330780">fmt</a></span><span class="op" id="3343041">.</span><span class="ident" id="3343042">Errorf</span><span class="op" id="3343048">(</span><span class="string" id="3343049">&#34;html/template:&nbsp;pattern&nbsp;matches&nbsp;no&nbsp;files:&nbsp;%#q&#34;</span><span class="op" id="3343095">,</span>&nbsp;<span class="ident" id="3343097"><a href="/html/template/template.go.html#3342881">pattern</a></span><span class="op" id="3343104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343110">return</span>&nbsp;<span class="ident" id="3343117"><a href="/html/template/template.go.html#3340937">parseFiles</a></span><span class="op" id="3343127">(</span><span class="ident" id="3343128"><a href="/html/template/template.go.html#3342868">t</a></span><span class="op" id="3343129">,</span>&nbsp;<span class="ident" id="3343131"><a href="/html/template/template.go.html#3342919">filenames</a></span><span class="op" id="3343140">...</span><span class="op" id="3343143">)</span><br>
<span class="lineno"></span><span class="op" id="3343145">}</span>
</div>
</body>
</html>
