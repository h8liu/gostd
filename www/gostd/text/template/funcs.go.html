<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html" class="current">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4577388">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4577443">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4577497">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4577548">package</span>&nbsp;<span class="ident" id="4577556">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4577566">import</span>&nbsp;<span class="op" id="4577573">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577576">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577585">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577595">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577602">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577608">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577619">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577630">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577641">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4577652">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4577667">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4577670">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="4577750">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4577831">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="4577903">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4577983">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4578014">type</span>&nbsp;<span class="ident" id="4578019">FuncMap</span>&nbsp;<span class="keyword" id="4578027">map</span><span class="op" id="4578030">[</span><span class="builtintype" id="4578031">string</span><span class="op" id="4578037">]</span><span class="keyword" id="4578038">interface</span><span class="op" id="4578047">{</span><span class="op" id="4578048">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4578051">var</span>&nbsp;<span class="ident" id="4578055">builtins</span>&nbsp;<span class="op" id="4578064">=</span>&nbsp;<span class="ident" id="4578066">FuncMap</span><span class="op" id="4578073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578076">&#34;and&#34;</span><span class="op" id="4578081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578088">and</span><span class="op" id="4578091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578094">&#34;call&#34;</span><span class="op" id="4578100">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578106">call</span><span class="op" id="4578110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578113">&#34;html&#34;</span><span class="op" id="4578119">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578125">HTMLEscaper</span><span class="op" id="4578136">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578139">&#34;index&#34;</span><span class="op" id="4578146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578151">index</span><span class="op" id="4578156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578159">&#34;js&#34;</span><span class="op" id="4578163">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578171">JSEscaper</span><span class="op" id="4578180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578183">&#34;len&#34;</span><span class="op" id="4578188">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578195">length</span><span class="op" id="4578201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578204">&#34;not&#34;</span><span class="op" id="4578209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578216">not</span><span class="op" id="4578219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578222">&#34;or&#34;</span><span class="op" id="4578226">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578234">or</span><span class="op" id="4578236">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578239">&#34;print&#34;</span><span class="op" id="4578246">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4578251">fmt</span><span class="op" id="4578254">.</span><span class="ident" id="4578255">Sprint</span><span class="op" id="4578261">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578264">&#34;printf&#34;</span><span class="op" id="4578272">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4578276">fmt</span><span class="op" id="4578279">.</span><span class="ident" id="4578280">Sprintf</span><span class="op" id="4578287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578290">&#34;println&#34;</span><span class="op" id="4578299">:</span>&nbsp;&nbsp;<span class="ident" id="4578302">fmt</span><span class="op" id="4578305">.</span><span class="ident" id="4578306">Sprintln</span><span class="op" id="4578314">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578317">&#34;urlquery&#34;</span><span class="op" id="4578327">:</span>&nbsp;<span class="ident" id="4578329">URLQueryEscaper</span><span class="op" id="4578344">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4578348">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578364">&#34;eq&#34;</span><span class="op" id="4578368">:</span>&nbsp;<span class="ident" id="4578370">eq</span><span class="op" id="4578372">,</span>&nbsp;<span class="comment" id="4578374">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578381">&#34;ge&#34;</span><span class="op" id="4578385">:</span>&nbsp;<span class="ident" id="4578387">ge</span><span class="op" id="4578389">,</span>&nbsp;<span class="comment" id="4578391">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578398">&#34;gt&#34;</span><span class="op" id="4578402">:</span>&nbsp;<span class="ident" id="4578404">gt</span><span class="op" id="4578406">,</span>&nbsp;<span class="comment" id="4578408">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578414">&#34;le&#34;</span><span class="op" id="4578418">:</span>&nbsp;<span class="ident" id="4578420">le</span><span class="op" id="4578422">,</span>&nbsp;<span class="comment" id="4578424">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578431">&#34;lt&#34;</span><span class="op" id="4578435">:</span>&nbsp;<span class="ident" id="4578437">lt</span><span class="op" id="4578439">,</span>&nbsp;<span class="comment" id="4578441">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4578447">&#34;ne&#34;</span><span class="op" id="4578451">:</span>&nbsp;<span class="ident" id="4578453">ne</span><span class="op" id="4578455">,</span>&nbsp;<span class="comment" id="4578457">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="4578463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4578466">var</span>&nbsp;<span class="ident" id="4578470">builtinFuncs</span>&nbsp;<span class="op" id="4578483">=</span>&nbsp;<span class="ident" id="4578485">createValueFuncs</span><span class="op" id="4578501">(</span><span class="ident" id="4578502">builtins</span><span class="op" id="4578510">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4578513">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="4578581">func</span>&nbsp;<span class="ident" id="4578586">createValueFuncs</span><span class="op" id="4578602">(</span><span class="ident" id="4578603">funcMap</span>&nbsp;<span class="ident" id="4578611">FuncMap</span><span class="op" id="4578618">)</span>&nbsp;<span class="keyword" id="4578620">map</span><span class="op" id="4578623">[</span><span class="builtintype" id="4578624">string</span><span class="op" id="4578630">]</span><span class="ident" id="4578631">reflect</span><span class="op" id="4578638">.</span><span class="ident" id="4578639">Value</span>&nbsp;<span class="op" id="4578645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578648">m</span>&nbsp;<span class="op" id="4578650">:=</span>&nbsp;<span class="builtinfunc" id="4578653">make</span><span class="op" id="4578657">(</span><span class="keyword" id="4578658">map</span><span class="op" id="4578661">[</span><span class="builtintype" id="4578662">string</span><span class="op" id="4578668">]</span><span class="ident" id="4578669">reflect</span><span class="op" id="4578676">.</span><span class="ident" id="4578677">Value</span><span class="op" id="4578682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578685">addValueFuncs</span><span class="op" id="4578698">(</span><span class="ident" id="4578699">m</span><span class="op" id="4578700">,</span>&nbsp;<span class="ident" id="4578702">funcMap</span><span class="op" id="4578709">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578712">return</span>&nbsp;<span class="ident" id="4578719">m</span><br>
<span class="lineno"></span><span class="op" id="4578721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4578724">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="4578815">func</span>&nbsp;<span class="ident" id="4578820">addValueFuncs</span><span class="op" id="4578833">(</span><span class="ident" id="4578834">out</span>&nbsp;<span class="keyword" id="4578838">map</span><span class="op" id="4578841">[</span><span class="builtintype" id="4578842">string</span><span class="op" id="4578848">]</span><span class="ident" id="4578849">reflect</span><span class="op" id="4578856">.</span><span class="ident" id="4578857">Value</span><span class="op" id="4578862">,</span>&nbsp;<span class="ident" id="4578864">in</span>&nbsp;<span class="ident" id="4578867">FuncMap</span><span class="op" id="4578874">)</span>&nbsp;<span class="op" id="4578876">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578879">for</span>&nbsp;<span class="ident" id="4578883">name</span><span class="op" id="4578887">,</span>&nbsp;<span class="ident" id="4578889">fn</span>&nbsp;<span class="op" id="4578892">:=</span>&nbsp;<span class="keyword" id="4578895">range</span>&nbsp;<span class="ident" id="4578901">in</span>&nbsp;<span class="op" id="4578904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578908">v</span>&nbsp;<span class="op" id="4578910">:=</span>&nbsp;<span class="ident" id="4578913">reflect</span><span class="op" id="4578920">.</span><span class="ident" id="4578921">ValueOf</span><span class="op" id="4578928">(</span><span class="ident" id="4578929">fn</span><span class="op" id="4578931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578935">if</span>&nbsp;<span class="ident" id="4578938">v</span><span class="op" id="4578939">.</span><span class="ident" id="4578940">Kind</span><span class="op" id="4578944">(</span><span class="op" id="4578945">)</span>&nbsp;<span class="op" id="4578947">!=</span>&nbsp;<span class="ident" id="4578950">reflect</span><span class="op" id="4578957">.</span><span class="ident" id="4578958">Func</span>&nbsp;<span class="op" id="4578963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4578968">panic</span><span class="op" id="4578973">(</span><span class="string" id="4578974">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="4578987">+</span>&nbsp;<span class="ident" id="4578989">name</span>&nbsp;<span class="op" id="4578994">+</span>&nbsp;<span class="string" id="4578996">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="4579013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579017">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579021">if</span>&nbsp;<span class="op" id="4579024">!</span><span class="ident" id="4579025">goodFunc</span><span class="op" id="4579033">(</span><span class="ident" id="4579034">v</span><span class="op" id="4579035">.</span><span class="ident" id="4579036">Type</span><span class="op" id="4579040">(</span><span class="op" id="4579041">)</span><span class="op" id="4579042">)</span>&nbsp;<span class="op" id="4579044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4579049">panic</span><span class="op" id="4579054">(</span><span class="ident" id="4579055">fmt</span><span class="op" id="4579058">.</span><span class="ident" id="4579059">Errorf</span><span class="op" id="4579065">(</span><span class="string" id="4579066">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="4579116">,</span>&nbsp;<span class="ident" id="4579118">name</span><span class="op" id="4579122">,</span>&nbsp;<span class="ident" id="4579124">v</span><span class="op" id="4579125">.</span><span class="ident" id="4579126">Type</span><span class="op" id="4579130">(</span><span class="op" id="4579131">)</span><span class="op" id="4579132">.</span><span class="ident" id="4579133">NumOut</span><span class="op" id="4579139">(</span><span class="op" id="4579140">)</span><span class="op" id="4579141">)</span><span class="op" id="4579142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579150">out</span><span class="op" id="4579153">[</span><span class="ident" id="4579154">name</span><span class="op" id="4579158">]</span>&nbsp;<span class="op" id="4579160">=</span>&nbsp;<span class="ident" id="4579162">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579165">}</span><br>
<span class="lineno">70</span><span class="op" id="4579167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4579170">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="4579256">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="4579285">func</span>&nbsp;<span class="ident" id="4579290">addFuncs</span><span class="op" id="4579298">(</span><span class="ident" id="4579299">out</span><span class="op" id="4579302">,</span>&nbsp;<span class="ident" id="4579304">in</span>&nbsp;<span class="ident" id="4579307">FuncMap</span><span class="op" id="4579314">)</span>&nbsp;<span class="op" id="4579316">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579319">for</span>&nbsp;<span class="ident" id="4579323">name</span><span class="op" id="4579327">,</span>&nbsp;<span class="ident" id="4579329">fn</span>&nbsp;<span class="op" id="4579332">:=</span>&nbsp;<span class="keyword" id="4579335">range</span>&nbsp;<span class="ident" id="4579341">in</span>&nbsp;<span class="op" id="4579344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579348">out</span><span class="op" id="4579351">[</span><span class="ident" id="4579352">name</span><span class="op" id="4579356">]</span>&nbsp;<span class="op" id="4579358">=</span>&nbsp;<span class="ident" id="4579360">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579364">}</span><br>
<span class="lineno"></span><span class="op" id="4579366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4579369">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4579448">func</span>&nbsp;<span class="ident" id="4579453">goodFunc</span><span class="op" id="4579461">(</span><span class="ident" id="4579462">typ</span>&nbsp;<span class="ident" id="4579466">reflect</span><span class="op" id="4579473">.</span><span class="ident" id="4579474">Type</span><span class="op" id="4579478">)</span>&nbsp;<span class="builtintype" id="4579480">bool</span>&nbsp;<span class="op" id="4579485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4579488">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579568">switch</span>&nbsp;<span class="op" id="4579575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579578">case</span>&nbsp;<span class="ident" id="4579583">typ</span><span class="op" id="4579586">.</span><span class="ident" id="4579587">NumOut</span><span class="op" id="4579593">(</span><span class="op" id="4579594">)</span>&nbsp;<span class="op" id="4579596">==</span>&nbsp;<span class="num" id="4579599">1</span><span class="op" id="4579600">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579604">return</span>&nbsp;<span class="builtintype" id="4579611">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579617">case</span>&nbsp;<span class="ident" id="4579622">typ</span><span class="op" id="4579625">.</span><span class="ident" id="4579626">NumOut</span><span class="op" id="4579632">(</span><span class="op" id="4579633">)</span>&nbsp;<span class="op" id="4579635">==</span>&nbsp;<span class="num" id="4579638">2</span>&nbsp;<span class="op" id="4579640">&amp;&amp;</span>&nbsp;<span class="ident" id="4579643">typ</span><span class="op" id="4579646">.</span><span class="ident" id="4579647">Out</span><span class="op" id="4579650">(</span><span class="num" id="4579651">1</span><span class="op" id="4579652">)</span>&nbsp;<span class="op" id="4579654">==</span>&nbsp;<span class="ident" id="4579657">errorType</span><span class="op" id="4579666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579670">return</span>&nbsp;<span class="builtintype" id="4579677">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579686">return</span>&nbsp;<span class="builtintype" id="4579693">false</span><br>
<span class="lineno">90</span><span class="op" id="4579699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4579702">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="4579772">func</span>&nbsp;<span class="ident" id="4579777">findFunction</span><span class="op" id="4579789">(</span><span class="ident" id="4579790">name</span>&nbsp;<span class="builtintype" id="4579795">string</span><span class="op" id="4579801">,</span>&nbsp;<span class="ident" id="4579803">tmpl</span>&nbsp;<span class="op" id="4579808">*</span><span class="ident" id="4579809">Template</span><span class="op" id="4579817">)</span>&nbsp;<span class="op" id="4579819">(</span><span class="ident" id="4579820">reflect</span><span class="op" id="4579827">.</span><span class="ident" id="4579828">Value</span><span class="op" id="4579833">,</span>&nbsp;<span class="builtintype" id="4579835">bool</span><span class="op" id="4579839">)</span>&nbsp;<span class="op" id="4579841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579844">if</span>&nbsp;<span class="ident" id="4579847">tmpl</span>&nbsp;<span class="op" id="4579852">!=</span>&nbsp;<span class="ident" id="4579855">nil</span>&nbsp;<span class="op" id="4579859">&amp;&amp;</span>&nbsp;<span class="ident" id="4579862">tmpl</span><span class="op" id="4579866">.</span><span class="ident" id="4579867">common</span>&nbsp;<span class="op" id="4579874">!=</span>&nbsp;<span class="ident" id="4579877">nil</span>&nbsp;<span class="op" id="4579881">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579885">if</span>&nbsp;<span class="ident" id="4579888">fn</span>&nbsp;<span class="op" id="4579891">:=</span>&nbsp;<span class="ident" id="4579894">tmpl</span><span class="op" id="4579898">.</span><span class="ident" id="4579899">execFuncs</span><span class="op" id="4579908">[</span><span class="ident" id="4579909">name</span><span class="op" id="4579913">]</span><span class="op" id="4579914">;</span>&nbsp;<span class="ident" id="4579916">fn</span><span class="op" id="4579918">.</span><span class="ident" id="4579919">IsValid</span><span class="op" id="4579926">(</span><span class="op" id="4579927">)</span>&nbsp;<span class="op" id="4579929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579934">return</span>&nbsp;<span class="ident" id="4579941">fn</span><span class="op" id="4579943">,</span>&nbsp;<span class="builtintype" id="4579945">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579955">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579958">if</span>&nbsp;<span class="ident" id="4579961">fn</span>&nbsp;<span class="op" id="4579964">:=</span>&nbsp;<span class="ident" id="4579967">builtinFuncs</span><span class="op" id="4579979">[</span><span class="ident" id="4579980">name</span><span class="op" id="4579984">]</span><span class="op" id="4579985">;</span>&nbsp;<span class="ident" id="4579987">fn</span><span class="op" id="4579989">.</span><span class="ident" id="4579990">IsValid</span><span class="op" id="4579997">(</span><span class="op" id="4579998">)</span>&nbsp;<span class="op" id="4580000">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580004">return</span>&nbsp;<span class="ident" id="4580011">fn</span><span class="op" id="4580013">,</span>&nbsp;<span class="builtintype" id="4580015">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580021">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580024">return</span>&nbsp;<span class="ident" id="4580031">reflect</span><span class="op" id="4580038">.</span><span class="ident" id="4580039">Value</span><span class="op" id="4580044">{</span><span class="op" id="4580045">}</span><span class="op" id="4580046">,</span>&nbsp;<span class="builtintype" id="4580048">false</span><br>
<span class="lineno"></span><span class="op" id="4580054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4580057">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4580071">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="4580147">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4580218">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="4580266">func</span>&nbsp;<span class="ident" id="4580271">index</span><span class="op" id="4580276">(</span><span class="ident" id="4580277">item</span>&nbsp;<span class="keyword" id="4580282">interface</span><span class="op" id="4580291">{</span><span class="op" id="4580292">}</span><span class="op" id="4580293">,</span>&nbsp;<span class="ident" id="4580295">indices</span>&nbsp;<span class="op" id="4580303">...</span><span class="keyword" id="4580306">interface</span><span class="op" id="4580315">{</span><span class="op" id="4580316">}</span><span class="op" id="4580317">)</span>&nbsp;<span class="op" id="4580319">(</span><span class="keyword" id="4580320">interface</span><span class="op" id="4580329">{</span><span class="op" id="4580330">}</span><span class="op" id="4580331">,</span>&nbsp;<span class="builtintype" id="4580333">error</span><span class="op" id="4580338">)</span>&nbsp;<span class="op" id="4580340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580343">v</span>&nbsp;<span class="op" id="4580345">:=</span>&nbsp;<span class="ident" id="4580348">reflect</span><span class="op" id="4580355">.</span><span class="ident" id="4580356">ValueOf</span><span class="op" id="4580363">(</span><span class="ident" id="4580364">item</span><span class="op" id="4580368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580371">for</span>&nbsp;<span class="ident" id="4580375">_</span><span class="op" id="4580376">,</span>&nbsp;<span class="ident" id="4580378">i</span>&nbsp;<span class="op" id="4580380">:=</span>&nbsp;<span class="keyword" id="4580383">range</span>&nbsp;<span class="ident" id="4580389">indices</span>&nbsp;<span class="op" id="4580397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580401">index</span>&nbsp;<span class="op" id="4580407">:=</span>&nbsp;<span class="ident" id="4580410">reflect</span><span class="op" id="4580417">.</span><span class="ident" id="4580418">ValueOf</span><span class="op" id="4580425">(</span><span class="ident" id="4580426">i</span><span class="op" id="4580427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580431">var</span>&nbsp;<span class="ident" id="4580435">isNil</span>&nbsp;<span class="builtintype" id="4580441">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580448">if</span>&nbsp;<span class="ident" id="4580451">v</span><span class="op" id="4580452">,</span>&nbsp;<span class="ident" id="4580454">isNil</span>&nbsp;<span class="op" id="4580460">=</span>&nbsp;<span class="ident" id="4580462">indirect</span><span class="op" id="4580470">(</span><span class="ident" id="4580471">v</span><span class="op" id="4580472">)</span><span class="op" id="4580473">;</span>&nbsp;<span class="ident" id="4580475">isNil</span>&nbsp;<span class="op" id="4580481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580486">return</span>&nbsp;<span class="ident" id="4580493">nil</span><span class="op" id="4580496">,</span>&nbsp;<span class="ident" id="4580498">fmt</span><span class="op" id="4580501">.</span><span class="ident" id="4580502">Errorf</span><span class="op" id="4580508">(</span><span class="string" id="4580509">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4580531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580539">switch</span>&nbsp;<span class="ident" id="4580546">v</span><span class="op" id="4580547">.</span><span class="ident" id="4580548">Kind</span><span class="op" id="4580552">(</span><span class="op" id="4580553">)</span>&nbsp;<span class="op" id="4580555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580559">case</span>&nbsp;<span class="ident" id="4580564">reflect</span><span class="op" id="4580571">.</span><span class="ident" id="4580572">Array</span><span class="op" id="4580577">,</span>&nbsp;<span class="ident" id="4580579">reflect</span><span class="op" id="4580586">.</span><span class="ident" id="4580587">Slice</span><span class="op" id="4580592">,</span>&nbsp;<span class="ident" id="4580594">reflect</span><span class="op" id="4580601">.</span><span class="ident" id="4580602">String</span><span class="op" id="4580608">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580613">var</span>&nbsp;<span class="ident" id="4580617">x</span>&nbsp;<span class="ident" id="4580619">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580628">switch</span>&nbsp;<span class="ident" id="4580635">index</span><span class="op" id="4580640">.</span><span class="ident" id="4580641">Kind</span><span class="op" id="4580645">(</span><span class="op" id="4580646">)</span>&nbsp;<span class="op" id="4580648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580653">case</span>&nbsp;<span class="ident" id="4580658">reflect</span><span class="op" id="4580665">.</span><span class="ident" id="4580666">Int</span><span class="op" id="4580669">,</span>&nbsp;<span class="ident" id="4580671">reflect</span><span class="op" id="4580678">.</span><span class="ident" id="4580679">Int8</span><span class="op" id="4580683">,</span>&nbsp;<span class="ident" id="4580685">reflect</span><span class="op" id="4580692">.</span><span class="ident" id="4580693">Int16</span><span class="op" id="4580698">,</span>&nbsp;<span class="ident" id="4580700">reflect</span><span class="op" id="4580707">.</span><span class="ident" id="4580708">Int32</span><span class="op" id="4580713">,</span>&nbsp;<span class="ident" id="4580715">reflect</span><span class="op" id="4580722">.</span><span class="ident" id="4580723">Int64</span><span class="op" id="4580728">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580734">x</span>&nbsp;<span class="op" id="4580736">=</span>&nbsp;<span class="ident" id="4580738">index</span><span class="op" id="4580743">.</span><span class="ident" id="4580744">Int</span><span class="op" id="4580747">(</span><span class="op" id="4580748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580753">case</span>&nbsp;<span class="ident" id="4580758">reflect</span><span class="op" id="4580765">.</span><span class="ident" id="4580766">Uint</span><span class="op" id="4580770">,</span>&nbsp;<span class="ident" id="4580772">reflect</span><span class="op" id="4580779">.</span><span class="ident" id="4580780">Uint8</span><span class="op" id="4580785">,</span>&nbsp;<span class="ident" id="4580787">reflect</span><span class="op" id="4580794">.</span><span class="ident" id="4580795">Uint16</span><span class="op" id="4580801">,</span>&nbsp;<span class="ident" id="4580803">reflect</span><span class="op" id="4580810">.</span><span class="ident" id="4580811">Uint32</span><span class="op" id="4580817">,</span>&nbsp;<span class="ident" id="4580819">reflect</span><span class="op" id="4580826">.</span><span class="ident" id="4580827">Uint64</span><span class="op" id="4580833">,</span>&nbsp;<span class="ident" id="4580835">reflect</span><span class="op" id="4580842">.</span><span class="ident" id="4580843">Uintptr</span><span class="op" id="4580850">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580856">x</span>&nbsp;<span class="op" id="4580858">=</span>&nbsp;<span class="ident" id="4580860">int64</span><span class="op" id="4580865">(</span><span class="ident" id="4580866">index</span><span class="op" id="4580871">.</span><span class="ident" id="4580872">Uint</span><span class="op" id="4580876">(</span><span class="op" id="4580877">)</span><span class="op" id="4580878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580883">default</span><span class="op" id="4580890">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580896">return</span>&nbsp;<span class="ident" id="4580903">nil</span><span class="op" id="4580906">,</span>&nbsp;<span class="ident" id="4580908">fmt</span><span class="op" id="4580911">.</span><span class="ident" id="4580912">Errorf</span><span class="op" id="4580918">(</span><span class="string" id="4580919">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4580958">,</span>&nbsp;<span class="ident" id="4580960">index</span><span class="op" id="4580965">.</span><span class="ident" id="4580966">Type</span><span class="op" id="4580970">(</span><span class="op" id="4580971">)</span><span class="op" id="4580972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580982">if</span>&nbsp;<span class="ident" id="4580985">x</span>&nbsp;<span class="op" id="4580987">&lt;</span>&nbsp;<span class="num" id="4580989">0</span>&nbsp;<span class="op" id="4580991">||</span>&nbsp;<span class="ident" id="4580994">x</span>&nbsp;<span class="op" id="4580996">&gt;=</span>&nbsp;<span class="ident" id="4580999">int64</span><span class="op" id="4581004">(</span><span class="ident" id="4581005">v</span><span class="op" id="4581006">.</span><span class="ident" id="4581007">Len</span><span class="op" id="4581010">(</span><span class="op" id="4581011">)</span><span class="op" id="4581012">)</span>&nbsp;<span class="op" id="4581014">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581020">return</span>&nbsp;<span class="ident" id="4581027">nil</span><span class="op" id="4581030">,</span>&nbsp;<span class="ident" id="4581032">fmt</span><span class="op" id="4581035">.</span><span class="ident" id="4581036">Errorf</span><span class="op" id="4581042">(</span><span class="string" id="4581043">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="4581067">,</span>&nbsp;<span class="ident" id="4581069">x</span><span class="op" id="4581070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581080">v</span>&nbsp;<span class="op" id="4581082">=</span>&nbsp;<span class="ident" id="4581084">v</span><span class="op" id="4581085">.</span><span class="ident" id="4581086">Index</span><span class="op" id="4581091">(</span><span class="builtintype" id="4581092">int</span><span class="op" id="4581095">(</span><span class="ident" id="4581096">x</span><span class="op" id="4581097">)</span><span class="op" id="4581098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581102">case</span>&nbsp;<span class="ident" id="4581107">reflect</span><span class="op" id="4581114">.</span><span class="ident" id="4581115">Map</span><span class="op" id="4581118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581123">if</span>&nbsp;<span class="op" id="4581126">!</span><span class="ident" id="4581127">index</span><span class="op" id="4581132">.</span><span class="ident" id="4581133">IsValid</span><span class="op" id="4581140">(</span><span class="op" id="4581141">)</span>&nbsp;<span class="op" id="4581143">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581149">index</span>&nbsp;<span class="op" id="4581155">=</span>&nbsp;<span class="ident" id="4581157">reflect</span><span class="op" id="4581164">.</span><span class="ident" id="4581165">Zero</span><span class="op" id="4581169">(</span><span class="ident" id="4581170">v</span><span class="op" id="4581171">.</span><span class="ident" id="4581172">Type</span><span class="op" id="4581176">(</span><span class="op" id="4581177">)</span><span class="op" id="4581178">.</span><span class="ident" id="4581179">Key</span><span class="op" id="4581182">(</span><span class="op" id="4581183">)</span><span class="op" id="4581184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581194">if</span>&nbsp;<span class="op" id="4581197">!</span><span class="ident" id="4581198">index</span><span class="op" id="4581203">.</span><span class="ident" id="4581204">Type</span><span class="op" id="4581208">(</span><span class="op" id="4581209">)</span><span class="op" id="4581210">.</span><span class="ident" id="4581211">AssignableTo</span><span class="op" id="4581223">(</span><span class="ident" id="4581224">v</span><span class="op" id="4581225">.</span><span class="ident" id="4581226">Type</span><span class="op" id="4581230">(</span><span class="op" id="4581231">)</span><span class="op" id="4581232">.</span><span class="ident" id="4581233">Key</span><span class="op" id="4581236">(</span><span class="op" id="4581237">)</span><span class="op" id="4581238">)</span>&nbsp;<span class="op" id="4581240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581246">return</span>&nbsp;<span class="ident" id="4581253">nil</span><span class="op" id="4581256">,</span>&nbsp;<span class="ident" id="4581258">fmt</span><span class="op" id="4581261">.</span><span class="ident" id="4581262">Errorf</span><span class="op" id="4581268">(</span><span class="string" id="4581269">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="4581298">,</span>&nbsp;<span class="ident" id="4581300">index</span><span class="op" id="4581305">.</span><span class="ident" id="4581306">Type</span><span class="op" id="4581310">(</span><span class="op" id="4581311">)</span><span class="op" id="4581312">,</span>&nbsp;<span class="ident" id="4581314">v</span><span class="op" id="4581315">.</span><span class="ident" id="4581316">Type</span><span class="op" id="4581320">(</span><span class="op" id="4581321">)</span><span class="op" id="4581322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581327">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581332">if</span>&nbsp;<span class="ident" id="4581335">x</span>&nbsp;<span class="op" id="4581337">:=</span>&nbsp;<span class="ident" id="4581340">v</span><span class="op" id="4581341">.</span><span class="ident" id="4581342">MapIndex</span><span class="op" id="4581350">(</span><span class="ident" id="4581351">index</span><span class="op" id="4581356">)</span><span class="op" id="4581357">;</span>&nbsp;<span class="ident" id="4581359">x</span><span class="op" id="4581360">.</span><span class="ident" id="4581361">IsValid</span><span class="op" id="4581368">(</span><span class="op" id="4581369">)</span>&nbsp;<span class="op" id="4581371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581377">v</span>&nbsp;<span class="op" id="4581379">=</span>&nbsp;<span class="ident" id="4581381">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581386">}</span>&nbsp;<span class="keyword" id="4581388">else</span>&nbsp;<span class="op" id="4581393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581399">v</span>&nbsp;<span class="op" id="4581401">=</span>&nbsp;<span class="ident" id="4581403">reflect</span><span class="op" id="4581410">.</span><span class="ident" id="4581411">Zero</span><span class="op" id="4581415">(</span><span class="ident" id="4581416">v</span><span class="op" id="4581417">.</span><span class="ident" id="4581418">Type</span><span class="op" id="4581422">(</span><span class="op" id="4581423">)</span><span class="op" id="4581424">.</span><span class="ident" id="4581425">Elem</span><span class="op" id="4581429">(</span><span class="op" id="4581430">)</span><span class="op" id="4581431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581436">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581440">default</span><span class="op" id="4581447">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581452">return</span>&nbsp;<span class="ident" id="4581459">nil</span><span class="op" id="4581462">,</span>&nbsp;<span class="ident" id="4581464">fmt</span><span class="op" id="4581467">.</span><span class="ident" id="4581468">Errorf</span><span class="op" id="4581474">(</span><span class="string" id="4581475">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4581504">,</span>&nbsp;<span class="ident" id="4581506">v</span><span class="op" id="4581507">.</span><span class="ident" id="4581508">Type</span><span class="op" id="4581512">(</span><span class="op" id="4581513">)</span><span class="op" id="4581514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581524">return</span>&nbsp;<span class="ident" id="4581531">v</span><span class="op" id="4581532">.</span><span class="ident" id="4581533">Interface</span><span class="op" id="4581542">(</span><span class="op" id="4581543">)</span><span class="op" id="4581544">,</span>&nbsp;<span class="ident" id="4581546">nil</span><br>
<span class="lineno">150</span><span class="op" id="4581550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4581553">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4581564">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="4581649">func</span>&nbsp;<span class="ident" id="4581654">length</span><span class="op" id="4581660">(</span><span class="ident" id="4581661">item</span>&nbsp;<span class="keyword" id="4581666">interface</span><span class="op" id="4581675">{</span><span class="op" id="4581676">}</span><span class="op" id="4581677">)</span>&nbsp;<span class="op" id="4581679">(</span><span class="builtintype" id="4581680">int</span><span class="op" id="4581683">,</span>&nbsp;<span class="builtintype" id="4581685">error</span><span class="op" id="4581690">)</span>&nbsp;<span class="op" id="4581692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581695">v</span><span class="op" id="4581696">,</span>&nbsp;<span class="ident" id="4581698">isNil</span>&nbsp;<span class="op" id="4581704">:=</span>&nbsp;<span class="ident" id="4581707">indirect</span><span class="op" id="4581715">(</span><span class="ident" id="4581716">reflect</span><span class="op" id="4581723">.</span><span class="ident" id="4581724">ValueOf</span><span class="op" id="4581731">(</span><span class="ident" id="4581732">item</span><span class="op" id="4581736">)</span><span class="op" id="4581737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581740">if</span>&nbsp;<span class="ident" id="4581743">isNil</span>&nbsp;<span class="op" id="4581749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581753">return</span>&nbsp;<span class="num" id="4581760">0</span><span class="op" id="4581761">,</span>&nbsp;<span class="ident" id="4581763">fmt</span><span class="op" id="4581766">.</span><span class="ident" id="4581767">Errorf</span><span class="op" id="4581773">(</span><span class="string" id="4581774">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4581794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581797">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581800">switch</span>&nbsp;<span class="ident" id="4581807">v</span><span class="op" id="4581808">.</span><span class="ident" id="4581809">Kind</span><span class="op" id="4581813">(</span><span class="op" id="4581814">)</span>&nbsp;<span class="op" id="4581816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581819">case</span>&nbsp;<span class="ident" id="4581824">reflect</span><span class="op" id="4581831">.</span><span class="ident" id="4581832">Array</span><span class="op" id="4581837">,</span>&nbsp;<span class="ident" id="4581839">reflect</span><span class="op" id="4581846">.</span><span class="ident" id="4581847">Chan</span><span class="op" id="4581851">,</span>&nbsp;<span class="ident" id="4581853">reflect</span><span class="op" id="4581860">.</span><span class="ident" id="4581861">Map</span><span class="op" id="4581864">,</span>&nbsp;<span class="ident" id="4581866">reflect</span><span class="op" id="4581873">.</span><span class="ident" id="4581874">Slice</span><span class="op" id="4581879">,</span>&nbsp;<span class="ident" id="4581881">reflect</span><span class="op" id="4581888">.</span><span class="ident" id="4581889">String</span><span class="op" id="4581895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581899">return</span>&nbsp;<span class="ident" id="4581906">v</span><span class="op" id="4581907">.</span><span class="ident" id="4581908">Len</span><span class="op" id="4581911">(</span><span class="op" id="4581912">)</span><span class="op" id="4581913">,</span>&nbsp;<span class="ident" id="4581915">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581923">return</span>&nbsp;<span class="num" id="4581930">0</span><span class="op" id="4581931">,</span>&nbsp;<span class="ident" id="4581933">fmt</span><span class="op" id="4581936">.</span><span class="ident" id="4581937">Errorf</span><span class="op" id="4581943">(</span><span class="string" id="4581944">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4581960">,</span>&nbsp;<span class="ident" id="4581962">v</span><span class="op" id="4581963">.</span><span class="ident" id="4581964">Type</span><span class="op" id="4581968">(</span><span class="op" id="4581969">)</span><span class="op" id="4581970">)</span><br>
<span class="lineno">165</span><span class="op" id="4581972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4581975">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4581999">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="4582074">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4582159">func</span>&nbsp;<span class="ident" id="4582164">call</span><span class="op" id="4582168">(</span><span class="ident" id="4582169">fn</span>&nbsp;<span class="keyword" id="4582172">interface</span><span class="op" id="4582181">{</span><span class="op" id="4582182">}</span><span class="op" id="4582183">,</span>&nbsp;<span class="ident" id="4582185">args</span>&nbsp;<span class="op" id="4582190">...</span><span class="keyword" id="4582193">interface</span><span class="op" id="4582202">{</span><span class="op" id="4582203">}</span><span class="op" id="4582204">)</span>&nbsp;<span class="op" id="4582206">(</span><span class="keyword" id="4582207">interface</span><span class="op" id="4582216">{</span><span class="op" id="4582217">}</span><span class="op" id="4582218">,</span>&nbsp;<span class="builtintype" id="4582220">error</span><span class="op" id="4582225">)</span>&nbsp;<span class="op" id="4582227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582230">v</span>&nbsp;<span class="op" id="4582232">:=</span>&nbsp;<span class="ident" id="4582235">reflect</span><span class="op" id="4582242">.</span><span class="ident" id="4582243">ValueOf</span><span class="op" id="4582250">(</span><span class="ident" id="4582251">fn</span><span class="op" id="4582253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582256">typ</span>&nbsp;<span class="op" id="4582260">:=</span>&nbsp;<span class="ident" id="4582263">v</span><span class="op" id="4582264">.</span><span class="ident" id="4582265">Type</span><span class="op" id="4582269">(</span><span class="op" id="4582270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582273">if</span>&nbsp;<span class="ident" id="4582276">typ</span><span class="op" id="4582279">.</span><span class="ident" id="4582280">Kind</span><span class="op" id="4582284">(</span><span class="op" id="4582285">)</span>&nbsp;<span class="op" id="4582287">!=</span>&nbsp;<span class="ident" id="4582290">reflect</span><span class="op" id="4582297">.</span><span class="ident" id="4582298">Func</span>&nbsp;<span class="op" id="4582303">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582307">return</span>&nbsp;<span class="ident" id="4582314">nil</span><span class="op" id="4582317">,</span>&nbsp;<span class="ident" id="4582319">fmt</span><span class="op" id="4582322">.</span><span class="ident" id="4582323">Errorf</span><span class="op" id="4582329">(</span><span class="string" id="4582330">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4582355">,</span>&nbsp;<span class="ident" id="4582357">typ</span><span class="op" id="4582360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582366">if</span>&nbsp;<span class="op" id="4582369">!</span><span class="ident" id="4582370">goodFunc</span><span class="op" id="4582378">(</span><span class="ident" id="4582379">typ</span><span class="op" id="4582382">)</span>&nbsp;<span class="op" id="4582384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582388">return</span>&nbsp;<span class="ident" id="4582395">nil</span><span class="op" id="4582398">,</span>&nbsp;<span class="ident" id="4582400">fmt</span><span class="op" id="4582403">.</span><span class="ident" id="4582404">Errorf</span><span class="op" id="4582410">(</span><span class="string" id="4582411">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="4582459">,</span>&nbsp;<span class="ident" id="4582461">typ</span><span class="op" id="4582464">.</span><span class="ident" id="4582465">NumOut</span><span class="op" id="4582471">(</span><span class="op" id="4582472">)</span><span class="op" id="4582473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582476">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582479">numIn</span>&nbsp;<span class="op" id="4582485">:=</span>&nbsp;<span class="ident" id="4582488">typ</span><span class="op" id="4582491">.</span><span class="ident" id="4582492">NumIn</span><span class="op" id="4582497">(</span><span class="op" id="4582498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582501">var</span>&nbsp;<span class="ident" id="4582505">dddType</span>&nbsp;<span class="ident" id="4582513">reflect</span><span class="op" id="4582520">.</span><span class="ident" id="4582521">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582527">if</span>&nbsp;<span class="ident" id="4582530">typ</span><span class="op" id="4582533">.</span><span class="ident" id="4582534">IsVariadic</span><span class="op" id="4582544">(</span><span class="op" id="4582545">)</span>&nbsp;<span class="op" id="4582547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582551">if</span>&nbsp;<span class="builtinfunc" id="4582554">len</span><span class="op" id="4582557">(</span><span class="ident" id="4582558">args</span><span class="op" id="4582562">)</span>&nbsp;<span class="op" id="4582564">&lt;</span>&nbsp;<span class="ident" id="4582566">numIn</span><span class="op" id="4582571">-</span><span class="num" id="4582572">1</span>&nbsp;<span class="op" id="4582574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582579">return</span>&nbsp;<span class="ident" id="4582586">nil</span><span class="op" id="4582589">,</span>&nbsp;<span class="ident" id="4582591">fmt</span><span class="op" id="4582594">.</span><span class="ident" id="4582595">Errorf</span><span class="op" id="4582601">(</span><span class="string" id="4582602">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="4582649">,</span>&nbsp;<span class="builtinfunc" id="4582651">len</span><span class="op" id="4582654">(</span><span class="ident" id="4582655">args</span><span class="op" id="4582659">)</span><span class="op" id="4582660">,</span>&nbsp;<span class="ident" id="4582662">numIn</span><span class="op" id="4582667">-</span><span class="num" id="4582668">1</span><span class="op" id="4582669">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582677">dddType</span>&nbsp;<span class="op" id="4582685">=</span>&nbsp;<span class="ident" id="4582687">typ</span><span class="op" id="4582690">.</span><span class="ident" id="4582691">In</span><span class="op" id="4582693">(</span><span class="ident" id="4582694">numIn</span>&nbsp;<span class="op" id="4582700">-</span>&nbsp;<span class="num" id="4582702">1</span><span class="op" id="4582703">)</span><span class="op" id="4582704">.</span><span class="ident" id="4582705">Elem</span><span class="op" id="4582709">(</span><span class="op" id="4582710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582713">}</span>&nbsp;<span class="keyword" id="4582715">else</span>&nbsp;<span class="op" id="4582720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582724">if</span>&nbsp;<span class="builtinfunc" id="4582727">len</span><span class="op" id="4582730">(</span><span class="ident" id="4582731">args</span><span class="op" id="4582735">)</span>&nbsp;<span class="op" id="4582737">!=</span>&nbsp;<span class="ident" id="4582740">numIn</span>&nbsp;<span class="op" id="4582746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582751">return</span>&nbsp;<span class="ident" id="4582758">nil</span><span class="op" id="4582761">,</span>&nbsp;<span class="ident" id="4582763">fmt</span><span class="op" id="4582766">.</span><span class="ident" id="4582767">Errorf</span><span class="op" id="4582773">(</span><span class="string" id="4582774">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="4582812">,</span>&nbsp;<span class="builtinfunc" id="4582814">len</span><span class="op" id="4582817">(</span><span class="ident" id="4582818">args</span><span class="op" id="4582822">)</span><span class="op" id="4582823">,</span>&nbsp;<span class="ident" id="4582825">numIn</span><span class="op" id="4582830">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582834">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582840">argv</span>&nbsp;<span class="op" id="4582845">:=</span>&nbsp;<span class="builtinfunc" id="4582848">make</span><span class="op" id="4582852">(</span><span class="op" id="4582853">[</span><span class="op" id="4582854">]</span><span class="ident" id="4582855">reflect</span><span class="op" id="4582862">.</span><span class="ident" id="4582863">Value</span><span class="op" id="4582868">,</span>&nbsp;<span class="builtinfunc" id="4582870">len</span><span class="op" id="4582873">(</span><span class="ident" id="4582874">args</span><span class="op" id="4582878">)</span><span class="op" id="4582879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582882">for</span>&nbsp;<span class="ident" id="4582886">i</span><span class="op" id="4582887">,</span>&nbsp;<span class="ident" id="4582889">arg</span>&nbsp;<span class="op" id="4582893">:=</span>&nbsp;<span class="keyword" id="4582896">range</span>&nbsp;<span class="ident" id="4582902">args</span>&nbsp;<span class="op" id="4582907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582911">value</span>&nbsp;<span class="op" id="4582917">:=</span>&nbsp;<span class="ident" id="4582920">reflect</span><span class="op" id="4582927">.</span><span class="ident" id="4582928">ValueOf</span><span class="op" id="4582935">(</span><span class="ident" id="4582936">arg</span><span class="op" id="4582939">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582943">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583004">var</span>&nbsp;<span class="ident" id="4583008">argType</span>&nbsp;<span class="ident" id="4583016">reflect</span><span class="op" id="4583023">.</span><span class="ident" id="4583024">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583031">if</span>&nbsp;<span class="op" id="4583034">!</span><span class="ident" id="4583035">typ</span><span class="op" id="4583038">.</span><span class="ident" id="4583039">IsVariadic</span><span class="op" id="4583049">(</span><span class="op" id="4583050">)</span>&nbsp;<span class="op" id="4583052">||</span>&nbsp;<span class="ident" id="4583055">i</span>&nbsp;<span class="op" id="4583057">&lt;</span>&nbsp;<span class="ident" id="4583059">numIn</span><span class="op" id="4583064">-</span><span class="num" id="4583065">1</span>&nbsp;<span class="op" id="4583067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583072">argType</span>&nbsp;<span class="op" id="4583080">=</span>&nbsp;<span class="ident" id="4583082">typ</span><span class="op" id="4583085">.</span><span class="ident" id="4583086">In</span><span class="op" id="4583088">(</span><span class="ident" id="4583089">i</span><span class="op" id="4583090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583094">}</span>&nbsp;<span class="keyword" id="4583096">else</span>&nbsp;<span class="op" id="4583101">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583106">argType</span>&nbsp;<span class="op" id="4583114">=</span>&nbsp;<span class="ident" id="4583116">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583130">if</span>&nbsp;<span class="op" id="4583133">!</span><span class="ident" id="4583134">value</span><span class="op" id="4583139">.</span><span class="ident" id="4583140">IsValid</span><span class="op" id="4583147">(</span><span class="op" id="4583148">)</span>&nbsp;<span class="op" id="4583150">&amp;&amp;</span>&nbsp;<span class="ident" id="4583153">canBeNil</span><span class="op" id="4583161">(</span><span class="ident" id="4583162">argType</span><span class="op" id="4583169">)</span>&nbsp;<span class="op" id="4583171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583176">value</span>&nbsp;<span class="op" id="4583182">=</span>&nbsp;<span class="ident" id="4583184">reflect</span><span class="op" id="4583191">.</span><span class="ident" id="4583192">Zero</span><span class="op" id="4583196">(</span><span class="ident" id="4583197">argType</span><span class="op" id="4583204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583208">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583212">if</span>&nbsp;<span class="op" id="4583215">!</span><span class="ident" id="4583216">value</span><span class="op" id="4583221">.</span><span class="ident" id="4583222">Type</span><span class="op" id="4583226">(</span><span class="op" id="4583227">)</span><span class="op" id="4583228">.</span><span class="ident" id="4583229">AssignableTo</span><span class="op" id="4583241">(</span><span class="ident" id="4583242">argType</span><span class="op" id="4583249">)</span>&nbsp;<span class="op" id="4583251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583256">return</span>&nbsp;<span class="ident" id="4583263">nil</span><span class="op" id="4583266">,</span>&nbsp;<span class="ident" id="4583268">fmt</span><span class="op" id="4583271">.</span><span class="ident" id="4583272">Errorf</span><span class="op" id="4583278">(</span><span class="string" id="4583279">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="4583313">,</span>&nbsp;<span class="ident" id="4583315">i</span><span class="op" id="4583316">,</span>&nbsp;<span class="ident" id="4583318">value</span><span class="op" id="4583323">.</span><span class="ident" id="4583324">Type</span><span class="op" id="4583328">(</span><span class="op" id="4583329">)</span><span class="op" id="4583330">,</span>&nbsp;<span class="ident" id="4583332">argType</span><span class="op" id="4583339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583347">argv</span><span class="op" id="4583351">[</span><span class="ident" id="4583352">i</span><span class="op" id="4583353">]</span>&nbsp;<span class="op" id="4583355">=</span>&nbsp;<span class="ident" id="4583357">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583364">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583367">result</span>&nbsp;<span class="op" id="4583374">:=</span>&nbsp;<span class="ident" id="4583377">v</span><span class="op" id="4583378">.</span><span class="ident" id="4583379">Call</span><span class="op" id="4583383">(</span><span class="ident" id="4583384">argv</span><span class="op" id="4583388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583391">if</span>&nbsp;<span class="builtinfunc" id="4583394">len</span><span class="op" id="4583397">(</span><span class="ident" id="4583398">result</span><span class="op" id="4583404">)</span>&nbsp;<span class="op" id="4583406">==</span>&nbsp;<span class="num" id="4583409">2</span>&nbsp;<span class="op" id="4583411">&amp;&amp;</span>&nbsp;<span class="op" id="4583414">!</span><span class="ident" id="4583415">result</span><span class="op" id="4583421">[</span><span class="num" id="4583422">1</span><span class="op" id="4583423">]</span><span class="op" id="4583424">.</span><span class="ident" id="4583425">IsNil</span><span class="op" id="4583430">(</span><span class="op" id="4583431">)</span>&nbsp;<span class="op" id="4583433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583437">return</span>&nbsp;<span class="ident" id="4583444">result</span><span class="op" id="4583450">[</span><span class="num" id="4583451">0</span><span class="op" id="4583452">]</span><span class="op" id="4583453">.</span><span class="ident" id="4583454">Interface</span><span class="op" id="4583463">(</span><span class="op" id="4583464">)</span><span class="op" id="4583465">,</span>&nbsp;<span class="ident" id="4583467">result</span><span class="op" id="4583473">[</span><span class="num" id="4583474">1</span><span class="op" id="4583475">]</span><span class="op" id="4583476">.</span><span class="ident" id="4583477">Interface</span><span class="op" id="4583486">(</span><span class="op" id="4583487">)</span><span class="op" id="4583488">.</span><span class="op" id="4583489">(</span><span class="builtintype" id="4583490">error</span><span class="op" id="4583495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583501">return</span>&nbsp;<span class="ident" id="4583508">result</span><span class="op" id="4583514">[</span><span class="num" id="4583515">0</span><span class="op" id="4583516">]</span><span class="op" id="4583517">.</span><span class="ident" id="4583518">Interface</span><span class="op" id="4583527">(</span><span class="op" id="4583528">)</span><span class="op" id="4583529">,</span>&nbsp;<span class="ident" id="4583531">nil</span><br>
<span class="lineno">215</span><span class="op" id="4583535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4583538">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4583557">func</span>&nbsp;<span class="ident" id="4583562">truth</span><span class="op" id="4583567">(</span><span class="ident" id="4583568">a</span>&nbsp;<span class="keyword" id="4583570">interface</span><span class="op" id="4583579">{</span><span class="op" id="4583580">}</span><span class="op" id="4583581">)</span>&nbsp;<span class="builtintype" id="4583583">bool</span>&nbsp;<span class="op" id="4583588">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583591">t</span><span class="op" id="4583592">,</span>&nbsp;<span class="ident" id="4583594">_</span>&nbsp;<span class="op" id="4583596">:=</span>&nbsp;<span class="ident" id="4583599">isTrue</span><span class="op" id="4583605">(</span><span class="ident" id="4583606">reflect</span><span class="op" id="4583613">.</span><span class="ident" id="4583614">ValueOf</span><span class="op" id="4583621">(</span><span class="ident" id="4583622">a</span><span class="op" id="4583623">)</span><span class="op" id="4583624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583627">return</span>&nbsp;<span class="ident" id="4583634">t</span><br>
<span class="lineno"></span><span class="op" id="4583636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4583639">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="4583699">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4583764">func</span>&nbsp;<span class="ident" id="4583769">and</span><span class="op" id="4583772">(</span><span class="ident" id="4583773">arg0</span>&nbsp;<span class="keyword" id="4583778">interface</span><span class="op" id="4583787">{</span><span class="op" id="4583788">}</span><span class="op" id="4583789">,</span>&nbsp;<span class="ident" id="4583791">args</span>&nbsp;<span class="op" id="4583796">...</span><span class="keyword" id="4583799">interface</span><span class="op" id="4583808">{</span><span class="op" id="4583809">}</span><span class="op" id="4583810">)</span>&nbsp;<span class="keyword" id="4583812">interface</span><span class="op" id="4583821">{</span><span class="op" id="4583822">}</span>&nbsp;<span class="op" id="4583824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583827">if</span>&nbsp;<span class="op" id="4583830">!</span><span class="ident" id="4583831">truth</span><span class="op" id="4583836">(</span><span class="ident" id="4583837">arg0</span><span class="op" id="4583841">)</span>&nbsp;<span class="op" id="4583843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583847">return</span>&nbsp;<span class="ident" id="4583854">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583860">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583863">for</span>&nbsp;<span class="ident" id="4583867">i</span>&nbsp;<span class="op" id="4583869">:=</span>&nbsp;<span class="keyword" id="4583872">range</span>&nbsp;<span class="ident" id="4583878">args</span>&nbsp;<span class="op" id="4583883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583887">arg0</span>&nbsp;<span class="op" id="4583892">=</span>&nbsp;<span class="ident" id="4583894">args</span><span class="op" id="4583898">[</span><span class="ident" id="4583899">i</span><span class="op" id="4583900">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583904">if</span>&nbsp;<span class="op" id="4583907">!</span><span class="ident" id="4583908">truth</span><span class="op" id="4583913">(</span><span class="ident" id="4583914">arg0</span><span class="op" id="4583918">)</span>&nbsp;<span class="op" id="4583920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583925">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583933">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583939">return</span>&nbsp;<span class="ident" id="4583946">arg0</span><br>
<span class="lineno"></span><span class="op" id="4583951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4583954">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="4584012">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4584076">func</span>&nbsp;<span class="ident" id="4584081">or</span><span class="op" id="4584083">(</span><span class="ident" id="4584084">arg0</span>&nbsp;<span class="keyword" id="4584089">interface</span><span class="op" id="4584098">{</span><span class="op" id="4584099">}</span><span class="op" id="4584100">,</span>&nbsp;<span class="ident" id="4584102">args</span>&nbsp;<span class="op" id="4584107">...</span><span class="keyword" id="4584110">interface</span><span class="op" id="4584119">{</span><span class="op" id="4584120">}</span><span class="op" id="4584121">)</span>&nbsp;<span class="keyword" id="4584123">interface</span><span class="op" id="4584132">{</span><span class="op" id="4584133">}</span>&nbsp;<span class="op" id="4584135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584138">if</span>&nbsp;<span class="ident" id="4584141">truth</span><span class="op" id="4584146">(</span><span class="ident" id="4584147">arg0</span><span class="op" id="4584151">)</span>&nbsp;<span class="op" id="4584153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584157">return</span>&nbsp;<span class="ident" id="4584164">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584170">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584173">for</span>&nbsp;<span class="ident" id="4584177">i</span>&nbsp;<span class="op" id="4584179">:=</span>&nbsp;<span class="keyword" id="4584182">range</span>&nbsp;<span class="ident" id="4584188">args</span>&nbsp;<span class="op" id="4584193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584197">arg0</span>&nbsp;<span class="op" id="4584202">=</span>&nbsp;<span class="ident" id="4584204">args</span><span class="op" id="4584208">[</span><span class="ident" id="4584209">i</span><span class="op" id="4584210">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584214">if</span>&nbsp;<span class="ident" id="4584217">truth</span><span class="op" id="4584222">(</span><span class="ident" id="4584223">arg0</span><span class="op" id="4584227">)</span>&nbsp;<span class="op" id="4584229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584234">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584242">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584248">return</span>&nbsp;<span class="ident" id="4584255">arg0</span><br>
<span class="lineno"></span><span class="op" id="4584260">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4584263">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="4584316">func</span>&nbsp;<span class="ident" id="4584321">not</span><span class="op" id="4584324">(</span><span class="ident" id="4584325">arg</span>&nbsp;<span class="keyword" id="4584329">interface</span><span class="op" id="4584338">{</span><span class="op" id="4584339">}</span><span class="op" id="4584340">)</span>&nbsp;<span class="op" id="4584342">(</span><span class="ident" id="4584343">truth</span>&nbsp;<span class="builtintype" id="4584349">bool</span><span class="op" id="4584353">)</span>&nbsp;<span class="op" id="4584355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584358">truth</span><span class="op" id="4584363">,</span>&nbsp;<span class="ident" id="4584365">_</span>&nbsp;<span class="op" id="4584367">=</span>&nbsp;<span class="ident" id="4584369">isTrue</span><span class="op" id="4584375">(</span><span class="ident" id="4584376">reflect</span><span class="op" id="4584383">.</span><span class="ident" id="4584384">ValueOf</span><span class="op" id="4584391">(</span><span class="ident" id="4584392">arg</span><span class="op" id="4584395">)</span><span class="op" id="4584396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584399">return</span>&nbsp;<span class="op" id="4584406">!</span><span class="ident" id="4584407">truth</span><br>
<span class="lineno"></span><span class="op" id="4584413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4584416">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4584432">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4584505">var</span>&nbsp;<span class="op" id="4584509">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584512">errBadComparisonType</span>&nbsp;<span class="op" id="4584533">=</span>&nbsp;<span class="ident" id="4584535">errors</span><span class="op" id="4584541">.</span><span class="ident" id="4584542">New</span><span class="op" id="4584545">(</span><span class="string" id="4584546">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4584575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584578">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4584599">=</span>&nbsp;<span class="ident" id="4584601">errors</span><span class="op" id="4584607">.</span><span class="ident" id="4584608">New</span><span class="op" id="4584611">(</span><span class="string" id="4584612">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4584647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584650">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4584671">=</span>&nbsp;<span class="ident" id="4584673">errors</span><span class="op" id="4584679">.</span><span class="ident" id="4584680">New</span><span class="op" id="4584683">(</span><span class="string" id="4584684">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4584717">)</span><br>
<span class="lineno"></span><span class="op" id="4584719">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="4584722">type</span>&nbsp;<span class="ident" id="4584727">kind</span>&nbsp;<span class="builtintype" id="4584732">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4584737">const</span>&nbsp;<span class="op" id="4584743">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584746">invalidKind</span>&nbsp;<span class="ident" id="4584758">kind</span>&nbsp;<span class="op" id="4584763">=</span>&nbsp;<span class="ident" id="4584765">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584771">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584781">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584794">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584803">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584814">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584827">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584839">uintKind</span><br>
<span class="lineno"></span><span class="op" id="4584848">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4584851">func</span>&nbsp;<span class="ident" id="4584856">basicKind</span><span class="op" id="4584865">(</span><span class="ident" id="4584866">v</span>&nbsp;<span class="ident" id="4584868">reflect</span><span class="op" id="4584875">.</span><span class="ident" id="4584876">Value</span><span class="op" id="4584881">)</span>&nbsp;<span class="op" id="4584883">(</span><span class="ident" id="4584884">kind</span><span class="op" id="4584888">,</span>&nbsp;<span class="builtintype" id="4584890">error</span><span class="op" id="4584895">)</span>&nbsp;<span class="op" id="4584897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584900">switch</span>&nbsp;<span class="ident" id="4584907">v</span><span class="op" id="4584908">.</span><span class="ident" id="4584909">Kind</span><span class="op" id="4584913">(</span><span class="op" id="4584914">)</span>&nbsp;<span class="op" id="4584916">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584919">case</span>&nbsp;<span class="ident" id="4584924">reflect</span><span class="op" id="4584931">.</span><span class="ident" id="4584932">Bool</span><span class="op" id="4584936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584940">return</span>&nbsp;<span class="ident" id="4584947">boolKind</span><span class="op" id="4584955">,</span>&nbsp;<span class="ident" id="4584957">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584962">case</span>&nbsp;<span class="ident" id="4584967">reflect</span><span class="op" id="4584974">.</span><span class="ident" id="4584975">Int</span><span class="op" id="4584978">,</span>&nbsp;<span class="ident" id="4584980">reflect</span><span class="op" id="4584987">.</span><span class="ident" id="4584988">Int8</span><span class="op" id="4584992">,</span>&nbsp;<span class="ident" id="4584994">reflect</span><span class="op" id="4585001">.</span><span class="ident" id="4585002">Int16</span><span class="op" id="4585007">,</span>&nbsp;<span class="ident" id="4585009">reflect</span><span class="op" id="4585016">.</span><span class="ident" id="4585017">Int32</span><span class="op" id="4585022">,</span>&nbsp;<span class="ident" id="4585024">reflect</span><span class="op" id="4585031">.</span><span class="ident" id="4585032">Int64</span><span class="op" id="4585037">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585041">return</span>&nbsp;<span class="ident" id="4585048">intKind</span><span class="op" id="4585055">,</span>&nbsp;<span class="ident" id="4585057">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585062">case</span>&nbsp;<span class="ident" id="4585067">reflect</span><span class="op" id="4585074">.</span><span class="ident" id="4585075">Uint</span><span class="op" id="4585079">,</span>&nbsp;<span class="ident" id="4585081">reflect</span><span class="op" id="4585088">.</span><span class="ident" id="4585089">Uint8</span><span class="op" id="4585094">,</span>&nbsp;<span class="ident" id="4585096">reflect</span><span class="op" id="4585103">.</span><span class="ident" id="4585104">Uint16</span><span class="op" id="4585110">,</span>&nbsp;<span class="ident" id="4585112">reflect</span><span class="op" id="4585119">.</span><span class="ident" id="4585120">Uint32</span><span class="op" id="4585126">,</span>&nbsp;<span class="ident" id="4585128">reflect</span><span class="op" id="4585135">.</span><span class="ident" id="4585136">Uint64</span><span class="op" id="4585142">,</span>&nbsp;<span class="ident" id="4585144">reflect</span><span class="op" id="4585151">.</span><span class="ident" id="4585152">Uintptr</span><span class="op" id="4585159">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585163">return</span>&nbsp;<span class="ident" id="4585170">uintKind</span><span class="op" id="4585178">,</span>&nbsp;<span class="ident" id="4585180">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585185">case</span>&nbsp;<span class="ident" id="4585190">reflect</span><span class="op" id="4585197">.</span><span class="ident" id="4585198">Float32</span><span class="op" id="4585205">,</span>&nbsp;<span class="ident" id="4585207">reflect</span><span class="op" id="4585214">.</span><span class="ident" id="4585215">Float64</span><span class="op" id="4585222">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585226">return</span>&nbsp;<span class="ident" id="4585233">floatKind</span><span class="op" id="4585242">,</span>&nbsp;<span class="ident" id="4585244">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585249">case</span>&nbsp;<span class="ident" id="4585254">reflect</span><span class="op" id="4585261">.</span><span class="ident" id="4585262">Complex64</span><span class="op" id="4585271">,</span>&nbsp;<span class="ident" id="4585273">reflect</span><span class="op" id="4585280">.</span><span class="ident" id="4585281">Complex128</span><span class="op" id="4585291">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585295">return</span>&nbsp;<span class="ident" id="4585302">complexKind</span><span class="op" id="4585313">,</span>&nbsp;<span class="ident" id="4585315">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585320">case</span>&nbsp;<span class="ident" id="4585325">reflect</span><span class="op" id="4585332">.</span><span class="ident" id="4585333">String</span><span class="op" id="4585339">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585343">return</span>&nbsp;<span class="ident" id="4585350">stringKind</span><span class="op" id="4585360">,</span>&nbsp;<span class="ident" id="4585362">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585370">return</span>&nbsp;<span class="ident" id="4585377">invalidKind</span><span class="op" id="4585388">,</span>&nbsp;<span class="ident" id="4585390">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="4585411">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="4585414">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="4585469">func</span>&nbsp;<span class="ident" id="4585474">eq</span><span class="op" id="4585476">(</span><span class="ident" id="4585477">arg1</span>&nbsp;<span class="keyword" id="4585482">interface</span><span class="op" id="4585491">{</span><span class="op" id="4585492">}</span><span class="op" id="4585493">,</span>&nbsp;<span class="ident" id="4585495">arg2</span>&nbsp;<span class="op" id="4585500">...</span><span class="keyword" id="4585503">interface</span><span class="op" id="4585512">{</span><span class="op" id="4585513">}</span><span class="op" id="4585514">)</span>&nbsp;<span class="op" id="4585516">(</span><span class="builtintype" id="4585517">bool</span><span class="op" id="4585521">,</span>&nbsp;<span class="builtintype" id="4585523">error</span><span class="op" id="4585528">)</span>&nbsp;<span class="op" id="4585530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585533">v1</span>&nbsp;<span class="op" id="4585536">:=</span>&nbsp;<span class="ident" id="4585539">reflect</span><span class="op" id="4585546">.</span><span class="ident" id="4585547">ValueOf</span><span class="op" id="4585554">(</span><span class="ident" id="4585555">arg1</span><span class="op" id="4585559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585562">k1</span><span class="op" id="4585564">,</span>&nbsp;<span class="ident" id="4585566">err</span>&nbsp;<span class="op" id="4585570">:=</span>&nbsp;<span class="ident" id="4585573">basicKind</span><span class="op" id="4585582">(</span><span class="ident" id="4585583">v1</span><span class="op" id="4585585">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585588">if</span>&nbsp;<span class="ident" id="4585591">err</span>&nbsp;<span class="op" id="4585595">!=</span>&nbsp;<span class="ident" id="4585598">nil</span>&nbsp;<span class="op" id="4585602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585606">return</span>&nbsp;<span class="builtintype" id="4585613">false</span><span class="op" id="4585618">,</span>&nbsp;<span class="ident" id="4585620">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585628">if</span>&nbsp;<span class="builtinfunc" id="4585631">len</span><span class="op" id="4585634">(</span><span class="ident" id="4585635">arg2</span><span class="op" id="4585639">)</span>&nbsp;<span class="op" id="4585641">==</span>&nbsp;<span class="num" id="4585644">0</span>&nbsp;<span class="op" id="4585646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585650">return</span>&nbsp;<span class="builtintype" id="4585657">false</span><span class="op" id="4585662">,</span>&nbsp;<span class="ident" id="4585664">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585684">for</span>&nbsp;<span class="ident" id="4585688">_</span><span class="op" id="4585689">,</span>&nbsp;<span class="ident" id="4585691">arg</span>&nbsp;<span class="op" id="4585695">:=</span>&nbsp;<span class="keyword" id="4585698">range</span>&nbsp;<span class="ident" id="4585704">arg2</span>&nbsp;<span class="op" id="4585709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585713">v2</span>&nbsp;<span class="op" id="4585716">:=</span>&nbsp;<span class="ident" id="4585719">reflect</span><span class="op" id="4585726">.</span><span class="ident" id="4585727">ValueOf</span><span class="op" id="4585734">(</span><span class="ident" id="4585735">arg</span><span class="op" id="4585738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585742">k2</span><span class="op" id="4585744">,</span>&nbsp;<span class="ident" id="4585746">err</span>&nbsp;<span class="op" id="4585750">:=</span>&nbsp;<span class="ident" id="4585753">basicKind</span><span class="op" id="4585762">(</span><span class="ident" id="4585763">v2</span><span class="op" id="4585765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585769">if</span>&nbsp;<span class="ident" id="4585772">err</span>&nbsp;<span class="op" id="4585776">!=</span>&nbsp;<span class="ident" id="4585779">nil</span>&nbsp;<span class="op" id="4585783">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585788">return</span>&nbsp;<span class="builtintype" id="4585795">false</span><span class="op" id="4585800">,</span>&nbsp;<span class="ident" id="4585802">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585812">truth</span>&nbsp;<span class="op" id="4585818">:=</span>&nbsp;<span class="builtintype" id="4585821">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585829">if</span>&nbsp;<span class="ident" id="4585832">k1</span>&nbsp;<span class="op" id="4585835">!=</span>&nbsp;<span class="ident" id="4585838">k2</span>&nbsp;<span class="op" id="4585841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4585846">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585920">switch</span>&nbsp;<span class="op" id="4585927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585932">case</span>&nbsp;<span class="ident" id="4585937">k1</span>&nbsp;<span class="op" id="4585940">==</span>&nbsp;<span class="ident" id="4585943">intKind</span>&nbsp;<span class="op" id="4585951">&amp;&amp;</span>&nbsp;<span class="ident" id="4585954">k2</span>&nbsp;<span class="op" id="4585957">==</span>&nbsp;<span class="ident" id="4585960">uintKind</span><span class="op" id="4585968">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585974">truth</span>&nbsp;<span class="op" id="4585980">=</span>&nbsp;<span class="ident" id="4585982">v1</span><span class="op" id="4585984">.</span><span class="ident" id="4585985">Int</span><span class="op" id="4585988">(</span><span class="op" id="4585989">)</span>&nbsp;<span class="op" id="4585991">&gt;=</span>&nbsp;<span class="num" id="4585994">0</span>&nbsp;<span class="op" id="4585996">&amp;&amp;</span>&nbsp;<span class="ident" id="4585999">uint64</span><span class="op" id="4586005">(</span><span class="ident" id="4586006">v1</span><span class="op" id="4586008">.</span><span class="ident" id="4586009">Int</span><span class="op" id="4586012">(</span><span class="op" id="4586013">)</span><span class="op" id="4586014">)</span>&nbsp;<span class="op" id="4586016">==</span>&nbsp;<span class="ident" id="4586019">v2</span><span class="op" id="4586021">.</span><span class="ident" id="4586022">Uint</span><span class="op" id="4586026">(</span><span class="op" id="4586027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586032">case</span>&nbsp;<span class="ident" id="4586037">k1</span>&nbsp;<span class="op" id="4586040">==</span>&nbsp;<span class="ident" id="4586043">uintKind</span>&nbsp;<span class="op" id="4586052">&amp;&amp;</span>&nbsp;<span class="ident" id="4586055">k2</span>&nbsp;<span class="op" id="4586058">==</span>&nbsp;<span class="ident" id="4586061">intKind</span><span class="op" id="4586068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586074">truth</span>&nbsp;<span class="op" id="4586080">=</span>&nbsp;<span class="ident" id="4586082">v2</span><span class="op" id="4586084">.</span><span class="ident" id="4586085">Int</span><span class="op" id="4586088">(</span><span class="op" id="4586089">)</span>&nbsp;<span class="op" id="4586091">&gt;=</span>&nbsp;<span class="num" id="4586094">0</span>&nbsp;<span class="op" id="4586096">&amp;&amp;</span>&nbsp;<span class="ident" id="4586099">v1</span><span class="op" id="4586101">.</span><span class="ident" id="4586102">Uint</span><span class="op" id="4586106">(</span><span class="op" id="4586107">)</span>&nbsp;<span class="op" id="4586109">==</span>&nbsp;<span class="ident" id="4586112">uint64</span><span class="op" id="4586118">(</span><span class="ident" id="4586119">v2</span><span class="op" id="4586121">.</span><span class="ident" id="4586122">Int</span><span class="op" id="4586125">(</span><span class="op" id="4586126">)</span><span class="op" id="4586127">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586132">default</span><span class="op" id="4586139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586145">return</span>&nbsp;<span class="builtintype" id="4586152">false</span><span class="op" id="4586157">,</span>&nbsp;<span class="ident" id="4586159">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586183">}</span>&nbsp;<span class="keyword" id="4586185">else</span>&nbsp;<span class="op" id="4586190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586195">switch</span>&nbsp;<span class="ident" id="4586202">k1</span>&nbsp;<span class="op" id="4586205">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586210">case</span>&nbsp;<span class="ident" id="4586215">boolKind</span><span class="op" id="4586223">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586229">truth</span>&nbsp;<span class="op" id="4586235">=</span>&nbsp;<span class="ident" id="4586237">v1</span><span class="op" id="4586239">.</span><span class="ident" id="4586240">Bool</span><span class="op" id="4586244">(</span><span class="op" id="4586245">)</span>&nbsp;<span class="op" id="4586247">==</span>&nbsp;<span class="ident" id="4586250">v2</span><span class="op" id="4586252">.</span><span class="ident" id="4586253">Bool</span><span class="op" id="4586257">(</span><span class="op" id="4586258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586263">case</span>&nbsp;<span class="ident" id="4586268">complexKind</span><span class="op" id="4586279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586285">truth</span>&nbsp;<span class="op" id="4586291">=</span>&nbsp;<span class="ident" id="4586293">v1</span><span class="op" id="4586295">.</span><span class="ident" id="4586296">Complex</span><span class="op" id="4586303">(</span><span class="op" id="4586304">)</span>&nbsp;<span class="op" id="4586306">==</span>&nbsp;<span class="ident" id="4586309">v2</span><span class="op" id="4586311">.</span><span class="ident" id="4586312">Complex</span><span class="op" id="4586319">(</span><span class="op" id="4586320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586325">case</span>&nbsp;<span class="ident" id="4586330">floatKind</span><span class="op" id="4586339">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586345">truth</span>&nbsp;<span class="op" id="4586351">=</span>&nbsp;<span class="ident" id="4586353">v1</span><span class="op" id="4586355">.</span><span class="ident" id="4586356">Float</span><span class="op" id="4586361">(</span><span class="op" id="4586362">)</span>&nbsp;<span class="op" id="4586364">==</span>&nbsp;<span class="ident" id="4586367">v2</span><span class="op" id="4586369">.</span><span class="ident" id="4586370">Float</span><span class="op" id="4586375">(</span><span class="op" id="4586376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586381">case</span>&nbsp;<span class="ident" id="4586386">intKind</span><span class="op" id="4586393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586399">truth</span>&nbsp;<span class="op" id="4586405">=</span>&nbsp;<span class="ident" id="4586407">v1</span><span class="op" id="4586409">.</span><span class="ident" id="4586410">Int</span><span class="op" id="4586413">(</span><span class="op" id="4586414">)</span>&nbsp;<span class="op" id="4586416">==</span>&nbsp;<span class="ident" id="4586419">v2</span><span class="op" id="4586421">.</span><span class="ident" id="4586422">Int</span><span class="op" id="4586425">(</span><span class="op" id="4586426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586431">case</span>&nbsp;<span class="ident" id="4586436">stringKind</span><span class="op" id="4586446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586452">truth</span>&nbsp;<span class="op" id="4586458">=</span>&nbsp;<span class="ident" id="4586460">v1</span><span class="op" id="4586462">.</span><span class="ident" id="4586463">String</span><span class="op" id="4586469">(</span><span class="op" id="4586470">)</span>&nbsp;<span class="op" id="4586472">==</span>&nbsp;<span class="ident" id="4586475">v2</span><span class="op" id="4586477">.</span><span class="ident" id="4586478">String</span><span class="op" id="4586484">(</span><span class="op" id="4586485">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586490">case</span>&nbsp;<span class="ident" id="4586495">uintKind</span><span class="op" id="4586503">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586509">truth</span>&nbsp;<span class="op" id="4586515">=</span>&nbsp;<span class="ident" id="4586517">v1</span><span class="op" id="4586519">.</span><span class="ident" id="4586520">Uint</span><span class="op" id="4586524">(</span><span class="op" id="4586525">)</span>&nbsp;<span class="op" id="4586527">==</span>&nbsp;<span class="ident" id="4586530">v2</span><span class="op" id="4586532">.</span><span class="ident" id="4586533">Uint</span><span class="op" id="4586537">(</span><span class="op" id="4586538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586543">default</span><span class="op" id="4586550">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4586556">panic</span><span class="op" id="4586561">(</span><span class="string" id="4586562">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4586576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586581">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586589">if</span>&nbsp;<span class="ident" id="4586592">truth</span>&nbsp;<span class="op" id="4586598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586603">return</span>&nbsp;<span class="builtintype" id="4586610">true</span><span class="op" id="4586614">,</span>&nbsp;<span class="ident" id="4586616">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586625">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586628">return</span>&nbsp;<span class="builtintype" id="4586635">false</span><span class="op" id="4586640">,</span>&nbsp;<span class="ident" id="4586642">nil</span><br>
<span class="lineno"></span><span class="op" id="4586646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4586649">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4586688">func</span>&nbsp;<span class="ident" id="4586693">ne</span><span class="op" id="4586695">(</span><span class="ident" id="4586696">arg1</span><span class="op" id="4586700">,</span>&nbsp;<span class="ident" id="4586702">arg2</span>&nbsp;<span class="keyword" id="4586707">interface</span><span class="op" id="4586716">{</span><span class="op" id="4586717">}</span><span class="op" id="4586718">)</span>&nbsp;<span class="op" id="4586720">(</span><span class="builtintype" id="4586721">bool</span><span class="op" id="4586725">,</span>&nbsp;<span class="builtintype" id="4586727">error</span><span class="op" id="4586732">)</span>&nbsp;<span class="op" id="4586734">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4586737">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586766">equal</span><span class="op" id="4586771">,</span>&nbsp;<span class="ident" id="4586773">err</span>&nbsp;<span class="op" id="4586777">:=</span>&nbsp;<span class="ident" id="4586780">eq</span><span class="op" id="4586782">(</span><span class="ident" id="4586783">arg1</span><span class="op" id="4586787">,</span>&nbsp;<span class="ident" id="4586789">arg2</span><span class="op" id="4586793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586796">return</span>&nbsp;<span class="op" id="4586803">!</span><span class="ident" id="4586804">equal</span><span class="op" id="4586809">,</span>&nbsp;<span class="ident" id="4586811">err</span><br>
<span class="lineno"></span><span class="op" id="4586815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="4586818">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4586856">func</span>&nbsp;<span class="ident" id="4586861">lt</span><span class="op" id="4586863">(</span><span class="ident" id="4586864">arg1</span><span class="op" id="4586868">,</span>&nbsp;<span class="ident" id="4586870">arg2</span>&nbsp;<span class="keyword" id="4586875">interface</span><span class="op" id="4586884">{</span><span class="op" id="4586885">}</span><span class="op" id="4586886">)</span>&nbsp;<span class="op" id="4586888">(</span><span class="builtintype" id="4586889">bool</span><span class="op" id="4586893">,</span>&nbsp;<span class="builtintype" id="4586895">error</span><span class="op" id="4586900">)</span>&nbsp;<span class="op" id="4586902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586905">v1</span>&nbsp;<span class="op" id="4586908">:=</span>&nbsp;<span class="ident" id="4586911">reflect</span><span class="op" id="4586918">.</span><span class="ident" id="4586919">ValueOf</span><span class="op" id="4586926">(</span><span class="ident" id="4586927">arg1</span><span class="op" id="4586931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4586934">k1</span><span class="op" id="4586936">,</span>&nbsp;<span class="ident" id="4586938">err</span>&nbsp;<span class="op" id="4586942">:=</span>&nbsp;<span class="ident" id="4586945">basicKind</span><span class="op" id="4586954">(</span><span class="ident" id="4586955">v1</span><span class="op" id="4586957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586960">if</span>&nbsp;<span class="ident" id="4586963">err</span>&nbsp;<span class="op" id="4586967">!=</span>&nbsp;<span class="ident" id="4586970">nil</span>&nbsp;<span class="op" id="4586974">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4586978">return</span>&nbsp;<span class="builtintype" id="4586985">false</span><span class="op" id="4586990">,</span>&nbsp;<span class="ident" id="4586992">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4586997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587000">v2</span>&nbsp;<span class="op" id="4587003">:=</span>&nbsp;<span class="ident" id="4587006">reflect</span><span class="op" id="4587013">.</span><span class="ident" id="4587014">ValueOf</span><span class="op" id="4587021">(</span><span class="ident" id="4587022">arg2</span><span class="op" id="4587026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587029">k2</span><span class="op" id="4587031">,</span>&nbsp;<span class="ident" id="4587033">err</span>&nbsp;<span class="op" id="4587037">:=</span>&nbsp;<span class="ident" id="4587040">basicKind</span><span class="op" id="4587049">(</span><span class="ident" id="4587050">v2</span><span class="op" id="4587052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587055">if</span>&nbsp;<span class="ident" id="4587058">err</span>&nbsp;<span class="op" id="4587062">!=</span>&nbsp;<span class="ident" id="4587065">nil</span>&nbsp;<span class="op" id="4587069">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587073">return</span>&nbsp;<span class="builtintype" id="4587080">false</span><span class="op" id="4587085">,</span>&nbsp;<span class="ident" id="4587087">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4587092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587095">truth</span>&nbsp;<span class="op" id="4587101">:=</span>&nbsp;<span class="builtintype" id="4587104">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587111">if</span>&nbsp;<span class="ident" id="4587114">k1</span>&nbsp;<span class="op" id="4587117">!=</span>&nbsp;<span class="ident" id="4587120">k2</span>&nbsp;<span class="op" id="4587123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4587127">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587200">switch</span>&nbsp;<span class="op" id="4587207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587211">case</span>&nbsp;<span class="ident" id="4587216">k1</span>&nbsp;<span class="op" id="4587219">==</span>&nbsp;<span class="ident" id="4587222">intKind</span>&nbsp;<span class="op" id="4587230">&amp;&amp;</span>&nbsp;<span class="ident" id="4587233">k2</span>&nbsp;<span class="op" id="4587236">==</span>&nbsp;<span class="ident" id="4587239">uintKind</span><span class="op" id="4587247">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587252">truth</span>&nbsp;<span class="op" id="4587258">=</span>&nbsp;<span class="ident" id="4587260">v1</span><span class="op" id="4587262">.</span><span class="ident" id="4587263">Int</span><span class="op" id="4587266">(</span><span class="op" id="4587267">)</span>&nbsp;<span class="op" id="4587269">&lt;</span>&nbsp;<span class="num" id="4587271">0</span>&nbsp;<span class="op" id="4587273">||</span>&nbsp;<span class="ident" id="4587276">uint64</span><span class="op" id="4587282">(</span><span class="ident" id="4587283">v1</span><span class="op" id="4587285">.</span><span class="ident" id="4587286">Int</span><span class="op" id="4587289">(</span><span class="op" id="4587290">)</span><span class="op" id="4587291">)</span>&nbsp;<span class="op" id="4587293">&lt;</span>&nbsp;<span class="ident" id="4587295">v2</span><span class="op" id="4587297">.</span><span class="ident" id="4587298">Uint</span><span class="op" id="4587302">(</span><span class="op" id="4587303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587307">case</span>&nbsp;<span class="ident" id="4587312">k1</span>&nbsp;<span class="op" id="4587315">==</span>&nbsp;<span class="ident" id="4587318">uintKind</span>&nbsp;<span class="op" id="4587327">&amp;&amp;</span>&nbsp;<span class="ident" id="4587330">k2</span>&nbsp;<span class="op" id="4587333">==</span>&nbsp;<span class="ident" id="4587336">intKind</span><span class="op" id="4587343">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587348">truth</span>&nbsp;<span class="op" id="4587354">=</span>&nbsp;<span class="ident" id="4587356">v2</span><span class="op" id="4587358">.</span><span class="ident" id="4587359">Int</span><span class="op" id="4587362">(</span><span class="op" id="4587363">)</span>&nbsp;<span class="op" id="4587365">&gt;=</span>&nbsp;<span class="num" id="4587368">0</span>&nbsp;<span class="op" id="4587370">&amp;&amp;</span>&nbsp;<span class="ident" id="4587373">v1</span><span class="op" id="4587375">.</span><span class="ident" id="4587376">Uint</span><span class="op" id="4587380">(</span><span class="op" id="4587381">)</span>&nbsp;<span class="op" id="4587383">&lt;</span>&nbsp;<span class="ident" id="4587385">uint64</span><span class="op" id="4587391">(</span><span class="ident" id="4587392">v2</span><span class="op" id="4587394">.</span><span class="ident" id="4587395">Int</span><span class="op" id="4587398">(</span><span class="op" id="4587399">)</span><span class="op" id="4587400">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587404">default</span><span class="op" id="4587411">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587416">return</span>&nbsp;<span class="builtintype" id="4587423">false</span><span class="op" id="4587428">,</span>&nbsp;<span class="ident" id="4587430">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4587449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4587452">}</span>&nbsp;<span class="keyword" id="4587454">else</span>&nbsp;<span class="op" id="4587459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587463">switch</span>&nbsp;<span class="ident" id="4587470">k1</span>&nbsp;<span class="op" id="4587473">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587477">case</span>&nbsp;<span class="ident" id="4587482">boolKind</span><span class="op" id="4587490">,</span>&nbsp;<span class="ident" id="4587492">complexKind</span><span class="op" id="4587503">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587508">return</span>&nbsp;<span class="builtintype" id="4587515">false</span><span class="op" id="4587520">,</span>&nbsp;<span class="ident" id="4587522">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587545">case</span>&nbsp;<span class="ident" id="4587550">floatKind</span><span class="op" id="4587559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587564">truth</span>&nbsp;<span class="op" id="4587570">=</span>&nbsp;<span class="ident" id="4587572">v1</span><span class="op" id="4587574">.</span><span class="ident" id="4587575">Float</span><span class="op" id="4587580">(</span><span class="op" id="4587581">)</span>&nbsp;<span class="op" id="4587583">&lt;</span>&nbsp;<span class="ident" id="4587585">v2</span><span class="op" id="4587587">.</span><span class="ident" id="4587588">Float</span><span class="op" id="4587593">(</span><span class="op" id="4587594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587598">case</span>&nbsp;<span class="ident" id="4587603">intKind</span><span class="op" id="4587610">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587615">truth</span>&nbsp;<span class="op" id="4587621">=</span>&nbsp;<span class="ident" id="4587623">v1</span><span class="op" id="4587625">.</span><span class="ident" id="4587626">Int</span><span class="op" id="4587629">(</span><span class="op" id="4587630">)</span>&nbsp;<span class="op" id="4587632">&lt;</span>&nbsp;<span class="ident" id="4587634">v2</span><span class="op" id="4587636">.</span><span class="ident" id="4587637">Int</span><span class="op" id="4587640">(</span><span class="op" id="4587641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587645">case</span>&nbsp;<span class="ident" id="4587650">stringKind</span><span class="op" id="4587660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587665">truth</span>&nbsp;<span class="op" id="4587671">=</span>&nbsp;<span class="ident" id="4587673">v1</span><span class="op" id="4587675">.</span><span class="ident" id="4587676">String</span><span class="op" id="4587682">(</span><span class="op" id="4587683">)</span>&nbsp;<span class="op" id="4587685">&lt;</span>&nbsp;<span class="ident" id="4587687">v2</span><span class="op" id="4587689">.</span><span class="ident" id="4587690">String</span><span class="op" id="4587696">(</span><span class="op" id="4587697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587701">case</span>&nbsp;<span class="ident" id="4587706">uintKind</span><span class="op" id="4587714">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587719">truth</span>&nbsp;<span class="op" id="4587725">=</span>&nbsp;<span class="ident" id="4587727">v1</span><span class="op" id="4587729">.</span><span class="ident" id="4587730">Uint</span><span class="op" id="4587734">(</span><span class="op" id="4587735">)</span>&nbsp;<span class="op" id="4587737">&lt;</span>&nbsp;<span class="ident" id="4587739">v2</span><span class="op" id="4587741">.</span><span class="ident" id="4587742">Uint</span><span class="op" id="4587746">(</span><span class="op" id="4587747">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587751">default</span><span class="op" id="4587758">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4587763">panic</span><span class="op" id="4587768">(</span><span class="string" id="4587769">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4587783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4587787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4587790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587793">return</span>&nbsp;<span class="ident" id="4587800">truth</span><span class="op" id="4587805">,</span>&nbsp;<span class="ident" id="4587807">nil</span><br>
<span class="lineno">400</span><span class="op" id="4587811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4587814">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4587851">func</span>&nbsp;<span class="ident" id="4587856">le</span><span class="op" id="4587858">(</span><span class="ident" id="4587859">arg1</span><span class="op" id="4587863">,</span>&nbsp;<span class="ident" id="4587865">arg2</span>&nbsp;<span class="keyword" id="4587870">interface</span><span class="op" id="4587879">{</span><span class="op" id="4587880">}</span><span class="op" id="4587881">)</span>&nbsp;<span class="op" id="4587883">(</span><span class="builtintype" id="4587884">bool</span><span class="op" id="4587888">,</span>&nbsp;<span class="builtintype" id="4587890">error</span><span class="op" id="4587895">)</span>&nbsp;<span class="op" id="4587897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4587900">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4587919">lessThan</span><span class="op" id="4587927">,</span>&nbsp;<span class="ident" id="4587929">err</span>&nbsp;<span class="op" id="4587933">:=</span>&nbsp;<span class="ident" id="4587936">lt</span><span class="op" id="4587938">(</span><span class="ident" id="4587939">arg1</span><span class="op" id="4587943">,</span>&nbsp;<span class="ident" id="4587945">arg2</span><span class="op" id="4587949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587952">if</span>&nbsp;<span class="ident" id="4587955">lessThan</span>&nbsp;<span class="op" id="4587964">||</span>&nbsp;<span class="ident" id="4587967">err</span>&nbsp;<span class="op" id="4587971">!=</span>&nbsp;<span class="ident" id="4587974">nil</span>&nbsp;<span class="op" id="4587978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4587982">return</span>&nbsp;<span class="ident" id="4587989">lessThan</span><span class="op" id="4587997">,</span>&nbsp;<span class="ident" id="4587999">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4588004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588007">return</span>&nbsp;<span class="ident" id="4588014">eq</span><span class="op" id="4588016">(</span><span class="ident" id="4588017">arg1</span><span class="op" id="4588021">,</span>&nbsp;<span class="ident" id="4588023">arg2</span><span class="op" id="4588027">)</span><br>
<span class="lineno">410</span><span class="op" id="4588029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4588032">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4588070">func</span>&nbsp;<span class="ident" id="4588075">gt</span><span class="op" id="4588077">(</span><span class="ident" id="4588078">arg1</span><span class="op" id="4588082">,</span>&nbsp;<span class="ident" id="4588084">arg2</span>&nbsp;<span class="keyword" id="4588089">interface</span><span class="op" id="4588098">{</span><span class="op" id="4588099">}</span><span class="op" id="4588100">)</span>&nbsp;<span class="op" id="4588102">(</span><span class="builtintype" id="4588103">bool</span><span class="op" id="4588107">,</span>&nbsp;<span class="builtintype" id="4588109">error</span><span class="op" id="4588114">)</span>&nbsp;<span class="op" id="4588116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4588119">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588147">lessOrEqual</span><span class="op" id="4588158">,</span>&nbsp;<span class="ident" id="4588160">err</span>&nbsp;<span class="op" id="4588164">:=</span>&nbsp;<span class="ident" id="4588167">le</span><span class="op" id="4588169">(</span><span class="ident" id="4588170">arg1</span><span class="op" id="4588174">,</span>&nbsp;<span class="ident" id="4588176">arg2</span><span class="op" id="4588180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588183">if</span>&nbsp;<span class="ident" id="4588186">err</span>&nbsp;<span class="op" id="4588190">!=</span>&nbsp;<span class="ident" id="4588193">nil</span>&nbsp;<span class="op" id="4588197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588201">return</span>&nbsp;<span class="builtintype" id="4588208">false</span><span class="op" id="4588213">,</span>&nbsp;<span class="ident" id="4588215">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4588220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588223">return</span>&nbsp;<span class="op" id="4588230">!</span><span class="ident" id="4588231">lessOrEqual</span><span class="op" id="4588242">,</span>&nbsp;<span class="ident" id="4588244">nil</span><br>
<span class="lineno">420</span><span class="op" id="4588248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4588251">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4588290">func</span>&nbsp;<span class="ident" id="4588295">ge</span><span class="op" id="4588297">(</span><span class="ident" id="4588298">arg1</span><span class="op" id="4588302">,</span>&nbsp;<span class="ident" id="4588304">arg2</span>&nbsp;<span class="keyword" id="4588309">interface</span><span class="op" id="4588318">{</span><span class="op" id="4588319">}</span><span class="op" id="4588320">)</span>&nbsp;<span class="op" id="4588322">(</span><span class="builtintype" id="4588323">bool</span><span class="op" id="4588327">,</span>&nbsp;<span class="builtintype" id="4588329">error</span><span class="op" id="4588334">)</span>&nbsp;<span class="op" id="4588336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4588339">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588367">lessThan</span><span class="op" id="4588375">,</span>&nbsp;<span class="ident" id="4588377">err</span>&nbsp;<span class="op" id="4588381">:=</span>&nbsp;<span class="ident" id="4588384">lt</span><span class="op" id="4588386">(</span><span class="ident" id="4588387">arg1</span><span class="op" id="4588391">,</span>&nbsp;<span class="ident" id="4588393">arg2</span><span class="op" id="4588397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588400">if</span>&nbsp;<span class="ident" id="4588403">err</span>&nbsp;<span class="op" id="4588407">!=</span>&nbsp;<span class="ident" id="4588410">nil</span>&nbsp;<span class="op" id="4588414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588418">return</span>&nbsp;<span class="builtintype" id="4588425">false</span><span class="op" id="4588430">,</span>&nbsp;<span class="ident" id="4588432">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4588437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588440">return</span>&nbsp;<span class="op" id="4588447">!</span><span class="ident" id="4588448">lessThan</span><span class="op" id="4588456">,</span>&nbsp;<span class="ident" id="4588458">nil</span><br>
<span class="lineno">430</span><span class="op" id="4588462">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4588465">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4588484">var</span>&nbsp;<span class="op" id="4588488">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588491">htmlQuot</span>&nbsp;<span class="op" id="4588500">=</span>&nbsp;<span class="op" id="4588502">[</span><span class="op" id="4588503">]</span><span class="builtintype" id="4588504">byte</span><span class="op" id="4588508">(</span><span class="string" id="4588509">&#34;&amp;#34;&#34;</span><span class="op" id="4588516">)</span>&nbsp;<span class="comment" id="4588518">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588544">htmlApos</span>&nbsp;<span class="op" id="4588553">=</span>&nbsp;<span class="op" id="4588555">[</span><span class="op" id="4588556">]</span><span class="builtintype" id="4588557">byte</span><span class="op" id="4588561">(</span><span class="string" id="4588562">&#34;&amp;#39;&#34;</span><span class="op" id="4588569">)</span>&nbsp;<span class="comment" id="4588571">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588634">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="4588643">=</span>&nbsp;<span class="op" id="4588645">[</span><span class="op" id="4588646">]</span><span class="builtintype" id="4588647">byte</span><span class="op" id="4588651">(</span><span class="string" id="4588652">&#34;&amp;amp;&#34;</span><span class="op" id="4588659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588662">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4588671">=</span>&nbsp;<span class="op" id="4588673">[</span><span class="op" id="4588674">]</span><span class="builtintype" id="4588675">byte</span><span class="op" id="4588679">(</span><span class="string" id="4588680">&#34;&amp;lt;&#34;</span><span class="op" id="4588686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588689">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4588698">=</span>&nbsp;<span class="op" id="4588700">[</span><span class="op" id="4588701">]</span><span class="builtintype" id="4588702">byte</span><span class="op" id="4588706">(</span><span class="string" id="4588707">&#34;&amp;gt;&#34;</span><span class="op" id="4588713">)</span><br>
<span class="lineno">440</span><span class="op" id="4588715">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4588718">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4588798">func</span>&nbsp;<span class="ident" id="4588803">HTMLEscape</span><span class="op" id="4588813">(</span><span class="ident" id="4588814">w</span>&nbsp;<span class="ident" id="4588816">io</span><span class="op" id="4588818">.</span><span class="ident" id="4588819">Writer</span><span class="op" id="4588825">,</span>&nbsp;<span class="ident" id="4588827">b</span>&nbsp;<span class="op" id="4588829">[</span><span class="op" id="4588830">]</span><span class="builtintype" id="4588831">byte</span><span class="op" id="4588835">)</span>&nbsp;<span class="op" id="4588837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588840">last</span>&nbsp;<span class="op" id="4588845">:=</span>&nbsp;<span class="num" id="4588848">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588851">for</span>&nbsp;<span class="ident" id="4588855">i</span><span class="op" id="4588856">,</span>&nbsp;<span class="ident" id="4588858">c</span>&nbsp;<span class="op" id="4588860">:=</span>&nbsp;<span class="keyword" id="4588863">range</span>&nbsp;<span class="ident" id="4588869">b</span>&nbsp;<span class="op" id="4588871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588875">var</span>&nbsp;<span class="ident" id="4588879">html</span>&nbsp;<span class="op" id="4588884">[</span><span class="op" id="4588885">]</span><span class="builtintype" id="4588886">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588893">switch</span>&nbsp;<span class="ident" id="4588900">c</span>&nbsp;<span class="op" id="4588902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588906">case</span>&nbsp;<span class="string" id="4588911">&#39;&#34;&#39;</span><span class="op" id="4588914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588919">html</span>&nbsp;<span class="op" id="4588924">=</span>&nbsp;<span class="ident" id="4588926">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588937">case</span>&nbsp;<span class="string" id="4588942">&#39;\&#39;&#39;</span><span class="op" id="4588946">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588951">html</span>&nbsp;<span class="op" id="4588956">=</span>&nbsp;<span class="ident" id="4588958">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588969">case</span>&nbsp;<span class="string" id="4588974">&#39;&amp;&#39;</span><span class="op" id="4588977">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4588982">html</span>&nbsp;<span class="op" id="4588987">=</span>&nbsp;<span class="ident" id="4588989">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4588999">case</span>&nbsp;<span class="string" id="4589004">&#39;&lt;&#39;</span><span class="op" id="4589007">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589012">html</span>&nbsp;<span class="op" id="4589017">=</span>&nbsp;<span class="ident" id="4589019">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589028">case</span>&nbsp;<span class="string" id="4589033">&#39;&gt;&#39;</span><span class="op" id="4589036">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589041">html</span>&nbsp;<span class="op" id="4589046">=</span>&nbsp;<span class="ident" id="4589048">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589057">default</span><span class="op" id="4589064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589069">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4589080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589084">w</span><span class="op" id="4589085">.</span><span class="ident" id="4589086">Write</span><span class="op" id="4589091">(</span><span class="ident" id="4589092">b</span><span class="op" id="4589093">[</span><span class="ident" id="4589094">last</span><span class="op" id="4589098">:</span><span class="ident" id="4589099">i</span><span class="op" id="4589100">]</span><span class="op" id="4589101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589105">w</span><span class="op" id="4589106">.</span><span class="ident" id="4589107">Write</span><span class="op" id="4589112">(</span><span class="ident" id="4589113">html</span><span class="op" id="4589117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589121">last</span>&nbsp;<span class="op" id="4589126">=</span>&nbsp;<span class="ident" id="4589128">i</span>&nbsp;<span class="op" id="4589130">+</span>&nbsp;<span class="num" id="4589132">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4589135">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589138">w</span><span class="op" id="4589139">.</span><span class="ident" id="4589140">Write</span><span class="op" id="4589145">(</span><span class="ident" id="4589146">b</span><span class="op" id="4589147">[</span><span class="ident" id="4589148">last</span><span class="op" id="4589152">:</span><span class="op" id="4589153">]</span><span class="op" id="4589154">)</span><br>
<span class="lineno"></span><span class="op" id="4589156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4589159">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4589241">func</span>&nbsp;<span class="ident" id="4589246">HTMLEscapeString</span><span class="op" id="4589262">(</span><span class="ident" id="4589263">s</span>&nbsp;<span class="builtintype" id="4589265">string</span><span class="op" id="4589271">)</span>&nbsp;<span class="builtintype" id="4589273">string</span>&nbsp;<span class="op" id="4589280">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4589283">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589315">if</span>&nbsp;<span class="ident" id="4589318">strings</span><span class="op" id="4589325">.</span><span class="ident" id="4589326">IndexAny</span><span class="op" id="4589334">(</span><span class="ident" id="4589335">s</span><span class="op" id="4589336">,</span>&nbsp;<span class="string" id="4589338">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="4589345">)</span>&nbsp;<span class="op" id="4589347">&lt;</span>&nbsp;<span class="num" id="4589349">0</span>&nbsp;<span class="op" id="4589351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589355">return</span>&nbsp;<span class="ident" id="4589362">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4589365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589368">var</span>&nbsp;<span class="ident" id="4589372">b</span>&nbsp;<span class="ident" id="4589374">bytes</span><span class="op" id="4589379">.</span><span class="ident" id="4589380">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589388">HTMLEscape</span><span class="op" id="4589398">(</span><span class="op" id="4589399">&amp;</span><span class="ident" id="4589400">b</span><span class="op" id="4589401">,</span>&nbsp;<span class="op" id="4589403">[</span><span class="op" id="4589404">]</span><span class="builtintype" id="4589405">byte</span><span class="op" id="4589409">(</span><span class="ident" id="4589410">s</span><span class="op" id="4589411">)</span><span class="op" id="4589412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589415">return</span>&nbsp;<span class="ident" id="4589422">b</span><span class="op" id="4589423">.</span><span class="ident" id="4589424">String</span><span class="op" id="4589430">(</span><span class="op" id="4589431">)</span><br>
<span class="lineno"></span><span class="op" id="4589433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4589436">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="4589502">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4589538">func</span>&nbsp;<span class="ident" id="4589543">HTMLEscaper</span><span class="op" id="4589554">(</span><span class="ident" id="4589555">args</span>&nbsp;<span class="op" id="4589560">...</span><span class="keyword" id="4589563">interface</span><span class="op" id="4589572">{</span><span class="op" id="4589573">}</span><span class="op" id="4589574">)</span>&nbsp;<span class="builtintype" id="4589576">string</span>&nbsp;<span class="op" id="4589583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4589586">return</span>&nbsp;<span class="ident" id="4589593">HTMLEscapeString</span><span class="op" id="4589609">(</span><span class="ident" id="4589610">evalArgs</span><span class="op" id="4589618">(</span><span class="ident" id="4589619">args</span><span class="op" id="4589623">)</span><span class="op" id="4589624">)</span><br>
<span class="lineno"></span><span class="op" id="4589626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="4589629">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4589654">var</span>&nbsp;<span class="op" id="4589658">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589661">jsLowUni</span>&nbsp;<span class="op" id="4589670">=</span>&nbsp;<span class="op" id="4589672">[</span><span class="op" id="4589673">]</span><span class="builtintype" id="4589674">byte</span><span class="op" id="4589678">(</span><span class="string" id="4589679">`\u00`</span><span class="op" id="4589685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589688">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4589697">=</span>&nbsp;<span class="op" id="4589699">[</span><span class="op" id="4589700">]</span><span class="builtintype" id="4589701">byte</span><span class="op" id="4589705">(</span><span class="string" id="4589706">&#34;0123456789ABCDEF&#34;</span><span class="op" id="4589724">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589728">jsBackslash</span>&nbsp;<span class="op" id="4589740">=</span>&nbsp;<span class="op" id="4589742">[</span><span class="op" id="4589743">]</span><span class="builtintype" id="4589744">byte</span><span class="op" id="4589748">(</span><span class="string" id="4589749">`\\`</span><span class="op" id="4589753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589756">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4589768">=</span>&nbsp;<span class="op" id="4589770">[</span><span class="op" id="4589771">]</span><span class="builtintype" id="4589772">byte</span><span class="op" id="4589776">(</span><span class="string" id="4589777">`\&#39;`</span><span class="op" id="4589781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589784">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4589796">=</span>&nbsp;<span class="op" id="4589798">[</span><span class="op" id="4589799">]</span><span class="builtintype" id="4589800">byte</span><span class="op" id="4589804">(</span><span class="string" id="4589805">`\&#34;`</span><span class="op" id="4589809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589812">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4589824">=</span>&nbsp;<span class="op" id="4589826">[</span><span class="op" id="4589827">]</span><span class="builtintype" id="4589828">byte</span><span class="op" id="4589832">(</span><span class="string" id="4589833">`\x3C`</span><span class="op" id="4589839">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589842">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4589854">=</span>&nbsp;<span class="op" id="4589856">[</span><span class="op" id="4589857">]</span><span class="builtintype" id="4589858">byte</span><span class="op" id="4589862">(</span><span class="string" id="4589863">`\x3E`</span><span class="op" id="4589869">)</span><br>
<span class="lineno"></span><span class="op" id="4589871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4589874">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4589958">func</span>&nbsp;<span class="ident" id="4589963">JSEscape</span><span class="op" id="4589971">(</span><span class="ident" id="4589972">w</span>&nbsp;<span class="ident" id="4589974">io</span><span class="op" id="4589976">.</span><span class="ident" id="4589977">Writer</span><span class="op" id="4589983">,</span>&nbsp;<span class="ident" id="4589985">b</span>&nbsp;<span class="op" id="4589987">[</span><span class="op" id="4589988">]</span><span class="builtintype" id="4589989">byte</span><span class="op" id="4589993">)</span>&nbsp;<span class="op" id="4589995">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4589998">last</span>&nbsp;<span class="op" id="4590003">:=</span>&nbsp;<span class="num" id="4590006">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590009">for</span>&nbsp;<span class="ident" id="4590013">i</span>&nbsp;<span class="op" id="4590015">:=</span>&nbsp;<span class="num" id="4590018">0</span><span class="op" id="4590019">;</span>&nbsp;<span class="ident" id="4590021">i</span>&nbsp;<span class="op" id="4590023">&lt;</span>&nbsp;<span class="builtinfunc" id="4590025">len</span><span class="op" id="4590028">(</span><span class="ident" id="4590029">b</span><span class="op" id="4590030">)</span><span class="op" id="4590031">;</span>&nbsp;<span class="ident" id="4590033">i</span><span class="op" id="4590034">++</span>&nbsp;<span class="op" id="4590037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590041">c</span>&nbsp;<span class="op" id="4590043">:=</span>&nbsp;<span class="ident" id="4590046">b</span><span class="op" id="4590047">[</span><span class="ident" id="4590048">i</span><span class="op" id="4590049">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590054">if</span>&nbsp;<span class="op" id="4590057">!</span><span class="ident" id="4590058">jsIsSpecial</span><span class="op" id="4590069">(</span><span class="builtintype" id="4590070">rune</span><span class="op" id="4590074">(</span><span class="ident" id="4590075">c</span><span class="op" id="4590076">)</span><span class="op" id="4590077">)</span>&nbsp;<span class="op" id="4590079">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4590084">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590115">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590130">w</span><span class="op" id="4590131">.</span><span class="ident" id="4590132">Write</span><span class="op" id="4590137">(</span><span class="ident" id="4590138">b</span><span class="op" id="4590139">[</span><span class="ident" id="4590140">last</span><span class="op" id="4590144">:</span><span class="ident" id="4590145">i</span><span class="op" id="4590146">]</span><span class="op" id="4590147">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590152">if</span>&nbsp;<span class="ident" id="4590155">c</span>&nbsp;<span class="op" id="4590157">&lt;</span>&nbsp;<span class="ident" id="4590159">utf8</span><span class="op" id="4590163">.</span><span class="ident" id="4590164">RuneSelf</span>&nbsp;<span class="op" id="4590173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4590178">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4590231">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590279">switch</span>&nbsp;<span class="ident" id="4590286">c</span>&nbsp;<span class="op" id="4590288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590293">case</span>&nbsp;<span class="string" id="4590298">&#39;\\&#39;</span><span class="op" id="4590302">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590308">w</span><span class="op" id="4590309">.</span><span class="ident" id="4590310">Write</span><span class="op" id="4590315">(</span><span class="ident" id="4590316">jsBackslash</span><span class="op" id="4590327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590332">case</span>&nbsp;<span class="string" id="4590337">&#39;\&#39;&#39;</span><span class="op" id="4590341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590347">w</span><span class="op" id="4590348">.</span><span class="ident" id="4590349">Write</span><span class="op" id="4590354">(</span><span class="ident" id="4590355">jsApos</span><span class="op" id="4590361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590366">case</span>&nbsp;<span class="string" id="4590371">&#39;&#34;&#39;</span><span class="op" id="4590374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590380">w</span><span class="op" id="4590381">.</span><span class="ident" id="4590382">Write</span><span class="op" id="4590387">(</span><span class="ident" id="4590388">jsQuot</span><span class="op" id="4590394">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590399">case</span>&nbsp;<span class="string" id="4590404">&#39;&lt;&#39;</span><span class="op" id="4590407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590413">w</span><span class="op" id="4590414">.</span><span class="ident" id="4590415">Write</span><span class="op" id="4590420">(</span><span class="ident" id="4590421">jsLt</span><span class="op" id="4590425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590430">case</span>&nbsp;<span class="string" id="4590435">&#39;&gt;&#39;</span><span class="op" id="4590438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590444">w</span><span class="op" id="4590445">.</span><span class="ident" id="4590446">Write</span><span class="op" id="4590451">(</span><span class="ident" id="4590452">jsGt</span><span class="op" id="4590456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590461">default</span><span class="op" id="4590468">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590474">w</span><span class="op" id="4590475">.</span><span class="ident" id="4590476">Write</span><span class="op" id="4590481">(</span><span class="ident" id="4590482">jsLowUni</span><span class="op" id="4590490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590496">t</span><span class="op" id="4590497">,</span>&nbsp;<span class="ident" id="4590499">b</span>&nbsp;<span class="op" id="4590501">:=</span>&nbsp;<span class="ident" id="4590504">c</span><span class="op" id="4590505">&gt;&gt;</span><span class="num" id="4590507">4</span><span class="op" id="4590508">,</span>&nbsp;<span class="ident" id="4590510">c</span><span class="op" id="4590511">&amp;</span><span class="num" id="4590512">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590521">w</span><span class="op" id="4590522">.</span><span class="ident" id="4590523">Write</span><span class="op" id="4590528">(</span><span class="ident" id="4590529">hex</span><span class="op" id="4590532">[</span><span class="ident" id="4590533">t</span>&nbsp;<span class="op" id="4590535">:</span>&nbsp;<span class="ident" id="4590537">t</span><span class="op" id="4590538">+</span><span class="num" id="4590539">1</span><span class="op" id="4590540">]</span><span class="op" id="4590541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590547">w</span><span class="op" id="4590548">.</span><span class="ident" id="4590549">Write</span><span class="op" id="4590554">(</span><span class="ident" id="4590555">hex</span><span class="op" id="4590558">[</span><span class="ident" id="4590559">b</span>&nbsp;<span class="op" id="4590561">:</span>&nbsp;<span class="ident" id="4590563">b</span><span class="op" id="4590564">+</span><span class="num" id="4590565">1</span><span class="op" id="4590566">]</span><span class="op" id="4590567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590572">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590576">}</span>&nbsp;<span class="keyword" id="4590578">else</span>&nbsp;<span class="op" id="4590583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4590588">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590608">r</span><span class="op" id="4590609">,</span>&nbsp;<span class="ident" id="4590611">size</span>&nbsp;<span class="op" id="4590616">:=</span>&nbsp;<span class="ident" id="4590619">utf8</span><span class="op" id="4590623">.</span><span class="ident" id="4590624">DecodeRune</span><span class="op" id="4590634">(</span><span class="ident" id="4590635">b</span><span class="op" id="4590636">[</span><span class="ident" id="4590637">i</span><span class="op" id="4590638">:</span><span class="op" id="4590639">]</span><span class="op" id="4590640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590645">if</span>&nbsp;<span class="ident" id="4590648">unicode</span><span class="op" id="4590655">.</span><span class="ident" id="4590656">IsPrint</span><span class="op" id="4590663">(</span><span class="ident" id="4590664">r</span><span class="op" id="4590665">)</span>&nbsp;<span class="op" id="4590667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590673">w</span><span class="op" id="4590674">.</span><span class="ident" id="4590675">Write</span><span class="op" id="4590680">(</span><span class="ident" id="4590681">b</span><span class="op" id="4590682">[</span><span class="ident" id="4590683">i</span>&nbsp;<span class="op" id="4590685">:</span>&nbsp;<span class="ident" id="4590687">i</span><span class="op" id="4590688">+</span><span class="ident" id="4590689">size</span><span class="op" id="4590693">]</span><span class="op" id="4590694">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590699">}</span>&nbsp;<span class="keyword" id="4590701">else</span>&nbsp;<span class="op" id="4590706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590712">fmt</span><span class="op" id="4590715">.</span><span class="ident" id="4590716">Fprintf</span><span class="op" id="4590723">(</span><span class="ident" id="4590724">w</span><span class="op" id="4590725">,</span>&nbsp;<span class="string" id="4590727">&#34;\\u%04X&#34;</span><span class="op" id="4590736">,</span>&nbsp;<span class="ident" id="4590738">r</span><span class="op" id="4590739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590749">i</span>&nbsp;<span class="op" id="4590751">+=</span>&nbsp;<span class="ident" id="4590754">size</span>&nbsp;<span class="op" id="4590759">-</span>&nbsp;<span class="num" id="4590761">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590765">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590769">last</span>&nbsp;<span class="op" id="4590774">=</span>&nbsp;<span class="ident" id="4590776">i</span>&nbsp;<span class="op" id="4590778">+</span>&nbsp;<span class="num" id="4590780">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4590783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590786">w</span><span class="op" id="4590787">.</span><span class="ident" id="4590788">Write</span><span class="op" id="4590793">(</span><span class="ident" id="4590794">b</span><span class="op" id="4590795">[</span><span class="ident" id="4590796">last</span><span class="op" id="4590800">:</span><span class="op" id="4590801">]</span><span class="op" id="4590802">)</span><br>
<span class="lineno"></span><span class="op" id="4590804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="4590807">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4590893">func</span>&nbsp;<span class="ident" id="4590898">JSEscapeString</span><span class="op" id="4590912">(</span><span class="ident" id="4590913">s</span>&nbsp;<span class="builtintype" id="4590915">string</span><span class="op" id="4590921">)</span>&nbsp;<span class="builtintype" id="4590923">string</span>&nbsp;<span class="op" id="4590930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4590933">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4590965">if</span>&nbsp;<span class="ident" id="4590968">strings</span><span class="op" id="4590975">.</span><span class="ident" id="4590976">IndexFunc</span><span class="op" id="4590985">(</span><span class="ident" id="4590986">s</span><span class="op" id="4590987">,</span>&nbsp;<span class="ident" id="4590989">jsIsSpecial</span><span class="op" id="4591000">)</span>&nbsp;<span class="op" id="4591002">&lt;</span>&nbsp;<span class="num" id="4591004">0</span>&nbsp;<span class="op" id="4591006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591010">return</span>&nbsp;<span class="ident" id="4591017">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4591020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591023">var</span>&nbsp;<span class="ident" id="4591027">b</span>&nbsp;<span class="ident" id="4591029">bytes</span><span class="op" id="4591034">.</span><span class="ident" id="4591035">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4591043">JSEscape</span><span class="op" id="4591051">(</span><span class="op" id="4591052">&amp;</span><span class="ident" id="4591053">b</span><span class="op" id="4591054">,</span>&nbsp;<span class="op" id="4591056">[</span><span class="op" id="4591057">]</span><span class="builtintype" id="4591058">byte</span><span class="op" id="4591062">(</span><span class="ident" id="4591063">s</span><span class="op" id="4591064">)</span><span class="op" id="4591065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591068">return</span>&nbsp;<span class="ident" id="4591075">b</span><span class="op" id="4591076">.</span><span class="ident" id="4591077">String</span><span class="op" id="4591083">(</span><span class="op" id="4591084">)</span><br>
<span class="lineno"></span><span class="op" id="4591086">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="4591089">func</span>&nbsp;<span class="ident" id="4591094">jsIsSpecial</span><span class="op" id="4591105">(</span><span class="ident" id="4591106">r</span>&nbsp;<span class="builtintype" id="4591108">rune</span><span class="op" id="4591112">)</span>&nbsp;<span class="builtintype" id="4591114">bool</span>&nbsp;<span class="op" id="4591119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591122">switch</span>&nbsp;<span class="ident" id="4591129">r</span>&nbsp;<span class="op" id="4591131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591134">case</span>&nbsp;<span class="string" id="4591139">&#39;\\&#39;</span><span class="op" id="4591143">,</span>&nbsp;<span class="string" id="4591145">&#39;\&#39;&#39;</span><span class="op" id="4591149">,</span>&nbsp;<span class="string" id="4591151">&#39;&#34;&#39;</span><span class="op" id="4591154">,</span>&nbsp;<span class="string" id="4591156">&#39;&lt;&#39;</span><span class="op" id="4591159">,</span>&nbsp;<span class="string" id="4591161">&#39;&gt;&#39;</span><span class="op" id="4591164">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591168">return</span>&nbsp;<span class="builtintype" id="4591175">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4591181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591184">return</span>&nbsp;<span class="ident" id="4591191">r</span>&nbsp;<span class="op" id="4591193">&lt;</span>&nbsp;<span class="string" id="4591195">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4591199">||</span>&nbsp;<span class="ident" id="4591202">utf8</span><span class="op" id="4591206">.</span><span class="ident" id="4591207">RuneSelf</span>&nbsp;<span class="op" id="4591216">&lt;=</span>&nbsp;<span class="ident" id="4591219">r</span><br>
<span class="lineno"></span><span class="op" id="4591221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4591224">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="4591294">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4591330">func</span>&nbsp;<span class="ident" id="4591335">JSEscaper</span><span class="op" id="4591344">(</span><span class="ident" id="4591345">args</span>&nbsp;<span class="op" id="4591350">...</span><span class="keyword" id="4591353">interface</span><span class="op" id="4591362">{</span><span class="op" id="4591363">}</span><span class="op" id="4591364">)</span>&nbsp;<span class="builtintype" id="4591366">string</span>&nbsp;<span class="op" id="4591373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591376">return</span>&nbsp;<span class="ident" id="4591383">JSEscapeString</span><span class="op" id="4591397">(</span><span class="ident" id="4591398">evalArgs</span><span class="op" id="4591406">(</span><span class="ident" id="4591407">args</span><span class="op" id="4591411">)</span><span class="op" id="4591412">)</span><br>
<span class="lineno"></span><span class="op" id="4591414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="4591417">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4591495">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="4591561">func</span>&nbsp;<span class="ident" id="4591566">URLQueryEscaper</span><span class="op" id="4591581">(</span><span class="ident" id="4591582">args</span>&nbsp;<span class="op" id="4591587">...</span><span class="keyword" id="4591590">interface</span><span class="op" id="4591599">{</span><span class="op" id="4591600">}</span><span class="op" id="4591601">)</span>&nbsp;<span class="builtintype" id="4591603">string</span>&nbsp;<span class="op" id="4591610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591613">return</span>&nbsp;<span class="ident" id="4591620">url</span><span class="op" id="4591623">.</span><span class="ident" id="4591624">QueryEscape</span><span class="op" id="4591635">(</span><span class="ident" id="4591636">evalArgs</span><span class="op" id="4591644">(</span><span class="ident" id="4591645">args</span><span class="op" id="4591649">)</span><span class="op" id="4591650">)</span><br>
<span class="lineno"></span><span class="op" id="4591652">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="4591655">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4591742">//&nbsp;&nbsp;&nbsp;&nbspfmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="4591765">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="4591837">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="4591910">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="4591924">func</span>&nbsp;<span class="ident" id="4591929">evalArgs</span><span class="op" id="4591937">(</span><span class="ident" id="4591938">args</span>&nbsp;<span class="op" id="4591943">[</span><span class="op" id="4591944">]</span><span class="keyword" id="4591945">interface</span><span class="op" id="4591954">{</span><span class="op" id="4591955">}</span><span class="op" id="4591956">)</span>&nbsp;<span class="builtintype" id="4591958">string</span>&nbsp;<span class="op" id="4591965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4591968">ok</span>&nbsp;<span class="op" id="4591971">:=</span>&nbsp;<span class="builtintype" id="4591974">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4591981">var</span>&nbsp;<span class="ident" id="4591985">s</span>&nbsp;<span class="builtintype" id="4591987">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4591995">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4592033">if</span>&nbsp;<span class="builtinfunc" id="4592036">len</span><span class="op" id="4592039">(</span><span class="ident" id="4592040">args</span><span class="op" id="4592044">)</span>&nbsp;<span class="op" id="4592046">==</span>&nbsp;<span class="num" id="4592049">1</span>&nbsp;<span class="op" id="4592051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4592055">s</span><span class="op" id="4592056">,</span>&nbsp;<span class="ident" id="4592058">ok</span>&nbsp;<span class="op" id="4592061">=</span>&nbsp;<span class="ident" id="4592063">args</span><span class="op" id="4592067">[</span><span class="num" id="4592068">0</span><span class="op" id="4592069">]</span><span class="op" id="4592070">.</span><span class="op" id="4592071">(</span><span class="builtintype" id="4592072">string</span><span class="op" id="4592078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4592081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4592084">if</span>&nbsp;<span class="op" id="4592087">!</span><span class="ident" id="4592088">ok</span>&nbsp;<span class="op" id="4592091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4592095">for</span>&nbsp;<span class="ident" id="4592099">i</span><span class="op" id="4592100">,</span>&nbsp;<span class="ident" id="4592102">arg</span>&nbsp;<span class="op" id="4592106">:=</span>&nbsp;<span class="keyword" id="4592109">range</span>&nbsp;<span class="ident" id="4592115">args</span>&nbsp;<span class="op" id="4592120">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4592125">a</span><span class="op" id="4592126">,</span>&nbsp;<span class="ident" id="4592128">ok</span>&nbsp;<span class="op" id="4592131">:=</span>&nbsp;<span class="ident" id="4592134">printableValue</span><span class="op" id="4592148">(</span><span class="ident" id="4592149">reflect</span><span class="op" id="4592156">.</span><span class="ident" id="4592157">ValueOf</span><span class="op" id="4592164">(</span><span class="ident" id="4592165">arg</span><span class="op" id="4592168">)</span><span class="op" id="4592169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4592174">if</span>&nbsp;<span class="ident" id="4592177">ok</span>&nbsp;<span class="op" id="4592180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4592186">args</span><span class="op" id="4592190">[</span><span class="ident" id="4592191">i</span><span class="op" id="4592192">]</span>&nbsp;<span class="op" id="4592194">=</span>&nbsp;<span class="ident" id="4592196">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4592201">}</span>&nbsp;<span class="comment" id="4592203">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4592235">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4592239">s</span>&nbsp;<span class="op" id="4592241">=</span>&nbsp;<span class="ident" id="4592243">fmt</span><span class="op" id="4592246">.</span><span class="ident" id="4592247">Sprint</span><span class="op" id="4592253">(</span><span class="ident" id="4592254">args</span><span class="op" id="4592258">...</span><span class="op" id="4592261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4592264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4592267">return</span>&nbsp;<span class="ident" id="4592274">s</span><br>
<span class="lineno"></span><span class="op" id="4592276">}</span>
</div>
</body>
</html>
