<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>html/template</h2>
<ul>
<li><a href="/gostd/html/template/attr.go.html">attr.go</a></li>
<li><a href="/gostd/html/template/clone_test.go.html">clone_test.go</a></li>
<li><a href="/gostd/html/template/content.go.html" class="current">content.go</a></li>
<li><a href="/gostd/html/template/content_test.go.html">content_test.go</a></li>
<li><a href="/gostd/html/template/context.go.html">context.go</a></li>
<li><a href="/gostd/html/template/css.go.html">css.go</a></li>
<li><a href="/gostd/html/template/css_test.go.html">css_test.go</a></li>
<li><a href="/gostd/html/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/html/template/error.go.html">error.go</a></li>
<li><a href="/gostd/html/template/escape.go.html">escape.go</a></li>
<li><a href="/gostd/html/template/escape_test.go.html">escape_test.go</a></li>
<li><a href="/gostd/html/template/html.go.html">html.go</a></li>
<li><a href="/gostd/html/template/html_test.go.html">html_test.go</a></li>
<li><a href="/gostd/html/template/js.go.html">js.go</a></li>
<li><a href="/gostd/html/template/js_test.go.html">js_test.go</a></li>
<li><a href="/gostd/html/template/template.go.html">template.go</a></li>
<li><a href="/gostd/html/template/transition.go.html">transition.go</a></li>
<li><a href="/gostd/html/template/url.go.html">url.go</a></li>
<li><a href="/gostd/html/template/url_test.go.html">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5020481">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5020536">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5020590">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5020641">package</span>&nbsp;<span class="ident" id="5020649">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5020659">import</span>&nbsp;<span class="op" id="5020666">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5020669">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5020676">&#34;reflect&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5020686">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5020689">//&nbsp;Strings&nbsp;of&nbsp;content&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source.</span><br>
<span class="lineno"></span><span class="keyword" id="5020734">type</span>&nbsp;<span class="op" id="5020739">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5020742">//&nbsp;CSS&nbsp;encapsulates&nbsp;known&nbsp;safe&nbsp;content&nbsp;that&nbsp;matches&nbsp;any&nbsp;of:</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5020803">//&nbsp;&nbsp;&nbsp;1.&nbsp;The&nbsp;CSS3&nbsp;stylesheet&nbsp;production,&nbsp;such&nbsp;as&nbsp;`p&nbsp;{&nbsp;color:&nbsp;purple&nbsp;}`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5020875">//&nbsp;&nbsp;&nbsp;2.&nbsp;The&nbsp;CSS3&nbsp;rule&nbsp;production,&nbsp;such&nbsp;as&nbsp;`a[href=~&#34;https:&#34;].foo#bar`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5020947">//&nbsp;&nbsp;&nbsp;3.&nbsp;CSS3&nbsp;declaration&nbsp;productions,&nbsp;such&nbsp;as&nbsp;`color:&nbsp;red;&nbsp;margin:&nbsp;2px`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021021">//&nbsp;&nbsp;&nbsp;4.&nbsp;The&nbsp;CSS3&nbsp;value&nbsp;production,&nbsp;such&nbsp;as&nbsp;`rgba(0,&nbsp;0,&nbsp;255,&nbsp;127)`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021089">//&nbsp;See&nbsp;http://www.w3.org/TR/css3-syntax/#parsing&nbsp;and</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021143">//&nbsp;https://web.archive.org/web/20090211114933/http://w3.org/TR/css3-syntax#style</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5021225">CSS</span>&nbsp;<span class="builtintype" id="5021229">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021238">//&nbsp;HTML&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;HTML&nbsp;document&nbsp;fragment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021297">//&nbsp;It&nbsp;should&nbsp;not&nbsp;be&nbsp;used&nbsp;for&nbsp;HTML&nbsp;from&nbsp;a&nbsp;third-party,&nbsp;or&nbsp;HTML&nbsp;with</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021365">//&nbsp;unclosed&nbsp;tags&nbsp;or&nbsp;comments.&nbsp;The&nbsp;outputs&nbsp;of&nbsp;a&nbsp;sound&nbsp;HTML&nbsp;sanitizer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021434">//&nbsp;and&nbsp;a&nbsp;template&nbsp;escaped&nbsp;by&nbsp;this&nbsp;package&nbsp;are&nbsp;fine&nbsp;for&nbsp;use&nbsp;with&nbsp;HTML.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5021505">HTML</span>&nbsp;<span class="builtintype" id="5021510">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021519">//&nbsp;HTMLAttr&nbsp;encapsulates&nbsp;an&nbsp;HTML&nbsp;attribute&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021586">//&nbsp;for&nbsp;example,&nbsp;`&nbsp;dir=&#34;ltr&#34;`.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5021617">HTMLAttr</span>&nbsp;<span class="builtintype" id="5021626">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021635">//&nbsp;JS&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;EcmaScript5&nbsp;Expression,&nbsp;for&nbsp;example,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021705">//&nbsp;`(x&nbsp;+&nbsp;y&nbsp;*&nbsp;z())`.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021726">//&nbsp;Template&nbsp;authors&nbsp;are&nbsp;responsible&nbsp;for&nbsp;ensuring&nbsp;that&nbsp;typed&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021799">//&nbsp;do&nbsp;not&nbsp;break&nbsp;the&nbsp;intended&nbsp;precedence&nbsp;and&nbsp;that&nbsp;there&nbsp;is&nbsp;no</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021861">//&nbsp;statement/expression&nbsp;ambiguity&nbsp;as&nbsp;when&nbsp;passing&nbsp;an&nbsp;expression&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5021931">//&nbsp;&#34;{&nbsp;foo:&nbsp;bar()&nbsp;}\n[&#39;foo&#39;]()&#34;,&nbsp;which&nbsp;is&nbsp;both&nbsp;a&nbsp;valid&nbsp;Expression&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022003">//&nbsp;valid&nbsp;Program&nbsp;with&nbsp;a&nbsp;very&nbsp;different&nbsp;meaning.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022052">JS</span>&nbsp;<span class="builtintype" id="5022055">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022064">//&nbsp;JSStr&nbsp;encapsulates&nbsp;a&nbsp;sequence&nbsp;of&nbsp;characters&nbsp;meant&nbsp;to&nbsp;be&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022133">//&nbsp;between&nbsp;quotes&nbsp;in&nbsp;a&nbsp;JavaScript&nbsp;expression.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022180">//&nbsp;The&nbsp;string&nbsp;must&nbsp;match&nbsp;a&nbsp;series&nbsp;of&nbsp;StringCharacters:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022236">//&nbsp;&nbsp;&nbsp;StringCharacter&nbsp;::&nbsp;SourceCharacter&nbsp;but&nbsp;not&nbsp;`\`&nbsp;or&nbsp;LineTerminator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022307">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;EscapeSequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022347">//&nbsp;Note&nbsp;that&nbsp;LineContinuations&nbsp;are&nbsp;not&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022396">//&nbsp;JSStr(&#34;foo\\nbar&#34;)&nbsp;is&nbsp;fine,&nbsp;but&nbsp;JSStr(&#34;foo\\\nbar&#34;)&nbsp;is&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022460">JSStr</span>&nbsp;<span class="builtintype" id="5022466">string</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022475">//&nbsp;URL&nbsp;encapsulates&nbsp;a&nbsp;known&nbsp;safe&nbsp;URL&nbsp;or&nbsp;URL&nbsp;substring&nbsp;(see&nbsp;RFC&nbsp;3986).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022546">//&nbsp;A&nbsp;URL&nbsp;like&nbsp;`javascript:checkThatFormNotEditedBeforeLeavingPage()`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022616">//&nbsp;from&nbsp;a&nbsp;trusted&nbsp;source&nbsp;should&nbsp;go&nbsp;in&nbsp;the&nbsp;page,&nbsp;but&nbsp;by&nbsp;default&nbsp;dynamic</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022688">//&nbsp;`javascript:`&nbsp;URLs&nbsp;are&nbsp;filtered&nbsp;out&nbsp;since&nbsp;they&nbsp;are&nbsp;a&nbsp;frequently</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022756">//&nbsp;exploited&nbsp;injection&nbsp;vector.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022788">URL</span>&nbsp;<span class="builtintype" id="5022792">string</span><br>
<span class="lineno"></span><span class="op" id="5022799">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5022802">type</span>&nbsp;<span class="ident" id="5022807">contentType</span>&nbsp;<span class="builtintype" id="5022819">uint8</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="5022826">const</span>&nbsp;<span class="op" id="5022832">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022835">contentTypePlain</span>&nbsp;<span class="ident" id="5022852">contentType</span>&nbsp;<span class="op" id="5022864">=</span>&nbsp;<span class="ident" id="5022866">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022872">contentTypeCSS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022888">contentTypeHTML</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022905">contentTypeHTMLAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022926">contentTypeJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022941">contentTypeJSStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5022959">contentTypeURL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5022975">//&nbsp;contentTypeUnsafe&nbsp;is&nbsp;used&nbsp;in&nbsp;attr.go&nbsp;for&nbsp;values&nbsp;that&nbsp;affect&nbsp;how</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5023043">//&nbsp;embedded&nbsp;content&nbsp;and&nbsp;network&nbsp;messages&nbsp;are&nbsp;formed,&nbsp;vetted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5023105">//&nbsp;or&nbsp;interpreted;&nbsp;or&nbsp;which&nbsp;credentials&nbsp;network&nbsp;messages&nbsp;carry.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5023170">contentTypeUnsafe</span><br>
<span class="lineno"></span><span class="op" id="5023188">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="5023191">//&nbsp;indirect&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="5023256">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil).</span><br>
<span class="lineno"></span><span class="keyword" id="5023305">func</span>&nbsp;<span class="ident" id="5023310">indirect</span><span class="op" id="5023318">(</span><span class="ident" id="5023319">a</span>&nbsp;<span class="keyword" id="5023321">interface</span><span class="op" id="5023330">{</span><span class="op" id="5023331">}</span><span class="op" id="5023332">)</span>&nbsp;<span class="keyword" id="5023334">interface</span><span class="op" id="5023343">{</span><span class="op" id="5023344">}</span>&nbsp;<span class="op" id="5023346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023349">if</span>&nbsp;<span class="ident" id="5023352">a</span>&nbsp;<span class="op" id="5023354">==</span>&nbsp;<span class="ident" id="5023357">nil</span>&nbsp;<span class="op" id="5023361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023365">return</span>&nbsp;<span class="ident" id="5023372">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5023377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023380">if</span>&nbsp;<span class="ident" id="5023383">t</span>&nbsp;<span class="op" id="5023385">:=</span>&nbsp;<span class="ident" id="5023388">reflect</span><span class="op" id="5023395">.</span><span class="ident" id="5023396">TypeOf</span><span class="op" id="5023402">(</span><span class="ident" id="5023403">a</span><span class="op" id="5023404">)</span><span class="op" id="5023405">;</span>&nbsp;<span class="ident" id="5023407">t</span><span class="op" id="5023408">.</span><span class="ident" id="5023409">Kind</span><span class="op" id="5023413">(</span><span class="op" id="5023414">)</span>&nbsp;<span class="op" id="5023416">!=</span>&nbsp;<span class="ident" id="5023419">reflect</span><span class="op" id="5023426">.</span><span class="ident" id="5023427">Ptr</span>&nbsp;<span class="op" id="5023431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5023435">//&nbsp;Avoid&nbsp;creating&nbsp;a&nbsp;reflect.Value&nbsp;if&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023494">return</span>&nbsp;<span class="ident" id="5023501">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5023504">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5023507">v</span>&nbsp;<span class="op" id="5023509">:=</span>&nbsp;<span class="ident" id="5023512">reflect</span><span class="op" id="5023519">.</span><span class="ident" id="5023520">ValueOf</span><span class="op" id="5023527">(</span><span class="ident" id="5023528">a</span><span class="op" id="5023529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023532">for</span>&nbsp;<span class="ident" id="5023536">v</span><span class="op" id="5023537">.</span><span class="ident" id="5023538">Kind</span><span class="op" id="5023542">(</span><span class="op" id="5023543">)</span>&nbsp;<span class="op" id="5023545">==</span>&nbsp;<span class="ident" id="5023548">reflect</span><span class="op" id="5023555">.</span><span class="ident" id="5023556">Ptr</span>&nbsp;<span class="op" id="5023560">&amp;&amp;</span>&nbsp;<span class="op" id="5023563">!</span><span class="ident" id="5023564">v</span><span class="op" id="5023565">.</span><span class="ident" id="5023566">IsNil</span><span class="op" id="5023571">(</span><span class="op" id="5023572">)</span>&nbsp;<span class="op" id="5023574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5023578">v</span>&nbsp;<span class="op" id="5023580">=</span>&nbsp;<span class="ident" id="5023582">v</span><span class="op" id="5023583">.</span><span class="ident" id="5023584">Elem</span><span class="op" id="5023588">(</span><span class="op" id="5023589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5023592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023595">return</span>&nbsp;<span class="ident" id="5023602">v</span><span class="op" id="5023603">.</span><span class="ident" id="5023604">Interface</span><span class="op" id="5023613">(</span><span class="op" id="5023614">)</span><br>
<span class="lineno">90</span><span class="op" id="5023616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5023619">var</span>&nbsp;<span class="op" id="5023623">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5023626">errorType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5023642">=</span>&nbsp;<span class="ident" id="5023644">reflect</span><span class="op" id="5023651">.</span><span class="ident" id="5023652">TypeOf</span><span class="op" id="5023658">(</span><span class="op" id="5023659">(</span><span class="op" id="5023660">*</span><span class="builtintype" id="5023661">error</span><span class="op" id="5023666">)</span><span class="op" id="5023667">(</span><span class="ident" id="5023668">nil</span><span class="op" id="5023671">)</span><span class="op" id="5023672">)</span><span class="op" id="5023673">.</span><span class="ident" id="5023674">Elem</span><span class="op" id="5023678">(</span><span class="op" id="5023679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5023682">fmtStringerType</span>&nbsp;<span class="op" id="5023698">=</span>&nbsp;<span class="ident" id="5023700">reflect</span><span class="op" id="5023707">.</span><span class="ident" id="5023708">TypeOf</span><span class="op" id="5023714">(</span><span class="op" id="5023715">(</span><span class="op" id="5023716">*</span><span class="ident" id="5023717">fmt</span><span class="op" id="5023720">.</span><span class="ident" id="5023721">Stringer</span><span class="op" id="5023729">)</span><span class="op" id="5023730">(</span><span class="ident" id="5023731">nil</span><span class="op" id="5023734">)</span><span class="op" id="5023735">)</span><span class="op" id="5023736">.</span><span class="ident" id="5023737">Elem</span><span class="op" id="5023741">(</span><span class="op" id="5023742">)</span><br>
<span class="lineno">95</span><span class="op" id="5023744">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5023747">//&nbsp;indirectToStringerOrError&nbsp;returns&nbsp;the&nbsp;value,&nbsp;after&nbsp;dereferencing&nbsp;as&nbsp;many&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="5023829">//&nbsp;as&nbsp;necessary&nbsp;to&nbsp;reach&nbsp;the&nbsp;base&nbsp;type&nbsp;(or&nbsp;nil)&nbsp;or&nbsp;an&nbsp;implementation&nbsp;of&nbsp;fmt.Stringer</span><br>
<span class="lineno"></span><span class="comment" id="5023914">//&nbsp;or&nbsp;error,</span><br>
<span class="lineno">100</span><span class="keyword" id="5023927">func</span>&nbsp;<span class="ident" id="5023932">indirectToStringerOrError</span><span class="op" id="5023957">(</span><span class="ident" id="5023958">a</span>&nbsp;<span class="keyword" id="5023960">interface</span><span class="op" id="5023969">{</span><span class="op" id="5023970">}</span><span class="op" id="5023971">)</span>&nbsp;<span class="keyword" id="5023973">interface</span><span class="op" id="5023982">{</span><span class="op" id="5023983">}</span>&nbsp;<span class="op" id="5023985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5023988">if</span>&nbsp;<span class="ident" id="5023991">a</span>&nbsp;<span class="op" id="5023993">==</span>&nbsp;<span class="ident" id="5023996">nil</span>&nbsp;<span class="op" id="5024000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024004">return</span>&nbsp;<span class="ident" id="5024011">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5024016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5024019">v</span>&nbsp;<span class="op" id="5024021">:=</span>&nbsp;<span class="ident" id="5024024">reflect</span><span class="op" id="5024031">.</span><span class="ident" id="5024032">ValueOf</span><span class="op" id="5024039">(</span><span class="ident" id="5024040">a</span><span class="op" id="5024041">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024044">for</span>&nbsp;<span class="op" id="5024048">!</span><span class="ident" id="5024049">v</span><span class="op" id="5024050">.</span><span class="ident" id="5024051">Type</span><span class="op" id="5024055">(</span><span class="op" id="5024056">)</span><span class="op" id="5024057">.</span><span class="ident" id="5024058">Implements</span><span class="op" id="5024068">(</span><span class="ident" id="5024069">fmtStringerType</span><span class="op" id="5024084">)</span>&nbsp;<span class="op" id="5024086">&amp;&amp;</span>&nbsp;<span class="op" id="5024089">!</span><span class="ident" id="5024090">v</span><span class="op" id="5024091">.</span><span class="ident" id="5024092">Type</span><span class="op" id="5024096">(</span><span class="op" id="5024097">)</span><span class="op" id="5024098">.</span><span class="ident" id="5024099">Implements</span><span class="op" id="5024109">(</span><span class="ident" id="5024110">errorType</span><span class="op" id="5024119">)</span>&nbsp;<span class="op" id="5024121">&amp;&amp;</span>&nbsp;<span class="ident" id="5024124">v</span><span class="op" id="5024125">.</span><span class="ident" id="5024126">Kind</span><span class="op" id="5024130">(</span><span class="op" id="5024131">)</span>&nbsp;<span class="op" id="5024133">==</span>&nbsp;<span class="ident" id="5024136">reflect</span><span class="op" id="5024143">.</span><span class="ident" id="5024144">Ptr</span>&nbsp;<span class="op" id="5024148">&amp;&amp;</span>&nbsp;<span class="op" id="5024151">!</span><span class="ident" id="5024152">v</span><span class="op" id="5024153">.</span><span class="ident" id="5024154">IsNil</span><span class="op" id="5024159">(</span><span class="op" id="5024160">)</span>&nbsp;<span class="op" id="5024162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5024166">v</span>&nbsp;<span class="op" id="5024168">=</span>&nbsp;<span class="ident" id="5024170">v</span><span class="op" id="5024171">.</span><span class="ident" id="5024172">Elem</span><span class="op" id="5024176">(</span><span class="op" id="5024177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5024180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024183">return</span>&nbsp;<span class="ident" id="5024190">v</span><span class="op" id="5024191">.</span><span class="ident" id="5024192">Interface</span><span class="op" id="5024201">(</span><span class="op" id="5024202">)</span><br>
<span class="lineno"></span><span class="op" id="5024204">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="5024207">//&nbsp;stringify&nbsp;converts&nbsp;its&nbsp;arguments&nbsp;to&nbsp;a&nbsp;string&nbsp;and&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;content.</span><br>
<span class="lineno"></span><span class="comment" id="5024284">//&nbsp;All&nbsp;pointers&nbsp;are&nbsp;dereferenced,&nbsp;as&nbsp;in&nbsp;the&nbsp;text/template&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5024351">func</span>&nbsp;<span class="ident" id="5024356">stringify</span><span class="op" id="5024365">(</span><span class="ident" id="5024366">args</span>&nbsp;<span class="op" id="5024371">...</span><span class="keyword" id="5024374">interface</span><span class="op" id="5024383">{</span><span class="op" id="5024384">}</span><span class="op" id="5024385">)</span>&nbsp;<span class="op" id="5024387">(</span><span class="builtintype" id="5024388">string</span><span class="op" id="5024394">,</span>&nbsp;<span class="ident" id="5024396">contentType</span><span class="op" id="5024407">)</span>&nbsp;<span class="op" id="5024409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024412">if</span>&nbsp;<span class="builtinfunc" id="5024415">len</span><span class="op" id="5024418">(</span><span class="ident" id="5024419">args</span><span class="op" id="5024423">)</span>&nbsp;<span class="op" id="5024425">==</span>&nbsp;<span class="num" id="5024428">1</span>&nbsp;<span class="op" id="5024430">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024434">switch</span>&nbsp;<span class="ident" id="5024441">s</span>&nbsp;<span class="op" id="5024443">:=</span>&nbsp;<span class="ident" id="5024446">indirect</span><span class="op" id="5024454">(</span><span class="ident" id="5024455">args</span><span class="op" id="5024459">[</span><span class="num" id="5024460">0</span><span class="op" id="5024461">]</span><span class="op" id="5024462">)</span><span class="op" id="5024463">.</span><span class="op" id="5024464">(</span><span class="keyword" id="5024465">type</span><span class="op" id="5024469">)</span>&nbsp;<span class="op" id="5024471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024475">case</span>&nbsp;<span class="builtintype" id="5024480">string</span><span class="op" id="5024486">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024491">return</span>&nbsp;<span class="ident" id="5024498">s</span><span class="op" id="5024499">,</span>&nbsp;<span class="ident" id="5024501">contentTypePlain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024520">case</span>&nbsp;<span class="ident" id="5024525">CSS</span><span class="op" id="5024528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024533">return</span>&nbsp;<span class="builtintype" id="5024540">string</span><span class="op" id="5024546">(</span><span class="ident" id="5024547">s</span><span class="op" id="5024548">)</span><span class="op" id="5024549">,</span>&nbsp;<span class="ident" id="5024551">contentTypeCSS</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024568">case</span>&nbsp;<span class="ident" id="5024573">HTML</span><span class="op" id="5024577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024582">return</span>&nbsp;<span class="builtintype" id="5024589">string</span><span class="op" id="5024595">(</span><span class="ident" id="5024596">s</span><span class="op" id="5024597">)</span><span class="op" id="5024598">,</span>&nbsp;<span class="ident" id="5024600">contentTypeHTML</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024618">case</span>&nbsp;<span class="ident" id="5024623">HTMLAttr</span><span class="op" id="5024631">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024636">return</span>&nbsp;<span class="builtintype" id="5024643">string</span><span class="op" id="5024649">(</span><span class="ident" id="5024650">s</span><span class="op" id="5024651">)</span><span class="op" id="5024652">,</span>&nbsp;<span class="ident" id="5024654">contentTypeHTMLAttr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024676">case</span>&nbsp;<span class="ident" id="5024681">JS</span><span class="op" id="5024683">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024688">return</span>&nbsp;<span class="builtintype" id="5024695">string</span><span class="op" id="5024701">(</span><span class="ident" id="5024702">s</span><span class="op" id="5024703">)</span><span class="op" id="5024704">,</span>&nbsp;<span class="ident" id="5024706">contentTypeJS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024722">case</span>&nbsp;<span class="ident" id="5024727">JSStr</span><span class="op" id="5024732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024737">return</span>&nbsp;<span class="builtintype" id="5024744">string</span><span class="op" id="5024750">(</span><span class="ident" id="5024751">s</span><span class="op" id="5024752">)</span><span class="op" id="5024753">,</span>&nbsp;<span class="ident" id="5024755">contentTypeJSStr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024774">case</span>&nbsp;<span class="ident" id="5024779">URL</span><span class="op" id="5024782">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024787">return</span>&nbsp;<span class="builtintype" id="5024794">string</span><span class="op" id="5024800">(</span><span class="ident" id="5024801">s</span><span class="op" id="5024802">)</span><span class="op" id="5024803">,</span>&nbsp;<span class="ident" id="5024805">contentTypeURL</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5024822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5024825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024828">for</span>&nbsp;<span class="ident" id="5024832">i</span><span class="op" id="5024833">,</span>&nbsp;<span class="ident" id="5024835">arg</span>&nbsp;<span class="op" id="5024839">:=</span>&nbsp;<span class="keyword" id="5024842">range</span>&nbsp;<span class="ident" id="5024848">args</span>&nbsp;<span class="op" id="5024853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5024857">args</span><span class="op" id="5024861">[</span><span class="ident" id="5024862">i</span><span class="op" id="5024863">]</span>&nbsp;<span class="op" id="5024865">=</span>&nbsp;<span class="ident" id="5024867">indirectToStringerOrError</span><span class="op" id="5024892">(</span><span class="ident" id="5024893">arg</span><span class="op" id="5024896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5024899">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5024902">return</span>&nbsp;<span class="ident" id="5024909">fmt</span><span class="op" id="5024912">.</span><span class="ident" id="5024913">Sprint</span><span class="op" id="5024919">(</span><span class="ident" id="5024920">args</span><span class="op" id="5024924">...</span><span class="op" id="5024927">)</span><span class="op" id="5024928">,</span>&nbsp;<span class="ident" id="5024930">contentTypePlain</span><br>
<span class="lineno"></span><span class="op" id="5024947">}</span>
</div>
</body>
</html>
