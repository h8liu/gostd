<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/plan9obj</h2>
<ul>
<li><a href="/gostd/debug/plan9obj/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/plan9obj/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/plan9obj/plan9obj.go.html">plan9obj.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7225439">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7225495">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7225549">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7225600">package</span>&nbsp;<span class="ident" id="7225608">plan9obj</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7225618">import</span>&nbsp;<span class="op" id="7225625">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7225628">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7225639">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7225649">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7225652">type</span>&nbsp;<span class="ident" id="7225657">fileTest</span>&nbsp;<span class="keyword" id="7225666">struct</span>&nbsp;<span class="op" id="7225673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7225676">file</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7225685">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7225693">hdr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7225702">FileHeader</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7225714">sections</span>&nbsp;<span class="op" id="7225723">[</span><span class="op" id="7225724">]</span><span class="op" id="7225725">*</span><span class="ident" id="7225726">SectionHeader</span><br>
<span class="lineno"></span><span class="op" id="7225740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7225743">var</span>&nbsp;<span class="ident" id="7225747">fileTests</span>&nbsp;<span class="op" id="7225757">=</span>&nbsp;<span class="op" id="7225759">[</span><span class="op" id="7225760">]</span><span class="ident" id="7225761">fileTest</span><span class="op" id="7225769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225772">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7225776">&#34;testdata/386-plan9-exec&#34;</span><span class="op" id="7225801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7225805">FileHeader</span><span class="op" id="7225815">{</span><span class="ident" id="7225816">Magic386</span><span class="op" id="7225824">,</span>&nbsp;<span class="num" id="7225826">0x324</span><span class="op" id="7225831">,</span>&nbsp;<span class="num" id="7225833">0x14</span><span class="op" id="7225837">,</span>&nbsp;<span class="num" id="7225839">4</span><span class="op" id="7225840">,</span>&nbsp;<span class="num" id="7225842">0x1000</span><span class="op" id="7225848">,</span>&nbsp;<span class="num" id="7225850">32</span><span class="op" id="7225852">}</span><span class="op" id="7225853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225857">[</span><span class="op" id="7225858">]</span><span class="op" id="7225859">*</span><span class="ident" id="7225860">SectionHeader</span><span class="op" id="7225873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225878">{</span><span class="string" id="7225879">&#34;text&#34;</span><span class="op" id="7225885">,</span>&nbsp;<span class="num" id="7225887">0x4c5f</span><span class="op" id="7225893">,</span>&nbsp;<span class="num" id="7225895">0x20</span><span class="op" id="7225899">}</span><span class="op" id="7225900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225905">{</span><span class="string" id="7225906">&#34;data&#34;</span><span class="op" id="7225912">,</span>&nbsp;<span class="num" id="7225914">0x94c</span><span class="op" id="7225919">,</span>&nbsp;<span class="num" id="7225921">0x4c7f</span><span class="op" id="7225927">}</span><span class="op" id="7225928">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225933">{</span><span class="string" id="7225934">&#34;syms&#34;</span><span class="op" id="7225940">,</span>&nbsp;<span class="num" id="7225942">0x2c2b</span><span class="op" id="7225948">,</span>&nbsp;<span class="num" id="7225950">0x55cb</span><span class="op" id="7225956">}</span><span class="op" id="7225957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225962">{</span><span class="string" id="7225963">&#34;spsz&#34;</span><span class="op" id="7225969">,</span>&nbsp;<span class="num" id="7225971">0x0</span><span class="op" id="7225974">,</span>&nbsp;<span class="num" id="7225976">0x81f6</span><span class="op" id="7225982">}</span><span class="op" id="7225983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7225988">{</span><span class="string" id="7225989">&#34;pcsz&#34;</span><span class="op" id="7225995">,</span>&nbsp;<span class="num" id="7225997">0xf7a</span><span class="op" id="7226002">,</span>&nbsp;<span class="num" id="7226004">0x81f6</span><span class="op" id="7226010">}</span><span class="op" id="7226011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226015">}</span><span class="op" id="7226016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226019">}</span><span class="op" id="7226020">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7226027">&#34;testdata/amd64-plan9-exec&#34;</span><span class="op" id="7226054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226058">FileHeader</span><span class="op" id="7226068">{</span><span class="ident" id="7226069">MagicAMD64</span><span class="op" id="7226079">,</span>&nbsp;<span class="num" id="7226081">0x618</span><span class="op" id="7226086">,</span>&nbsp;<span class="num" id="7226088">0x13</span><span class="op" id="7226092">,</span>&nbsp;<span class="num" id="7226094">8</span><span class="op" id="7226095">,</span>&nbsp;<span class="num" id="7226097">0x200000</span><span class="op" id="7226105">,</span>&nbsp;<span class="num" id="7226107">40</span><span class="op" id="7226109">}</span><span class="op" id="7226110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226114">[</span><span class="op" id="7226115">]</span><span class="op" id="7226116">*</span><span class="ident" id="7226117">SectionHeader</span><span class="op" id="7226130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226135">{</span><span class="string" id="7226136">&#34;text&#34;</span><span class="op" id="7226142">,</span>&nbsp;<span class="num" id="7226144">0x4213</span><span class="op" id="7226150">,</span>&nbsp;<span class="num" id="7226152">0x28</span><span class="op" id="7226156">}</span><span class="op" id="7226157">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226162">{</span><span class="string" id="7226163">&#34;data&#34;</span><span class="op" id="7226169">,</span>&nbsp;<span class="num" id="7226171">0xa80</span><span class="op" id="7226176">,</span>&nbsp;<span class="num" id="7226178">0x423b</span><span class="op" id="7226184">}</span><span class="op" id="7226185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226190">{</span><span class="string" id="7226191">&#34;syms&#34;</span><span class="op" id="7226197">,</span>&nbsp;<span class="num" id="7226199">0x2c8c</span><span class="op" id="7226205">,</span>&nbsp;<span class="num" id="7226207">0x4cbb</span><span class="op" id="7226213">}</span><span class="op" id="7226214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226219">{</span><span class="string" id="7226220">&#34;spsz&#34;</span><span class="op" id="7226226">,</span>&nbsp;<span class="num" id="7226228">0x0</span><span class="op" id="7226231">,</span>&nbsp;<span class="num" id="7226233">0x7947</span><span class="op" id="7226239">}</span><span class="op" id="7226240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226245">{</span><span class="string" id="7226246">&#34;pcsz&#34;</span><span class="op" id="7226252">,</span>&nbsp;<span class="num" id="7226254">0xca0</span><span class="op" id="7226259">,</span>&nbsp;<span class="num" id="7226261">0x7947</span><span class="op" id="7226267">}</span><span class="op" id="7226268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226272">}</span><span class="op" id="7226273">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226276">}</span><span class="op" id="7226277">,</span><br>
<span class="lineno"></span><span class="op" id="7226279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7226282">func</span>&nbsp;<span class="ident" id="7226287">TestOpen</span><span class="op" id="7226295">(</span><span class="ident" id="7226296">t</span>&nbsp;<span class="op" id="7226298">*</span><span class="ident" id="7226299">testing</span><span class="op" id="7226306">.</span><span class="ident" id="7226307">T</span><span class="op" id="7226308">)</span>&nbsp;<span class="op" id="7226310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226313">for</span>&nbsp;<span class="ident" id="7226317">i</span>&nbsp;<span class="op" id="7226319">:=</span>&nbsp;<span class="keyword" id="7226322">range</span>&nbsp;<span class="ident" id="7226328">fileTests</span>&nbsp;<span class="op" id="7226338">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226342">tt</span>&nbsp;<span class="op" id="7226345">:=</span>&nbsp;<span class="op" id="7226348">&amp;</span><span class="ident" id="7226349">fileTests</span><span class="op" id="7226358">[</span><span class="ident" id="7226359">i</span><span class="op" id="7226360">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226365">f</span><span class="op" id="7226366">,</span>&nbsp;<span class="ident" id="7226368">err</span>&nbsp;<span class="op" id="7226372">:=</span>&nbsp;<span class="ident" id="7226375">Open</span><span class="op" id="7226379">(</span><span class="ident" id="7226380">tt</span><span class="op" id="7226382">.</span><span class="ident" id="7226383">file</span><span class="op" id="7226387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226391">if</span>&nbsp;<span class="ident" id="7226394">err</span>&nbsp;<span class="op" id="7226398">!=</span>&nbsp;<span class="ident" id="7226401">nil</span>&nbsp;<span class="op" id="7226405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226410">t</span><span class="op" id="7226411">.</span><span class="ident" id="7226412">Error</span><span class="op" id="7226417">(</span><span class="ident" id="7226418">err</span><span class="op" id="7226421">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226426">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226441">if</span>&nbsp;<span class="op" id="7226444">!</span><span class="ident" id="7226445">reflect</span><span class="op" id="7226452">.</span><span class="ident" id="7226453">DeepEqual</span><span class="op" id="7226462">(</span><span class="ident" id="7226463">f</span><span class="op" id="7226464">.</span><span class="ident" id="7226465">FileHeader</span><span class="op" id="7226475">,</span>&nbsp;<span class="ident" id="7226477">tt</span><span class="op" id="7226479">.</span><span class="ident" id="7226480">hdr</span><span class="op" id="7226483">)</span>&nbsp;<span class="op" id="7226485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226490">t</span><span class="op" id="7226491">.</span><span class="ident" id="7226492">Errorf</span><span class="op" id="7226498">(</span><span class="string" id="7226499">&#34;open&nbsp;%s:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7226535">,</span>&nbsp;<span class="ident" id="7226537">tt</span><span class="op" id="7226539">.</span><span class="ident" id="7226540">file</span><span class="op" id="7226544">,</span>&nbsp;<span class="ident" id="7226546">f</span><span class="op" id="7226547">.</span><span class="ident" id="7226548">FileHeader</span><span class="op" id="7226558">,</span>&nbsp;<span class="ident" id="7226560">tt</span><span class="op" id="7226562">.</span><span class="ident" id="7226563">hdr</span><span class="op" id="7226566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226571">continue</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226587">for</span>&nbsp;<span class="ident" id="7226591">i</span><span class="op" id="7226592">,</span>&nbsp;<span class="ident" id="7226594">sh</span>&nbsp;<span class="op" id="7226597">:=</span>&nbsp;<span class="keyword" id="7226600">range</span>&nbsp;<span class="ident" id="7226606">f</span><span class="op" id="7226607">.</span><span class="ident" id="7226608">Sections</span>&nbsp;<span class="op" id="7226617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226622">if</span>&nbsp;<span class="ident" id="7226625">i</span>&nbsp;<span class="op" id="7226627">&gt;=</span>&nbsp;<span class="builtinfunc" id="7226630">len</span><span class="op" id="7226633">(</span><span class="ident" id="7226634">tt</span><span class="op" id="7226636">.</span><span class="ident" id="7226637">sections</span><span class="op" id="7226645">)</span>&nbsp;<span class="op" id="7226647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226653">break</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226667">have</span>&nbsp;<span class="op" id="7226672">:=</span>&nbsp;<span class="op" id="7226675">&amp;</span><span class="ident" id="7226676">sh</span><span class="op" id="7226678">.</span><span class="ident" id="7226679">SectionHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226696">want</span>&nbsp;<span class="op" id="7226701">:=</span>&nbsp;<span class="ident" id="7226704">tt</span><span class="op" id="7226706">.</span><span class="ident" id="7226707">sections</span><span class="op" id="7226715">[</span><span class="ident" id="7226716">i</span><span class="op" id="7226717">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226722">if</span>&nbsp;<span class="op" id="7226725">!</span><span class="ident" id="7226726">reflect</span><span class="op" id="7226733">.</span><span class="ident" id="7226734">DeepEqual</span><span class="op" id="7226743">(</span><span class="ident" id="7226744">have</span><span class="op" id="7226748">,</span>&nbsp;<span class="ident" id="7226750">want</span><span class="op" id="7226754">)</span>&nbsp;<span class="op" id="7226756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226762">t</span><span class="op" id="7226763">.</span><span class="ident" id="7226764">Errorf</span><span class="op" id="7226770">(</span><span class="string" id="7226771">&#34;open&nbsp;%s,&nbsp;section&nbsp;%d:\n\thave&nbsp;%#v\n\twant&nbsp;%#v\n&#34;</span><span class="op" id="7226819">,</span>&nbsp;<span class="ident" id="7226821">tt</span><span class="op" id="7226823">.</span><span class="ident" id="7226824">file</span><span class="op" id="7226828">,</span>&nbsp;<span class="ident" id="7226830">i</span><span class="op" id="7226831">,</span>&nbsp;<span class="ident" id="7226833">have</span><span class="op" id="7226837">,</span>&nbsp;<span class="ident" id="7226839">want</span><span class="op" id="7226843">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226856">tn</span>&nbsp;<span class="op" id="7226859">:=</span>&nbsp;<span class="builtinfunc" id="7226862">len</span><span class="op" id="7226865">(</span><span class="ident" id="7226866">tt</span><span class="op" id="7226868">.</span><span class="ident" id="7226869">sections</span><span class="op" id="7226877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226881">fn</span>&nbsp;<span class="op" id="7226884">:=</span>&nbsp;<span class="builtinfunc" id="7226887">len</span><span class="op" id="7226890">(</span><span class="ident" id="7226891">f</span><span class="op" id="7226892">.</span><span class="ident" id="7226893">Sections</span><span class="op" id="7226901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7226905">if</span>&nbsp;<span class="ident" id="7226908">tn</span>&nbsp;<span class="op" id="7226911">!=</span>&nbsp;<span class="ident" id="7226914">fn</span>&nbsp;<span class="op" id="7226917">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7226922">t</span><span class="op" id="7226923">.</span><span class="ident" id="7226924">Errorf</span><span class="op" id="7226930">(</span><span class="string" id="7226931">&#34;open&nbsp;%s:&nbsp;len(Sections)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7226969">,</span>&nbsp;<span class="ident" id="7226971">tt</span><span class="op" id="7226973">.</span><span class="ident" id="7226974">file</span><span class="op" id="7226978">,</span>&nbsp;<span class="ident" id="7226980">fn</span><span class="op" id="7226982">,</span>&nbsp;<span class="ident" id="7226984">tn</span><span class="op" id="7226986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7226993">}</span><br>
<span class="lineno"></span><span class="op" id="7226995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7226998">func</span>&nbsp;<span class="ident" id="7227003">TestOpenFailure</span><span class="op" id="7227018">(</span><span class="ident" id="7227019">t</span>&nbsp;<span class="op" id="7227021">*</span><span class="ident" id="7227022">testing</span><span class="op" id="7227029">.</span><span class="ident" id="7227030">T</span><span class="op" id="7227031">)</span>&nbsp;<span class="op" id="7227033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7227036">filename</span>&nbsp;<span class="op" id="7227045">:=</span>&nbsp;<span class="string" id="7227048">&#34;file.go&#34;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7227061">//&nbsp;not&nbsp;a&nbsp;Plan&nbsp;9&nbsp;a.out&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7227089">_</span><span class="op" id="7227090">,</span>&nbsp;<span class="ident" id="7227092">err</span>&nbsp;<span class="op" id="7227096">:=</span>&nbsp;<span class="ident" id="7227099">Open</span><span class="op" id="7227103">(</span><span class="ident" id="7227104">filename</span><span class="op" id="7227112">)</span>&nbsp;<span class="comment" id="7227114">//&nbsp;don&#39;t&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7227130">if</span>&nbsp;<span class="ident" id="7227133">err</span>&nbsp;<span class="op" id="7227137">==</span>&nbsp;<span class="ident" id="7227140">nil</span>&nbsp;<span class="op" id="7227144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7227148">t</span><span class="op" id="7227149">.</span><span class="ident" id="7227150">Errorf</span><span class="op" id="7227156">(</span><span class="string" id="7227157">&#34;open&nbsp;%s:&nbsp;succeeded&nbsp;unexpectedly&#34;</span><span class="op" id="7227190">,</span>&nbsp;<span class="ident" id="7227192">filename</span><span class="op" id="7227200">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7227203">}</span><br>
<span class="lineno"></span><span class="op" id="7227205">}</span>
</div>
</body>
</html>
