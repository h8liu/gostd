<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html" class="current">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1575653">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1575708">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1575762">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1575813">package</span>&nbsp;<span class="ident" id="1575821">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1575830">import</span>&nbsp;<span class="string" id="1575837">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575847">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*m.</span><br>
<span class="lineno">10</span><span class="keyword" id="1575889">func</span>&nbsp;<span class="ident" id="1575894">gc_m_ptr</span><span class="op" id="1575902">(</span><span class="ident" id="1575903">ret</span>&nbsp;<span class="op" id="1575907">*</span><span class="keyword" id="1575908">interface</span><span class="op" id="1575917">{</span><span class="op" id="1575918">}</span><span class="op" id="1575919">)</span>&nbsp;<span class="op" id="1575921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1575924">*</span><span class="ident" id="1575925">ret</span>&nbsp;<span class="op" id="1575929">=</span>&nbsp;<span class="op" id="1575931">(</span><span class="op" id="1575932">*</span><span class="ident" id="1575933">m</span><span class="op" id="1575934">)</span><span class="op" id="1575935">(</span><span class="builtintype" id="1575936">nil</span><span class="op" id="1575939">)</span><br>
<span class="lineno"></span><span class="op" id="1575941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1575944">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*g.</span><br>
<span class="lineno">15</span><span class="keyword" id="1575986">func</span>&nbsp;<span class="ident" id="1575991">gc_g_ptr</span><span class="op" id="1575999">(</span><span class="ident" id="1576000">ret</span>&nbsp;<span class="op" id="1576004">*</span><span class="keyword" id="1576005">interface</span><span class="op" id="1576014">{</span><span class="op" id="1576015">}</span><span class="op" id="1576016">)</span>&nbsp;<span class="op" id="1576018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576021">*</span><span class="ident" id="1576022">ret</span>&nbsp;<span class="op" id="1576026">=</span>&nbsp;<span class="op" id="1576028">(</span><span class="op" id="1576029">*</span><span class="ident" id="1576030">g</span><span class="op" id="1576031">)</span><span class="op" id="1576032">(</span><span class="builtintype" id="1576033">nil</span><span class="op" id="1576036">)</span><br>
<span class="lineno"></span><span class="op" id="1576038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1576041">//&nbsp;Called&nbsp;from&nbsp;C.&nbsp;Returns&nbsp;the&nbsp;Go&nbsp;type&nbsp;*itab.</span><br>
<span class="lineno">20</span><span class="keyword" id="1576086">func</span>&nbsp;<span class="ident" id="1576091">gc_itab_ptr</span><span class="op" id="1576102">(</span><span class="ident" id="1576103">ret</span>&nbsp;<span class="op" id="1576107">*</span><span class="keyword" id="1576108">interface</span><span class="op" id="1576117">{</span><span class="op" id="1576118">}</span><span class="op" id="1576119">)</span>&nbsp;<span class="op" id="1576121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576124">*</span><span class="ident" id="1576125">ret</span>&nbsp;<span class="op" id="1576129">=</span>&nbsp;<span class="op" id="1576131">(</span><span class="op" id="1576132">*</span><span class="ident" id="1576133">itab</span><span class="op" id="1576137">)</span><span class="op" id="1576138">(</span><span class="builtintype" id="1576139">nil</span><span class="op" id="1576142">)</span><br>
<span class="lineno"></span><span class="op" id="1576144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1576147">func</span>&nbsp;<span class="ident" id="1576152">gc_unixnanotime</span><span class="op" id="1576167">(</span><span class="ident" id="1576168">now</span>&nbsp;<span class="op" id="1576172">*</span><span class="ident" id="1576173">int64</span><span class="op" id="1576178">)</span>&nbsp;<span class="op" id="1576180">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576183">sec</span><span class="op" id="1576186">,</span>&nbsp;<span class="ident" id="1576188">nsec</span>&nbsp;<span class="op" id="1576193">:=</span>&nbsp;<span class="ident" id="1576196">timenow</span><span class="op" id="1576203">(</span><span class="op" id="1576204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576207">*</span><span class="ident" id="1576208">now</span>&nbsp;<span class="op" id="1576212">=</span>&nbsp;<span class="ident" id="1576214">sec</span><span class="op" id="1576217">*</span><span class="num" id="1576218">1e9</span>&nbsp;<span class="op" id="1576222">+</span>&nbsp;<span class="ident" id="1576224">int64</span><span class="op" id="1576229">(</span><span class="ident" id="1576230">nsec</span><span class="op" id="1576234">)</span><br>
<span class="lineno"></span><span class="op" id="1576236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1576239">func</span>&nbsp;<span class="ident" id="1576244">freeOSMemory</span><span class="op" id="1576256">(</span><span class="op" id="1576257">)</span>&nbsp;<span class="op" id="1576259">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576262">gogc</span><span class="op" id="1576266">(</span><span class="num" id="1576267">2</span><span class="op" id="1576268">)</span>&nbsp;<span class="comment" id="1576270">//&nbsp;force&nbsp;GC&nbsp;and&nbsp;do&nbsp;eager&nbsp;sweep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576302">onM</span><span class="op" id="1576305">(</span><span class="ident" id="1576306">scavenge_m</span><span class="op" id="1576316">)</span><br>
<span class="lineno"></span><span class="op" id="1576318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1576321">var</span>&nbsp;<span class="ident" id="1576325">poolcleanup</span>&nbsp;<span class="keyword" id="1576337">func</span><span class="op" id="1576341">(</span><span class="op" id="1576342">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="1576345">func</span>&nbsp;<span class="ident" id="1576350">registerPoolCleanup</span><span class="op" id="1576369">(</span><span class="ident" id="1576370">f</span>&nbsp;<span class="keyword" id="1576372">func</span><span class="op" id="1576376">(</span><span class="op" id="1576377">)</span><span class="op" id="1576378">)</span>&nbsp;<span class="op" id="1576380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576383">poolcleanup</span>&nbsp;<span class="op" id="1576395">=</span>&nbsp;<span class="ident" id="1576397">f</span><br>
<span class="lineno"></span><span class="op" id="1576399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1576402">func</span>&nbsp;<span class="ident" id="1576407">clearpools</span><span class="op" id="1576417">(</span><span class="op" id="1576418">)</span>&nbsp;<span class="op" id="1576420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576423">//&nbsp;clear&nbsp;sync.Pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576444">if</span>&nbsp;<span class="ident" id="1576447">poolcleanup</span>&nbsp;<span class="op" id="1576459">!=</span>&nbsp;<span class="builtintype" id="1576462">nil</span>&nbsp;<span class="op" id="1576466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576470">poolcleanup</span><span class="op" id="1576481">(</span><span class="op" id="1576482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576485">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576489">for</span>&nbsp;<span class="ident" id="1576493">_</span><span class="op" id="1576494">,</span>&nbsp;<span class="ident" id="1576496">p</span>&nbsp;<span class="op" id="1576498">:=</span>&nbsp;<span class="keyword" id="1576501">range</span>&nbsp;<span class="op" id="1576507">&amp;</span><span class="ident" id="1576508">allp</span>&nbsp;<span class="op" id="1576513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576517">if</span>&nbsp;<span class="ident" id="1576520">p</span>&nbsp;<span class="op" id="1576522">==</span>&nbsp;<span class="builtintype" id="1576525">nil</span>&nbsp;<span class="op" id="1576529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576534">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576542">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576546">//&nbsp;clear&nbsp;tinyalloc&nbsp;pool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576572">if</span>&nbsp;<span class="ident" id="1576575">c</span>&nbsp;<span class="op" id="1576577">:=</span>&nbsp;<span class="ident" id="1576580">p</span><span class="op" id="1576581">.</span><span class="ident" id="1576582">mcache</span><span class="op" id="1576588">;</span>&nbsp;<span class="ident" id="1576590">c</span>&nbsp;<span class="op" id="1576592">!=</span>&nbsp;<span class="builtintype" id="1576595">nil</span>&nbsp;<span class="op" id="1576599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576604">c</span><span class="op" id="1576605">.</span><span class="ident" id="1576606">tiny</span>&nbsp;<span class="op" id="1576611">=</span>&nbsp;<span class="builtintype" id="1576613">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576620">c</span><span class="op" id="1576621">.</span><span class="ident" id="1576622">tinysize</span>&nbsp;<span class="op" id="1576631">=</span>&nbsp;<span class="num" id="1576633">0</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576639">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576701">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576769">var</span>&nbsp;<span class="ident" id="1576773">sg</span><span class="op" id="1576775">,</span>&nbsp;<span class="ident" id="1576777">sgnext</span>&nbsp;<span class="op" id="1576784">*</span><span class="ident" id="1576785">sudog</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576794">for</span>&nbsp;<span class="ident" id="1576798">sg</span>&nbsp;<span class="op" id="1576801">=</span>&nbsp;<span class="ident" id="1576803">c</span><span class="op" id="1576804">.</span><span class="ident" id="1576805">sudogcache</span><span class="op" id="1576815">;</span>&nbsp;<span class="ident" id="1576817">sg</span>&nbsp;<span class="op" id="1576820">!=</span>&nbsp;<span class="builtintype" id="1576823">nil</span><span class="op" id="1576826">;</span>&nbsp;<span class="ident" id="1576828">sg</span>&nbsp;<span class="op" id="1576831">=</span>&nbsp;<span class="ident" id="1576833">sgnext</span>&nbsp;<span class="op" id="1576840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576846">sgnext</span>&nbsp;<span class="op" id="1576853">=</span>&nbsp;<span class="ident" id="1576855">sg</span><span class="op" id="1576857">.</span><span class="ident" id="1576858">next</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576867">sg</span><span class="op" id="1576869">.</span><span class="ident" id="1576870">next</span>&nbsp;<span class="op" id="1576875">=</span>&nbsp;<span class="builtintype" id="1576877">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1576889">c</span><span class="op" id="1576890">.</span><span class="ident" id="1576891">sudogcache</span>&nbsp;<span class="op" id="1576902">=</span>&nbsp;<span class="builtintype" id="1576904">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1576910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576915">//&nbsp;clear&nbsp;defer&nbsp;pools</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1576938">for</span>&nbsp;<span class="ident" id="1576942">i</span>&nbsp;<span class="op" id="1576944">:=</span>&nbsp;<span class="keyword" id="1576947">range</span>&nbsp;<span class="ident" id="1576953">p</span><span class="op" id="1576954">.</span><span class="ident" id="1576955">deferpool</span>&nbsp;<span class="op" id="1576965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1576970">//&nbsp;disconnect&nbsp;cached&nbsp;list&nbsp;before&nbsp;dropping&nbsp;it&nbsp;on&nbsp;the&nbsp;floor,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577032">//&nbsp;so&nbsp;that&nbsp;a&nbsp;dangling&nbsp;ref&nbsp;to&nbsp;one&nbsp;entry&nbsp;does&nbsp;not&nbsp;pin&nbsp;all&nbsp;of&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577100">var</span>&nbsp;<span class="ident" id="1577104">d</span><span class="op" id="1577105">,</span>&nbsp;<span class="ident" id="1577107">dlink</span>&nbsp;<span class="op" id="1577113">*</span><span class="ident" id="1577114">_defer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577124">for</span>&nbsp;<span class="ident" id="1577128">d</span>&nbsp;<span class="op" id="1577130">=</span>&nbsp;<span class="ident" id="1577132">p</span><span class="op" id="1577133">.</span><span class="ident" id="1577134">deferpool</span><span class="op" id="1577143">[</span><span class="ident" id="1577144">i</span><span class="op" id="1577145">]</span><span class="op" id="1577146">;</span>&nbsp;<span class="ident" id="1577148">d</span>&nbsp;<span class="op" id="1577150">!=</span>&nbsp;<span class="builtintype" id="1577153">nil</span><span class="op" id="1577156">;</span>&nbsp;<span class="ident" id="1577158">d</span>&nbsp;<span class="op" id="1577160">=</span>&nbsp;<span class="ident" id="1577162">dlink</span>&nbsp;<span class="op" id="1577168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577174">dlink</span>&nbsp;<span class="op" id="1577180">=</span>&nbsp;<span class="ident" id="1577182">d</span><span class="op" id="1577183">.</span><span class="ident" id="1577184">link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577193">d</span><span class="op" id="1577194">.</span><span class="ident" id="1577195">link</span>&nbsp;<span class="op" id="1577200">=</span>&nbsp;<span class="builtintype" id="1577202">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577214">p</span><span class="op" id="1577215">.</span><span class="ident" id="1577216">deferpool</span><span class="op" id="1577225">[</span><span class="ident" id="1577226">i</span><span class="op" id="1577227">]</span>&nbsp;<span class="op" id="1577229">=</span>&nbsp;<span class="builtintype" id="1577231">nil</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577240">}</span><br>
<span class="lineno"></span><span class="op" id="1577242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1577245">func</span>&nbsp;<span class="ident" id="1577250">gosweepone</span><span class="op" id="1577260">(</span><span class="op" id="1577261">)</span>&nbsp;<span class="builtintype" id="1577263">uintptr</span><br>
<span class="lineno">80</span><span class="keyword" id="1577271">func</span>&nbsp;<span class="ident" id="1577276">gosweepdone</span><span class="op" id="1577287">(</span><span class="op" id="1577288">)</span>&nbsp;<span class="builtintype" id="1577290">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1577296">func</span>&nbsp;<span class="ident" id="1577301">bgsweep</span><span class="op" id="1577308">(</span><span class="op" id="1577309">)</span>&nbsp;<span class="op" id="1577311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577314">getg</span><span class="op" id="1577318">(</span><span class="op" id="1577319">)</span><span class="op" id="1577320">.</span><span class="ident" id="1577321">issystem</span>&nbsp;<span class="op" id="1577330">=</span>&nbsp;<span class="builtintype" id="1577332">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577338">for</span>&nbsp;<span class="op" id="1577342">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577346">for</span>&nbsp;<span class="ident" id="1577350">gosweepone</span><span class="op" id="1577360">(</span><span class="op" id="1577361">)</span>&nbsp;<span class="op" id="1577363">!=</span>&nbsp;<span class="op" id="1577366">^</span><span class="builtintype" id="1577367">uintptr</span><span class="op" id="1577374">(</span><span class="num" id="1577375">0</span><span class="op" id="1577376">)</span>&nbsp;<span class="op" id="1577378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577383">sweep</span><span class="op" id="1577388">.</span><span class="ident" id="1577389">nbgsweep</span><span class="op" id="1577397">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577403">Gosched</span><span class="op" id="1577410">(</span><span class="op" id="1577411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577419">lock</span><span class="op" id="1577423">(</span><span class="op" id="1577424">&amp;</span><span class="ident" id="1577425">gclock</span><span class="op" id="1577431">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577435">if</span>&nbsp;<span class="op" id="1577438">!</span><span class="ident" id="1577439">gosweepdone</span><span class="op" id="1577450">(</span><span class="op" id="1577451">)</span>&nbsp;<span class="op" id="1577453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577458">//&nbsp;This&nbsp;can&nbsp;happen&nbsp;if&nbsp;a&nbsp;GC&nbsp;runs&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577501">//&nbsp;gosweepone&nbsp;returning&nbsp;^0&nbsp;above</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1577537">//&nbsp;and&nbsp;the&nbsp;lock&nbsp;being&nbsp;acquired.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577572">unlock</span><span class="op" id="1577578">(</span><span class="op" id="1577579">&amp;</span><span class="ident" id="1577580">gclock</span><span class="op" id="1577586">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1577591">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577606">sweep</span><span class="op" id="1577611">.</span><span class="ident" id="1577612">parked</span>&nbsp;<span class="op" id="1577619">=</span>&nbsp;<span class="builtintype" id="1577621">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577628">goparkunlock</span><span class="op" id="1577640">(</span><span class="op" id="1577641">&amp;</span><span class="ident" id="1577642">gclock</span><span class="op" id="1577648">,</span>&nbsp;<span class="string" id="1577650">&#34;GC&nbsp;sweep&nbsp;wait&#34;</span><span class="op" id="1577665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577668">}</span><br>
<span class="lineno">100</span><span class="op" id="1577670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1577673">//&nbsp;NOTE:&nbsp;Really&nbsp;dst&nbsp;*unsafe.Pointer,&nbsp;src&nbsp;unsafe.Pointer,</span><br>
<span class="lineno"></span><span class="comment" id="1577730">//&nbsp;but&nbsp;if&nbsp;we&nbsp;do&nbsp;that,&nbsp;Go&nbsp;inserts&nbsp;a&nbsp;write&nbsp;barrier&nbsp;on&nbsp;*dst&nbsp;=&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="1577794">//go:nosplit</span><br>
<span class="lineno">105</span><span class="keyword" id="1577807">func</span>&nbsp;<span class="ident" id="1577812">writebarrierptr</span><span class="op" id="1577827">(</span><span class="ident" id="1577828">dst</span>&nbsp;<span class="op" id="1577832">*</span><span class="builtintype" id="1577833">uintptr</span><span class="op" id="1577840">,</span>&nbsp;<span class="ident" id="1577842">src</span>&nbsp;<span class="builtintype" id="1577846">uintptr</span><span class="op" id="1577853">)</span>&nbsp;<span class="op" id="1577855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1577858">*</span><span class="ident" id="1577859">dst</span>&nbsp;<span class="op" id="1577863">=</span>&nbsp;<span class="ident" id="1577865">src</span><br>
<span class="lineno"></span><span class="op" id="1577869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1577872">//go:nosplit</span><br>
<span class="lineno">110</span><span class="keyword" id="1577885">func</span>&nbsp;<span class="ident" id="1577890">writebarrierstring</span><span class="op" id="1577908">(</span><span class="ident" id="1577909">dst</span>&nbsp;<span class="op" id="1577913">*</span><span class="op" id="1577914">[</span><span class="num" id="1577915">2</span><span class="op" id="1577916">]</span><span class="builtintype" id="1577917">uintptr</span><span class="op" id="1577924">,</span>&nbsp;<span class="ident" id="1577926">src</span>&nbsp;<span class="op" id="1577930">[</span><span class="num" id="1577931">2</span><span class="op" id="1577932">]</span><span class="builtintype" id="1577933">uintptr</span><span class="op" id="1577940">)</span>&nbsp;<span class="op" id="1577942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577945">dst</span><span class="op" id="1577948">[</span><span class="num" id="1577949">0</span><span class="op" id="1577950">]</span>&nbsp;<span class="op" id="1577952">=</span>&nbsp;<span class="ident" id="1577954">src</span><span class="op" id="1577957">[</span><span class="num" id="1577958">0</span><span class="op" id="1577959">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1577962">dst</span><span class="op" id="1577965">[</span><span class="num" id="1577966">1</span><span class="op" id="1577967">]</span>&nbsp;<span class="op" id="1577969">=</span>&nbsp;<span class="ident" id="1577971">src</span><span class="op" id="1577974">[</span><span class="num" id="1577975">1</span><span class="op" id="1577976">]</span><br>
<span class="lineno"></span><span class="op" id="1577978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="1577981">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1577994">func</span>&nbsp;<span class="ident" id="1577999">writebarrierslice</span><span class="op" id="1578016">(</span><span class="ident" id="1578017">dst</span>&nbsp;<span class="op" id="1578021">*</span><span class="op" id="1578022">[</span><span class="num" id="1578023">3</span><span class="op" id="1578024">]</span><span class="builtintype" id="1578025">uintptr</span><span class="op" id="1578032">,</span>&nbsp;<span class="ident" id="1578034">src</span>&nbsp;<span class="op" id="1578038">[</span><span class="num" id="1578039">3</span><span class="op" id="1578040">]</span><span class="builtintype" id="1578041">uintptr</span><span class="op" id="1578048">)</span>&nbsp;<span class="op" id="1578050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578053">dst</span><span class="op" id="1578056">[</span><span class="num" id="1578057">0</span><span class="op" id="1578058">]</span>&nbsp;<span class="op" id="1578060">=</span>&nbsp;<span class="ident" id="1578062">src</span><span class="op" id="1578065">[</span><span class="num" id="1578066">0</span><span class="op" id="1578067">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578070">dst</span><span class="op" id="1578073">[</span><span class="num" id="1578074">1</span><span class="op" id="1578075">]</span>&nbsp;<span class="op" id="1578077">=</span>&nbsp;<span class="ident" id="1578079">src</span><span class="op" id="1578082">[</span><span class="num" id="1578083">1</span><span class="op" id="1578084">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578087">dst</span><span class="op" id="1578090">[</span><span class="num" id="1578091">2</span><span class="op" id="1578092">]</span>&nbsp;<span class="op" id="1578094">=</span>&nbsp;<span class="ident" id="1578096">src</span><span class="op" id="1578099">[</span><span class="num" id="1578100">2</span><span class="op" id="1578101">]</span><br>
<span class="lineno">120</span><span class="op" id="1578103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1578106">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1578119">func</span>&nbsp;<span class="ident" id="1578124">writebarrieriface</span><span class="op" id="1578141">(</span><span class="ident" id="1578142">dst</span>&nbsp;<span class="op" id="1578146">*</span><span class="op" id="1578147">[</span><span class="num" id="1578148">2</span><span class="op" id="1578149">]</span><span class="builtintype" id="1578150">uintptr</span><span class="op" id="1578157">,</span>&nbsp;<span class="ident" id="1578159">src</span>&nbsp;<span class="op" id="1578163">[</span><span class="num" id="1578164">2</span><span class="op" id="1578165">]</span><span class="builtintype" id="1578166">uintptr</span><span class="op" id="1578173">)</span>&nbsp;<span class="op" id="1578175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578178">dst</span><span class="op" id="1578181">[</span><span class="num" id="1578182">0</span><span class="op" id="1578183">]</span>&nbsp;<span class="op" id="1578185">=</span>&nbsp;<span class="ident" id="1578187">src</span><span class="op" id="1578190">[</span><span class="num" id="1578191">0</span><span class="op" id="1578192">]</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578195">dst</span><span class="op" id="1578198">[</span><span class="num" id="1578199">1</span><span class="op" id="1578200">]</span>&nbsp;<span class="op" id="1578202">=</span>&nbsp;<span class="ident" id="1578204">src</span><span class="op" id="1578207">[</span><span class="num" id="1578208">1</span><span class="op" id="1578209">]</span><br>
<span class="lineno"></span><span class="op" id="1578211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1578214">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1578227">func</span>&nbsp;<span class="ident" id="1578232">writebarrierfat2</span><span class="op" id="1578248">(</span><span class="ident" id="1578249">dst</span>&nbsp;<span class="op" id="1578253">*</span><span class="op" id="1578254">[</span><span class="num" id="1578255">2</span><span class="op" id="1578256">]</span><span class="builtintype" id="1578257">uintptr</span><span class="op" id="1578264">,</span>&nbsp;<span class="ident" id="1578266">_</span>&nbsp;<span class="op" id="1578268">*</span><span class="builtintype" id="1578269">byte</span><span class="op" id="1578273">,</span>&nbsp;<span class="ident" id="1578275">src</span>&nbsp;<span class="op" id="1578279">[</span><span class="num" id="1578280">2</span><span class="op" id="1578281">]</span><span class="builtintype" id="1578282">uintptr</span><span class="op" id="1578289">)</span>&nbsp;<span class="op" id="1578291">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578294">dst</span><span class="op" id="1578297">[</span><span class="num" id="1578298">0</span><span class="op" id="1578299">]</span>&nbsp;<span class="op" id="1578301">=</span>&nbsp;<span class="ident" id="1578303">src</span><span class="op" id="1578306">[</span><span class="num" id="1578307">0</span><span class="op" id="1578308">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578311">dst</span><span class="op" id="1578314">[</span><span class="num" id="1578315">1</span><span class="op" id="1578316">]</span>&nbsp;<span class="op" id="1578318">=</span>&nbsp;<span class="ident" id="1578320">src</span><span class="op" id="1578323">[</span><span class="num" id="1578324">1</span><span class="op" id="1578325">]</span><br>
<span class="lineno"></span><span class="op" id="1578327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1578330">//go:nosplit</span><br>
<span class="lineno">135</span><span class="keyword" id="1578343">func</span>&nbsp;<span class="ident" id="1578348">writebarrierfat3</span><span class="op" id="1578364">(</span><span class="ident" id="1578365">dst</span>&nbsp;<span class="op" id="1578369">*</span><span class="op" id="1578370">[</span><span class="num" id="1578371">3</span><span class="op" id="1578372">]</span><span class="builtintype" id="1578373">uintptr</span><span class="op" id="1578380">,</span>&nbsp;<span class="ident" id="1578382">_</span>&nbsp;<span class="op" id="1578384">*</span><span class="builtintype" id="1578385">byte</span><span class="op" id="1578389">,</span>&nbsp;<span class="ident" id="1578391">src</span>&nbsp;<span class="op" id="1578395">[</span><span class="num" id="1578396">3</span><span class="op" id="1578397">]</span><span class="builtintype" id="1578398">uintptr</span><span class="op" id="1578405">)</span>&nbsp;<span class="op" id="1578407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578410">dst</span><span class="op" id="1578413">[</span><span class="num" id="1578414">0</span><span class="op" id="1578415">]</span>&nbsp;<span class="op" id="1578417">=</span>&nbsp;<span class="ident" id="1578419">src</span><span class="op" id="1578422">[</span><span class="num" id="1578423">0</span><span class="op" id="1578424">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578427">dst</span><span class="op" id="1578430">[</span><span class="num" id="1578431">1</span><span class="op" id="1578432">]</span>&nbsp;<span class="op" id="1578434">=</span>&nbsp;<span class="ident" id="1578436">src</span><span class="op" id="1578439">[</span><span class="num" id="1578440">1</span><span class="op" id="1578441">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578444">dst</span><span class="op" id="1578447">[</span><span class="num" id="1578448">2</span><span class="op" id="1578449">]</span>&nbsp;<span class="op" id="1578451">=</span>&nbsp;<span class="ident" id="1578453">src</span><span class="op" id="1578456">[</span><span class="num" id="1578457">2</span><span class="op" id="1578458">]</span><br>
<span class="lineno"></span><span class="op" id="1578460">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="1578463">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1578476">func</span>&nbsp;<span class="ident" id="1578481">writebarrierfat4</span><span class="op" id="1578497">(</span><span class="ident" id="1578498">dst</span>&nbsp;<span class="op" id="1578502">*</span><span class="op" id="1578503">[</span><span class="num" id="1578504">4</span><span class="op" id="1578505">]</span><span class="builtintype" id="1578506">uintptr</span><span class="op" id="1578513">,</span>&nbsp;<span class="ident" id="1578515">_</span>&nbsp;<span class="op" id="1578517">*</span><span class="builtintype" id="1578518">byte</span><span class="op" id="1578522">,</span>&nbsp;<span class="ident" id="1578524">src</span>&nbsp;<span class="op" id="1578528">[</span><span class="num" id="1578529">4</span><span class="op" id="1578530">]</span><span class="builtintype" id="1578531">uintptr</span><span class="op" id="1578538">)</span>&nbsp;<span class="op" id="1578540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578543">dst</span><span class="op" id="1578546">[</span><span class="num" id="1578547">0</span><span class="op" id="1578548">]</span>&nbsp;<span class="op" id="1578550">=</span>&nbsp;<span class="ident" id="1578552">src</span><span class="op" id="1578555">[</span><span class="num" id="1578556">0</span><span class="op" id="1578557">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578560">dst</span><span class="op" id="1578563">[</span><span class="num" id="1578564">1</span><span class="op" id="1578565">]</span>&nbsp;<span class="op" id="1578567">=</span>&nbsp;<span class="ident" id="1578569">src</span><span class="op" id="1578572">[</span><span class="num" id="1578573">1</span><span class="op" id="1578574">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578577">dst</span><span class="op" id="1578580">[</span><span class="num" id="1578581">2</span><span class="op" id="1578582">]</span>&nbsp;<span class="op" id="1578584">=</span>&nbsp;<span class="ident" id="1578586">src</span><span class="op" id="1578589">[</span><span class="num" id="1578590">2</span><span class="op" id="1578591">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578594">dst</span><span class="op" id="1578597">[</span><span class="num" id="1578598">3</span><span class="op" id="1578599">]</span>&nbsp;<span class="op" id="1578601">=</span>&nbsp;<span class="ident" id="1578603">src</span><span class="op" id="1578606">[</span><span class="num" id="1578607">3</span><span class="op" id="1578608">]</span><br>
<span class="lineno"></span><span class="op" id="1578610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1578613">//go:nosplit</span><br>
<span class="lineno">150</span><span class="keyword" id="1578626">func</span>&nbsp;<span class="ident" id="1578631">writebarrierfat</span><span class="op" id="1578646">(</span><span class="ident" id="1578647">typ</span>&nbsp;<span class="op" id="1578651">*</span><span class="ident" id="1578652">_type</span><span class="op" id="1578657">,</span>&nbsp;<span class="ident" id="1578659">dst</span><span class="op" id="1578662">,</span>&nbsp;<span class="ident" id="1578664">src</span>&nbsp;<span class="ident" id="1578668">unsafe</span><span class="op" id="1578674">.</span><span class="ident" id="1578675">Pointer</span><span class="op" id="1578682">)</span>&nbsp;<span class="op" id="1578684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1578687">memmove</span><span class="op" id="1578694">(</span><span class="ident" id="1578695">dst</span><span class="op" id="1578698">,</span>&nbsp;<span class="ident" id="1578700">src</span><span class="op" id="1578703">,</span>&nbsp;<span class="ident" id="1578705">typ</span><span class="op" id="1578708">.</span><span class="ident" id="1578709">size</span><span class="op" id="1578713">)</span><br>
<span class="lineno"></span><span class="op" id="1578715">}</span>
</div>
</body>
</html>
