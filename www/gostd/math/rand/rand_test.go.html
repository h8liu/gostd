<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7359814">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7359869">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7359923">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7359974">package</span>&nbsp;<span class="ident" id="7359982">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7359988">import</span>&nbsp;<span class="op" id="7359995">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7359998">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360008">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360015">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360023">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7360033">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360036">const</span>&nbsp;<span class="op" id="7360042">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360045">numTestSamples</span>&nbsp;<span class="op" id="7360060">=</span>&nbsp;<span class="num" id="7360062">10000</span><br>
<span class="lineno"></span><span class="op" id="7360068">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360071">type</span>&nbsp;<span class="ident" id="7360076">statsResults</span>&nbsp;<span class="keyword" id="7360089">struct</span>&nbsp;<span class="op" id="7360096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360099">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7360111">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360120">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7360132">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360141">closeEnough</span>&nbsp;<span class="builtintype" id="7360153">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360162">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7360174">float64</span><br>
<span class="lineno"></span><span class="op" id="7360182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7360185">func</span>&nbsp;<span class="ident" id="7360190">max</span><span class="op" id="7360193">(</span><span class="ident" id="7360194">a</span><span class="op" id="7360195">,</span>&nbsp;<span class="ident" id="7360197">b</span>&nbsp;<span class="builtintype" id="7360199">float64</span><span class="op" id="7360206">)</span>&nbsp;<span class="builtintype" id="7360208">float64</span>&nbsp;<span class="op" id="7360216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360219">if</span>&nbsp;<span class="ident" id="7360222">a</span>&nbsp;<span class="op" id="7360224">&gt;</span>&nbsp;<span class="ident" id="7360226">b</span>&nbsp;<span class="op" id="7360228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360232">return</span>&nbsp;<span class="ident" id="7360239">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360242">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360245">return</span>&nbsp;<span class="ident" id="7360252">b</span><br>
<span class="lineno">30</span><span class="op" id="7360254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360257">func</span>&nbsp;<span class="ident" id="7360262">nearEqual</span><span class="op" id="7360271">(</span><span class="ident" id="7360272">a</span><span class="op" id="7360273">,</span>&nbsp;<span class="ident" id="7360275">b</span><span class="op" id="7360276">,</span>&nbsp;<span class="ident" id="7360278">closeEnough</span><span class="op" id="7360289">,</span>&nbsp;<span class="ident" id="7360291">maxError</span>&nbsp;<span class="builtintype" id="7360300">float64</span><span class="op" id="7360307">)</span>&nbsp;<span class="builtintype" id="7360309">bool</span>&nbsp;<span class="op" id="7360314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360317">absDiff</span>&nbsp;<span class="op" id="7360325">:=</span>&nbsp;<span class="ident" id="7360328">math</span><span class="op" id="7360332">.</span><span class="ident" id="7360333">Abs</span><span class="op" id="7360336">(</span><span class="ident" id="7360337">a</span>&nbsp;<span class="op" id="7360339">-</span>&nbsp;<span class="ident" id="7360341">b</span><span class="op" id="7360342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360345">if</span>&nbsp;<span class="ident" id="7360348">absDiff</span>&nbsp;<span class="op" id="7360356">&lt;</span>&nbsp;<span class="ident" id="7360358">closeEnough</span>&nbsp;<span class="op" id="7360370">{</span>&nbsp;<span class="comment" id="7360372">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360442">return</span>&nbsp;<span class="builtintype" id="7360449">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360458">return</span>&nbsp;<span class="ident" id="7360465">absDiff</span><span class="op" id="7360472">/</span><span class="ident" id="7360473">max</span><span class="op" id="7360476">(</span><span class="ident" id="7360477">math</span><span class="op" id="7360481">.</span><span class="ident" id="7360482">Abs</span><span class="op" id="7360485">(</span><span class="ident" id="7360486">a</span><span class="op" id="7360487">)</span><span class="op" id="7360488">,</span>&nbsp;<span class="ident" id="7360490">math</span><span class="op" id="7360494">.</span><span class="ident" id="7360495">Abs</span><span class="op" id="7360498">(</span><span class="ident" id="7360499">b</span><span class="op" id="7360500">)</span><span class="op" id="7360501">)</span>&nbsp;<span class="op" id="7360503">&lt;</span>&nbsp;<span class="ident" id="7360505">maxError</span><br>
<span class="lineno"></span><span class="op" id="7360514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7360517">var</span>&nbsp;<span class="ident" id="7360521">testSeeds</span>&nbsp;<span class="op" id="7360531">=</span>&nbsp;<span class="op" id="7360533">[</span><span class="op" id="7360534">]</span><span class="ident" id="7360535">int64</span><span class="op" id="7360540">{</span><span class="num" id="7360541">1</span><span class="op" id="7360542">,</span>&nbsp;<span class="num" id="7360544">1754801282</span><span class="op" id="7360554">,</span>&nbsp;<span class="num" id="7360556">1698661970</span><span class="op" id="7360566">,</span>&nbsp;<span class="num" id="7360568">1550503961</span><span class="op" id="7360578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7360581">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7360655">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7360688">func</span>&nbsp;<span class="op" id="7360693">(</span><span class="ident" id="7360694">this</span>&nbsp;<span class="op" id="7360699">*</span><span class="ident" id="7360700">statsResults</span><span class="op" id="7360712">)</span>&nbsp;<span class="ident" id="7360714">checkSimilarDistribution</span><span class="op" id="7360738">(</span><span class="ident" id="7360739">expected</span>&nbsp;<span class="op" id="7360748">*</span><span class="ident" id="7360749">statsResults</span><span class="op" id="7360761">)</span>&nbsp;<span class="builtintype" id="7360763">error</span>&nbsp;<span class="op" id="7360769">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360772">if</span>&nbsp;<span class="op" id="7360775">!</span><span class="ident" id="7360776">nearEqual</span><span class="op" id="7360785">(</span><span class="ident" id="7360786">this</span><span class="op" id="7360790">.</span><span class="ident" id="7360791">mean</span><span class="op" id="7360795">,</span>&nbsp;<span class="ident" id="7360797">expected</span><span class="op" id="7360805">.</span><span class="ident" id="7360806">mean</span><span class="op" id="7360810">,</span>&nbsp;<span class="ident" id="7360812">expected</span><span class="op" id="7360820">.</span><span class="ident" id="7360821">closeEnough</span><span class="op" id="7360832">,</span>&nbsp;<span class="ident" id="7360834">expected</span><span class="op" id="7360842">.</span><span class="ident" id="7360843">maxError</span><span class="op" id="7360851">)</span>&nbsp;<span class="op" id="7360853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360857">s</span>&nbsp;<span class="op" id="7360859">:=</span>&nbsp;<span class="ident" id="7360862">fmt</span><span class="op" id="7360865">.</span><span class="ident" id="7360866">Sprintf</span><span class="op" id="7360873">(</span><span class="string" id="7360874">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7360912">,</span>&nbsp;<span class="ident" id="7360914">this</span><span class="op" id="7360918">.</span><span class="ident" id="7360919">mean</span><span class="op" id="7360923">,</span>&nbsp;<span class="ident" id="7360925">expected</span><span class="op" id="7360933">.</span><span class="ident" id="7360934">mean</span><span class="op" id="7360938">,</span>&nbsp;<span class="ident" id="7360940">expected</span><span class="op" id="7360948">.</span><span class="ident" id="7360949">closeEnough</span><span class="op" id="7360960">,</span>&nbsp;<span class="ident" id="7360962">expected</span><span class="op" id="7360970">.</span><span class="ident" id="7360971">maxError</span><span class="op" id="7360979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7360983">fmt</span><span class="op" id="7360986">.</span><span class="ident" id="7360987">Println</span><span class="op" id="7360994">(</span><span class="ident" id="7360995">s</span><span class="op" id="7360996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361000">return</span>&nbsp;<span class="ident" id="7361007">errors</span><span class="op" id="7361013">.</span><span class="ident" id="7361014">New</span><span class="op" id="7361017">(</span><span class="ident" id="7361018">s</span><span class="op" id="7361019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361022">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361025">if</span>&nbsp;<span class="op" id="7361028">!</span><span class="ident" id="7361029">nearEqual</span><span class="op" id="7361038">(</span><span class="ident" id="7361039">this</span><span class="op" id="7361043">.</span><span class="ident" id="7361044">stddev</span><span class="op" id="7361050">,</span>&nbsp;<span class="ident" id="7361052">expected</span><span class="op" id="7361060">.</span><span class="ident" id="7361061">stddev</span><span class="op" id="7361067">,</span>&nbsp;<span class="num" id="7361069">0</span><span class="op" id="7361070">,</span>&nbsp;<span class="ident" id="7361072">expected</span><span class="op" id="7361080">.</span><span class="ident" id="7361081">maxError</span><span class="op" id="7361089">)</span>&nbsp;<span class="op" id="7361091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361095">s</span>&nbsp;<span class="op" id="7361097">:=</span>&nbsp;<span class="ident" id="7361100">fmt</span><span class="op" id="7361103">.</span><span class="ident" id="7361104">Sprintf</span><span class="op" id="7361111">(</span><span class="string" id="7361112">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7361152">,</span>&nbsp;<span class="ident" id="7361154">this</span><span class="op" id="7361158">.</span><span class="ident" id="7361159">stddev</span><span class="op" id="7361165">,</span>&nbsp;<span class="ident" id="7361167">expected</span><span class="op" id="7361175">.</span><span class="ident" id="7361176">stddev</span><span class="op" id="7361182">,</span>&nbsp;<span class="ident" id="7361184">expected</span><span class="op" id="7361192">.</span><span class="ident" id="7361193">closeEnough</span><span class="op" id="7361204">,</span>&nbsp;<span class="ident" id="7361206">expected</span><span class="op" id="7361214">.</span><span class="ident" id="7361215">maxError</span><span class="op" id="7361223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361227">fmt</span><span class="op" id="7361230">.</span><span class="ident" id="7361231">Println</span><span class="op" id="7361238">(</span><span class="ident" id="7361239">s</span><span class="op" id="7361240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361244">return</span>&nbsp;<span class="ident" id="7361251">errors</span><span class="op" id="7361257">.</span><span class="ident" id="7361258">New</span><span class="op" id="7361261">(</span><span class="ident" id="7361262">s</span><span class="op" id="7361263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361266">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361269">return</span>&nbsp;<span class="ident" id="7361276">nil</span><br>
<span class="lineno"></span><span class="op" id="7361280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361283">func</span>&nbsp;<span class="ident" id="7361288">getStatsResults</span><span class="op" id="7361303">(</span><span class="ident" id="7361304">samples</span>&nbsp;<span class="op" id="7361312">[</span><span class="op" id="7361313">]</span><span class="builtintype" id="7361314">float64</span><span class="op" id="7361321">)</span>&nbsp;<span class="op" id="7361323">*</span><span class="ident" id="7361324">statsResults</span>&nbsp;<span class="op" id="7361337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361340">res</span>&nbsp;<span class="op" id="7361344">:=</span>&nbsp;<span class="builtinfunc" id="7361347">new</span><span class="op" id="7361350">(</span><span class="ident" id="7361351">statsResults</span><span class="op" id="7361363">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361366">var</span>&nbsp;<span class="ident" id="7361370">sum</span><span class="op" id="7361373">,</span>&nbsp;<span class="ident" id="7361375">squaresum</span>&nbsp;<span class="builtintype" id="7361385">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361394">for</span>&nbsp;<span class="ident" id="7361398">_</span><span class="op" id="7361399">,</span>&nbsp;<span class="ident" id="7361401">s</span>&nbsp;<span class="op" id="7361403">:=</span>&nbsp;<span class="keyword" id="7361406">range</span>&nbsp;<span class="ident" id="7361412">samples</span>&nbsp;<span class="op" id="7361420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361424">sum</span>&nbsp;<span class="op" id="7361428">+=</span>&nbsp;<span class="ident" id="7361431">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361435">squaresum</span>&nbsp;<span class="op" id="7361445">+=</span>&nbsp;<span class="ident" id="7361448">s</span>&nbsp;<span class="op" id="7361450">*</span>&nbsp;<span class="ident" id="7361452">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361455">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361458">res</span><span class="op" id="7361461">.</span><span class="ident" id="7361462">mean</span>&nbsp;<span class="op" id="7361467">=</span>&nbsp;<span class="ident" id="7361469">sum</span>&nbsp;<span class="op" id="7361473">/</span>&nbsp;<span class="builtintype" id="7361475">float64</span><span class="op" id="7361482">(</span><span class="builtinfunc" id="7361483">len</span><span class="op" id="7361486">(</span><span class="ident" id="7361487">samples</span><span class="op" id="7361494">)</span><span class="op" id="7361495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361498">res</span><span class="op" id="7361501">.</span><span class="ident" id="7361502">stddev</span>&nbsp;<span class="op" id="7361509">=</span>&nbsp;<span class="ident" id="7361511">math</span><span class="op" id="7361515">.</span><span class="ident" id="7361516">Sqrt</span><span class="op" id="7361520">(</span><span class="ident" id="7361521">squaresum</span><span class="op" id="7361530">/</span><span class="builtintype" id="7361531">float64</span><span class="op" id="7361538">(</span><span class="builtinfunc" id="7361539">len</span><span class="op" id="7361542">(</span><span class="ident" id="7361543">samples</span><span class="op" id="7361550">)</span><span class="op" id="7361551">)</span>&nbsp;<span class="op" id="7361553">-</span>&nbsp;<span class="ident" id="7361555">res</span><span class="op" id="7361558">.</span><span class="ident" id="7361559">mean</span><span class="op" id="7361563">*</span><span class="ident" id="7361564">res</span><span class="op" id="7361567">.</span><span class="ident" id="7361568">mean</span><span class="op" id="7361572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361575">return</span>&nbsp;<span class="ident" id="7361582">res</span><br>
<span class="lineno"></span><span class="op" id="7361586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7361589">func</span>&nbsp;<span class="ident" id="7361594">checkSampleDistribution</span><span class="op" id="7361617">(</span><span class="ident" id="7361618">t</span>&nbsp;<span class="op" id="7361620">*</span><span class="ident" id="7361621">testing</span><span class="op" id="7361628">.</span><span class="ident" id="7361629">T</span><span class="op" id="7361630">,</span>&nbsp;<span class="ident" id="7361632">samples</span>&nbsp;<span class="op" id="7361640">[</span><span class="op" id="7361641">]</span><span class="builtintype" id="7361642">float64</span><span class="op" id="7361649">,</span>&nbsp;<span class="ident" id="7361651">expected</span>&nbsp;<span class="op" id="7361660">*</span><span class="ident" id="7361661">statsResults</span><span class="op" id="7361673">)</span>&nbsp;<span class="op" id="7361675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361678">actual</span>&nbsp;<span class="op" id="7361685">:=</span>&nbsp;<span class="ident" id="7361688">getStatsResults</span><span class="op" id="7361703">(</span><span class="ident" id="7361704">samples</span><span class="op" id="7361711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361714">err</span>&nbsp;<span class="op" id="7361718">:=</span>&nbsp;<span class="ident" id="7361721">actual</span><span class="op" id="7361727">.</span><span class="ident" id="7361728">checkSimilarDistribution</span><span class="op" id="7361752">(</span><span class="ident" id="7361753">expected</span><span class="op" id="7361761">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361764">if</span>&nbsp;<span class="ident" id="7361767">err</span>&nbsp;<span class="op" id="7361771">!=</span>&nbsp;<span class="ident" id="7361774">nil</span>&nbsp;<span class="op" id="7361778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361782">t</span><span class="op" id="7361783">.</span><span class="ident" id="7361784">Errorf</span><span class="op" id="7361790">(</span><span class="ident" id="7361791">err</span><span class="op" id="7361794">.</span><span class="ident" id="7361795">Error</span><span class="op" id="7361800">(</span><span class="op" id="7361801">)</span><span class="op" id="7361802">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361805">}</span><br>
<span class="lineno"></span><span class="op" id="7361807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7361810">func</span>&nbsp;<span class="ident" id="7361815">checkSampleSliceDistributions</span><span class="op" id="7361844">(</span><span class="ident" id="7361845">t</span>&nbsp;<span class="op" id="7361847">*</span><span class="ident" id="7361848">testing</span><span class="op" id="7361855">.</span><span class="ident" id="7361856">T</span><span class="op" id="7361857">,</span>&nbsp;<span class="ident" id="7361859">samples</span>&nbsp;<span class="op" id="7361867">[</span><span class="op" id="7361868">]</span><span class="builtintype" id="7361869">float64</span><span class="op" id="7361876">,</span>&nbsp;<span class="ident" id="7361878">nslices</span>&nbsp;<span class="builtintype" id="7361886">int</span><span class="op" id="7361889">,</span>&nbsp;<span class="ident" id="7361891">expected</span>&nbsp;<span class="op" id="7361900">*</span><span class="ident" id="7361901">statsResults</span><span class="op" id="7361913">)</span>&nbsp;<span class="op" id="7361915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361918">chunk</span>&nbsp;<span class="op" id="7361924">:=</span>&nbsp;<span class="builtinfunc" id="7361927">len</span><span class="op" id="7361930">(</span><span class="ident" id="7361931">samples</span><span class="op" id="7361938">)</span>&nbsp;<span class="op" id="7361940">/</span>&nbsp;<span class="ident" id="7361942">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361951">for</span>&nbsp;<span class="ident" id="7361955">i</span>&nbsp;<span class="op" id="7361957">:=</span>&nbsp;<span class="num" id="7361960">0</span><span class="op" id="7361961">;</span>&nbsp;<span class="ident" id="7361963">i</span>&nbsp;<span class="op" id="7361965">&lt;</span>&nbsp;<span class="ident" id="7361967">nslices</span><span class="op" id="7361974">;</span>&nbsp;<span class="ident" id="7361976">i</span><span class="op" id="7361977">++</span>&nbsp;<span class="op" id="7361980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361984">low</span>&nbsp;<span class="op" id="7361988">:=</span>&nbsp;<span class="ident" id="7361991">i</span>&nbsp;<span class="op" id="7361993">*</span>&nbsp;<span class="ident" id="7361995">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362003">var</span>&nbsp;<span class="ident" id="7362007">high</span>&nbsp;<span class="builtintype" id="7362012">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362018">if</span>&nbsp;<span class="ident" id="7362021">i</span>&nbsp;<span class="op" id="7362023">==</span>&nbsp;<span class="ident" id="7362026">nslices</span><span class="op" id="7362033">-</span><span class="num" id="7362034">1</span>&nbsp;<span class="op" id="7362036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362041">high</span>&nbsp;<span class="op" id="7362046">=</span>&nbsp;<span class="builtinfunc" id="7362048">len</span><span class="op" id="7362051">(</span><span class="ident" id="7362052">samples</span><span class="op" id="7362059">)</span>&nbsp;<span class="op" id="7362061">-</span>&nbsp;<span class="num" id="7362063">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362067">}</span>&nbsp;<span class="keyword" id="7362069">else</span>&nbsp;<span class="op" id="7362074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362079">high</span>&nbsp;<span class="op" id="7362084">=</span>&nbsp;<span class="op" id="7362086">(</span><span class="ident" id="7362087">i</span>&nbsp;<span class="op" id="7362089">+</span>&nbsp;<span class="num" id="7362091">1</span><span class="op" id="7362092">)</span>&nbsp;<span class="op" id="7362094">*</span>&nbsp;<span class="ident" id="7362096">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362108">checkSampleDistribution</span><span class="op" id="7362131">(</span><span class="ident" id="7362132">t</span><span class="op" id="7362133">,</span>&nbsp;<span class="ident" id="7362135">samples</span><span class="op" id="7362142">[</span><span class="ident" id="7362143">low</span><span class="op" id="7362146">:</span><span class="ident" id="7362147">high</span><span class="op" id="7362151">]</span><span class="op" id="7362152">,</span>&nbsp;<span class="ident" id="7362154">expected</span><span class="op" id="7362162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362165">}</span><br>
<span class="lineno">90</span><span class="op" id="7362167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7362170">//</span><br>
<span class="lineno"></span><span class="comment" id="7362173">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7362202">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7362206">func</span>&nbsp;<span class="ident" id="7362211">generateNormalSamples</span><span class="op" id="7362232">(</span><span class="ident" id="7362233">nsamples</span>&nbsp;<span class="builtintype" id="7362242">int</span><span class="op" id="7362245">,</span>&nbsp;<span class="ident" id="7362247">mean</span><span class="op" id="7362251">,</span>&nbsp;<span class="ident" id="7362253">stddev</span>&nbsp;<span class="builtintype" id="7362260">float64</span><span class="op" id="7362267">,</span>&nbsp;<span class="ident" id="7362269">seed</span>&nbsp;<span class="ident" id="7362274">int64</span><span class="op" id="7362279">)</span>&nbsp;<span class="op" id="7362281">[</span><span class="op" id="7362282">]</span><span class="builtintype" id="7362283">float64</span>&nbsp;<span class="op" id="7362291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362294">r</span>&nbsp;<span class="op" id="7362296">:=</span>&nbsp;<span class="ident" id="7362299">New</span><span class="op" id="7362302">(</span><span class="ident" id="7362303">NewSource</span><span class="op" id="7362312">(</span><span class="ident" id="7362313">seed</span><span class="op" id="7362317">)</span><span class="op" id="7362318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362321">samples</span>&nbsp;<span class="op" id="7362329">:=</span>&nbsp;<span class="builtinfunc" id="7362332">make</span><span class="op" id="7362336">(</span><span class="op" id="7362337">[</span><span class="op" id="7362338">]</span><span class="builtintype" id="7362339">float64</span><span class="op" id="7362346">,</span>&nbsp;<span class="ident" id="7362348">nsamples</span><span class="op" id="7362356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362359">for</span>&nbsp;<span class="ident" id="7362363">i</span>&nbsp;<span class="op" id="7362365">:=</span>&nbsp;<span class="keyword" id="7362368">range</span>&nbsp;<span class="ident" id="7362374">samples</span>&nbsp;<span class="op" id="7362382">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362386">samples</span><span class="op" id="7362393">[</span><span class="ident" id="7362394">i</span><span class="op" id="7362395">]</span>&nbsp;<span class="op" id="7362397">=</span>&nbsp;<span class="ident" id="7362399">r</span><span class="op" id="7362400">.</span><span class="ident" id="7362401">NormFloat64</span><span class="op" id="7362412">(</span><span class="op" id="7362413">)</span><span class="op" id="7362414">*</span><span class="ident" id="7362415">stddev</span>&nbsp;<span class="op" id="7362422">+</span>&nbsp;<span class="ident" id="7362424">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362433">return</span>&nbsp;<span class="ident" id="7362440">samples</span><br>
<span class="lineno"></span><span class="op" id="7362448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7362451">func</span>&nbsp;<span class="ident" id="7362456">testNormalDistribution</span><span class="op" id="7362478">(</span><span class="ident" id="7362479">t</span>&nbsp;<span class="op" id="7362481">*</span><span class="ident" id="7362482">testing</span><span class="op" id="7362489">.</span><span class="ident" id="7362490">T</span><span class="op" id="7362491">,</span>&nbsp;<span class="ident" id="7362493">nsamples</span>&nbsp;<span class="builtintype" id="7362502">int</span><span class="op" id="7362505">,</span>&nbsp;<span class="ident" id="7362507">mean</span><span class="op" id="7362511">,</span>&nbsp;<span class="ident" id="7362513">stddev</span>&nbsp;<span class="builtintype" id="7362520">float64</span><span class="op" id="7362527">,</span>&nbsp;<span class="ident" id="7362529">seed</span>&nbsp;<span class="ident" id="7362534">int64</span><span class="op" id="7362539">)</span>&nbsp;<span class="op" id="7362541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362544">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362641">samples</span>&nbsp;<span class="op" id="7362649">:=</span>&nbsp;<span class="ident" id="7362652">generateNormalSamples</span><span class="op" id="7362673">(</span><span class="ident" id="7362674">nsamples</span><span class="op" id="7362682">,</span>&nbsp;<span class="ident" id="7362684">mean</span><span class="op" id="7362688">,</span>&nbsp;<span class="ident" id="7362690">stddev</span><span class="op" id="7362696">,</span>&nbsp;<span class="ident" id="7362698">seed</span><span class="op" id="7362702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362705">errorScale</span>&nbsp;<span class="op" id="7362716">:=</span>&nbsp;<span class="ident" id="7362719">max</span><span class="op" id="7362722">(</span><span class="num" id="7362723">1.0</span><span class="op" id="7362726">,</span>&nbsp;<span class="ident" id="7362728">stddev</span><span class="op" id="7362734">)</span>&nbsp;<span class="comment" id="7362736">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362765">expected</span>&nbsp;<span class="op" id="7362774">:=</span>&nbsp;<span class="op" id="7362777">&amp;</span><span class="ident" id="7362778">statsResults</span><span class="op" id="7362790">{</span><span class="ident" id="7362791">mean</span><span class="op" id="7362795">,</span>&nbsp;<span class="ident" id="7362797">stddev</span><span class="op" id="7362803">,</span>&nbsp;<span class="num" id="7362805">0.10</span>&nbsp;<span class="op" id="7362810">*</span>&nbsp;<span class="ident" id="7362812">errorScale</span><span class="op" id="7362822">,</span>&nbsp;<span class="num" id="7362824">0.08</span>&nbsp;<span class="op" id="7362829">*</span>&nbsp;<span class="ident" id="7362831">errorScale</span><span class="op" id="7362841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362845">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362914">checkSampleDistribution</span><span class="op" id="7362937">(</span><span class="ident" id="7362938">t</span><span class="op" id="7362939">,</span>&nbsp;<span class="ident" id="7362941">samples</span><span class="op" id="7362948">,</span>&nbsp;<span class="ident" id="7362950">expected</span><span class="op" id="7362958">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7362962">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363037">checkSampleSliceDistributions</span><span class="op" id="7363066">(</span><span class="ident" id="7363067">t</span><span class="op" id="7363068">,</span>&nbsp;<span class="ident" id="7363070">samples</span><span class="op" id="7363077">,</span>&nbsp;<span class="num" id="7363079">2</span><span class="op" id="7363080">,</span>&nbsp;<span class="ident" id="7363082">expected</span><span class="op" id="7363090">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7363094">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363168">checkSampleSliceDistributions</span><span class="op" id="7363197">(</span><span class="ident" id="7363198">t</span><span class="op" id="7363199">,</span>&nbsp;<span class="ident" id="7363201">samples</span><span class="op" id="7363208">,</span>&nbsp;<span class="num" id="7363210">7</span><span class="op" id="7363211">,</span>&nbsp;<span class="ident" id="7363213">expected</span><span class="op" id="7363221">)</span><br>
<span class="lineno">120</span><span class="op" id="7363223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7363226">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363243">func</span>&nbsp;<span class="ident" id="7363248">TestStandardNormalValues</span><span class="op" id="7363272">(</span><span class="ident" id="7363273">t</span>&nbsp;<span class="op" id="7363275">*</span><span class="ident" id="7363276">testing</span><span class="op" id="7363283">.</span><span class="ident" id="7363284">T</span><span class="op" id="7363285">)</span>&nbsp;<span class="op" id="7363287">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363290">for</span>&nbsp;<span class="ident" id="7363294">_</span><span class="op" id="7363295">,</span>&nbsp;<span class="ident" id="7363297">seed</span>&nbsp;<span class="op" id="7363302">:=</span>&nbsp;<span class="keyword" id="7363305">range</span>&nbsp;<span class="ident" id="7363311">testSeeds</span>&nbsp;<span class="op" id="7363321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363325">testNormalDistribution</span><span class="op" id="7363347">(</span><span class="ident" id="7363348">t</span><span class="op" id="7363349">,</span>&nbsp;<span class="ident" id="7363351">numTestSamples</span><span class="op" id="7363365">,</span>&nbsp;<span class="num" id="7363367">0</span><span class="op" id="7363368">,</span>&nbsp;<span class="num" id="7363370">1</span><span class="op" id="7363371">,</span>&nbsp;<span class="ident" id="7363373">seed</span><span class="op" id="7363377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363380">}</span><br>
<span class="lineno"></span><span class="op" id="7363382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7363385">func</span>&nbsp;<span class="ident" id="7363390">TestNonStandardNormalValues</span><span class="op" id="7363417">(</span><span class="ident" id="7363418">t</span>&nbsp;<span class="op" id="7363420">*</span><span class="ident" id="7363421">testing</span><span class="op" id="7363428">.</span><span class="ident" id="7363429">T</span><span class="op" id="7363430">)</span>&nbsp;<span class="op" id="7363432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363435">sdmax</span>&nbsp;<span class="op" id="7363441">:=</span>&nbsp;<span class="num" id="7363444">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363452">mmax</span>&nbsp;<span class="op" id="7363457">:=</span>&nbsp;<span class="num" id="7363460">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363468">if</span>&nbsp;<span class="ident" id="7363471">testing</span><span class="op" id="7363478">.</span><span class="ident" id="7363479">Short</span><span class="op" id="7363484">(</span><span class="op" id="7363485">)</span>&nbsp;<span class="op" id="7363487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363491">sdmax</span>&nbsp;<span class="op" id="7363497">=</span>&nbsp;<span class="num" id="7363499">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363503">mmax</span>&nbsp;<span class="op" id="7363508">=</span>&nbsp;<span class="num" id="7363510">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363516">for</span>&nbsp;<span class="ident" id="7363520">sd</span>&nbsp;<span class="op" id="7363523">:=</span>&nbsp;<span class="num" id="7363526">0.5</span><span class="op" id="7363529">;</span>&nbsp;<span class="ident" id="7363531">sd</span>&nbsp;<span class="op" id="7363534">&lt;</span>&nbsp;<span class="ident" id="7363536">sdmax</span><span class="op" id="7363541">;</span>&nbsp;<span class="ident" id="7363543">sd</span>&nbsp;<span class="op" id="7363546">*=</span>&nbsp;<span class="num" id="7363549">2</span>&nbsp;<span class="op" id="7363551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363555">for</span>&nbsp;<span class="ident" id="7363559">m</span>&nbsp;<span class="op" id="7363561">:=</span>&nbsp;<span class="num" id="7363564">0.5</span><span class="op" id="7363567">;</span>&nbsp;<span class="ident" id="7363569">m</span>&nbsp;<span class="op" id="7363571">&lt;</span>&nbsp;<span class="ident" id="7363573">mmax</span><span class="op" id="7363577">;</span>&nbsp;<span class="ident" id="7363579">m</span>&nbsp;<span class="op" id="7363581">*=</span>&nbsp;<span class="num" id="7363584">2</span>&nbsp;<span class="op" id="7363586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363591">for</span>&nbsp;<span class="ident" id="7363595">_</span><span class="op" id="7363596">,</span>&nbsp;<span class="ident" id="7363598">seed</span>&nbsp;<span class="op" id="7363603">:=</span>&nbsp;<span class="keyword" id="7363606">range</span>&nbsp;<span class="ident" id="7363612">testSeeds</span>&nbsp;<span class="op" id="7363622">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363628">testNormalDistribution</span><span class="op" id="7363650">(</span><span class="ident" id="7363651">t</span><span class="op" id="7363652">,</span>&nbsp;<span class="ident" id="7363654">numTestSamples</span><span class="op" id="7363668">,</span>&nbsp;<span class="ident" id="7363670">m</span><span class="op" id="7363671">,</span>&nbsp;<span class="ident" id="7363673">sd</span><span class="op" id="7363675">,</span>&nbsp;<span class="ident" id="7363677">seed</span><span class="op" id="7363681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363687">if</span>&nbsp;<span class="ident" id="7363690">testing</span><span class="op" id="7363697">.</span><span class="ident" id="7363698">Short</span><span class="op" id="7363703">(</span><span class="op" id="7363704">)</span>&nbsp;<span class="op" id="7363706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363713">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363728">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363735">}</span><br>
<span class="lineno"></span><span class="op" id="7363737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7363740">//</span><br>
<span class="lineno">150</span><span class="comment" id="7363743">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7363777">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7363781">func</span>&nbsp;<span class="ident" id="7363786">generateExponentialSamples</span><span class="op" id="7363812">(</span><span class="ident" id="7363813">nsamples</span>&nbsp;<span class="builtintype" id="7363822">int</span><span class="op" id="7363825">,</span>&nbsp;<span class="ident" id="7363827">rate</span>&nbsp;<span class="builtintype" id="7363832">float64</span><span class="op" id="7363839">,</span>&nbsp;<span class="ident" id="7363841">seed</span>&nbsp;<span class="ident" id="7363846">int64</span><span class="op" id="7363851">)</span>&nbsp;<span class="op" id="7363853">[</span><span class="op" id="7363854">]</span><span class="builtintype" id="7363855">float64</span>&nbsp;<span class="op" id="7363863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363866">r</span>&nbsp;<span class="op" id="7363868">:=</span>&nbsp;<span class="ident" id="7363871">New</span><span class="op" id="7363874">(</span><span class="ident" id="7363875">NewSource</span><span class="op" id="7363884">(</span><span class="ident" id="7363885">seed</span><span class="op" id="7363889">)</span><span class="op" id="7363890">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363893">samples</span>&nbsp;<span class="op" id="7363901">:=</span>&nbsp;<span class="builtinfunc" id="7363904">make</span><span class="op" id="7363908">(</span><span class="op" id="7363909">[</span><span class="op" id="7363910">]</span><span class="builtintype" id="7363911">float64</span><span class="op" id="7363918">,</span>&nbsp;<span class="ident" id="7363920">nsamples</span><span class="op" id="7363928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363931">for</span>&nbsp;<span class="ident" id="7363935">i</span>&nbsp;<span class="op" id="7363937">:=</span>&nbsp;<span class="keyword" id="7363940">range</span>&nbsp;<span class="ident" id="7363946">samples</span>&nbsp;<span class="op" id="7363954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7363958">samples</span><span class="op" id="7363965">[</span><span class="ident" id="7363966">i</span><span class="op" id="7363967">]</span>&nbsp;<span class="op" id="7363969">=</span>&nbsp;<span class="ident" id="7363971">r</span><span class="op" id="7363972">.</span><span class="ident" id="7363973">ExpFloat64</span><span class="op" id="7363983">(</span><span class="op" id="7363984">)</span>&nbsp;<span class="op" id="7363986">/</span>&nbsp;<span class="ident" id="7363988">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7363994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7363997">return</span>&nbsp;<span class="ident" id="7364004">samples</span><br>
<span class="lineno">160</span><span class="op" id="7364012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7364015">func</span>&nbsp;<span class="ident" id="7364020">testExponentialDistribution</span><span class="op" id="7364047">(</span><span class="ident" id="7364048">t</span>&nbsp;<span class="op" id="7364050">*</span><span class="ident" id="7364051">testing</span><span class="op" id="7364058">.</span><span class="ident" id="7364059">T</span><span class="op" id="7364060">,</span>&nbsp;<span class="ident" id="7364062">nsamples</span>&nbsp;<span class="builtintype" id="7364071">int</span><span class="op" id="7364074">,</span>&nbsp;<span class="ident" id="7364076">rate</span>&nbsp;<span class="builtintype" id="7364081">float64</span><span class="op" id="7364088">,</span>&nbsp;<span class="ident" id="7364090">seed</span>&nbsp;<span class="ident" id="7364095">int64</span><span class="op" id="7364100">)</span>&nbsp;<span class="op" id="7364102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364105">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364184">mean</span>&nbsp;<span class="op" id="7364189">:=</span>&nbsp;<span class="num" id="7364192">1</span>&nbsp;<span class="op" id="7364194">/</span>&nbsp;<span class="ident" id="7364196">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364202">stddev</span>&nbsp;<span class="op" id="7364209">:=</span>&nbsp;<span class="ident" id="7364212">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364219">samples</span>&nbsp;<span class="op" id="7364227">:=</span>&nbsp;<span class="ident" id="7364230">generateExponentialSamples</span><span class="op" id="7364256">(</span><span class="ident" id="7364257">nsamples</span><span class="op" id="7364265">,</span>&nbsp;<span class="ident" id="7364267">rate</span><span class="op" id="7364271">,</span>&nbsp;<span class="ident" id="7364273">seed</span><span class="op" id="7364277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364280">errorScale</span>&nbsp;<span class="op" id="7364291">:=</span>&nbsp;<span class="ident" id="7364294">max</span><span class="op" id="7364297">(</span><span class="num" id="7364298">1.0</span><span class="op" id="7364301">,</span>&nbsp;<span class="num" id="7364303">1</span><span class="op" id="7364304">/</span><span class="ident" id="7364305">rate</span><span class="op" id="7364309">)</span>&nbsp;<span class="comment" id="7364311">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364357">expected</span>&nbsp;<span class="op" id="7364366">:=</span>&nbsp;<span class="op" id="7364369">&amp;</span><span class="ident" id="7364370">statsResults</span><span class="op" id="7364382">{</span><span class="ident" id="7364383">mean</span><span class="op" id="7364387">,</span>&nbsp;<span class="ident" id="7364389">stddev</span><span class="op" id="7364395">,</span>&nbsp;<span class="num" id="7364397">0.10</span>&nbsp;<span class="op" id="7364402">*</span>&nbsp;<span class="ident" id="7364404">errorScale</span><span class="op" id="7364414">,</span>&nbsp;<span class="num" id="7364416">0.20</span>&nbsp;<span class="op" id="7364421">*</span>&nbsp;<span class="ident" id="7364423">errorScale</span><span class="op" id="7364433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364437">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364506">checkSampleDistribution</span><span class="op" id="7364529">(</span><span class="ident" id="7364530">t</span><span class="op" id="7364531">,</span>&nbsp;<span class="ident" id="7364533">samples</span><span class="op" id="7364540">,</span>&nbsp;<span class="ident" id="7364542">expected</span><span class="op" id="7364550">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364554">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364629">checkSampleSliceDistributions</span><span class="op" id="7364658">(</span><span class="ident" id="7364659">t</span><span class="op" id="7364660">,</span>&nbsp;<span class="ident" id="7364662">samples</span><span class="op" id="7364669">,</span>&nbsp;<span class="num" id="7364671">2</span><span class="op" id="7364672">,</span>&nbsp;<span class="ident" id="7364674">expected</span><span class="op" id="7364682">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7364686">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364760">checkSampleSliceDistributions</span><span class="op" id="7364789">(</span><span class="ident" id="7364790">t</span><span class="op" id="7364791">,</span>&nbsp;<span class="ident" id="7364793">samples</span><span class="op" id="7364800">,</span>&nbsp;<span class="num" id="7364802">7</span><span class="op" id="7364803">,</span>&nbsp;<span class="ident" id="7364805">expected</span><span class="op" id="7364813">)</span><br>
<span class="lineno">180</span><span class="op" id="7364815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7364818">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7364835">func</span>&nbsp;<span class="ident" id="7364840">TestStandardExponentialValues</span><span class="op" id="7364869">(</span><span class="ident" id="7364870">t</span>&nbsp;<span class="op" id="7364872">*</span><span class="ident" id="7364873">testing</span><span class="op" id="7364880">.</span><span class="ident" id="7364881">T</span><span class="op" id="7364882">)</span>&nbsp;<span class="op" id="7364884">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7364887">for</span>&nbsp;<span class="ident" id="7364891">_</span><span class="op" id="7364892">,</span>&nbsp;<span class="ident" id="7364894">seed</span>&nbsp;<span class="op" id="7364899">:=</span>&nbsp;<span class="keyword" id="7364902">range</span>&nbsp;<span class="ident" id="7364908">testSeeds</span>&nbsp;<span class="op" id="7364918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7364922">testExponentialDistribution</span><span class="op" id="7364949">(</span><span class="ident" id="7364950">t</span><span class="op" id="7364951">,</span>&nbsp;<span class="ident" id="7364953">numTestSamples</span><span class="op" id="7364967">,</span>&nbsp;<span class="num" id="7364969">1</span><span class="op" id="7364970">,</span>&nbsp;<span class="ident" id="7364972">seed</span><span class="op" id="7364976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7364979">}</span><br>
<span class="lineno"></span><span class="op" id="7364981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7364984">func</span>&nbsp;<span class="ident" id="7364989">TestNonStandardExponentialValues</span><span class="op" id="7365021">(</span><span class="ident" id="7365022">t</span>&nbsp;<span class="op" id="7365024">*</span><span class="ident" id="7365025">testing</span><span class="op" id="7365032">.</span><span class="ident" id="7365033">T</span><span class="op" id="7365034">)</span>&nbsp;<span class="op" id="7365036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365039">for</span>&nbsp;<span class="ident" id="7365043">rate</span>&nbsp;<span class="op" id="7365048">:=</span>&nbsp;<span class="num" id="7365051">0.05</span><span class="op" id="7365055">;</span>&nbsp;<span class="ident" id="7365057">rate</span>&nbsp;<span class="op" id="7365062">&lt;</span>&nbsp;<span class="num" id="7365064">10</span><span class="op" id="7365066">;</span>&nbsp;<span class="ident" id="7365068">rate</span>&nbsp;<span class="op" id="7365073">*=</span>&nbsp;<span class="num" id="7365076">2</span>&nbsp;<span class="op" id="7365078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365082">for</span>&nbsp;<span class="ident" id="7365086">_</span><span class="op" id="7365087">,</span>&nbsp;<span class="ident" id="7365089">seed</span>&nbsp;<span class="op" id="7365094">:=</span>&nbsp;<span class="keyword" id="7365097">range</span>&nbsp;<span class="ident" id="7365103">testSeeds</span>&nbsp;<span class="op" id="7365113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365118">testExponentialDistribution</span><span class="op" id="7365145">(</span><span class="ident" id="7365146">t</span><span class="op" id="7365147">,</span>&nbsp;<span class="ident" id="7365149">numTestSamples</span><span class="op" id="7365163">,</span>&nbsp;<span class="ident" id="7365165">rate</span><span class="op" id="7365169">,</span>&nbsp;<span class="ident" id="7365171">seed</span><span class="op" id="7365175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365180">if</span>&nbsp;<span class="ident" id="7365183">testing</span><span class="op" id="7365190">.</span><span class="ident" id="7365191">Short</span><span class="op" id="7365196">(</span><span class="op" id="7365197">)</span>&nbsp;<span class="op" id="7365199">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365205">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365221">}</span><br>
<span class="lineno"></span><span class="op" id="7365223">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7365226">//</span><br>
<span class="lineno"></span><span class="comment" id="7365229">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7365255">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7365259">func</span>&nbsp;<span class="ident" id="7365264">initNorm</span><span class="op" id="7365272">(</span><span class="op" id="7365273">)</span>&nbsp;<span class="op" id="7365275">(</span><span class="ident" id="7365276">testKn</span>&nbsp;<span class="op" id="7365283">[</span><span class="op" id="7365284">]</span><span class="builtintype" id="7365285">uint32</span><span class="op" id="7365291">,</span>&nbsp;<span class="ident" id="7365293">testWn</span><span class="op" id="7365299">,</span>&nbsp;<span class="ident" id="7365301">testFn</span>&nbsp;<span class="op" id="7365308">[</span><span class="op" id="7365309">]</span><span class="builtintype" id="7365310">float32</span><span class="op" id="7365317">)</span>&nbsp;<span class="op" id="7365319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365322">const</span>&nbsp;<span class="ident" id="7365328">m1</span>&nbsp;<span class="op" id="7365331">=</span>&nbsp;<span class="num" id="7365333">1</span>&nbsp;<span class="op" id="7365335">&lt;&lt;</span>&nbsp;<span class="num" id="7365338">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365342">var</span>&nbsp;<span class="op" id="7365346">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365350">dn</span>&nbsp;<span class="builtintype" id="7365353">float64</span>&nbsp;<span class="op" id="7365361">=</span>&nbsp;<span class="ident" id="7365363">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365368">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7365379">=</span>&nbsp;<span class="ident" id="7365381">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365386">vn</span>&nbsp;<span class="builtintype" id="7365389">float64</span>&nbsp;<span class="op" id="7365397">=</span>&nbsp;<span class="num" id="7365399">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365424">testKn</span>&nbsp;<span class="op" id="7365431">=</span>&nbsp;<span class="builtinfunc" id="7365433">make</span><span class="op" id="7365437">(</span><span class="op" id="7365438">[</span><span class="op" id="7365439">]</span><span class="builtintype" id="7365440">uint32</span><span class="op" id="7365446">,</span>&nbsp;<span class="num" id="7365448">128</span><span class="op" id="7365451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365454">testWn</span>&nbsp;<span class="op" id="7365461">=</span>&nbsp;<span class="builtinfunc" id="7365463">make</span><span class="op" id="7365467">(</span><span class="op" id="7365468">[</span><span class="op" id="7365469">]</span><span class="builtintype" id="7365470">float32</span><span class="op" id="7365477">,</span>&nbsp;<span class="num" id="7365479">128</span><span class="op" id="7365482">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365485">testFn</span>&nbsp;<span class="op" id="7365492">=</span>&nbsp;<span class="builtinfunc" id="7365494">make</span><span class="op" id="7365498">(</span><span class="op" id="7365499">[</span><span class="op" id="7365500">]</span><span class="builtintype" id="7365501">float32</span><span class="op" id="7365508">,</span>&nbsp;<span class="num" id="7365510">128</span><span class="op" id="7365513">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365517">q</span>&nbsp;<span class="op" id="7365519">:=</span>&nbsp;<span class="ident" id="7365522">vn</span>&nbsp;<span class="op" id="7365525">/</span>&nbsp;<span class="ident" id="7365527">math</span><span class="op" id="7365531">.</span><span class="ident" id="7365532">Exp</span><span class="op" id="7365535">(</span><span class="op" id="7365536">-</span><span class="num" id="7365537">0.5</span><span class="op" id="7365540">*</span><span class="ident" id="7365541">dn</span><span class="op" id="7365543">*</span><span class="ident" id="7365544">dn</span><span class="op" id="7365546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365549">testKn</span><span class="op" id="7365555">[</span><span class="num" id="7365556">0</span><span class="op" id="7365557">]</span>&nbsp;<span class="op" id="7365559">=</span>&nbsp;<span class="builtintype" id="7365561">uint32</span><span class="op" id="7365567">(</span><span class="op" id="7365568">(</span><span class="ident" id="7365569">dn</span>&nbsp;<span class="op" id="7365572">/</span>&nbsp;<span class="ident" id="7365574">q</span><span class="op" id="7365575">)</span>&nbsp;<span class="op" id="7365577">*</span>&nbsp;<span class="ident" id="7365579">m1</span><span class="op" id="7365581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365584">testKn</span><span class="op" id="7365590">[</span><span class="num" id="7365591">1</span><span class="op" id="7365592">]</span>&nbsp;<span class="op" id="7365594">=</span>&nbsp;<span class="num" id="7365596">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365599">testWn</span><span class="op" id="7365605">[</span><span class="num" id="7365606">0</span><span class="op" id="7365607">]</span>&nbsp;<span class="op" id="7365609">=</span>&nbsp;<span class="builtintype" id="7365611">float32</span><span class="op" id="7365618">(</span><span class="ident" id="7365619">q</span>&nbsp;<span class="op" id="7365621">/</span>&nbsp;<span class="ident" id="7365623">m1</span><span class="op" id="7365625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365628">testWn</span><span class="op" id="7365634">[</span><span class="num" id="7365635">127</span><span class="op" id="7365638">]</span>&nbsp;<span class="op" id="7365640">=</span>&nbsp;<span class="builtintype" id="7365642">float32</span><span class="op" id="7365649">(</span><span class="ident" id="7365650">dn</span>&nbsp;<span class="op" id="7365653">/</span>&nbsp;<span class="ident" id="7365655">m1</span><span class="op" id="7365657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365660">testFn</span><span class="op" id="7365666">[</span><span class="num" id="7365667">0</span><span class="op" id="7365668">]</span>&nbsp;<span class="op" id="7365670">=</span>&nbsp;<span class="num" id="7365672">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365677">testFn</span><span class="op" id="7365683">[</span><span class="num" id="7365684">127</span><span class="op" id="7365687">]</span>&nbsp;<span class="op" id="7365689">=</span>&nbsp;<span class="builtintype" id="7365691">float32</span><span class="op" id="7365698">(</span><span class="ident" id="7365699">math</span><span class="op" id="7365703">.</span><span class="ident" id="7365704">Exp</span><span class="op" id="7365707">(</span><span class="op" id="7365708">-</span><span class="num" id="7365709">0.5</span>&nbsp;<span class="op" id="7365713">*</span>&nbsp;<span class="ident" id="7365715">dn</span>&nbsp;<span class="op" id="7365718">*</span>&nbsp;<span class="ident" id="7365720">dn</span><span class="op" id="7365722">)</span><span class="op" id="7365723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365726">for</span>&nbsp;<span class="ident" id="7365730">i</span>&nbsp;<span class="op" id="7365732">:=</span>&nbsp;<span class="num" id="7365735">126</span><span class="op" id="7365738">;</span>&nbsp;<span class="ident" id="7365740">i</span>&nbsp;<span class="op" id="7365742">&gt;=</span>&nbsp;<span class="num" id="7365745">1</span><span class="op" id="7365746">;</span>&nbsp;<span class="ident" id="7365748">i</span><span class="op" id="7365749">--</span>&nbsp;<span class="op" id="7365752">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365756">dn</span>&nbsp;<span class="op" id="7365759">=</span>&nbsp;<span class="ident" id="7365761">math</span><span class="op" id="7365765">.</span><span class="ident" id="7365766">Sqrt</span><span class="op" id="7365770">(</span><span class="op" id="7365771">-</span><span class="num" id="7365772">2.0</span>&nbsp;<span class="op" id="7365776">*</span>&nbsp;<span class="ident" id="7365778">math</span><span class="op" id="7365782">.</span><span class="ident" id="7365783">Log</span><span class="op" id="7365786">(</span><span class="ident" id="7365787">vn</span><span class="op" id="7365789">/</span><span class="ident" id="7365790">dn</span><span class="op" id="7365792">+</span><span class="ident" id="7365793">math</span><span class="op" id="7365797">.</span><span class="ident" id="7365798">Exp</span><span class="op" id="7365801">(</span><span class="op" id="7365802">-</span><span class="num" id="7365803">0.5</span><span class="op" id="7365806">*</span><span class="ident" id="7365807">dn</span><span class="op" id="7365809">*</span><span class="ident" id="7365810">dn</span><span class="op" id="7365812">)</span><span class="op" id="7365813">)</span><span class="op" id="7365814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365818">testKn</span><span class="op" id="7365824">[</span><span class="ident" id="7365825">i</span><span class="op" id="7365826">+</span><span class="num" id="7365827">1</span><span class="op" id="7365828">]</span>&nbsp;<span class="op" id="7365830">=</span>&nbsp;<span class="builtintype" id="7365832">uint32</span><span class="op" id="7365838">(</span><span class="op" id="7365839">(</span><span class="ident" id="7365840">dn</span>&nbsp;<span class="op" id="7365843">/</span>&nbsp;<span class="ident" id="7365845">tn</span><span class="op" id="7365847">)</span>&nbsp;<span class="op" id="7365849">*</span>&nbsp;<span class="ident" id="7365851">m1</span><span class="op" id="7365853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365857">tn</span>&nbsp;<span class="op" id="7365860">=</span>&nbsp;<span class="ident" id="7365862">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365867">testFn</span><span class="op" id="7365873">[</span><span class="ident" id="7365874">i</span><span class="op" id="7365875">]</span>&nbsp;<span class="op" id="7365877">=</span>&nbsp;<span class="builtintype" id="7365879">float32</span><span class="op" id="7365886">(</span><span class="ident" id="7365887">math</span><span class="op" id="7365891">.</span><span class="ident" id="7365892">Exp</span><span class="op" id="7365895">(</span><span class="op" id="7365896">-</span><span class="num" id="7365897">0.5</span>&nbsp;<span class="op" id="7365901">*</span>&nbsp;<span class="ident" id="7365903">dn</span>&nbsp;<span class="op" id="7365906">*</span>&nbsp;<span class="ident" id="7365908">dn</span><span class="op" id="7365910">)</span><span class="op" id="7365911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7365915">testWn</span><span class="op" id="7365921">[</span><span class="ident" id="7365922">i</span><span class="op" id="7365923">]</span>&nbsp;<span class="op" id="7365925">=</span>&nbsp;<span class="builtintype" id="7365927">float32</span><span class="op" id="7365934">(</span><span class="ident" id="7365935">dn</span>&nbsp;<span class="op" id="7365938">/</span>&nbsp;<span class="ident" id="7365940">m1</span><span class="op" id="7365942">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7365945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7365948">return</span><br>
<span class="lineno"></span><span class="op" id="7365955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7365958">func</span>&nbsp;<span class="ident" id="7365963">initExp</span><span class="op" id="7365970">(</span><span class="op" id="7365971">)</span>&nbsp;<span class="op" id="7365973">(</span><span class="ident" id="7365974">testKe</span>&nbsp;<span class="op" id="7365981">[</span><span class="op" id="7365982">]</span><span class="builtintype" id="7365983">uint32</span><span class="op" id="7365989">,</span>&nbsp;<span class="ident" id="7365991">testWe</span><span class="op" id="7365997">,</span>&nbsp;<span class="ident" id="7365999">testFe</span>&nbsp;<span class="op" id="7366006">[</span><span class="op" id="7366007">]</span><span class="builtintype" id="7366008">float32</span><span class="op" id="7366015">)</span>&nbsp;<span class="op" id="7366017">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366020">const</span>&nbsp;<span class="ident" id="7366026">m2</span>&nbsp;<span class="op" id="7366029">=</span>&nbsp;<span class="num" id="7366031">1</span>&nbsp;<span class="op" id="7366033">&lt;&lt;</span>&nbsp;<span class="num" id="7366036">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366040">var</span>&nbsp;<span class="op" id="7366044">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366048">de</span>&nbsp;<span class="builtintype" id="7366051">float64</span>&nbsp;<span class="op" id="7366059">=</span>&nbsp;<span class="ident" id="7366061">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366066">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7366077">=</span>&nbsp;<span class="ident" id="7366079">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366084">ve</span>&nbsp;<span class="builtintype" id="7366087">float64</span>&nbsp;<span class="op" id="7366095">=</span>&nbsp;<span class="num" id="7366097">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366123">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366127">testKe</span>&nbsp;<span class="op" id="7366134">=</span>&nbsp;<span class="builtinfunc" id="7366136">make</span><span class="op" id="7366140">(</span><span class="op" id="7366141">[</span><span class="op" id="7366142">]</span><span class="builtintype" id="7366143">uint32</span><span class="op" id="7366149">,</span>&nbsp;<span class="num" id="7366151">256</span><span class="op" id="7366154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366157">testWe</span>&nbsp;<span class="op" id="7366164">=</span>&nbsp;<span class="builtinfunc" id="7366166">make</span><span class="op" id="7366170">(</span><span class="op" id="7366171">[</span><span class="op" id="7366172">]</span><span class="builtintype" id="7366173">float32</span><span class="op" id="7366180">,</span>&nbsp;<span class="num" id="7366182">256</span><span class="op" id="7366185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366188">testFe</span>&nbsp;<span class="op" id="7366195">=</span>&nbsp;<span class="builtinfunc" id="7366197">make</span><span class="op" id="7366201">(</span><span class="op" id="7366202">[</span><span class="op" id="7366203">]</span><span class="builtintype" id="7366204">float32</span><span class="op" id="7366211">,</span>&nbsp;<span class="num" id="7366213">256</span><span class="op" id="7366216">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366220">q</span>&nbsp;<span class="op" id="7366222">:=</span>&nbsp;<span class="ident" id="7366225">ve</span>&nbsp;<span class="op" id="7366228">/</span>&nbsp;<span class="ident" id="7366230">math</span><span class="op" id="7366234">.</span><span class="ident" id="7366235">Exp</span><span class="op" id="7366238">(</span><span class="op" id="7366239">-</span><span class="ident" id="7366240">de</span><span class="op" id="7366242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366245">testKe</span><span class="op" id="7366251">[</span><span class="num" id="7366252">0</span><span class="op" id="7366253">]</span>&nbsp;<span class="op" id="7366255">=</span>&nbsp;<span class="builtintype" id="7366257">uint32</span><span class="op" id="7366263">(</span><span class="op" id="7366264">(</span><span class="ident" id="7366265">de</span>&nbsp;<span class="op" id="7366268">/</span>&nbsp;<span class="ident" id="7366270">q</span><span class="op" id="7366271">)</span>&nbsp;<span class="op" id="7366273">*</span>&nbsp;<span class="ident" id="7366275">m2</span><span class="op" id="7366277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366280">testKe</span><span class="op" id="7366286">[</span><span class="num" id="7366287">1</span><span class="op" id="7366288">]</span>&nbsp;<span class="op" id="7366290">=</span>&nbsp;<span class="num" id="7366292">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366295">testWe</span><span class="op" id="7366301">[</span><span class="num" id="7366302">0</span><span class="op" id="7366303">]</span>&nbsp;<span class="op" id="7366305">=</span>&nbsp;<span class="builtintype" id="7366307">float32</span><span class="op" id="7366314">(</span><span class="ident" id="7366315">q</span>&nbsp;<span class="op" id="7366317">/</span>&nbsp;<span class="ident" id="7366319">m2</span><span class="op" id="7366321">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366324">testWe</span><span class="op" id="7366330">[</span><span class="num" id="7366331">255</span><span class="op" id="7366334">]</span>&nbsp;<span class="op" id="7366336">=</span>&nbsp;<span class="builtintype" id="7366338">float32</span><span class="op" id="7366345">(</span><span class="ident" id="7366346">de</span>&nbsp;<span class="op" id="7366349">/</span>&nbsp;<span class="ident" id="7366351">m2</span><span class="op" id="7366353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366356">testFe</span><span class="op" id="7366362">[</span><span class="num" id="7366363">0</span><span class="op" id="7366364">]</span>&nbsp;<span class="op" id="7366366">=</span>&nbsp;<span class="num" id="7366368">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366373">testFe</span><span class="op" id="7366379">[</span><span class="num" id="7366380">255</span><span class="op" id="7366383">]</span>&nbsp;<span class="op" id="7366385">=</span>&nbsp;<span class="builtintype" id="7366387">float32</span><span class="op" id="7366394">(</span><span class="ident" id="7366395">math</span><span class="op" id="7366399">.</span><span class="ident" id="7366400">Exp</span><span class="op" id="7366403">(</span><span class="op" id="7366404">-</span><span class="ident" id="7366405">de</span><span class="op" id="7366407">)</span><span class="op" id="7366408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366411">for</span>&nbsp;<span class="ident" id="7366415">i</span>&nbsp;<span class="op" id="7366417">:=</span>&nbsp;<span class="num" id="7366420">254</span><span class="op" id="7366423">;</span>&nbsp;<span class="ident" id="7366425">i</span>&nbsp;<span class="op" id="7366427">&gt;=</span>&nbsp;<span class="num" id="7366430">1</span><span class="op" id="7366431">;</span>&nbsp;<span class="ident" id="7366433">i</span><span class="op" id="7366434">--</span>&nbsp;<span class="op" id="7366437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366441">de</span>&nbsp;<span class="op" id="7366444">=</span>&nbsp;<span class="op" id="7366446">-</span><span class="ident" id="7366447">math</span><span class="op" id="7366451">.</span><span class="ident" id="7366452">Log</span><span class="op" id="7366455">(</span><span class="ident" id="7366456">ve</span><span class="op" id="7366458">/</span><span class="ident" id="7366459">de</span>&nbsp;<span class="op" id="7366462">+</span>&nbsp;<span class="ident" id="7366464">math</span><span class="op" id="7366468">.</span><span class="ident" id="7366469">Exp</span><span class="op" id="7366472">(</span><span class="op" id="7366473">-</span><span class="ident" id="7366474">de</span><span class="op" id="7366476">)</span><span class="op" id="7366477">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366481">testKe</span><span class="op" id="7366487">[</span><span class="ident" id="7366488">i</span><span class="op" id="7366489">+</span><span class="num" id="7366490">1</span><span class="op" id="7366491">]</span>&nbsp;<span class="op" id="7366493">=</span>&nbsp;<span class="builtintype" id="7366495">uint32</span><span class="op" id="7366501">(</span><span class="op" id="7366502">(</span><span class="ident" id="7366503">de</span>&nbsp;<span class="op" id="7366506">/</span>&nbsp;<span class="ident" id="7366508">te</span><span class="op" id="7366510">)</span>&nbsp;<span class="op" id="7366512">*</span>&nbsp;<span class="ident" id="7366514">m2</span><span class="op" id="7366516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366520">te</span>&nbsp;<span class="op" id="7366523">=</span>&nbsp;<span class="ident" id="7366525">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366530">testFe</span><span class="op" id="7366536">[</span><span class="ident" id="7366537">i</span><span class="op" id="7366538">]</span>&nbsp;<span class="op" id="7366540">=</span>&nbsp;<span class="builtintype" id="7366542">float32</span><span class="op" id="7366549">(</span><span class="ident" id="7366550">math</span><span class="op" id="7366554">.</span><span class="ident" id="7366555">Exp</span><span class="op" id="7366558">(</span><span class="op" id="7366559">-</span><span class="ident" id="7366560">de</span><span class="op" id="7366562">)</span><span class="op" id="7366563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7366567">testWe</span><span class="op" id="7366573">[</span><span class="ident" id="7366574">i</span><span class="op" id="7366575">]</span>&nbsp;<span class="op" id="7366577">=</span>&nbsp;<span class="builtintype" id="7366579">float32</span><span class="op" id="7366586">(</span><span class="ident" id="7366587">de</span>&nbsp;<span class="op" id="7366590">/</span>&nbsp;<span class="ident" id="7366592">m2</span><span class="op" id="7366594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366597">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366600">return</span><br>
<span class="lineno"></span><span class="op" id="7366607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7366610">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7366678">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7366742">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7366760">func</span>&nbsp;<span class="ident" id="7366765">compareUint32Slices</span><span class="op" id="7366784">(</span><span class="ident" id="7366785">s1</span><span class="op" id="7366787">,</span>&nbsp;<span class="ident" id="7366789">s2</span>&nbsp;<span class="op" id="7366792">[</span><span class="op" id="7366793">]</span><span class="builtintype" id="7366794">uint32</span><span class="op" id="7366800">)</span>&nbsp;<span class="builtintype" id="7366802">int</span>&nbsp;<span class="op" id="7366806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366809">if</span>&nbsp;<span class="builtinfunc" id="7366812">len</span><span class="op" id="7366815">(</span><span class="ident" id="7366816">s1</span><span class="op" id="7366818">)</span>&nbsp;<span class="op" id="7366820">!=</span>&nbsp;<span class="builtinfunc" id="7366823">len</span><span class="op" id="7366826">(</span><span class="ident" id="7366827">s2</span><span class="op" id="7366829">)</span>&nbsp;<span class="op" id="7366831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366835">if</span>&nbsp;<span class="builtinfunc" id="7366838">len</span><span class="op" id="7366841">(</span><span class="ident" id="7366842">s1</span><span class="op" id="7366844">)</span>&nbsp;<span class="op" id="7366846">&gt;</span>&nbsp;<span class="builtinfunc" id="7366848">len</span><span class="op" id="7366851">(</span><span class="ident" id="7366852">s2</span><span class="op" id="7366854">)</span>&nbsp;<span class="op" id="7366856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366861">return</span>&nbsp;<span class="builtinfunc" id="7366868">len</span><span class="op" id="7366871">(</span><span class="ident" id="7366872">s2</span><span class="op" id="7366874">)</span>&nbsp;<span class="op" id="7366876">+</span>&nbsp;<span class="num" id="7366878">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366886">return</span>&nbsp;<span class="builtinfunc" id="7366893">len</span><span class="op" id="7366896">(</span><span class="ident" id="7366897">s1</span><span class="op" id="7366899">)</span>&nbsp;<span class="op" id="7366901">+</span>&nbsp;<span class="num" id="7366903">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366909">for</span>&nbsp;<span class="ident" id="7366913">i</span>&nbsp;<span class="op" id="7366915">:=</span>&nbsp;<span class="keyword" id="7366918">range</span>&nbsp;<span class="ident" id="7366924">s1</span>&nbsp;<span class="op" id="7366927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366931">if</span>&nbsp;<span class="ident" id="7366934">s1</span><span class="op" id="7366936">[</span><span class="ident" id="7366937">i</span><span class="op" id="7366938">]</span>&nbsp;<span class="op" id="7366940">!=</span>&nbsp;<span class="ident" id="7366943">s2</span><span class="op" id="7366945">[</span><span class="ident" id="7366946">i</span><span class="op" id="7366947">]</span>&nbsp;<span class="op" id="7366949">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366954">return</span>&nbsp;<span class="ident" id="7366961">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7366968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7366971">return</span>&nbsp;<span class="op" id="7366978">-</span><span class="num" id="7366979">1</span><br>
<span class="lineno"></span><span class="op" id="7366981">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7366984">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7367053">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7367117">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7367135">func</span>&nbsp;<span class="ident" id="7367140">compareFloat32Slices</span><span class="op" id="7367160">(</span><span class="ident" id="7367161">s1</span><span class="op" id="7367163">,</span>&nbsp;<span class="ident" id="7367165">s2</span>&nbsp;<span class="op" id="7367168">[</span><span class="op" id="7367169">]</span><span class="builtintype" id="7367170">float32</span><span class="op" id="7367177">)</span>&nbsp;<span class="builtintype" id="7367179">int</span>&nbsp;<span class="op" id="7367183">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367186">if</span>&nbsp;<span class="builtinfunc" id="7367189">len</span><span class="op" id="7367192">(</span><span class="ident" id="7367193">s1</span><span class="op" id="7367195">)</span>&nbsp;<span class="op" id="7367197">!=</span>&nbsp;<span class="builtinfunc" id="7367200">len</span><span class="op" id="7367203">(</span><span class="ident" id="7367204">s2</span><span class="op" id="7367206">)</span>&nbsp;<span class="op" id="7367208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367212">if</span>&nbsp;<span class="builtinfunc" id="7367215">len</span><span class="op" id="7367218">(</span><span class="ident" id="7367219">s1</span><span class="op" id="7367221">)</span>&nbsp;<span class="op" id="7367223">&gt;</span>&nbsp;<span class="builtinfunc" id="7367225">len</span><span class="op" id="7367228">(</span><span class="ident" id="7367229">s2</span><span class="op" id="7367231">)</span>&nbsp;<span class="op" id="7367233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367238">return</span>&nbsp;<span class="builtinfunc" id="7367245">len</span><span class="op" id="7367248">(</span><span class="ident" id="7367249">s2</span><span class="op" id="7367251">)</span>&nbsp;<span class="op" id="7367253">+</span>&nbsp;<span class="num" id="7367255">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367263">return</span>&nbsp;<span class="builtinfunc" id="7367270">len</span><span class="op" id="7367273">(</span><span class="ident" id="7367274">s1</span><span class="op" id="7367276">)</span>&nbsp;<span class="op" id="7367278">+</span>&nbsp;<span class="num" id="7367280">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367286">for</span>&nbsp;<span class="ident" id="7367290">i</span>&nbsp;<span class="op" id="7367292">:=</span>&nbsp;<span class="keyword" id="7367295">range</span>&nbsp;<span class="ident" id="7367301">s1</span>&nbsp;<span class="op" id="7367304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367308">if</span>&nbsp;<span class="op" id="7367311">!</span><span class="ident" id="7367312">nearEqual</span><span class="op" id="7367321">(</span><span class="builtintype" id="7367322">float64</span><span class="op" id="7367329">(</span><span class="ident" id="7367330">s1</span><span class="op" id="7367332">[</span><span class="ident" id="7367333">i</span><span class="op" id="7367334">]</span><span class="op" id="7367335">)</span><span class="op" id="7367336">,</span>&nbsp;<span class="builtintype" id="7367338">float64</span><span class="op" id="7367345">(</span><span class="ident" id="7367346">s2</span><span class="op" id="7367348">[</span><span class="ident" id="7367349">i</span><span class="op" id="7367350">]</span><span class="op" id="7367351">)</span><span class="op" id="7367352">,</span>&nbsp;<span class="num" id="7367354">0</span><span class="op" id="7367355">,</span>&nbsp;<span class="num" id="7367357">1e-7</span><span class="op" id="7367361">)</span>&nbsp;<span class="op" id="7367363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367368">return</span>&nbsp;<span class="ident" id="7367375">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367379">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367385">return</span>&nbsp;<span class="op" id="7367392">-</span><span class="num" id="7367393">1</span><br>
<span class="lineno"></span><span class="op" id="7367395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7367398">func</span>&nbsp;<span class="ident" id="7367403">TestNormTables</span><span class="op" id="7367417">(</span><span class="ident" id="7367418">t</span>&nbsp;<span class="op" id="7367420">*</span><span class="ident" id="7367421">testing</span><span class="op" id="7367428">.</span><span class="ident" id="7367429">T</span><span class="op" id="7367430">)</span>&nbsp;<span class="op" id="7367432">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367435">testKn</span><span class="op" id="7367441">,</span>&nbsp;<span class="ident" id="7367443">testWn</span><span class="op" id="7367449">,</span>&nbsp;<span class="ident" id="7367451">testFn</span>&nbsp;<span class="op" id="7367458">:=</span>&nbsp;<span class="ident" id="7367461">initNorm</span><span class="op" id="7367469">(</span><span class="op" id="7367470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367473">if</span>&nbsp;<span class="ident" id="7367476">i</span>&nbsp;<span class="op" id="7367478">:=</span>&nbsp;<span class="ident" id="7367481">compareUint32Slices</span><span class="op" id="7367500">(</span><span class="ident" id="7367501">kn</span><span class="op" id="7367503">[</span><span class="num" id="7367504">0</span><span class="op" id="7367505">:</span><span class="op" id="7367506">]</span><span class="op" id="7367507">,</span>&nbsp;<span class="ident" id="7367509">testKn</span><span class="op" id="7367515">)</span><span class="op" id="7367516">;</span>&nbsp;<span class="ident" id="7367518">i</span>&nbsp;<span class="op" id="7367520">&gt;=</span>&nbsp;<span class="num" id="7367523">0</span>&nbsp;<span class="op" id="7367525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367529">t</span><span class="op" id="7367530">.</span><span class="ident" id="7367531">Errorf</span><span class="op" id="7367537">(</span><span class="string" id="7367538">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7367574">,</span>&nbsp;<span class="ident" id="7367576">i</span><span class="op" id="7367577">,</span>&nbsp;<span class="ident" id="7367579">kn</span><span class="op" id="7367581">[</span><span class="ident" id="7367582">i</span><span class="op" id="7367583">]</span><span class="op" id="7367584">,</span>&nbsp;<span class="ident" id="7367586">testKn</span><span class="op" id="7367592">[</span><span class="ident" id="7367593">i</span><span class="op" id="7367594">]</span><span class="op" id="7367595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367601">if</span>&nbsp;<span class="ident" id="7367604">i</span>&nbsp;<span class="op" id="7367606">:=</span>&nbsp;<span class="ident" id="7367609">compareFloat32Slices</span><span class="op" id="7367629">(</span><span class="ident" id="7367630">wn</span><span class="op" id="7367632">[</span><span class="num" id="7367633">0</span><span class="op" id="7367634">:</span><span class="op" id="7367635">]</span><span class="op" id="7367636">,</span>&nbsp;<span class="ident" id="7367638">testWn</span><span class="op" id="7367644">)</span><span class="op" id="7367645">;</span>&nbsp;<span class="ident" id="7367647">i</span>&nbsp;<span class="op" id="7367649">&gt;=</span>&nbsp;<span class="num" id="7367652">0</span>&nbsp;<span class="op" id="7367654">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367658">t</span><span class="op" id="7367659">.</span><span class="ident" id="7367660">Errorf</span><span class="op" id="7367666">(</span><span class="string" id="7367667">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7367703">,</span>&nbsp;<span class="ident" id="7367705">i</span><span class="op" id="7367706">,</span>&nbsp;<span class="ident" id="7367708">wn</span><span class="op" id="7367710">[</span><span class="ident" id="7367711">i</span><span class="op" id="7367712">]</span><span class="op" id="7367713">,</span>&nbsp;<span class="ident" id="7367715">testWn</span><span class="op" id="7367721">[</span><span class="ident" id="7367722">i</span><span class="op" id="7367723">]</span><span class="op" id="7367724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367730">if</span>&nbsp;<span class="ident" id="7367733">i</span>&nbsp;<span class="op" id="7367735">:=</span>&nbsp;<span class="ident" id="7367738">compareFloat32Slices</span><span class="op" id="7367758">(</span><span class="ident" id="7367759">fn</span><span class="op" id="7367761">[</span><span class="num" id="7367762">0</span><span class="op" id="7367763">:</span><span class="op" id="7367764">]</span><span class="op" id="7367765">,</span>&nbsp;<span class="ident" id="7367767">testFn</span><span class="op" id="7367773">)</span><span class="op" id="7367774">;</span>&nbsp;<span class="ident" id="7367776">i</span>&nbsp;<span class="op" id="7367778">&gt;=</span>&nbsp;<span class="num" id="7367781">0</span>&nbsp;<span class="op" id="7367783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367787">t</span><span class="op" id="7367788">.</span><span class="ident" id="7367789">Errorf</span><span class="op" id="7367795">(</span><span class="string" id="7367796">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7367832">,</span>&nbsp;<span class="ident" id="7367834">i</span><span class="op" id="7367835">,</span>&nbsp;<span class="ident" id="7367837">fn</span><span class="op" id="7367839">[</span><span class="ident" id="7367840">i</span><span class="op" id="7367841">]</span><span class="op" id="7367842">,</span>&nbsp;<span class="ident" id="7367844">testFn</span><span class="op" id="7367850">[</span><span class="ident" id="7367851">i</span><span class="op" id="7367852">]</span><span class="op" id="7367853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7367856">}</span><br>
<span class="lineno">310</span><span class="op" id="7367858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7367861">func</span>&nbsp;<span class="ident" id="7367866">TestExpTables</span><span class="op" id="7367879">(</span><span class="ident" id="7367880">t</span>&nbsp;<span class="op" id="7367882">*</span><span class="ident" id="7367883">testing</span><span class="op" id="7367890">.</span><span class="ident" id="7367891">T</span><span class="op" id="7367892">)</span>&nbsp;<span class="op" id="7367894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367897">testKe</span><span class="op" id="7367903">,</span>&nbsp;<span class="ident" id="7367905">testWe</span><span class="op" id="7367911">,</span>&nbsp;<span class="ident" id="7367913">testFe</span>&nbsp;<span class="op" id="7367920">:=</span>&nbsp;<span class="ident" id="7367923">initExp</span><span class="op" id="7367930">(</span><span class="op" id="7367931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7367934">if</span>&nbsp;<span class="ident" id="7367937">i</span>&nbsp;<span class="op" id="7367939">:=</span>&nbsp;<span class="ident" id="7367942">compareUint32Slices</span><span class="op" id="7367961">(</span><span class="ident" id="7367962">ke</span><span class="op" id="7367964">[</span><span class="num" id="7367965">0</span><span class="op" id="7367966">:</span><span class="op" id="7367967">]</span><span class="op" id="7367968">,</span>&nbsp;<span class="ident" id="7367970">testKe</span><span class="op" id="7367976">)</span><span class="op" id="7367977">;</span>&nbsp;<span class="ident" id="7367979">i</span>&nbsp;<span class="op" id="7367981">&gt;=</span>&nbsp;<span class="num" id="7367984">0</span>&nbsp;<span class="op" id="7367986">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7367990">t</span><span class="op" id="7367991">.</span><span class="ident" id="7367992">Errorf</span><span class="op" id="7367998">(</span><span class="string" id="7367999">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7368035">,</span>&nbsp;<span class="ident" id="7368037">i</span><span class="op" id="7368038">,</span>&nbsp;<span class="ident" id="7368040">ke</span><span class="op" id="7368042">[</span><span class="ident" id="7368043">i</span><span class="op" id="7368044">]</span><span class="op" id="7368045">,</span>&nbsp;<span class="ident" id="7368047">testKe</span><span class="op" id="7368053">[</span><span class="ident" id="7368054">i</span><span class="op" id="7368055">]</span><span class="op" id="7368056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368062">if</span>&nbsp;<span class="ident" id="7368065">i</span>&nbsp;<span class="op" id="7368067">:=</span>&nbsp;<span class="ident" id="7368070">compareFloat32Slices</span><span class="op" id="7368090">(</span><span class="ident" id="7368091">we</span><span class="op" id="7368093">[</span><span class="num" id="7368094">0</span><span class="op" id="7368095">:</span><span class="op" id="7368096">]</span><span class="op" id="7368097">,</span>&nbsp;<span class="ident" id="7368099">testWe</span><span class="op" id="7368105">)</span><span class="op" id="7368106">;</span>&nbsp;<span class="ident" id="7368108">i</span>&nbsp;<span class="op" id="7368110">&gt;=</span>&nbsp;<span class="num" id="7368113">0</span>&nbsp;<span class="op" id="7368115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368119">t</span><span class="op" id="7368120">.</span><span class="ident" id="7368121">Errorf</span><span class="op" id="7368127">(</span><span class="string" id="7368128">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7368164">,</span>&nbsp;<span class="ident" id="7368166">i</span><span class="op" id="7368167">,</span>&nbsp;<span class="ident" id="7368169">we</span><span class="op" id="7368171">[</span><span class="ident" id="7368172">i</span><span class="op" id="7368173">]</span><span class="op" id="7368174">,</span>&nbsp;<span class="ident" id="7368176">testWe</span><span class="op" id="7368182">[</span><span class="ident" id="7368183">i</span><span class="op" id="7368184">]</span><span class="op" id="7368185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368188">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368191">if</span>&nbsp;<span class="ident" id="7368194">i</span>&nbsp;<span class="op" id="7368196">:=</span>&nbsp;<span class="ident" id="7368199">compareFloat32Slices</span><span class="op" id="7368219">(</span><span class="ident" id="7368220">fe</span><span class="op" id="7368222">[</span><span class="num" id="7368223">0</span><span class="op" id="7368224">:</span><span class="op" id="7368225">]</span><span class="op" id="7368226">,</span>&nbsp;<span class="ident" id="7368228">testFe</span><span class="op" id="7368234">)</span><span class="op" id="7368235">;</span>&nbsp;<span class="ident" id="7368237">i</span>&nbsp;<span class="op" id="7368239">&gt;=</span>&nbsp;<span class="num" id="7368242">0</span>&nbsp;<span class="op" id="7368244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368248">t</span><span class="op" id="7368249">.</span><span class="ident" id="7368250">Errorf</span><span class="op" id="7368256">(</span><span class="string" id="7368257">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7368293">,</span>&nbsp;<span class="ident" id="7368295">i</span><span class="op" id="7368296">,</span>&nbsp;<span class="ident" id="7368298">fe</span><span class="op" id="7368300">[</span><span class="ident" id="7368301">i</span><span class="op" id="7368302">]</span><span class="op" id="7368303">,</span>&nbsp;<span class="ident" id="7368305">testFe</span><span class="op" id="7368311">[</span><span class="ident" id="7368312">i</span><span class="op" id="7368313">]</span><span class="op" id="7368314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368317">}</span><br>
<span class="lineno"></span><span class="op" id="7368319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7368322">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7368394">func</span>&nbsp;<span class="ident" id="7368399">TestFloat32</span><span class="op" id="7368410">(</span><span class="ident" id="7368411">t</span>&nbsp;<span class="op" id="7368413">*</span><span class="ident" id="7368414">testing</span><span class="op" id="7368421">.</span><span class="ident" id="7368422">T</span><span class="op" id="7368423">)</span>&nbsp;<span class="op" id="7368425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368428">r</span>&nbsp;<span class="op" id="7368430">:=</span>&nbsp;<span class="ident" id="7368433">New</span><span class="op" id="7368436">(</span><span class="ident" id="7368437">NewSource</span><span class="op" id="7368446">(</span><span class="num" id="7368447">1</span><span class="op" id="7368448">)</span><span class="op" id="7368449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368452">for</span>&nbsp;<span class="ident" id="7368456">ct</span>&nbsp;<span class="op" id="7368459">:=</span>&nbsp;<span class="num" id="7368462">0</span><span class="op" id="7368463">;</span>&nbsp;<span class="ident" id="7368465">ct</span>&nbsp;<span class="op" id="7368468">&lt;</span>&nbsp;<span class="num" id="7368470">10e6</span><span class="op" id="7368474">;</span>&nbsp;<span class="ident" id="7368476">ct</span><span class="op" id="7368478">++</span>&nbsp;<span class="op" id="7368481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368485">f</span>&nbsp;<span class="op" id="7368487">:=</span>&nbsp;<span class="ident" id="7368490">r</span><span class="op" id="7368491">.</span><span class="ident" id="7368492">Float32</span><span class="op" id="7368499">(</span><span class="op" id="7368500">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368504">if</span>&nbsp;<span class="ident" id="7368507">f</span>&nbsp;<span class="op" id="7368509">&gt;=</span>&nbsp;<span class="num" id="7368512">1</span>&nbsp;<span class="op" id="7368514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368519">t</span><span class="op" id="7368520">.</span><span class="ident" id="7368521">Fatal</span><span class="op" id="7368526">(</span><span class="string" id="7368527">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7368568">,</span>&nbsp;<span class="ident" id="7368570">ct</span><span class="op" id="7368572">,</span>&nbsp;<span class="string" id="7368574">&#34;f:&#34;</span><span class="op" id="7368578">,</span>&nbsp;<span class="ident" id="7368580">f</span><span class="op" id="7368581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368588">}</span><br>
<span class="lineno"></span><span class="op" id="7368590">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7368593">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368608">func</span>&nbsp;<span class="ident" id="7368613">BenchmarkInt63Threadsafe</span><span class="op" id="7368637">(</span><span class="ident" id="7368638">b</span>&nbsp;<span class="op" id="7368640">*</span><span class="ident" id="7368641">testing</span><span class="op" id="7368648">.</span><span class="ident" id="7368649">B</span><span class="op" id="7368650">)</span>&nbsp;<span class="op" id="7368652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368655">for</span>&nbsp;<span class="ident" id="7368659">n</span>&nbsp;<span class="op" id="7368661">:=</span>&nbsp;<span class="ident" id="7368664">b</span><span class="op" id="7368665">.</span><span class="ident" id="7368666">N</span><span class="op" id="7368667">;</span>&nbsp;<span class="ident" id="7368669">n</span>&nbsp;<span class="op" id="7368671">&gt;</span>&nbsp;<span class="num" id="7368673">0</span><span class="op" id="7368674">;</span>&nbsp;<span class="ident" id="7368676">n</span><span class="op" id="7368677">--</span>&nbsp;<span class="op" id="7368680">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368684">Int63</span><span class="op" id="7368689">(</span><span class="op" id="7368690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368693">}</span><br>
<span class="lineno"></span><span class="op" id="7368695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368698">func</span>&nbsp;<span class="ident" id="7368703">BenchmarkInt63Unthreadsafe</span><span class="op" id="7368729">(</span><span class="ident" id="7368730">b</span>&nbsp;<span class="op" id="7368732">*</span><span class="ident" id="7368733">testing</span><span class="op" id="7368740">.</span><span class="ident" id="7368741">B</span><span class="op" id="7368742">)</span>&nbsp;<span class="op" id="7368744">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368747">r</span>&nbsp;<span class="op" id="7368749">:=</span>&nbsp;<span class="ident" id="7368752">New</span><span class="op" id="7368755">(</span><span class="ident" id="7368756">NewSource</span><span class="op" id="7368765">(</span><span class="num" id="7368766">1</span><span class="op" id="7368767">)</span><span class="op" id="7368768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368771">for</span>&nbsp;<span class="ident" id="7368775">n</span>&nbsp;<span class="op" id="7368777">:=</span>&nbsp;<span class="ident" id="7368780">b</span><span class="op" id="7368781">.</span><span class="ident" id="7368782">N</span><span class="op" id="7368783">;</span>&nbsp;<span class="ident" id="7368785">n</span>&nbsp;<span class="op" id="7368787">&gt;</span>&nbsp;<span class="num" id="7368789">0</span><span class="op" id="7368790">;</span>&nbsp;<span class="ident" id="7368792">n</span><span class="op" id="7368793">--</span>&nbsp;<span class="op" id="7368796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368800">r</span><span class="op" id="7368801">.</span><span class="ident" id="7368802">Int63</span><span class="op" id="7368807">(</span><span class="op" id="7368808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368811">}</span><br>
<span class="lineno"></span><span class="op" id="7368813">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7368816">func</span>&nbsp;<span class="ident" id="7368821">BenchmarkIntn1000</span><span class="op" id="7368838">(</span><span class="ident" id="7368839">b</span>&nbsp;<span class="op" id="7368841">*</span><span class="ident" id="7368842">testing</span><span class="op" id="7368849">.</span><span class="ident" id="7368850">B</span><span class="op" id="7368851">)</span>&nbsp;<span class="op" id="7368853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368856">r</span>&nbsp;<span class="op" id="7368858">:=</span>&nbsp;<span class="ident" id="7368861">New</span><span class="op" id="7368864">(</span><span class="ident" id="7368865">NewSource</span><span class="op" id="7368874">(</span><span class="num" id="7368875">1</span><span class="op" id="7368876">)</span><span class="op" id="7368877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368880">for</span>&nbsp;<span class="ident" id="7368884">n</span>&nbsp;<span class="op" id="7368886">:=</span>&nbsp;<span class="ident" id="7368889">b</span><span class="op" id="7368890">.</span><span class="ident" id="7368891">N</span><span class="op" id="7368892">;</span>&nbsp;<span class="ident" id="7368894">n</span>&nbsp;<span class="op" id="7368896">&gt;</span>&nbsp;<span class="num" id="7368898">0</span><span class="op" id="7368899">;</span>&nbsp;<span class="ident" id="7368901">n</span><span class="op" id="7368902">--</span>&nbsp;<span class="op" id="7368905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368909">r</span><span class="op" id="7368910">.</span><span class="ident" id="7368911">Intn</span><span class="op" id="7368915">(</span><span class="num" id="7368916">1000</span><span class="op" id="7368920">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7368923">}</span><br>
<span class="lineno"></span><span class="op" id="7368925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7368928">func</span>&nbsp;<span class="ident" id="7368933">BenchmarkInt63n1000</span><span class="op" id="7368952">(</span><span class="ident" id="7368953">b</span>&nbsp;<span class="op" id="7368955">*</span><span class="ident" id="7368956">testing</span><span class="op" id="7368963">.</span><span class="ident" id="7368964">B</span><span class="op" id="7368965">)</span>&nbsp;<span class="op" id="7368967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7368970">r</span>&nbsp;<span class="op" id="7368972">:=</span>&nbsp;<span class="ident" id="7368975">New</span><span class="op" id="7368978">(</span><span class="ident" id="7368979">NewSource</span><span class="op" id="7368988">(</span><span class="num" id="7368989">1</span><span class="op" id="7368990">)</span><span class="op" id="7368991">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7368994">for</span>&nbsp;<span class="ident" id="7368998">n</span>&nbsp;<span class="op" id="7369000">:=</span>&nbsp;<span class="ident" id="7369003">b</span><span class="op" id="7369004">.</span><span class="ident" id="7369005">N</span><span class="op" id="7369006">;</span>&nbsp;<span class="ident" id="7369008">n</span>&nbsp;<span class="op" id="7369010">&gt;</span>&nbsp;<span class="num" id="7369012">0</span><span class="op" id="7369013">;</span>&nbsp;<span class="ident" id="7369015">n</span><span class="op" id="7369016">--</span>&nbsp;<span class="op" id="7369019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369023">r</span><span class="op" id="7369024">.</span><span class="ident" id="7369025">Int63n</span><span class="op" id="7369031">(</span><span class="num" id="7369032">1000</span><span class="op" id="7369036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369039">}</span><br>
<span class="lineno"></span><span class="op" id="7369041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7369044">func</span>&nbsp;<span class="ident" id="7369049">BenchmarkInt31n1000</span><span class="op" id="7369068">(</span><span class="ident" id="7369069">b</span>&nbsp;<span class="op" id="7369071">*</span><span class="ident" id="7369072">testing</span><span class="op" id="7369079">.</span><span class="ident" id="7369080">B</span><span class="op" id="7369081">)</span>&nbsp;<span class="op" id="7369083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369086">r</span>&nbsp;<span class="op" id="7369088">:=</span>&nbsp;<span class="ident" id="7369091">New</span><span class="op" id="7369094">(</span><span class="ident" id="7369095">NewSource</span><span class="op" id="7369104">(</span><span class="num" id="7369105">1</span><span class="op" id="7369106">)</span><span class="op" id="7369107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369110">for</span>&nbsp;<span class="ident" id="7369114">n</span>&nbsp;<span class="op" id="7369116">:=</span>&nbsp;<span class="ident" id="7369119">b</span><span class="op" id="7369120">.</span><span class="ident" id="7369121">N</span><span class="op" id="7369122">;</span>&nbsp;<span class="ident" id="7369124">n</span>&nbsp;<span class="op" id="7369126">&gt;</span>&nbsp;<span class="num" id="7369128">0</span><span class="op" id="7369129">;</span>&nbsp;<span class="ident" id="7369131">n</span><span class="op" id="7369132">--</span>&nbsp;<span class="op" id="7369135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369139">r</span><span class="op" id="7369140">.</span><span class="ident" id="7369141">Int31n</span><span class="op" id="7369147">(</span><span class="num" id="7369148">1000</span><span class="op" id="7369152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369155">}</span><br>
<span class="lineno">370</span><span class="op" id="7369157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369160">func</span>&nbsp;<span class="ident" id="7369165">BenchmarkFloat32</span><span class="op" id="7369181">(</span><span class="ident" id="7369182">b</span>&nbsp;<span class="op" id="7369184">*</span><span class="ident" id="7369185">testing</span><span class="op" id="7369192">.</span><span class="ident" id="7369193">B</span><span class="op" id="7369194">)</span>&nbsp;<span class="op" id="7369196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369199">r</span>&nbsp;<span class="op" id="7369201">:=</span>&nbsp;<span class="ident" id="7369204">New</span><span class="op" id="7369207">(</span><span class="ident" id="7369208">NewSource</span><span class="op" id="7369217">(</span><span class="num" id="7369218">1</span><span class="op" id="7369219">)</span><span class="op" id="7369220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369223">for</span>&nbsp;<span class="ident" id="7369227">n</span>&nbsp;<span class="op" id="7369229">:=</span>&nbsp;<span class="ident" id="7369232">b</span><span class="op" id="7369233">.</span><span class="ident" id="7369234">N</span><span class="op" id="7369235">;</span>&nbsp;<span class="ident" id="7369237">n</span>&nbsp;<span class="op" id="7369239">&gt;</span>&nbsp;<span class="num" id="7369241">0</span><span class="op" id="7369242">;</span>&nbsp;<span class="ident" id="7369244">n</span><span class="op" id="7369245">--</span>&nbsp;<span class="op" id="7369248">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369252">r</span><span class="op" id="7369253">.</span><span class="ident" id="7369254">Float32</span><span class="op" id="7369261">(</span><span class="op" id="7369262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369265">}</span><br>
<span class="lineno"></span><span class="op" id="7369267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369270">func</span>&nbsp;<span class="ident" id="7369275">BenchmarkFloat64</span><span class="op" id="7369291">(</span><span class="ident" id="7369292">b</span>&nbsp;<span class="op" id="7369294">*</span><span class="ident" id="7369295">testing</span><span class="op" id="7369302">.</span><span class="ident" id="7369303">B</span><span class="op" id="7369304">)</span>&nbsp;<span class="op" id="7369306">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369309">r</span>&nbsp;<span class="op" id="7369311">:=</span>&nbsp;<span class="ident" id="7369314">New</span><span class="op" id="7369317">(</span><span class="ident" id="7369318">NewSource</span><span class="op" id="7369327">(</span><span class="num" id="7369328">1</span><span class="op" id="7369329">)</span><span class="op" id="7369330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369333">for</span>&nbsp;<span class="ident" id="7369337">n</span>&nbsp;<span class="op" id="7369339">:=</span>&nbsp;<span class="ident" id="7369342">b</span><span class="op" id="7369343">.</span><span class="ident" id="7369344">N</span><span class="op" id="7369345">;</span>&nbsp;<span class="ident" id="7369347">n</span>&nbsp;<span class="op" id="7369349">&gt;</span>&nbsp;<span class="num" id="7369351">0</span><span class="op" id="7369352">;</span>&nbsp;<span class="ident" id="7369354">n</span><span class="op" id="7369355">--</span>&nbsp;<span class="op" id="7369358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369362">r</span><span class="op" id="7369363">.</span><span class="ident" id="7369364">Float64</span><span class="op" id="7369371">(</span><span class="op" id="7369372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369375">}</span><br>
<span class="lineno"></span><span class="op" id="7369377">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7369380">func</span>&nbsp;<span class="ident" id="7369385">BenchmarkPerm3</span><span class="op" id="7369399">(</span><span class="ident" id="7369400">b</span>&nbsp;<span class="op" id="7369402">*</span><span class="ident" id="7369403">testing</span><span class="op" id="7369410">.</span><span class="ident" id="7369411">B</span><span class="op" id="7369412">)</span>&nbsp;<span class="op" id="7369414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369417">r</span>&nbsp;<span class="op" id="7369419">:=</span>&nbsp;<span class="ident" id="7369422">New</span><span class="op" id="7369425">(</span><span class="ident" id="7369426">NewSource</span><span class="op" id="7369435">(</span><span class="num" id="7369436">1</span><span class="op" id="7369437">)</span><span class="op" id="7369438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369441">for</span>&nbsp;<span class="ident" id="7369445">n</span>&nbsp;<span class="op" id="7369447">:=</span>&nbsp;<span class="ident" id="7369450">b</span><span class="op" id="7369451">.</span><span class="ident" id="7369452">N</span><span class="op" id="7369453">;</span>&nbsp;<span class="ident" id="7369455">n</span>&nbsp;<span class="op" id="7369457">&gt;</span>&nbsp;<span class="num" id="7369459">0</span><span class="op" id="7369460">;</span>&nbsp;<span class="ident" id="7369462">n</span><span class="op" id="7369463">--</span>&nbsp;<span class="op" id="7369466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369470">r</span><span class="op" id="7369471">.</span><span class="ident" id="7369472">Perm</span><span class="op" id="7369476">(</span><span class="num" id="7369477">3</span><span class="op" id="7369478">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369481">}</span><br>
<span class="lineno"></span><span class="op" id="7369483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7369486">func</span>&nbsp;<span class="ident" id="7369491">BenchmarkPerm30</span><span class="op" id="7369506">(</span><span class="ident" id="7369507">b</span>&nbsp;<span class="op" id="7369509">*</span><span class="ident" id="7369510">testing</span><span class="op" id="7369517">.</span><span class="ident" id="7369518">B</span><span class="op" id="7369519">)</span>&nbsp;<span class="op" id="7369521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369524">r</span>&nbsp;<span class="op" id="7369526">:=</span>&nbsp;<span class="ident" id="7369529">New</span><span class="op" id="7369532">(</span><span class="ident" id="7369533">NewSource</span><span class="op" id="7369542">(</span><span class="num" id="7369543">1</span><span class="op" id="7369544">)</span><span class="op" id="7369545">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7369548">for</span>&nbsp;<span class="ident" id="7369552">n</span>&nbsp;<span class="op" id="7369554">:=</span>&nbsp;<span class="ident" id="7369557">b</span><span class="op" id="7369558">.</span><span class="ident" id="7369559">N</span><span class="op" id="7369560">;</span>&nbsp;<span class="ident" id="7369562">n</span>&nbsp;<span class="op" id="7369564">&gt;</span>&nbsp;<span class="num" id="7369566">0</span><span class="op" id="7369567">;</span>&nbsp;<span class="ident" id="7369569">n</span><span class="op" id="7369570">--</span>&nbsp;<span class="op" id="7369573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7369577">r</span><span class="op" id="7369578">.</span><span class="ident" id="7369579">Perm</span><span class="op" id="7369583">(</span><span class="num" id="7369584">30</span><span class="op" id="7369586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7369589">}</span><br>
<span class="lineno"></span><span class="op" id="7369591">}</span>
</div>
</body>
</html>
