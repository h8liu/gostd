<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/parser</h2>
<ul>
<li><a href="/gostd/go/parser/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/go/parser/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/parser/interface.go.html">interface.go</a></li>
<li><a href="/gostd/go/parser/parser.go.html">parser.go</a></li>
<li><a href="/gostd/go/parser/parser_test.go.html">parser_test.go</a></li>
<li><a href="/gostd/go/parser/performance_test.go.html" class="current">performance_test.go</a></li>
<li><a href="/gostd/go/parser/short_test.go.html">short_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7062641">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7062696">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7062750">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7062801">package</span>&nbsp;<span class="ident" id="7062809">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7062817">import</span>&nbsp;<span class="op" id="7062824">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7062827">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7062839">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7062852">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7062862">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7062865">var</span>&nbsp;<span class="ident" id="7062869">src</span>&nbsp;<span class="op" id="7062873">=</span>&nbsp;<span class="ident" id="7062875">readFile</span><span class="op" id="7062883">(</span><span class="string" id="7062884">&#34;parser.go&#34;</span><span class="op" id="7062895">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7062898">func</span>&nbsp;<span class="ident" id="7062903">readFile</span><span class="op" id="7062911">(</span><span class="ident" id="7062912">filename</span>&nbsp;<span class="builtintype" id="7062921">string</span><span class="op" id="7062927">)</span>&nbsp;<span class="op" id="7062929">[</span><span class="op" id="7062930">]</span><span class="builtintype" id="7062931">byte</span>&nbsp;<span class="op" id="7062936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062939">data</span><span class="op" id="7062943">,</span>&nbsp;<span class="ident" id="7062945">err</span>&nbsp;<span class="op" id="7062949">:=</span>&nbsp;<span class="ident" id="7062952">ioutil</span><span class="op" id="7062958">.</span><span class="ident" id="7062959">ReadFile</span><span class="op" id="7062967">(</span><span class="ident" id="7062968">filename</span><span class="op" id="7062976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7062979">if</span>&nbsp;<span class="ident" id="7062982">err</span>&nbsp;<span class="op" id="7062986">!=</span>&nbsp;<span class="ident" id="7062989">nil</span>&nbsp;<span class="op" id="7062993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7062997">panic</span><span class="op" id="7063002">(</span><span class="ident" id="7063003">err</span><span class="op" id="7063006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7063009">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7063012">return</span>&nbsp;<span class="ident" id="7063019">data</span><br>
<span class="lineno"></span><span class="op" id="7063024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7063027">func</span>&nbsp;<span class="ident" id="7063032">BenchmarkParse</span><span class="op" id="7063046">(</span><span class="ident" id="7063047">b</span>&nbsp;<span class="op" id="7063049">*</span><span class="ident" id="7063050">testing</span><span class="op" id="7063057">.</span><span class="ident" id="7063058">B</span><span class="op" id="7063059">)</span>&nbsp;<span class="op" id="7063061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7063064">b</span><span class="op" id="7063065">.</span><span class="ident" id="7063066">SetBytes</span><span class="op" id="7063074">(</span><span class="ident" id="7063075">int64</span><span class="op" id="7063080">(</span><span class="builtinfunc" id="7063081">len</span><span class="op" id="7063084">(</span><span class="ident" id="7063085">src</span><span class="op" id="7063088">)</span><span class="op" id="7063089">)</span><span class="op" id="7063090">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7063093">for</span>&nbsp;<span class="ident" id="7063097">i</span>&nbsp;<span class="op" id="7063099">:=</span>&nbsp;<span class="num" id="7063102">0</span><span class="op" id="7063103">;</span>&nbsp;<span class="ident" id="7063105">i</span>&nbsp;<span class="op" id="7063107">&lt;</span>&nbsp;<span class="ident" id="7063109">b</span><span class="op" id="7063110">.</span><span class="ident" id="7063111">N</span><span class="op" id="7063112">;</span>&nbsp;<span class="ident" id="7063114">i</span><span class="op" id="7063115">++</span>&nbsp;<span class="op" id="7063118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7063122">if</span>&nbsp;<span class="ident" id="7063125">_</span><span class="op" id="7063126">,</span>&nbsp;<span class="ident" id="7063128">err</span>&nbsp;<span class="op" id="7063132">:=</span>&nbsp;<span class="ident" id="7063135">ParseFile</span><span class="op" id="7063144">(</span><span class="ident" id="7063145">token</span><span class="op" id="7063150">.</span><span class="ident" id="7063151">NewFileSet</span><span class="op" id="7063161">(</span><span class="op" id="7063162">)</span><span class="op" id="7063163">,</span>&nbsp;<span class="string" id="7063165">&#34;&#34;</span><span class="op" id="7063167">,</span>&nbsp;<span class="ident" id="7063169">src</span><span class="op" id="7063172">,</span>&nbsp;<span class="ident" id="7063174">ParseComments</span><span class="op" id="7063187">)</span><span class="op" id="7063188">;</span>&nbsp;<span class="ident" id="7063190">err</span>&nbsp;<span class="op" id="7063194">!=</span>&nbsp;<span class="ident" id="7063197">nil</span>&nbsp;<span class="op" id="7063201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7063206">b</span><span class="op" id="7063207">.</span><span class="ident" id="7063208">Fatalf</span><span class="op" id="7063214">(</span><span class="string" id="7063215">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7063256">,</span>&nbsp;<span class="ident" id="7063258">err</span><span class="op" id="7063261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7063265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7063268">}</span><br>
<span class="lineno">30</span><span class="op" id="7063270">}</span>
</div>
</body>
</html>
