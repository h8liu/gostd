<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html" class="current">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4154188">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4154243">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4154297">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4154348">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4154413">//&nbsp;Read&nbsp;system&nbsp;port&nbsp;mappings&nbsp;from&nbsp;/etc/services</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4154462">package</span>&nbsp;<span class="ident" id="4154470">net</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4154475">import</span>&nbsp;<span class="string" id="4154482">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4154490">//&nbsp;services&nbsp;contains&nbsp;minimal&nbsp;mappings&nbsp;between&nbsp;services&nbsp;names&nbsp;and&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="4154560">//&nbsp;numbers&nbsp;for&nbsp;platforms&nbsp;that&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;complete&nbsp;list&nbsp;of&nbsp;port&nbsp;numbers</span><br>
<span class="lineno">15</span><span class="comment" id="4154633">//&nbsp;(some&nbsp;Solaris&nbsp;distros).</span><br>
<span class="lineno"></span><span class="keyword" id="4154660">var</span>&nbsp;<span class="ident" id="4154664">services</span>&nbsp;<span class="op" id="4154673">=</span>&nbsp;<span class="keyword" id="4154675">map</span><span class="op" id="4154678">[</span><span class="builtintype" id="4154679">string</span><span class="op" id="4154685">]</span><span class="keyword" id="4154686">map</span><span class="op" id="4154689">[</span><span class="builtintype" id="4154690">string</span><span class="op" id="4154696">]</span><span class="builtintype" id="4154697">int</span><span class="op" id="4154700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4154703">&#34;tcp&#34;</span><span class="op" id="4154708">:</span>&nbsp;<span class="op" id="4154710">{</span><span class="string" id="4154711">&#34;http&#34;</span><span class="op" id="4154717">:</span>&nbsp;<span class="num" id="4154719">80</span><span class="op" id="4154721">}</span><span class="op" id="4154722">,</span><br>
<span class="lineno"></span><span class="op" id="4154724">}</span><br>
<span class="lineno"></span><span class="keyword" id="4154726">var</span>&nbsp;<span class="ident" id="4154730">servicesError</span>&nbsp;<span class="builtintype" id="4154744">error</span><br>
<span class="lineno">20</span><span class="keyword" id="4154750">var</span>&nbsp;<span class="ident" id="4154754">onceReadServices</span>&nbsp;<span class="ident" id="4154771">sync</span><span class="op" id="4154775">.</span><span class="ident" id="4154776">Once</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4154782">func</span>&nbsp;<span class="ident" id="4154787">readServices</span><span class="op" id="4154799">(</span><span class="op" id="4154800">)</span>&nbsp;<span class="op" id="4154802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4154805">var</span>&nbsp;<span class="ident" id="4154809">file</span>&nbsp;<span class="op" id="4154814">*</span><span class="ident" id="4154815">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4154821">if</span>&nbsp;<span class="ident" id="4154824">file</span><span class="op" id="4154828">,</span>&nbsp;<span class="ident" id="4154830">servicesError</span>&nbsp;<span class="op" id="4154844">=</span>&nbsp;<span class="ident" id="4154846">open</span><span class="op" id="4154850">(</span><span class="string" id="4154851">&#34;/etc/services&#34;</span><span class="op" id="4154866">)</span><span class="op" id="4154867">;</span>&nbsp;<span class="ident" id="4154869">servicesError</span>&nbsp;<span class="op" id="4154883">!=</span>&nbsp;<span class="ident" id="4154886">nil</span>&nbsp;<span class="op" id="4154890">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4154894">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4154902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4154905">for</span>&nbsp;<span class="ident" id="4154909">line</span><span class="op" id="4154913">,</span>&nbsp;<span class="ident" id="4154915">ok</span>&nbsp;<span class="op" id="4154918">:=</span>&nbsp;<span class="ident" id="4154921">file</span><span class="op" id="4154925">.</span><span class="ident" id="4154926">readLine</span><span class="op" id="4154934">(</span><span class="op" id="4154935">)</span><span class="op" id="4154936">;</span>&nbsp;<span class="ident" id="4154938">ok</span><span class="op" id="4154940">;</span>&nbsp;<span class="ident" id="4154942">line</span><span class="op" id="4154946">,</span>&nbsp;<span class="ident" id="4154948">ok</span>&nbsp;<span class="op" id="4154951">=</span>&nbsp;<span class="ident" id="4154953">file</span><span class="op" id="4154957">.</span><span class="ident" id="4154958">readLine</span><span class="op" id="4154966">(</span><span class="op" id="4154967">)</span>&nbsp;<span class="op" id="4154969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4154973">//&nbsp;&#34;http&nbsp;80/tcp&nbsp;www&nbsp;www-http&nbsp;#&nbsp;World&nbsp;Wide&nbsp;Web&nbsp;HTTP&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155027">if</span>&nbsp;<span class="ident" id="4155030">i</span>&nbsp;<span class="op" id="4155032">:=</span>&nbsp;<span class="ident" id="4155035">byteIndex</span><span class="op" id="4155044">(</span><span class="ident" id="4155045">line</span><span class="op" id="4155049">,</span>&nbsp;<span class="string" id="4155051">&#39;#&#39;</span><span class="op" id="4155054">)</span><span class="op" id="4155055">;</span>&nbsp;<span class="ident" id="4155057">i</span>&nbsp;<span class="op" id="4155059">&gt;=</span>&nbsp;<span class="num" id="4155062">0</span>&nbsp;<span class="op" id="4155064">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155069">line</span>&nbsp;<span class="op" id="4155074">=</span>&nbsp;<span class="ident" id="4155076">line</span><span class="op" id="4155080">[</span><span class="num" id="4155081">0</span><span class="op" id="4155082">:</span><span class="ident" id="4155083">i</span><span class="op" id="4155084">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155092">f</span>&nbsp;<span class="op" id="4155094">:=</span>&nbsp;<span class="ident" id="4155097">getFields</span><span class="op" id="4155106">(</span><span class="ident" id="4155107">line</span><span class="op" id="4155111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155115">if</span>&nbsp;<span class="builtinfunc" id="4155118">len</span><span class="op" id="4155121">(</span><span class="ident" id="4155122">f</span><span class="op" id="4155123">)</span>&nbsp;<span class="op" id="4155125">&lt;</span>&nbsp;<span class="num" id="4155127">2</span>&nbsp;<span class="op" id="4155129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155134">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155149">portnet</span>&nbsp;<span class="op" id="4155157">:=</span>&nbsp;<span class="ident" id="4155160">f</span><span class="op" id="4155161">[</span><span class="num" id="4155162">1</span><span class="op" id="4155163">]</span>&nbsp;<span class="comment" id="4155165">//&nbsp;&#34;80/tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155179">port</span><span class="op" id="4155183">,</span>&nbsp;<span class="ident" id="4155185">j</span><span class="op" id="4155186">,</span>&nbsp;<span class="ident" id="4155188">ok</span>&nbsp;<span class="op" id="4155191">:=</span>&nbsp;<span class="ident" id="4155194">dtoi</span><span class="op" id="4155198">(</span><span class="ident" id="4155199">portnet</span><span class="op" id="4155206">,</span>&nbsp;<span class="num" id="4155208">0</span><span class="op" id="4155209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155213">if</span>&nbsp;<span class="op" id="4155216">!</span><span class="ident" id="4155217">ok</span>&nbsp;<span class="op" id="4155220">||</span>&nbsp;<span class="ident" id="4155223">port</span>&nbsp;<span class="op" id="4155228">&lt;=</span>&nbsp;<span class="num" id="4155231">0</span>&nbsp;<span class="op" id="4155233">||</span>&nbsp;<span class="ident" id="4155236">j</span>&nbsp;<span class="op" id="4155238">&gt;=</span>&nbsp;<span class="builtinfunc" id="4155241">len</span><span class="op" id="4155244">(</span><span class="ident" id="4155245">portnet</span><span class="op" id="4155252">)</span>&nbsp;<span class="op" id="4155254">||</span>&nbsp;<span class="ident" id="4155257">portnet</span><span class="op" id="4155264">[</span><span class="ident" id="4155265">j</span><span class="op" id="4155266">]</span>&nbsp;<span class="op" id="4155268">!=</span>&nbsp;<span class="string" id="4155271">&#39;/&#39;</span>&nbsp;<span class="op" id="4155275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155280">continue</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155295">netw</span>&nbsp;<span class="op" id="4155300">:=</span>&nbsp;<span class="ident" id="4155303">portnet</span><span class="op" id="4155310">[</span><span class="ident" id="4155311">j</span><span class="op" id="4155312">+</span><span class="num" id="4155313">1</span><span class="op" id="4155314">:</span><span class="op" id="4155315">]</span>&nbsp;<span class="comment" id="4155317">//&nbsp;&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155328">m</span><span class="op" id="4155329">,</span>&nbsp;<span class="ident" id="4155331">ok1</span>&nbsp;<span class="op" id="4155335">:=</span>&nbsp;<span class="ident" id="4155338">services</span><span class="op" id="4155346">[</span><span class="ident" id="4155347">netw</span><span class="op" id="4155351">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155355">if</span>&nbsp;<span class="op" id="4155358">!</span><span class="ident" id="4155359">ok1</span>&nbsp;<span class="op" id="4155363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155368">m</span>&nbsp;<span class="op" id="4155370">=</span>&nbsp;<span class="builtinfunc" id="4155372">make</span><span class="op" id="4155376">(</span><span class="keyword" id="4155377">map</span><span class="op" id="4155380">[</span><span class="builtintype" id="4155381">string</span><span class="op" id="4155387">]</span><span class="builtintype" id="4155388">int</span><span class="op" id="4155391">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155396">services</span><span class="op" id="4155404">[</span><span class="ident" id="4155405">netw</span><span class="op" id="4155409">]</span>&nbsp;<span class="op" id="4155411">=</span>&nbsp;<span class="ident" id="4155413">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155421">for</span>&nbsp;<span class="ident" id="4155425">i</span>&nbsp;<span class="op" id="4155427">:=</span>&nbsp;<span class="num" id="4155430">0</span><span class="op" id="4155431">;</span>&nbsp;<span class="ident" id="4155433">i</span>&nbsp;<span class="op" id="4155435">&lt;</span>&nbsp;<span class="builtinfunc" id="4155437">len</span><span class="op" id="4155440">(</span><span class="ident" id="4155441">f</span><span class="op" id="4155442">)</span><span class="op" id="4155443">;</span>&nbsp;<span class="ident" id="4155445">i</span><span class="op" id="4155446">++</span>&nbsp;<span class="op" id="4155449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155454">if</span>&nbsp;<span class="ident" id="4155457">i</span>&nbsp;<span class="op" id="4155459">!=</span>&nbsp;<span class="num" id="4155462">1</span>&nbsp;<span class="op" id="4155464">{</span>&nbsp;<span class="comment" id="4155466">//&nbsp;f[1]&nbsp;was&nbsp;port/net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155491">m</span><span class="op" id="4155492">[</span><span class="ident" id="4155493">f</span><span class="op" id="4155494">[</span><span class="ident" id="4155495">i</span><span class="op" id="4155496">]</span><span class="op" id="4155497">]</span>&nbsp;<span class="op" id="4155499">=</span>&nbsp;<span class="ident" id="4155501">port</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155519">file</span><span class="op" id="4155523">.</span><span class="builtinfunc" id="4155524">close</span><span class="op" id="4155529">(</span><span class="op" id="4155530">)</span><br>
<span class="lineno"></span><span class="op" id="4155532">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4155535">//&nbsp;goLookupPort&nbsp;is&nbsp;the&nbsp;native&nbsp;Go&nbsp;implementation&nbsp;of&nbsp;LookupPort.</span><br>
<span class="lineno"></span><span class="keyword" id="4155598">func</span>&nbsp;<span class="ident" id="4155603">goLookupPort</span><span class="op" id="4155615">(</span><span class="ident" id="4155616">network</span><span class="op" id="4155623">,</span>&nbsp;<span class="ident" id="4155625">service</span>&nbsp;<span class="builtintype" id="4155633">string</span><span class="op" id="4155639">)</span>&nbsp;<span class="op" id="4155641">(</span><span class="ident" id="4155642">port</span>&nbsp;<span class="builtintype" id="4155647">int</span><span class="op" id="4155650">,</span>&nbsp;<span class="ident" id="4155652">err</span>&nbsp;<span class="builtintype" id="4155656">error</span><span class="op" id="4155661">)</span>&nbsp;<span class="op" id="4155663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155666">onceReadServices</span><span class="op" id="4155682">.</span><span class="ident" id="4155683">Do</span><span class="op" id="4155685">(</span><span class="ident" id="4155686">readServices</span><span class="op" id="4155698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155702">switch</span>&nbsp;<span class="ident" id="4155709">network</span>&nbsp;<span class="op" id="4155717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155720">case</span>&nbsp;<span class="string" id="4155725">&#34;tcp4&#34;</span><span class="op" id="4155731">,</span>&nbsp;<span class="string" id="4155733">&#34;tcp6&#34;</span><span class="op" id="4155739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155743">network</span>&nbsp;<span class="op" id="4155751">=</span>&nbsp;<span class="string" id="4155753">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155760">case</span>&nbsp;<span class="string" id="4155765">&#34;udp4&#34;</span><span class="op" id="4155771">,</span>&nbsp;<span class="string" id="4155773">&#34;udp6&#34;</span><span class="op" id="4155779">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4155783">network</span>&nbsp;<span class="op" id="4155791">=</span>&nbsp;<span class="string" id="4155793">&#34;udp&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155804">if</span>&nbsp;<span class="ident" id="4155807">m</span><span class="op" id="4155808">,</span>&nbsp;<span class="ident" id="4155810">ok</span>&nbsp;<span class="op" id="4155813">:=</span>&nbsp;<span class="ident" id="4155816">services</span><span class="op" id="4155824">[</span><span class="ident" id="4155825">network</span><span class="op" id="4155832">]</span><span class="op" id="4155833">;</span>&nbsp;<span class="ident" id="4155835">ok</span>&nbsp;<span class="op" id="4155838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155842">if</span>&nbsp;<span class="ident" id="4155845">port</span><span class="op" id="4155849">,</span>&nbsp;<span class="ident" id="4155851">ok</span>&nbsp;<span class="op" id="4155854">=</span>&nbsp;<span class="ident" id="4155856">m</span><span class="op" id="4155857">[</span><span class="ident" id="4155858">service</span><span class="op" id="4155865">]</span><span class="op" id="4155866">;</span>&nbsp;<span class="ident" id="4155868">ok</span>&nbsp;<span class="op" id="4155871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155876">return</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4155888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4155891">return</span>&nbsp;<span class="num" id="4155898">0</span><span class="op" id="4155899">,</span>&nbsp;<span class="op" id="4155901">&amp;</span><span class="ident" id="4155902">AddrError</span><span class="op" id="4155911">{</span><span class="string" id="4155912">&#34;unknown&nbsp;port&#34;</span><span class="op" id="4155926">,</span>&nbsp;<span class="ident" id="4155928">network</span>&nbsp;<span class="op" id="4155936">+</span>&nbsp;<span class="string" id="4155938">&#34;/&#34;</span>&nbsp;<span class="op" id="4155942">+</span>&nbsp;<span class="ident" id="4155944">service</span><span class="op" id="4155951">}</span><br>
<span class="lineno"></span><span class="op" id="4155953">}</span>
</div>
</body>
</html>
